var bce=Object.defineProperty;var wce=(e,t,r)=>t in e?bce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var LN=(e,t,r)=>wce(e,typeof t!="symbol"?t+"":t,r);function Cce(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Gdt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ece(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var ON={exports:{}},r1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GO;function _ce(){if(GO)return r1;GO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:s,ref:a!==void 0?a:null,props:i}}return r1.Fragment=t,r1.jsx=r,r1.jsxs=r,r1}var qO;function Sce(){return qO||(qO=1,ON.exports=_ce()),ON.exports}var d=Sce(),UN={exports:{}},Wr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $O;function Tce(){if($O)return Wr;$O=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),A=Symbol.iterator;function h(K){return K===null||typeof K!="object"?null:(K=A&&K[A]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function y(K,se,U){this.props=K,this.context=se,this.refs=g,this.updater=U||m}y.prototype.isReactComponent={},y.prototype.setState=function(K,se){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,se,"setState")},y.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function w(){}w.prototype=y.prototype;function T(K,se,U){this.props=K,this.context=se,this.refs=g,this.updater=U||m}var N=T.prototype=new w;N.constructor=T,v(N,y.prototype),N.isPureReactComponent=!0;var F=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function E(K,se,U,Y,Z,ne){return U=ne.ref,{$$typeof:e,type:K,key:se,ref:U!==void 0?U:null,props:ne}}function S(K,se){return E(K.type,se,void 0,void 0,void 0,K.props)}function k(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function H(K){var se={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(U){return se[U]})}var P=/\/+/g;function M(K,se){return typeof K=="object"&&K!==null&&K.key!=null?H(""+K.key):se.toString(36)}function Q(){}function V(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(Q,Q):(K.status="pending",K.then(function(se){K.status==="pending"&&(K.status="fulfilled",K.value=se)},function(se){K.status==="pending"&&(K.status="rejected",K.reason=se)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function te(K,se,U,Y,Z){var ne=typeof K;(ne==="undefined"||ne==="boolean")&&(K=null);var de=!1;if(K===null)de=!0;else switch(ne){case"bigint":case"string":case"number":de=!0;break;case"object":switch(K.$$typeof){case e:case t:de=!0;break;case u:return de=K._init,te(de(K._payload),se,U,Y,Z)}}if(de)return Z=Z(K),de=Y===""?"."+M(K,0):Y,F(Z)?(U="",de!=null&&(U=de.replace(P,"$&/")+"/"),te(Z,se,U,"",function(ae){return ae})):Z!=null&&(k(Z)&&(Z=S(Z,U+(Z.key==null||K&&K.key===Z.key?"":(""+Z.key).replace(P,"$&/")+"/")+de)),se.push(Z)),1;de=0;var xe=Y===""?".":Y+":";if(F(K))for(var Ae=0;Ae<K.length;Ae++)Y=K[Ae],ne=xe+M(Y,Ae),de+=te(Y,se,U,ne,Z);else if(Ae=h(K),typeof Ae=="function")for(K=Ae.call(K),Ae=0;!(Y=K.next()).done;)Y=Y.value,ne=xe+M(Y,Ae++),de+=te(Y,se,U,ne,Z);else if(ne==="object"){if(typeof K.then=="function")return te(V(K),se,U,Y,Z);throw se=String(K),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return de}function W(K,se,U){if(K==null)return K;var Y=[],Z=0;return te(K,Y,"","",function(ne){return se.call(U,ne,Z++)}),Y}function re(K){if(K._status===-1){var se=K._result;se=se(),se.then(function(U){(K._status===0||K._status===-1)&&(K._status=1,K._result=U)},function(U){(K._status===0||K._status===-1)&&(K._status=2,K._result=U)}),K._status===-1&&(K._status=0,K._result=se)}if(K._status===1)return K._result.default;throw K._result}var z=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function X(){}return Wr.Children={map:W,forEach:function(K,se,U){W(K,function(){se.apply(this,arguments)},U)},count:function(K){var se=0;return W(K,function(){se++}),se},toArray:function(K){return W(K,function(se){return se})||[]},only:function(K){if(!k(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Wr.Component=y,Wr.Fragment=r,Wr.Profiler=a,Wr.PureComponent=T,Wr.StrictMode=n,Wr.Suspense=l,Wr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Wr.__COMPILER_RUNTIME={__proto__:null,c:function(K){return B.H.useMemoCache(K)}},Wr.cache=function(K){return function(){return K.apply(null,arguments)}},Wr.cloneElement=function(K,se,U){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Y=v({},K.props),Z=K.key,ne=void 0;if(se!=null)for(de in se.ref!==void 0&&(ne=void 0),se.key!==void 0&&(Z=""+se.key),se)!D.call(se,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&se.ref===void 0||(Y[de]=se[de]);var de=arguments.length-2;if(de===1)Y.children=U;else if(1<de){for(var xe=Array(de),Ae=0;Ae<de;Ae++)xe[Ae]=arguments[Ae+2];Y.children=xe}return E(K.type,Z,void 0,void 0,ne,Y)},Wr.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},Wr.createElement=function(K,se,U){var Y,Z={},ne=null;if(se!=null)for(Y in se.key!==void 0&&(ne=""+se.key),se)D.call(se,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(Z[Y]=se[Y]);var de=arguments.length-2;if(de===1)Z.children=U;else if(1<de){for(var xe=Array(de),Ae=0;Ae<de;Ae++)xe[Ae]=arguments[Ae+2];Z.children=xe}if(K&&K.defaultProps)for(Y in de=K.defaultProps,de)Z[Y]===void 0&&(Z[Y]=de[Y]);return E(K,ne,void 0,void 0,null,Z)},Wr.createRef=function(){return{current:null}},Wr.forwardRef=function(K){return{$$typeof:o,render:K}},Wr.isValidElement=k,Wr.lazy=function(K){return{$$typeof:u,_payload:{_status:-1,_result:K},_init:re}},Wr.memo=function(K,se){return{$$typeof:c,type:K,compare:se===void 0?null:se}},Wr.startTransition=function(K){var se=B.T,U={};B.T=U;try{var Y=K(),Z=B.S;Z!==null&&Z(U,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(X,z)}catch(ne){z(ne)}finally{B.T=se}},Wr.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Wr.use=function(K){return B.H.use(K)},Wr.useActionState=function(K,se,U){return B.H.useActionState(K,se,U)},Wr.useCallback=function(K,se){return B.H.useCallback(K,se)},Wr.useContext=function(K){return B.H.useContext(K)},Wr.useDebugValue=function(){},Wr.useDeferredValue=function(K,se){return B.H.useDeferredValue(K,se)},Wr.useEffect=function(K,se,U){var Y=B.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(K,se)},Wr.useId=function(){return B.H.useId()},Wr.useImperativeHandle=function(K,se,U){return B.H.useImperativeHandle(K,se,U)},Wr.useInsertionEffect=function(K,se){return B.H.useInsertionEffect(K,se)},Wr.useLayoutEffect=function(K,se){return B.H.useLayoutEffect(K,se)},Wr.useMemo=function(K,se){return B.H.useMemo(K,se)},Wr.useOptimistic=function(K,se){return B.H.useOptimistic(K,se)},Wr.useReducer=function(K,se,U){return B.H.useReducer(K,se,U)},Wr.useRef=function(K){return B.H.useRef(K)},Wr.useState=function(K){return B.H.useState(K)},Wr.useSyncExternalStore=function(K,se,U){return B.H.useSyncExternalStore(K,se,U)},Wr.useTransition=function(){return B.H.useTransition()},Wr.version="19.1.1",Wr}var KO;function Gv(){return KO||(KO=1,UN.exports=Tce()),UN.exports}var L=Gv();const ft=mc(L),Nce=Cce({__proto__:null,default:ft},[L]);var jN={exports:{}},n1={},HN={exports:{}},QN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WO;function Bce(){return WO||(WO=1,function(e){function t(W,re){var z=W.length;W.push(re);e:for(;0<z;){var X=z-1>>>1,K=W[X];if(0<a(K,re))W[X]=re,W[z]=K,z=X;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var re=W[0],z=W.pop();if(z!==re){W[0]=z;e:for(var X=0,K=W.length,se=K>>>1;X<se;){var U=2*(X+1)-1,Y=W[U],Z=U+1,ne=W[Z];if(0>a(Y,z))Z<K&&0>a(ne,Y)?(W[X]=ne,W[Z]=z,X=Z):(W[X]=Y,W[U]=z,X=U);else if(Z<K&&0>a(ne,z))W[X]=ne,W[Z]=z,X=Z;else break e}}return re}function a(W,re){var z=W.sortIndex-re.sortIndex;return z!==0?z:W.id-re.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,A=null,h=3,m=!1,v=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function F(W){for(var re=r(c);re!==null;){if(re.callback===null)n(c);else if(re.startTime<=W)n(c),re.sortIndex=re.expirationTime,t(l,re);else break;re=r(c)}}function B(W){if(g=!1,F(W),!v)if(r(l)!==null)v=!0,D||(D=!0,M());else{var re=r(c);re!==null&&te(B,re.startTime-W)}}var D=!1,E=-1,S=5,k=-1;function H(){return y?!0:!(e.unstable_now()-k<S)}function P(){if(y=!1,D){var W=e.unstable_now();k=W;var re=!0;try{e:{v=!1,g&&(g=!1,T(E),E=-1),m=!0;var z=h;try{t:{for(F(W),A=r(l);A!==null&&!(A.expirationTime>W&&H());){var X=A.callback;if(typeof X=="function"){A.callback=null,h=A.priorityLevel;var K=X(A.expirationTime<=W);if(W=e.unstable_now(),typeof K=="function"){A.callback=K,F(W),re=!0;break t}A===r(l)&&n(l),F(W)}else n(l);A=r(l)}if(A!==null)re=!0;else{var se=r(c);se!==null&&te(B,se.startTime-W),re=!1}}break e}finally{A=null,h=z,m=!1}re=void 0}}finally{re?M():D=!1}}}var M;if(typeof N=="function")M=function(){N(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,V=Q.port2;Q.port1.onmessage=P,M=function(){V.postMessage(null)}}else M=function(){w(P,0)};function te(W,re){E=w(function(){W(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(W){switch(h){case 1:case 2:case 3:var re=3;break;default:re=h}var z=h;h=re;try{return W()}finally{h=z}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var z=h;h=W;try{return re()}finally{h=z}},e.unstable_scheduleCallback=function(W,re,z){var X=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?X+z:X):z=X,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,W={id:u++,callback:re,priorityLevel:W,startTime:z,expirationTime:K,sortIndex:-1},z>X?(W.sortIndex=z,t(c,W),r(l)===null&&W===r(c)&&(g?(T(E),E=-1):g=!0,te(B,z-X))):(W.sortIndex=K,t(l,W),v||m||(v=!0,D||(D=!0,M()))),W},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(W){var re=h;return function(){var z=h;h=re;try{return W.apply(this,arguments)}finally{h=z}}}}(QN)),QN}var YO;function kce(){return YO||(YO=1,HN.exports=Bce()),HN.exports}var VN={exports:{}},po={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XO;function Ice(){if(XO)return po;XO=1;var e=Gv();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,c,u){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:A==null?null:""+A,children:l,containerInfo:c,implementation:u}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return po.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,po.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(l,c,null,u)},po.flushSync=function(l){var c=s.T,u=n.p;try{if(s.T=null,n.p=2,l)return l()}finally{s.T=c,n.p=u,n.d.f()}},po.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},po.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},po.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,A=o(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:A,integrity:h,fetchPriority:m}):u==="script"&&n.d.X(l,{crossOrigin:A,integrity:h,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},po.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},po.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,A=o(u,c.crossOrigin);n.d.L(l,u,{crossOrigin:A,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},po.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},po.requestFormReset=function(l){n.d.r(l)},po.unstable_batchedUpdates=function(l,c){return l(c)},po.useFormState=function(l,c,u){return s.H.useFormState(l,c,u)},po.useFormStatus=function(){return s.H.useHostTransitionStatus()},po.version="19.1.1",po}var JO;function rK(){if(JO)return VN.exports;JO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),VN.exports=Ice(),VN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZO;function Fce(){if(ZO)return n1;ZO=1;var e=kce(),t=Gv(),r=rK();function n(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function i(f){var p=f,x=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(x=p.return),f=p.return;while(f)}return p.tag===3?x:null}function s(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function o(f){if(i(f)!==f)throw Error(n(188))}function l(f){var p=f.alternate;if(!p){if(p=i(f),p===null)throw Error(n(188));return p!==f?null:f}for(var x=f,_=p;;){var O=x.return;if(O===null)break;var G=O.alternate;if(G===null){if(_=O.return,_!==null){x=_;continue}break}if(O.child===G.child){for(G=O.child;G;){if(G===x)return o(O),f;if(G===_)return o(O),p;G=G.sibling}throw Error(n(188))}if(x.return!==_.return)x=O,_=G;else{for(var fe=!1,we=O.child;we;){if(we===x){fe=!0,x=O,_=G;break}if(we===_){fe=!0,_=O,x=G;break}we=we.sibling}if(!fe){for(we=G.child;we;){if(we===x){fe=!0,x=G,_=O;break}if(we===_){fe=!0,_=G,x=O;break}we=we.sibling}if(!fe)throw Error(n(189))}}if(x.alternate!==_)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?f:p}function c(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=c(f),p!==null)return p;f=f.sibling}return null}var u=Object.assign,A=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function M(f){return f===null||typeof f!="object"?null:(f=P&&f[P]||f["@@iterator"],typeof f=="function"?f:null)}var Q=Symbol.for("react.client.reference");function V(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===Q?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case B:return"Suspense";case D:return"SuspenseList";case k:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case m:return"Portal";case N:return(f.displayName||"Context")+".Provider";case T:return(f._context.displayName||"Context")+".Consumer";case F:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case E:return p=f.displayName||null,p!==null?p:V(f.type)||"Memo";case S:p=f._payload,f=f._init;try{return V(f(p))}catch{}}return null}var te=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},X=[],K=-1;function se(f){return{current:f}}function U(f){0>K||(f.current=X[K],X[K]=null,K--)}function Y(f,p){K++,X[K]=f.current,f.current=p}var Z=se(null),ne=se(null),de=se(null),xe=se(null);function Ae(f,p){switch(Y(de,p),Y(ne,f),Y(Z,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?xO(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=xO(p),f=yO(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}U(Z),Y(Z,f)}function ae(){U(Z),U(ne),U(de)}function ue(f){f.memoizedState!==null&&Y(xe,f);var p=Z.current,x=yO(p,f.type);p!==x&&(Y(ne,f),Y(Z,x))}function le(f){ne.current===f&&(U(Z),U(ne)),xe.current===f&&(U(xe),Xx._currentValue=z)}var ie=Object.prototype.hasOwnProperty,De=e.unstable_scheduleCallback,Le=e.unstable_cancelCallback,Be=e.unstable_shouldYield,Ce=e.unstable_requestPaint,Re=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,We=e.unstable_ImmediatePriority,ct=e.unstable_UserBlockingPriority,wt=e.unstable_NormalPriority,ot=e.unstable_LowPriority,Rt=e.unstable_IdlePriority,Pt=e.log,Xt=e.unstable_setDisableYieldValue,Mt=null,Qt=null;function $t(f){if(typeof Pt=="function"&&Xt(f),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Mt,f)}catch{}}var It=Math.clz32?Math.clz32:Br,Dt=Math.log,gt=Math.LN2;function Br(f){return f>>>=0,f===0?32:31-(Dt(f)/gt|0)|0}var Zt=256,yn=4194304;function _r(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Vr(f,p,x){var _=f.pendingLanes;if(_===0)return 0;var O=0,G=f.suspendedLanes,fe=f.pingedLanes;f=f.warmLanes;var we=_&134217727;return we!==0?(_=we&~G,_!==0?O=_r(_):(fe&=we,fe!==0?O=_r(fe):x||(x=we&~f,x!==0&&(O=_r(x))))):(we=_&~G,we!==0?O=_r(we):fe!==0?O=_r(fe):x||(x=_&~f,x!==0&&(O=_r(x)))),O===0?0:p!==0&&p!==O&&(p&G)===0&&(G=O&-O,x=p&-p,G>=x||G===32&&(x&4194048)!==0)?p:O}function jn(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function Ur(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ii(){var f=Zt;return Zt<<=1,(Zt&4194048)===0&&(Zt=256),f}function dn(){var f=yn;return yn<<=1,(yn&62914560)===0&&(yn=4194304),f}function ma(f){for(var p=[],x=0;31>x;x++)p.push(f);return p}function Ra(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Gr(f,p,x,_,O,G){var fe=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var we=f.entanglements,Pe=f.expirationTimes,rt=f.hiddenUpdates;for(x=fe&~x;0<x;){var ht=31-It(x),Ct=1<<ht;we[ht]=0,Pe[ht]=-1;var at=rt[ht];if(at!==null)for(rt[ht]=null,ht=0;ht<at.length;ht++){var it=at[ht];it!==null&&(it.lane&=-536870913)}x&=~Ct}_!==0&&sr(f,_,0),G!==0&&O===0&&f.tag!==0&&(f.suspendedLanes|=G&~(fe&~p))}function sr(f,p,x){f.pendingLanes|=p,f.suspendedLanes&=~p;var _=31-It(p);f.entangledLanes|=p,f.entanglements[_]=f.entanglements[_]|1073741824|x&4194090}function Xr(f,p){var x=f.entangledLanes|=p;for(f=f.entanglements;x;){var _=31-It(x),O=1<<_;O&p|f[_]&p&&(f[_]|=p),x&=~O}}function Fi(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function la(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Qa(){var f=re.p;return f!==0?f:(f=window.event,f===void 0?32:UO(f.type))}function Zi(f,p){var x=re.p;try{return re.p=f,p()}finally{re.p=x}}var qt=Math.random().toString(36).slice(2),bn="__reactFiber$"+qt,fn="__reactProps$"+qt,Hn="__reactContainer$"+qt,Yn="__reactEvents$"+qt,ca="__reactListeners$"+qt,me="__reactHandles$"+qt,ke="__reactResources$"+qt,_e="__reactMarker$"+qt;function Se(f){delete f[bn],delete f[fn],delete f[Yn],delete f[ca],delete f[me]}function Te(f){var p=f[bn];if(p)return p;for(var x=f.parentNode;x;){if(p=x[Hn]||x[bn]){if(x=p.alternate,p.child!==null||x!==null&&x.child!==null)for(f=EO(f);f!==null;){if(x=f[bn])return x;f=EO(f)}return p}f=x,x=f.parentNode}return null}function Ie(f){if(f=f[bn]||f[Hn]){var p=f.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return f}return null}function Ke(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(n(33))}function nt(f){var p=f[ke];return p||(p=f[ke]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function ze(f){f[_e]=!0}var Xe=new Set,et={};function bt(f,p){kt(f,p),kt(f+"Capture",p)}function kt(f,p){for(et[f]=p,f=0;f<p.length;f++)Xe.add(p[f])}var Vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bt={},Lt={};function mr(f){return ie.call(Lt,f)?!0:ie.call(Bt,f)?!1:Vt.test(f)?Lt[f]=!0:(Bt[f]=!0,!1)}function qr(f,p,x){if(mr(p))if(x===null)f.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var _=p.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+x)}}function $r(f,p,x){if(x===null)f.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+x)}}function Jr(f,p,x,_){if(_===null)f.removeAttribute(x);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttributeNS(p,x,""+_)}}var Ja,no;function Za(f){if(Ja===void 0)try{throw Error()}catch(x){var p=x.stack.trim().match(/\n( *(at )?)/);Ja=p&&p[1]||"",no=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ja+f+no}var Di=!1;function hi(f,p){if(!f||Di)return"";Di=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(p){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(it){var at=it}Reflect.construct(f,[],Ct)}else{try{Ct.call()}catch(it){at=it}f.call(Ct.prototype)}}else{try{throw Error()}catch(it){at=it}(Ct=f())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(it){if(it&&at&&typeof it.stack=="string")return[it.stack,at.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var G=_.DetermineComponentFrameRoot(),fe=G[0],we=G[1];if(fe&&we){var Pe=fe.split(`
`),rt=we.split(`
`);for(O=_=0;_<Pe.length&&!Pe[_].includes("DetermineComponentFrameRoot");)_++;for(;O<rt.length&&!rt[O].includes("DetermineComponentFrameRoot");)O++;if(_===Pe.length||O===rt.length)for(_=Pe.length-1,O=rt.length-1;1<=_&&0<=O&&Pe[_]!==rt[O];)O--;for(;1<=_&&0<=O;_--,O--)if(Pe[_]!==rt[O]){if(_!==1||O!==1)do if(_--,O--,0>O||Pe[_]!==rt[O]){var ht=`
`+Pe[_].replace(" at new "," at ");return f.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",f.displayName)),ht}while(1<=_&&0<=O);break}}}finally{Di=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?Za(x):""}function es(f){switch(f.tag){case 26:case 27:case 5:return Za(f.type);case 16:return Za("Lazy");case 13:return Za("Suspense");case 19:return Za("SuspenseList");case 0:case 15:return hi(f.type,!1);case 11:return hi(f.type.render,!1);case 1:return hi(f.type,!0);case 31:return Za("Activity");default:return""}}function ua(f){try{var p="";do p+=es(f),f=f.return;while(f);return p}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function Ri(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ld(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function HA(f){var p=ld(f)?"checked":"value",x=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),_=""+f[p];if(!f.hasOwnProperty(p)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var O=x.get,G=x.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return O.call(this)},set:function(fe){_=""+fe,G.call(this,fe)}}),Object.defineProperty(f,p,{enumerable:x.enumerable}),{getValue:function(){return _},setValue:function(fe){_=""+fe},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function vc(f){f._valueTracker||(f._valueTracker=HA(f))}function yf(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var x=p.getValue(),_="";return f&&(_=ld(f)?f.checked?"true":"false":f.value),f=_,f!==x?(p.setValue(f),!0):!1}function ts(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var cd=/[\n"\\]/g;function wn(f){return f.replace(cd,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function rs(f,p,x,_,O,G,fe,we){f.name="",fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?f.type=fe:f.removeAttribute("type"),p!=null?fe==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+Ri(p)):f.value!==""+Ri(p)&&(f.value=""+Ri(p)):fe!=="submit"&&fe!=="reset"||f.removeAttribute("value"),p!=null?yc(f,fe,Ri(p)):x!=null?yc(f,fe,Ri(x)):_!=null&&f.removeAttribute("value"),O==null&&G!=null&&(f.defaultChecked=!!G),O!=null&&(f.checked=O&&typeof O!="function"&&typeof O!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?f.name=""+Ri(we):f.removeAttribute("name")}function xc(f,p,x,_,O,G,fe,we){if(G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(f.type=G),p!=null||x!=null){if(!(G!=="submit"&&G!=="reset"||p!=null))return;x=x!=null?""+Ri(x):"",p=p!=null?""+Ri(p):x,we||p===f.value||(f.value=p),f.defaultValue=p}_=_??O,_=typeof _!="function"&&typeof _!="symbol"&&!!_,f.checked=we?f.checked:!!_,f.defaultChecked=!!_,fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"&&(f.name=fe)}function yc(f,p,x){p==="number"&&ts(f.ownerDocument)===f||f.defaultValue===""+x||(f.defaultValue=""+x)}function el(f,p,x,_){if(f=f.options,p){p={};for(var O=0;O<x.length;O++)p["$"+x[O]]=!0;for(x=0;x<f.length;x++)O=p.hasOwnProperty("$"+f[x].value),f[x].selected!==O&&(f[x].selected=O),O&&_&&(f[x].defaultSelected=!0)}else{for(x=""+Ri(x),p=null,O=0;O<f.length;O++){if(f[O].value===x){f[O].selected=!0,_&&(f[O].defaultSelected=!0);return}p!==null||f[O].disabled||(p=f[O])}p!==null&&(p.selected=!0)}}function In(f,p,x){if(p!=null&&(p=""+Ri(p),p!==f.value&&(f.value=p),x==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=x!=null?""+Ri(x):""}function bc(f,p,x,_){if(p==null){if(_!=null){if(x!=null)throw Error(n(92));if(te(_)){if(1<_.length)throw Error(n(93));_=_[0]}x=_}x==null&&(x=""),p=x}x=Ri(p),f.defaultValue=x,_=f.textContent,_===x&&_!==""&&_!==null&&(f.value=_)}function ao(f,p){if(p){var x=f.firstChild;if(x&&x===f.lastChild&&x.nodeType===3){x.nodeValue=p;return}}f.textContent=p}var Bl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function QA(f,p,x){var _=p.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?_?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":_?f.setProperty(p,x):typeof x!="number"||x===0||Bl.has(p)?p==="float"?f.cssFloat=x:f[p]=(""+x).trim():f[p]=x+"px"}function bf(f,p,x){if(p!=null&&typeof p!="object")throw Error(n(62));if(f=f.style,x!=null){for(var _ in x)!x.hasOwnProperty(_)||p!=null&&p.hasOwnProperty(_)||(_.indexOf("--")===0?f.setProperty(_,""):_==="float"?f.cssFloat="":f[_]="");for(var O in p)_=p[O],p.hasOwnProperty(O)&&x[O]!==_&&QA(f,O,_)}else for(var G in p)p.hasOwnProperty(G)&&QA(f,G,p[G])}function wf(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ud=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Il(f){return ud.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var tl=null;function Xn(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Fl=null,rl=null;function wr(f){var p=Ie(f);if(p&&(f=p.stateNode)){var x=f[fn]||null;e:switch(f=p.stateNode,p.type){case"input":if(rs(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),p=x.name,x.type==="radio"&&p!=null){for(x=f;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+wn(""+p)+'"][type="radio"]'),p=0;p<x.length;p++){var _=x[p];if(_!==f&&_.form===f.form){var O=_[fn]||null;if(!O)throw Error(n(90));rs(_,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(p=0;p<x.length;p++)_=x[p],_.form===f.form&&yf(_)}break e;case"textarea":In(f,x.value,x.defaultValue);break e;case"select":p=x.value,p!=null&&el(f,!!x.multiple,p,!1)}}}var nl=!1;function VA(f,p,x){if(nl)return f(p,x);nl=!0;try{var _=f(p);return _}finally{if(nl=!1,(Fl!==null||rl!==null)&&(Vw(),Fl&&(p=Fl,f=rl,rl=Fl=null,wr(p),f)))for(p=0;p<f.length;p++)wr(f[p])}}function ps(f,p){var x=f.stateNode;if(x===null)return null;var _=x[fn]||null;if(_===null)return null;x=_[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(f=f.type,_=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!_;break e;default:f=!1}if(f)return null;if(x&&typeof x!="function")throw Error(n(231,p,typeof x));return x}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ls=!1;if(io)try{var al={};Object.defineProperty(al,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Ls=!1}var so=null,wc=null,Dl=null;function Cf(){if(Dl)return Dl;var f,p=wc,x=p.length,_,O="value"in so?so.value:so.textContent,G=O.length;for(f=0;f<x&&p[f]===O[f];f++);var fe=x-f;for(_=1;_<=fe&&p[x-_]===O[G-_];_++);return Dl=O.slice(f,1<_?1-_:void 0)}function oo(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function ms(){return!0}function il(){return!1}function ei(f){function p(x,_,O,G,fe){this._reactName=x,this._targetInst=O,this.type=_,this.nativeEvent=G,this.target=fe,this.currentTarget=null;for(var we in f)f.hasOwnProperty(we)&&(x=f[we],this[we]=x?x(G):G[we]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?ms:il,this.isPropagationStopped=il,this}return u(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),p}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=ei(sn),sl=u({},sn,{view:0,detail:0}),Ef=ei(sl),gu,vu,Ho,gs=u({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Ho&&(Ho&&f.type==="mousemove"?(gu=f.screenX-Ho.screenX,vu=f.screenY-Ho.screenY):vu=gu=0,Ho=f),gu)},movementY:function(f){return"movementY"in f?f.movementY:vu}}),ti=ei(gs),zA=u({},gs,{dataTransfer:0}),Ec=ei(zA),ns=u({},sl,{relatedTarget:0}),_c=ei(ns),Rl=u({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),dd=ei(Rl),xu=u({},sn,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),fd=ei(xu),_f=u({},sn,{data:0}),yu=ei(_f),Sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wu(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=Ad[f])?!!p[f]:!1}function Tc(){return wu}var GA=u({},sl,{key:function(f){if(f.key){var p=Sc[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=oo(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?bu[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(f){return f.type==="keypress"?oo(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?oo(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Pl=ei(GA),Nc=u({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cu=ei(Nc),vs=u({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),hd=ei(vs),q=u({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pe=ei(q),Fe=u({},gs,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=ei(Fe),Ge=u({},sn,{newState:0,oldState:0}),lt=ei(Ge),St=[9,13,27,32],zt=io&&"CompositionEvent"in window,R=null;io&&"documentMode"in document&&(R=document.documentMode);var ee=io&&"TextEvent"in window&&!R,ce=io&&(!zt||R&&8<R&&11>=R),be=" ",Ve=!1;function tt(f,p){switch(f){case"keyup":return St.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nt(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Cr=!1;function on(f,p){switch(f){case"compositionend":return Nt(p);case"keypress":return p.which!==32?null:(Ve=!0,be);case"textInput":return f=p.data,f===be&&Ve?null:f;default:return null}}function Lr(f,p){if(Cr)return f==="compositionend"||!zt&&tt(f,p)?(f=Cf(),Dl=wc=so=null,Cr=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ce&&p.locale!=="ko"?null:p.data;default:return null}}var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!Fn[f.type]:p==="textarea"}function ol(f,p,x,_){Fl?rl?rl.push(_):rl=[_]:Fl=_,p=Ww(p,"onChange"),0<p.length&&(x=new Cc("onChange","change",null,x,_),f.push({event:x,listeners:p}))}var Va=null,lo=null;function Bc(f){hO(f,0)}function pd(f){var p=Ke(f);if(yf(p))return f}function qA(f,p){if(f==="change")return p}var Sf=!1;if(io){var pi;if(io){var md="oninput"in document;if(!md){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),md=typeof Tf.oninput=="function"}pi=md}else pi=!1;Sf=pi&&(!document.documentMode||9<document.documentMode)}function Nf(){Va&&(Va.detachEvent("onpropertychange",$A),lo=Va=null)}function $A(f){if(f.propertyName==="value"&&pd(lo)){var p=[];ol(p,lo,f,Xn(f)),VA(Bc,p)}}function co(f,p,x){f==="focusin"?(Nf(),Va=p,lo=x,Va.attachEvent("onpropertychange",$A)):f==="focusout"&&Nf()}function vx(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return pd(lo)}function L0(f,p){if(f==="click")return pd(p)}function Nm(f,p){if(f==="input"||f==="change")return pd(p)}function ll(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Pi=typeof Object.is=="function"?Object.is:ll;function gd(f,p){if(Pi(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var x=Object.keys(f),_=Object.keys(p);if(x.length!==_.length)return!1;for(_=0;_<x.length;_++){var O=x[_];if(!ie.call(p,O)||!Pi(f[O],p[O]))return!1}return!0}function O0(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Eu(f,p){var x=O0(f);f=0;for(var _;x;){if(x.nodeType===3){if(_=f+x.textContent.length,f<=p&&_>=p)return{node:x,offset:p-f};f=_}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=O0(x)}}function vd(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?vd(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function Os(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=ts(f.document);p instanceof f.HTMLIFrameElement;){try{var x=typeof p.contentWindow.location.href=="string"}catch{x=!1}if(x)f=p.contentWindow;else break;p=ts(f.document)}return p}function as(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var xd=io&&"documentMode"in document&&11>=document.documentMode,uo=null,Ml=null,kc=null,Ll=!1;function Pa(f,p,x){var _=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Ll||uo==null||uo!==ts(_)||(_=uo,"selectionStart"in _&&as(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),kc&&gd(kc,_)||(kc=_,_=Ww(Ml,"onSelect"),0<_.length&&(p=new Cc("onSelect","select",null,p,x),f.push({event:p,listeners:_}),p.target=uo)))}function Ol(f,p){var x={};return x[f.toLowerCase()]=p.toLowerCase(),x["Webkit"+f]="webkit"+p,x["Moz"+f]="moz"+p,x}var ri={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionrun:Ol("Transition","TransitionRun"),transitionstart:Ol("Transition","TransitionStart"),transitioncancel:Ol("Transition","TransitionCancel"),transitionend:Ol("Transition","TransitionEnd")},fo={},Bf={};io&&(Bf=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function Ic(f){if(fo[f])return fo[f];if(!ri[f])return f;var p=ri[f],x;for(x in p)if(p.hasOwnProperty(x)&&x in Bf)return fo[f]=p[x];return f}var KA=Ic("animationend"),yd=Ic("animationiteration"),bd=Ic("animationstart"),wd=Ic("transitionrun"),kf=Ic("transitionstart"),WA=Ic("transitioncancel"),Cd=Ic("transitionend"),_u=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function Ma(f,p){_u.set(f,p),bt(p,[f])}var Qo=new WeakMap;function tn(f,p){if(typeof f=="object"&&f!==null){var x=Qo.get(f);return x!==void 0?x:(p={value:f,source:p,stack:ua(p)},Qo.set(f,p),p)}return{value:f,source:p,stack:ua(p)}}var rn=[],da=0,za=0;function cl(){for(var f=da,p=za=da=0;p<f;){var x=rn[p];rn[p++]=null;var _=rn[p];rn[p++]=null;var O=rn[p];rn[p++]=null;var G=rn[p];if(rn[p++]=null,_!==null&&O!==null){var fe=_.pending;fe===null?O.next=O:(O.next=fe.next,fe.next=O),_.pending=O}G!==0&&Bm(x,O,G)}}function Ed(f,p,x,_){rn[da++]=f,rn[da++]=p,rn[da++]=x,rn[da++]=_,za|=_,f.lanes|=_,f=f.alternate,f!==null&&(f.lanes|=_)}function _d(f,p,x,_){return Ed(f,p,x,_),Ff(f)}function Su(f,p){return Ed(f,null,null,p),Ff(f)}function Bm(f,p,x){f.lanes|=x;var _=f.alternate;_!==null&&(_.lanes|=x);for(var O=!1,G=f.return;G!==null;)G.childLanes|=x,_=G.alternate,_!==null&&(_.childLanes|=x),G.tag===22&&(f=G.stateNode,f===null||f._visibility&1||(O=!0)),f=G,G=G.return;return f.tag===3?(G=f.stateNode,O&&p!==null&&(O=31-It(x),f=G.hiddenUpdates,_=f[O],_===null?f[O]=[p]:_.push(p),p.lane=x|536870912),G):null}function Ff(f){if(50<Vx)throw Vx=0,oN=null,Error(n(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var Mi={};function ul(f,p,x,_){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(f,p,x,_){return new ul(f,p,x,_)}function YA(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Fc(f,p){var x=f.alternate;return x===null?(x=xs(f.tag,p,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=p,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&65011712,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,p=f.dependencies,x.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function U0(f,p){f.flags&=65011714;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,p=x.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function Df(f,p,x,_,O,G){var fe=0;if(_=f,typeof f=="function")YA(f)&&(fe=1);else if(typeof f=="string")fe=lce(f,x,Z.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case k:return f=xs(31,x,p,O),f.elementType=k,f.lanes=G,f;case v:return Tu(x.children,O,G,p);case g:fe=8,O|=24;break;case y:return f=xs(12,x,p,O|2),f.elementType=y,f.lanes=G,f;case B:return f=xs(13,x,p,O),f.elementType=B,f.lanes=G,f;case D:return f=xs(19,x,p,O),f.elementType=D,f.lanes=G,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case w:case N:fe=10;break e;case T:fe=9;break e;case F:fe=11;break e;case E:fe=14;break e;case S:fe=16,_=null;break e}fe=29,x=Error(n(130,f===null?"null":typeof f,"")),_=null}return p=xs(fe,x,p,O),p.elementType=f,p.type=_,p.lanes=G,p}function Tu(f,p,x,_){return f=xs(7,f,_,p),f.lanes=x,f}function km(f,p,x){return f=xs(6,f,null,p),f.lanes=x,f}function j0(f,p,x){return p=xs(4,f.children!==null?f.children:[],f.key,p),p.lanes=x,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var Sd=[],Nu=0,XA=null,Im=0,dl=[],Vo=0,Rf=null,Bu=1,ku="";function Pf(f,p){Sd[Nu++]=Im,Sd[Nu++]=XA,XA=f,Im=p}function Aw(f,p,x){dl[Vo++]=Bu,dl[Vo++]=ku,dl[Vo++]=Rf,Rf=f;var _=Bu;f=ku;var O=32-It(_)-1;_&=~(1<<O),x+=1;var G=32-It(p)+O;if(30<G){var fe=O-O%5;G=(_&(1<<fe)-1).toString(32),_>>=fe,O-=fe,Bu=1<<32-It(p)+O|x<<O|_,ku=G+f}else Bu=1<<G|x<<O|_,ku=f}function H0(f){f.return!==null&&(Pf(f,1),Aw(f,1,0))}function Q0(f){for(;f===XA;)XA=Sd[--Nu],Sd[Nu]=null,Im=Sd[--Nu],Sd[Nu]=null;for(;f===Rf;)Rf=dl[--Vo],dl[Vo]=null,ku=dl[--Vo],dl[Vo]=null,Bu=dl[--Vo],dl[Vo]=null}var mi=null,La=null,Nn=!1,Td=null,Dc=!1,xx=Error(n(519));function Mf(f){var p=Error(n(418,""));throw JA(tn(p,f)),xx}function hw(f){var p=f.stateNode,x=f.type,_=f.memoizedProps;switch(p[bn]=f,p[fn]=_,x){case"dialog":hn("cancel",p),hn("close",p);break;case"iframe":case"object":case"embed":hn("load",p);break;case"video":case"audio":for(x=0;x<Gx.length;x++)hn(Gx[x],p);break;case"source":hn("error",p);break;case"img":case"image":case"link":hn("error",p),hn("load",p);break;case"details":hn("toggle",p);break;case"input":hn("invalid",p),xc(p,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),vc(p);break;case"select":hn("invalid",p);break;case"textarea":hn("invalid",p),bc(p,_.value,_.defaultValue,_.children),vc(p)}x=_.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||p.textContent===""+x||_.suppressHydrationWarning===!0||vO(p.textContent,x)?(_.popover!=null&&(hn("beforetoggle",p),hn("toggle",p)),_.onScroll!=null&&hn("scroll",p),_.onScrollEnd!=null&&hn("scrollend",p),_.onClick!=null&&(p.onclick=Yw),p=!0):p=!1,p||Mf(f)}function Iu(f){for(mi=f.return;mi;)switch(mi.tag){case 5:case 13:Dc=!1;return;case 27:case 3:Dc=!0;return;default:mi=mi.return}}function Us(f){if(f!==mi)return!1;if(!Nn)return Iu(f),Nn=!0,!1;var p=f.tag,x;if((x=p!==3&&p!==27)&&((x=p===5)&&(x=f.type,x=!(x!=="form"&&x!=="button")||CN(f.type,f.memoizedProps)),x=!x),x&&La&&Mf(f),Iu(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8)if(x=f.data,x==="/$"){if(p===0){La=Uu(f.nextSibling);break e}p--}else x!=="$"&&x!=="$!"&&x!=="$?"||p++;f=f.nextSibling}La=null}}else p===27?(p=La,ph(f.type)?(f=TN,TN=null,La=f):La=p):La=mi?Uu(f.stateNode.nextSibling):null;return!0}function zo(){La=mi=null,Nn=!1}function pw(){var f=Td;return f!==null&&(hl===null?hl=f:hl.push.apply(hl,f),Td=null),f}function JA(f){Td===null?Td=[f]:Td.push(f)}var Rc=se(null),Li=null,Fu=null;function Nd(f,p,x){Y(Rc,p._currentValue),p._currentValue=x}function Pc(f){f._currentValue=Rc.current,U(Rc)}function Fm(f,p,x){for(;f!==null;){var _=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,_!==null&&(_.childLanes|=p)):_!==null&&(_.childLanes&p)!==p&&(_.childLanes|=p),f===x)break;f=f.return}}function Dm(f,p,x,_){var O=f.child;for(O!==null&&(O.return=f);O!==null;){var G=O.dependencies;if(G!==null){var fe=O.child;G=G.firstContext;e:for(;G!==null;){var we=G;G=O;for(var Pe=0;Pe<p.length;Pe++)if(we.context===p[Pe]){G.lanes|=x,we=G.alternate,we!==null&&(we.lanes|=x),Fm(G.return,x,f),_||(fe=null);break e}G=we.next}}else if(O.tag===18){if(fe=O.return,fe===null)throw Error(n(341));fe.lanes|=x,G=fe.alternate,G!==null&&(G.lanes|=x),Fm(fe,x,f),fe=null}else fe=O.child;if(fe!==null)fe.return=O;else for(fe=O;fe!==null;){if(fe===f){fe=null;break}if(O=fe.sibling,O!==null){O.return=fe.return,fe=O;break}fe=fe.return}O=fe}}function ZA(f,p,x,_){f=null;for(var O=p,G=!1;O!==null;){if(!G){if((O.flags&524288)!==0)G=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var fe=O.alternate;if(fe===null)throw Error(n(387));if(fe=fe.memoizedProps,fe!==null){var we=O.type;Pi(O.pendingProps.value,fe.value)||(f!==null?f.push(we):f=[we])}}else if(O===xe.current){if(fe=O.alternate,fe===null)throw Error(n(387));fe.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(f!==null?f.push(Xx):f=[Xx])}O=O.return}f!==null&&Dm(p,f,x,_),p.flags|=262144}function Rm(f){for(f=f.firstContext;f!==null;){if(!Pi(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Mc(f){Li=f,Fu=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function gi(f){return Pm(Li,f)}function Bd(f,p){return Li===null&&Mc(f),Pm(f,p)}function Pm(f,p){var x=p._currentValue;if(p={context:p,memoizedValue:x,next:null},Fu===null){if(f===null)throw Error(n(308));Fu=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else Fu=Fu.next=p;return x}var F5=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(x,_){f.push(_)}};this.abort=function(){p.aborted=!0,f.forEach(function(x){return x()})}},mw=e.unstable_scheduleCallback,D5=e.unstable_NormalPriority,vi={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yx(){return{controller:new F5,data:new Map,refCount:0}}function V0(f){f.refCount--,f.refCount===0&&mw(D5,function(){f.controller.abort()})}var z0=null,bx=0,Lf=0,Du=null;function R5(f,p){if(z0===null){var x=z0=[];bx=0,Lf=hN(),Du={status:"pending",value:void 0,then:function(_){x.push(_)}}}return bx++,p.then(gw,gw),p}function gw(){if(--bx===0&&z0!==null){Du!==null&&(Du.status="fulfilled");var f=z0;z0=null,Lf=0,Du=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function vw(f,p){var x=[],_={status:"pending",value:null,reason:null,then:function(O){x.push(O)}};return f.then(function(){_.status="fulfilled",_.value=p;for(var O=0;O<x.length;O++)(0,x[O])(p)},function(O){for(_.status="rejected",_.reason=O,O=0;O<x.length;O++)(0,x[O])(void 0)}),_}var I=W.S;W.S=function(f,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&R5(f,p),I!==null&&I(f,p)};var j=se(null);function J(){var f=j.current;return f!==null?f:ba.pooledCache}function oe(f,p){p===null?Y(j,j.current):Y(j,p.pool)}function he(){var f=J();return f===null?null:{parent:vi._currentValue,pool:f}}var ge=Error(n(460)),ve=Error(n(474)),ye=Error(n(542)),Ee={then:function(){}};function Ne(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Oe(){}function Ze(f,p,x){switch(x=f[x],x===void 0?f.push(p):x!==p&&(p.then(Oe,Oe),p=x),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,xt(f),f;default:if(typeof p.status=="string")p.then(Oe,Oe);else{if(f=ba,f!==null&&100<f.shellSuspendCounter)throw Error(n(482));f=p,f.status="pending",f.then(function(_){if(p.status==="pending"){var O=p;O.status="fulfilled",O.value=_}},function(_){if(p.status==="pending"){var O=p;O.status="rejected",O.reason=_}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,xt(f),f}throw Ye=p,ge}}var Ye=null;function qe(){if(Ye===null)throw Error(n(459));var f=Ye;return Ye=null,f}function xt(f){if(f===ge||f===ye)throw Error(n(483))}var st=!1;function Ue(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function At(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function yt(f,p,x){var _=f.updateQueue;if(_===null)return null;if(_=_.shared,(Zn&2)!==0){var O=_.pending;return O===null?p.next=p:(p.next=O.next,O.next=p),_.pending=p,p=Ff(f),Bm(f,null,x),p}return Ed(f,_,p,x),Ff(f)}function pt(f,p,x){if(p=p.updateQueue,p!==null&&(p=p.shared,(x&4194048)!==0)){var _=p.lanes;_&=f.pendingLanes,x|=_,p.lanes=x,Xr(f,x)}}function Wt(f,p){var x=f.updateQueue,_=f.alternate;if(_!==null&&(_=_.updateQueue,x===_)){var O=null,G=null;if(x=x.firstBaseUpdate,x!==null){do{var fe={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};G===null?O=G=fe:G=G.next=fe,x=x.next}while(x!==null);G===null?O=G=p:G=G.next=p}else O=G=p;x={baseState:_.baseState,firstBaseUpdate:O,lastBaseUpdate:G,shared:_.shared,callbacks:_.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=p:f.next=p,x.lastBaseUpdate=p}var jt=!1;function or(){if(jt){var f=Du;if(f!==null)throw f}}function Gt(f,p,x,_){jt=!1;var O=f.updateQueue;st=!1;var G=O.firstBaseUpdate,fe=O.lastBaseUpdate,we=O.shared.pending;if(we!==null){O.shared.pending=null;var Pe=we,rt=Pe.next;Pe.next=null,fe===null?G=rt:fe.next=rt,fe=Pe;var ht=f.alternate;ht!==null&&(ht=ht.updateQueue,we=ht.lastBaseUpdate,we!==fe&&(we===null?ht.firstBaseUpdate=rt:we.next=rt,ht.lastBaseUpdate=Pe))}if(G!==null){var Ct=O.baseState;fe=0,ht=rt=Pe=null,we=G;do{var at=we.lane&-536870913,it=at!==we.lane;if(it?(Sn&at)===at:(_&at)===at){at!==0&&at===Lf&&(jt=!0),ht!==null&&(ht=ht.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Pr=f,Er=we;at=p;var Aa=x;switch(Er.tag){case 1:if(Pr=Er.payload,typeof Pr=="function"){Ct=Pr.call(Aa,Ct,at);break e}Ct=Pr;break e;case 3:Pr.flags=Pr.flags&-65537|128;case 0:if(Pr=Er.payload,at=typeof Pr=="function"?Pr.call(Aa,Ct,at):Pr,at==null)break e;Ct=u({},Ct,at);break e;case 2:st=!0}}at=we.callback,at!==null&&(f.flags|=64,it&&(f.flags|=8192),it=O.callbacks,it===null?O.callbacks=[at]:it.push(at))}else it={lane:at,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ht===null?(rt=ht=it,Pe=Ct):ht=ht.next=it,fe|=at;if(we=we.next,we===null){if(we=O.shared.pending,we===null)break;it=we,we=it.next,it.next=null,O.lastBaseUpdate=it,O.shared.pending=null}}while(!0);ht===null&&(Pe=Ct),O.baseState=Pe,O.firstBaseUpdate=rt,O.lastBaseUpdate=ht,G===null&&(O.shared.lanes=0),dh|=fe,f.lanes=fe,f.memoizedState=Ct}}function En(f,p){if(typeof f!="function")throw Error(n(191,f));f.call(p)}function Dn(f,p){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)En(x[f],p)}var Zr=se(null),Kr=se(0);function zn(f,p){f=$f,Y(Kr,f),Y(Zr,p),$f=f|p.baseLanes}function Rn(){Y(Kr,$f),Y(Zr,Zr.current)}function Or(){$f=Kr.current,U(Zr),U(Kr)}var Jn=0,gr=null,kr=null,Cn=null,_n=!1,Oi=!1,xi=!1,Ga=0,qa=0,ni=null,fl=0;function Pn(){throw Error(n(321))}function ai(f,p){if(p===null)return!1;for(var x=0;x<p.length&&x<f.length;x++)if(!Pi(f[x],p[x]))return!1;return!0}function Ul(f,p,x,_,O,G){return Jn=G,gr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,W.H=f===null||f.memoizedState===null?JM:ZM,xi=!1,G=x(_,O),xi=!1,Oi&&(G=Of(p,x,_,O)),kd(f),G}function kd(f){W.H=kw;var p=kr!==null&&kr.next!==null;if(Jn=0,Cn=kr=gr=null,_n=!1,qa=0,ni=null,p)throw Error(n(300));f===null||ys||(f=f.dependencies,f!==null&&Rm(f)&&(ys=!0))}function Of(f,p,x,_){gr=f;var O=0;do{if(Oi&&(ni=null),qa=0,Oi=!1,25<=O)throw Error(n(301));if(O+=1,Cn=kr=null,f.updateQueue!=null){var G=f.updateQueue;G.lastEffect=null,G.events=null,G.stores=null,G.memoCache!=null&&(G.memoCache.index=0)}W.H=xle,G=p(x,_)}while(Oi);return G}function Id(){var f=W.H,p=f.useState()[0];return p=typeof p.then=="function"?Fd(p):p,f=f.useState()[0],(kr!==null?kr.memoizedState:null)!==f&&(gr.flags|=1024),p}function ya(){var f=Ga!==0;return Ga=0,f}function G0(f,p,x){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~x}function Mm(f){if(_n){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}_n=!1}Jn=0,Cn=kr=gr=null,Oi=!1,qa=Ga=0,ni=null}function js(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?gr.memoizedState=Cn=f:Cn=Cn.next=f,Cn}function Sa(){if(kr===null){var f=gr.alternate;f=f!==null?f.memoizedState:null}else f=kr.next;var p=Cn===null?gr.memoizedState:Cn.next;if(p!==null)Cn=p,kr=f;else{if(f===null)throw gr.alternate===null?Error(n(467)):Error(n(310));kr=f,f={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Cn===null?gr.memoizedState=Cn=f:Cn=Cn.next=f}return Cn}function Uf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fd(f){var p=qa;return qa+=1,ni===null&&(ni=[]),f=Ze(ni,f,p),p=gr,(Cn===null?p.memoizedState:Cn.next)===null&&(p=p.alternate,W.H=p===null||p.memoizedState===null?JM:ZM),f}function Ao(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Fd(f);if(f.$$typeof===N)return gi(f)}throw Error(n(438,String(f)))}function Dd(f){var p=null,x=gr.updateQueue;if(x!==null&&(p=x.memoCache),p==null){var _=gr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(p={data:_.data.map(function(O){return O.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),x===null&&(x=Uf(),gr.updateQueue=x),x.memoCache=p,x=p.data[p.index],x===void 0)for(x=p.data[p.index]=Array(f),_=0;_<f;_++)x[_]=H;return p.index++,x}function ho(f,p){return typeof p=="function"?p(f):p}function q0(f){var p=Sa();return eh(p,kr,f)}function eh(f,p,x){var _=f.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=x;var O=f.baseQueue,G=_.pending;if(G!==null){if(O!==null){var fe=O.next;O.next=G.next,G.next=fe}p.baseQueue=O=G,_.pending=null}if(G=f.baseState,O===null)f.memoizedState=G;else{p=O.next;var we=fe=null,Pe=null,rt=p,ht=!1;do{var Ct=rt.lane&-536870913;if(Ct!==rt.lane?(Sn&Ct)===Ct:(Jn&Ct)===Ct){var at=rt.revertLane;if(at===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),Ct===Lf&&(ht=!0);else if((Jn&at)===at){rt=rt.next,at===Lf&&(ht=!0);continue}else Ct={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Pe===null?(we=Pe=Ct,fe=G):Pe=Pe.next=Ct,gr.lanes|=at,dh|=at;Ct=rt.action,xi&&x(G,Ct),G=rt.hasEagerState?rt.eagerState:x(G,Ct)}else at={lane:Ct,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Pe===null?(we=Pe=at,fe=G):Pe=Pe.next=at,gr.lanes|=Ct,dh|=Ct;rt=rt.next}while(rt!==null&&rt!==p);if(Pe===null?fe=G:Pe.next=we,!Pi(G,f.memoizedState)&&(ys=!0,ht&&(x=Du,x!==null)))throw x;f.memoizedState=G,f.baseState=fe,f.baseQueue=Pe,_.lastRenderedState=G}return O===null&&(_.lanes=0),[f.memoizedState,_.dispatch]}function Lm(f){var p=Sa(),x=p.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=f;var _=x.dispatch,O=x.pending,G=p.memoizedState;if(O!==null){x.pending=null;var fe=O=O.next;do G=f(G,fe.action),fe=fe.next;while(fe!==O);Pi(G,p.memoizedState)||(ys=!0),p.memoizedState=G,p.baseQueue===null&&(p.baseState=G),x.lastRenderedState=G}return[G,_]}function $0(f,p,x){var _=gr,O=Sa(),G=Nn;if(G){if(x===void 0)throw Error(n(407));x=x()}else x=p();var fe=!Pi((kr||O).memoizedState,x);fe&&(O.memoizedState=x,ys=!0),O=O.queue;var we=th.bind(null,_,O,f);if(ah(2048,8,we,[f]),O.getSnapshot!==p||fe||Cn!==null&&Cn.memoizedState.tag&1){if(_.flags|=2048,Pu(9,X0(),K0.bind(null,_,O,x,p),null),ba===null)throw Error(n(349));G||(Jn&124)!==0||Om(_,p,x)}return x}function Om(f,p,x){f.flags|=16384,f={getSnapshot:p,value:x},p=gr.updateQueue,p===null?(p=Uf(),gr.updateQueue=p,p.stores=[f]):(x=p.stores,x===null?p.stores=[f]:x.push(f))}function K0(f,p,x,_){p.value=x,p.getSnapshot=_,xw(p)&&yw(f)}function th(f,p,x){return x(function(){xw(p)&&yw(f)})}function xw(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!Pi(f,x)}catch{return!0}}function yw(f){var p=Su(f,2);p!==null&&Gl(p,f,2)}function W0(f){var p=js();if(typeof f=="function"){var x=f;if(f=x(),xi){$t(!0);try{x()}finally{$t(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:f},p}function Ru(f,p,x,_){return f.baseState=x,eh(f,kr,typeof _=="function"?_:ho)}function P5(f,p,x,_,O){if(Bw(f))throw Error(n(485));if(f=p.action,f!==null){var G={payload:O,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(fe){G.listeners.push(fe)}};W.T!==null?x(!0):G.isTransition=!1,_(G),x=p.pending,x===null?(G.next=p.pending=G,bw(p,G)):(G.next=x.next,p.pending=x.next=G)}}function bw(f,p){var x=p.action,_=p.payload,O=f.state;if(p.isTransition){var G=W.T,fe={};W.T=fe;try{var we=x(O,_),Pe=W.S;Pe!==null&&Pe(fe,we),ww(f,p,we)}catch(rt){rh(f,p,rt)}finally{W.T=G}}else try{G=x(O,_),ww(f,p,G)}catch(rt){rh(f,p,rt)}}function ww(f,p,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(_){wx(f,p,_)},function(_){return rh(f,p,_)}):wx(f,p,x)}function wx(f,p,x){p.status="fulfilled",p.value=x,Cx(p),f.state=x,p=f.pending,p!==null&&(x=p.next,x===p?f.pending=null:(x=x.next,p.next=x,bw(f,x)))}function rh(f,p,x){var _=f.pending;if(f.pending=null,_!==null){_=_.next;do p.status="rejected",p.reason=x,Cx(p),p=p.next;while(p!==_)}f.action=null}function Cx(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function Ex(f,p){return p}function Y0(f,p){if(Nn){var x=ba.formState;if(x!==null){e:{var _=gr;if(Nn){if(La){t:{for(var O=La,G=Dc;O.nodeType!==8;){if(!G){O=null;break t}if(O=Uu(O.nextSibling),O===null){O=null;break t}}G=O.data,O=G==="F!"||G==="F"?O:null}if(O){La=Uu(O.nextSibling),_=O.data==="F!";break e}}Mf(_)}_=!1}_&&(p=x[0])}}return x=js(),x.memoizedState=x.baseState=p,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ex,lastRenderedState:p},x.queue=_,x=WM.bind(null,gr,_),_.dispatch=x,_=W0(!1),G=M5.bind(null,gr,!1,_.queue),_=js(),O={state:p,dispatch:null,action:f,pending:null},_.queue=O,x=P5.bind(null,gr,O,G,x),O.dispatch=x,_.memoizedState=f,[p,x,!1]}function Um(f){var p=Sa();return nh(p,kr,f)}function nh(f,p,x){if(p=eh(f,p,Ex)[0],f=q0(ho)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var _=Fd(p)}catch(fe){throw fe===ge?ye:fe}else _=p;p=Sa();var O=p.queue,G=O.dispatch;return x!==p.memoizedState&&(gr.flags|=2048,Pu(9,X0(),Cw.bind(null,O,x),null)),[_,G,f]}function Cw(f,p){f.action=p}function Ew(f){var p=Sa(),x=kr;if(x!==null)return nh(p,x,f);Sa(),p=p.memoizedState,x=Sa();var _=x.queue.dispatch;return x.memoizedState=f,[p,_,!1]}function Pu(f,p,x,_){return f={tag:f,create:x,deps:_,inst:p,next:null},p=gr.updateQueue,p===null&&(p=Uf(),gr.updateQueue=p),x=p.lastEffect,x===null?p.lastEffect=f.next=f:(_=x.next,x.next=f,f.next=_,p.lastEffect=f),f}function X0(){return{destroy:void 0,resource:void 0}}function jm(){return Sa().memoizedState}function jl(f,p,x,_){var O=js();_=_===void 0?null:_,gr.flags|=f,O.memoizedState=Pu(1|p,X0(),x,_)}function ah(f,p,x,_){var O=Sa();_=_===void 0?null:_;var G=O.memoizedState.inst;kr!==null&&_!==null&&ai(_,kr.memoizedState.deps)?O.memoizedState=Pu(p,G,x,_):(gr.flags|=f,O.memoizedState=Pu(1|p,G,x,_))}function _x(f,p){jl(8390656,8,f,p)}function _w(f,p){ah(2048,8,f,p)}function Sx(f,p){return ah(4,2,f,p)}function jf(f,p){return ah(4,4,f,p)}function Sw(f,p){if(typeof p=="function"){f=f();var x=p(f);return function(){typeof x=="function"?x():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function Tx(f,p,x){x=x!=null?x.concat([f]):null,ah(4,4,Sw.bind(null,p,f),x)}function Nx(){}function Bx(f,p){var x=Sa();p=p===void 0?null:p;var _=x.memoizedState;return p!==null&&ai(p,_[1])?_[0]:(x.memoizedState=[f,p],f)}function Tw(f,p){var x=Sa();p=p===void 0?null:p;var _=x.memoizedState;if(p!==null&&ai(p,_[1]))return _[0];if(_=f(),xi){$t(!0);try{f()}finally{$t(!1)}}return x.memoizedState=[_,p],_}function Hf(f,p,x){return x===void 0||(Jn&1073741824)!==0?f.memoizedState=p:(f.memoizedState=x,f=GL(),gr.lanes|=f,dh|=f,x)}function Hm(f,p,x,_){return Pi(x,p)?x:Zr.current!==null?(f=Hf(f,x,_),Pi(f,p)||(ys=!0),f):(Jn&42)===0?(ys=!0,f.memoizedState=x):(f=GL(),gr.lanes|=f,dh|=f,p)}function J0(f,p,x,_,O){var G=re.p;re.p=G!==0&&8>G?G:8;var fe=W.T,we={};W.T=we,M5(f,!1,p,x);try{var Pe=O(),rt=W.S;if(rt!==null&&rt(we,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var ht=vw(Pe,_);Dx(f,p,ht,zl(f))}else Dx(f,p,_,zl(f))}catch(Ct){Dx(f,p,{then:function(){},status:"rejected",reason:Ct},zl())}finally{re.p=G,W.T=fe}}function Mu(){}function Lc(f,p,x,_){if(f.tag!==5)throw Error(n(476));var O=Lu(f).queue;J0(f,O,p,z,x===null?Mu:function(){return Z0(f),x(_)})}function Lu(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:z},next:null};var x={};return p.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:x},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function Z0(f){var p=Lu(f).next.queue;Dx(f,p,{},zl())}function ep(){return gi(Xx)}function kx(){return Sa().memoizedState}function Nw(){return Sa().memoizedState}function Ix(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var x=zl();f=At(x);var _=yt(p,f,x);_!==null&&(Gl(_,p,x),pt(_,p,x)),p={cache:yx()},f.payload=p;return}p=p.return}}function Fx(f,p,x){var _=zl();x={lane:_,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Bw(f)?YM(p,x):(x=_d(f,p,x,_),x!==null&&(Gl(x,f,_),XM(x,p,_)))}function WM(f,p,x){var _=zl();Dx(f,p,x,_)}function Dx(f,p,x,_){var O={lane:_,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Bw(f))YM(p,O);else{var G=f.alternate;if(f.lanes===0&&(G===null||G.lanes===0)&&(G=p.lastRenderedReducer,G!==null))try{var fe=p.lastRenderedState,we=G(fe,x);if(O.hasEagerState=!0,O.eagerState=we,Pi(we,fe))return Ed(f,p,O,0),ba===null&&cl(),!1}catch{}finally{}if(x=_d(f,p,O,_),x!==null)return Gl(x,f,_),XM(x,p,_),!0}return!1}function M5(f,p,x,_){if(_={lane:2,revertLane:hN(),action:_,hasEagerState:!1,eagerState:null,next:null},Bw(f)){if(p)throw Error(n(479))}else p=_d(f,x,_,2),p!==null&&Gl(p,f,2)}function Bw(f){var p=f.alternate;return f===gr||p!==null&&p===gr}function YM(f,p){Oi=_n=!0;var x=f.pending;x===null?p.next=p:(p.next=x.next,x.next=p),f.pending=p}function XM(f,p,x){if((x&4194048)!==0){var _=p.lanes;_&=f.pendingLanes,x|=_,p.lanes=x,Xr(f,x)}}var kw={readContext:gi,use:Ao,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn},JM={readContext:gi,use:Ao,useCallback:function(f,p){return js().memoizedState=[f,p===void 0?null:p],f},useContext:gi,useEffect:_x,useImperativeHandle:function(f,p,x){x=x!=null?x.concat([f]):null,jl(4194308,4,Sw.bind(null,p,f),x)},useLayoutEffect:function(f,p){return jl(4194308,4,f,p)},useInsertionEffect:function(f,p){jl(4,2,f,p)},useMemo:function(f,p){var x=js();p=p===void 0?null:p;var _=f();if(xi){$t(!0);try{f()}finally{$t(!1)}}return x.memoizedState=[_,p],_},useReducer:function(f,p,x){var _=js();if(x!==void 0){var O=x(p);if(xi){$t(!0);try{x(p)}finally{$t(!1)}}}else O=p;return _.memoizedState=_.baseState=O,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:O},_.queue=f,f=f.dispatch=Fx.bind(null,gr,f),[_.memoizedState,f]},useRef:function(f){var p=js();return f={current:f},p.memoizedState=f},useState:function(f){f=W0(f);var p=f.queue,x=WM.bind(null,gr,p);return p.dispatch=x,[f.memoizedState,x]},useDebugValue:Nx,useDeferredValue:function(f,p){var x=js();return Hf(x,f,p)},useTransition:function(){var f=W0(!1);return f=J0.bind(null,gr,f.queue,!0,!1),js().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,x){var _=gr,O=js();if(Nn){if(x===void 0)throw Error(n(407));x=x()}else{if(x=p(),ba===null)throw Error(n(349));(Sn&124)!==0||Om(_,p,x)}O.memoizedState=x;var G={value:x,getSnapshot:p};return O.queue=G,_x(th.bind(null,_,G,f),[f]),_.flags|=2048,Pu(9,X0(),K0.bind(null,_,G,x,p),null),x},useId:function(){var f=js(),p=ba.identifierPrefix;if(Nn){var x=ku,_=Bu;x=(_&~(1<<32-It(_)-1)).toString(32)+x,p="«"+p+"R"+x,x=Ga++,0<x&&(p+="H"+x.toString(32)),p+="»"}else x=fl++,p="«"+p+"r"+x.toString(32)+"»";return f.memoizedState=p},useHostTransitionStatus:ep,useFormState:Y0,useActionState:Y0,useOptimistic:function(f){var p=js();p.memoizedState=p.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=x,p=M5.bind(null,gr,!0,x),x.dispatch=p,[f,p]},useMemoCache:Dd,useCacheRefresh:function(){return js().memoizedState=Ix.bind(null,gr)}},ZM={readContext:gi,use:Ao,useCallback:Bx,useContext:gi,useEffect:_w,useImperativeHandle:Tx,useInsertionEffect:Sx,useLayoutEffect:jf,useMemo:Tw,useReducer:q0,useRef:jm,useState:function(){return q0(ho)},useDebugValue:Nx,useDeferredValue:function(f,p){var x=Sa();return Hm(x,kr.memoizedState,f,p)},useTransition:function(){var f=q0(ho)[0],p=Sa().memoizedState;return[typeof f=="boolean"?f:Fd(f),p]},useSyncExternalStore:$0,useId:kx,useHostTransitionStatus:ep,useFormState:Um,useActionState:Um,useOptimistic:function(f,p){var x=Sa();return Ru(x,kr,f,p)},useMemoCache:Dd,useCacheRefresh:Nw},xle={readContext:gi,use:Ao,useCallback:Bx,useContext:gi,useEffect:_w,useImperativeHandle:Tx,useInsertionEffect:Sx,useLayoutEffect:jf,useMemo:Tw,useReducer:Lm,useRef:jm,useState:function(){return Lm(ho)},useDebugValue:Nx,useDeferredValue:function(f,p){var x=Sa();return kr===null?Hf(x,f,p):Hm(x,kr.memoizedState,f,p)},useTransition:function(){var f=Lm(ho)[0],p=Sa().memoizedState;return[typeof f=="boolean"?f:Fd(f),p]},useSyncExternalStore:$0,useId:kx,useHostTransitionStatus:ep,useFormState:Ew,useActionState:Ew,useOptimistic:function(f,p){var x=Sa();return kr!==null?Ru(x,kr,f,p):(x.baseState=f,[f,x.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:Nw},Qm=null,Rx=0;function Iw(f){var p=Rx;return Rx+=1,Qm===null&&(Qm=[]),Ze(Qm,f,p)}function Px(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function Fw(f,p){throw p.$$typeof===A?Error(n(525)):(f=Object.prototype.toString.call(p),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function eL(f){var p=f._init;return p(f._payload)}function tL(f){function p($e,He){if(f){var Je=$e.deletions;Je===null?($e.deletions=[He],$e.flags|=16):Je.push(He)}}function x($e,He){if(!f)return null;for(;He!==null;)p($e,He),He=He.sibling;return null}function _($e){for(var He=new Map;$e!==null;)$e.key!==null?He.set($e.key,$e):He.set($e.index,$e),$e=$e.sibling;return He}function O($e,He){return $e=Fc($e,He),$e.index=0,$e.sibling=null,$e}function G($e,He,Je){return $e.index=Je,f?(Je=$e.alternate,Je!==null?(Je=Je.index,Je<He?($e.flags|=67108866,He):Je):($e.flags|=67108866,He)):($e.flags|=1048576,He)}function fe($e){return f&&$e.alternate===null&&($e.flags|=67108866),$e}function we($e,He,Je,vt){return He===null||He.tag!==6?(He=km(Je,$e.mode,vt),He.return=$e,He):(He=O(He,Je),He.return=$e,He)}function Pe($e,He,Je,vt){var nr=Je.type;return nr===v?ht($e,He,Je.props.children,vt,Je.key):He!==null&&(He.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===S&&eL(nr)===He.type)?(He=O(He,Je.props),Px(He,Je),He.return=$e,He):(He=Df(Je.type,Je.key,Je.props,null,$e.mode,vt),Px(He,Je),He.return=$e,He)}function rt($e,He,Je,vt){return He===null||He.tag!==4||He.stateNode.containerInfo!==Je.containerInfo||He.stateNode.implementation!==Je.implementation?(He=j0(Je,$e.mode,vt),He.return=$e,He):(He=O(He,Je.children||[]),He.return=$e,He)}function ht($e,He,Je,vt,nr){return He===null||He.tag!==7?(He=Tu(Je,$e.mode,vt,nr),He.return=$e,He):(He=O(He,Je),He.return=$e,He)}function Ct($e,He,Je){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=km(""+He,$e.mode,Je),He.return=$e,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return Je=Df(He.type,He.key,He.props,null,$e.mode,Je),Px(Je,He),Je.return=$e,Je;case m:return He=j0(He,$e.mode,Je),He.return=$e,He;case S:var vt=He._init;return He=vt(He._payload),Ct($e,He,Je)}if(te(He)||M(He))return He=Tu(He,$e.mode,Je,null),He.return=$e,He;if(typeof He.then=="function")return Ct($e,Iw(He),Je);if(He.$$typeof===N)return Ct($e,Bd($e,He),Je);Fw($e,He)}return null}function at($e,He,Je,vt){var nr=He!==null?He.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return nr!==null?null:we($e,He,""+Je,vt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case h:return Je.key===nr?Pe($e,He,Je,vt):null;case m:return Je.key===nr?rt($e,He,Je,vt):null;case S:return nr=Je._init,Je=nr(Je._payload),at($e,He,Je,vt)}if(te(Je)||M(Je))return nr!==null?null:ht($e,He,Je,vt,null);if(typeof Je.then=="function")return at($e,He,Iw(Je),vt);if(Je.$$typeof===N)return at($e,He,Bd($e,Je),vt);Fw($e,Je)}return null}function it($e,He,Je,vt,nr){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return $e=$e.get(Je)||null,we(He,$e,""+vt,nr);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case h:return $e=$e.get(vt.key===null?Je:vt.key)||null,Pe(He,$e,vt,nr);case m:return $e=$e.get(vt.key===null?Je:vt.key)||null,rt(He,$e,vt,nr);case S:var ln=vt._init;return vt=ln(vt._payload),it($e,He,Je,vt,nr)}if(te(vt)||M(vt))return $e=$e.get(Je)||null,ht(He,$e,vt,nr,null);if(typeof vt.then=="function")return it($e,He,Je,Iw(vt),nr);if(vt.$$typeof===N)return it($e,He,Je,Bd(He,vt),nr);Fw(He,vt)}return null}function Pr($e,He,Je,vt){for(var nr=null,ln=null,cr=He,Sr=He=0,ws=null;cr!==null&&Sr<Je.length;Sr++){cr.index>Sr?(ws=cr,cr=null):ws=cr.sibling;var Mn=at($e,cr,Je[Sr],vt);if(Mn===null){cr===null&&(cr=ws);break}f&&cr&&Mn.alternate===null&&p($e,cr),He=G(Mn,He,Sr),ln===null?nr=Mn:ln.sibling=Mn,ln=Mn,cr=ws}if(Sr===Je.length)return x($e,cr),Nn&&Pf($e,Sr),nr;if(cr===null){for(;Sr<Je.length;Sr++)cr=Ct($e,Je[Sr],vt),cr!==null&&(He=G(cr,He,Sr),ln===null?nr=cr:ln.sibling=cr,ln=cr);return Nn&&Pf($e,Sr),nr}for(cr=_(cr);Sr<Je.length;Sr++)ws=it(cr,$e,Sr,Je[Sr],vt),ws!==null&&(f&&ws.alternate!==null&&cr.delete(ws.key===null?Sr:ws.key),He=G(ws,He,Sr),ln===null?nr=ws:ln.sibling=ws,ln=ws);return f&&cr.forEach(function(yh){return p($e,yh)}),Nn&&Pf($e,Sr),nr}function Er($e,He,Je,vt){if(Je==null)throw Error(n(151));for(var nr=null,ln=null,cr=He,Sr=He=0,ws=null,Mn=Je.next();cr!==null&&!Mn.done;Sr++,Mn=Je.next()){cr.index>Sr?(ws=cr,cr=null):ws=cr.sibling;var yh=at($e,cr,Mn.value,vt);if(yh===null){cr===null&&(cr=ws);break}f&&cr&&yh.alternate===null&&p($e,cr),He=G(yh,He,Sr),ln===null?nr=yh:ln.sibling=yh,ln=yh,cr=ws}if(Mn.done)return x($e,cr),Nn&&Pf($e,Sr),nr;if(cr===null){for(;!Mn.done;Sr++,Mn=Je.next())Mn=Ct($e,Mn.value,vt),Mn!==null&&(He=G(Mn,He,Sr),ln===null?nr=Mn:ln.sibling=Mn,ln=Mn);return Nn&&Pf($e,Sr),nr}for(cr=_(cr);!Mn.done;Sr++,Mn=Je.next())Mn=it(cr,$e,Sr,Mn.value,vt),Mn!==null&&(f&&Mn.alternate!==null&&cr.delete(Mn.key===null?Sr:Mn.key),He=G(Mn,He,Sr),ln===null?nr=Mn:ln.sibling=Mn,ln=Mn);return f&&cr.forEach(function(yce){return p($e,yce)}),Nn&&Pf($e,Sr),nr}function Aa($e,He,Je,vt){if(typeof Je=="object"&&Je!==null&&Je.type===v&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case h:e:{for(var nr=Je.key;He!==null;){if(He.key===nr){if(nr=Je.type,nr===v){if(He.tag===7){x($e,He.sibling),vt=O(He,Je.props.children),vt.return=$e,$e=vt;break e}}else if(He.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===S&&eL(nr)===He.type){x($e,He.sibling),vt=O(He,Je.props),Px(vt,Je),vt.return=$e,$e=vt;break e}x($e,He);break}else p($e,He);He=He.sibling}Je.type===v?(vt=Tu(Je.props.children,$e.mode,vt,Je.key),vt.return=$e,$e=vt):(vt=Df(Je.type,Je.key,Je.props,null,$e.mode,vt),Px(vt,Je),vt.return=$e,$e=vt)}return fe($e);case m:e:{for(nr=Je.key;He!==null;){if(He.key===nr)if(He.tag===4&&He.stateNode.containerInfo===Je.containerInfo&&He.stateNode.implementation===Je.implementation){x($e,He.sibling),vt=O(He,Je.children||[]),vt.return=$e,$e=vt;break e}else{x($e,He);break}else p($e,He);He=He.sibling}vt=j0(Je,$e.mode,vt),vt.return=$e,$e=vt}return fe($e);case S:return nr=Je._init,Je=nr(Je._payload),Aa($e,He,Je,vt)}if(te(Je))return Pr($e,He,Je,vt);if(M(Je)){if(nr=M(Je),typeof nr!="function")throw Error(n(150));return Je=nr.call(Je),Er($e,He,Je,vt)}if(typeof Je.then=="function")return Aa($e,He,Iw(Je),vt);if(Je.$$typeof===N)return Aa($e,He,Bd($e,Je),vt);Fw($e,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,He!==null&&He.tag===6?(x($e,He.sibling),vt=O(He,Je),vt.return=$e,$e=vt):(x($e,He),vt=km(Je,$e.mode,vt),vt.return=$e,$e=vt),fe($e)):x($e,He)}return function($e,He,Je,vt){try{Rx=0;var nr=Aa($e,He,Je,vt);return Qm=null,nr}catch(cr){if(cr===ge||cr===ye)throw cr;var ln=xs(29,cr,null,$e.mode);return ln.lanes=vt,ln.return=$e,ln}finally{}}}var Vm=tL(!0),rL=tL(!1),Oc=se(null),Rd=null;function ih(f){var p=f.alternate;Y(is,is.current&1),Y(Oc,f),Rd===null&&(p===null||Zr.current!==null||p.memoizedState!==null)&&(Rd=f)}function nL(f){if(f.tag===22){if(Y(is,is.current),Y(Oc,f),Rd===null){var p=f.alternate;p!==null&&p.memoizedState!==null&&(Rd=f)}}else sh()}function sh(){Y(is,is.current),Y(Oc,Oc.current)}function Qf(f){U(Oc),Rd===f&&(Rd=null),U(is)}var is=se(0);function Dw(f){for(var p=f;p!==null;){if(p.tag===13){var x=p.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||SN(x)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function L5(f,p,x,_){p=f.memoizedState,x=x(_,p),x=x==null?p:u({},p,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var O5={enqueueSetState:function(f,p,x){f=f._reactInternals;var _=zl(),O=At(_);O.payload=p,x!=null&&(O.callback=x),p=yt(f,O,_),p!==null&&(Gl(p,f,_),pt(p,f,_))},enqueueReplaceState:function(f,p,x){f=f._reactInternals;var _=zl(),O=At(_);O.tag=1,O.payload=p,x!=null&&(O.callback=x),p=yt(f,O,_),p!==null&&(Gl(p,f,_),pt(p,f,_))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var x=zl(),_=At(x);_.tag=2,p!=null&&(_.callback=p),p=yt(f,_,x),p!==null&&(Gl(p,f,x),pt(p,f,x))}};function aL(f,p,x,_,O,G,fe){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(_,G,fe):p.prototype&&p.prototype.isPureReactComponent?!gd(x,_)||!gd(O,G):!0}function iL(f,p,x,_){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(x,_),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(x,_),p.state!==f&&O5.enqueueReplaceState(p,p.state,null)}function tp(f,p){var x=p;if("ref"in p){x={};for(var _ in p)_!=="ref"&&(x[_]=p[_])}if(f=f.defaultProps){x===p&&(x=u({},x));for(var O in f)x[O]===void 0&&(x[O]=f[O])}return x}var Rw=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function sL(f){Rw(f)}function oL(f){console.error(f)}function lL(f){Rw(f)}function Pw(f,p){try{var x=f.onUncaughtError;x(p.value,{componentStack:p.stack})}catch(_){setTimeout(function(){throw _})}}function cL(f,p,x){try{var _=f.onCaughtError;_(x.value,{componentStack:x.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function U5(f,p,x){return x=At(x),x.tag=3,x.payload={element:null},x.callback=function(){Pw(f,p)},x}function uL(f){return f=At(f),f.tag=3,f}function dL(f,p,x,_){var O=x.type.getDerivedStateFromError;if(typeof O=="function"){var G=_.value;f.payload=function(){return O(G)},f.callback=function(){cL(p,x,_)}}var fe=x.stateNode;fe!==null&&typeof fe.componentDidCatch=="function"&&(f.callback=function(){cL(p,x,_),typeof O!="function"&&(fh===null?fh=new Set([this]):fh.add(this));var we=_.stack;this.componentDidCatch(_.value,{componentStack:we!==null?we:""})})}function yle(f,p,x,_,O){if(x.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(p=x.alternate,p!==null&&ZA(p,x,O,!0),x=Oc.current,x!==null){switch(x.tag){case 13:return Rd===null?cN():x.alternate===null&&ii===0&&(ii=3),x.flags&=-257,x.flags|=65536,x.lanes=O,_===Ee?x.flags|=16384:(p=x.updateQueue,p===null?x.updateQueue=new Set([_]):p.add(_),dN(f,_,O)),!1;case 22:return x.flags|=65536,_===Ee?x.flags|=16384:(p=x.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([_])},x.updateQueue=p):(x=p.retryQueue,x===null?p.retryQueue=new Set([_]):x.add(_)),dN(f,_,O)),!1}throw Error(n(435,x.tag))}return dN(f,_,O),cN(),!1}if(Nn)return p=Oc.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=O,_!==xx&&(f=Error(n(422),{cause:_}),JA(tn(f,x)))):(_!==xx&&(p=Error(n(423),{cause:_}),JA(tn(p,x))),f=f.current.alternate,f.flags|=65536,O&=-O,f.lanes|=O,_=tn(_,x),O=U5(f.stateNode,_,O),Wt(f,O),ii!==4&&(ii=2)),!1;var G=Error(n(520),{cause:_});if(G=tn(G,x),Qx===null?Qx=[G]:Qx.push(G),ii!==4&&(ii=2),p===null)return!0;_=tn(_,x),x=p;do{switch(x.tag){case 3:return x.flags|=65536,f=O&-O,x.lanes|=f,f=U5(x.stateNode,_,f),Wt(x,f),!1;case 1:if(p=x.type,G=x.stateNode,(x.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(fh===null||!fh.has(G))))return x.flags|=65536,O&=-O,x.lanes|=O,O=uL(O),dL(O,f,x,_),Wt(x,O),!1}x=x.return}while(x!==null);return!1}var fL=Error(n(461)),ys=!1;function Hs(f,p,x,_){p.child=f===null?rL(p,null,x,_):Vm(p,f.child,x,_)}function AL(f,p,x,_,O){x=x.render;var G=p.ref;if("ref"in _){var fe={};for(var we in _)we!=="ref"&&(fe[we]=_[we])}else fe=_;return Mc(p),_=Ul(f,p,x,fe,G,O),we=ya(),f!==null&&!ys?(G0(f,p,O),Vf(f,p,O)):(Nn&&we&&H0(p),p.flags|=1,Hs(f,p,_,O),p.child)}function hL(f,p,x,_,O){if(f===null){var G=x.type;return typeof G=="function"&&!YA(G)&&G.defaultProps===void 0&&x.compare===null?(p.tag=15,p.type=G,pL(f,p,G,_,O)):(f=Df(x.type,null,_,p,p.mode,O),f.ref=p.ref,f.return=p,p.child=f)}if(G=f.child,!$5(f,O)){var fe=G.memoizedProps;if(x=x.compare,x=x!==null?x:gd,x(fe,_)&&f.ref===p.ref)return Vf(f,p,O)}return p.flags|=1,f=Fc(G,_),f.ref=p.ref,f.return=p,p.child=f}function pL(f,p,x,_,O){if(f!==null){var G=f.memoizedProps;if(gd(G,_)&&f.ref===p.ref)if(ys=!1,p.pendingProps=_=G,$5(f,O))(f.flags&131072)!==0&&(ys=!0);else return p.lanes=f.lanes,Vf(f,p,O)}return j5(f,p,x,_,O)}function mL(f,p,x){var _=p.pendingProps,O=_.children,G=f!==null?f.memoizedState:null;if(_.mode==="hidden"){if((p.flags&128)!==0){if(_=G!==null?G.baseLanes|x:x,f!==null){for(O=p.child=f.child,G=0;O!==null;)G=G|O.lanes|O.childLanes,O=O.sibling;p.childLanes=G&~_}else p.childLanes=0,p.child=null;return gL(f,p,_,x)}if((x&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&oe(p,G!==null?G.cachePool:null),G!==null?zn(p,G):Rn(),nL(p);else return p.lanes=p.childLanes=536870912,gL(f,p,G!==null?G.baseLanes|x:x,x)}else G!==null?(oe(p,G.cachePool),zn(p,G),sh(),p.memoizedState=null):(f!==null&&oe(p,null),Rn(),sh());return Hs(f,p,O,x),p.child}function gL(f,p,x,_){var O=J();return O=O===null?null:{parent:vi._currentValue,pool:O},p.memoizedState={baseLanes:x,cachePool:O},f!==null&&oe(p,null),Rn(),nL(p),f!==null&&ZA(f,p,_,!0),null}function Mw(f,p){var x=p.ref;if(x===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(f===null||f.ref!==x)&&(p.flags|=4194816)}}function j5(f,p,x,_,O){return Mc(p),x=Ul(f,p,x,_,void 0,O),_=ya(),f!==null&&!ys?(G0(f,p,O),Vf(f,p,O)):(Nn&&_&&H0(p),p.flags|=1,Hs(f,p,x,O),p.child)}function vL(f,p,x,_,O,G){return Mc(p),p.updateQueue=null,x=Of(p,_,x,O),kd(f),_=ya(),f!==null&&!ys?(G0(f,p,G),Vf(f,p,G)):(Nn&&_&&H0(p),p.flags|=1,Hs(f,p,x,G),p.child)}function xL(f,p,x,_,O){if(Mc(p),p.stateNode===null){var G=Mi,fe=x.contextType;typeof fe=="object"&&fe!==null&&(G=gi(fe)),G=new x(_,G),p.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,G.updater=O5,p.stateNode=G,G._reactInternals=p,G=p.stateNode,G.props=_,G.state=p.memoizedState,G.refs={},Ue(p),fe=x.contextType,G.context=typeof fe=="object"&&fe!==null?gi(fe):Mi,G.state=p.memoizedState,fe=x.getDerivedStateFromProps,typeof fe=="function"&&(L5(p,x,fe,_),G.state=p.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(fe=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),fe!==G.state&&O5.enqueueReplaceState(G,G.state,null),Gt(p,_,G,O),or(),G.state=p.memoizedState),typeof G.componentDidMount=="function"&&(p.flags|=4194308),_=!0}else if(f===null){G=p.stateNode;var we=p.memoizedProps,Pe=tp(x,we);G.props=Pe;var rt=G.context,ht=x.contextType;fe=Mi,typeof ht=="object"&&ht!==null&&(fe=gi(ht));var Ct=x.getDerivedStateFromProps;ht=typeof Ct=="function"||typeof G.getSnapshotBeforeUpdate=="function",we=p.pendingProps!==we,ht||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(we||rt!==fe)&&iL(p,G,_,fe),st=!1;var at=p.memoizedState;G.state=at,Gt(p,_,G,O),or(),rt=p.memoizedState,we||at!==rt||st?(typeof Ct=="function"&&(L5(p,x,Ct,_),rt=p.memoizedState),(Pe=st||aL(p,x,Pe,_,at,rt,fe))?(ht||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(p.flags|=4194308)):(typeof G.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=_,p.memoizedState=rt),G.props=_,G.state=rt,G.context=fe,_=Pe):(typeof G.componentDidMount=="function"&&(p.flags|=4194308),_=!1)}else{G=p.stateNode,Qe(f,p),fe=p.memoizedProps,ht=tp(x,fe),G.props=ht,Ct=p.pendingProps,at=G.context,rt=x.contextType,Pe=Mi,typeof rt=="object"&&rt!==null&&(Pe=gi(rt)),we=x.getDerivedStateFromProps,(rt=typeof we=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(fe!==Ct||at!==Pe)&&iL(p,G,_,Pe),st=!1,at=p.memoizedState,G.state=at,Gt(p,_,G,O),or();var it=p.memoizedState;fe!==Ct||at!==it||st||f!==null&&f.dependencies!==null&&Rm(f.dependencies)?(typeof we=="function"&&(L5(p,x,we,_),it=p.memoizedState),(ht=st||aL(p,x,ht,_,at,it,Pe)||f!==null&&f.dependencies!==null&&Rm(f.dependencies))?(rt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(_,it,Pe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(_,it,Pe)),typeof G.componentDidUpdate=="function"&&(p.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof G.componentDidUpdate!="function"||fe===f.memoizedProps&&at===f.memoizedState||(p.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&at===f.memoizedState||(p.flags|=1024),p.memoizedProps=_,p.memoizedState=it),G.props=_,G.state=it,G.context=Pe,_=ht):(typeof G.componentDidUpdate!="function"||fe===f.memoizedProps&&at===f.memoizedState||(p.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&at===f.memoizedState||(p.flags|=1024),_=!1)}return G=_,Mw(f,p),_=(p.flags&128)!==0,G||_?(G=p.stateNode,x=_&&typeof x.getDerivedStateFromError!="function"?null:G.render(),p.flags|=1,f!==null&&_?(p.child=Vm(p,f.child,null,O),p.child=Vm(p,null,x,O)):Hs(f,p,x,O),p.memoizedState=G.state,f=p.child):f=Vf(f,p,O),f}function yL(f,p,x,_){return zo(),p.flags|=256,Hs(f,p,x,_),p.child}var H5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q5(f){return{baseLanes:f,cachePool:he()}}function V5(f,p,x){return f=f!==null?f.childLanes&~x:0,p&&(f|=Uc),f}function bL(f,p,x){var _=p.pendingProps,O=!1,G=(p.flags&128)!==0,fe;if((fe=G)||(fe=f!==null&&f.memoizedState===null?!1:(is.current&2)!==0),fe&&(O=!0,p.flags&=-129),fe=(p.flags&32)!==0,p.flags&=-33,f===null){if(Nn){if(O?ih(p):sh(),Nn){var we=La,Pe;if(Pe=we){e:{for(Pe=we,we=Dc;Pe.nodeType!==8;){if(!we){we=null;break e}if(Pe=Uu(Pe.nextSibling),Pe===null){we=null;break e}}we=Pe}we!==null?(p.memoizedState={dehydrated:we,treeContext:Rf!==null?{id:Bu,overflow:ku}:null,retryLane:536870912,hydrationErrors:null},Pe=xs(18,null,null,0),Pe.stateNode=we,Pe.return=p,p.child=Pe,mi=p,La=null,Pe=!0):Pe=!1}Pe||Mf(p)}if(we=p.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return SN(we)?p.lanes=32:p.lanes=536870912,null;Qf(p)}return we=_.children,_=_.fallback,O?(sh(),O=p.mode,we=Lw({mode:"hidden",children:we},O),_=Tu(_,O,x,null),we.return=p,_.return=p,we.sibling=_,p.child=we,O=p.child,O.memoizedState=Q5(x),O.childLanes=V5(f,fe,x),p.memoizedState=H5,_):(ih(p),z5(p,we))}if(Pe=f.memoizedState,Pe!==null&&(we=Pe.dehydrated,we!==null)){if(G)p.flags&256?(ih(p),p.flags&=-257,p=G5(f,p,x)):p.memoizedState!==null?(sh(),p.child=f.child,p.flags|=128,p=null):(sh(),O=_.fallback,we=p.mode,_=Lw({mode:"visible",children:_.children},we),O=Tu(O,we,x,null),O.flags|=2,_.return=p,O.return=p,_.sibling=O,p.child=_,Vm(p,f.child,null,x),_=p.child,_.memoizedState=Q5(x),_.childLanes=V5(f,fe,x),p.memoizedState=H5,p=O);else if(ih(p),SN(we)){if(fe=we.nextSibling&&we.nextSibling.dataset,fe)var rt=fe.dgst;fe=rt,_=Error(n(419)),_.stack="",_.digest=fe,JA({value:_,source:null,stack:null}),p=G5(f,p,x)}else if(ys||ZA(f,p,x,!1),fe=(x&f.childLanes)!==0,ys||fe){if(fe=ba,fe!==null&&(_=x&-x,_=(_&42)!==0?1:Fi(_),_=(_&(fe.suspendedLanes|x))!==0?0:_,_!==0&&_!==Pe.retryLane))throw Pe.retryLane=_,Su(f,_),Gl(fe,f,_),fL;we.data==="$?"||cN(),p=G5(f,p,x)}else we.data==="$?"?(p.flags|=192,p.child=f.child,p=null):(f=Pe.treeContext,La=Uu(we.nextSibling),mi=p,Nn=!0,Td=null,Dc=!1,f!==null&&(dl[Vo++]=Bu,dl[Vo++]=ku,dl[Vo++]=Rf,Bu=f.id,ku=f.overflow,Rf=p),p=z5(p,_.children),p.flags|=4096);return p}return O?(sh(),O=_.fallback,we=p.mode,Pe=f.child,rt=Pe.sibling,_=Fc(Pe,{mode:"hidden",children:_.children}),_.subtreeFlags=Pe.subtreeFlags&65011712,rt!==null?O=Fc(rt,O):(O=Tu(O,we,x,null),O.flags|=2),O.return=p,_.return=p,_.sibling=O,p.child=_,_=O,O=p.child,we=f.child.memoizedState,we===null?we=Q5(x):(Pe=we.cachePool,Pe!==null?(rt=vi._currentValue,Pe=Pe.parent!==rt?{parent:rt,pool:rt}:Pe):Pe=he(),we={baseLanes:we.baseLanes|x,cachePool:Pe}),O.memoizedState=we,O.childLanes=V5(f,fe,x),p.memoizedState=H5,_):(ih(p),x=f.child,f=x.sibling,x=Fc(x,{mode:"visible",children:_.children}),x.return=p,x.sibling=null,f!==null&&(fe=p.deletions,fe===null?(p.deletions=[f],p.flags|=16):fe.push(f)),p.child=x,p.memoizedState=null,x)}function z5(f,p){return p=Lw({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function Lw(f,p){return f=xs(22,f,null,p),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function G5(f,p,x){return Vm(p,f.child,null,x),f=z5(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function wL(f,p,x){f.lanes|=p;var _=f.alternate;_!==null&&(_.lanes|=p),Fm(f.return,p,x)}function q5(f,p,x,_,O){var G=f.memoizedState;G===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:_,tail:x,tailMode:O}:(G.isBackwards=p,G.rendering=null,G.renderingStartTime=0,G.last=_,G.tail=x,G.tailMode=O)}function CL(f,p,x){var _=p.pendingProps,O=_.revealOrder,G=_.tail;if(Hs(f,p,_.children,x),_=is.current,(_&2)!==0)_=_&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&wL(f,x,p);else if(f.tag===19)wL(f,x,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}_&=1}switch(Y(is,_),O){case"forwards":for(x=p.child,O=null;x!==null;)f=x.alternate,f!==null&&Dw(f)===null&&(O=x),x=x.sibling;x=O,x===null?(O=p.child,p.child=null):(O=x.sibling,x.sibling=null),q5(p,!1,O,x,G);break;case"backwards":for(x=null,O=p.child,p.child=null;O!==null;){if(f=O.alternate,f!==null&&Dw(f)===null){p.child=O;break}f=O.sibling,O.sibling=x,x=O,O=f}q5(p,!0,x,null,G);break;case"together":q5(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Vf(f,p,x){if(f!==null&&(p.dependencies=f.dependencies),dh|=p.lanes,(x&p.childLanes)===0)if(f!==null){if(ZA(f,p,x,!1),(x&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(n(153));if(p.child!==null){for(f=p.child,x=Fc(f,f.pendingProps),p.child=x,x.return=p;f.sibling!==null;)f=f.sibling,x=x.sibling=Fc(f,f.pendingProps),x.return=p;x.sibling=null}return p.child}function $5(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&Rm(f)))}function ble(f,p,x){switch(p.tag){case 3:Ae(p,p.stateNode.containerInfo),Nd(p,vi,f.memoizedState.cache),zo();break;case 27:case 5:ue(p);break;case 4:Ae(p,p.stateNode.containerInfo);break;case 10:Nd(p,p.type,p.memoizedProps.value);break;case 13:var _=p.memoizedState;if(_!==null)return _.dehydrated!==null?(ih(p),p.flags|=128,null):(x&p.child.childLanes)!==0?bL(f,p,x):(ih(p),f=Vf(f,p,x),f!==null?f.sibling:null);ih(p);break;case 19:var O=(f.flags&128)!==0;if(_=(x&p.childLanes)!==0,_||(ZA(f,p,x,!1),_=(x&p.childLanes)!==0),O){if(_)return CL(f,p,x);p.flags|=128}if(O=p.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Y(is,is.current),_)break;return null;case 22:case 23:return p.lanes=0,mL(f,p,x);case 24:Nd(p,vi,f.memoizedState.cache)}return Vf(f,p,x)}function EL(f,p,x){if(f!==null)if(f.memoizedProps!==p.pendingProps)ys=!0;else{if(!$5(f,x)&&(p.flags&128)===0)return ys=!1,ble(f,p,x);ys=(f.flags&131072)!==0}else ys=!1,Nn&&(p.flags&1048576)!==0&&Aw(p,Im,p.index);switch(p.lanes=0,p.tag){case 16:e:{f=p.pendingProps;var _=p.elementType,O=_._init;if(_=O(_._payload),p.type=_,typeof _=="function")YA(_)?(f=tp(_,f),p.tag=1,p=xL(null,p,_,f,x)):(p.tag=0,p=j5(null,p,_,f,x));else{if(_!=null){if(O=_.$$typeof,O===F){p.tag=11,p=AL(null,p,_,f,x);break e}else if(O===E){p.tag=14,p=hL(null,p,_,f,x);break e}}throw p=V(_)||_,Error(n(306,p,""))}}return p;case 0:return j5(f,p,p.type,p.pendingProps,x);case 1:return _=p.type,O=tp(_,p.pendingProps),xL(f,p,_,O,x);case 3:e:{if(Ae(p,p.stateNode.containerInfo),f===null)throw Error(n(387));_=p.pendingProps;var G=p.memoizedState;O=G.element,Qe(f,p),Gt(p,_,null,x);var fe=p.memoizedState;if(_=fe.cache,Nd(p,vi,_),_!==G.cache&&Dm(p,[vi],x,!0),or(),_=fe.element,G.isDehydrated)if(G={element:_,isDehydrated:!1,cache:fe.cache},p.updateQueue.baseState=G,p.memoizedState=G,p.flags&256){p=yL(f,p,_,x);break e}else if(_!==O){O=tn(Error(n(424)),p),JA(O),p=yL(f,p,_,x);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(La=Uu(f.firstChild),mi=p,Nn=!0,Td=null,Dc=!0,x=rL(p,null,_,x),p.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(zo(),_===O){p=Vf(f,p,x);break e}Hs(f,p,_,x)}p=p.child}return p;case 26:return Mw(f,p),f===null?(x=NO(p.type,null,p.pendingProps,null))?p.memoizedState=x:Nn||(x=p.type,f=p.pendingProps,_=Xw(de.current).createElement(x),_[bn]=p,_[fn]=f,Vs(_,x,f),ze(_),p.stateNode=_):p.memoizedState=NO(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return ue(p),f===null&&Nn&&(_=p.stateNode=_O(p.type,p.pendingProps,de.current),mi=p,Dc=!0,O=La,ph(p.type)?(TN=O,La=Uu(_.firstChild)):La=O),Hs(f,p,p.pendingProps.children,x),Mw(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&Nn&&((O=_=La)&&(_=Wle(_,p.type,p.pendingProps,Dc),_!==null?(p.stateNode=_,mi=p,La=Uu(_.firstChild),Dc=!1,O=!0):O=!1),O||Mf(p)),ue(p),O=p.type,G=p.pendingProps,fe=f!==null?f.memoizedProps:null,_=G.children,CN(O,G)?_=null:fe!==null&&CN(O,fe)&&(p.flags|=32),p.memoizedState!==null&&(O=Ul(f,p,Id,null,null,x),Xx._currentValue=O),Mw(f,p),Hs(f,p,_,x),p.child;case 6:return f===null&&Nn&&((f=x=La)&&(x=Yle(x,p.pendingProps,Dc),x!==null?(p.stateNode=x,mi=p,La=null,f=!0):f=!1),f||Mf(p)),null;case 13:return bL(f,p,x);case 4:return Ae(p,p.stateNode.containerInfo),_=p.pendingProps,f===null?p.child=Vm(p,null,_,x):Hs(f,p,_,x),p.child;case 11:return AL(f,p,p.type,p.pendingProps,x);case 7:return Hs(f,p,p.pendingProps,x),p.child;case 8:return Hs(f,p,p.pendingProps.children,x),p.child;case 12:return Hs(f,p,p.pendingProps.children,x),p.child;case 10:return _=p.pendingProps,Nd(p,p.type,_.value),Hs(f,p,_.children,x),p.child;case 9:return O=p.type._context,_=p.pendingProps.children,Mc(p),O=gi(O),_=_(O),p.flags|=1,Hs(f,p,_,x),p.child;case 14:return hL(f,p,p.type,p.pendingProps,x);case 15:return pL(f,p,p.type,p.pendingProps,x);case 19:return CL(f,p,x);case 31:return _=p.pendingProps,x=p.mode,_={mode:_.mode,children:_.children},f===null?(x=Lw(_,x),x.ref=p.ref,p.child=x,x.return=p,p=x):(x=Fc(f.child,_),x.ref=p.ref,p.child=x,x.return=p,p=x),p;case 22:return mL(f,p,x);case 24:return Mc(p),_=gi(vi),f===null?(O=J(),O===null&&(O=ba,G=yx(),O.pooledCache=G,G.refCount++,G!==null&&(O.pooledCacheLanes|=x),O=G),p.memoizedState={parent:_,cache:O},Ue(p),Nd(p,vi,O)):((f.lanes&x)!==0&&(Qe(f,p),Gt(p,null,null,x),or()),O=f.memoizedState,G=p.memoizedState,O.parent!==_?(O={parent:_,cache:_},p.memoizedState=O,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=O),Nd(p,vi,_)):(_=G.cache,Nd(p,vi,_),_!==O.cache&&Dm(p,[vi],x,!0))),Hs(f,p,p.pendingProps.children,x),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function zf(f){f.flags|=4}function _L(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!DO(p)){if(p=Oc.current,p!==null&&((Sn&4194048)===Sn?Rd!==null:(Sn&62914560)!==Sn&&(Sn&536870912)===0||p!==Rd))throw Ye=Ee,ve;f.flags|=8192}}function Ow(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?dn():536870912,f.lanes|=p,$m|=p)}function Mx(f,p){if(!Nn)switch(f.tailMode){case"hidden":p=f.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var _=null;x!==null;)x.alternate!==null&&(_=x),x=x.sibling;_===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:_.sibling=null}}function $a(f){var p=f.alternate!==null&&f.alternate.child===f.child,x=0,_=0;if(p)for(var O=f.child;O!==null;)x|=O.lanes|O.childLanes,_|=O.subtreeFlags&65011712,_|=O.flags&65011712,O.return=f,O=O.sibling;else for(O=f.child;O!==null;)x|=O.lanes|O.childLanes,_|=O.subtreeFlags,_|=O.flags,O.return=f,O=O.sibling;return f.subtreeFlags|=_,f.childLanes=x,p}function wle(f,p,x){var _=p.pendingProps;switch(Q0(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(p),null;case 1:return $a(p),null;case 3:return x=p.stateNode,_=null,f!==null&&(_=f.memoizedState.cache),p.memoizedState.cache!==_&&(p.flags|=2048),Pc(vi),ae(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(Us(p)?zf(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,pw())),$a(p),null;case 26:return x=p.memoizedState,f===null?(zf(p),x!==null?($a(p),_L(p,x)):($a(p),p.flags&=-16777217)):x?x!==f.memoizedState?(zf(p),$a(p),_L(p,x)):($a(p),p.flags&=-16777217):(f.memoizedProps!==_&&zf(p),$a(p),p.flags&=-16777217),null;case 27:le(p),x=de.current;var O=p.type;if(f!==null&&p.stateNode!=null)f.memoizedProps!==_&&zf(p);else{if(!_){if(p.stateNode===null)throw Error(n(166));return $a(p),null}f=Z.current,Us(p)?hw(p):(f=_O(O,_,x),p.stateNode=f,zf(p))}return $a(p),null;case 5:if(le(p),x=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==_&&zf(p);else{if(!_){if(p.stateNode===null)throw Error(n(166));return $a(p),null}if(f=Z.current,Us(p))hw(p);else{switch(O=Xw(de.current),f){case 1:f=O.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:f=O.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":f=O.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":f=O.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":f=O.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof _.is=="string"?O.createElement("select",{is:_.is}):O.createElement("select"),_.multiple?f.multiple=!0:_.size&&(f.size=_.size);break;default:f=typeof _.is=="string"?O.createElement(x,{is:_.is}):O.createElement(x)}}f[bn]=p,f[fn]=_;e:for(O=p.child;O!==null;){if(O.tag===5||O.tag===6)f.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===p)break e;for(;O.sibling===null;){if(O.return===null||O.return===p)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}p.stateNode=f;e:switch(Vs(f,x,_),x){case"button":case"input":case"select":case"textarea":f=!!_.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&zf(p)}}return $a(p),p.flags&=-16777217,null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==_&&zf(p);else{if(typeof _!="string"&&p.stateNode===null)throw Error(n(166));if(f=de.current,Us(p)){if(f=p.stateNode,x=p.memoizedProps,_=null,O=mi,O!==null)switch(O.tag){case 27:case 5:_=O.memoizedProps}f[bn]=p,f=!!(f.nodeValue===x||_!==null&&_.suppressHydrationWarning===!0||vO(f.nodeValue,x)),f||Mf(p)}else f=Xw(f).createTextNode(_),f[bn]=p,p.stateNode=f}return $a(p),null;case 13:if(_=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(O=Us(p),_!==null&&_.dehydrated!==null){if(f===null){if(!O)throw Error(n(318));if(O=p.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(n(317));O[bn]=p}else zo(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;$a(p),O=!1}else O=pw(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=O),O=!0;if(!O)return p.flags&256?(Qf(p),p):(Qf(p),null)}if(Qf(p),(p.flags&128)!==0)return p.lanes=x,p;if(x=_!==null,f=f!==null&&f.memoizedState!==null,x){_=p.child,O=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(O=_.alternate.memoizedState.cachePool.pool);var G=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(G=_.memoizedState.cachePool.pool),G!==O&&(_.flags|=2048)}return x!==f&&x&&(p.child.flags|=8192),Ow(p,p.updateQueue),$a(p),null;case 4:return ae(),f===null&&vN(p.stateNode.containerInfo),$a(p),null;case 10:return Pc(p.type),$a(p),null;case 19:if(U(is),O=p.memoizedState,O===null)return $a(p),null;if(_=(p.flags&128)!==0,G=O.rendering,G===null)if(_)Mx(O,!1);else{if(ii!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(G=Dw(f),G!==null){for(p.flags|=128,Mx(O,!1),f=G.updateQueue,p.updateQueue=f,Ow(p,f),p.subtreeFlags=0,f=x,x=p.child;x!==null;)U0(x,f),x=x.sibling;return Y(is,is.current&1|2),p.child}f=f.sibling}O.tail!==null&&Re()>Hw&&(p.flags|=128,_=!0,Mx(O,!1),p.lanes=4194304)}else{if(!_)if(f=Dw(G),f!==null){if(p.flags|=128,_=!0,f=f.updateQueue,p.updateQueue=f,Ow(p,f),Mx(O,!0),O.tail===null&&O.tailMode==="hidden"&&!G.alternate&&!Nn)return $a(p),null}else 2*Re()-O.renderingStartTime>Hw&&x!==536870912&&(p.flags|=128,_=!0,Mx(O,!1),p.lanes=4194304);O.isBackwards?(G.sibling=p.child,p.child=G):(f=O.last,f!==null?f.sibling=G:p.child=G,O.last=G)}return O.tail!==null?(p=O.tail,O.rendering=p,O.tail=p.sibling,O.renderingStartTime=Re(),p.sibling=null,f=is.current,Y(is,_?f&1|2:f&1),p):($a(p),null);case 22:case 23:return Qf(p),Or(),_=p.memoizedState!==null,f!==null?f.memoizedState!==null!==_&&(p.flags|=8192):_&&(p.flags|=8192),_?(x&536870912)!==0&&(p.flags&128)===0&&($a(p),p.subtreeFlags&6&&(p.flags|=8192)):$a(p),x=p.updateQueue,x!==null&&Ow(p,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==x&&(p.flags|=2048),f!==null&&U(j),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),p.memoizedState.cache!==x&&(p.flags|=2048),Pc(vi),$a(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function Cle(f,p){switch(Q0(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return Pc(vi),ae(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return le(p),null;case 13:if(Qf(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(n(340));zo()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return U(is),null;case 4:return ae(),null;case 10:return Pc(p.type),null;case 22:case 23:return Qf(p),Or(),f!==null&&U(j),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return Pc(vi),null;case 25:return null;default:return null}}function SL(f,p){switch(Q0(p),p.tag){case 3:Pc(vi),ae();break;case 26:case 27:case 5:le(p);break;case 4:ae();break;case 13:Qf(p);break;case 19:U(is);break;case 10:Pc(p.type);break;case 22:case 23:Qf(p),Or(),f!==null&&U(j);break;case 24:Pc(vi)}}function Lx(f,p){try{var x=p.updateQueue,_=x!==null?x.lastEffect:null;if(_!==null){var O=_.next;x=O;do{if((x.tag&f)===f){_=void 0;var G=x.create,fe=x.inst;_=G(),fe.destroy=_}x=x.next}while(x!==O)}}catch(we){ga(p,p.return,we)}}function oh(f,p,x){try{var _=p.updateQueue,O=_!==null?_.lastEffect:null;if(O!==null){var G=O.next;_=G;do{if((_.tag&f)===f){var fe=_.inst,we=fe.destroy;if(we!==void 0){fe.destroy=void 0,O=p;var Pe=x,rt=we;try{rt()}catch(ht){ga(O,Pe,ht)}}}_=_.next}while(_!==G)}}catch(ht){ga(p,p.return,ht)}}function TL(f){var p=f.updateQueue;if(p!==null){var x=f.stateNode;try{Dn(p,x)}catch(_){ga(f,f.return,_)}}}function NL(f,p,x){x.props=tp(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(_){ga(f,p,_)}}function Ox(f,p){try{var x=f.ref;if(x!==null){switch(f.tag){case 26:case 27:case 5:var _=f.stateNode;break;case 30:_=f.stateNode;break;default:_=f.stateNode}typeof x=="function"?f.refCleanup=x(_):x.current=_}}catch(O){ga(f,p,O)}}function Pd(f,p){var x=f.ref,_=f.refCleanup;if(x!==null)if(typeof _=="function")try{_()}catch(O){ga(f,p,O)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(O){ga(f,p,O)}else x.current=null}function BL(f){var p=f.type,x=f.memoizedProps,_=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":x.autoFocus&&_.focus();break e;case"img":x.src?_.src=x.src:x.srcSet&&(_.srcset=x.srcSet)}}catch(O){ga(f,f.return,O)}}function K5(f,p,x){try{var _=f.stateNode;zle(_,f.type,x,p),_[fn]=p}catch(O){ga(f,f.return,O)}}function kL(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&ph(f.type)||f.tag===4}function W5(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||kL(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&ph(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Y5(f,p,x){var _=f.tag;if(_===5||_===6)f=f.stateNode,p?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(f,p):(p=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,p.appendChild(f),x=x._reactRootContainer,x!=null||p.onclick!==null||(p.onclick=Yw));else if(_!==4&&(_===27&&ph(f.type)&&(x=f.stateNode,p=null),f=f.child,f!==null))for(Y5(f,p,x),f=f.sibling;f!==null;)Y5(f,p,x),f=f.sibling}function Uw(f,p,x){var _=f.tag;if(_===5||_===6)f=f.stateNode,p?x.insertBefore(f,p):x.appendChild(f);else if(_!==4&&(_===27&&ph(f.type)&&(x=f.stateNode),f=f.child,f!==null))for(Uw(f,p,x),f=f.sibling;f!==null;)Uw(f,p,x),f=f.sibling}function IL(f){var p=f.stateNode,x=f.memoizedProps;try{for(var _=f.type,O=p.attributes;O.length;)p.removeAttributeNode(O[0]);Vs(p,_,x),p[bn]=f,p[fn]=x}catch(G){ga(f,f.return,G)}}var Gf=!1,yi=!1,X5=!1,FL=typeof WeakSet=="function"?WeakSet:Set,bs=null;function Ele(f,p){if(f=f.containerInfo,bN=n2,f=Os(f),as(f)){if("selectionStart"in f)var x={start:f.selectionStart,end:f.selectionEnd};else e:{x=(x=f.ownerDocument)&&x.defaultView||window;var _=x.getSelection&&x.getSelection();if(_&&_.rangeCount!==0){x=_.anchorNode;var O=_.anchorOffset,G=_.focusNode;_=_.focusOffset;try{x.nodeType,G.nodeType}catch{x=null;break e}var fe=0,we=-1,Pe=-1,rt=0,ht=0,Ct=f,at=null;t:for(;;){for(var it;Ct!==x||O!==0&&Ct.nodeType!==3||(we=fe+O),Ct!==G||_!==0&&Ct.nodeType!==3||(Pe=fe+_),Ct.nodeType===3&&(fe+=Ct.nodeValue.length),(it=Ct.firstChild)!==null;)at=Ct,Ct=it;for(;;){if(Ct===f)break t;if(at===x&&++rt===O&&(we=fe),at===G&&++ht===_&&(Pe=fe),(it=Ct.nextSibling)!==null)break;Ct=at,at=Ct.parentNode}Ct=it}x=we===-1||Pe===-1?null:{start:we,end:Pe}}else x=null}x=x||{start:0,end:0}}else x=null;for(wN={focusedElem:f,selectionRange:x},n2=!1,bs=p;bs!==null;)if(p=bs,f=p.child,(p.subtreeFlags&1024)!==0&&f!==null)f.return=p,bs=f;else for(;bs!==null;){switch(p=bs,G=p.alternate,f=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&G!==null){f=void 0,x=p,O=G.memoizedProps,G=G.memoizedState,_=x.stateNode;try{var Pr=tp(x.type,O,x.elementType===x.type);f=_.getSnapshotBeforeUpdate(Pr,G),_.__reactInternalSnapshotBeforeUpdate=f}catch(Er){ga(x,x.return,Er)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,x=f.nodeType,x===9)_N(f);else if(x===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":_N(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(n(163))}if(f=p.sibling,f!==null){f.return=p.return,bs=f;break}bs=p.return}}function DL(f,p,x){var _=x.flags;switch(x.tag){case 0:case 11:case 15:lh(f,x),_&4&&Lx(5,x);break;case 1:if(lh(f,x),_&4)if(f=x.stateNode,p===null)try{f.componentDidMount()}catch(fe){ga(x,x.return,fe)}else{var O=tp(x.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(O,p,f.__reactInternalSnapshotBeforeUpdate)}catch(fe){ga(x,x.return,fe)}}_&64&&TL(x),_&512&&Ox(x,x.return);break;case 3:if(lh(f,x),_&64&&(f=x.updateQueue,f!==null)){if(p=null,x.child!==null)switch(x.child.tag){case 27:case 5:p=x.child.stateNode;break;case 1:p=x.child.stateNode}try{Dn(f,p)}catch(fe){ga(x,x.return,fe)}}break;case 27:p===null&&_&4&&IL(x);case 26:case 5:lh(f,x),p===null&&_&4&&BL(x),_&512&&Ox(x,x.return);break;case 12:lh(f,x);break;case 13:lh(f,x),_&4&&ML(f,x),_&64&&(f=x.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(x=Dle.bind(null,x),Xle(f,x))));break;case 22:if(_=x.memoizedState!==null||Gf,!_){p=p!==null&&p.memoizedState!==null||yi,O=Gf;var G=yi;Gf=_,(yi=p)&&!G?ch(f,x,(x.subtreeFlags&8772)!==0):lh(f,x),Gf=O,yi=G}break;case 30:break;default:lh(f,x)}}function RL(f){var p=f.alternate;p!==null&&(f.alternate=null,RL(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&Se(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Oa=null,Al=!1;function qf(f,p,x){for(x=x.child;x!==null;)PL(f,p,x),x=x.sibling}function PL(f,p,x){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Mt,x)}catch{}switch(x.tag){case 26:yi||Pd(x,p),qf(f,p,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:yi||Pd(x,p);var _=Oa,O=Al;ph(x.type)&&(Oa=x.stateNode,Al=!1),qf(f,p,x),$x(x.stateNode),Oa=_,Al=O;break;case 5:yi||Pd(x,p);case 6:if(_=Oa,O=Al,Oa=null,qf(f,p,x),Oa=_,Al=O,Oa!==null)if(Al)try{(Oa.nodeType===9?Oa.body:Oa.nodeName==="HTML"?Oa.ownerDocument.body:Oa).removeChild(x.stateNode)}catch(G){ga(x,p,G)}else try{Oa.removeChild(x.stateNode)}catch(G){ga(x,p,G)}break;case 18:Oa!==null&&(Al?(f=Oa,CO(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,x.stateNode),t1(f)):CO(Oa,x.stateNode));break;case 4:_=Oa,O=Al,Oa=x.stateNode.containerInfo,Al=!0,qf(f,p,x),Oa=_,Al=O;break;case 0:case 11:case 14:case 15:yi||oh(2,x,p),yi||oh(4,x,p),qf(f,p,x);break;case 1:yi||(Pd(x,p),_=x.stateNode,typeof _.componentWillUnmount=="function"&&NL(x,p,_)),qf(f,p,x);break;case 21:qf(f,p,x);break;case 22:yi=(_=yi)||x.memoizedState!==null,qf(f,p,x),yi=_;break;default:qf(f,p,x)}}function ML(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{t1(f)}catch(x){ga(p,p.return,x)}}function _le(f){switch(f.tag){case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new FL),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new FL),p;default:throw Error(n(435,f.tag))}}function J5(f,p){var x=_le(f);p.forEach(function(_){var O=Rle.bind(null,f,_);x.has(_)||(x.add(_),_.then(O,O))})}function Hl(f,p){var x=p.deletions;if(x!==null)for(var _=0;_<x.length;_++){var O=x[_],G=f,fe=p,we=fe;e:for(;we!==null;){switch(we.tag){case 27:if(ph(we.type)){Oa=we.stateNode,Al=!1;break e}break;case 5:Oa=we.stateNode,Al=!1;break e;case 3:case 4:Oa=we.stateNode.containerInfo,Al=!0;break e}we=we.return}if(Oa===null)throw Error(n(160));PL(G,fe,O),Oa=null,Al=!1,G=O.alternate,G!==null&&(G.return=null),O.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)LL(p,f),p=p.sibling}var Ou=null;function LL(f,p){var x=f.alternate,_=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Hl(p,f),Ql(f),_&4&&(oh(3,f,f.return),Lx(3,f),oh(5,f,f.return));break;case 1:Hl(p,f),Ql(f),_&512&&(yi||x===null||Pd(x,x.return)),_&64&&Gf&&(f=f.updateQueue,f!==null&&(_=f.callbacks,_!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?_:x.concat(_))));break;case 26:var O=Ou;if(Hl(p,f),Ql(f),_&512&&(yi||x===null||Pd(x,x.return)),_&4){var G=x!==null?x.memoizedState:null;if(_=f.memoizedState,x===null)if(_===null)if(f.stateNode===null){e:{_=f.type,x=f.memoizedProps,O=O.ownerDocument||O;t:switch(_){case"title":G=O.getElementsByTagName("title")[0],(!G||G[_e]||G[bn]||G.namespaceURI==="http://www.w3.org/2000/svg"||G.hasAttribute("itemprop"))&&(G=O.createElement(_),O.head.insertBefore(G,O.querySelector("head > title"))),Vs(G,_,x),G[bn]=f,ze(G),_=G;break e;case"link":var fe=IO("link","href",O).get(_+(x.href||""));if(fe){for(var we=0;we<fe.length;we++)if(G=fe[we],G.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&G.getAttribute("rel")===(x.rel==null?null:x.rel)&&G.getAttribute("title")===(x.title==null?null:x.title)&&G.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){fe.splice(we,1);break t}}G=O.createElement(_),Vs(G,_,x),O.head.appendChild(G);break;case"meta":if(fe=IO("meta","content",O).get(_+(x.content||""))){for(we=0;we<fe.length;we++)if(G=fe[we],G.getAttribute("content")===(x.content==null?null:""+x.content)&&G.getAttribute("name")===(x.name==null?null:x.name)&&G.getAttribute("property")===(x.property==null?null:x.property)&&G.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&G.getAttribute("charset")===(x.charSet==null?null:x.charSet)){fe.splice(we,1);break t}}G=O.createElement(_),Vs(G,_,x),O.head.appendChild(G);break;default:throw Error(n(468,_))}G[bn]=f,ze(G),_=G}f.stateNode=_}else FO(O,f.type,f.stateNode);else f.stateNode=kO(O,_,f.memoizedProps);else G!==_?(G===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):G.count--,_===null?FO(O,f.type,f.stateNode):kO(O,_,f.memoizedProps)):_===null&&f.stateNode!==null&&K5(f,f.memoizedProps,x.memoizedProps)}break;case 27:Hl(p,f),Ql(f),_&512&&(yi||x===null||Pd(x,x.return)),x!==null&&_&4&&K5(f,f.memoizedProps,x.memoizedProps);break;case 5:if(Hl(p,f),Ql(f),_&512&&(yi||x===null||Pd(x,x.return)),f.flags&32){O=f.stateNode;try{ao(O,"")}catch(it){ga(f,f.return,it)}}_&4&&f.stateNode!=null&&(O=f.memoizedProps,K5(f,O,x!==null?x.memoizedProps:O)),_&1024&&(X5=!0);break;case 6:if(Hl(p,f),Ql(f),_&4){if(f.stateNode===null)throw Error(n(162));_=f.memoizedProps,x=f.stateNode;try{x.nodeValue=_}catch(it){ga(f,f.return,it)}}break;case 3:if(e2=null,O=Ou,Ou=Jw(p.containerInfo),Hl(p,f),Ou=O,Ql(f),_&4&&x!==null&&x.memoizedState.isDehydrated)try{t1(p.containerInfo)}catch(it){ga(f,f.return,it)}X5&&(X5=!1,OL(f));break;case 4:_=Ou,Ou=Jw(f.stateNode.containerInfo),Hl(p,f),Ql(f),Ou=_;break;case 12:Hl(p,f),Ql(f);break;case 13:Hl(p,f),Ql(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(aN=Re()),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,J5(f,_)));break;case 22:O=f.memoizedState!==null;var Pe=x!==null&&x.memoizedState!==null,rt=Gf,ht=yi;if(Gf=rt||O,yi=ht||Pe,Hl(p,f),yi=ht,Gf=rt,Ql(f),_&8192)e:for(p=f.stateNode,p._visibility=O?p._visibility&-2:p._visibility|1,O&&(x===null||Pe||Gf||yi||rp(f)),x=null,p=f;;){if(p.tag===5||p.tag===26){if(x===null){Pe=x=p;try{if(G=Pe.stateNode,O)fe=G.style,typeof fe.setProperty=="function"?fe.setProperty("display","none","important"):fe.display="none";else{we=Pe.stateNode;var Ct=Pe.memoizedProps.style,at=Ct!=null&&Ct.hasOwnProperty("display")?Ct.display:null;we.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(it){ga(Pe,Pe.return,it)}}}else if(p.tag===6){if(x===null){Pe=p;try{Pe.stateNode.nodeValue=O?"":Pe.memoizedProps}catch(it){ga(Pe,Pe.return,it)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}_&4&&(_=f.updateQueue,_!==null&&(x=_.retryQueue,x!==null&&(_.retryQueue=null,J5(f,x))));break;case 19:Hl(p,f),Ql(f),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,J5(f,_)));break;case 30:break;case 21:break;default:Hl(p,f),Ql(f)}}function Ql(f){var p=f.flags;if(p&2){try{for(var x,_=f.return;_!==null;){if(kL(_)){x=_;break}_=_.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var O=x.stateNode,G=W5(f);Uw(f,G,O);break;case 5:var fe=x.stateNode;x.flags&32&&(ao(fe,""),x.flags&=-33);var we=W5(f);Uw(f,we,fe);break;case 3:case 4:var Pe=x.stateNode.containerInfo,rt=W5(f);Y5(f,rt,Pe);break;default:throw Error(n(161))}}catch(ht){ga(f,f.return,ht)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function OL(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;OL(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function lh(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)DL(f,p.alternate,p),p=p.sibling}function rp(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:oh(4,p,p.return),rp(p);break;case 1:Pd(p,p.return);var x=p.stateNode;typeof x.componentWillUnmount=="function"&&NL(p,p.return,x),rp(p);break;case 27:$x(p.stateNode);case 26:case 5:Pd(p,p.return),rp(p);break;case 22:p.memoizedState===null&&rp(p);break;case 30:rp(p);break;default:rp(p)}f=f.sibling}}function ch(f,p,x){for(x=x&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var _=p.alternate,O=f,G=p,fe=G.flags;switch(G.tag){case 0:case 11:case 15:ch(O,G,x),Lx(4,G);break;case 1:if(ch(O,G,x),_=G,O=_.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(rt){ga(_,_.return,rt)}if(_=G,O=_.updateQueue,O!==null){var we=_.stateNode;try{var Pe=O.shared.hiddenCallbacks;if(Pe!==null)for(O.shared.hiddenCallbacks=null,O=0;O<Pe.length;O++)En(Pe[O],we)}catch(rt){ga(_,_.return,rt)}}x&&fe&64&&TL(G),Ox(G,G.return);break;case 27:IL(G);case 26:case 5:ch(O,G,x),x&&_===null&&fe&4&&BL(G),Ox(G,G.return);break;case 12:ch(O,G,x);break;case 13:ch(O,G,x),x&&fe&4&&ML(O,G);break;case 22:G.memoizedState===null&&ch(O,G,x),Ox(G,G.return);break;case 30:break;default:ch(O,G,x)}p=p.sibling}}function Z5(f,p){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&V0(x))}function eN(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&V0(f))}function Md(f,p,x,_){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)UL(f,p,x,_),p=p.sibling}function UL(f,p,x,_){var O=p.flags;switch(p.tag){case 0:case 11:case 15:Md(f,p,x,_),O&2048&&Lx(9,p);break;case 1:Md(f,p,x,_);break;case 3:Md(f,p,x,_),O&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&V0(f)));break;case 12:if(O&2048){Md(f,p,x,_),f=p.stateNode;try{var G=p.memoizedProps,fe=G.id,we=G.onPostCommit;typeof we=="function"&&we(fe,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Pe){ga(p,p.return,Pe)}}else Md(f,p,x,_);break;case 13:Md(f,p,x,_);break;case 23:break;case 22:G=p.stateNode,fe=p.alternate,p.memoizedState!==null?G._visibility&2?Md(f,p,x,_):Ux(f,p):G._visibility&2?Md(f,p,x,_):(G._visibility|=2,zm(f,p,x,_,(p.subtreeFlags&10256)!==0)),O&2048&&Z5(fe,p);break;case 24:Md(f,p,x,_),O&2048&&eN(p.alternate,p);break;default:Md(f,p,x,_)}}function zm(f,p,x,_,O){for(O=O&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var G=f,fe=p,we=x,Pe=_,rt=fe.flags;switch(fe.tag){case 0:case 11:case 15:zm(G,fe,we,Pe,O),Lx(8,fe);break;case 23:break;case 22:var ht=fe.stateNode;fe.memoizedState!==null?ht._visibility&2?zm(G,fe,we,Pe,O):Ux(G,fe):(ht._visibility|=2,zm(G,fe,we,Pe,O)),O&&rt&2048&&Z5(fe.alternate,fe);break;case 24:zm(G,fe,we,Pe,O),O&&rt&2048&&eN(fe.alternate,fe);break;default:zm(G,fe,we,Pe,O)}p=p.sibling}}function Ux(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var x=f,_=p,O=_.flags;switch(_.tag){case 22:Ux(x,_),O&2048&&Z5(_.alternate,_);break;case 24:Ux(x,_),O&2048&&eN(_.alternate,_);break;default:Ux(x,_)}p=p.sibling}}var jx=8192;function Gm(f){if(f.subtreeFlags&jx)for(f=f.child;f!==null;)jL(f),f=f.sibling}function jL(f){switch(f.tag){case 26:Gm(f),f.flags&jx&&f.memoizedState!==null&&uce(Ou,f.memoizedState,f.memoizedProps);break;case 5:Gm(f);break;case 3:case 4:var p=Ou;Ou=Jw(f.stateNode.containerInfo),Gm(f),Ou=p;break;case 22:f.memoizedState===null&&(p=f.alternate,p!==null&&p.memoizedState!==null?(p=jx,jx=16777216,Gm(f),jx=p):Gm(f));break;default:Gm(f)}}function HL(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function Hx(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var _=p[x];bs=_,VL(_,f)}HL(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)QL(f),f=f.sibling}function QL(f){switch(f.tag){case 0:case 11:case 15:Hx(f),f.flags&2048&&oh(9,f,f.return);break;case 3:Hx(f);break;case 12:Hx(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,jw(f)):Hx(f);break;default:Hx(f)}}function jw(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var _=p[x];bs=_,VL(_,f)}HL(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:oh(8,p,p.return),jw(p);break;case 22:x=p.stateNode,x._visibility&2&&(x._visibility&=-3,jw(p));break;default:jw(p)}f=f.sibling}}function VL(f,p){for(;bs!==null;){var x=bs;switch(x.tag){case 0:case 11:case 15:oh(8,x,p);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var _=x.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:V0(x.memoizedState.cache)}if(_=x.child,_!==null)_.return=x,bs=_;else e:for(x=f;bs!==null;){_=bs;var O=_.sibling,G=_.return;if(RL(_),_===x){bs=null;break e}if(O!==null){O.return=G,bs=O;break e}bs=G}}}var Sle={getCacheForType:function(f){var p=gi(vi),x=p.data.get(f);return x===void 0&&(x=f(),p.data.set(f,x)),x}},Tle=typeof WeakMap=="function"?WeakMap:Map,Zn=0,ba=null,An=null,Sn=0,ea=0,Vl=null,uh=!1,qm=!1,tN=!1,$f=0,ii=0,dh=0,np=0,rN=0,Uc=0,$m=0,Qx=null,hl=null,nN=!1,aN=0,Hw=1/0,Qw=null,fh=null,Qs=0,Ah=null,Km=null,Wm=0,iN=0,sN=null,zL=null,Vx=0,oN=null;function zl(){if((Zn&2)!==0&&Sn!==0)return Sn&-Sn;if(W.T!==null){var f=Lf;return f!==0?f:hN()}return Qa()}function GL(){Uc===0&&(Uc=(Sn&536870912)===0||Nn?Ii():536870912);var f=Oc.current;return f!==null&&(f.flags|=32),Uc}function Gl(f,p,x){(f===ba&&(ea===2||ea===9)||f.cancelPendingCommit!==null)&&(Ym(f,0),hh(f,Sn,Uc,!1)),Ra(f,x),((Zn&2)===0||f!==ba)&&(f===ba&&((Zn&2)===0&&(np|=x),ii===4&&hh(f,Sn,Uc,!1)),Ld(f))}function qL(f,p,x){if((Zn&6)!==0)throw Error(n(327));var _=!x&&(p&124)===0&&(p&f.expiredLanes)===0||jn(f,p),O=_?kle(f,p):uN(f,p,!0),G=_;do{if(O===0){qm&&!_&&hh(f,p,0,!1);break}else{if(x=f.current.alternate,G&&!Nle(x)){O=uN(f,p,!1),G=!1;continue}if(O===2){if(G=p,f.errorRecoveryDisabledLanes&G)var fe=0;else fe=f.pendingLanes&-536870913,fe=fe!==0?fe:fe&536870912?536870912:0;if(fe!==0){p=fe;e:{var we=f;O=Qx;var Pe=we.current.memoizedState.isDehydrated;if(Pe&&(Ym(we,fe).flags|=256),fe=uN(we,fe,!1),fe!==2){if(tN&&!Pe){we.errorRecoveryDisabledLanes|=G,np|=G,O=4;break e}G=hl,hl=O,G!==null&&(hl===null?hl=G:hl.push.apply(hl,G))}O=fe}if(G=!1,O!==2)continue}}if(O===1){Ym(f,0),hh(f,p,0,!0);break}e:{switch(_=f,G=O,G){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:hh(_,p,Uc,!uh);break e;case 2:hl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(O=aN+300-Re(),10<O)){if(hh(_,p,Uc,!uh),Vr(_,0,!0)!==0)break e;_.timeoutHandle=bO($L.bind(null,_,x,hl,Qw,nN,p,Uc,np,$m,uh,G,2,-0,0),O);break e}$L(_,x,hl,Qw,nN,p,Uc,np,$m,uh,G,0,-0,0)}}break}while(!0);Ld(f)}function $L(f,p,x,_,O,G,fe,we,Pe,rt,ht,Ct,at,it){if(f.timeoutHandle=-1,Ct=p.subtreeFlags,(Ct&8192||(Ct&16785408)===16785408)&&(Yx={stylesheets:null,count:0,unsuspend:cce},jL(p),Ct=dce(),Ct!==null)){f.cancelPendingCommit=Ct(eO.bind(null,f,p,G,x,_,O,fe,we,Pe,ht,1,at,it)),hh(f,G,fe,!rt);return}eO(f,p,G,x,_,O,fe,we,Pe)}function Nle(f){for(var p=f;;){var x=p.tag;if((x===0||x===11||x===15)&&p.flags&16384&&(x=p.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var _=0;_<x.length;_++){var O=x[_],G=O.getSnapshot;O=O.value;try{if(!Pi(G(),O))return!1}catch{return!1}}if(x=p.child,p.subtreeFlags&16384&&x!==null)x.return=p,p=x;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function hh(f,p,x,_){p&=~rN,p&=~np,f.suspendedLanes|=p,f.pingedLanes&=~p,_&&(f.warmLanes|=p),_=f.expirationTimes;for(var O=p;0<O;){var G=31-It(O),fe=1<<G;_[G]=-1,O&=~fe}x!==0&&sr(f,x,p)}function Vw(){return(Zn&6)===0?(zx(0),!1):!0}function lN(){if(An!==null){if(ea===0)var f=An.return;else f=An,Fu=Li=null,Mm(f),Qm=null,Rx=0,f=An;for(;f!==null;)SL(f.alternate,f),f=f.return;An=null}}function Ym(f,p){var x=f.timeoutHandle;x!==-1&&(f.timeoutHandle=-1,qle(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),lN(),ba=f,An=x=Fc(f.current,null),Sn=p,ea=0,Vl=null,uh=!1,qm=jn(f,p),tN=!1,$m=Uc=rN=np=dh=ii=0,hl=Qx=null,nN=!1,(p&8)!==0&&(p|=p&32);var _=f.entangledLanes;if(_!==0)for(f=f.entanglements,_&=p;0<_;){var O=31-It(_),G=1<<O;p|=f[O],_&=~G}return $f=p,cl(),x}function KL(f,p){gr=null,W.H=kw,p===ge||p===ye?(p=qe(),ea=3):p===ve?(p=qe(),ea=4):ea=p===fL?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Vl=p,An===null&&(ii=1,Pw(f,tn(p,f.current)))}function WL(){var f=W.H;return W.H=kw,f===null?kw:f}function YL(){var f=W.A;return W.A=Sle,f}function cN(){ii=4,uh||(Sn&4194048)!==Sn&&Oc.current!==null||(qm=!0),(dh&134217727)===0&&(np&134217727)===0||ba===null||hh(ba,Sn,Uc,!1)}function uN(f,p,x){var _=Zn;Zn|=2;var O=WL(),G=YL();(ba!==f||Sn!==p)&&(Qw=null,Ym(f,p)),p=!1;var fe=ii;e:do try{if(ea!==0&&An!==null){var we=An,Pe=Vl;switch(ea){case 8:lN(),fe=6;break e;case 3:case 2:case 9:case 6:Oc.current===null&&(p=!0);var rt=ea;if(ea=0,Vl=null,Xm(f,we,Pe,rt),x&&qm){fe=0;break e}break;default:rt=ea,ea=0,Vl=null,Xm(f,we,Pe,rt)}}Ble(),fe=ii;break}catch(ht){KL(f,ht)}while(!0);return p&&f.shellSuspendCounter++,Fu=Li=null,Zn=_,W.H=O,W.A=G,An===null&&(ba=null,Sn=0,cl()),fe}function Ble(){for(;An!==null;)XL(An)}function kle(f,p){var x=Zn;Zn|=2;var _=WL(),O=YL();ba!==f||Sn!==p?(Qw=null,Hw=Re()+500,Ym(f,p)):qm=jn(f,p);e:do try{if(ea!==0&&An!==null){p=An;var G=Vl;t:switch(ea){case 1:ea=0,Vl=null,Xm(f,p,G,1);break;case 2:case 9:if(Ne(G)){ea=0,Vl=null,JL(p);break}p=function(){ea!==2&&ea!==9||ba!==f||(ea=7),Ld(f)},G.then(p,p);break e;case 3:ea=7;break e;case 4:ea=5;break e;case 7:Ne(G)?(ea=0,Vl=null,JL(p)):(ea=0,Vl=null,Xm(f,p,G,7));break;case 5:var fe=null;switch(An.tag){case 26:fe=An.memoizedState;case 5:case 27:var we=An;if(!fe||DO(fe)){ea=0,Vl=null;var Pe=we.sibling;if(Pe!==null)An=Pe;else{var rt=we.return;rt!==null?(An=rt,zw(rt)):An=null}break t}}ea=0,Vl=null,Xm(f,p,G,5);break;case 6:ea=0,Vl=null,Xm(f,p,G,6);break;case 8:lN(),ii=6;break e;default:throw Error(n(462))}}Ile();break}catch(ht){KL(f,ht)}while(!0);return Fu=Li=null,W.H=_,W.A=O,Zn=x,An!==null?0:(ba=null,Sn=0,cl(),ii)}function Ile(){for(;An!==null&&!Be();)XL(An)}function XL(f){var p=EL(f.alternate,f,$f);f.memoizedProps=f.pendingProps,p===null?zw(f):An=p}function JL(f){var p=f,x=p.alternate;switch(p.tag){case 15:case 0:p=vL(x,p,p.pendingProps,p.type,void 0,Sn);break;case 11:p=vL(x,p,p.pendingProps,p.type.render,p.ref,Sn);break;case 5:Mm(p);default:SL(x,p),p=An=U0(p,$f),p=EL(x,p,$f)}f.memoizedProps=f.pendingProps,p===null?zw(f):An=p}function Xm(f,p,x,_){Fu=Li=null,Mm(p),Qm=null,Rx=0;var O=p.return;try{if(yle(f,O,p,x,Sn)){ii=1,Pw(f,tn(x,f.current)),An=null;return}}catch(G){if(O!==null)throw An=O,G;ii=1,Pw(f,tn(x,f.current)),An=null;return}p.flags&32768?(Nn||_===1?f=!0:qm||(Sn&536870912)!==0?f=!1:(uh=f=!0,(_===2||_===9||_===3||_===6)&&(_=Oc.current,_!==null&&_.tag===13&&(_.flags|=16384))),ZL(p,f)):zw(p)}function zw(f){var p=f;do{if((p.flags&32768)!==0){ZL(p,uh);return}f=p.return;var x=wle(p.alternate,p,$f);if(x!==null){An=x;return}if(p=p.sibling,p!==null){An=p;return}An=p=f}while(p!==null);ii===0&&(ii=5)}function ZL(f,p){do{var x=Cle(f.alternate,f);if(x!==null){x.flags&=32767,An=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!p&&(f=f.sibling,f!==null)){An=f;return}An=f=x}while(f!==null);ii=6,An=null}function eO(f,p,x,_,O,G,fe,we,Pe){f.cancelPendingCommit=null;do Gw();while(Qs!==0);if((Zn&6)!==0)throw Error(n(327));if(p!==null){if(p===f.current)throw Error(n(177));if(G=p.lanes|p.childLanes,G|=za,Gr(f,x,G,fe,we,Pe),f===ba&&(An=ba=null,Sn=0),Km=p,Ah=f,Wm=x,iN=G,sN=O,zL=_,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,Ple(wt,function(){return iO(),null})):(f.callbackNode=null,f.callbackPriority=0),_=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||_){_=W.T,W.T=null,O=re.p,re.p=2,fe=Zn,Zn|=4;try{Ele(f,p,x)}finally{Zn=fe,re.p=O,W.T=_}}Qs=1,tO(),rO(),nO()}}function tO(){if(Qs===1){Qs=0;var f=Ah,p=Km,x=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||x){x=W.T,W.T=null;var _=re.p;re.p=2;var O=Zn;Zn|=4;try{LL(p,f);var G=wN,fe=Os(f.containerInfo),we=G.focusedElem,Pe=G.selectionRange;if(fe!==we&&we&&we.ownerDocument&&vd(we.ownerDocument.documentElement,we)){if(Pe!==null&&as(we)){var rt=Pe.start,ht=Pe.end;if(ht===void 0&&(ht=rt),"selectionStart"in we)we.selectionStart=rt,we.selectionEnd=Math.min(ht,we.value.length);else{var Ct=we.ownerDocument||document,at=Ct&&Ct.defaultView||window;if(at.getSelection){var it=at.getSelection(),Pr=we.textContent.length,Er=Math.min(Pe.start,Pr),Aa=Pe.end===void 0?Er:Math.min(Pe.end,Pr);!it.extend&&Er>Aa&&(fe=Aa,Aa=Er,Er=fe);var $e=Eu(we,Er),He=Eu(we,Aa);if($e&&He&&(it.rangeCount!==1||it.anchorNode!==$e.node||it.anchorOffset!==$e.offset||it.focusNode!==He.node||it.focusOffset!==He.offset)){var Je=Ct.createRange();Je.setStart($e.node,$e.offset),it.removeAllRanges(),Er>Aa?(it.addRange(Je),it.extend(He.node,He.offset)):(Je.setEnd(He.node,He.offset),it.addRange(Je))}}}}for(Ct=[],it=we;it=it.parentNode;)it.nodeType===1&&Ct.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<Ct.length;we++){var vt=Ct[we];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}n2=!!bN,wN=bN=null}finally{Zn=O,re.p=_,W.T=x}}f.current=p,Qs=2}}function rO(){if(Qs===2){Qs=0;var f=Ah,p=Km,x=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||x){x=W.T,W.T=null;var _=re.p;re.p=2;var O=Zn;Zn|=4;try{DL(f,p.alternate,p)}finally{Zn=O,re.p=_,W.T=x}}Qs=3}}function nO(){if(Qs===4||Qs===3){Qs=0,Ce();var f=Ah,p=Km,x=Wm,_=zL;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Qs=5:(Qs=0,Km=Ah=null,aO(f,f.pendingLanes));var O=f.pendingLanes;if(O===0&&(fh=null),la(x),p=p.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Mt,p,void 0,(p.current.flags&128)===128)}catch{}if(_!==null){p=W.T,O=re.p,re.p=2,W.T=null;try{for(var G=f.onRecoverableError,fe=0;fe<_.length;fe++){var we=_[fe];G(we.value,{componentStack:we.stack})}}finally{W.T=p,re.p=O}}(Wm&3)!==0&&Gw(),Ld(f),O=f.pendingLanes,(x&4194090)!==0&&(O&42)!==0?f===oN?Vx++:(Vx=0,oN=f):Vx=0,zx(0)}}function aO(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,V0(p)))}function Gw(f){return tO(),rO(),nO(),iO()}function iO(){if(Qs!==5)return!1;var f=Ah,p=iN;iN=0;var x=la(Wm),_=W.T,O=re.p;try{re.p=32>x?32:x,W.T=null,x=sN,sN=null;var G=Ah,fe=Wm;if(Qs=0,Km=Ah=null,Wm=0,(Zn&6)!==0)throw Error(n(331));var we=Zn;if(Zn|=4,QL(G.current),UL(G,G.current,fe,x),Zn=we,zx(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Mt,G)}catch{}return!0}finally{re.p=O,W.T=_,aO(f,p)}}function sO(f,p,x){p=tn(x,p),p=U5(f.stateNode,p,2),f=yt(f,p,2),f!==null&&(Ra(f,2),Ld(f))}function ga(f,p,x){if(f.tag===3)sO(f,f,x);else for(;p!==null;){if(p.tag===3){sO(p,f,x);break}else if(p.tag===1){var _=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(fh===null||!fh.has(_))){f=tn(x,f),x=uL(2),_=yt(p,x,2),_!==null&&(dL(x,_,p,f),Ra(_,2),Ld(_));break}}p=p.return}}function dN(f,p,x){var _=f.pingCache;if(_===null){_=f.pingCache=new Tle;var O=new Set;_.set(p,O)}else O=_.get(p),O===void 0&&(O=new Set,_.set(p,O));O.has(x)||(tN=!0,O.add(x),f=Fle.bind(null,f,p,x),p.then(f,f))}function Fle(f,p,x){var _=f.pingCache;_!==null&&_.delete(p),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,ba===f&&(Sn&x)===x&&(ii===4||ii===3&&(Sn&62914560)===Sn&&300>Re()-aN?(Zn&2)===0&&Ym(f,0):rN|=x,$m===Sn&&($m=0)),Ld(f)}function oO(f,p){p===0&&(p=dn()),f=Su(f,p),f!==null&&(Ra(f,p),Ld(f))}function Dle(f){var p=f.memoizedState,x=0;p!==null&&(x=p.retryLane),oO(f,x)}function Rle(f,p){var x=0;switch(f.tag){case 13:var _=f.stateNode,O=f.memoizedState;O!==null&&(x=O.retryLane);break;case 19:_=f.stateNode;break;case 22:_=f.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(p),oO(f,x)}function Ple(f,p){return De(f,p)}var qw=null,Jm=null,fN=!1,$w=!1,AN=!1,ap=0;function Ld(f){f!==Jm&&f.next===null&&(Jm===null?qw=Jm=f:Jm=Jm.next=f),$w=!0,fN||(fN=!0,Lle())}function zx(f,p){if(!AN&&$w){AN=!0;do for(var x=!1,_=qw;_!==null;){if(f!==0){var O=_.pendingLanes;if(O===0)var G=0;else{var fe=_.suspendedLanes,we=_.pingedLanes;G=(1<<31-It(42|f)+1)-1,G&=O&~(fe&~we),G=G&201326741?G&201326741|1:G?G|2:0}G!==0&&(x=!0,dO(_,G))}else G=Sn,G=Vr(_,_===ba?G:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(G&3)===0||jn(_,G)||(x=!0,dO(_,G));_=_.next}while(x);AN=!1}}function Mle(){lO()}function lO(){$w=fN=!1;var f=0;ap!==0&&(Gle()&&(f=ap),ap=0);for(var p=Re(),x=null,_=qw;_!==null;){var O=_.next,G=cO(_,p);G===0?(_.next=null,x===null?qw=O:x.next=O,O===null&&(Jm=x)):(x=_,(f!==0||(G&3)!==0)&&($w=!0)),_=O}zx(f)}function cO(f,p){for(var x=f.suspendedLanes,_=f.pingedLanes,O=f.expirationTimes,G=f.pendingLanes&-62914561;0<G;){var fe=31-It(G),we=1<<fe,Pe=O[fe];Pe===-1?((we&x)===0||(we&_)!==0)&&(O[fe]=Ur(we,p)):Pe<=p&&(f.expiredLanes|=we),G&=~we}if(p=ba,x=Sn,x=Vr(f,f===p?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_=f.callbackNode,x===0||f===p&&(ea===2||ea===9)||f.cancelPendingCommit!==null)return _!==null&&_!==null&&Le(_),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||jn(f,x)){if(p=x&-x,p===f.callbackPriority)return p;switch(_!==null&&Le(_),la(x)){case 2:case 8:x=ct;break;case 32:x=wt;break;case 268435456:x=Rt;break;default:x=wt}return _=uO.bind(null,f),x=De(x,_),f.callbackPriority=p,f.callbackNode=x,p}return _!==null&&_!==null&&Le(_),f.callbackPriority=2,f.callbackNode=null,2}function uO(f,p){if(Qs!==0&&Qs!==5)return f.callbackNode=null,f.callbackPriority=0,null;var x=f.callbackNode;if(Gw()&&f.callbackNode!==x)return null;var _=Sn;return _=Vr(f,f===ba?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_===0?null:(qL(f,_,p),cO(f,Re()),f.callbackNode!=null&&f.callbackNode===x?uO.bind(null,f):null)}function dO(f,p){if(Gw())return null;qL(f,p,!0)}function Lle(){$le(function(){(Zn&6)!==0?De(We,Mle):lO()})}function hN(){return ap===0&&(ap=Ii()),ap}function fO(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Il(""+f)}function AO(f,p){var x=p.ownerDocument.createElement("input");return x.name=p.name,x.value=p.value,f.id&&x.setAttribute("form",f.id),p.parentNode.insertBefore(x,p),f=new FormData(f),x.parentNode.removeChild(x),f}function Ole(f,p,x,_,O){if(p==="submit"&&x&&x.stateNode===O){var G=fO((O[fn]||null).action),fe=_.submitter;fe&&(p=(p=fe[fn]||null)?fO(p.formAction):fe.getAttribute("formAction"),p!==null&&(G=p,fe=null));var we=new Cc("action","action",null,_,O);f.push({event:we,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(ap!==0){var Pe=fe?AO(O,fe):new FormData(O);Lc(x,{pending:!0,data:Pe,method:O.method,action:G},null,Pe)}}else typeof G=="function"&&(we.preventDefault(),Pe=fe?AO(O,fe):new FormData(O),Lc(x,{pending:!0,data:Pe,method:O.method,action:G},G,Pe))},currentTarget:O}]})}}for(var pN=0;pN<If.length;pN++){var mN=If[pN],Ule=mN.toLowerCase(),jle=mN[0].toUpperCase()+mN.slice(1);Ma(Ule,"on"+jle)}Ma(KA,"onAnimationEnd"),Ma(yd,"onAnimationIteration"),Ma(bd,"onAnimationStart"),Ma("dblclick","onDoubleClick"),Ma("focusin","onFocus"),Ma("focusout","onBlur"),Ma(wd,"onTransitionRun"),Ma(kf,"onTransitionStart"),Ma(WA,"onTransitionCancel"),Ma(Cd,"onTransitionEnd"),kt("onMouseEnter",["mouseout","mouseover"]),kt("onMouseLeave",["mouseout","mouseover"]),kt("onPointerEnter",["pointerout","pointerover"]),kt("onPointerLeave",["pointerout","pointerover"]),bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hle=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gx));function hO(f,p){p=(p&4)!==0;for(var x=0;x<f.length;x++){var _=f[x],O=_.event;_=_.listeners;e:{var G=void 0;if(p)for(var fe=_.length-1;0<=fe;fe--){var we=_[fe],Pe=we.instance,rt=we.currentTarget;if(we=we.listener,Pe!==G&&O.isPropagationStopped())break e;G=we,O.currentTarget=rt;try{G(O)}catch(ht){Rw(ht)}O.currentTarget=null,G=Pe}else for(fe=0;fe<_.length;fe++){if(we=_[fe],Pe=we.instance,rt=we.currentTarget,we=we.listener,Pe!==G&&O.isPropagationStopped())break e;G=we,O.currentTarget=rt;try{G(O)}catch(ht){Rw(ht)}O.currentTarget=null,G=Pe}}}}function hn(f,p){var x=p[Yn];x===void 0&&(x=p[Yn]=new Set);var _=f+"__bubble";x.has(_)||(pO(p,f,2,!1),x.add(_))}function gN(f,p,x){var _=0;p&&(_|=4),pO(x,f,_,p)}var Kw="_reactListening"+Math.random().toString(36).slice(2);function vN(f){if(!f[Kw]){f[Kw]=!0,Xe.forEach(function(x){x!=="selectionchange"&&(Hle.has(x)||gN(x,!1,f),gN(x,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[Kw]||(p[Kw]=!0,gN("selectionchange",!1,p))}}function pO(f,p,x,_){switch(UO(p)){case 2:var O=hce;break;case 8:O=pce;break;default:O=FN}x=O.bind(null,p,x,f),O=void 0,!Ls||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(O=!0),_?O!==void 0?f.addEventListener(p,x,{capture:!0,passive:O}):f.addEventListener(p,x,!0):O!==void 0?f.addEventListener(p,x,{passive:O}):f.addEventListener(p,x,!1)}function xN(f,p,x,_,O){var G=_;if((p&1)===0&&(p&2)===0&&_!==null)e:for(;;){if(_===null)return;var fe=_.tag;if(fe===3||fe===4){var we=_.stateNode.containerInfo;if(we===O)break;if(fe===4)for(fe=_.return;fe!==null;){var Pe=fe.tag;if((Pe===3||Pe===4)&&fe.stateNode.containerInfo===O)return;fe=fe.return}for(;we!==null;){if(fe=Te(we),fe===null)return;if(Pe=fe.tag,Pe===5||Pe===6||Pe===26||Pe===27){_=G=fe;continue e}we=we.parentNode}}_=_.return}VA(function(){var rt=G,ht=Xn(x),Ct=[];e:{var at=_u.get(f);if(at!==void 0){var it=Cc,Pr=f;switch(f){case"keypress":if(oo(x)===0)break e;case"keydown":case"keyup":it=Pl;break;case"focusin":Pr="focus",it=_c;break;case"focusout":Pr="blur",it=_c;break;case"beforeblur":case"afterblur":it=_c;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=ti;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Ec;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=hd;break;case KA:case yd:case bd:it=dd;break;case Cd:it=pe;break;case"scroll":case"scrollend":it=Ef;break;case"wheel":it=Me;break;case"copy":case"cut":case"paste":it=fd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Cu;break;case"toggle":case"beforetoggle":it=lt}var Er=(p&4)!==0,Aa=!Er&&(f==="scroll"||f==="scrollend"),$e=Er?at!==null?at+"Capture":null:at;Er=[];for(var He=rt,Je;He!==null;){var vt=He;if(Je=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||Je===null||$e===null||(vt=ps(He,$e),vt!=null&&Er.push(qx(He,vt,Je))),Aa)break;He=He.return}0<Er.length&&(at=new it(at,Pr,null,x,ht),Ct.push({event:at,listeners:Er}))}}if((p&7)===0){e:{if(at=f==="mouseover"||f==="pointerover",it=f==="mouseout"||f==="pointerout",at&&x!==tl&&(Pr=x.relatedTarget||x.fromElement)&&(Te(Pr)||Pr[Hn]))break e;if((it||at)&&(at=ht.window===ht?ht:(at=ht.ownerDocument)?at.defaultView||at.parentWindow:window,it?(Pr=x.relatedTarget||x.toElement,it=rt,Pr=Pr?Te(Pr):null,Pr!==null&&(Aa=i(Pr),Er=Pr.tag,Pr!==Aa||Er!==5&&Er!==27&&Er!==6)&&(Pr=null)):(it=null,Pr=rt),it!==Pr)){if(Er=ti,vt="onMouseLeave",$e="onMouseEnter",He="mouse",(f==="pointerout"||f==="pointerover")&&(Er=Cu,vt="onPointerLeave",$e="onPointerEnter",He="pointer"),Aa=it==null?at:Ke(it),Je=Pr==null?at:Ke(Pr),at=new Er(vt,He+"leave",it,x,ht),at.target=Aa,at.relatedTarget=Je,vt=null,Te(ht)===rt&&(Er=new Er($e,He+"enter",Pr,x,ht),Er.target=Je,Er.relatedTarget=Aa,vt=Er),Aa=vt,it&&Pr)t:{for(Er=it,$e=Pr,He=0,Je=Er;Je;Je=Zm(Je))He++;for(Je=0,vt=$e;vt;vt=Zm(vt))Je++;for(;0<He-Je;)Er=Zm(Er),He--;for(;0<Je-He;)$e=Zm($e),Je--;for(;He--;){if(Er===$e||$e!==null&&Er===$e.alternate)break t;Er=Zm(Er),$e=Zm($e)}Er=null}else Er=null;it!==null&&mO(Ct,at,it,Er,!1),Pr!==null&&Aa!==null&&mO(Ct,Aa,Pr,Er,!0)}}e:{if(at=rt?Ke(rt):window,it=at.nodeName&&at.nodeName.toLowerCase(),it==="select"||it==="input"&&at.type==="file")var nr=qA;else if(Vn(at))if(Sf)nr=Nm;else{nr=vx;var ln=co}else it=at.nodeName,!it||it.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?rt&&wf(rt.elementType)&&(nr=qA):nr=L0;if(nr&&(nr=nr(f,rt))){ol(Ct,nr,x,ht);break e}ln&&ln(f,at,rt),f==="focusout"&&rt&&at.type==="number"&&rt.memoizedProps.value!=null&&yc(at,"number",at.value)}switch(ln=rt?Ke(rt):window,f){case"focusin":(Vn(ln)||ln.contentEditable==="true")&&(uo=ln,Ml=rt,kc=null);break;case"focusout":kc=Ml=uo=null;break;case"mousedown":Ll=!0;break;case"contextmenu":case"mouseup":case"dragend":Ll=!1,Pa(Ct,x,ht);break;case"selectionchange":if(xd)break;case"keydown":case"keyup":Pa(Ct,x,ht)}var cr;if(zt)e:{switch(f){case"compositionstart":var Sr="onCompositionStart";break e;case"compositionend":Sr="onCompositionEnd";break e;case"compositionupdate":Sr="onCompositionUpdate";break e}Sr=void 0}else Cr?tt(f,x)&&(Sr="onCompositionEnd"):f==="keydown"&&x.keyCode===229&&(Sr="onCompositionStart");Sr&&(ce&&x.locale!=="ko"&&(Cr||Sr!=="onCompositionStart"?Sr==="onCompositionEnd"&&Cr&&(cr=Cf()):(so=ht,wc="value"in so?so.value:so.textContent,Cr=!0)),ln=Ww(rt,Sr),0<ln.length&&(Sr=new yu(Sr,f,null,x,ht),Ct.push({event:Sr,listeners:ln}),cr?Sr.data=cr:(cr=Nt(x),cr!==null&&(Sr.data=cr)))),(cr=ee?on(f,x):Lr(f,x))&&(Sr=Ww(rt,"onBeforeInput"),0<Sr.length&&(ln=new yu("onBeforeInput","beforeinput",null,x,ht),Ct.push({event:ln,listeners:Sr}),ln.data=cr)),Ole(Ct,f,rt,x,ht)}hO(Ct,p)})}function qx(f,p,x){return{instance:f,listener:p,currentTarget:x}}function Ww(f,p){for(var x=p+"Capture",_=[];f!==null;){var O=f,G=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||G===null||(O=ps(f,x),O!=null&&_.unshift(qx(f,O,G)),O=ps(f,p),O!=null&&_.push(qx(f,O,G))),f.tag===3)return _;f=f.return}return[]}function Zm(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function mO(f,p,x,_,O){for(var G=p._reactName,fe=[];x!==null&&x!==_;){var we=x,Pe=we.alternate,rt=we.stateNode;if(we=we.tag,Pe!==null&&Pe===_)break;we!==5&&we!==26&&we!==27||rt===null||(Pe=rt,O?(rt=ps(x,G),rt!=null&&fe.unshift(qx(x,rt,Pe))):O||(rt=ps(x,G),rt!=null&&fe.push(qx(x,rt,Pe)))),x=x.return}fe.length!==0&&f.push({event:p,listeners:fe})}var Qle=/\r\n?/g,Vle=/\u0000|\uFFFD/g;function gO(f){return(typeof f=="string"?f:""+f).replace(Qle,`
`).replace(Vle,"")}function vO(f,p){return p=gO(p),gO(f)===p}function Yw(){}function fa(f,p,x,_,O,G){switch(x){case"children":typeof _=="string"?p==="body"||p==="textarea"&&_===""||ao(f,_):(typeof _=="number"||typeof _=="bigint")&&p!=="body"&&ao(f,""+_);break;case"className":$r(f,"class",_);break;case"tabIndex":$r(f,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(f,x,_);break;case"style":bf(f,_,G);break;case"data":if(p!=="object"){$r(f,"data",_);break}case"src":case"href":if(_===""&&(p!=="a"||x!=="href")){f.removeAttribute(x);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(x);break}_=Il(""+_),f.setAttribute(x,_);break;case"action":case"formAction":if(typeof _=="function"){f.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof G=="function"&&(x==="formAction"?(p!=="input"&&fa(f,p,"name",O.name,O,null),fa(f,p,"formEncType",O.formEncType,O,null),fa(f,p,"formMethod",O.formMethod,O,null),fa(f,p,"formTarget",O.formTarget,O,null)):(fa(f,p,"encType",O.encType,O,null),fa(f,p,"method",O.method,O,null),fa(f,p,"target",O.target,O,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(x);break}_=Il(""+_),f.setAttribute(x,_);break;case"onClick":_!=null&&(f.onclick=Yw);break;case"onScroll":_!=null&&hn("scroll",f);break;case"onScrollEnd":_!=null&&hn("scrollend",f);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(x=_.__html,x!=null){if(O.children!=null)throw Error(n(60));f.innerHTML=x}}break;case"multiple":f.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":f.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){f.removeAttribute("xlink:href");break}x=Il(""+_),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(x,""+_):f.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(x,""):f.removeAttribute(x);break;case"capture":case"download":_===!0?f.setAttribute(x,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(x,_):f.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?f.setAttribute(x,_):f.removeAttribute(x);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?f.removeAttribute(x):f.setAttribute(x,_);break;case"popover":hn("beforetoggle",f),hn("toggle",f),qr(f,"popover",_);break;case"xlinkActuate":Jr(f,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Jr(f,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Jr(f,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Jr(f,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Jr(f,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Jr(f,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Jr(f,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Jr(f,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Jr(f,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":qr(f,"is",_);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=kl.get(x)||x,qr(f,x,_))}}function yN(f,p,x,_,O,G){switch(x){case"style":bf(f,_,G);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(x=_.__html,x!=null){if(O.children!=null)throw Error(n(60));f.innerHTML=x}}break;case"children":typeof _=="string"?ao(f,_):(typeof _=="number"||typeof _=="bigint")&&ao(f,""+_);break;case"onScroll":_!=null&&hn("scroll",f);break;case"onScrollEnd":_!=null&&hn("scrollend",f);break;case"onClick":_!=null&&(f.onclick=Yw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!et.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(O=x.endsWith("Capture"),p=x.slice(2,O?x.length-7:void 0),G=f[fn]||null,G=G!=null?G[x]:null,typeof G=="function"&&f.removeEventListener(p,G,O),typeof _=="function")){typeof G!="function"&&G!==null&&(x in f?f[x]=null:f.hasAttribute(x)&&f.removeAttribute(x)),f.addEventListener(p,_,O);break e}x in f?f[x]=_:_===!0?f.setAttribute(x,""):qr(f,x,_)}}}function Vs(f,p,x){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hn("error",f),hn("load",f);var _=!1,O=!1,G;for(G in x)if(x.hasOwnProperty(G)){var fe=x[G];if(fe!=null)switch(G){case"src":_=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:fa(f,p,G,fe,x,null)}}O&&fa(f,p,"srcSet",x.srcSet,x,null),_&&fa(f,p,"src",x.src,x,null);return;case"input":hn("invalid",f);var we=G=fe=O=null,Pe=null,rt=null;for(_ in x)if(x.hasOwnProperty(_)){var ht=x[_];if(ht!=null)switch(_){case"name":O=ht;break;case"type":fe=ht;break;case"checked":Pe=ht;break;case"defaultChecked":rt=ht;break;case"value":G=ht;break;case"defaultValue":we=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,p));break;default:fa(f,p,_,ht,x,null)}}xc(f,G,we,Pe,rt,fe,O,!1),vc(f);return;case"select":hn("invalid",f),_=fe=G=null;for(O in x)if(x.hasOwnProperty(O)&&(we=x[O],we!=null))switch(O){case"value":G=we;break;case"defaultValue":fe=we;break;case"multiple":_=we;default:fa(f,p,O,we,x,null)}p=G,x=fe,f.multiple=!!_,p!=null?el(f,!!_,p,!1):x!=null&&el(f,!!_,x,!0);return;case"textarea":hn("invalid",f),G=O=_=null;for(fe in x)if(x.hasOwnProperty(fe)&&(we=x[fe],we!=null))switch(fe){case"value":_=we;break;case"defaultValue":O=we;break;case"children":G=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(91));break;default:fa(f,p,fe,we,x,null)}bc(f,_,O,G),vc(f);return;case"option":for(Pe in x)if(x.hasOwnProperty(Pe)&&(_=x[Pe],_!=null))switch(Pe){case"selected":f.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:fa(f,p,Pe,_,x,null)}return;case"dialog":hn("beforetoggle",f),hn("toggle",f),hn("cancel",f),hn("close",f);break;case"iframe":case"object":hn("load",f);break;case"video":case"audio":for(_=0;_<Gx.length;_++)hn(Gx[_],f);break;case"image":hn("error",f),hn("load",f);break;case"details":hn("toggle",f);break;case"embed":case"source":case"link":hn("error",f),hn("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in x)if(x.hasOwnProperty(rt)&&(_=x[rt],_!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:fa(f,p,rt,_,x,null)}return;default:if(wf(p)){for(ht in x)x.hasOwnProperty(ht)&&(_=x[ht],_!==void 0&&yN(f,p,ht,_,x,void 0));return}}for(we in x)x.hasOwnProperty(we)&&(_=x[we],_!=null&&fa(f,p,we,_,x,null))}function zle(f,p,x,_){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,G=null,fe=null,we=null,Pe=null,rt=null,ht=null;for(it in x){var Ct=x[it];if(x.hasOwnProperty(it)&&Ct!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":Pe=Ct;default:_.hasOwnProperty(it)||fa(f,p,it,null,_,Ct)}}for(var at in _){var it=_[at];if(Ct=x[at],_.hasOwnProperty(at)&&(it!=null||Ct!=null))switch(at){case"type":G=it;break;case"name":O=it;break;case"checked":rt=it;break;case"defaultChecked":ht=it;break;case"value":fe=it;break;case"defaultValue":we=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,p));break;default:it!==Ct&&fa(f,p,at,it,_,Ct)}}rs(f,fe,we,Pe,rt,ht,G,O);return;case"select":it=fe=we=at=null;for(G in x)if(Pe=x[G],x.hasOwnProperty(G)&&Pe!=null)switch(G){case"value":break;case"multiple":it=Pe;default:_.hasOwnProperty(G)||fa(f,p,G,null,_,Pe)}for(O in _)if(G=_[O],Pe=x[O],_.hasOwnProperty(O)&&(G!=null||Pe!=null))switch(O){case"value":at=G;break;case"defaultValue":we=G;break;case"multiple":fe=G;default:G!==Pe&&fa(f,p,O,G,_,Pe)}p=we,x=fe,_=it,at!=null?el(f,!!x,at,!1):!!_!=!!x&&(p!=null?el(f,!!x,p,!0):el(f,!!x,x?[]:"",!1));return;case"textarea":it=at=null;for(we in x)if(O=x[we],x.hasOwnProperty(we)&&O!=null&&!_.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:fa(f,p,we,null,_,O)}for(fe in _)if(O=_[fe],G=x[fe],_.hasOwnProperty(fe)&&(O!=null||G!=null))switch(fe){case"value":at=O;break;case"defaultValue":it=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(n(91));break;default:O!==G&&fa(f,p,fe,O,_,G)}In(f,at,it);return;case"option":for(var Pr in x)if(at=x[Pr],x.hasOwnProperty(Pr)&&at!=null&&!_.hasOwnProperty(Pr))switch(Pr){case"selected":f.selected=!1;break;default:fa(f,p,Pr,null,_,at)}for(Pe in _)if(at=_[Pe],it=x[Pe],_.hasOwnProperty(Pe)&&at!==it&&(at!=null||it!=null))switch(Pe){case"selected":f.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:fa(f,p,Pe,at,_,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Er in x)at=x[Er],x.hasOwnProperty(Er)&&at!=null&&!_.hasOwnProperty(Er)&&fa(f,p,Er,null,_,at);for(rt in _)if(at=_[rt],it=x[rt],_.hasOwnProperty(rt)&&at!==it&&(at!=null||it!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,p));break;default:fa(f,p,rt,at,_,it)}return;default:if(wf(p)){for(var Aa in x)at=x[Aa],x.hasOwnProperty(Aa)&&at!==void 0&&!_.hasOwnProperty(Aa)&&yN(f,p,Aa,void 0,_,at);for(ht in _)at=_[ht],it=x[ht],!_.hasOwnProperty(ht)||at===it||at===void 0&&it===void 0||yN(f,p,ht,at,_,it);return}}for(var $e in x)at=x[$e],x.hasOwnProperty($e)&&at!=null&&!_.hasOwnProperty($e)&&fa(f,p,$e,null,_,at);for(Ct in _)at=_[Ct],it=x[Ct],!_.hasOwnProperty(Ct)||at===it||at==null&&it==null||fa(f,p,Ct,at,_,it)}var bN=null,wN=null;function Xw(f){return f.nodeType===9?f:f.ownerDocument}function xO(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yO(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function CN(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var EN=null;function Gle(){var f=window.event;return f&&f.type==="popstate"?f===EN?!1:(EN=f,!0):(EN=null,!1)}var bO=typeof setTimeout=="function"?setTimeout:void 0,qle=typeof clearTimeout=="function"?clearTimeout:void 0,wO=typeof Promise=="function"?Promise:void 0,$le=typeof queueMicrotask=="function"?queueMicrotask:typeof wO<"u"?function(f){return wO.resolve(null).then(f).catch(Kle)}:bO;function Kle(f){setTimeout(function(){throw f})}function ph(f){return f==="head"}function CO(f,p){var x=p,_=0,O=0;do{var G=x.nextSibling;if(f.removeChild(x),G&&G.nodeType===8)if(x=G.data,x==="/$"){if(0<_&&8>_){x=_;var fe=f.ownerDocument;if(x&1&&$x(fe.documentElement),x&2&&$x(fe.body),x&4)for(x=fe.head,$x(x),fe=x.firstChild;fe;){var we=fe.nextSibling,Pe=fe.nodeName;fe[_e]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&fe.rel.toLowerCase()==="stylesheet"||x.removeChild(fe),fe=we}}if(O===0){f.removeChild(G),t1(p);return}O--}else x==="$"||x==="$?"||x==="$!"?O++:_=x.charCodeAt(0)-48;else _=0;x=G}while(x);t1(p)}function _N(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var x=p;switch(p=p.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":_N(x),Se(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}f.removeChild(x)}}function Wle(f,p,x,_){for(;f.nodeType===1;){var O=x;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!_&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(_){if(!f[_e])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(G=f.getAttribute("rel"),G==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(G!==O.rel||f.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||f.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||f.getAttribute("title")!==(O.title==null?null:O.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(G=f.getAttribute("src"),(G!==(O.src==null?null:O.src)||f.getAttribute("type")!==(O.type==null?null:O.type)||f.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&G&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var G=O.name==null?null:""+O.name;if(O.type==="hidden"&&f.getAttribute("name")===G)return f}else return f;if(f=Uu(f.nextSibling),f===null)break}return null}function Yle(f,p,x){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!x||(f=Uu(f.nextSibling),f===null))return null;return f}function SN(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function Xle(f,p){var x=f.ownerDocument;if(f.data!=="$?"||x.readyState==="complete")p();else{var _=function(){p(),x.removeEventListener("DOMContentLoaded",_)};x.addEventListener("DOMContentLoaded",_),f._reactRetry=_}}function Uu(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return f}var TN=null;function EO(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var x=f.data;if(x==="$"||x==="$!"||x==="$?"){if(p===0)return f;p--}else x==="/$"&&p++}f=f.previousSibling}return null}function _O(f,p,x){switch(p=Xw(x),f){case"html":if(f=p.documentElement,!f)throw Error(n(452));return f;case"head":if(f=p.head,!f)throw Error(n(453));return f;case"body":if(f=p.body,!f)throw Error(n(454));return f;default:throw Error(n(451))}}function $x(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);Se(f)}var jc=new Map,SO=new Set;function Jw(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Kf=re.d;re.d={f:Jle,r:Zle,D:ece,C:tce,L:rce,m:nce,X:ice,S:ace,M:sce};function Jle(){var f=Kf.f(),p=Vw();return f||p}function Zle(f){var p=Ie(f);p!==null&&p.tag===5&&p.type==="form"?Z0(p):Kf.r(f)}var eg=typeof document>"u"?null:document;function TO(f,p,x){var _=eg;if(_&&typeof p=="string"&&p){var O=wn(p);O='link[rel="'+f+'"][href="'+O+'"]',typeof x=="string"&&(O+='[crossorigin="'+x+'"]'),SO.has(O)||(SO.add(O),f={rel:f,crossOrigin:x,href:p},_.querySelector(O)===null&&(p=_.createElement("link"),Vs(p,"link",f),ze(p),_.head.appendChild(p)))}}function ece(f){Kf.D(f),TO("dns-prefetch",f,null)}function tce(f,p){Kf.C(f,p),TO("preconnect",f,p)}function rce(f,p,x){Kf.L(f,p,x);var _=eg;if(_&&f&&p){var O='link[rel="preload"][as="'+wn(p)+'"]';p==="image"&&x&&x.imageSrcSet?(O+='[imagesrcset="'+wn(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(O+='[imagesizes="'+wn(x.imageSizes)+'"]')):O+='[href="'+wn(f)+'"]';var G=O;switch(p){case"style":G=tg(f);break;case"script":G=rg(f)}jc.has(G)||(f=u({rel:"preload",href:p==="image"&&x&&x.imageSrcSet?void 0:f,as:p},x),jc.set(G,f),_.querySelector(O)!==null||p==="style"&&_.querySelector(Kx(G))||p==="script"&&_.querySelector(Wx(G))||(p=_.createElement("link"),Vs(p,"link",f),ze(p),_.head.appendChild(p)))}}function nce(f,p){Kf.m(f,p);var x=eg;if(x&&f){var _=p&&typeof p.as=="string"?p.as:"script",O='link[rel="modulepreload"][as="'+wn(_)+'"][href="'+wn(f)+'"]',G=O;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":G=rg(f)}if(!jc.has(G)&&(f=u({rel:"modulepreload",href:f},p),jc.set(G,f),x.querySelector(O)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Wx(G)))return}_=x.createElement("link"),Vs(_,"link",f),ze(_),x.head.appendChild(_)}}}function ace(f,p,x){Kf.S(f,p,x);var _=eg;if(_&&f){var O=nt(_).hoistableStyles,G=tg(f);p=p||"default";var fe=O.get(G);if(!fe){var we={loading:0,preload:null};if(fe=_.querySelector(Kx(G)))we.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":p},x),(x=jc.get(G))&&NN(f,x);var Pe=fe=_.createElement("link");ze(Pe),Vs(Pe,"link",f),Pe._p=new Promise(function(rt,ht){Pe.onload=rt,Pe.onerror=ht}),Pe.addEventListener("load",function(){we.loading|=1}),Pe.addEventListener("error",function(){we.loading|=2}),we.loading|=4,Zw(fe,p,_)}fe={type:"stylesheet",instance:fe,count:1,state:we},O.set(G,fe)}}}function ice(f,p){Kf.X(f,p);var x=eg;if(x&&f){var _=nt(x).hoistableScripts,O=rg(f),G=_.get(O);G||(G=x.querySelector(Wx(O)),G||(f=u({src:f,async:!0},p),(p=jc.get(O))&&BN(f,p),G=x.createElement("script"),ze(G),Vs(G,"link",f),x.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},_.set(O,G))}}function sce(f,p){Kf.M(f,p);var x=eg;if(x&&f){var _=nt(x).hoistableScripts,O=rg(f),G=_.get(O);G||(G=x.querySelector(Wx(O)),G||(f=u({src:f,async:!0,type:"module"},p),(p=jc.get(O))&&BN(f,p),G=x.createElement("script"),ze(G),Vs(G,"link",f),x.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},_.set(O,G))}}function NO(f,p,x,_){var O=(O=de.current)?Jw(O):null;if(!O)throw Error(n(446));switch(f){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(p=tg(x.href),x=nt(O).hoistableStyles,_=x.get(p),_||(_={type:"style",instance:null,count:0,state:null},x.set(p,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){f=tg(x.href);var G=nt(O).hoistableStyles,fe=G.get(f);if(fe||(O=O.ownerDocument||O,fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},G.set(f,fe),(G=O.querySelector(Kx(f)))&&!G._p&&(fe.instance=G,fe.state.loading=5),jc.has(f)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},jc.set(f,x),G||oce(O,f,x,fe.state))),p&&_===null)throw Error(n(528,""));return fe}if(p&&_!==null)throw Error(n(529,""));return null;case"script":return p=x.async,x=x.src,typeof x=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=rg(x),x=nt(O).hoistableScripts,_=x.get(p),_||(_={type:"script",instance:null,count:0,state:null},x.set(p,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,f))}}function tg(f){return'href="'+wn(f)+'"'}function Kx(f){return'link[rel="stylesheet"]['+f+"]"}function BO(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function oce(f,p,x,_){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?_.loading=1:(p=f.createElement("link"),_.preload=p,p.addEventListener("load",function(){return _.loading|=1}),p.addEventListener("error",function(){return _.loading|=2}),Vs(p,"link",x),ze(p),f.head.appendChild(p))}function rg(f){return'[src="'+wn(f)+'"]'}function Wx(f){return"script[async]"+f}function kO(f,p,x){if(p.count++,p.instance===null)switch(p.type){case"style":var _=f.querySelector('style[data-href~="'+wn(x.href)+'"]');if(_)return p.instance=_,ze(_),_;var O=u({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return _=(f.ownerDocument||f).createElement("style"),ze(_),Vs(_,"style",O),Zw(_,x.precedence,f),p.instance=_;case"stylesheet":O=tg(x.href);var G=f.querySelector(Kx(O));if(G)return p.state.loading|=4,p.instance=G,ze(G),G;_=BO(x),(O=jc.get(O))&&NN(_,O),G=(f.ownerDocument||f).createElement("link"),ze(G);var fe=G;return fe._p=new Promise(function(we,Pe){fe.onload=we,fe.onerror=Pe}),Vs(G,"link",_),p.state.loading|=4,Zw(G,x.precedence,f),p.instance=G;case"script":return G=rg(x.src),(O=f.querySelector(Wx(G)))?(p.instance=O,ze(O),O):(_=x,(O=jc.get(G))&&(_=u({},x),BN(_,O)),f=f.ownerDocument||f,O=f.createElement("script"),ze(O),Vs(O,"link",_),f.head.appendChild(O),p.instance=O);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(_=p.instance,p.state.loading|=4,Zw(_,x.precedence,f));return p.instance}function Zw(f,p,x){for(var _=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=_.length?_[_.length-1]:null,G=O,fe=0;fe<_.length;fe++){var we=_[fe];if(we.dataset.precedence===p)G=we;else if(G!==O)break}G?G.parentNode.insertBefore(f,G.nextSibling):(p=x.nodeType===9?x.head:x,p.insertBefore(f,p.firstChild))}function NN(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function BN(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var e2=null;function IO(f,p,x){if(e2===null){var _=new Map,O=e2=new Map;O.set(x,_)}else O=e2,_=O.get(x),_||(_=new Map,O.set(x,_));if(_.has(f))return _;for(_.set(f,null),x=x.getElementsByTagName(f),O=0;O<x.length;O++){var G=x[O];if(!(G[_e]||G[bn]||f==="link"&&G.getAttribute("rel")==="stylesheet")&&G.namespaceURI!=="http://www.w3.org/2000/svg"){var fe=G.getAttribute(p)||"";fe=f+fe;var we=_.get(fe);we?we.push(G):_.set(fe,[G])}}return _}function FO(f,p,x){f=f.ownerDocument||f,f.head.insertBefore(x,p==="title"?f.querySelector("head > title"):null)}function lce(f,p,x){if(x===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function DO(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var Yx=null;function cce(){}function uce(f,p,x){if(Yx===null)throw Error(n(475));var _=Yx;if(p.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var O=tg(x.href),G=f.querySelector(Kx(O));if(G){f=G._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(_.count++,_=t2.bind(_),f.then(_,_)),p.state.loading|=4,p.instance=G,ze(G);return}G=f.ownerDocument||f,x=BO(x),(O=jc.get(O))&&NN(x,O),G=G.createElement("link"),ze(G);var fe=G;fe._p=new Promise(function(we,Pe){fe.onload=we,fe.onerror=Pe}),Vs(G,"link",x),p.instance=G}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(_.count++,p=t2.bind(_),f.addEventListener("load",p),f.addEventListener("error",p))}}function dce(){if(Yx===null)throw Error(n(475));var f=Yx;return f.stylesheets&&f.count===0&&kN(f,f.stylesheets),0<f.count?function(p){var x=setTimeout(function(){if(f.stylesheets&&kN(f,f.stylesheets),f.unsuspend){var _=f.unsuspend;f.unsuspend=null,_()}},6e4);return f.unsuspend=p,function(){f.unsuspend=null,clearTimeout(x)}}:null}function t2(){if(this.count--,this.count===0){if(this.stylesheets)kN(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var r2=null;function kN(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,r2=new Map,p.forEach(fce,f),r2=null,t2.call(f))}function fce(f,p){if(!(p.state.loading&4)){var x=r2.get(f);if(x)var _=x.get(null);else{x=new Map,r2.set(f,x);for(var O=f.querySelectorAll("link[data-precedence],style[data-precedence]"),G=0;G<O.length;G++){var fe=O[G];(fe.nodeName==="LINK"||fe.getAttribute("media")!=="not all")&&(x.set(fe.dataset.precedence,fe),_=fe)}_&&x.set(null,_)}O=p.instance,fe=O.getAttribute("data-precedence"),G=x.get(fe)||_,G===_&&x.set(null,O),x.set(fe,O),this.count++,_=t2.bind(this),O.addEventListener("load",_),O.addEventListener("error",_),G?G.parentNode.insertBefore(O,G.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(O,f.firstChild)),p.state.loading|=4}}var Xx={$$typeof:N,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Ace(f,p,x,_,O,G,fe,we){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.hiddenUpdates=ma(null),this.identifierPrefix=_,this.onUncaughtError=O,this.onCaughtError=G,this.onRecoverableError=fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function RO(f,p,x,_,O,G,fe,we,Pe,rt,ht,Ct){return f=new Ace(f,p,x,fe,we,Pe,rt,Ct),p=1,G===!0&&(p|=24),G=xs(3,null,null,p),f.current=G,G.stateNode=f,p=yx(),p.refCount++,f.pooledCache=p,p.refCount++,G.memoizedState={element:_,isDehydrated:x,cache:p},Ue(G),f}function PO(f){return f?(f=Mi,f):Mi}function MO(f,p,x,_,O,G){O=PO(O),_.context===null?_.context=O:_.pendingContext=O,_=At(p),_.payload={element:x},G=G===void 0?null:G,G!==null&&(_.callback=G),x=yt(f,_,p),x!==null&&(Gl(x,f,p),pt(x,f,p))}function LO(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<p?x:p}}function IN(f,p){LO(f,p),(f=f.alternate)&&LO(f,p)}function OO(f){if(f.tag===13){var p=Su(f,67108864);p!==null&&Gl(p,f,67108864),IN(f,67108864)}}var n2=!0;function hce(f,p,x,_){var O=W.T;W.T=null;var G=re.p;try{re.p=2,FN(f,p,x,_)}finally{re.p=G,W.T=O}}function pce(f,p,x,_){var O=W.T;W.T=null;var G=re.p;try{re.p=8,FN(f,p,x,_)}finally{re.p=G,W.T=O}}function FN(f,p,x,_){if(n2){var O=DN(_);if(O===null)xN(f,p,_,a2,x),jO(f,_);else if(gce(O,f,p,x,_))_.stopPropagation();else if(jO(f,_),p&4&&-1<mce.indexOf(f)){for(;O!==null;){var G=Ie(O);if(G!==null)switch(G.tag){case 3:if(G=G.stateNode,G.current.memoizedState.isDehydrated){var fe=_r(G.pendingLanes);if(fe!==0){var we=G;for(we.pendingLanes|=2,we.entangledLanes|=2;fe;){var Pe=1<<31-It(fe);we.entanglements[1]|=Pe,fe&=~Pe}Ld(G),(Zn&6)===0&&(Hw=Re()+500,zx(0))}}break;case 13:we=Su(G,2),we!==null&&Gl(we,G,2),Vw(),IN(G,2)}if(G=DN(_),G===null&&xN(f,p,_,a2,x),G===O)break;O=G}O!==null&&_.stopPropagation()}else xN(f,p,_,null,x)}}function DN(f){return f=Xn(f),RN(f)}var a2=null;function RN(f){if(a2=null,f=Te(f),f!==null){var p=i(f);if(p===null)f=null;else{var x=p.tag;if(x===13){if(f=s(p),f!==null)return f;f=null}else if(x===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return a2=f,null}function UO(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case We:return 2;case ct:return 8;case wt:case ot:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var PN=!1,mh=null,gh=null,vh=null,Jx=new Map,Zx=new Map,xh=[],mce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jO(f,p){switch(f){case"focusin":case"focusout":mh=null;break;case"dragenter":case"dragleave":gh=null;break;case"mouseover":case"mouseout":vh=null;break;case"pointerover":case"pointerout":Jx.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zx.delete(p.pointerId)}}function e1(f,p,x,_,O,G){return f===null||f.nativeEvent!==G?(f={blockedOn:p,domEventName:x,eventSystemFlags:_,nativeEvent:G,targetContainers:[O]},p!==null&&(p=Ie(p),p!==null&&OO(p)),f):(f.eventSystemFlags|=_,p=f.targetContainers,O!==null&&p.indexOf(O)===-1&&p.push(O),f)}function gce(f,p,x,_,O){switch(p){case"focusin":return mh=e1(mh,f,p,x,_,O),!0;case"dragenter":return gh=e1(gh,f,p,x,_,O),!0;case"mouseover":return vh=e1(vh,f,p,x,_,O),!0;case"pointerover":var G=O.pointerId;return Jx.set(G,e1(Jx.get(G)||null,f,p,x,_,O)),!0;case"gotpointercapture":return G=O.pointerId,Zx.set(G,e1(Zx.get(G)||null,f,p,x,_,O)),!0}return!1}function HO(f){var p=Te(f.target);if(p!==null){var x=i(p);if(x!==null){if(p=x.tag,p===13){if(p=s(x),p!==null){f.blockedOn=p,Zi(f.priority,function(){if(x.tag===13){var _=zl();_=Fi(_);var O=Su(x,_);O!==null&&Gl(O,x,_),IN(x,_)}});return}}else if(p===3&&x.stateNode.current.memoizedState.isDehydrated){f.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}f.blockedOn=null}function i2(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var x=DN(f.nativeEvent);if(x===null){x=f.nativeEvent;var _=new x.constructor(x.type,x);tl=_,x.target.dispatchEvent(_),tl=null}else return p=Ie(x),p!==null&&OO(p),f.blockedOn=x,!1;p.shift()}return!0}function QO(f,p,x){i2(f)&&x.delete(p)}function vce(){PN=!1,mh!==null&&i2(mh)&&(mh=null),gh!==null&&i2(gh)&&(gh=null),vh!==null&&i2(vh)&&(vh=null),Jx.forEach(QO),Zx.forEach(QO)}function s2(f,p){f.blockedOn===p&&(f.blockedOn=null,PN||(PN=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vce)))}var o2=null;function VO(f){o2!==f&&(o2=f,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){o2===f&&(o2=null);for(var p=0;p<f.length;p+=3){var x=f[p],_=f[p+1],O=f[p+2];if(typeof _!="function"){if(RN(_||x)===null)continue;break}var G=Ie(x);G!==null&&(f.splice(p,3),p-=3,Lc(G,{pending:!0,data:O,method:x.method,action:_},_,O))}}))}function t1(f){function p(Pe){return s2(Pe,f)}mh!==null&&s2(mh,f),gh!==null&&s2(gh,f),vh!==null&&s2(vh,f),Jx.forEach(p),Zx.forEach(p);for(var x=0;x<xh.length;x++){var _=xh[x];_.blockedOn===f&&(_.blockedOn=null)}for(;0<xh.length&&(x=xh[0],x.blockedOn===null);)HO(x),x.blockedOn===null&&xh.shift();if(x=(f.ownerDocument||f).$$reactFormReplay,x!=null)for(_=0;_<x.length;_+=3){var O=x[_],G=x[_+1],fe=O[fn]||null;if(typeof G=="function")fe||VO(x);else if(fe){var we=null;if(G&&G.hasAttribute("formAction")){if(O=G,fe=G[fn]||null)we=fe.formAction;else if(RN(O)!==null)continue}else we=fe.action;typeof we=="function"?x[_+1]=we:(x.splice(_,3),_-=3),VO(x)}}}function MN(f){this._internalRoot=f}l2.prototype.render=MN.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(n(409));var x=p.current,_=zl();MO(x,_,f,p,null,null)},l2.prototype.unmount=MN.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;MO(f.current,2,null,f,null,null),Vw(),p[Hn]=null}};function l2(f){this._internalRoot=f}l2.prototype.unstable_scheduleHydration=function(f){if(f){var p=Qa();f={blockedOn:null,target:f,priority:p};for(var x=0;x<xh.length&&p!==0&&p<xh[x].priority;x++);xh.splice(x,0,f),x===0&&HO(f)}};var zO=t.version;if(zO!=="19.1.1")throw Error(n(527,zO,"19.1.1"));re.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=l(p),f=f!==null?c(f):null,f=f===null?null:f.stateNode,f};var xce={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var c2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c2.isDisabled&&c2.supportsFiber)try{Mt=c2.inject(xce),Qt=c2}catch{}}return n1.createRoot=function(f,p){if(!a(f))throw Error(n(299));var x=!1,_="",O=sL,G=oL,fe=lL,we=null;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(_=p.identifierPrefix),p.onUncaughtError!==void 0&&(O=p.onUncaughtError),p.onCaughtError!==void 0&&(G=p.onCaughtError),p.onRecoverableError!==void 0&&(fe=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(we=p.unstable_transitionCallbacks)),p=RO(f,1,!1,null,null,x,_,O,G,fe,we,null),f[Hn]=p.current,vN(f),new MN(p)},n1.hydrateRoot=function(f,p,x){if(!a(f))throw Error(n(299));var _=!1,O="",G=sL,fe=oL,we=lL,Pe=null,rt=null;return x!=null&&(x.unstable_strictMode===!0&&(_=!0),x.identifierPrefix!==void 0&&(O=x.identifierPrefix),x.onUncaughtError!==void 0&&(G=x.onUncaughtError),x.onCaughtError!==void 0&&(fe=x.onCaughtError),x.onRecoverableError!==void 0&&(we=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Pe=x.unstable_transitionCallbacks),x.formState!==void 0&&(rt=x.formState)),p=RO(f,1,!0,p,x??null,_,O,G,fe,we,Pe,rt),p.context=PO(null),x=p.current,_=zl(),_=Fi(_),O=At(_),O.callback=null,yt(x,O,_),x=_,p.current.lanes=x,Ra(p,x),Ld(p),f[Hn]=p.current,vN(f),new l2(p)},n1.version="19.1.1",n1}var eU;function Dce(){if(eU)return jN.exports;eU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),jN.exports=Fce(),jN.exports}var Rce=Dce();const Pce=mc(Rce),Mce=()=>{};var tU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Lce=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=e[r++];t[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=e[r++],s=e[r++],o=e[r++],l=((a&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const i=e[r++],s=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return t.join("")},aK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const i=e[a],s=a+1<e.length,o=s?e[a+1]:0,l=a+2<e.length,c=l?e[a+2]:0,u=i>>2,A=(i&3)<<4|o>>4;let h=(o&15)<<2|c>>6,m=c&63;l||(m=64,s||(h=64)),n.push(r[u],r[A],r[h],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nK(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Lce(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const i=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const c=a<e.length?r[e.charAt(a)]:64;++a;const A=a<e.length?r[e.charAt(a)]:64;if(++a,i==null||o==null||c==null||A==null)throw new Oce;const h=i<<2|o>>4;if(n.push(h),c!==64){const m=o<<4&240|c>>2;if(n.push(m),A!==64){const v=c<<6&192|A;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Oce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uce=function(e){const t=nK(e);return aK.encodeByteArray(t,!0)},SE=function(e){return Uce(e).replace(/\./g,"")},iK=function(e){try{return aK.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hce=()=>jce().__FIREBASE_DEFAULTS__,Qce=()=>{if(typeof process>"u"||typeof tU>"u")return;const e=tU.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Vce=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&iK(e[1]);return t&&JSON.parse(t)},TS=()=>{try{return Mce()||Hce()||Qce()||Vce()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sK=e=>{var t,r;return(r=(t=TS())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},oK=e=>{const t=sK(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},lK=()=>{var e;return(e=TS())==null?void 0:e.config},cK=e=>{var t;return(t=TS())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vD(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gce(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[SE(JSON.stringify(r)),SE(JSON.stringify(s)),""].join(".")}const X1={};function qce(){const e={prod:[],emulator:[]};for(const t of Object.keys(X1))X1[t]?e.emulator.push(t):e.prod.push(t);return e}function $ce(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let rU=!1;function xD(e,t){if(typeof window>"u"||typeof document>"u"||!dm(window.location.host)||X1[e]===t||X1[e]||rU)return;X1[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",i=qce().prod.length>0;function s(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function c(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{rU=!0,s()},h}function u(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function A(){const h=$ce(n),m=r("text"),v=document.getElementById(m)||document.createElement("span"),g=r("learnmore"),y=document.getElementById(g)||document.createElement("a"),w=r("preprendIcon"),T=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const N=h.element;o(N),u(y,g);const F=c();l(T,w),N.append(T,v,y,F),document.body.appendChild(N)}i?(v.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lo())}function Wce(){var t;const e=(t=TS())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yce(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xce(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Jce(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zce(){const e=Lo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function eue(){return!Wce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tue(){try{return typeof indexedDB=="object"}catch{return!1}}function rue(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;t(((i=a.error)==null?void 0:i.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nue="FirebaseError";class Af extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=nue,Object.setPrototypeOf(this,Af.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gb.prototype.create)}}class gb{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,i=this.errors[t],s=i?aue(i,n):"Error",o=`${this.serviceName}: ${s} (${a}).`;return new Af(a,o,n)}}function aue(e,t){return e.replace(iue,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const iue=/\{\$([^}]+)}/g;function sue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function c0(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const i=e[a],s=t[a];if(nU(i)&&nU(s)){if(!c0(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function nU(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function N1(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,i]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(i)}}),t}function B1(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function oue(e,t){const r=new lue(e,t);return r.subscribe.bind(r)}class lue{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");cue(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=zN),a.error===void 0&&(a.error=zN),a.complete===void 0&&(a.complete=zN);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cue(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function zN(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(e){return e&&e._delegate?e._delegate:e}class u0{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uue=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new zce;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(fue(t))try{this.getOrInitializeService({instanceIdentifier:lp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(t=lp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=lp){return this.instances.has(t)}getOptions(t=lp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&s.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&t(i,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:due(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=lp){return this.component?this.component.multipleInstances?t:lp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function due(e){return e===lp?void 0:e}function fue(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new uue(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(gn||(gn={}));const hue={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},pue=gn.INFO,mue={[gn.DEBUG]:"log",[gn.VERBOSE]:"log",[gn.INFO]:"info",[gn.WARN]:"warn",[gn.ERROR]:"error"},gue=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=mue[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let yD=class{constructor(t){this.name=t,this._logLevel=pue,this._logHandler=gue,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?hue[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,gn.DEBUG,...t),this._logHandler(this,gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,gn.VERBOSE,...t),this._logHandler(this,gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,gn.INFO,...t),this._logHandler(this,gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,gn.WARN,...t),this._logHandler(this,gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,gn.ERROR,...t),this._logHandler(this,gn.ERROR,...t)}};const vue=(e,t)=>t.some(r=>e instanceof r);let aU,iU;function xue(){return aU||(aU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yue(){return iU||(iU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uK=new WeakMap,hI=new WeakMap,dK=new WeakMap,GN=new WeakMap,bD=new WeakMap;function bue(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{r(Yh(e.result)),a()},s=()=>{n(e.error),a()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(r=>{r instanceof IDBCursor&&uK.set(r,e)}).catch(()=>{}),bD.set(t,e),t}function wue(e){if(hI.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});hI.set(e,t)}let pI={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return hI.get(e);if(t==="objectStoreNames")return e.objectStoreNames||dK.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Yh(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Cue(e){pI=e(pI)}function Eue(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(qN(this),t,...r);return dK.set(n,t.sort?t.sort():[t]),Yh(n)}:yue().includes(e)?function(...t){return e.apply(qN(this),t),Yh(uK.get(this))}:function(...t){return Yh(e.apply(qN(this),t))}}function _ue(e){return typeof e=="function"?Eue(e):(e instanceof IDBTransaction&&wue(e),vue(e,xue())?new Proxy(e,pI):e)}function Yh(e){if(e instanceof IDBRequest)return bue(e);if(GN.has(e))return GN.get(e);const t=_ue(e);return t!==e&&(GN.set(e,t),bD.set(t,e)),t}const qN=e=>bD.get(e);function Sue(e,t,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(e,t),o=Yh(s);return n&&s.addEventListener("upgradeneeded",l=>{n(Yh(s.result),l.oldVersion,l.newVersion,Yh(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),a&&l.addEventListener("versionchange",c=>a(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const Tue=["get","getKey","getAll","getAllKeys","count"],Nue=["put","add","delete","clear"],$N=new Map;function sU(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if($N.get(t))return $N.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Nue.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Tue.includes(r)))return;const i=async function(s,...o){const l=this.transaction(s,a?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),a&&l.done]))[0]};return $N.set(t,i),i}Cue(e=>({...e,get:(t,r,n)=>sU(t,r)||e.get(t,r,n),has:(t,r)=>!!sU(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bue{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(kue(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function kue(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const mI="@firebase/app",oU="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new yD("@firebase/app"),Iue="@firebase/app-compat",Fue="@firebase/analytics-compat",Due="@firebase/analytics",Rue="@firebase/app-check-compat",Pue="@firebase/app-check",Mue="@firebase/auth",Lue="@firebase/auth-compat",Oue="@firebase/database",Uue="@firebase/data-connect",jue="@firebase/database-compat",Hue="@firebase/functions",Que="@firebase/functions-compat",Vue="@firebase/installations",zue="@firebase/installations-compat",Gue="@firebase/messaging",que="@firebase/messaging-compat",$ue="@firebase/performance",Kue="@firebase/performance-compat",Wue="@firebase/remote-config",Yue="@firebase/remote-config-compat",Xue="@firebase/storage",Jue="@firebase/storage-compat",Zue="@firebase/firestore",ede="@firebase/ai",tde="@firebase/firestore-compat",rde="firebase",nde="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="[DEFAULT]",ade={[mI]:"fire-core",[Iue]:"fire-core-compat",[Due]:"fire-analytics",[Fue]:"fire-analytics-compat",[Pue]:"fire-app-check",[Rue]:"fire-app-check-compat",[Mue]:"fire-auth",[Lue]:"fire-auth-compat",[Oue]:"fire-rtdb",[Uue]:"fire-data-connect",[jue]:"fire-rtdb-compat",[Hue]:"fire-fn",[Que]:"fire-fn-compat",[Vue]:"fire-iid",[zue]:"fire-iid-compat",[Gue]:"fire-fcm",[que]:"fire-fcm-compat",[$ue]:"fire-perf",[Kue]:"fire-perf-compat",[Wue]:"fire-rc",[Yue]:"fire-rc-compat",[Xue]:"fire-gcs",[Jue]:"fire-gcs-compat",[Zue]:"fire-fst",[tde]:"fire-fst-compat",[ede]:"fire-vertex","fire-js":"fire-js",[rde]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map,ide=new Map,vI=new Map;function lU(e,t){try{e.container.addComponent(t)}catch(r){mA.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function qp(e){const t=e.name;if(vI.has(t))return mA.debug(`There were multiple attempts to register component ${t}.`),!1;vI.set(t,e);for(const r of Ey.values())lU(r,e);for(const r of ide.values())lU(r,e);return!0}function NS(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function tu(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sde={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xh=new gb("app","Firebase",sde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ode{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new u0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=nde;function wD(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:gI,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw Xh.create("bad-app-name",{appName:String(a)});if(r||(r=lK()),!r)throw Xh.create("no-options");const i=Ey.get(a);if(i){if(c0(r,i.options)&&c0(n,i.config))return i;throw Xh.create("duplicate-app",{appName:a})}const s=new Aue(a);for(const l of vI.values())s.addComponent(l);const o=new ode(r,n,s);return Ey.set(a,o),o}function CD(e=gI){const t=Ey.get(e);if(!t&&e===gI&&lK())return wD();if(!t)throw Xh.create("no-app",{appName:e});return t}function cU(){return Array.from(Ey.values())}function Jd(e,t,r){let n=ade[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const s=[`Unable to register library "${n}" with version "${t}":`];a&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&s.push("and"),i&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mA.warn(s.join(" "));return}qp(new u0(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lde="firebase-heartbeat-database",cde=1,_y="firebase-heartbeat-store";let KN=null;function fK(){return KN||(KN=Sue(lde,cde,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(_y)}catch(r){console.warn(r)}}}}).catch(e=>{throw Xh.create("idb-open",{originalErrorMessage:e.message})})),KN}async function ude(e){try{const r=(await fK()).transaction(_y),n=await r.objectStore(_y).get(AK(e));return await r.done,n}catch(t){if(t instanceof Af)mA.warn(t.message);else{const r=Xh.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});mA.warn(r.message)}}}async function uU(e,t){try{const n=(await fK()).transaction(_y,"readwrite");await n.objectStore(_y).put(t,AK(e)),await n.done}catch(r){if(r instanceof Af)mA.warn(r.message);else{const n=Xh.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});mA.warn(n.message)}}}function AK(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dde=1024,fde=30;class Ade{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new pde(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dU();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>fde){const s=mde(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){mA.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=dU(),{heartbeatsToSend:n,unsentEntries:a}=hde(this._heartbeatsCache.heartbeats),i=SE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return mA.warn(r),""}}}function dU(){return new Date().toISOString().substring(0,10)}function hde(e,t=dde){const r=[];let n=e.slice();for(const a of e){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),fU(r)>t){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),fU(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class pde{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tue()?rue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await ude(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return uU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return uU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function fU(e){return SE(JSON.stringify({version:2,heartbeats:e})).length}function mde(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gde(e){qp(new u0("platform-logger",t=>new Bue(t),"PRIVATE")),qp(new u0("heartbeat",t=>new Ade(t),"PRIVATE")),Jd(mI,oU,e),Jd(mI,oU,"esm2020"),Jd("fire-js","")}gde("");function hK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vde=hK,pK=new gb("auth","Firebase",hK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new yD("@firebase/auth");function xde(e,...t){TE.logLevel<=gn.WARN&&TE.warn(`Auth (${qv}): ${e}`,...t)}function MC(e,...t){TE.logLevel<=gn.ERROR&&TE.error(`Auth (${qv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(e,...t){throw ED(e,...t)}function Zd(e,...t){return ED(e,...t)}function mK(e,t,r){const n={...vde(),[t]:r};return new gb("auth","Firebase",n).create(t,{appName:e.name})}function Jh(e){return mK(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ED(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return pK.create(e,...t)}function Dr(e,t,...r){if(!e)throw ED(t,...r)}function tA(e){const t="INTERNAL ASSERTION FAILED: "+e;throw MC(t),new Error(t)}function gA(e,t){e||tA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function yde(){return AU()==="http:"||AU()==="https:"}function AU(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bde(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yde()||Xce()||"connection"in navigator)?navigator.onLine:!0}function wde(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,r){this.shortDelay=t,this.longDelay=r,gA(r>t,"Short delay should be less than long delay!"),this.isMobile=Kce()||Jce()}get(){return bde()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(e,t){gA(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cde={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ede=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_de=new xb(3e4,6e4);function _0(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function kA(e,t,r,n,a={}){return vK(e,a,async()=>{let i={},s={};n&&(t==="GET"?s=n:i={body:JSON.stringify(n)});const o=vb({key:e.config.apiKey,...s}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:l,...i};return Yce()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&dm(e.emulatorConfig.host)&&(c.credentials="include"),gK.fetch()(await xK(e,e.config.apiHost,r,o),c)})}async function vK(e,t,r){e._canInitEmulator=!1;const n={...Cde,...t};try{const a=new Tde(e),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw u2(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const o=i.ok?s.errorMessage:s.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw u2(e,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw u2(e,"email-already-in-use",s);if(l==="USER_DISABLED")throw u2(e,"user-disabled",s);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw mK(e,u,c);ed(e,u)}}catch(a){if(a instanceof Af)throw a;ed(e,"network-request-failed",{message:String(a)})}}async function BS(e,t,r,n,a={}){const i=await kA(e,t,r,n,a);return"mfaPendingCredential"in i&&ed(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function xK(e,t,r,n){const a=`${t}${r}?${n}`,i=e,s=i.config.emulator?_D(e.config,a):`${e.config.apiScheme}://${a}`;return Ede.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(s).toString():s}function Sde(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tde{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Zd(this.auth,"network-request-failed")),_de.get())})}}function u2(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Zd(e,t,n);return a.customData._tokenResponse=r,a}function hU(e){return e!==void 0&&e.enterprise!==void 0}class Nde{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Sde(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Bde(e,t){return kA(e,"GET","/v2/recaptchaConfig",_0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kde(e,t){return kA(e,"POST","/v1/accounts:delete",t)}async function NE(e,t){return kA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ide(e,t=!1){const r=Ha(e),n=await r.getIdToken(t),a=SD(n);Dr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,s=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:J1(WN(a.auth_time)),issuedAtTime:J1(WN(a.iat)),expirationTime:J1(WN(a.exp)),signInProvider:s||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function WN(e){return Number(e)*1e3}function SD(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return MC("JWT malformed, contained fewer than 3 sections"),null;try{const a=iK(r);return a?JSON.parse(a):(MC("Failed to decode base64 JWT payload"),null)}catch(a){return MC("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function pU(e){const t=SD(e);return Dr(t,"internal-error"),Dr(typeof t.exp<"u","internal-error"),Dr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Af&&Fde(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Fde({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dde{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=J1(this.lastLoginAt),this.creationTime=J1(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(e){var A;const t=e.auth,r=await e.getIdToken(),n=await Sy(e,NE(t,{idToken:r}));Dr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const i=(A=a.providerUserInfo)!=null&&A.length?yK(a.providerUserInfo):[],s=Pde(e.providerData,i),o=e.isAnonymous,l=!(e.email&&a.passwordHash)&&!(s!=null&&s.length),c=o?l:!1,u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new yI(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(e,u)}async function Rde(e){const t=Ha(e);await BE(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Pde(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function yK(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mde(e,t){const r=await vK(e,{},async()=>{const n=vb({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:i}=e.config,s=await xK(e,a,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&dm(e.emulatorConfig.host)&&(l.credentials="include"),gK.fetch()(s,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Lde(e,t){return kA(e,"POST","/v2/accounts:revokeToken",_0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Dr(t.idToken,"internal-error"),Dr(typeof t.idToken<"u","internal-error"),Dr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):pU(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Dr(t.length!==0,"internal-error");const r=pU(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Dr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await Mde(t,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,s=new qg;return n&&(Dr(typeof n=="string","internal-error",{appName:t}),s.refreshToken=n),a&&(Dr(typeof a=="string","internal-error",{appName:t}),s.accessToken=a),i&&(Dr(typeof i=="number","internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qg,this.toJSON())}_performRefresh(){return tA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(e,t){Dr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ku{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Dde(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new yI(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Sy(this,this.stsTokenManager.getToken(this.auth,t));return Dr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Ide(this,t)}reload(){return Rde(this)}_assign(t){this!==t&&(Dr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Ku({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Dr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await BE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tu(this.auth.app))return Promise.reject(Jh(this.auth));const t=await this.getIdToken();return await Sy(this,kde(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,i=r.phoneNumber??void 0,s=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,c=r.createdAt??void 0,u=r.lastLoginAt??void 0,{uid:A,emailVerified:h,isAnonymous:m,providerData:v,stsTokenManager:g}=r;Dr(A&&g,t,"internal-error");const y=qg.fromJSON(this.name,g);Dr(typeof A=="string",t,"internal-error"),bh(n,t.name),bh(a,t.name),Dr(typeof h=="boolean",t,"internal-error"),Dr(typeof m=="boolean",t,"internal-error"),bh(i,t.name),bh(s,t.name),bh(o,t.name),bh(l,t.name),bh(c,t.name),bh(u,t.name);const w=new Ku({uid:A,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:m,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:y,createdAt:c,lastLoginAt:u});return v&&Array.isArray(v)&&(w.providerData=v.map(T=>({...T}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(t,r,n=!1){const a=new qg;a.updateFromServerResponse(r);const i=new Ku({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await BE(i),i}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Dr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?yK(a.providerUserInfo):[],s=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),o=new qg;o.updateFromIdToken(n);const l=new Ku({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:s}),c={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new yI(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=new Map;function rA(e){gA(e instanceof Function,"Expected a class definition");let t=mU.get(e);return t?(gA(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mU.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}bK.type="NONE";const gU=bK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(e,t,r){return`firebase:${e}:${t}:${r}`}class $g{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=LC(this.userKey,a.apiKey,i),this.fullPersistenceKey=LC("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await NE(this.auth,{idToken:t}).catch(()=>{});return r?Ku._fromGetAccountInfoResponse(this.auth,r,t):null}return Ku._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new $g(rA(gU),t,n);const a=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=a[0]||rA(gU);const s=LC(n,t.config.apiKey,t.name);let o=null;for(const c of r)try{const u=await c._get(s);if(u){let A;if(typeof u=="string"){const h=await NE(t,{idToken:u}).catch(()=>{});if(!h)break;A=await Ku._fromGetAccountInfoResponse(t,h,u)}else A=Ku._fromJSON(t,u);c!==i&&(o=A),i=c;break}}catch{}const l=a.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new $g(i,t,n):(i=l[0],o&&await i._set(s,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(s)}catch{}})),new $g(i,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_K(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wK(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(TK(t))return"Blackberry";if(NK(t))return"Webos";if(CK(t))return"Safari";if((t.includes("chrome/")||EK(t))&&!t.includes("edge/"))return"Chrome";if(SK(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function wK(e=Lo()){return/firefox\//i.test(e)}function CK(e=Lo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function EK(e=Lo()){return/crios\//i.test(e)}function _K(e=Lo()){return/iemobile/i.test(e)}function SK(e=Lo()){return/android/i.test(e)}function TK(e=Lo()){return/blackberry/i.test(e)}function NK(e=Lo()){return/webos/i.test(e)}function TD(e=Lo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ode(e=Lo()){var t;return TD(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Ude(){return Zce()&&document.documentMode===10}function BK(e=Lo()){return TD(e)||SK(e)||NK(e)||TK(e)||/windows phone/i.test(e)||_K(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK(e,t=[]){let r;switch(e){case"Browser":r=vU(Lo());break;case"Worker":r=`${vU(Lo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${qv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=i=>new Promise((s,o)=>{try{const l=t(i);s(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hde(e,t={}){return kA(e,"GET","/v2/passwordPolicy",_0(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qde=6;class Vde{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Qde,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zde{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xU(this),this.idTokenSubscription=new xU(this),this.beforeStateQueue=new jde(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=rA(r)),this._initializationPromise=this.queue(async()=>{var n,a,i;if(!this._deleted&&(this.persistenceManager=await $g.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await NE(this,{idToken:t}),n=await Ku._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(tu(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(i=this.redirectUser)==null?void 0:i._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(t);(!s||s===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Dr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await BE(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=wde()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(tu(this.app))return Promise.reject(Jh(this));const r=t?Ha(t):null;return r&&Dr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Dr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return tu(this.app)?Promise.reject(Jh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return tu(this.app)?Promise.reject(Jh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rA(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Hde(this),r=new Vde(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new gb("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Lde(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&rA(t)||this._popupRedirectResolver;Dr(r,this,"argument-error"),this.redirectPersistenceManager=await $g.create(this,[rA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dr(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,n,a);return()=>{s=!0,l()}}else{const l=t.addObserver(r);return()=>{s=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Dr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(tu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&xde(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function fm(e){return Ha(e)}class xU{constructor(t){this.auth=t,this.observer=null,this.addObserver=oue(r=>this.observer=r)}get next(){return Dr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gde(e){kS=e}function IK(e){return kS.loadJS(e)}function qde(){return kS.recaptchaEnterpriseScript}function $de(){return kS.gapiScript}function Kde(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Wde{constructor(){this.enterprise=new Yde}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Yde{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Xde="recaptcha-enterprise",FK="NO_RECAPTCHA";class Jde{constructor(t){this.type=Xde,this.auth=fm(t)}async verify(t="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(s,o)=>{Bde(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new Nde(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,s(c.siteKey)}}).catch(l=>{o(l)})})}function a(i,s,o){const l=window.grecaptcha;hU(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:t}).then(c=>{s(c)}).catch(()=>{s(FK)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Wde().execute("siteKey",{action:"verify"}):new Promise((i,s)=>{n(this.auth).then(o=>{if(!r&&hU(window.grecaptcha))a(o,i,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=qde();l.length!==0&&(l+=o),IK(l).then(()=>{a(o,i,s)}).catch(c=>{s(c)})}}).catch(o=>{s(o)})})}}async function yU(e,t,r,n=!1,a=!1){const i=new Jde(e);let s;if(a)s=FK;else try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function bI(e,t,r,n,a){var i;if((i=e._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await yU(e,t,r,r==="getOobCode");return n(e,s)}else return n(e,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await yU(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zde(e,t){const r=NS(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(c0(i,t??{}))return a;ed(a,"already-initialized")}return r.initialize({options:t})}function efe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(rA);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function tfe(e,t,r){const n=fm(e);Dr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,i=DK(t),{host:s,port:o}=rfe(t),l=o===null?"":`:${o}`,c={url:`${i}//${s}${l}/`},u=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Dr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Dr(c0(c,n.config.emulator)&&c0(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,dm(s)?(vD(`${i}//${s}${l}`),xD("Auth",!0)):nfe()}function DK(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rfe(e){const t=DK(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:bU(n.substr(i.length+1))}}else{const[i,s]=n.split(":");return{host:i,port:bU(s)}}}function bU(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function nfe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return tA("not implemented")}_getIdTokenResponse(t){return tA("not implemented")}_linkToIdToken(t,r){return tA("not implemented")}_getReauthenticationResolver(t){return tA("not implemented")}}async function afe(e,t){return kA(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ife(e,t){return BS(e,"POST","/v1/accounts:signInWithPassword",_0(e,t))}async function sfe(e,t){return kA(e,"POST","/v1/accounts:sendOobCode",_0(e,t))}async function ofe(e,t){return sfe(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lfe(e,t){return BS(e,"POST","/v1/accounts:signInWithEmailLink",_0(e,t))}async function cfe(e,t){return BS(e,"POST","/v1/accounts:signInWithEmailLink",_0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty extends ND{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Ty(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Ty(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bI(t,r,"signInWithPassword",ife);case"emailLink":return lfe(t,{email:this._email,oobCode:this._password});default:ed(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bI(t,n,"signUpPassword",afe);case"emailLink":return cfe(t,{idToken:r,email:this._email,oobCode:this._password});default:ed(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kg(e,t){return BS(e,"POST","/v1/accounts:signInWithIdp",_0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ufe="http://localhost";class $p extends ND{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new $p(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):ed("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...i}=r;if(!n||!a)return null;const s=new $p(n,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(t){const r=this.buildRequest();return Kg(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Kg(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Kg(t,r)}buildRequest(){const t={requestUri:ufe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=vb(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dfe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ffe(e){const t=N1(B1(e)).link,r=t?N1(B1(t)).deep_link_id:null,n=N1(B1(e)).deep_link_id;return(n?N1(B1(n)).link:null)||n||r||t||e}class BD{constructor(t){const r=N1(B1(t)),n=r.apiKey??null,a=r.oobCode??null,i=dfe(r.mode??null);Dr(n&&a&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=ffe(t);try{return new BD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.providerId=$v.PROVIDER_ID}static credential(t,r){return Ty._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=BD.parseLink(r);return Dr(n,"argument-error"),Ty._fromEmailAndCode(t,n.code,n.tenantId)}}$v.PROVIDER_ID="password";$v.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$v.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends RK{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends yb{constructor(){super("facebook.com")}static credential(t){return $p._fromParams({providerId:Ph.PROVIDER_ID,signInMethod:Ph.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ph.credentialFromTaggedObject(t)}static credentialFromError(t){return Ph.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ph.credential(t.oauthAccessToken)}catch{return null}}}Ph.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ph.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends yb{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return $p._fromParams({providerId:Mh.PROVIDER_ID,signInMethod:Mh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return Mh.credentialFromTaggedObject(t)}static credentialFromError(t){return Mh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return Mh.credential(r,n)}catch{return null}}}Mh.GOOGLE_SIGN_IN_METHOD="google.com";Mh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends yb{constructor(){super("github.com")}static credential(t){return $p._fromParams({providerId:Lh.PROVIDER_ID,signInMethod:Lh.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lh.credentialFromTaggedObject(t)}static credentialFromError(t){return Lh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lh.credential(t.oauthAccessToken)}catch{return null}}}Lh.GITHUB_SIGN_IN_METHOD="github.com";Lh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends yb{constructor(){super("twitter.com")}static credential(t,r){return $p._fromParams({providerId:Oh.PROVIDER_ID,signInMethod:Oh.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Oh.credentialFromTaggedObject(t)}static credentialFromError(t){return Oh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Oh.credential(r,n)}catch{return null}}}Oh.TWITTER_SIGN_IN_METHOD="twitter.com";Oh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const i=await Ku._fromIdTokenResponse(t,n,a),s=wU(n);return new pv({user:i,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=wU(n);return new pv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function wU(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends Af{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,kE.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new kE(t,r,n,a)}}function PK(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kE._fromErrorAndOperation(e,i,t,n):i})}async function Afe(e,t,r=!1){const n=await Sy(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return pv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hfe(e,t,r=!1){const{auth:n}=e;if(tu(n.app))return Promise.reject(Jh(n));const a="reauthenticate";try{const i=await Sy(e,PK(n,a,t,e),r);Dr(i.idToken,n,"internal-error");const s=SD(i.idToken);Dr(s,n,"internal-error");const{sub:o}=s;return Dr(e.uid===o,n,"user-mismatch"),pv._forOperation(e,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ed(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MK(e,t,r=!1){if(tu(e.app))return Promise.reject(Jh(e));const n="signIn",a=await PK(e,n,t),i=await pv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(i.user),i}async function pfe(e,t){return MK(fm(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mfe(e){const t=fm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function gfe(e,t,r){const n=fm(e);await bI(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ofe)}function vfe(e,t,r){return tu(e.app)?Promise.reject(Jh(e)):pfe(Ha(e),$v.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&mfe(e),n})}function xfe(e,t,r,n){return Ha(e).onIdTokenChanged(t,r,n)}function yfe(e,t,r){return Ha(e).beforeAuthStateChanged(t,r)}function LK(e,t,r,n){return Ha(e).onAuthStateChanged(t,r,n)}function bfe(e){return Ha(e).signOut()}const IE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(IE,"1"),this.storage.removeItem(IE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wfe=1e3,Cfe=10;class UK extends OK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BK(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},i=this.storage.getItem(n);Ude()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,Cfe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},wfe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}UK.type="LOCAL";const Efe=UK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK extends OK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}jK.type="SESSION";const HK=jK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new IS(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:i}=r.data,s=this.handlersMap[a];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(s).map(async c=>c(r.origin,i)),l=await _fe(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}IS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sfe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,s;return new Promise((o,l)=>{const c=kD("",20);a.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage(A){const h=A;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(h.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(s),a.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:r},[a.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){return window}function Tfe(e){ef().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QK(){return typeof ef().WorkerGlobalScope<"u"&&typeof ef().importScripts=="function"}async function Nfe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bfe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function kfe(){return QK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK="firebaseLocalStorageDb",Ife=1,FE="firebaseLocalStorage",zK="fbase_key";class bb{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function FS(e,t){return e.transaction([FE],t?"readwrite":"readonly").objectStore(FE)}function Ffe(){const e=indexedDB.deleteDatabase(VK);return new bb(e).toPromise()}function wI(){const e=indexedDB.open(VK,Ife);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(FE,{keyPath:zK})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(FE)?t(n):(n.close(),await Ffe(),t(await wI()))})})}async function CU(e,t,r){const n=FS(e,!0).put({[zK]:t,value:r});return new bb(n).toPromise()}async function Dfe(e,t){const r=FS(e,!1).get(t),n=await new bb(r).toPromise();return n===void 0?null:n.value}function EU(e,t){const r=FS(e,!0).delete(t);return new bb(r).toPromise()}const Rfe=800,Pfe=3;class GK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wI(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>Pfe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=IS._getInstance(kfe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Nfe(),!this.activeServiceWorker)return;this.sender=new Sfe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Bfe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await wI();return await CU(t,IE,"1"),await EU(t,IE),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>CU(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Dfe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>EU(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const i=FS(a,!1).getAll();return new bb(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:i}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Rfe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GK.type="LOCAL";const Mfe=GK;new xb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lfe(e,t){return t?rA(t):(Dr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID extends ND{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Kg(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Kg(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Kg(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function Ofe(e){return MK(e.auth,new ID(e),e.bypassAuthState)}function Ufe(e){const{auth:t,user:r}=e;return Dr(r,t,"internal-error"),hfe(r,new ID(e),e.bypassAuthState)}async function jfe(e){const{auth:t,user:r}=e;return Dr(r,t,"internal-error"),Afe(r,new ID(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(t,r,n,a,i=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:s,type:o}=t;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ofe;case"linkViaPopup":case"linkViaRedirect":return jfe;case"reauthViaPopup":case"reauthViaRedirect":return Ufe;default:ed(this.auth,"internal-error")}}resolve(t){gA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){gA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hfe=new xb(2e3,1e4);class Pg extends qK{constructor(t,r,n,a,i){super(t,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Pg.currentPopupAction&&Pg.currentPopupAction.cancel(),Pg.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Dr(t,this.auth,"internal-error"),t}async onExecution(){gA(this.filter.length===1,"Popup operations only handle one event");const t=kD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Zd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Zd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pg.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Hfe.get())};t()}}Pg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qfe="pendingRedirect",OC=new Map;class Vfe extends qK{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=OC.get(this.auth._key());if(!t){try{const n=await zfe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}OC.set(this.auth._key(),t)}return this.bypassAuthState||OC.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zfe(e,t){const r=$fe(t),n=qfe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Gfe(e,t){OC.set(e._key(),t)}function qfe(e){return rA(e._redirectPersistence)}function $fe(e){return LC(Qfe,e.config.apiKey,e.name)}async function Kfe(e,t,r=!1){if(tu(e.app))return Promise.reject(Jh(e));const n=fm(e),a=Lfe(n,t),s=await new Vfe(n,a,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wfe=600*1e3;class Yfe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Xfe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!$K(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Zd(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Wfe&&this.cachedEventUids.clear(),this.cachedEventUids.has(_U(t))}saveEventToCache(t){this.cachedEventUids.add(_U(t)),this.lastProcessedEventTime=Date.now()}}function _U(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function $K({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Xfe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $K(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jfe(e,t={}){return kA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zfe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eAe=/^https?/;async function tAe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Jfe(e);for(const r of t)try{if(rAe(r))return}catch{}ed(e,"unauthorized-domain")}function rAe(e){const t=xI(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return s.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!eAe.test(r))return!1;if(Zfe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nAe=new xb(3e4,6e4);function SU(){const e=ef().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function aAe(e){return new Promise((t,r)=>{var a,i,s;function n(){SU(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{SU(),r(Zd(e,"network-request-failed"))},timeout:nAe.get()})}if((i=(a=ef().gapi)==null?void 0:a.iframes)!=null&&i.Iframe)t(gapi.iframes.getContext());else if((s=ef().gapi)!=null&&s.load)n();else{const o=Kde("iframefcb");return ef()[o]=()=>{gapi.load?n():r(Zd(e,"network-request-failed"))},IK(`${$de()}?onload=${o}`).catch(l=>r(l))}}).catch(t=>{throw UC=null,t})}let UC=null;function iAe(e){return UC=UC||aAe(e),UC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sAe=new xb(5e3,15e3),oAe="__/auth/iframe",lAe="emulator/auth/iframe",cAe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uAe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dAe(e){const t=e.config;Dr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?_D(t,lAe):`https://${e.config.authDomain}/${oAe}`,n={apiKey:t.apiKey,appName:e.name,v:qv},a=uAe.get(e.config.apiHost);a&&(n.eid=a);const i=e._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${vb(n).slice(1)}`}async function fAe(e){const t=await iAe(e),r=ef().gapi;return Dr(r,e,"internal-error"),t.open({where:document.body,url:dAe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cAe,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const s=Zd(e,"network-request-failed"),o=ef().setTimeout(()=>{i(s)},sAe.get());function l(){ef().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AAe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hAe=500,pAe=600,mAe="_blank",gAe="http://localhost";class TU{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vAe(e,t,r,n=hAe,a=pAe){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...AAe,width:n.toString(),height:a.toString(),top:i,left:s},c=Lo().toLowerCase();r&&(o=EK(c)?mAe:r),wK(c)&&(t=t||gAe,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[m,v])=>`${h}${m}=${v},`,"");if(Ode(c)&&o!=="_self")return xAe(t||"",o),new TU(null);const A=window.open(t||"",o,u);Dr(A,e,"popup-blocked");try{A.focus()}catch{}return new TU(A)}function xAe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yAe="__/auth/handler",bAe="emulator/auth/handler",wAe=encodeURIComponent("fac");async function NU(e,t,r,n,a,i){Dr(e.config.authDomain,e,"auth-domain-config-required"),Dr(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:qv,eventId:a};if(t instanceof RK){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",sue(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,A]of Object.entries({}))s[u]=A}if(t instanceof yb){const u=t.getScopes().filter(A=>A!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${wAe}=${encodeURIComponent(l)}`:"";return`${CAe(e)}?${vb(o).slice(1)}${c}`}function CAe({config:e}){return e.emulator?_D(e,bAe):`https://${e.authDomain}/${yAe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="webStorageSupport";class EAe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HK,this._completeRedirectFn=Kfe,this._overrideRedirectResult=Gfe}async _openPopup(t,r,n,a){var s;gA((s=this.eventManagers[t._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await NU(t,r,n,xI(),a);return vAe(t,i,kD())}async _openRedirect(t,r,n,a){await this._originValidation(t);const i=await NU(t,r,n,xI(),a);return Tfe(i),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(gA(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await fAe(t),n=new Yfe(t);return r.register("authEvent",a=>(Dr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(YN,{type:YN},a=>{var s;const i=(s=a==null?void 0:a[0])==null?void 0:s[YN];i!==void 0&&r(!!i),ed(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=tAe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return BK()||CK()||TD()}}const _Ae=EAe;var BU="@firebase/auth",kU="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SAe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Dr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TAe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NAe(e){qp(new u0("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Dr(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:s,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kK(e)},c=new zde(n,a,i,l);return efe(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),qp(new u0("auth-internal",t=>{const r=fm(t.getProvider("auth").getImmediate());return(n=>new SAe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jd(BU,kU,TAe(e)),Jd(BU,kU,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BAe=300,kAe=cK("authIdTokenMaxAge")||BAe;let IU=null;const IAe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>kAe)return;const a=r==null?void 0:r.token;IU!==a&&(IU=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function KK(e=CD()){const t=NS(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Zde(e,{popupRedirectResolver:_Ae,persistence:[Mfe,Efe,HK]}),n=cK("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const s=IAe(i.toString());yfe(r,s,()=>s(r.currentUser)),xfe(r,o=>s(o))}}const a=sK("auth");return a&&tfe(r,`http://${a}`),r}function FAe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Gde({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const i=Zd("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",FAe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NAe("Browser");var DAe="firebase",RAe="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jd(DAe,RAe,"app");var FU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zh,WK;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,S){function k(){}k.prototype=S.prototype,E.D=S.prototype,E.prototype=new k,E.prototype.constructor=E,E.C=function(H,P,M){for(var Q=Array(arguments.length-2),V=2;V<arguments.length;V++)Q[V-2]=arguments[V];return S.prototype[P].apply(H,Q)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,S,k){k||(k=0);var H=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)H[P]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(P=0;16>P;++P)H[P]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=E.g[0],k=E.g[1],P=E.g[2];var M=E.g[3],Q=S+(M^k&(P^M))+H[0]+3614090360&4294967295;S=k+(Q<<7&4294967295|Q>>>25),Q=M+(P^S&(k^P))+H[1]+3905402710&4294967295,M=S+(Q<<12&4294967295|Q>>>20),Q=P+(k^M&(S^k))+H[2]+606105819&4294967295,P=M+(Q<<17&4294967295|Q>>>15),Q=k+(S^P&(M^S))+H[3]+3250441966&4294967295,k=P+(Q<<22&4294967295|Q>>>10),Q=S+(M^k&(P^M))+H[4]+4118548399&4294967295,S=k+(Q<<7&4294967295|Q>>>25),Q=M+(P^S&(k^P))+H[5]+1200080426&4294967295,M=S+(Q<<12&4294967295|Q>>>20),Q=P+(k^M&(S^k))+H[6]+2821735955&4294967295,P=M+(Q<<17&4294967295|Q>>>15),Q=k+(S^P&(M^S))+H[7]+4249261313&4294967295,k=P+(Q<<22&4294967295|Q>>>10),Q=S+(M^k&(P^M))+H[8]+1770035416&4294967295,S=k+(Q<<7&4294967295|Q>>>25),Q=M+(P^S&(k^P))+H[9]+2336552879&4294967295,M=S+(Q<<12&4294967295|Q>>>20),Q=P+(k^M&(S^k))+H[10]+4294925233&4294967295,P=M+(Q<<17&4294967295|Q>>>15),Q=k+(S^P&(M^S))+H[11]+2304563134&4294967295,k=P+(Q<<22&4294967295|Q>>>10),Q=S+(M^k&(P^M))+H[12]+1804603682&4294967295,S=k+(Q<<7&4294967295|Q>>>25),Q=M+(P^S&(k^P))+H[13]+4254626195&4294967295,M=S+(Q<<12&4294967295|Q>>>20),Q=P+(k^M&(S^k))+H[14]+2792965006&4294967295,P=M+(Q<<17&4294967295|Q>>>15),Q=k+(S^P&(M^S))+H[15]+1236535329&4294967295,k=P+(Q<<22&4294967295|Q>>>10),Q=S+(P^M&(k^P))+H[1]+4129170786&4294967295,S=k+(Q<<5&4294967295|Q>>>27),Q=M+(k^P&(S^k))+H[6]+3225465664&4294967295,M=S+(Q<<9&4294967295|Q>>>23),Q=P+(S^k&(M^S))+H[11]+643717713&4294967295,P=M+(Q<<14&4294967295|Q>>>18),Q=k+(M^S&(P^M))+H[0]+3921069994&4294967295,k=P+(Q<<20&4294967295|Q>>>12),Q=S+(P^M&(k^P))+H[5]+3593408605&4294967295,S=k+(Q<<5&4294967295|Q>>>27),Q=M+(k^P&(S^k))+H[10]+38016083&4294967295,M=S+(Q<<9&4294967295|Q>>>23),Q=P+(S^k&(M^S))+H[15]+3634488961&4294967295,P=M+(Q<<14&4294967295|Q>>>18),Q=k+(M^S&(P^M))+H[4]+3889429448&4294967295,k=P+(Q<<20&4294967295|Q>>>12),Q=S+(P^M&(k^P))+H[9]+568446438&4294967295,S=k+(Q<<5&4294967295|Q>>>27),Q=M+(k^P&(S^k))+H[14]+3275163606&4294967295,M=S+(Q<<9&4294967295|Q>>>23),Q=P+(S^k&(M^S))+H[3]+4107603335&4294967295,P=M+(Q<<14&4294967295|Q>>>18),Q=k+(M^S&(P^M))+H[8]+1163531501&4294967295,k=P+(Q<<20&4294967295|Q>>>12),Q=S+(P^M&(k^P))+H[13]+2850285829&4294967295,S=k+(Q<<5&4294967295|Q>>>27),Q=M+(k^P&(S^k))+H[2]+4243563512&4294967295,M=S+(Q<<9&4294967295|Q>>>23),Q=P+(S^k&(M^S))+H[7]+1735328473&4294967295,P=M+(Q<<14&4294967295|Q>>>18),Q=k+(M^S&(P^M))+H[12]+2368359562&4294967295,k=P+(Q<<20&4294967295|Q>>>12),Q=S+(k^P^M)+H[5]+4294588738&4294967295,S=k+(Q<<4&4294967295|Q>>>28),Q=M+(S^k^P)+H[8]+2272392833&4294967295,M=S+(Q<<11&4294967295|Q>>>21),Q=P+(M^S^k)+H[11]+1839030562&4294967295,P=M+(Q<<16&4294967295|Q>>>16),Q=k+(P^M^S)+H[14]+4259657740&4294967295,k=P+(Q<<23&4294967295|Q>>>9),Q=S+(k^P^M)+H[1]+2763975236&4294967295,S=k+(Q<<4&4294967295|Q>>>28),Q=M+(S^k^P)+H[4]+1272893353&4294967295,M=S+(Q<<11&4294967295|Q>>>21),Q=P+(M^S^k)+H[7]+4139469664&4294967295,P=M+(Q<<16&4294967295|Q>>>16),Q=k+(P^M^S)+H[10]+3200236656&4294967295,k=P+(Q<<23&4294967295|Q>>>9),Q=S+(k^P^M)+H[13]+681279174&4294967295,S=k+(Q<<4&4294967295|Q>>>28),Q=M+(S^k^P)+H[0]+3936430074&4294967295,M=S+(Q<<11&4294967295|Q>>>21),Q=P+(M^S^k)+H[3]+3572445317&4294967295,P=M+(Q<<16&4294967295|Q>>>16),Q=k+(P^M^S)+H[6]+76029189&4294967295,k=P+(Q<<23&4294967295|Q>>>9),Q=S+(k^P^M)+H[9]+3654602809&4294967295,S=k+(Q<<4&4294967295|Q>>>28),Q=M+(S^k^P)+H[12]+3873151461&4294967295,M=S+(Q<<11&4294967295|Q>>>21),Q=P+(M^S^k)+H[15]+530742520&4294967295,P=M+(Q<<16&4294967295|Q>>>16),Q=k+(P^M^S)+H[2]+3299628645&4294967295,k=P+(Q<<23&4294967295|Q>>>9),Q=S+(P^(k|~M))+H[0]+4096336452&4294967295,S=k+(Q<<6&4294967295|Q>>>26),Q=M+(k^(S|~P))+H[7]+1126891415&4294967295,M=S+(Q<<10&4294967295|Q>>>22),Q=P+(S^(M|~k))+H[14]+2878612391&4294967295,P=M+(Q<<15&4294967295|Q>>>17),Q=k+(M^(P|~S))+H[5]+4237533241&4294967295,k=P+(Q<<21&4294967295|Q>>>11),Q=S+(P^(k|~M))+H[12]+1700485571&4294967295,S=k+(Q<<6&4294967295|Q>>>26),Q=M+(k^(S|~P))+H[3]+2399980690&4294967295,M=S+(Q<<10&4294967295|Q>>>22),Q=P+(S^(M|~k))+H[10]+4293915773&4294967295,P=M+(Q<<15&4294967295|Q>>>17),Q=k+(M^(P|~S))+H[1]+2240044497&4294967295,k=P+(Q<<21&4294967295|Q>>>11),Q=S+(P^(k|~M))+H[8]+1873313359&4294967295,S=k+(Q<<6&4294967295|Q>>>26),Q=M+(k^(S|~P))+H[15]+4264355552&4294967295,M=S+(Q<<10&4294967295|Q>>>22),Q=P+(S^(M|~k))+H[6]+2734768916&4294967295,P=M+(Q<<15&4294967295|Q>>>17),Q=k+(M^(P|~S))+H[13]+1309151649&4294967295,k=P+(Q<<21&4294967295|Q>>>11),Q=S+(P^(k|~M))+H[4]+4149444226&4294967295,S=k+(Q<<6&4294967295|Q>>>26),Q=M+(k^(S|~P))+H[11]+3174756917&4294967295,M=S+(Q<<10&4294967295|Q>>>22),Q=P+(S^(M|~k))+H[2]+718787259&4294967295,P=M+(Q<<15&4294967295|Q>>>17),Q=k+(M^(P|~S))+H[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(P+(Q<<21&4294967295|Q>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+M&4294967295}n.prototype.u=function(E,S){S===void 0&&(S=E.length);for(var k=S-this.blockSize,H=this.B,P=this.h,M=0;M<S;){if(P==0)for(;M<=k;)a(this,E,M),M+=this.blockSize;if(typeof E=="string"){for(;M<S;)if(H[P++]=E.charCodeAt(M++),P==this.blockSize){a(this,H),P=0;break}}else for(;M<S;)if(H[P++]=E[M++],P==this.blockSize){a(this,H),P=0;break}}this.h=P,this.o+=S},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;var k=8*this.o;for(S=E.length-8;S<E.length;++S)E[S]=k&255,k/=256;for(this.u(E),E=Array(16),S=k=0;4>S;++S)for(var H=0;32>H;H+=8)E[k++]=this.g[S]>>>H&255;return E};function i(E,S){var k=o;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=S(E)}function s(E,S){this.h=S;for(var k=[],H=!0,P=E.length-1;0<=P;P--){var M=E[P]|0;H&&M==S||(k[P]=M,H=!1)}this.g=k}var o={};function l(E){return-128<=E&&128>E?i(E,function(S){return new s([S|0],0>S?-1:0)}):new s([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return A;if(0>E)return y(c(-E));for(var S=[],k=1,H=0;E>=k;H++)S[H]=E/k|0,k*=4294967296;return new s(S,0)}function u(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return y(u(E.substring(1),S));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(S,8)),H=A,P=0;P<E.length;P+=8){var M=Math.min(8,E.length-P),Q=parseInt(E.substring(P,P+M),S);8>M?(M=c(Math.pow(S,M)),H=H.j(M).add(c(Q))):(H=H.j(k),H=H.add(c(Q)))}return H}var A=l(0),h=l(1),m=l(16777216);e=s.prototype,e.m=function(){if(g(this))return-y(this).m();for(var E=0,S=1,k=0;k<this.g.length;k++){var H=this.i(k);E+=(0<=H?H:4294967296+H)*S,S*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(g(this))return"-"+y(this).toString(E);for(var S=c(Math.pow(E,6)),k=this,H="";;){var P=F(k,S).g;k=w(k,P.j(S));var M=((0<k.g.length?k.g[0]:k.h)>>>0).toString(E);if(k=P,v(k))return M+H;for(;6>M.length;)M="0"+M;H=M+H}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(var S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function g(E){return E.h==-1}e.l=function(E){return E=w(this,E),g(E)?-1:v(E)?0:1};function y(E){for(var S=E.g.length,k=[],H=0;H<S;H++)k[H]=~E.g[H];return new s(k,~E.h).add(h)}e.abs=function(){return g(this)?y(this):this},e.add=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],H=0,P=0;P<=S;P++){var M=H+(this.i(P)&65535)+(E.i(P)&65535),Q=(M>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);H=Q>>>16,M&=65535,Q&=65535,k[P]=Q<<16|M}return new s(k,k[k.length-1]&-2147483648?-1:0)};function w(E,S){return E.add(y(S))}e.j=function(E){if(v(this)||v(E))return A;if(g(this))return g(E)?y(this).j(y(E)):y(y(this).j(E));if(g(E))return y(this.j(y(E)));if(0>this.l(m)&&0>E.l(m))return c(this.m()*E.m());for(var S=this.g.length+E.g.length,k=[],H=0;H<2*S;H++)k[H]=0;for(H=0;H<this.g.length;H++)for(var P=0;P<E.g.length;P++){var M=this.i(H)>>>16,Q=this.i(H)&65535,V=E.i(P)>>>16,te=E.i(P)&65535;k[2*H+2*P]+=Q*te,T(k,2*H+2*P),k[2*H+2*P+1]+=M*te,T(k,2*H+2*P+1),k[2*H+2*P+1]+=Q*V,T(k,2*H+2*P+1),k[2*H+2*P+2]+=M*V,T(k,2*H+2*P+2)}for(H=0;H<S;H++)k[H]=k[2*H+1]<<16|k[2*H];for(H=S;H<2*S;H++)k[H]=0;return new s(k,0)};function T(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function N(E,S){this.g=E,this.h=S}function F(E,S){if(v(S))throw Error("division by zero");if(v(E))return new N(A,A);if(g(E))return S=F(y(E),S),new N(y(S.g),y(S.h));if(g(S))return S=F(E,y(S)),new N(y(S.g),S.h);if(30<E.g.length){if(g(E)||g(S))throw Error("slowDivide_ only works with positive integers.");for(var k=h,H=S;0>=H.l(E);)k=B(k),H=B(H);var P=D(k,1),M=D(H,1);for(H=D(H,2),k=D(k,2);!v(H);){var Q=M.add(H);0>=Q.l(E)&&(P=P.add(k),M=Q),H=D(H,1),k=D(k,1)}return S=w(E,P.j(S)),new N(P,S)}for(P=A;0<=E.l(S);){for(k=Math.max(1,Math.floor(E.m()/S.m())),H=Math.ceil(Math.log(k)/Math.LN2),H=48>=H?1:Math.pow(2,H-48),M=c(k),Q=M.j(S);g(Q)||0<Q.l(E);)k-=H,M=c(k),Q=M.j(S);v(M)&&(M=h),P=P.add(M),E=w(E,Q)}return new N(P,E)}e.A=function(E){return F(this,E).h},e.and=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],H=0;H<S;H++)k[H]=this.i(H)&E.i(H);return new s(k,this.h&E.h)},e.or=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],H=0;H<S;H++)k[H]=this.i(H)|E.i(H);return new s(k,this.h|E.h)},e.xor=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],H=0;H<S;H++)k[H]=this.i(H)^E.i(H);return new s(k,this.h^E.h)};function B(E){for(var S=E.g.length+1,k=[],H=0;H<S;H++)k[H]=E.i(H)<<1|E.i(H-1)>>>31;return new s(k,E.h)}function D(E,S){var k=S>>5;S%=32;for(var H=E.g.length-k,P=[],M=0;M<H;M++)P[M]=0<S?E.i(M+k)>>>S|E.i(M+k+1)<<32-S:E.i(M+k);return new s(P,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,WK=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=u,Zh=s}).apply(typeof FU<"u"?FU:typeof self<"u"?self:typeof window<"u"?window:{});var d2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YK,k1,XK,jC,CI,JK,ZK,eW;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,ee,ce){return R==Array.prototype||R==Object.prototype||(R[ee]=ce.value),R};function r(R){R=[typeof globalThis=="object"&&globalThis,R,typeof window=="object"&&window,typeof self=="object"&&self,typeof d2=="object"&&d2];for(var ee=0;ee<R.length;++ee){var ce=R[ee];if(ce&&ce.Math==Math)return ce}throw Error("Cannot find global object")}var n=r(this);function a(R,ee){if(ee)e:{var ce=n;R=R.split(".");for(var be=0;be<R.length-1;be++){var Ve=R[be];if(!(Ve in ce))break e;ce=ce[Ve]}R=R[R.length-1],be=ce[R],ee=ee(be),ee!=be&&ee!=null&&t(ce,R,{configurable:!0,writable:!0,value:ee})}}function i(R,ee){R instanceof String&&(R+="");var ce=0,be=!1,Ve={next:function(){if(!be&&ce<R.length){var tt=ce++;return{value:ee(tt,R[tt]),done:!1}}return be=!0,{done:!0,value:void 0}}};return Ve[Symbol.iterator]=function(){return Ve},Ve}a("Array.prototype.values",function(R){return R||function(){return i(this,function(ee,ce){return ce})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(R){var ee=typeof R;return ee=ee!="object"?ee:R?Array.isArray(R)?"array":ee:"null",ee=="array"||ee=="object"&&typeof R.length=="number"}function c(R){var ee=typeof R;return ee=="object"&&R!=null||ee=="function"}function u(R,ee,ce){return R.call.apply(R.bind,arguments)}function A(R,ee,ce){if(!R)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var Ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ve,be),R.apply(ee,Ve)}}return function(){return R.apply(ee,arguments)}}function h(R,ee,ce){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:A,h.apply(null,arguments)}function m(R,ee){var ce=Array.prototype.slice.call(arguments,1);return function(){var be=ce.slice();return be.push.apply(be,arguments),R.apply(this,be)}}function v(R,ee){function ce(){}ce.prototype=ee.prototype,R.aa=ee.prototype,R.prototype=new ce,R.prototype.constructor=R,R.Qb=function(be,Ve,tt){for(var Nt=Array(arguments.length-2),Cr=2;Cr<arguments.length;Cr++)Nt[Cr-2]=arguments[Cr];return ee.prototype[Ve].apply(be,Nt)}}function g(R){const ee=R.length;if(0<ee){const ce=Array(ee);for(let be=0;be<ee;be++)ce[be]=R[be];return ce}return[]}function y(R,ee){for(let ce=1;ce<arguments.length;ce++){const be=arguments[ce];if(l(be)){const Ve=R.length||0,tt=be.length||0;R.length=Ve+tt;for(let Nt=0;Nt<tt;Nt++)R[Ve+Nt]=be[Nt]}else R.push(be)}}class w{constructor(ee,ce){this.i=ee,this.j=ce,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function T(R){return/^[\s\xa0]*$/.test(R)}function N(){var R=o.navigator;return R&&(R=R.userAgent)?R:""}function F(R){return F[" "](R),R}F[" "]=function(){};var B=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function D(R,ee,ce){for(const be in R)ee.call(ce,R[be],be,R)}function E(R,ee){for(const ce in R)ee.call(void 0,R[ce],ce,R)}function S(R){const ee={};for(const ce in R)ee[ce]=R[ce];return ee}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(R,ee){let ce,be;for(let Ve=1;Ve<arguments.length;Ve++){be=arguments[Ve];for(ce in be)R[ce]=be[ce];for(let tt=0;tt<k.length;tt++)ce=k[tt],Object.prototype.hasOwnProperty.call(be,ce)&&(R[ce]=be[ce])}}function P(R){var ee=1;R=R.split(":");const ce=[];for(;0<ee&&R.length;)ce.push(R.shift()),ee--;return R.length&&ce.push(R.join(":")),ce}function M(R){o.setTimeout(()=>{throw R},0)}function Q(){var R=X;let ee=null;return R.g&&(ee=R.g,R.g=R.g.next,R.g||(R.h=null),ee.next=null),ee}class V{constructor(){this.h=this.g=null}add(ee,ce){const be=te.get();be.set(ee,ce),this.h?this.h.next=be:this.g=be,this.h=be}}var te=new w(()=>new W,R=>R.reset());class W{constructor(){this.next=this.g=this.h=null}set(ee,ce){this.h=ee,this.g=ce,this.next=null}reset(){this.next=this.g=this.h=null}}let re,z=!1,X=new V,K=()=>{const R=o.Promise.resolve(void 0);re=()=>{R.then(se)}};var se=()=>{for(var R;R=Q();){try{R.h.call(R.g)}catch(ce){M(ce)}var ee=te;ee.j(R),100>ee.h&&(ee.h++,R.next=ee.g,ee.g=R)}z=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(R,ee){this.type=R,this.g=this.target=ee,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var R=!1,ee=Object.defineProperty({},"passive",{get:function(){R=!0}});try{const ce=()=>{};o.addEventListener("test",ce,ee),o.removeEventListener("test",ce,ee)}catch{}return R}();function ne(R,ee){if(Y.call(this,R?R.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,R){var ce=this.type=R.type,be=R.changedTouches&&R.changedTouches.length?R.changedTouches[0]:null;if(this.target=R.target||R.srcElement,this.g=ee,ee=R.relatedTarget){if(B){e:{try{F(ee.nodeName);var Ve=!0;break e}catch{}Ve=!1}Ve||(ee=null)}}else ce=="mouseover"?ee=R.fromElement:ce=="mouseout"&&(ee=R.toElement);this.relatedTarget=ee,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0),this.button=R.button,this.key=R.key||"",this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.shiftKey=R.shiftKey,this.metaKey=R.metaKey,this.pointerId=R.pointerId||0,this.pointerType=typeof R.pointerType=="string"?R.pointerType:de[R.pointerType]||"",this.state=R.state,this.i=R,R.defaultPrevented&&ne.aa.h.call(this)}}v(ne,Y);var de={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var R=this.i;R.preventDefault?R.preventDefault():R.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function ae(R,ee,ce,be,Ve){this.listener=R,this.proxy=null,this.src=ee,this.type=ce,this.capture=!!be,this.ha=Ve,this.key=++Ae,this.da=this.fa=!1}function ue(R){R.da=!0,R.listener=null,R.proxy=null,R.src=null,R.ha=null}function le(R){this.src=R,this.g={},this.h=0}le.prototype.add=function(R,ee,ce,be,Ve){var tt=R.toString();R=this.g[tt],R||(R=this.g[tt]=[],this.h++);var Nt=De(R,ee,be,Ve);return-1<Nt?(ee=R[Nt],ce||(ee.fa=!1)):(ee=new ae(ee,this.src,tt,!!be,Ve),ee.fa=ce,R.push(ee)),ee};function ie(R,ee){var ce=ee.type;if(ce in R.g){var be=R.g[ce],Ve=Array.prototype.indexOf.call(be,ee,void 0),tt;(tt=0<=Ve)&&Array.prototype.splice.call(be,Ve,1),tt&&(ue(ee),R.g[ce].length==0&&(delete R.g[ce],R.h--))}}function De(R,ee,ce,be){for(var Ve=0;Ve<R.length;++Ve){var tt=R[Ve];if(!tt.da&&tt.listener==ee&&tt.capture==!!ce&&tt.ha==be)return Ve}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),Be={};function Ce(R,ee,ce,be,Ve){if(Array.isArray(ee)){for(var tt=0;tt<ee.length;tt++)Ce(R,ee[tt],ce,be,Ve);return null}return ce=Xt(ce),R&&R[xe]?R.K(ee,ce,c(be)?!!be.capture:!1,Ve):Re(R,ee,ce,!1,be,Ve)}function Re(R,ee,ce,be,Ve,tt){if(!ee)throw Error("Invalid event type");var Nt=c(Ve)?!!Ve.capture:!!Ve,Cr=Rt(R);if(Cr||(R[Le]=Cr=new le(R)),ce=Cr.add(ee,ce,be,Nt,tt),ce.proxy)return ce;if(be=je(),ce.proxy=be,be.src=R,be.listener=ce,R.addEventListener)Z||(Ve=Nt),Ve===void 0&&(Ve=!1),R.addEventListener(ee.toString(),be,Ve);else if(R.attachEvent)R.attachEvent(wt(ee.toString()),be);else if(R.addListener&&R.removeListener)R.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return ce}function je(){function R(ce){return ee.call(R.src,R.listener,ce)}const ee=ot;return R}function We(R,ee,ce,be,Ve){if(Array.isArray(ee))for(var tt=0;tt<ee.length;tt++)We(R,ee[tt],ce,be,Ve);else be=c(be)?!!be.capture:!!be,ce=Xt(ce),R&&R[xe]?(R=R.i,ee=String(ee).toString(),ee in R.g&&(tt=R.g[ee],ce=De(tt,ce,be,Ve),-1<ce&&(ue(tt[ce]),Array.prototype.splice.call(tt,ce,1),tt.length==0&&(delete R.g[ee],R.h--)))):R&&(R=Rt(R))&&(ee=R.g[ee.toString()],R=-1,ee&&(R=De(ee,ce,be,Ve)),(ce=-1<R?ee[R]:null)&&ct(ce))}function ct(R){if(typeof R!="number"&&R&&!R.da){var ee=R.src;if(ee&&ee[xe])ie(ee.i,R);else{var ce=R.type,be=R.proxy;ee.removeEventListener?ee.removeEventListener(ce,be,R.capture):ee.detachEvent?ee.detachEvent(wt(ce),be):ee.addListener&&ee.removeListener&&ee.removeListener(be),(ce=Rt(ee))?(ie(ce,R),ce.h==0&&(ce.src=null,ee[Le]=null)):ue(R)}}}function wt(R){return R in Be?Be[R]:Be[R]="on"+R}function ot(R,ee){if(R.da)R=!0;else{ee=new ne(ee,this);var ce=R.listener,be=R.ha||R.src;R.fa&&ct(R),R=ce.call(be,ee)}return R}function Rt(R){return R=R[Le],R instanceof le?R:null}var Pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(R){return typeof R=="function"?R:(R[Pt]||(R[Pt]=function(ee){return R.handleEvent(ee)}),R[Pt])}function Mt(){U.call(this),this.i=new le(this),this.M=this,this.F=null}v(Mt,U),Mt.prototype[xe]=!0,Mt.prototype.removeEventListener=function(R,ee,ce,be){We(this,R,ee,ce,be)};function Qt(R,ee){var ce,be=R.F;if(be)for(ce=[];be;be=be.F)ce.push(be);if(R=R.M,be=ee.type||ee,typeof ee=="string")ee=new Y(ee,R);else if(ee instanceof Y)ee.target=ee.target||R;else{var Ve=ee;ee=new Y(be,R),H(ee,Ve)}if(Ve=!0,ce)for(var tt=ce.length-1;0<=tt;tt--){var Nt=ee.g=ce[tt];Ve=$t(Nt,be,!0,ee)&&Ve}if(Nt=ee.g=R,Ve=$t(Nt,be,!0,ee)&&Ve,Ve=$t(Nt,be,!1,ee)&&Ve,ce)for(tt=0;tt<ce.length;tt++)Nt=ee.g=ce[tt],Ve=$t(Nt,be,!1,ee)&&Ve}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var R=this.i,ee;for(ee in R.g){for(var ce=R.g[ee],be=0;be<ce.length;be++)ue(ce[be]);delete R.g[ee],R.h--}}this.F=null},Mt.prototype.K=function(R,ee,ce,be){return this.i.add(String(R),ee,!1,ce,be)},Mt.prototype.L=function(R,ee,ce,be){return this.i.add(String(R),ee,!0,ce,be)};function $t(R,ee,ce,be){if(ee=R.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var Ve=!0,tt=0;tt<ee.length;++tt){var Nt=ee[tt];if(Nt&&!Nt.da&&Nt.capture==ce){var Cr=Nt.listener,on=Nt.ha||Nt.src;Nt.fa&&ie(R.i,Nt),Ve=Cr.call(on,be)!==!1&&Ve}}return Ve&&!be.defaultPrevented}function It(R,ee,ce){if(typeof R=="function")ce&&(R=h(R,ce));else if(R&&typeof R.handleEvent=="function")R=h(R.handleEvent,R);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(R,ee||0)}function Dt(R){R.g=It(()=>{R.g=null,R.i&&(R.i=!1,Dt(R))},R.l);const ee=R.h;R.h=null,R.m.apply(null,ee)}class gt extends U{constructor(ee,ce){super(),this.m=ee,this.l=ce,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(R){U.call(this),this.h=R,this.g={}}v(Br,U);var Zt=[];function yn(R){D(R.g,function(ee,ce){this.g.hasOwnProperty(ce)&&ct(ee)},R),R.g={}}Br.prototype.N=function(){Br.aa.N.call(this),yn(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=o.JSON.stringify,Vr=o.JSON.parse,jn=class{stringify(R){return o.JSON.stringify(R,void 0)}parse(R){return o.JSON.parse(R,void 0)}};function Ur(){}Ur.prototype.h=null;function Ii(R){return R.h||(R.h=R.i())}function dn(){}var ma={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ra(){Y.call(this,"d")}v(Ra,Y);function Gr(){Y.call(this,"c")}v(Gr,Y);var sr={},Xr=null;function Fi(){return Xr=Xr||new Mt}sr.La="serverreachability";function la(R){Y.call(this,sr.La,R)}v(la,Y);function Qa(R){const ee=Fi();Qt(ee,new la(ee))}sr.STAT_EVENT="statevent";function Zi(R,ee){Y.call(this,sr.STAT_EVENT,R),this.stat=ee}v(Zi,Y);function qt(R){const ee=Fi();Qt(ee,new Zi(ee,R))}sr.Ma="timingevent";function bn(R,ee){Y.call(this,sr.Ma,R),this.size=ee}v(bn,Y);function fn(R,ee){if(typeof R!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){R()},ee)}function Hn(){this.g=!0}Hn.prototype.xa=function(){this.g=!1};function Yn(R,ee,ce,be,Ve,tt){R.info(function(){if(R.g)if(tt)for(var Nt="",Cr=tt.split("&"),on=0;on<Cr.length;on++){var Lr=Cr[on].split("=");if(1<Lr.length){var Fn=Lr[0];Lr=Lr[1];var Vn=Fn.split("_");Nt=2<=Vn.length&&Vn[1]=="type"?Nt+(Fn+"="+Lr+"&"):Nt+(Fn+"=redacted&")}}else Nt=null;else Nt=tt;return"XMLHTTP REQ ("+be+") [attempt "+Ve+"]: "+ee+`
`+ce+`
`+Nt})}function ca(R,ee,ce,be,Ve,tt,Nt){R.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+Ve+"]: "+ee+`
`+ce+`
`+tt+" "+Nt})}function me(R,ee,ce,be){R.info(function(){return"XMLHTTP TEXT ("+ee+"): "+_e(R,ce)+(be?" "+be:"")})}function ke(R,ee){R.info(function(){return"TIMEOUT: "+ee})}Hn.prototype.info=function(){};function _e(R,ee){if(!R.g)return ee;if(!ee)return null;try{var ce=JSON.parse(ee);if(ce){for(R=0;R<ce.length;R++)if(Array.isArray(ce[R])){var be=ce[R];if(!(2>be.length)){var Ve=be[1];if(Array.isArray(Ve)&&!(1>Ve.length)){var tt=Ve[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(var Nt=1;Nt<Ve.length;Nt++)Ve[Nt]=""}}}}return _r(ce)}catch{return ee}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function Ke(){}v(Ke,Ur),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},Ie=new Ke;function nt(R,ee,ce,be){this.j=R,this.i=ee,this.l=ce,this.R=be||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}var Xe={},et={};function bt(R,ee,ce){R.L=1,R.v=bc(rs(ee)),R.m=ce,R.P=!0,kt(R,null)}function kt(R,ee){R.F=Date.now(),Lt(R),R.A=rs(R.v);var ce=R.A,be=R.R;Array.isArray(be)||(be=[String(be)]),wr(ce.i,"t",be),R.C=0,ce=R.j.J,R.h=new ze,R.g=pe(R.j,ce?ee:null,!R.m),0<R.O&&(R.M=new gt(h(R.Y,R,R.g),R.O)),ee=R.U,ce=R.g,be=R.ca;var Ve="readystatechange";Array.isArray(Ve)||(Ve&&(Zt[0]=Ve.toString()),Ve=Zt);for(var tt=0;tt<Ve.length;tt++){var Nt=Ce(ce,Ve[tt],be||ee.handleEvent,!1,ee.h||ee);if(!Nt)break;ee.g[Nt.key]=Nt}ee=R.H?S(R.H):{},R.m?(R.u||(R.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",R.g.ea(R.A,R.u,R.m,ee)):(R.u="GET",R.g.ea(R.A,R.u,null,ee)),Qa(),Yn(R.i,R.u,R.A,R.l,R.R,R.m)}nt.prototype.ca=function(R){R=R.target;const ee=this.M;ee&&ti(R)==3?ee.j():this.Y(R)},nt.prototype.Y=function(R){try{if(R==this.g)e:{const Vn=ti(this.g);var ee=this.g.Ba();const ol=this.g.Z();if(!(3>Vn)&&(Vn!=3||this.g&&(this.h.h||this.g.oa()||zA(this.g)))){this.J||Vn!=4||ee==7||(ee==8||0>=ol?Qa(3):Qa(2)),qr(this);var ce=this.g.Z();this.X=ce;t:if(Vt(this)){var be=zA(this.g);R="";var Ve=be.length,tt=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),$r(this);var Nt="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<Ve;ee++)this.h.h=!0,R+=this.h.i.decode(be[ee],{stream:!(tt&&ee==Ve-1)});be.length=0,this.h.g+=R,this.C=0,Nt=this.h.g}else Nt=this.g.oa();if(this.o=ce==200,ca(this.i,this.u,this.A,this.l,this.R,Vn,ce),this.o){if(this.T&&!this.K){t:{if(this.g){var Cr,on=this.g;if((Cr=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Cr)){var Lr=Cr;break t}}Lr=null}if(ce=Lr)me(this.i,this.l,ce,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ja(this,ce);else{this.o=!1,this.s=3,qt(12),Jr(this),$r(this);break e}}if(this.P){ce=!0;let Va;for(;!this.J&&this.C<Nt.length;)if(Va=Bt(this,Nt),Va==et){Vn==4&&(this.s=4,qt(14),ce=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(Va==Xe){this.s=4,qt(15),me(this.i,this.l,Nt,"[Invalid Chunk]"),ce=!1;break}else me(this.i,this.l,Va,null),Ja(this,Va);if(Vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vn!=4||Nt.length!=0||this.h.h||(this.s=1,qt(16),ce=!1),this.o=this.o&&ce,!ce)me(this.i,this.l,Nt,"[Invalid Chunked Response]"),Jr(this),$r(this);else if(0<Nt.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+Nt.length),Tc(Fn),Fn.M=!0,qt(11))}}else me(this.i,this.l,Nt,null),Ja(this,Nt);Vn==4&&Jr(this),this.o&&!this.J&&(Vn==4?Nc(this.j,this):(this.o=!1,Lt(this)))}else Ec(this.g),ce==400&&0<Nt.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),Jr(this),$r(this)}}}catch{}finally{}};function Vt(R){return R.g?R.u=="GET"&&R.L!=2&&R.j.Ca:!1}function Bt(R,ee){var ce=R.C,be=ee.indexOf(`
`,ce);return be==-1?et:(ce=Number(ee.substring(ce,be)),isNaN(ce)?Xe:(be+=1,be+ce>ee.length?et:(ee=ee.slice(be,be+ce),R.C=be+ce,ee)))}nt.prototype.cancel=function(){this.J=!0,Jr(this)};function Lt(R){R.S=Date.now()+R.I,mr(R,R.I)}function mr(R,ee){if(R.B!=null)throw Error("WatchDog timer not null");R.B=fn(h(R.ba,R),ee)}function qr(R){R.B&&(o.clearTimeout(R.B),R.B=null)}nt.prototype.ba=function(){this.B=null;const R=Date.now();0<=R-this.S?(ke(this.i,this.A),this.L!=2&&(Qa(),qt(17)),Jr(this),this.s=2,$r(this)):mr(this,this.S-R)};function $r(R){R.j.G==0||R.J||Nc(R.j,R)}function Jr(R){qr(R);var ee=R.M;ee&&typeof ee.ma=="function"&&ee.ma(),R.M=null,yn(R.U),R.g&&(ee=R.g,R.g=null,ee.abort(),ee.ma())}function Ja(R,ee){try{var ce=R.j;if(ce.G!=0&&(ce.g==R||es(ce.h,R))){if(!R.K&&es(ce.h,R)&&ce.G==3){try{var be=ce.Da.g.parse(ee)}catch{be=null}if(Array.isArray(be)&&be.length==3){var Ve=be;if(Ve[0]==0){e:if(!ce.u){if(ce.g)if(ce.g.F+3e3<R.F)Pl(ce),dd(ce);else break e;wu(ce),qt(18)}}else ce.za=Ve[1],0<ce.za-ce.T&&37500>Ve[2]&&ce.F&&ce.v==0&&!ce.C&&(ce.C=fn(h(ce.Za,ce),6e3));if(1>=hi(ce.h)&&ce.ca){try{ce.ca()}catch{}ce.ca=void 0}}else vs(ce,11)}else if((R.K||ce.g==R)&&Pl(ce),!T(ee))for(Ve=ce.Da.g.parse(ee),ee=0;ee<Ve.length;ee++){let Lr=Ve[ee];if(ce.T=Lr[0],Lr=Lr[1],ce.G==2)if(Lr[0]=="c"){ce.K=Lr[1],ce.ia=Lr[2];const Fn=Lr[3];Fn!=null&&(ce.la=Fn,ce.j.info("VER="+ce.la));const Vn=Lr[4];Vn!=null&&(ce.Aa=Vn,ce.j.info("SVER="+ce.Aa));const ol=Lr[5];ol!=null&&typeof ol=="number"&&0<ol&&(be=1.5*ol,ce.L=be,ce.j.info("backChannelRequestTimeoutMs_="+be)),be=ce;const Va=R.g;if(Va){const lo=Va.g?Va.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var tt=be.h;tt.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(ua(tt,tt.h),tt.h=null))}if(be.D){const Bc=Va.g?Va.g.getResponseHeader("X-HTTP-Session-Id"):null;Bc&&(be.ya=Bc,In(be.I,be.D,Bc))}}ce.G=3,ce.l&&ce.l.ua(),ce.ba&&(ce.R=Date.now()-R.F,ce.j.info("Handshake RTT: "+ce.R+"ms")),be=ce;var Nt=R;if(be.qa=q(be,be.J?be.ia:null,be.W),Nt.K){Ri(be.h,Nt);var Cr=Nt,on=be.L;on&&(Cr.I=on),Cr.B&&(qr(Cr),Lt(Cr)),be.g=Nt}else Ad(be);0<ce.i.length&&fd(ce)}else Lr[0]!="stop"&&Lr[0]!="close"||vs(ce,7);else ce.G==3&&(Lr[0]=="stop"||Lr[0]=="close"?Lr[0]=="stop"?vs(ce,7):Rl(ce):Lr[0]!="noop"&&ce.l&&ce.l.ta(Lr),ce.v=0)}}Qa(4)}catch{}}var no=class{constructor(R,ee){this.g=R,this.map=ee}};function Za(R){this.l=R||10,o.PerformanceNavigationTiming?(R=o.performance.getEntriesByType("navigation"),R=0<R.length&&(R[0].nextHopProtocol=="hq"||R[0].nextHopProtocol=="h2")):R=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=R?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Di(R){return R.h?!0:R.g?R.g.size>=R.j:!1}function hi(R){return R.h?1:R.g?R.g.size:0}function es(R,ee){return R.h?R.h==ee:R.g?R.g.has(ee):!1}function ua(R,ee){R.g?R.g.add(ee):R.h=ee}function Ri(R,ee){R.h&&R.h==ee?R.h=null:R.g&&R.g.has(ee)&&R.g.delete(ee)}Za.prototype.cancel=function(){if(this.i=ld(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const R of this.g.values())R.cancel();this.g.clear()}};function ld(R){if(R.h!=null)return R.i.concat(R.h.D);if(R.g!=null&&R.g.size!==0){let ee=R.i;for(const ce of R.g.values())ee=ee.concat(ce.D);return ee}return g(R.i)}function HA(R){if(R.V&&typeof R.V=="function")return R.V();if(typeof Map<"u"&&R instanceof Map||typeof Set<"u"&&R instanceof Set)return Array.from(R.values());if(typeof R=="string")return R.split("");if(l(R)){for(var ee=[],ce=R.length,be=0;be<ce;be++)ee.push(R[be]);return ee}ee=[],ce=0;for(be in R)ee[ce++]=R[be];return ee}function vc(R){if(R.na&&typeof R.na=="function")return R.na();if(!R.V||typeof R.V!="function"){if(typeof Map<"u"&&R instanceof Map)return Array.from(R.keys());if(!(typeof Set<"u"&&R instanceof Set)){if(l(R)||typeof R=="string"){var ee=[];R=R.length;for(var ce=0;ce<R;ce++)ee.push(ce);return ee}ee=[],ce=0;for(const be in R)ee[ce++]=be;return ee}}}function yf(R,ee){if(R.forEach&&typeof R.forEach=="function")R.forEach(ee,void 0);else if(l(R)||typeof R=="string")Array.prototype.forEach.call(R,ee,void 0);else for(var ce=vc(R),be=HA(R),Ve=be.length,tt=0;tt<Ve;tt++)ee.call(void 0,be[tt],ce&&ce[tt],R)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(R,ee){if(R){R=R.split("&");for(var ce=0;ce<R.length;ce++){var be=R[ce].indexOf("="),Ve=null;if(0<=be){var tt=R[ce].substring(0,be);Ve=R[ce].substring(be+1)}else tt=R[ce];ee(tt,Ve?decodeURIComponent(Ve.replace(/\+/g," ")):"")}}}function wn(R){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,R instanceof wn){this.h=R.h,xc(this,R.j),this.o=R.o,this.g=R.g,yc(this,R.s),this.l=R.l;var ee=R.i,ce=new tl;ce.i=ee.i,ee.g&&(ce.g=new Map(ee.g),ce.h=ee.h),el(this,ce),this.m=R.m}else R&&(ee=String(R).match(ts))?(this.h=!1,xc(this,ee[1]||"",!0),this.o=ao(ee[2]||""),this.g=ao(ee[3]||"",!0),yc(this,ee[4]),this.l=ao(ee[5]||"",!0),el(this,ee[6]||"",!0),this.m=ao(ee[7]||"")):(this.h=!1,this.i=new tl(null,this.h))}wn.prototype.toString=function(){var R=[],ee=this.j;ee&&R.push(Bl(ee,bf,!0),":");var ce=this.g;return(ce||ee=="file")&&(R.push("//"),(ee=this.o)&&R.push(Bl(ee,bf,!0),"@"),R.push(encodeURIComponent(String(ce)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ce=this.s,ce!=null&&R.push(":",String(ce))),(ce=this.l)&&(this.g&&ce.charAt(0)!="/"&&R.push("/"),R.push(Bl(ce,ce.charAt(0)=="/"?kl:wf,!0))),(ce=this.i.toString())&&R.push("?",ce),(ce=this.m)&&R.push("#",Bl(ce,Il)),R.join("")};function rs(R){return new wn(R)}function xc(R,ee,ce){R.j=ce?ao(ee,!0):ee,R.j&&(R.j=R.j.replace(/:$/,""))}function yc(R,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);R.s=ee}else R.s=null}function el(R,ee,ce){ee instanceof tl?(R.i=ee,VA(R.i,R.h)):(ce||(ee=Bl(ee,ud)),R.i=new tl(ee,R.h))}function In(R,ee,ce){R.i.set(ee,ce)}function bc(R){return In(R,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),R}function ao(R,ee){return R?ee?decodeURI(R.replace(/%25/g,"%2525")):decodeURIComponent(R):""}function Bl(R,ee,ce){return typeof R=="string"?(R=encodeURI(R).replace(ee,QA),ce&&(R=R.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R):null}function QA(R){return R=R.charCodeAt(0),"%"+(R>>4&15).toString(16)+(R&15).toString(16)}var bf=/[#\/\?@]/g,wf=/[#\?:]/g,kl=/[#\?]/g,ud=/[#\?@]/g,Il=/#/g;function tl(R,ee){this.h=this.g=null,this.i=R||null,this.j=!!ee}function Xn(R){R.g||(R.g=new Map,R.h=0,R.i&&cd(R.i,function(ee,ce){R.add(decodeURIComponent(ee.replace(/\+/g," ")),ce)}))}e=tl.prototype,e.add=function(R,ee){Xn(this),this.i=null,R=nl(this,R);var ce=this.g.get(R);return ce||this.g.set(R,ce=[]),ce.push(ee),this.h+=1,this};function Fl(R,ee){Xn(R),ee=nl(R,ee),R.g.has(ee)&&(R.i=null,R.h-=R.g.get(ee).length,R.g.delete(ee))}function rl(R,ee){return Xn(R),ee=nl(R,ee),R.g.has(ee)}e.forEach=function(R,ee){Xn(this),this.g.forEach(function(ce,be){ce.forEach(function(Ve){R.call(ee,Ve,be,this)},this)},this)},e.na=function(){Xn(this);const R=Array.from(this.g.values()),ee=Array.from(this.g.keys()),ce=[];for(let be=0;be<ee.length;be++){const Ve=R[be];for(let tt=0;tt<Ve.length;tt++)ce.push(ee[be])}return ce},e.V=function(R){Xn(this);let ee=[];if(typeof R=="string")rl(this,R)&&(ee=ee.concat(this.g.get(nl(this,R))));else{R=Array.from(this.g.values());for(let ce=0;ce<R.length;ce++)ee=ee.concat(R[ce])}return ee},e.set=function(R,ee){return Xn(this),this.i=null,R=nl(this,R),rl(this,R)&&(this.h-=this.g.get(R).length),this.g.set(R,[ee]),this.h+=1,this},e.get=function(R,ee){return R?(R=this.V(R),0<R.length?String(R[0]):ee):ee};function wr(R,ee,ce){Fl(R,ee),0<ce.length&&(R.i=null,R.g.set(nl(R,ee),g(ce)),R.h+=ce.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const R=[],ee=Array.from(this.g.keys());for(var ce=0;ce<ee.length;ce++){var be=ee[ce];const tt=encodeURIComponent(String(be)),Nt=this.V(be);for(be=0;be<Nt.length;be++){var Ve=tt;Nt[be]!==""&&(Ve+="="+encodeURIComponent(String(Nt[be]))),R.push(Ve)}}return this.i=R.join("&")};function nl(R,ee){return ee=String(ee),R.j&&(ee=ee.toLowerCase()),ee}function VA(R,ee){ee&&!R.j&&(Xn(R),R.i=null,R.g.forEach(function(ce,be){var Ve=be.toLowerCase();be!=Ve&&(Fl(this,be),wr(this,Ve,ce))},R)),R.j=ee}function ps(R,ee){const ce=new Hn;if(o.Image){const be=new Image;be.onload=m(Ls,ce,"TestLoadImage: loaded",!0,ee,be),be.onerror=m(Ls,ce,"TestLoadImage: error",!1,ee,be),be.onabort=m(Ls,ce,"TestLoadImage: abort",!1,ee,be),be.ontimeout=m(Ls,ce,"TestLoadImage: timeout",!1,ee,be),o.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=R}else ee(!1)}function io(R,ee){const ce=new Hn,be=new AbortController,Ve=setTimeout(()=>{be.abort(),Ls(ce,"TestPingServer: timeout",!1,ee)},1e4);fetch(R,{signal:be.signal}).then(tt=>{clearTimeout(Ve),tt.ok?Ls(ce,"TestPingServer: ok",!0,ee):Ls(ce,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(Ve),Ls(ce,"TestPingServer: error",!1,ee)})}function Ls(R,ee,ce,be,Ve){try{Ve&&(Ve.onload=null,Ve.onerror=null,Ve.onabort=null,Ve.ontimeout=null),be(ce)}catch{}}function al(){this.g=new jn}function so(R,ee,ce){const be=ce||"";try{yf(R,function(Ve,tt){let Nt=Ve;c(Ve)&&(Nt=_r(Ve)),ee.push(be+tt+"="+encodeURIComponent(Nt))})}catch(Ve){throw ee.push(be+"type="+encodeURIComponent("_badmap")),Ve}}function wc(R){this.l=R.Ub||null,this.j=R.eb||!1}v(wc,Ur),wc.prototype.g=function(){return new Dl(this.l,this.j)},wc.prototype.i=function(R){return function(){return R}}({});function Dl(R,ee){Mt.call(this),this.D=R,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Dl,Mt),e=Dl.prototype,e.open=function(R,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=R,this.A=ee,this.readyState=1,ms(this)},e.send=function(R){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};R&&(ee.body=R),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},e.Sa=function(R){if(this.g&&(this.l=R,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=R.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")R.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in R){if(this.j=R.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cf(this)}else R.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cf(R){R.j.read().then(R.Pa.bind(R)).catch(R.ga.bind(R))}e.Pa=function(R){if(this.g){if(this.o&&R.value)this.response.push(R.value);else if(!this.o){var ee=R.value?R.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!R.done}))&&(this.response=this.responseText+=ee)}R.done?oo(this):ms(this),this.readyState==3&&Cf(this)}},e.Ra=function(R){this.g&&(this.response=this.responseText=R,oo(this))},e.Qa=function(R){this.g&&(this.response=R,oo(this))},e.ga=function(){this.g&&oo(this)};function oo(R){R.readyState=4,R.l=null,R.j=null,R.v=null,ms(R)}e.setRequestHeader=function(R,ee){this.u.append(R,ee)},e.getResponseHeader=function(R){return this.h&&this.h.get(R.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const R=[],ee=this.h.entries();for(var ce=ee.next();!ce.done;)ce=ce.value,R.push(ce[0]+": "+ce[1]),ce=ee.next();return R.join(`\r
`)};function ms(R){R.onreadystatechange&&R.onreadystatechange.call(R)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(R){this.m=R?"include":"same-origin"}});function il(R){let ee="";return D(R,function(ce,be){ee+=be,ee+=":",ee+=ce,ee+=`\r
`}),ee}function ei(R,ee,ce){e:{for(be in ce){var be=!1;break e}be=!0}be||(ce=il(ce),typeof R=="string"?ce!=null&&encodeURIComponent(String(ce)):In(R,ee,ce))}function sn(R){Mt.call(this),this.headers=new Map,this.o=R||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(sn,Mt);var Cc=/^https?$/i,sl=["POST","PUT"];e=sn.prototype,e.Ha=function(R){this.J=R},e.ea=function(R,ee,ce,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+R);ee=ee?ee.toUpperCase():"GET",this.D=R,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?Ii(this.o):Ii(Ie),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ee,String(R),!0),this.B=!1}catch(tt){Ef(this,tt);return}if(R=ce||"",ce=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var Ve in be)ce.set(Ve,be[Ve]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const tt of be.keys())ce.set(tt,be.get(tt));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(ce.keys()).find(tt=>tt.toLowerCase()=="content-type"),Ve=o.FormData&&R instanceof o.FormData,!(0<=Array.prototype.indexOf.call(sl,ee,void 0))||be||Ve||ce.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,Nt]of ce)this.g.setRequestHeader(tt,Nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gs(this),this.u=!0,this.g.send(R),this.u=!1}catch(tt){Ef(this,tt)}};function Ef(R,ee){R.h=!1,R.g&&(R.j=!0,R.g.abort(),R.j=!1),R.l=ee,R.m=5,gu(R),Ho(R)}function gu(R){R.A||(R.A=!0,Qt(R,"complete"),Qt(R,"error"))}e.abort=function(R){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=R||7,Qt(this,"complete"),Qt(this,"abort"),Ho(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ho(this,!0)),sn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},e.bb=function(){vu(this)};function vu(R){if(R.h&&typeof s<"u"&&(!R.v[1]||ti(R)!=4||R.Z()!=2)){if(R.u&&ti(R)==4)It(R.Ea,0,R);else if(Qt(R,"readystatechange"),ti(R)==4){R.h=!1;try{const Nt=R.Z();e:switch(Nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var ce;if(!(ce=ee)){var be;if(be=Nt===0){var Ve=String(R.D).match(ts)[1]||null;!Ve&&o.self&&o.self.location&&(Ve=o.self.location.protocol.slice(0,-1)),be=!Cc.test(Ve?Ve.toLowerCase():"")}ce=be}if(ce)Qt(R,"complete"),Qt(R,"success");else{R.m=6;try{var tt=2<ti(R)?R.g.statusText:""}catch{tt=""}R.l=tt+" ["+R.Z()+"]",gu(R)}}finally{Ho(R)}}}}function Ho(R,ee){if(R.g){gs(R);const ce=R.g,be=R.v[0]?()=>{}:null;R.g=null,R.v=null,ee||Qt(R,"ready");try{ce.onreadystatechange=be}catch{}}}function gs(R){R.I&&(o.clearTimeout(R.I),R.I=null)}e.isActive=function(){return!!this.g};function ti(R){return R.g?R.g.readyState:0}e.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(R){if(this.g){var ee=this.g.responseText;return R&&ee.indexOf(R)==0&&(ee=ee.substring(R.length)),Vr(ee)}};function zA(R){try{if(!R.g)return null;if("response"in R.g)return R.g.response;switch(R.H){case"":case"text":return R.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in R.g)return R.g.mozResponseArrayBuffer}return null}catch{return null}}function Ec(R){const ee={};R=(R.g&&2<=ti(R)&&R.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<R.length;be++){if(T(R[be]))continue;var ce=P(R[be]);const Ve=ce[0];if(ce=ce[1],typeof ce!="string")continue;ce=ce.trim();const tt=ee[Ve]||[];ee[Ve]=tt,tt.push(ce)}E(ee,function(be){return be.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(R,ee,ce){return ce&&ce.internalChannelParams&&ce.internalChannelParams[R]||ee}function _c(R){this.Aa=0,this.i=[],this.j=new Hn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ns("failFast",!1,R),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ns("baseRetryDelayMs",5e3,R),this.cb=ns("retryDelaySeedMs",1e4,R),this.Wa=ns("forwardChannelMaxRetries",2,R),this.wa=ns("forwardChannelRequestTimeoutMs",2e4,R),this.pa=R&&R.xmlHttpFactory||void 0,this.Xa=R&&R.Tb||void 0,this.Ca=R&&R.useFetchStreams||!1,this.L=void 0,this.J=R&&R.supportsCrossDomainXhr||!1,this.K="",this.h=new Za(R&&R.concurrentRequestLimit),this.Da=new al,this.P=R&&R.fastHandshake||!1,this.O=R&&R.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=R&&R.Rb||!1,R&&R.xa&&this.j.xa(),R&&R.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&R&&R.detectBufferingProxy||!1,this.ja=void 0,R&&R.longPollingTimeout&&0<R.longPollingTimeout&&(this.ja=R.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=_c.prototype,e.la=8,e.G=1,e.connect=function(R,ee,ce,be){qt(0),this.W=R,this.H=ee||{},ce&&be!==void 0&&(this.H.OSID=ce,this.H.OAID=be),this.F=this.X,this.I=q(this,null,this.W),fd(this)};function Rl(R){if(xu(R),R.G==3){var ee=R.U++,ce=rs(R.I);if(In(ce,"SID",R.K),In(ce,"RID",ee),In(ce,"TYPE","terminate"),Sc(R,ce),ee=new nt(R,R.j,ee),ee.L=2,ee.v=bc(rs(ce)),ce=!1,o.navigator&&o.navigator.sendBeacon)try{ce=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!ce&&o.Image&&(new Image().src=ee.v,ce=!0),ce||(ee.g=pe(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Lt(ee)}hd(R)}function dd(R){R.g&&(Tc(R),R.g.cancel(),R.g=null)}function xu(R){dd(R),R.u&&(o.clearTimeout(R.u),R.u=null),Pl(R),R.h.cancel(),R.s&&(typeof R.s=="number"&&o.clearTimeout(R.s),R.s=null)}function fd(R){if(!Di(R.h)&&!R.s){R.s=!0;var ee=R.Ga;re||K(),z||(re(),z=!0),X.add(ee,R),R.B=0}}function _f(R,ee){return hi(R.h)>=R.h.j-(R.s?1:0)?!1:R.s?(R.i=ee.D.concat(R.i),!0):R.G==1||R.G==2||R.B>=(R.Va?0:R.Wa)?!1:(R.s=fn(h(R.Ga,R,ee),Cu(R,R.B)),R.B++,!0)}e.Ga=function(R){if(this.s)if(this.s=null,this.G==1){if(!R){this.U=Math.floor(1e5*Math.random()),R=this.U++;const Ve=new nt(this,this.j,R);let tt=this.o;if(this.S&&(tt?(tt=S(tt),H(tt,this.S)):tt=this.S),this.m!==null||this.O||(Ve.H=tt,tt=null),this.P)e:{for(var ee=0,ce=0;ce<this.i.length;ce++){t:{var be=this.i[ce];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(ee+=be,4096<ee){ee=ce;break e}if(ee===4096||ce===this.i.length-1){ee=ce+1;break e}}ee=1e3}else ee=1e3;ee=bu(this,Ve,ee),ce=rs(this.I),In(ce,"RID",R),In(ce,"CVER",22),this.D&&In(ce,"X-HTTP-Session-Id",this.D),Sc(this,ce),tt&&(this.O?ee="headers="+encodeURIComponent(String(il(tt)))+"&"+ee:this.m&&ei(ce,this.m,tt)),ua(this.h,Ve),this.Ua&&In(ce,"TYPE","init"),this.P?(In(ce,"$req",ee),In(ce,"SID","null"),Ve.T=!0,bt(Ve,ce,null)):bt(Ve,ce,ee),this.G=2}}else this.G==3&&(R?yu(this,R):this.i.length==0||Di(this.h)||yu(this))};function yu(R,ee){var ce;ee?ce=ee.l:ce=R.U++;const be=rs(R.I);In(be,"SID",R.K),In(be,"RID",ce),In(be,"AID",R.T),Sc(R,be),R.m&&R.o&&ei(be,R.m,R.o),ce=new nt(R,R.j,ce,R.B+1),R.m===null&&(ce.H=R.o),ee&&(R.i=ee.D.concat(R.i)),ee=bu(R,ce,1e3),ce.I=Math.round(.5*R.wa)+Math.round(.5*R.wa*Math.random()),ua(R.h,ce),bt(ce,be,ee)}function Sc(R,ee){R.H&&D(R.H,function(ce,be){In(ee,be,ce)}),R.l&&yf({},function(ce,be){In(ee,be,ce)})}function bu(R,ee,ce){ce=Math.min(R.i.length,ce);var be=R.l?h(R.l.Na,R.l,R):null;e:{var Ve=R.i;let tt=-1;for(;;){const Nt=["count="+ce];tt==-1?0<ce?(tt=Ve[0].g,Nt.push("ofs="+tt)):tt=0:Nt.push("ofs="+tt);let Cr=!0;for(let on=0;on<ce;on++){let Lr=Ve[on].g;const Fn=Ve[on].map;if(Lr-=tt,0>Lr)tt=Math.max(0,Ve[on].g-100),Cr=!1;else try{so(Fn,Nt,"req"+Lr+"_")}catch{be&&be(Fn)}}if(Cr){be=Nt.join("&");break e}}}return R=R.i.splice(0,ce),ee.D=R,be}function Ad(R){if(!R.g&&!R.u){R.Y=1;var ee=R.Fa;re||K(),z||(re(),z=!0),X.add(ee,R),R.v=0}}function wu(R){return R.g||R.u||3<=R.v?!1:(R.Y++,R.u=fn(h(R.Fa,R),Cu(R,R.v)),R.v++,!0)}e.Fa=function(){if(this.u=null,GA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var R=2*this.R;this.j.info("BP detection timer enabled: "+R),this.A=fn(h(this.ab,this),R)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),dd(this),GA(this))};function Tc(R){R.A!=null&&(o.clearTimeout(R.A),R.A=null)}function GA(R){R.g=new nt(R,R.j,"rpc",R.Y),R.m===null&&(R.g.H=R.o),R.g.O=0;var ee=rs(R.qa);In(ee,"RID","rpc"),In(ee,"SID",R.K),In(ee,"AID",R.T),In(ee,"CI",R.F?"0":"1"),!R.F&&R.ja&&In(ee,"TO",R.ja),In(ee,"TYPE","xmlhttp"),Sc(R,ee),R.m&&R.o&&ei(ee,R.m,R.o),R.L&&(R.g.I=R.L);var ce=R.g;R=R.ia,ce.L=1,ce.v=bc(rs(ee)),ce.m=null,ce.P=!0,kt(ce,R)}e.Za=function(){this.C!=null&&(this.C=null,dd(this),wu(this),qt(19))};function Pl(R){R.C!=null&&(o.clearTimeout(R.C),R.C=null)}function Nc(R,ee){var ce=null;if(R.g==ee){Pl(R),Tc(R),R.g=null;var be=2}else if(es(R.h,ee))ce=ee.D,Ri(R.h,ee),be=1;else return;if(R.G!=0){if(ee.o)if(be==1){ce=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var Ve=R.B;be=Fi(),Qt(be,new bn(be,ce)),fd(R)}else Ad(R);else if(Ve=ee.s,Ve==3||Ve==0&&0<ee.X||!(be==1&&_f(R,ee)||be==2&&wu(R)))switch(ce&&0<ce.length&&(ee=R.h,ee.i=ee.i.concat(ce)),Ve){case 1:vs(R,5);break;case 4:vs(R,10);break;case 3:vs(R,6);break;default:vs(R,2)}}}function Cu(R,ee){let ce=R.Ta+Math.floor(Math.random()*R.cb);return R.isActive()||(ce*=2),ce*ee}function vs(R,ee){if(R.j.info("Error code "+ee),ee==2){var ce=h(R.fb,R),be=R.Xa;const Ve=!be;be=new wn(be||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||xc(be,"https"),bc(be),Ve?ps(be.toString(),ce):io(be.toString(),ce)}else qt(2);R.G=0,R.l&&R.l.sa(ee),hd(R),xu(R)}e.fb=function(R){R?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function hd(R){if(R.G=0,R.ka=[],R.l){const ee=ld(R.h);(ee.length!=0||R.i.length!=0)&&(y(R.ka,ee),y(R.ka,R.i),R.h.i.length=0,g(R.i),R.i.length=0),R.l.ra()}}function q(R,ee,ce){var be=ce instanceof wn?rs(ce):new wn(ce);if(be.g!="")ee&&(be.g=ee+"."+be.g),yc(be,be.s);else{var Ve=o.location;be=Ve.protocol,ee=ee?ee+"."+Ve.hostname:Ve.hostname,Ve=+Ve.port;var tt=new wn(null);be&&xc(tt,be),ee&&(tt.g=ee),Ve&&yc(tt,Ve),ce&&(tt.l=ce),be=tt}return ce=R.D,ee=R.ya,ce&&ee&&In(be,ce,ee),In(be,"VER",R.la),Sc(R,be),be}function pe(R,ee,ce){if(ee&&!R.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=R.Ca&&!R.pa?new sn(new wc({eb:ce})):new sn(R.pa),ee.Ha(R.J),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}e=Fe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Me(){}Me.prototype.g=function(R,ee){return new Ge(R,ee)};function Ge(R,ee){Mt.call(this),this.g=new _c(ee),this.l=R,this.h=ee&&ee.messageUrlParams||null,R=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(R?R["X-Client-Protocol"]="webchannel":R={"X-Client-Protocol":"webchannel"}),this.g.o=R,R=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(R?R["X-WebChannel-Content-Type"]=ee.messageContentType:R={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(R?R["X-WebChannel-Client-Profile"]=ee.va:R={"X-WebChannel-Client-Profile":ee.va}),this.g.S=R,(R=ee&&ee.Sb)&&!T(R)&&(this.g.m=R),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!T(ee)&&(this.g.D=ee,R=this.h,R!==null&&ee in R&&(R=this.h,ee in R&&delete R[ee])),this.j=new zt(this)}v(Ge,Mt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){Rl(this.g)},Ge.prototype.o=function(R){var ee=this.g;if(typeof R=="string"){var ce={};ce.__data__=R,R=ce}else this.u&&(ce={},ce.__data__=_r(R),R=ce);ee.i.push(new no(ee.Ya++,R)),ee.G==3&&fd(ee)},Ge.prototype.N=function(){this.g.l=null,delete this.j,Rl(this.g),delete this.g,Ge.aa.N.call(this)};function lt(R){Ra.call(this),R.__headers__&&(this.headers=R.__headers__,this.statusCode=R.__status__,delete R.__headers__,delete R.__status__);var ee=R.__sm__;if(ee){e:{for(const ce in ee){R=ce;break e}R=void 0}(this.i=R)&&(R=this.i,ee=ee!==null&&R in ee?ee[R]:void 0),this.data=ee}else this.data=R}v(lt,Ra);function St(){Gr.call(this),this.status=1}v(St,Gr);function zt(R){this.g=R}v(zt,Fe),zt.prototype.ua=function(){Qt(this.g,"a")},zt.prototype.ta=function(R){Qt(this.g,new lt(R))},zt.prototype.sa=function(R){Qt(this.g,new St)},zt.prototype.ra=function(){Qt(this.g,"b")},Me.prototype.createWebChannel=Me.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,eW=function(){return new Me},ZK=function(){return Fi()},JK=sr,CI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,jC=Se,Te.COMPLETE="complete",XK=Te,dn.EventType=ma,ma.OPEN="a",ma.CLOSE="b",ma.ERROR="c",ma.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,k1=dn,sn.prototype.listenOnce=sn.prototype.L,sn.prototype.getLastError=sn.prototype.Ka,sn.prototype.getLastErrorCode=sn.prototype.Ba,sn.prototype.getStatus=sn.prototype.Z,sn.prototype.getResponseJson=sn.prototype.Oa,sn.prototype.getResponseText=sn.prototype.oa,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Ha,YK=sn}).apply(typeof d2<"u"?d2:typeof self<"u"?self:typeof window<"u"?window:{});const DU="@firebase/firestore",RU="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Eo.UNAUTHENTICATED=new Eo(null),Eo.GOOGLE_CREDENTIALS=new Eo("google-credentials-uid"),Eo.FIRST_PARTY=new Eo("first-party-uid"),Eo.MOCK_USER=new Eo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kv="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new yD("@firebase/firestore");function Sg(){return Kp.logLevel}function er(e,...t){if(Kp.logLevel<=gn.DEBUG){const r=t.map(FD);Kp.debug(`Firestore (${Kv}): ${e}`,...r)}}function vA(e,...t){if(Kp.logLevel<=gn.ERROR){const r=t.map(FD);Kp.error(`Firestore (${Kv}): ${e}`,...r)}}function mv(e,...t){if(Kp.logLevel<=gn.WARN){const r=t.map(FD);Kp.warn(`Firestore (${Kv}): ${e}`,...r)}}function FD(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,tW(e,n,r)}function tW(e,t,r){let n=`FIRESTORE (${Kv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw vA(n),new Error(n)}function Kn(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||tW(t,a,n)}function Qr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kt extends Af{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class PAe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Eo.UNAUTHENTICATED))}shutdown(){}}class MAe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class LAe{constructor(t){this.t=t,this.currentUser=Eo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Kn(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new lA;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new lA,t.enqueueRetryable(()=>a(this.currentUser))};const s=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{er("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(er("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new lA)}},0),s()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(er("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Kn(typeof n.accessToken=="string",31837,{l:n}),new rW(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Kn(t===null||typeof t=="string",2055,{h:t}),new Eo(t)}}class OAe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Eo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UAe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new OAe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Eo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jAe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tu(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){Kn(this.o===void 0,3512);const n=i=>{i.error!=null&&er("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,er("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>n(i))};const a=i=>{er("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):er("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new PU(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Kn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new PU(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HAe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=HAe(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=t.charAt(a[i]%62))}return n}}function vn(e,t){return e<t?-1:e>t?1:0}function EI(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),i=t.charAt(n);if(a!==i)return XN(a)===XN(i)?vn(a,i):XN(a)?1:-1}return vn(e.length,t.length)}const QAe=55296,VAe=57343;function XN(e){const t=e.charCodeAt(0);return t>=QAe&&t<=VAe}function gv(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="__name__";class zd{constructor(t,r,n){r===void 0?r=0:r>t.length&&Rr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Rr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return zd.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof zd?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const i=zd.compareSegments(t.get(a),r.get(a));if(i!==0)return i}return vn(t.length,r.length)}static compareSegments(t,r){const n=zd.isNumericId(t),a=zd.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?zd.extractNumericId(t).compare(zd.extractNumericId(r)):EI(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Zh.fromString(t.substring(4,t.length-2))}}class Ca extends zd{construct(t,r,n){return new Ca(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Kt(mt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Ca(r)}static emptyPath(){return new Ca([])}}const zAe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xs extends zd{construct(t,r,n){return new Xs(t,r,n)}static isValidIdentifier(t){return zAe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xs.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MU}static keyField(){return new Xs([MU])}static fromServerFormat(t){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new Kt(mt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Kt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Kt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,a+=2}else o==="`"?(s=!s,a++):o!=="."||s?(n+=o,a++):(i(),a++)}if(i(),s)throw new Kt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xs(r)}static emptyPath(){return new Xs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this.path=t}static fromPath(t){return new pr(Ca.fromString(t))}static fromName(t){return new pr(Ca.fromString(t).popFirst(5))}static empty(){return new pr(Ca.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ca.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Ca.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pr(new Ca(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nW(e,t,r){if(!r)throw new Kt(mt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function GAe(e,t,r,n){if(t===!0&&n===!0)throw new Kt(mt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function LU(e){if(!pr.isDocumentKey(e))throw new Kt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function OU(e){if(pr.isDocumentKey(e))throw new Kt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function aW(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function DS(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Rr(12329,{type:typeof e})}function Wo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Kt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=DS(e);throw new Kt(mt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function qAe(e,t){if(t<=0)throw new Kt(mt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(e,t){const r={typeString:e};return t&&(r.value=t),r}function wb(e,t){if(!aW(e))throw new Kt(mt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,i="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const s=e[n];if(a&&typeof s!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(i!==void 0&&s!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new Kt(mt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=-62135596800,jU=1e6;class Ar{static now(){return Ar.fromMillis(Date.now())}static fromDate(t){return Ar.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*jU);return new Ar(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<UU)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jU}_compareTo(t){return this.seconds===t.seconds?vn(this.nanoseconds,t.nanoseconds):vn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ar._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(wb(t,Ar._jsonSchema))return new Ar(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-UU;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ar._jsonSchemaVersion="firestore/timestamp/1.0",Ar._jsonSchema={type:qi("string",Ar._jsonSchemaVersion),seconds:qi("number"),nanoseconds:qi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{static fromTimestamp(t){return new jr(t)}static min(){return new jr(new Ar(0,0))}static max(){return new jr(new Ar(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=-1;function $Ae(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=jr.fromTimestamp(n===1e9?new Ar(r+1,0):new Ar(r,n));return new d0(a,pr.empty(),t)}function KAe(e){return new d0(e.readTime,e.key,Ny)}class d0{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new d0(jr.min(),pr.empty(),Ny)}static max(){return new d0(jr.max(),pr.empty(),Ny)}}function WAe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=pr.comparator(e.documentKey,t.documentKey),r!==0?r:vn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YAe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XAe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(e){if(e.code!==mt.FAILED_PRECONDITION||e.message!==YAe)throw e;er("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Rr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Et((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Et?r:Et.resolve(r)}catch(r){return Et.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Et.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Et.reject(r)}static resolve(t){return new Et((r,n)=>{r(t)})}static reject(t){return new Et((r,n)=>{n(t)})}static waitFor(t){return new Et((r,n)=>{let a=0,i=0,s=!1;t.forEach(o=>{++a,o.next(()=>{++i,s&&i===a&&r()},l=>n(l))}),s=!0,i===a&&r()})}static or(t){let r=Et.resolve(!1);for(const n of t)r=r.next(a=>a?Et.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,i)=>{n.push(r.call(this,a,i))}),this.waitFor(n)}static mapArray(t,r){return new Et((n,a)=>{const i=t.length,s=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(t[c]).next(u=>{s[c]=u,++o,o===i&&n(s)},u=>a(u))}})}static doWhile(t,r){return new Et((n,a)=>{const i=()=>{t()===!0?r().next(()=>{i()},a):n()};i()})}}function JAe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Yv(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}RS.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=-1;function PS(e){return e==null}function DE(e){return e===0&&1/e==-1/0}function ZAe(e){return typeof e=="number"&&Number.isInteger(e)&&!DE(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW="";function ehe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=HU(t)),t=the(e.get(r),t);return HU(t)}function the(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const i=e.charAt(a);switch(i){case"\0":r+="";break;case iW:r+="";break;default:r+=i}}return r}function HU(e){return e+iW+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function S0(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function sW(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,r){this.comparator=t,this.root=r||Ks.EMPTY}insert(t,r){return new Ya(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ks.BLACK,null,null))}remove(t){return new Ya(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ks.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new f2(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new f2(this.root,t,this.comparator,!1)}getReverseIterator(){return new f2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new f2(this.root,t,this.comparator,!0)}}class f2{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=r?n(t.key,r):1,r&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ks{constructor(t,r,n,a,i){this.key=t,this.value=r,this.color=n??Ks.RED,this.left=a??Ks.EMPTY,this.right=i??Ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,i){return new Ks(t??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const i=n(t,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(t,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ks.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return Ks.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Rr(27949);return t+(this.isRed()?0:1)}}Ks.EMPTY=null,Ks.RED=!0,Ks.BLACK=!1;Ks.EMPTY=new class{constructor(){this.size=0}get key(){throw Rr(57766)}get value(){throw Rr(16141)}get color(){throw Rr(16727)}get left(){throw Rr(29726)}get right(){throw Rr(36894)}copy(t,r,n,a,i){return this}insert(t,r,n){return new Ks(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.comparator=t,this.data=new Ya(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new VU(this.data.getIterator())}getIteratorFrom(t){return new VU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof cs)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new cs(this.comparator);return r.data=t,r}}class VU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t){this.fields=t,t.sort(Xs.comparator)}static empty(){return new ac([])}unionWith(t){let r=new cs(Xs.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new ac(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return gv(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new oW("Invalid base64 string: "+i):i}}(t);return new to(r)}static fromUint8Array(t){const r=function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i}(t);return new to(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}to.EMPTY_BYTE_STRING=new to("");const rhe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function f0(e){if(Kn(!!e,39018),typeof e=="string"){let t=0;const r=rhe.exec(e);if(Kn(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ei(e.seconds),nanos:Ei(e.nanos)}}function Ei(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function A0(e){return typeof e=="string"?to.fromBase64String(e):to.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW="server_timestamp",cW="__type__",uW="__previous_value__",dW="__local_write_time__";function PD(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[cW])==null?void 0:n.stringValue)===lW}function MS(e){const t=e.mapValue.fields[uW];return PD(t)?MS(t):t}function By(e){const t=f0(e.mapValue.fields[dW].timestampValue);return new Ar(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{constructor(t,r,n,a,i,s,o,l,c,u){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const RE="(default)";class ky{constructor(t,r){this.projectId=t,this.database=r||RE}static empty(){return new ky("","")}get isDefaultDatabase(){return this.database===RE}isEqual(t){return t instanceof ky&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fW="__type__",ahe="__max__",A2={mapValue:{}},AW="__vector__",PE="value";function h0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?PD(e)?4:she(e)?9007199254740991:ihe(e)?10:11:Rr(28295,{value:e})}function cf(e,t){if(e===t)return!0;const r=h0(e);if(r!==h0(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return By(e).isEqual(By(t));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=f0(a.timestampValue),o=f0(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,i){return A0(a.bytesValue).isEqual(A0(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,i){return Ei(a.geoPointValue.latitude)===Ei(i.geoPointValue.latitude)&&Ei(a.geoPointValue.longitude)===Ei(i.geoPointValue.longitude)}(e,t);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return Ei(a.integerValue)===Ei(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=Ei(a.doubleValue),o=Ei(i.doubleValue);return s===o?DE(s)===DE(o):isNaN(s)&&isNaN(o)}return!1}(e,t);case 9:return gv(e.arrayValue.values||[],t.arrayValue.values||[],cf);case 10:case 11:return function(a,i){const s=a.mapValue.fields||{},o=i.mapValue.fields||{};if(QU(s)!==QU(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!cf(s[l],o[l])))return!1;return!0}(e,t);default:return Rr(52216,{left:e})}}function Iy(e,t){return(e.values||[]).find(r=>cf(r,t))!==void 0}function vv(e,t){if(e===t)return 0;const r=h0(e),n=h0(t);if(r!==n)return vn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return vn(e.booleanValue,t.booleanValue);case 2:return function(i,s){const o=Ei(i.integerValue||i.doubleValue),l=Ei(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(e,t);case 3:return zU(e.timestampValue,t.timestampValue);case 4:return zU(By(e),By(t));case 5:return EI(e.stringValue,t.stringValue);case 6:return function(i,s){const o=A0(i),l=A0(s);return o.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){const o=i.split("/"),l=s.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=vn(o[c],l[c]);if(u!==0)return u}return vn(o.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){const o=vn(Ei(i.latitude),Ei(s.latitude));return o!==0?o:vn(Ei(i.longitude),Ei(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return GU(e.arrayValue,t.arrayValue);case 10:return function(i,s){var h,m,v,g;const o=i.fields||{},l=s.fields||{},c=(h=o[PE])==null?void 0:h.arrayValue,u=(m=l[PE])==null?void 0:m.arrayValue,A=vn(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((g=u==null?void 0:u.values)==null?void 0:g.length)||0);return A!==0?A:GU(c,u)}(e.mapValue,t.mapValue);case 11:return function(i,s){if(i===A2.mapValue&&s===A2.mapValue)return 0;if(i===A2.mapValue)return 1;if(s===A2.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let A=0;A<l.length&&A<u.length;++A){const h=EI(l[A],u[A]);if(h!==0)return h;const m=vv(o[l[A]],c[u[A]]);if(m!==0)return m}return vn(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Rr(23264,{he:r})}}function zU(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vn(e,t);const r=f0(e),n=f0(t),a=vn(r.seconds,n.seconds);return a!==0?a:vn(r.nanos,n.nanos)}function GU(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=vv(r[a],n[a]);if(i)return i}return vn(r.length,n.length)}function xv(e){return _I(e)}function _I(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=f0(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return A0(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return pr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=_I(i);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const s of n)i?i=!1:a+=",",a+=`${s}:${_I(r.fields[s])}`;return a+"}"}(e.mapValue):Rr(61005,{value:e})}function HC(e){switch(h0(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=MS(e);return t?16+HC(t):16;case 5:return 2*e.stringValue.length;case 6:return A0(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,i)=>a+HC(i),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return S0(n.fields,(i,s)=>{a+=i.length+HC(s)}),a}(e.mapValue);default:throw Rr(13486,{value:e})}}function qU(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function SI(e){return!!e&&"integerValue"in e}function MD(e){return!!e&&"arrayValue"in e}function $U(e){return!!e&&"nullValue"in e}function KU(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function QC(e){return!!e&&"mapValue"in e}function ihe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[fW])==null?void 0:n.stringValue)===AW}function Z1(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return S0(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Z1(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Z1(e.arrayValue.values[r]);return t}return{...e}}function she(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ahe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t){this.value=t}static empty(){return new xl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!QC(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Z1(r)}setAll(t){let r=Xs.emptyPath(),n={},a=[];t.forEach((s,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}s?n[o.lastSegment()]=Z1(s):a.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(t){const r=this.field(t.popLast());QC(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return cf(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];QC(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){S0(r,(a,i)=>t[a]=i);for(const a of n)delete t[a]}clone(){return new xl(Z1(this.value))}}function hW(e){const t=[];return S0(e.fields,(r,n)=>{const a=new Xs([r]);if(QC(n)){const i=hW(n.mapValue).fields;if(i.length===0)t.push(a);else for(const s of i)t.push(a.child(s))}else t.push(a)}),new ac(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t,r,n,a,i,s,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new No(t,0,jr.min(),jr.min(),jr.min(),xl.empty(),0)}static newFoundDocument(t,r,n,a){return new No(t,1,r,jr.min(),n,a,0)}static newNoDocument(t,r){return new No(t,2,r,jr.min(),jr.min(),xl.empty(),0)}static newUnknownDocument(t,r){return new No(t,3,r,jr.min(),jr.min(),xl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(jr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof No&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new No(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,r){this.position=t,this.inclusive=r}}function WU(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const i=t[a],s=e.position[a];if(i.field.isKeyField()?n=pr.comparator(pr.fromName(s.referenceValue),r.key):n=vv(s,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function YU(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!cf(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t,r="asc"){this.field=t,this.dir=r}}function ohe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{}class Gi extends pW{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new che(t,r,n):r==="array-contains"?new fhe(t,n):r==="in"?new Ahe(t,n):r==="not-in"?new hhe(t,n):r==="array-contains-any"?new phe(t,n):new Gi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new uhe(t,n):new dhe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(vv(r,this.value)):r!==null&&h0(this.value)===h0(r)&&this.matchesComparison(vv(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Rr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class td extends pW{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new td(t,r)}matches(t){return mW(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mW(e){return e.op==="and"}function gW(e){return lhe(e)&&mW(e)}function lhe(e){for(const t of e.filters)if(t instanceof td)return!1;return!0}function TI(e){if(e instanceof Gi)return e.field.canonicalString()+e.op.toString()+xv(e.value);if(gW(e))return e.filters.map(t=>TI(t)).join(",");{const t=e.filters.map(r=>TI(r)).join(",");return`${e.op}(${t})`}}function vW(e,t){return e instanceof Gi?function(n,a){return a instanceof Gi&&n.op===a.op&&n.field.isEqual(a.field)&&cf(n.value,a.value)}(e,t):e instanceof td?function(n,a){return a instanceof td&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((i,s,o)=>i&&vW(s,a.filters[o]),!0):!1}(e,t):void Rr(19439)}function xW(e){return e instanceof Gi?function(r){return`${r.field.canonicalString()} ${r.op} ${xv(r.value)}`}(e):e instanceof td?function(r){return r.op.toString()+" {"+r.getFilters().map(xW).join(" ,")+"}"}(e):"Filter"}class che extends Gi{constructor(t,r,n){super(t,r,n),this.key=pr.fromName(n.referenceValue)}matches(t){const r=pr.comparator(t.key,this.key);return this.matchesComparison(r)}}class uhe extends Gi{constructor(t,r){super(t,"in",r),this.keys=yW("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class dhe extends Gi{constructor(t,r){super(t,"not-in",r),this.keys=yW("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function yW(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>pr.fromName(n.referenceValue))}class fhe extends Gi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return MD(r)&&Iy(r.arrayValue,this.value)}}class Ahe extends Gi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Iy(this.value.arrayValue,r)}}class hhe extends Gi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Iy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Iy(this.value.arrayValue,r)}}class phe extends Gi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!MD(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Iy(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mhe{constructor(t,r=null,n=[],a=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function XU(e,t=null,r=[],n=[],a=null,i=null,s=null){return new mhe(e,t,r,n,a,i,s)}function LD(e){const t=Qr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>TI(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),PS(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>xv(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>xv(n)).join(",")),t.Te=r}return t.Te}function OD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!ohe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!vW(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!YU(e.startAt,t.startAt)&&YU(e.endAt,t.endAt)}function NI(e){return pr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t,r=null,n=[],a=[],i=null,s="F",o=null,l=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ghe(e,t,r,n,a,i,s,o){return new Xv(e,t,r,n,a,i,s,o)}function LS(e){return new Xv(e)}function JU(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function bW(e){return e.collectionGroup!==null}function ey(e){const t=Qr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),r.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new cs(Xs.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(t).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new Fy(i,n))}),r.has(Xs.keyField().canonicalString())||t.Ie.push(new Fy(Xs.keyField(),n))}return t.Ie}function tf(e){const t=Qr(e);return t.Ee||(t.Ee=vhe(t,ey(e))),t.Ee}function vhe(e,t){if(e.limitType==="F")return XU(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new Fy(a.field,i)});const r=e.endAt?new ME(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new ME(e.startAt.position,e.startAt.inclusive):null;return XU(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function BI(e,t){const r=e.filters.concat([t]);return new Xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function LE(e,t,r){return new Xv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function OS(e,t){return OD(tf(e),tf(t))&&e.limitType===t.limitType}function wW(e){return`${LD(tf(e))}|lt:${e.limitType}`}function Tg(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>xW(a)).join(", ")}]`),PS(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>xv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>xv(a)).join(",")),`Target(${n})`}(tf(e))}; limitType=${e.limitType})`}function US(e,t){return t.isFoundDocument()&&function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):pr.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,a){for(const i of ey(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(s,o,l){const c=WU(s,o,l);return s.inclusive?c<=0:c<0}(n.startAt,ey(n),a)||n.endAt&&!function(s,o,l){const c=WU(s,o,l);return s.inclusive?c>=0:c>0}(n.endAt,ey(n),a))}(e,t)}function xhe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function CW(e){return(t,r)=>{let n=!1;for(const a of ey(e)){const i=yhe(a,t,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function yhe(e,t,r){const n=e.field.isKeyField()?pr.comparator(t.key,r.key):function(i,s,o){const l=s.data.field(i),c=o.data.field(i);return l!==null&&c!==null?vv(l,c):Rr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Rr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,t))return i}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return void(a[i]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){S0(this.inner,(r,n)=>{for(const[a,i]of n)t(a,i)})}isEmpty(){return sW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bhe=new Ya(pr.comparator);function xA(){return bhe}const EW=new Ya(pr.comparator);function I1(...e){let t=EW;for(const r of e)t=t.insert(r.key,r);return t}function _W(e){let t=EW;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function xp(){return ty()}function SW(){return ty()}function ty(){return new Am(e=>e.toString(),(e,t)=>e.isEqual(t))}const whe=new Ya(pr.comparator),Che=new cs(pr.comparator);function xn(...e){let t=Che;for(const r of e)t=t.add(r);return t}const Ehe=new cs(vn);function _he(){return Ehe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:DE(t)?"-0":t}}function TW(e){return{integerValue:""+e}}function She(e,t){return ZAe(t)?TW(t):UD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this._=void 0}}function The(e,t,r){return e instanceof Dy?function(a,i){const s={fields:{[cW]:{stringValue:lW},[dW]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&PD(i)&&(i=MS(i)),i&&(s.fields[uW]=i),{mapValue:s}}(r,t):e instanceof yv?BW(e,t):e instanceof Ry?kW(e,t):function(a,i){const s=NW(a,i),o=ZU(s)+ZU(a.Ae);return SI(s)&&SI(a.Ae)?TW(o):UD(a.serializer,o)}(e,t)}function Nhe(e,t,r){return e instanceof yv?BW(e,t):e instanceof Ry?kW(e,t):r}function NW(e,t){return e instanceof OE?function(n){return SI(n)||function(i){return!!i&&"doubleValue"in i}(n)}(t)?t:{integerValue:0}:null}class Dy extends jS{}class yv extends jS{constructor(t){super(),this.elements=t}}function BW(e,t){const r=IW(t);for(const n of e.elements)r.some(a=>cf(a,n))||r.push(n);return{arrayValue:{values:r}}}class Ry extends jS{constructor(t){super(),this.elements=t}}function kW(e,t){let r=IW(t);for(const n of e.elements)r=r.filter(a=>!cf(a,n));return{arrayValue:{values:r}}}class OE extends jS{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function ZU(e){return Ei(e.integerValue||e.doubleValue)}function IW(e){return MD(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(t,r){this.field=t,this.transform=r}}function Bhe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof yv&&a instanceof yv||n instanceof Ry&&a instanceof Ry?gv(n.elements,a.elements,cf):n instanceof OE&&a instanceof OE?cf(n.Ae,a.Ae):n instanceof Dy&&a instanceof Dy}(e.transform,t.transform)}class khe{constructor(t,r){this.version=t,this.transformResults=r}}class Yo{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Yo}static exists(t){return new Yo(void 0,t)}static updateTime(t){return new Yo(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function VC(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class HS{}function DW(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new QS(e.key,Yo.none()):new Cb(e.key,e.data,Yo.none());{const r=e.data,n=xl.empty();let a=new cs(Xs.comparator);for(let i of t.fields)if(!a.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),a=a.add(i)}return new T0(e.key,n,new ac(a.toArray()),Yo.none())}}function Ihe(e,t,r){e instanceof Cb?function(a,i,s){const o=a.value.clone(),l=tj(a.fieldTransforms,i,s.transformResults);o.setAll(l),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(e,t,r):e instanceof T0?function(a,i,s){if(!VC(a.precondition,i))return void i.convertToUnknownDocument(s.version);const o=tj(a.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(RW(a)),l.setAll(o),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(e,t,r):function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,r)}function ry(e,t,r,n){return e instanceof Cb?function(i,s,o,l){if(!VC(i.precondition,s))return o;const c=i.value.clone(),u=rj(i.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(e,t,r,n):e instanceof T0?function(i,s,o,l){if(!VC(i.precondition,s))return o;const c=rj(i.fieldTransforms,l,s),u=s.data;return u.setAll(RW(i)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(A=>A.field))}(e,t,r,n):function(i,s,o){return VC(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(e,t,r)}function Fhe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),i=NW(n.transform,a||null);i!=null&&(r===null&&(r=xl.empty()),r.set(n.field,i))}return r||null}function ej(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&gv(n,a,(i,s)=>Bhe(i,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Cb extends HS{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class T0 extends HS{constructor(t,r,n,a,i=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RW(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function tj(e,t,r){const n=new Map;Kn(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const i=e[a],s=i.transform,o=t.data.field(i.field);n.set(i.field,Nhe(s,o,r[a]))}return n}function rj(e,t,r){const n=new Map;for(const a of e){const i=a.transform,s=r.data.field(a.field);n.set(a.field,The(i,s,t))}return n}class QS extends HS{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dhe extends HS{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(t.key)&&Ihe(i,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=ry(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=ry(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=SW();return this.mutations.forEach(a=>{const i=t.get(a.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=r.has(a.key)?null:o;const l=DW(s,o);l!==null&&n.set(a.key,l),s.isValidDocument()||s.convertToNoDocument(jr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),xn())}isEqual(t){return this.batchId===t.batchId&&gv(this.mutations,t.mutations,(r,n)=>ej(r,n))&&gv(this.baseMutations,t.baseMutations,(r,n)=>ej(r,n))}}class jD{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){Kn(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return whe}();const i=t.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,n[s].version);return new jD(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Phe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mhe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji,Tn;function Lhe(e){switch(e){case mt.OK:return Rr(64938);case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Rr(15467,{code:e})}}function PW(e){if(e===void 0)return vA("GRPC error has no .code"),mt.UNKNOWN;switch(e){case ji.OK:return mt.OK;case ji.CANCELLED:return mt.CANCELLED;case ji.UNKNOWN:return mt.UNKNOWN;case ji.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case ji.INTERNAL:return mt.INTERNAL;case ji.UNAVAILABLE:return mt.UNAVAILABLE;case ji.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case ji.NOT_FOUND:return mt.NOT_FOUND;case ji.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case ji.ABORTED:return mt.ABORTED;case ji.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case ji.DATA_LOSS:return mt.DATA_LOSS;default:return Rr(39323,{code:e})}}(Tn=ji||(ji={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ohe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uhe=new Zh([4294967295,4294967295],0);function nj(e){const t=Ohe().encode(e),r=new WK;return r.update(t),new Uint8Array(r.digest())}function aj(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Zh([r,n],0),new Zh([a,i],0)]}class HD{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new F1(`Invalid padding: ${r}`);if(n<0)throw new F1(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new F1(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new F1(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Zh.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(Zh.fromNumber(n)));return a.compare(Uhe)===1&&(a=new Zh([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=nj(t),[n,a]=aj(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);if(!this.we(s))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new HD(i,a,r);return n.forEach(o=>s.insert(o)),s}insert(t){if(this.ge===0)return;const r=nj(t),[n,a]=aj(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);this.Se(s)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class F1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,r,n,a,i){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,Eb.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new VS(jr.min(),a,new Ya(vn),xA(),xn())}}class Eb{constructor(t,r,n,a,i){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new Eb(n,r,xn(),xn(),xn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class MW{constructor(t,r){this.targetId=t,this.Ce=r}}class LW{constructor(t,r,n=to.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class ij{constructor(){this.ve=0,this.Fe=sj(),this.Me=to.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=xn(),r=xn(),n=xn();return this.Fe.forEach((a,i)=>{switch(i){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Rr(38017,{changeType:i})}}),new Eb(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=sj()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jhe{constructor(t){this.Ge=t,this.ze=new Map,this.je=xA(),this.Je=h2(),this.He=h2(),this.Ye=new Ya(vn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Rr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const i=a.target;if(NI(i))if(n===0){const s=new pr(i.path);this.et(r,s,No.newNoDocument(s,jr.min()))}else Kn(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const o=this.ut(t),l=o?this.ct(o,t,s):1;if(l!==0){this.it(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,c)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let s,o;try{s=A0(n).toUint8Array()}catch(l){if(l instanceof oW)return mv("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new HD(s,a,i)}catch(l){return mv(l instanceof F1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(i=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;t.mightContain(o)||(this.et(r,i,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((i,s)=>{const o=this.ot(s);if(o){if(i.current&&NI(o.target)){const l=new pr(o.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,No.newNoDocument(l,t))}i.Be&&(r.set(s,i.ke()),i.qe())}});let n=xn();this.He.forEach((i,s)=>{let o=!0;s.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.je.forEach((i,s)=>s.setReadTime(t));const a=new VS(t,r,this.Ye,this.je,n);return this.je=xA(),this.Je=h2(),this.He=h2(),this.Ye=new Ya(vn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new ij,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new cs(vn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new cs(vn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||er("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new ij),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function h2(){return new Ya(pr.comparator)}function sj(){return new Ya(pr.comparator)}const Hhe={asc:"ASCENDING",desc:"DESCENDING"},Qhe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vhe={and:"AND",or:"OR"};class zhe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function kI(e,t){return e.useProto3Json||PS(t)?t:{value:t}}function UE(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function OW(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ghe(e,t){return UE(e,t.toTimestamp())}function rf(e){return Kn(!!e,49232),jr.fromTimestamp(function(r){const n=f0(r);return new Ar(n.seconds,n.nanos)}(e))}function QD(e,t){return II(e,t).canonicalString()}function II(e,t){const r=function(a){return new Ca(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function UW(e){const t=Ca.fromString(e);return Kn(zW(t),10190,{key:t.toString()}),t}function FI(e,t){return QD(e.databaseId,t.path)}function JN(e,t){const r=UW(t);if(r.get(1)!==e.databaseId.projectId)throw new Kt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Kt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new pr(HW(r))}function jW(e,t){return QD(e.databaseId,t)}function qhe(e){const t=UW(e);return t.length===4?Ca.emptyPath():HW(t)}function DI(e){return new Ca(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function HW(e){return Kn(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function oj(e,t,r){return{name:FI(e,t),fields:r.value.mapValue.fields}}function $he(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Rr(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Kn(u===void 0||typeof u=="string",58123),to.fromBase64String(u||"")):(Kn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),to.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(c){const u=c.code===void 0?mt.UNKNOWN:PW(c.code);return new Kt(u,c.message||"")}(s);r=new LW(n,a,i,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=JN(e,n.document.name),i=rf(n.document.updateTime),s=n.document.createTime?rf(n.document.createTime):jr.min(),o=new xl({mapValue:{fields:n.document.fields}}),l=No.newFoundDocument(a,i,s,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new zC(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=JN(e,n.document),i=n.readTime?rf(n.readTime):jr.min(),s=No.newNoDocument(a,i),o=n.removedTargetIds||[];r=new zC([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=JN(e,n.document),i=n.removedTargetIds||[];r=new zC([],i,a,null)}else{if(!("filter"in t))return Rr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,s=new Mhe(a,i),o=n.targetId;r=new MW(o,s)}}return r}function Khe(e,t){let r;if(t instanceof Cb)r={update:oj(e,t.key,t.value)};else if(t instanceof QS)r={delete:FI(e,t.key)};else if(t instanceof T0)r={update:oj(e,t.key,t.data),updateMask:n0e(t.fieldMask)};else{if(!(t instanceof Dhe))return Rr(16599,{Vt:t.type});r={verify:FI(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(i,s){const o=s.transform;if(o instanceof Dy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof yv)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ry)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof OE)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Rr(20930,{transform:s.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:Ghe(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Rr(27497)}(e,t.precondition)),r}function Whe(e,t){return e&&e.length>0?(Kn(t!==void 0,14353),e.map(r=>function(a,i){let s=a.updateTime?rf(a.updateTime):rf(i);return s.isEqual(jr.min())&&(s=rf(i)),new khe(s,a.transformResults||[])}(r,t))):[]}function Yhe(e,t){return{documents:[jW(e,t.path)]}}function Xhe(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=jW(e,a);const i=function(c){if(c.length!==0)return VW(td.create(c,"and"))}(t.filters);i&&(r.structuredQuery.where=i);const s=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Ng(h.field),direction:e0e(h.dir)}}(u))}(t.orderBy);s&&(r.structuredQuery.orderBy=s);const o=kI(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ft:r,parent:a}}function Jhe(e){let t=qhe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Kn(n===1,65062);const u=r.from[0];u.allDescendants?a=u.collectionId:t=t.child(u.collectionId)}let i=[];r.where&&(i=function(A){const h=QW(A);return h instanceof td&&gW(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(A){return A.map(h=>function(v){return new Fy(Bg(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(A){let h;return h=typeof A=="object"?A.value:A,PS(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(A){const h=!!A.before,m=A.values||[];return new ME(m,h)}(r.startAt));let c=null;return r.endAt&&(c=function(A){const h=!A.before,m=A.values||[];return new ME(m,h)}(r.endAt)),ghe(t,a,s,i,o,"F",l,c)}function Zhe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function QW(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Bg(r.unaryFilter.field);return Gi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Bg(r.unaryFilter.field);return Gi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bg(r.unaryFilter.field);return Gi.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Bg(r.unaryFilter.field);return Gi.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rr(61313);default:return Rr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Gi.create(Bg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rr(58110);default:return Rr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return td.create(r.compositeFilter.filters.map(n=>QW(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Rr(1026)}}(r.compositeFilter.op))}(e):Rr(30097,{filter:e})}function e0e(e){return Hhe[e]}function t0e(e){return Qhe[e]}function r0e(e){return Vhe[e]}function Ng(e){return{fieldPath:e.canonicalString()}}function Bg(e){return Xs.fromServerFormat(e.fieldPath)}function VW(e){return e instanceof Gi?function(r){if(r.op==="=="){if(KU(r.value))return{unaryFilter:{field:Ng(r.field),op:"IS_NAN"}};if($U(r.value))return{unaryFilter:{field:Ng(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(KU(r.value))return{unaryFilter:{field:Ng(r.field),op:"IS_NOT_NAN"}};if($U(r.value))return{unaryFilter:{field:Ng(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ng(r.field),op:t0e(r.op),value:r.value}}}(e):e instanceof td?function(r){const n=r.getFilters().map(a=>VW(a));return n.length===1?n[0]:{compositeFilter:{op:r0e(r.op),filters:n}}}(e):Rr(54877,{filter:e})}function n0e(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function zW(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,r,n,a,i=jr.min(),s=jr.min(),o=to.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new Qh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0e{constructor(t){this.yt=t}}function i0e(e){const t=Jhe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?LE(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0e{constructor(){this.Cn=new o0e}addToCollectionParentIndex(t,r){return this.Cn.add(r),Et.resolve()}getCollectionParents(t,r){return Et.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Et.resolve()}deleteFieldIndex(t,r){return Et.resolve()}deleteAllFieldIndexes(t){return Et.resolve()}createTargetIndexes(t,r){return Et.resolve()}getDocumentsMatchingTarget(t,r){return Et.resolve(null)}getIndexType(t,r){return Et.resolve(0)}getFieldIndexes(t,r){return Et.resolve([])}getNextCollectionGroupToUpdate(t){return Et.resolve(null)}getMinOffset(t,r){return Et.resolve(d0.min())}getMinOffsetFromCollectionGroup(t,r){return Et.resolve(d0.min())}updateCollectionGroup(t,r,n){return Et.resolve()}updateIndexEntries(t,r){return Et.resolve()}}class o0e{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new cs(Ca.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new cs(Ca.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GW=41943040;class gl{static withCacheSize(t){return new gl(t,gl.DEFAULT_COLLECTION_PERCENTILE,gl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gl.DEFAULT_COLLECTION_PERCENTILE=10,gl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gl.DEFAULT=new gl(GW,gl.DEFAULT_COLLECTION_PERCENTILE,gl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gl.DISABLED=new gl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new bv(0)}static cr(){return new bv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="LruGarbageCollector",l0e=1048576;function uj([e,t],[r,n]){const a=vn(e,r);return a===0?vn(t,n):a}class c0e{constructor(t){this.Ir=t,this.buffer=new cs(uj),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();uj(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class u0e{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){er(cj,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Yv(r)?er(cj,"Ignoring IndexedDB error during garbage collection: ",r):await Wv(r)}await this.Vr(3e5)})}}class d0e{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Et.resolve(RS.ce);const n=new c0e(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(er("LruGarbageCollector","Garbage collection skipped; disabled"),Et.resolve(lj)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(er("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lj):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,i,s,o,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(er("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,s=Date.now(),this.nthSequenceNumber(t,a))).next(A=>(n=A,o=Date.now(),this.removeTargets(t,n,r))).next(A=>(i=A,l=Date.now(),this.removeOrphanedDocuments(t,n))).next(A=>(c=Date.now(),Sg()<=gn.DEBUG&&er("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${a} in `+(o-s)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${A} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Et.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:A})))}}function f0e(e,t){return new d0e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0e{constructor(){this.changes=new Am(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,No.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Et.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0e{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0e{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&ry(n.mutation,a,ac.empty(),Ar.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,xn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=xn()){const a=xp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(i=>{let s=I1();return i.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,r){const n=xp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,xn()))}populateOverlays(t,r,n){const a=[];return n.forEach(i=>{r.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(t,a).next(i=>{i.forEach((s,o)=>{r.set(s,o)})})}computeViews(t,r,n,a){let i=xA();const s=ty(),o=function(){return ty()}();return r.forEach((l,c)=>{const u=n.get(c.key);a.has(c.key)&&(u===void 0||u.mutation instanceof T0)?i=i.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),ry(u.mutation,c,u.mutation.getFieldMask(),Ar.now())):s.set(c.key,ac.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>s.set(c,u)),r.forEach((c,u)=>o.set(c,new h0e(u,s.get(c)??null))),o))}recalculateAndSaveOverlays(t,r){const n=ty();let a=new Ya((s,o)=>s-o),i=xn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(s=>{for(const o of s)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||ac.empty();u=o.applyToLocalView(c,u),n.set(l,u);const A=(a.get(o.batchId)||xn()).add(l);a=a.insert(o.batchId,A)})}).next(()=>{const s=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,A=SW();u.forEach(h=>{if(!i.has(h)){const m=DW(r.get(h),n.get(h));m!==null&&A.set(h,m),i=i.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(t,c,A))}return Et.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(s){return pr.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):bW(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-i.size):Et.resolve(xp());let o=Ny,l=i;return s.next(c=>Et.forEach(c,(u,A)=>(o<A.largestBatchId&&(o=A.largestBatchId),i.get(u)?Et.resolve():this.remoteDocumentCache.getEntry(t,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,xn())).next(u=>({batchId:o,changes:_W(u)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new pr(r)).next(n=>{let a=I1();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const i=r.collectionGroup;let s=I1();return this.indexManager.getCollectionParents(t,i).next(o=>Et.forEach(o,l=>{const c=function(A,h){return new Xv(h,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,n,a).next(u=>{u.forEach((A,h)=>{s=s.insert(A,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,i,a))).next(s=>{i.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,No.newInvalidDocument(u)))});let o=I1();return s.forEach((l,c)=>{const u=i.get(l);u!==void 0&&ry(u.mutation,c,ac.empty(),Ar.now()),US(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0e{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Et.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:rf(a.createTime)}}(r)),Et.resolve()}getNamedQuery(t,r){return Et.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:i0e(a.bundledQuery),readTime:rf(a.readTime)}}(r)),Et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0e{constructor(){this.overlays=new Ya(pr.comparator),this.qr=new Map}getOverlay(t,r){return Et.resolve(this.overlays.get(r))}getOverlays(t,r){const n=xp();return Et.forEach(r,a=>this.getOverlay(t,a).next(i=>{i!==null&&n.set(a,i)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,i)=>{this.St(t,r,i)}),Et.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),Et.resolve()}getOverlaysForCollection(t,r,n){const a=xp(),i=r.length+1,s=new pr(r.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&a.set(l.getKey(),l)}return Et.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let i=new Ya((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=xp(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=xp(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=a)););return Et.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const s=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Phe(r,n));let i=this.qr.get(r);i===void 0&&(i=xn(),this.qr.set(r,i)),this.qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0e{constructor(){this.sessionToken=to.EMPTY_BYTE_STRING}getSessionToken(t){return Et.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Qr=new cs(_s.$r),this.Ur=new cs(_s.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new _s(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new _s(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new pr(new Ca([])),n=new _s(r,t),a=new _s(r,t+1),i=[];return this.Ur.forEachInRange([n,a],s=>{this.Gr(s),i.push(s.key)}),i}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new pr(new Ca([])),n=new _s(r,t),a=new _s(r,t+1);let i=xn();return this.Ur.forEachInRange([n,a],s=>{i=i.add(s.key)}),i}containsKey(t){const r=new _s(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class _s{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return pr.comparator(t.key,r.key)||vn(t.Yr,r.Yr)}static Kr(t,r){return vn(t.Yr,r.Yr)||pr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0e{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new cs(_s.$r)}checkEmpty(t){return Et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Rhe(i,r,n,a);this.mutationQueue.push(s);for(const o of a)this.Zr=this.Zr.add(new _s(o.key,i)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Et.resolve(s)}lookupMutationBatch(t,r){return Et.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),i=a<0?0:a;return Et.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Et.resolve(this.mutationQueue.length===0?RD:this.tr-1)}getAllMutationBatches(t){return Et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new _s(r,0),a=new _s(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,a],s=>{const o=this.Xr(s.Yr);i.push(o)}),Et.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new cs(vn);return r.forEach(a=>{const i=new _s(a,0),s=new _s(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,s],o=>{n=n.add(o.Yr)})}),Et.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let i=n;pr.isDocumentKey(i)||(i=i.child(""));const s=new _s(new pr(i),0);let o=new cs(vn);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===a&&(o=o.add(l.Yr)),!0)},s),Et.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){Kn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Et.forEach(r.mutations,a=>{const i=new _s(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new _s(r,0),a=this.Zr.firstAfterOrEqual(n);return Et.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Et.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0e{constructor(t){this.ri=t,this.docs=function(){return new Ya(pr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Et.resolve(n?n.document.mutableCopy():No.newInvalidDocument(r))}getEntries(t,r){let n=xA();return r.forEach(a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():No.newInvalidDocument(a))}),Et.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let i=xA();const s=r.path,o=new pr(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||WAe(KAe(u),n)<=0||(a.has(u.key)||US(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Et.resolve(i)}getAllFromCollectionGroup(t,r,n,a){Rr(9500)}ii(t,r){return Et.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new b0e(this)}getSize(t){return Et.resolve(this.size)}}class b0e extends A0e{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Et.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0e{constructor(t){this.persistence=t,this.si=new Am(r=>LD(r),OD),this.lastRemoteSnapshotVersion=jr.min(),this.highestTargetId=0,this.oi=0,this._i=new VD,this.targetCount=0,this.ai=bv.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Et.resolve()}getLastRemoteSnapshotVersion(t){return Et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Et.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Et.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Et.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new bv(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Et.resolve()}updateTargetData(t,r){return this.Pr(r),Et.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Et.resolve()}removeTargets(t,r,n){let a=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Et.waitFor(i).next(()=>a)}getTargetCount(t){return Et.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Et.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Et.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach(s=>{i.push(a.markPotentiallyOrphaned(t,s))}),Et.waitFor(i)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Et.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Et.resolve(n)}containsKey(t,r){return Et.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(t,r){this.ui={},this.overlays={},this.ci=new RS(0),this.li=!1,this.li=!0,this.hi=new v0e,this.referenceDelegate=t(this),this.Pi=new w0e(this),this.indexManager=new s0e,this.remoteDocumentCache=function(a){return new y0e(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new a0e(r),this.Ii=new m0e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new g0e,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new x0e(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){er("MemoryPersistence","Starting transaction:",t);const a=new C0e(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(t,r){return Et.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class C0e extends XAe{constructor(t){super(),this.currentSequenceNumber=t}}class zD{constructor(t){this.persistence=t,this.Ri=new VD,this.Vi=null}static mi(t){return new zD(t)}get fi(){if(this.Vi)return this.Vi;throw Rr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Et.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Et.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Et.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Et.forEach(this.fi,n=>{const a=pr.fromPath(n);return this.gi(t,a).next(i=>{i||r.removeEntry(a,jr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Et.or([()=>Et.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class jE{constructor(t,r){this.persistence=t,this.pi=new Am(n=>ehe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=f0e(this,r)}static mi(t,r){return new jE(t,r)}Ei(){}di(t){return Et.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Et.forEach(this.pi,(n,a)=>this.br(t,n,a).next(i=>i?Et.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(t,s=>this.br(t,s,r).next(o=>{o||(n++,i.removeEntry(s,jr.min()))})).next(()=>i.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Et.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Et.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Et.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Et.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=HC(t.data.value)),r}br(t,r,n){return Et.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Et.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=xn(),a=xn();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new GD(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0e{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return eue()?8:JAe(Lo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const i={result:null};return this.ys(t,r).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ws(t,r,a,n).next(s=>{i.result=s})}).next(()=>{if(i.result)return;const s=new E0e;return this.Ss(t,r,s).next(o=>{if(i.result=o,this.Vs)return this.bs(t,r,s,o.size)})}).next(()=>i.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(Sg()<=gn.DEBUG&&er("QueryEngine","SDK will not create cache indexes for query:",Tg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Et.resolve()):(Sg()<=gn.DEBUG&&er("QueryEngine","Query:",Tg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Sg()<=gn.DEBUG&&er("QueryEngine","The SDK decides to create cache indexes for query:",Tg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,tf(r))):Et.resolve())}ys(t,r){if(JU(r))return Et.resolve(null);let n=tf(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=LE(r,null,"F"),n=tf(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(i=>{const s=xn(...i);return this.ps.getDocuments(t,s).next(o=>this.indexManager.getMinOffset(t,n).next(l=>{const c=this.Ds(r,o);return this.Cs(r,c,s,l.readTime)?this.ys(t,LE(r,null,"F")):this.vs(t,c,r,l)}))})))}ws(t,r,n,a){return JU(r)||a.isEqual(jr.min())?Et.resolve(null):this.ps.getDocuments(t,n).next(i=>{const s=this.Ds(r,i);return this.Cs(r,s,n,a)?Et.resolve(null):(Sg()<=gn.DEBUG&&er("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Tg(r)),this.vs(t,s,r,$Ae(a,Ny)).next(o=>o))})}Ds(t,r){let n=new cs(CW(t));return r.forEach((a,i)=>{US(t,i)&&(n=n.add(i))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const i=t.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(t,r,n){return Sg()<=gn.DEBUG&&er("QueryEngine","Using full collection scan to execute query:",Tg(r)),this.ps.getDocumentsMatchingQuery(t,r,d0.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(i=>(r.forEach(s=>{i=i.insert(s.key,s)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="LocalStore",S0e=3e8;class T0e{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new Ya(vn),this.xs=new Am(i=>LD(i),OD),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new p0e(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function N0e(e,t,r,n){return new T0e(e,t,r,n)}async function $W(e,t){const r=Qr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(i=>(a=i,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const s=[],o=[];let l=xn();for(const c of a){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({Ls:c,removedBatchIds:s,addedBatchIds:o}))})})}function B0e(e,t){const r=Qr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const A=c.batch,h=A.keys();let m=Et.resolve();return h.forEach(v=>{m=m.next(()=>u.getEntry(l,v)).next(g=>{const y=c.docVersions.get(v);Kn(y!==null,48541),g.version.compareTo(y)<0&&(A.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,A))}(r,n,t,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=xn();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function KW(e){const t=Qr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function k0e(e,t){const r=Qr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((u,A)=>{const h=a.get(A);if(!h)return;o.push(r.Pi.removeMatchingKeys(i,u.removedDocuments,A).next(()=>r.Pi.addMatchingKeys(i,u.addedDocuments,A)));let m=h.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(A)!==null?m=m.withResumeToken(to.EMPTY_BYTE_STRING,jr.min()).withLastLimboFreeSnapshotVersion(jr.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,n)),a=a.insert(A,m),function(g,y,w){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=S0e?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,m,u)&&o.push(r.Pi.updateTargetData(i,m))});let l=xA(),c=xn();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(I0e(i,s,t.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!n.isEqual(jr.min())){const u=r.Pi.getLastRemoteSnapshotVersion(i).next(A=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Et.waitFor(o).next(()=>s.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.Ms=a,i))}function I0e(e,t,r){let n=xn(),a=xn();return r.forEach(i=>n=n.add(i)),t.getEntries(e,n).next(i=>{let s=xA();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(jr.min())?(t.removeEntry(o,l.readTime),s=s.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),s=s.insert(o,l)):er(qD,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:s,qs:a}})}function F0e(e,t){const r=Qr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=RD),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function D0e(e,t){const r=Qr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(i=>i?(a=i,Et.resolve(a)):r.Pi.allocateTargetId(n).next(s=>(a=new Qh(t,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function RI(e,t,r){const n=Qr(e),a=n.Ms.get(t),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,s=>n.persistence.referenceDelegate.removeTarget(s,a))}catch(s){if(!Yv(s))throw s;er(qD,`Failed to update sequence numbers for target ${t}: ${s}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function dj(e,t,r){const n=Qr(e);let a=jr.min(),i=xn();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const A=Qr(l),h=A.xs.get(u);return h!==void 0?Et.resolve(A.Ms.get(h)):A.Pi.getTargetData(c,u)}(n,s,tf(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{i=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,t,r?a:jr.min(),r?i:xn())).next(o=>(R0e(n,xhe(t),o),{documents:o,Qs:i})))}function R0e(e,t,r){let n=e.Os.get(t)||jr.min();r.forEach((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),e.Os.set(t,n)}class fj{constructor(){this.activeTargetIds=_he()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class P0e{constructor(){this.Mo=new fj,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new fj,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0e{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="ConnectivityMonitor";class hj{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){er(Aj,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){er(Aj,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p2=null;function PI(){return p2===null?p2=function(){return 268435456+Math.round(2147483648*Math.random())}():p2++,"0x"+p2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="RestConnection",L0e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O0e{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===RE?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,i){const s=PI(),o=this.zo(t,r.toUriEncodedString());er(ZN,`Sending RPC '${t}' ${s}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,i);const{host:c}=new URL(o),u=dm(c);return this.Jo(t,o,l,n,u).then(A=>(er(ZN,`Received RPC '${t}' ${s}: `,A),A),A=>{throw mv(ZN,`RPC '${t}' ${s} failed with error: `,A,"url: ",o,"request:",n),A})}Ho(t,r,n,a,i,s){return this.Go(t,r,n,a,i)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kv}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,i)=>t[i]=a),n&&n.headers.forEach((a,i)=>t[i]=a)}zo(t,r){const n=L0e[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0e{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="WebChannelConnection";class j0e extends O0e{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,i){const s=PI();return new Promise((o,l)=>{const c=new YK;c.setWithCredentials(!0),c.listenOnce(XK.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case jC.NO_ERROR:const A=c.getResponseJson();er(mo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(A)),o(A);break;case jC.TIMEOUT:er(mo,`RPC '${t}' ${s} timed out`),l(new Kt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case jC.HTTP_ERROR:const h=c.getStatus();if(er(mo,`RPC '${t}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const g=function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(T)>=0?T:mt.UNKNOWN}(v.status);l(new Kt(g,v.message))}else l(new Kt(mt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Kt(mt.UNAVAILABLE,"Connection failed."));break;default:Rr(9055,{l_:t,streamId:s,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{er(mo,`RPC '${t}' ${s} completed.`)}});const u=JSON.stringify(a);er(mo,`RPC '${t}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}T_(t,r,n){const a=PI(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=eW(),o=ZK(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");er(mo,`Creating RPC '${t}' stream ${a}: ${u}`,l);const A=s.createWebChannel(u,l);this.I_(A);let h=!1,m=!1;const v=new U0e({Yo:y=>{m?er(mo,`Not sending because RPC '${t}' stream ${a} is closed:`,y):(h||(er(mo,`Opening RPC '${t}' stream ${a} transport.`),A.open(),h=!0),er(mo,`RPC '${t}' stream ${a} sending:`,y),A.send(y))},Zo:()=>A.close()}),g=(y,w,T)=>{y.listen(w,N=>{try{T(N)}catch(F){setTimeout(()=>{throw F},0)}})};return g(A,k1.EventType.OPEN,()=>{m||(er(mo,`RPC '${t}' stream ${a} transport opened.`),v.o_())}),g(A,k1.EventType.CLOSE,()=>{m||(m=!0,er(mo,`RPC '${t}' stream ${a} transport closed`),v.a_(),this.E_(A))}),g(A,k1.EventType.ERROR,y=>{m||(m=!0,mv(mo,`RPC '${t}' stream ${a} transport errored. Name:`,y.name,"Message:",y.message),v.a_(new Kt(mt.UNAVAILABLE,"The operation could not be completed")))}),g(A,k1.EventType.MESSAGE,y=>{var w;if(!m){const T=y.data[0];Kn(!!T,16349);const N=T,F=(N==null?void 0:N.error)||((w=N[0])==null?void 0:w.error);if(F){er(mo,`RPC '${t}' stream ${a} received error:`,F);const B=F.status;let D=function(k){const H=ji[k];if(H!==void 0)return PW(H)}(B),E=F.message;D===void 0&&(D=mt.INTERNAL,E="Unknown error status: "+B+" with message "+F.message),m=!0,v.a_(new Kt(D,E)),A.close()}else er(mo,`RPC '${t}' stream ${a} received:`,T),v.u_(T)}}),g(o,JK.STAT_EVENT,y=>{y.stat===CI.PROXY?er(mo,`RPC '${t}' stream ${a} detected buffering proxy`):y.stat===CI.NOPROXY&&er(mo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function eB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(e){return new zhe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(t,r,n=1e3,a=1.5,i=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&er("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj="PersistentStream";class YW{constructor(t,r,n,a,i,s,o,l){this.Mi=t,this.S_=n,this.b_=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WW(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===mt.RESOURCE_EXHAUSTED?(vA(r.toString()),vA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Kt(mt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return er(pj,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(er(pj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H0e extends YW{constructor(t,r,n,a,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=$he(this.serializer,t),n=function(i){if(!("targetChange"in i))return jr.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?jr.min():s.readTime?rf(s.readTime):jr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=DI(this.serializer),r.addTarget=function(i,s){let o;const l=s.target;if(o=NI(l)?{documents:Yhe(i,l)}:{query:Xhe(i,l).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=OW(i,s.resumeToken);const c=kI(i,s.expectedCount);c!==null&&(o.expectedCount=c)}else if(s.snapshotVersion.compareTo(jr.min())>0){o.readTime=UE(i,s.snapshotVersion.toTimestamp());const c=kI(i,s.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,t);const n=Zhe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=DI(this.serializer),r.removeTarget=t,this.q_(r)}}class Q0e extends YW{constructor(t,r,n,a,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return Kn(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Kn(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Kn(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Whe(t.writeResults,t.commitTime),n=rf(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=DI(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Khe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0e{}class z0e extends V0e{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Kt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(t,II(r,n),a,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Kt(mt.UNKNOWN,i.toString())})}Ho(t,r,n,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(t,II(r,n),a,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Kt(mt.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class G0e{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vA(r),this.aa=!1):er("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="RemoteStore";class q0e{constructor(t,r,n,a,i){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{hm(this)&&(er(Wp,"Restarting streams for network reachability change."),await async function(l){const c=Qr(l);c.Ea.add(4),await _b(c),c.Ra.set("Unknown"),c.Ea.delete(4),await GS(c)}(this))})}),this.Ra=new G0e(n,a)}}async function GS(e){if(hm(e))for(const t of e.da)await t(!0)}async function _b(e){for(const t of e.da)await t(!1)}function XW(e,t){const r=Qr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),YD(r)?WD(r):Jv(r).O_()&&KD(r,t))}function $D(e,t){const r=Qr(e),n=Jv(r);r.Ia.delete(t),n.O_()&&JW(r,t),r.Ia.size===0&&(n.O_()?n.L_():hm(r)&&r.Ra.set("Unknown"))}function KD(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Jv(e).Y_(t)}function JW(e,t){e.Va.Ue(t),Jv(e).Z_(t)}function WD(e){e.Va=new jhe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Jv(e).start(),e.Ra.ua()}function YD(e){return hm(e)&&!Jv(e).x_()&&e.Ia.size>0}function hm(e){return Qr(e).Ea.size===0}function ZW(e){e.Va=void 0}async function $0e(e){e.Ra.set("Online")}async function K0e(e){e.Ia.forEach((t,r)=>{KD(e,t)})}async function W0e(e,t){ZW(e),YD(e)?(e.Ra.ha(t),WD(e)):e.Ra.set("Unknown")}async function Y0e(e,t,r){if(e.Ra.set("Online"),t instanceof LW&&t.state===2&&t.cause)try{await async function(a,i){const s=i.cause;for(const o of i.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,s),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){er(Wp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await HE(e,n)}else if(t instanceof zC?e.Va.Ze(t):t instanceof MW?e.Va.st(t):e.Va.tt(t),!r.isEqual(jr.min()))try{const n=await KW(e.localStore);r.compareTo(n)>=0&&await function(i,s){const o=i.Va.Tt(s);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Ia.get(c);u&&i.Ia.set(c,u.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,c)=>{const u=i.Ia.get(l);if(!u)return;i.Ia.set(l,u.withResumeToken(to.EMPTY_BYTE_STRING,u.snapshotVersion)),JW(i,l);const A=new Qh(u.target,l,c,u.sequenceNumber);KD(i,A)}),i.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){er(Wp,"Failed to raise snapshot:",n),await HE(e,n)}}async function HE(e,t,r){if(!Yv(t))throw t;e.Ea.add(1),await _b(e),e.Ra.set("Offline"),r||(r=()=>KW(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{er(Wp,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await GS(e)})}function eY(e,t){return t().catch(r=>HE(e,r,t))}async function qS(e){const t=Qr(e),r=p0(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:RD;for(;X0e(t);)try{const a=await F0e(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,J0e(t,a)}catch(a){await HE(t,a)}tY(t)&&rY(t)}function X0e(e){return hm(e)&&e.Ta.length<10}function J0e(e,t){e.Ta.push(t);const r=p0(e);r.O_()&&r.X_&&r.ea(t.mutations)}function tY(e){return hm(e)&&!p0(e).x_()&&e.Ta.length>0}function rY(e){p0(e).start()}async function Z0e(e){p0(e).ra()}async function epe(e){const t=p0(e);for(const r of e.Ta)t.ea(r.mutations)}async function tpe(e,t,r){const n=e.Ta.shift(),a=jD.from(n,t,r);await eY(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await qS(e)}async function rpe(e,t){t&&p0(e).X_&&await async function(n,a){if(function(s){return Lhe(s)&&s!==mt.ABORTED}(a.code)){const i=n.Ta.shift();p0(n).B_(),await eY(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a)),await qS(n)}}(e,t),tY(e)&&rY(e)}async function mj(e,t){const r=Qr(e);r.asyncQueue.verifyOperationInProgress(),er(Wp,"RemoteStore received new credentials");const n=hm(r);r.Ea.add(3),await _b(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await GS(r)}async function npe(e,t){const r=Qr(e);t?(r.Ea.delete(2),await GS(r)):t||(r.Ea.add(2),await _b(r),r.Ra.set("Unknown"))}function Jv(e){return e.ma||(e.ma=function(r,n,a){const i=Qr(r);return i.sa(),new H0e(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(e.datastore,e.asyncQueue,{Xo:$0e.bind(null,e),t_:K0e.bind(null,e),r_:W0e.bind(null,e),H_:Y0e.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),YD(e)?WD(e):e.Ra.set("Unknown")):(await e.ma.stop(),ZW(e))})),e.ma}function p0(e){return e.fa||(e.fa=function(r,n,a){const i=Qr(r);return i.sa(),new Q0e(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z0e.bind(null,e),r_:rpe.bind(null,e),ta:epe.bind(null,e),na:tpe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await qS(e)):(await e.fa.stop(),e.Ta.length>0&&(er(Wp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t,r,n,a,i){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new lA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,i){const s=Date.now()+n,o=new XD(t,r,s,a,i);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Kt(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JD(e,t){if(vA("AsyncQueue",`${t}: ${e}`),Yv(e))return new Kt(mt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{static emptySet(t){return new Wg(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||pr.comparator(r.key,n.key):(r,n)=>pr.comparator(r.key,n.key),this.keyedMap=I1(),this.sortedSet=new Ya(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Wg)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Wg;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.ga=new Ya(pr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Rr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class wv{constructor(t,r,n,a,i,s,o,l,c){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,r,n,a,i){const s=[];return r.forEach(o=>{s.push({type:0,doc:o})}),new wv(t,r,Wg.emptySet(r),s,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&OS(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ape{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class ipe{constructor(){this.queries=vj(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Qr(r),i=a.queries;a.queries=vj(),i.forEach((s,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Kt(mt.ABORTED,"Firestore shutting down"))}}function vj(){return new Am(e=>wW(e),OS)}async function ZD(e,t){const r=Qr(e);let n=3;const a=t.query;let i=r.queries.get(a);i?!i.ba()&&t.Da()&&(n=2):(i=new ape,n=t.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(a,!0);break;case 1:i.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(s){const o=JD(s,`Initialization of query '${Tg(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,i),i.Sa.push(t),t.va(r.onlineState),i.wa&&t.Fa(i.wa)&&tR(r)}async function eR(e,t){const r=Qr(e),n=t.query;let a=3;const i=r.queries.get(n);if(i){const s=i.Sa.indexOf(t);s>=0&&(i.Sa.splice(s,1),i.Sa.length===0?a=t.Da()?0:1:!i.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function spe(e,t){const r=Qr(e);let n=!1;for(const a of t){const i=a.query,s=r.queries.get(i);if(s){for(const o of s.Sa)o.Fa(a)&&(n=!0);s.wa=a}}n&&tR(r)}function ope(e,t,r){const n=Qr(e),a=n.queries.get(t);if(a)for(const i of a.Sa)i.onError(r);n.queries.delete(t)}function tR(e){e.Ca.forEach(t=>{t.next()})}var MI,xj;(xj=MI||(MI={})).Ma="default",xj.Cache="cache";class rR{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new wv(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=wv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==MI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(t){this.key=t}}class aY{constructor(t){this.key=t}}class lpe{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xn(),this.mutatedKeys=xn(),this.eu=CW(t),this.tu=new Wg(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new gj,a=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,s=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,c=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((u,A)=>{const h=a.get(u),m=US(this.query,A)?A:null,v=!!h&&this.mutatedKeys.has(h.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;h&&m?h.data.isEqual(m.data)?v!==g&&(n.track({type:3,doc:m}),y=!0):this.su(h,m)||(n.track({type:2,doc:m}),y=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(o=!0)):!h&&m?(n.track({type:0,doc:m}),y=!0):h&&!m&&(n.track({type:1,doc:h}),y=!0,(l||c)&&(o=!0)),y&&(m?(s=s.add(m),i=g?i.add(u):i.delete(u)):(s=s.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const s=t.iu.ya();s.sort((u,A)=>function(m,v){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rr(20277,{Rt:y})}};return g(m)-g(v)}(u.type,A.type)||this.eu(u.doc,A.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,c=l!==this.Za;return this.Za=l,s.length!==0||c?{snapshot:new wv(this.query,t.tu,i,s,t.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gj,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=xn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new aY(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new nY(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=xn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return wv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nR="SyncEngine";class cpe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class upe{constructor(t){this.key=t,this.hu=!1}}class dpe{constructor(t,r,n,a,i,s){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Am(o=>wW(o),OS),this.Iu=new Map,this.Eu=new Set,this.du=new Ya(pr.comparator),this.Au=new Map,this.Ru=new VD,this.Vu={},this.mu=new Map,this.fu=bv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fpe(e,t,r=!0){const n=uY(e);let a;const i=n.Tu.get(t);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await iY(n,t,r,!0),a}async function Ape(e,t){const r=uY(e);await iY(r,t,!0,!1)}async function iY(e,t,r,n){const a=await D0e(e.localStore,tf(t)),i=a.targetId,s=e.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await hpe(e,t,i,s==="current",a.resumeToken)),e.isPrimaryClient&&r&&XW(e.remoteStore,a),o}async function hpe(e,t,r,n,a){e.pu=(A,h,m)=>async function(g,y,w,T){let N=y.view.ru(w);N.Cs&&(N=await dj(g.localStore,y.query,!1).then(({documents:E})=>y.view.ru(E,N)));const F=T&&T.targetChanges.get(y.targetId),B=T&&T.targetMismatches.get(y.targetId)!=null,D=y.view.applyChanges(N,g.isPrimaryClient,F,B);return bj(g,y.targetId,D.au),D.snapshot}(e,A,h,m);const i=await dj(e.localStore,t,!0),s=new lpe(t,i.Qs),o=s.ru(i.documents),l=Eb.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),c=s.applyChanges(o,e.isPrimaryClient,l);bj(e,r,c.au);const u=new cpe(t,r,s);return e.Tu.set(t,u),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),c.snapshot}async function ppe(e,t,r){const n=Qr(e),a=n.Tu.get(t),i=n.Iu.get(a.targetId);if(i.length>1)return n.Iu.set(a.targetId,i.filter(s=>!OS(s,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await RI(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&$D(n.remoteStore,a.targetId),LI(n,a.targetId)}).catch(Wv)):(LI(n,a.targetId),await RI(n.localStore,a.targetId,!0))}async function mpe(e,t){const r=Qr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),$D(r.remoteStore,n.targetId))}async function gpe(e,t,r){const n=Epe(e);try{const a=await function(s,o){const l=Qr(s),c=Ar.now(),u=o.reduce((m,v)=>m.add(v.key),xn());let A,h;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=xA(),g=xn();return l.Ns.getEntries(m,u).next(y=>{v=y,v.forEach((w,T)=>{T.isValidDocument()||(g=g.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(y=>{A=y;const w=[];for(const T of o){const N=Fhe(T,A.get(T.key).overlayedDocument);N!=null&&w.push(new T0(T.key,N,hW(N.value.mapValue),Yo.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,o)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(A,g);return l.documentOverlayCache.saveOverlays(m,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:_W(A)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(s,o,l){let c=s.Vu[s.currentUser.toKey()];c||(c=new Ya(vn)),c=c.insert(o,l),s.Vu[s.currentUser.toKey()]=c}(n,a.batchId,r),await Sb(n,a.changes),await qS(n.remoteStore)}catch(a){const i=JD(a,"Failed to persist write");r.reject(i)}}async function sY(e,t){const r=Qr(e);try{const n=await k0e(r.localStore,t);t.targetChanges.forEach((a,i)=>{const s=r.Au.get(i);s&&(Kn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?s.hu=!0:a.modifiedDocuments.size>0?Kn(s.hu,14607):a.removedDocuments.size>0&&(Kn(s.hu,42227),s.hu=!1))}),await Sb(r,n,t)}catch(n){await Wv(n)}}function yj(e,t,r){const n=Qr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((i,s)=>{const o=s.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(s,o){const l=Qr(s);l.onlineState=o;let c=!1;l.queries.forEach((u,A)=>{for(const h of A.Sa)h.va(o)&&(c=!0)}),c&&tR(l)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function vpe(e,t,r){const n=Qr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),i=a&&a.key;if(i){let s=new Ya(pr.comparator);s=s.insert(i,No.newNoDocument(i,jr.min()));const o=xn().add(i),l=new VS(jr.min(),new Map,new Ya(vn),s,o);await sY(n,l),n.du=n.du.remove(i),n.Au.delete(t),aR(n)}else await RI(n.localStore,t,!1).then(()=>LI(n,t,r)).catch(Wv)}async function xpe(e,t){const r=Qr(e),n=t.batch.batchId;try{const a=await B0e(r.localStore,t);lY(r,n,null),oY(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Sb(r,a)}catch(a){await Wv(a)}}async function ype(e,t,r){const n=Qr(e);try{const a=await function(s,o){const l=Qr(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(A=>(Kn(A!==null,37113),u=A.keys(),l.mutationQueue.removeMutationBatch(c,A))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,t);lY(n,t,r),oY(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Sb(n,a)}catch(a){await Wv(a)}}function oY(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function lY(e,t,r){const n=Qr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const i=a.get(t);i&&(r?i.reject(r):i.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function LI(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||cY(e,n)})}function cY(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&($D(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),aR(e))}function bj(e,t,r){for(const n of r)n instanceof nY?(e.Ru.addReference(n.key,t),bpe(e,n)):n instanceof aY?(er(nR,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||cY(e,n.key)):Rr(19791,{wu:n})}function bpe(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(er(nR,"New document in limbo: "+r),e.Eu.add(n),aR(e))}function aR(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new pr(Ca.fromString(t)),n=e.fu.next();e.Au.set(n,new upe(r)),e.du=e.du.insert(r,n),XW(e.remoteStore,new Qh(tf(LS(r.path)),n,"TargetPurposeLimboResolution",RS.ce))}}async function Sb(e,t,r){const n=Qr(e),a=[],i=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{s.push(n.pu(l,t,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const A=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,A?"current":"not-current")}if(c){a.push(c);const A=GD.As(l.targetId,c);i.push(A)}}))}),await Promise.all(s),n.Pu.H_(a),await async function(l,c){const u=Qr(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Et.forEach(c,h=>Et.forEach(h.Es,m=>u.persistence.referenceDelegate.addReference(A,h.targetId,m)).next(()=>Et.forEach(h.ds,m=>u.persistence.referenceDelegate.removeReference(A,h.targetId,m)))))}catch(A){if(!Yv(A))throw A;er(qD,"Failed to update sequence numbers: "+A)}for(const A of c){const h=A.targetId;if(!A.fromCache){const m=u.Ms.get(h),v=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(v);u.Ms=u.Ms.insert(h,g)}}}(n.localStore,i))}async function wpe(e,t){const r=Qr(e);if(!r.currentUser.isEqual(t)){er(nR,"User change. New user:",t.toKey());const n=await $W(r.localStore,t);r.currentUser=t,function(i,s){i.mu.forEach(o=>{o.forEach(l=>{l.reject(new Kt(mt.CANCELLED,s))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Sb(r,n.Ls)}}function Cpe(e,t){const r=Qr(e),n=r.Au.get(t);if(n&&n.hu)return xn().add(n.key);{let a=xn();const i=r.Iu.get(t);if(!i)return a;for(const s of i){const o=r.Tu.get(s);a=a.unionWith(o.view.nu)}return a}}function uY(e){const t=Qr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sY.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cpe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vpe.bind(null,t),t.Pu.H_=spe.bind(null,t.eventManager),t.Pu.yu=ope.bind(null,t.eventManager),t}function Epe(e){const t=Qr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xpe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ype.bind(null,t),t}class QE{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=zS(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return N0e(this.persistence,new _0e,t.initialUser,this.serializer)}Cu(t){return new qW(zD.mi,this.serializer)}Du(t){return new P0e}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}QE.provider={build:()=>new QE};class _pe extends QE{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){Kn(this.persistence.referenceDelegate instanceof jE,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new u0e(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?gl.withCacheSize(this.cacheSizeBytes):gl.DEFAULT;return new qW(n=>jE.mi(n,r),this.serializer)}}class OI{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>yj(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=wpe.bind(null,this.syncEngine),await npe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ipe}()}createDatastore(t){const r=zS(t.databaseInfo.databaseId),n=function(i){return new j0e(i)}(t.databaseInfo);return function(i,s,o,l){return new z0e(i,s,o,l)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,i,s,o){return new q0e(n,a,i,s,o)}(this.localStore,this.datastore,t.asyncQueue,r=>yj(this.syncEngine,r,0),function(){return hj.v()?new hj:new M0e}())}createSyncEngine(t,r){return function(a,i,s,o,l,c,u){const A=new dpe(a,i,s,o,l,c);return u&&(A.gu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const i=Qr(a);er(Wp,"RemoteStore shutting down."),i.Ea.add(5),await _b(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}OI.provider={build:()=>new OI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):vA("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="FirestoreClient";class Spe{constructor(t,r,n,a,i){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Eo.UNAUTHENTICATED,this.clientId=DD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async s=>{er(m0,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(er(m0,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new lA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=JD(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function tB(e,t){e.asyncQueue.verifyOperationInProgress(),er(m0,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await $W(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wj(e,t){e.asyncQueue.verifyOperationInProgress();const r=await Tpe(e);er(m0,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>mj(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>mj(t.remoteStore,a)),e._onlineComponents=t}async function Tpe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){er(m0,"Using user provided OfflineComponentProvider");try{await tB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===mt.FAILED_PRECONDITION||a.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;mv("Error using user provided cache. Falling back to memory cache: "+r),await tB(e,new QE)}}else er(m0,"Using default OfflineComponentProvider"),await tB(e,new _pe(void 0));return e._offlineComponents}async function dY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(er(m0,"Using user provided OnlineComponentProvider"),await wj(e,e._uninitializedComponentsProvider._online)):(er(m0,"Using default OnlineComponentProvider"),await wj(e,new OI))),e._onlineComponents}function Npe(e){return dY(e).then(t=>t.syncEngine)}async function VE(e){const t=await dY(e),r=t.eventManager;return r.onListen=fpe.bind(null,t.syncEngine),r.onUnlisten=ppe.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Ape.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=mpe.bind(null,t.syncEngine),r}function Bpe(e,t,r={}){const n=new lA;return e.asyncQueue.enqueueAndForget(async()=>function(i,s,o,l,c){const u=new iR({next:h=>{u.Nu(),s.enqueueAndForget(()=>eR(i,A));const m=h.docs.has(o);!m&&h.fromCache?c.reject(new Kt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&l&&l.source==="server"?c.reject(new Kt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),A=new rR(LS(o.path),u,{includeMetadataChanges:!0,qa:!0});return ZD(i,A)}(await VE(e),e.asyncQueue,t,r,n)),n.promise}function kpe(e,t,r={}){const n=new lA;return e.asyncQueue.enqueueAndForget(async()=>function(i,s,o,l,c){const u=new iR({next:h=>{u.Nu(),s.enqueueAndForget(()=>eR(i,A)),h.fromCache&&l.source==="server"?c.reject(new Kt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),A=new rR(o,u,{includeMetadataChanges:!0,qa:!0});return ZD(i,A)}(await VE(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY="firestore.googleapis.com",Ej=!0;class _j{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Kt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AY,this.ssl=Ej}else this.host=t.host,this.ssl=t.ssl??Ej;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=GW;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<l0e)throw new Kt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}GAe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fY(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $S{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _j({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Kt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _j(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new PAe;switch(n.type){case"firstParty":return new UAe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Kt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Cj.get(r);n&&(er("ComponentProvider","Removing Datastore"),Cj.delete(r),n.terminate())}(this),Promise.resolve()}}function Ipe(e,t,r,n={}){var c;e=Wo(e,$S);const a=dm(t),i=e._getSettings(),s={...i,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(vD(`https://${o}`),xD("Firestore",!0)),i.host!==AY&&i.host!==o&&mv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:o,ssl:a,emulatorOptions:n};if(!c0(l,s)&&(e._setSettings(l),n.mockUserToken)){let u,A;if(typeof n.mockUserToken=="string")u=n.mockUserToken,A=Eo.MOCK_USER;else{u=Gce(n.mockUserToken,(c=e._app)==null?void 0:c.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Kt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Eo(h)}e._authCredentials=new MAe(new rW(u,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new IA(this.firestore,t,this._query)}}class ui{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new e0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ui(this.firestore,t,this._key)}toJSON(){return{type:ui._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(wb(r,ui._jsonSchema))return new ui(t,n||null,new pr(Ca.fromString(r.referencePath)))}}ui._jsonSchemaVersion="firestore/documentReference/1.0",ui._jsonSchema={type:qi("string",ui._jsonSchemaVersion),referencePath:qi("string")};class e0 extends IA{constructor(t,r,n){super(t,r,LS(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ui(this.firestore,null,new pr(t))}withConverter(t){return new e0(this.firestore,t,this._path)}}function Ft(e,t,...r){if(e=Ha(e),nW("collection","path",t),e instanceof $S){const n=Ca.fromString(t,...r);return OU(n),new e0(e,null,n)}{if(!(e instanceof ui||e instanceof e0))throw new Kt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ca.fromString(t,...r));return OU(n),new e0(e.firestore,null,n)}}function br(e,t,...r){if(e=Ha(e),arguments.length===1&&(t=DD.newId()),nW("doc","path",t),e instanceof $S){const n=Ca.fromString(t,...r);return LU(n),new ui(e,null,new pr(n))}{if(!(e instanceof ui||e instanceof e0))throw new Kt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ca.fromString(t,...r));return LU(n),new ui(e.firestore,e instanceof e0?e.converter:null,new pr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="AsyncQueue";class Tj{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WW(this,"async_queue_retry"),this._c=()=>{const n=eB();n&&er(Sj,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=eB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=eB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new lA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Yv(t))throw t;er(Sj,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,vA("INTERNAL UNHANDLED ERROR: ",Nj(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=XD.createAndSchedule(this,t,r,n,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&Rr(47125,{Pc:Nj(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function Nj(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1}(e,["next","error","complete"])}class uf extends $S{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new Tj,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Tj(t),this._firestoreClient=void 0,await t}}}function hY(e,t){const r=typeof e=="object"?e:CD(),n=typeof e=="string"?e:RE,a=NS(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const i=oK("firestore");i&&Ipe(a,...i)}return a}function Tb(e){if(e._terminated)throw new Kt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Fpe(e),e._firestoreClient}function Fpe(e){var n,a,i;const t=e._freezeSettings(),r=function(o,l,c,u){return new nhe(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,fY(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Spe(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ru(to.fromBase64String(t))}catch(r){throw new Kt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new ru(to.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ru._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(wb(t,ru._jsonSchema))return ru.fromBase64String(t.bytes)}}ru._jsonSchemaVersion="firestore/bytes/1.0",ru._jsonSchema={type:qi("string",ru._jsonSchemaVersion),bytes:qi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Kt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xs(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Kt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Kt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return vn(this._lat,t._lat)||vn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nf._jsonSchemaVersion}}static fromJSON(t){if(wb(t,nf._jsonSchema))return new nf(t.latitude,t.longitude)}}nf._jsonSchemaVersion="firestore/geoPoint/1.0",nf._jsonSchema={type:qi("string",nf._jsonSchemaVersion),latitude:qi("number"),longitude:qi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}(this._values,t._values)}toJSON(){return{type:af._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(wb(t,af._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new af(t.vectorValues);throw new Kt(mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}af._jsonSchemaVersion="firestore/vectorValue/1.0",af._jsonSchema={type:qi("string",af._jsonSchemaVersion),vectorValues:qi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dpe=/^__.*__$/;class Rpe{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new T0(t,this.data,this.fieldMask,r,this.fieldTransforms):new Cb(t,this.data,r,this.fieldTransforms)}}class pY{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new T0(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function mY(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rr(40011,{Ac:e})}}class KS{constructor(t,r,n,a,i,s){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new KS({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return zE(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(mY(this.Ac)&&Dpe.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ppe{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||zS(t)}Cc(t,r,n,a=!1){return new KS({Ac:t,methodName:r,Dc:n,path:Xs.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kb(e){const t=e._freezeSettings(),r=zS(e._databaseId);return new Ppe(e._databaseId,!!t.ignoreUndefinedProperties,r)}function sR(e,t,r,n,a,i={}){const s=e.Cc(i.merge||i.mergeFields?2:0,t,r,a);cR("Data must be an object, but it was:",s,n);const o=xY(n,s);let l,c;if(i.merge)l=new ac(s.fieldMask),c=s.fieldTransforms;else if(i.mergeFields){const u=[];for(const A of i.mergeFields){const h=UI(t,A,r);if(!s.contains(h))throw new Kt(mt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);bY(u,h)||u.push(h)}l=new ac(u),c=s.fieldTransforms.filter(A=>l.covers(A.field))}else l=null,c=s.fieldTransforms;return new Rpe(new xl(o),l,c)}class WS extends Bb{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof WS}}function Mpe(e,t,r){return new KS({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class oR extends Bb{_toFieldTransform(t){return new FW(t.path,new Dy)}isEqual(t){return t instanceof oR}}class lR extends Bb{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Mpe(this,t,!0),n=this.vc.map(i=>Zv(i,r)),a=new yv(n);return new FW(t.path,a)}isEqual(t){return t instanceof lR&&c0(this.vc,t.vc)}}function gY(e,t,r,n){const a=e.Cc(1,t,r);cR("Data must be an object, but it was:",a,n);const i=[],s=xl.empty();S0(n,(l,c)=>{const u=uR(t,l,r);c=Ha(c);const A=a.yc(u);if(c instanceof WS)i.push(u);else{const h=Zv(c,A);h!=null&&(i.push(u),s.set(u,h))}});const o=new ac(i);return new pY(s,o,a.fieldTransforms)}function vY(e,t,r,n,a,i){const s=e.Cc(1,t,r),o=[UI(t,n,r)],l=[a];if(i.length%2!=0)throw new Kt(mt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(UI(t,i[h])),l.push(i[h+1]);const c=[],u=xl.empty();for(let h=o.length-1;h>=0;--h)if(!bY(c,o[h])){const m=o[h];let v=l[h];v=Ha(v);const g=s.yc(m);if(v instanceof WS)c.push(m);else{const y=Zv(v,g);y!=null&&(c.push(m),u.set(m,y))}}const A=new ac(c);return new pY(u,A,s.fieldTransforms)}function Lpe(e,t,r,n=!1){return Zv(r,e.Cc(n?4:3,t))}function Zv(e,t){if(yY(e=Ha(e)))return cR("Unsupported field value:",t,e),xY(e,t);if(e instanceof Bb)return function(n,a){if(!mY(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const i=[];let s=0;for(const o of n){let l=Zv(o,a.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,a){if((n=Ha(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return She(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ar.fromDate(n);return{timestampValue:UE(a.serializer,i)}}if(n instanceof Ar){const i=new Ar(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:UE(a.serializer,i)}}if(n instanceof nf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ru)return{bytesValue:OW(a.serializer,n._byteString)};if(n instanceof ui){const i=a.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw a.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:QD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof af)return function(s,o){return{mapValue:{fields:{[fW]:{stringValue:AW},[PE]:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return UD(o.serializer,c)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${DS(n)}`)}(e,t)}function xY(e,t){const r={};return sW(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):S0(e,(n,a)=>{const i=Zv(a,t.mc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function yY(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ar||e instanceof nf||e instanceof ru||e instanceof ui||e instanceof Bb||e instanceof af)}function cR(e,t,r){if(!yY(r)||!aW(r)){const n=DS(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function UI(e,t,r){if((t=Ha(t))instanceof Nb)return t._internalPath;if(typeof t=="string")return uR(e,t);throw zE("Field path arguments must be of type string or ",e,!1,void 0,r)}const Ope=new RegExp("[~\\*/\\[\\]]");function uR(e,t,r){if(t.search(Ope)>=0)throw zE(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Nb(...t.split("."))._internalPath}catch{throw zE(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function zE(e,t,r,n,a){const i=n&&!n.isEmpty(),s=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${n}`),s&&(l+=` in document ${a}`),l+=")"),new Kt(mt.INVALID_ARGUMENT,o+e+l)}function bY(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY{constructor(t,r,n,a,i){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Upe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(YS("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Upe extends wY{data(){return super.data()}}function YS(e,t){return typeof t=="string"?uR(e,t):t instanceof Nb?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CY(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Kt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dR{}class fR extends dR{}function tr(e,t,...r){let n=[];t instanceof dR&&n.push(t),n=n.concat(r),function(i){const s=i.filter(l=>l instanceof AR).length,o=i.filter(l=>l instanceof XS).length;if(s>1||s>0&&o>0)throw new Kt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class XS extends fR{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new XS(t,r,n)}_apply(t){const r=this._parse(t);return EY(t._query,r),new IA(t.firestore,t.converter,BI(t._query,r))}_parse(t){const r=kb(t.firestore);return function(i,s,o,l,c,u,A){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Kt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Ij(A,u);const v=[];for(const g of A)v.push(kj(l,i,g));h={arrayValue:{values:v}}}else h=kj(l,i,A)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Ij(A,u),h=Lpe(o,s,A,u==="in"||u==="not-in");return Gi.create(c,u,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function On(e,t,r){const n=t,a=YS("where",e);return XS._create(a,n,r)}class AR extends dR{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new AR(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:td.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,i){let s=a;const o=i.getFlattenedFilters();for(const l of o)EY(s,l),s=BI(s,l)}(t._query,r),new IA(t.firestore,t.converter,BI(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hR extends fR{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new hR(t,r)}_apply(t){const r=function(a,i,s){if(a.startAt!==null)throw new Kt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Kt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fy(i,s)}(t._query,this._field,this._direction);return new IA(t.firestore,t.converter,function(a,i){const s=a.explicitOrderBy.concat([i]);return new Xv(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function an(e,t="asc"){const r=t,n=YS("orderBy",e);return hR._create(n,r)}class pR extends fR{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new pR(t,r,n)}_apply(t){return new IA(t.firestore,t.converter,LE(t._query,this._limit,this._limitType))}}function t0(e){return qAe("limit",e),pR._create("limit",e,"F")}function kj(e,t,r){if(typeof(r=Ha(r))=="string"){if(r==="")throw new Kt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bW(t)&&r.indexOf("/")!==-1)throw new Kt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Ca.fromString(r));if(!pr.isDocumentKey(n))throw new Kt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return qU(e,new pr(n))}if(r instanceof ui)return qU(e,r._key);throw new Kt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${DS(r)}.`)}function Ij(e,t){if(!Array.isArray(e)||e.length===0)throw new Kt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function EY(e,t){const r=function(a,i){for(const s of a)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Kt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Kt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class jpe{convertValue(t,r="none"){switch(h0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ei(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(A0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Rr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return S0(t,(a,i)=>{n[a]=this.convertValue(i,r)}),n}convertVectorValue(t){var n,a,i;const r=(i=(a=(n=t.fields)==null?void 0:n[PE].arrayValue)==null?void 0:a.values)==null?void 0:i.map(s=>Ei(s.doubleValue));return new af(r)}convertGeoPoint(t){return new nf(Ei(t.latitude),Ei(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=MS(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(By(t));default:return null}}convertTimestamp(t){const r=f0(t);return new Ar(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Ca.fromString(t);Kn(zW(n),9688,{name:t});const a=new ky(n.get(1),n.get(3)),i=new pr(n.popFirst(5));return a.isEqual(r)||vA(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class D1{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Np extends wY{constructor(t,r,n,a,i,s){super(t,r,n,a,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new GC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(YS("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Np._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Np._jsonSchemaVersion="firestore/documentSnapshot/1.0",Np._jsonSchema={type:qi("string",Np._jsonSchemaVersion),bundleSource:qi("string","DocumentSnapshot"),bundleName:qi("string"),bundle:qi("string")};class GC extends Np{data(t={}){return super.data(t)}}class Bp{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new D1(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new GC(this._firestore,this._userDataWriter,n.key,n,new D1(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Kt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map(o=>{const l=new GC(a._firestore,a._userDataWriter,o.doc.key,o.doc,new D1(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new GC(a._firestore,a._userDataWriter,o.doc.key,o.doc,new D1(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let c=-1,u=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:Hpe(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Bp._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=DD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Hpe(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(e){e=Wo(e,ui);const t=Wo(e.firestore,uf);return Bpe(Tb(t),e._key).then(r=>_Y(t,e,r))}Bp._jsonSchemaVersion="firestore/querySnapshot/1.0",Bp._jsonSchema={type:qi("string",Bp._jsonSchemaVersion),bundleSource:qi("string","QuerySnapshot"),bundleName:qi("string"),bundle:qi("string")};class gR extends jpe{constructor(t){super(),this.firestore=t}convertBytes(t){return new ru(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ui(this.firestore,null,r)}}function $i(e){e=Wo(e,IA);const t=Wo(e.firestore,uf),r=Tb(t),n=new gR(t);return CY(e._query),kpe(r,e._query).then(a=>new Bp(t,n,e,a))}function ro(e,t,r){e=Wo(e,ui);const n=Wo(e.firestore,uf),a=mR(e.converter,t,r);return Db(n,[sR(kb(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,Yo.none())])}function Fb(e,t,r,...n){e=Wo(e,ui);const a=Wo(e.firestore,uf),i=kb(a);let s;return s=typeof(t=Ha(t))=="string"||t instanceof Nb?vY(i,"updateDoc",e._key,t,r,n):gY(i,"updateDoc",e._key,t),Db(a,[s.toMutation(e._key,Yo.exists(!0))])}function Fs(e){return Db(Wo(e.firestore,uf),[new QS(e._key,Yo.none())])}function Da(e,t){const r=Wo(e.firestore,uf),n=br(e),a=mR(e.converter,t);return Db(r,[sR(kb(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,Yo.exists(!1))]).then(()=>n)}function yr(e,...t){var l,c,u;e=Ha(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||Bj(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(Bj(t[n])){const A=t[n];t[n]=(l=A.next)==null?void 0:l.bind(A),t[n+1]=(c=A.error)==null?void 0:c.bind(A),t[n+2]=(u=A.complete)==null?void 0:u.bind(A)}let i,s,o;if(e instanceof ui)s=Wo(e.firestore,uf),o=LS(e._key.path),i={next:A=>{t[n]&&t[n](_Y(s,e,A))},error:t[n+1],complete:t[n+2]};else{const A=Wo(e,IA);s=Wo(A.firestore,uf),o=A._query;const h=new gR(s);i={next:m=>{t[n]&&t[n](new Bp(s,h,A,m))},error:t[n+1],complete:t[n+2]},CY(e._query)}return function(h,m,v,g){const y=new iR(g),w=new rR(m,y,v);return h.asyncQueue.enqueueAndForget(async()=>ZD(await VE(h),w)),()=>{y.Nu(),h.asyncQueue.enqueueAndForget(async()=>eR(await VE(h),w))}}(Tb(s),o,a,i)}function Db(e,t){return function(n,a){const i=new lA;return n.asyncQueue.enqueueAndForget(async()=>gpe(await Npe(n),a,i)),i.promise}(Tb(e),t)}function _Y(e,t,r){const n=r.docs.get(t._key),a=new gR(e);return new Np(e,a,t._key,n,new D1(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qpe{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=kb(t)}set(t,r,n){this._verifyNotCommitted();const a=rB(t,this._firestore),i=mR(a.converter,r,n),s=sR(this._dataReader,"WriteBatch.set",a._key,i,a.converter!==null,n);return this._mutations.push(s.toMutation(a._key,Yo.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const i=rB(t,this._firestore);let s;return s=typeof(r=Ha(r))=="string"||r instanceof Nb?vY(this._dataReader,"WriteBatch.update",i._key,r,n,a):gY(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(s.toMutation(i._key,Yo.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=rB(t,this._firestore);return this._mutations=this._mutations.concat(new QS(r._key,Yo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Kt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rB(e,t){if((e=Ha(e)).firestore!==t)throw new Kt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Vpe(){return new oR("serverTimestamp")}function zpe(...e){return new lR("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(e){return Tb(e=Wo(e,uf)),new Qpe(e,t=>Db(e,t))}(function(t,r=!0){(function(a){Kv=a})(qv),qp(new u0("firestore",(n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new uf(new LAe(n.getProvider("auth-internal")),new jAe(s,n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Kt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ky(c.options.projectId,u)}(s,a),s);return i={useFetchStreams:r,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Jd(DU,RU,t),Jd(DU,RU,"esm2020")})();const Gpe={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},SY=wD(Gpe),Rb=KK(SY),en=hY(SY),qpe=Object.freeze(Object.defineProperty({__proto__:null,auth:Rb,db:en},Symbol.toStringTag,{value:"Module"})),$pe=async(e,t)=>{try{return(await vfe(Rb,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},nB=async()=>{try{await bfe(Rb)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},Kpe=async e=>{try{await gfe(Rb,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},TY=async e=>{try{const t=br(en,"usuarios",e),r=await Ib(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Ht=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Ht||{}),pn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(pn||{}),hp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(hp||{});const Wpe=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),Yi="w-6 h-6",JS="w-24 h-24",xR=()=>d.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),Ype=()=>d.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M9 18h6"}),d.jsx("path",{d:"M10 22h4"}),d.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Xpe=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Jpe=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),R1=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),P1=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),NY=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Zpe=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:JS,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),eme=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:JS,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),tme=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:JS,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),rme=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:JS,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),nme=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Fj=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),m2=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),aB=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),g2=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),iB=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Dj=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),ame=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),ime=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),sme=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),ome=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Rj=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),lme=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),sB=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),cme=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Yi,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),ume=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Yi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Pj=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Yi,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),dme=[{id:Ht.SUBDIRECCION,label:"Subdirección Pedagógica",icon:d.jsx(Zpe,{})},{id:Ht.PROFESORADO,label:"Profesorado",icon:d.jsx(eme,{})},{id:Ht.COORDINACION_TP,label:"Coordinación TP",icon:d.jsx(tme,{})},{id:Ht.ESTUDIANTE,label:"Estudiantes",icon:d.jsx(rme,{})}],fme={[Ht.SUBDIRECCION]:[{name:"Dashboard",icon:d.jsx(nme,{})},{name:"Administración",icon:d.jsx(ome,{})},{name:"Seguimiento Curricular",icon:d.jsx(ume,{})},{name:"Acompañamiento docente",icon:d.jsx(sme,{})},{name:"Análisis Taxonómico",icon:d.jsx(Pj,{})},{name:"Interdisciplinario",icon:d.jsx(sB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:d.jsx(Fj,{})},{name:"Crear horarios",icon:d.jsx(aB,{})},{name:"Seguimiento de acciones pedagógicas",icon:d.jsx(g2,{})},{name:"Inclusión",icon:d.jsx(Rj,{})},{name:"Calendario Académico",icon:d.jsx(m2,{})},{name:"Muro de Anuncios",icon:d.jsx(R1,{})},{name:"Mensajería Interna",icon:d.jsx(P1,{})},{name:"Generador de Actas",icon:d.jsx(iB,{})}],[Ht.PROFESORADO]:[{name:"Planificación",icon:d.jsx(Dj,{})},{name:"Mis Acompañamientos",icon:d.jsx(lme,{})},{name:"Recursos de Aprendizaje",icon:d.jsx(ame,{})},{name:"Análisis Taxonómico",icon:d.jsx(Pj,{})},{name:"Interdisciplinario",icon:d.jsx(sB,{})},{name:"Inclusión",icon:d.jsx(Rj,{})},{name:"Actividades Remotas",icon:d.jsx(ime,{})},{name:"Evaluación de Aprendizajes",icon:d.jsx(iB,{})},{name:"Evaluaciones Formativas",icon:d.jsx(g2,{})},{name:"Calendario Académico",icon:d.jsx(m2,{})},{name:"Muro de Anuncios",icon:d.jsx(R1,{})},{name:"Mensajería Interna",icon:d.jsx(P1,{})},{name:"Generador de Actas",icon:d.jsx(Fj,{})}],[Ht.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:d.jsx(g2,{})},{name:"Asistencia Dual",icon:d.jsx(aB,{})},{name:"Pañol",icon:d.jsx(cme,{})},{name:"Gestión de Empresas",icon:d.jsx(Wpe,{})},{name:"Calendario Académico",icon:d.jsx(m2,{})},{name:"Muro de Anuncios",icon:d.jsx(R1,{})},{name:"Mensajería Interna",icon:d.jsx(P1,{})},{name:"Generador de Actas",icon:d.jsx(iB,{})}],[Ht.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:d.jsx(Dj,{})},{name:"Evaluación Formativa",icon:d.jsx(g2,{})},{name:"Tareas Interdisciplinarias",icon:d.jsx(sB,{})},{name:"Asistencia a Empresa",icon:d.jsx(aB,{})},{name:"Calendario Académico",icon:d.jsx(m2,{})},{name:"Muro de Anuncios",icon:d.jsx(R1,{})},{name:"Mensajería Interna",icon:d.jsx(P1,{})}]},Mj=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],v2=["Pendiente","En Proceso","Cumplida"],GE=["1º Medio","2º Medio","3º Medio","4º Medio"],cc=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Ni=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],jI=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],qC=["Lunes","Martes","Miércoles","Jueves","Viernes"],HI=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],Ame={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},Uh={[pn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[pn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[pn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[pn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},hme=Object.values(hp),oB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],lB=["Vinculado","Desvinculado","En proceso","Empresa"],kp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],pme=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],qE=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],ny=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],BY=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],x2=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],mme=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=L.useState(""),[i,s]=L.useState(""),[o,l]=L.useState("login"),c=h=>{h.preventDefault(),e(n,i)},u=h=>{h.preventDefault(),t(n),l("forgot_sent")},A=()=>o==="forgot"?d.jsxs("form",{onSubmit:u,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),d.jsx("div",{className:"mt-1",children:d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),d.jsx("div",{className:"text-sm text-center",children:d.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?d.jsxs("div",{className:"text-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),d.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",d.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),d.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),d.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):d.jsxs("form",{onSubmit:c,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),d.jsx("div",{className:"mt-1",children:d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),d.jsx("div",{className:"mt-1",children:d.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:h=>s(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&d.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:d.jsx("p",{children:r})}),d.jsx("div",{className:"text-sm text-center",children:d.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx("div",{className:"mb-4 flex justify-center items-center",children:d.jsx(xR,{})}),d.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),d.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:A()}),d.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},cB=({trigger:e,children:t,onOpen:r})=>{const[n,a]=L.useState(!1),i=L.useRef(null),s=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{i.current&&!i.current.contains(l.target)&&a(!1)};return L.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),d.jsxs("div",{className:"relative",ref:i,children:[d.jsx("div",{onClick:s,children:e}),n&&d.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},Lj="usuariosLiceo",gme=({user:e,onClose:t,onSave:r})=>{const[n,a]=L.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),i=o=>{a({...n,[o.target.name]:o.target.value})},s=o=>{o.preventDefault();const l={...e,...n};try{const c=localStorage.getItem(Lj);let u=c?JSON.parse(c):[];const A=u.findIndex(h=>h.id===e.id);A>-1?u[A]=l:u.push(l),localStorage.setItem(Lj,JSON.stringify(u)),r(l),t()}catch(c){console.error("Failed to save user profile:",c),alert("No se pudo guardar el perfil.")}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:d.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:d.jsxs("form",{onSubmit:s,children:[d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),d.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:i,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),d.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:i,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),d.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:i,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),d.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[d.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},Oj="usuariosLiceo",vme=({user:e,onClose:t,onSave:r})=>{const[n,a]=L.useState(""),[i,s]=L.useState(""),[o,l]=L.useState(null),c=u=>{if(u.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==i){l("Las contraseñas no coinciden.");return}const A={...e,password:n};try{const h=localStorage.getItem(Oj);let m=h?JSON.parse(h):[];const v=m.findIndex(g=>g.id===e.id);v>-1?m[v]=A:m.push(A),localStorage.setItem(Oj,JSON.stringify(m)),r(A),t()}catch(h){console.error("Failed to save new password:",h),l("No se pudo guardar la nueva contraseña.")}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:d.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:u=>u.stopPropagation(),children:d.jsxs("form",{onSubmit:c,children:[d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),d.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),d.jsx("div",{className:"mt-1",children:d.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:u=>a(u.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),d.jsx("div",{className:"mt-1",children:d.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:i,onChange:u=>s(u.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&d.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:d.jsx("p",{children:o})})]})]}),d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[d.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},Uj="anunciosMuro",jj="mensajesInternos",Hj="lir-read-status",xme=({user:e})=>{if(e.fotoUrl)return d.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return d.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},yme=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:i,toggleSidebar:s,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[c,u]=L.useState([]),[A,h]=L.useState([]),[m,v]=L.useState(!1),[g,y]=L.useState(!1),w=L.useCallback(()=>{try{const B=localStorage.getItem(`${Hj}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),T=L.useCallback(B=>{try{localStorage.setItem(`${Hj}-${e.id}`,JSON.stringify(B))}catch(D){console.error("Failed to set read status:",D)}},[e.id]);L.useEffect(()=>{const B=JSON.parse(localStorage.getItem(Uj)||"[]"),D=w();u(B.filter(S=>!D.announcements.includes(S.id)));const E=JSON.parse(localStorage.getItem(jj)||"[]");h(E.filter(S=>S.para===e.email).sort((S,k)=>new Date(k.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[e.id,w,o]);const N=()=>{const B=w(),D=JSON.parse(localStorage.getItem(Uj)||"[]").map(E=>E.id);B.announcements=D,T(B),u([])},F=()=>{const B=w(),E=JSON.parse(localStorage.getItem(jj)||"[]").filter(S=>S.para===e.email).map(S=>S.id);B.messages=[...new Set([...B.messages,...E])],T(B),l()};return d.jsxs(d.Fragment,{children:[d.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:d.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:s,children:d.jsx(Xpe,{})}),d.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[d.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),d.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),d.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),d.jsx("div",{className:"flex-1 flex justify-center",children:d.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:d.jsx(Jpe,{})})}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"flex items-center gap-3",children:d.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),d.jsx(cB,{onOpen:N,trigger:d.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[d.jsx(R1,{}),c.length>0&&d.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:c.length})]}),children:d.jsxs("div",{className:"p-2",children:[d.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),d.jsxs("ul",{className:"mt-1",children:[c.slice(0,3).map(B=>d.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[d.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),c.length===0&&d.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),d.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),d.jsx(cB,{onOpen:F,trigger:d.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[d.jsx(P1,{}),o>0&&d.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:d.jsxs("div",{className:"p-2",children:[d.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),d.jsxs("ul",{className:"mt-1",children:[A.slice(0,3).map(B=>d.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[d.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),A.length===0&&d.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),d.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),d.jsx(cB,{trigger:d.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:d.jsx(xme,{user:e})}),children:d.jsxs("div",{className:"p-2",children:[d.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),d.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[d.jsx("li",{children:d.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),d.jsx("li",{children:d.jsx("button",{onClick:()=>y(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),i&&d.jsx("li",{children:d.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),d.jsx("li",{children:d.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&d.jsx(gme,{user:e,onClose:()=>v(!1),onSave:n}),g&&d.jsx(vme,{user:e,onClose:()=>y(!1),onSave:n})]})};var ip={};const bme={apiKey:ip.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:ip.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:ip.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:ip.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:ip.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:ip.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:ip.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},kY=cU().length===0?wD(bme):cU()[0],Tt=hY(kY),wme=KK(kY),Pb="reemplazos_docentes",Cme="usuarios",yR=e=>{var r,n,a,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((i=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:i.call(a).toISOString())||t.fechaActualizacion}},Eme=e=>{const t=e.data();return{id:e.id,...t}},_me=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await Da(Ft(Tt,Pb),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},Sme=async(e,t)=>{try{const r=br(Tt,Pb,e),n=await Ib(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Fs(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},Tme=(e,t,r=50)=>{try{const n=tr(Ft(Tt,Pb),On("userId","==",e),an("diaAusencia","desc"),t0(r));return yr(n,a=>{const i=a.docs.map(yR);t(i)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},Nme=e=>{try{const t=tr(Ft(Tt,Cme),On("profile","==",Ht.PROFESORADO));return yr(t,n=>{const a=n.docs.map(Eme);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},Bme=async e=>{try{const t=tr(Ft(Tt,Pb),On("userId","==",e)),n=(await $i(t)).docs.map(yR),a=n.length,i=n.filter(o=>o.resultado==="Hora realizada").length,s=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:i,horasCubiertas:s,porcentajeRealizadas:a>0?i/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},kme=async(e,t)=>{try{if(!t.trim())return[];const r=tr(Ft(Tt,Pb),On("userId","==",e),an("diaAusencia","desc"),t0(100)),a=(await $i(r)).docs.map(yR),i=t.toLowerCase();return a.filter(s=>s.docenteAusente.toLowerCase().includes(i)||s.docenteReemplazante.toLowerCase().includes(i)||s.curso.toLowerCase().includes(i)||s.diaAusencia.includes(i)||s.asignaturaAusente.toLowerCase().includes(i)||s.asignaturaReemplazante.toLowerCase().includes(i))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},Ime=Array.from({length:12},(e,t)=>t+1),Qj={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},Fme=e=>{const[t,r]=L.useState([]),[n,a]=L.useState(!0),[i,s]=L.useState(null);L.useEffect(()=>e?Tme(e,A=>{r(A),a(!1)}):void 0,[e]);const o=L.useCallback(async u=>{try{return s(null),await _me(u,e)}catch(A){throw s(A instanceof Error?A.message:"Error al guardar"),A}},[e]),l=L.useCallback(async u=>{try{s(null),await Sme(u,e)}catch(A){throw s(A instanceof Error?A.message:"Error al eliminar"),A}},[e]),c=L.useCallback(async u=>{try{return s(null),u.trim()?await kme(e,u):t}catch(A){return s(A instanceof Error?A.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:i,save:o,remove:l,search:c}},Dme=()=>{const[e,t]=L.useState([]),[r,n]=L.useState(!0);L.useEffect(()=>Nme(s=>{t(s),n(!1)}),[]);const a=L.useMemo(()=>e.map(i=>i.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Rme=({selectedBlocks:e,onChange:t,legend:r,disabled:n=!1})=>d.jsxs("fieldset",{children:[d.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),d.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:Ime.map(a=>d.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[d.jsx("input",{type:"checkbox",value:a,checked:e.includes(a),onChange:t,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),d.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),Pme=({userId:e})=>{const[t,r]=L.useState(null),[n,a]=L.useState(!1),i=L.useCallback(async()=>{try{a(!0);const s=new Date,o=(s.getMonth()+1).toString(),l=s.getFullYear().toString(),c=await Bme(e);r(c)}catch(s){console.error("Error al cargar estadísticas:",s)}finally{a(!1)}},[e]);return L.useEffect(()=>{e&&i()},[e,i]),n?d.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:d.jsx("div",{className:"animate-pulse flex justify-center",children:d.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):t?d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.totalReemplazos}),d.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.horasRealizadas}),d.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:t.horasCubiertas}),d.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.porcentajeRealizadas.toFixed(1),"%"]}),d.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},Mme=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:i,loading:s,error:o}=Fme(t),{profesorNames:l,loading:c}=Dme(),[u,A]=L.useState(Qj),[h,m]=L.useState(""),[v,g]=L.useState([]),[y,w]=L.useState(null),[T,N]=L.useState(!1),[F,B]=L.useState(!1);L.useEffect(()=>{(async()=>{if(!h.trim()){g(r);return}B(!0);try{const M=await i(h);g(M)}catch(M){console.error("Error en búsqueda:",M),g(r)}finally{B(!1)}})()},[r,h,i]);const D=L.useCallback(P=>{const{name:M,value:Q}=P.target;A(V=>({...V,[M]:Q}))},[]),E=L.useCallback(P=>{const M=parseInt(P.target.value,10);A(Q=>{const V=Q.bloquesAfectados,te=V.includes(M)?V.filter(W=>W!==M):[...V,M].sort((W,re)=>W-re);return{...Q,bloquesAfectados:te}})},[]),S=L.useCallback(async P=>{P.preventDefault(),w(null),N(!0);const{docenteAusente:M,asignaturaAusente:Q,curso:V,diaAusencia:te,bloquesAfectados:W,docenteReemplazante:re,asignaturaReemplazante:z}=u;if(!M||!Q||!V||!te||!re||!z||W.length===0){w("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),N(!1);return}if(M===re){w("El docente ausente y el reemplazante no pueden ser la misma persona."),N(!1);return}const X=new Date(te),K=new Date;if(K.setHours(0,0,0,0),X<K&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){N(!1);return}try{const se=Q.trim().toLowerCase()===z.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",U={...u,resultado:se};await n(U),A(Qj);const Y=se==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",Z=document.createElement("div");Z.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Z.textContent=Y,document.body.appendChild(Z),setTimeout(()=>{document.body.contains(Z)&&document.body.removeChild(Z)},3e3)}catch(se){console.error("Error al guardar reemplazo:",se),w("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{N(!1)}},[u,n]),k=L.useCallback(async P=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await a(P)}catch(M){console.error("Error al eliminar reemplazo:",M),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),H="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!e||!e.email&&!e.id?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),d.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx(Pme,{userId:t}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),c?d.jsxs("div",{className:"flex justify-center items-center py-8",children:[d.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),d.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):d.jsxs("form",{onSubmit:S,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),d.jsxs("select",{name:"docenteAusente",value:u.docenteAusente,onChange:D,className:H,disabled:T,required:!0,children:[d.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(P=>d.jsx("option",{value:P,children:P},P))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),d.jsxs("select",{name:"asignaturaAusente",value:u.asignaturaAusente,onChange:D,className:H,disabled:T,required:!0,children:[d.jsx("option",{value:"",children:"Seleccione una asignatura"}),cc.map(P=>d.jsx("option",{value:P,children:P},P))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),d.jsxs("select",{name:"curso",value:u.curso,onChange:D,className:H,disabled:T,required:!0,children:[d.jsx("option",{value:"",children:"Seleccione un curso"}),Ni.map(P=>d.jsx("option",{value:P,children:P},P))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),d.jsx("input",{type:"date",name:"diaAusencia",value:u.diaAusencia,onChange:D,className:H,disabled:T,required:!0})]}),d.jsx(Rme,{legend:"Bloques Afectados",selectedBlocks:u.bloquesAfectados,onChange:E,disabled:T})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),d.jsxs("select",{name:"docenteReemplazante",value:u.docenteReemplazante,onChange:D,className:H,disabled:T,required:!0,children:[d.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(P=>d.jsx("option",{value:P,children:P},P))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),d.jsxs("select",{name:"asignaturaReemplazante",value:u.asignaturaReemplazante,onChange:D,className:H,disabled:T,required:!0,children:[d.jsx("option",{value:"",children:"Seleccione una asignatura"}),cc.map(P=>d.jsx("option",{value:P,children:P},P))]})]}),u.asignaturaAusente&&u.asignaturaReemplazante&&d.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[d.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),d.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${u.asignaturaAusente.toLowerCase()===u.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:u.asignaturaAusente.toLowerCase()===u.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:u.asignaturaAusente.toLowerCase()===u.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(y||o)&&d.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:d.jsx("p",{className:"text-red-600 dark:text-red-400",children:y||o})}),d.jsx("div",{className:"pt-4 text-right",children:d.jsxs("button",{type:"submit",disabled:T||c,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[T&&d.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),T?"Registrando...":"Registrar Reemplazo"]})})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:h,onChange:P=>m(P.target.value),className:`${H} md:w-1/2 pl-10`,disabled:F}),d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:F?d.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):d.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),h&&d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:F?"Buscando...":`${v.length} resultado(s) encontrado(s)`})]}),s?d.jsxs("div",{className:"flex justify-center items-center py-8",children:[d.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),d.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:v.length>0?v.map(P=>d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(P.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:P.curso}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[P.docenteAusente,d.jsx("br",{}),d.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.asignaturaAusente})]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[P.docenteReemplazante,d.jsx("br",{}),d.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.asignaturaReemplazante})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:P.bloquesAfectados.join(", ")}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:P.resultado})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:d.jsx("button",{onClick:()=>k(P.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:T,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},P.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),v.length>0&&!h&&d.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",v.length," registros"]})]})]})},Lme=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=Ft(en,"reemplazos"),r=tr(t,an("fecha","desc"));return yr(r,a=>{const i=[];a.forEach(s=>{const o=s.data();i.push({id:s.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},Ome=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=Ft(en,"acompanamientos"),r=tr(t,an("fecha","desc"));return yr(r,a=>{const i=[];a.forEach(s=>{const o=s.data();i.push({id:s.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},Ume=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=Ft(en,"calendar_events"),r=tr(t,an("date","asc"));return yr(r,a=>{const i=[];a.forEach(s=>{const o=s.data();i.push({id:s.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},Od=({title:e,value:t,description:r,isLoading:n=!1})=>d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?d.jsxs("div",{className:"flex items-center mt-2",children:[d.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),d.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),sp=({title:e,data:t,colorClass:r,valueFormatter:n=i=>String(i),isLoading:a=!1})=>{const i=L.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),s=L.useMemo(()=>Math.max(...i,1),[i]);return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?d.jsxs("div",{className:"flex justify-center items-center py-8",children:[d.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),d.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):d.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const c=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),d.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),d.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:d.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${c/s*100}%`}})})]},o.label+l)}):d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},jme=()=>{const[e,t]=L.useState([]),[r,n]=L.useState([]),[a,i]=L.useState([]),[s,o]=L.useState(!0),[l,c]=L.useState(null);return L.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let u=0;const A=3,h=()=>{u++,u>=A&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=Lme(y=>{t(y),h()}),v=Ome(y=>{n(y),h()}),g=Ume(y=>{i(y),h()});return()=>{m(),v(),g()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),c(m instanceof Error?m.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:s,error:l}},Hme=({currentUser:e})=>{var A,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(A=e==null?void 0:e.profile)==null?void 0:A.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:i}=jme(),[s,o]=L.useState(ny);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:i,currentUser:e==null?void 0:e.profile}),L.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(m?JSON.parse(m):ny)}catch(m){console.error("Error al leer rúbrica personalizada",m),o(ny)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[d.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),d.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[d.jsx("p",{children:d.jsx("strong",{children:"Debug Info:"})}),d.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),d.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),d.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),i)return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[d.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),d.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:i}),d.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=L.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const v=t.filter(B=>B.resultado==="Hora realizada").length,g=m-v,y=`${(v/m*100).toFixed(1)}%`,w=(B,D)=>B.reduce((E,S)=>{const k=S[D];return typeof k=="string"&&(E[k]=(E[k]||0)+1),E},{}),T=w(t,"docenteAusente"),N=w(t,"docenteReemplazante"),F=w(t,"curso");return{totalInasistencias:m,horasRealizadas:v,horasCubiertas:g,tasaCobertura:y,inasistenciasPorDocente:Object.entries(T).map(([B,D])=>({label:B,value:D})),reemplazosPorDocente:Object.entries(N).map(([B,D])=>({label:B,value:D})),inasistenciasPorCurso:Object.entries(F).map(([B,D])=>({label:B,value:D})),distribucionResultados:[{label:"Hora Realizada",value:v},{label:"Hora Cubierta",value:g}]}},[t]),c=L.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const v=new Map;s.forEach(D=>{D.criteria.forEach(E=>{v.set(E.name,D.domain)})});let g=0,y=0;const w={},T={};r.forEach(D=>{w[D.docente]||(w[D.docente]={total:0,count:0}),Object.entries(D.rubricaResultados).forEach(([E,S])=>{g+=S,y++,w[D.docente].total+=S,w[D.docente].count++;const k=v.get(E);k&&(T[k]||(T[k]={total:0,count:0}),T[k].total+=S,T[k].count++)})});const N=y>0?(g/y).toFixed(2):"N/A",F=Object.entries(w).map(([D,E])=>({label:D,value:E.count>0?(E.total/E.count).toFixed(2):0})),B=Object.entries(T).map(([D,E])=>({label:D,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:N,desempenoPorDocente:F,desempenoPorDominio:B}},[r,s]),u=L.useMemo(()=>{const m={[pn.EVALUACION]:0,[pn.ACTO]:0,[pn.ACTIVIDAD_FOCALIZADA]:0,[pn.SALIDA_PEDAGOGICA]:0};for(const g of n)m.hasOwnProperty(g.type)&&m[g.type]++;const v=Object.entries(m).map(([g,y])=>({label:Uh[g].label,value:y}));return{totalEvaluaciones:m[pn.EVALUACION],totalActos:m[pn.ACTO],totalActividadesFocalizadas:m[pn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[pn.SALIDA_PEDAGOGICA],distribucionEventos:v}},[n]);return a?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&c.totalAcompanamientos===0&&n.length===0?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[d.jsx("span",{className:"text-6xl mb-4",children:"📊"}),d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),d.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[d.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),d.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),d.jsx("p",{children:"• Calendario Académico"})]})]}):d.jsxs("div",{className:"space-y-12 animate-fade-in",children:[d.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[d.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),d.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),d.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&d.jsxs("div",{className:"space-y-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(Od,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),d.jsx(Od,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),d.jsx(Od,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),d.jsx(Od,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsx(sp,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),d.jsx(sp,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),d.jsx(sp,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),d.jsx(sp,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&d.jsxs("div",{className:"space-y-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(Od,{title:"Total Acompañamientos",value:c.totalAcompanamientos,description:"Registros realizados",isLoading:a}),d.jsx(Od,{title:"Promedio General",value:c.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsx(sp,{title:"Desempeño Promedio por Docente",data:c.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),d.jsx(sp,{title:"Desempeño Promedio por Dominio",data:c.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&d.jsxs("div",{className:"space-y-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(Od,{title:"Evaluaciones",value:u.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),d.jsx(Od,{title:"Actos",value:u.totalActos,description:"Eventos registrados",isLoading:a}),d.jsx(Od,{title:"Act. Focalizadas",value:u.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),d.jsx(Od,{title:"Salidas Pedagógicas",value:u.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsx(sp,{title:"Distribución de Eventos del Calendario",data:u.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?d.jsxs("div",{className:"flex justify-center items-center py-8",children:[d.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),d.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):d.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,v)=>{var g,y;return d.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&d.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),d.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((g=Uh[m.type])==null?void 0:g.color)||"bg-gray-100 text-gray-800"}`,children:((y=Uh[m.type])==null?void 0:y.label)||m.type})]})},m.id||v)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),d.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),d.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),d.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[d.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),d.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var Vj;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Vj||(Vj={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zj;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(zj||(zj={}));var Gj;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Gj||(Gj={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=["user","model","function","system"];var $j;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})($j||($j={}));var Kj;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Kj||(Kj={}));var Wj;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Wj||(Wj={}));var Yj;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Yj||(Yj={}));var ay;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ay||(ay={}));var Xj;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Xj||(Xj={}));var Jj;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Jj||(Jj={}));var Zj;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Zj||(Zj={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ng extends Fo{constructor(t,r){super(t),this.response=r}}class IY extends Fo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class r0 extends Fo{}class FY extends Fo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qme="https://generativelanguage.googleapis.com",Vme="v1beta",zme="0.24.1",Gme="genai-js";var Yp;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Yp||(Yp={}));class qme{constructor(t,r,n,a,i){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=i}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Vme;let i=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Qme}/${n}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function $me(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Gme}/${zme}`),t.join(" ")}async function Kme(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",$me(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new r0(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,i]of n.entries()){if(a==="x-goog-api-key")throw new r0(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new r0(`Header name ${a} can only be set using the apiClient field`);r.append(a,i)}}return r}async function Wme(e,t,r,n,a,i){const s=new qme(e,t,r,n,i);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},Zme(i)),{method:"POST",headers:await Kme(s),body:a})}}async function Mb(e,t,r,n,a,i={},s=fetch){const{url:o,fetchOptions:l}=await Wme(e,t,r,n,a,i);return Yme(o,l,s)}async function Yme(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){Xme(a,e)}return n.ok||await Jme(n,e),n}function Xme(e,t){let r=e;throw r.name==="AbortError"?(r=new FY(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof IY||e instanceof r0||(r=new Fo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function Jme(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new IY(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function Zme(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$C(e.candidates[0]))throw new ng(`${Ih(e)}`,e);return ege(e)}else if(e.promptFeedback)throw new ng(`Text not available. ${Ih(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$C(e.candidates[0]))throw new ng(`${Ih(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),e8(e)[0]}else if(e.promptFeedback)throw new ng(`Function call not available. ${Ih(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$C(e.candidates[0]))throw new ng(`${Ih(e)}`,e);return e8(e)}else if(e.promptFeedback)throw new ng(`Function call not available. ${Ih(e)}`,e)},e}function ege(e){var t,r,n,a;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const s of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)s.text&&i.push(s.text),s.executableCode&&i.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&i.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function e8(e){var t,r,n,a;const i=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const s of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)s.functionCall&&i.push(s.functionCall);if(i.length>0)return i}const tge=[ay.RECITATION,ay.SAFETY,ay.LANGUAGE];function $C(e){return!!e.finishReason&&tge.includes(e.finishReason)}function Ih(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const i=e.candidates[0];$C(i)&&(a+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(a+=`: ${i.finishMessage}`))}return a}function Py(e){return this instanceof Py?(this.v=e,this):new Py(e)}function rge(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a;function s(h){n[h]&&(a[h]=function(m){return new Promise(function(v,g){i.push([h,m,v,g])>1||o(h,m)})})}function o(h,m){try{l(n[h](m))}catch(v){A(i[0][3],v)}}function l(h){h.value instanceof Py?Promise.resolve(h.value.v).then(c,u):A(i[0][2],h)}function c(h){o("next",h)}function u(h){o("throw",h)}function A(h,m){h(m),i.shift(),i.length&&o(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function nge(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=sge(t),[n,a]=r.tee();return{stream:ige(n),response:age(a)}}async function age(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return bR(oge(t));t.push(a)}}function ige(e){return rge(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Py(r.read());if(a)break;yield yield Py(bR(n))}})}function sge(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return i();function i(){return t.read().then(({value:s,done:o})=>{if(o){if(a.trim()){n.error(new Fo("Failed to parse stream"));return}n.close();return}a+=s;let l=a.match(t8),c;for(;l;){try{c=JSON.parse(l[1])}catch{n.error(new Fo(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(c),a=a.substring(l[0].length),l=a.match(t8)}return i()}).catch(s=>{let o=s;throw o.stack=s.stack,o.name==="AbortError"?o=new FY("Request aborted when reading from the stream"):o=new Fo("Error reading from the stream"),o})}}})}function oge(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const i of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=i.citationMetadata,r.candidates[a].groundingMetadata=i.groundingMetadata,r.candidates[a].finishReason=i.finishReason,r.candidates[a].finishMessage=i.finishMessage,r.candidates[a].safetyRatings=i.safetyRatings,i.content&&i.content.parts){r.candidates[a].content||(r.candidates[a].content={role:i.content.role||"user",parts:[]});const s={};for(const o of i.content.parts)o.text&&(s.text=o.text),o.functionCall&&(s.functionCall=o.functionCall),o.executableCode&&(s.executableCode=o.executableCode),o.codeExecutionResult&&(s.codeExecutionResult=o.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),r.candidates[a].content.parts.push(s)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DY(e,t,r,n){const a=await Mb(t,Yp.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return nge(a)}async function RY(e,t,r,n){const i=await(await Mb(t,Yp.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:bR(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PY(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function My(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return lge(t)}function lge(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const i of e)"functionResponse"in i?(r.parts.push(i),a=!0):(t.parts.push(i),n=!0);if(n&&a)throw new Fo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Fo("No content is provided for sending chat message.");return n?t:r}function cge(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new r0("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const i=My(e);n.contents=[i]}return{generateContentRequest:n}}function r8(e){let t;return e.contents?t=e:t={contents:[My(e)]},e.systemInstruction&&(t.systemInstruction=PY(e.systemInstruction)),t}function uge(e){return typeof e=="string"||Array.isArray(e)?{content:My(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],dge={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function fge(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Fo(`First content should be with role 'user', got ${n}`);if(!qj.includes(n))throw new Fo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(qj)}`);if(!Array.isArray(a))throw new Fo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Fo("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const l of n8)l in o&&(i[l]+=1);const s=dge[n];for(const o of n8)if(!s.includes(o)&&i[o]>0)throw new Fo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function a8(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8="SILENT_ERROR";class Age{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(fge(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,i,s,o,l;await this._sendPromise;const c=My(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},A=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>RY(this._apiKey,this.model,u,A)).then(m=>{var v;if(a8(m.response)){this._history.push(c);const g=Object.assign({parts:[],role:"model"},(v=m.response.candidates)===null||v===void 0?void 0:v[0].content);this._history.push(g)}else{const g=Ih(m.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,i,s,o,l;await this._sendPromise;const c=My(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},A=Object.assign(Object.assign({},this._requestOptions),r),h=DY(this._apiKey,this.model,u,A);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(i8)}).then(m=>m.response).then(m=>{if(a8(m)){this._history.push(c);const v=Object.assign({},m.candidates[0].content);v.role||(v.role="model"),this._history.push(v)}else{const v=Ih(m);v&&console.warn(`sendMessageStream() was unsuccessful. ${v}. Inspect response object for details.`)}}).catch(m=>{m.message!==i8&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hge(e,t,r,n){return(await Mb(t,Yp.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pge(e,t,r,n){return(await Mb(t,Yp.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function mge(e,t,r,n){const a=r.requests.map(s=>Object.assign(Object.assign({},s),{model:t}));return(await Mb(t,Yp.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=PY(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=r8(t),i=Object.assign(Object.assign({},this._requestOptions),r);return RY(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),i)}async generateContentStream(t,r={}){var n;const a=r8(t),i=Object.assign(Object.assign({},this._requestOptions),r);return DY(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),i)}startChat(t){var r;return new Age(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=cge(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return hge(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=uge(t),a=Object.assign(Object.assign({},this._requestOptions),r);return pge(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return mge(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Fo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new s8(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new r0("Cached content must contain a `name` field.");if(!t.model)throw new r0("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const s of a)if(r!=null&&r[s]&&t[s]&&(r==null?void 0:r[s])!==t[s]){if(s==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new r0(`Different value for "${s}" specified in modelParams (${r[s]}) and cachedContent (${t[s]})`)}const i=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new s8(this.apiKey,i,n)}}const wR="horario_asignaciones",MY="horarios_generados",gge="usuarios",LY=e=>{const t=e.data();return{id:e.id,...t}},vge=e=>{const t=tr(Ft(Tt,wR));return yr(t,n=>{const a=n.docs.map(i=>LY(i));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},xge=async e=>{try{return(await Da(Ft(Tt,wR),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},yge=async e=>{try{const t=br(Tt,wR,e);await Fs(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},o8=async e=>{try{const t=br(Tt,MY,"global");await ro(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},bge=e=>{const t=br(Tt,MY,"global");return yr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},wge=e=>{const t=tr(Ft(Tt,gge),On("profile","==",Ht.PROFESORADO));return yr(t,n=>{const a=n.docs.map(i=>LY(i));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},Cge=({horarios:e})=>Object.keys(e).length===0?d.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:d.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):d.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:d.jsxs("table",{className:"min-w-full border-collapse",children:[d.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:d.jsxs("tr",{children:[d.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),d.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Ni.map(t=>d.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),d.jsx("tbody",{children:qC.map(t=>d.jsxs(ft.Fragment,{children:[d.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:d.jsx("th",{colSpan:2+Ni.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),HI.map(({bloque:r,inicio:n,fin:a})=>d.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[d.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),d.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Ni.map(i=>{var o,l;const s=(l=(o=e[i])==null?void 0:o[t])==null?void 0:l[r];return d.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:s!=null&&s.asignatura?d.jsxs("div",{className:"flex flex-col justify-center h-full",children:[d.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:s.asignatura}),d.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",s.profesor,")"]})]}):d.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${i}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),Ege=()=>{const[e,t]=L.useState([]),[r,n]=L.useState({curso:"",asignatura:"",profesor:""}),[a,i]=L.useState([]),[s,o]=L.useState({}),[l,c]=L.useState(Ni[0]),[u,A]=L.useState(!1),[h,m]=L.useState(!0),[v,g]=L.useState(null),[y,w]=L.useState(null),[T,N]=L.useState(null),[F,B]=L.useState({asignatura:"",profesor:""}),[D,E]=L.useState("edicion"),[S,k]=L.useState("");L.useEffect(()=>{m(!0);const z=vge(t),X=bge(o),K=wge(se=>{const U=se.map(Y=>Y.nombreCompleto).sort();i(U),m(!1)});return()=>{z(),X(),K()}},[]);const H=async z=>{if(z.preventDefault(),g(null),!r.curso||!r.asignatura||!r.profesor){g("Todos los campos de la asignación son obligatorios.");return}try{await xge({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(X){g(X instanceof Error?X.message:"Error al guardar la asignación.")}},P=async z=>{try{await yge(z)}catch(X){g(X instanceof Error?X.message:"Error al eliminar la asignación.")}},M=async()=>{if(e.length===0){g("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}A(!0),g(null),w(null);try{const z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=new Wi(z),K=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${qC.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(HI,null,2)}
                - Cursos del liceo: ${Ni.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(Ame,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${S||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,ne=(await(await X.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),de=JSON.parse(ne);await o8(de),w("¡Horario generado y guardado con éxito!")}catch(z){console.error("Error al generar horario con IA:",z),g("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{A(!1)}},Q=(z,X,K)=>{N({dia:z,bloque:X}),B({asignatura:(K==null?void 0:K.asignatura)||"",profesor:(K==null?void 0:K.profesor)||""})},V=async()=>{if(!T)return;const{dia:z,bloque:X}=T,K=JSON.parse(JSON.stringify(s));K[l]||(K[l]={}),K[l][z]||(K[l][z]={}),K[l][z][X]={asignatura:F.asignatura||null,profesor:F.profesor||null};try{await o8(K),N(null)}catch(se){g(se instanceof Error?se.message:"Error al guardar la edición.")}},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=()=>{const z=s[l]||{};return d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[d.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),qC.map(X=>d.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:X},X))]})}),d.jsx("tbody",{children:HI.map(({bloque:X,inicio:K,fin:se})=>d.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[d.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[d.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:X}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${K} - ${se}`})]}),qC.map(U=>{var ne;const Y=(T==null?void 0:T.dia)===U&&(T==null?void 0:T.bloque)===X,Z=(ne=z[U])==null?void 0:ne[X];return d.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!Y&&Q(U,X,Z),children:Y?d.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[d.jsx("input",{type:"text",placeholder:"Asignatura",value:F.asignatura,onChange:de=>B(xe=>({...xe,asignatura:de.target.value})),className:te+" text-xs mb-1"}),d.jsx("input",{type:"text",placeholder:"Profesor",value:F.profesor,onChange:de=>B(xe=>({...xe,profesor:de.target.value})),className:te+" text-xs"}),d.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[d.jsx("button",{onClick:()=>N(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),d.jsx("button",{onClick:V,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Z!=null&&Z.asignatura?d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Z.asignatura}),d.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Z.profesor,")"]})]}):d.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${U}-${X}`)})]},X))})]})})},re=()=>d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),d.jsxs("form",{onSubmit:H,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),d.jsxs("select",{name:"curso",value:r.curso,onChange:z=>n(X=>({...X,curso:z.target.value})),className:te,children:[d.jsx("option",{value:"",children:"Seleccione"}),Ni.map(z=>d.jsx("option",{value:z,children:z},z))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),d.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:z=>n(X=>({...X,asignatura:z.target.value})),className:te,children:[d.jsx("option",{value:"",children:"Seleccione"}),cc.map(z=>d.jsx("option",{value:z,children:z},z))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),d.jsxs("select",{name:"profesor",value:r.profesor,onChange:z=>n(X=>({...X,profesor:z.target.value})),className:te,children:[d.jsx("option",{value:"",children:"Seleccione"}),a.map(z=>d.jsx("option",{value:z,children:z},z))]})]}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),d.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:d.jsx("ul",{className:"space-y-2",children:e.map(z=>d.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[d.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[z.curso," - ",z.asignatura," - ",d.jsx("strong",{children:z.profesor})]}),d.jsx("button",{onClick:()=>P(z.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},z.id))})})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),d.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:S,onChange:z=>k(z.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:te})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("button",{onClick:M,disabled:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[u&&d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u?"Generando...":"Generar Horario Completo"]}),v&&d.jsx("p",{className:"text-red-600",children:v}),y&&d.jsx("p",{className:"text-green-600",children:y})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),d.jsx("select",{id:"selectCurso",value:l,onChange:z=>c(z.target.value),className:te+" md:w-1/3",children:Ni.map(z=>d.jsx("option",{value:z,children:z},z))})]}),Object.keys(s).length>0?W():d.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:d.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return h?d.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:d.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[d.jsx("button",{onClick:()=>E("edicion"),className:`${D==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),d.jsx("button",{onClick:()=>E("global"),className:`${D==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),D==="edicion"?re():d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),d.jsx(Cge,{horarios:s})]})]})},ZS="acciones",_ge=async()=>{try{const e=tr(Ft(en,ZS),an("fechaRegistro","desc"));return(await $i(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedagógicas")}},Sge=async e=>{try{return{id:(await Da(Ft(en,ZS),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acción:",t),new Error("No se pudo crear la acción pedagógica")}},l8=async(e,t)=>{try{const r=br(en,ZS,e);await Fb(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",e),new Error("No se pudo actualizar la acción pedagógica")}},Tge=async e=>{try{const t=br(en,ZS,e);await Fs(t)}catch(t){throw console.error("Error al eliminar acción:",t,"ID:",e),new Error("No se pudo eliminar la acción pedagógica")}},c8={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},Nge={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Bge=()=>{const[e,t]=L.useState([]),[r,n]=L.useState(!1),[a,i]=L.useState(null),[s,o]=L.useState(c8),[l,c]=L.useState(null),[u,A]=L.useState(""),[h,m]=L.useState(""),[v,g]=L.useState(""),y=L.useCallback(async()=>{n(!0);try{const k=await _ge();t(k),i(null)}catch(k){console.error("Error al cargar acciones:",k),i("No se pudieron cargar las acciones pedagógicas.")}finally{n(!1)}},[]);L.useEffect(()=>{y()},[y]);const w=L.useCallback(k=>{const{name:H,value:P}=k.target;o(M=>({...M,[H]:P}))},[]),T=L.useCallback(()=>{o(c8),c(null),i(null)},[]),N=L.useCallback(async k=>{if(k.preventDefault(),!s.responsable||!s.area||!s.descripcion||!s.fechaCumplimiento){i("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{l?await l8(l,s):await Sge(s),await y(),T()}catch(H){console.error("Error al guardar acción:",H),i("Error al guardar la acción.")}},[s,l,y,T]),F=L.useCallback(k=>{window.scrollTo({top:0,behavior:"smooth"}),c(k.id),o({...k,enlaceDocumento:k.enlaceDocumento||""})},[]),B=L.useCallback(async k=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await Tge(k),await y()}catch(H){console.error("Error al eliminar acción:",H),i("No se pudo eliminar la acción.")}},[y]),D=L.useCallback(async k=>{try{const H=e.find(P=>P.id===k);if(H){const M=(v2.indexOf(H.estado)+1)%v2.length,Q=v2[M];await l8(k,{estado:Q}),await y()}}catch(H){console.error("Error al cambiar estado:",H),i("No se pudo cambiar el estado de la acción.")}},[e,y]),E=L.useMemo(()=>e.filter(k=>{const H=u===""||k.responsable.toLowerCase().includes(u.toLowerCase())||k.descripcion.toLowerCase().includes(u.toLowerCase()),P=h===""||k.area===h,M=v===""||k.estado===v;return H&&P&&M}),[e,u,h,v]),S="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),a&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),d.jsxs("form",{onSubmit:N,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),d.jsx("input",{type:"date",name:"fechaRegistro",value:s.fechaRegistro,onChange:w,className:S})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),d.jsx("input",{type:"text",name:"responsable",value:s.responsable,onChange:w,placeholder:"Nombre del responsable",className:S})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),d.jsxs("select",{name:"area",value:s.area,onChange:w,className:S,children:[d.jsx("option",{value:"",children:"Seleccione un área"}),Mj.map(k=>d.jsx("option",{value:k,children:k},k))]})]}),d.jsxs("div",{className:"lg:col-span-3",children:[d.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),d.jsx("textarea",{name:"descripcion",value:s.descripcion,onChange:w,rows:3,placeholder:"Detalle de la acción a realizar...",className:S})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),d.jsx("input",{type:"date",name:"fechaCumplimiento",value:s.fechaCumplimiento,onChange:w,className:S})]}),d.jsxs("div",{className:"lg:col-span-2",children:[d.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),d.jsx("input",{type:"url",name:"enlaceDocumento",value:s.enlaceDocumento||"",onChange:w,placeholder:"https://ejemplo.com/documento",className:S})]})]}),d.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&d.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:u,onChange:k=>A(k.target.value),className:S+" md:col-span-1"}),d.jsxs("select",{value:h,onChange:k=>m(k.target.value),className:S,children:[d.jsx("option",{value:"",children:"Filtrar por Área"}),Mj.map(k=>d.jsx("option",{value:k,children:k},k))]}),d.jsxs("select",{value:v,onChange:k=>g(k.target.value),className:S,children:[d.jsx("option",{value:"",children:"Filtrar por Estado"}),v2.map(k=>d.jsx("option",{value:k,children:k},k))]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):E.length>0?E.map(k=>d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[d.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:k.responsable}),d.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:k.area})]}),d.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:k.descripcion}),d.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[d.jsxs("div",{children:["Reg: ",k.fechaRegistro]}),d.jsxs("div",{className:"font-semibold",children:["Comp: ",k.fechaCumplimiento]})]}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:d.jsx("button",{onClick:()=>D(k.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Nge[k.estado]}`,children:k.estado})}),d.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[k.enlaceDocumento&&d.jsx("a",{href:k.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:"🔗"}),d.jsx("button",{onClick:()=>F(k),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),d.jsx("button",{onClick:()=>B(k.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},k.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},eT="planificaciones",OY="actividades_calendario",UY=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},kge=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await Da(Ft(Tt,eT),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},Ige=async(e,t,r)=>{try{const n=br(Tt,eT,e),a=await Ib(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Fb(n,{...t,fechaActualizacion:Ar.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},Fge=async(e,t)=>{try{const r=br(Tt,eT,e),n=await Ib(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Fs(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},Dge=(e,t)=>{const r=tr(Ft(Tt,eT),On("userId","==",e),an("fechaCreacion","desc"));return yr(r,n=>{const a=n.docs.map(UY);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},Rge=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:Ar.fromDate(new Date),fechaActualizacion:Ar.fromDate(new Date)};return(await Da(Ft(Tt,OY),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Pge=(e,t)=>{const r=tr(Ft(Tt,OY),On("userId","==",e),an("fecha","desc"));return yr(r,n=>{const a=n.docs.map(UY);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},Mge=e=>{const[t,r]=L.useState([]),[n,a]=L.useState(!0),[i,s]=L.useState(null);return L.useEffect(()=>e?(a(!0),Dge(e,A=>{r(A),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:i,save:async u=>{try{return s(null),await kge(u,e)}catch(A){throw s(A.message||"Error al guardar planificación"),A}},update:async(u,A)=>{try{s(null),await Ige(u,A,e)}catch(h){throw s(h.message||"Error al actualizar planificación"),h}},remove:async u=>{try{s(null),await Fge(u,e)}catch(A){throw s(A.message||"Error al eliminar planificación"),A}}}},QI=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},Lge=e=>{const[t,r]=L.useState([]),[n,a]=L.useState(!0),[i,s]=L.useState(null);L.useEffect(()=>e?Pge(e,c=>{r(c),a(!1)}):void 0,[e]);const o=L.useCallback(async l=>{try{return s(null),await Rge(l,e)}catch(c){throw s(c instanceof Error?c.message:"Error al guardar actividad"),c}},[e]);return{actividades:t,loading:n,error:i,save:o}},Oge=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,i]=L.useState(e),s=l=>{i({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),t()}catch(l){console.error("Error al guardar lección:",l)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),d.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,c])=>d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),d.jsx("textarea",{name:l,value:c,onChange:s,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[d.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),d.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Uge=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[i,s]=L.useState(e.progreso??0),[o,l]=L.useState(!1),c=async u=>{const A=parseInt(u.target.value,10);s(A),l(!0);try{e.id&&a&&(await a(e.id,{progreso:A}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),s(e.progreso??0)}finally{l(!1)}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("input",{type:"range",min:0,max:100,value:i,onChange:c,disabled:o||n}),d.jsxs("span",{className:"font-bold w-12",children:[i,"%"]}),o&&d.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),d.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((u,A)=>d.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[d.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",A+1,": ",u.actividades]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Objetivo:"})," ",u.objetivosAprendizaje]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Contenidos:"})," ",u.contenidosConceptuales]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Habilidad (Bloom):"})," ",u.habilidadesBloom]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Perfil de Egreso:"})," ",u.perfilEgreso]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Interdisciplinariedad:"})," ",u.asignaturasInterdisciplinariedad]})]}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsx("button",{onClick:()=>t(A,u),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),d.jsx("button",{onClick:()=>r(u,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},A))})]})},jge=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[i,s]=L.useState(e),[o,l]=L.useState(!1),c=A=>{const{name:h,value:m}=A.target,[v,g]=h.split(".");s(v==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[g]:m}}):y=>({...y,[h]:m}))},u=async()=>{l(!0);try{await r(i)}catch(A){console.error("Error al guardar plan de clase:",A)}finally{l(!1)}};return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),d.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),d.jsx("textarea",{name:"momentosClase.inicio",value:i.momentosClase.inicio,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),d.jsx("textarea",{name:"momentosClase.desarrollo",value:i.momentosClase.desarrollo,onChange:c,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),d.jsx("textarea",{name:"momentosClase.cierre",value:i.momentosClase.cierre,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),d.jsx("div",{className:"text-right mt-6",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),d.jsxs("button",{onClick:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},Hge=({userId:e})=>{const{actividades:t,save:r}=Lge(e),[n,a]=L.useState("list"),[i,s]=L.useState(null),[o,l]=L.useState(!1),[c,u]=L.useState(!1),A={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=L.useState(A);L.useEffect(()=>{n==="summary"&&i&&v()},[n,i,e]);const v=async()=>{if(i)try{u(!1)}catch(D){console.error("Error al verificar evento en calendario:",D)}},g=D=>{const{name:E,value:S}=D.target;m(k=>({...k,[E]:S}))},y=(D,E,S)=>{m(k=>({...k,tareas:k.tareas.map(H=>H.id===D?{...H,[E]:S}:H)}))},w=()=>{m(D=>({...D,tareas:[...D.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},T=D=>{m(E=>({...E,tareas:E.tareas.filter(S=>S.id!==D)}))},N=async D=>{D.preventDefault(),l(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(S=>S.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{QI("Planificación - Actividad Calendario");const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=(await(await new Wi(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),V={...h,objetivo:Q.replace(/(\*\*|\*)/g,"")},te=await r(V),W={...V,id:te};s(W),a("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const k={...h,objetivo:"No generado"},H=await r(k),P={...k,id:H};s(P),a("summary")}catch(k){console.error("Error al guardar actividad:",k),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},F=async D=>{if(D)try{u(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?d.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d.jsxs("form",{onSubmit:N,className:"space-y-8",children:[d.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{name:"nombre",value:h.nombre,onChange:g,placeholder:"Nombre de la Actividad",className:B,required:!0,disabled:o}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:g,className:B,required:!0,disabled:o}),d.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:g,className:B,required:!0,disabled:o})]}),d.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:g,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:B,required:!0,disabled:o}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:g,placeholder:"Ubicación",className:B,required:!0,disabled:o}),d.jsx("input",{name:"participantes",value:h.participantes,onChange:g,placeholder:"Participantes",className:B,required:!0,disabled:o})]}),d.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:g,placeholder:"Recursos Generales Necesarios",rows:2,className:B,disabled:o})]})]}),d.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),d.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),d.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((D,E)=>d.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[d.jsx("button",{type:"button",onClick:()=>T(D.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),d.jsx("textarea",{value:D.descripcion,onChange:S=>y(D.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:B,required:!0,disabled:o}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[d.jsx("input",{value:D.responsable,onChange:S=>y(D.id,"responsable",S.target.value),placeholder:"Responsable",className:B,required:!0,disabled:o}),d.jsx("input",{value:D.recursos,onChange:S=>y(D.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:B,disabled:o})]})]},D.id))})]}),d.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[d.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),d.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),d.jsxs("div",{className:"flex justify-end gap-4",children:[d.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?d.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&i?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[d.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[d.jsx("span",{className:"text-2xl",children:"✓"}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),d.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),d.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[d.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),d.jsxs("div",{className:"space-y-4 text-sm",children:[d.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[d.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),d.jsx("span",{children:i.nombre})]}),d.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[d.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),d.jsx("span",{children:new Date(`${i.fecha}T${i.hora}`).toLocaleString("es-CL")})]}),d.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[d.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),d.jsx("p",{children:i.descripcion})]}),d.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[d.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),d.jsx("span",{children:i.ubicacion})]}),d.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[d.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),d.jsx("span",{children:i.participantes})]}),d.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[d.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),d.jsx("p",{children:i.recursosGenerales})]}),d.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[d.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),d.jsx("p",{children:i.objetivo})]})]}),d.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[d.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),d.jsx("button",{onClick:()=>F(i),disabled:c,className:`font-bold px-4 py-2 rounded-lg transition-colors ${c?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),d.jsx("button",{onClick:()=>{a("list"),s(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),d.jsx("button",{onClick:()=>{a("form"),m(A)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),d.jsx("div",{className:"space-y-3",children:t.length>0?t.map(D=>d.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.nombre}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(D.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",D.ubicacion]})]},D.id)):d.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Qge=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:i,loading:s}=Mge(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,c]=L.useState(o),[u,A]=L.useState(null),[h,m]=L.useState(!1),[v,g]=L.useState(null),[y,w]=L.useState("unidad"),[T,N]=L.useState(null),[F,B]=L.useState(null),D=L.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=L.useMemo(()=>{const K=e.cursos||[],se=new Set;return K.forEach(U=>{U.startsWith("1º")?se.add("1º Medio"):U.startsWith("2º")?se.add("2º Medio"):U.startsWith("3º")?se.add("3º Medio"):U.startsWith("4º")&&se.add("4º Medio")}),Array.from(se)},[e.cursos]);L.useEffect(()=>{c(K=>({...K,asignatura:D[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(K=>({id:K.id,autor:K.autor,tipo:K.tipo,coincideConUserId:K.autor===t}))})},[D,E,e,t,r]);const S=K=>{const{name:se,value:U}=K.target;c(Y=>({...Y,[se]:se==="cantidadClases"?parseInt(U,10):U}))},k=()=>{const{asignatura:K,nivel:se,nombreUnidad:U,contenidos:Y,cantidadClases:Z,observaciones:ne,ideasParaUnidad:de}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${K}
    - Nivel: ${se}
    - Nombre de la Unidad: "${U}"
    - Contenidos clave a trabajar (insumo principal): "${Y}"
    - Cantidad de clases para la unidad: ${Z}
    - Ideas y perspectiva del docente para la unidad: "${de||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${ne||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Z} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},H=async K=>{if(K.preventDefault(),m(!0),g(null),!l.contenidos||!l.nombreUnidad){g("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),m(!1);return}try{QI("Planificación - Unidad");const se="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Y=new Wi(se).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=k(),ne={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},Ae=(await(await Y.generateContent({contents:[{parts:[{text:Z}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ne}})).response).text(),ae=JSON.parse(Ae),ue={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:ae.objetivosAprendizaje,indicadoresEvaluacion:ae.indicadoresEvaluacion,detallesLeccion:ae.detallesLeccion};if(u)await a(u.id,ue),A({...ue,id:u.id});else{const le=await n(ue);A({...ue,id:le})}}catch(se){console.error("Error al generar planificación con IA",se),g("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{m(!1)}},P=async(K,se)=>{m(!0),g(null);const U=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${se.asignatura}
    - Nivel: ${se.nivel}
    - Objetivo de la clase: ${K.objetivosAprendizaje}
    - Contenidos: ${K.contenidosConceptuales}
    - Actividades sugeridas: ${K.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{QI("Planificación - Utilizar Clase");const Y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ne=new Wi(Y).getGenerativeModel({model:"gemini-1.5-flash-latest"}),de={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ae=(await(await ne.generateContent({contents:[{parts:[{text:U}]}],generationConfig:{responseMimeType:"application/json",responseSchema:de}})).response).text(),ue=JSON.parse(ae),le={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:se.asignatura,nivel:se.nivel,contenidos:K.contenidosConceptuales,observaciones:"",nombreClase:K.actividades,duracionClase:80,momentosClase:ue,detalleLeccionOrigen:K};await n(le),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),w("clase")}catch(Y){console.error("Error al generar plan de clase con IA",Y),g("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{m(!1)}},M=K=>{K.tipo==="Unidad"&&(c({asignatura:K.asignatura,nivel:K.nivel,nombreUnidad:K.nombreUnidad,contenidos:K.contenidos,cantidadClases:K.cantidadClases,observaciones:K.observaciones,ideasParaUnidad:K.ideasParaUnidad||""}),A(K),window.scrollTo({top:0,behavior:"smooth"}))},Q=async K=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await i(K),(u==null?void 0:u.id)===K&&(A(null),c(o))}catch(se){console.error("Error al eliminar planificación:",se),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},V=async K=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await i(K),(T==null?void 0:T.id)===K&&N(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(se){console.error("Error al eliminar plan de clase:",se),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},te=(K,se)=>{u&&B({planId:u.id,lessonIndex:K,lessonData:se})},W=async K=>{if(F)try{const{planId:se,lessonIndex:U}=F,Y=r.find(de=>de.id===se&&de.tipo==="Unidad");if(!Y)return;const Z=[...Y.detallesLeccion];Z[U]=K;const ne={...Y,detallesLeccion:Z};await a(se,ne),A(ne),B(null)}catch(se){console.error("Error al actualizar lección:",se),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},re="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=()=>d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),s?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):d.jsxs("form",{onSubmit:H,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),d.jsx("select",{name:"asignatura",value:l.asignatura,onChange:S,className:re,disabled:h,children:D.length>0?D.map(K=>d.jsx("option",{value:K,children:K},K)):d.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),d.jsx("select",{name:"nivel",value:l.nivel,onChange:S,className:re,disabled:h,children:E.length>0?E.map(K=>d.jsx("option",{value:K,children:K},K)):d.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:S,className:re,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),d.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[d.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:S,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:re,disabled:h})]}),d.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[d.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),d.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:S,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:re,disabled:h})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),d.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:S,className:re,min:"1",max:"20",disabled:h})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),d.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:S,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:re,disabled:h})]})]}),d.jsx("div",{className:"pt-4 text-right",children:d.jsx("button",{type:"submit",disabled:h||s,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):u?"Regenerar":"Generar Plan"})}),v&&d.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),u&&d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),d.jsx(Uge,{plan:u,onEditLesson:te,onUseLesson:P,onUpdatePlan:a,isLoading:h})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),s?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):d.jsx("div",{className:"space-y-4",children:r.filter(K=>K.tipo==="Unidad").length>0?r.filter(K=>K.tipo==="Unidad").map(K=>d.jsx("div",{className:`p-4 border rounded-lg ${(u==null?void 0:u.id)===K.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.nombreUnidad}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(K.fechaCreacion).toLocaleString("es-CL")]}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",K.contenidos]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>M(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),d.jsx("button",{onClick:()=>Q(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:"🗑️"})]})]})},K.id)):d.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),X=()=>{const K=r.filter(se=>se.tipo==="Clase").sort((se,U)=>new Date(U.fechaCreacion).getTime()-new Date(se.fechaCreacion).getTime());return T?d.jsx(jge,{plan:T,onBack:()=>N(null),onDelete:V,onSave:async se=>{try{await a(se.id,se),N(se)}catch(U){console.error("Error al actualizar plan de clase:",U),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),s?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):d.jsx("div",{className:"space-y-4",children:K.length>0?K.map(se=>d.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:se.nombreClase}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(se.fechaCreacion).toLocaleString("es-CL")]}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",se.contenidos]})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("button",{onClick:()=>N(se),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},se.id)):d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),d.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),d.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:d.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[d.jsx("button",{onClick:()=>w("unidad"),className:`${y==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),d.jsx("button",{onClick:()=>w("clase"),className:`${y==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),d.jsx("button",{onClick:()=>w("calendario"),className:`${y==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),y==="unidad"&&z(),y==="clase"&&X(),y==="calendario"&&d.jsx(Hge,{userId:t}),F&&d.jsx(Oge,{lesson:F.lessonData,onClose:()=>B(null),onSave:W,isLoading:h})]})},tT="events",Vge=async()=>{try{const e=tr(Ft(en,tT),an("date","asc"));return(await $i(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},zge=async e=>{try{return{id:(await Da(Ft(en,tT),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},Gge=async(e,t)=>{try{const r=br(en,tT,e);await Fb(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},qge=async e=>{try{const t=br(en,tT,e);await Fs(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},$ge=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Kge=e=>{switch(e.type){case pn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case pn.ACTO:return`Acto: ${e.ubicacion}`;case pn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case pn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},Wge=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:i,isLoading:s})=>{const[o,l]=L.useState({});L.useEffect(()=>{l(a||{type:pn.EVALUACION,subtype:hp.PRUEBA_PARCIAL,asignatura:cc[0],curso:Ni[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const c="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",u=g=>{const{name:y,value:w}=g.target;l(T=>({...T,[y]:w}))},A=g=>{l(y=>{if(y.type===pn.SALIDA_PEDAGOGICA){const w=y.cursos||[],T=w.includes(g)?w.filter(N=>N!==g):[...w,g];return{...y,cursos:T.sort()}}return y})},h=g=>{var w;g.preventDefault();let y;switch(o.type){case pn.EVALUACION:const T={date:i,type:pn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===hp.RUBRICA||o.subtype===hp.PAUTA_COTEJO)&&((w=o.enlace)!=null&&w.trim())&&(T.enlace=o.enlace.trim()),y=T;break;case pn.ACTO:y={date:i,type:pn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case pn.ACTIVIDAD_FOCALIZADA:y={date:i,type:pn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case pn.SALIDA_PEDAGOGICA:y={date:i,type:pn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(y)};if(!e)return null;const m=new Date(`${i}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),v=()=>{switch(o.type){case pn.EVALUACION:return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),d.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:u,required:!0,className:c,children:hme.map(g=>d.jsx("option",{value:g,children:g},g))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),d.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:u,required:!0,className:c,children:cc.map(g=>d.jsx("option",{value:g,children:g},g))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),d.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:u,required:!0,className:c,children:Ni.map(g=>d.jsx("option",{value:g,children:g},g))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),d.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:u,required:!0,rows:3,className:c})]}),(o.subtype===hp.RUBRICA||o.subtype===hp.PAUTA_COTEJO)&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),d.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:u,placeholder:"https://...",className:c})]})]});case pn.ACTO:case pn.ACTIVIDAD_FOCALIZADA:return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),d.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:u,required:!0,className:c})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),d.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:u,required:!0,className:c})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),d.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:u,required:!0,className:c})]})]});case pn.SALIDA_PEDAGOGICA:return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),d.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:u,required:!0,className:c})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),d.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:u,required:!0,className:c})]}),d.jsxs("fieldset",{children:[d.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),d.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:Ni.map(g=>d.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[d.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(g),onChange:()=>A(g),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),d.jsx("span",{children:g})]},g))})]})]});default:return null}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:t,children:d.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:g=>g.stopPropagation(),children:d.jsxs("form",{onSubmit:h,children:[d.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:a?"Editar Evento":"Agregar Evento"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:m}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),d.jsx("select",{id:"type",name:"type",value:o.type,onChange:u,className:c,children:Object.values(pn).map(g=>d.jsx("option",{value:g,children:g},g))})]}),v()]})]}),d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[d.jsx("div",{children:a&&n&&d.jsx("button",{type:"button",onClick:n,disabled:s,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:s?"Eliminando...":"Eliminar"})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"button",onClick:t,disabled:s,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:s?"Guardando...":"Guardar"})]})]})]})})})},Yge=({profile:e})=>{const[t,r]=L.useState(new Date),[n,a]=L.useState([]),[i,s]=L.useState(!1),[o,l]=L.useState(null),[c,u]=L.useState(!1),[A,h]=L.useState(Object.values(pn)),[m,v]=L.useState(!1),[g,y]=L.useState(null),[w,T]=L.useState(null),N=L.useCallback(async()=>{s(!0);try{const P=await Vge();a(P),l(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),l("No se pudieron cargar los eventos desde la nube.")}finally{s(!1)}},[]);L.useEffect(()=>{N()},[N]);const F=L.useMemo(()=>{const P=t.getFullYear(),M=t.getMonth(),Q=new Date(P,M,1).getDay(),V=new Date(P,M+1,0).getDate(),te=[];let W=1;for(let re=0;re<6;re++){const z=[];for(let X=0;X<7;X++)re===0&&X<Q||W>V?z.push(null):(z.push(new Date(P,M,W)),W++);if(te.push(z),W>V)break}return te},[t]),B=P=>{h(M=>M.includes(P)?M.filter(Q=>Q!==P):[...M,P])},D=()=>{A.length===Object.values(pn).length?h([]):h(Object.values(pn))},E=P=>{e!==Ht.ESTUDIANTE&&(y(P.toISOString().split("T")[0]),T(null),v(!0))},S=(P,M)=>{M.stopPropagation(),e!==Ht.ESTUDIANTE&&(y(P.date),T(P),v(!0))},k=async P=>{u(!0);try{w?await Gge(w.id,P):await zge(P),await N(),v(!1)}catch(M){console.error("Error al guardar evento:",M);const Q=M instanceof Error?M.message:"Error desconocido";l(`Error al guardar el evento: ${Q}`)}finally{u(!1)}},H=async()=>{if(w){u(!0);try{await qge(w.id),await N(),v(!1)}catch(P){console.error("Error al eliminar evento:",P);const M=P instanceof Error?P.message:"Error desconocido";l(`No se pudo eliminar el evento: ${M}`)}finally{u(!1)}}};return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),i&&d.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!i&&n.length===0&&d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),d.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),d.jsx("div",{className:"ml-3",children:d.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),d.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[d.jsx("button",{onClick:D,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:A.length===Object.values(pn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(pn).map(P=>d.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${A.includes(P)?`shadow-sm ${Uh[P].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[d.jsx("input",{type:"checkbox",checked:A.includes(P),onChange:()=>B(P),className:"hidden"}),d.jsx("span",{children:Uh[P].icon}),d.jsx("span",{children:Uh[P].label})]},P))]})]}),d.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[d.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[d.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),d.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),d.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),d.jsx("div",{className:"grid grid-cols-7",children:$ge.map(P=>d.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:P},P))}),d.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:F.flat().map((P,M)=>{const Q=P&&P.toDateString()===new Date().toDateString(),V=P==null?void 0:P.toISOString().split("T")[0],te=V?n.filter(W=>W.date===V&&A.includes(W.type)):[];return d.jsx("div",{onClick:()=>P&&E(P),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${P?e!==Ht.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:P&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:`self-end text-sm font-semibold ${Q?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:P.getDate()}),d.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:te.map(W=>d.jsxs("div",{onClick:re=>S(W,re),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Uh[W.type].color}`,children:[d.jsx("span",{children:Uh[W.type].icon}),d.jsx("span",{className:"truncate",children:Kge(W)})]},W.id))}),e!==Ht.ESTUDIANTE&&d.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},M)})})]}),m&&d.jsx(Wge,{isOpen:m,onClose:()=>v(!1),onSave:k,onDelete:H,event:w,date:g,isLoading:c})]})},rT="anuncios",Xge=async()=>{try{const e=tr(Ft(en,rT),an("fechaPublicacion","desc"));return(await $i(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},Jge=async e=>{try{return{id:(await Da(Ft(en,rT),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},Zge=async(e,t)=>{try{const r=br(en,rT,e);await Fb(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},eve=async e=>{try{const t=br(en,rT,e);await Fs(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},u8=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],tve=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState(!1),[i,s]=L.useState(null),[o,l]=L.useState({titulo:"",mensaje:"",adjunto:""}),[c,u]=L.useState({tipo:"Todos",cursos:[]}),A=L.useCallback(async()=>{a(!0);try{const E=await Xge();r(E),s(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),s("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);L.useEffect(()=>{A()},[A]);const h=E=>{const{name:S,value:k}=E.target;l(H=>({...H,[S]:k}))},m=E=>{u({tipo:E,cursos:E==="Cursos"?[]:void 0})},v=E=>{u(S=>{var H;if(S.tipo!=="Cursos")return S;const k=(H=S.cursos)!=null&&H.includes(E)?S.cursos.filter(P=>P!==E):[...S.cursos||[],E];return{...S,cursos:k}})},g=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(c.tipo==="Cursos"&&(!c.cursos||c.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:c,...o};await Jge(S),await A(),l({titulo:"",mensaje:"",adjunto:""}),u({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),s("Error al publicar el anuncio en la nube.")}},y=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await eve(E),await A()}catch(S){console.error("Error al eliminar anuncio:",S),s("No se pudo eliminar el anuncio en la nube.")}},w=async E=>{try{const S=t.find(k=>k.id===E);S&&(await Zge(E,{destacado:!S.destacado}),await A())}catch(S){console.error("Error al actualizar anuncio:",S),s("No se pudo actualizar el estado del anuncio en la nube.")}},T=L.useMemo(()=>[...t].sort((E,S)=>E.destacado&&!S.destacado?-1:!E.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),N=L.useMemo(()=>{const E=e.profile,S=e.curso;return T.filter(k=>{if(E===Ht.SUBDIRECCION)return!0;if(!k.destinatarios)return E!==Ht.ESTUDIANTE;const{tipo:H,cursos:P}=k.destinatarios;return H==="Todos"||H==="Profesores"&&E===Ht.PROFESORADO||H==="Coordinación TP"&&E===Ht.COORDINACION_TP?!0:H==="Cursos"?E===Ht.ESTUDIANTE?P==null?void 0:P.includes(S||""):!0:!1})},[T,e]),F=E=>e.profile===Ht.ESTUDIANTE?!1:e.profile===Ht.SUBDIRECCION||e.profile===E.profileCreador,B=()=>e.profile===Ht.SUBDIRECCION||e.profile===Ht.PROFESORADO,D="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&d.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),i&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),e.profile!==Ht.ESTUDIANTE?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),d.jsxs("form",{onSubmit:g,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),d.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:D})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),d.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:D})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),d.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>d.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[d.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:c.tipo===E,onChange:()=>m(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),d.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),c.tipo==="Cursos"&&d.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ni.map(E=>{var S;return d.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:(S=c.cursos)==null?void 0:S.includes(E),onChange:()=>v(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),d.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:D})]}),d.jsx("div",{className:"pt-2 text-right",children:d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&N.length===0&&d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&N.length>0&&N.map((E,S)=>{const k=u8[S%u8.length];return d.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${k.bg} ${k.rotate}`,children:[E.destacado&&d.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:d.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),d.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),d.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&d.jsx("div",{className:"font-sans text-sm mb-4",children:d.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),d.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:E.autor}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),d.jsxs("div",{className:"flex items-center",children:[B()&&d.jsx("button",{onClick:()=>w(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:d.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),F(E)&&d.jsx("button",{onClick:()=>y(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},jY="api_logs",rve=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:Ar.fromDate(new Date)};await Da(Ft(Tt,jY),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},nve=e=>{const t=tr(Ft(Tt,jY),an("timestamp","desc"));return yr(t,n=>{const a=n.docs.map(i=>{var o,l;const s=i.data();return{id:i.id,...s,timestamp:((l=(o=s.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||s.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},yA=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}rve(e,t)},CR="actas_de_reunion",ave=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},ive=e=>{const t=tr(Ft(Tt,CR),an("fechaCreacion","desc"));return yr(t,n=>{const a=n.docs.map(i=>ave(i));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},sve=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:Ar.fromDate(new Date(e.fechaCreacion))};return(await Da(Ft(Tt,CR),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},ove=async e=>{try{const t=br(Tt,CR,e);await Fs(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},HY=window.SpeechRecognition||window.webkitSpeechRecognition,d8=!!HY,lve=({isListening:e})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),cve=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState(null),[i,s]=L.useState({tipoReunion:oB[0],asistentes:"",textoReunion:""}),[o,l]=L.useState(!1),[c,u]=L.useState(!1),[A,h]=L.useState(!0),[m,v]=L.useState(null),g=L.useRef(null);L.useEffect(()=>{h(!0);const E=ive(S=>{r(S),!n&&S.length>0&&a(S[0]),h(!1)});return()=>E()},[n]);const y=E=>{const{name:S,value:k}=E.target;s(H=>({...H,[S]:k}))},w=L.useCallback(()=>{var E;if(!d8){v("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=g.current)==null||E.stop():(g.current=new HY,g.current.lang="es-CL",g.current.continuous=!0,g.current.interimResults=!0,g.current.onresult=S=>{let k="";for(let H=S.resultIndex;H<S.results.length;++H)S.results[H].isFinal&&(k+=S.results[H][0].transcript+". ");s(H=>({...H,textoReunion:H.textoReunion+k}))},g.current.onstart=()=>l(!0),g.current.onend=()=>l(!1),g.current.onerror=S=>{console.error("Speech recognition error",S.error),v(`Error de reconocimiento: ${S.error}`),l(!1)},g.current.start())},[o]),T=async E=>{E.preventDefault();const{tipoReunion:S,asistentes:k,textoReunion:H}=i;if(!S||!k.trim()||!H.trim()){v("Todos los campos son obligatorios.");return}u(!0),v(null);try{yA("Generador de Actas");const P="",Q=new globalThis.GoogleGenerativeAI(P).getGenerativeModel({model:"gemini-pro"}),V=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${H}"
                
                Asistentes a la reunión para referencia de nombres: ${k}
            `,z=(await(await Q.generateContent(V)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(z),K={fechaCreacion:new Date().toISOString(),...i,...X},se=await sve(K,e);s({tipoReunion:oB[0],asistentes:"",textoReunion:""})}catch(P){console.error("Error al analizar acta con IA:",P),v("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{u(!1)}},N=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await ove(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},F=E=>{a(E)},B=E=>E.temas||E.acuerdos||E.plazos||E.responsables?d.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),d.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((k,H)=>d.jsx("li",{children:k},H))})]}),E.acuerdos&&E.acuerdos.length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),d.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((k,H)=>d.jsx("li",{children:k},H))})]}),E.plazos&&E.plazos.length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),d.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((k,H)=>d.jsx("li",{children:k},H))})]}),E.responsables&&E.responsables.length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),d.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((k,H)=>d.jsx("li",{children:k},H))})]})]}):null,D="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A?d.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[d.jsxs("div",{className:"md:col-span-1 space-y-8",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),d.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),d.jsx("div",{className:"ml-3",children:d.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",d.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),d.jsxs("form",{onSubmit:T,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),d.jsx("select",{name:"tipoReunion",value:i.tipoReunion,onChange:y,required:!0,className:D,children:oB.map(E=>d.jsx("option",{value:E,children:E},E))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),d.jsx("textarea",{name:"asistentes",value:i.asistentes,onChange:y,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:D})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),d.jsxs("div",{className:"relative",children:[d.jsx("textarea",{name:"textoReunion",value:i.textoReunion,onChange:y,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:D}),d8&&d.jsx("button",{type:"button",onClick:w,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:d.jsx(lve,{isListening:o})})]})]}),m&&d.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),d.jsx("div",{className:"pt-2 text-right",children:d.jsx("button",{type:"submit",disabled:c,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),d.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>d.jsxs("button",{onClick:()=>F(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[d.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),d.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?d.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),d.jsx("button",{onClick:()=>N(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[d.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),d.jsx("h2",{children:"Asistentes"}),d.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,S)=>E.trim()&&d.jsx("li",{children:E.trim()},S))}),B(n),d.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),d.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:d.jsx("p",{children:n.textoReunion})})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[d.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),d.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},uve="modulepreload",dve=function(e){return"/"+e},f8={},$E=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let s=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=s(r.map(c=>{if(c=dve(c),c in f8)return;f8[c]=!0;const u=c.endsWith(".css"),A=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${A}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":uve,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,v)=>{h.addEventListener("load",m),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};function aa(e){"@babel/helpers - typeof";return aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aa(e)}var Do=Uint8Array,ic=Uint16Array,ER=Int32Array,nT=new Do([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),aT=new Do([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),VI=new Do([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),QY=function(e,t){for(var r=new ic(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new ER(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},VY=QY(nT,2),zY=VY.b,zI=VY.r;zY[28]=258,zI[258]=28;var GY=QY(aT,0),fve=GY.b,A8=GY.r,GI=new ic(32768);for(var ka=0;ka<32768;++ka){var wh=(ka&43690)>>1|(ka&21845)<<1;wh=(wh&52428)>>2|(wh&13107)<<2,wh=(wh&61680)>>4|(wh&3855)<<4,GI[ka]=((wh&65280)>>8|(wh&255)<<8)>>1}var sf=function(e,t,r){for(var n=e.length,a=0,i=new ic(t);a<n;++a)e[a]&&++i[e[a]-1];var s=new ic(t);for(a=1;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;var o;if(r){o=new ic(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var c=a<<4|e[a],u=t-e[a],A=s[e[a]-1]++<<u,h=A|(1<<u)-1;A<=h;++A)o[GI[A]>>l]=c}else for(o=new ic(n),a=0;a<n;++a)e[a]&&(o[a]=GI[s[e[a]-1]++]>>15-e[a]);return o},g0=new Do(288);for(var ka=0;ka<144;++ka)g0[ka]=8;for(var ka=144;ka<256;++ka)g0[ka]=9;for(var ka=256;ka<280;++ka)g0[ka]=7;for(var ka=280;ka<288;++ka)g0[ka]=8;var Ly=new Do(32);for(var ka=0;ka<32;++ka)Ly[ka]=5;var Ave=sf(g0,9,0),hve=sf(g0,9,1),pve=sf(Ly,5,0),mve=sf(Ly,5,1),uB=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ju=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},dB=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},_R=function(e){return(e+7)/8|0},qY=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Do(e.subarray(t,r))},gve=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zu=function(e,t,r){var n=new Error(t||gve[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,zu),!r)throw n;return n},vve=function(e,t,r,n){var a=e.length,i=0;if(!a||t.f&&!t.l)return r||new Do(0);var s=!r,o=s||t.i!=2,l=t.i;s&&(r=new Do(a*3));var c=function(le){var ie=r.length;if(le>ie){var De=new Do(Math.max(ie*2,le));De.set(r),r=De}},u=t.f||0,A=t.p||0,h=t.b||0,m=t.l,v=t.d,g=t.m,y=t.n,w=a*8;do{if(!m){u=ju(e,A,1);var T=ju(e,A+1,3);if(A+=3,T)if(T==1)m=hve,v=mve,g=9,y=5;else if(T==2){var D=ju(e,A,31)+257,E=ju(e,A+10,15)+4,S=D+ju(e,A+5,31)+1;A+=14;for(var k=new Do(S),H=new Do(19),P=0;P<E;++P)H[VI[P]]=ju(e,A+P*3,7);A+=E*3;for(var M=uB(H),Q=(1<<M)-1,V=sf(H,M,1),P=0;P<S;){var te=V[ju(e,A,Q)];A+=te&15;var N=te>>4;if(N<16)k[P++]=N;else{var W=0,re=0;for(N==16?(re=3+ju(e,A,3),A+=2,W=k[P-1]):N==17?(re=3+ju(e,A,7),A+=3):N==18&&(re=11+ju(e,A,127),A+=7);re--;)k[P++]=W}}var z=k.subarray(0,D),X=k.subarray(D);g=uB(z),y=uB(X),m=sf(z,g,1),v=sf(X,y,1)}else zu(1);else{var N=_R(A)+4,F=e[N-4]|e[N-3]<<8,B=N+F;if(B>a){l&&zu(0);break}o&&c(h+F),r.set(e.subarray(N,B),h),t.b=h+=F,t.p=A=B*8,t.f=u;continue}if(A>w){l&&zu(0);break}}o&&c(h+131072);for(var K=(1<<g)-1,se=(1<<y)-1,U=A;;U=A){var W=m[dB(e,A)&K],Y=W>>4;if(A+=W&15,A>w){l&&zu(0);break}if(W||zu(2),Y<256)r[h++]=Y;else if(Y==256){U=A,m=null;break}else{var Z=Y-254;if(Y>264){var P=Y-257,ne=nT[P];Z=ju(e,A,(1<<ne)-1)+zY[P],A+=ne}var de=v[dB(e,A)&se],xe=de>>4;de||zu(3),A+=de&15;var X=fve[xe];if(xe>3){var ne=aT[xe];X+=dB(e,A)&(1<<ne)-1,A+=ne}if(A>w){l&&zu(0);break}o&&c(h+131072);var Ae=h+Z;if(h<X){var ae=i-X,ue=Math.min(X,Ae);for(ae+h<0&&zu(3);h<ue;++h)r[h]=n[ae+h]}for(;h<Ae;++h)r[h]=r[h-X]}}t.l=m,t.p=U,t.b=h,t.f=u,m&&(u=1,t.m=g,t.d=v,t.n=y)}while(!u);return h!=r.length&&s?qY(r,0,h):r.subarray(0,h)},Wf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},a1=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},fB=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:KY,l:0};if(a==1){var s=new Do(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(B,D){return B.f-D.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,u=1,A=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=r[r[c].f<r[A].f?c++:A++],l=r[c!=u&&r[c].f<r[A].f?c++:A++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var m=new ic(h+1),v=qI(r[u-1],m,0);if(v>t){var n=0,g=0,y=v-t,w=1<<y;for(i.sort(function(D,E){return m[E.s]-m[D.s]||D.f-E.f});n<a;++n){var T=i[n].s;if(m[T]>t)g+=w-(1<<v-m[T]),m[T]=t;else break}for(g>>=y;g>0;){var N=i[n].s;m[N]<t?g-=1<<t-m[N]++-1:++n}for(;n>=0&&g;--n){var F=i[n].s;m[F]==t&&(--m[F],++g)}v=t}return{t:new Do(m),l:v}},qI=function(e,t,r){return e.s==-1?Math.max(qI(e.l,t,r+1),qI(e.r,t,r+1)):t[e.s]=r},h8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ic(++t),n=0,a=e[0],i=1,s=function(l){r[n++]=l},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[o]}return{c:r.subarray(0,n),n:t}},i1=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},$Y=function(e,t,r){var n=r.length,a=_R(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},p8=function(e,t,r,n,a,i,s,o,l,c,u){Wf(t,u++,r),++a[256];for(var A=fB(a,15),h=A.t,m=A.l,v=fB(i,15),g=v.t,y=v.l,w=h8(h),T=w.c,N=w.n,F=h8(g),B=F.c,D=F.n,E=new ic(19),S=0;S<T.length;++S)++E[T[S]&31];for(var S=0;S<B.length;++S)++E[B[S]&31];for(var k=fB(E,7),H=k.t,P=k.l,M=19;M>4&&!H[VI[M-1]];--M);var Q=c+5<<3,V=i1(a,g0)+i1(i,Ly)+s,te=i1(a,h)+i1(i,g)+s+14+3*M+i1(E,H)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&Q<=V&&Q<=te)return $Y(t,u,e.subarray(l,l+c));var W,re,z,X;if(Wf(t,u,1+(te<V)),u+=2,te<V){W=sf(h,m,0),re=h,z=sf(g,y,0),X=g;var K=sf(H,P,0);Wf(t,u,N-257),Wf(t,u+5,D-1),Wf(t,u+10,M-4),u+=14;for(var S=0;S<M;++S)Wf(t,u+3*S,H[VI[S]]);u+=3*M;for(var se=[T,B],U=0;U<2;++U)for(var Y=se[U],S=0;S<Y.length;++S){var Z=Y[S]&31;Wf(t,u,K[Z]),u+=H[Z],Z>15&&(Wf(t,u,Y[S]>>5&127),u+=Y[S]>>12)}}else W=Ave,re=g0,z=pve,X=Ly;for(var S=0;S<o;++S){var ne=n[S];if(ne>255){var Z=ne>>18&31;a1(t,u,W[Z+257]),u+=re[Z+257],Z>7&&(Wf(t,u,ne>>23&31),u+=nT[Z]);var de=ne&31;a1(t,u,z[de]),u+=X[de],de>3&&(a1(t,u,ne>>5&8191),u+=aT[de])}else a1(t,u,W[ne]),u+=re[ne]}return a1(t,u,W[256]),u+re[256]},xve=new ER([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),KY=new Do(0),yve=function(e,t,r,n,a,i){var s=i.z||e.length,o=new Do(n+s+5*(1+Math.ceil(s/7e3))+a),l=o.subarray(n,o.length-a),c=i.l,u=(i.r||0)&7;if(t){u&&(l[0]=i.r>>3);for(var A=xve[t-1],h=A>>13,m=A&8191,v=(1<<r)-1,g=i.p||new ic(32768),y=i.h||new ic(v+1),w=Math.ceil(r/3),T=2*w,N=function(Le){return(e[Le]^e[Le+1]<<w^e[Le+2]<<T)&v},F=new ER(25e3),B=new ic(288),D=new ic(32),E=0,S=0,k=i.i||0,H=0,P=i.w||0,M=0;k+2<s;++k){var Q=N(k),V=k&32767,te=y[Q];if(g[V]=te,y[Q]=V,P<=k){var W=s-k;if((E>7e3||H>24576)&&(W>423||!c)){u=p8(e,l,0,F,B,D,S,H,M,k-M,u),H=E=S=0,M=k;for(var re=0;re<286;++re)B[re]=0;for(var re=0;re<30;++re)D[re]=0}var z=2,X=0,K=m,se=V-te&32767;if(W>2&&Q==N(k-se))for(var U=Math.min(h,W)-1,Y=Math.min(32767,k),Z=Math.min(258,W);se<=Y&&--K&&V!=te;){if(e[k+z]==e[k+z-se]){for(var ne=0;ne<Z&&e[k+ne]==e[k+ne-se];++ne);if(ne>z){if(z=ne,X=se,ne>U)break;for(var de=Math.min(se,ne-2),xe=0,re=0;re<de;++re){var Ae=k-se+re&32767,ae=g[Ae],ue=Ae-ae&32767;ue>xe&&(xe=ue,te=Ae)}}}V=te,te=g[V],se+=V-te&32767}if(X){F[H++]=268435456|zI[z]<<18|A8[X];var le=zI[z]&31,ie=A8[X]&31;S+=nT[le]+aT[ie],++B[257+le],++D[ie],P=k+z,++E}else F[H++]=e[k],++B[e[k]]}}for(k=Math.max(k,P);k<s;++k)F[H++]=e[k],++B[e[k]];u=p8(e,l,c,F,B,D,S,H,M,k-M,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=y,i.p=g,i.i=k,i.w=P)}else{for(var k=i.w||0;k<s+c;k+=65535){var De=k+65535;De>=s&&(l[u/8|0]=c,De=s),u=$Y(l,u+1,e.subarray(k,De))}i.i=s}return qY(o,0,n+_R(u)+a)},WY=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=n+=r[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},bve=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new Do(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return yve(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},YY=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},wve=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=WY();a.p(t.dictionary),YY(e,2,a.d())}},Cve=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&zu(6,"invalid zlib data"),(e[1]>>5&1)==1&&zu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function $I(e,t){t||(t={});var r=WY();r.p(e);var n=bve(e,t,t.dictionary?6:2,4);return wve(n,t),YY(n,n.length-4,r.d()),n}function Eve(e,t){return vve(e.subarray(Cve(e),-4),{i:2},t,t)}var _ve=typeof TextDecoder<"u"&&new TextDecoder,Sve=0;try{_ve.decode(KY,{stream:!0}),Sve=1}catch{}var Ir=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function AB(){Ir.console&&typeof Ir.console.log=="function"&&Ir.console.log.apply(Ir.console,arguments)}var va={log:AB,warn:function(e){Ir.console&&(typeof Ir.console.warn=="function"?Ir.console.warn.apply(Ir.console,arguments):AB.call(null,arguments))},error:function(e){Ir.console&&(typeof Ir.console.error=="function"?Ir.console.error.apply(Ir.console,arguments):AB(e))}};function hB(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){cp(n.response,t,r)},n.onerror=function(){va.error("could not download file")},n.send()}function m8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function y2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var iy,KI,cp=Ir.saveAs||((typeof window>"u"?"undefined":aa(window))!=="object"||window!==Ir?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Ir.URL||Ir.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?m8(a.href)?hB(e,t,r):y2(a,a.target="_blank"):y2(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){y2(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(m8(e))hB(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){y2(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:aa(i)!=="object"&&(va.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return hB(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Ir.HTMLElement)||Ir.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":aa(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(e)}else{var l=Ir.URL||Ir.webkitURL,c=l.createObjectURL(e);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function XY(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pB(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=go(r,n,a,i,t[0],7,-680876936),i=go(i,r,n,a,t[1],12,-389564586),a=go(a,i,r,n,t[2],17,606105819),n=go(n,a,i,r,t[3],22,-1044525330),r=go(r,n,a,i,t[4],7,-176418897),i=go(i,r,n,a,t[5],12,1200080426),a=go(a,i,r,n,t[6],17,-1473231341),n=go(n,a,i,r,t[7],22,-45705983),r=go(r,n,a,i,t[8],7,1770035416),i=go(i,r,n,a,t[9],12,-1958414417),a=go(a,i,r,n,t[10],17,-42063),n=go(n,a,i,r,t[11],22,-1990404162),r=go(r,n,a,i,t[12],7,1804603682),i=go(i,r,n,a,t[13],12,-40341101),a=go(a,i,r,n,t[14],17,-1502002290),r=vo(r,n=go(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=vo(i,r,n,a,t[6],9,-1069501632),a=vo(a,i,r,n,t[11],14,643717713),n=vo(n,a,i,r,t[0],20,-373897302),r=vo(r,n,a,i,t[5],5,-701558691),i=vo(i,r,n,a,t[10],9,38016083),a=vo(a,i,r,n,t[15],14,-660478335),n=vo(n,a,i,r,t[4],20,-405537848),r=vo(r,n,a,i,t[9],5,568446438),i=vo(i,r,n,a,t[14],9,-1019803690),a=vo(a,i,r,n,t[3],14,-187363961),n=vo(n,a,i,r,t[8],20,1163531501),r=vo(r,n,a,i,t[13],5,-1444681467),i=vo(i,r,n,a,t[2],9,-51403784),a=vo(a,i,r,n,t[7],14,1735328473),r=xo(r,n=vo(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=xo(i,r,n,a,t[8],11,-2022574463),a=xo(a,i,r,n,t[11],16,1839030562),n=xo(n,a,i,r,t[14],23,-35309556),r=xo(r,n,a,i,t[1],4,-1530992060),i=xo(i,r,n,a,t[4],11,1272893353),a=xo(a,i,r,n,t[7],16,-155497632),n=xo(n,a,i,r,t[10],23,-1094730640),r=xo(r,n,a,i,t[13],4,681279174),i=xo(i,r,n,a,t[0],11,-358537222),a=xo(a,i,r,n,t[3],16,-722521979),n=xo(n,a,i,r,t[6],23,76029189),r=xo(r,n,a,i,t[9],4,-640364487),i=xo(i,r,n,a,t[12],11,-421815835),a=xo(a,i,r,n,t[15],16,530742520),r=yo(r,n=xo(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=yo(i,r,n,a,t[7],10,1126891415),a=yo(a,i,r,n,t[14],15,-1416354905),n=yo(n,a,i,r,t[5],21,-57434055),r=yo(r,n,a,i,t[12],6,1700485571),i=yo(i,r,n,a,t[3],10,-1894986606),a=yo(a,i,r,n,t[10],15,-1051523),n=yo(n,a,i,r,t[1],21,-2054922799),r=yo(r,n,a,i,t[8],6,1873313359),i=yo(i,r,n,a,t[15],10,-30611744),a=yo(a,i,r,n,t[6],15,-1560198380),n=yo(n,a,i,r,t[13],21,1309151649),r=yo(r,n,a,i,t[4],6,-145523070),i=yo(i,r,n,a,t[11],10,-1120210379),a=yo(a,i,r,n,t[2],15,718787259),n=yo(n,a,i,r,t[9],21,-343485551),e[0]=Vh(r,e[0]),e[1]=Vh(n,e[1]),e[2]=Vh(a,e[2]),e[3]=Vh(i,e[3])}function iT(e,t,r,n,a,i){return t=Vh(Vh(t,e),Vh(n,i)),Vh(t<<a|t>>>32-a,r)}function go(e,t,r,n,a,i,s){return iT(t&r|~t&n,e,t,a,i,s)}function vo(e,t,r,n,a,i,s){return iT(t&n|r&~n,e,t,a,i,s)}function xo(e,t,r,n,a,i,s){return iT(t^r^n,e,t,a,i,s)}function yo(e,t,r,n,a,i,s){return iT(r^(t|~n),e,t,a,i,s)}function JY(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)pB(n,Tve(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(pB(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,pB(n,a),n}function Tve(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}iy=Ir.atob.bind(Ir),KI=Ir.btoa.bind(Ir);var g8="0123456789abcdef".split("");function Nve(e){for(var t="",r=0;r<4;r++)t+=g8[e>>8*r+4&15]+g8[e>>8*r&15];return t}function Bve(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function WI(e){return JY(e).map(Bve).join("")}var kve=function(e){for(var t=0;t<e.length;t++)e[t]=Nve(e[t]);return e.join("")}(JY("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vh(e,t){if(kve){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function YI(e,t){var r,n,a,i;if(e!==r){for(var s=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+s.charCodeAt(l))%256,o[l]=o[c],o[c]=u}r=e,n=o}else o=n;var A=t.length,h=0,m=0,v="";for(l=0;l<A;l++)m=(m+(u=o[h=(h+1)%256]))%256,o[h]=o[m],o[m]=u,s=o[(o[h]+o[m])%256],v+=String.fromCharCode(t.charCodeAt(l)^s);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var v8={print:4,modify:8,copy:16,"annot-forms":32};function kg(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(v8.perm!==void 0)throw new Error("Invalid permission: "+o);a+=v8[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=WI(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=YI(this.encryptionKey,this.padding)}function Ig(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function x8(e){if(aa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,n)}catch(o){Ir.console&&va.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function KE(e){if(!(this instanceof KE))return new KE(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function ZY(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function pp(e,t,r,n,a){if(!(this instanceof pp))return new pp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,ZY.call(this,n,a)}function Mg(e,t,r,n,a){if(!(this instanceof Mg))return new Mg(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,ZY.call(this,n,a)}function ur(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,l=16,c="S",u=null;aa(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),s=e.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var A=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=x8;var v="1.3",g=m.__private__.getPdfVersion=function(){return v};m.__private__.setPdfVersion=function(q){v=q};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return y};var w=m.__private__.getPageFormat=function(q){return y[q]};a=a||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},N=T.COMPAT;function F(){this.saveGraphicsState(),Ce(new qt(gt,0,0,-gt,0,vs()*gt).toString()+" cm"),this.setFontSize(this.getFontSize()/gt),c="n",N=T.ADVANCED}function B(){this.restoreGraphicsState(),c="S",N=T.COMPAT}var D=m.__private__.combineFontStyleAndFontWeight=function(q,pe){if(q=="bold"&&pe=="normal"||q=="bold"&&pe==400||q=="normal"&&pe=="italic"||q=="bold"&&pe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pe&&(q=pe==400||pe==="normal"?q==="italic"?"italic":"normal":pe!=700&&pe!=="bold"||q!=="normal"?(pe==700?"bold":pe)+""+q:"bold"),q};m.advancedAPI=function(q){var pe=N===T.COMPAT;return pe&&F.call(this),typeof q!="function"||(q(this),pe&&B.call(this)),this},m.compatAPI=function(q){var pe=N===T.ADVANCED;return pe&&B.call(this),typeof q!="function"||(q(this),pe&&F.call(this)),this},m.isAdvancedAPI=function(){return N===T.ADVANCED};var E,S=function(q){if(N!==T.ADVANCED)throw new Error(q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=m.roundToPrecision=m.__private__.roundToPrecision=function(q,pe){var Fe=t||pe;if(isNaN(q)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return q.toFixed(Fe).replace(/0+$/,"")};E=m.hpf=m.__private__.hpf=typeof l=="number"?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return k(q,l)}:l==="smart"?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return k(q,q>-1&&q<1?16:5)}:function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return k(q,16)};var H=m.f2=m.__private__.f2=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f2");return k(q,2)},P=m.__private__.f3=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f3");return k(q,3)},M=m.scale=m.__private__.scale=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.scale");return N===T.COMPAT?q*gt:N===T.ADVANCED?q:void 0},Q=function(q){return N===T.COMPAT?vs()-q:N===T.ADVANCED?q:void 0},V=function(q){return M(Q(q))};m.__private__.setPrecision=m.setPrecision=function(q){typeof parseInt(q,10)=="number"&&(t=parseInt(q,10))};var te,W="00000000000000000000000000000000",re=m.__private__.getFileId=function(){return W},z=m.__private__.setFileId=function(q){return W=q!==void 0&&/^[a-fA-F0-9]{32}$/.test(q)?q.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Xn=new kg(u.userPermissions,u.userPassword,u.ownerPassword,W)),W};m.setFileId=function(q){return z(q),this},m.getFileId=function(){return re()};var X=m.__private__.convertDateToPDFDate=function(q){var pe=q.getTimezoneOffset(),Fe=pe<0?"+":"-",Me=Math.floor(Math.abs(pe/60)),Ge=Math.abs(pe%60),lt=[Fe,Z(Me),"'",Z(Ge),"'"].join("");return["D:",q.getFullYear(),Z(q.getMonth()+1),Z(q.getDate()),Z(q.getHours()),Z(q.getMinutes()),Z(q.getSeconds()),lt].join("")},K=m.__private__.convertPDFDateToDate=function(q){var pe=parseInt(q.substr(2,4),10),Fe=parseInt(q.substr(6,2),10)-1,Me=parseInt(q.substr(8,2),10),Ge=parseInt(q.substr(10,2),10),lt=parseInt(q.substr(12,2),10),St=parseInt(q.substr(14,2),10);return new Date(pe,Fe,Me,Ge,lt,St,0)},se=m.__private__.setCreationDate=function(q){var pe;if(q===void 0&&(q=new Date),q instanceof Date)pe=X(q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pe=q}return te=pe},U=m.__private__.getCreationDate=function(q){var pe=te;return q==="jsDate"&&(pe=K(te)),pe};m.setCreationDate=function(q){return se(q),this},m.getCreationDate=function(q){return U(q)};var Y,Z=m.__private__.padd2=function(q){return("0"+parseInt(q)).slice(-2)},ne=m.__private__.padd2Hex=function(q){return("00"+(q=q.toString())).substr(q.length)},de=0,xe=[],Ae=[],ae=0,ue=[],le=[],ie=!1,De=Ae,Le=function(){de=0,ae=0,Ae=[],xe=[],ue=[],_e=ca(),Se=ca()};m.__private__.setCustomOutputDestination=function(q){ie=!0,De=q};var Be=function(q){ie||(De=q)};m.__private__.resetCustomOutputDestination=function(){ie=!1,De=Ae};var Ce=m.__private__.out=function(q){return q=q.toString(),ae+=q.length+1,De.push(q),De},Re=m.__private__.write=function(q){return Ce(arguments.length===1?q.toString():Array.prototype.join.call(arguments," "))},je=m.__private__.getArrayBuffer=function(q){for(var pe=q.length,Fe=new ArrayBuffer(pe),Me=new Uint8Array(Fe);pe--;)Me[pe]=q.charCodeAt(pe);return Fe},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return We};var ct=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(q){return ct=N===T.ADVANCED?q/gt:q,this};var wt,ot=m.__private__.getFontSize=m.getFontSize=function(){return N===T.COMPAT?ct:ct*gt},Rt=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(q){return Rt=q,this},m.__private__.getR2L=m.getR2L=function(){return Rt};var Pt,Xt=m.__private__.setZoomMode=function(q){var pe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(q))wt=q;else if(isNaN(q)){if(pe.indexOf(q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+q+'" is not recognized.');wt=q}else wt=parseInt(q,10)};m.__private__.getZoomMode=function(){return wt};var Mt,Qt=m.__private__.setPageMode=function(q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+q+'" is not recognized.');Pt=q};m.__private__.getPageMode=function(){return Pt};var $t=m.__private__.setLayoutMode=function(q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+q+'" is not recognized.');Mt=q};m.__private__.getLayoutMode=function(){return Mt},m.__private__.setDisplayMode=m.setDisplayMode=function(q,pe,Fe){return Xt(q),$t(pe),Qt(Fe),this};var It={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(q){if(Object.keys(It).indexOf(q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return It[q]},m.__private__.getDocumentProperties=function(){return It},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(q){for(var pe in It)It.hasOwnProperty(pe)&&q[pe]&&(It[pe]=q[pe]);return this},m.__private__.setDocumentProperty=function(q,pe){if(Object.keys(It).indexOf(q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return It[q]=pe};var Dt,gt,Br,Zt,yn,_r={},Vr={},jn=[],Ur={},Ii={},dn={},ma={},Ra=null,Gr=0,sr=[],Xr=new x8(m),Fi=e.hotfixes||[],la={},Qa={},Zi=[],qt=function q(pe,Fe,Me,Ge,lt,St){if(!(this instanceof q))return new q(pe,Fe,Me,Ge,lt,St);isNaN(pe)&&(pe=1),isNaN(Fe)&&(Fe=0),isNaN(Me)&&(Me=0),isNaN(Ge)&&(Ge=1),isNaN(lt)&&(lt=0),isNaN(St)&&(St=0),this._matrix=[pe,Fe,Me,Ge,lt,St]};Object.defineProperty(qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty(qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty(qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty(qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty(qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty(qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty(qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty(qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty(qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty(qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty(qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty(qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty(qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qt.prototype.join=function(q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(q)},qt.prototype.multiply=function(q){var pe=q.sx*this.sx+q.shy*this.shx,Fe=q.sx*this.shy+q.shy*this.sy,Me=q.shx*this.sx+q.sy*this.shx,Ge=q.shx*this.shy+q.sy*this.sy,lt=q.tx*this.sx+q.ty*this.shx+this.tx,St=q.tx*this.shy+q.ty*this.sy+this.ty;return new qt(pe,Fe,Me,Ge,lt,St)},qt.prototype.decompose=function(){var q=this.sx,pe=this.shy,Fe=this.shx,Me=this.sy,Ge=this.tx,lt=this.ty,St=Math.sqrt(q*q+pe*pe),zt=(q/=St)*Fe+(pe/=St)*Me;Fe-=q*zt,Me-=pe*zt;var R=Math.sqrt(Fe*Fe+Me*Me);return zt/=R,q*(Me/=R)<pe*(Fe/=R)&&(q=-q,pe=-pe,zt=-zt,St=-St),{scale:new qt(St,0,0,R,0,0),translate:new qt(1,0,0,1,Ge,lt),rotate:new qt(q,pe,-pe,q,0,0),skew:new qt(1,0,zt,1,0,0)}},qt.prototype.toString=function(q){return this.join(" ")},qt.prototype.inversed=function(){var q=this.sx,pe=this.shy,Fe=this.shx,Me=this.sy,Ge=this.tx,lt=this.ty,St=1/(q*Me-pe*Fe),zt=Me*St,R=-pe*St,ee=-Fe*St,ce=q*St;return new qt(zt,R,ee,ce,-zt*Ge-ee*lt,-R*Ge-ce*lt)},qt.prototype.applyToPoint=function(q){var pe=q.x*this.sx+q.y*this.shx+this.tx,Fe=q.x*this.shy+q.y*this.sy+this.ty;return new bu(pe,Fe)},qt.prototype.applyToRectangle=function(q){var pe=this.applyToPoint(q),Fe=this.applyToPoint(new bu(q.x+q.w,q.y+q.h));return new Ad(pe.x,pe.y,Fe.x-pe.x,Fe.y-pe.y)},qt.prototype.clone=function(){var q=this.sx,pe=this.shy,Fe=this.shx,Me=this.sy,Ge=this.tx,lt=this.ty;return new qt(q,pe,Fe,Me,Ge,lt)},m.Matrix=qt;var bn=m.matrixMult=function(q,pe){return pe.multiply(q)},fn=new qt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=fn;var Hn=function(q,pe){if(!Ii[q]){var Fe=(pe instanceof pp?"Sh":"P")+(Object.keys(Ur).length+1).toString(10);pe.id=Fe,Ii[q]=Fe,Ur[Fe]=pe,Xr.publish("addPattern",pe)}};m.ShadingPattern=pp,m.TilingPattern=Mg,m.addShadingPattern=function(q,pe){return S("addShadingPattern()"),Hn(q,pe),this},m.beginTilingPattern=function(q){S("beginTilingPattern()"),Tc(q.boundingBox[0],q.boundingBox[1],q.boundingBox[2]-q.boundingBox[0],q.boundingBox[3]-q.boundingBox[1],q.matrix)},m.endTilingPattern=function(q,pe){S("endTilingPattern()"),pe.stream=le[Y].join(`
`),Hn(q,pe),Xr.publish("endTilingPattern",pe),Zi.pop().restore()};var Yn=m.__private__.newObject=function(){var q=ca();return me(q,!0),q},ca=m.__private__.newObjectDeferred=function(){return de++,xe[de]=function(){return ae},de},me=function(q,pe){return pe=typeof pe=="boolean"&&pe,xe[q]=ae,pe&&Ce(q+" 0 obj"),q},ke=m.__private__.newAdditionalObject=function(){var q={objId:ca(),content:""};return ue.push(q),q},_e=ca(),Se=ca(),Te=m.__private__.decodeColorString=function(q){var pe=q.split(" ");if(pe.length!==2||pe[1]!=="g"&&pe[1]!=="G")pe.length===5&&(pe[4]==="k"||pe[4]==="K")&&(pe=[(1-pe[0])*(1-pe[3]),(1-pe[1])*(1-pe[3]),(1-pe[2])*(1-pe[3]),"r"]);else{var Fe=parseFloat(pe[0]);pe=[Fe,Fe,Fe,"r"]}for(var Me="#",Ge=0;Ge<3;Ge++)Me+=("0"+Math.floor(255*parseFloat(pe[Ge])).toString(16)).slice(-2);return Me},Ie=m.__private__.encodeColorString=function(q){var pe;typeof q=="string"&&(q={ch1:q});var Fe=q.ch1,Me=q.ch2,Ge=q.ch3,lt=q.ch4,St=q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var zt=new XY(Fe);if(zt.ok)Fe=zt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var R=parseInt(Fe.substr(1),16);Fe=R>>16&255,Me=R>>8&255,Ge=255&R}if(Me===void 0||lt===void 0&&Fe===Me&&Me===Ge)if(typeof Fe=="string")pe=Fe+" "+St[0];else switch(q.precision){case 2:pe=H(Fe/255)+" "+St[0];break;case 3:default:pe=P(Fe/255)+" "+St[0]}else if(lt===void 0||aa(lt)==="object"){if(lt&&!isNaN(lt.a)&&lt.a===0)return pe=["1.","1.","1.",St[1]].join(" ");if(typeof Fe=="string")pe=[Fe,Me,Ge,St[1]].join(" ");else switch(q.precision){case 2:pe=[H(Fe/255),H(Me/255),H(Ge/255),St[1]].join(" ");break;default:case 3:pe=[P(Fe/255),P(Me/255),P(Ge/255),St[1]].join(" ")}}else if(typeof Fe=="string")pe=[Fe,Me,Ge,lt,St[2]].join(" ");else switch(q.precision){case 2:pe=[H(Fe),H(Me),H(Ge),H(lt),St[2]].join(" ");break;case 3:default:pe=[P(Fe),P(Me),P(Ge),P(lt),St[2]].join(" ")}return pe},Ke=m.__private__.getFilters=function(){return s},nt=m.__private__.putStream=function(q){var pe=(q=q||{}).data||"",Fe=q.filters||Ke(),Me=q.alreadyAppliedFilters||[],Ge=q.addLength1||!1,lt=pe.length,St=q.objectId,zt=function(Cr){return Cr};if(u!==null&&St===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(zt=Xn.encryptor(St,0));var R={};Fe===!0&&(Fe=["FlateEncode"]);var ee=q.additionalKeyValues||[],ce=(R=ur.API.processDataByFilters!==void 0?ur.API.processDataByFilters(pe,Fe):{data:pe,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(R.data.length!==0&&(ee.push({key:"Length",value:R.data.length}),Ge===!0&&ee.push({key:"Length1",value:lt})),ce.length!=0)if(ce.split("/").length-1==1)ee.push({key:"Filter",value:ce});else{ee.push({key:"Filter",value:"["+ce+"]"});for(var be=0;be<ee.length;be+=1)if(ee[be].key==="DecodeParms"){for(var Ve=[],tt=0;tt<R.reverseChain.split("/").length-1;tt+=1)Ve.push("null");Ve.push(ee[be].value),ee[be].value="["+Ve.join(" ")+"]"}}Ce("<<");for(var Nt=0;Nt<ee.length;Nt++)Ce("/"+ee[Nt].key+" "+ee[Nt].value);Ce(">>"),R.data.length!==0&&(Ce("stream"),Ce(zt(R.data)),Ce("endstream"))},ze=m.__private__.putPage=function(q){var pe=q.number,Fe=q.data,Me=q.objId,Ge=q.contentsObjId;me(Me,!0),Ce("<</Type /Page"),Ce("/Parent "+q.rootDictionaryObjId+" 0 R"),Ce("/Resources "+q.resourceDictionaryObjId+" 0 R"),Ce("/MediaBox ["+parseFloat(E(q.mediaBox.bottomLeftX))+" "+parseFloat(E(q.mediaBox.bottomLeftY))+" "+E(q.mediaBox.topRightX)+" "+E(q.mediaBox.topRightY)+"]"),q.cropBox!==null&&Ce("/CropBox ["+E(q.cropBox.bottomLeftX)+" "+E(q.cropBox.bottomLeftY)+" "+E(q.cropBox.topRightX)+" "+E(q.cropBox.topRightY)+"]"),q.bleedBox!==null&&Ce("/BleedBox ["+E(q.bleedBox.bottomLeftX)+" "+E(q.bleedBox.bottomLeftY)+" "+E(q.bleedBox.topRightX)+" "+E(q.bleedBox.topRightY)+"]"),q.trimBox!==null&&Ce("/TrimBox ["+E(q.trimBox.bottomLeftX)+" "+E(q.trimBox.bottomLeftY)+" "+E(q.trimBox.topRightX)+" "+E(q.trimBox.topRightY)+"]"),q.artBox!==null&&Ce("/ArtBox ["+E(q.artBox.bottomLeftX)+" "+E(q.artBox.bottomLeftY)+" "+E(q.artBox.topRightX)+" "+E(q.artBox.topRightY)+"]"),typeof q.userUnit=="number"&&q.userUnit!==1&&Ce("/UserUnit "+q.userUnit),Xr.publish("putPage",{objId:Me,pageContext:sr[pe],pageNumber:pe,page:Fe}),Ce("/Contents "+Ge+" 0 R"),Ce(">>"),Ce("endobj");var lt=Fe.join(`
`);return N===T.ADVANCED&&(lt+=`
Q`),me(Ge,!0),nt({data:lt,filters:Ke(),objectId:Ge}),Ce("endobj"),Me},Xe=m.__private__.putPages=function(){var q,pe,Fe=[];for(q=1;q<=Gr;q++)sr[q].objId=ca(),sr[q].contentsObjId=ca();for(q=1;q<=Gr;q++)Fe.push(ze({number:q,data:le[q],objId:sr[q].objId,contentsObjId:sr[q].contentsObjId,mediaBox:sr[q].mediaBox,cropBox:sr[q].cropBox,bleedBox:sr[q].bleedBox,trimBox:sr[q].trimBox,artBox:sr[q].artBox,userUnit:sr[q].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:Se}));me(_e,!0),Ce("<</Type /Pages");var Me="/Kids [";for(pe=0;pe<Gr;pe++)Me+=Fe[pe]+" 0 R ";Ce(Me+"]"),Ce("/Count "+Gr),Ce(">>"),Ce("endobj"),Xr.publish("postPutPages")},et=function(q){Xr.publish("putFont",{font:q,out:Ce,newObject:Yn,putStream:nt}),q.isAlreadyPutted!==!0&&(q.objectNumber=Yn(),Ce("<<"),Ce("/Type /Font"),Ce("/BaseFont /"+Ig(q.postScriptName)),Ce("/Subtype /Type1"),typeof q.encoding=="string"&&Ce("/Encoding /"+q.encoding),Ce("/FirstChar 32"),Ce("/LastChar 255"),Ce(">>"),Ce("endobj"))},bt=function(){for(var q in _r)_r.hasOwnProperty(q)&&(A===!1||A===!0&&h.hasOwnProperty(q))&&et(_r[q])},kt=function(q){q.objectNumber=Yn();var pe=[];pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Form"}),pe.push({key:"BBox",value:"["+[E(q.x),E(q.y),E(q.x+q.width),E(q.y+q.height)].join(" ")+"]"}),pe.push({key:"Matrix",value:"["+q.matrix.toString()+"]"});var Fe=q.pages[1].join(`
`);nt({data:Fe,additionalKeyValues:pe,objectId:q.objectNumber}),Ce("endobj")},Vt=function(){for(var q in la)la.hasOwnProperty(q)&&kt(la[q])},Bt=function(q,pe){var Fe,Me=[],Ge=1/(pe-1);for(Fe=0;Fe<1;Fe+=Ge)Me.push(Fe);if(Me.push(1),q[0].offset!=0){var lt={offset:0,color:q[0].color};q.unshift(lt)}if(q[q.length-1].offset!=1){var St={offset:1,color:q[q.length-1].color};q.push(St)}for(var zt="",R=0,ee=0;ee<Me.length;ee++){for(Fe=Me[ee];Fe>q[R+1].offset;)R++;var ce=q[R].offset,be=(Fe-ce)/(q[R+1].offset-ce),Ve=q[R].color,tt=q[R+1].color;zt+=ne(Math.round((1-be)*Ve[0]+be*tt[0]).toString(16))+ne(Math.round((1-be)*Ve[1]+be*tt[1]).toString(16))+ne(Math.round((1-be)*Ve[2]+be*tt[2]).toString(16))}return zt.trim()},Lt=function(q,pe){pe||(pe=21);var Fe=Yn(),Me=Bt(q.colors,pe),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+pe+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:Me,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),Ce("endobj"),q.objectNumber=Yn(),Ce("<< /ShadingType "+q.type),Ce("/ColorSpace /DeviceRGB");var lt="/Coords ["+E(parseFloat(q.coords[0]))+" "+E(parseFloat(q.coords[1]))+" ";q.type===2?lt+=E(parseFloat(q.coords[2]))+" "+E(parseFloat(q.coords[3])):lt+=E(parseFloat(q.coords[2]))+" "+E(parseFloat(q.coords[3]))+" "+E(parseFloat(q.coords[4]))+" "+E(parseFloat(q.coords[5])),Ce(lt+="]"),q.matrix&&Ce("/Matrix ["+q.matrix.toString()+"]"),Ce("/Function "+Fe+" 0 R"),Ce("/Extend [true true]"),Ce(">>"),Ce("endobj")},mr=function(q,pe){var Fe=ca(),Me=Yn();pe.push({resourcesOid:Fe,objectOid:Me}),q.objectNumber=Me;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+q.boundingBox.map(E).join(" ")+"]"}),Ge.push({key:"XStep",value:E(q.xStep)}),Ge.push({key:"YStep",value:E(q.yStep)}),Ge.push({key:"Resources",value:Fe+" 0 R"}),q.matrix&&Ge.push({key:"Matrix",value:"["+q.matrix.toString()+"]"}),nt({data:q.stream,additionalKeyValues:Ge,objectId:q.objectNumber}),Ce("endobj")},qr=function(q){var pe;for(pe in Ur)Ur.hasOwnProperty(pe)&&(Ur[pe]instanceof pp?Lt(Ur[pe]):Ur[pe]instanceof Mg&&mr(Ur[pe],q))},$r=function(q){for(var pe in q.objectNumber=Yn(),Ce("<<"),q)switch(pe){case"opacity":Ce("/ca "+H(q[pe]));break;case"stroke-opacity":Ce("/CA "+H(q[pe]))}Ce(">>"),Ce("endobj")},Jr=function(){var q;for(q in dn)dn.hasOwnProperty(q)&&$r(dn[q])},Ja=function(){for(var q in Ce("/XObject <<"),la)la.hasOwnProperty(q)&&la[q].objectNumber>=0&&Ce("/"+q+" "+la[q].objectNumber+" 0 R");Xr.publish("putXobjectDict"),Ce(">>")},no=function(){Xn.oid=Yn(),Ce("<<"),Ce("/Filter /Standard"),Ce("/V "+Xn.v),Ce("/R "+Xn.r),Ce("/U <"+Xn.toHexString(Xn.U)+">"),Ce("/O <"+Xn.toHexString(Xn.O)+">"),Ce("/P "+Xn.P),Ce(">>"),Ce("endobj")},Za=function(){for(var q in Ce("/Font <<"),_r)_r.hasOwnProperty(q)&&(A===!1||A===!0&&h.hasOwnProperty(q))&&Ce("/"+q+" "+_r[q].objectNumber+" 0 R");Ce(">>")},Di=function(){if(Object.keys(Ur).length>0){for(var q in Ce("/Shading <<"),Ur)Ur.hasOwnProperty(q)&&Ur[q]instanceof pp&&Ur[q].objectNumber>=0&&Ce("/"+q+" "+Ur[q].objectNumber+" 0 R");Xr.publish("putShadingPatternDict"),Ce(">>")}},hi=function(q){if(Object.keys(Ur).length>0){for(var pe in Ce("/Pattern <<"),Ur)Ur.hasOwnProperty(pe)&&Ur[pe]instanceof m.TilingPattern&&Ur[pe].objectNumber>=0&&Ur[pe].objectNumber<q&&Ce("/"+pe+" "+Ur[pe].objectNumber+" 0 R");Xr.publish("putTilingPatternDict"),Ce(">>")}},es=function(){if(Object.keys(dn).length>0){var q;for(q in Ce("/ExtGState <<"),dn)dn.hasOwnProperty(q)&&dn[q].objectNumber>=0&&Ce("/"+q+" "+dn[q].objectNumber+" 0 R");Xr.publish("putGStateDict"),Ce(">>")}},ua=function(q){me(q.resourcesOid,!0),Ce("<<"),Ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Za(),Di(),hi(q.objectOid),es(),Ja(),Ce(">>"),Ce("endobj")},Ri=function(){var q=[];bt(),Jr(),Vt(),qr(q),Xr.publish("putResources"),q.forEach(ua),ua({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),Xr.publish("postPutResources")},ld=function(){Xr.publish("putAdditionalObjects");for(var q=0;q<ue.length;q++){var pe=ue[q];me(pe.objId,!0),Ce(pe.content),Ce("endobj")}Xr.publish("postPutAdditionalObjects")},HA=function(q){Vr[q.fontName]=Vr[q.fontName]||{},Vr[q.fontName][q.fontStyle]=q.id},vc=function(q,pe,Fe,Me,Ge){var lt={id:"F"+(Object.keys(_r).length+1).toString(10),postScriptName:q,fontName:pe,fontStyle:Fe,encoding:Me,isStandardFont:Ge||!1,metadata:{}};return Xr.publish("addFont",{font:lt,instance:this}),_r[lt.id]=lt,HA(lt),lt.id},yf=function(q){for(var pe=0,Fe=We.length;pe<Fe;pe++){var Me=vc.call(this,q[pe][0],q[pe][1],q[pe][2],We[pe][3],!0);A===!1&&(h[Me]=!0);var Ge=q[pe][0].split("-");HA({id:Me,fontName:Ge[0],fontStyle:Ge[1]||""})}Xr.publish("addFonts",{fonts:_r,dictionary:Vr})},ts=function(q){return q.foo=function(){try{return q.apply(this,arguments)}catch(Me){var pe=Me.stack||"";~pe.indexOf(" at ")&&(pe=pe.split(" at ")[1]);var Fe="Error in function "+pe.split(`
`)[0].split("<")[0]+": "+Me.message;if(!Ir.console)throw new Error(Fe);Ir.console.error(Fe,Me),Ir.alert&&alert(Fe)}},q.foo.bar=q,q.foo},cd=function(q,pe){var Fe,Me,Ge,lt,St,zt,R,ee,ce;if(Ge=(pe=pe||{}).sourceEncoding||"Unicode",St=pe.outputEncoding,(pe.autoencode||St)&&_r[Dt].metadata&&_r[Dt].metadata[Ge]&&_r[Dt].metadata[Ge].encoding&&(lt=_r[Dt].metadata[Ge].encoding,!St&&_r[Dt].encoding&&(St=_r[Dt].encoding),!St&&lt.codePages&&(St=lt.codePages[0]),typeof St=="string"&&(St=lt[St]),St)){for(R=!1,zt=[],Fe=0,Me=q.length;Fe<Me;Fe++)(ee=St[q.charCodeAt(Fe)])?zt.push(String.fromCharCode(ee)):zt.push(q[Fe]),zt[Fe].charCodeAt(0)>>8&&(R=!0);q=zt.join("")}for(Fe=q.length;R===void 0&&Fe!==0;)q.charCodeAt(Fe-1)>>8&&(R=!0),Fe--;if(!R)return q;for(zt=pe.noBOM?[]:[254,255],Fe=0,Me=q.length;Fe<Me;Fe++){if((ce=(ee=q.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zt.push(ce),zt.push(ee-(ce<<8))}return String.fromCharCode.apply(void 0,zt)},wn=m.__private__.pdfEscape=m.pdfEscape=function(q,pe){return cd(q,pe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rs=m.__private__.beginPage=function(q){le[++Gr]=[],sr[Gr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(q[0]),topRightY:Number(q[1])}},el(Gr),Be(le[Y])},xc=function(q,pe){var Fe,Me,Ge;switch(r=pe||r,typeof q=="string"&&(Fe=w(q.toLowerCase()),Array.isArray(Fe)&&(Me=Fe[0],Ge=Fe[1])),Array.isArray(q)&&(Me=q[0]*gt,Ge=q[1]*gt),isNaN(Me)&&(Me=a[0],Ge=a[1]),(Me>14400||Ge>14400)&&(va.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ge=Math.min(14400,Ge)),a=[Me,Ge],r.substr(0,1)){case"l":Ge>Me&&(a=[Ge,Me]);break;case"p":Me>Ge&&(a=[Ge,Me])}rs(a),Ef(Cc),Ce(ns),_f!==0&&Ce(_f+" J"),yu!==0&&Ce(yu+" j"),Xr.publish("addPage",{pageNumber:Gr})},yc=function(q){q>0&&q<=Gr&&(le.splice(q,1),sr.splice(q,1),Gr--,Y>Gr&&(Y=Gr),this.setPage(Y))},el=function(q){q>0&&q<=Gr&&(Y=q)},In=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return le.length-1},bc=function(q,pe,Fe){var Me,Ge=void 0;return Fe=Fe||{},q=q!==void 0?q:_r[Dt].fontName,pe=pe!==void 0?pe:_r[Dt].fontStyle,Me=q.toLowerCase(),Vr[Me]!==void 0&&Vr[Me][pe]!==void 0?Ge=Vr[Me][pe]:Vr[q]!==void 0&&Vr[q][pe]!==void 0?Ge=Vr[q][pe]:Fe.disableWarning===!1&&va.warn("Unable to look up font label for font '"+q+"', '"+pe+"'. Refer to getFontList() for available fonts."),Ge||Fe.noFallback||(Ge=Vr.times[pe])==null&&(Ge=Vr.times.normal),Ge},ao=m.__private__.putInfo=function(){var q=Yn(),pe=function(Me){return Me};for(var Fe in u!==null&&(pe=Xn.encryptor(q,0)),Ce("<<"),Ce("/Producer ("+wn(pe("jsPDF "+ur.version))+")"),It)It.hasOwnProperty(Fe)&&It[Fe]&&Ce("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+wn(pe(It[Fe]))+")");Ce("/CreationDate ("+wn(pe(te))+")"),Ce(">>"),Ce("endobj")},Bl=m.__private__.putCatalog=function(q){var pe=(q=q||{}).rootDictionaryObjId||_e;switch(Yn(),Ce("<<"),Ce("/Type /Catalog"),Ce("/Pages "+pe+" 0 R"),wt||(wt="fullwidth"),wt){case"fullwidth":Ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ce("/OpenAction [3 0 R /Fit]");break;case"original":Ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+wt;Fe.substr(Fe.length-1)==="%"&&(wt=parseInt(wt)/100),typeof wt=="number"&&Ce("/OpenAction [3 0 R /XYZ null null "+H(wt)+"]")}switch(Mt||(Mt="continuous"),Mt){case"continuous":Ce("/PageLayout /OneColumn");break;case"single":Ce("/PageLayout /SinglePage");break;case"two":case"twoleft":Ce("/PageLayout /TwoColumnLeft");break;case"tworight":Ce("/PageLayout /TwoColumnRight")}Pt&&Ce("/PageMode /"+Pt),Xr.publish("putCatalog"),Ce(">>"),Ce("endobj")},QA=m.__private__.putTrailer=function(){Ce("trailer"),Ce("<<"),Ce("/Size "+(de+1)),Ce("/Root "+de+" 0 R"),Ce("/Info "+(de-1)+" 0 R"),u!==null&&Ce("/Encrypt "+Xn.oid+" 0 R"),Ce("/ID [ <"+W+"> <"+W+"> ]"),Ce(">>")},bf=m.__private__.putHeader=function(){Ce("%PDF-"+v),Ce("%ºß¬à")},wf=m.__private__.putXRef=function(){var q="0000000000";Ce("xref"),Ce("0 "+(de+1)),Ce("0000000000 65535 f ");for(var pe=1;pe<=de;pe++)typeof xe[pe]=="function"?Ce((q+xe[pe]()).slice(-10)+" 00000 n "):xe[pe]!==void 0?Ce((q+xe[pe]).slice(-10)+" 00000 n "):Ce("0000000000 00000 n ")},kl=m.__private__.buildDocument=function(){Le(),Be(Ae),Xr.publish("buildDocument"),bf(),Xe(),ld(),Ri(),u!==null&&no(),ao(),Bl();var q=ae;return wf(),QA(),Ce("startxref"),Ce(""+q),Ce("%%EOF"),Be(le[Y]),Ae.join(`
`)},ud=m.__private__.getBlob=function(q){return new Blob([je(q)],{type:"application/pdf"})},Il=m.output=m.__private__.output=ts(function(q,pe){switch(typeof(pe=pe||{})=="string"?pe={filename:pe}:pe.filename=pe.filename||"generated.pdf",q){case void 0:return kl();case"save":m.save(pe.filename);break;case"arraybuffer":return je(kl());case"blob":return ud(kl());case"bloburi":case"bloburl":if(Ir.URL!==void 0&&typeof Ir.URL.createObjectURL=="function")return Ir.URL&&Ir.URL.createObjectURL(ud(kl()))||void 0;va.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Me=kl();try{Fe=KI(Me)}catch{Fe=KI(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+pe.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",lt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pe.pdfObjectUrl&&(Ge=pe.pdfObjectUrl,lt="");var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+lt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pe)+");<\/script></body></html>",zt=Ir.open();return zt!==null&&zt.document.write(St),zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var R='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pe.filename+'" width="500px" height="400px" /></body></html>',ee=Ir.open();if(ee!==null){ee.document.write(R);var ce=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=pe.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ce.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ir)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pe)+'"></iframe></body></html>',Ve=Ir.open();if(Ve!==null&&(Ve.document.write(be),Ve.document.title=pe.filename),Ve||typeof safari>"u")return Ve;break;case"datauri":case"dataurl":return Ir.document.location.href=this.output("datauristring",pe);default:return null}}),tl=function(q){return Array.isArray(Fi)===!0&&Fi.indexOf(q)>-1};switch(n){case"pt":gt=1;break;case"mm":gt=72/25.4;break;case"cm":gt=72/2.54;break;case"in":gt=72;break;case"px":gt=tl("px_scaling")==1?.75:96/72;break;case"pc":case"em":gt=12;break;case"ex":gt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);gt=n}var Xn=null;se(),z();var Fl=function(q){return u!==null?Xn.encryptor(q,0):function(pe){return pe}},rl=m.__private__.getPageInfo=m.getPageInfo=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:sr[q].objId,pageNumber:q,pageContext:sr[q]}},wr=m.__private__.getPageInfoByObjId=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pe in sr)if(sr[pe].objId===q)break;return rl(pe)},nl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:sr[Y].objId,pageNumber:Y,pageContext:sr[Y]}};m.addPage=function(){return xc.apply(this,arguments),this},m.setPage=function(){return el.apply(this,arguments),Be.call(this,le[Y]),this},m.insertPage=function(q){return this.addPage(),this.movePage(Y,q),this},m.movePage=function(q,pe){var Fe,Me;if(q>pe){Fe=le[q],Me=sr[q];for(var Ge=q;Ge>pe;Ge--)le[Ge]=le[Ge-1],sr[Ge]=sr[Ge-1];le[pe]=Fe,sr[pe]=Me,this.setPage(pe)}else if(q<pe){Fe=le[q],Me=sr[q];for(var lt=q;lt<pe;lt++)le[lt]=le[lt+1],sr[lt]=sr[lt+1];le[pe]=Fe,sr[pe]=Me,this.setPage(pe)}return this},m.deletePage=function(){return yc.apply(this,arguments),this},m.__private__.text=m.text=function(q,pe,Fe,Me,Ge){var lt,St,zt,R,ee,ce,be,Ve,tt,Nt=(Me=Me||{}).scope||this;if(typeof q=="number"&&typeof pe=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var Cr=Fe;Fe=pe,pe=q,q=Cr}if(arguments[3]instanceof qt?(S("The transform parameter of text() with a Matrix value"),tt=Ge):(zt=arguments[4],R=arguments[5],aa(be=arguments[3])==="object"&&be!==null||(typeof zt=="string"&&(R=zt,zt=null),typeof be=="string"&&(R=be,be=null),typeof be=="number"&&(zt=be,be=null),Me={flags:be,angle:zt,align:R})),isNaN(pe)||isNaN(Fe)||q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(q.length===0)return Nt;var on="",Lr=!1,Fn=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:sn,Vn=Nt.internal.scaleFactor;function ol(tn){return tn=tn.split("	").join(Array(Me.TabLen||9).join(" ")),wn(tn,be)}function Va(tn){for(var rn,da=tn.concat(),za=[],cl=da.length;cl--;)typeof(rn=da.shift())=="string"?za.push(rn):Array.isArray(tn)&&(rn.length===1||rn[1]===void 0&&rn[2]===void 0)?za.push(rn[0]):za.push([rn[0],rn[1],rn[2]]);return za}function lo(tn,rn){var da;if(typeof tn=="string")da=rn(tn)[0];else if(Array.isArray(tn)){for(var za,cl,Ed=tn.concat(),_d=[],Su=Ed.length;Su--;)typeof(za=Ed.shift())=="string"?_d.push(rn(za)[0]):Array.isArray(za)&&typeof za[0]=="string"&&(cl=rn(za[0],za[1],za[2]),_d.push([cl[0],cl[1],cl[2]]));da=_d}return da}var Bc=!1,pd=!0;if(typeof q=="string")Bc=!0;else if(Array.isArray(q)){var qA=q.concat();St=[];for(var Sf,pi=qA.length;pi--;)(typeof(Sf=qA.shift())!="string"||Array.isArray(Sf)&&typeof Sf[0]!="string")&&(pd=!1);Bc=pd}if(Bc===!1)throw new Error('Type of text must be string or Array. "'+q+'" is not recognized.');typeof q=="string"&&(q=q.match(/[\r?\n]/)?q.split(/\r\n|\r|\n/g):[q]);var md=ct/Nt.internal.scaleFactor,Tf=md*(Fn-1);switch(Me.baseline){case"bottom":Fe-=Tf;break;case"top":Fe+=md-Tf;break;case"hanging":Fe+=md-2*Tf;break;case"middle":Fe+=md/2-Tf}if((ce=Me.maxWidth||0)>0&&(typeof q=="string"?q=Nt.splitTextToSize(q,ce):Object.prototype.toString.call(q)==="[object Array]"&&(q=q.reduce(function(tn,rn){return tn.concat(Nt.splitTextToSize(rn,ce))},[]))),lt={text:q,x:pe,y:Fe,options:Me,mutex:{pdfEscape:wn,activeFontKey:Dt,fonts:_r,activeFontSize:ct}},Xr.publish("preProcessText",lt),q=lt.text,zt=(Me=lt.options).angle,!(tt instanceof qt)&&zt&&typeof zt=="number"){zt*=Math.PI/180,Me.rotationDirection===0&&(zt=-zt),N===T.ADVANCED&&(zt=-zt);var Nf=Math.cos(zt),$A=Math.sin(zt);tt=new qt(Nf,$A,-$A,Nf,0,0)}else zt&&zt instanceof qt&&(tt=zt);N!==T.ADVANCED||tt||(tt=fn),(ee=Me.charSpace||xu)!==void 0&&(on+=E(M(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ve=Me.horizontalScale)!==void 0&&(on+=E(100*Ve)+` Tz
`),Me.lang;var co=-1,vx=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,L0=Nt.internal.getCurrentPageInfo().pageContext;switch(vx){case 0:case!1:case"fill":co=0;break;case 1:case!0:case"stroke":co=1;break;case 2:case"fillThenStroke":co=2;break;case 3:case"invisible":co=3;break;case 4:case"fillAndAddForClipping":co=4;break;case 5:case"strokeAndAddPathForClipping":co=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":co=6;break;case 7:case"addToPathForClipping":co=7}var Nm=L0.usedRenderingMode!==void 0?L0.usedRenderingMode:-1;co!==-1?on+=co+` Tr
`:Nm!==-1&&(on+=`0 Tr
`),co!==-1&&(L0.usedRenderingMode=co),R=Me.align||"left";var ll,Pi=ct*Fn,gd=Nt.internal.pageSize.getWidth(),O0=_r[Dt];ee=Me.charSpace||xu,ce=Me.maxWidth||0,be=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var Eu=[],vd=function(tn){return Nt.getStringUnitWidth(tn,{font:O0,charSpace:ee,fontSize:ct,doKerning:!1})*ct/Vn};if(Object.prototype.toString.call(q)==="[object Array]"){var Os;St=Va(q),R!=="left"&&(ll=St.map(vd));var as,xd=0;if(R==="right"){pe-=ll[0],q=[],pi=St.length;for(var uo=0;uo<pi;uo++)uo===0?(as=gs(pe),Os=ti(Fe)):(as=M(xd-ll[uo]),Os=-Pi),q.push([St[uo],as,Os]),xd=ll[uo]}else if(R==="center"){pe-=ll[0]/2,q=[],pi=St.length;for(var Ml=0;Ml<pi;Ml++)Ml===0?(as=gs(pe),Os=ti(Fe)):(as=M((xd-ll[Ml])/2),Os=-Pi),q.push([St[Ml],as,Os]),xd=ll[Ml]}else if(R==="left"){q=[],pi=St.length;for(var kc=0;kc<pi;kc++)q.push(St[kc])}else if(R==="justify"&&O0.encoding==="Identity-H"){q=[],pi=St.length,ce=ce!==0?ce:gd;for(var Ll=0,Pa=0;Pa<pi;Pa++)if(Os=Pa===0?ti(Fe):-Pi,as=Pa===0?gs(pe):Ll,Pa<pi-1){var Ol=M((ce-ll[Pa])/(St[Pa].split(" ").length-1)),ri=St[Pa].split(" ");q.push([ri[0]+" ",as,Os]),Ll=0;for(var fo=1;fo<ri.length;fo++){var Bf=(vd(ri[fo-1]+" "+ri[fo])-vd(ri[fo]))*Vn+Ol;fo==ri.length-1?q.push([ri[fo],Bf,0]):q.push([ri[fo]+" ",Bf,0]),Ll-=Bf}}else q.push([St[Pa],as,Os]);q.push(["",Ll,0])}else{if(R!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(q=[],pi=St.length,ce=ce!==0?ce:gd,Pa=0;Pa<pi;Pa++)Os=Pa===0?ti(Fe):-Pi,as=Pa===0?gs(pe):0,Pa<pi-1?Eu.push(E(M((ce-ll[Pa])/(St[Pa].split(" ").length-1)))):Eu.push(0),q.push([St[Pa],as,Os])}}var Ic=typeof Me.R2L=="boolean"?Me.R2L:Rt;Ic===!0&&(q=lo(q,function(tn,rn,da){return[tn.split("").reverse().join(""),rn,da]})),lt={text:q,x:pe,y:Fe,options:Me,mutex:{pdfEscape:wn,activeFontKey:Dt,fonts:_r,activeFontSize:ct}},Xr.publish("postProcessText",lt),q=lt.text,Lr=lt.mutex.isHex||!1;var KA=_r[Dt].encoding;KA!=="WinAnsiEncoding"&&KA!=="StandardEncoding"||(q=lo(q,function(tn,rn,da){return[ol(tn),rn,da]})),St=Va(q),q=[];for(var yd,bd,wd,kf=0,WA=1,Cd=Array.isArray(St[0])?WA:kf,_u="",If=function(tn,rn,da){var za="";return da instanceof qt?(da=typeof Me.angle=="number"?bn(da,new qt(1,0,0,1,tn,rn)):bn(new qt(1,0,0,1,tn,rn),da),N===T.ADVANCED&&(da=bn(new qt(1,0,0,-1,0,0),da)),za=da.join(" ")+` Tm
`):za=E(tn)+" "+E(rn)+` Td
`,za},Ma=0;Ma<St.length;Ma++){switch(_u="",Cd){case WA:wd=(Lr?"<":"(")+St[Ma][0]+(Lr?">":")"),yd=parseFloat(St[Ma][1]),bd=parseFloat(St[Ma][2]);break;case kf:wd=(Lr?"<":"(")+St[Ma]+(Lr?">":")"),yd=gs(pe),bd=ti(Fe)}Eu!==void 0&&Eu[Ma]!==void 0&&(_u=Eu[Ma]+` Tw
`),Ma===0?q.push(_u+If(yd,bd,tt)+wd):Cd===kf?q.push(_u+wd):Cd===WA&&q.push(_u+If(yd,bd,tt)+wd)}q=Cd===kf?q.join(` Tj
T* `):q.join(` Tj
`),q+=` Tj
`;var Qo=`BT
/`;return Qo+=Dt+" "+ct+` Tf
`,Qo+=E(ct*Fn)+` TL
`,Qo+=Rl+`
`,Qo+=on,Qo+=q,Ce(Qo+="ET"),h[Dt]=!0,Nt};var VA=m.__private__.clip=m.clip=function(q){return Ce(q==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return VA("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Ce("n"),this};var ps=m.__private__.isValidStyle=function(q){var pe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(q)!==-1&&(pe=!0),pe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(q){return ps(q)&&(c=q),this};var io=m.__private__.getStyle=m.getStyle=function(q){var pe=c;switch(q){case"D":case"S":pe="S";break;case"F":pe="f";break;case"FD":case"DF":pe="B";break;case"f":case"f*":case"B":case"B*":pe=q}return pe},Ls=m.close=function(){return Ce("h"),this};m.stroke=function(){return Ce("S"),this},m.fill=function(q){return al("f",q),this},m.fillEvenOdd=function(q){return al("f*",q),this},m.fillStroke=function(q){return al("B",q),this},m.fillStrokeEvenOdd=function(q){return al("B*",q),this};var al=function(q,pe){aa(pe)==="object"?Dl(pe,q):Ce(q)},so=function(q){q===null||N===T.ADVANCED&&q===void 0||(q=io(q),Ce(q))};function wc(q,pe,Fe,Me,Ge){var lt=new Mg(pe||this.boundingBox,Fe||this.xStep,Me||this.yStep,this.gState,Ge||this.matrix);lt.stream=this.stream;var St=q+"$$"+this.cloneIndex+++"$$";return Hn(St,lt),lt}var Dl=function(q,pe){var Fe=Ii[q.key],Me=Ur[Fe];if(Me instanceof pp)Ce("q"),Ce(Cf(pe)),Me.gState&&m.setGState(Me.gState),Ce(q.matrix.toString()+" cm"),Ce("/"+Fe+" sh"),Ce("Q");else if(Me instanceof Mg){var Ge=new qt(1,0,0,-1,0,vs());q.matrix&&(Ge=Ge.multiply(q.matrix||fn),Fe=wc.call(Me,q.key,q.boundingBox,q.xStep,q.yStep,Ge).id),Ce("q"),Ce("/Pattern cs"),Ce("/"+Fe+" scn"),Me.gState&&m.setGState(Me.gState),Ce(pe),Ce("Q")}},Cf=function(q){switch(q){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},oo=m.moveTo=function(q,pe){return Ce(E(M(q))+" "+E(V(pe))+" m"),this},ms=m.lineTo=function(q,pe){return Ce(E(M(q))+" "+E(V(pe))+" l"),this},il=m.curveTo=function(q,pe,Fe,Me,Ge,lt){return Ce([E(M(q)),E(V(pe)),E(M(Fe)),E(V(Me)),E(M(Ge)),E(V(lt)),"c"].join(" ")),this};m.__private__.line=m.line=function(q,pe,Fe,Me,Ge){if(isNaN(q)||isNaN(pe)||isNaN(Fe)||isNaN(Me)||!ps(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return N===T.COMPAT?this.lines([[Fe-q,Me-pe]],q,pe,[1,1],Ge||"S"):this.lines([[Fe-q,Me-pe]],q,pe,[1,1]).stroke()},m.__private__.lines=m.lines=function(q,pe,Fe,Me,Ge,lt){var St,zt,R,ee,ce,be,Ve,tt,Nt,Cr,on,Lr;if(typeof q=="number"&&(Lr=Fe,Fe=pe,pe=q,q=Lr),Me=Me||[1,1],lt=lt||!1,isNaN(pe)||isNaN(Fe)||!Array.isArray(q)||!Array.isArray(Me)||!ps(Ge)||typeof lt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(oo(pe,Fe),St=Me[0],zt=Me[1],ee=q.length,Cr=pe,on=Fe,R=0;R<ee;R++)(ce=q[R]).length===2?(Cr=ce[0]*St+Cr,on=ce[1]*zt+on,ms(Cr,on)):(be=ce[0]*St+Cr,Ve=ce[1]*zt+on,tt=ce[2]*St+Cr,Nt=ce[3]*zt+on,Cr=ce[4]*St+Cr,on=ce[5]*zt+on,il(be,Ve,tt,Nt,Cr,on));return lt&&Ls(),so(Ge),this},m.path=function(q){for(var pe=0;pe<q.length;pe++){var Fe=q[pe],Me=Fe.c;switch(Fe.op){case"m":oo(Me[0],Me[1]);break;case"l":ms(Me[0],Me[1]);break;case"c":il.apply(this,Me);break;case"h":Ls()}}return this},m.__private__.rect=m.rect=function(q,pe,Fe,Me,Ge){if(isNaN(q)||isNaN(pe)||isNaN(Fe)||isNaN(Me)||!ps(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return N===T.COMPAT&&(Me=-Me),Ce([E(M(q)),E(V(pe)),E(M(Fe)),E(M(Me)),"re"].join(" ")),so(Ge),this},m.__private__.triangle=m.triangle=function(q,pe,Fe,Me,Ge,lt,St){if(isNaN(q)||isNaN(pe)||isNaN(Fe)||isNaN(Me)||isNaN(Ge)||isNaN(lt)||!ps(St))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-q,Me-pe],[Ge-Fe,lt-Me],[q-Ge,pe-lt]],q,pe,[1,1],St,!0),this},m.__private__.roundedRect=m.roundedRect=function(q,pe,Fe,Me,Ge,lt,St){if(isNaN(q)||isNaN(pe)||isNaN(Fe)||isNaN(Me)||isNaN(Ge)||isNaN(lt)||!ps(St))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zt=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Fe),lt=Math.min(lt,.5*Me),this.lines([[Fe-2*Ge,0],[Ge*zt,0,Ge,lt-lt*zt,Ge,lt],[0,Me-2*lt],[0,lt*zt,-Ge*zt,lt,-Ge,lt],[2*Ge-Fe,0],[-Ge*zt,0,-Ge,-lt*zt,-Ge,-lt],[0,2*lt-Me],[0,-lt*zt,Ge*zt,-lt,Ge,-lt]],q+Ge,pe,[1,1],St,!0),this},m.__private__.ellipse=m.ellipse=function(q,pe,Fe,Me,Ge){if(isNaN(q)||isNaN(pe)||isNaN(Fe)||isNaN(Me)||!ps(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lt=4/3*(Math.SQRT2-1)*Fe,St=4/3*(Math.SQRT2-1)*Me;return oo(q+Fe,pe),il(q+Fe,pe-St,q+lt,pe-Me,q,pe-Me),il(q-lt,pe-Me,q-Fe,pe-St,q-Fe,pe),il(q-Fe,pe+St,q-lt,pe+Me,q,pe+Me),il(q+lt,pe+Me,q+Fe,pe+St,q+Fe,pe),so(Ge),this},m.__private__.circle=m.circle=function(q,pe,Fe,Me){if(isNaN(q)||isNaN(pe)||isNaN(Fe)||!ps(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(q,pe,Fe,Fe,Me)},m.setFont=function(q,pe,Fe){return Fe&&(pe=D(pe,Fe)),Dt=bc(q,pe,{disableWarning:!1}),this};var ei=m.__private__.getFont=m.getFont=function(){return _r[bc.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var q,pe,Fe={};for(q in Vr)if(Vr.hasOwnProperty(q))for(pe in Fe[q]=[],Vr[q])Vr[q].hasOwnProperty(pe)&&Fe[q].push(pe);return Fe},m.addFont=function(q,pe,Fe,Me,Ge){var lt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&lt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&lt.indexOf(arguments[3])==-1&&(Fe=D(Fe,Me)),Ge=Ge||"Identity-H",vc.call(this,q,pe,Fe,Ge)};var sn,Cc=e.lineWidth||.200025,sl=m.__private__.getLineWidth=m.getLineWidth=function(){return Cc},Ef=m.__private__.setLineWidth=m.setLineWidth=function(q){return Cc=q,Ce(E(M(q))+" w"),this};m.__private__.setLineDash=ur.API.setLineDash=ur.API.setLineDashPattern=function(q,pe){if(q=q||[],pe=pe||0,isNaN(pe)||!Array.isArray(q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return q=q.map(function(Fe){return E(M(Fe))}).join(" "),pe=E(M(pe)),Ce("["+q+"] "+pe+" d"),this};var gu=m.__private__.getLineHeight=m.getLineHeight=function(){return ct*sn};m.__private__.getLineHeight=m.getLineHeight=function(){return ct*sn};var vu=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(q){return typeof(q=q||1.15)=="number"&&(sn=q),this},Ho=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return sn};vu(e.lineHeight);var gs=m.__private__.getHorizontalCoordinate=function(q){return M(q)},ti=m.__private__.getVerticalCoordinate=function(q){return N===T.ADVANCED?q:sr[Y].mediaBox.topRightY-sr[Y].mediaBox.bottomLeftY-M(q)},zA=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(q){return E(gs(q))},Ec=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(q){return E(ti(q))},ns=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Te(ns)},m.__private__.setStrokeColor=m.setDrawColor=function(q,pe,Fe,Me){return ns=Ie({ch1:q,ch2:pe,ch3:Fe,ch4:Me,pdfColorType:"draw",precision:2}),Ce(ns),this};var _c=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Te(_c)},m.__private__.setFillColor=m.setFillColor=function(q,pe,Fe,Me){return _c=Ie({ch1:q,ch2:pe,ch3:Fe,ch4:Me,pdfColorType:"fill",precision:2}),Ce(_c),this};var Rl=e.textColor||"0 g",dd=m.__private__.getTextColor=m.getTextColor=function(){return Te(Rl)};m.__private__.setTextColor=m.setTextColor=function(q,pe,Fe,Me){return Rl=Ie({ch1:q,ch2:pe,ch3:Fe,ch4:Me,pdfColorType:"text",precision:3}),this};var xu=e.charSpace,fd=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(xu||0)};m.__private__.setCharSpace=m.setCharSpace=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xu=q,this};var _f=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(q){var pe=m.CapJoinStyles[q];if(pe===void 0)throw new Error("Line cap style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _f=pe,Ce(pe+" J"),this};var yu=0;m.__private__.setLineJoin=m.setLineJoin=function(q){var pe=m.CapJoinStyles[q];if(pe===void 0)throw new Error("Line join style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yu=pe,Ce(pe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(q){if(q=q||0,isNaN(q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ce(E(M(q))+" M"),this},m.GState=KE,m.setGState=function(q){(q=typeof q=="string"?dn[ma[q]]:Sc(null,q)).equals(Ra)||(Ce("/"+q.id+" gs"),Ra=q)};var Sc=function(q,pe){if(!q||!ma[q]){var Fe=!1;for(var Me in dn)if(dn.hasOwnProperty(Me)&&dn[Me].equals(pe)){Fe=!0;break}if(Fe)pe=dn[Me];else{var Ge="GS"+(Object.keys(dn).length+1).toString(10);dn[Ge]=pe,pe.id=Ge}return q&&(ma[q]=pe.id),Xr.publish("addGState",pe),pe}};m.addGState=function(q,pe){return Sc(q,pe),this},m.saveGraphicsState=function(){return Ce("q"),jn.push({key:Dt,size:ct,color:Rl}),this},m.restoreGraphicsState=function(){Ce("Q");var q=jn.pop();return Dt=q.key,ct=q.size,Rl=q.color,Ra=null,this},m.setCurrentTransformationMatrix=function(q){return Ce(q.toString()+" cm"),this},m.comment=function(q){return Ce("#"+q),this};var bu=function(q,pe){var Fe=q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(lt){isNaN(lt)||(Fe=parseFloat(lt))}});var Me=pe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(lt){isNaN(lt)||(Me=parseFloat(lt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(lt){Ge=lt.toString()}}),this},Ad=function(q,pe,Fe,Me){bu.call(this,q,pe),this.type="rect";var Ge=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(St){isNaN(St)||(Ge=parseFloat(St))}});var lt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return lt},set:function(St){isNaN(St)||(lt=parseFloat(St))}}),this},wu=function(){this.page=Gr,this.currentPage=Y,this.pages=le.slice(0),this.pagesContext=sr.slice(0),this.x=Br,this.y=Zt,this.matrix=yn,this.width=Nc(Y),this.height=vs(Y),this.outputDestination=De,this.id="",this.objectNumber=-1};wu.prototype.restore=function(){Gr=this.page,Y=this.currentPage,sr=this.pagesContext,le=this.pages,Br=this.x,Zt=this.y,yn=this.matrix,Cu(Y,this.width),hd(Y,this.height),De=this.outputDestination};var Tc=function(q,pe,Fe,Me,Ge){Zi.push(new wu),Gr=Y=0,le=[],Br=q,Zt=pe,yn=Ge,rs([Fe,Me])},GA=function(q){if(Qa[q])Zi.pop().restore();else{var pe=new wu,Fe="Xo"+(Object.keys(la).length+1).toString(10);pe.id=Fe,Qa[q]=Fe,la[Fe]=pe,Xr.publish("addFormObject",pe),Zi.pop().restore()}};for(var Pl in m.beginFormObject=function(q,pe,Fe,Me,Ge){return Tc(q,pe,Fe,Me,Ge),this},m.endFormObject=function(q){return GA(q),this},m.doFormObject=function(q,pe){var Fe=la[Qa[q]];return Ce("q"),Ce(pe.toString()+" cm"),Ce("/"+Fe.id+" Do"),Ce("Q"),this},m.getFormObject=function(q){var pe=la[Qa[q]];return{x:pe.x,y:pe.y,width:pe.width,height:pe.height,matrix:pe.matrix}},m.save=function(q,pe){return q=q||"generated.pdf",(pe=pe||{}).returnPromise=pe.returnPromise||!1,pe.returnPromise===!1?(cp(ud(kl()),q),typeof cp.unload=="function"&&Ir.setTimeout&&setTimeout(cp.unload,911),this):new Promise(function(Fe,Me){try{var Ge=cp(ud(kl()),q);typeof cp.unload=="function"&&Ir.setTimeout&&setTimeout(cp.unload,911),Fe(Ge)}catch(lt){Me(lt.message)}})},ur.API)ur.API.hasOwnProperty(Pl)&&(Pl==="events"&&ur.API.events.length?function(q,pe){var Fe,Me,Ge;for(Ge=pe.length-1;Ge!==-1;Ge--)Fe=pe[Ge][0],Me=pe[Ge][1],q.subscribe.apply(q,[Fe].concat(typeof Me=="function"?[Me]:Me))}(Xr,ur.API.events):m[Pl]=ur.API[Pl]);var Nc=m.getPageWidth=function(q){return(sr[q=q||Y].mediaBox.topRightX-sr[q].mediaBox.bottomLeftX)/gt},Cu=m.setPageWidth=function(q,pe){sr[q].mediaBox.topRightX=pe*gt+sr[q].mediaBox.bottomLeftX},vs=m.getPageHeight=function(q){return(sr[q=q||Y].mediaBox.topRightY-sr[q].mediaBox.bottomLeftY)/gt},hd=m.setPageHeight=function(q,pe){sr[q].mediaBox.topRightY=pe*gt+sr[q].mediaBox.bottomLeftY};return m.internal={pdfEscape:wn,getStyle:io,getFont:ei,getFontSize:ot,getCharSpace:fd,getTextColor:dd,getLineHeight:gu,getLineHeightFactor:Ho,getLineWidth:sl,write:Re,getHorizontalCoordinate:gs,getVerticalCoordinate:ti,getCoordinateString:zA,getVerticalCoordinateString:Ec,collections:{},newObject:Yn,newAdditionalObject:ke,newObjectDeferred:ca,newObjectDeferredBegin:me,getFilters:Ke,putStream:nt,events:Xr,scaleFactor:gt,pageSize:{getWidth:function(){return Nc(Y)},setWidth:function(q){Cu(Y,q)},getHeight:function(){return vs(Y)},setHeight:function(q){hd(Y,q)}},encryptionOptions:u,encryption:Xn,getEncryptor:Fl,output:Il,getNumberOfPages:In,pages:le,out:Ce,f2:H,f3:P,getPageInfo:rl,getPageInfoByObjId:wr,getCurrentPageInfo:nl,getPDFVersion:g,Point:bu,Rectangle:Ad,Matrix:qt,hasHotfix:tl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Nc(Y)},set:function(q){Cu(Y,q)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return vs(Y)},set:function(q){hd(Y,q)},enumerable:!0,configurable:!0}),yf.call(m,We),Dt="F1",xc(a,r),Xr.publish("initialized"),m}kg.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},kg.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},kg.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},kg.prototype.processOwnerPassword=function(e,t){return YI(WI(t).substr(0,5),e)},kg.prototype.encryptor=function(e,t){var r=WI(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return YI(r,n)}},KE.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||aa(e)!==aa(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},ur.API={events:[]},ur.version="2.5.2";var li=ur.API,SR=1,pm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ag=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hr=function(e){return e.toFixed(2)},Ch=function(e){return e.toFixed(5)};li.__acroform__={};var Tl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},y8=function(e){return e*SR},Hd=function(e){var t=new tX,r=ar.internal.getHeight(e)||0,n=ar.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Hr(n)),Number(Hr(r))],t},Ive=li.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Fve=li.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Dve=li.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},_i=li.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Dve(e,t-1)},Si=li.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ive(e,t-1)},Ti=li.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fve(e,t-1)},Rve=li.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=r(a+s)||0,l.upperRight_Y=n(i)||0,[Number(Hr(l.lowerLeft_X)),Number(Hr(l.lowerLeft_Y)),Number(Hr(l.upperRight_X)),Number(Hr(l.upperRight_Y))]},Pve=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=XI(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Hr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Hd(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},XI=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var i=r,s=ar.internal.getHeight(e)||0;s=s<0?-s:s;var o=ar.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(P,M,Q){if(P+1<a.length){var V=M+" "+a[P+1][0];return b2(V,e,Q).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var c,u,A=b2("3",e,i).height,h=e.multiline?s-i:(s-A)/2,m=h+=2,v=0,g=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+b2(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var w="",T=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var F=!1;if(a[N].length!==1&&y!==a[N].length-1){if((A+2)*(T+2)+2>s)continue e;w+=a[N][y],F=!0,g=N,N--}else{w=(w+=a[N][y]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var B=parseInt(N),D=l(B,w,i),E=N>=a.length-1;if(D&&!E){w+=" ",y=0;continue}if(D||E){if(E)g=B;else if(e.multiline&&(A+2)*(T+2)+2>s)continue e}else{if(!e.multiline||(A+2)*(T+2)+2>s)continue e;g=B}}for(var S="",k=v;k<=g;k++){var H=a[k];if(e.multiline){if(k===g){S+=H[y]+" ",y=(y+1)%H.length;continue}if(k===v){S+=H[H.length-1]+" ";continue}}S+=H[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,u=b2(S,e,i).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}t+=Hr(c)+" "+Hr(m)+` Td
`,t+="("+pm(S)+`) Tj
`,t+=-Hr(c)+` 0 Td
`,m=-(i+2),u=0,v=F?g:g+1,T++,w=""}break}return n.text=t,n.fontSize=i,n},b2=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Mve={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Lve=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Ove=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),aa(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},Uve=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(nd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Mve)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");SR=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new rX,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&Lve(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],c=o.Rect;if(o.Rect&&(o.Rect=Rve(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ar.createDefaultAppearanceStream(o),aa(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=Pve(o);l.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var A="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var m=o.appearanceStreamContent[h];if(A+="/"+h+" ",A+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var s in m)if(m.hasOwnProperty(s)){var v=m[s];typeof v=="function"&&(v=v.call(a,o)),A+="/"+s+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=m)=="function"&&(v=v.call(a,o)),A+="/"+s+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);A+=">>"}l.push({key:"AP",value:`<<
`+A+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}i&&Ove(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},eX=li.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),aa(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+pm(n(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mB=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+pm(n(e))+")"},Wd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wd.prototype.toString=function(){return this.objId+" 0 R"},Wd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Wd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:eX(a,this.objId,this.scope)}):a instanceof Wd?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var tX=function(){Wd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Tl(tX,Wd);var rX=function(){Wd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+pm(r(e))+")"}},set:function(r){e=r}})};Tl(rX,Wd);var nd=function e(){Wd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');t=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_i(t,3)},set:function(w){w?this.F=Si(t,3):this.F=Ti(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof WE)return;i="FieldObject"+e.FieldNum++}var w=function(T){return T};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+pm(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/SR:c},set:function(w){c=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof WE||this instanceof Ip))return mB(A,this.objId,this.scope)},set:function(w){w=w.toString(),A=w}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ns?h:mB(h,this.objId,this.scope)},set:function(w){w=w.toString(),h=this instanceof Ns?w:w.substr(0,1)==="("?ag(w.substr(1,w.length-2)):ag(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ns?ag(h.substr(1,h.length-1)):h},set:function(w){w=w.toString(),h=this instanceof Ns?"/"+w:w}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ns?m:mB(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof Ns?w:w.substr(0,1)==="("?ag(w.substr(1,w.length-2)):ag(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ns?ag(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Ns?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(w){w=!!w,g=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,1)},set:function(w){w?this.Ff=Si(this.Ff,1):this.Ff=Ti(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,2)},set:function(w){w?this.Ff=Si(this.Ff,2):this.Ff=Ti(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,3)},set:function(w){w?this.Ff=Si(this.Ff,3):this.Ff=Ti(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');y=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(y){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};Tl(nd,Wd);var Yg=function(){nd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return eX(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,s,o){o||(o=1);for(var l,c=[];l=s.exec(i);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,18)},set:function(r){r?this.Ff=Si(this.Ff,18):this.Ff=Ti(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Si(this.Ff,19):this.Ff=Ti(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,20)},set:function(r){r?(this.Ff=Si(this.Ff,20),t.sort()):this.Ff=Ti(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,22)},set:function(r){r?this.Ff=Si(this.Ff,22):this.Ff=Ti(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(r){r?this.Ff=Si(this.Ff,23):this.Ff=Ti(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,27)},set:function(r){r?this.Ff=Si(this.Ff,27):this.Ff=Ti(this.Ff,27)}}),this.hasAppearanceStream=!1};Tl(Yg,nd);var Xg=function(){Yg.call(this),this.fontName="helvetica",this.combo=!1};Tl(Xg,Yg);var Jg=function(){Xg.call(this),this.combo=!0};Tl(Jg,Xg);var KC=function(){Jg.call(this),this.edit=!0};Tl(KC,Jg);var Ns=function(){nd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,15)},set:function(r){r?this.Ff=Si(this.Ff,15):this.Ff=Ti(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,16)},set:function(r){r?this.Ff=Si(this.Ff,16):this.Ff=Ti(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,17)},set:function(r){r?this.Ff=Si(this.Ff,17):this.Ff=Ti(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(r){r?this.Ff=Si(this.Ff,26):this.Ff=Ti(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+pm(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){aa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Tl(Ns,nd);var WC=function(){Ns.call(this),this.pushButton=!0};Tl(WC,Ns);var Zg=function(){Ns.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Tl(Zg,Ns);var WE=function(){var e,t;nd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+pm(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){aa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Tl(WE,nd),Zg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Zg.prototype.createOption=function(e){var t=new WE;return t.Parent=this,t.optionName=e,this.Kids.push(t),jve.call(this.scope,t),t};var YC=function(){Ns.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ar.CheckBox.createAppearanceStream()};Tl(YC,Ns);var Ip=function(){nd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,13)},set:function(t){t?this.Ff=Si(this.Ff,13):this.Ff=Ti(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,21)},set:function(t){t?this.Ff=Si(this.Ff,21):this.Ff=Ti(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,23)},set:function(t){t?this.Ff=Si(this.Ff,23):this.Ff=Ti(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,24)},set:function(t){t?this.Ff=Si(this.Ff,24):this.Ff=Ti(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,25)},set:function(t){t?this.Ff=Si(this.Ff,25):this.Ff=Ti(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,26)},set:function(t){t?this.Ff=Si(this.Ff,26):this.Ff=Ti(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Tl(Ip,nd);var XC=function(){Ip.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_i(this.Ff,14)},set:function(e){e?this.Ff=Si(this.Ff,14):this.Ff=Ti(this.Ff,14)}}),this.password=!0};Tl(XC,Ip);var ar={CheckBox:{createAppearanceStream:function(){return{N:{On:ar.CheckBox.YesNormal},D:{On:ar.CheckBox.YesPushDown,Off:ar.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Hd(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=XI(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Hr(ar.internal.getWidth(e))+" "+Hr(ar.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Hr(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Hd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=ar.internal.getHeight(e),s=ar.internal.getWidth(e),o=XI(e,e.caption);return a.push("1 g"),a.push("0 0 "+Hr(s)+" "+Hr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Hr(s-1)+" "+Hr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Hr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Hd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Hr(ar.internal.getWidth(e))+" "+Hr(ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ar.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ar.RadioButton.Circle.YesNormal,t.D[e]=ar.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Hd(e);t.scope=e.scope;var r=[],n=ar.internal.getWidth(e)<=ar.internal.getHeight(e)?ar.internal.getWidth(e)/4:ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=ar.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ch(ar.internal.getWidth(e)/2)+" "+Ch(ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Hd(e);t.scope=e.scope;var r=[],n=ar.internal.getWidth(e)<=ar.internal.getHeight(e)?ar.internal.getWidth(e)/4:ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*ar.internal.Bezier_C).toFixed(5)),s=Number((n*ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ch(ar.internal.getWidth(e)/2)+" "+Ch(ar.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ch(ar.internal.getWidth(e)/2)+" "+Ch(ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Hd(e);t.scope=e.scope;var r=[],n=ar.internal.getWidth(e)<=ar.internal.getHeight(e)?ar.internal.getWidth(e)/4:ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ch(ar.internal.getWidth(e)/2)+" "+Ch(ar.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ar.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ar.RadioButton.Cross.YesNormal,t.D[e]=ar.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Hd(e);t.scope=e.scope;var r=[],n=ar.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Hr(ar.internal.getWidth(e)-2)+" "+Hr(ar.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Hr(n.x1.x)+" "+Hr(n.x1.y)+" m"),r.push(Hr(n.x2.x)+" "+Hr(n.x2.y)+" l"),r.push(Hr(n.x4.x)+" "+Hr(n.x4.y)+" m"),r.push(Hr(n.x3.x)+" "+Hr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Hd(e);t.scope=e.scope;var r=ar.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Hr(ar.internal.getWidth(e))+" "+Hr(ar.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Hr(ar.internal.getWidth(e)-2)+" "+Hr(ar.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Hr(r.x1.x)+" "+Hr(r.x1.y)+" m"),n.push(Hr(r.x2.x)+" "+Hr(r.x2.y)+" l"),n.push(Hr(r.x4.x)+" "+Hr(r.x4.y)+" m"),n.push(Hr(r.x3.x)+" "+Hr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Hd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Hr(ar.internal.getWidth(e))+" "+Hr(ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};ar.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ar.internal.getWidth(e),r=ar.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},ar.internal.getWidth=function(e){var t=0;return aa(e)==="object"&&(t=y8(e.Rect[2])),t},ar.internal.getHeight=function(e){var t=0;return aa(e)==="object"&&(t=y8(e.Rect[3])),t};var jve=li.addField=function(e){if(Uve(this,e),!(e instanceof nd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};li.AcroFormChoiceField=Yg,li.AcroFormListBox=Xg,li.AcroFormComboBox=Jg,li.AcroFormEditBox=KC,li.AcroFormButton=Ns,li.AcroFormPushButton=WC,li.AcroFormRadioButton=Zg,li.AcroFormCheckBox=YC,li.AcroFormTextField=Ip,li.AcroFormPasswordField=XC,li.AcroFormAppearance=ar,li.AcroForm={ChoiceField:Yg,ListBox:Xg,ComboBox:Jg,EditBox:KC,Button:Ns,PushButton:WC,RadioButton:Zg,CheckBox:YC,TextField:Ip,PasswordField:XC,Appearance:ar},ur.AcroForm={ChoiceField:Yg,ListBox:Xg,ComboBox:Jg,EditBox:KC,Button:Ns,PushButton:WC,RadioButton:Zg,CheckBox:YC,TextField:Ip,PasswordField:XC,Appearance:ar};ur.AcroForm;function nX(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,M){var Q,V,te,W,re,z=t;if((M=M||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(D(P))for(re in r)for(te=r[re],Q=0;Q<te.length;Q+=1){for(W=!0,V=0;V<te[Q].length;V+=1)if(te[Q][V]!==void 0&&te[Q][V]!==P[V]){W=!1;break}if(W===!0){z=re;break}}else for(re in r)for(te=r[re],Q=0;Q<te.length;Q+=1){for(W=!0,V=0;V<te[Q].length;V+=1)if(te[Q][V]!==void 0&&te[Q][V]!==P.charCodeAt(V)){W=!1;break}if(W===!0){z=re;break}}return z===t&&M!==t&&(z=M),z},a=function P(M){for(var Q=this.internal.write,V=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:M.width}),W.push({key:"Height",value:M.height}),M.colorSpace===y.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===y.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)){for(var re="",z=0,X=M.transparency.length;z<X;z++)re+=M.transparency[z]+" "+M.transparency[z]+" ";W.push({key:"Mask",value:"["+re+"]"})}M.sMask!==void 0&&W.push({key:"SMask",value:M.objectId+1+" 0 R"});var K=M.filter!==void 0?["/"+M.filter]:void 0;if(V({data:M.data,additionalKeyValues:W,alreadyAppliedFilters:K,objectId:M.objectId}),Q("endobj"),"sMask"in M&&M.sMask!==void 0){var se="/Predictor "+M.predictor+" /Colors 1 /BitsPerComponent "+M.bitsPerComponent+" /Columns "+M.width,U={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:M.bitsPerComponent,decodeParameters:se,data:M.sMask};"filter"in M&&(U.filter=M.filter),P.call(this,U)}if(M.colorSpace===y.INDEXED){var Y=this.internal.newObject();V({data:S(new Uint8Array(M.palette)),objectId:Y}),Q("endobj")}},i=function(){var P=this.internal.collections.addImage_images;for(var M in P)a.call(this,P[M])},s=function(){var P,M=this.internal.collections.addImage_images,Q=this.internal.write;for(var V in M)Q("/I"+(P=M[V]).index,P.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var P=this.internal.collections.addImage_images;return o.call(this),P},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(P){return typeof e["process"+P.toUpperCase()]=="function"},A=function(P){return aa(P)==="object"&&P.nodeType===1},h=function(P,M){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var Q=""+P.getAttribute("src");if(Q.indexOf("data:image/")===0)return iy(unescape(Q).split("base64,").pop());var V=e.loadFile(Q,!0);if(V!==void 0)return V}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var te;switch(M){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return iy(P.toDataURL(te,1).split("base64,").pop())}},m=function(P){var M=this.internal.collections.addImage_images;if(M){for(var Q in M)if(P===M[Q].alias)return M[Q]}},v=function(P,M,Q){return P||M||(P=-96,M=-96),P<0&&(P=-1*Q.width*72/P/this.internal.scaleFactor),M<0&&(M=-1*Q.height*72/M/this.internal.scaleFactor),P===0&&(P=M*Q.width/Q.height),M===0&&(M=P*Q.height/Q.width),[P,M]},g=function(P,M,Q,V,te,W){var re=v.call(this,Q,V,te),z=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,K=l.call(this);if(Q=re[0],V=re[1],K[te.index]=te,W){W*=Math.PI/180;var se=Math.cos(W),U=Math.sin(W),Y=function(ne){return ne.toFixed(4)},Z=[Y(se),Y(U),Y(-1*U),Y(se),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,z(P),X(M+V),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([z(Q),"0","0",z(V),"0","0","cm"].join(" "))):this.internal.write([z(Q),"0","0",z(V),z(P),X(M+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=e.__addimage__.sHashCode=function(P){var M,Q,V=0;if(typeof P=="string")for(Q=P.length,M=0;M<Q;M++)V=(V<<5)-V+P.charCodeAt(M),V|=0;else if(D(P))for(Q=P.byteLength/2,M=0;M<Q;M++)V=(V<<5)-V+P[M],V|=0;return V},N=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var M=!0;return P.length===0&&(M=!1),P.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(M=!1),M},F=e.__addimage__.extractImageFromDataUrl=function(P){var M=(P=P||"").split("base64,"),Q=null;if(M.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(M[0]);Array.isArray(V)&&(Q={mimeType:V[1],charset:V[2],data:M[1]})}return Q},B=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return B()&&P instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(P){return B()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(P){for(var M=P.length,Q=new Uint8Array(M),V=0;V<M;V++)Q[V]=P.charCodeAt(V);return Q},S=e.__addimage__.arrayBufferToBinaryString=function(P){for(var M="",Q=D(P)?P:new Uint8Array(P),V=0;V<Q.length;V+=8192)M+=String.fromCharCode.apply(null,Q.subarray(V,V+8192));return M};e.addImage=function(){var P,M,Q,V,te,W,re,z,X;if(typeof arguments[1]=="number"?(M=t,Q=arguments[1],V=arguments[2],te=arguments[3],W=arguments[4],re=arguments[5],z=arguments[6],X=arguments[7]):(M=arguments[1],Q=arguments[2],V=arguments[3],te=arguments[4],W=arguments[5],re=arguments[6],z=arguments[7],X=arguments[8]),aa(P=arguments[0])==="object"&&!A(P)&&"imageData"in P){var K=P;P=K.imageData,M=K.format||M||t,Q=K.x||Q||0,V=K.y||V||0,te=K.w||K.width||te,W=K.h||K.height||W,re=K.alias||re,z=K.compression||z,X=K.rotation||K.angle||X}var se=this.internal.getFilters();if(z===void 0&&se.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(Q)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var U=k.call(this,P,M,re,z);return g.call(this,Q,V,te,W,U,X),this};var k=function(P,M,Q,V){var te,W,re;if(typeof P=="string"&&n(P)===t){P=unescape(P);var z=H(P,!1);(z!==""||(z=e.loadFile(P,!0))!==void 0)&&(P=z)}if(A(P)&&(P=h(P,M)),M=n(P,M),!u(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((re=Q)==null||re.length===0)&&(Q=function(X){return typeof X=="string"||D(X)?T(X):D(X.data)?T(X.data):null}(P)),(te=m.call(this,Q))||(B()&&(P instanceof Uint8Array||M==="RGBA"||(W=P,P=E(P))),te=this["process"+M.toUpperCase()](P,c.call(this),Q,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:w.NONE}(V),W)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},H=e.__addimage__.convertBase64ToBinaryString=function(P,M){var Q;M=typeof M!="boolean"||M;var V,te="";if(typeof P=="string"){V=(Q=F(P))!==null?Q.data:P;try{te=iy(V)}catch(W){if(M)throw N(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};e.getImageProperties=function(P){var M,Q,V="";if(A(P)&&(P=h(P)),typeof P=="string"&&n(P)===t&&((V=H(P,!1))===""&&(V=e.loadFile(P)||""),P=V),Q=n(P),!u(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!B()||P instanceof Uint8Array||(P=E(P)),!(M=this["process"+Q.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=Q,M}})(ur.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ur.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,A=0;A<c.length&&!u;A++)switch((n=c[A]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){n=c[h];var m=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(g.objId),T=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(w(n.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+m(w(T))+") >>",g.content=i;var N=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var F=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var B=this.annotations._nameMap[n.options.name];n.options.pageNumber=B.page,n.options.top=B.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+a),h:c(n+i)},options:s,type:"link"})},e.textWithLink=function(r,n,a,i){var s,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;s=Math.ceil(c*u)}else o=l,s=c;return this.text(r,n,a,i),a+=.2*c,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,a-c,o,s,i),l},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ur.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=e.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length==4},A=e.__arabicParser__.resolveLigatures=function(g){var y=0,w=r,T="",N=0;for(y=0;y<g.length;y+=1)w[g.charCodeAt(y)]!==void 0?(N++,typeof(w=w[g.charCodeAt(y)])=="number"&&(T+=String.fromCharCode(w),w=r,N=0),y===g.length-1&&(w=r,T+=g.charAt(y-(N-1)),y-=N-1,N=0)):(w=r,T+=g.charAt(y-N),y-=N,N=0);return T};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(g,y,w){return s(g)?i(g)===!1?-1:!c(g)||!s(y)&&!s(w)||!s(w)&&o(y)||o(g)&&!s(y)||o(g)&&l(y)||o(g)&&o(y)?0:u(g)&&s(y)&&!o(y)&&s(w)&&c(w)?3:o(g)||!s(w)?1:2:-1},m=function(g){var y=0,w=0,T=0,N="",F="",B="",D=(g=g||"").split("\\s+"),E=[];for(y=0;y<D.length;y+=1){for(E.push(""),w=0;w<D[y].length;w+=1)N=D[y][w],F=D[y][w-1],B=D[y][w+1],s(N)?(T=h(N,F,B),E[y]+=T!==-1?String.fromCharCode(t[N.charCodeAt(0)][T]):N):E[y]+=N;E[y]=A(E[y])}return E.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(y)){var T=0;for(w=[],T=0;T<y.length;T+=1)Array.isArray(y[T])?w.push([m(y[T][0]),y[T][1],y[T][2]]):w.push([m(y[T])]);g=w}else g=m(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(ur.API),ur.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ur.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(g){A=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),A=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,m=0,v=0,g=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,F){return N.concat(y.splitTextToSize(F,w))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)m<(g=this.getStringUnitWidth(l[T],{font:A})*u)&&(m=g);return m!==0&&(v=l.length),{w:m/=h,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,A=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=A.top,m&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,u,A,h){if(n.call(this),!u)throw new Error("No data for PDF table.");var m,v,g,y,w=[],T=[],N=[],F={},B={},D=[],E=[],S=(h=h||{}).autoSize||!1,k=h.printHeaders!==!1,H=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},t),M=typeof h.padding=="number"?h.padding:3,Q=h.headerBackgroundColor||"#c8c8c8",V=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=V,this.setFontSize(H),A==null)T=w=Object.keys(u[0]),N=w.map(function(){return"left"});else if(Array.isArray(A)&&aa(A[0])==="object")for(w=A.map(function(K){return K.name}),T=A.map(function(K){return K.prompt||K.name||""}),N=A.map(function(K){return K.align||"left"}),m=0;m<A.length;m+=1)B[A[m].name]=A[m].width*(19.049976/25.4);else Array.isArray(A)&&typeof A[0]=="string"&&(T=w=A,N=w.map(function(){return"left"}));if(S||Array.isArray(A)&&typeof A[0]=="string")for(m=0;m<w.length;m+=1){for(F[y=w[m]]=u.map(function(K){return K[y]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(T[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=F[y],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)D.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[y]=Math.max.apply(null,D)+M+M,D=[]}if(k){var te={};for(m=0;m<w.length;m+=1)te[w[m]]={},te[w[m]].text=T[m],te[w[m]].align=N[m];var W=o.call(this,te,B);E=w.map(function(K){return new i(l,c,B[K],W,te[K].text,void 0,te[K].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var re=A.reduce(function(K,se){return K[se.name]=se.align,K},{});for(m=0;m<u.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:u[m]},this);var z=o.call(this,u[m],B);for(g=0;g<w.length;g+=1){var X=u[m][w[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:g,data:X},this),s.call(this,new i(l,c,B[w[g]],z,X,m+2,re[w[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(m){var v=l[m];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[m]-u-u)},this).map(function(m){return this.getLineHeightFactor()*m.length*A/h+u+u},this).reduce(function(m,v){return Math.max(m,v)},0)};e.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(v)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(ur.API);var aX={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iX=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],JI=nX(iX),sX=[100,200,300,400,500,600,700,800,900],Hve=nX(sX);function ZI(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return aX[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof JI[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function b8(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Qve={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},w8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function C8(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Vve(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Qve,r.genericFontFamilies||{}),i=null,s=null,o=0;o<t.length;++o)if(a[(i=ZI(t[o])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){s=e[i.family];break}if(!(s=s||e[n]))throw new Error("Could not find a font-family for the rule '"+C8(i)+"' and default family '"+n+"'.");if(s=function(l,c){if(c[l])return c[l];var u=JI[l],A=u<=JI.normal?-1:1,h=b8(c,iX,u,A);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(i.stretch,s),s=function(l,c){if(c[l])return c[l];for(var u=aX[l],A=0;A<u.length;++A)if(c[u[A]])return c[u[A]];throw new Error("Could not find a matching font-style for "+l)}(i.style,s),!(s=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=Hve[l],A=b8(c,sX,u,l<400?-1:1);if(!A)throw new Error("Could not find a matching font-weight for value "+l);return A}(i.weight,s)))throw new Error("Failed to resolve a font for the rule '"+C8(i)+"'.");return s}function E8(e){return e.trimLeft()}function zve(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Gve(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var w2,_8,S8,gB=["times"];(function(e){var t,r,n,a,i,s,o,l,c,u=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new l,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new s,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new s,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new A(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var A=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=U;Object.defineProperty(this,"pdf",{get:function(){return Y}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Be){Z=!!Be}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(Be){ne=!!Be}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(Be){isNaN(Be)||(de=Be)}});var xe=0;Object.defineProperty(this,"posY",{get:function(){return xe},set:function(Be){isNaN(Be)||(xe=Be)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Be){var Ce;typeof Be=="number"?Ce=[Be,Be,Be,Be]:((Ce=new Array(4))[0]=Be[0],Ce[1]=Be.length>=2?Be[1]:Ce[0],Ce[2]=Be.length>=3?Be[2]:Ce[0],Ce[3]=Be.length>=4?Be[3]:Ce[1]),c.margin=Ce}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(Be){Ae=Be}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(Be){ae=Be}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(Be){ue=Be}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Be){Be instanceof u&&(c=Be)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Be){c.path=Be}});var le=[];Object.defineProperty(this,"ctxStack",{get:function(){return le},set:function(Be){le=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var Ce;Ce=h(Be),this.ctx.fillStyle=Ce.style,this.ctx.isFillTransparent=Ce.a===0,this.ctx.fillOpacity=Ce.a,this.pdf.setFillColor(Ce.r,Ce.g,Ce.b,{a:Ce.a}),this.pdf.setTextColor(Ce.r,Ce.g,Ce.b,{a:Ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var Ce=h(Be);this.ctx.strokeStyle=Ce.style,this.ctx.isStrokeTransparent=Ce.a===0,this.ctx.strokeOpacity=Ce.a,Ce.a===0?this.pdf.setDrawColor(255,255,255):(Ce.a,this.pdf.setDrawColor(Ce.r,Ce.g,Ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var ie=null;function De(Be,Ce){if(ie===null){var Re=function(je){var We=[];return Object.keys(je).forEach(function(ct){je[ct].forEach(function(wt){var ot=null;switch(wt){case"bold":ot={family:ct,weight:"bold"};break;case"italic":ot={family:ct,style:"italic"};break;case"bolditalic":ot={family:ct,weight:"bold",style:"italic"};break;case"":case"normal":ot={family:ct}}ot!==null&&(ot.ref={name:ct,style:wt},We.push(ot))})}),We}(Be.getFontList());ie=function(je){for(var We={},ct=0;ct<je.length;++ct){var wt=ZI(je[ct]),ot=wt.family,Rt=wt.stretch,Pt=wt.style,Xt=wt.weight;We[ot]=We[ot]||{},We[ot][Rt]=We[ot][Rt]||{},We[ot][Rt][Pt]=We[ot][Rt][Pt]||{},We[ot][Rt][Pt][Xt]=wt}return We}(Re.concat(Ce))}return ie}var Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(Be){ie=null,Le=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var Ce;if(this.ctx.font=Be,(Ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var Re=Ce[1],je=(Ce[2],Ce[3]),We=Ce[4],ct=(Ce[5],Ce[6]),wt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(wt==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:wt==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var ot=function(It){var Dt,gt,Br=[],Zt=It.trim();if(Zt==="")return gB;if(Zt in w8)return[w8[Zt]];for(;Zt!=="";){switch(gt=null,Dt=(Zt=E8(Zt)).charAt(0)){case'"':case"'":gt=zve(Zt.substring(1),Dt);break;default:gt=Gve(Zt)}if(gt===null||(Br.push(gt[0]),(Zt=E8(gt[1]))!==""&&Zt.charAt(0)!==","))return gB;Zt=Zt.replace(/^,/,"")}return Br}(ct);if(this.fontFaces){var Rt=Vve(De(this.pdf,this.fontFaces),ot.map(function(It){return{family:It,stretch:"normal",weight:je,style:Re}}));this.pdf.setFont(Rt.ref.name,Rt.ref.style)}else{var Pt="";(je==="bold"||parseInt(je,10)>=700||Re==="bold")&&(Pt="bold"),Re==="italic"&&(Pt+="italic"),Pt.length===0&&(Pt="normal");for(var Xt="",Mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qt=0;Qt<ot.length;Qt++){if(this.pdf.internal.getFont(ot[Qt],Pt,{noFallback:!0,disableWarning:!0})!==void 0){Xt=ot[Qt];break}if(Pt==="bolditalic"&&this.pdf.internal.getFont(ot[Qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xt=ot[Qt],Pt="bold";else if(this.pdf.internal.getFont(ot[Qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xt=ot[Qt],Pt="normal";break}}if(Xt===""){for(var $t=0;$t<ot.length;$t++)if(Mt[ot[$t]]){Xt=Mt[ot[$t]];break}}Xt=Xt===""?"Times":Xt,this.pdf.setFont(Xt,Pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};A.prototype.setLineDash=function(U){this.lineDash=U},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){F.call(this,"fill",!1)},A.prototype.stroke=function(){F.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(U,Y){if(isNaN(U)||isNaN(Y))throw va.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new s(U,Y));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(U,Y)},A.prototype.closePath=function(){var U=new s(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&aa(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){U=new s(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(U.x,U.y)},A.prototype.lineTo=function(U,Y){if(isNaN(U)||isNaN(Y))throw va.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new s(U,Y));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(Z.x,Z.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},A.prototype.quadraticCurveTo=function(U,Y,Z,ne){if(isNaN(Z)||isNaN(ne)||isNaN(U)||isNaN(Y))throw va.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new s(Z,ne)),xe=this.ctx.transform.applyToPoint(new s(U,Y));this.path.push({type:"qct",x1:xe.x,y1:xe.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},A.prototype.bezierCurveTo=function(U,Y,Z,ne,de,xe){if(isNaN(de)||isNaN(xe)||isNaN(U)||isNaN(Y)||isNaN(Z)||isNaN(ne))throw va.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new s(de,xe)),ae=this.ctx.transform.applyToPoint(new s(U,Y)),ue=this.ctx.transform.applyToPoint(new s(Z,ne));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:ue.x,y2:ue.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new s(Ae.x,Ae.y)},A.prototype.arc=function(U,Y,Z,ne,de,xe){if(isNaN(U)||isNaN(Y)||isNaN(Z)||isNaN(ne)||isNaN(de))throw va.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(xe=!!xe,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new s(U,Y));U=Ae.x,Y=Ae.y;var ae=this.ctx.transform.applyToPoint(new s(0,Z)),ue=this.ctx.transform.applyToPoint(new s(0,0));Z=Math.sqrt(Math.pow(ae.x-ue.x,2)+Math.pow(ae.y-ue.y,2))}Math.abs(de-ne)>=2*Math.PI&&(ne=0,de=2*Math.PI),this.path.push({type:"arc",x:U,y:Y,radius:Z,startAngle:ne,endAngle:de,counterclockwise:xe})},A.prototype.arcTo=function(U,Y,Z,ne,de){throw new Error("arcTo not implemented.")},A.prototype.rect=function(U,Y,Z,ne){if(isNaN(U)||isNaN(Y)||isNaN(Z)||isNaN(ne))throw va.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,Y),this.lineTo(U+Z,Y),this.lineTo(U+Z,Y+ne),this.lineTo(U,Y+ne),this.lineTo(U,Y),this.lineTo(U+Z,Y),this.lineTo(U,Y)},A.prototype.fillRect=function(U,Y,Z,ne){if(isNaN(U)||isNaN(Y)||isNaN(Z)||isNaN(ne))throw va.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,Y,Z,ne),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},A.prototype.strokeRect=function(U,Y,Z,ne){if(isNaN(U)||isNaN(Y)||isNaN(Z)||isNaN(ne))throw va.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(U,Y,Z,ne),this.stroke())},A.prototype.clearRect=function(U,Y,Z,ne){if(isNaN(U)||isNaN(Y)||isNaN(Z)||isNaN(ne))throw va.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,Y,Z,ne))},A.prototype.save=function(U){U=typeof U!="boolean"||U;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},A.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(U){var Y,Z,ne,de;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))Y=0,Z=0,ne=0,de=0;else{var xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(xe!==null)Y=parseInt(xe[1]),Z=parseInt(xe[2]),ne=parseInt(xe[3]),de=1;else if((xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)Y=parseInt(xe[1]),Z=parseInt(xe[2]),ne=parseInt(xe[3]),de=parseFloat(xe[4]);else{if(de=1,typeof U=="string"&&U.charAt(0)!=="#"){var Ae=new XY(U);U=Ae.ok?Ae.toHex():"#000000"}U.length===4?(Y=U.substring(1,2),Y+=Y,Z=U.substring(2,3),Z+=Z,ne=U.substring(3,4),ne+=ne):(Y=U.substring(1,3),Z=U.substring(3,5),ne=U.substring(5,7)),Y=parseInt(Y,16),Z=parseInt(Z,16),ne=parseInt(ne,16)}}return{r:Y,g:Z,b:ne,a:de,style:U}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(U,Y,Z,ne){if(isNaN(Y)||isNaN(Z)||typeof U!="string")throw va.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!m.call(this)){var de=z(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;M.call(this,{text:U,x:Y,y:Z,scale:xe,angle:de,align:this.textAlign,maxWidth:ne})}},A.prototype.strokeText=function(U,Y,Z,ne){if(isNaN(Y)||isNaN(Z)||typeof U!="string")throw va.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ne=isNaN(ne)?void 0:ne;var de=z(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;M.call(this,{text:U,x:Y,y:Z,scale:xe,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:ne})}},A.prototype.measureText=function(U){if(typeof U!="string")throw va.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,Z=this.pdf.internal.scaleFactor,ne=Y.internal.getFontSize(),de=Y.getStringUnitWidth(U)*ne/Y.internal.scaleFactor,xe=function(Ae){var ae=(Ae=Ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new xe({width:de*=Math.round(96*Z/72*1e4)/1e4})},A.prototype.scale=function(U,Y){if(isNaN(U)||isNaN(Y))throw va.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(U,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},A.prototype.rotate=function(U){if(isNaN(U))throw va.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},A.prototype.translate=function(U,Y){if(isNaN(U)||isNaN(Y))throw va.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,U,Y);this.ctx.transform=this.ctx.transform.multiply(Z)},A.prototype.transform=function(U,Y,Z,ne,de,xe){if(isNaN(U)||isNaN(Y)||isNaN(Z)||isNaN(ne)||isNaN(de)||isNaN(xe))throw va.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new l(U,Y,Z,ne,de,xe);this.ctx.transform=this.ctx.transform.multiply(Ae)},A.prototype.setTransform=function(U,Y,Z,ne,de,xe){U=isNaN(U)?1:U,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?0:Z,ne=isNaN(ne)?1:ne,de=isNaN(de)?0:de,xe=isNaN(xe)?0:xe,this.ctx.transform=new l(U,Y,Z,ne,de,xe)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(U,Y,Z,ne,de,xe,Ae,ae,ue){var le=this.pdf.getImageProperties(U),ie=1,De=1,Le=1,Be=1;ne!==void 0&&ae!==void 0&&(Le=ae/ne,Be=ue/de,ie=le.width/ne*ae/ne,De=le.height/de*ue/de),xe===void 0&&(xe=Y,Ae=Z,Y=0,Z=0),ne!==void 0&&ae===void 0&&(ae=ne,ue=de),ne===void 0&&ae===void 0&&(ae=le.width,ue=le.height);for(var Ce,Re=this.ctx.transform.decompose(),je=z(Re.rotate.shx),We=new l,ct=(We=(We=(We=We.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new o(xe-Y*Le,Ae-Z*Be,ne*ie,de*De)),wt=y.call(this,ct),ot=[],Rt=0;Rt<wt.length;Rt+=1)ot.indexOf(wt[Rt])===-1&&ot.push(wt[Rt]);if(N(ot),this.autoPaging)for(var Pt=ot[0],Xt=ot[ot.length-1],Mt=Pt;Mt<Xt+1;Mt++){this.pdf.setPage(Mt);var Qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$t=Mt===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=Mt===1?0:It+(Mt-2)*Dt;if(this.ctx.clip_path.length!==0){var Br=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ce,this.posX+this.margin[3],-gt+$t+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=Br}var Zt=JSON.parse(JSON.stringify(ct));Zt=T([Zt],this.posX+this.margin[3],-gt+$t+this.ctx.prevPageLastElemOffset)[0];var yn=(Mt>Pt||Mt<Xt)&&g.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,Dt,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,je),yn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(U,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,je)};var y=function(U,Y,Z){var ne=[];Y=Y||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":ne.push(Math.floor((U.y+de)/Z)+1);break;case"arc":ne.push(Math.floor((U.y+de-U.radius)/Z)+1),ne.push(Math.floor((U.y+de+U.radius)/Z)+1);break;case"qct":var xe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);ne.push(Math.floor((xe.y+de)/Z)+1),ne.push(Math.floor((xe.y+xe.h+de)/Z)+1);break;case"bct":var Ae=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);ne.push(Math.floor((Ae.y+de)/Z)+1),ne.push(Math.floor((Ae.y+Ae.h+de)/Z)+1);break;case"rect":ne.push(Math.floor((U.y+de)/Z)+1),ne.push(Math.floor((U.y+U.h+de)/Z)+1)}for(var ae=0;ae<ne.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<ne[ae];)w.call(this);return ne},w=function(){var U=this.fillStyle,Y=this.strokeStyle,Z=this.font,ne=this.lineCap,de=this.lineWidth,xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=Y,this.font=Z,this.lineCap=ne,this.lineWidth=de,this.lineJoin=xe},T=function(U,Y,Z){for(var ne=0;ne<U.length;ne++)switch(U[ne].type){case"bct":U[ne].x2+=Y,U[ne].y2+=Z;case"qct":U[ne].x1+=Y,U[ne].y1+=Z;case"mt":case"lt":case"arc":default:U[ne].x+=Y,U[ne].y+=Z}return U},N=function(U){return U.sort(function(Y,Z){return Y-Z})},F=function(U,Y){for(var Z,ne,de=this.fillStyle,xe=this.strokeStyle,Ae=this.lineCap,ae=this.lineWidth,ue=Math.abs(ae*this.ctx.transform.scaleX),le=this.lineJoin,ie=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),Le=[],Be=0;Be<De.length;Be++)if(De[Be].x!==void 0)for(var Ce=y.call(this,De[Be]),Re=0;Re<Ce.length;Re+=1)Le.indexOf(Ce[Re])===-1&&Le.push(Ce[Re]);for(var je=0;je<Le.length;je++)for(;this.pdf.internal.getNumberOfPages()<Le[je];)w.call(this);if(N(Le),this.autoPaging)for(var We=Le[0],ct=Le[Le.length-1],wt=We;wt<ct+1;wt++){this.pdf.setPage(wt),this.fillStyle=de,this.strokeStyle=xe,this.lineCap=Ae,this.lineWidth=ue,this.lineJoin=le;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=wt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=wt===1?0:Pt+(wt-2)*Xt;if(this.ctx.clip_path.length!==0){var Qt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Z,this.posX+this.margin[3],-Mt+Rt+this.ctx.prevPageLastElemOffset),B.call(this,U,!0),this.path=Qt}if(ne=JSON.parse(JSON.stringify(ie)),this.path=T(ne,this.posX+this.margin[3],-Mt+Rt+this.ctx.prevPageLastElemOffset),Y===!1||wt===0){var $t=(wt>We||wt<ct)&&g.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Xt,null).clip().discardPath()),B.call(this,U,Y),$t&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=ue,B.call(this,U,Y),this.lineWidth=ae;this.path=ie},B=function(U,Y){if((U!=="stroke"||Y||!v.call(this))&&(U==="stroke"||Y||!m.call(this))){for(var Z,ne,de=[],xe=this.path,Ae=0;Ae<xe.length;Ae++){var ae=xe[Ae];switch(ae.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:ae,deltas:[],abs:[]});break;case"lt":var ue=de.length;if(xe[Ae-1]&&!isNaN(xe[Ae-1].x)&&(Z=[ae.x-xe[Ae-1].x,ae.y-xe[Ae-1].y],ue>0)){for(;ue>=0;ue--)if(de[ue-1].close!==!0&&de[ue-1].begin!==!0){de[ue-1].deltas.push(Z),de[ue-1].abs.push(ae);break}}break;case"bct":Z=[ae.x1-xe[Ae-1].x,ae.y1-xe[Ae-1].y,ae.x2-xe[Ae-1].x,ae.y2-xe[Ae-1].y,ae.x-xe[Ae-1].x,ae.y-xe[Ae-1].y],de[de.length-1].deltas.push(Z);break;case"qct":var le=xe[Ae-1].x+2/3*(ae.x1-xe[Ae-1].x),ie=xe[Ae-1].y+2/3*(ae.y1-xe[Ae-1].y),De=ae.x+2/3*(ae.x1-ae.x),Le=ae.y+2/3*(ae.y1-ae.y),Be=ae.x,Ce=ae.y;Z=[le-xe[Ae-1].x,ie-xe[Ae-1].y,De-xe[Ae-1].x,Le-xe[Ae-1].y,Be-xe[Ae-1].x,Ce-xe[Ae-1].y],de[de.length-1].deltas.push(Z);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(ae)}}ne=Y?null:U==="stroke"?"stroke":"fill";for(var Re=!1,je=0;je<de.length;je++)if(de[je].arc)for(var We=de[je].abs,ct=0;ct<We.length;ct++){var wt=We[ct];wt.type==="arc"?S.call(this,wt.x,wt.y,wt.radius,wt.startAngle,wt.endAngle,wt.counterclockwise,void 0,Y,!Re):Q.call(this,wt.x,wt.y),Re=!0}else if(de[je].close===!0)this.pdf.internal.out("h"),Re=!1;else if(de[je].begin!==!0){var ot=de[je].start.x,Rt=de[je].start.y;V.call(this,de[je].deltas,ot,Rt),Re=!0}ne&&k.call(this,ne),Y&&H.call(this)}},D=function(U){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-Z;case"top":return U+Y-Z;case"hanging":return U+Y-2*Z;case"middle":return U+Y/2-Z;case"ideographic":return U;case"alphabetic":default:return U}},E=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(Y,Z){this.colorStops.push([Y,Z])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(U,Y,Z,ne,de,xe,Ae,ae,ue){for(var le=W.call(this,Z,ne,de,xe),ie=0;ie<le.length;ie++){var De=le[ie];ie===0&&(ue?P.call(this,De.x1+U,De.y1+Y):Q.call(this,De.x1+U,De.y1+Y)),te.call(this,U,Y,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}ae?H.call(this):k.call(this,Ae)},k=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(U,Y){this.pdf.internal.out(r(U)+" "+n(Y)+" m")},M=function(U){var Y;switch(U.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var Z=this.pdf.getTextDimensions(U.text),ne=D.call(this,U.y),de=E.call(this,ne)-Z.h,xe=this.ctx.transform.applyToPoint(new s(U.x,ne)),Ae=this.ctx.transform.decompose(),ae=new l;ae=(ae=(ae=ae.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale);for(var ue,le,ie,De=this.ctx.transform.applyToRectangle(new o(U.x,ne,Z.w,Z.h)),Le=ae.applyToRectangle(new o(U.x,de,Z.w,Z.h)),Be=y.call(this,Le),Ce=[],Re=0;Re<Be.length;Re+=1)Ce.indexOf(Be[Re])===-1&&Ce.push(Be[Re]);if(N(Ce),this.autoPaging)for(var je=Ce[0],We=Ce[Ce.length-1],ct=je;ct<We+1;ct++){this.pdf.setPage(ct);var wt=ct===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[2],Pt=Rt-this.margin[0],Xt=this.pdf.internal.pageSize.width-this.margin[1],Mt=Xt-this.margin[3],Qt=ct===1?0:ot+(ct-2)*Pt;if(this.ctx.clip_path.length!==0){var $t=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ue,this.posX+this.margin[3],-1*Qt+wt),B.call(this,"fill",!0),this.path=$t}var It=T([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Qt+wt+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*U.scale),ie=this.lineWidth,this.lineWidth=ie*U.scale);var Dt=this.autoPaging!=="text";if(Dt||It.y+It.h<=Rt){if(Dt||It.y>=wt&&It.x<=Xt){var gt=Dt?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||Xt-It.x)[0],Br=T([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Qt+wt+this.ctx.prevPageLastElemOffset)[0],Zt=Dt&&(ct>je||ct<We)&&g.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Pt,null).clip().discardPath()),this.pdf.text(gt,Br.x,Br.y,{angle:U.angle,align:Y,renderingMode:U.renderingMode}),Zt&&this.pdf.restoreGraphicsState()}}else It.y<Rt&&(this.ctx.prevPageLastElemOffset+=Rt-It.y);U.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ie)}else U.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*U.scale),ie=this.lineWidth,this.lineWidth=ie*U.scale),this.pdf.text(U.text,xe.x+this.posX,xe.y+this.posY,{angle:U.angle,align:Y,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ie)},Q=function(U,Y,Z,ne){Z=Z||0,ne=ne||0,this.pdf.internal.out(r(U+Z)+" "+n(Y+ne)+" l")},V=function(U,Y,Z){return this.pdf.lines(U,Y,Z,null,null)},te=function(U,Y,Z,ne,de,xe,Ae,ae){this.pdf.internal.out([t(a(Z+U)),t(i(ne+Y)),t(a(de+U)),t(i(xe+Y)),t(a(Ae+U)),t(i(ae+Y)),"c"].join(" "))},W=function(U,Y,Z,ne){for(var de=2*Math.PI,xe=Math.PI/2;Y>Z;)Y-=de;var Ae=Math.abs(Z-Y);Ae<de&&ne&&(Ae=de-Ae);for(var ae=[],ue=ne?-1:1,le=Y;Ae>1e-5;){var ie=le+ue*Math.min(Ae,xe);ae.push(re.call(this,U,le,ie)),Ae-=Math.abs(ie-le),le=ie}return ae},re=function(U,Y,Z){var ne=(Z-Y)/2,de=U*Math.cos(ne),xe=U*Math.sin(ne),Ae=de,ae=-xe,ue=Ae*Ae+ae*ae,le=ue+Ae*de+ae*xe,ie=4/3*(Math.sqrt(2*ue*le)-le)/(Ae*xe-ae*de),De=Ae-ie*ae,Le=ae+ie*Ae,Be=De,Ce=-Le,Re=ne+Y,je=Math.cos(Re),We=Math.sin(Re);return{x1:U*Math.cos(Y),y1:U*Math.sin(Y),x2:De*je-Le*We,y2:De*We+Le*je,x3:Be*je-Ce*We,y3:Be*We+Ce*je,x4:U*Math.cos(Z),y4:U*Math.sin(Z)}},z=function(U){return 180*U/Math.PI},X=function(U,Y,Z,ne,de,xe){var Ae=U+.5*(Z-U),ae=Y+.5*(ne-Y),ue=de+.5*(Z-de),le=xe+.5*(ne-xe),ie=Math.min(U,de,Ae,ue),De=Math.max(U,de,Ae,ue),Le=Math.min(Y,xe,ae,le),Be=Math.max(Y,xe,ae,le);return new o(ie,Le,De-ie,Be-Le)},K=function(U,Y,Z,ne,de,xe,Ae,ae){var ue,le,ie,De,Le,Be,Ce,Re,je,We,ct,wt,ot,Rt,Pt=Z-U,Xt=ne-Y,Mt=de-Z,Qt=xe-ne,$t=Ae-de,It=ae-xe;for(le=0;le<41;le++)je=(Ce=(ie=U+(ue=le/40)*Pt)+ue*((Le=Z+ue*Mt)-ie))+ue*(Le+ue*(de+ue*$t-Le)-Ce),We=(Re=(De=Y+ue*Xt)+ue*((Be=ne+ue*Qt)-De))+ue*(Be+ue*(xe+ue*It-Be)-Re),le==0?(ct=je,wt=We,ot=je,Rt=We):(ct=Math.min(ct,je),wt=Math.min(wt,We),ot=Math.max(ot,je),Rt=Math.max(Rt,We));return new o(Math.round(ct),Math.round(wt),Math.round(ot-ct),Math.round(Rt-wt))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,Y,Z=(U=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:Y}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(ur.API),function(e){var t=function(i){var s,o,l,c,u,A,h,m,v,g;for(o=[],l=0,c=(i+=s="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(A=(u=((u=((u=((u=(u-(g=u%85))/85)-(v=u%85))/85)-(m=u%85))/85)-(h=u%85))/85)%85,o.push(A+33,h+33,m+33,v+33,g+33)):o.push(122);return function(y,w){for(var T=w;T>0;T--)y.pop()}(o,s.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var s,o,l,c,u,A=String,h="length",m=255,v="charCodeAt",g="slice",y="replace";for(i[g](-2),i=i[g](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],c=0,u=(i+=s="uuuuu"[g](i[h]%5||5))[h];u>c;c+=5)o=52200625*(i[v](c)-33)+614125*(i[v](c+1)-33)+7225*(i[v](c+2)-33)+85*(i[v](c+3)-33)+(i[v](c+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(w,T){for(var N=T;N>0;N--)w.pop()}(l,s[h]),A.fromCharCode.apply(A,l)},n=function(i){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),s.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},a=function(i){for(var s=new Uint8Array(i.length),o=i.length;o--;)s[o]=i.charCodeAt(o);return i=(s=$I(s)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};e.processDataByFilters=function(i,s){var o=0,l=i||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ur.API),function(e){e.loadFile=function(t,r,n){return function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,c,u){var A=new XMLHttpRequest,h=0,m=function(v){var g=v.length,y=[],w=String.fromCharCode;for(h=0;h<g;h+=1)y.push(w(255&v.charCodeAt(h)));return y.join("")};if(A.open("GET",l,!c),A.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(A.onload=function(){A.status===200?u(m(this.responseText)):u(void 0)}),A.send(null),c&&A.status===200)return m(A.responseText)}(a,i,s)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(ur.API),function(e){function t(){return(Ir.html2canvas?Promise.resolve(Ir.html2canvas):$E(()=>Promise.resolve().then(()=>k7e),void 0)).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function r(){return(Ir.DOMPurify?Promise.resolve(Ir.DOMPurify):$E(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var o=aa(s);return o==="undefined"?"undefined":o==="string"||s instanceof String?"string":o==="number"||s instanceof Number?"number":o==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(s,o){var l=document.createElement(s);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},i=function s(o){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(s,o){return s.__proto__=o||i.prototype,s},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(s,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},i.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var A=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||A.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(A.width=c.width,A.height=c.height,A.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(A.value=c.value),A.addEventListener("load",function(){A.scrollTop=c.scrollTop,A.scrollLeft=c.scrollLeft},!0)),A}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var m=c[h],v=m.src.find(function(g){return g.format==="truetype"});v&&l.addFont(v.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,l.context2d.save(!0),o(this.prop.container,A)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(s,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,o):this.outputPdf(s,o)},i.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,o)})},i.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},i.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(s){if(n(s)!=="object")return this;var o=Object.keys(s||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(s,o){return this.then(function(){var l=s in i.template.prop?this.prop[s]:this.opt[s];return o?o(l):l})},i.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},i.prototype.setPageSize=function(s){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(s=s||ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},i.prototype.setProgress=function(s,o,l,c){return s!=null&&(this.progress.val=s),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(s,o,l,c){return this.setProgress(s?this.progress.val+s:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(s,o){var l=this;return this.thenCore(s,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(A){return l.updateProgress(null,c),A}).then(c,u).then(function(A){return l.updateProgress(1),A})})},i.prototype.thenCore=function(s,o,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,s,o);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},i.prototype.thenList=function(s){var o=this;return s.forEach(function(l){o=o.thenCore(l)}),o},i.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return i.convert(o,this)},i.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},i.prototype.error=function(s){return this.then(function(){throw new Error(s)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,ur.getPageSize=function(s,o,l){if(aa(s)==="object"){var c=s;s=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var u,A=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var m,v=0,g=0;if(h.hasOwnProperty(A))v=h[A][1]/u,g=h[A][0]/u;else try{v=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",g>v&&(m=g,g=v,v=m);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",v>g&&(m=g,g=v,v=m)}return{width:g,height:v,unit:o,k:u,orientation:s}},e.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(ZI):null;var l=new i(o);return o.worker?l:l.from(s).doCallback()}}(ur.API),ur.API.addJS=function(e){return S8=e,this.internal.events.subscribe("postPutResources",function(){w2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(w2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),_8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+S8+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){w2!==void 0&&_8!==void 0&&this.internal.out("/Names <</JavaScript "+w2+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],o=n.exec(s);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var A=r.internal.newObject();u.push(A);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(ur.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,s,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(A){for(var h,m=256*A.charCodeAt(4)+A.charCodeAt(5),v=A.length,g={width:0,height:0,numcomponents:1},y=4;y<v;y+=2){if(y+=m,t.indexOf(A.charCodeAt(y+1))!==-1){h=256*A.charCodeAt(y+5)+A.charCodeAt(y+6),g={width:256*A.charCodeAt(y+7)+A.charCodeAt(y+8),height:h,numcomponents:A.charCodeAt(y+9)};break}m=256*A.charCodeAt(y+2)+A.charCodeAt(y+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:a}}return u}}(ur.API);var ig,C2,T8,N8,B8,qve=function(){var e,t,r;function n(i){var s,o,l,c,u,A,h,m,v,g,y,w,T,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},A=null;;){switch(s=this.readUInt32(),v=(function(){var F,B;for(B=[],F=0;F<4;++F)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":A&&this.animation.frames.push(A),this.pos+=4,A={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,A.delay=1e3*u/c,A.disposeOp=this.data[this.pos++],A.blendOp=this.data[this.pos++],A.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,s-=4),i=(A!=null?A.data:void 0)||this.imgData,w=0;0<=s?w<s:w>s;0<=s?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(T=0;0<=g?T<g:T>g;0<=g?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":h=(y=this.read(s)).indexOf(0),m=String.fromCharCode.apply(String,y.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return A&&this.animation.frames.push(A),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var s,o;for(o=[],s=0;0<=i?s<i:s>i;0<=i?++s:--s)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(A,h,m,v){var g,y,w,T,N,F,B,D,E,S,k,H,P,M,Q,V,te,W,re,z,X,K=Math.ceil((c.width-A)/m),se=Math.ceil((c.height-h)/v),U=c.width==K&&c.height==se;for(M=s*K,H=U?o:new Uint8Array(M*se),F=i.length,P=0,y=0;P<se&&l<F;){switch(i[l++]){case 0:for(T=te=0;te<M;T=te+=1)H[y++]=i[l++];break;case 1:for(T=W=0;W<M;T=W+=1)g=i[l++],N=T<s?0:H[y-s],H[y++]=(g+N)%256;break;case 2:for(T=re=0;re<M;T=re+=1)g=i[l++],w=(T-T%s)/s,Q=P&&H[(P-1)*M+w*s+T%s],H[y++]=(Q+g)%256;break;case 3:for(T=z=0;z<M;T=z+=1)g=i[l++],w=(T-T%s)/s,N=T<s?0:H[y-s],Q=P&&H[(P-1)*M+w*s+T%s],H[y++]=(g+Math.floor((N+Q)/2))%256;break;case 4:for(T=X=0;X<M;T=X+=1)g=i[l++],w=(T-T%s)/s,N=T<s?0:H[y-s],P===0?Q=V=0:(Q=H[(P-1)*M+w*s+T%s],V=w&&H[(P-1)*M+(w-1)*s+T%s]),B=N+Q-V,D=Math.abs(B-N),S=Math.abs(B-Q),k=Math.abs(B-V),E=D<=S&&D<=k?N:S<=k?Q:V,H[y++]=(g+E)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!U){var Y=((h+P*v)*c.width+A)*s,Z=P*M;for(T=0;T<K;T+=1){for(var ne=0;ne<s;ne+=1)o[Y++]=H[Z++];Y+=(m-1)*s}}P++}}return i=Eve(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},n.prototype.decodePalette=function(){var i,s,o,l,c,u,A,h,m;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,i=0,s=A=0,h=o.length;A<h;s=A+=3)c[l++]=o[s],c[l++]=o[s+1],c[l++]=o[s+2],c[l++]=(m=u[i++])!=null?m:255;return c},n.prototype.copyToImageData=function(i,s){var o,l,c,u,A,h,m,v,g,y,w;if(l=this.colors,g=null,o=this.hasAlphaChannel,this.palette.length&&(g=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,o=!0),v=(c=i.data||i).length,A=g||s,u=h=0,l===1)for(;u<v;)m=g?4*s[u/4]:h,y=A[m++],c[u++]=y,c[u++]=y,c[u++]=y,c[u++]=o?A[m++]:255,h=m;else for(;u<v;)m=g?4*s[u/4]:h,c[u++]=A[m++],c[u++]=A[m++],c[u++]=A[m++],c[u++]=o?A[m++]:255,h=m},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Ir)==="[object Window]"){try{t=Ir.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var s;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(s=new Image).src=t.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var s,o,l,c,u,A,h,m;if(this.animation){for(m=[],o=u=0,A=(h=this.animation.frames).length;u<A;o=++u)s=h[o],l=i.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,m.push(s.image=e(l));return m}},n.prototype.renderFrame=function(i,s){var o,l,c;return o=(l=this.animation.frames)[s],c=l[s-1],s===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var s,o,l,c,u,A,h=this;return o=0,A=this.animation,c=A.numFrames,l=A.frames,u=A.numPlays,(s=function(){var m,v;if(m=o++%c,v=l[m],h.renderFrame(i,m),c>1&&o/c<u)return h.animation._timeout=setTimeout(s,v.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var s,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,s=i.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function $ve(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<(7&a)+1;e[t++],e[t++];var o=null,l=null;i&&(o=t,l=s,t+=3*s);var c=!0,u=[],A=0,h=null,m=0,v=null;for(this.width=r,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];A=e[t++]|e[t++]<<8,h=e[t++],(1&g)==0&&(h=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,T=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,F=e[t++],B=F>>6&1,D=1<<(7&F)+1,E=o,S=l,k=!1;F>>7&&(k=!0,E=t,S=D,t+=3*D);var H=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:y,y:w,width:T,height:N,has_local_palette:k,palette_offset:E,palette_size:S,data_offset:H,data_length:t-H,transparent_index:h,interlaced:!!B,delay:A,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(M){if(M<0||M>=u.length)throw new Error("Frame index out of range.");return u[M]},this.decodeAndBlitFrameBGRA=function(M,Q){var V=this.frameInfo(M),te=V.width*V.height,W=new Uint8Array(te);k8(e,V.data_offset,W,te);var re=V.palette_offset,z=V.transparent_index;z===null&&(z=256);var X=V.width,K=r-X,se=X,U=4*(V.y*r+V.x),Y=4*((V.y+V.height)*r+V.x),Z=U,ne=4*K;V.interlaced===!0&&(ne+=4*r*7);for(var de=8,xe=0,Ae=W.length;xe<Ae;++xe){var ae=W[xe];if(se===0&&(se=X,(Z+=ne)>=Y&&(ne=4*K+4*r*(de-1),Z=U+(X+K)*(de<<1),de>>=1)),ae===z)Z+=4;else{var ue=e[re+3*ae],le=e[re+3*ae+1],ie=e[re+3*ae+2];Q[Z++]=ie,Q[Z++]=le,Q[Z++]=ue,Q[Z++]=255}--se}},this.decodeAndBlitFrameRGBA=function(M,Q){var V=this.frameInfo(M),te=V.width*V.height,W=new Uint8Array(te);k8(e,V.data_offset,W,te);var re=V.palette_offset,z=V.transparent_index;z===null&&(z=256);var X=V.width,K=r-X,se=X,U=4*(V.y*r+V.x),Y=4*((V.y+V.height)*r+V.x),Z=U,ne=4*K;V.interlaced===!0&&(ne+=4*r*7);for(var de=8,xe=0,Ae=W.length;xe<Ae;++xe){var ae=W[xe];if(se===0&&(se=X,(Z+=ne)>=Y&&(ne=4*K+4*r*(de-1),Z=U+(X+K)*(de<<1),de>>=1)),ae===z)Z+=4;else{var ue=e[re+3*ae],le=e[re+3*ae+1],ie=e[re+3*ae+2];Q[Z++]=ue,Q[Z++]=le,Q[Z++]=ie,Q[Z++]=255}--se}}}function k8(e,t,r,n){for(var a=e[t++],i=1<<a,s=i+1,o=s+1,l=a+1,c=(1<<l)-1,u=0,A=0,h=0,m=e[t++],v=new Int32Array(4096),g=null;;){for(;u<16&&m!==0;)A|=e[t++]<<u,u+=8,m===1?m=e[t++]:--m;if(u<l)break;var y=A&c;if(A>>=l,u-=l,y!==i){if(y===s)break;for(var w=y<o?y:g,T=0,N=w;N>i;)N=v[N]>>8,++T;var F=N;if(h+T+(w!==y?1:0)>n)return void va.log("Warning, gif stream longer than expected.");r[h++]=F;var B=h+=T;for(w!==y&&(r[h++]=F),N=w;T--;)N=v[N],r[--B]=255&N,N>>=8;g!==null&&o<4096&&(v[o++]=g<<8|F,o>=c+1&&l<12&&(++l,c=c<<1|1)),g=y}else o=s+1,c=(1<<(l=a+1))-1,g=null}return h!==n&&va.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vB(e){var t,r,n,a,i,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),A=new Array(65535),h=new Array(65535),m=new Array(64),v=new Array(64),g=[],y=0,w=7,T=new Array(64),N=new Array(64),F=new Array(64),B=new Array(256),D=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(U,Y){for(var Z=0,ne=0,de=new Array,xe=1;xe<=16;xe++){for(var Ae=1;Ae<=U[xe];Ae++)de[Y[ne]]=[],de[Y[ne]][0]=Z,de[Y[ne]][1]=xe,ne++,Z++;Z*=2}return de}function re(U){for(var Y=U[0],Z=U[1]-1;Z>=0;)Y&1<<Z&&(y|=1<<w),Z--,--w<0&&(y==255?(z(255),z(0)):z(y),w=7,y=0)}function z(U){g.push(U)}function X(U){z(U>>8&255),z(255&U)}function K(U,Y,Z,ne,de){for(var xe,Ae=de[0],ae=de[240],ue=function(We,ct){var wt,ot,Rt,Pt,Xt,Mt,Qt,$t,It,Dt,gt=0;for(It=0;It<8;++It){wt=We[gt],ot=We[gt+1],Rt=We[gt+2],Pt=We[gt+3],Xt=We[gt+4],Mt=We[gt+5],Qt=We[gt+6];var Br=wt+($t=We[gt+7]),Zt=wt-$t,yn=ot+Qt,_r=ot-Qt,Vr=Rt+Mt,jn=Rt-Mt,Ur=Pt+Xt,Ii=Pt-Xt,dn=Br+Ur,ma=Br-Ur,Ra=yn+Vr,Gr=yn-Vr;We[gt]=dn+Ra,We[gt+4]=dn-Ra;var sr=.707106781*(Gr+ma);We[gt+2]=ma+sr,We[gt+6]=ma-sr;var Xr=.382683433*((dn=Ii+jn)-(Gr=_r+Zt)),Fi=.5411961*dn+Xr,la=1.306562965*Gr+Xr,Qa=.707106781*(Ra=jn+_r),Zi=Zt+Qa,qt=Zt-Qa;We[gt+5]=qt+Fi,We[gt+3]=qt-Fi,We[gt+1]=Zi+la,We[gt+7]=Zi-la,gt+=8}for(gt=0,It=0;It<8;++It){wt=We[gt],ot=We[gt+8],Rt=We[gt+16],Pt=We[gt+24],Xt=We[gt+32],Mt=We[gt+40],Qt=We[gt+48];var bn=wt+($t=We[gt+56]),fn=wt-$t,Hn=ot+Qt,Yn=ot-Qt,ca=Rt+Mt,me=Rt-Mt,ke=Pt+Xt,_e=Pt-Xt,Se=bn+ke,Te=bn-ke,Ie=Hn+ca,Ke=Hn-ca;We[gt]=Se+Ie,We[gt+32]=Se-Ie;var nt=.707106781*(Ke+Te);We[gt+16]=Te+nt,We[gt+48]=Te-nt;var ze=.382683433*((Se=_e+me)-(Ke=Yn+fn)),Xe=.5411961*Se+ze,et=1.306562965*Ke+ze,bt=.707106781*(Ie=me+Yn),kt=fn+bt,Vt=fn-bt;We[gt+40]=Vt+Xe,We[gt+24]=Vt-Xe,We[gt+8]=kt+et,We[gt+56]=kt-et,gt++}for(It=0;It<64;++It)Dt=We[It]*ct[It],m[It]=Dt>0?Dt+.5|0:Dt-.5|0;return m}(U,Y),le=0;le<64;++le)v[E[le]]=ue[le];var ie=v[0]-Z;Z=v[0],ie==0?re(ne[0]):(re(ne[h[xe=32767+ie]]),re(A[xe]));for(var De=63;De>0&&v[De]==0;)De--;if(De==0)return re(Ae),Z;for(var Le,Be=1;Be<=De;){for(var Ce=Be;v[Be]==0&&Be<=De;)++Be;var Re=Be-Ce;if(Re>=16){Le=Re>>4;for(var je=1;je<=Le;++je)re(ae);Re&=15}xe=32767+v[Be],re(de[(Re<<4)+h[xe]]),re(A[xe]),Be++}return De!=63&&re(Ae),Z}function se(U){U=Math.min(Math.max(U,1),100),i!=U&&(function(Y){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var de=s((Z[ne]*Y+50)/100);de=Math.min(Math.max(de,1),255),o[E[ne]]=de}for(var xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var ae=s((xe[Ae]*Y+50)/100);ae=Math.min(Math.max(ae,1),255),l[E[Ae]]=ae}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],le=0,ie=0;ie<8;ie++)for(var De=0;De<8;De++)c[le]=1/(o[E[le]]*ue[ie]*ue[De]*8),u[le]=1/(l[E[le]]*ue[ie]*ue[De]*8),le++}(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),i=U)}this.encode=function(U,Y){Y&&se(Y),g=new Array,y=0,w=7,X(65496),X(65504),X(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),X(1),X(1),z(0),z(0),function(){X(65499),X(132),z(0);for(var ot=0;ot<64;ot++)z(o[ot]);z(1);for(var Rt=0;Rt<64;Rt++)z(l[Rt])}(),function(ot,Rt){X(65472),X(17),z(8),X(Rt),X(ot),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(U.width,U.height),function(){X(65476),X(418),z(0);for(var ot=0;ot<16;ot++)z(S[ot+1]);for(var Rt=0;Rt<=11;Rt++)z(k[Rt]);z(16);for(var Pt=0;Pt<16;Pt++)z(H[Pt+1]);for(var Xt=0;Xt<=161;Xt++)z(P[Xt]);z(1);for(var Mt=0;Mt<16;Mt++)z(M[Mt+1]);for(var Qt=0;Qt<=11;Qt++)z(Q[Qt]);z(17);for(var $t=0;$t<16;$t++)z(V[$t+1]);for(var It=0;It<=161;It++)z(te[It])}(),X(65498),X(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var Z=0,ne=0,de=0;y=0,w=7,this.encode.displayName="_encode_";for(var xe,Ae,ae,ue,le,ie,De,Le,Be,Ce=U.data,Re=U.width,je=U.height,We=4*Re,ct=0;ct<je;){for(xe=0;xe<We;){for(le=We*ct+xe,De=-1,Le=0,Be=0;Be<64;Be++)ie=le+(Le=Be>>3)*We+(De=4*(7&Be)),ct+Le>=je&&(ie-=We*(ct+1+Le-je)),xe+De>=We&&(ie-=xe+De-We+4),Ae=Ce[ie++],ae=Ce[ie++],ue=Ce[ie++],T[Be]=(D[Ae]+D[ae+256>>0]+D[ue+512>>0]>>16)-128,N[Be]=(D[Ae+768>>0]+D[ae+1024>>0]+D[ue+1280>>0]>>16)-128,F[Be]=(D[Ae+1280>>0]+D[ae+1536>>0]+D[ue+1792>>0]>>16)-128;Z=K(T,c,Z,t,n),ne=K(N,u,ne,r,a),de=K(F,u,de,r,a),xe+=32}ct+=8}if(w>=0){var wt=[];wt[1]=w+1,wt[0]=(1<<w+1)-1,re(wt)}return X(65497),new Uint8Array(g)},e=e||50,function(){for(var U=String.fromCharCode,Y=0;Y<256;Y++)B[Y]=U(Y)}(),t=W(S,k),r=W(M,Q),n=W(H,P),a=W(V,te),function(){for(var U=1,Y=2,Z=1;Z<=15;Z++){for(var ne=U;ne<Y;ne++)h[32767+ne]=Z,A[32767+ne]=[],A[32767+ne][1]=Z,A[32767+ne][0]=ne;for(var de=-(Y-1);de<=-U;de++)h[32767+de]=Z,A[32767+de]=[],A[32767+de][1]=Z,A[32767+de][0]=Y-1+de;U<<=1,Y<<=1}}(),function(){for(var U=0;U<256;U++)D[U]=19595*U,D[U+256>>0]=38470*U,D[U+512>>0]=7471*U+32768,D[U+768>>0]=-11059*U,D[U+1024>>0]=-21709*U,D[U+1280>>0]=32768*U+8421375,D[U+1536>>0]=-27439*U,D[U+1792>>0]=-5329*U}(),se(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Hu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function I8(e){function t(S){if(!S)throw Error("assert :P")}function r(S,k,H){for(var P=0;4>P;P++)if(S[k+P]!=H.charCodeAt(P))return!0;return!1}function n(S,k,H,P,M){for(var Q=0;Q<M;Q++)S[k+Q]=H[P+Q]}function a(S,k,H,P){for(var M=0;M<P;M++)S[k+M]=H}function i(S){return new Int32Array(S)}function s(S,k){for(var H=[],P=0;P<S;P++)H.push(new k);return H}function o(S,k){var H=[];return function P(M,Q,V){for(var te=V[Q],W=0;W<te&&(M.push(V.length>Q+1?[]:new k),!(V.length<Q+1));W++)P(M[W],Q+1,V)}(H,0,S),H}var l=function(){var S=this;function k(I,j){for(var J=1<<j-1>>>0;I&J;)J>>>=1;return J?(I&J-1)+J:I}function H(I,j,J,oe,he){t(!(oe%J));do I[j+(oe-=J)]=he;while(0<oe)}function P(I,j,J,oe,he){if(t(2328>=he),512>=he)var ge=i(512);else if((ge=i(he))==null)return 0;return function(ve,ye,Ee,Ne,Oe,Ze){var Ye,qe,xt=ye,st=1<<Ee,Ue=i(16),Qe=i(16);for(t(Oe!=0),t(Ne!=null),t(ve!=null),t(0<Ee),qe=0;qe<Oe;++qe){if(15<Ne[qe])return 0;++Ue[Ne[qe]]}if(Ue[0]==Oe)return 0;for(Qe[1]=0,Ye=1;15>Ye;++Ye){if(Ue[Ye]>1<<Ye)return 0;Qe[Ye+1]=Qe[Ye]+Ue[Ye]}for(qe=0;qe<Oe;++qe)Ye=Ne[qe],0<Ne[qe]&&(Ze[Qe[Ye]++]=qe);if(Qe[15]==1)return(Ne=new M).g=0,Ne.value=Ze[0],H(ve,xt,1,st,Ne),st;var At,yt=-1,pt=st-1,Wt=0,jt=1,or=1,Gt=1<<Ee;for(qe=0,Ye=1,Oe=2;Ye<=Ee;++Ye,Oe<<=1){if(jt+=or<<=1,0>(or-=Ue[Ye]))return 0;for(;0<Ue[Ye];--Ue[Ye])(Ne=new M).g=Ye,Ne.value=Ze[qe++],H(ve,xt+Wt,Oe,Gt,Ne),Wt=k(Wt,Ye)}for(Ye=Ee+1,Oe=2;15>=Ye;++Ye,Oe<<=1){if(jt+=or<<=1,0>(or-=Ue[Ye]))return 0;for(;0<Ue[Ye];--Ue[Ye]){if(Ne=new M,(Wt&pt)!=yt){for(xt+=Gt,At=1<<(yt=Ye)-Ee;15>yt&&!(0>=(At-=Ue[yt]));)++yt,At<<=1;st+=Gt=1<<(At=yt-Ee),ve[ye+(yt=Wt&pt)].g=At+Ee,ve[ye+yt].value=xt-ye-yt}Ne.g=Ye-Ee,Ne.value=Ze[qe++],H(ve,xt+(Wt>>Ee),Oe,Gt,Ne),Wt=k(Wt,Ye)}}return jt!=2*Qe[15]-1?0:st}(I,j,J,oe,he,ge)}function M(){this.value=this.g=0}function Q(){this.value=this.g=0}function V(){this.G=s(5,M),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(pi,Q)}function te(I,j,J,oe){t(I!=null),t(j!=null),t(2147483648>oe),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=j,I.pa=J,I.Jd=j,I.Yc=J+oe,I.Zc=4<=oe?J+oe-4+1:J,xe(I)}function W(I,j){for(var J=0;0<j--;)J|=ae(I,128)<<j;return J}function re(I,j){var J=W(I,j);return Ae(I)?-J:J}function z(I,j,J,oe){var he,ge=0;for(t(I!=null),t(j!=null),t(4294967288>oe),I.Sb=oe,I.Ra=0,I.u=0,I.h=0,4<oe&&(oe=4),he=0;he<oe;++he)ge+=j[J+he]<<8*he;I.Ra=ge,I.bb=oe,I.oa=j,I.pa=J}function X(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<Nf-8>>>0,++I.bb,I.u-=8;Z(I)&&(I.h=1,I.u=0)}function K(I,j){if(t(0<=j),!I.h&&j<=Tf){var J=Y(I)&md[j];return I.u+=j,X(I),J}return I.h=1,I.u=0}function se(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(I){return I.Ra>>>(I.u&Nf-1)>>>0}function Z(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>Nf}function ne(I,j){I.u=j,I.h=Z(I)}function de(I){I.u>=$A&&(t(I.u>=$A),X(I))}function xe(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function Ae(I){return W(I,1)}function ae(I,j){var J=I.Ca;0>I.b&&xe(I);var oe=I.b,he=J*j>>>8,ge=(I.I>>>oe>he)+0;for(ge?(J-=he,I.I-=he+1<<oe>>>0):J=he+1,oe=J,he=0;256<=oe;)he+=8,oe>>=8;return oe=7^he+co[oe],I.b-=oe,I.Ca=(J<<oe)-1,ge}function ue(I,j,J){I[j+0]=J>>24&255,I[j+1]=J>>16&255,I[j+2]=J>>8&255,I[j+3]=J>>0&255}function le(I,j){return I[j+0]<<0|I[j+1]<<8}function ie(I,j){return le(I,j)|I[j+2]<<16}function De(I,j){return le(I,j)|le(I,j+2)<<16}function Le(I,j){var J=1<<j;return t(I!=null),t(0<j),I.X=i(J),I.X==null?0:(I.Mb=32-j,I.Xa=j,1)}function Be(I,j){t(I!=null),t(j!=null),t(I.Xa==j.Xa),n(j.X,0,I.X,0,1<<j.Xa)}function Ce(){this.X=[],this.Xa=this.Mb=0}function Re(I,j,J,oe){t(J!=null),t(oe!=null);var he=J[0],ge=oe[0];return he==0&&(he=(I*ge+j/2)/j),ge==0&&(ge=(j*he+I/2)/I),0>=he||0>=ge?0:(J[0]=he,oe[0]=ge,1)}function je(I,j){return I+(1<<j)-1>>>j}function We(I,j){return((4278255360&I)+(4278255360&j)>>>0&4278255360)+((16711935&I)+(16711935&j)>>>0&16711935)>>>0}function ct(I,j){S[j]=function(J,oe,he,ge,ve,ye,Ee){var Ne;for(Ne=0;Ne<ve;++Ne){var Oe=S[I](ye[Ee+Ne-1],he,ge+Ne);ye[Ee+Ne]=We(J[oe+Ne],Oe)}}}function wt(){this.ud=this.hd=this.jd=0}function ot(I,j){return((4278124286&(I^j))>>>1)+(I&j)>>>0}function Rt(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function Pt(I,j){return Rt(I+(I-j+.5>>1))}function Xt(I,j,J){return Math.abs(j-J)-Math.abs(I-J)}function Mt(I,j,J,oe,he,ge,ve){for(oe=ge[ve-1],J=0;J<he;++J)ge[ve+J]=oe=We(I[j+J],oe)}function Qt(I,j,J,oe,he){var ge;for(ge=0;ge<J;++ge){var ve=I[j+ge],ye=ve>>8&255,Ee=16711935&(Ee=(Ee=16711935&ve)+((ye<<16)+ye));oe[he+ge]=(4278255360&ve)+Ee>>>0}}function $t(I,j){j.jd=I>>0&255,j.hd=I>>8&255,j.ud=I>>16&255}function It(I,j,J,oe,he,ge){var ve;for(ve=0;ve<oe;++ve){var ye=j[J+ve],Ee=ye>>>8,Ne=ye,Oe=255&(Oe=(Oe=ye>>>16)+((I.jd<<24>>24)*(Ee<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((I.hd<<24>>24)*(Ee<<24>>24)>>>5))+((I.ud<<24>>24)*(Oe<<24>>24)>>>5)),he[ge+ve]=(4278255360&ye)+(Oe<<16)+Ne}}function Dt(I,j,J,oe,he){S[j]=function(ge,ve,ye,Ee,Ne,Oe,Ze,Ye,qe){for(Ee=Ze;Ee<Ye;++Ee)for(Ze=0;Ze<qe;++Ze)Ne[Oe++]=he(ye[oe(ge[ve++])])},S[I]=function(ge,ve,ye,Ee,Ne,Oe,Ze){var Ye=8>>ge.b,qe=ge.Ea,xt=ge.K[0],st=ge.w;if(8>Ye)for(ge=(1<<ge.b)-1,st=(1<<Ye)-1;ve<ye;++ve){var Ue,Qe=0;for(Ue=0;Ue<qe;++Ue)Ue&ge||(Qe=oe(Ee[Ne++])),Oe[Ze++]=he(xt[Qe&st]),Qe>>=Ye}else S["VP8LMapColor"+J](Ee,Ne,xt,st,Oe,Ze,ve,ye,qe)}}function gt(I,j,J,oe,he){for(J=j+J;j<J;){var ge=I[j++];oe[he++]=ge>>16&255,oe[he++]=ge>>8&255,oe[he++]=ge>>0&255}}function Br(I,j,J,oe,he){for(J=j+J;j<J;){var ge=I[j++];oe[he++]=ge>>16&255,oe[he++]=ge>>8&255,oe[he++]=ge>>0&255,oe[he++]=ge>>24&255}}function Zt(I,j,J,oe,he){for(J=j+J;j<J;){var ge=(ve=I[j++])>>16&240|ve>>12&15,ve=ve>>0&240|ve>>28&15;oe[he++]=ge,oe[he++]=ve}}function yn(I,j,J,oe,he){for(J=j+J;j<J;){var ge=(ve=I[j++])>>16&248|ve>>13&7,ve=ve>>5&224|ve>>3&31;oe[he++]=ge,oe[he++]=ve}}function _r(I,j,J,oe,he){for(J=j+J;j<J;){var ge=I[j++];oe[he++]=ge>>0&255,oe[he++]=ge>>8&255,oe[he++]=ge>>16&255}}function Vr(I,j,J,oe,he,ge){if(ge==0)for(J=j+J;j<J;)ue(oe,((ge=I[j++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),he+=32;else n(oe,he,I,j,J)}function jn(I,j){S[j][0]=S[I+"0"],S[j][1]=S[I+"1"],S[j][2]=S[I+"2"],S[j][3]=S[I+"3"],S[j][4]=S[I+"4"],S[j][5]=S[I+"5"],S[j][6]=S[I+"6"],S[j][7]=S[I+"7"],S[j][8]=S[I+"8"],S[j][9]=S[I+"9"],S[j][10]=S[I+"10"],S[j][11]=S[I+"11"],S[j][12]=S[I+"12"],S[j][13]=S[I+"13"],S[j][14]=S[I+"0"],S[j][15]=S[I+"0"]}function Ur(I){return I==j0||I==Sd||I==Nu||I==XA}function Ii(){this.eb=[],this.size=this.A=this.fb=0}function dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ma(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ii,this.f.kb=new dn,this.sd=null}function Ra(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Gr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function sr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Xr(I,j){var J=I.T,oe=j.ba.f.RGBA,he=oe.eb,ge=oe.fb+I.ka*oe.A,ve=Li[j.ba.S],ye=I.y,Ee=I.O,Ne=I.f,Oe=I.N,Ze=I.ea,Ye=I.W,qe=j.cc,xt=j.dc,st=j.Mc,Ue=j.Nc,Qe=I.ka,At=I.ka+I.T,yt=I.U,pt=yt+1>>1;for(Qe==0?ve(ye,Ee,null,null,Ne,Oe,Ze,Ye,Ne,Oe,Ze,Ye,he,ge,null,null,yt):(ve(j.ec,j.fc,ye,Ee,qe,xt,st,Ue,Ne,Oe,Ze,Ye,he,ge-oe.A,he,ge,yt),++J);Qe+2<At;Qe+=2)qe=Ne,xt=Oe,st=Ze,Ue=Ye,Oe+=I.Rc,Ye+=I.Rc,ge+=2*oe.A,ve(ye,(Ee+=2*I.fa)-I.fa,ye,Ee,qe,xt,st,Ue,Ne,Oe,Ze,Ye,he,ge-oe.A,he,ge,yt);return Ee+=I.fa,I.j+At<I.o?(n(j.ec,j.fc,ye,Ee,yt),n(j.cc,j.dc,Ne,Oe,pt),n(j.Mc,j.Nc,Ze,Ye,pt),J--):1&At||ve(ye,Ee,null,null,Ne,Oe,Ze,Ye,Ne,Oe,Ze,Ye,he,ge+oe.A,null,null,yt),J}function Fi(I,j,J){var oe=I.F,he=[I.J];if(oe!=null){var ge=I.U,ve=j.ba.S,ye=ve==Df||ve==Nu;j=j.ba.f.RGBA;var Ee=[0],Ne=I.ka;Ee[0]=I.T,I.Kb&&(Ne==0?--Ee[0]:(--Ne,he[0]-=I.width),I.j+I.ka+I.T==I.o&&(Ee[0]=I.o-I.j-Ne));var Oe=j.eb;Ne=j.fb+Ne*j.A,I=rn(oe,he[0],I.width,ge,Ee,Oe,Ne+(ye?0:3),j.A),t(J==Ee),I&&Ur(ve)&&Qo(Oe,Ne,ye,ge,Ee,j.A)}return 0}function la(I){var j=I.ma,J=j.ba.S,oe=11>J,he=J==YA||J==U0||J==Df||J==Tu||J==12||Ur(J);if(j.memory=null,j.Ib=null,j.Jb=null,j.Nd=null,!pd(j.Oa,I,he?11:12))return 0;if(he&&Ur(J)&&St(),I.da)alert("todo:use_scaling");else{if(oe){if(j.Ib=sr,I.Kb){if(J=I.U+1>>1,j.memory=i(I.U+2*J),j.memory==null)return 0;j.ec=j.memory,j.fc=0,j.cc=j.ec,j.dc=j.fc+I.U,j.Mc=j.cc,j.Nc=j.dc+J,j.Ib=Xr,St()}}else alert("todo:EmitYUV");he&&(j.Jb=Fi,oe&&Ge())}if(oe&&!mw){for(I=0;256>I;++I)D5[I]=89858*(I-128)+gi>>Mc,V0[I]=-22014*(I-128)+gi,yx[I]=-45773*(I-128),vi[I]=113618*(I-128)+gi>>Mc;for(I=Bd;I<Pm;++I)j=76283*(I-16)+gi>>Mc,z0[I-Bd]=Fn(j,255),bx[I-Bd]=Fn(j+8>>4,15);mw=1}return 1}function Qa(I){var j=I.ma,J=I.U,oe=I.T;return t(!(1&I.ka)),0>=J||0>=oe?0:(J=j.Ib(I,j),j.Jb!=null&&j.Jb(I,j,J),j.Dc+=J,1)}function Zi(I){I.ma.memory=null}function qt(I,j,J,oe){return K(I,8)!=47?0:(j[0]=K(I,14)+1,J[0]=K(I,14)+1,oe[0]=K(I,1),K(I,3)!=0?0:!I.h)}function bn(I,j){if(4>I)return I+1;var J=I-2>>1;return(2+(1&I)<<J)+K(j,J)+1}function fn(I,j){return 120<j?j-120:1<=(J=((J=ku[j-1])>>4)*I+(8-(15&J)))?J:1;var J}function Hn(I,j,J){var oe=Y(J),he=I[j+=255&oe].g-8;return 0<he&&(ne(J,J.u+8),oe=Y(J),j+=I[j].value,j+=oe&(1<<he)-1),ne(J,J.u+I[j].g),I[j].value}function Yn(I,j,J){return J.g+=I.g,J.value+=I.value<<j>>>0,t(8>=J.g),I.g}function ca(I,j,J){var oe=I.xc;return t((j=oe==0?0:I.vc[I.md*(J>>oe)+(j>>oe)])<I.Wb),I.Ya[j]}function me(I,j,J,oe){var he=I.ab,ge=I.c*j,ve=I.C;j=ve+j;var ye=J,Ee=oe;for(oe=I.Ta,J=I.Ua;0<he--;){var Ne=I.gc[he],Oe=ve,Ze=j,Ye=ye,qe=Ee,xt=(Ee=oe,ye=J,Ne.Ea);switch(t(Oe<Ze),t(Ze<=Ne.nc),Ne.hc){case 2:Nm(Ye,qe,(Ze-Oe)*xt,Ee,ye);break;case 0:var st=Oe,Ue=Ze,Qe=Ee,At=ye,yt=(Gt=Ne).Ea;st==0&&(vx(Ye,qe,null,null,1,Qe,At),Mt(Ye,qe+1,0,0,yt-1,Qe,At+1),qe+=yt,At+=yt,++st);for(var pt=1<<Gt.b,Wt=pt-1,jt=je(yt,Gt.b),or=Gt.K,Gt=Gt.w+(st>>Gt.b)*jt;st<Ue;){var En=or,Dn=Gt,Zr=1;for(L0(Ye,qe,Qe,At-yt,1,Qe,At);Zr<yt;){var Kr=(Zr&~Wt)+pt;Kr>yt&&(Kr=yt),(0,Eu[En[Dn++]>>8&15])(Ye,qe+ +Zr,Qe,At+Zr-yt,Kr-Zr,Qe,At+Zr),Zr=Kr}qe+=yt,At+=yt,++st&Wt||(Gt+=jt)}Ze!=Ne.nc&&n(Ee,ye-xt,Ee,ye+(Ze-Oe-1)*xt,xt);break;case 1:for(xt=Ye,Ue=qe,yt=(Ye=Ne.Ea)-(At=Ye&~(Qe=(qe=1<<Ne.b)-1)),st=je(Ye,Ne.b),pt=Ne.K,Ne=Ne.w+(Oe>>Ne.b)*st;Oe<Ze;){for(Wt=pt,jt=Ne,or=new wt,Gt=Ue+At,En=Ue+Ye;Ue<Gt;)$t(Wt[jt++],or),vd(or,xt,Ue,qe,Ee,ye),Ue+=qe,ye+=qe;Ue<En&&($t(Wt[jt++],or),vd(or,xt,Ue,yt,Ee,ye),Ue+=yt,ye+=yt),++Oe&Qe||(Ne+=st)}break;case 3:if(Ye==Ee&&qe==ye&&0<Ne.b){for(Ue=Ee,Ye=xt=ye+(Ze-Oe)*xt-(At=(Ze-Oe)*je(Ne.Ea,Ne.b)),qe=Ee,Qe=ye,st=[],At=(yt=At)-1;0<=At;--At)st[At]=qe[Qe+At];for(At=yt-1;0<=At;--At)Ue[Ye+At]=st[At];ll(Ne,Oe,Ze,Ee,xt,Ee,ye)}else ll(Ne,Oe,Ze,Ye,qe,Ee,ye)}ye=oe,Ee=J}Ee!=J&&n(oe,J,ye,Ee,ge)}function ke(I,j){var J=I.V,oe=I.Ba+I.c*I.C,he=j-I.C;if(t(j<=I.l.o),t(16>=he),0<he){var ge=I.l,ve=I.Ta,ye=I.Ua,Ee=ge.width;if(me(I,he,J,oe),he=ye=[ye],t((J=I.C)<(oe=j)),t(ge.v<ge.va),oe>ge.o&&(oe=ge.o),J<ge.j){var Ne=ge.j-J;J=ge.j,he[0]+=Ne*Ee}if(J>=oe?J=0:(he[0]+=4*ge.v,ge.ka=J-ge.j,ge.U=ge.va-ge.v,ge.T=oe-J,J=1),J){if(ye=ye[0],11>(J=I.ca).S){var Oe=J.f.RGBA,Ze=(oe=J.S,he=ge.U,ge=ge.T,Ne=Oe.eb,Oe.A),Ye=ge;for(Oe=Oe.fb+I.Ma*Oe.A;0<Ye--;){var qe=ve,xt=ye,st=he,Ue=Ne,Qe=Oe;switch(oe){case xs:Os(qe,xt,st,Ue,Qe);break;case YA:as(qe,xt,st,Ue,Qe);break;case j0:as(qe,xt,st,Ue,Qe),Qo(Ue,Qe,0,st,1,0);break;case Fc:Ml(qe,xt,st,Ue,Qe);break;case U0:Vr(qe,xt,st,Ue,Qe,1);break;case Sd:Vr(qe,xt,st,Ue,Qe,1),Qo(Ue,Qe,0,st,1,0);break;case Df:Vr(qe,xt,st,Ue,Qe,0);break;case Nu:Vr(qe,xt,st,Ue,Qe,0),Qo(Ue,Qe,1,st,1,0);break;case Tu:xd(qe,xt,st,Ue,Qe);break;case XA:xd(qe,xt,st,Ue,Qe),tn(Ue,Qe,st,1,0);break;case km:uo(qe,xt,st,Ue,Qe);break;default:t(0)}ye+=Ee,Oe+=Ze}I.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=J.height)}}I.C=j,t(I.C<=I.i)}function _e(I){var j;if(0<I.ua)return 0;for(j=0;j<I.Wb;++j){var J=I.Ya[j].G,oe=I.Ya[j].H;if(0<J[1][oe[1]+0].g||0<J[2][oe[2]+0].g||0<J[3][oe[3]+0].g)return 0}return 1}function Se(I,j,J,oe,he,ge){if(I.Z!=0){var ve=I.qd,ye=I.rd;for(t(Rc[I.Z]!=null);j<J;++j)Rc[I.Z](ve,ye,oe,he,oe,he,ge),ve=oe,ye=he,he+=ge;I.qd=ve,I.rd=ye}}function Te(I,j){var J=I.l.ma,oe=J.Z==0||J.Z==1?I.l.j:I.C;if(oe=I.C<oe?oe:I.C,t(j<=I.l.o),j>oe){var he=I.l.width,ge=J.ca,ve=J.tb+he*oe,ye=I.V,Ee=I.Ba+I.c*oe,Ne=I.gc;t(I.ab==1),t(Ne[0].hc==3),gd(Ne[0],oe,j,ye,Ee,ge,ve),Se(J,oe,j,ge,ve,he)}I.C=I.Ma=j}function Ie(I,j,J,oe,he,ge,ve){var ye=I.$/oe,Ee=I.$%oe,Ne=I.m,Oe=I.s,Ze=J+I.$,Ye=Ze;he=J+oe*he;var qe=J+oe*ge,xt=280+Oe.ua,st=I.Pb?ye:16777216,Ue=0<Oe.ua?Oe.Wa:null,Qe=Oe.wc,At=Ze<qe?ca(Oe,Ee,ye):null;t(I.C<ge),t(qe<=he);var yt=!1;e:for(;;){for(;yt||Ze<qe;){var pt=0;if(ye>=st){var Wt=Ze-J;t((st=I).Pb),st.wd=st.m,st.xd=Wt,0<st.s.ua&&Be(st.s.Wa,st.s.vb),st=ye+Aw}if(Ee&Qe||(At=ca(Oe,Ee,ye)),t(At!=null),At.Qb&&(j[Ze]=At.qb,yt=!0),!yt)if(de(Ne),At.jc){pt=Ne,Wt=j;var jt=Ze,or=At.pd[Y(pt)&pi-1];t(At.jc),256>or.g?(ne(pt,pt.u+or.g),Wt[jt]=or.value,pt=0):(ne(pt,pt.u+or.g-256),t(256<=or.value),pt=or.value),pt==0&&(yt=!0)}else pt=Hn(At.G[0],At.H[0],Ne);if(Ne.h)break;if(yt||256>pt){if(!yt)if(At.nd)j[Ze]=(At.qb|pt<<8)>>>0;else{if(de(Ne),yt=Hn(At.G[1],At.H[1],Ne),de(Ne),Wt=Hn(At.G[2],At.H[2],Ne),jt=Hn(At.G[3],At.H[3],Ne),Ne.h)break;j[Ze]=(jt<<24|yt<<16|pt<<8|Wt)>>>0}if(yt=!1,++Ze,++Ee>=oe&&(Ee=0,++ye,ve!=null&&ye<=ge&&!(ye%16)&&ve(I,ye),Ue!=null))for(;Ye<Ze;)pt=j[Ye++],Ue.X[(506832829*pt&4294967295)>>>Ue.Mb]=pt}else if(280>pt){if(pt=bn(pt-256,Ne),Wt=Hn(At.G[4],At.H[4],Ne),de(Ne),Wt=fn(oe,Wt=bn(Wt,Ne)),Ne.h)break;if(Ze-J<Wt||he-Ze<pt)break e;for(jt=0;jt<pt;++jt)j[Ze+jt]=j[Ze+jt-Wt];for(Ze+=pt,Ee+=pt;Ee>=oe;)Ee-=oe,++ye,ve!=null&&ye<=ge&&!(ye%16)&&ve(I,ye);if(t(Ze<=he),Ee&Qe&&(At=ca(Oe,Ee,ye)),Ue!=null)for(;Ye<Ze;)pt=j[Ye++],Ue.X[(506832829*pt&4294967295)>>>Ue.Mb]=pt}else{if(!(pt<xt))break e;for(yt=pt-280,t(Ue!=null);Ye<Ze;)pt=j[Ye++],Ue.X[(506832829*pt&4294967295)>>>Ue.Mb]=pt;pt=Ze,t(!(yt>>>(Wt=Ue).Xa)),j[pt]=Wt.X[yt],yt=!0}yt||t(Ne.h==Z(Ne))}if(I.Pb&&Ne.h&&Ze<he)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&Be(I.s.vb,I.s.Wa);else{if(Ne.h)break e;ve!=null&&ve(I,ye>ge?ge:ye),I.a=0,I.$=Ze-J}return 1}return I.a=3,0}function Ke(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var j=I.Wa;j!=null&&(j.X=null),I.vb=null,t(I!=null)}function nt(){var I=new GA;return I==null?null:(I.a=0,I.xb=JA,jn("Predictor","VP8LPredictors"),jn("Predictor","VP8LPredictors_C"),jn("PredictorAdd","VP8LPredictorsAdd"),jn("PredictorAdd","VP8LPredictorsAdd_C"),Nm=Qt,vd=It,Os=gt,as=Br,xd=Zt,uo=yn,Ml=_r,S.VP8LMapColor32b=Pi,S.VP8LMapColor8b=O0,I)}function ze(I,j,J,oe,he){var ge=1,ve=[I],ye=[j],Ee=oe.m,Ne=oe.s,Oe=null,Ze=0;e:for(;;){if(J)for(;ge&&K(Ee,1);){var Ye=ve,qe=ye,xt=oe,st=1,Ue=xt.m,Qe=xt.gc[xt.ab],At=K(Ue,2);if(xt.Oc&1<<At)ge=0;else{switch(xt.Oc|=1<<At,Qe.hc=At,Qe.Ea=Ye[0],Qe.nc=qe[0],Qe.K=[null],++xt.ab,t(4>=xt.ab),At){case 0:case 1:Qe.b=K(Ue,3)+2,st=ze(je(Qe.Ea,Qe.b),je(Qe.nc,Qe.b),0,xt,Qe.K),Qe.K=Qe.K[0];break;case 3:var yt,pt=K(Ue,8)+1,Wt=16<pt?0:4<pt?1:2<pt?2:3;if(Ye[0]=je(Qe.Ea,Wt),Qe.b=Wt,yt=st=ze(pt,1,0,xt,Qe.K)){var jt,or=pt,Gt=Qe,En=1<<(8>>Gt.b),Dn=i(En);if(Dn==null)yt=0;else{var Zr=Gt.K[0],Kr=Gt.w;for(Dn[0]=Gt.K[0][0],jt=1;jt<1*or;++jt)Dn[jt]=We(Zr[Kr+jt],Dn[jt-1]);for(;jt<4*En;++jt)Dn[jt]=0;Gt.K[0]=null,Gt.K[0]=Dn,yt=1}}st=yt;break;case 2:break;default:t(0)}ge=st}}if(ve=ve[0],ye=ye[0],ge&&K(Ee,1)&&!(ge=1<=(Ze=K(Ee,4))&&11>=Ze)){oe.a=3;break e}var zn;if(zn=ge)t:{var Rn,Or,Jn,gr=oe,kr=ve,Cn=ye,_n=Ze,Oi=J,xi=gr.m,Ga=gr.s,qa=[null],ni=1,fl=0,Pn=Pf[_n];r:for(;;){if(Oi&&K(xi,1)){var ai=K(xi,3)+2,Ul=je(kr,ai),kd=je(Cn,ai),Of=Ul*kd;if(!ze(Ul,kd,0,gr,qa))break r;for(qa=qa[0],Ga.xc=ai,Rn=0;Rn<Of;++Rn){var Id=qa[Rn]>>8&65535;qa[Rn]=Id,Id>=ni&&(ni=Id+1)}}if(xi.h)break r;for(Or=0;5>Or;++Or){var ya=Vo[Or];!Or&&0<_n&&(ya+=1<<_n),fl<ya&&(fl=ya)}var G0=s(ni*Pn,M),Mm=ni,js=s(Mm,V);if(js==null)var Sa=null;else t(65536>=Mm),Sa=js;var Uf=i(fl);if(Sa==null||Uf==null||G0==null){gr.a=1;break r}var Fd=G0;for(Rn=Jn=0;Rn<ni;++Rn){var Ao=Sa[Rn],Dd=Ao.G,ho=Ao.H,q0=0,eh=1,Lm=0;for(Or=0;5>Or;++Or){ya=Vo[Or],Dd[Or]=Fd,ho[Or]=Jn,!Or&&0<_n&&(ya+=1<<_n);a:{var $0,Om=ya,K0=gr,th=Uf,xw=Fd,yw=Jn,W0=0,Ru=K0.m,P5=K(Ru,1);if(a(th,0,0,Om),P5){var bw=K(Ru,1)+1,ww=K(Ru,1),wx=K(Ru,ww==0?1:8);th[wx]=1,bw==2&&(th[wx=K(Ru,8)]=1);var rh=1}else{var Cx=i(19),Ex=K(Ru,4)+4;if(19<Ex){K0.a=3;var Y0=0;break a}for($0=0;$0<Ex;++$0)Cx[Bu[$0]]=K(Ru,3);var Um=void 0,nh=void 0,Cw=K0,Ew=Cx,Pu=Om,X0=th,jm=0,jl=Cw.m,ah=8,_x=s(128,M);n:for(;P(_x,0,7,Ew,19);){if(K(jl,1)){var _w=2+2*K(jl,3);if((Um=2+K(jl,_w))>Pu)break n}else Um=Pu;for(nh=0;nh<Pu&&Um--;){de(jl);var Sx=_x[0+(127&Y(jl))];ne(jl,jl.u+Sx.g);var jf=Sx.value;if(16>jf)X0[nh++]=jf,jf!=0&&(ah=jf);else{var Sw=jf==16,Tx=jf-16,Nx=dl[Tx],Bx=K(jl,Im[Tx])+Nx;if(nh+Bx>Pu)break n;for(var Tw=Sw?ah:0;0<Bx--;)X0[nh++]=Tw}}jm=1;break n}jm||(Cw.a=3),rh=jm}(rh=rh&&!Ru.h)&&(W0=P(xw,yw,8,th,Om)),rh&&W0!=0?Y0=W0:(K0.a=3,Y0=0)}if(Y0==0)break r;if(eh&&Rf[Or]==1&&(eh=Fd[Jn].g==0),q0+=Fd[Jn].g,Jn+=Y0,3>=Or){var Hf,Hm=Uf[0];for(Hf=1;Hf<ya;++Hf)Uf[Hf]>Hm&&(Hm=Uf[Hf]);Lm+=Hm}}if(Ao.nd=eh,Ao.Qb=0,eh&&(Ao.qb=(Dd[3][ho[3]+0].value<<24|Dd[1][ho[1]+0].value<<16|Dd[2][ho[2]+0].value)>>>0,q0==0&&256>Dd[0][ho[0]+0].value&&(Ao.Qb=1,Ao.qb+=Dd[0][ho[0]+0].value<<8)),Ao.jc=!Ao.Qb&&6>Lm,Ao.jc){var J0,Mu=Ao;for(J0=0;J0<pi;++J0){var Lc=J0,Lu=Mu.pd[Lc],Z0=Mu.G[0][Mu.H[0]+Lc];256<=Z0.value?(Lu.g=Z0.g+256,Lu.value=Z0.value):(Lu.g=0,Lu.value=0,Lc>>=Yn(Z0,8,Lu),Lc>>=Yn(Mu.G[1][Mu.H[1]+Lc],16,Lu),Lc>>=Yn(Mu.G[2][Mu.H[2]+Lc],0,Lu),Yn(Mu.G[3][Mu.H[3]+Lc],24,Lu))}}}Ga.vc=qa,Ga.Wb=ni,Ga.Ya=Sa,Ga.yc=G0,zn=1;break t}zn=0}if(!(ge=zn)){oe.a=3;break e}if(0<Ze){if(Ne.ua=1<<Ze,!Le(Ne.Wa,Ze)){oe.a=1,ge=0;break e}}else Ne.ua=0;var ep=oe,kx=ve,Nw=ye,Ix=ep.s,Fx=Ix.xc;if(ep.c=kx,ep.i=Nw,Ix.md=je(kx,Fx),Ix.wc=Fx==0?-1:(1<<Fx)-1,J){oe.xb=pw;break e}if((Oe=i(ve*ye))==null){oe.a=1,ge=0;break e}ge=(ge=Ie(oe,Oe,0,ve,ye,ye,null))&&!Ee.h;break e}return ge?(he!=null?he[0]=Oe:(t(Oe==null),t(J)),oe.$=0,J||Ke(Ne)):Ke(Ne),ge}function Xe(I,j){var J=I.c*I.i,oe=J+j+16*j;return t(I.c<=j),I.V=i(oe),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+J+j,1)}function et(I,j){var J=I.C,oe=j-J,he=I.V,ge=I.Ba+I.c*J;for(t(j<=I.l.o);0<oe;){var ve=16<oe?16:oe,ye=I.l.ma,Ee=I.l.width,Ne=Ee*ve,Oe=ye.ca,Ze=ye.tb+Ee*J,Ye=I.Ta,qe=I.Ua;me(I,ve,he,ge),da(Ye,qe,Oe,Ze,Ne),Se(ye,J,J+ve,Oe,Ze,Ee),oe-=ve,he+=ve*I.c,J+=ve}t(J==j),I.C=I.Ma=j}function bt(){this.ub=this.yd=this.td=this.Rb=0}function kt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Bt(){this.Yb=function(){var I=[];return function j(J,oe,he){for(var ge=he[oe],ve=0;ve<ge&&(J.push(he.length>oe+1?[]:0),!(he.length<oe+1));ve++)j(J[ve],oe+1,he)}(I,0,[3,11]),I}()}function Lt(){this.jb=i(3),this.Wc=o([4,8],Bt),this.Xc=o([4,17],Bt)}function mr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function qr(){this.ld=this.La=this.dd=this.tc=0}function $r(){this.Na=this.la=0}function Jr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ja(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function no(){this.uc=this.M=this.Nb=0,this.wa=Array(new qr),this.Y=0,this.ya=Array(new Ja),this.aa=0,this.l=new hi}function Za(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Di(){this.cb=this.a=0,this.sc="",this.m=new se,this.Od=new bt,this.Kc=new kt,this.ed=new mr,this.Qa=new Vt,this.Ic=this.$c=this.Aa=0,this.D=new no,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,se),this.ia=0,this.pb=s(4,Jr),this.Pa=new Lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Za),this.Hd=0,this.rb=Array(new $r),this.sb=0,this.wa=Array(new qr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ja),this.L=this.aa=0,this.gd=o([4,2],qr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function hi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function es(){var I=new Di;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,mi||(mi=HA)),I}function ua(I,j,J){return I.a==0&&(I.a=j,I.sc=J,I.cb=0),0}function Ri(I,j,J){return 3<=J&&I[j+0]==157&&I[j+1]==1&&I[j+2]==42}function ld(I,j){if(I==null)return 0;if(I.a=0,I.sc="OK",j==null)return ua(I,2,"null VP8Io passed to VP8GetHeaders()");var J=j.data,oe=j.w,he=j.ha;if(4>he)return ua(I,7,"Truncated header.");var ge=J[oe+0]|J[oe+1]<<8|J[oe+2]<<16,ve=I.Od;if(ve.Rb=!(1&ge),ve.td=ge>>1&7,ve.yd=ge>>4&1,ve.ub=ge>>5,3<ve.td)return ua(I,3,"Incorrect keyframe parameters.");if(!ve.yd)return ua(I,4,"Frame not displayable.");oe+=3,he-=3;var ye=I.Kc;if(ve.Rb){if(7>he)return ua(I,7,"cannot parse picture header");if(!Ri(J,oe,he))return ua(I,3,"Bad code word");ye.c=16383&(J[oe+4]<<8|J[oe+3]),ye.Td=J[oe+4]>>6,ye.i=16383&(J[oe+6]<<8|J[oe+5]),ye.Ud=J[oe+6]>>6,oe+=7,he-=7,I.za=ye.c+15>>4,I.Ub=ye.i+15>>4,j.width=ye.c,j.height=ye.i,j.Da=0,j.j=0,j.v=0,j.va=j.width,j.o=j.height,j.da=0,j.ib=j.width,j.hb=j.height,j.U=j.width,j.T=j.height,a((ge=I.Pa).jb,0,255,ge.jb.length),t((ge=I.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,a(ge.Zb,0,0,ge.Zb.length),a(ge.Lb,0,0,ge.Lb)}if(ve.ub>he)return ua(I,7,"bad partition length");te(ge=I.m,J,oe,ve.ub),oe+=ve.ub,he-=ve.ub,ve.Rb&&(ye.Ld=Ae(ge),ye.Kd=Ae(ge)),ye=I.Qa;var Ee,Ne=I.Pa;if(t(ge!=null),t(ye!=null),ye.Cb=Ae(ge),ye.Cb){if(ye.Bb=Ae(ge),Ae(ge)){for(ye.Fb=Ae(ge),Ee=0;4>Ee;++Ee)ye.Zb[Ee]=Ae(ge)?re(ge,7):0;for(Ee=0;4>Ee;++Ee)ye.Lb[Ee]=Ae(ge)?re(ge,6):0}if(ye.Bb)for(Ee=0;3>Ee;++Ee)Ne.jb[Ee]=Ae(ge)?W(ge,8):255}else ye.Bb=0;if(ge.Ka)return ua(I,3,"cannot parse segment header");if((ye=I.ed).zd=Ae(ge),ye.Tb=W(ge,6),ye.wb=W(ge,3),ye.Pc=Ae(ge),ye.Pc&&Ae(ge)){for(Ne=0;4>Ne;++Ne)Ae(ge)&&(ye.vd[Ne]=re(ge,6));for(Ne=0;4>Ne;++Ne)Ae(ge)&&(ye.od[Ne]=re(ge,6))}if(I.L=ye.Tb==0?0:ye.zd?1:2,ge.Ka)return ua(I,3,"cannot parse filter header");var Oe=he;if(he=Ee=oe,oe=Ee+Oe,ye=Oe,I.Xb=(1<<W(I.m,2))-1,Oe<3*(Ne=I.Xb))J=7;else{for(Ee+=3*Ne,ye-=3*Ne,Oe=0;Oe<Ne;++Oe){var Ze=J[he+0]|J[he+1]<<8|J[he+2]<<16;Ze>ye&&(Ze=ye),te(I.Jc[+Oe],J,Ee,Ze),Ee+=Ze,ye-=Ze,he+=3}te(I.Jc[+Ne],J,Ee,ye),J=Ee<oe?0:5}if(J!=0)return ua(I,J,"cannot parse partitions");for(J=W(Ee=I.m,7),he=Ae(Ee)?re(Ee,4):0,oe=Ae(Ee)?re(Ee,4):0,ye=Ae(Ee)?re(Ee,4):0,Ne=Ae(Ee)?re(Ee,4):0,Ee=Ae(Ee)?re(Ee,4):0,Oe=I.Qa,Ze=0;4>Ze;++Ze){if(Oe.Cb){var Ye=Oe.Zb[Ze];Oe.Fb||(Ye+=J)}else{if(0<Ze){I.pb[Ze]=I.pb[0];continue}Ye=J}var qe=I.pb[Ze];qe.Sc[0]=H0[Fn(Ye+he,127)],qe.Sc[1]=Q0[Fn(Ye+0,127)],qe.Eb[0]=2*H0[Fn(Ye+oe,127)],qe.Eb[1]=101581*Q0[Fn(Ye+ye,127)]>>16,8>qe.Eb[1]&&(qe.Eb[1]=8),qe.Qc[0]=H0[Fn(Ye+Ne,117)],qe.Qc[1]=Q0[Fn(Ye+Ee,127)],qe.lc=Ye+Ee}if(!ve.Rb)return ua(I,4,"Not a key frame.");for(Ae(ge),ve=I.Pa,J=0;4>J;++J){for(he=0;8>he;++he)for(oe=0;3>oe;++oe)for(ye=0;11>ye;++ye)Ne=ae(ge,Mf[J][he][oe][ye])?W(ge,8):Dc[J][he][oe][ye],ve.Wc[J][he].Yb[oe][ye]=Ne;for(he=0;17>he;++he)ve.Xc[J][he]=ve.Wc[J][hw[he]]}return I.kc=Ae(ge),I.kc&&(I.Bd=W(ge,8)),I.cb=1}function HA(I,j,J,oe,he,ge,ve){var ye=j[he].Yb[J];for(J=0;16>he;++he){if(!ae(I,ye[J+0]))return he;for(;!ae(I,ye[J+1]);)if(ye=j[++he].Yb[0],J=0,he==16)return 16;var Ee=j[he+1].Yb;if(ae(I,ye[J+2])){var Ne=I,Oe=0;if(ae(Ne,(Ye=ye)[(Ze=J)+3]))if(ae(Ne,Ye[Ze+6])){for(ye=0,Ze=2*(Oe=ae(Ne,Ye[Ze+8]))+(Ye=ae(Ne,Ye[Ze+9+Oe])),Oe=0,Ye=La[Ze];Ye[ye];++ye)Oe+=Oe+ae(Ne,Ye[ye]);Oe+=3+(8<<Ze)}else ae(Ne,Ye[Ze+7])?(Oe=7+2*ae(Ne,165),Oe+=ae(Ne,145)):Oe=5+ae(Ne,159);else Oe=ae(Ne,Ye[Ze+4])?3+ae(Ne,Ye[Ze+5]):2;ye=Ee[2]}else Oe=1,ye=Ee[1];Ee=ve+Nn[he],0>(Ne=I).b&&xe(Ne);var Ze,Ye=Ne.b,qe=(Ze=Ne.Ca>>1)-(Ne.I>>Ye)>>31;--Ne.b,Ne.Ca+=qe,Ne.Ca|=1,Ne.I-=(Ze+1&qe)<<Ye,ge[Ee]=((Oe^qe)-qe)*oe[(0<he)+0]}return 16}function vc(I){var j=I.rb[I.sb-1];j.la=0,j.Na=0,a(I.zc,0,0,I.zc.length),I.ja=0}function yf(I,j){if(I==null)return 0;if(j==null)return ua(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!ld(I,j))return 0;if(t(I.cb),j.ac==null||j.ac(j)){j.ob&&(I.L=0);var J=Du[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=j.v-J>>4,I.zb=j.j-J>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=j.o+15+J>>4,I.Hb=j.va+15+J>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var oe=I.ed;for(J=0;4>J;++J){var he;if(I.Qa.Cb){var ge=I.Qa.Lb[J];I.Qa.Fb||(ge+=oe.Tb)}else ge=oe.Tb;for(he=0;1>=he;++he){var ve=I.gd[J][he],ye=ge;if(oe.Pc&&(ye+=oe.vd[0],he&&(ye+=oe.od[0])),0<(ye=0>ye?0:63<ye?63:ye)){var Ee=ye;0<oe.wb&&(Ee=4<oe.wb?Ee>>2:Ee>>1)>9-oe.wb&&(Ee=9-oe.wb),1>Ee&&(Ee=1),ve.dd=Ee,ve.tc=2*ye+Ee,ve.ld=40<=ye?2:15<=ye?1:0}else ve.tc=0;ve.La=he}}}J=0}else ua(I,6,"Frame setup failed"),J=I.a;if(J=J==0){if(J){I.$c=0,0<I.Aa||(I.Ic=gw);e:{J=I.Ic,oe=4*(Ee=I.za);var Ne=32*Ee,Oe=Ee+1,Ze=0<I.L?Ee*(0<I.Aa?2:1):0,Ye=(I.Aa==2?2:1)*Ee;if((ve=oe+832+(he=3*(16*J+Du[I.L])/2*Ne)+(ge=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=ve)J=0;else{if(ve>I.Vb){if(I.Vb=0,I.Ec=i(ve),I.Fc=0,I.Ec==null){J=ua(I,1,"no memory during frame initialization.");break e}I.Vb=ve}ve=I.Ec,ye=I.Fc,I.Ac=ve,I.Bc=ye,ye+=oe,I.Gd=s(Ne,Za),I.Hd=0,I.rb=s(Oe+1,$r),I.sb=1,I.wa=Ze?s(Ze,qr):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Ee),t(!0),I.oc=ve,I.pc=ye,ye+=832,I.ya=s(Ye,Ja),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Ee),I.R=16*Ee,I.B=8*Ee,Ee=(Ne=Du[I.L])*I.R,Ne=Ne/2*I.B,I.sa=ve,I.ta=ye+Ee,I.qa=I.sa,I.ra=I.ta+16*J*I.R+Ne,I.Ha=I.qa,I.Ia=I.ra+8*J*I.B+Ne,I.$c=0,ye+=he,I.mb=ge?ve:null,I.nb=ge?ye:null,t(ye+ge<=I.Fc+I.Vb),vc(I),a(I.Ac,I.Bc,0,oe),J=1}}if(J){if(j.ka=0,j.y=I.sa,j.O=I.ta,j.f=I.qa,j.N=I.ra,j.ea=I.Ha,j.Vd=I.Ia,j.fa=I.R,j.Rc=I.B,j.F=null,j.J=0,!Su){for(J=-255;255>=J;++J)za[255+J]=0>J?-J:J;for(J=-1020;1020>=J;++J)cl[1020+J]=-128>J?-128:127<J?127:J;for(J=-112;112>=J;++J)Ed[112+J]=-16>J?-16:15<J?15:J;for(J=-255;510>=J;++J)_d[255+J]=0>J?0:255<J?255:J;Su=1}kc=ao,Ll=yc,Ol=el,ri=In,fo=bc,Pa=xc,Bf=_c,Ic=Rl,KA=fd,yd=_f,bd=dd,wd=xu,kf=yu,WA=Sc,Cd=Ho,_u=gs,If=ti,Ma=zA,Us[0]=ps,Us[1]=QA,Us[2]=nl,Us[3]=VA,Us[4]=io,Us[5]=al,Us[6]=Ls,Us[7]=so,Us[8]=Dl,Us[9]=wc,Iu[0]=tl,Iu[1]=wf,Iu[2]=kl,Iu[3]=ud,Iu[4]=Xn,Iu[5]=Fl,Iu[6]=rl,zo[0]=il,zo[1]=bf,zo[2]=Cf,zo[3]=oo,zo[4]=sn,zo[5]=ei,zo[6]=Cc,J=1}else J=0}J&&(J=function(qe,xt){for(qe.M=0;qe.M<qe.Va;++qe.M){var st,Ue=qe.Jc[qe.M&qe.Xb],Qe=qe.m,At=qe;for(st=0;st<At.za;++st){var yt=Qe,pt=At,Wt=pt.Ac,jt=pt.Bc+4*st,or=pt.zc,Gt=pt.ya[pt.aa+st];if(pt.Qa.Bb?Gt.$b=ae(yt,pt.Pa.jb[0])?2+ae(yt,pt.Pa.jb[2]):ae(yt,pt.Pa.jb[1]):Gt.$b=0,pt.kc&&(Gt.Ad=ae(yt,pt.Bd)),Gt.Za=!ae(yt,145)+0,Gt.Za){var En=Gt.Ob,Dn=0;for(pt=0;4>pt;++pt){var Zr,Kr=or[0+pt];for(Zr=0;4>Zr;++Zr){Kr=xx[Wt[jt+Zr]][Kr];for(var zn=Td[ae(yt,Kr[0])];0<zn;)zn=Td[2*zn+ae(yt,Kr[zn])];Kr=-zn,Wt[jt+Zr]=Kr}n(En,Dn,Wt,jt,4),Dn+=4,or[0+pt]=Kr}}else Kr=ae(yt,156)?ae(yt,128)?1:3:ae(yt,163)?2:0,Gt.Ob[0]=Kr,a(Wt,jt,Kr,4),a(or,0,Kr,4);Gt.Dd=ae(yt,142)?ae(yt,114)?ae(yt,183)?1:3:2:0}if(At.m.Ka)return ua(qe,7,"Premature end-of-partition0 encountered.");for(;qe.ja<qe.za;++qe.ja){if(At=Ue,yt=(Qe=qe).rb[Qe.sb-1],Wt=Qe.rb[Qe.sb+Qe.ja],st=Qe.ya[Qe.aa+Qe.ja],jt=Qe.kc?st.Ad:0)yt.la=Wt.la=0,st.Za||(yt.Na=Wt.Na=0),st.Hc=0,st.Gc=0,st.ia=0;else{var Rn,Or;if(yt=Wt,Wt=At,jt=Qe.Pa.Xc,or=Qe.ya[Qe.aa+Qe.ja],Gt=Qe.pb[or.$b],pt=or.ad,En=0,Dn=Qe.rb[Qe.sb-1],Kr=Zr=0,a(pt,En,0,384),or.Za)var Jn=0,gr=jt[3];else{zn=i(16);var kr=yt.Na+Dn.Na;if(kr=mi(Wt,jt[1],kr,Gt.Eb,0,zn,0),yt.Na=Dn.Na=(0<kr)+0,1<kr)kc(zn,0,pt,En);else{var Cn=zn[0]+3>>3;for(zn=0;256>zn;zn+=16)pt[En+zn]=Cn}Jn=1,gr=jt[0]}var _n=15&yt.la,Oi=15&Dn.la;for(zn=0;4>zn;++zn){var xi=1&Oi;for(Cn=Or=0;4>Cn;++Cn)_n=_n>>1|(xi=(kr=mi(Wt,gr,kr=xi+(1&_n),Gt.Sc,Jn,pt,En))>Jn)<<7,Or=Or<<2|(3<kr?3:1<kr?2:pt[En+0]!=0),En+=16;_n>>=4,Oi=Oi>>1|xi<<7,Zr=(Zr<<8|Or)>>>0}for(gr=_n,Jn=Oi>>4,Rn=0;4>Rn;Rn+=2){for(Or=0,_n=yt.la>>4+Rn,Oi=Dn.la>>4+Rn,zn=0;2>zn;++zn){for(xi=1&Oi,Cn=0;2>Cn;++Cn)kr=xi+(1&_n),_n=_n>>1|(xi=0<(kr=mi(Wt,jt[2],kr,Gt.Qc,0,pt,En)))<<3,Or=Or<<2|(3<kr?3:1<kr?2:pt[En+0]!=0),En+=16;_n>>=2,Oi=Oi>>1|xi<<5}Kr|=Or<<4*Rn,gr|=_n<<4<<Rn,Jn|=(240&Oi)<<Rn}yt.la=gr,Dn.la=Jn,or.Hc=Zr,or.Gc=Kr,or.ia=43690&Kr?0:Gt.ia,jt=!(Zr|Kr)}if(0<Qe.L&&(Qe.wa[Qe.Y+Qe.ja]=Qe.gd[st.$b][st.Za],Qe.wa[Qe.Y+Qe.ja].La|=!jt),At.Ka)return ua(qe,7,"Premature end-of-file encountered.")}if(vc(qe),Qe=xt,At=1,st=(Ue=qe).D,yt=0<Ue.L&&Ue.M>=Ue.zb&&Ue.M<=Ue.Va,Ue.Aa==0)e:{if(st.M=Ue.M,st.uc=yt,lo(Ue,st),At=1,st=(Or=Ue.D).Nb,yt=(Kr=Du[Ue.L])*Ue.R,Wt=Kr/2*Ue.B,zn=16*st*Ue.R,Cn=8*st*Ue.B,jt=Ue.sa,or=Ue.ta-yt+zn,Gt=Ue.qa,pt=Ue.ra-Wt+Cn,En=Ue.Ha,Dn=Ue.Ia-Wt+Cn,Oi=(_n=Or.M)==0,Zr=_n>=Ue.Va-1,Ue.Aa==2&&lo(Ue,Or),Or.uc)for(xi=(kr=Ue).D.M,t(kr.D.uc),Or=kr.yb;Or<kr.Hb;++Or){Jn=Or,gr=xi;var Ga=(qa=(ya=kr).D).Nb;Rn=ya.R;var qa=qa.wa[qa.Y+Jn],ni=ya.sa,fl=ya.ta+16*Ga*Rn+16*Jn,Pn=qa.dd,ai=qa.tc;if(ai!=0)if(t(3<=ai),ya.L==1)0<Jn&&_u(ni,fl,Rn,ai+4),qa.La&&Ma(ni,fl,Rn,ai),0<gr&&Cd(ni,fl,Rn,ai+4),qa.La&&If(ni,fl,Rn,ai);else{var Ul=ya.B,kd=ya.qa,Of=ya.ra+8*Ga*Ul+8*Jn,Id=ya.Ha,ya=ya.Ia+8*Ga*Ul+8*Jn;Ga=qa.ld,0<Jn&&(Ic(ni,fl,Rn,ai+4,Pn,Ga),yd(kd,Of,Id,ya,Ul,ai+4,Pn,Ga)),qa.La&&(wd(ni,fl,Rn,ai,Pn,Ga),WA(kd,Of,Id,ya,Ul,ai,Pn,Ga)),0<gr&&(Bf(ni,fl,Rn,ai+4,Pn,Ga),KA(kd,Of,Id,ya,Ul,ai+4,Pn,Ga)),qa.La&&(bd(ni,fl,Rn,ai,Pn,Ga),kf(kd,Of,Id,ya,Ul,ai,Pn,Ga))}}if(Ue.ia&&alert("todo:DitherRow"),Qe.put!=null){if(Or=16*_n,_n=16*(_n+1),Oi?(Qe.y=Ue.sa,Qe.O=Ue.ta+zn,Qe.f=Ue.qa,Qe.N=Ue.ra+Cn,Qe.ea=Ue.Ha,Qe.W=Ue.Ia+Cn):(Or-=Kr,Qe.y=jt,Qe.O=or,Qe.f=Gt,Qe.N=pt,Qe.ea=En,Qe.W=Dn),Zr||(_n-=Kr),_n>Qe.o&&(_n=Qe.o),Qe.F=null,Qe.J=null,Ue.Fa!=null&&0<Ue.Fa.length&&Or<_n&&(Qe.J=hd(Ue,Qe,Or,_n-Or),Qe.F=Ue.mb,Qe.F==null&&Qe.F.length==0)){At=ua(Ue,3,"Could not decode alpha data.");break e}Or<Qe.j&&(Kr=Qe.j-Or,Or=Qe.j,t(!(1&Kr)),Qe.O+=Ue.R*Kr,Qe.N+=Ue.B*(Kr>>1),Qe.W+=Ue.B*(Kr>>1),Qe.F!=null&&(Qe.J+=Qe.width*Kr)),Or<_n&&(Qe.O+=Qe.v,Qe.N+=Qe.v>>1,Qe.W+=Qe.v>>1,Qe.F!=null&&(Qe.J+=Qe.v),Qe.ka=Or-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=_n-Or,At=Qe.put(Qe))}st+1!=Ue.Ic||Zr||(n(Ue.sa,Ue.ta-yt,jt,or+16*Ue.R,yt),n(Ue.qa,Ue.ra-Wt,Gt,pt+8*Ue.B,Wt),n(Ue.Ha,Ue.Ia-Wt,En,Dn+8*Ue.B,Wt))}if(!At)return ua(qe,6,"Output aborted.")}return 1}(I,j)),j.bc!=null&&j.bc(j),J&=1}return J?(I.cb=0,J):0}function ts(I,j,J,oe,he){he=I[j+J+32*oe]+(he>>3),I[j+J+32*oe]=-256&he?0>he?0:255:he}function cd(I,j,J,oe,he,ge){ts(I,j,0,J,oe+he),ts(I,j,1,J,oe+ge),ts(I,j,2,J,oe-ge),ts(I,j,3,J,oe-he)}function wn(I){return(20091*I>>16)+I}function rs(I,j,J,oe){var he,ge=0,ve=i(16);for(he=0;4>he;++he){var ye=I[j+0]+I[j+8],Ee=I[j+0]-I[j+8],Ne=(35468*I[j+4]>>16)-wn(I[j+12]),Oe=wn(I[j+4])+(35468*I[j+12]>>16);ve[ge+0]=ye+Oe,ve[ge+1]=Ee+Ne,ve[ge+2]=Ee-Ne,ve[ge+3]=ye-Oe,ge+=4,j++}for(he=ge=0;4>he;++he)ye=(I=ve[ge+0]+4)+ve[ge+8],Ee=I-ve[ge+8],Ne=(35468*ve[ge+4]>>16)-wn(ve[ge+12]),ts(J,oe,0,0,ye+(Oe=wn(ve[ge+4])+(35468*ve[ge+12]>>16))),ts(J,oe,1,0,Ee+Ne),ts(J,oe,2,0,Ee-Ne),ts(J,oe,3,0,ye-Oe),ge++,oe+=32}function xc(I,j,J,oe){var he=I[j+0]+4,ge=35468*I[j+4]>>16,ve=wn(I[j+4]),ye=35468*I[j+1]>>16;cd(J,oe,0,he+ve,I=wn(I[j+1]),ye),cd(J,oe,1,he+ge,I,ye),cd(J,oe,2,he-ge,I,ye),cd(J,oe,3,he-ve,I,ye)}function yc(I,j,J,oe,he){rs(I,j,J,oe),he&&rs(I,j+16,J,oe+4)}function el(I,j,J,oe){Ll(I,j+0,J,oe,1),Ll(I,j+32,J,oe+128,1)}function In(I,j,J,oe){var he;for(I=I[j+0]+4,he=0;4>he;++he)for(j=0;4>j;++j)ts(J,oe,j,he,I)}function bc(I,j,J,oe){I[j+0]&&ri(I,j+0,J,oe),I[j+16]&&ri(I,j+16,J,oe+4),I[j+32]&&ri(I,j+32,J,oe+128),I[j+48]&&ri(I,j+48,J,oe+128+4)}function ao(I,j,J,oe){var he,ge=i(16);for(he=0;4>he;++he){var ve=I[j+0+he]+I[j+12+he],ye=I[j+4+he]+I[j+8+he],Ee=I[j+4+he]-I[j+8+he],Ne=I[j+0+he]-I[j+12+he];ge[0+he]=ve+ye,ge[8+he]=ve-ye,ge[4+he]=Ne+Ee,ge[12+he]=Ne-Ee}for(he=0;4>he;++he)ve=(I=ge[0+4*he]+3)+ge[3+4*he],ye=ge[1+4*he]+ge[2+4*he],Ee=ge[1+4*he]-ge[2+4*he],Ne=I-ge[3+4*he],J[oe+0]=ve+ye>>3,J[oe+16]=Ne+Ee>>3,J[oe+32]=ve-ye>>3,J[oe+48]=Ne-Ee>>3,oe+=64}function Bl(I,j,J){var oe,he=j-32,ge=Mi,ve=255-I[he-1];for(oe=0;oe<J;++oe){var ye,Ee=ge,Ne=ve+I[j-1];for(ye=0;ye<J;++ye)I[j+ye]=Ee[Ne+I[he+ye]];j+=32}}function QA(I,j){Bl(I,j,4)}function bf(I,j){Bl(I,j,8)}function wf(I,j){Bl(I,j,16)}function kl(I,j){var J;for(J=0;16>J;++J)n(I,j+32*J,I,j-32,16)}function ud(I,j){var J;for(J=16;0<J;--J)a(I,j,I[j-1],16),j+=32}function Il(I,j,J){var oe;for(oe=0;16>oe;++oe)a(j,J+32*oe,I,16)}function tl(I,j){var J,oe=16;for(J=0;16>J;++J)oe+=I[j-1+32*J]+I[j+J-32];Il(oe>>5,I,j)}function Xn(I,j){var J,oe=8;for(J=0;16>J;++J)oe+=I[j-1+32*J];Il(oe>>4,I,j)}function Fl(I,j){var J,oe=8;for(J=0;16>J;++J)oe+=I[j+J-32];Il(oe>>4,I,j)}function rl(I,j){Il(128,I,j)}function wr(I,j,J){return I+2*j+J+2>>2}function nl(I,j){var J,oe=j-32;for(oe=new Uint8Array([wr(I[oe-1],I[oe+0],I[oe+1]),wr(I[oe+0],I[oe+1],I[oe+2]),wr(I[oe+1],I[oe+2],I[oe+3]),wr(I[oe+2],I[oe+3],I[oe+4])]),J=0;4>J;++J)n(I,j+32*J,oe,0,oe.length)}function VA(I,j){var J=I[j-1],oe=I[j-1+32],he=I[j-1+64],ge=I[j-1+96];ue(I,j+0,16843009*wr(I[j-1-32],J,oe)),ue(I,j+32,16843009*wr(J,oe,he)),ue(I,j+64,16843009*wr(oe,he,ge)),ue(I,j+96,16843009*wr(he,ge,ge))}function ps(I,j){var J,oe=4;for(J=0;4>J;++J)oe+=I[j+J-32]+I[j-1+32*J];for(oe>>=3,J=0;4>J;++J)a(I,j+32*J,oe,4)}function io(I,j){var J=I[j-1+0],oe=I[j-1+32],he=I[j-1+64],ge=I[j-1-32],ve=I[j+0-32],ye=I[j+1-32],Ee=I[j+2-32],Ne=I[j+3-32];I[j+0+96]=wr(oe,he,I[j-1+96]),I[j+1+96]=I[j+0+64]=wr(J,oe,he),I[j+2+96]=I[j+1+64]=I[j+0+32]=wr(ge,J,oe),I[j+3+96]=I[j+2+64]=I[j+1+32]=I[j+0+0]=wr(ve,ge,J),I[j+3+64]=I[j+2+32]=I[j+1+0]=wr(ye,ve,ge),I[j+3+32]=I[j+2+0]=wr(Ee,ye,ve),I[j+3+0]=wr(Ne,Ee,ye)}function Ls(I,j){var J=I[j+1-32],oe=I[j+2-32],he=I[j+3-32],ge=I[j+4-32],ve=I[j+5-32],ye=I[j+6-32],Ee=I[j+7-32];I[j+0+0]=wr(I[j+0-32],J,oe),I[j+1+0]=I[j+0+32]=wr(J,oe,he),I[j+2+0]=I[j+1+32]=I[j+0+64]=wr(oe,he,ge),I[j+3+0]=I[j+2+32]=I[j+1+64]=I[j+0+96]=wr(he,ge,ve),I[j+3+32]=I[j+2+64]=I[j+1+96]=wr(ge,ve,ye),I[j+3+64]=I[j+2+96]=wr(ve,ye,Ee),I[j+3+96]=wr(ye,Ee,Ee)}function al(I,j){var J=I[j-1+0],oe=I[j-1+32],he=I[j-1+64],ge=I[j-1-32],ve=I[j+0-32],ye=I[j+1-32],Ee=I[j+2-32],Ne=I[j+3-32];I[j+0+0]=I[j+1+64]=ge+ve+1>>1,I[j+1+0]=I[j+2+64]=ve+ye+1>>1,I[j+2+0]=I[j+3+64]=ye+Ee+1>>1,I[j+3+0]=Ee+Ne+1>>1,I[j+0+96]=wr(he,oe,J),I[j+0+64]=wr(oe,J,ge),I[j+0+32]=I[j+1+96]=wr(J,ge,ve),I[j+1+32]=I[j+2+96]=wr(ge,ve,ye),I[j+2+32]=I[j+3+96]=wr(ve,ye,Ee),I[j+3+32]=wr(ye,Ee,Ne)}function so(I,j){var J=I[j+0-32],oe=I[j+1-32],he=I[j+2-32],ge=I[j+3-32],ve=I[j+4-32],ye=I[j+5-32],Ee=I[j+6-32],Ne=I[j+7-32];I[j+0+0]=J+oe+1>>1,I[j+1+0]=I[j+0+64]=oe+he+1>>1,I[j+2+0]=I[j+1+64]=he+ge+1>>1,I[j+3+0]=I[j+2+64]=ge+ve+1>>1,I[j+0+32]=wr(J,oe,he),I[j+1+32]=I[j+0+96]=wr(oe,he,ge),I[j+2+32]=I[j+1+96]=wr(he,ge,ve),I[j+3+32]=I[j+2+96]=wr(ge,ve,ye),I[j+3+64]=wr(ve,ye,Ee),I[j+3+96]=wr(ye,Ee,Ne)}function wc(I,j){var J=I[j-1+0],oe=I[j-1+32],he=I[j-1+64],ge=I[j-1+96];I[j+0+0]=J+oe+1>>1,I[j+2+0]=I[j+0+32]=oe+he+1>>1,I[j+2+32]=I[j+0+64]=he+ge+1>>1,I[j+1+0]=wr(J,oe,he),I[j+3+0]=I[j+1+32]=wr(oe,he,ge),I[j+3+32]=I[j+1+64]=wr(he,ge,ge),I[j+3+64]=I[j+2+64]=I[j+0+96]=I[j+1+96]=I[j+2+96]=I[j+3+96]=ge}function Dl(I,j){var J=I[j-1+0],oe=I[j-1+32],he=I[j-1+64],ge=I[j-1+96],ve=I[j-1-32],ye=I[j+0-32],Ee=I[j+1-32],Ne=I[j+2-32];I[j+0+0]=I[j+2+32]=J+ve+1>>1,I[j+0+32]=I[j+2+64]=oe+J+1>>1,I[j+0+64]=I[j+2+96]=he+oe+1>>1,I[j+0+96]=ge+he+1>>1,I[j+3+0]=wr(ye,Ee,Ne),I[j+2+0]=wr(ve,ye,Ee),I[j+1+0]=I[j+3+32]=wr(J,ve,ye),I[j+1+32]=I[j+3+64]=wr(oe,J,ve),I[j+1+64]=I[j+3+96]=wr(he,oe,J),I[j+1+96]=wr(ge,he,oe)}function Cf(I,j){var J;for(J=0;8>J;++J)n(I,j+32*J,I,j-32,8)}function oo(I,j){var J;for(J=0;8>J;++J)a(I,j,I[j-1],8),j+=32}function ms(I,j,J){var oe;for(oe=0;8>oe;++oe)a(j,J+32*oe,I,8)}function il(I,j){var J,oe=8;for(J=0;8>J;++J)oe+=I[j+J-32]+I[j-1+32*J];ms(oe>>4,I,j)}function ei(I,j){var J,oe=4;for(J=0;8>J;++J)oe+=I[j+J-32];ms(oe>>3,I,j)}function sn(I,j){var J,oe=4;for(J=0;8>J;++J)oe+=I[j-1+32*J];ms(oe>>3,I,j)}function Cc(I,j){ms(128,I,j)}function sl(I,j,J){var oe=I[j-J],he=I[j+0],ge=3*(he-oe)+Bm[1020+I[j-2*J]-I[j+J]],ve=Ff[112+(ge+4>>3)];I[j-J]=Mi[255+oe+Ff[112+(ge+3>>3)]],I[j+0]=Mi[255+he-ve]}function Ef(I,j,J,oe){var he=I[j+0],ge=I[j+J];return ul[255+I[j-2*J]-I[j-J]]>oe||ul[255+ge-he]>oe}function gu(I,j,J,oe){return 4*ul[255+I[j-J]-I[j+0]]+ul[255+I[j-2*J]-I[j+J]]<=oe}function vu(I,j,J,oe,he){var ge=I[j-3*J],ve=I[j-2*J],ye=I[j-J],Ee=I[j+0],Ne=I[j+J],Oe=I[j+2*J],Ze=I[j+3*J];return 4*ul[255+ye-Ee]+ul[255+ve-Ne]>oe?0:ul[255+I[j-4*J]-ge]<=he&&ul[255+ge-ve]<=he&&ul[255+ve-ye]<=he&&ul[255+Ze-Oe]<=he&&ul[255+Oe-Ne]<=he&&ul[255+Ne-Ee]<=he}function Ho(I,j,J,oe){var he=2*oe+1;for(oe=0;16>oe;++oe)gu(I,j+oe,J,he)&&sl(I,j+oe,J)}function gs(I,j,J,oe){var he=2*oe+1;for(oe=0;16>oe;++oe)gu(I,j+oe*J,1,he)&&sl(I,j+oe*J,1)}function ti(I,j,J,oe){var he;for(he=3;0<he;--he)Ho(I,j+=4*J,J,oe)}function zA(I,j,J,oe){var he;for(he=3;0<he;--he)gs(I,j+=4,J,oe)}function Ec(I,j,J,oe,he,ge,ve,ye){for(ge=2*ge+1;0<he--;){if(vu(I,j,J,ge,ve))if(Ef(I,j,J,ye))sl(I,j,J);else{var Ee=I,Ne=j,Oe=J,Ze=Ee[Ne-2*Oe],Ye=Ee[Ne-Oe],qe=Ee[Ne+0],xt=Ee[Ne+Oe],st=Ee[Ne+2*Oe],Ue=27*(At=Bm[1020+3*(qe-Ye)+Bm[1020+Ze-xt]])+63>>7,Qe=18*At+63>>7,At=9*At+63>>7;Ee[Ne-3*Oe]=Mi[255+Ee[Ne-3*Oe]+At],Ee[Ne-2*Oe]=Mi[255+Ze+Qe],Ee[Ne-Oe]=Mi[255+Ye+Ue],Ee[Ne+0]=Mi[255+qe-Ue],Ee[Ne+Oe]=Mi[255+xt-Qe],Ee[Ne+2*Oe]=Mi[255+st-At]}j+=oe}}function ns(I,j,J,oe,he,ge,ve,ye){for(ge=2*ge+1;0<he--;){if(vu(I,j,J,ge,ve))if(Ef(I,j,J,ye))sl(I,j,J);else{var Ee=I,Ne=j,Oe=J,Ze=Ee[Ne-Oe],Ye=Ee[Ne+0],qe=Ee[Ne+Oe],xt=Ff[112+((st=3*(Ye-Ze))+4>>3)],st=Ff[112+(st+3>>3)],Ue=xt+1>>1;Ee[Ne-2*Oe]=Mi[255+Ee[Ne-2*Oe]+Ue],Ee[Ne-Oe]=Mi[255+Ze+st],Ee[Ne+0]=Mi[255+Ye-xt],Ee[Ne+Oe]=Mi[255+qe-Ue]}j+=oe}}function _c(I,j,J,oe,he,ge){Ec(I,j,J,1,16,oe,he,ge)}function Rl(I,j,J,oe,he,ge){Ec(I,j,1,J,16,oe,he,ge)}function dd(I,j,J,oe,he,ge){var ve;for(ve=3;0<ve;--ve)ns(I,j+=4*J,J,1,16,oe,he,ge)}function xu(I,j,J,oe,he,ge){var ve;for(ve=3;0<ve;--ve)ns(I,j+=4,1,J,16,oe,he,ge)}function fd(I,j,J,oe,he,ge,ve,ye){Ec(I,j,he,1,8,ge,ve,ye),Ec(J,oe,he,1,8,ge,ve,ye)}function _f(I,j,J,oe,he,ge,ve,ye){Ec(I,j,1,he,8,ge,ve,ye),Ec(J,oe,1,he,8,ge,ve,ye)}function yu(I,j,J,oe,he,ge,ve,ye){ns(I,j+4*he,he,1,8,ge,ve,ye),ns(J,oe+4*he,he,1,8,ge,ve,ye)}function Sc(I,j,J,oe,he,ge,ve,ye){ns(I,j+4,1,he,8,ge,ve,ye),ns(J,oe+4,1,he,8,ge,ve,ye)}function bu(){this.ba=new ma,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Gr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ad(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Tc(){this.ua=0,this.Wa=new Ce,this.vb=new Ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new M}function GA(){this.xb=this.a=0,this.l=new hi,this.ca=new ma,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Tc,this.ab=0,this.gc=s(4,wu),this.Oc=0}function Pl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new hi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Nc(I,j,J,oe,he,ge,ve){for(I=I==null?0:I[j+0],j=0;j<ve;++j)he[ge+j]=I+J[oe+j]&255,I=he[ge+j]}function Cu(I,j,J,oe,he,ge,ve){var ye;if(I==null)Nc(null,null,J,oe,he,ge,ve);else for(ye=0;ye<ve;++ye)he[ge+ye]=I[j+ye]+J[oe+ye]&255}function vs(I,j,J,oe,he,ge,ve){if(I==null)Nc(null,null,J,oe,he,ge,ve);else{var ye,Ee=I[j+0],Ne=Ee,Oe=Ee;for(ye=0;ye<ve;++ye)Ne=Oe+(Ee=I[j+ye])-Ne,Oe=J[oe+ye]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=Ee,he[ge+ye]=Oe}}function hd(I,j,J,oe){var he=j.width,ge=j.o;if(t(I!=null&&j!=null),0>J||0>=oe||J+oe>ge)return null;if(!I.Cc){if(I.ga==null){var ve;if(I.ga=new Pl,(ve=I.ga==null)||(ve=j.width*j.o,t(I.Gb.length==0),I.Gb=i(ve),I.Uc=0,I.Gb==null?ve=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,ve=1),ve=!ve),!ve){ve=I.ga;var ye=I.Fa,Ee=I.P,Ne=I.qc,Oe=I.mb,Ze=I.nb,Ye=Ee+1,qe=Ne-1,xt=ve.l;if(t(ye!=null&&Oe!=null&&j!=null),Rc[0]=null,Rc[1]=Nc,Rc[2]=Cu,Rc[3]=vs,ve.ca=Oe,ve.tb=Ze,ve.c=j.width,ve.i=j.height,t(0<ve.c&&0<ve.i),1>=Ne)j=0;else if(ve.$a=ye[Ee+0]>>0&3,ve.Z=ye[Ee+0]>>2&3,ve.Lc=ye[Ee+0]>>4&3,Ee=ye[Ee+0]>>6&3,0>ve.$a||1<ve.$a||4<=ve.Z||1<ve.Lc||Ee)j=0;else if(xt.put=Qa,xt.ac=la,xt.bc=Zi,xt.ma=ve,xt.width=j.width,xt.height=j.height,xt.Da=j.Da,xt.v=j.v,xt.va=j.va,xt.j=j.j,xt.o=j.o,ve.$a)e:{t(ve.$a==1),j=nt();t:for(;;){if(j==null){j=0;break e}if(t(ve!=null),ve.mc=j,j.c=ve.c,j.i=ve.i,j.l=ve.l,j.l.ma=ve,j.l.width=ve.c,j.l.height=ve.i,j.a=0,z(j.m,ye,Ye,qe),!ze(ve.c,ve.i,1,j,null)||(j.ab==1&&j.gc[0].hc==3&&_e(j.s)?(ve.ic=1,ye=j.c*j.i,j.Ta=null,j.Ua=0,j.V=i(ye),j.Ba=0,j.V==null?(j.a=1,j=0):j=1):(ve.ic=0,j=Xe(j,ve.c)),!j))break t;j=1;break e}ve.mc=null,j=0}else j=qe>=ve.c*ve.i;ve=!j}if(ve)return null;I.ga.Lc!=1?I.Ga=0:oe=ge-J}t(I.ga!=null),t(J+oe<=ge);e:{if(j=(ye=I.ga).c,ge=ye.l.o,ye.$a==0){if(Ye=I.rc,qe=I.Vc,xt=I.Fa,Ee=I.P+1+J*j,Ne=I.mb,Oe=I.nb+J*j,t(Ee<=I.P+I.qc),ye.Z!=0)for(t(Rc[ye.Z]!=null),ve=0;ve<oe;++ve)Rc[ye.Z](Ye,qe,xt,Ee,Ne,Oe,j),Ye=Ne,qe=Oe,Oe+=j,Ee+=j;else for(ve=0;ve<oe;++ve)n(Ne,Oe,xt,Ee,j),Ye=Ne,qe=Oe,Oe+=j,Ee+=j;I.rc=Ye,I.Vc=qe}else{if(t(ye.mc!=null),j=J+oe,t((ve=ye.mc)!=null),t(j<=ve.i),ve.C>=j)j=1;else if(ye.ic||Ge(),ye.ic){ye=ve.V,Ye=ve.Ba,qe=ve.c;var st=ve.i,Ue=(xt=1,Ee=ve.$/qe,Ne=ve.$%qe,Oe=ve.m,Ze=ve.s,ve.$),Qe=qe*st,At=qe*j,yt=Ze.wc,pt=Ue<At?ca(Ze,Ne,Ee):null;t(Ue<=Qe),t(j<=st),t(_e(Ze));t:for(;;){for(;!Oe.h&&Ue<At;){if(Ne&yt||(pt=ca(Ze,Ne,Ee)),t(pt!=null),de(Oe),256>(st=Hn(pt.G[0],pt.H[0],Oe)))ye[Ye+Ue]=st,++Ue,++Ne>=qe&&(Ne=0,++Ee<=j&&!(Ee%16)&&Te(ve,Ee));else{if(!(280>st)){xt=0;break t}st=bn(st-256,Oe);var Wt,jt=Hn(pt.G[4],pt.H[4],Oe);if(de(Oe),!(Ue>=(jt=fn(qe,jt=bn(jt,Oe)))&&Qe-Ue>=st)){xt=0;break t}for(Wt=0;Wt<st;++Wt)ye[Ye+Ue+Wt]=ye[Ye+Ue+Wt-jt];for(Ue+=st,Ne+=st;Ne>=qe;)Ne-=qe,++Ee<=j&&!(Ee%16)&&Te(ve,Ee);Ue<At&&Ne&yt&&(pt=ca(Ze,Ne,Ee))}t(Oe.h==Z(Oe))}Te(ve,Ee>j?j:Ee);break t}!xt||Oe.h&&Ue<Qe?(xt=0,ve.a=Oe.h?5:3):ve.$=Ue,j=xt}else j=Ie(ve,ve.V,ve.Ba,ve.c,ve.i,j,et);if(!j){oe=0;break e}}J+oe>=ge&&(I.Cc=1),oe=1}if(!oe)return null;if(I.Cc&&((oe=I.ga)!=null&&(oe.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+J*he}function q(I,j,J,oe,he,ge){for(;0<he--;){var ve,ye=I,Ee=j+(J?1:0),Ne=I,Oe=j+(J?0:3);for(ve=0;ve<oe;++ve){var Ze=Ne[Oe+4*ve];Ze!=255&&(Ze*=32897,ye[Ee+4*ve+0]=ye[Ee+4*ve+0]*Ze>>23,ye[Ee+4*ve+1]=ye[Ee+4*ve+1]*Ze>>23,ye[Ee+4*ve+2]=ye[Ee+4*ve+2]*Ze>>23)}j+=ge}}function pe(I,j,J,oe,he){for(;0<oe--;){var ge;for(ge=0;ge<J;++ge){var ve=I[j+2*ge+0],ye=15&(Ne=I[j+2*ge+1]),Ee=4369*ye,Ne=(240&Ne|Ne>>4)*Ee>>16;I[j+2*ge+0]=(240&ve|ve>>4)*Ee>>16&240|(15&ve|ve<<4)*Ee>>16>>4&15,I[j+2*ge+1]=240&Ne|ye}j+=he}}function Fe(I,j,J,oe,he,ge,ve,ye){var Ee,Ne,Oe=255;for(Ne=0;Ne<he;++Ne){for(Ee=0;Ee<oe;++Ee){var Ze=I[j+Ee];ge[ve+4*Ee]=Ze,Oe&=Ze}j+=J,ve+=ye}return Oe!=255}function Me(I,j,J,oe,he){var ge;for(ge=0;ge<he;++ge)J[oe+ge]=I[j+ge]>>8}function Ge(){Qo=q,tn=pe,rn=Fe,da=Me}function lt(I,j,J){S[I]=function(oe,he,ge,ve,ye,Ee,Ne,Oe,Ze,Ye,qe,xt,st,Ue,Qe,At,yt){var pt,Wt=yt-1>>1,jt=ye[Ee+0]|Ne[Oe+0]<<16,or=Ze[Ye+0]|qe[xt+0]<<16;t(oe!=null);var Gt=3*jt+or+131074>>2;for(j(oe[he+0],255&Gt,Gt>>16,st,Ue),ge!=null&&(Gt=3*or+jt+131074>>2,j(ge[ve+0],255&Gt,Gt>>16,Qe,At)),pt=1;pt<=Wt;++pt){var En=ye[Ee+pt]|Ne[Oe+pt]<<16,Dn=Ze[Ye+pt]|qe[xt+pt]<<16,Zr=jt+En+or+Dn+524296,Kr=Zr+2*(En+or)>>3;Gt=Kr+jt>>1,jt=(Zr=Zr+2*(jt+Dn)>>3)+En>>1,j(oe[he+2*pt-1],255&Gt,Gt>>16,st,Ue+(2*pt-1)*J),j(oe[he+2*pt-0],255&jt,jt>>16,st,Ue+(2*pt-0)*J),ge!=null&&(Gt=Zr+or>>1,jt=Kr+Dn>>1,j(ge[ve+2*pt-1],255&Gt,Gt>>16,Qe,At+(2*pt-1)*J),j(ge[ve+2*pt+0],255&jt,jt>>16,Qe,At+(2*pt+0)*J)),jt=En,or=Dn}1&yt||(Gt=3*jt+or+131074>>2,j(oe[he+yt-1],255&Gt,Gt>>16,st,Ue+(yt-1)*J),ge!=null&&(Gt=3*or+jt+131074>>2,j(ge[ve+yt-1],255&Gt,Gt>>16,Qe,At+(yt-1)*J)))}}function St(){Li[xs]=Fu,Li[YA]=Pc,Li[Fc]=Nd,Li[U0]=Fm,Li[Df]=Dm,Li[Tu]=ZA,Li[km]=Rm,Li[j0]=Pc,Li[Sd]=Fm,Li[Nu]=Dm,Li[XA]=ZA}function zt(I){return I&-16384?0>I?0:255:I>>F5}function R(I,j){return zt((19077*I>>8)+(26149*j>>8)-14234)}function ee(I,j,J){return zt((19077*I>>8)-(6419*j>>8)-(13320*J>>8)+8708)}function ce(I,j){return zt((19077*I>>8)+(33050*j>>8)-17685)}function be(I,j,J,oe,he){oe[he+0]=R(I,J),oe[he+1]=ee(I,j,J),oe[he+2]=ce(I,j)}function Ve(I,j,J,oe,he){oe[he+0]=ce(I,j),oe[he+1]=ee(I,j,J),oe[he+2]=R(I,J)}function tt(I,j,J,oe,he){var ge=ee(I,j,J);j=ge<<3&224|ce(I,j)>>3,oe[he+0]=248&R(I,J)|ge>>5,oe[he+1]=j}function Nt(I,j,J,oe,he){var ge=240&ce(I,j)|15;oe[he+0]=240&R(I,J)|ee(I,j,J)>>4,oe[he+1]=ge}function Cr(I,j,J,oe,he){oe[he+0]=255,be(I,j,J,oe,he+1)}function on(I,j,J,oe,he){Ve(I,j,J,oe,he),oe[he+3]=255}function Lr(I,j,J,oe,he){be(I,j,J,oe,he),oe[he+3]=255}function Fn(I,j){return 0>I?0:I>j?j:I}function Vn(I,j,J){S[I]=function(oe,he,ge,ve,ye,Ee,Ne,Oe,Ze){for(var Ye=Oe+(-2&Ze)*J;Oe!=Ye;)j(oe[he+0],ge[ve+0],ye[Ee+0],Ne,Oe),j(oe[he+1],ge[ve+0],ye[Ee+0],Ne,Oe+J),he+=2,++ve,++Ee,Oe+=2*J;1&Ze&&j(oe[he+0],ge[ve+0],ye[Ee+0],Ne,Oe)}}function ol(I,j,J){return J==0?I==0?j==0?6:5:j==0?4:0:J}function Va(I,j,J,oe,he){switch(I>>>30){case 3:Ll(j,J,oe,he,0);break;case 2:Pa(j,J,oe,he);break;case 1:ri(j,J,oe,he)}}function lo(I,j){var J,oe,he=j.M,ge=j.Nb,ve=I.oc,ye=I.pc+40,Ee=I.oc,Ne=I.pc+584,Oe=I.oc,Ze=I.pc+600;for(J=0;16>J;++J)ve[ye+32*J-1]=129;for(J=0;8>J;++J)Ee[Ne+32*J-1]=129,Oe[Ze+32*J-1]=129;for(0<he?ve[ye-1-32]=Ee[Ne-1-32]=Oe[Ze-1-32]=129:(a(ve,ye-32-1,127,21),a(Ee,Ne-32-1,127,9),a(Oe,Ze-32-1,127,9)),oe=0;oe<I.za;++oe){var Ye=j.ya[j.aa+oe];if(0<oe){for(J=-1;16>J;++J)n(ve,ye+32*J-4,ve,ye+32*J+12,4);for(J=-1;8>J;++J)n(Ee,Ne+32*J-4,Ee,Ne+32*J+4,4),n(Oe,Ze+32*J-4,Oe,Ze+32*J+4,4)}var qe=I.Gd,xt=I.Hd+oe,st=Ye.ad,Ue=Ye.Hc;if(0<he&&(n(ve,ye-32,qe[xt].y,0,16),n(Ee,Ne-32,qe[xt].f,0,8),n(Oe,Ze-32,qe[xt].ea,0,8)),Ye.Za){var Qe=ve,At=ye-32+16;for(0<he&&(oe>=I.za-1?a(Qe,At,qe[xt].y[15],4):n(Qe,At,qe[xt+1].y,0,4)),J=0;4>J;J++)Qe[At+128+J]=Qe[At+256+J]=Qe[At+384+J]=Qe[At+0+J];for(J=0;16>J;++J,Ue<<=2)Qe=ve,At=ye+Lf[J],Us[Ye.Ob[J]](Qe,At),Va(Ue,st,16*+J,Qe,At)}else if(Qe=ol(oe,he,Ye.Ob[0]),Iu[Qe](ve,ye),Ue!=0)for(J=0;16>J;++J,Ue<<=2)Va(Ue,st,16*+J,ve,ye+Lf[J]);for(J=Ye.Gc,Qe=ol(oe,he,Ye.Dd),zo[Qe](Ee,Ne),zo[Qe](Oe,Ze),Ue=st,Qe=Ee,At=Ne,255&(Ye=J>>0)&&(170&Ye?Ol(Ue,256,Qe,At):fo(Ue,256,Qe,At)),Ye=Oe,Ue=Ze,255&(J>>=8)&&(170&J?Ol(st,320,Ye,Ue):fo(st,320,Ye,Ue)),he<I.Ub-1&&(n(qe[xt].y,0,ve,ye+480,16),n(qe[xt].f,0,Ee,Ne+224,8),n(qe[xt].ea,0,Oe,Ze+224,8)),J=8*ge*I.B,qe=I.sa,xt=I.ta+16*oe+16*ge*I.R,st=I.qa,Ye=I.ra+8*oe+J,Ue=I.Ha,Qe=I.Ia+8*oe+J,J=0;16>J;++J)n(qe,xt+J*I.R,ve,ye+32*J,16);for(J=0;8>J;++J)n(st,Ye+J*I.B,Ee,Ne+32*J,8),n(Ue,Qe+J*I.B,Oe,Ze+32*J,8)}}function Bc(I,j,J,oe,he,ge,ve,ye,Ee){var Ne=[0],Oe=[0],Ze=0,Ye=Ee!=null?Ee.kd:0,qe=Ee??new Ad;if(I==null||12>J)return 7;qe.data=I,qe.w=j,qe.ha=J,j=[j],J=[J],qe.gb=[qe.gb];e:{var xt=j,st=J,Ue=qe.gb;if(t(I!=null),t(st!=null),t(Ue!=null),Ue[0]=0,12<=st[0]&&!r(I,xt[0],"RIFF")){if(r(I,xt[0]+8,"WEBP")){Ue=3;break e}var Qe=De(I,xt[0]+4);if(12>Qe||4294967286<Qe){Ue=3;break e}if(Ye&&Qe>st[0]-8){Ue=7;break e}Ue[0]=Qe,xt[0]+=12,st[0]-=12}Ue=0}if(Ue!=0)return Ue;for(Qe=0<qe.gb[0],J=J[0];;){e:{var At=I;st=j,Ue=J;var yt=Ne,pt=Oe,Wt=xt=[0];if((Gt=Ze=[Ze])[0]=0,8>Ue[0])Ue=7;else{if(!r(At,st[0],"VP8X")){if(De(At,st[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var jt=De(At,st[0]+8),or=1+ie(At,st[0]+12);if(2147483648<=or*(At=1+ie(At,st[0]+15))){Ue=3;break e}Wt!=null&&(Wt[0]=jt),yt!=null&&(yt[0]=or),pt!=null&&(pt[0]=At),st[0]+=18,Ue[0]-=18,Gt[0]=1}Ue=0}}if(Ze=Ze[0],xt=xt[0],Ue!=0)return Ue;if(st=!!(2&xt),!Qe&&Ze)return 3;if(ge!=null&&(ge[0]=!!(16&xt)),ve!=null&&(ve[0]=st),ye!=null&&(ye[0]=0),ve=Ne[0],xt=Oe[0],Ze&&st&&Ee==null){Ue=0;break}if(4>J){Ue=7;break}if(Qe&&Ze||!Qe&&!Ze&&!r(I,j[0],"ALPH")){J=[J],qe.na=[qe.na],qe.P=[qe.P],qe.Sa=[qe.Sa];e:{jt=I,Ue=j,Qe=J;var Gt=qe.gb;yt=qe.na,pt=qe.P,Wt=qe.Sa,or=22,t(jt!=null),t(Qe!=null),At=Ue[0];var En=Qe[0];for(t(yt!=null),t(Wt!=null),yt[0]=null,pt[0]=null,Wt[0]=0;;){if(Ue[0]=At,Qe[0]=En,8>En){Ue=7;break e}var Dn=De(jt,At+4);if(4294967286<Dn){Ue=3;break e}var Zr=8+Dn+1&-2;if(or+=Zr,0<Gt&&or>Gt){Ue=3;break e}if(!r(jt,At,"VP8 ")||!r(jt,At,"VP8L")){Ue=0;break e}if(En[0]<Zr){Ue=7;break e}r(jt,At,"ALPH")||(yt[0]=jt,pt[0]=At+8,Wt[0]=Dn),At+=Zr,En-=Zr}}if(J=J[0],qe.na=qe.na[0],qe.P=qe.P[0],qe.Sa=qe.Sa[0],Ue!=0)break}J=[J],qe.Ja=[qe.Ja],qe.xa=[qe.xa];e:if(Gt=I,Ue=j,Qe=J,yt=qe.gb[0],pt=qe.Ja,Wt=qe.xa,jt=Ue[0],At=!r(Gt,jt,"VP8 "),or=!r(Gt,jt,"VP8L"),t(Gt!=null),t(Qe!=null),t(pt!=null),t(Wt!=null),8>Qe[0])Ue=7;else{if(At||or){if(Gt=De(Gt,jt+4),12<=yt&&Gt>yt-12){Ue=3;break e}if(Ye&&Gt>Qe[0]-8){Ue=7;break e}pt[0]=Gt,Ue[0]+=8,Qe[0]-=8,Wt[0]=or}else Wt[0]=5<=Qe[0]&&Gt[jt+0]==47&&!(Gt[jt+4]>>5),pt[0]=Qe[0];Ue=0}if(J=J[0],qe.Ja=qe.Ja[0],qe.xa=qe.xa[0],j=j[0],Ue!=0)break;if(4294967286<qe.Ja)return 3;if(ye==null||st||(ye[0]=qe.xa?2:1),ve=[ve],xt=[xt],qe.xa){if(5>J){Ue=7;break}ye=ve,Ye=xt,st=ge,I==null||5>J?I=0:5<=J&&I[j+0]==47&&!(I[j+4]>>5)?(Qe=[0],Gt=[0],yt=[0],z(pt=new U,I,j,J),qt(pt,Qe,Gt,yt)?(ye!=null&&(ye[0]=Qe[0]),Ye!=null&&(Ye[0]=Gt[0]),st!=null&&(st[0]=yt[0]),I=1):I=0):I=0}else{if(10>J){Ue=7;break}ye=xt,I==null||10>J||!Ri(I,j+3,J-3)?I=0:(Ye=I[j+0]|I[j+1]<<8|I[j+2]<<16,st=16383&(I[j+7]<<8|I[j+6]),I=16383&(I[j+9]<<8|I[j+8]),1&Ye||3<(Ye>>1&7)||!(Ye>>4&1)||Ye>>5>=qe.Ja||!st||!I?I=0:(ve&&(ve[0]=st),ye&&(ye[0]=I),I=1))}if(!I||(ve=ve[0],xt=xt[0],Ze&&(Ne[0]!=ve||Oe[0]!=xt)))return 3;Ee!=null&&(Ee[0]=qe,Ee.offset=j-Ee.w,t(4294967286>j-Ee.w),t(Ee.offset==Ee.ha-J));break}return Ue==0||Ue==7&&Ze&&Ee==null?(ge!=null&&(ge[0]|=qe.na!=null&&0<qe.na.length),oe!=null&&(oe[0]=ve),he!=null&&(he[0]=xt),0):Ue}function pd(I,j,J){var oe=j.width,he=j.height,ge=0,ve=0,ye=oe,Ee=he;if(j.Da=I!=null&&0<I.Da,j.Da&&(ye=I.cd,Ee=I.bd,ge=I.v,ve=I.j,11>J||(ge&=-2,ve&=-2),0>ge||0>ve||0>=ye||0>=Ee||ge+ye>oe||ve+Ee>he))return 0;if(j.v=ge,j.j=ve,j.va=ge+ye,j.o=ve+Ee,j.U=ye,j.T=Ee,j.da=I!=null&&0<I.da,j.da){if(!Re(ye,Ee,J=[I.ib],ge=[I.hb]))return 0;j.ib=J[0],j.hb=ge[0]}return j.ob=I!=null&&I.ob,j.Kb=I==null||!I.Sd,j.da&&(j.ob=j.ib<3*oe/4&&j.hb<3*he/4,j.Kb=0),1}function qA(I){if(I==null)return 2;if(11>I.S){var j=I.f.RGBA;j.fb+=(I.height-1)*j.A,j.A=-j.A}else j=I.f.kb,I=I.height,j.O+=(I-1)*j.fa,j.fa=-j.fa,j.N+=(I-1>>1)*j.Ab,j.Ab=-j.Ab,j.W+=(I-1>>1)*j.Db,j.Db=-j.Db,j.F!=null&&(j.J+=(I-1)*j.lb,j.lb=-j.lb);return 0}function Sf(I,j,J,oe){if(oe==null||0>=I||0>=j)return 2;if(J!=null){if(J.Da){var he=J.cd,ge=J.bd,ve=-2&J.v,ye=-2&J.j;if(0>ve||0>ye||0>=he||0>=ge||ve+he>I||ye+ge>j)return 2;I=he,j=ge}if(J.da){if(!Re(I,j,he=[J.ib],ge=[J.hb]))return 2;I=he[0],j=ge[0]}}oe.width=I,oe.height=j;e:{var Ee=oe.width,Ne=oe.height;if(I=oe.S,0>=Ee||0>=Ne||!(I>=xs&&13>I))I=2;else{if(0>=oe.Rd&&oe.sd==null){ve=ge=he=j=0;var Oe=(ye=Ee*vw[I])*Ne;if(11>I||(ge=(Ne+1)/2*(j=(Ee+1)/2),I==12&&(ve=(he=Ee)*Ne)),(Ne=i(Oe+2*ge+ve))==null){I=1;break e}oe.sd=Ne,11>I?((Ee=oe.f.RGBA).eb=Ne,Ee.fb=0,Ee.A=ye,Ee.size=Oe):((Ee=oe.f.kb).y=Ne,Ee.O=0,Ee.fa=ye,Ee.Fd=Oe,Ee.f=Ne,Ee.N=0+Oe,Ee.Ab=j,Ee.Cd=ge,Ee.ea=Ne,Ee.W=0+Oe+ge,Ee.Db=j,Ee.Ed=ge,I==12&&(Ee.F=Ne,Ee.J=0+Oe+2*ge),Ee.Tc=ve,Ee.lb=he)}if(j=1,he=oe.S,ge=oe.width,ve=oe.height,he>=xs&&13>he)if(11>he)I=oe.f.RGBA,j&=(ye=Math.abs(I.A))*(ve-1)+ge<=I.size,j&=ye>=ge*vw[he],j&=I.eb!=null;else{I=oe.f.kb,ye=(ge+1)/2,Oe=(ve+1)/2,Ee=Math.abs(I.fa),Ne=Math.abs(I.Ab);var Ze=Math.abs(I.Db),Ye=Math.abs(I.lb),qe=Ye*(ve-1)+ge;j&=Ee*(ve-1)+ge<=I.Fd,j&=Ne*(Oe-1)+ye<=I.Cd,j=(j&=Ze*(Oe-1)+ye<=I.Ed)&Ee>=ge&Ne>=ye&Ze>=ye,j&=I.y!=null,j&=I.f!=null,j&=I.ea!=null,he==12&&(j&=Ye>=ge,j&=qe<=I.Tc,j&=I.F!=null)}else j=0;I=j?0:2}}return I!=0||J!=null&&J.fd&&(I=qA(oe)),I}var pi=64,md=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Tf=24,Nf=32,$A=8,co=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ct("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(I){return I},S.Predictor2=function(I,j,J){return j[J+0]},S.Predictor3=function(I,j,J){return j[J+1]},S.Predictor4=function(I,j,J){return j[J-1]},S.Predictor5=function(I,j,J){return ot(ot(I,j[J+1]),j[J+0])},S.Predictor6=function(I,j,J){return ot(I,j[J-1])},S.Predictor7=function(I,j,J){return ot(I,j[J+0])},S.Predictor8=function(I,j,J){return ot(j[J-1],j[J+0])},S.Predictor9=function(I,j,J){return ot(j[J+0],j[J+1])},S.Predictor10=function(I,j,J){return ot(ot(I,j[J-1]),ot(j[J+0],j[J+1]))},S.Predictor11=function(I,j,J){var oe=j[J+0];return 0>=Xt(oe>>24&255,I>>24&255,(j=j[J-1])>>24&255)+Xt(oe>>16&255,I>>16&255,j>>16&255)+Xt(oe>>8&255,I>>8&255,j>>8&255)+Xt(255&oe,255&I,255&j)?oe:I},S.Predictor12=function(I,j,J){var oe=j[J+0];return(Rt((I>>24&255)+(oe>>24&255)-((j=j[J-1])>>24&255))<<24|Rt((I>>16&255)+(oe>>16&255)-(j>>16&255))<<16|Rt((I>>8&255)+(oe>>8&255)-(j>>8&255))<<8|Rt((255&I)+(255&oe)-(255&j)))>>>0},S.Predictor13=function(I,j,J){var oe=j[J-1];return(Pt((I=ot(I,j[J+0]))>>24&255,oe>>24&255)<<24|Pt(I>>16&255,oe>>16&255)<<16|Pt(I>>8&255,oe>>8&255)<<8|Pt(I>>0&255,oe>>0&255))>>>0};var vx=S.PredictorAdd0;S.PredictorAdd1=Mt,ct("Predictor2","PredictorAdd2"),ct("Predictor3","PredictorAdd3"),ct("Predictor4","PredictorAdd4"),ct("Predictor5","PredictorAdd5"),ct("Predictor6","PredictorAdd6"),ct("Predictor7","PredictorAdd7"),ct("Predictor8","PredictorAdd8"),ct("Predictor9","PredictorAdd9"),ct("Predictor10","PredictorAdd10"),ct("Predictor11","PredictorAdd11"),ct("Predictor12","PredictorAdd12"),ct("Predictor13","PredictorAdd13");var L0=S.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var Nm,ll=S.ColorIndexInverseTransform,Pi=S.MapARGB,gd=S.VP8LColorIndexInverseTransformAlpha,O0=S.MapAlpha,Eu=S.VP8LPredictorsAdd=[];Eu.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var vd,Os,as,xd,uo,Ml,kc,Ll,Pa,Ol,ri,fo,Bf,Ic,KA,yd,bd,wd,kf,WA,Cd,_u,If,Ma,Qo,tn,rn,da,za=i(511),cl=i(2041),Ed=i(225),_d=i(767),Su=0,Bm=cl,Ff=Ed,Mi=_d,ul=za,xs=0,YA=1,Fc=2,U0=3,Df=4,Tu=5,km=6,j0=7,Sd=8,Nu=9,XA=10,Im=[2,3,7],dl=[3,3,11],Vo=[280,256,256,256,40],Rf=[0,1,1,1,0],Bu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ku=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Aw=8,H0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Q0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],mi=null,La=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Nn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Td=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Dc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],xx=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Mf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hw=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Iu=[],Us=[],zo=[],pw=1,JA=2,Rc=[],Li=[];lt("UpsampleRgbLinePair",be,3),lt("UpsampleBgrLinePair",Ve,3),lt("UpsampleRgbaLinePair",Lr,4),lt("UpsampleBgraLinePair",on,4),lt("UpsampleArgbLinePair",Cr,4),lt("UpsampleRgba4444LinePair",Nt,2),lt("UpsampleRgb565LinePair",tt,2);var Fu=S.UpsampleRgbLinePair,Nd=S.UpsampleBgrLinePair,Pc=S.UpsampleRgbaLinePair,Fm=S.UpsampleBgraLinePair,Dm=S.UpsampleArgbLinePair,ZA=S.UpsampleRgba4444LinePair,Rm=S.UpsampleRgb565LinePair,Mc=16,gi=1<<Mc-1,Bd=-227,Pm=482,F5=6,mw=0,D5=i(256),vi=i(256),yx=i(256),V0=i(256),z0=i(Pm-Bd),bx=i(Pm-Bd);Vn("YuvToRgbRow",be,3),Vn("YuvToBgrRow",Ve,3),Vn("YuvToRgbaRow",Lr,4),Vn("YuvToBgraRow",on,4),Vn("YuvToArgbRow",Cr,4),Vn("YuvToRgba4444Row",Nt,2),Vn("YuvToRgb565Row",tt,2);var Lf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Du=[0,2,8],R5=[8,7,6,4,4,2,2,2,1,1,1,1],gw=1;this.WebPDecodeRGBA=function(I,j,J,oe,he){var ge=YA,ve=new bu,ye=new ma;ve.ba=ye,ye.S=ge,ye.width=[ye.width],ye.height=[ye.height];var Ee=ye.width,Ne=ye.height,Oe=new Ra;if(Oe==null||I==null)var Ze=2;else t(Oe!=null),Ze=Bc(I,j,J,Oe.width,Oe.height,Oe.Pd,Oe.Qd,Oe.format,null);if(Ze!=0?Ee=0:(Ee!=null&&(Ee[0]=Oe.width[0]),Ne!=null&&(Ne[0]=Oe.height[0]),Ee=1),Ee){ye.width=ye.width[0],ye.height=ye.height[0],oe!=null&&(oe[0]=ye.width),he!=null&&(he[0]=ye.height);e:{if(oe=new hi,(he=new Ad).data=I,he.w=j,he.ha=J,he.kd=1,j=[0],t(he!=null),((I=Bc(he.data,he.w,he.ha,null,null,null,j,null,he))==0||I==7)&&j[0]&&(I=4),(j=I)==0){if(t(ve!=null),oe.data=he.data,oe.w=he.w+he.offset,oe.ha=he.ha-he.offset,oe.put=Qa,oe.ac=la,oe.bc=Zi,oe.ma=ve,he.xa){if((I=nt())==null){ve=1;break e}if(function(Ye,qe){var xt=[0],st=[0],Ue=[0];t:for(;;){if(Ye==null)return 0;if(qe==null)return Ye.a=2,0;if(Ye.l=qe,Ye.a=0,z(Ye.m,qe.data,qe.w,qe.ha),!qt(Ye.m,xt,st,Ue)){Ye.a=3;break t}if(Ye.xb=JA,qe.width=xt[0],qe.height=st[0],!ze(xt[0],st[0],1,Ye,null))break t;return 1}return t(Ye.a!=0),0}(I,oe)){if(oe=(j=Sf(oe.width,oe.height,ve.Oa,ve.ba))==0){t:{oe=I;r:for(;;){if(oe==null){oe=0;break t}if(t(oe.s.yc!=null),t(oe.s.Ya!=null),t(0<oe.s.Wb),t((J=oe.l)!=null),t((he=J.ma)!=null),oe.xb!=0){if(oe.ca=he.ba,oe.tb=he.tb,t(oe.ca!=null),!pd(he.Oa,J,U0)){oe.a=2;break r}if(!Xe(oe,J.width)||J.da)break r;if((J.da||Ur(oe.ca.S))&&Ge(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&Ge()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!Le(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break r}oe.xb=0}if(!Ie(oe,oe.V,oe.Ba,oe.c,oe.i,J.o,ke))break r;he.Dc=oe.Ma,oe=1;break t}t(oe.a!=0),oe=0}oe=!oe}oe&&(j=I.a)}else j=I.a}else{if((I=new es)==null){ve=1;break e}if(I.Fa=he.na,I.P=he.P,I.qc=he.Sa,ld(I,oe)){if((j=Sf(oe.width,oe.height,ve.Oa,ve.ba))==0){if(I.Aa=0,J=ve.Oa,t((he=I)!=null),J!=null){if(0<(Ee=0>(Ee=J.Md)?0:100<Ee?255:255*Ee/100)){for(Ne=Oe=0;4>Ne;++Ne)12>(Ze=he.pb[Ne]).lc&&(Ze.ia=Ee*R5[0>Ze.lc?0:Ze.lc]>>3),Oe|=Ze.ia;Oe&&(alert("todo:VP8InitRandom"),he.ia=1)}he.Ga=J.Id,100<he.Ga?he.Ga=100:0>he.Ga&&(he.Ga=0)}yf(I,oe)||(j=I.a)}}else j=I.a}j==0&&ve.Oa!=null&&ve.Oa.fd&&(j=qA(ve.ba))}ve=j}ge=ve!=0?null:11>ge?ye.f.RGBA.eb:ye.f.kb.y}else ge=null;return ge};var vw=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(S,k){for(var H="",P=0;P<4;P++)H+=String.fromCharCode(S[k++]);return H}function u(S,k){return(S[k+0]<<0|S[k+1]<<8|S[k+2]<<16)>>>0}function A(S,k){return(S[k+0]<<0|S[k+1]<<8|S[k+2]<<16|S[k+3]<<24)>>>0}new l;var h=[0],m=[0],v=[],g=new l,y=e,w=function(S,k){var H={},P=0,M=!1,Q=0,V=0;if(H.frames=[],!function(Y,Z,ne,de){for(var xe=0;xe<de;xe++)if(Y[Z+xe]!=ne.charCodeAt(xe))return!0;return!1}(S,k,"RIFF",4)){var te,W;for(A(S,k+=4),k+=8;k<S.length;){var re=c(S,k),z=A(S,k+=4);k+=4;var X=z+(1&z);switch(re){case"VP8 ":case"VP8L":H.frames[P]===void 0&&(H.frames[P]={}),(U=H.frames[P]).src_off=M?V:k-8,U.src_size=Q+z+8,P++,M&&(M=!1,Q=0,V=0);break;case"VP8X":(U=H.header={}).feature_flags=S[k];var K=k+4;U.canvas_width=1+u(S,K),K+=3,U.canvas_height=1+u(S,K),K+=3;break;case"ALPH":M=!0,Q=X+8,V=k-8;break;case"ANIM":(U=H.header).bgcolor=A(S,k),K=k+4,U.loop_count=(te=S)[(W=K)+0]<<0|te[W+1]<<8,K+=2;break;case"ANMF":var se,U;(U=H.frames[P]={}).offset_x=2*u(S,k),k+=3,U.offset_y=2*u(S,k),k+=3,U.width=1+u(S,k),k+=3,U.height=1+u(S,k),k+=3,U.duration=u(S,k),k+=3,se=S[k++],U.dispose=1&se,U.blend=se>>1&1}re!="ANMF"&&(k+=X)}return H}}(y,0);w.response=y,w.rgbaoutput=!0,w.dataurl=!1;var T=w.header?w.header:null,N=w.frames?w.frames:null;if(T){T.loop_counter=T.loop_count,h=[T.canvas_height],m=[T.canvas_width];for(var F=0;F<N.length&&N[F].blend!=0;F++);}var B=N[0],D=g.WebPDecodeRGBA(y,B.src_off,B.src_size,m,h);B.rgba=D,B.imgwidth=m[0],B.imgheight=h[0];for(var E=0;E<m[0]*h[0]*4;E++)v[E]=D[E];return this.width=m,this.height=h,this.data=v,this}(function(e){var t=function(){return typeof $I=="function"},r=function(h,m,v,g){var y=4,w=s;switch(g){case e.image_compression.FAST:y=1,w=i;break;case e.image_compression.MEDIUM:y=6,w=o;break;case e.image_compression.SLOW:y=9,w=l}h=n(h,m,v,w);var T=$I(h,{level:y});return e.__addimage__.arrayBufferToBinaryString(T)},n=function(h,m,v,g){for(var y,w,T,N=h.length/m,F=new Uint8Array(h.length+N),B=u(),D=0;D<N;D+=1){if(T=D*m,y=h.subarray(T,T+m),g)F.set(g(y,v,w),T+D);else{for(var E,S=B.length,k=[];E<S;E+=1)k[E]=B[E](y,v,w);var H=A(k.concat());F.set(k[H],T+D)}w=y}return F},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},i=function(h,m){var v,g=[],y=h.length;g[0]=1;for(var w=0;w<y;w+=1)v=h[w-m]||0,g[w+1]=h[w]-v+256&255;return g},s=function(h,m,v){var g,y=[],w=h.length;y[0]=2;for(var T=0;T<w;T+=1)g=v&&v[T]||0,y[T+1]=h[T]-g+256&255;return y},o=function(h,m,v){var g,y,w=[],T=h.length;w[0]=3;for(var N=0;N<T;N+=1)g=h[N-m]||0,y=v&&v[N]||0,w[N+1]=h[N]+256-(g+y>>>1)&255;return w},l=function(h,m,v){var g,y,w,T,N=[],F=h.length;N[0]=4;for(var B=0;B<F;B+=1)g=h[B-m]||0,y=v&&v[B]||0,w=v&&v[B-m]||0,T=c(g,y,w),N[B+1]=h[B]-T+256&255;return N},c=function(h,m,v){if(h===m&&m===v)return h;var g=Math.abs(m-v),y=Math.abs(h-v),w=Math.abs(h+m-v-v);return g<=y&&g<=w?h:y<=w?m:v},u=function(){return[a,i,s,o,l]},A=function(h){var m=h.map(function(v){return v.reduce(function(g,y){return g+Math.abs(y)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,v,g){var y,w,T,N,F,B,D,E,S,k,H,P,M,Q,V,te=this.decode.FLATE_DECODE,W="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(T=new qve(h)).imgData,w=T.bits,y=T.colorSpace,F=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){S=(E=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,H=new Uint8Array(S*T.colors),k=new Uint8Array(S);var re,z=T.pixelBitlength-T.bits;for(Q=0,V=0;Q<S;Q++){for(M=E[Q],re=0;re<z;)H[V++]=M>>>re&255,re+=T.bits;k[Q]=M>>>re&255}}if(T.bits===16){S=(E=new Uint32Array(T.decodePixels().buffer)).length,H=new Uint8Array(S*(32/T.pixelBitlength)*T.colors),k=new Uint8Array(S*(32/T.pixelBitlength)),P=T.colors>1,Q=0,V=0;for(var X=0;Q<S;)M=E[Q++],H[V++]=M>>>0&255,P&&(H[V++]=M>>>16&255,M=E[Q++],H[V++]=M>>>0&255),k[X++]=M>>>16&255;w=8}g!==e.image_compression.NONE&&t()?(h=r(H,T.width*T.colors,T.colors,g),D=r(k,T.width,1,g)):(h=H,D=k,te=void 0)}if(T.colorType===3&&(y=this.color_spaces.INDEXED,B=T.palette,T.transparency.indexed)){var K=T.transparency.indexed,se=0;for(Q=0,S=K.length;Q<S;++Q)se+=K[Q];if((se/=255)===S-1&&K.indexOf(0)!==-1)N=[K.indexOf(0)];else if(se!==S){for(E=T.decodePixels(),k=new Uint8Array(E.length),Q=0,S=E.length;Q<S;Q++)k[Q]=K[E[Q]];D=r(k,T.width,1)}}var U=function(Y){var Z;switch(Y){case e.image_compression.FAST:Z=11;break;case e.image_compression.MEDIUM:Z=13;break;case e.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(g);return te===this.decode.FLATE_DECODE&&(W="/Predictor "+U+" "),W+="/Colors "+F+" /BitsPerComponent "+w+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:v,data:h,index:m,filter:te,decodeParameters:W,transparency:N,palette:B,sMask:D,predictor:U,width:T.width,height:T.height,bitsPerComponent:w,colorSpace:y}}}})(ur.API),function(e){e.processGIF89A=function(t,r,n,a){var i=new $ve(t),s=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},u=new vB(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)},e.processGIF87A=e.processGIF89A}(ur.API),Hu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Hu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){va.log("bit decode error:"+r)}},Hu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Hu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Hu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Hu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,c=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=c}this.pos+=e}},Hu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&r)/r*255|0,c=(s>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},Hu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Hu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=s}},Hu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new Hu(t,!1),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new vB(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(ur.API),I8.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new I8(t),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new vB(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(ur.API),ur.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var u=n[c],A=n[c+1],h=n[c+2],m=n[c+3];i[o++]=u,i[o++]=A,i[o++]=h,s[l++]=m}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ur.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ig=ur.API,C2=ig.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=c.fof?c.fof:1,A=t.doKerning!==!1,h=0,m=e.length,v=0,g=o[0]||l,y=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?y.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(h=A&&aa(c[n])==="object"&&!isNaN(parseInt(c[n][v],10))?c[n][v]/u:0,y.push((o[n]||g)/l+h)),v=n;return y},T8=ig.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return ig.processArabic&&(e=ig.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:C2.apply(this,arguments).reduce(function(i,s){return i+s},0)},N8=function(e,t,r,n){for(var a=[],i=0,s=e.length,o=0;i!==s&&o+t[i]<r;)o+=t[i],i++;a.push(e.slice(0,i));var l=i;for(o=0;i!==s;)o+t[i]>n&&(a.push(e.slice(l,i)),o=0,l=i),o+=t[i],i++;return l!==i&&a.push(e.slice(l,i)),a},B8=function(e,t,r){r||(r={});var n,a,i,s,o,l,c,u=[],A=[u],h=r.textIndent||0,m=0,v=0,g=e.split(" "),y=C2.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var w=Array(l).join(" "),T=[];g.map(function(F){(F=F.split(/\s*\n/)).length>1?T=T.concat(F.map(function(B,D){return(D&&B.length?`
`:"")+B})):T.push(F[0])}),g=T,l=T8.apply(this,[w,r])}for(i=0,s=g.length;i<s;i++){var N=0;if(n=g[i],l&&n[0]==`
`&&(n=n.substr(1),N=1),h+m+(v=(a=C2.apply(this,[n,r])).reduce(function(F,B){return F+B},0))>t||N){if(v>t){for(o=N8.apply(this,[n,a,t-(h+m),t]),u.push(o.shift()),u=[o.pop()];o.length;)A.push([o.shift()]);v=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(F,B){return F+B},0)}else u=[n];A.push(u),h=v+l,m=y}else u.push(n),h+=m+v,m=y}return c=l?function(F,B){return(B?w:"")+F.join(" ")}:function(F){return F.join(" ")},A.map(c)},ig.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var A=this.internal.getFont(u.fontName,u.fontStyle);return A.metadata.Unicode?{widths:A.metadata.Unicode.widths||{0:1},kerning:A.metadata.Unicode.kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(B8.apply(this,[n[o],s,i]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(A){return"0x"+parseInt(A,10).toString(16)},s=e.__fontmetrics__.compress=function(A){var h,m,v,g,y=["{"];for(var w in A){if(h=A[w],isNaN(parseInt(w,10))?m="'"+w+"'":(w=parseInt(w,10),m=(m=i(w).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(v=i(h).slice(3),g="-"):(v=i(h).slice(2),g=""),v=g+v.slice(0,-1)+n[v.slice(-1)];else{if(aa(h)!=="object")throw new Error("Don't know what to do with value type "+aa(h)+".");v=s(h)}y.push(m+v)}return y.push("}"),y.join("")},o=e.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,v,g,y={},w=1,T=y,N=[],F="",B="",D=A.length-1,E=1;E<D;E+=1)(g=A[E])=="'"?h?(v=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(N.push([T,v]),T={},v=void 0):g=="}"?((m=N.pop())[0][m[1]]=T,v=void 0,T=m[0]):g=="-"?w=-1:v===void 0?r.hasOwnProperty(g)?(F+=r[g],v=parseInt(F,16)*w,w=1,F=""):F+=g:r.hasOwnProperty(g)?(B+=r[g],T[v]=parseInt(B,16)*w,w=1,v=void 0,B=""):B+=g;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(A){var h=A.font,m=u.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var v=c.Unicode[h.postScriptName];v&&(h.metadata.Unicode.encoding=v,h.encoding=v.codePages[0])}])}(ur.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(iy(o)),s.metadata=e.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])}(ur),function(e){function t(){return(Ir.canvg?Promise.resolve(Ir.canvg):$E(()=>import("./index.es-BbuJjDr7.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ur.API.addSvgAsImage=function(r,n,a,i,s,o,l,c){if(isNaN(n)||isNaN(a))throw va.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(s))throw va.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=s;var A=u.getContext("2d");A.fillStyle="#fff",A.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(v){return v.fromString(A,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){m.addImage(u.toDataURL("image/jpeg",1),n,a,i,s,l,c)})}}(),ur.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},ur.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,u=0,A=0;function h(v,g){var y,w=!1;for(y=0;y<v.length;y+=1)v[y]===g&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=o.length;for(A=0;A<m;A+=1)r[o[A]].value=r[o[A]].defaultValue,r[o[A]].explicitSet=!1}if(aa(e)==="object"){for(a in e)if(i=e[a],h(o,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+s.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(ur.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,s){for(var o,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],A=0,h=i.length;A<h;++A){if(o=s.metadata.characterToGlyph(i.charCodeAt(A)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=i.charCodeAt(A),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var s,o,l,c,u,A,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],A=0,h=(o=Object.keys(i).sort(function(m,v){return m-v})).length;A<h;A++)s=o[A],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(c=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var A=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",v=0;v<h.length;v++)m+=String.fromCharCode(h[v]);var g=c();u({data:m,addLength1:!0,objectId:g}),l("endobj");var y=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ig(o.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ig(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+e.API.PDFObject.convert(A)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+Ig(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var A=o.metadata.rawData,h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var v=c();u({data:h,addLength1:!0,objectId:v}),l("endobj");var g=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var y=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Ig(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Ig(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,o=i.text||"",l=i.x,c=i.y,u=i.options||{},A=i.mutex||{},h=A.pdfEscape,m=A.activeFontKey,v=A.fonts,g=m,y="",w=0,T="",N=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:A};for(T=o,g=m,Array.isArray(o)&&(T=o[0]),w=0;w<T.length;w+=1)v[g].metadata.hasOwnProperty("cmap")&&(s=v[g].metadata.cmap.unicode.codeMap[T[w].charCodeAt(0)]),s||T[w].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?y+=T[w]:y+="";var F="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?F=h(y,g).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(F=r(y,v[g])),A.isHex=!0,{text:F,x:l,y:c,options:u,mutex:A}};t.events.push(["postProcessText",function(i){var s=i.text||"",o=[],l={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?o.push([a(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):o.push(a(Object.assign({},l,{text:s[c]})).text);i.text=o}else i.text=a(Object.assign({},l,{text:s})).text}])}(ur),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ur.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,s,o,l,c,u,A=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,N=0;this.__bidiEngine__={};var F=function(P){var M=P.charCodeAt(),Q=M>>8,V=g[Q];return V!==void 0?A[256*V+(255&M)]:Q===252||Q===253?"AL":w.test(Q)?"L":Q===8?"R":"N"},B=function(P){for(var M,Q=0;Q<P.length;Q++){if((M=F(P.charAt(Q)))==="L")return!1;if(M==="R")return!0}return!1},D=function(P,M,Q,V){var te,W,re,z,X=M[V];switch(X){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(X="AN");break;case"AL":T=!0,X="R";break;case"WS":X="N";break;case"CS":V<1||V+1>=M.length||(te=Q[V-1])!=="EN"&&te!=="AN"||(W=M[V+1])!=="EN"&&W!=="AN"?X="N":T&&(W="AN"),X=W===te?W:"N";break;case"ES":X=(te=V>0?Q[V-1]:"B")==="EN"&&V+1<M.length&&M[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&Q[V-1]==="EN"){X="EN";break}if(T){X="N";break}for(re=V+1,z=M.length;re<z&&M[re]==="ET";)re++;X=re<z&&M[re]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(z=M.length,re=V+1;re<z&&M[re]==="NSM";)re++;if(re<z){var K=P[V],se=K>=1425&&K<=2303||K===64286;if(te=M[re],se&&(te==="R"||te==="AL")){X="R";break}}}X=V<1||(te=M[V-1])==="B"?"N":Q[V-1];break;case"B":T=!1,a=!0,X=N;break;case"S":i=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":X="N"}return X},E=function(P,M,Q){var V=P.split("");return Q&&S(V,Q,{hiLevel:N}),V.reverse(),M&&M.reverse(),V.join("")},S=function(P,M,Q){var V,te,W,re,z,X=-1,K=P.length,se=0,U=[],Y=N?m:h,Z=[];for(T=!1,a=!1,i=!1,te=0;te<K;te++)Z[te]=F(P[te]);for(W=0;W<K;W++){if(z=se,U[W]=D(P,Z,U,W),V=240&(se=Y[z][v[U[W]]]),se&=15,M[W]=re=Y[se][5],V>0)if(V===16){for(te=X;te<W;te++)M[te]=1;X=-1}else X=-1;if(Y[se][6])X===-1&&(X=W);else if(X>-1){for(te=X;te<W;te++)M[te]=re;X=-1}Z[W]==="B"&&(M[W]=0),Q.hiLevel|=re}i&&function(ne,de,xe){for(var Ae=0;Ae<xe;Ae++)if(ne[Ae]==="S"){de[Ae]=N;for(var ae=Ae-1;ae>=0&&ne[ae]==="WS";ae--)de[ae]=N}}(Z,M,K)},k=function(P,M,Q,V,te){if(!(te.hiLevel<P)){if(P===1&&N===1&&!a)return M.reverse(),void(Q&&Q.reverse());for(var W,re,z,X,K=M.length,se=0;se<K;){if(V[se]>=P){for(z=se+1;z<K&&V[z]>=P;)z++;for(X=se,re=z-1;X<re;X++,re--)W=M[X],M[X]=M[re],M[re]=W,Q&&(W=Q[X],Q[X]=Q[re],Q[re]=W);se=z}se++}}},H=function(P,M,Q){var V=P.split(""),te={hiLevel:N};return Q||(Q=[]),S(V,Q,te),function(W,re,z){if(z.hiLevel!==0&&u)for(var X,K=0;K<W.length;K++)re[K]===1&&(X=y.indexOf(W[K]))>=0&&(W[K]=y[X+1])}(V,Q,te),k(2,V,M,Q,te),k(1,V,M,Q,te),V.join("")};return this.__bidiEngine__.doBidiReorder=function(P,M,Q){if(function(te,W){if(W)for(var re=0;re<te.length;re++)W[re]=re;o===void 0&&(o=B(te)),c===void 0&&(c=B(te))}(P,M),s||!l||c)if(s&&l&&o^c)N=o?1:0,P=E(P,M,Q);else if(!s&&l&&c)N=o?1:0,P=H(P,M,Q),P=E(P,M);else if(!s||o||l||c){if(s&&!l&&o^c)P=E(P,M),o?(N=0,P=H(P,M,Q)):(N=1,P=H(P,M,Q),P=E(P,M));else if(s&&o&&!l&&c)N=1,P=H(P,M,Q),P=E(P,M);else if(!s&&!l&&o^c){var V=u;o?(N=1,P=H(P,M,Q),N=0,u=!1,P=H(P,M,Q),u=V):(N=0,P=H(P,M,Q),P=E(P,M),N=1,u=!1,P=H(P,M,Q),u=V,P=E(P,M))}}else N=0,P=H(P,M,Q);else N=o?1:0,P=H(P,M,Q);return P},this.__bidiEngine__.setOptions=function(P){P&&(s=P.isInputVisual,l=P.isOutputVisual,o=P.isInputRtl,c=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,i=(n.x,n.y,n.options||{}),s=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(s=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?s.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([r.doBidiReorder(a[o])]);n.text=s}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(ur),ur.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new v0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new lxe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Kve(this.contents),this.head=new Yve(this),this.name=new txe(this),this.cmap=new oX(this),this.toUnicode={},this.hhea=new Xve(this),this.maxp=new rxe(this),this.hmtx=new nxe(this),this.post=new Zve(this),this.os2=new Jve(this),this.loca=new oxe(this),this.glyf=new axe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,c;for(c=[],s=0,o=(l=this.bbox).length;s<o;s++)t=l[s],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,s,o;for(s=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var ad,v0=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,s,o,l;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*s+256*o+l},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),Kve=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,s,o,l,c,u,A,h,m,v,g;for(g in m=Object.keys(r).length,l=Math.log(2),A=16*Math.floor(Math.log(m)/l),s=Math.floor(A/l),u=16*m-A,(a=new v0).writeInt(this.scalarType),a.writeShort(m),a.writeShort(A),a.writeShort(s),a.writeShort(u),i=16*m,c=a.pos+i,o=null,v=[],r)for(h=r[g],a.writeString(g),a.writeInt(e(h)),a.writeInt(c),a.writeInt(h.length),v=v.concat(h),g==="head"&&(o=c),c+=h.length;c%4;)v.push(0),c++;return a.write(v),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,s;for(r=lX.call(r);r.length%4;)r.push(0);for(i=new v0(r),a=0,n=0,s=r.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),Wve={}.hasOwnProperty,hf=function(e,t){for(var r in t)Wve.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};ad=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Yve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new v0).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),F8=function(){function e(t,r){var n,a,i,s,o,l,c,u,A,h,m,v,g,y,w,T,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),A=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var F,B;for(B=[],l=F=0;0<=h?F<h:F>h;l=0<=h?++F:--F)B.push(t.readUInt16());return B}(),t.pos+=2,g=function(){var F,B;for(B=[],l=F=0;0<=h?F<h:F>h;l=0<=h?++F:--F)B.push(t.readUInt16());return B}(),c=function(){var F,B;for(B=[],l=F=0;0<=h?F<h:F>h;l=0<=h?++F:--F)B.push(t.readUInt16());return B}(),u=function(){var F,B;for(B=[],l=F=0;0<=h?F<h:F>h;l=0<=h?++F:--F)B.push(t.readUInt16());return B}(),a=(this.length-t.pos+this.offset)/2,o=function(){var F,B;for(B=[],l=F=0;0<=a?F<a:F>a;l=0<=a?++F:--F)B.push(t.readUInt16());return B}(),l=w=0,N=i.length;w<N;l=++w)for(y=i[l],n=T=v=g[l];v<=y?T<=y:T>=y;n=v<=y?++T:--T)u[l]===0?s=n+c[l]:(s=o[u[l]/2+(n-v)-(h-l)]||0)!==0&&(s+=c[l]),this.codeMap[n]=65535&s}t.pos=A}return e.encode=function(t,r){var n,a,i,s,o,l,c,u,A,h,m,v,g,y,w,T,N,F,B,D,E,S,k,H,P,M,Q,V,te,W,re,z,X,K,se,U,Y,Z,ne,de,xe,Ae,ae,ue,le,ie;switch(V=new v0,s=Object.keys(t).sort(function(De,Le){return De-Le}),r){case"macroman":for(g=0,y=function(){var De=[];for(v=0;v<256;++v)De.push(0);return De}(),T={0:0},i={},te=0,X=s.length;te<X;te++)T[ae=t[a=s[te]]]==null&&(T[ae]=++g),i[a]={old:t[a],new:T[t[a]]},y[a]=T[t[a]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(y),{charMap:i,subtable:V.data,maxGlyphID:g+1};case"unicode":for(M=[],A=[],N=0,T={},n={},w=c=null,W=0,K=s.length;W<K;W++)T[B=t[a=s[W]]]==null&&(T[B]=++N),n[a]={old:B,new:T[B]},o=T[B]-a,w!=null&&o===c||(w&&A.push(w),M.push(a),c=o),w=a;for(w&&A.push(w),A.push(65535),M.push(65535),H=2*(k=M.length),S=2*Math.pow(Math.log(k)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,E=2*k-S,l=[],D=[],m=[],v=re=0,se=M.length;re<se;v=++re){if(P=M[v],u=A[v],P===65535){l.push(0),D.push(0);break}if(P-(Q=n[P].new)>=32768)for(l.push(0),D.push(2*(m.length+k-v)),a=z=P;P<=u?z<=u:z>=u;a=P<=u?++z:--z)m.push(n[a].new);else l.push(Q-P),D.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*k+2*m.length),V.writeUInt16(0),V.writeUInt16(H),V.writeUInt16(S),V.writeUInt16(h),V.writeUInt16(E),xe=0,U=A.length;xe<U;xe++)a=A[xe],V.writeUInt16(a);for(V.writeUInt16(0),Ae=0,Y=M.length;Ae<Y;Ae++)a=M[Ae],V.writeUInt16(a);for(ue=0,Z=l.length;ue<Z;ue++)o=l[ue],V.writeUInt16(o);for(le=0,ne=D.length;le<ne;le++)F=D[le],V.writeUInt16(F);for(ie=0,de=m.length;ie<de;ie++)g=m[ie],V.writeUInt16(g);return{charMap:n,subtable:V.data,maxGlyphID:N+1}}},e}(),oX=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new F8(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=F8.encode(r,n),(i=new v0).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),Xve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),Jve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),Zve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var s;for(a=r.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(r.readUInt32());return c}).call(this)}},t}(),exe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},txe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,i,s,o,l,c,u,A,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(c={},s=A=0,h=a.length;A<h;s=++A)i=a[s],r.pos=i.offset,u=r.readString(i.length),o=new exe(u,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),rxe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),nxe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,i,s,o,l,c;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,A;for(A=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)A.push(r.readInt16());return A}(),this.widths=(function(){var u,A,h,m;for(m=[],u=0,A=(h=this.metrics).length;u<A;u++)s=h[u],m.push(s.advance);return m}).call(this),a=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(a));return c},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),lX=[].slice,axe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,i,s,o,l,c,u,A,h;return r in this.cache?this.cache[r]:(s=this.file.loca,n=this.file.contents,a=s.indexOf(r),(i=s.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new v0(n.read(i))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),A=l.readShort(),this.cache[r]=o===-1?new sxe(l,u,h,c,A):new ixe(l,o,u,h,c,A),this.cache[r]))},t.prototype.encode=function(r,n,a){var i,s,o,l,c;for(o=[],s=[],l=0,c=n.length;l<c;l++)i=r[n[l]],s.push(o.length),i&&(o=o.concat(i.encode(a)));return s.push(o.length),{table:o,offsets:s}},t}(),ixe=function(){function e(t,r,n,a,i,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),sxe=function(){function e(t,r,n,a,i){var s,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new v0(lX.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),oxe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hf(t,ad),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=2)s.push(2*r.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=4)s.push(r.readUInt32());return s}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<a.length;++o)if(a[o]=i,s<n.length&&n[s]==o){++s,a[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*a.length),A=0;A<a.length;++A)u[4*A+3]=255&a[A],u[4*A+2]=(65280&a[A])>>8,u[4*A+1]=(16711680&a[A])>>16,u[4*A]=(4278190080&a[A])>>24;return u},t}(),lxe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,s,o,l;for(a={},s=0,o=t.length;s<o;s++)a[i=t[s]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in l=this.glyphsFor(r))n=l[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,s,o,l,c,u,A,h,m,v,g,y,w;for(a in n=oX.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),m={0:0},w=n.charMap)m[(l=w[a]).old]=l.new;for(v in h=n.maxGlyphID,s)v in m||(m[v]=h++);return u=function(T){var N,F;for(N in F={},T)F[T[N]]=N;return F}(m),A=Object.keys(u).sort(function(T,N){return T-N}),g=function(){var T,N,F;for(F=[],T=0,N=A.length;T<N;T++)o=A[T],F.push(u[o]);return F}(),i=this.font.glyf.encode(s,g,m),c=this.font.loca.encode(i.offsets,g),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();ur.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,s;if(Array.isArray(r))return"["+function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(t.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)s=r[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join(`
`)}return""+r},t}();function cX(e,t,r,n,a){n=n||{};var i=1.15,s=a.internal.scaleFactor,o=a.internal.getFontSize()/s,l=a.getLineHeightFactor?a.getLineHeightFactor():i,c=o*l,u=/\r\n|\r|\n/g,A="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(A=typeof e=="string"?e.split(u):e,h=A.length||1),r+=o*(2-i),n.valign==="middle"?r-=h/2*c:n.valign==="bottom"&&(r-=h*c),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),A&&h>=1){for(var v=0;v<A.length;v++)a.text(A[v],t-a.getStringUnitWidth(A[v])*m,r),r+=c;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var D8={},ev=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:D8=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=e.unifyColor(t.textColor),u&&(a=this.jsPDFDocument).setTextColor.apply(a,u),u=e.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return D8||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),e3=function(e,t){return e3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},e3(e,t)};function uX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var dX=function(e){uX(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function cxe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function uxe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function YE(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return a}function fX(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=AX(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function AX(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function sT(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function hX(e,t){var r=sT(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function dxe(e,t,r,n,a){var i={},s=1.3333333333333333,o=xB(t,function(N){return a.getComputedStyle(N).backgroundColor});o!=null&&(i.fillColor=o);var l=xB(t,function(N){return a.getComputedStyle(N).color});l!=null&&(i.textColor=l);var c=Axe(n,r);c&&(i.cellPadding=c);var u="borderTopColor",A=s*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/A;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/A,right:(parseFloat(n.borderRightWidth)||0)/A,bottom:(parseFloat(n.borderBottomWidth)||0)/A,left:(parseFloat(n.borderLeftWidth)||0)/A},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var v=xB(t,function(N){return a.getComputedStyle(N)[u]});v!=null&&(i.lineColor=v);var g=["left","right","center","justify"];g.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),g=["middle","bottom","top"],g.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var y=parseInt(n.fontSize||"");isNaN(y)||(i.fontSize=y/s);var w=fxe(n);w&&(i.fontStyle=w);var T=(n.fontFamily||"").toLowerCase();return e.indexOf(T)!==-1&&(i.font=T),i}function fxe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function xB(e,t){var r=pX(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function pX(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:pX(e.parentElement,t):r}function Axe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(o){return parseInt(o||"0")/n}),s=sT(i,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}function mX(e,t,r,n,a){var i,s;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var l=Object.keys(e.getFontList()),c=e.scaleFactor(),u=[],A=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:u,body:A,foot:h};for(var m=0;m<o.rows.length;m++){var v=o.rows[m],g=(s=(i=v==null?void 0:v.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),y=hxe(l,c,r,v,n,a);y&&(g==="thead"?u.push(y):g==="tfoot"?h.push(y):A.push(y))}return{head:u,body:A,foot:h}}function hxe(e,t,r,n,a,i){for(var s=new dX(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(a||c.display!=="none"){var u=void 0;i&&(u=dxe(e,l,t,c,r)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:pxe(l)})}}var A=r.getComputedStyle(n);if(s.length>0&&(a||A.display!=="none"))return s}function pxe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function mxe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function nA(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i}function gX(e,t){var r=new ev(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();mxe(a,n,t);var i=nA({},a,n,t),s;typeof window<"u"&&(s=window);var o=gxe(a,n,t),l=vxe(a,n,t),c=xxe(r,i),u=bxe(r,i,s);return{id:t.tableId,content:u,hooks:l,styles:o,settings:c}}function gxe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var c=e[l],u=t[l],A=r[l];n.columnStyles=nA({},c,u,A)}else{var h=[e,t,r],m=h.map(function(v){return v[l]||{}});n[l]=nA({},m[0],m[1],m[2])}},i=0,s=Object.keys(n);i<s.length;i++){var o=s[i];a(o)}return n}function vxe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=n;i<s.length;i++){var o=s[i];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function xxe(e,t){var r,n,a,i,s,o,l,c,u,A,h,m,v=sT(t.margin,40/e.scaleFactor()),g=(r=yxe(e,t.startY))!==null&&r!==void 0?r:v.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var w;t.showHead===!0?w="everyPage":t.showHead===!1?w="never":w=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var T=(i=t.useCss)!==null&&i!==void 0?i:!1,N=t.theme||(T?"plain":"striped"),F=!!t.horizontalPageBreak,B=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:T,theme:N,startY:g,margin:v,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=t.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:w,showFoot:y,tableLineWidth:(A=t.tableLineWidth)!==null&&A!==void 0?A:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:F,horizontalPageBreakRepeat:B,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function yxe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;i=s===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function bxe(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=mX(e,t.html,r,s,t.useCss)||{};n=o.head||n,a=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||wxe(n,a,i);return{columns:l,head:n,body:a,foot:i}}function wxe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(n)?c=a.length:c=i+(l>0?"_".concat(l):"");var u={dataKey:c};a.push(u)}}),a}var t3=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Cxe=function(e){uX(t,e);function t(r,n,a,i,s,o){var l=e.call(this,r,n,o)||this;return l.cell=a,l.row=i,l.column=s,l.section=i.section,l}return t}(t3),Exe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,s){for(var o=0,l=r;o<l.length;o++){var c=l[o],u=new Cxe(t,this,n,a,i,s),A=c(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],A)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new t3(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new t3(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),vX=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof dX&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var s=n.cells[i.index];if(!s)return 0;var o=r.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+o;return c>a?c:a},0)},e}(),xX=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=sT(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),_xe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function Sxe(e,t){Txe(e,t);var r=[],n=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=r3(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=r3(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Bxe(t),kxe(t,e),Nxe(t)}function Txe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=hX(e,t);t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){var u=t.hooks.didParseCell;t.callCellHooks(e,u,c,i,l,null);var A=c.padding("horizontal");c.contentWidth=YE(c.text,c.styles,e)+A;var h=YE(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=h+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>a?(c.minWidth=a,c.wrappedWidth=a):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var m=10/r;c.minWidth=c.styles.minCellWidth||m,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var u=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},A=u.cellWidth||u.minCellWidth;A&&typeof A=="number"&&(l.minWidth=A,l.wrappedWidth=A)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function r3(e,t,r){for(var n=t,a=e.reduce(function(m,v){return m+v.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],o=s.wrappedWidth/a,l=n*o,c=s.width+l,u=r(s),A=c<u?u:c;t-=A-s.width,s.width=A}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=r3(h,t,r))}return t}function Nxe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=t[l.index];if(r>1)r--,delete i.cells[l.index];else if(c)c.cell.height+=i.height,r=c.cell.colSpan,delete i.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=i.cells[l.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var A=n.length-a,h=u.rowSpan>A?A:u.rowSpan;t[l.index]={cell:u,left:h,row:i}}}}}function Bxe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,s=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if(s-=1,s>1&&e.columns[o+1])i+=l.width,delete n.cells[l.index];else if(a){var c=a;delete n.cells[l.index],a=null,c.width=l.width+i}else{var c=n.cells[l.index];if(!c)continue;if(s=c.colSpan,i=0,c.colSpan>1){a=c,i+=l.width;continue}c.width=l.width+i}}}function kxe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){t.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=t.splitTextToSize(c.text,u+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=R8(c.text,u,c.styles,t,"...");else if(c.styles.overflow==="hidden")c.text=R8(c.text,u,c.styles,t,"");else if(typeof c.styles.overflow=="function"){var A=c.styles.overflow(c.text,u);typeof A=="string"?c.text=[A]:c.text=A}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<h*c.rowSpan?r={height:h,count:c.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}function R8(e,t,r,n,a){return e.map(function(i){return Ixe(i,t,r,n,a)})}function Ixe(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=YE(e,r,n))return e;for(;t<YE(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function yX(e,t){var r=new ev(e),n=Fxe(t,r.scaleFactor()),a=new Exe(t,n);return Sxe(r,a),r.applyStyles(r.userStyles),a}function Fxe(e,t){var r=e.content,n=Rxe(r.columns);if(r.head.length===0){var a=P8(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=P8(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:n,head:yB("head",r.head,n,s,i,t),body:yB("body",r.body,n,s,i,t),foot:yB("foot",r.foot,n,s,i,t)}}function yB(e,t,r,n,a,i){var s={},o=t.map(function(l,c){for(var u=0,A={},h=0,m=0,v=0,g=r;v<g.length;v++){var y=g[v];if(s[y.index]==null||s[y.index].left===0)if(m===0){var w=void 0;Array.isArray(l)?w=l[y.index-h-u]:w=l[y.dataKey];var T={};typeof w=="object"&&!Array.isArray(w)&&(T=(w==null?void 0:w.styles)||{});var N=Pxe(e,y,c,a,n,i,T),F=new xX(w,N,e);A[y.dataKey]=F,A[y.index]=F,m=F.colSpan-1,s[y.index]={left:F.rowSpan-1,times:m}}else m--,h++;else s[y.index].left--,m=s[y.index].times,u++}return new vX(l,c,e,A)});return o}function P8(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Dxe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Dxe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Rxe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new _xe(a,t,r)})}function Pxe(e,t,r,n,a,i,s){var o=uxe(n),l;e==="head"?l=a.headStyles:e==="body"?l=a.bodyStyles:e==="foot"&&(l=a.footStyles);var c=nA({},o.table,o[e],a.styles,l),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},A=e==="body"?u:{},h=e==="body"&&r%2===0?nA({},o.alternateRow,a.alternateRowStyles):{},m=cxe(i),v=nA({},m,c,h,A);return nA(v,s)}function Mxe(e,t,r){var n;r===void 0&&(r={});var a=hX(e,t),i=new Map,s=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(h){var m=t.columns.find(function(v){return v.dataKey===h||v.index===h});m&&!i.has(m.index)&&(i.set(m.index,!0),s.push(m.index),o.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var c=!0,u=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(i.has(u)){u++;continue}var A=t.columns[u].wrappedWidth;if(c||a>=A)c=!1,s.push(u),o.push(t.columns[u]),a-=A;else break;u++}return{colIndexes:s,columns:o,lastIndex:u-1}}function Lxe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Mxe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function bX(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+s;if(r.pageBreak==="avoid"){var l=t.body,c=l.reduce(function(h,m){return h+m.height},0);o+=c}var u=new ev(e);(r.pageBreak==="always"||r.startY!=null&&o>u.pageSize().height)&&(CX(u),i.y=a.top),t.callWillDrawPageHooks(u,i);var A=nA({},i);t.startPageNumber=u.pageNumber(),r.horizontalPageBreak?Oxe(u,t,A,i):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return bA(u,t,h,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(h,m){var v=m===t.body.length-1;XE(u,t,h,v,A,i,t.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return bA(u,t,h,i,t.columns)})),fX(u,t,A,i),t.callEndPageHooks(u,i),t.finalY=i.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function Oxe(e,t,r,n){var a=Lxe(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(c,u){e.applyStyles(e.userStyles),u>0?sy(e,t,r,n,c.columns,!0):M8(e,t,n,c.columns),Uxe(e,t,r,n,c.columns),bB(e,t,n,c.columns)});else for(var s=-1,o=a[0],l=function(){var c=s;if(o){e.applyStyles(e.userStyles);var u=o.columns;s>=0?sy(e,t,r,n,u,!0):M8(e,t,n,u),c=L8(e,t,s+1,n,u),bB(e,t,n,u)}var A=c-s;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),sy(e,t,r,n,h.columns,!0),L8(e,t,s+1,n,h.columns,A),bB(e,t,n,h.columns)}),s=c};s<t.body.length-1;)l()}function M8(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return bA(e,t,i,r,n)})}function Uxe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var o=s===t.body.length-1;XE(e,t,i,o,r,n,a)})}function L8(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var s=Math.min(r+i,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(l,c){var u=r+c===t.body.length-1,A=wX(e,t,u,n);l.canEntireRowFit(A,a)&&(bA(e,t,l,n,a),o=r+c)}),o}function bB(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return bA(e,t,i,r,n)})}function jxe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function Hxe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,o=r.columns;s<o.length;s++){var l=o[s],c=e.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new xX(c.raw,c.styles,c.section);u=nA(u,c),u.text=[];var A=jxe(c,t,n);c.text.length>A&&(u.text=c.text.splice(A,c.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(h,m),c.contentHeight>=t&&(c.contentHeight=t,u.styles.minCellHeight-=t),c.contentHeight>e.height&&(e.height=c.contentHeight),u.contentHeight=u.getContentHeight(h,m),u.contentHeight>i&&(i=u.contentHeight),a[l.index]=u}}var v=new vX(e.raw,-1,e.section,a,!0);v.height=i;for(var g=0,y=r.columns;g<y.length;g++){var l=y[g],u=v.cells[l.index];u&&(u.height=v.height);var c=e.cells[l.index];c&&(c.height=e.height)}return v}function Qxe(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,s=i.top+i.bottom,o=a-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),c=l<r;if(l>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=t.hasRowSpan(n.columns),A=t.getMaxCellHeight(n.columns)>o;return A?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function XE(e,t,r,n,a,i,s){var o=wX(e,t,n,i);if(r.canEntireRowFit(o,s))bA(e,t,r,i,s);else if(Qxe(e,r,o,t)){var l=Hxe(r,o,t,e);bA(e,t,r,i,s),sy(e,t,a,i,s),XE(e,t,l,n,a,i,s)}else sy(e,t,a,i,s),XE(e,t,r,n,a,i,s)}function bA(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var o=s[i],l=r.cells[o.index];if(!l){n.x+=o.width;continue}e.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=t.callCellHooks(e,t.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}Vxe(e,l,n);var u=l.getTextPos();cX(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function Vxe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=AX(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),zxe(e,t,r,n.lineWidth))}function zxe(e,t,r,n){var a,i,s,o;n.top&&(a=r.x,i=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,i,s,o)),n.bottom&&(a=r.x,i=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,i,s,o)),n.left&&(a=r.x,i=r.y,s=r.x,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,i,s,o)),n.right&&(a=r.x+t.width,i=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,i,s,o));function l(c,u,A,h,m){e.getDocument().setLineWidth(c),e.getDocument().line(u,A,h,m,"S")}}function wX(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function sy(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(o){return bA(e,t,o,n,a)}),t.callEndPageHooks(e,n);var s=t.settings.margin;fX(e,t,r,n),CX(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return bA(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function CX(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Gxe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=gX(this,n),i=yX(this,a);return bX(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){cX(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return ev.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){ev.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new ev(this),i=mX(a,t,window,r,!1),s=i.head,o=i.body,l=((n=s[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var wB;function sc(e,t){var r=gX(e,t),n=yX(e,r);bX(e,n)}try{if(typeof window<"u"&&window){var O8=window,U8=O8.jsPDF||((wB=O8.jspdf)===null||wB===void 0?void 0:wB.jsPDF);U8&&Gxe(U8)}}catch(e){console.error("Could not apply autoTable plugin",e)}const TR="evaluaciones_pruebas",NR="evaluaciones_rubricas_estaticas",BR="evaluaciones_rubricas_interactivas",qxe="usuarios",oT=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},$xe=e=>{const t=tr(Ft(Tt,TR),an("fechaCreacion","desc"));return yr(t,n=>{e(n.docs.map(a=>oT(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},Kxe=async e=>{try{const{id:t,...r}=e,n=br(Tt,TR,t);await ro(n,{...r,fechaCreacion:Ar.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},Wxe=async e=>{try{await Fs(br(Tt,TR,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},Yxe=e=>{const t=tr(Ft(Tt,NR),an("fechaCreacion","desc"));return yr(t,n=>{e(n.docs.map(a=>oT(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},Xxe=async e=>{try{const{id:t,...r}=e,n=br(Tt,NR,t);await ro(n,{...r,fechaCreacion:Ar.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},Jxe=async e=>{try{await Fs(br(Tt,NR,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},Zxe=e=>{const t=tr(Ft(Tt,BR));return yr(t,n=>{e(n.docs.map(a=>oT(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},e1e=async e=>{try{const{id:t,...r}=e,n=br(Tt,BR,t);await ro(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},t1e=async e=>{try{return(await Da(Ft(Tt,BR),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},r1e=e=>{const t=tr(Ft(Tt,qxe));return yr(t,n=>{e(n.docs.map(a=>oT(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},n1e=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],j8={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},JC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},a1e=({open:e})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):d.jsxs(d.Fragment,{children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),i1e=({item:e,index:t,showAnswers:r})=>{const n=L.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&d.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&d.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,i)=>{const s=r&&i===e.respuestaCorrecta;return d.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${s?"bg-green-100 dark:bg-green-900/50":""}`,children:[d.jsx("div",{className:"w-5 h-5 border rounded-full"}),d.jsxs("span",{children:[String.fromCharCode(65+i),") ",a]})]},i)})}),e.tipo==="Desarrollo"&&d.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&d.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[d.jsx("span",{children:"V ___ F ___"}),r&&d.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),d.jsx("div",{className:"space-y-2",children:e.pares.map((a,i)=>d.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[i+1,". ",a.concepto]},i))})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),d.jsx("div",{className:"space-y-2",children:n.map((a,i)=>d.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},i))})]})]}),r&&d.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[d.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),d.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,i)=>d.jsxs("li",{children:[d.jsx("strong",{children:a.concepto})," → ",a.definicion]},i))})]})]}),e.tipo==="Comprensión de lectura"&&d.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[d.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,i)=>{if(a.tipo==="Selección múltiple"){const s=a;return d.jsxs("div",{className:"pt-2",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[i+1,". ",s.pregunta," (",s.puntaje," pts)"]}),s.habilidadBloom&&d.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:s.habilidadBloom})]}),d.jsx("div",{className:"ml-4 mt-2 space-y-2",children:s.opciones.map((o,l)=>{const c=r&&l===s.respuestaCorrecta;return d.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${c?"bg-green-100 dark:bg-green-900/50":""}`,children:[d.jsx("div",{className:"w-5 h-5 border rounded-full"}),d.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const s=a;return d.jsxs("div",{className:"pt-2",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[i+1,". ",s.pregunta," (",s.puntaje," pts)"]}),s.habilidadBloom&&d.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:s.habilidadBloom})]}),d.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},s1e=()=>{const[e,t]=L.useState([]),[r,n]=L.useState(null),[a,i]=L.useState(!1),[s,o]=L.useState(!1),[l,c]=L.useState(null),[u,A]=L.useState(!1),h={nombre:"",asignatura:cc[0],nivel:GE[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[m,v]=L.useState(h);L.useEffect(()=>{const E=$xe(t);return()=>E()},[]);const g=E=>{const{name:S,value:k}=E.target;v(H=>({...H,[S]:k}))},y=E=>{v(S=>{const k={...S.tiposActividad};return k[E]?delete k[E]:k[E]=j8[E][0],{...S,tiposActividad:k}})},w=(E,S)=>{v(k=>({...k,tiposActividad:{...k.tiposActividad,[E]:S}}))},T=E=>{v(S=>{const k=S.selectedNee.includes(E)?S.selectedNee.filter(H=>H!==E):[...S.selectedNee,E];return{...S,selectedNee:k}})},N=async E=>{if(E.preventDefault(),!m.nombre.trim()||!m.contenido.trim()||Object.keys(m.tiposActividad).length===0){c("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}i(!0),c(null);const S=Object.entries(m.tiposActividad).map(([P,M])=>`- ${M} ítem(s) de tipo '${P}'`).join(`
`),k=m.isNee&&m.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${m.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",H=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${m.nombre}
            - Asignatura: ${m.asignatura}
            - Nivel: ${m.nivel}
            - Contenido a evaluar: "${m.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${S}
            - Nivel de Dificultad General: ${m.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${k}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{yA("Evaluación - Pruebas");const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",re=(await(await new Wi(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(H)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(re);let X=0;z.actividades.forEach(se=>{se.items.forEach(U=>{X+=U.puntaje||0,U.tipo==="Comprensión de lectura"&&U.preguntas&&U.preguntas.forEach(Y=>{X+=Y.puntaje||0})})});const K={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:m.nombre,asignatura:m.asignatura,nivel:m.nivel,contenidoOriginal:m.contenido,tiposActividadOriginal:m.tiposActividad,objetivo:z.objetivo,instruccionesGenerales:z.instruccionesGenerales,puntajeIdeal:X,actividades:z.actividades,dificultad:m.dificultad,...m.isNee&&{adaptacionNEE:m.selectedNee}};n(K),A(!1)}catch(P){console.error(P),c("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{i(!1)}},F=async()=>{if(r)try{await Kxe(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},B=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await Wxe(E),(r==null?void 0:r.id)===E&&n(null)}catch(S){console.error(S),alert("No se pudo eliminar la prueba.")}},D=async E=>{o(!0);const S=new ur("p","mm","a4"),k=20,H=S.internal.pageSize.getHeight(),P=S.internal.pageSize.getWidth(),M=P-k*2;let Q=k;const V=re=>{re.setFillColor(230,230,230),re.rect(0,0,P,25,"F"),re.setFontSize(9),re.setTextColor(0,0,0),re.text("LICEO INDUSTRIAL DE RECOLETA",k,15,{align:"left"}),re.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",P-k,15,{align:"right"})};V(S),Q=30,S.setTextColor(0,0,0),S.setFont("helvetica","bold"),S.setFontSize(16),S.text(E.nombre,P/2,Q,{align:"center"}),Q+=10,sc(S,{startY:Q,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:re=>{V(S)}}),Q=S.lastAutoTable.finalY+10;const te=re=>{Q+re>H-k&&(S.addPage(),V(S),Q=k+15,S.setTextColor(0,0,0))},W=(re,z)=>{S.setFont("helvetica",z.isBold?"bold":"normal"),S.setFontSize(z.fontSize);const X=Array.isArray(re)?re.join(`
`):re;return S.getTextDimensions(X,{maxWidth:z.width}).h};for(const re of E.actividades){let z=W(re.titulo,{fontSize:12,width:M,isBold:!0})+W(re.instrucciones,{fontSize:10,width:M})+12;te(z),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(0,0,0),S.text(re.titulo,k,Q),Q+=8,S.setFont("helvetica","normal"),S.setFontSize(10);const X=S.splitTextToSize(re.instrucciones,M);S.text(X,k,Q),Q+=X.length*(10*.35*1.15)+4;for(const[K,se]of re.items.entries()){let U=0;const Y=`${K+1}. ${se.pregunta} (${se.puntaje} pts)`;switch(U+=W(Y,{fontSize:10,width:M,isBold:!0}),se.tipo){case"Selección múltiple":se.opciones.forEach(de=>{U+=W(de,{fontSize:10,width:M-5})+3}),U+=7;break;case"Verdadero o Falso":U+=10;break;case"Desarrollo":U+=30;break;case"Términos pareados":U+=se.pares.length*12+20;break;case"Comprensión de lectura":const ne=se;U+=W(ne.texto,{fontSize:10,width:M-10})+10,ne.preguntas.forEach(de=>{const xe=`${de.pregunta} (${de.puntaje} pts)`;U+=W(xe,{fontSize:10,width:M-5,isBold:!0}),de.tipo==="Selección múltiple"?(de.opciones.forEach(Ae=>{U+=W(Ae,{fontSize:10,width:M-10})+3}),U+=7):de.tipo==="Desarrollo"&&(U+=30),U+=5}),U+=15;break}te(U),S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(0,0,0);const Z=S.splitTextToSize(Y,M);if(S.text(Z,k,Q),Q+=Z.length*5+4,S.setFont("helvetica","normal"),se.tipo==="Selección múltiple")se.opciones.forEach((ne,de)=>{S.text(`${String.fromCharCode(65+de)}) ${ne}`,k+5,Q),Q+=7});else if(se.tipo==="Verdadero o Falso")S.text("V ______    F ______",k+5,Q),Q+=10;else if(se.tipo==="Desarrollo")S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(k,Q,M,25,"FD"),Q+=30;else if(se.tipo==="Términos pareados"){const ne=[...se.pares.map(xe=>xe.definicion)].sort(()=>Math.random()-.5),de=se.pares.map((xe,Ae)=>[`${Ae+1}. ${xe.concepto}`,`(   ) ${ne[Ae]}`]);sc(S,{startY:Q,head:[["Columna A: Concepto","Columna B: Definición"]],body:de,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:xe=>V(S)}),Q=S.lastAutoTable.finalY+10}else if(se.tipo==="Comprensión de lectura"){const ne=se;S.setFillColor(240,240,240),S.setDrawColor(200,200,200);const de=S.splitTextToSize(ne.texto,M-10),xe=de.length*(10*.35*1.15)+8;S.rect(k,Q,M,xe,"FD"),Q+=4,S.setFont("helvetica","normal"),S.setFontSize(10),S.setTextColor(0,0,0),S.text(de,k+5,Q),Q+=xe;for(const[Ae,ae]of ne.preguntas.entries()){const ue=`${Ae+1}. ${ae.pregunta} (${ae.puntaje} pts)`;S.setFont("helvetica","bold");const le=S.splitTextToSize(ue,M-5);S.text(le,k+5,Q),Q+=le.length*5+4,S.setFont("helvetica","normal"),ae.tipo==="Selección múltiple"?ae.opciones.forEach((ie,De)=>{S.text(`${String.fromCharCode(65+De)}) ${ie}`,k+10,Q),Q+=7}):ae.tipo==="Desarrollo"&&(S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(k+5,Q,M-5,25,"FD"),Q+=30)}}Q+=5}}S.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>A(!u),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[d.jsx(a1e,{open:!u})," ",d.jsxs("span",{children:[u?"Ocultar":"Mostrar"," Respuestas"]})]}),d.jsx("button",{onClick:F,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),d.jsxs("button",{onClick:()=>D(r),disabled:s,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[s?"...":d.jsx(NY,{})," PDF"]})]})]}),d.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[d.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[d.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),d.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),d.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),d.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),d.jsxs("p",{className:"text-right",children:[d.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),d.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[d.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&d.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>d.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[d.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),d.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),d.jsx("div",{className:"space-y-6",children:E.items.map((S,k)=>d.jsx(i1e,{item:S,index:k,showAnswers:u},S.id))})]},E.id))]})]}):d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),d.jsxs("form",{onSubmit:N,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",name:"nombre",value:m.nombre,onChange:g,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),d.jsx("div",{}),d.jsx("select",{name:"asignatura",value:m.asignatura,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:cc.map(E=>d.jsx("option",{children:E},E))}),d.jsx("select",{name:"nivel",value:m.nivel,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:GE.map(E=>d.jsx("option",{children:E},E))})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),d.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,S)=>d.jsx("button",{type:"button",onClick:()=>v(k=>({...k,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${S===0?"rounded-l-lg":""} ${S===2?"rounded-r-lg":""}
                                            ${m.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:m.isNee,onChange:E=>v(S=>({...S,isNee:E.target.checked,selectedNee:E.target.checked?S.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),m.isNee&&d.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:qE.map(E=>d.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:m.selectedNee.includes(E),onChange:()=>T(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),d.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),d.jsx("textarea",{name:"contenido",value:m.contenido,onChange:g,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("div",{className:"space-y-3",children:n1e.map(E=>d.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:!!m.tiposActividad[E],onChange:()=>y(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),m.tiposActividad[E]&&d.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),j8[E].map(S=>d.jsx("button",{type:"button",onClick:()=>w(E,S),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${m.tiposActividad[E]===S?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:S},S))]})]},E))}),l&&d.jsx("p",{className:"text-red-500 text-sm",children:l}),d.jsx("div",{className:"text-right",children:d.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),d.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>d.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),d.jsx("button",{onClick:()=>B(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},o1e=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,i]=L.useState(null),[s,o]=L.useState("list"),[l,c]=L.useState(!1),[u,A]=L.useState(""),h=async(B,D)=>{if(!B.trim()||!D.trim()){alert("El título y la descripción son obligatorios.");return}c(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${B}" con el propósito de "${D}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{yA("Evaluación - Rúbricas");const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=(await(await new Wi(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),te=JSON.parse(V),W={id:crypto.randomUUID(),titulo:B,descripcion:D,fechaCreacion:new Date().toISOString(),dimensiones:te.map(re=>({id:crypto.randomUUID(),nombre:re.dimension,niveles:{insuficiente:re.insuficiente,suficiente:re.suficiente,competente:re.competente,avanzado:re.avanzado}}))};i(W)}catch(k){console.error(k),alert("Error al generar la rúbrica con IA.")}finally{c(!1)}},m=async()=>{if(!u.trim()||!a)return;const B=crypto.randomUUID(),D={id:B,nombre:u,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};i(k=>k?{...k,dimensiones:[...k.dimensiones,D]}:null),A("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${u}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(k=>k.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{yA("Evaluación - Rúbricas (Añadir Dimensión)");const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=(await(await new Wi(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),te=JSON.parse(V);i(W=>W?{...W,dimensiones:W.dimensiones.map(re=>re.id===B?{...re,niveles:te,isLoading:!1}:re)}:null)}catch(k){console.error("Error generating dimension descriptors:",k),alert("No se pudieron generar los descriptores."),i(H=>H?{...H,dimensiones:H.dimensiones.filter(P=>P.id!==B)}:null)}},v=()=>{if(!a)return;e.some(D=>D.id===a.id)?t(a):n(a),o("list"),i(null)},g=B=>{i(B),o("form")},y=()=>{i({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},w=(B,D,E)=>{a&&i(S=>S?{...S,dimensiones:S.dimensiones.map(k=>k.id!==B?k:D==="nombre"?{...k,nombre:E}:{...k,niveles:{...k.niveles,[D]:E}})}:null)},T=(B,D)=>{i(E=>E?{...E,[B]:D}:null)},N=B=>{a&&i(D=>D?{...D,dimensiones:D.dimensiones.filter(E=>E.id!==B)}:null)},F=()=>{if(!a)return null;const B="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",D=`${B} resize-none text-sm`;return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),d.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),d.jsx("input",{value:a.titulo,onChange:E=>T("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${B} mt-1`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),d.jsx("textarea",{value:a.descripcion,onChange:E=>T("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${B} mt-1`})]})]}),a.dimensiones.length===0&&d.jsx("div",{className:"text-center py-4",children:d.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),d.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:d.jsxs("table",{className:"min-w-full text-sm",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:d.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>d.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),d.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 w-1/5",children:d.jsx("textarea",{value:E.nombre,onChange:S=>w(E.id,"nombre",S.target.value),rows:4,className:D})}),Object.keys(E.niveles).map(S=>d.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?d.jsx("div",{className:"flex justify-center items-center h-full",children:d.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):d.jsx("textarea",{value:E.niveles[S],onChange:k=>w(E.id,S,k.target.value),rows:4,className:D})},S)),d.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:d.jsx("button",{onClick:()=>N(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),d.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[d.jsxs("div",{className:"flex-grow",children:[d.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),d.jsx("input",{value:u,onChange:E=>A(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${B} mt-1`})]}),d.jsx("button",{onClick:m,disabled:!u.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),d.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:d.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return s==="list"?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),d.jsx("button",{onClick:y,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(B=>d.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:B.descripcion})]}),d.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[d.jsx("button",{onClick:()=>g(B),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),d.jsx("button",{onClick:()=>r(B.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},B.id)):d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):F()},l1e=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=L.useState([]),[a,i]=L.useState(null),[s,o]=L.useState(null),[l,c]=L.useState({rubricaEstaticaId:"",curso:""}),[u,A]=L.useState(null);L.useEffect(()=>{const T=Zxe(n);return()=>T()},[]);const h=async T=>{T.preventDefault();const N=t.find(B=>B.id===l.rubricaEstaticaId);if(!N||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const F={nombre:N.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:N.id,resultados:{}};try{await t1e(F),c({rubricaEstaticaId:"",curso:""})}catch(B){console.error(B),alert("No se pudo crear la evaluación con rúbrica.")}},m=T=>{i(T),o(JSON.parse(JSON.stringify(T)))},v=(T,N,F)=>{s&&o(B=>{if(!B)return null;const D=JSON.parse(JSON.stringify(B));return D.resultados[T]||(D.resultados[T]={puntajes:{},feedback:""}),D.resultados[T].puntajes[N]=F,D})},g=async()=>{if(s)try{await e1e(s),i(s),alert("Cambios guardados.")}catch(T){console.error(T),alert("No se pudieron guardar los cambios.")}},y=L.useCallback(T=>{const N=s,F=t.find(H=>H.id===(N==null?void 0:N.rubricaEstaticaId));if(!N||!F)return{score:0,maxScore:0,grade:"N/A"};const B=F.dimensiones.length*4,D=N.resultados[T];if(!D)return{score:0,maxScore:B,grade:"1.0"};const E=Object.values(D.puntajes).reduce((H,P)=>H+P,0),S=1+6*(E/B),k=B>0?S.toFixed(1):"1.0";return{score:E,maxScore:B,grade:k}},[s,t]),w=async T=>{if(!s)return;const N=t.find(E=>E.id===s.rubricaEstaticaId),F=s.resultados[T];if(!N||!F||Object.keys(F.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}A(T);const D=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${N.dimensiones.map(E=>`${E.nombre}: ${F.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${N.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{yA("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new Wi(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(D)).response).text();o(Q=>{if(!Q)return null;const V=JSON.parse(JSON.stringify(Q));return V.resultados[T].feedback=M.replace(/(\*\*|\*)/g,""),V})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{A(null)}};if(a&&s){const T=t.find(F=>F.id===a.rubricaEstaticaId),N=e.filter(F=>F.profile===Ht.ESTUDIANTE&&JC(F.curso||"")===a.curso).map(F=>F.nombreCompleto).sort();return T?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),d.jsx("p",{className:"text-slate-500",children:a.curso})]}),d.jsx("button",{onClick:()=>i(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full border-collapse",children:[d.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),T.dimensiones.map(F=>d.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:F.nombre},F.id)),d.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),d.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),d.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),d.jsx("tbody",{children:N.map(F=>{var S;const{score:B,maxScore:D,grade:E}=y(F);return d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[d.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:F}),T.dimensiones.map(k=>d.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:d.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(H=>{var P;return d.jsx("button",{onClick:()=>v(F,k.id,H),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((P=s.resultados[F])==null?void 0:P.puntajes[k.id])===H?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:H},H)})})},k.id)),d.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[B,"/",D]}),d.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),d.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:d.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[d.jsx("p",{className:"text-xs w-full",children:((S=s.resultados[F])==null?void 0:S.feedback)||"Sin generar"}),d.jsx("button",{onClick:()=>w(F),disabled:u===F,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:u===F?"...":"Generar IA"})]})})]},F)})})]})}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):d.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",d.jsx("button",{onClick:()=>i(null),children:"Volver"})]})}return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),d.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[d.jsxs("select",{value:l.rubricaEstaticaId,onChange:T=>c({...l,rubricaEstaticaId:T.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[d.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(T=>d.jsx("option",{value:T.id,children:T.titulo},T.id))]}),d.jsxs("select",{value:l.curso,onChange:T=>c({...l,curso:T.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[d.jsx("option",{value:"",children:"Seleccione un Curso"}),Ni.map(T=>d.jsx("option",{value:T,children:T},T))]}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),d.jsx("div",{className:"space-y-2",children:r.map(T=>d.jsxs("button",{onClick:()=>m(T),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[d.jsx("p",{className:"font-semibold",children:T.nombre}),d.jsx("p",{className:"text-sm text-slate-500",children:T.curso})]},T.id))})]})]})},c1e=({allUsers:e})=>{const[t,r]=L.useState(""),n=L.useMemo(()=>Array.from(new Set(e.filter(i=>i.profile===Ht.ESTUDIANTE&&i.curso).map(i=>JC(i.curso)))).sort(),[e]),a=L.useMemo(()=>{const i=e.filter(s=>s.profile===Ht.ESTUDIANTE);return t?i.filter(s=>JC(s.curso||"")===t).sort((s,o)=>s.nombreCompleto.localeCompare(o.nombreCompleto)):i.sort((s,o)=>s.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),d.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",d.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),d.jsxs("select",{id:"curso-filter",value:t,onChange:i=>r(i.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(i=>d.jsx("option",{value:i,children:i},i))]})]}),d.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(i=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:i.nombreCompleto}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:JC(i.curso||"")}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:i.email})]},i.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},u1e=()=>{const[e,t]=L.useState("pruebas"),[r,n]=L.useState([]),[a,i]=L.useState([]),[s,o]=L.useState(!0);L.useEffect(()=>{o(!0);const A=r1e(n),h=Yxe(m=>{i(m),o(!1)});return()=>{A(),h()}},[]);const l=async A=>{try{await Xxe(A)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},c=async A=>{try{await Jxe(A)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},u=({tabName:A,label:h})=>d.jsx("button",{onClick:()=>t(A),className:`${e===A?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return s?d.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),d.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:d.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[d.jsx(u,{tabName:"pruebas",label:"Pruebas y Guías"}),d.jsx(u,{tabName:"rubricas",label:"Generador de Rúbricas"}),d.jsx(u,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),d.jsx(u,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),d.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&d.jsx(s1e,{}),e==="rubricas"&&d.jsx(o1e,{rubricas:a,onSave:l,onDelete:c,onCreate:l}),e==="rubricasInteractivas"&&d.jsx(l1e,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&d.jsx(c1e,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var JE={};JE.version="0.18.5";var EX=1252,d1e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],kR={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},IR=function(e){d1e.indexOf(e)!=-1&&(EX=kR[0]=e)};function f1e(){IR(1252)}var Wu=function(e){IR(e)};function FR(){Wu(1200),f1e()}function H8(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function A1e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function _X(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var M1=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?A1e(e.slice(2)):t==254&&r==255?_X(e.slice(2)):t==65279?e.slice(1):e},E2=function(t){return String.fromCharCode(t)},Q8=function(t){return String.fromCharCode(t)},Oy,zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Uy(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0,l=0,c=0;c<e.length;)r=e.charCodeAt(c++),i=r>>2,n=e.charCodeAt(c++),s=(r&3)<<4|n>>4,a=e.charCodeAt(c++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=zh.charAt(i)+zh.charAt(s)+zh.charAt(o)+zh.charAt(l);return t}function uc(e){var t="",r=0,n=0,a=0,i=0,s=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)i=zh.indexOf(e.charAt(c++)),s=zh.indexOf(e.charAt(c++)),r=i<<2|s>>4,t+=String.fromCharCode(r),o=zh.indexOf(e.charAt(c++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=zh.indexOf(e.charAt(c++)),a=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(a));return t}var nn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),FA=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function x0(e){return nn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function V8(e){return nn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var tc=function(t){return nn?FA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function lT(e){if(typeof ArrayBuffer>"u")return tc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function N0(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function h1e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function DR(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return DR(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Bs=nn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:FA(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function p1e(e){for(var t=[],r=0,n=e.length+250,a=x0(e.length+255),i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s<128)a[r++]=s;else if(s<2048)a[r++]=192|s>>6&31,a[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++i)&1023;a[r++]=240|s>>8&7,a[r++]=128|s>>2&63,a[r++]=128|o>>6&15|(s&3)<<4,a[r++]=128|o&63}else a[r++]=224|s>>12&15,a[r++]=128|s>>6&63,a[r++]=128|s&63;r>n&&(t.push(a.slice(0,r)),r=0,a=x0(65535),n=65530)}return t.push(a.slice(0,r)),Bs(t)}var Xo=/\u0000/g,L1=/[\u0001-\u0006]/g;function tv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Yu(e,t){var r=""+e;return r.length>=t?r:ci("0",t-r.length)+r}function RR(e,t){var r=""+e;return r.length>=t?r:ci(" ",t-r.length)+r}function ZE(e,t){var r=""+e;return r.length>=t?r:r+ci(" ",t-r.length)}function m1e(e,t){var r=""+Math.round(e);return r.length>=t?r:ci("0",t-r.length)+r}function g1e(e,t){var r=""+e;return r.length>=t?r:ci("0",t-r.length)+r}var z8=Math.pow(2,32);function sg(e,t){if(e>z8||e<-z8)return m1e(e,t);var r=Math.round(e);return g1e(r,t)}function e_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var G8=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],CB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function v1e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Nr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},q8={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},x1e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function t_(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,s=1,o=0,l=1,c=0,u=0,A=Math.floor(a);c<t&&(A=Math.floor(a),o=A*s+i,u=A*c+l,!(a-A<5e-8));)a=1/(a-A),i=s,s=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=i):(u=c,o=s)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function yp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,s=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=_1e(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}var SX=new Date(1899,11,31,0,0,0),y1e=SX.getTime(),b1e=new Date(1900,2,1,0,0,0);function TX(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=b1e&&(r+=1440*60*1e3),(r-(y1e+(e.getTimezoneOffset()-SX.getTimezoneOffset())*6e4))/(1440*60*1e3)}function PR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function w1e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function C1e(e){var t=e<0?12:11,r=PR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function E1e(e){var t=PR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function jy(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=C1e(e):t===10?r=e.toFixed(10).substr(0,12):r=E1e(e),PR(w1e(r.toUpperCase()))}function Xp(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):jy(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return du(14,TX(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function _1e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function S1e(e,t,r,n){var a="",i=0,s=0,o=r.y,l,c=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,c=t.length;break;case 3:return CB[r.m-1][1];case 5:return CB[r.m-1][0];default:return CB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,c=t.length;break;case 3:return G8[r.q][0];default:return G8[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Yu(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(r.S+r.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=Yu(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?Yu(l,c):"";return u}function Gh(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var NX=/%/g;function T1e(e,t,r){var n=t.replace(NX,""),a=t.length-n.length;return cA(e,n,r*Math.pow(10,2*a))+ci("%",a)}function N1e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return cA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function BX(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+BX(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var kX=/# (\?+)( ?)\/( ?)(\d+)/;function B1e(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,o=n;return r+(i===0?"":""+i)+" "+(s===0?ci(" ",e[1].length+1+e[4].length):RR(s,e[1].length)+e[2]+"/"+e[3]+Yu(o,e[4].length))}function k1e(e,t,r){return r+(t===0?"":""+t)+ci(" ",e[1].length+2+e[4].length)}var IX=/^#*0*\.([0#]+)/,FX=/\).*[0#]/,DX=/\(###\) ###\\?-####/;function qo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function $8(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function K8(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function I1e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function F1e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function qc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(FX)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?qc("n",n,r):"("+qc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return N1e(e,t,r);if(t.indexOf("%")!==-1)return T1e(e,t,r);if(t.indexOf("E")!==-1)return BX(t,r);if(t.charCodeAt(0)===36)return"$"+qc(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+sg(l,t.length);if(t.match(/^[#?]+$/))return a=sg(r,0),a==="0"&&(a=""),a.length>t.length?a:qo(t.substr(0,t.length-a.length))+a;if(i=t.match(kX))return B1e(i,l,c);if(t.match(/^#+0+$/))return c+sg(l,t.length-t.indexOf("0"));if(i=t.match(IX))return a=$8(r,i[1].length).replace(/^([^\.]+)$/,"$1."+qo(i[1])).replace(/\.$/,"."+qo(i[1])).replace(/\.(\d*)$/,function(v,g){return"."+g+ci("0",qo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return c+$8(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return c+Gh(sg(l,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+qc(e,t,-r):Gh(""+(Math.floor(r)+I1e(r,i[1].length)))+"."+Yu(K8(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return qc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=tv(qc(e,t.replace(/[\\-]/g,""),r)),s=0,tv(tv(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(DX))return a=qc(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=t_(l,Math.pow(10,s)-1,!1),a=""+c,u=cA("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=ZE(o[2],s),u.length<i[4].length&&(u=qo(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=t_(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RR(o[1],s)+i[2]+"/"+i[3]+ZE(o[2],s):ci(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=sg(r,0),t.length<=a.length?a:qo(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var A=t.indexOf(".")-s,h=t.length-a.length-A;return qo(t.substr(0,A)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=K8(r,i[1].length),r<0?"-"+qc(e,t,-r):Gh(F1e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Yu(0,3-v.length):"")+v})+"."+Yu(s,i[1].length);switch(t){case"###,##0.00":return qc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Gh(sg(l,0));return m!=="0"?c+m:"";case"###,###.00":return qc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return qc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function D1e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return cA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function R1e(e,t,r){var n=t.replace(NX,""),a=t.length-n.length;return cA(e,n,r*Math.pow(10,2*a))+ci("%",a)}function RX(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+RX(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Qd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(FX)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Qd("n",n,r):"("+Qd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return D1e(e,t,r);if(t.indexOf("%")!==-1)return R1e(e,t,r);if(t.indexOf("E")!==-1)return RX(t,r);if(t.charCodeAt(0)===36)return"$"+Qd(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Yu(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:qo(t.substr(0,t.length-a.length))+a;if(i=t.match(kX))return k1e(i,l,c);if(t.match(/^#+0+$/))return c+Yu(l,t.length-t.indexOf("0"));if(i=t.match(IX))return a=(""+r).replace(/^([^\.]+)$/,"$1."+qo(i[1])).replace(/\.$/,"."+qo(i[1])),a=a.replace(/\.(\d*)$/,function(v,g){return"."+g+ci("0",qo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return c+Gh(""+l);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Qd(e,t,-r):Gh(""+r)+"."+ci("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Qd(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=tv(Qd(e,t.replace(/[\\-]/g,""),r)),s=0,tv(tv(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return s<a.length?a.charAt(s++):v==="0"?"0":""}));if(t.match(DX))return a=Qd(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=t_(l,Math.pow(10,s)-1,!1),a=""+c,u=cA("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=ZE(o[2],s),u.length<i[4].length&&(u=qo(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=t_(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RR(o[1],s)+i[2]+"/"+i[3]+ZE(o[2],s):ci(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:qo(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var A=t.indexOf(".")-s,h=t.length-a.length-A;return qo(t.substr(0,A)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Qd(e,t,-r):Gh(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Yu(0,3-v.length):"")+v})+"."+Yu(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Gh(""+l);return m!=="0"?c+m:"";default:if(t.match(/\.[0#?]*$/))return Qd(e,t.slice(0,t.lastIndexOf(".")),r)+qo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function cA(e,t,r){return(r|0)===r?Qd(e,t,r):qc(e,t,r)}function P1e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var PX=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ex(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":e_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(PX))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function M1e(e,t,r,n){for(var a=[],i="",s=0,o="",l="t",c,u,A,h="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!e_(e,s))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(A=e.charCodeAt(++s))!==34&&s<e.length;)i+=String.fromCharCode(A);a[a.length]={t:"t",v:i},++s;break;case"\\":var m=e.charAt(++s),v=m==="("||m===")"?m:"t";a[a.length]={t:v,v:m},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(c==null&&(c=yp(t,r,e.charAt(s+1)==="2"),c==null))return"";a[a.length]={t:"X",v:e.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=yp(t,r),c==null))return"";for(i=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:i},l=o;break;case"A":case"a":case"上":var g={t:o,v:o};if(c==null&&(c=yp(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?"P":"A"),g.t="T",h="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",s+=5,h="h"):e.substr(s,5).toUpperCase()==="上午/下午"?(c!=null&&(g.v=c.H>=12?"下午":"上午"),g.t="T",s+=5,h="h"):(g.t="t",++s),c==null&&g.t==="T")return"";a[a.length]=g,l=o;break;case"[":for(i=o;e.charAt(s++)!=="]"&&s<e.length;)i+=e.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(PX)){if(c==null&&(c=yp(t,r),c==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",ex(e)||(a[a.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++s<e.length&&(o=e.charAt(s))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++s)===o;)i+=o;a[a.length]={t:o,v:i},l=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)i+=e.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++s;break}var y=0,w=0,T;for(s=a.length-1,l="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=h,l="h",y<1&&(y=1);break;case"s":(T=a[s].v.match(/\.0+$/))&&(w=Math.max(w,T[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":l=a[s].t;break;case"m":l==="s"&&(a[s].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&a[s].v.match(/[Hh]/)&&(y=1),y<2&&a[s].v.match(/[Mm]/)&&(y=2),y<3&&a[s].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var N="",F;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=S1e(a[s].t.charCodeAt(0),a[s].v,c,w),a[s].t="t";break;case"n":case"?":for(F=s+1;a[F]!=null&&((o=a[F].t)==="?"||o==="D"||(o===" "||o==="t")&&a[F+1]!=null&&(a[F+1].t==="?"||a[F+1].t==="t"&&a[F+1].v==="/")||a[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[F].v==="/"||a[F].v===" "&&a[F+1]!=null&&a[F+1].t=="?"));)a[s].v+=a[F].v,a[F]={v:"",t:";"},++F;N+=a[s].v,s=F-1;break;case"G":a[s].t="t",a[s].v=Xp(t,r);break}var B="",D,E;if(N.length>0){N.charCodeAt(0)==40?(D=t<0&&N.charCodeAt(0)===45?-t:t,E=cA("n",N,D)):(D=t<0&&n>1?-t:t,E=cA("n",N,D),D<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),F=E.length-1;var S=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){S=s;break}var k=a.length;if(S===a.length&&E.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(F>=a[s].v.length-1?(F-=a[s].v.length,a[s].v=E.substr(F+1,a[s].v.length)):F<0?a[s].v="":(a[s].v=E.substr(0,F+1),F=-1),a[s].t="t",k=s);F>=0&&k<a.length&&(a[k].v=E.substr(0,F+1)+a[k].v)}else if(S!==a.length&&E.indexOf("E")===-1){for(F=E.indexOf(".")-1,s=S;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(u=a[s].v.indexOf(".")>-1&&s===S?a[s].v.indexOf(".")-1:a[s].v.length-1,B=a[s].v.substr(u+1);u>=0;--u)F>=0&&(a[s].v.charAt(u)==="0"||a[s].v.charAt(u)==="#")&&(B=E.charAt(F--)+B);a[s].v=B,a[s].t="t",k=s}for(F>=0&&k<a.length&&(a[k].v=E.substr(0,F+1)+a[k].v),F=E.indexOf(".")+1,s=S;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==S)){for(u=a[s].v.indexOf(".")>-1&&s===S?a[s].v.indexOf(".")+1:0,B=a[s].v.substr(0,u);u<a[s].v.length;++u)F<E.length&&(B+=E.charAt(F++));a[s].v=B,a[s].t="t",k=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(D=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=cA(a[s].t,a[s].v,D),a[s].t="t");var H="";for(s=0;s!==a.length;++s)a[s]!=null&&(H+=a[s].v);return H}var W8=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Y8(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function L1e(e,t){var r=P1e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(W8),o=r[1].match(W8);return Y8(t,s)?[n,r[0]]:Y8(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,i]}function du(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Nr)[e],n==null&&(n=r.table&&r.table[q8[e]]||Nr[q8[e]]),n==null&&(n=x1e[e]||"General");break}if(e_(n,0))return Xp(t,r);t instanceof Date&&(t=TX(t,r.date1904));var a=L1e(n,t);if(e_(a[1]))return Xp(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return M1e(a[1],t,r,a[0])}function uA(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Nr[r]==null){t<0&&(t=r);continue}if(Nr[r]==e){t=r;break}}t<0&&(t=391)}return Nr[t]=e,t}function cT(e){for(var t=0;t!=392;++t)e[t]!==void 0&&uA(e[t],t)}function tx(){Nr=v1e()}var O1e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},MX=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function U1e(e){var t=typeof e=="number"?Nr[e]:e;return t=t.replace(MX,"(\\d+)"),new RegExp("^"+t+"$")}function j1e(e,t,r){var n=-1,a=-1,i=-1,s=-1,o=-1,l=-1;(t.match(MX)||[]).forEach(function(A,h){var m=parseInt(r[h+1],10);switch(A.toLowerCase().charAt(0)){case"y":n=m;break;case"d":i=m;break;case"h":s=m;break;case"s":l=m;break;case"m":s>=0?o=m:a=m;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?c:n==-1&&a==-1&&i==-1?u:c+"T"+u}var H1e=function(){var e={};e.version="1.2.0";function t(){for(var E=0,S=new Array(256),k=0;k!=256;++k)E=k,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,S[k]=E;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function n(E){var S=0,k=0,H=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(H=0;H!=256;++H)P[H]=E[H];for(H=0;H!=256;++H)for(k=E[H],S=256+H;S<4096;S+=256)k=P[S]=k>>>8^E[k&255];var M=[];for(H=1;H!=16;++H)M[H-1]=typeof Int32Array<"u"?P.subarray(H*256,H*256+256):P.slice(H*256,H*256+256);return M}var a=n(r),i=a[0],s=a[1],o=a[2],l=a[3],c=a[4],u=a[5],A=a[6],h=a[7],m=a[8],v=a[9],g=a[10],y=a[11],w=a[12],T=a[13],N=a[14];function F(E,S){for(var k=S^-1,H=0,P=E.length;H<P;)k=k>>>8^r[(k^E.charCodeAt(H++))&255];return~k}function B(E,S){for(var k=S^-1,H=E.length-15,P=0;P<H;)k=N[E[P++]^k&255]^T[E[P++]^k>>8&255]^w[E[P++]^k>>16&255]^y[E[P++]^k>>>24]^g[E[P++]]^v[E[P++]]^m[E[P++]]^h[E[P++]]^A[E[P++]]^u[E[P++]]^c[E[P++]]^l[E[P++]]^o[E[P++]]^s[E[P++]]^i[E[P++]]^r[E[P++]];for(H+=15;P<H;)k=k>>>8^r[(k^E[P++])&255];return~k}function D(E,S){for(var k=S^-1,H=0,P=E.length,M=0,Q=0;H<P;)M=E.charCodeAt(H++),M<128?k=k>>>8^r[(k^M)&255]:M<2048?(k=k>>>8^r[(k^(192|M>>6&31))&255],k=k>>>8^r[(k^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,Q=E.charCodeAt(H++)&1023,k=k>>>8^r[(k^(240|M>>8&7))&255],k=k>>>8^r[(k^(128|M>>2&63))&255],k=k>>>8^r[(k^(128|Q>>6&15|(M&3)<<4))&255],k=k>>>8^r[(k^(128|Q&63))&255]):(k=k>>>8^r[(k^(224|M>>12&15))&255],k=k>>>8^r[(k^(128|M>>6&63))&255],k=k>>>8^r[(k^(128|M&63))&255]);return~k}return e.table=r,e.bstr=F,e.buf=B,e.str=D,e}(),hr=function(){var t={};t.version="1.2.1";function r(me,ke){for(var _e=me.split("/"),Se=ke.split("/"),Te=0,Ie=0,Ke=Math.min(_e.length,Se.length);Te<Ke;++Te){if(Ie=_e[Te].length-Se[Te].length)return Ie;if(_e[Te]!=Se[Te])return _e[Te]<Se[Te]?-1:1}return _e.length-Se.length}function n(me){if(me.charAt(me.length-1)=="/")return me.slice(0,-1).indexOf("/")===-1?me:n(me.slice(0,-1));var ke=me.lastIndexOf("/");return ke===-1?me:me.slice(0,ke+1)}function a(me){if(me.charAt(me.length-1)=="/")return a(me.slice(0,-1));var ke=me.lastIndexOf("/");return ke===-1?me:me.slice(ke+1)}function i(me,ke){typeof ke=="string"&&(ke=new Date(ke));var _e=ke.getHours();_e=_e<<6|ke.getMinutes(),_e=_e<<5|ke.getSeconds()>>>1,me.write_shift(2,_e);var Se=ke.getFullYear()-1980;Se=Se<<4|ke.getMonth()+1,Se=Se<<5|ke.getDate(),me.write_shift(2,Se)}function s(me){var ke=me.read_shift(2)&65535,_e=me.read_shift(2)&65535,Se=new Date,Te=_e&31;_e>>>=5;var Ie=_e&15;_e>>>=4,Se.setMilliseconds(0),Se.setFullYear(_e+1980),Se.setMonth(Ie-1),Se.setDate(Te);var Ke=ke&31;ke>>>=5;var nt=ke&63;return ke>>>=6,Se.setHours(ke),Se.setMinutes(nt),Se.setSeconds(Ke<<1),Se}function o(me){Ys(me,0);for(var ke={},_e=0;me.l<=me.length-4;){var Se=me.read_shift(2),Te=me.read_shift(2),Ie=me.l+Te,Ke={};switch(Se){case 21589:_e=me.read_shift(1),_e&1&&(Ke.mtime=me.read_shift(4)),Te>5&&(_e&2&&(Ke.atime=me.read_shift(4)),_e&4&&(Ke.ctime=me.read_shift(4))),Ke.mtime&&(Ke.mt=new Date(Ke.mtime*1e3));break}me.l=Ie,ke[Se]=Ke}return ke}var l;function c(){return l||(l={})}function u(me,ke){if(me[0]==80&&me[1]==75)return dn(me,ke);if((me[0]|32)==109&&(me[1]|32)==105)return Zi(me,ke);if(me.length<512)throw new Error("CFB file size "+me.length+" < 512");var _e=3,Se=512,Te=0,Ie=0,Ke=0,nt=0,ze=0,Xe=[],et=me.slice(0,512);Ys(et,0);var bt=A(et);switch(_e=bt[0],_e){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(bt[1]==0)return dn(me,ke);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}Se!==512&&(et=me.slice(0,Se),Ys(et,28));var kt=me.slice(0,Se);h(et,_e);var Vt=et.read_shift(4,"i");if(_e===3&&Vt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Vt);et.l+=4,Ke=et.read_shift(4,"i"),et.l+=4,et.chk("00100000","Mini Stream Cutoff Size: "),nt=et.read_shift(4,"i"),Te=et.read_shift(4,"i"),ze=et.read_shift(4,"i"),Ie=et.read_shift(4,"i");for(var Bt=-1,Lt=0;Lt<109&&(Bt=et.read_shift(4,"i"),!(Bt<0));++Lt)Xe[Lt]=Bt;var mr=m(me,Se);y(ze,Ie,mr,Se,Xe);var qr=T(mr,Ke,Xe,Se);qr[Ke].name="!Directory",Te>0&&nt!==Q&&(qr[nt].name="!MiniFAT"),qr[Xe[0]].name="!FAT",qr.fat_addrs=Xe,qr.ssz=Se;var $r={},Jr=[],Ja=[],no=[];N(Ke,qr,mr,Jr,Te,$r,Ja,nt),v(Ja,no,Jr),Jr.shift();var Za={FileIndex:Ja,FullPaths:no};return ke&&ke.raw&&(Za.raw={header:kt,sectors:mr}),Za}function A(me){if(me[me.l]==80&&me[me.l+1]==75)return[0,0];me.chk(V,"Header Signature: "),me.l+=16;var ke=me.read_shift(2,"u");return[me.read_shift(2,"u"),ke]}function h(me,ke){var _e=9;switch(me.l+=2,_e=me.read_shift(2)){case 9:if(ke!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(ke!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}me.chk("0600","Mini Sector Shift: "),me.chk("000000000000","Reserved: ")}function m(me,ke){for(var _e=Math.ceil(me.length/ke)-1,Se=[],Te=1;Te<_e;++Te)Se[Te-1]=me.slice(Te*ke,(Te+1)*ke);return Se[_e-1]=me.slice(_e*ke),Se}function v(me,ke,_e){for(var Se=0,Te=0,Ie=0,Ke=0,nt=0,ze=_e.length,Xe=[],et=[];Se<ze;++Se)Xe[Se]=et[Se]=Se,ke[Se]=_e[Se];for(;nt<et.length;++nt)Se=et[nt],Te=me[Se].L,Ie=me[Se].R,Ke=me[Se].C,Xe[Se]===Se&&(Te!==-1&&Xe[Te]!==Te&&(Xe[Se]=Xe[Te]),Ie!==-1&&Xe[Ie]!==Ie&&(Xe[Se]=Xe[Ie])),Ke!==-1&&(Xe[Ke]=Se),Te!==-1&&Se!=Xe[Se]&&(Xe[Te]=Xe[Se],et.lastIndexOf(Te)<nt&&et.push(Te)),Ie!==-1&&Se!=Xe[Se]&&(Xe[Ie]=Xe[Se],et.lastIndexOf(Ie)<nt&&et.push(Ie));for(Se=1;Se<ze;++Se)Xe[Se]===Se&&(Ie!==-1&&Xe[Ie]!==Ie?Xe[Se]=Xe[Ie]:Te!==-1&&Xe[Te]!==Te&&(Xe[Se]=Xe[Te]));for(Se=1;Se<ze;++Se)if(me[Se].type!==0){if(nt=Se,nt!=Xe[nt])do nt=Xe[nt],ke[Se]=ke[nt]+"/"+ke[Se];while(nt!==0&&Xe[nt]!==-1&&nt!=Xe[nt]);Xe[Se]=-1}for(ke[0]+="/",Se=1;Se<ze;++Se)me[Se].type!==2&&(ke[Se]+="/")}function g(me,ke,_e){for(var Se=me.start,Te=me.size,Ie=[],Ke=Se;_e&&Te>0&&Ke>=0;)Ie.push(ke.slice(Ke*M,Ke*M+M)),Te-=M,Ke=mp(_e,Ke*4);return Ie.length===0?dt(0):Bs(Ie).slice(0,me.size)}function y(me,ke,_e,Se,Te){var Ie=Q;if(me===Q){if(ke!==0)throw new Error("DIFAT chain shorter than expected")}else if(me!==-1){var Ke=_e[me],nt=(Se>>>2)-1;if(!Ke)return;for(var ze=0;ze<nt&&(Ie=mp(Ke,ze*4))!==Q;++ze)Te.push(Ie);y(mp(Ke,Se-4),ke-1,_e,Se,Te)}}function w(me,ke,_e,Se,Te){var Ie=[],Ke=[];Te||(Te=[]);var nt=Se-1,ze=0,Xe=0;for(ze=ke;ze>=0;){Te[ze]=!0,Ie[Ie.length]=ze,Ke.push(me[ze]);var et=_e[Math.floor(ze*4/Se)];if(Xe=ze*4&nt,Se<4+Xe)throw new Error("FAT boundary crossed: "+ze+" 4 "+Se);if(!me[et])break;ze=mp(me[et],Xe)}return{nodes:Ie,data:l7([Ke])}}function T(me,ke,_e,Se){var Te=me.length,Ie=[],Ke=[],nt=[],ze=[],Xe=Se-1,et=0,bt=0,kt=0,Vt=0;for(et=0;et<Te;++et)if(nt=[],kt=et+ke,kt>=Te&&(kt-=Te),!Ke[kt]){ze=[];var Bt=[];for(bt=kt;bt>=0;){Bt[bt]=!0,Ke[bt]=!0,nt[nt.length]=bt,ze.push(me[bt]);var Lt=_e[Math.floor(bt*4/Se)];if(Vt=bt*4&Xe,Se<4+Vt)throw new Error("FAT boundary crossed: "+bt+" 4 "+Se);if(!me[Lt]||(bt=mp(me[Lt],Vt),Bt[bt]))break}Ie[kt]={nodes:nt,data:l7([ze])}}return Ie}function N(me,ke,_e,Se,Te,Ie,Ke,nt){for(var ze=0,Xe=Se.length?2:0,et=ke[me].data,bt=0,kt=0,Vt;bt<et.length;bt+=128){var Bt=et.slice(bt,bt+128);Ys(Bt,64),kt=Bt.read_shift(2),Vt=QR(Bt,0,kt-Xe),Se.push(Vt);var Lt={name:Vt,type:Bt.read_shift(1),color:Bt.read_shift(1),L:Bt.read_shift(4,"i"),R:Bt.read_shift(4,"i"),C:Bt.read_shift(4,"i"),clsid:Bt.read_shift(16),state:Bt.read_shift(4,"i"),start:0,size:0},mr=Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2);mr!==0&&(Lt.ct=F(Bt,Bt.l-8));var qr=Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2)+Bt.read_shift(2);qr!==0&&(Lt.mt=F(Bt,Bt.l-8)),Lt.start=Bt.read_shift(4,"i"),Lt.size=Bt.read_shift(4,"i"),Lt.size<0&&Lt.start<0&&(Lt.size=Lt.type=0,Lt.start=Q,Lt.name=""),Lt.type===5?(ze=Lt.start,Te>0&&ze!==Q&&(ke[ze].name="!StreamData")):Lt.size>=4096?(Lt.storage="fat",ke[Lt.start]===void 0&&(ke[Lt.start]=w(_e,Lt.start,ke.fat_addrs,ke.ssz)),ke[Lt.start].name=Lt.name,Lt.content=ke[Lt.start].data.slice(0,Lt.size)):(Lt.storage="minifat",Lt.size<0?Lt.size=0:ze!==Q&&Lt.start!==Q&&ke[ze]&&(Lt.content=g(Lt,ke[ze].data,(ke[nt]||{}).data))),Lt.content&&Ys(Lt.content,0),Ie[Vt]=Lt,Ke.push(Lt)}}function F(me,ke){return new Date((Zl(me,ke+4)/1e7*Math.pow(2,32)+Zl(me,ke)/1e7-11644473600)*1e3)}function B(me,ke){return c(),u(l.readFileSync(me),ke)}function D(me,ke){var _e=ke&&ke.type;switch(_e||nn&&Buffer.isBuffer(me)&&(_e="buffer"),_e||"base64"){case"file":return B(me,ke);case"base64":return u(tc(uc(me)),ke);case"binary":return u(tc(me),ke)}return u(me,ke)}function E(me,ke){var _e=ke||{},Se=_e.root||"Root Entry";if(me.FullPaths||(me.FullPaths=[]),me.FileIndex||(me.FileIndex=[]),me.FullPaths.length!==me.FileIndex.length)throw new Error("inconsistent CFB structure");me.FullPaths.length===0&&(me.FullPaths[0]=Se+"/",me.FileIndex[0]={name:Se,type:5}),_e.CLSID&&(me.FileIndex[0].clsid=_e.CLSID),S(me)}function S(me){var ke="Sh33tJ5";if(!hr.find(me,"/"+ke)){var _e=dt(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,me.FileIndex.push({name:ke,type:2,content:_e,size:4,L:69,R:69,C:69}),me.FullPaths.push(me.FullPaths[0]+ke),k(me)}}function k(me,ke){E(me);for(var _e=!1,Se=!1,Te=me.FullPaths.length-1;Te>=0;--Te){var Ie=me.FileIndex[Te];switch(Ie.type){case 0:Se?_e=!0:(me.FileIndex.pop(),me.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(Ie.R*Ie.L*Ie.C)&&(_e=!0),Ie.R>-1&&Ie.L>-1&&Ie.R==Ie.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!ke)){var Ke=new Date(1987,1,19),nt=0,ze=Object.create?Object.create(null):{},Xe=[];for(Te=0;Te<me.FullPaths.length;++Te)ze[me.FullPaths[Te]]=!0,me.FileIndex[Te].type!==0&&Xe.push([me.FullPaths[Te],me.FileIndex[Te]]);for(Te=0;Te<Xe.length;++Te){var et=n(Xe[Te][0]);Se=ze[et],Se||(Xe.push([et,{name:a(et).replace("/",""),type:1,clsid:W,ct:Ke,mt:Ke,content:null}]),ze[et]=!0)}for(Xe.sort(function(Vt,Bt){return r(Vt[0],Bt[0])}),me.FullPaths=[],me.FileIndex=[],Te=0;Te<Xe.length;++Te)me.FullPaths[Te]=Xe[Te][0],me.FileIndex[Te]=Xe[Te][1];for(Te=0;Te<Xe.length;++Te){var bt=me.FileIndex[Te],kt=me.FullPaths[Te];if(bt.name=a(kt).replace("/",""),bt.L=bt.R=bt.C=-(bt.color=1),bt.size=bt.content?bt.content.length:0,bt.start=0,bt.clsid=bt.clsid||W,Te===0)bt.C=Xe.length>1?1:-1,bt.size=0,bt.type=5;else if(kt.slice(-1)=="/"){for(nt=Te+1;nt<Xe.length&&n(me.FullPaths[nt])!=kt;++nt);for(bt.C=nt>=Xe.length?-1:nt,nt=Te+1;nt<Xe.length&&n(me.FullPaths[nt])!=n(kt);++nt);bt.R=nt>=Xe.length?-1:nt,bt.type=1}else n(me.FullPaths[Te+1]||"")==n(kt)&&(bt.R=Te+1),bt.type=2}}}function H(me,ke){var _e=ke||{};if(_e.fileType=="mad")return qt(me,_e);switch(k(me),_e.fileType){case"zip":return Ra(me,_e)}var Se=function(Vt){for(var Bt=0,Lt=0,mr=0;mr<Vt.FileIndex.length;++mr){var qr=Vt.FileIndex[mr];if(qr.content){var $r=qr.content.length;$r>0&&($r<4096?Bt+=$r+63>>6:Lt+=$r+511>>9)}}for(var Jr=Vt.FullPaths.length+3>>2,Ja=Bt+7>>3,no=Bt+127>>7,Za=Ja+Lt+Jr+no,Di=Za+127>>7,hi=Di<=109?0:Math.ceil((Di-109)/127);Za+Di+hi+127>>7>Di;)hi=++Di<=109?0:Math.ceil((Di-109)/127);var es=[1,hi,Di,no,Jr,Lt,Bt,0];return Vt.FileIndex[0].size=Bt<<6,es[7]=(Vt.FileIndex[0].start=es[0]+es[1]+es[2]+es[3]+es[4]+es[5])+(es[6]+7>>3),es}(me),Te=dt(Se[7]<<9),Ie=0,Ke=0;{for(Ie=0;Ie<8;++Ie)Te.write_shift(1,te[Ie]);for(Ie=0;Ie<8;++Ie)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),Ie=0;Ie<3;++Ie)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,Se[2]),Te.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:Q),Te.write_shift(4,Se[3]),Te.write_shift(-4,Se[1]?Se[0]-1:Q),Te.write_shift(4,Se[1]),Ie=0;Ie<109;++Ie)Te.write_shift(-4,Ie<Se[2]?Se[1]+Ie:-1)}if(Se[1])for(Ke=0;Ke<Se[1];++Ke){for(;Ie<236+Ke*127;++Ie)Te.write_shift(-4,Ie<Se[2]?Se[1]+Ie:-1);Te.write_shift(-4,Ke===Se[1]-1?Q:Ke+1)}var nt=function(Vt){for(Ke+=Vt;Ie<Ke-1;++Ie)Te.write_shift(-4,Ie+1);Vt&&(++Ie,Te.write_shift(-4,Q))};for(Ke=Ie=0,Ke+=Se[1];Ie<Ke;++Ie)Te.write_shift(-4,re.DIFSECT);for(Ke+=Se[2];Ie<Ke;++Ie)Te.write_shift(-4,re.FATSECT);nt(Se[3]),nt(Se[4]);for(var ze=0,Xe=0,et=me.FileIndex[0];ze<me.FileIndex.length;++ze)et=me.FileIndex[ze],et.content&&(Xe=et.content.length,!(Xe<4096)&&(et.start=Ke,nt(Xe+511>>9)));for(nt(Se[6]+7>>3);Te.l&511;)Te.write_shift(-4,re.ENDOFCHAIN);for(Ke=Ie=0,ze=0;ze<me.FileIndex.length;++ze)et=me.FileIndex[ze],et.content&&(Xe=et.content.length,!(!Xe||Xe>=4096)&&(et.start=Ke,nt(Xe+63>>6)));for(;Te.l&511;)Te.write_shift(-4,re.ENDOFCHAIN);for(Ie=0;Ie<Se[4]<<2;++Ie){var bt=me.FullPaths[Ie];if(!bt||bt.length===0){for(ze=0;ze<17;++ze)Te.write_shift(4,0);for(ze=0;ze<3;++ze)Te.write_shift(4,-1);for(ze=0;ze<12;++ze)Te.write_shift(4,0);continue}et=me.FileIndex[Ie],Ie===0&&(et.start=et.size?et.start-1:Q);var kt=Ie===0&&_e.root||et.name;if(Xe=2*(kt.length+1),Te.write_shift(64,kt,"utf16le"),Te.write_shift(2,Xe),Te.write_shift(1,et.type),Te.write_shift(1,et.color),Te.write_shift(-4,et.L),Te.write_shift(-4,et.R),Te.write_shift(-4,et.C),et.clsid)Te.write_shift(16,et.clsid,"hex");else for(ze=0;ze<4;++ze)Te.write_shift(4,0);Te.write_shift(4,et.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,et.start),Te.write_shift(4,et.size),Te.write_shift(4,0)}for(Ie=1;Ie<me.FileIndex.length;++Ie)if(et=me.FileIndex[Ie],et.size>=4096)if(Te.l=et.start+1<<9,nn&&Buffer.isBuffer(et.content))et.content.copy(Te,Te.l,0,et.size),Te.l+=et.size+511&-512;else{for(ze=0;ze<et.size;++ze)Te.write_shift(1,et.content[ze]);for(;ze&511;++ze)Te.write_shift(1,0)}for(Ie=1;Ie<me.FileIndex.length;++Ie)if(et=me.FileIndex[Ie],et.size>0&&et.size<4096)if(nn&&Buffer.isBuffer(et.content))et.content.copy(Te,Te.l,0,et.size),Te.l+=et.size+63&-64;else{for(ze=0;ze<et.size;++ze)Te.write_shift(1,et.content[ze]);for(;ze&63;++ze)Te.write_shift(1,0)}if(nn)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function P(me,ke){var _e=me.FullPaths.map(function(ze){return ze.toUpperCase()}),Se=_e.map(function(ze){var Xe=ze.split("/");return Xe[Xe.length-(ze.slice(-1)=="/"?2:1)]}),Te=!1;ke.charCodeAt(0)===47?(Te=!0,ke=_e[0].slice(0,-1)+ke):Te=ke.indexOf("/")!==-1;var Ie=ke.toUpperCase(),Ke=Te===!0?_e.indexOf(Ie):Se.indexOf(Ie);if(Ke!==-1)return me.FileIndex[Ke];var nt=!Ie.match(L1);for(Ie=Ie.replace(Xo,""),nt&&(Ie=Ie.replace(L1,"!")),Ke=0;Ke<_e.length;++Ke)if((nt?_e[Ke].replace(L1,"!"):_e[Ke]).replace(Xo,"")==Ie||(nt?Se[Ke].replace(L1,"!"):Se[Ke]).replace(Xo,"")==Ie)return me.FileIndex[Ke];return null}var M=64,Q=-2,V="d0cf11e0a1b11ae1",te=[208,207,17,224,161,177,26,225],W="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:V,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:W,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(me,ke,_e){c();var Se=H(me,_e);l.writeFileSync(ke,Se)}function X(me){for(var ke=new Array(me.length),_e=0;_e<me.length;++_e)ke[_e]=String.fromCharCode(me[_e]);return ke.join("")}function K(me,ke){var _e=H(me,ke);switch(ke&&ke.type||"buffer"){case"file":return c(),l.writeFileSync(ke.filename,_e),_e;case"binary":return typeof _e=="string"?_e:X(_e);case"base64":return Uy(typeof _e=="string"?_e:X(_e));case"buffer":if(nn)return Buffer.isBuffer(_e)?_e:FA(_e);case"array":return typeof _e=="string"?tc(_e):_e}return _e}var se;function U(me){try{var ke=me.InflateRaw,_e=new ke;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)se=me;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function Y(me,ke){if(!se)return Ur(me,ke);var _e=se.InflateRaw,Se=new _e,Te=Se._processChunk(me.slice(me.l),Se._finishFlushFlag);return me.l+=Se.bytesRead,Te}function Z(me){return se?se.deflateRawSync(me):Dt(me)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],xe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ae(me){var ke=(me<<1|me<<11)&139536|(me<<5|me<<15)&558144;return(ke>>16|ke>>8|ke)&255}for(var ae=typeof Uint8Array<"u",ue=ae?new Uint8Array(256):[],le=0;le<256;++le)ue[le]=Ae(le);function ie(me,ke){var _e=ue[me&255];return ke<=8?_e>>>8-ke:(_e=_e<<8|ue[me>>8&255],ke<=16?_e>>>16-ke:(_e=_e<<8|ue[me>>16&255],_e>>>24-ke))}function De(me,ke){var _e=ke&7,Se=ke>>>3;return(me[Se]|(_e<=6?0:me[Se+1]<<8))>>>_e&3}function Le(me,ke){var _e=ke&7,Se=ke>>>3;return(me[Se]|(_e<=5?0:me[Se+1]<<8))>>>_e&7}function Be(me,ke){var _e=ke&7,Se=ke>>>3;return(me[Se]|(_e<=4?0:me[Se+1]<<8))>>>_e&15}function Ce(me,ke){var _e=ke&7,Se=ke>>>3;return(me[Se]|(_e<=3?0:me[Se+1]<<8))>>>_e&31}function Re(me,ke){var _e=ke&7,Se=ke>>>3;return(me[Se]|(_e<=1?0:me[Se+1]<<8))>>>_e&127}function je(me,ke,_e){var Se=ke&7,Te=ke>>>3,Ie=(1<<_e)-1,Ke=me[Te]>>>Se;return _e<8-Se||(Ke|=me[Te+1]<<8-Se,_e<16-Se)||(Ke|=me[Te+2]<<16-Se,_e<24-Se)||(Ke|=me[Te+3]<<24-Se),Ke&Ie}function We(me,ke,_e){var Se=ke&7,Te=ke>>>3;return Se<=5?me[Te]|=(_e&7)<<Se:(me[Te]|=_e<<Se&255,me[Te+1]=(_e&7)>>8-Se),ke+3}function ct(me,ke,_e){var Se=ke&7,Te=ke>>>3;return _e=(_e&1)<<Se,me[Te]|=_e,ke+1}function wt(me,ke,_e){var Se=ke&7,Te=ke>>>3;return _e<<=Se,me[Te]|=_e&255,_e>>>=8,me[Te+1]=_e,ke+8}function ot(me,ke,_e){var Se=ke&7,Te=ke>>>3;return _e<<=Se,me[Te]|=_e&255,_e>>>=8,me[Te+1]=_e&255,me[Te+2]=_e>>>8,ke+16}function Rt(me,ke){var _e=me.length,Se=2*_e>ke?2*_e:ke+5,Te=0;if(_e>=ke)return me;if(nn){var Ie=V8(Se);if(me.copy)me.copy(Ie);else for(;Te<me.length;++Te)Ie[Te]=me[Te];return Ie}else if(ae){var Ke=new Uint8Array(Se);if(Ke.set)Ke.set(me);else for(;Te<_e;++Te)Ke[Te]=me[Te];return Ke}return me.length=Se,me}function Pt(me){for(var ke=new Array(me),_e=0;_e<me;++_e)ke[_e]=0;return ke}function Xt(me,ke,_e){var Se=1,Te=0,Ie=0,Ke=0,nt=0,ze=me.length,Xe=ae?new Uint16Array(32):Pt(32);for(Ie=0;Ie<32;++Ie)Xe[Ie]=0;for(Ie=ze;Ie<_e;++Ie)me[Ie]=0;ze=me.length;var et=ae?new Uint16Array(ze):Pt(ze);for(Ie=0;Ie<ze;++Ie)Xe[Te=me[Ie]]++,Se<Te&&(Se=Te),et[Ie]=0;for(Xe[0]=0,Ie=1;Ie<=Se;++Ie)Xe[Ie+16]=nt=nt+Xe[Ie-1]<<1;for(Ie=0;Ie<ze;++Ie)nt=me[Ie],nt!=0&&(et[Ie]=Xe[nt+16]++);var bt=0;for(Ie=0;Ie<ze;++Ie)if(bt=me[Ie],bt!=0)for(nt=ie(et[Ie],Se)>>Se-bt,Ke=(1<<Se+4-bt)-1;Ke>=0;--Ke)ke[nt|Ke<<bt]=bt&15|Ie<<4;return Se}var Mt=ae?new Uint16Array(512):Pt(512),Qt=ae?new Uint16Array(32):Pt(32);if(!ae){for(var $t=0;$t<512;++$t)Mt[$t]=0;for($t=0;$t<32;++$t)Qt[$t]=0}(function(){for(var me=[],ke=0;ke<32;ke++)me.push(5);Xt(me,Qt,32);var _e=[];for(ke=0;ke<=143;ke++)_e.push(8);for(;ke<=255;ke++)_e.push(9);for(;ke<=279;ke++)_e.push(7);for(;ke<=287;ke++)_e.push(8);Xt(_e,Mt,288)})();var It=function(){for(var ke=ae?new Uint8Array(32768):[],_e=0,Se=0;_e<xe.length-1;++_e)for(;Se<xe[_e+1];++Se)ke[Se]=_e;for(;Se<32768;++Se)ke[Se]=29;var Te=ae?new Uint8Array(259):[];for(_e=0,Se=0;_e<de.length-1;++_e)for(;Se<de[_e+1];++Se)Te[Se]=_e;function Ie(nt,ze){for(var Xe=0;Xe<nt.length;){var et=Math.min(65535,nt.length-Xe),bt=Xe+et==nt.length;for(ze.write_shift(1,+bt),ze.write_shift(2,et),ze.write_shift(2,~et&65535);et-- >0;)ze[ze.l++]=nt[Xe++]}return ze.l}function Ke(nt,ze){for(var Xe=0,et=0,bt=ae?new Uint16Array(32768):[];et<nt.length;){var kt=Math.min(65535,nt.length-et);if(kt<10){for(Xe=We(ze,Xe,+(et+kt==nt.length)),Xe&7&&(Xe+=8-(Xe&7)),ze.l=Xe/8|0,ze.write_shift(2,kt),ze.write_shift(2,~kt&65535);kt-- >0;)ze[ze.l++]=nt[et++];Xe=ze.l*8;continue}Xe=We(ze,Xe,+(et+kt==nt.length)+2);for(var Vt=0;kt-- >0;){var Bt=nt[et];Vt=(Vt<<5^Bt)&32767;var Lt=-1,mr=0;if((Lt=bt[Vt])&&(Lt|=et&-32768,Lt>et&&(Lt-=32768),Lt<et))for(;nt[Lt+mr]==nt[et+mr]&&mr<250;)++mr;if(mr>2){Bt=Te[mr],Bt<=22?Xe=wt(ze,Xe,ue[Bt+1]>>1)-1:(wt(ze,Xe,3),Xe+=5,wt(ze,Xe,ue[Bt-23]>>5),Xe+=3);var qr=Bt<8?0:Bt-4>>2;qr>0&&(ot(ze,Xe,mr-de[Bt]),Xe+=qr),Bt=ke[et-Lt],Xe=wt(ze,Xe,ue[Bt]>>3),Xe-=3;var $r=Bt<4?0:Bt-2>>1;$r>0&&(ot(ze,Xe,et-Lt-xe[Bt]),Xe+=$r);for(var Jr=0;Jr<mr;++Jr)bt[Vt]=et&32767,Vt=(Vt<<5^nt[et])&32767,++et;kt-=mr-1}else Bt<=143?Bt=Bt+48:Xe=ct(ze,Xe,1),Xe=wt(ze,Xe,ue[Bt]),bt[Vt]=et&32767,++et}Xe=wt(ze,Xe,0)-1}return ze.l=(Xe+7)/8|0,ze.l}return function(ze,Xe){return ze.length<8?Ie(ze,Xe):Ke(ze,Xe)}}();function Dt(me){var ke=dt(50+Math.floor(me.length*1.1)),_e=It(me,ke);return ke.slice(0,_e)}var gt=ae?new Uint16Array(32768):Pt(32768),Br=ae?new Uint16Array(32768):Pt(32768),Zt=ae?new Uint16Array(128):Pt(128),yn=1,_r=1;function Vr(me,ke){var _e=Ce(me,ke)+257;ke+=5;var Se=Ce(me,ke)+1;ke+=5;var Te=Be(me,ke)+4;ke+=4;for(var Ie=0,Ke=ae?new Uint8Array(19):Pt(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ze=1,Xe=ae?new Uint8Array(8):Pt(8),et=ae?new Uint8Array(8):Pt(8),bt=Ke.length,kt=0;kt<Te;++kt)Ke[ne[kt]]=Ie=Le(me,ke),ze<Ie&&(ze=Ie),Xe[Ie]++,ke+=3;var Vt=0;for(Xe[0]=0,kt=1;kt<=ze;++kt)et[kt]=Vt=Vt+Xe[kt-1]<<1;for(kt=0;kt<bt;++kt)(Vt=Ke[kt])!=0&&(nt[kt]=et[Vt]++);var Bt=0;for(kt=0;kt<bt;++kt)if(Bt=Ke[kt],Bt!=0){Vt=ue[nt[kt]]>>8-Bt;for(var Lt=(1<<7-Bt)-1;Lt>=0;--Lt)Zt[Vt|Lt<<Bt]=Bt&7|kt<<3}var mr=[];for(ze=1;mr.length<_e+Se;)switch(Vt=Zt[Re(me,ke)],ke+=Vt&7,Vt>>>=3){case 16:for(Ie=3+De(me,ke),ke+=2,Vt=mr[mr.length-1];Ie-- >0;)mr.push(Vt);break;case 17:for(Ie=3+Le(me,ke),ke+=3;Ie-- >0;)mr.push(0);break;case 18:for(Ie=11+Re(me,ke),ke+=7;Ie-- >0;)mr.push(0);break;default:mr.push(Vt),ze<Vt&&(ze=Vt);break}var qr=mr.slice(0,_e),$r=mr.slice(_e);for(kt=_e;kt<286;++kt)qr[kt]=0;for(kt=Se;kt<30;++kt)$r[kt]=0;return yn=Xt(qr,gt,286),_r=Xt($r,Br,30),ke}function jn(me,ke){if(me[0]==3&&!(me[1]&3))return[x0(ke),2];for(var _e=0,Se=0,Te=V8(ke||1<<18),Ie=0,Ke=Te.length>>>0,nt=0,ze=0;(Se&1)==0;){if(Se=Le(me,_e),_e+=3,Se>>>1)Se>>1==1?(nt=9,ze=5):(_e=Vr(me,_e),nt=yn,ze=_r);else{_e&7&&(_e+=8-(_e&7));var Xe=me[_e>>>3]|me[(_e>>>3)+1]<<8;if(_e+=32,Xe>0)for(!ke&&Ke<Ie+Xe&&(Te=Rt(Te,Ie+Xe),Ke=Te.length);Xe-- >0;)Te[Ie++]=me[_e>>>3],_e+=8;continue}for(;;){!ke&&Ke<Ie+32767&&(Te=Rt(Te,Ie+32767),Ke=Te.length);var et=je(me,_e,nt),bt=Se>>>1==1?Mt[et]:gt[et];if(_e+=bt&15,bt>>>=4,(bt>>>8&255)===0)Te[Ie++]=bt;else{if(bt==256)break;bt-=257;var kt=bt<8?0:bt-4>>2;kt>5&&(kt=0);var Vt=Ie+de[bt];kt>0&&(Vt+=je(me,_e,kt),_e+=kt),et=je(me,_e,ze),bt=Se>>>1==1?Qt[et]:Br[et],_e+=bt&15,bt>>>=4;var Bt=bt<4?0:bt-2>>1,Lt=xe[bt];for(Bt>0&&(Lt+=je(me,_e,Bt),_e+=Bt),!ke&&Ke<Vt&&(Te=Rt(Te,Vt+100),Ke=Te.length);Ie<Vt;)Te[Ie]=Te[Ie-Lt],++Ie}}}return ke?[Te,_e+7>>>3]:[Te.slice(0,Ie),_e+7>>>3]}function Ur(me,ke){var _e=me.slice(me.l||0),Se=jn(_e,ke);return me.l+=Se[1],Se[0]}function Ii(me,ke){if(me)typeof console<"u"&&console.error(ke);else throw new Error(ke)}function dn(me,ke){var _e=me;Ys(_e,0);var Se=[],Te=[],Ie={FileIndex:Se,FullPaths:Te};E(Ie,{root:ke.root});for(var Ke=_e.length-4;(_e[Ke]!=80||_e[Ke+1]!=75||_e[Ke+2]!=5||_e[Ke+3]!=6)&&Ke>=0;)--Ke;_e.l=Ke+4,_e.l+=4;var nt=_e.read_shift(2);_e.l+=6;var ze=_e.read_shift(4);for(_e.l=ze,Ke=0;Ke<nt;++Ke){_e.l+=20;var Xe=_e.read_shift(4),et=_e.read_shift(4),bt=_e.read_shift(2),kt=_e.read_shift(2),Vt=_e.read_shift(2);_e.l+=8;var Bt=_e.read_shift(4),Lt=o(_e.slice(_e.l+bt,_e.l+bt+kt));_e.l+=bt+kt+Vt;var mr=_e.l;_e.l=Bt+4,ma(_e,Xe,et,Ie,Lt),_e.l=mr}return Ie}function ma(me,ke,_e,Se,Te){me.l+=2;var Ie=me.read_shift(2),Ke=me.read_shift(2),nt=s(me);if(Ie&8257)throw new Error("Unsupported ZIP encryption");for(var ze=me.read_shift(4),Xe=me.read_shift(4),et=me.read_shift(4),bt=me.read_shift(2),kt=me.read_shift(2),Vt="",Bt=0;Bt<bt;++Bt)Vt+=String.fromCharCode(me[me.l++]);if(kt){var Lt=o(me.slice(me.l,me.l+kt));(Lt[21589]||{}).mt&&(nt=Lt[21589].mt),((Te||{})[21589]||{}).mt&&(nt=Te[21589].mt)}me.l+=kt;var mr=me.slice(me.l,me.l+Xe);switch(Ke){case 8:mr=Y(me,et);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ke)}var qr=!1;Ie&8&&(ze=me.read_shift(4),ze==134695760&&(ze=me.read_shift(4),qr=!0),Xe=me.read_shift(4),et=me.read_shift(4)),Xe!=ke&&Ii(qr,"Bad compressed size: "+ke+" != "+Xe),et!=_e&&Ii(qr,"Bad uncompressed size: "+_e+" != "+et),fn(Se,Vt,mr,{unsafe:!0,mt:nt})}function Ra(me,ke){var _e=ke||{},Se=[],Te=[],Ie=dt(1),Ke=_e.compression?8:0,nt=0,ze=0,Xe=0,et=0,bt=0,kt=me.FullPaths[0],Vt=kt,Bt=me.FileIndex[0],Lt=[],mr=0;for(ze=1;ze<me.FullPaths.length;++ze)if(Vt=me.FullPaths[ze].slice(kt.length),Bt=me.FileIndex[ze],!(!Bt.size||!Bt.content||Vt=="Sh33tJ5")){var qr=et,$r=dt(Vt.length);for(Xe=0;Xe<Vt.length;++Xe)$r.write_shift(1,Vt.charCodeAt(Xe)&127);$r=$r.slice(0,$r.l),Lt[bt]=H1e.buf(Bt.content,0);var Jr=Bt.content;Ke==8&&(Jr=Z(Jr)),Ie=dt(30),Ie.write_shift(4,67324752),Ie.write_shift(2,20),Ie.write_shift(2,nt),Ie.write_shift(2,Ke),Bt.mt?i(Ie,Bt.mt):Ie.write_shift(4,0),Ie.write_shift(-4,Lt[bt]),Ie.write_shift(4,Jr.length),Ie.write_shift(4,Bt.content.length),Ie.write_shift(2,$r.length),Ie.write_shift(2,0),et+=Ie.length,Se.push(Ie),et+=$r.length,Se.push($r),et+=Jr.length,Se.push(Jr),Ie=dt(46),Ie.write_shift(4,33639248),Ie.write_shift(2,0),Ie.write_shift(2,20),Ie.write_shift(2,nt),Ie.write_shift(2,Ke),Ie.write_shift(4,0),Ie.write_shift(-4,Lt[bt]),Ie.write_shift(4,Jr.length),Ie.write_shift(4,Bt.content.length),Ie.write_shift(2,$r.length),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(4,0),Ie.write_shift(4,qr),mr+=Ie.l,Te.push(Ie),mr+=$r.length,Te.push($r),++bt}return Ie=dt(22),Ie.write_shift(4,101010256),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(2,bt),Ie.write_shift(2,bt),Ie.write_shift(4,mr),Ie.write_shift(4,et),Ie.write_shift(2,0),Bs([Bs(Se),Bs(Te),Ie])}var Gr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function sr(me,ke){if(me.ctype)return me.ctype;var _e=me.name||"",Se=_e.match(/\.([^\.]+)$/);return Se&&Gr[Se[1]]||ke&&(Se=(_e=ke).match(/[\.\\]([^\.\\])+$/),Se&&Gr[Se[1]])?Gr[Se[1]]:"application/octet-stream"}function Xr(me){for(var ke=Uy(me),_e=[],Se=0;Se<ke.length;Se+=76)_e.push(ke.slice(Se,Se+76));return _e.join(`\r
`)+`\r
`}function Fi(me){var ke=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var et=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(et.length==1?"0"+et:et)});ke=ke.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ke.charAt(0)==`
`&&(ke="=0D"+ke.slice(1)),ke=ke.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],Se=ke.split(`\r
`),Te=0;Te<Se.length;++Te){var Ie=Se[Te];if(Ie.length==0){_e.push("");continue}for(var Ke=0;Ke<Ie.length;){var nt=76,ze=Ie.slice(Ke,Ke+nt);ze.charAt(nt-1)=="="?nt--:ze.charAt(nt-2)=="="?nt-=2:ze.charAt(nt-3)=="="&&(nt-=3),ze=Ie.slice(Ke,Ke+nt),Ke+=nt,Ke<Ie.length&&(ze+="="),_e.push(ze)}}return _e.join(`\r
`)}function la(me){for(var ke=[],_e=0;_e<me.length;++_e){for(var Se=me[_e];_e<=me.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+me[++_e];ke.push(Se)}for(var Te=0;Te<ke.length;++Te)ke[Te]=ke[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(Ie){return String.fromCharCode(parseInt(Ie.slice(1),16))});return tc(ke.join(`\r
`))}function Qa(me,ke,_e){for(var Se="",Te="",Ie="",Ke,nt=0;nt<10;++nt){var ze=ke[nt];if(!ze||ze.match(/^\s*$/))break;var Xe=ze.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":Se=Xe[2].trim();break;case"content-type":Ie=Xe[2].trim();break;case"content-transfer-encoding":Te=Xe[2].trim();break}}switch(++nt,Te.toLowerCase()){case"base64":Ke=tc(uc(ke.slice(nt).join("")));break;case"quoted-printable":Ke=la(ke.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var et=fn(me,Se.slice(_e.length),Ke,{unsafe:!0});Ie&&(et.ctype=Ie)}function Zi(me,ke){if(X(me.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=ke&&ke.root||"",Se=(nn&&Buffer.isBuffer(me)?me.toString("binary"):X(me)).split(`\r
`),Te=0,Ie="";for(Te=0;Te<Se.length;++Te)if(Ie=Se[Te],!!/^Content-Location:/i.test(Ie)&&(Ie=Ie.slice(Ie.indexOf("file")),_e||(_e=Ie.slice(0,Ie.lastIndexOf("/")+1)),Ie.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),Ie.slice(0,_e.length)!=_e););var Ke=(Se[1]||"").match(/boundary="(.*?)"/);if(!Ke)throw new Error("MAD cannot find boundary");var nt="--"+(Ke[1]||""),ze=[],Xe=[],et={FileIndex:ze,FullPaths:Xe};E(et);var bt,kt=0;for(Te=0;Te<Se.length;++Te){var Vt=Se[Te];Vt!==nt&&Vt!==nt+"--"||(kt++&&Qa(et,Se.slice(bt,Te),_e),bt=Te)}return et}function qt(me,ke){var _e=ke||{},Se=_e.boundary||"SheetJS";Se="------="+Se;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],Ie=me.FullPaths[0],Ke=Ie,nt=me.FileIndex[0],ze=1;ze<me.FullPaths.length;++ze)if(Ke=me.FullPaths[ze].slice(Ie.length),nt=me.FileIndex[ze],!(!nt.size||!nt.content||Ke=="Sh33tJ5")){Ke=Ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(mr){return"_x"+mr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(mr){return"_u"+mr.charCodeAt(0).toString(16)+"_"});for(var Xe=nt.content,et=nn&&Buffer.isBuffer(Xe)?Xe.toString("binary"):X(Xe),bt=0,kt=Math.min(1024,et.length),Vt=0,Bt=0;Bt<=kt;++Bt)(Vt=et.charCodeAt(Bt))>=32&&Vt<128&&++bt;var Lt=bt>=kt*4/5;Te.push(Se),Te.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+Ke),Te.push("Content-Transfer-Encoding: "+(Lt?"quoted-printable":"base64")),Te.push("Content-Type: "+sr(nt,Ke)),Te.push(""),Te.push(Lt?Fi(et):Xr(et))}return Te.push(Se+`--\r
`),Te.join(`\r
`)}function bn(me){var ke={};return E(ke,me),ke}function fn(me,ke,_e,Se){var Te=Se&&Se.unsafe;Te||E(me);var Ie=!Te&&hr.find(me,ke);if(!Ie){var Ke=me.FullPaths[0];ke.slice(0,Ke.length)==Ke?Ke=ke:(Ke.slice(-1)!="/"&&(Ke+="/"),Ke=(Ke+ke).replace("//","/")),Ie={name:a(ke),type:2},me.FileIndex.push(Ie),me.FullPaths.push(Ke),Te||hr.utils.cfb_gc(me)}return Ie.content=_e,Ie.size=_e?_e.length:0,Se&&(Se.CLSID&&(Ie.clsid=Se.CLSID),Se.mt&&(Ie.mt=Se.mt),Se.ct&&(Ie.ct=Se.ct)),Ie}function Hn(me,ke){E(me);var _e=hr.find(me,ke);if(_e){for(var Se=0;Se<me.FileIndex.length;++Se)if(me.FileIndex[Se]==_e)return me.FileIndex.splice(Se,1),me.FullPaths.splice(Se,1),!0}return!1}function Yn(me,ke,_e){E(me);var Se=hr.find(me,ke);if(Se){for(var Te=0;Te<me.FileIndex.length;++Te)if(me.FileIndex[Te]==Se)return me.FileIndex[Te].name=a(_e),me.FullPaths[Te]=_e,!0}return!1}function ca(me){k(me,!0)}return t.find=P,t.read=D,t.parse=u,t.write=K,t.writeFile=z,t.utils={cfb_new:bn,cfb_add:fn,cfb_del:Hn,cfb_mov:Yn,cfb_gc:ca,ReadShift:oy,CheckField:aJ,prep_blob:Ys,bconcat:Bs,use_zlib:U,_deflateRaw:Dt,_inflateRaw:Ur,consts:re},t}();function Q1e(e){return typeof e=="string"?lT(e):Array.isArray(e)?h1e(e):e}function Lb(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=lT(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Yd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([Q1e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=N0(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function V1e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ai(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function X8(e,t){for(var r=[],n=Ai(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function uT(e){for(var t=[],r=Ai(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function dT(e){for(var t=[],r=Ai(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function z1e(e){for(var t=[],r=Ai(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var r_=new Date(1899,11,30,0,0,0);function ds(e,t){var r=e.getTime(),n=r_.getTime()+(e.getTimezoneOffset()-r_.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var LX=new Date,G1e=r_.getTime()+(LX.getTimezoneOffset()-r_.getTimezoneOffset())*6e4,J8=LX.getTimezoneOffset();function fT(e){var t=new Date;return t.setTime(e*24*60*60*1e3+G1e),t.getTimezoneOffset()!==J8&&t.setTime(t.getTime()+(t.getTimezoneOffset()-J8)*6e4),t}function q1e(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(n=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var Z8=new Date("2017-02-19T19:06:09.000Z"),OX=isNaN(Z8.getFullYear())?new Date("2/19/17"):Z8,$1e=OX.getFullYear()==2017;function Ia(e,t){var r=new Date(e);if($1e)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(OX.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Jp(e,t){if(nn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Yd(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Yd(_X(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Yd(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Yd(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Fa(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Fa(e[r]));return t}function ci(e,t){for(var r="";r.length<t;)r+=e;return r}function Xu(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var K1e=["january","february","march","april","may","june","july","august","september","october","november","december"];function Cv(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&K1e.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var W1e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),s=[i[0]],o=1;o<i.length;++o)s.push(a),s.push(i[o]);return s}}();function UX(e){return e?e.content&&e.type?Jp(e.content,!0):e.data?M1(e.data):e.asNodeBuffer&&nn?M1(e.asNodeBuffer().toString("binary")):e.asBinary?M1(e.asBinary()):e._data&&e._data.getContent?M1(Jp(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function jX(e){if(!e)return null;if(e.data)return H8(e.data);if(e.asNodeBuffer&&nn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?H8(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Y1e(e){return e&&e.name.slice(-4)===".bin"?jX(e):UX(e)}function Yc(e,t){for(var r=e.FullPaths||Ai(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var s=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||a==s)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function MR(e,t){var r=Yc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Hi(e,t,r){if(!r)return Y1e(MR(e,t));if(!t)return null;try{return Hi(e,t)}catch{return null}}function rc(e,t,r){if(!r)return UX(MR(e,t));if(!t)return null;try{return rc(e,t)}catch{return null}}function X1e(e,t,r){return jX(MR(e,t))}function e7(e){for(var t=e.FullPaths||Ai(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Yr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return nn?n=FA(r):n=p1e(r),hr.utils.cfb_add(e,t,n)}hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function LR(){return hr.utils.cfb_new()}function HX(e,t){switch(t.type){case"base64":return hr.read(e,{type:"base64"});case"binary":return hr.read(e,{type:"binary"});case"buffer":case"array":return hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function O1(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ki=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,J1e=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,t7=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Z1e=/<[^>]*>/g,jo=ki.match(t7)?t7:Z1e,eye=/<\w*:/,tye=/<(\/?)\w+:/;function Mr(e,t,r){for(var n={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var s=e.match(J1e),o=0,l="",c=0,u="",A="",h=1;if(s)for(c=0;c!=s.length;++c){for(A=s[c],i=0;i!=A.length&&A.charCodeAt(i)!==61;++i);for(u=A.slice(0,i).trim();A.charCodeAt(i+1)==32;)++i;for(h=(a=A.charCodeAt(i+1))==34||a==39?1:0,l=A.slice(i+1+h,A.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var m=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[m]&&u.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function pf(e){return e.replace(tye,"<$1")}var QX={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},OR=uT(QX),Bn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(o,l){return QX[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var s=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,s)+r(a.slice(s+3))}}(),UR=/[&<>'"]/g,rye=/[\u0000-\u0008\u000b-\u001f]/g;function ia(e){var t=e+"";return t.replace(UR,function(r){return OR[r]}).replace(rye,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function r7(e){return ia(e).replace(/ /g,"_x0020_")}var VX=/[\u0000-\u001f]/g;function jR(e){var t=e+"";return t.replace(UR,function(r){return OR[r]}).replace(/\n/g,"<br/>").replace(VX,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function nye(e){var t=e+"";return t.replace(UR,function(r){return OR[r]}).replace(VX,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var n7=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function aye(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ba(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function EB(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function a7(e){var t=x0(2*e.length),r,n,a=1,i=0,s=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function i7(e){return FA(e,"binary").toString("utf8")}var _2="foo bar bazâð£",pa=nn&&(i7(_2)==EB(_2)&&i7||a7(_2)==EB(_2)&&a7)||EB,Yd=nn?function(e){return FA(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Hy=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),zX=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),iye=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),sye=/<\/?(?:vt:)?variant>/g,oye=/<(?:vt:)([^>]*)>([\s\S]*)</;function s7(e,t){var r=Mr(e),n=e.match(iye(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(i){var s=i.replace(sye,"").match(oye);s&&a.push({v:pa(s[2]),t:s[1]})}),a}var GX=/(^\s|\s$|\n)/;function Js(e,t){return"<"+e+(t.match(GX)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Qy(e){return Ai(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ot(e,t,r){return"<"+e+(r!=null?Qy(r):"")+(t!=null?(t.match(GX)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function n3(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function lye(e,t){switch(typeof e){case"string":var r=Ot("vt:lpwstr",ia(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ot((e|0)==e?"vt:i4":"vt:r8",ia(String(e)));case"boolean":return Ot("vt:bool",e?"true":"false")}if(e instanceof Date)return Ot("vt:filetime",n3(e));throw new Error("Unable to serialize "+e)}function HR(e){if(nn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return pa(N0(DR(e)));throw new Error("Bad input format: expected Buffer or string")}var Vy=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ls={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},mm=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Jl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function cye(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function uye(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var o7=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},l7=nn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:FA(t)})):o7(e)}:o7,c7=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(aA(e,a)));return n.join("").replace(Xo,"")},QR=nn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Xo,""):c7(e,t,r)}:c7,u7=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},qX=nn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):u7(e,t,r)}:u7,d7=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Fg(e,a)));return n.join("")},Ob=nn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):d7(t,r,n)}:d7,$X=function(e,t){var r=Zl(e,t);return r>0?Ob(e,t+4,t+4+r-1):""},KX=$X,WX=function(e,t){var r=Zl(e,t);return r>0?Ob(e,t+4,t+4+r-1):""},YX=WX,XX=function(e,t){var r=2*Zl(e,t);return r>0?Ob(e,t+4,t+4+r-1):""},JX=XX,ZX=function(t,r){var n=Zl(t,r);return n>0?QR(t,r+4,r+4+n):""},eJ=ZX,tJ=function(e,t){var r=Zl(e,t);return r>0?Ob(e,t+4,t+4+r):""},rJ=tJ,nJ=function(e,t){return cye(e,t)},n_=nJ,VR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};nn&&(KX=function(t,r){if(!Buffer.isBuffer(t))return $X(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},YX=function(t,r){if(!Buffer.isBuffer(t))return WX(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},JX=function(t,r){if(!Buffer.isBuffer(t))return XX(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},eJ=function(t,r){if(!Buffer.isBuffer(t))return ZX(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},rJ=function(t,r){if(!Buffer.isBuffer(t))return tJ(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},n_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):nJ(t,r)},VR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Fg=function(e,t){return e[t]},aA=function(e,t){return e[t+1]*256+e[t]},dye=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Zl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},mp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},fye=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function oy(e,t){var r="",n,a,i=[],s,o,l,c;switch(t){case"dbcs":if(c=this.l,nn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(aA(this,c)),c+=2;e*=2;break;case"utf8":r=Ob(this,this.l,this.l+e);break;case"utf16le":e*=2,r=QR(this,this.l,this.l+e);break;case"wstr":return oy.call(this,e,"dbcs");case"lpstr-ansi":r=KX(this,this.l),e=4+Zl(this,this.l);break;case"lpstr-cp":r=YX(this,this.l),e=4+Zl(this,this.l);break;case"lpwstr":r=JX(this,this.l),e=4+2*Zl(this,this.l);break;case"lpp4":e=4+Zl(this,this.l),r=eJ(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Zl(this,this.l),r=rJ(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=Fg(this,this.l+e++))!==0;)i.push(E2(s));r=i.join("");break;case"_wstr":for(e=0,r="";(s=aA(this,this.l+e))!==0;)i.push(E2(s)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=Fg(this,c),this.l=c+1,o=oy.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(E2(aA(this,c))),c+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=Fg(this,c),this.l=c+1,o=oy.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(E2(Fg(this,c))),c+=1}r=i.join("");break;default:switch(e){case 1:return n=Fg(this,this.l),this.l++,n;case 2:return n=(t==="i"?dye:aA)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?mp:fye)(this,this.l),this.l+=4,n):(a=Zl(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=n_(this,this.l):a=n_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=qX(this,this.l,e);break}}return this.l+=e,r}var Aye=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},hye=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},pye=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function mye(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)pye(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Aye(this,t,this.l);break;case 8:if(n=8,r==="f"){uye(this,t,this.l);break}case 16:break;case-4:n=4,hye(this,t,this.l);break}return this.l+=n,this}function aJ(e,t){var r=qX(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ys(e,t){e.l=t,e.read_shift=oy,e.chk=aJ,e.write_shift=mye}function Oo(e,t){e.l+=t}function dt(e){var t=x0(e);return Ys(t,0),t}function DA(e,t,r){if(e){var n,a,i;Ys(e,e.l||0);for(var s=e.length,o=0,l=0;e.l<s;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=Wy[o]||Wy[65535];for(n=e.read_shift(1),i=n&127,a=1;a<4&&n&128;++a)i+=((n=e.read_shift(1))&127)<<7*a;l=e.l+i;var u=c.f&&c.f(e,i,r);if(e.l=l,t(u,c,o))return}}}function Cl(){var e=[],t=nn?256:2048,r=function(c){var u=dt(c);return Ys(u,0),u},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(a(),n=r(Math.max(c+1,t)))},s=function(){return a(),Bs(e)},o=function(c){a(),n=c,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:o,end:s,_bufs:e}}function _t(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=Wy[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&VR(r)&&e.push(r)}}function ly(e,t,r){var n=Fa(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function f7(e,t,r){var n=Fa(e);return n.s=ly(n.s,t.s,r),n.e=ly(n.e,t.s,r),n}function cy(e,t){if(e.cRel&&e.c<0)for(e=Fa(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Fa(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Fr(e);return!e.cRel&&e.cRel!=null&&(r=xye(r)),!e.rRel&&e.rRel!=null&&(r=gye(r)),r}function _B(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ka(e.s.c)+":"+(e.e.cRel?"":"$")+Ka(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Bi(e.s.r)+":"+(e.e.rRel?"":"$")+Bi(e.e.r):cy(e.s,t.biff)+":"+cy(e.e,t.biff)}function zR(e){return parseInt(vye(e),10)-1}function Bi(e){return""+(e+1)}function gye(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function vye(e){return e.replace(/\$(\d+)$/,"$1")}function GR(e){for(var t=yye(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ka(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function xye(e){return e.replace(/^([A-Z])/,"$$$1")}function yye(e){return e.replace(/^\$([A-Z])/,"$1")}function bye(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Wa(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Fr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function _l(e){var t=e.indexOf(":");return t==-1?{s:Wa(e),e:Wa(e)}:{s:Wa(e.slice(0,t)),e:Wa(e.slice(t+1))}}function zr(e,t){return typeof t>"u"||typeof t=="number"?zr(e.s,e.e):(typeof e!="string"&&(e=Fr(e)),typeof t!="string"&&(t=Fr(t)),e==t?e:e+":"+t)}function kn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function A7(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=du(e.z,r?ds(t):t)}catch{}try{return e.w=du((e.XF||{}).numFmtId||(r?14:0),r?ds(t):t)}catch{return""+t}}function wA(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?RA[e.v]||e.v:t==null?A7(e,e.v):A7(e,t))}function B0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function iJ(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),s=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Wa(n.origin):n.origin;s=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=kn(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),s==-1&&(c.e.r=s=u.e.r+1)}for(var A=0;A!=t.length;++A)if(t[A]){if(!Array.isArray(t[A]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[A].length;++h)if(!(typeof t[A][h]>"u")){var m={v:t[A][h]},v=s+A,g=o+h;if(c.s.r>v&&(c.s.r=v),c.s.c>g&&(c.s.c=g),c.e.r<v&&(c.e.r=v),c.e.c<g&&(c.e.c=g),t[A][h]&&typeof t[A][h]=="object"&&!Array.isArray(t[A][h])&&!(t[A][h]instanceof Date))m=t[A][h];else if(Array.isArray(m.v)&&(m.f=t[A][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Nr[14],n.cellDates?(m.t="d",m.w=du(m.z,ds(m.v))):(m.t="n",m.v=ds(m.v),m.w=du(m.z,m.v))):m.t="s";if(a)i[v]||(i[v]=[]),i[v][g]&&i[v][g].z&&(m.z=i[v][g].z),i[v][g]=m;else{var y=Fr({c:g,r:v});i[y]&&i[y].z&&(m.z=i[y].z),i[y]=m}}}return c.s.c<1e7&&(i["!ref"]=zr(c)),i}function rx(e,t){return iJ(null,e,t)}function wye(e){return e.read_shift(4,"i")}function Ju(e,t){return t||(t=dt(4)),t.write_shift(4,e),t}function Mo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ks(e,t){var r=!1;return t==null&&(r=!0,t=dt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Cye(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Eye(e,t){return t||(t=dt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function qR(e,t){var r=e.l,n=e.read_shift(1),a=Mo(e),i=[],s={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)i.push(Cye(e));s.r=i}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function _ye(e,t){var r=!1;return t==null&&(r=!0,t=dt(15+4*e.t.length)),t.write_shift(1,0),ks(e.t,t),r?t.slice(0,t.l):t}var Sye=qR;function Tye(e,t){var r=!1;return t==null&&(r=!0,t=dt(23+4*e.t.length)),t.write_shift(1,1),ks(e.t,t),t.write_shift(4,1),Eye({},t),r?t.slice(0,t.l):t}function hu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function gm(e,t){return t==null&&(t=dt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function vm(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function xm(e,t){return t==null&&(t=dt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Nye=Mo,sJ=ks;function $R(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function a_(e,t){var r=!1;return t==null&&(r=!0,t=dt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Bye=Mo,a3=$R,KR=a_;function WR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?n_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):mp(t,0)>>2;return r?a/100:a}function oJ(e,t){t==null&&(t=dt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function lJ(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function kye(e,t){return t||(t=dt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ym=lJ,nx=kye;function Ro(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Zp(e,t){return(t||dt(8)).write_shift(8,e,"f")}function Iye(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var c=Fp[a];c&&(t.rgb=Gy(c));break;case 2:t.rgb=Gy([s,o,l]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function i_(e,t){if(t||(t=dt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Fye(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Dye(e,t){t||(t=dt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function cJ(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Rye(e){return cJ(e,1)}function Pye(e){return cJ(e,2)}var YR=2,pl=3,S2=11,h7=12,s_=19,T2=64,Mye=65,Lye=71,Oye=4108,Uye=4126,Ss=80,uJ=81,jye=[Ss,uJ],i3={1:{n:"CodePage",t:YR},2:{n:"Category",t:Ss},3:{n:"PresentationFormat",t:Ss},4:{n:"ByteCount",t:pl},5:{n:"LineCount",t:pl},6:{n:"ParagraphCount",t:pl},7:{n:"SlideCount",t:pl},8:{n:"NoteCount",t:pl},9:{n:"HiddenCount",t:pl},10:{n:"MultimediaClipCount",t:pl},11:{n:"ScaleCrop",t:S2},12:{n:"HeadingPairs",t:Oye},13:{n:"TitlesOfParts",t:Uye},14:{n:"Manager",t:Ss},15:{n:"Company",t:Ss},16:{n:"LinksUpToDate",t:S2},17:{n:"CharacterCount",t:pl},19:{n:"SharedDoc",t:S2},22:{n:"HyperlinksChanged",t:S2},23:{n:"AppVersion",t:pl,p:"version"},24:{n:"DigSig",t:Mye},26:{n:"ContentType",t:Ss},27:{n:"ContentStatus",t:Ss},28:{n:"Language",t:Ss},29:{n:"Version",t:Ss},255:{},2147483648:{n:"Locale",t:s_},2147483651:{n:"Behavior",t:s_},1919054434:{}},s3={1:{n:"CodePage",t:YR},2:{n:"Title",t:Ss},3:{n:"Subject",t:Ss},4:{n:"Author",t:Ss},5:{n:"Keywords",t:Ss},6:{n:"Comments",t:Ss},7:{n:"Template",t:Ss},8:{n:"LastAuthor",t:Ss},9:{n:"RevNumber",t:Ss},10:{n:"EditTime",t:T2},11:{n:"LastPrinted",t:T2},12:{n:"CreatedDate",t:T2},13:{n:"ModifiedDate",t:T2},14:{n:"PageCount",t:pl},15:{n:"WordCount",t:pl},16:{n:"CharCount",t:pl},17:{n:"Thumbnail",t:Lye},18:{n:"Application",t:Ss},19:{n:"DocSecurity",t:pl},255:{},2147483648:{n:"Locale",t:s_},2147483651:{n:"Behavior",t:s_},1919054434:{}},p7={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Hye=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Qye(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Vye=Qye([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Fp=Fa(Vye),RA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},dJ={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},o3={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},N2={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function XR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zye(e){var t=XR();if(!e||!e.match)return t;var r={};if((e.match(jo)||[]).forEach(function(n){var a=Mr(n);switch(a[0].replace(eye,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[o3[a.ContentType]]!==void 0&&t[o3[a.ContentType]].push(a.PartName);break}}),t.xmlns!==ls.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function fJ(e,t){var r=z1e(o3),n=[],a;n[n.length]=ki,n[n.length]=Ot("Types",null,{xmlns:ls.CT,"xmlns:xsd":ls.xsd,"xmlns:xsi":ls.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ot("Default",null,{Extension:l[0],ContentType:l[1]})}));var i=function(l){e[l]&&e[l].length>0&&(a=e[l][0],n[n.length]=Ot("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:N2[l][t.bookType]||N2[l].xlsx}))},s=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ot("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:N2[l][t.bookType]||N2[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ot("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return i("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var un={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function zy(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function uy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(jo)||[]).forEach(function(a){var i=Mr(a);if(i[0]==="<Relationship"){var s={};s.Type=i.Type,s.Target=i.Target,s.Id=i.Id,i.TargetMode&&(s.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:O1(i.Target,t);r[o]=s,n[i.Id]=s}}),r["!id"]=n,r}function rv(e){var t=[ki,Ot("Relationships",null,{xmlns:ls.RELS})];return Ai(e["!id"]).forEach(function(r){t[t.length]=Ot("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ra(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[un.HLINK,un.XPATH,un.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var Gye="application/vnd.oasis.opendocument.spreadsheet";function qye(e,t){for(var r=HR(e),n,a;n=Vy.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Mr(n[0],!1),a.path=="/"&&a.type!==Gye)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function $ye(e){var t=[ki];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function m7(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Kye(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Wye(e){var t=[ki];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(m7(e[r][0],e[r][1])),t.push(Kye("",e[r][0]));return t.push(m7("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function AJ(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+JE.version+"</meta:generator></office:meta></office:document-meta>"}var cu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Yye=function(){for(var e=new Array(cu.length),t=0;t<cu.length;++t){var r=cu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function hJ(e){var t={};e=pa(e);for(var r=0;r<cu.length;++r){var n=cu[r],a=e.match(Yye[r]);a!=null&&a.length>0&&(t[n[1]]=Bn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ia(t[n[1]]))}return t}function SB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=ia(t),n[n.length]=r?Ot(e,t,r):Js(e,t))}function pJ(e,t){var r=t||{},n=[ki,Ot("cp:coreProperties",null,{"xmlns:cp":ls.CORE_PROPS,"xmlns:dc":ls.dc,"xmlns:dcterms":ls.dcterms,"xmlns:dcmitype":ls.dcmitype,"xmlns:xsi":ls.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&SB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:n3(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&SB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:n3(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=cu.length;++i){var s=cu[i],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&SB(s[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Dp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],mJ=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function gJ(e,t,r,n){var a=[];if(typeof e=="string")a=s7(e,n);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(u){return{v:u}}));var s=typeof t=="string"?s7(t,n).map(function(u){return u.v}):t,o=0,l=0;if(s.length>0)for(var c=0;c!==a.length;c+=2){switch(l=+a[c+1].v,a[c].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=s.slice(o,o+l);break}o+=l}}function Xye(e,t,r){var n={};return t||(t={}),e=pa(e),Dp.forEach(function(a){var i=(e.match(Hy(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=Bn(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var s=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));s&&s.length>0&&(n[a[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&gJ(n.HeadingPairs,n.TitlesOfParts,t,r),t}function vJ(e){var t=[],r=Ot;return e||(e={}),e.Application="SheetJS",t[t.length]=ki,t[t.length]=Ot("Properties",null,{xmlns:ls.EXT_PROPS,"xmlns:vt":ls.vt}),Dp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ia(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ia(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Jye=/<[^>]+>[^<]*/g;function Zye(e,t){var r={},n="",a=e.match(Jye);if(a)for(var i=0;i!=a.length;++i){var s=a[i],o=Mr(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Bn(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var l=s.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Bn(u);break;case"bool":r[n]=Ba(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=Ia(u);break;case"cy":case"error":r[n]=Bn(u);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",s,c,l)}}else if(s.slice(0,2)!=="</"){if(t.WTF)throw new Error(s)}}}return r}function xJ(e){var t=[ki,Ot("Properties",null,{xmlns:ls.CUST_PROPS,"xmlns:vt":ls.vt})];if(!e)return t.join("");var r=1;return Ai(e).forEach(function(a){++r,t[t.length]=Ot("property",lye(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ia(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var l3={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},TB;function ebe(e,t,r){TB||(TB=uT(l3)),t=TB[t]||t,e[t]=r}function tbe(e,t){var r=[];return Ai(l3).map(function(n){for(var a=0;a<cu.length;++a)if(cu[a][1]==n)return cu[a];for(a=0;a<Dp.length;++a)if(Dp[a][1]==n)return Dp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Js(l3[n[1]]||n[1],a))}}),Ot("DocumentProperties",r.join(""),{xmlns:Jl.o})}function rbe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ai(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var s=0;s<cu.length;++s)if(i==cu[s][1])return;for(s=0;s<Dp.length;++s)if(i==Dp[s][1])return;for(s=0;s<r.length;++s)if(i==r[s])return;var o=e[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Ot(r7(i),o,{"dt:dt":l}))}}),t&&Ai(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var s=t[i],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),a.push(Ot(r7(i),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Jl.o+'">'+a.join("")+"</"+n+">"}function JR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function nbe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=dt(8);return s.write_shift(4,n),s.write_shift(4,a),s}function yJ(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function bJ(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function wJ(e,t,r){return t===31?bJ(e):yJ(e,t,r)}function c3(e,t,r){return wJ(e,t,r===!1?0:4)}function abe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return wJ(e,t,0)}function ibe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Xo,""),e.l-a&2&&(e.l+=2)}return r}function sbe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Xo,"");return r}function obe(e){var t=e.l,r=o_(e,uJ);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=o_(e,pl);return[r,n]}function lbe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(obe(e));return r}function g7(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var i=e.read_shift(4),s=e.read_shift(4);n[i]=e.read_shift(s,t===1200?"utf16le":"utf8").replace(Xo,"").replace(L1,"!"),t===1200&&s%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function CJ(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function cbe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function o_(e,t,r){var n=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==h7&&n!==t&&jye.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===h7?n:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return yJ(e,n,4).replace(Xo,"");case 31:return bJ(e);case 64:return JR(e);case 65:return CJ(e);case 71:return cbe(e);case 80:return c3(e,n,!i.raw).replace(Xo,"");case 81:return abe(e,n).replace(Xo,"");case 4108:return lbe(e);case 4126:case 4127:return n==4127?ibe(e):sbe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function v7(e,t){var r=dt(4),n=dt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=dt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=nbe(t);break;case 31:case 80:for(n=dt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Bs([r,n])}function x7(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),i=[],s=0,o=0,l=-1,c={};for(s=0;s!=a;++s){var u=e.read_shift(4),A=e.read_shift(4);i[s]=[u,A+r]}i.sort(function(T,N){return T[1]-N[1]});var h={};for(s=0;s!=a;++s){if(e.l!==i[s][1]){var m=!0;if(s>0&&t)switch(t[i[s-1][0]].t){case 2:e.l+2===i[s][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[s][1]&&(e.l=i[s][1],m=!1);break;case 4108:e.l<=i[s][1]&&(e.l=i[s][1],m=!1);break}if((!t||s==0)&&e.l<=i[s][1]&&(m=!1,e.l=i[s][1]),m)throw new Error("Read Error: Expected address "+i[s][1]+" at "+e.l+" :"+s)}if(t){var v=t[i[s][0]];if(h[v.n]=o_(e,v.t,{raw:!0}),v.p==="version"&&(h[v.n]=String(h[v.n]>>16)+"."+("0000"+String(h[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(h[v.n]){case 0:h[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Wu(o=h[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[v.n])}}else if(i[s][0]===1){if(o=h.CodePage=o_(e,YR),Wu(o),l!==-1){var g=e.l;e.l=i[l][1],c=g7(e,o),e.l=g}}else if(i[s][0]===0){if(o===0){l=s,e.l=i[s+1][1];continue}c=g7(e,o)}else{var y=c[i[s][0]],w;switch(e[e.l]){case 65:e.l+=4,w=CJ(e);break;case 30:e.l+=4,w=c3(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=c3(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=wi(e,4);break;case 64:e.l+=4,w=Ia(JR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[y]=w}}return e.l=r+n,h}var EJ=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ube(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function y7(e,t,r){var n=dt(8),a=[],i=[],s=8,o=0,l=dt(8),c=dt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),i.push(l),a.push(c),s+=8+l.length,!t){c=dt(8),c.write_shift(4,0),a.unshift(c);var u=[dt(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var A=e[o][0];for(l=dt(8+2*(A.length+1)+(A.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,A.length+1),l.write_shift(0,A,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Bs(u),i.unshift(l),s+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(EJ.indexOf(e[o][0])>-1||mJ.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],m=0;if(t){m=+t[e[o][0]];var v=r[m];if(v.p=="version"&&typeof h=="string"){var g=h.split(".");h=(+g[0]<<16)+(+g[1]||0)}l=v7(v.t,h)}else{var y=ube(h);y==-1&&(y=31,h=String(h)),l=v7(y,h)}i.push(l),c=dt(8),c.write_shift(4,t?m:2+o),a.push(c),s+=8+l.length}var w=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,w),w+=i[o].length;return n.write_shift(4,s),n.write_shift(4,i.length),Bs([n].concat(a).concat(i))}function b7(e,t,r){var n=e.content;if(!n)return{};Ys(n,0);var a,i,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==hr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(s=n.read_shift(16),l=n.read_shift(4));var A=x7(n,t),h={SystemIdentifier:c};for(var m in A)h[m]=A[m];if(h.FMTID=i,a===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var v;try{v=x7(n,null)}catch{}for(m in v)h[m]=v[m];return h.FMTID=[i,s],h}function w7(e,t,r,n,a,i){var s=dt(a?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,hr.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var l=y7(e,r,n);if(o.push(l),a){var c=y7(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+l.length),o.push(c)}return Bs(o)}function Eh(e,t){return e.read_shift(t),null}function dbe(e,t){t||(t=dt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function fbe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function wi(e,t){return e.read_shift(t)===1}function $o(e,t){return t||(t=dt(2)),t.write_shift(2,+!!e),t}function Qi(e){return e.read_shift(2,"u")}function Jc(e,t){return t||(t=dt(2)),t.write_shift(2,e),t}function _J(e,t){return fbe(e,t,Qi)}function Abe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function SJ(e,t,r){return r||(r=dt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Ub(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var s=n?e.read_shift(n,a):"";return s}function hbe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,i=1+(r&1),s=0,o,l={};a&&(s=e.read_shift(2)),n&&(o=e.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,c);return a&&(e.l+=4*s),n&&(e.l+=o),l.t=u,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function pbe(e){var t=e.t||"",r=dt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=dt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Bs(a)}function em(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function jb(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):em(e,n,r)}function bm(e,t,r){if(r.biff>5)return jb(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function TJ(e,t,r){return r||(r=dt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function mbe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function gbe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Xo,"");return n&&(e.l+=24),a}function vbe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=e.read_shift(i>>1,"utf16le").replace(Xo,"");return r+s}function xbe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return gbe(e);case"0303000000000000c000000000000046":return vbe(e);default:throw new Error("Unsupported Moniker "+r)}}function B2(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Xo,""):"";return r}function C7(e,t){t||(t=dt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function ybe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var i,s,o,l,c="",u,A;a&16&&(i=B2(e,r-e.l)),a&128&&(s=B2(e,r-e.l)),(a&257)===257&&(o=B2(e,r-e.l)),(a&257)===1&&(l=xbe(e,r-e.l)),a&8&&(c=B2(e,r-e.l)),a&32&&(u=e.read_shift(16)),a&64&&(A=JR(e)),e.l=r;var h=s||o||l||"";h&&c&&(h+="#"+c),h||(h="#"+c),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return u&&(m.guid=u),A&&(m.time=A),i&&(m.Tooltip=i),m}function bbe(e){var t=dt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(i==28)n=n.slice(1),C7(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&C7(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function NJ(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function BJ(e,t){var r=NJ(e);return r[3]=0,r}function mf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function tm(e,t,r,n){return n||(n=dt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function wbe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Cbe(e,t,r){return t===0?"":bm(e,t,r)}function Ebe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[a,i,s]}function kJ(e){var t=e.read_shift(2),r=WR(e);return[t,r]}function _be(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=Ub(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,a}function AT(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function IJ(e,t){return t||(t=dt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function FJ(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var Sbe=FJ;function DJ(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Tbe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Nbe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function bo(e){e.l+=2,e.l+=e.read_shift(2)}var Bbe={0:bo,4:bo,5:bo,6:bo,7:Nbe,8:bo,9:bo,10:bo,11:bo,12:bo,13:Tbe,14:bo,15:bo,16:bo,17:bo,18:bo,19:bo,20:bo,21:DJ};function kbe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(Bbe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function k2(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function ZR(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=dt(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Ibe(e,t){return t===0||e.read_shift(2),1200}function Fbe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=bm(e,0,r);return e.read_shift(t+n-e.l),a}function Dbe(e,t){var r=!t||t.biff==8,n=dt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Rbe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Pbe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var s=Ub(e,0,r);return s.length===0&&(s="Sheet1"),{pos:n,hs:a,dt:i,name:s}}function Mbe(e,t){var r=!t||t.biff>=8?2:1,n=dt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function Lbe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),i=[],s=0;s!=a&&e.l<r;++s)i.push(hbe(e));return i.Count=n,i.Unique=a,i}function Obe(e,t){var r=dt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=pbe(e[a]);var i=Bs([r].concat(n));return i.parts=[r.length].concat(n.map(function(s){return s.length})),i}function Ube(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function jbe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Hbe(e){var t=wbe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Qbe(e){return e.read_shift(2),e.read_shift(4)}function E7(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,a]}function Vbe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:i,CurTab:s,FirstTab:o,Selected:l,TabRatio:c}}function zbe(){var e=dt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Gbe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function qbe(e){var t=dt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function $be(){}function Kbe(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Ub(e,0,r),n}function Wbe(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=dt(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function Ybe(e){var t=mf(e);return t.isst=e.read_shift(4),t}function Xbe(e,t,r,n){var a=dt(10);return tm(e,t,n,a),a.write_shift(4,r),a}function Jbe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=mf(e);r.biff==2&&e.l++;var i=jb(e,n-e.l,r);return a.val=i,a}function Zbe(e,t,r,n,a){var i=!a||a.biff==8,s=dt(8+ +i+(1+i)*r.length);return tm(e,t,n,s),s.write_shift(2,r.length),i&&s.write_shift(1,1),s.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),s}function ewe(e,t,r){var n=e.read_shift(2),a=bm(e,0,r);return[n,a]}function twe(e,t,r,n){var a=r&&r.biff==5;n||(n=dt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var rwe=bm;function _7(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),s=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:i,c:o},e:{r:s,c:l}}}function nwe(e,t){var r=t.biff==8||!t.biff?4:2,n=dt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function awe(e){var t=e.read_shift(2),r=e.read_shift(2),n=kJ(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function iwe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(kJ(e));if(e.l!==r)throw new Error("MulRK read error");var s=e.read_shift(2);if(i.length!=s-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:s,rkrec:i}}function swe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var s=e.read_shift(2);if(i.length!=s-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:s,ixfe:i}}function owe(e,t,r,n){var a={},i=e.read_shift(4),s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=Hye[o>>26],n.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=s&15,a.dgRight=s>>4&15,a.dgTop=s>>8&15,a.dgBottom=s>>12&15,a.icvLeft=s>>16&127,a.icvRight=s>>23&127,a.grbitDiag=s>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function lwe(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=owe(e,t,n.fStyle,r),n}function S7(e,t,r,n){var a=r&&r.biff==5;n||(n=dt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function cwe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function uwe(e){var t=dt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function T7(e,t,r){var n=mf(e);(r.biff==2||t==9)&&++e.l;var a=Abe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function dwe(e,t,r,n,a,i){var s=dt(8);return tm(e,t,n,s),SJ(r,i,s),s}function fwe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=mf(e),a=Ro(e);return n.val=a,n}function Awe(e,t,r,n){var a=dt(14);return tm(e,t,n,a),Zp(r,a),a}var N7=Cbe;function hwe(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var s=em(e,i),o=[];n>e.l;)o.push(jb(e));return[i,a,s,o]}function B7(e,t,r){var n=e.read_shift(2),a,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=_be(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var pwe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function k7(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var c=em(e,s,r);a&32&&(c=pwe[c.charCodeAt(0)]);var u=n-e.l;r&&r.biff==2&&--u;var A=n==e.l||o===0||!(u>0)?[]:k_e(e,u,r,o);return{chKey:i,Name:c,itab:l,rgce:A}}function RJ(e,t,r){if(r.biff<8)return mwe(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Ebe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function mwe(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Ub(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function gwe(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),i=em(e,n,r),s=em(e,a,r);return[i,s]}function vwe(e,t,r){var n=FJ(e);e.l++;var a=e.read_shift(1);return t-=8,[I_e(e,t,r),a,n]}function I7(e,t,r){var n=Sbe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,N_e(e,t,r)]}function xwe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function ywe(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),o=bm(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,s,i]}}function bwe(e,t,r){return ywe(e,t,r)}function wwe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(AT(e));return r}function Cwe(e){var t=dt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)IJ(e[r],t);return t}function Ewe(e,t,r){if(r&&r.biff<8)return Swe(e,t,r);var n=DJ(e),a=kbe(e,t-22,n[1]);return{cmo:n,ft:a}}var _we={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function Swe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var s=[];return s.push((_we[n]||Oo)(e,t,r)),{cmo:[a,n,i],ft:s}}function Twe(e,t,r){var n=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:s=mbe(e,6,r);var o=e.read_shift(2);e.read_shift(2),Qi(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-n!=e.lens[c])throw new Error("TxO: bad continue record");var u=e[e.l],A=em(e,e.lens[c+1]-e.lens[c]-1);if(a+=A,a.length>=(u?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function Nwe(e,t){var r=AT(e);e.l+=16;var n=ybe(e,t-24);return[r,n]}function Bwe(e){var t=dt(24),r=Wa(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Bs([t,bbe(e[1])])}function kwe(e,t){e.read_shift(2);var r=AT(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Xo,""),[r,n]}function Iwe(e){var t=e[1].Tooltip,r=dt(10+2*(t.length+1));r.write_shift(2,2048);var n=Wa(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Fwe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=p7[r]||r,r=e.read_shift(2),t[1]=p7[r]||r,t}function Dwe(e){return e||(e=dt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Rwe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(BJ(e));return r}function Pwe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(BJ(e));return r}function Mwe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function PJ(e,t,r){if(!r.cellStyles)return Oo(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var c={s:a,e:i,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function Lwe(e,t){var r=dt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Owe(e,t){var r={};return t<32||(e.l+=16,r.header=Ro(e),r.footer=Ro(e),e.l+=2),r}function Uwe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function jwe(e){for(var t=dt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Hwe=mf,Qwe=_J,Vwe=jb;function zwe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function Gwe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=mf(e);++e.l;var a=bm(e,t-7,r);return n.t="str",n.val=a,n}function qwe(e){var t=mf(e);++e.l;var r=Ro(e);return t.t="n",t.val=r,t}function $we(e,t,r){var n=dt(15);return zb(n,e,t),n.write_shift(8,r,"f"),n}function Kwe(e){var t=mf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Wwe(e,t,r){var n=dt(9);return zb(n,e,t),n.write_shift(2,r),n}function Ywe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Xwe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Jwe(e,t,r){var n=e.l+t,a=mf(e),i=e.read_shift(2),s=em(e,i,r);return e.l=n,a.t="str",a.val=s,a}var Zwe=[2,3,48,49,131,139,140,245],u3=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=uT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=x0(1);switch(l.type){case"base64":u=tc(uc(o));break;case"binary":u=tc(o);break;case"buffer":case"array":u=o;break}Ys(u,0);var A=u.read_shift(1),h=!!(A&136),m=!1,v=!1;switch(A){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+A.toString(16))}var g=0,y=521;A==2&&(g=u.read_shift(2)),u.l+=3,A!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),A!=2&&(y=u.read_shift(2));var w=u.read_shift(2),T=l.codepage||1252;A!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(T=e[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var N=[],F={},B=Math.min(u.length,A==2?521:y-10-(m?264:0)),D=v?32:11;u.l<B&&u[u.l]!=13;)switch(F={},F.name=Oy.utils.decode(T,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,F.type=String.fromCharCode(u.read_shift(1)),A!=2&&!v&&(F.offset=u.read_shift(4)),F.len=u.read_shift(1),A==2&&(F.offset=u.read_shift(2)),F.dec=u.read_shift(1),F.name.length&&N.push(F),A!=2&&(u.l+=v?13:14),F.type){case"B":(!m||F.len!=8)&&l.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(u[u.l]!==13&&(u.l=y-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=y;var E=0,S=0;for(c[0]=[],S=0;S!=N.length;++S)c[0][S]=N[S].name;for(;g-- >0;){if(u[u.l]===42){u.l+=w;continue}for(++u.l,c[++E]=[],S=0,S=0;S!=N.length;++S){var k=u.slice(u.l,u.l+N[S].len);u.l+=N[S].len,Ys(k,0);var H=Oy.utils.decode(T,k);switch(N[S].type){case"C":H.trim().length&&(c[E][S]=H.replace(/\s+$/,""));break;case"D":H.length===8?c[E][S]=new Date(+H.slice(0,4),+H.slice(4,6)-1,+H.slice(6,8)):c[E][S]=H;break;case"F":c[E][S]=parseFloat(H.trim());break;case"+":case"I":c[E][S]=v?k.read_shift(-4,"i")^2147483648:k.read_shift(4,"i");break;case"L":switch(H.trim().toUpperCase()){case"Y":case"T":c[E][S]=!0;break;case"N":case"F":c[E][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+H+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+A.toString(16));c[E][S]="##MEMO##"+(v?parseInt(H.trim(),10):k.read_shift(4));break;case"N":H=H.replace(/\u0000/g,"").trim(),H&&H!="."&&(c[E][S]=+H||0);break;case"@":c[E][S]=new Date(k.read_shift(-8,"f")-621356832e5);break;case"T":c[E][S]=new Date((k.read_shift(4)-2440588)*864e5+k.read_shift(4));break;case"Y":c[E][S]=k.read_shift(4,"i")/1e4+k.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[E][S]=-k.read_shift(-8,"f");break;case"B":if(m&&N[S].len==8){c[E][S]=k.read_shift(8,"f");break}case"G":case"P":k.l+=N[S].len;break;case"0":if(N[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[S].type)}}}if(A!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=N,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=rx(r(o,c),c);return u["!cols"]=c.DBF.map(function(A){return{wch:A.len,DBF:A}}),delete c.DBF,u}function a(o,l){try{return B0(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var c=l||{};if(+c.codepage>=0&&Wu(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Cl(),A=u_(o,{header:1,raw:!0,cellDates:!0}),h=A[0],m=A.slice(1),v=o["!cols"]||[],g=0,y=0,w=0,T=1;for(g=0;g<h.length;++g){if(((v[g]||{}).DBF||{}).name){h[g]=v[g].DBF.name,++w;continue}if(h[g]!=null){if(++w,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(y=0;y<1024;++y)if(h.indexOf(h[g]+"_"+y)==-1){h[g]+="_"+y;break}}}}var N=kn(o["!ref"]),F=[],B=[],D=[];for(g=0;g<=N.e.c-N.s.c;++g){var E="",S="",k=0,H=[];for(y=0;y<m.length;++y)m[y][g]!=null&&H.push(m[y][g]);if(H.length==0||h[g]==null){F[g]="?";continue}for(y=0;y<H.length;++y){switch(typeof H[y]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=H[y]instanceof Date?"D":"C";break;default:S="C"}k=Math.max(k,String(H[y]).length),E=E&&E!=S?"C":S}k>250&&(k=250),S=((v[g]||{}).DBF||{}).type,S=="C"&&v[g].DBF.len>k&&(k=v[g].DBF.len),E=="B"&&S=="N"&&(E="N",D[g]=v[g].DBF.dec,k=v[g].DBF.len),B[g]=E=="C"||S=="N"?k:i[E]||0,T+=B[g],F[g]=E}var P=u.next(32);for(P.write_shift(4,318902576),P.write_shift(4,m.length),P.write_shift(2,296+32*w),P.write_shift(2,T),g=0;g<4;++g)P.write_shift(4,0);for(P.write_shift(4,0|(+t[EX]||3)<<8),g=0,y=0;g<h.length;++g)if(h[g]!=null){var M=u.next(32),Q=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,Q,"sbcs"),M.write_shift(1,F[g]=="?"?"C":F[g],"sbcs"),M.write_shift(4,y),M.write_shift(1,B[g]||i[F[g]]||0),M.write_shift(1,D[g]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),y+=B[g]||i[F[g]]||0}var V=u.next(264);for(V.write_shift(4,13),g=0;g<65;++g)V.write_shift(4,0);for(g=0;g<m.length;++g){var te=u.next(T);for(te.write_shift(1,0),y=0;y<h.length;++y)if(h[y]!=null)switch(F[y]){case"L":te.write_shift(1,m[g][y]==null?63:m[g][y]?84:70);break;case"B":te.write_shift(8,m[g][y]||0,"f");break;case"N":var W="0";for(typeof m[g][y]=="number"&&(W=m[g][y].toFixed(D[y]||0)),w=0;w<B[y]-W.length;++w)te.write_shift(1,32);te.write_shift(1,W,"sbcs");break;case"D":m[g][y]?(te.write_shift(4,("0000"+m[g][y].getFullYear()).slice(-4),"sbcs"),te.write_shift(2,("00"+(m[g][y].getMonth()+1)).slice(-2),"sbcs"),te.write_shift(2,("00"+m[g][y].getDate()).slice(-2),"sbcs")):te.write_shift(8,"00000000","sbcs");break;case"C":var re=String(m[g][y]!=null?m[g][y]:"").slice(0,B[y]);for(te.write_shift(1,re,"sbcs"),w=0;w<B[y]-re.length;++w)te.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}}(),MJ=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ai(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var v=e[m];return typeof v=="number"?Q8(v):v},n=function(h,m,v){var g=m.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return g==59?h:Q8(g)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return i(uc(h),m);case"binary":return i(h,m);case"buffer":return i(nn&&Buffer.isBuffer(h)?h.toString("binary"):N0(h),m);case"array":return i(Jp(h),m)}throw new Error("Unrecognized type "+m.type)}function i(h,m){var v=h.split(/[\n\r]+/),g=-1,y=-1,w=0,T=0,N=[],F=[],B=null,D={},E=[],S=[],k=[],H=0,P;for(+m.codepage>=0&&Wu(+m.codepage);w!==v.length;++w){H=0;var M=v[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Q=M.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),V=Q[0],te;if(M.length>0)switch(V){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&F.push(M.slice(3).replace(/;;/g,";"));break;case"C":var W=!1,re=!1,z=!1,X=!1,K=-1,se=-1;for(T=1;T<Q.length;++T)switch(Q[T].charAt(0)){case"A":break;case"X":y=parseInt(Q[T].slice(1))-1,re=!0;break;case"Y":for(g=parseInt(Q[T].slice(1))-1,re||(y=0),P=N.length;P<=g;++P)N[P]=[];break;case"K":te=Q[T].slice(1),te.charAt(0)==='"'?te=te.slice(1,te.length-1):te==="TRUE"?te=!0:te==="FALSE"?te=!1:isNaN(Xu(te))?isNaN(Cv(te).getDate())||(te=Ia(te)):(te=Xu(te),B!==null&&ex(B)&&(te=fT(te))),W=!0;break;case"E":X=!0;var U=nv(Q[T].slice(1),{r:g,c:y});N[g][y]=[N[g][y],U];break;case"S":z=!0,N[g][y]=[N[g][y],"S5S"];break;case"G":break;case"R":K=parseInt(Q[T].slice(1))-1;break;case"C":se=parseInt(Q[T].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+M)}if(W&&(N[g][y]&&N[g][y].length==2?N[g][y][0]=te:N[g][y]=te,B=null),z){if(X)throw new Error("SYLK shared formula cannot have own formula");var Y=K>-1&&N[K][se];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");N[g][y][1]=eZ(Y[1],{r:g-K,c:y-se})}break;case"F":var Z=0;for(T=1;T<Q.length;++T)switch(Q[T].charAt(0)){case"X":y=parseInt(Q[T].slice(1))-1,++Z;break;case"Y":for(g=parseInt(Q[T].slice(1))-1,P=N.length;P<=g;++P)N[P]=[];break;case"M":H=parseInt(Q[T].slice(1))/20;break;case"F":break;case"G":break;case"P":B=F[parseInt(Q[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(k=Q[T].slice(1).split(" "),P=parseInt(k[0],10);P<=parseInt(k[1],10);++P)H=parseInt(k[2],10),S[P-1]=H===0?{hidden:!0}:{wch:H},y0(S[P-1]);break;case"C":y=parseInt(Q[T].slice(1))-1,S[y]||(S[y]={});break;case"R":g=parseInt(Q[T].slice(1))-1,E[g]||(E[g]={}),H>0?(E[g].hpt=H,E[g].hpx=_v(H)):H===0&&(E[g].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+M)}Z<1&&(B=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+M)}}return E.length>0&&(D["!rows"]=E),S.length>0&&(D["!cols"]=S),m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),[N,D]}function s(h,m){var v=a(h,m),g=v[0],y=v[1],w=rx(g,m);return Ai(y).forEach(function(T){w[T]=y[T]}),w}function o(h,m){return B0(s(h,m),m)}function l(h,m,v,g){var y="C;Y"+(v+1)+";X"+(g+1)+";K";switch(h.t){case"n":y+=h.v||0,h.f&&!h.F&&(y+=";E"+iP(h.f,{r:v,c:g}));break;case"b":y+=h.v?"TRUE":"FALSE";break;case"e":y+=h.w||h.v;break;case"d":y+='"'+(h.w||h.v)+'"';break;case"s":y+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function c(h,m){m.forEach(function(v,g){var y="F;W"+(g+1)+" "+(g+1)+" ";v.hidden?y+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=qy(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=$y(v.wpx)),typeof v.wch=="number"&&(y+=Math.round(v.wch))),y.charAt(y.length-1)!=" "&&h.push(y)})}function u(h,m){m.forEach(function(v,g){var y="F;";v.hidden?y+="M0;":v.hpt?y+="M"+20*v.hpt+";":v.hpx&&(y+="M"+20*Ky(v.hpx)+";"),y.length>2&&h.push(y+"R"+(g+1))})}function A(h,m){var v=["ID;PWXL;N;E"],g=[],y=kn(h["!ref"]),w,T=Array.isArray(h),N=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),h["!cols"]&&c(v,h["!cols"]),h["!rows"]&&u(v,h["!rows"]),v.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var F=y.s.r;F<=y.e.r;++F)for(var B=y.s.c;B<=y.e.c;++B){var D=Fr({r:F,c:B});w=T?(h[F]||[])[B]:h[D],!(!w||w.v==null&&(!w.f||w.F))&&g.push(l(w,h,F,B))}return v.join(N)+N+g.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:s,from_sheet:A}}(),LJ=function(){function e(i,s){switch(s.type){case"base64":return t(uc(i),s);case"binary":return t(i,s);case"buffer":return t(nn&&Buffer.isBuffer(i)?i.toString("binary"):N0(i),s);case"array":return t(Jp(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){for(var o=i.split(`
`),l=-1,c=-1,u=0,A=[];u!==o.length;++u){if(o[u].trim()==="BOT"){A[++l]=[],c=0;continue}if(!(l<0)){var h=o[u].trim().split(","),m=h[0],v=h[1];++u;for(var g=o[u]||"";(g.match(/["]/g)||[]).length&1&&u<o.length-1;)g+=`
`+o[++u];switch(g=g.trim(),+m){case-1:if(g==="BOT"){A[++l]=[],c=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?A[l][c]=!0:g==="FALSE"?A[l][c]=!1:isNaN(Xu(v))?isNaN(Cv(v).getDate())?A[l][c]=v:A[l][c]=Ia(v):A[l][c]=Xu(v),++c;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),A[l][c++]=g!==""?g:null;break}if(g==="EOD")break}}return s&&s.sheetRows&&(A=A.slice(0,s.sheetRows)),A}function r(i,s){return rx(e(i,s),s)}function n(i,s){return B0(r(i,s),s)}var a=function(){var i=function(l,c,u,A,h){l.push(c),l.push(u+","+A),l.push('"'+h.replace(/"/g,'""')+'"')},s=function(l,c,u,A){l.push(c+","+u),l.push(c==1?'"'+A.replace(/"/g,'""')+'"':A)};return function(l){var c=[],u=kn(l["!ref"]),A,h=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var m=u.s.r;m<=u.e.r;++m){s(c,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var g=Fr({r:m,c:v});if(A=h?(l[m]||[])[v]:l[g],!A){s(c,1,0,"");continue}switch(A.t){case"n":var y=A.w;!y&&A.v!=null&&(y=A.v),y==null?A.f&&!A.F?s(c,1,0,"="+A.f):s(c,1,0,""):s(c,0,y,"V");break;case"b":s(c,0,A.v?1:0,A.v?"TRUE":"FALSE");break;case"s":s(c,1,0,isNaN(A.v)?A.v:'="'+A.v+'"');break;case"d":A.w||(A.w=du(A.z||Nr[14],ds(Ia(A.v)))),s(c,0,A.w,"V");break;default:s(c,1,0,"")}}}s(c,-1,0,"EOD");var w=`\r
`,T=c.join(w);return T}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),OJ=function(){function e(A){return A.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(A){return A.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(A,h){for(var m=A.split(`
`),v=-1,g=-1,y=0,w=[];y!==m.length;++y){var T=m[y].trim().split(":");if(T[0]==="cell"){var N=Wa(T[1]);if(w.length<=N.r)for(v=w.length;v<=N.r;++v)w[v]||(w[v]=[]);switch(v=N.r,g=N.c,T[2]){case"t":w[v][g]=e(T[3]);break;case"v":w[v][g]=+T[3];break;case"vtf":var F=T[T.length-1];case"vtc":switch(T[3]){case"nl":w[v][g]=!!+T[4];break;default:w[v][g]=+T[4];break}T[2]=="vtf"&&(w[v][g]=[w[v][g],F])}}}return h&&h.sheetRows&&(w=w.slice(0,h.sheetRows)),w}function n(A,h){return rx(r(A,h),h)}function a(A,h){return B0(n(A,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(A){if(!A||!A["!ref"])return"";for(var h=[],m=[],v,g="",y=_l(A["!ref"]),w=Array.isArray(A),T=y.s.r;T<=y.e.r;++T)for(var N=y.s.c;N<=y.e.c;++N)if(g=Fr({r:T,c:N}),v=w?(A[T]||[])[N]:A[g],!(!v||v.v==null||v.t==="z")){switch(m=["cell",g,"t"],v.t){case"s":case"str":m.push(t(v.v));break;case"n":v.f?(m[2]="vtf",m[3]="n",m[4]=v.v,m[5]=t(v.f)):(m[2]="v",m[3]=v.v);break;case"b":m[2]="vt"+(v.f?"f":"c"),m[3]="nl",m[4]=v.v?"1":"0",m[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var F=ds(Ia(v.v));m[2]="vtc",m[3]="nd",m[4]=""+F,m[5]=v.w||du(v.z||Nr[14],F);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(A){return[i,s,o,s,c(A),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:u}}(),Ev=function(){function e(u,A,h,m,v){v.raw?A[h][m]=u:u===""||(u==="TRUE"?A[h][m]=!0:u==="FALSE"?A[h][m]=!1:isNaN(Xu(u))?isNaN(Cv(u).getDate())?A[h][m]=u:A[h][m]=Ia(u):A[h][m]=Xu(u))}function t(u,A){var h=A||{},m=[];if(!u||u.length===0)return m;for(var v=u.split(/[\r\n]/),g=v.length-1;g>=0&&v[g].length===0;)--g;for(var y=10,w=0,T=0;T<=g;++T)w=v[T].indexOf(" "),w==-1?w=v[T].length:w++,y=Math.max(y,w);for(T=0;T<=g;++T){m[T]=[];var N=0;for(e(v[T].slice(0,y).trim(),m,T,N,h),N=1;N<=(v[T].length-y)/10+1;++N)e(v[T].slice(y+(N-1)*10,y+N*10).trim(),m,T,N,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(u){for(var A={},h=!1,m=0,v=0;m<u.length;++m)(v=u.charCodeAt(m))==34?h=!h:!h&&v in r&&(A[v]=(A[v]||0)+1);v=[];for(m in A)Object.prototype.hasOwnProperty.call(A,m)&&v.push([A[m],m]);if(!v.length){A=n;for(m in A)Object.prototype.hasOwnProperty.call(A,m)&&v.push([A[m],m])}return v.sort(function(g,y){return g[0]-y[0]||n[g[1]]-n[y[1]]}),r[v.pop()[1]]||44}function i(u,A){var h=A||{},m="",v=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(m=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(m=u.charAt(4),u=u.slice(6)):m=a(u.slice(0,1024)):h&&h.FS?m=h.FS:m=a(u.slice(0,1024));var y=0,w=0,T=0,N=0,F=0,B=m.charCodeAt(0),D=!1,E=0,S=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var k=h.dateNF!=null?U1e(h.dateNF):null;function H(){var P=u.slice(N,F),M={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)M.t="z";else if(h.raw)M.t="s",M.v=P;else if(P.trim().length===0)M.t="s",M.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(M.t="s",M.v=P.slice(2,-1).replace(/""/g,'"')):hEe(P)?(M.t="n",M.f=P.slice(1)):(M.t="s",M.v=P);else if(P=="TRUE")M.t="b",M.v=!0;else if(P=="FALSE")M.t="b",M.v=!1;else if(!isNaN(T=Xu(P)))M.t="n",h.cellText!==!1&&(M.w=P),M.v=T;else if(!isNaN(Cv(P).getDate())||k&&P.match(k)){M.z=h.dateNF||Nr[14];var Q=0;k&&P.match(k)&&(P=j1e(P,h.dateNF,P.match(k)||[]),Q=1),h.cellDates?(M.t="d",M.v=Ia(P,Q)):(M.t="n",M.v=ds(Ia(P,Q))),h.cellText!==!1&&(M.w=du(M.z,M.v instanceof Date?ds(M.v):M.v)),h.cellNF||delete M.z}else M.t="s",M.v=P;if(M.t=="z"||(h.dense?(v[y]||(v[y]=[]),v[y][w]=M):v[Fr({c:w,r:y})]=M),N=F+1,S=u.charCodeAt(N),g.e.c<w&&(g.e.c=w),g.e.r<y&&(g.e.r=y),E==B)++w;else if(w=0,++y,h.sheetRows&&h.sheetRows<=y)return!0}e:for(;F<u.length;++F)switch(E=u.charCodeAt(F)){case 34:S===34&&(D=!D);break;case B:case 10:case 13:if(!D&&H())break e;break}return F-N>0&&H(),v["!ref"]=zr(g),v}function s(u,A){return!(A&&A.PRN)||A.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,A):rx(t(u,A),A)}function o(u,A){var h="",m=A.type=="string"?[0,0,0,0]:AP(u,A);switch(A.type){case"base64":h=uc(u);break;case"binary":h=u;break;case"buffer":A.codepage==65001?h=u.toString("utf8"):A.codepage&&typeof Oy<"u"||(h=nn&&Buffer.isBuffer(u)?u.toString("binary"):N0(u));break;case"array":h=Jp(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+A.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=pa(h.slice(3)):A.type!="string"&&A.type!="buffer"&&A.codepage==65001?h=pa(h):A.type=="binary"&&typeof Oy<"u",h.slice(0,19)=="socialcalc:version:"?OJ.to_sheet(A.type=="string"?h:pa(h),A):s(h,A)}function l(u,A){return B0(o(u,A),A)}function c(u){for(var A=[],h=kn(u["!ref"]),m,v=Array.isArray(u),g=h.s.r;g<=h.e.r;++g){for(var y=[],w=h.s.c;w<=h.e.c;++w){var T=Fr({r:g,c:w});if(m=v?(u[g]||[])[w]:u[T],!m||m.v==null){y.push("          ");continue}for(var N=(m.w||(wA(m),m.w)||"").slice(0,10);N.length<10;)N+=" ";y.push(N+(w===0?" ":""))}A.push(y.join(""))}return A.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function e2e(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=MJ.to_workbook(e,r);return r.WTF=n,a}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Ev.to_workbook(e,t)}}var Rp=function(){function e(U,Y,Z){if(U){Ys(U,U.l||0);for(var ne=Z.Enum||K;U.l<U.length;){var de=U.read_shift(2),xe=ne[de]||ne[65535],Ae=U.read_shift(2),ae=U.l+Ae,ue=xe.f&&xe.f(U,Ae,Z);if(U.l=ae,Y(ue,xe,de))return}}}function t(U,Y){switch(Y.type){case"base64":return r(tc(uc(U)),Y);case"binary":return r(tc(U),Y);case"buffer":case"array":return r(U,Y)}throw"Unsupported type "+Y.type}function r(U,Y){if(!U)return U;var Z=Y||{},ne=Z.dense?[]:{},de="Sheet1",xe="",Ae=0,ae={},ue=[],le=[],ie={s:{r:0,c:0},e:{r:0,c:0}},De=Z.sheetRows||0;if(U[2]==0&&(U[3]==8||U[3]==9)&&U.length>=16&&U[14]==5&&U[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(U[2]==2)Z.Enum=K,e(U,function(Re,je,We){switch(We){case 0:Z.vers=Re,Re>=4096&&(Z.qpro=!0);break;case 6:ie=Re;break;case 204:Re&&(xe=Re);break;case 222:xe=Re;break;case 15:case 51:Z.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:We==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=Z.dateNF||Nr[14],Z.cellDates&&(Re[1].t="d",Re[1].v=fT(Re[1].v))),Z.qpro&&Re[3]>Ae&&(ne["!ref"]=zr(ie),ae[de]=ne,ue.push(de),ne=Z.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},Ae=Re[3],de=xe||"Sheet"+(Ae+1),xe="");var ct=Z.dense?(ne[Re[0].r]||[])[Re[0].c]:ne[Fr(Re[0])];if(ct){ct.t=Re[1].t,ct.v=Re[1].v,Re[1].z!=null&&(ct.z=Re[1].z),Re[1].f!=null&&(ct.f=Re[1].f);break}Z.dense?(ne[Re[0].r]||(ne[Re[0].r]=[]),ne[Re[0].r][Re[0].c]=Re[1]):ne[Fr(Re[0])]=Re[1];break}},Z);else if(U[2]==26||U[2]==14)Z.Enum=se,U[2]==14&&(Z.qpro=!0,U.l=0),e(U,function(Re,je,We){switch(We){case 204:de=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>Ae&&(ne["!ref"]=zr(ie),ae[de]=ne,ue.push(de),ne=Z.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},Ae=Re[3],de="Sheet"+(Ae+1)),De>0&&Re[0].r>=De)break;Z.dense?(ne[Re[0].r]||(ne[Re[0].r]=[]),ne[Re[0].r][Re[0].c]=Re[1]):ne[Fr(Re[0])]=Re[1],ie.e.c<Re[0].c&&(ie.e.c=Re[0].c),ie.e.r<Re[0].r&&(ie.e.r=Re[0].r);break;case 27:Re[14e3]&&(le[Re[14e3][0]]=Re[14e3][1]);break;case 1537:le[Re[0]]=Re[1],Re[0]==Ae&&(de=Re[1]);break}},Z);else throw new Error("Unrecognized LOTUS BOF "+U[2]);if(ne["!ref"]=zr(ie),ae[xe||de]=ne,ue.push(xe||de),!le.length)return{SheetNames:ue,Sheets:ae};for(var Le={},Be=[],Ce=0;Ce<le.length;++Ce)ae[ue[Ce]]?(Be.push(le[Ce]||ue[Ce]),Le[le[Ce]]=ae[le[Ce]]||ae[ue[Ce]]):(Be.push(le[Ce]),Le[le[Ce]]={"!ref":"A1"});return{SheetNames:Be,Sheets:Le}}function n(U,Y){var Z=Y||{};if(+Z.codepage>=0&&Wu(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=Cl(),de=kn(U["!ref"]),xe=Array.isArray(U),Ae=[];Ut(ne,0,i(1030)),Ut(ne,6,l(de));for(var ae=Math.min(de.e.r,8191),ue=de.s.r;ue<=ae;++ue)for(var le=Bi(ue),ie=de.s.c;ie<=de.e.c;++ie){ue===de.s.r&&(Ae[ie]=Ka(ie));var De=Ae[ie]+le,Le=xe?(U[ue]||[])[ie]:U[De];if(!(!Le||Le.t=="z"))if(Le.t=="n")(Le.v|0)==Le.v&&Le.v>=-32768&&Le.v<=32767?Ut(ne,13,m(ue,ie,Le.v)):Ut(ne,14,g(ue,ie,Le.v));else{var Be=wA(Le);Ut(ne,15,A(ue,ie,Be.slice(0,239)))}}return Ut(ne,1),ne.end()}function a(U,Y){var Z=Y||{};if(+Z.codepage>=0&&Wu(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=Cl();Ut(ne,0,s(U));for(var de=0,xe=0;de<U.SheetNames.length;++de)(U.Sheets[U.SheetNames[de]]||{})["!ref"]&&Ut(ne,27,X(U.SheetNames[de],xe++));var Ae=0;for(de=0;de<U.SheetNames.length;++de){var ae=U.Sheets[U.SheetNames[de]];if(!(!ae||!ae["!ref"])){for(var ue=kn(ae["!ref"]),le=Array.isArray(ae),ie=[],De=Math.min(ue.e.r,8191),Le=ue.s.r;Le<=De;++Le)for(var Be=Bi(Le),Ce=ue.s.c;Ce<=ue.e.c;++Ce){Le===ue.s.r&&(ie[Ce]=Ka(Ce));var Re=ie[Ce]+Be,je=le?(ae[Le]||[])[Ce]:ae[Re];if(!(!je||je.t=="z"))if(je.t=="n")Ut(ne,23,H(Le,Ce,Ae,je.v));else{var We=wA(je);Ut(ne,22,E(Le,Ce,Ae,We.slice(0,239)))}}++Ae}}return Ut(ne,1),ne.end()}function i(U){var Y=dt(2);return Y.write_shift(2,U),Y}function s(U){var Y=dt(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var Z=0,ne=0,de=0,xe=0;xe<U.SheetNames.length;++xe){var Ae=U.SheetNames[xe],ae=U.Sheets[Ae];if(!(!ae||!ae["!ref"])){++de;var ue=_l(ae["!ref"]);Z<ue.e.r&&(Z=ue.e.r),ne<ue.e.c&&(ne=ue.e.c)}}return Z>8191&&(Z=8191),Y.write_shift(2,Z),Y.write_shift(1,de),Y.write_shift(1,ne),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(U,Y,Z){var ne={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&Z.qpro?(ne.s.c=U.read_shift(1),U.l++,ne.s.r=U.read_shift(2),ne.e.c=U.read_shift(1),U.l++,ne.e.r=U.read_shift(2),ne):(ne.s.c=U.read_shift(2),ne.s.r=U.read_shift(2),Y==12&&Z.qpro&&(U.l+=2),ne.e.c=U.read_shift(2),ne.e.r=U.read_shift(2),Y==12&&Z.qpro&&(U.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function l(U){var Y=dt(8);return Y.write_shift(2,U.s.c),Y.write_shift(2,U.s.r),Y.write_shift(2,U.e.c),Y.write_shift(2,U.e.r),Y}function c(U,Y,Z){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return Z.qpro&&Z.vers!=20768?(ne[0].c=U.read_shift(1),ne[3]=U.read_shift(1),ne[0].r=U.read_shift(2),U.l+=2):(ne[2]=U.read_shift(1),ne[0].c=U.read_shift(2),ne[0].r=U.read_shift(2)),ne}function u(U,Y,Z){var ne=U.l+Y,de=c(U,Y,Z);if(de[1].t="s",Z.vers==20768){U.l++;var xe=U.read_shift(1);return de[1].v=U.read_shift(xe,"utf8"),de}return Z.qpro&&U.l++,de[1].v=U.read_shift(ne-U.l,"cstr"),de}function A(U,Y,Z){var ne=dt(7+Z.length);ne.write_shift(1,255),ne.write_shift(2,Y),ne.write_shift(2,U),ne.write_shift(1,39);for(var de=0;de<ne.length;++de){var xe=Z.charCodeAt(de);ne.write_shift(1,xe>=128?95:xe)}return ne.write_shift(1,0),ne}function h(U,Y,Z){var ne=c(U,Y,Z);return ne[1].v=U.read_shift(2,"i"),ne}function m(U,Y,Z){var ne=dt(7);return ne.write_shift(1,255),ne.write_shift(2,Y),ne.write_shift(2,U),ne.write_shift(2,Z,"i"),ne}function v(U,Y,Z){var ne=c(U,Y,Z);return ne[1].v=U.read_shift(8,"f"),ne}function g(U,Y,Z){var ne=dt(13);return ne.write_shift(1,255),ne.write_shift(2,Y),ne.write_shift(2,U),ne.write_shift(8,Z,"f"),ne}function y(U,Y,Z){var ne=U.l+Y,de=c(U,Y,Z);if(de[1].v=U.read_shift(8,"f"),Z.qpro)U.l=ne;else{var xe=U.read_shift(2);F(U.slice(U.l,U.l+xe),de),U.l+=xe}return de}function w(U,Y,Z){var ne=Y&32768;return Y&=-32769,Y=(ne?U:0)+(Y>=8192?Y-16384:Y),(ne?"":"$")+(Z?Ka(Y):Bi(Y))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(U,Y){Ys(U,0);for(var Z=[],ne=0,de="",xe="",Ae="",ae="";U.l<U.length;){var ue=U[U.l++];switch(ue){case 0:Z.push(U.read_shift(8,"f"));break;case 1:xe=w(Y[0].c,U.read_shift(2),!0),de=w(Y[0].r,U.read_shift(2),!1),Z.push(xe+de);break;case 2:{var le=w(Y[0].c,U.read_shift(2),!0),ie=w(Y[0].r,U.read_shift(2),!1);xe=w(Y[0].c,U.read_shift(2),!0),de=w(Y[0].r,U.read_shift(2),!1),Z.push(le+ie+":"+xe+de)}break;case 3:if(U.l<U.length){console.error("WK1 premature formula end");return}break;case 4:Z.push("("+Z.pop()+")");break;case 5:Z.push(U.read_shift(2));break;case 6:{for(var De="";ue=U[U.l++];)De+=String.fromCharCode(ue);Z.push('"'+De.replace(/"/g,'""')+'"')}break;case 8:Z.push("-"+Z.pop());break;case 23:Z.push("+"+Z.pop());break;case 22:Z.push("NOT("+Z.pop()+")");break;case 20:case 21:ae=Z.pop(),Ae=Z.pop(),Z.push(["AND","OR"][ue-20]+"("+Ae+","+ae+")");break;default:if(ue<32&&N[ue])ae=Z.pop(),Ae=Z.pop(),Z.push(Ae+N[ue]+ae);else if(T[ue]){if(ne=T[ue][1],ne==69&&(ne=U[U.l++]),ne>Z.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+Z.join("|")+"|");return}var Le=Z.slice(-ne);Z.length-=ne,Z.push(T[ue][0]+"("+Le.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}Z.length==1?Y[1].f=""+Z[0]:console.error("WK1 bad formula parse |"+Z.join("|")+"|")}function B(U){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=U.read_shift(2),Y[3]=U[U.l++],Y[0].c=U[U.l++],Y}function D(U,Y){var Z=B(U);return Z[1].t="s",Z[1].v=U.read_shift(Y-4,"cstr"),Z}function E(U,Y,Z,ne){var de=dt(6+ne.length);de.write_shift(2,U),de.write_shift(1,Z),de.write_shift(1,Y),de.write_shift(1,39);for(var xe=0;xe<ne.length;++xe){var Ae=ne.charCodeAt(xe);de.write_shift(1,Ae>=128?95:Ae)}return de.write_shift(1,0),de}function S(U,Y){var Z=B(U);Z[1].v=U.read_shift(2);var ne=Z[1].v>>1;if(Z[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return Z[1].v=ne,Z}function k(U,Y){var Z=B(U),ne=U.read_shift(4),de=U.read_shift(4),xe=U.read_shift(2);if(xe==65535)return ne===0&&de===3221225472?(Z[1].t="e",Z[1].v=15):ne===0&&de===3489660928?(Z[1].t="e",Z[1].v=42):Z[1].v=0,Z;var Ae=xe&32768;return xe=(xe&32767)-16446,Z[1].v=(1-Ae*2)*(de*Math.pow(2,xe+32)+ne*Math.pow(2,xe)),Z}function H(U,Y,Z,ne){var de=dt(14);if(de.write_shift(2,U),de.write_shift(1,Z),de.write_shift(1,Y),ne==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var xe=0,Ae=0,ae=0,ue=0;return ne<0&&(xe=1,ne=-ne),Ae=Math.log2(ne)|0,ne/=Math.pow(2,Ae-31),ue=ne>>>0,(ue&2147483648)==0&&(ne/=2,++Ae,ue=ne>>>0),ne-=ue,ue|=2147483648,ue>>>=0,ne*=Math.pow(2,32),ae=ne>>>0,de.write_shift(4,ae),de.write_shift(4,ue),Ae+=16383+(xe?32768:0),de.write_shift(2,Ae),de}function P(U,Y){var Z=k(U);return U.l+=Y-14,Z}function M(U,Y){var Z=B(U),ne=U.read_shift(4);return Z[1].v=ne>>6,Z}function Q(U,Y){var Z=B(U),ne=U.read_shift(8,"f");return Z[1].v=ne,Z}function V(U,Y){var Z=Q(U);return U.l+=Y-10,Z}function te(U,Y){return U[U.l+Y-1]==0?U.read_shift(Y,"cstr"):""}function W(U,Y){var Z=U[U.l++];Z>Y-1&&(Z=Y-1);for(var ne="";ne.length<Z;)ne+=String.fromCharCode(U[U.l++]);return ne}function re(U,Y,Z){if(!(!Z.qpro||Y<21)){var ne=U.read_shift(1);U.l+=17,U.l+=1,U.l+=2;var de=U.read_shift(Y-21,"cstr");return[ne,de]}}function z(U,Y){for(var Z={},ne=U.l+Y;U.l<ne;){var de=U.read_shift(2);if(de==14e3){for(Z[de]=[0,""],Z[de][0]=U.read_shift(2);U[U.l];)Z[de][1]+=String.fromCharCode(U[U.l]),U.l++;U.l++}}return Z}function X(U,Y){var Z=dt(5+U.length);Z.write_shift(2,14e3),Z.write_shift(2,Y);for(var ne=0;ne<U.length;++ne){var de=U.charCodeAt(ne);Z[Z.l++]=de>127?95:de}return Z[Z.l++]=0,Z}var K={0:{n:"BOF",f:Qi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:te},222:{n:"SHEETNAMELP",f:W},65535:{n:""}},se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:k},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:z},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:M},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:V},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:te},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function t2e(e){var t={},r=e.match(jo),n=0,a=!1;if(r)for(;n!=r.length;++n){var i=Mr(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=kR[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var r2e=function(){var e=Hy("t"),t=Hy("rPr");function r(i){var s=i.match(e);if(!s)return{t:"s",v:""};var o={t:"s",v:Bn(s[1])},l=i.match(t);return l&&(o.s=t2e(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),n2e=function(){var t=/(\r\n|\n)/g;function r(a,i,s){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),a.b&&(i.push("<b>"),s.push("</b>")),a.i&&(i.push("<i>"),s.push("</i>")),a.strike&&(i.push("<s>"),s.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),s.push("</"+l+">")),s.push("</span>"),a}function n(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),a2e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,i2e=/<(?:\w+:)?r>/,s2e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function eP(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Bn(pa(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=pa(e),r&&(n.h=jR(n.t))):e.match(i2e)&&(n.r=pa(e),n.t=Bn(pa((e.replace(s2e,"").match(a2e)||[]).join("").replace(jo,""))),r&&(n.h=n2e(r2e(n.r)))),n):{t:""}}var o2e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,l2e=/<(?:\w+:)?(?:si|sstItem)>/g,c2e=/<\/(?:\w+:)?(?:si|sstItem)>/;function u2e(e,t){var r=[],n="";if(!e)return r;var a=e.match(o2e);if(a){n=a[2].replace(l2e,"").split(c2e);for(var i=0;i!=n.length;++i){var s=eP(n[i].trim(),t);s!=null&&(r[r.length]=s)}a=Mr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var d2e=/^\s|\s$|[\t\n\r]/;function UJ(e,t){if(!t.bookSST)return"";var r=[ki];r[r.length]=Ot("sst",null,{xmlns:mm[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(d2e)&&(i+=' xml:space="preserve"'),i+=">"+ia(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function f2e(e){return[e.read_shift(4),e.read_shift(4)]}function A2e(e,t){var r=[],n=!1;return DA(e,function(i,s,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function h2e(e,t){return t||(t=dt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var p2e=_ye;function m2e(e){var t=Cl();_t(t,159,h2e(e));for(var r=0;r<e.length;++r)_t(t,19,p2e(e[r]));return _t(t,160),t.end()}function jJ(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function dA(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function g2e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=dA(e,4),t.U=dA(e,4),t.W=dA(e,4),t}function v2e(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function x2e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(v2e(e));return t}function y2e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function b2e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=dA(e,4),t.U=dA(e,4),t.W=dA(e,4),t}function w2e(e){var t=b2e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function HJ(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function QJ(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function C2e(e){var t=dA(e);switch(t.Minor){case 2:return[t.Minor,E2e(e)];case 3:return[t.Minor,_2e()];case 4:return[t.Minor,S2e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function E2e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=HJ(e,r),a=QJ(e,e.length-e.l);return{t:"Std",h:n,v:a}}function _2e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function S2e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(jo,function(i){var s=Mr(i);switch(pf(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function T2e(e,t){var r={},n=r.EncryptionVersionInfo=dA(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=HJ(e,a),t-=a,r.EncryptionVerifier=QJ(e,t),r}function N2e(e){var t={},r=t.EncryptionVersionInfo=dA(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function tP(e){var t=0,r,n=jJ(e),a=n.length+1,i,s,o,l,c;for(r=x0(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)s=r[i],o=(t&16384)===0?0:1,l=t<<1&32767,c=o|l,t=c^s;return t^52811}var VJ=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},a=function(s,o){return n(s^o)},i=function(s){for(var o=t[s.length-1],l=104,c=s.length-1;c>=0;--c)for(var u=s[c],A=0;A!=7;++A)u&64&&(o^=r[l]),u*=2,--l;return o};return function(s){for(var o=jJ(s),l=i(o),c=o.length,u=x0(16),A=0;A!=16;++A)u[A]=0;var h,m,v;for((c&1)===1&&(h=l>>8,u[c]=a(e[0],h),--c,h=l&255,m=o[o.length-1],u[c]=a(m,h));c>0;)--c,h=l>>8,u[c]=a(o[c],h),--c,h=l&255,u[c]=a(o[c],h);for(c=15,v=15-o.length;v>0;)h=l>>8,u[c]=a(e[v],h),--c,--v,h=l&255,u[c]=a(o[c],h),--c,--v;return u}}(),B2e=function(e,t,r,n,a){a||(a=t),n||(n=VJ(e));var i,s;for(i=0;i!=t.length;++i)s=t[i],s^=n[r],s=(s>>5|s<<3)&255,a[i]=s,++r;return[a,r,n]},k2e=function(e){var t=0,r=VJ(e);return function(n){var a=B2e("",n,t,r);return t=a[1],a[0]}};function I2e(e,t,r,n){var a={key:Qi(e),verificationBytes:Qi(e)};return r.password&&(a.verifier=tP(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=k2e(r.password)),a}function F2e(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=N2e(e):n.Data=T2e(e,t),n}function D2e(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?F2e(e,t-2,n):I2e(e,r.biff>=8?t:t-2,r,n),n}var zJ=function(){function e(a,i){switch(i.type){case"base64":return t(uc(a),i);case"binary":return t(a,i);case"buffer":return t(nn&&Buffer.isBuffer(a)?a.toString("binary"):N0(a),i);case"array":return t(Jp(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var s=i||{},o=s.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,A){Array.isArray(o)&&(o[A]=[]);for(var h=/\\\w+\b/g,m=0,v,g=-1;v=h.exec(u);){switch(v[0]){case"\\cell":var y=u.slice(m,h.lastIndex-v[0].length);if(y[0]==" "&&(y=y.slice(1)),++g,y.length){var w={v:y,t:"s"};Array.isArray(o)?o[A][g]=w:o[Fr({r:A,c:g})]=w}break}m=h.lastIndex}g>c.e.c&&(c.e.c=g)}),o["!ref"]=zr(c),o}function r(a,i){return B0(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],s=kn(a["!ref"]),o,l=Array.isArray(a),c=s.s.r;c<=s.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=s.s.c;u<=s.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=s.s.c;u<=s.e.c;++u){var A=Fr({r:c,c:u});o=l?(a[c]||[])[u]:a[A],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(wA(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function R2e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Gy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function P2e(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),i=Math.min(t,r,n),s=a-i;if(s===0)return[0,0,t];var o=0,l=0,c=a+i;switch(l=s/(c>1?2-c:c),a){case t:o=((r-n)/s+6)%6;break;case r:o=(n-t)/s+2;break;case n:o=(t-r)/s+4;break}return[o/6,l,c/2]}function M2e(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),i=n-a/2,s=[i,i,i],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,s[0]+=a,s[1]+=l;break;case 1:l=a*(2-o),s[0]+=l,s[1]+=a;break;case 2:l=a*(o-2),s[1]+=a,s[2]+=l;break;case 3:l=a*(4-o),s[1]+=l,s[2]+=a;break;case 4:l=a*(o-4),s[2]+=a,s[0]+=l;break;case 5:l=a*(6-o),s[2]+=l,s[0]+=a;break}for(var c=0;c!=3;++c)s[c]=Math.round(s[c]*255);return s}function l_(e,t){if(t===0)return e;var r=P2e(R2e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Gy(M2e(r))}var GJ=6,L2e=15,O2e=1,Bo=GJ;function qy(e){return Math.floor((e+Math.round(128/Bo)/256)*Bo)}function $y(e){return Math.floor((e-5)/Bo*100+.5)/100}function c_(e){return Math.round((e*Bo+5)/Bo*256)/256}function NB(e){return c_($y(qy(e)))}function rP(e){var t=Math.abs(e-NB(e)),r=Bo;if(t>.005)for(Bo=O2e;Bo<L2e;++Bo)Math.abs(e-NB(e))<=t&&(t=Math.abs(e-NB(e)),r=Bo);Bo=r}function y0(e){e.width?(e.wpx=qy(e.width),e.wch=$y(e.wpx),e.MDW=Bo):e.wpx?(e.wch=$y(e.wpx),e.width=c_(e.wch),e.MDW=Bo):typeof e.wch=="number"&&(e.width=c_(e.wch),e.wpx=qy(e.width),e.MDW=Bo),e.customWidth&&delete e.customWidth}var U2e=96,qJ=U2e;function Ky(e){return e*96/qJ}function _v(e){return e*qJ/96}var j2e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function H2e(e,t,r,n){t.Borders=[];var a={},i=!1;(e[0].match(jo)||[]).forEach(function(s){var o=Mr(s);switch(pf(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ba(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ba(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function Q2e(e,t,r,n){t.Fills=[];var a={},i=!1;(e[0].match(jo)||[]).forEach(function(s){var o=Mr(s);switch(pf(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function V2e(e,t,r,n){t.Fonts=[];var a={},i=!1;(e[0].match(jo)||[]).forEach(function(s){var o=Mr(s);switch(pf(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=pa(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ba(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ba(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ba(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ba(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ba(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ba(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ba(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=kR[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ba(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=Fp[a.color.index];a.color.index==81&&(l=Fp[1]),l||(l=Fp[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=l_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function z2e(e,t,r){t.NumberFmt=[];for(var n=Ai(Nr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Nr[n[a]];var i=e[0].match(jo);if(i)for(a=0;a<i.length;++a){var s=Mr(i[a]);switch(pf(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Bn(pa(s.formatCode)),l=parseInt(s.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}uA(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}function G2e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Ot("numFmt",null,{numFmtId:n,formatCode:ia(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ot("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var I2=["numFmtId","fillId","fontId","borderId","xfId"],F2=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function q2e(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(jo)||[]).forEach(function(i){var s=Mr(i),o=0;switch(pf(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<I2.length;++o)n[I2[o]]&&(n[I2[o]]=parseInt(n[I2[o]],10));for(o=0;o<F2.length;++o)n[F2[o]]&&(n[F2[o]]=Ba(n[F2[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};s.vertical&&(l.vertical=s.vertical),s.horizontal&&(l.horizontal=s.horizontal),s.textRotation!=null&&(l.textRotation=s.textRotation),s.indent&&(l.indent=s.indent),s.wrapText&&(l.wrapText=Ba(s.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}function $2e(e){var t=[];return t[t.length]=Ot("cellXfs",null),e.forEach(function(r){t[t.length]=Ot("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ot("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var K2e=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var A;return(A=o.match(t))&&z2e(A,u,c),(A=o.match(a))&&V2e(A,u,l,c),(A=o.match(n))&&Q2e(A,u,l,c),(A=o.match(i))&&H2e(A,u,l,c),(A=o.match(r))&&q2e(A,u,c),u}}();function $J(e,t){var r=[ki,Ot("styleSheet",null,{xmlns:mm[0],"xmlns:vt":ls.vt})],n;return e.SSF&&(n=G2e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=$2e(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function W2e(e,t){var r=e.read_shift(2),n=Mo(e);return[r,n]}function Y2e(e,t,r){r||(r=dt(6+4*t.length)),r.write_shift(2,e),ks(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function X2e(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=Fye(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=Iye(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Mo(e),n}function J2e(e,t){t||(t=dt(153)),t.write_shift(2,e.sz*20),Dye(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),i_(e.color,t);var n=0;return n=2,t.write_shift(1,n),ks(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Z2e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],BB,eCe=Oo;function F7(e,t){t||(t=dt(84)),BB||(BB=uT(Z2e));var r=BB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(i_({auto:1},t),i_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function tCe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function KJ(e,t,r){r||(r=dt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function s1(e,t){return t||(t=dt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var rCe=Oo;function nCe(e,t){return t||(t=dt(51)),t.write_shift(1,0),s1(null,t),s1(null,t),s1(null,t),s1(null,t),s1(null,t),t.length>t.l?t.slice(0,t.l):t}function aCe(e,t){return t||(t=dt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),a_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function iCe(e,t,r){var n=dt(2052);return n.write_shift(4,e),a_(t,n),a_(r,n),n.length>n.l?n.slice(0,n.l):n}function sCe(e,t,r){var n={};n.NumberFmt=[];for(var a in Nr)n.NumberFmt[a]=Nr[a];n.CellXf=[],n.Fonts=[];var i=[],s=!1;return DA(e,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],uA(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=l_(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:i.push(u),s=!0;break;case 38:i.pop(),s=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!s||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function oCe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(_t(e,615,Ju(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&_t(e,44,Y2e(a,t[a]))}),_t(e,616))}}function lCe(e){var t=1;_t(e,611,Ju(t)),_t(e,43,J2e({sz:12,color:{theme:1},name:"Calibri",family:2})),_t(e,612)}function cCe(e){var t=2;_t(e,603,Ju(t)),_t(e,45,F7({patternType:"none"})),_t(e,45,F7({patternType:"gray125"})),_t(e,604)}function uCe(e){var t=1;_t(e,613,Ju(t)),_t(e,46,nCe()),_t(e,614)}function dCe(e){var t=1;_t(e,626,Ju(t)),_t(e,47,KJ({numFmtId:0},65535)),_t(e,627)}function fCe(e,t){_t(e,617,Ju(t.length)),t.forEach(function(r){_t(e,47,KJ(r,0))}),_t(e,618)}function ACe(e){var t=1;_t(e,619,Ju(t)),_t(e,48,aCe({xfId:0,name:"Normal"})),_t(e,620)}function hCe(e){var t=0;_t(e,505,Ju(t)),_t(e,506)}function pCe(e){var t=0;_t(e,508,iCe(t,"TableStyleMedium9","PivotStyleMedium4")),_t(e,509)}function mCe(e,t){var r=Cl();return _t(r,278),oCe(r,e.SSF),lCe(r),cCe(r),uCe(r),dCe(r),fCe(r,t.cellXfs),ACe(r),hCe(r),pCe(r),_t(r,279),r.end()}var gCe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function vCe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(jo)||[]).forEach(function(a){var i=Mr(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[gCe.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function xCe(){}function yCe(){}var bCe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,wCe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,CCe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function ECe(e,t,r){t.themeElements={};var n;[["clrScheme",bCe,vCe],["fontScheme",wCe,xCe],["fmtScheme",CCe,yCe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var _Ce=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function WJ(e,t){(!e||e.length===0)&&(e=nP());var r,n={};if(!(r=e.match(_Ce)))throw new Error("themeElements not found in theme");return ECe(r[0],n,t),n.raw=e,n}function nP(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ki];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function SCe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var s;try{s=HX(i,{type:"array"})}catch{return}var o=rc(s,"theme/theme/theme1.xml",!0);if(o)return WJ(o,r)}}function TCe(e){return e.read_shift(4)}function NCe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=BCe(e,4);break;case 2:t.xclrValue=NJ(e);break;case 3:t.xclrValue=TCe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function BCe(e,t){return Oo(e,t)}function kCe(e,t){return Oo(e,t)}function ICe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=NCe(e);break;case 6:n[1]=kCe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function FCe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(ICe(e,r-e.l));return{ixfe:n,ext:i}}function DCe(e,t){t.forEach(function(r){r[0]})}function RCe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Mo(e)}}function PCe(e){var t=dt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ks(e.name,t),t.slice(0,t.l)}function MCe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function LCe(e){var t=dt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function OCe(e,t){var r=dt(8+2*t.length);return r.write_shift(4,e),ks(t,r),r.slice(0,r.l)}function UCe(e){return e.l+=4,e.read_shift(4)!=0}function jCe(e,t){var r=dt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function HCe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},i=[],s=!1,o=2;return DA(e,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(A){o==1?n.Cell.push({type:n.Types[A[0]-1].name,index:A[1]}):o==0&&n.Value.push({type:n.Types[A[0]-1].name,index:A[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),s=!0;break;case 36:i.pop(),s=!1;break;default:if(!c.T){if(!s||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function QCe(){var e=Cl();return _t(e,332),_t(e,334,Ju(1)),_t(e,335,PCe({name:"XLDAPR",version:12e4,flags:3496657072})),_t(e,336),_t(e,339,OCe(1,"XLDAPR")),_t(e,52),_t(e,35,Ju(514)),_t(e,4096,Ju(0)),_t(e,4097,Jc(1)),_t(e,36),_t(e,53),_t(e,340),_t(e,337,jCe(1)),_t(e,51,LCe([[1,0]])),_t(e,338),_t(e,333),e.end()}function VCe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,i=2,s;return e.replace(jo,function(o){var l=Mr(o);switch(pf(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(s=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function YJ(){var e=[ki];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function zCe(e){var t=[];if(!e)return t;var r=1;return(e.match(jo)||[]).forEach(function(n){var a=Mr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function GCe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Fr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function qCe(e,t,r){var n=[];return DA(e,function(i,s,o){switch(o){case 63:n.push(i);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function $Ce(e,t,r,n){if(!e)return e;var a=n||{},i=!1;DA(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},a)}function KCe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Lg=1024;function XJ(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Ot("xml",null,{"xmlns:v":Jl.v,"xmlns:o":Jl.o,"xmlns:x":Jl.x,"xmlns:mv":Jl.mv}).replace(/\/>/,">"),Ot("o:shapelayout",Ot("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ot("v:shapetype",[Ot("v:stroke",null,{joinstyle:"miter"}),Ot("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Lg<e*1e3;)Lg+=1e3;return t.forEach(function(i){var s=Wa(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ot("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Ot("v:fill",l,o),u={on:"t",obscured:"t"};++Lg,a=a.concat(["<v:shape"+Qy({id:"_x0000_s"+Lg,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Ot("v:shadow",null,u),Ot("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Js("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Js("x:AutoFill","False"),Js("x:Row",String(s.r)),Js("x:Column",String(s.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function D7(e,t,r,n){var a=Array.isArray(e),i;t.forEach(function(s){var o=Wa(s.ref);if(a?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[s.ref],!i){i={t:"z"},a?e[o.r][o.c]=i:e[s.ref]=i;var l=kn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=zr(l);c!==e["!ref"]&&(e["!ref"]=c)}i.c||(i.c=[]);var u={a:s.author,t:s.t,r:s.r,T:r};s.h&&(u.h=s.h);for(var A=i.c.length-1;A>=0;--A){if(!r&&i.c[A].T)return;r&&!i.c[A].T&&i.c.splice(A,1)}if(r&&n){for(A=0;A<n.length;++A)if(u.a==n[A].id){u.a=n[A].name||u.a;break}}i.c.push(u)})}function WCe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Mr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=Wa(l.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var A=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!A&&!!A[1]&&eP(A[1])||{r:"",t:"",h:""};c.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),c.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=h.h),n.push(c)}}}}),n}function JJ(e){var t=[ki,Ot("comments",null,{xmlns:mm[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=ia(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(ia(l.a))),i.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Js("t",ia(i[0]||"")));else{for(var s=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)s+=`Reply:
    `+i[o]+`
`;t.push(Js("t",ia(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function YCe(e,t){var r=[],n=!1,a={},i=0;return e.replace(jo,function(o,l){var c=Mr(o);switch(pf(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":a.t=e.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function XCe(e,t,r){var n=[ki,Ot("ThreadedComments",null,{xmlns:ls.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=l.id:l.parentId=i,s.ID=l.id,s.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(Ot("threadedComment",Js("text",s.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function JCe(e,t){var r=[],n=!1;return e.replace(jo,function(i){var s=Mr(i);switch(pf(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return i}),r}function ZCe(e){var t=[ki,Ot("personList",null,{xmlns:ls.TCMNT,"xmlns:x":mm[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Ot("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function eEe(e){var t={};t.iauthor=e.read_shift(4);var r=ym(e);return t.rfx=r.s,t.ref=Fr(r.s),e.l+=16,t}function tEe(e,t){return t==null&&(t=dt(36)),t.write_shift(4,e[1].iauthor),nx(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var rEe=Mo;function nEe(e){return ks(e.slice(0,54))}function aEe(e,t){var r=[],n=[],a={},i=!1;return DA(e,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function iEe(e){var t=Cl(),r=[];return _t(t,628),_t(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),_t(t,632,nEe(a.a)))})}),_t(t,631),_t(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:Wa(n[0]),e:Wa(n[0])};_t(t,635,tEe([i,a])),a.t&&a.t.length>0&&_t(t,637,Tye(a)),_t(t,636),delete a.iauthor})}),_t(t,634),_t(t,629),t.end()}var sEe="application/vnd.ms-office.vbaProject";function oEe(e){var t=hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");hr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),hr.write(t)}function lEe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&hr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var ZJ=["xlsb","xlsm","xlam","biff8","xla"];function cEe(){return{"!type":"dialog"}}function uEe(){return{"!type":"dialog"}}function dEe(){return{"!type":"macro"}}function fEe(){return{"!type":"macro"}}var nv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,s){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=s.length>0?parseInt(s,10)|0:0;return o?u+=t.c:--u,l?c+=t.r:--c,a+(o?"":"$")+Ka(u)+(l?"":"$")+Bi(c)}return function(a,i){return t=i,a.replace(e,r)}}(),aP=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,iP=function(){return function(t,r){return t.replace(aP,function(n,a,i,s,o,l){var c=GR(s)-(i?0:r.c),u=zR(l)-(o?0:r.r),A=u==0?"":o?u+1:"["+u+"]",h=c==0?"":i?c+1:"["+c+"]";return a+"R"+A+"C"+h})}}();function eZ(e,t){return e.replace(aP,function(r,n,a,i,s,o){return n+(a=="$"?a+i:Ka(GR(i)+t.c))+(s=="$"?s+o:Bi(zR(o)+t.r))})}function AEe(e,t,r){var n=_l(t),a=n.s,i=Wa(r),s={r:i.r-a.r,c:i.c-a.c};return eZ(e,s)}function hEe(e){return e.length!=1}function R7(e){return e.replace(/_xlfn\./g,"")}function Ui(e){e.l+=1}function b0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function tZ(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return rZ(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),s=b0(e),o=b0(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function rZ(e){var t=b0(e),r=b0(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function pEe(e,t,r){if(r.biff<8)return rZ(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=b0(e),s=b0(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function nZ(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return mEe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=b0(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function mEe(e){var t=b0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function gEe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function vEe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return xEe(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),s=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:o}}function xEe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function yEe(e,t,r){var n=(e[e.l++]&96)>>5,a=tZ(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function bEe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var s=tZ(e,i,r);return[n,a,s]}function wEe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function CEe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function EEe(e,t,r){var n=(e[e.l++]&96)>>5,a=pEe(e,t-1,r);return[n,a]}function _Ee(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function P7(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function SEe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function TEe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function NEe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function BEe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function kEe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function aZ(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function IEe(e){return e.read_shift(2),aZ(e)}function FEe(e){return e.read_shift(2),aZ(e)}function DEe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=nZ(e,0,r);return[n,a]}function REe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=vEe(e,0,r);return[n,a]}function PEe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=nZ(e,0,r);return[n,a,i]}function MEe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[U_e[a],oZ[a],n]}function LEe(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:OEe(e);return[a,(i[0]===0?oZ:O_e)[i[1]]]}function OEe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function UEe(e,t,r){e.l+=r&&r.biff==2?3:4}function jEe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function HEe(e){return e.l++,RA[e.read_shift(1)]}function QEe(e){return e.l++,e.read_shift(2)}function VEe(e){return e.l++,e.read_shift(1)!==0}function zEe(e){return e.l++,Ro(e)}function GEe(e,t,r){return e.l++,Ub(e,t-1,r)}function qEe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=wi(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=RA[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ro(e);break;case 2:r[1]=bm(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function $Ee(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?ym:AT)(e));return a}function KEe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var o=0;o!=a;++o)s[i][o]=qEe(e,r.biff);return s}function WEe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function YEe(e,t,r){if(r.biff==5)return XEe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function XEe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function JEe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function ZEe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function e_e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function t_e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var r_e=Oo,n_e=Oo,a_e=Oo;function Hb(e,t,r){return e.l+=2,[gEe(e)]}function sP(e){return e.l+=6,[]}var i_e=Hb,s_e=sP,o_e=sP,l_e=Hb;function iZ(e){return e.l+=2,[Qi(e),e.read_shift(2)&1]}var c_e=Hb,u_e=iZ,d_e=sP,f_e=Hb,A_e=Hb,h_e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function p_e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),s=h_e[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:a,C:i}}function m_e(e){return e.l+=2,[e.read_shift(4)]}function g_e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function v_e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function x_e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function y_e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function b_e(e){return e.l+=4,[0,0]}var M7={1:{n:"PtgExp",f:jEe},2:{n:"PtgTbl",f:a_e},3:{n:"PtgAdd",f:Ui},4:{n:"PtgSub",f:Ui},5:{n:"PtgMul",f:Ui},6:{n:"PtgDiv",f:Ui},7:{n:"PtgPower",f:Ui},8:{n:"PtgConcat",f:Ui},9:{n:"PtgLt",f:Ui},10:{n:"PtgLe",f:Ui},11:{n:"PtgEq",f:Ui},12:{n:"PtgGe",f:Ui},13:{n:"PtgGt",f:Ui},14:{n:"PtgNe",f:Ui},15:{n:"PtgIsect",f:Ui},16:{n:"PtgUnion",f:Ui},17:{n:"PtgRange",f:Ui},18:{n:"PtgUplus",f:Ui},19:{n:"PtgUminus",f:Ui},20:{n:"PtgPercent",f:Ui},21:{n:"PtgParen",f:Ui},22:{n:"PtgMissArg",f:Ui},23:{n:"PtgStr",f:GEe},26:{n:"PtgSheet",f:g_e},27:{n:"PtgEndSheet",f:v_e},28:{n:"PtgErr",f:HEe},29:{n:"PtgBool",f:VEe},30:{n:"PtgInt",f:QEe},31:{n:"PtgNum",f:zEe},32:{n:"PtgArray",f:_Ee},33:{n:"PtgFunc",f:MEe},34:{n:"PtgFuncVar",f:LEe},35:{n:"PtgName",f:WEe},36:{n:"PtgRef",f:DEe},37:{n:"PtgArea",f:yEe},38:{n:"PtgMemArea",f:JEe},39:{n:"PtgMemErr",f:r_e},40:{n:"PtgMemNoMem",f:n_e},41:{n:"PtgMemFunc",f:ZEe},42:{n:"PtgRefErr",f:e_e},43:{n:"PtgAreaErr",f:wEe},44:{n:"PtgRefN",f:REe},45:{n:"PtgAreaN",f:EEe},46:{n:"PtgMemAreaN",f:x_e},47:{n:"PtgMemNoMemN",f:y_e},57:{n:"PtgNameX",f:YEe},58:{n:"PtgRef3d",f:PEe},59:{n:"PtgArea3d",f:bEe},60:{n:"PtgRefErr3d",f:t_e},61:{n:"PtgAreaErr3d",f:CEe},255:{}},w_e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},C_e={1:{n:"PtgElfLel",f:iZ},2:{n:"PtgElfRw",f:f_e},3:{n:"PtgElfCol",f:i_e},6:{n:"PtgElfRwV",f:A_e},7:{n:"PtgElfColV",f:l_e},10:{n:"PtgElfRadical",f:c_e},11:{n:"PtgElfRadicalS",f:d_e},13:{n:"PtgElfColS",f:s_e},15:{n:"PtgElfColSV",f:o_e},16:{n:"PtgElfRadicalLel",f:u_e},25:{n:"PtgList",f:p_e},29:{n:"PtgSxName",f:m_e},255:{}},E_e={0:{n:"PtgAttrNoop",f:b_e},1:{n:"PtgAttrSemi",f:kEe},2:{n:"PtgAttrIf",f:NEe},4:{n:"PtgAttrChoose",f:SEe},8:{n:"PtgAttrGoto",f:TEe},16:{n:"PtgAttrSum",f:UEe},32:{n:"PtgAttrBaxcel",f:P7},33:{n:"PtgAttrBaxcel",f:P7},64:{n:"PtgAttrSpace",f:IEe},65:{n:"PtgAttrSpaceSemi",f:FEe},128:{n:"PtgAttrIfError",f:BEe},255:{}};function Qb(e,t,r,n){if(n.biff<8)return Oo(e,t);for(var a=e.l+t,i=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=KEe(e,0,n),i.push(r[s][1]);break;case"PtgMemArea":r[s][2]=$Ee(e,r[s][1],n),i.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),i.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=a-e.l,t!==0&&i.push(Oo(e,t)),i}function Vb(e,t,r){for(var n=e.l+t,a,i,s=[];n!=e.l;)t=n-e.l,i=e[e.l],a=M7[i]||M7[w_e[i]],(i===24||i===25)&&(a=(i===24?C_e:E_e)[e[e.l+1]]),!a||!a.f?Oo(e,t):s.push([a.n,a.f(e,t,r)]);return s}function __e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var S_e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function T_e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function sZ(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function L7(e,t,r){var n=sZ(e,t,r);return n=="#REF"?n:T_e(n,r)}function So(e,t,r,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},o=[],l,c,u,A=0,h=0,m,v="";if(!e[0]||!e[0][0])return"";for(var g=-1,y="",w=0,T=e[0].length;w<T;++w){var N=e[0][w];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(e[0][g][1][0]){case 0:y=ci(" ",e[0][g][1][1]);break;case 1:y=ci("\r",e[0][g][1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}c=c+y,g=-1}o.push(c+S_e[N[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=ly(N[1][1],s,a),o.push(cy(u,i));break;case"PtgRefN":u=r?ly(N[1][1],r,a):N[1][1],o.push(cy(u,i));break;case"PtgRef3d":A=N[1][1],u=ly(N[1][2],s,a),v=L7(n,A,a),o.push(v+"!"+cy(u,i));break;case"PtgFunc":case"PtgFuncVar":var F=N[1][0],B=N[1][1];F||(F=0),F&=127;var D=F==0?[]:o.slice(-F);o.length-=F,B==="User"&&(B=D.shift()),o.push(B+"("+D.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":m=f7(N[1][1],r?{s:r}:s,a),o.push(_B(m,a));break;case"PtgArea":m=f7(N[1][1],s,a),o.push(_B(m,a));break;case"PtgArea3d":A=N[1][1],m=N[1][2],v=L7(n,A,a),o.push(v+"!"+_B(m,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=N[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],S=E?E.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),o.push(S);break;case"PtgNameX":var k=N[1][1];h=N[1][2];var H;if(a.biff<=5)k<0&&(k=-k),n[k]&&(H=n[k][h]);else{var P="";if(((n[k]||[])[0]||[])[0]==14849||(((n[k]||[])[0]||[])[0]==1025?n[k][h]&&n[k][h].itab>0&&(P=n.SheetNames[n[k][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[k]&&n[k][h])P+=n[k][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var M=(sZ(n,k,a)||"").split(";;");M[h-1]?P=M[h-1]:P+="SH33TJSERRX"}o.push(P);break}H||(H={Name:"SH33TJSERRY"}),o.push(H.Name);break;case"PtgParen":var Q="(",V=")";if(g>=0){switch(y="",e[0][g][1][0]){case 2:Q=ci(" ",e[0][g][1][1])+Q;break;case 3:Q=ci("\r",e[0][g][1][1])+Q;break;case 4:V=ci(" ",e[0][g][1][1])+V;break;case 5:V=ci("\r",e[0][g][1][1])+V;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}o.push(Q+o.pop()+V);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:N[1][1],r:N[1][0]};var te={c:r.c,r:r.r};if(n.sharedf[Fr(u)]){var W=n.sharedf[Fr(u)];o.push(So(W,s,te,n,a))}else{var re=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(So(c[1],s,te,n,a)),re=!0;break}re||o.push(N[1])}break;case"PtgArray":o.push("{"+__e(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&g>=0&&z.indexOf(e[0][w][0])==-1){N=e[0][g];var X=!0;switch(N[1][0]){case 4:X=!1;case 0:y=ci(" ",N[1][1]);break;case 5:X=!1;case 1:y=ci("\r",N[1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((X?y:"")+o.pop()+(X?"":y)),g=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function N_e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,s=e.read_shift(a);if(s==65535)return[[],Oo(e,t-2)];var o=Vb(e,s,r);return t!==s+a&&(i=Qb(e,t-s-a,o,r)),e.l=n,[o,i]}function B_e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,s=e.read_shift(a);if(s==65535)return[[],Oo(e,t-2)];var o=Vb(e,s,r);return t!==s+a&&(i=Qb(e,t-s-a,o,r)),e.l=n,[o,i]}function k_e(e,t,r,n){var a=e.l+t,i=Vb(e,n,r),s;return a!==e.l&&(s=Qb(e,a-e.l,i,r)),[i,s]}function I_e(e,t,r){var n=e.l+t,a,i=e.read_shift(2),s=Vb(e,i,r);return i==65535?[[],Oo(e,t-2)]:(t!==i+2&&(a=Qb(e,n-i-2,s,r)),[s,a])}function F_e(e){var t;if(aA(e,e.l+6)!==65535)return[Ro(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function D_e(e){if(e==null){var t=dt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Zp(e);return Zp(0)}function kB(e,t,r){var n=e.l+t,a=mf(e);r.biff==2&&++e.l;var i=F_e(e),s=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=B_e(e,n-e.l,r);return{cell:a,val:i[0],formula:o,shared:s>>3&1,tt:i[1]}}function R_e(e,t,r,n,a){var i=tm(t,r,a),s=D_e(e.v),o=dt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=dt(e.bf.length),u=0;u<e.bf.length;++u)c[u]=e.bf[u];var A=Bs([i,s,o,c]);return A}function hT(e,t,r){var n=e.read_shift(4),a=Vb(e,n,r),i=e.read_shift(4),s=i>0?Qb(e,i,a,r):null;return[a,s]}var P_e=hT,pT=hT,M_e=hT,L_e=hT,O_e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},oZ={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},U_e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function O7(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function j_e(e){var t="of:="+e.replace(aP,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function IB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function H_e(e){return e.replace(/\./,"!")}var dy={},av={},fy=typeof Map<"u";function oP(e,t,r){var n=0,a=e.length;if(r){if(fy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=fy?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(fy?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function mT(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Bo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=$y(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=c_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Pp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function k0(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){uA(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function lZ(e,t,r,n,a,i){try{n.cellNF&&(e.z=Nr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ia(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Nr[t]==null&&uA(O1e[t]||"General",t),e.t==="e")e.w=e.w||RA[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=jy(e.v);else if(e.t==="d"){var s=ds(e.v);(s|0)===s?e.w=s.toString(10):e.w=jy(s)}else{if(e.v===void 0)return"";e.w=Xp(e.v,av)}else e.t==="d"?e.w=du(t,ds(e.v),av):e.w=du(t,e.v,av)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=l_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=l_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function Q_e(e,t,r){if(e&&e["!ref"]){var n=kn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function V_e(e,t){var r=kn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=zr(r))}var z_e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,G_e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,q_e=/<(?:\w:)?hyperlink [^>]*>/mg,$_e=/"(\w*:\w*)"/,K_e=/<(?:\w:)?col\b[^>]*[\/]?>/g,W_e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Y_e=/<(?:\w:)?pageMargins[^>]*\/>/g,cZ=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,X_e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,J_e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Z_e(e,t,r,n,a,i,s){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",A=e.match(G_e);A?(c=e.slice(0,A.index),u=e.slice(A.index+A[0].length)):c=u=e;var h=c.match(cZ);h?lP(h[0],o,a,r):(h=c.match(X_e))&&tSe(h[0],h[1]||"",o,a,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var v=c.slice(m,m+50).match($_e);v&&V_e(o,v[1])}var g=c.match(J_e);g&&g[1]&&hSe(g[1],a);var y=[];if(t.cellStyles){var w=c.match(K_e);w&&cSe(y,w)}A&&gSe(A[1],o,t,l,i,s);var T=u.match(W_e);T&&(o["!autofilter"]=dSe(T[0]));var N=[],F=u.match(z_e);if(F)for(m=0;m!=F.length;++m)N[m]=kn(F[m].slice(F[m].indexOf('"')+1));var B=u.match(q_e);B&&sSe(o,B,n);var D=u.match(Y_e);if(D&&(o["!margins"]=oSe(Mr(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=zr(l)),t.sheetRows>0&&o["!ref"]){var E=kn(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>l.e.r&&(E.e.r=l.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>l.e.c&&(E.e.c=l.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=zr(E))}return y.length>0&&(o["!cols"]=y),N.length>0&&(o["!merges"]=N),o}function eSe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+zr(e[r])+'"/>';return t+"</mergeCells>"}function lP(e,t,r,n){var a=Mr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Bn(pa(a.codeName)))}function tSe(e,t,r,n,a){lP(e.slice(0,e.indexOf(">")),r,n,a)}function rSe(e,t,r,n,a){var i=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}i=!0,s.codeName=Yd(ia(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+Ot("outlinePr",null,c)}!i&&!o||(a[a.length]=Ot("sheetPr",o,s))}var nSe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],aSe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function iSe(e){var t={sheet:1};return nSe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),aSe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=tP(e.password).toString(16).toUpperCase()),Ot("sheetProtection",null,t)}function sSe(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var i=Mr(pa(t[a]),!0);if(!i.ref)return;var s=((r||{})["!id"]||[])[i.id];s?(i.Target=s.Target,i.location&&(i.Target+="#"+Bn(i.location))):(i.Target="#"+Bn(i.location),s={Target:i.Target,TargetMode:"Internal"}),i.Rel=s,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=kn(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Fr({c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function oSe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function lSe(e){return Pp(e),Ot("pageMargins",null,e)}function cSe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Mr(t[n],!0);a.hidden&&(a.hidden=Ba(a.hidden));var i=parseInt(a.min,10)-1,s=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,rP(a.width)),y0(a);i<=s;)e[i++]=Fa(a)}}function uSe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Ot("col",null,mT(a,n)));return r[r.length]="</cols>",r.join("")}function dSe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function fSe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:zr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,s=_l(a);s.s.r==s.e.r&&(s.e.r=_l(t["!ref"]).e.r,a=zr(s));for(var o=0;o<i.length;++o){var l=i[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ot("autoFilter",null,{ref:a})}var ASe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function hSe(e,t){t.Views||(t.Views=[{}]),(e.match(ASe)||[]).forEach(function(r,n){var a=Mr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ba(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function pSe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ot("sheetViews",Ot("sheetView",null,a),{})}function mSe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=RA[e.v];break;case"d":n&&n.cellDates?a=Ia(e.v,-1).toISOString():(e=Fa(e),e.t="n",a=""+(e.v=ds(Ia(e.v)))),typeof e.z>"u"&&(e.z=Nr[14]);break;default:a=e.v;break}var o=Js("v",ia(a)),l={r:t},c=k0(n.cellXfs,e,n);switch(c!==0&&(l.s=c),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Js("v",""+oP(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=i&&(e.t=i,e.v=s),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ot("f",ia(e.f),u)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Ot("c",o,l)}var gSe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=Hy("v"),s=Hy("f");return function(l,c,u,A,h,m){for(var v=0,g="",y=[],w=[],T=0,N=0,F=0,B="",D,E,S=0,k=0,H,P,M=0,Q=0,V=Array.isArray(m.CellXf),te,W=[],re=[],z=Array.isArray(c),X=[],K={},se=!1,U=!!u.sheetStubs,Y=l.split(t),Z=0,ne=Y.length;Z!=ne;++Z){g=Y[Z].trim();var de=g.length;if(de!==0){var xe=0;e:for(v=0;v<de;++v)switch(g[v]){case">":if(g[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(E=Mr(g.slice(xe,v),!0),S=E.r!=null?parseInt(E.r,10):S+1,k=-1,u.sheetRows&&u.sheetRows<S)continue;K={},se=!1,E.ht&&(se=!0,K.hpt=parseFloat(E.ht),K.hpx=_v(K.hpt)),E.hidden=="1"&&(se=!0,K.hidden=!0),E.outlineLevel!=null&&(se=!0,K.level=+E.outlineLevel),se&&(X[S-1]=K)}break;case"<":xe=v;break}if(xe>=v)break;if(E=Mr(g.slice(xe,v),!0),S=E.r!=null?parseInt(E.r,10):S+1,k=-1,!(u.sheetRows&&u.sheetRows<S)){A.s.r>S-1&&(A.s.r=S-1),A.e.r<S-1&&(A.e.r=S-1),u&&u.cellStyles&&(K={},se=!1,E.ht&&(se=!0,K.hpt=parseFloat(E.ht),K.hpx=_v(K.hpt)),E.hidden=="1"&&(se=!0,K.hidden=!0),E.outlineLevel!=null&&(se=!0,K.level=+E.outlineLevel),se&&(X[S-1]=K)),y=g.slice(v).split(e);for(var Ae=0;Ae!=y.length&&y[Ae].trim().charAt(0)=="<";++Ae);for(y=y.slice(Ae),v=0;v!=y.length;++v)if(g=y[v].trim(),g.length!==0){if(w=g.match(r),T=v,N=0,F=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,w!=null&&w.length===2){for(T=0,B=w[1],N=0;N!=B.length&&!((F=B.charCodeAt(N)-64)<1||F>26);++N)T=26*T+F;--T,k=T}else++k;for(N=0;N!=g.length&&g.charCodeAt(N)!==62;++N);if(++N,E=Mr(g.slice(0,N),!0),E.r||(E.r=Fr({r:S-1,c:k})),B=g.slice(N),D={t:""},(w=B.match(i))!=null&&w[1]!==""&&(D.v=Bn(w[1])),u.cellFormula){if((w=B.match(s))!=null&&w[1]!==""){if(D.f=Bn(pa(w[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=R7(D.f)),w[0].indexOf('t="array"')>-1)D.F=(B.match(a)||[])[1],D.F.indexOf(":")>-1&&W.push([kn(D.F),D.F]);else if(w[0].indexOf('t="shared"')>-1){P=Mr(w[0]);var ae=Bn(pa(w[1]));u.xlfn||(ae=R7(ae)),re[parseInt(P.si,10)]=[P,ae,E.r]}}else(w=B.match(/<f[^>]*\/>/))&&(P=Mr(w[0]),re[P.si]&&(D.f=AEe(re[P.si][1],re[P.si][2],E.r)));var ue=Wa(E.r);for(N=0;N<W.length;++N)ue.r>=W[N][0].s.r&&ue.r<=W[N][0].e.r&&ue.c>=W[N][0].s.c&&ue.c<=W[N][0].e.c&&(D.F=W[N][1])}if(E.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(U)D.t="z";else continue;else D.t=E.t||"n";switch(A.s.c>k&&(A.s.c=k),A.e.c<k&&(A.e.c=k),D.t){case"n":if(D.v==""||D.v==null){if(!U)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!U)continue;D.t="z"}else H=dy[parseInt(D.v,10)],D.v=H.t,D.r=H.r,u.cellHTML&&(D.h=H.h);break;case"str":D.t="s",D.v=D.v!=null?pa(D.v):"",u.cellHTML&&(D.h=jR(D.v));break;case"inlineStr":w=B.match(n),D.t="s",w!=null&&(H=eP(w[1]))?(D.v=H.t,u.cellHTML&&(D.h=H.h)):D.v="";break;case"b":D.v=Ba(D.v);break;case"d":u.cellDates?D.v=Ia(D.v,1):(D.v=ds(Ia(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=dJ[D.v];break}if(M=Q=0,te=null,V&&E.s!==void 0&&(te=m.CellXf[E.s],te!=null&&(te.numFmtId!=null&&(M=te.numFmtId),u.cellStyles&&te.fillId!=null&&(Q=te.fillId))),lZ(D,M,Q,u,h,m),u.cellDates&&V&&D.t=="n"&&ex(Nr[M])&&(D.t="d",D.v=fT(D.v)),E.cm&&u.xlmeta){var le=(u.xlmeta.Cell||[])[+E.cm-1];le&&le.type=="XLDAPR"&&(D.D=!0)}if(z){var ie=Wa(E.r);c[ie.r]||(c[ie.r]=[]),c[ie.r][ie.c]=D}else c[E.r]=D}}}}X.length>0&&(c["!rows"]=X)}}();function vSe(e,t,r,n){var a=[],i=[],s=kn(e["!ref"]),o="",l,c="",u=[],A=0,h=0,m=e["!rows"],v=Array.isArray(e),g={r:c},y,w=-1;for(h=s.s.c;h<=s.e.c;++h)u[h]=Ka(h);for(A=s.s.r;A<=s.e.r;++A){for(i=[],c=Bi(A),h=s.s.c;h<=s.e.c;++h){l=u[h]+c;var T=v?(e[A]||[])[h]:e[l];T!==void 0&&(o=mSe(T,l,e,t))!=null&&i.push(o)}(i.length>0||m&&m[A])&&(g={r:c},m&&m[A]&&(y=m[A],y.hidden&&(g.hidden=1),w=-1,y.hpx?w=Ky(y.hpx):y.hpt&&(w=y.hpt),w>-1&&(g.ht=w,g.customHeight=1),y.level&&(g.outlineLevel=y.level)),a[a.length]=Ot("row",i.join(""),g))}if(m)for(;A<m.length;++A)m&&m[A]&&(g={r:A+1},y=m[A],y.hidden&&(g.hidden=1),w=-1,y.hpx?w=Ky(y.hpx):y.hpt&&(w=y.hpt),w>-1&&(g.ht=w,g.customHeight=1),y.level&&(g.outlineLevel=y.level),a[a.length]=Ot("row","",g));return a.join("")}function uZ(e,t,r,n){var a=[ki,Ot("worksheet",null,{xmlns:mm[0],"xmlns:r":ls.r})],i=r.SheetNames[e],s=0,o="",l=r.Sheets[i];l==null&&(l={});var c=l["!ref"]||"A1",u=kn(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=zr(u)}n||(n={}),l["!comments"]=[];var A=[];rSe(l,r,e,t,a),a[a.length]=Ot("dimension",null,{ref:c}),a[a.length]=pSe(l,t,e,r),t.sheetFormat&&(a[a.length]=Ot("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=uSe(l,l["!cols"])),a[s=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=vSe(l,t),o.length>0&&(a[a.length]=o)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),l["!protect"]&&(a[a.length]=iSe(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=fSe(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=eSe(l["!merges"]));var h=-1,m,v=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(g){g[1].Target&&(m={ref:g[0]},g[1].Target.charAt(0)!="#"&&(v=ra(n,-1,ia(g[1].Target).replace(/#.*$/,""),un.HLINK),m["r:id"]="rId"+v),(h=g[1].Target.indexOf("#"))>-1&&(m.location=ia(g[1].Target.slice(h+1))),g[1].Tooltip&&(m.tooltip=ia(g[1].Tooltip)),a[a.length]=Ot("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=lSe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Js("ignoredErrors",Ot("ignoredError",null,{numberStoredAsText:1,sqref:c}))),A.length>0&&(v=ra(n,-1,"../drawings/drawing"+(e+1)+".xml",un.DRAW),a[a.length]=Ot("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=A),l["!comments"].length>0&&(v=ra(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",un.VML),a[a.length]=Ot("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function xSe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function ySe(e,t,r){var n=dt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Ky(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var A=-1,h=-1,m=u<<10;m<u+1<<10;++m){c.c=m;var v=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Fr(c)];v&&(A<0&&(A=m),h=m)}A<0||(++o,n.write_shift(4,A),n.write_shift(4,h))}var g=n.l;return n.l=l,n.write_shift(4,o),n.l=g,n.length>n.l?n.slice(0,n.l):n}function bSe(e,t,r,n){var a=ySe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&_t(e,0,a)}var wSe=ym,CSe=nx;function ESe(){}function _Se(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Nye(e),r}function SSe(e,t,r){r==null&&(r=dt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return i_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),sJ(e,r),r.slice(0,r.l)}function TSe(e){var t=hu(e);return[t]}function NSe(e,t,r){return r==null&&(r=dt(8)),gm(t,r)}function BSe(e){var t=vm(e);return[t]}function kSe(e,t,r){return r==null&&(r=dt(4)),xm(t,r)}function ISe(e){var t=hu(e),r=e.read_shift(1);return[t,r,"b"]}function FSe(e,t,r){return r==null&&(r=dt(9)),gm(t,r),r.write_shift(1,e.v?1:0),r}function DSe(e){var t=vm(e),r=e.read_shift(1);return[t,r,"b"]}function RSe(e,t,r){return r==null&&(r=dt(5)),xm(t,r),r.write_shift(1,e.v?1:0),r}function PSe(e){var t=hu(e),r=e.read_shift(1);return[t,r,"e"]}function MSe(e,t,r){return r==null&&(r=dt(9)),gm(t,r),r.write_shift(1,e.v),r}function LSe(e){var t=vm(e),r=e.read_shift(1);return[t,r,"e"]}function OSe(e,t,r){return r==null&&(r=dt(8)),xm(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function USe(e){var t=hu(e),r=e.read_shift(4);return[t,r,"s"]}function jSe(e,t,r){return r==null&&(r=dt(12)),gm(t,r),r.write_shift(4,t.v),r}function HSe(e){var t=vm(e),r=e.read_shift(4);return[t,r,"s"]}function QSe(e,t,r){return r==null&&(r=dt(8)),xm(t,r),r.write_shift(4,t.v),r}function VSe(e){var t=hu(e),r=Ro(e);return[t,r,"n"]}function zSe(e,t,r){return r==null&&(r=dt(16)),gm(t,r),Zp(e.v,r),r}function dZ(e){var t=vm(e),r=Ro(e);return[t,r,"n"]}function GSe(e,t,r){return r==null&&(r=dt(12)),xm(t,r),Zp(e.v,r),r}function qSe(e){var t=hu(e),r=WR(e);return[t,r,"n"]}function $Se(e,t,r){return r==null&&(r=dt(12)),gm(t,r),oJ(e.v,r),r}function KSe(e){var t=vm(e),r=WR(e);return[t,r,"n"]}function WSe(e,t,r){return r==null&&(r=dt(8)),xm(t,r),oJ(e.v,r),r}function YSe(e){var t=hu(e),r=qR(e);return[t,r,"is"]}function XSe(e){var t=hu(e),r=Mo(e);return[t,r,"str"]}function JSe(e,t,r){return r==null&&(r=dt(12+4*e.v.length)),gm(t,r),ks(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ZSe(e){var t=vm(e),r=Mo(e);return[t,r,"str"]}function eTe(e,t,r){return r==null&&(r=dt(8+4*e.v.length)),xm(t,r),ks(e.v,r),r.length>r.l?r.slice(0,r.l):r}function tTe(e,t,r){var n=e.l+t,a=hu(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"b"];if(r.cellFormula){e.l+=2;var o=pT(e,n-e.l,r);s[3]=So(o,null,a,r.supbooks,r)}else e.l=n;return s}function rTe(e,t,r){var n=e.l+t,a=hu(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"e"];if(r.cellFormula){e.l+=2;var o=pT(e,n-e.l,r);s[3]=So(o,null,a,r.supbooks,r)}else e.l=n;return s}function nTe(e,t,r){var n=e.l+t,a=hu(e);a.r=r["!row"];var i=Ro(e),s=[a,i,"n"];if(r.cellFormula){e.l+=2;var o=pT(e,n-e.l,r);s[3]=So(o,null,a,r.supbooks,r)}else e.l=n;return s}function aTe(e,t,r){var n=e.l+t,a=hu(e);a.r=r["!row"];var i=Mo(e),s=[a,i,"str"];if(r.cellFormula){e.l+=2;var o=pT(e,n-e.l,r);s[3]=So(o,null,a,r.supbooks,r)}else e.l=n;return s}var iTe=ym,sTe=nx;function oTe(e,t){return t==null&&(t=dt(4)),t.write_shift(4,e),t}function lTe(e,t){var r=e.l+t,n=ym(e),a=$R(e),i=Mo(e),s=Mo(e),o=Mo(e);e.l=r;var l={rfx:n,relId:a,loc:i,display:o};return s&&(l.Tooltip=s),l}function cTe(e,t){var r=dt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));nx({s:Wa(e[0]),e:Wa(e[0])},r),KR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return ks(a||"",r),ks(e[1].Tooltip||"",r),ks("",r),r.slice(0,r.l)}function uTe(){}function dTe(e,t,r){var n=e.l+t,a=lJ(e),i=e.read_shift(1),s=[a];if(s[2]=i,r.cellFormula){var o=P_e(e,n-e.l,r);s[1]=o}else e.l=n;return s}function fTe(e,t,r){var n=e.l+t,a=ym(e),i=[a];if(r.cellFormula){var s=L_e(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}function ATe(e,t,r){r==null&&(r=dt(18));var n=mT(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var fZ=["left","right","top","bottom","header","footer"];function hTe(e){var t={};return fZ.forEach(function(r){t[r]=Ro(e)}),t}function pTe(e,t){return t==null&&(t=dt(48)),Pp(e),fZ.forEach(function(r){Zp(e[r],t)}),t}function mTe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function gTe(e,t,r){r==null&&(r=dt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function vTe(e){var t=dt(24);return t.write_shift(4,4),t.write_shift(4,1),nx(e,t),t}function xTe(e,t){return t==null&&(t=dt(66)),t.write_shift(2,e.password?tP(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function yTe(){}function bTe(){}function wTe(e,t,r,n,a,i,s){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=!1,h=!1,m,v,g,y,w,T,N,F,B,D=[];o.biff=12,o["!row"]=0;var E=0,S=!1,k=[],H={},P=o.supbooks||a.supbooks||[[]];if(P.sharedf=H,P.arrayf=k,P.SheetNames=a.SheetNames||a.Sheets.map(function(z){return z.name}),!o.supbooks&&(o.supbooks=P,a.Names))for(var M=0;M<a.Names.length;++M)P[0][M+1]=a.Names[M];var Q=[],V=[],te=!1;Wy[16]={n:"BrtShortReal",f:dZ};var W;if(DA(e,function(X,K,se){if(!h)switch(se){case 148:c=X;break;case 0:m=X,o.sheetRows&&o.sheetRows<=m.r&&(h=!0),F=Bi(y=m.r),o["!row"]=m.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=_v(X.hpt)),V[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:X[2]},X[2]){case"n":v.v=X[1];break;case"s":N=dy[X[1]],v.v=N.t,v.r=N.r;break;case"b":v.v=!!X[1];break;case"e":v.v=X[1],o.cellText!==!1&&(v.w=RA[v.v]);break;case"str":v.t="s",v.v=X[1];break;case"is":v.t="s",v.v=X[1].t;break}if((g=s.CellXf[X[0].iStyleRef])&&lZ(v,g.numFmtId,null,o,i,s),w=X[0].c==-1?w+1:X[0].c,o.dense?(l[y]||(l[y]=[]),l[y][w]=v):l[Ka(w)+F]=v,o.cellFormula){for(S=!1,E=0;E<k.length;++E){var U=k[E];m.r>=U[0].s.r&&m.r<=U[0].e.r&&w>=U[0].s.c&&w<=U[0].e.c&&(v.F=zr(U[0]),S=!0)}!S&&X.length>3&&(v.f=X[3])}if(u.s.r>m.r&&(u.s.r=m.r),u.s.c>w&&(u.s.c=w),u.e.r<m.r&&(u.e.r=m.r),u.e.c<w&&(u.e.c=w),o.cellDates&&g&&v.t=="n"&&ex(Nr[g.numFmtId])){var Y=yp(v.v);Y&&(v.t="d",v.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}W&&(W.type=="XLDAPR"&&(v.D=!0),W=void 0);break;case 1:case 12:if(!o.sheetStubs||A)break;v={t:"z",v:void 0},w=X[0].c==-1?w+1:X[0].c,o.dense?(l[y]||(l[y]=[]),l[y][w]=v):l[Ka(w)+F]=v,u.s.r>m.r&&(u.s.r=m.r),u.s.c>w&&(u.s.c=w),u.e.r<m.r&&(u.e.r=m.r),u.e.c<w&&(u.e.c=w),W&&(W.type=="XLDAPR"&&(v.D=!0),W=void 0);break;case 176:D.push(X);break;case 49:W=((o.xlmeta||{}).Cell||[])[X-1];break;case 494:var Z=n["!id"][X.relId];for(Z?(X.Target=Z.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=Z):X.relId==""&&(X.Target="#"+X.loc),y=X.rfx.s.r;y<=X.rfx.e.r;++y)for(w=X.rfx.s.c;w<=X.rfx.e.c;++w)o.dense?(l[y]||(l[y]=[]),l[y][w]||(l[y][w]={t:"z",v:void 0}),l[y][w].l=X):(T=Fr({c:w,r:y}),l[T]||(l[T]={t:"z",v:void 0}),l[T].l=X);break;case 426:if(!o.cellFormula)break;k.push(X),B=o.dense?l[y][w]:l[Ka(w)+F],B.f=So(X[1],u,{r:m.r,c:w},P,o),B.F=zr(X[0]);break;case 427:if(!o.cellFormula)break;H[Fr(X[0].s)]=X[1],B=o.dense?l[y][w]:l[Ka(w)+F],B.f=So(X[1],u,{r:m.r,c:w},P,o);break;case 60:if(!o.cellStyles)break;for(;X.e>=X.s;)Q[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},te||(te=!0,rP(X.w/256)),y0(Q[X.e+1]);break;case 161:l["!autofilter"]={ref:zr(X)};break;case 476:l["!margins"]=X;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),X.name&&(a.Sheets[r].CodeName=X.name),(X.above||X.left)&&(l["!outline"]={above:X.above,left:X.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),X.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:A=!0;break;case 36:A=!1;break;case 37:A=!0;break;case 38:A=!1;break;default:if(!K.T){if(!A||o.WTF)throw new Error("Unexpected record 0x"+se.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=zr(c||u)),o.sheetRows&&l["!ref"]){var re=kn(l["!ref"]);o.sheetRows<=+re.e.r&&(re.e.r=o.sheetRows-1,re.e.r>u.e.r&&(re.e.r=u.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>u.e.c&&(re.e.c=u.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),l["!fullref"]=l["!ref"],l["!ref"]=zr(re))}return D.length>0&&(l["!merges"]=D),Q.length>0&&(l["!cols"]=Q),V.length>0&&(l["!rows"]=V),l}function CTe(e,t,r,n,a,i,s){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Fa(t),t.z=t.z||Nr[14],t.v=ds(Ia(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=k0(a.cellXfs,t,a),t.l&&i["!links"].push([Fr(l),t.l]),t.c&&i["!comments"].push([Fr(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=oP(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,s?_t(e,18,QSe(t,l)):_t(e,7,jSe(t,l))):(l.t="str",s?_t(e,17,eTe(t,l)):_t(e,6,JSe(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?_t(e,13,WSe(t,l)):_t(e,2,$Se(t,l)):s?_t(e,16,GSe(t,l)):_t(e,5,zSe(t,l)),!0;case"b":return l.t="b",s?_t(e,15,RSe(t,l)):_t(e,4,FSe(t,l)),!0;case"e":return l.t="e",s?_t(e,14,OSe(t,l)):_t(e,3,MSe(t,l)),!0}return s?_t(e,12,kSe(t,l)):_t(e,1,NSe(t,l)),!0}function ETe(e,t,r,n){var a=kn(t["!ref"]||"A1"),i,s="",o=[];_t(e,145);var l=Array.isArray(t),c=a.e.r;t["!rows"]&&(c=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=c;++u){s=Bi(u),bSe(e,t,a,u);var A=!1;if(u<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){u===a.s.r&&(o[h]=Ka(h)),i=o[h]+s;var m=l?(t[u]||[])[h]:t[i];if(!m){A=!1;continue}A=CTe(e,m,u,h,n,t,A)}}_t(e,146)}function _Te(e,t){!t||!t["!merges"]||(_t(e,177,oTe(t["!merges"].length)),t["!merges"].forEach(function(r){_t(e,176,sTe(r))}),_t(e,178))}function STe(e,t){!t||!t["!cols"]||(_t(e,390),t["!cols"].forEach(function(r,n){r&&_t(e,60,ATe(n,r))}),_t(e,391))}function TTe(e,t){!t||!t["!ref"]||(_t(e,648),_t(e,649,vTe(kn(t["!ref"]))),_t(e,650))}function NTe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ra(r,-1,n[1].Target.replace(/#.*$/,""),un.HLINK);_t(e,494,cTe(n,a))}}),delete t["!links"]}function BTe(e,t,r,n){if(t["!comments"].length>0){var a=ra(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",un.VML);_t(e,551,KR("rId"+a)),t["!legacy"]=a}}function kTe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:zr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=_l(i);o.s.r==o.e.r&&(o.e.r=_l(t["!ref"]).e.r,i=zr(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+i;break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),_t(e,161,nx(kn(i))),_t(e,162)}}function ITe(e,t,r){_t(e,133),_t(e,137,gTe(t,r)),_t(e,138),_t(e,134)}function FTe(e,t){t["!protect"]&&_t(e,535,xTe(t["!protect"]))}function DTe(e,t,r,n){var a=Cl(),i=r.SheetNames[e],s=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=kn(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],_t(a,129),(r.vbaraw||s["!outline"])&&_t(a,147,SSe(o,s["!outline"])),_t(a,148,CSe(l)),ITe(a,s,r.Workbook),STe(a,s),ETe(a,s,e,t),FTe(a,s),kTe(a,s,r,e),_Te(a,s),NTe(a,s,n),s["!margins"]&&_t(a,476,pTe(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&TTe(a,s),BTe(a,s,e,n),_t(a,130),a.end()}function RTe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var s=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(t[+s[1]]=r?+s[2]:s[2])});var a=Bn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,a,n]}function PTe(e,t,r,n,a,i){var s=i||{"!type":"chart"};if(!e)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(A){var h=RTe(A);u.s.r=u.s.c=0,u.e.c=o,c=Ka(o),h[0].forEach(function(m,v){s[c+Bi(v)]={t:"n",v:m,z:h[1]},l=v}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(s["!ref"]=zr(u)),s}function MTe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},s,o=e.match(cZ);return o&&lP(o[0],i,a,r),(s=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=s[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function LTe(e,t){e.l+=10;var r=Mo(e);return{name:r}}function OTe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},s=!1;return DA(e,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var cP=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],UTe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],jTe=[],HTe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function U7(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var i=t[a];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ba(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function j7(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ba(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function AZ(e){j7(e.WBProps,cP),j7(e.CalcPr,HTe),U7(e.WBView,UTe),U7(e.Sheets,jTe),av.date1904=Ba(e.WBProps.date1904)}function QTe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ba(e.Workbook.WBProps.date1904)?"true":"false"}var VTe="][*?/\\".split("");function hZ(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return VTe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function zTe(e,t,r){e.forEach(function(n,a){hZ(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function GTe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];zTe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Q_e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var qTe=/<\w+:workbook/;function $Te(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",i={},s=0;if(e.replace(jo,function(l,c){var u=Mr(l);switch(pf(u[0])){case"<?xml":break;case"<workbook":l.match(qTe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[a];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":cP.forEach(function(A){if(u[A[0]]!=null)switch(A[2]){case"bool":r.WBProps[A[0]]=Ba(u[A[0]]);break;case"int":r.WBProps[A[0]]=parseInt(u[A[0]],10);break;default:r.WBProps[A[0]]=u[A[0]]}}),u.codeName&&(r.WBProps.CodeName=pa(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Bn(pa(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=pa(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Ba(u.hidden||"0")&&(i.Hidden=!0),s=c+l.length;break;case"</definedName>":i.Ref=Bn(pa(e.slice(s,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),mm.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return AZ(r),r}function pZ(e){var t=[ki];t[t.length]=Ot("workbook",null,{xmlns:mm[0],"xmlns:r":ls.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(cP.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Ot("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var s={name:ia(e.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=Ot("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Ot("definedName",ia(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function KTe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=a3(e),r.name=Mo(e),r}function WTe(e,t){return t||(t=dt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),KR(e.strRelID,t),ks(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function YTe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Mo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function XTe(e,t){t||(t=dt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),sJ(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function JTe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function ZTe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=Bye(e),s=M_e(e,0,r),o=$R(e);e.l=n;var l={Name:i,Ptg:s};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function e5e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var i=[],s=[[]];return s.SheetNames=[],s.XTI=[],Wy[16]={n:"BrtFRTArchID$",f:JTe},DA(e,function(l,c,u){switch(u){case 156:s.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=So(l.Ptg,null,null,s,t),delete t.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([u,l]):s[0]=[u,l],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(l),s.XTI=s.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(u),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!c.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),AZ(r),r.Names=i,r.supbooks=s,r}function t5e(e,t){_t(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};_t(e,156,WTe(a))}_t(e,144)}function r5e(e,t){t||(t=dt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return ks("SheetJS",t),ks(JE.version,t),ks(JE.version,t),ks("7262",t),t.length>t.l?t.slice(0,t.l):t}function n5e(e,t){t||(t=dt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function a5e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(_t(e,135),_t(e,158,n5e(a)),_t(e,136))}}function i5e(e,t){var r=Cl();return _t(r,131),_t(r,128,r5e()),_t(r,153,XTe(e.Workbook&&e.Workbook.WBProps||null)),a5e(r,e),t5e(r,e),_t(r,132),r.end()}function s5e(e,t,r){return t.slice(-4)===".bin"?e5e(e,r):$Te(e,r)}function o5e(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?wTe(e,n,r,a,i,s,o):Z_e(e,n,r,a,i,s,o)}function l5e(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?OTe(e,n,r,a,i):MTe(e,n,r,a,i)}function c5e(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?dEe():fEe()}function u5e(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?cEe():uEe()}function d5e(e,t,r,n){return t.slice(-4)===".bin"?sCe(e,r,n):K2e(e,r,n)}function f5e(e,t,r){return WJ(e,r)}function A5e(e,t,r){return t.slice(-4)===".bin"?A2e(e,r):u2e(e,r)}function h5e(e,t,r){return t.slice(-4)===".bin"?aEe(e,r):WCe(e,r)}function p5e(e,t,r){return t.slice(-4)===".bin"?qCe(e):zCe(e)}function m5e(e,t,r,n){return r.slice(-4)===".bin"?$Ce(e,t,r,n):void 0}function g5e(e,t,r){return t.slice(-4)===".bin"?HCe(e,t,r):VCe(e,t,r)}function v5e(e,t,r){return(t.slice(-4)===".bin"?i5e:pZ)(e)}function x5e(e,t,r,n,a){return(t.slice(-4)===".bin"?DTe:uZ)(e,r,n,a)}function y5e(e,t,r){return(t.slice(-4)===".bin"?mCe:$J)(e,r)}function b5e(e,t,r){return(t.slice(-4)===".bin"?m2e:UJ)(e,r)}function w5e(e,t,r){return(t.slice(-4)===".bin"?iEe:JJ)(e)}function C5e(e){return(e.slice(-4)===".bin"?QCe:YJ)()}var mZ=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,gZ=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Qu(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(mZ),i,s,o,l;if(a)for(l=0;l!=a.length;++l)i=a[l].match(gZ),(s=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(s+1),n[o]=i[2].slice(1,i[2].length-1));return n}function E5e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(mZ),a,i,s,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(gZ),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?s="xmlns"+a[1].slice(6):s=a[1].slice(i+1),r[s]=a[2].slice(1,a[2].length-1));return r}var Ay;function _5e(e,t){var r=Ay[e]||Bn(e);return r==="General"?Xp(t):du(r,t)}function S5e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ba(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ia(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Bn(t)]=a}function T5e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||RA[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=jy(e.v):e.w=Xp(e.v):e.w=_5e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=Ay[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&ex(n)){var a=yp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function N5e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=j2e[n.Pattern]||n.Pattern)}e[t.ID]=t}function B5e(e,t,r,n,a,i,s,o,l,c){var u="General",A=n.StyleID,h={};c=c||{};var m=[],v=0;for(A===void 0&&o&&(A=o.StyleID),A===void 0&&s&&(A=s.StyleID);i[A]!==void 0&&(i[A].nf&&(u=i[A].nf),i[A].Interior&&m.push(i[A].Interior),!!i[A].Parent);)A=i[A].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ba(e);break;case"String":n.t="s",n.r=n7(Bn(e)),n.v=e.indexOf("<")>-1?Bn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ia(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Bn(e):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=dJ[e],c.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=n7(t||e));break}if(T5e(n,u,c),c.cellFormula!==!1)if(n.Formula){var g=Bn(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=nv(g,a),delete n.Formula,n.ArrayRange=="RC"?n.F=nv("RC:RC",a):n.ArrayRange&&(n.F=nv(n.ArrayRange,a),l.push([kn(n.F),n.F]))}else for(v=0;v<l.length;++v)a.r>=l[v][0].s.r&&a.r<=l[v][0].e.r&&a.c>=l[v][0].s.c&&a.c<=l[v][0].e.c&&(n.F=l[v][1]);c.cellStyles&&(m.forEach(function(y){!h.patternType&&y.patternType&&(h.patternType=y.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function k5e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function FB(e,t){var r=t||{};tx();var n=M1(HR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=pa(n));var a=n.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var s=Fa(r);return s.type="string",Ev.to_workbook(n,s)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(je){a.indexOf("<"+je)>=0&&(i=!0)}),i)return pNe(n,r);Ay={"General Number":"General","General Date":Nr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Nr[15],"Short Date":Nr[14],"Long Time":Nr[19],"Medium Time":Nr[18],"Short Time":Nr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Nr[2],Standard:Nr[4],Percent:Nr[10],Scientific:Nr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},A=[],h=r.dense?[]:{},m="",v={},g={},y=Qu('<Data ss:Type="String">'),w=0,T=0,N=0,F={s:{r:2e6,c:2e6},e:{r:0,c:0}},B={},D={},E="",S=0,k=[],H={},P={},M=0,Q=[],V=[],te={},W=[],re,z=!1,X=[],K=[],se={},U=0,Y=0,Z={Sheets:[],WBProps:{date1904:!1}},ne={};Vy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var de="";o=Vy.exec(n);)switch(o[3]=(de=o[3]).toLowerCase()){case"data":if(de=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?B5e(n.slice(w,o.index),E,y,l[l.length-1][0]=="comment"?te:v,{c:T,r:N},B,W[T],g,X,r):(E="",y=Qu(o[0]),w=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(V.length>0&&(v.c=V),(!r.sheetRows||r.sheetRows>N)&&v.v!==void 0&&(r.dense?(h[N]||(h[N]=[]),h[N][T]=v):h[Ka(T)+Bi(N)]=v),v.HRef&&(v.l={Target:Bn(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(U=T+(parseInt(v.MergeAcross,10)|0),Y=N+(parseInt(v.MergeDown,10)|0),k.push({s:{c:T,r:N},e:{c:U,r:Y}})),!r.sheetStubs)v.MergeAcross?T=U+1:++T;else if(v.MergeAcross||v.MergeDown){for(var xe=T;xe<=U;++xe)for(var Ae=N;Ae<=Y;++Ae)(xe>T||Ae>N)&&(r.dense?(h[Ae]||(h[Ae]=[]),h[Ae][xe]={t:"z"}):h[Ka(xe)+Bi(Ae)]={t:"z"});T=U+1}else++T;else v=E5e(o[0]),v.Index&&(T=+v.Index-1),T<F.s.c&&(F.s.c=T),T>F.e.c&&(F.e.c=T),o[0].slice(-2)==="/>"&&++T,V=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<F.s.r&&(F.s.r=N),N>F.e.r&&(F.e.r=N),o[0].slice(-2)==="/>"&&(g=Qu(o[0]),g.Index&&(N=+g.Index-1)),T=0,++N):(g=Qu(o[0]),g.Index&&(N=+g.Index-1),se={},(g.AutoFitHeight=="0"||g.Height)&&(se.hpx=parseInt(g.Height,10),se.hpt=Ky(se.hpx),K[N]=se),g.Hidden=="1"&&(se.hidden=!0,K[N]=se));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));A.push(m),F.s.r<=F.e.r&&F.s.c<=F.e.c&&(h["!ref"]=zr(F),r.sheetRows&&r.sheetRows<=F.e.r&&(h["!fullref"]=h["!ref"],F.e.r=r.sheetRows-1,h["!ref"]=zr(F))),k.length&&(h["!merges"]=k),W.length>0&&(h["!cols"]=W),K.length>0&&(h["!rows"]=K),u[m]=h}else F={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=T=0,l.push([o[3],!1]),c=Qu(o[0]),m=Bn(c.Name),h=r.dense?[]:{},k=[],X=[],K=[],ne={name:m,Hidden:0},Z.Sheets.push(ne);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),W=[],z=!1}break;case"style":o[1]==="/"?N5e(B,D,r):D=Qu(o[0]);break;case"numberformat":D.nf=Bn(Qu(o[0]).Format||"General"),Ay[D.nf]&&(D.nf=Ay[D.nf]);for(var ae=0;ae!=392&&Nr[ae]!=D.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(Nr[ae]==null){uA(D.nf,ae);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(re=Qu(o[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!z&&re.wpx>10){z=!0,Bo=GJ;for(var ue=0;ue<W.length;++ue)W[ue]&&y0(W[ue])}z&&y0(re),W[re.Index-1||W.length]=re;for(var le=0;le<+re.Span;++le)W[W.length]=Fa(re);break;case"namedrange":if(o[1]==="/")break;Z.Names||(Z.Names=[]);var ie=Mr(o[0]),De={Name:ie.Name,Ref:nv(ie.RefersTo.slice(1),{r:0,c:0})};Z.Sheets.length>0&&(De.Sheet=Z.Sheets.length-1),Z.Names.push(De);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(S,o.index):S=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=Qu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?ebe(H,de,n.slice(M,o.index)):M=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));k5e(te),V.push(te)}else l.push([o[3],!1]),c=Qu(o[0]),te={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Le=Qu(o[0]);h["!autofilter"]={ref:nv(Le.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return G7(n,r);var Be=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Be=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Be=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Be=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Be=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(M,o.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else M=o.index+o[0].length;break;case"header":h["!margins"]||Pp(h["!margins"]={},"xlml"),isNaN(+Mr(o[0]).Margin)||(h["!margins"].header=+Mr(o[0]).Margin);break;case"footer":h["!margins"]||Pp(h["!margins"]={},"xlml"),isNaN(+Mr(o[0]).Margin)||(h["!margins"].footer=+Mr(o[0]).Margin);break;case"pagemargins":var Ce=Mr(o[0]);h["!margins"]||Pp(h["!margins"]={},"xlml"),isNaN(+Ce.Top)||(h["!margins"].top=+Ce.Top),isNaN(+Ce.Left)||(h["!margins"].left=+Ce.Left),isNaN(+Ce.Right)||(h["!margins"].right=+Ce.Right),isNaN(+Ce.Bottom)||(h["!margins"].bottom=+Ce.Bottom);break;case"displayrighttoleft":Z.Views||(Z.Views=[]),Z.Views[0]||(Z.Views[0]={}),Z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Be=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Be=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Be=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Be=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Be=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Be=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Be=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Be=!1}break;case"smarttags":break;default:Be=!1;break}if(Be||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?S5e(P,de,Q,n.slice(M,o.index)):(Q=o,M=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Re={};return!r.bookSheets&&!r.bookProps&&(Re.Sheets=u),Re.SheetNames=A,Re.Workbook=Z,Re.SSF=Fa(Nr),Re.Props=H,Re.Custprops=P,Re}function d3(e,t){switch(dP(t=t||{}),t.type||"base64"){case"base64":return FB(uc(e),t);case"binary":case"buffer":case"file":return FB(e,t);case"array":return FB(N0(e),t)}}function I5e(e,t){var r=[];return e.Props&&r.push(tbe(e.Props,t)),e.Custprops&&r.push(rbe(e.Props,e.Custprops)),r.join("")}function F5e(){return""}function D5e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(Ot("NumberFormat",null,{"ss:Format":ia(Nr[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};r.push(Ot("Style",i.join(""),s))}),Ot("Styles",r.join(""))}function vZ(e){return Ot("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+iP(e.Ref,{r:0,c:0})})}function R5e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(vZ(a)))}return Ot("Names",r.join(""))}function P5e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var o=a[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(vZ(o)))}return i.join("")}function M5e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Ot("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Ot("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Ot("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Ot("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Js("ProtectContents","True")),e["!protect"].objects&&a.push(Js("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Js("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Js("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Js("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":Ot("WorksheetOptions",a.join(""),{xmlns:Jl.x})}function L5e(e){return e.map(function(t){var r=aye(t.t||""),n=Ot("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ot("Comment",n,{"ss:Author":t.a})}).join("")}function O5e(e,t,r,n,a,i,s){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ia(iP(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var l=Wa(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ia(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ia(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],u=0;u!=c.length;++u)c[u].s.c!=s.c||c[u].s.r!=s.r||(c[u].e.c>c[u].s.c&&(o["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(o["ss:MergeDown"]=c[u].e.r-c[u].s.r));var A="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":A="Number",h=String(e.v);break;case"b":A="Boolean",h=e.v?"1":"0";break;case"e":A="Error",h=RA[e.v];break;case"d":A="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Nr[14]);break;case"s":A="String",h=nye(e.v||"");break}var m=k0(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=s.c+1;var v=e.v!=null?h:"",g=e.t=="z"?"":'<Data ss:Type="'+A+'">'+v+"</Data>";return(e.c||[]).length>0&&(g+=L5e(e.c)),Ot("Cell",g,o)}function U5e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=_v(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function j5e(e,t,r,n){if(!e["!ref"])return"";var a=kn(e["!ref"]),i=e["!merges"]||[],s=0,o=[];e["!cols"]&&e["!cols"].forEach(function(y,w){y0(y);var T=!!y.width,N=mT(w,y),F={"ss:Index":w+1};T&&(F["ss:Width"]=qy(N.width)),y.hidden&&(F["ss:Hidden"]="1"),o.push(Ot("Column",null,F))});for(var l=Array.isArray(e),c=a.s.r;c<=a.e.r;++c){for(var u=[U5e(c,(e["!rows"]||[])[c])],A=a.s.c;A<=a.e.c;++A){var h=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>A)&&!(i[s].s.r>c)&&!(i[s].e.c<A)&&!(i[s].e.r<c)){(i[s].s.c!=A||i[s].s.r!=c)&&(h=!0);break}if(!h){var m={r:c,c:A},v=Fr(m),g=l?(e[c]||[])[A]:e[v];u.push(O5e(g,v,e,t,r,n,m))}}u.push("</Row>"),u.length>2&&o.push(u.join(""))}return o.join("")}function H5e(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],s=i?P5e(i,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?j5e(i,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(M5e(i,t,e,r)),n.join("")}function Q5e(e,t){t||(t={}),e.SSF||(e.SSF=Fa(Nr)),e.SSF&&(tx(),cT(e.SSF),t.revssf=dT(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],k0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(I5e(e,t)),r.push(F5e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Ot("Worksheet",H5e(n,t,e),{"ss:Name":ia(e.SheetNames[n])}));return r[2]=D5e(e,t),r[3]=R5e(e),ki+Ot("Workbook",r.join(""),{xmlns:Jl.ss,"xmlns:o":Jl.o,"xmlns:x":Jl.x,"xmlns:ss":Jl.ss,"xmlns:dt":Jl.dt,"xmlns:html":Jl.html})}function V5e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Rye(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Pye(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var z5e=[60,1084,2066,2165,2175];function G5e(e,t,r,n,a){var i=n,s=[],o=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}s.push(o),r.l+=i;for(var l=aA(r,r.l),c=f3[l],u=0;c!=null&&z5e.indexOf(l)>-1;)i=aA(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),s.push(o),r.l+=4+i,c=f3[l=aA(r,r.l)];var A=Bs(s);Ys(A,0);var h=0;A.lens=[];for(var m=0;m<s.length;++m)A.lens.push(h),h+=s[m].length;if(A.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+A.length+" < "+n;return t.f(A,A.length,a)}function Ud(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Nr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||RA[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=jy(e.v):e.w=Xp(e.v):e.w=du(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&ex(Nr[n]||String(n))){var a=yp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function D2(e,t,r){return{v:e,ixfe:t,t:r}}function q5e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},i={},s={},o=null,l=[],c="",u={},A,h="",m,v,g,y,w={},T=[],N,F,B=[],D=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},k=function(Dt){return Dt<8?Fp[Dt]:Dt<64&&D[Dt-8]||Fp[Dt]},H=function(Dt,gt,Br){var Zt=gt.XF.data;if(!(!Zt||!Zt.patternType||!Br||!Br.cellStyles)){gt.s={},gt.s.patternType=Zt.patternType;var yn;(yn=Gy(k(Zt.icvFore)))&&(gt.s.fgColor={rgb:yn}),(yn=Gy(k(Zt.icvBack)))&&(gt.s.bgColor={rgb:yn})}},P=function(Dt,gt,Br){if(!(se>1)&&!(Br.sheetRows&&Dt.r>=Br.sheetRows)){if(Br.cellStyles&&gt.XF&&gt.XF.data&&H(Dt,gt,Br),delete gt.ixfe,delete gt.XF,A=Dt,h=Fr(Dt),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),Dt.r<s.s.r&&(s.s.r=Dt.r),Dt.c<s.s.c&&(s.s.c=Dt.c),Dt.r+1>s.e.r&&(s.e.r=Dt.r+1),Dt.c+1>s.e.c&&(s.e.c=Dt.c+1),Br.cellFormula&&gt.f){for(var Zt=0;Zt<T.length;++Zt)if(!(T[Zt][0].s.c>Dt.c||T[Zt][0].s.r>Dt.r)&&!(T[Zt][0].e.c<Dt.c||T[Zt][0].e.r<Dt.r)){gt.F=zr(T[Zt][0]),(T[Zt][0].s.c!=Dt.c||T[Zt][0].s.r!=Dt.r)&&delete gt.f,gt.f&&(gt.f=""+So(T[Zt][1],s,Dt,X,M));break}}Br.dense?(a[Dt.r]||(a[Dt.r]=[]),a[Dt.r][Dt.c]=gt):a[h]=gt}},M={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:T,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(M.password=t.password);var Q,V=[],te=[],W=[],re=[],z=!1,X=[];X.SheetNames=M.snames,X.sharedf=M.sharedf,X.arrayf=M.arrayf,X.names=[],X.XTI=[];var K=0,se=0,U=0,Y=[],Z=[],ne;M.codepage=1200,Wu(1200);for(var de=!1;e.l<e.length-1;){var xe=e.l,Ae=e.read_shift(2);if(Ae===0&&K===10)break;var ae=e.l===e.length?0:e.read_shift(2),ue=f3[Ae];if(ue&&ue.f){if(t.bookSheets&&K===133&&Ae!==133)break;if(K=Ae,ue.r===2||ue.r==12){var le=e.read_shift(2);if(ae-=2,!M.enc&&le!==Ae&&((le&255)<<8|le>>8)!==Ae)throw new Error("rt mismatch: "+le+"!="+Ae);ue.r==12&&(e.l+=10,ae-=10)}var ie={};if(Ae===10?ie=ue.f(e,ae,M):ie=G5e(Ae,ue,e,ae,M),se==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(Ae){case 34:r.opts.Date1904=E.WBProps.date1904=ie;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(M.enc||(e.l=0),M.enc=ie,!t.password)throw new Error("File is password-protected");if(ie.valid==null)throw new Error("Encryption scheme unsupported");if(!ie.valid)throw new Error("Password is incorrect");break;case 92:M.lastuser=ie;break;case 66:var De=Number(ie);switch(De){case 21010:De=1200;break;case 32768:De=1e4;break;case 32769:De=1252;break}Wu(M.codepage=De),de=!0;break;case 317:M.rrtabid=ie;break;case 25:M.winlocked=ie;break;case 439:r.opts.RefreshAll=ie;break;case 12:r.opts.CalcCount=ie;break;case 16:r.opts.CalcDelta=ie;break;case 17:r.opts.CalcIter=ie;break;case 13:r.opts.CalcMode=ie;break;case 14:r.opts.CalcPrecision=ie;break;case 95:r.opts.CalcSaveRecalc=ie;break;case 15:M.CalcRefMode=ie;break;case 2211:r.opts.FullCalc=ie;break;case 129:ie.fDialog&&(a["!type"]="dialog"),ie.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ie.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:B.push(ie);break;case 430:X.push([ie]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(ie);break;case 24:case 536:ne={Name:ie.Name,Ref:So(ie.rgce,s,null,X,M)},ie.itab>0&&(ne.Sheet=ie.itab-1),X.names.push(ne),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(ie),ie.Name=="_xlnm._FilterDatabase"&&ie.itab>0&&ie.rgce&&ie.rgce[0]&&ie.rgce[0][0]&&ie.rgce[0][0][0]=="PtgArea3d"&&(Z[ie.itab-1]={ref:zr(ie.rgce[0][0][1][2])});break;case 22:M.ExternCount=ie;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(ie),X.XTI=X.XTI.concat(ie);break;case 2196:if(M.biff<8)break;ne!=null&&(ne.Comment=ie[1]);break;case 18:a["!protect"]=ie;break;case 19:ie!==0&&M.WTF&&console.error("Password verifier: "+ie);break;case 133:i[ie.pos]=ie,M.snames.push(ie.name);break;case 10:{if(--se)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,a["!ref"]=zr(s),t.sheetRows&&t.sheetRows<=s.e.r){var Le=s.e.r;s.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=zr(s),s.e.r=Le}s.e.r++,s.e.c++}V.length>0&&(a["!merges"]=V),te.length>0&&(a["!objects"]=te),W.length>0&&(a["!cols"]=W),re.length>0&&(a["!rows"]=re),E.Sheets.push(S)}c===""?u=a:n[c]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(M.biff===8&&(M.biff={9:2,521:3,1033:4}[Ae]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ie.BIFFVer]||8),M.biffguess=ie.BIFFVer==0,ie.BIFFVer==0&&ie.dt==4096&&(M.biff=5,de=!0,Wu(M.codepage=28591)),M.biff==8&&ie.BIFFVer==0&&ie.dt==16&&(M.biff=2),se++)break;if(a=t.dense?[]:{},M.biff<8&&!de&&(de=!0,Wu(M.codepage=t.codepage||1252)),M.biff<5||ie.BIFFVer==0&&ie.dt==4096){c===""&&(c="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var Be={pos:e.l-ae,name:c};i[Be.pos]=Be,M.snames.push(c)}else c=(i[xe]||{name:""}).name;ie.dt==32&&(a["!type"]="chart"),ie.dt==64&&(a["!type"]="macro"),V=[],te=[],M.arrayf=T=[],W=[],re=[],z=!1,S={Hidden:(i[xe]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ie.r]||[])[ie.c]:a[Fr({c:ie.c,r:ie.r})])&&++ie.c,N={ixfe:ie.ixfe,XF:B[ie.ixfe]||{},v:ie.val,t:"n"},U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:ie.c,r:ie.r},N,t);break;case 5:case 517:N={ixfe:ie.ixfe,XF:B[ie.ixfe],v:ie.val,t:ie.t},U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:ie.c,r:ie.r},N,t);break;case 638:N={ixfe:ie.ixfe,XF:B[ie.ixfe],v:ie.rknum,t:"n"},U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:ie.c,r:ie.r},N,t);break;case 189:for(var Ce=ie.c;Ce<=ie.C;++Ce){var Re=ie.rkrec[Ce-ie.c][0];N={ixfe:Re,XF:B[Re],v:ie.rkrec[Ce-ie.c][1],t:"n"},U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:Ce,r:ie.r},N,t)}break;case 6:case 518:case 1030:{if(ie.val=="String"){o=ie;break}if(N=D2(ie.val,ie.cell.ixfe,ie.tt),N.XF=B[N.ixfe],t.cellFormula){var je=ie.formula;if(je&&je[0]&&je[0][0]&&je[0][0][0]=="PtgExp"){var We=je[0][0][1][0],ct=je[0][0][1][1],wt=Fr({r:We,c:ct});w[wt]?N.f=""+So(ie.formula,s,ie.cell,X,M):N.F=((t.dense?(a[We]||[])[ct]:a[wt])||{}).F}else N.f=""+So(ie.formula,s,ie.cell,X,M)}U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P(ie.cell,N,t),o=ie}break;case 7:case 519:if(o)o.val=ie,N=D2(ie,o.cell.ixfe,"s"),N.XF=B[N.ixfe],t.cellFormula&&(N.f=""+So(o.formula,s,o.cell,X,M)),U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P(o.cell,N,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{T.push(ie);var ot=Fr(ie[0].s);if(m=t.dense?(a[ie[0].s.r]||[])[ie[0].s.c]:a[ot],t.cellFormula&&m){if(!o||!ot||!m)break;m.f=""+So(ie[1],s,ie[0],X,M),m.F=zr(ie[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;w[Fr(o.cell)]=ie[0],m=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Fr(o.cell)],(m||{}).f=""+So(ie[0],s,A,X,M)}}break;case 253:N=D2(l[ie.isst].t,ie.ixfe,"s"),l[ie.isst].h&&(N.h=l[ie.isst].h),N.XF=B[N.ixfe],U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:ie.c,r:ie.r},N,t);break;case 513:t.sheetStubs&&(N={ixfe:ie.ixfe,XF:B[ie.ixfe],t:"z"},U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:ie.c,r:ie.r},N,t));break;case 190:if(t.sheetStubs)for(var Rt=ie.c;Rt<=ie.C;++Rt){var Pt=ie.ixfe[Rt-ie.c];N={ixfe:Pt,XF:B[Pt],t:"z"},U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:Rt,r:ie.r},N,t)}break;case 214:case 516:case 4:N=D2(ie.val,ie.ixfe,"s"),N.XF=B[N.ixfe],U>0&&(N.z=Y[N.ixfe>>8&63]),Ud(N,t,r.opts.Date1904),P({c:ie.c,r:ie.r},N,t);break;case 0:case 512:se===1&&(s=ie);break;case 252:l=ie;break;case 1054:if(M.biff==4){Y[U++]=ie[1];for(var Xt=0;Xt<U+163&&Nr[Xt]!=ie[1];++Xt);Xt>=163&&uA(ie[1],U+163)}else uA(ie[1],ie[0]);break;case 30:{Y[U++]=ie;for(var Mt=0;Mt<U+163&&Nr[Mt]!=ie;++Mt);Mt>=163&&uA(ie,U+163)}break;case 229:V=V.concat(ie);break;case 93:te[ie.cmo[0]]=M.lastobj=ie;break;case 438:M.lastobj.TxO=ie;break;case 127:M.lastobj.ImData=ie;break;case 440:for(y=ie[0].s.r;y<=ie[0].e.r;++y)for(g=ie[0].s.c;g<=ie[0].e.c;++g)m=t.dense?(a[y]||[])[g]:a[Fr({c:g,r:y})],m&&(m.l=ie[1]);break;case 2048:for(y=ie[0].s.r;y<=ie[0].e.r;++y)for(g=ie[0].s.c;g<=ie[0].e.c;++g)m=t.dense?(a[y]||[])[g]:a[Fr({c:g,r:y})],m&&m.l&&(m.l.Tooltip=ie[1]);break;case 28:{if(M.biff<=5&&M.biff>=2)break;m=t.dense?(a[ie[0].r]||[])[ie[0].c]:a[Fr(ie[0])];var Qt=te[ie[2]];m||(t.dense?(a[ie[0].r]||(a[ie[0].r]=[]),m=a[ie[0].r][ie[0].c]={t:"z"}):m=a[Fr(ie[0])]={t:"z"},s.e.r=Math.max(s.e.r,ie[0].r),s.s.r=Math.min(s.s.r,ie[0].r),s.e.c=Math.max(s.e.c,ie[0].c),s.s.c=Math.min(s.s.c,ie[0].c)),m.c||(m.c=[]),v={a:ie[1],t:Qt.TxO.t},m.c.push(v)}break;case 2173:DCe(B[ie.ixfe],ie.ext);break;case 125:{if(!M.cellStyles)break;for(;ie.e>=ie.s;)W[ie.e--]={width:ie.w/256,level:ie.level||0,hidden:!!(ie.flags&1)},z||(z=!0,rP(ie.w/256)),y0(W[ie.e+1])}break;case 520:{var $t={};ie.level!=null&&(re[ie.r]=$t,$t.level=ie.level),ie.hidden&&(re[ie.r]=$t,$t.hidden=!0),ie.hpt&&(re[ie.r]=$t,$t.hpt=ie.hpt,$t.hpx=_v(ie.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Pp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ae]]=ie;break;case 161:a["!margins"]||Pp(a["!margins"]={}),a["!margins"].header=ie.header,a["!margins"].footer=ie.footer;break;case 574:ie.RTL&&(E.Views[0].RTL=!0);break;case 146:D=ie;break;case 2198:Q=ie;break;case 140:F=ie;break;case 442:c?S.CodeName=ie||S.name:E.WBProps.CodeName=ie||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+Ae.toString(16)),e.l+=ae}return r.SheetNames=Ai(i).sort(function(It,Dt){return Number(It)-Number(Dt)}).map(function(It){return i[It].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&Z.forEach(function(It,Dt){r.Sheets[r.SheetNames[Dt]]["!autofilter"]=It}),r.Strings=l,r.SSF=Fa(Nr),M.enc&&(r.Encryption=M.enc),Q&&(r.Themes=Q),r.Metadata={},F!==void 0&&(r.Metadata.Country=F),X.names.length>0&&(E.Names=X.names),r.Workbook=E,r}var hy={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function $5e(e,t,r){var n=hr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=b7(n,i3,hy.DSI);for(var i in a)t[i]=a[i]}catch(c){if(r.WTF)throw c}var s=hr.find(e,"/!SummaryInformation");if(s&&s.size>0)try{var o=b7(s,s3,hy.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(r.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(gJ(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function K5e(e,t){var r=[],n=[],a=[],i=0,s,o=X8(i3,"n"),l=X8(s3,"n");if(e.Props)for(s=Ai(e.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(l,s[i])?n:a).push([s[i],e.Props[s[i]]]);if(e.Custprops)for(s=Ai(e.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(l,s[i])?n:a).push([s[i],e.Custprops[s[i]]]);var c=[];for(i=0;i<a.length;++i)EJ.indexOf(a[i][0])>-1||mJ.indexOf(a[i][0])>-1||a[i][1]!=null&&c.push(a[i]);n.length&&hr.utils.cfb_add(t,"/SummaryInformation",w7(n,hy.SI,l,s3)),(r.length||c.length)&&hr.utils.cfb_add(t,"/DocumentSummaryInformation",w7(r,hy.DSI,o,i3,c.length?c:null,hy.UDI))}function xZ(e,t){t||(t={}),dP(t),FR(),t.codepage&&IR(t.codepage);var r,n;if(e.FullPaths){if(hr.find(e,"/encryption"))throw new Error("File is password-protected");r=hr.find(e,"!CompObj"),n=hr.find(e,"/Workbook")||hr.find(e,"/Book")}else{switch(t.type){case"base64":e=tc(uc(e));break;case"binary":e=tc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ys(e,0),n={content:e}}var a,i;if(r&&V5e(r),t.bookProps&&!t.bookSheets)a={};else{var s=nn?"buffer":"array";if(n&&n.content)a=q5e(n.content,t);else if((i=hr.find(e,"PerfectOffice_MAIN"))&&i.content)a=Rp.to_workbook(i.content,(t.type=s,t));else if((i=hr.find(e,"NativeContent_MAIN"))&&i.content)a=Rp.to_workbook(i.content,(t.type=s,t));else throw(i=hr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=oEe(e))}var o={};return e.FullPaths&&$5e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function W5e(e,t){var r=t||{},n=hr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return hr.utils.cfb_add(n,a,yZ(e,r)),r.biff==8&&(e.Props||e.Custprops)&&K5e(e,n),r.biff==8&&e.vbaraw&&lEe(n,hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Wy={0:{f:xSe},1:{f:TSe},2:{f:qSe},3:{f:PSe},4:{f:ISe},5:{f:VSe},6:{f:XSe},7:{f:USe},8:{f:aTe},9:{f:nTe},10:{f:tTe},11:{f:rTe},12:{f:BSe},13:{f:KSe},14:{f:LSe},15:{f:DSe},16:{f:dZ},17:{f:ZSe},18:{f:HSe},19:{f:qR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ZTe},40:{},42:{},43:{f:X2e},44:{f:W2e},45:{f:eCe},46:{f:rCe},47:{f:tCe},48:{},49:{f:wye},50:{},51:{f:MCe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:PJ},62:{f:YSe},63:{f:GCe},64:{f:yTe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Oo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:mTe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:_Se},148:{f:wSe,p:16},151:{f:uTe},152:{},153:{f:YTe},154:{},155:{},156:{f:KTe},157:{},158:{},159:{T:1,f:f2e},160:{T:-1},161:{T:1,f:ym},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:iTe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:RCe},336:{T:-1},337:{f:UCe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:a3},357:{},358:{},359:{},360:{T:1},361:{},362:{f:RJ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:dTe},427:{f:fTe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:hTe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:ESe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:lTe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:a3},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:rEe},633:{T:1},634:{T:-1},635:{T:1,f:eEe},636:{T:-1},637:{f:Sye},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:LTe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:bTe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},f3={6:{f:kB},10:{f:Eh},12:{f:Qi},13:{f:Qi},14:{f:wi},15:{f:wi},16:{f:Ro},17:{f:wi},18:{f:wi},19:{f:Qi},20:{f:N7},21:{f:N7},23:{f:RJ},24:{f:k7},25:{f:wi},26:{},27:{},28:{f:bwe},29:{},34:{f:wi},35:{f:B7},38:{f:Ro},39:{f:Ro},40:{f:Ro},41:{f:Ro},42:{f:wi},43:{f:wi},47:{f:D2e},49:{f:Kbe},51:{f:Qi},60:{},61:{f:Vbe},64:{f:wi},65:{f:$be},66:{f:Qi},77:{},80:{},81:{},82:{},85:{f:Qi},89:{},90:{},91:{},92:{f:Fbe},93:{f:Ewe},94:{},95:{f:wi},96:{},97:{},99:{f:wi},125:{f:PJ},128:{f:cwe},129:{f:Rbe},130:{f:Qi},131:{f:wi},132:{f:wi},133:{f:Pbe},134:{},140:{f:Fwe},141:{f:Qi},144:{},146:{f:Pwe},151:{},152:{},153:{},154:{},155:{},156:{f:Qi},157:{},158:{},160:{f:Qwe},161:{f:Owe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:iwe},190:{f:swe},193:{f:Eh},197:{},198:{},199:{},200:{},201:{},202:{f:wi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Qi},220:{},221:{f:wi},222:{},224:{f:lwe},225:{f:Ibe},226:{f:Eh},227:{},229:{f:wwe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Lbe},253:{f:Ybe},255:{f:Ube},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:_J},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:wi},353:{f:Eh},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:hwe},431:{f:wi},432:{},433:{},434:{},437:{},438:{f:Twe},439:{f:wi},440:{f:Nwe},441:{},442:{f:jb},443:{},444:{f:Qi},445:{},446:{},448:{f:Eh},449:{f:Qbe,r:2},450:{f:Eh},512:{f:_7},513:{f:Hwe},515:{f:fwe},516:{f:Jbe},517:{f:T7},519:{f:Vwe},520:{f:jbe},523:{},545:{f:I7},549:{f:E7},566:{},574:{f:Gbe},638:{f:awe},659:{},1048:{},1054:{f:ewe},1084:{},1212:{f:vwe},2048:{f:kwe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:k2},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Eh},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Mwe,r:12},2173:{f:FCe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:wi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:gwe,r:12},2197:{},2198:{f:SCe,r:12},2199:{},2200:{},2201:{},2202:{f:xwe,r:12},2203:{f:Eh},2204:{},2205:{},2206:{},2207:{},2211:{f:Hbe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Qi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Uwe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Rwe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:_7},1:{},2:{f:Kwe},3:{f:qwe},4:{f:Gwe},5:{f:T7},7:{f:Ywe},8:{},9:{f:k2},11:{},22:{f:Qi},30:{f:rwe},31:{},32:{},33:{f:I7},36:{},37:{f:E7},50:{f:Xwe},62:{},52:{},67:{},68:{f:Qi},69:{},86:{},126:{},127:{f:zwe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Jwe},223:{},234:{},354:{},421:{},518:{f:kB},521:{f:k2},536:{f:k7},547:{f:B7},561:{},579:{},1030:{f:kB},1033:{f:k2},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ut(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&VR(r)&&e.push(r)}}function Y5e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Ut(e,t,r,a);var i=t;if(!isNaN(i)){for(var s=r.parts||[],o=0,l=0,c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<a;){for(u=e.next(4),u.write_shift(2,60),c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;u.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}function zb(e,t,r){return e||(e=dt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function X5e(e,t,r,n){var a=dt(9);return zb(a,e,t),SJ(r,n||"b",a),a}function J5e(e,t,r){var n=dt(8+2*r.length);return zb(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Z5e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?ds(Ia(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Ut(e,2,Wwe(r,n,a)):Ut(e,3,$we(r,n,a));return;case"b":case"e":Ut(e,5,X5e(r,n,t.v,t.t));return;case"s":case"str":Ut(e,4,J5e(r,n,(t.v||"").slice(0,255)));return}Ut(e,1,zb(null,r,n))}function eNe(e,t,r,n){var a=Array.isArray(t),i=kn(t["!ref"]||"A1"),s,o="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=zr(i)}for(var c=i.s.r;c<=i.e.r;++c){o=Bi(c);for(var u=i.s.c;u<=i.e.c;++u){c===i.s.r&&(l[u]=Ka(u)),s=l[u]+o;var A=a?(t[c]||[])[u]:t[s];A&&Z5e(e,A,c,u)}}}function tNe(e,t){for(var r=t||{},n=Cl(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ut(n,r.biff==4?1033:r.biff==3?521:9,ZR(e,16,r)),eNe(n,e.Sheets[e.SheetNames[a]],a,r),Ut(n,10),n.end()}function rNe(e,t,r){Ut(e,49,Wbe({sz:12,name:"Arial"},r))}function nNe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Ut(e,1054,twe(a,t[a],r))})}function aNe(e,t){var r=dt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ut(e,2151,r),r=dt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),IJ(kn(t["!ref"]||"A1"),r),r.write_shift(4,4),Ut(e,2152,r)}function iNe(e,t){for(var r=0;r<16;++r)Ut(e,224,S7({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Ut(e,224,S7(n,0,t))})}function sNe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Ut(e,440,Bwe(n)),n[1].Tooltip&&Ut(e,2048,Iwe(n))}delete t["!links"]}function oNe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Ut(e,125,Lwe(mT(a,n),a))})}}function lNe(e,t,r,n,a){var i=16+k0(a.cellXfs,t,a);if(t.v==null&&!t.bf){Ut(e,513,tm(r,n,i));return}if(t.bf)Ut(e,6,R_e(t,r,n,a,i));else switch(t.t){case"d":case"n":var s=t.t=="d"?ds(Ia(t.v)):t.v;Ut(e,515,Awe(r,n,s,i));break;case"b":case"e":Ut(e,517,dwe(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var o=oP(a.Strings,t.v,a.revStrings);Ut(e,253,Xbe(r,n,o,i))}else Ut(e,516,Zbe(r,n,(t.v||"").slice(0,255),i,a));break;default:Ut(e,513,tm(r,n,i))}}function cNe(e,t,r){var n=Cl(),a=r.SheetNames[e],i=r.Sheets[a]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[e]||{},l=Array.isArray(i),c=t.biff==8,u,A="",h=[],m=kn(i["!ref"]||"A1"),v=c?65536:16384;if(m.e.c>255||m.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,v-1)}Ut(n,2057,ZR(r,16,t)),Ut(n,13,Jc(1)),Ut(n,12,Jc(100)),Ut(n,15,$o(!0)),Ut(n,17,$o(!1)),Ut(n,16,Zp(.001)),Ut(n,95,$o(!0)),Ut(n,42,$o(!1)),Ut(n,43,$o(!1)),Ut(n,130,Jc(1)),Ut(n,128,uwe()),Ut(n,131,$o(!1)),Ut(n,132,$o(!1)),c&&oNe(n,i["!cols"]),Ut(n,512,nwe(m,t)),c&&(i["!links"]=[]);for(var g=m.s.r;g<=m.e.r;++g){A=Bi(g);for(var y=m.s.c;y<=m.e.c;++y){g===m.s.r&&(h[y]=Ka(y)),u=h[y]+A;var w=l?(i[g]||[])[y]:i[u];w&&(lNe(n,w,g,y,t),c&&w.l&&i["!links"].push([u,w.l]))}}var T=o.CodeName||o.name||a;return c&&Ut(n,574,qbe((s.Views||[])[0])),c&&(i["!merges"]||[]).length&&Ut(n,229,Cwe(i["!merges"])),c&&sNe(n,i),Ut(n,442,TJ(T)),c&&aNe(n,i),Ut(n,10),n.end()}function uNe(e,t,r){var n=Cl(),a=(e||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(Ut(n,2057,ZR(e,5,r)),r.bookType=="xla"&&Ut(n,135),Ut(n,225,o?Jc(1200):null),Ut(n,193,dbe(2)),l&&Ut(n,191),l&&Ut(n,192),Ut(n,226),Ut(n,92,Dbe("SheetJS",r)),Ut(n,66,Jc(o?1200:1252)),o&&Ut(n,353,Jc(0)),o&&Ut(n,448),Ut(n,317,jwe(e.SheetNames.length)),o&&e.vbaraw&&Ut(n,211),o&&e.vbaraw){var c=s.CodeName||"ThisWorkbook";Ut(n,442,TJ(c))}Ut(n,156,Jc(17)),Ut(n,25,$o(!1)),Ut(n,18,$o(!1)),Ut(n,19,Jc(0)),o&&Ut(n,431,$o(!1)),o&&Ut(n,444,Jc(0)),Ut(n,61,zbe()),Ut(n,64,$o(!1)),Ut(n,141,Jc(0)),Ut(n,34,$o(QTe(e)=="true")),Ut(n,14,$o(!0)),o&&Ut(n,439,$o(!1)),Ut(n,218,Jc(0)),rNe(n,e,r),nNe(n,e.SSF,r),iNe(n,r),o&&Ut(n,352,$o(!1));var u=n.end(),A=Cl();o&&Ut(A,140,Dwe()),o&&r.Strings&&Y5e(A,252,Obe(r.Strings)),Ut(A,10);var h=A.end(),m=Cl(),v=0,g=0;for(g=0;g<e.SheetNames.length;++g)v+=(o?12:11)+(o?2:1)*e.SheetNames[g].length;var y=u.length+v+h.length;for(g=0;g<e.SheetNames.length;++g){var w=i[g]||{};Ut(m,133,Mbe({pos:y,hs:w.Hidden||0,dt:0,name:e.SheetNames[g]},r)),y+=t[g].length}var T=m.end();if(v!=T.length)throw new Error("BS8 "+v+" != "+T.length);var N=[];return u.length&&N.push(u),T.length&&N.push(T),h.length&&N.push(h),Bs(N)}function dNe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Fa(Nr)),e&&e.SSF&&(tx(),cT(e.SSF),r.revssf=dT(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,fP(r),r.cellXfs=[],k0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=cNe(a,r,e);return n.unshift(uNe(e,n,r)),Bs(n)}function yZ(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=_l(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return dNe(e,t);case 4:case 3:case 2:return tNe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function H7(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),s=a.index,o=i&&i.index||e.length,l=W1e(e.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,A=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(s=0;s<l.length;++s){var g=l[s].trim(),y=g.slice(0,3).toLowerCase();if(y=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(y!="<td"&&y!="<th")){var w=g.split(/<\/t[dh]>/i);for(o=0;o<w.length;++o){var T=w[o].trim();if(T.match(/<t[dh]/i)){for(var N=T,F=0;N.charAt(0)=="<"&&(F=N.indexOf(">"))>-1;)N=N.slice(F+1);for(var B=0;B<v.length;++B){var D=v[B];D.s.c==u&&D.s.r<c&&c<=D.e.r&&(u=D.e.c+1,B=-1)}var E=Mr(T.slice(0,T.indexOf(">")));h=E.colspan?+E.colspan:1,((A=+E.rowspan)>1||h>1)&&v.push({s:{r:c,c:u},e:{r:c+(A||1)-1,c:u+h-1}});var S=E.t||E["data-t"]||"";if(!N.length){u+=h;continue}if(N=zX(N),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>u&&(m.s.c=u),m.e.c<u&&(m.e.c=u),!N.length){u+=h;continue}var k={t:"s",v:N};r.raw||!N.trim().length||S=="s"||(N==="TRUE"?k={t:"b",v:!0}:N==="FALSE"?k={t:"b",v:!1}:isNaN(Xu(N))?isNaN(Cv(N).getDate())||(k={t:"d",v:Ia(N)},r.cellDates||(k={t:"n",v:ds(k.v)}),k.z=r.dateNF||Nr[14]):k={t:"n",v:Xu(N)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=k):n[Fr({r:c,c:u})]=k,u+=h}}}}return n["!ref"]=zr(m),v.length&&(n["!merges"]=v),n}function fNe(e,t,r,n){for(var a=e["!merges"]||[],i=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,l=0,c=0;c<a.length;++c)if(!(a[c].s.r>r||a[c].s.c>s)&&!(a[c].e.r<r||a[c].e.c<s)){if(a[c].s.r<r||a[c].s.c<s){o=-1;break}o=a[c].e.r-a[c].s.r+1,l=a[c].e.c-a[c].s.c+1;break}if(!(o<0)){var u=Fr({r,c:s}),A=n.dense?(e[r]||[])[s]:e[u],h=A&&A.v!=null&&(A.h||jR(A.w||(wA(A),A.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":A&&(m["data-t"]=A&&A.t||"z",A.v!=null&&(m["data-v"]=A.v),A.z!=null&&(m["data-z"]=A.z),A.l&&(A.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+A.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+u,i.push(Ot("td",h,m))}}var v="<tr>";return v+i.join("")+"</tr>"}var ANe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',hNe="</body></html>";function pNe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return B0(H7(r[0],t),t);var n=mP();return r.forEach(function(a,i){gP(n,H7(a,t),"Sheet"+(i+1))}),n}function mNe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function bZ(e,t){var r=t||{},n=r.header!=null?r.header:ANe,a=r.footer!=null?r.footer:hNe,i=[n],s=_l(e["!ref"]);r.dense=Array.isArray(e),i.push(mNe(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)i.push(fNe(e,s,o,r));return i.push("</table>"+a),i.join("")}function wZ(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var s=typeof n.origin=="string"?Wa(n.origin):n.origin;a=s.r,i=s.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var u=_l(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),a==-1&&(c.e.r=a=u.e.r+1)}var A=[],h=0,m=e["!rows"]||(e["!rows"]=[]),v=0,g=0,y=0,w=0,T=0,N=0;for(e["!cols"]||(e["!cols"]=[]);v<o.length&&g<l;++v){var F=o[v];if(Q7(F)){if(n.display)continue;m[g]={hidden:!0}}var B=F.children;for(y=w=0;y<B.length;++y){var D=B[y];if(!(n.display&&Q7(D))){var E=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):zX(D.innerHTML),S=D.getAttribute("data-z")||D.getAttribute("z");for(h=0;h<A.length;++h){var k=A[h];k.s.c==w+i&&k.s.r<g+a&&g+a<=k.e.r&&(w=k.e.c+1-i,h=-1)}N=+D.getAttribute("colspan")||1,((T=+D.getAttribute("rowspan")||1)>1||N>1)&&A.push({s:{r:g+a,c:w+i},e:{r:g+a+(T||1)-1,c:w+i+(N||1)-1}});var H={t:"s",v:E},P=D.getAttribute("data-t")||D.getAttribute("t")||"";E!=null&&(E.length==0?H.t=P||"z":n.raw||E.trim().length==0||P=="s"||(E==="TRUE"?H={t:"b",v:!0}:E==="FALSE"?H={t:"b",v:!1}:isNaN(Xu(E))?isNaN(Cv(E).getDate())||(H={t:"d",v:Ia(E)},n.cellDates||(H={t:"n",v:ds(H.v)}),H.z=n.dateNF||Nr[14]):H={t:"n",v:Xu(E)})),H.z===void 0&&S!=null&&(H.z=S);var M="",Q=D.getElementsByTagName("A");if(Q&&Q.length)for(var V=0;V<Q.length&&!(Q[V].hasAttribute("href")&&(M=Q[V].getAttribute("href"),M.charAt(0)!="#"));++V);M&&M.charAt(0)!="#"&&(H.l={Target:M}),n.dense?(e[g+a]||(e[g+a]=[]),e[g+a][w+i]=H):e[Fr({c:w+i,r:g+a})]=H,c.e.c<w+i&&(c.e.c=w+i),w+=N}}++g}return A.length&&(e["!merges"]=(e["!merges"]||[]).concat(A)),c.e.r=Math.max(c.e.r,g-1+a),e["!ref"]=zr(c),g>=l&&(e["!fullref"]=zr((c.e.r=o.length-v+g-1+a,c))),e}function CZ(e,t){var r=t||{},n=r.dense?[]:{};return wZ(n,e,t)}function gNe(e,t){return B0(CZ(e,t),t)}function Q7(e){var t="",r=vNe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function vNe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function xNe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Bn(t.replace(/<[^>]*>/g,""));return[r]}var V7={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function EZ(e,t){var r=t||{},n=HR(e),a=[],i,s,o={name:""},l="",c=0,u,A,h={},m=[],v=r.dense?[]:{},g,y,w={value:""},T="",N=0,F=[],B=-1,D=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,k={},H=[],P={},M=0,Q=0,V=[],te=1,W=1,re=[],z={Names:[]},X={},K=["",""],se=[],U={},Y="",Z=0,ne=!1,de=!1,xe=0;for(Vy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=Vy.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"工作表":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?v["!ref"]=zr(E):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(v["!fullref"]=v["!ref"],E.e.r=r.sheetRows-1,v["!ref"]=zr(E)),H.length&&(v["!merges"]=H),V.length&&(v["!rows"]=V),u.name=u.名称||u.name,typeof JSON<"u"&&JSON.stringify(u),m.push(u.name),h[u.name]=v,de=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=Mr(g[0],!1),B=D=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,v=r.dense?[]:{},H=[],V=[],de=!0);break;case"table-row-group":g[1]==="/"?--S:++S;break;case"table-row":case"行":if(g[1]==="/"){B+=te,te=1;break}if(A=Mr(g[0],!1),A.行号?B=A.行号-1:B==-1&&(B=0),te=+A["number-rows-repeated"]||1,te<10)for(xe=0;xe<te;++xe)S>0&&(V[B+xe]={level:S});D=-1;break;case"covered-table-cell":g[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(v[B]||(v[B]=[]),v[B][D]={t:"z"}):v[Fr({r:B,c:D})]={t:"z"}),T="",F=[];break;case"table-cell":case"数据":if(g[0].charAt(g[0].length-2)==="/")++D,w=Mr(g[0],!1),W=parseInt(w["number-columns-repeated"]||"1",10),y={t:"z",v:null},w.formula&&r.cellFormula!=!1&&(y.f=O7(Bn(w.formula))),(w.数据类型||w["value-type"])=="string"&&(y.t="s",y.v=Bn(w["string-value"]||""),r.dense?(v[B]||(v[B]=[]),v[B][D]=y):v[Fr({r:B,c:D})]=y),D+=W-1;else if(g[1]!=="/"){++D,T="",N=0,F=[],W=1;var Ae=te?B+te-1:B;if(D>E.e.c&&(E.e.c=D),D<E.s.c&&(E.s.c=D),B<E.s.r&&(E.s.r=B),Ae>E.e.r&&(E.e.r=Ae),w=Mr(g[0],!1),se=[],U={},y={t:w.数据类型||w["value-type"],v:null},r.cellFormula)if(w.formula&&(w.formula=Bn(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(M=parseInt(w["number-matrix-rows-spanned"],10)||0,Q=parseInt(w["number-matrix-columns-spanned"],10)||0,P={s:{r:B,c:D},e:{r:B+M-1,c:D+Q-1}},y.F=zr(P),re.push([P,y.F])),w.formula)y.f=O7(w.formula);else for(xe=0;xe<re.length;++xe)B>=re[xe][0].s.r&&B<=re[xe][0].e.r&&D>=re[xe][0].s.c&&D<=re[xe][0].e.c&&(y.F=re[xe][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(M=parseInt(w["number-rows-spanned"],10)||0,Q=parseInt(w["number-columns-spanned"],10)||0,P={s:{r:B,c:D},e:{r:B+M-1,c:D+Q-1}},H.push(P)),w["number-columns-repeated"]&&(W=parseInt(w["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=Ba(w["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(w.value);break;case"percentage":y.t="n",y.v=parseFloat(w.value);break;case"currency":y.t="n",y.v=parseFloat(w.value);break;case"date":y.t="d",y.v=Ia(w["date-value"]),r.cellDates||(y.t="n",y.v=ds(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=q1e(w["time-value"])/86400,r.cellDates&&(y.t="d",y.v=fT(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(w.数据数值);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",w["string-value"]!=null&&(T=Bn(w["string-value"]),F=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(ne=!1,y.t==="s"&&(y.v=T||"",F.length&&(y.R=F),ne=N==0),X.Target&&(y.l=X),se.length>0&&(y.c=se,se=[]),T&&r.cellText!==!1&&(y.w=T),ne&&(y.t="z",delete y.v),(!ne||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=B))for(var ae=0;ae<te;++ae){if(W=parseInt(w["number-columns-repeated"]||"1",10),r.dense)for(v[B+ae]||(v[B+ae]=[]),v[B+ae][D]=ae==0?y:Fa(y);--W>0;)v[B+ae][D+W]=Fa(y);else for(v[Fr({r:B+ae,c:D})]=y;--W>0;)v[Fr({r:B+ae,c:D+W})]=Fa(y);E.e.c<=D&&(E.e.c=D)}W=parseInt(w["number-columns-repeated"]||"1",10),D+=W-1,W=0,y={},T="",F=[]}X={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i;U.t=T,F.length&&(U.R=F),U.a=Y,se.push(U)}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);Y="",Z=0,T="",N=0,F=[];break;case"creator":g[1]==="/"?Y=n.slice(Z,g.index):Z=g.index+g[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);T="",N=0,F=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(k[o.name]=l,(i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(l="",o=Mr(g[0],!1),a.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":s=Mr(g[0],!1),l+=V7[g[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":s=Mr(g[0],!1),l+=V7[g[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,g.index);break}else c=g.index+g[0].length;break;case"named-range":s=Mr(g[0],!1),K=IB(s["cell-range-address"]);var ue={Name:s.name,Ref:K[0]+"!"+K[1]};de&&(ue.Sheet=m.length),z.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(g[1]==="/"&&(!w||!w["string-value"])){var le=xNe(n.slice(N,g.index));T=(T.length>0?T+`
`:"")+le[0]}else Mr(g[0],!1),N=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{K=IB(Mr(g[0])["target-range-address"]),h[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(X=Mr(g[0],!1),!X.href)break;X.Target=Bn(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(K=IB(X.Target.slice(1)),X.Target="#"+K[0]+"!"+K[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(g)}}var ie={Sheets:h,SheetNames:m,Workbook:z};return r.bookSheets&&delete ie.Sheets,ie}function z7(e,t){t=t||{},Yc(e,"META-INF/manifest.xml")&&qye(Hi(e,"META-INF/manifest.xml"),t);var r=rc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=EZ(pa(r),t);return Yc(e,"meta.xml")&&(n.Props=hJ(Hi(e,"meta.xml"))),n}function G7(e,t){return EZ(e,t)}var yNe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Qy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ki+t}}(),q7=function(){var e=function(i){return ia(i).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,s,o){var l=[];l.push('      <table:table table:name="'+ia(s.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,u=0,A=_l(i["!ref"]||"A1"),h=i["!merges"]||[],m=0,v=Array.isArray(i);if(i["!cols"])for(u=0;u<=A.e.c;++u)l.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",y=i["!rows"]||[];for(c=0;c<A.s.r;++c)g=y[c]?' table:style-name="ro'+y[c].ods+'"':"",l.push("        <table:table-row"+g+`></table:table-row>
`);for(;c<=A.e.r;++c){for(g=y[c]?' table:style-name="ro'+y[c].ods+'"':"",l.push("        <table:table-row"+g+`>
`),u=0;u<A.s.c;++u)l.push(t);for(;u<=A.e.c;++u){var w=!1,T={},N="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>u)&&!(h[m].s.r>c)&&!(h[m].e.c<u)&&!(h[m].e.r<c)){(h[m].s.c!=u||h[m].s.r!=c)&&(w=!0),T["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,T["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(w){l.push(r);continue}var F=Fr({r:c,c:u}),B=v?(i[c]||[])[u]:i[F];if(B&&B.f&&(T["table:formula"]=ia(j_e(B.f)),B.F&&B.F.slice(0,F.length)==F)){var D=_l(B.F);T["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,T["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!B){l.push(t);continue}switch(B.t){case"b":N=B.v?"TRUE":"FALSE",T["office:value-type"]="boolean",T["office:boolean-value"]=B.v?"true":"false";break;case"n":N=B.w||String(B.v||0),T["office:value-type"]="float",T["office:value"]=B.v||0;break;case"s":case"str":N=B.v==null?"":B.v,T["office:value-type"]="string";break;case"d":N=B.w||Ia(B.v).toISOString(),T["office:value-type"]="date",T["office:date-value"]=Ia(B.v).toISOString(),T["table:style-name"]="ce1";break;default:l.push(t);continue}var E=e(N);if(B.l&&B.l.Target){var S=B.l.Target;S=S.charAt(0)=="#"?"#"+H_e(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),E=Ot("text:a",E,{"xlink:href":S.replace(/&/g,"&amp;")})}l.push("          "+Ot("table:table-cell",Ot("text:p",E,{}),T)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(i,s){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var A=c["!cols"][u];if(A.width==null&&A.wpx==null&&A.wch==null)continue;y0(A),A.ods=o;var h=c["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),i.push(`  </style:style>
`),++o}}});var l=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=l;var A=c["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+A+`"/>
`),i.push(`  </style:style>
`),++l}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(s,o){var l=[ki],c=Qy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Qy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+u+`>
`),l.push(AJ().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),a(l,s),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var A=0;A!=s.SheetNames.length;++A)l.push(n(s.Sheets[s.SheetNames[A]],s,A));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function _Z(e,t){if(t.bookType=="fods")return q7(e,t);var r=LR(),n="",a=[],i=[];return n="mimetype",Yr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Yr(r,n,q7(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Yr(r,n,yNe(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Yr(r,n,ki+AJ()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Yr(r,n,Wye(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Yr(r,n,$ye(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function rm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function A3(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):pa(N0(e))}function bNe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):tc(Yd(e))}function wNe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function w0(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function $7(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function CNe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function ENe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Yy(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ta(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function fi(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ln(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Yy(e,r),i=a&7;a=Math.floor(a/8);var s=0,o;if(a==0)break;switch(i){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=Yy(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var c={data:o,type:i};t[a]==null?t[a]=[c]:t[a].push(c)}return t}function zs(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ta(n*8+a.type)),a.type==2&&t.push(ta(a.data.length)),t.push(a.data))})}),w0(t)}function uP(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function $c(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Yy(e,n),i=Ln(e.slice(n[0],n[0]+a));n[0]+=a;var s={id:fi(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Ln(o.data),c=fi(l[3][0].data);s.messages.push({meta:l,data:e.slice(n[0],n[0]+c)}),n[0]+=c}),(t=i[3])!=null&&t[0]&&(s.merge=fi(i[3][0].data)>>>0>0),r.push(s)}return r}function og(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ta(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ta(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:ta(s.data.length)}],n[2].push({data:zs(s.meta),type:2})});var i=zs(n);t.push(ta(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),w0(t)}function _Ne(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Yy(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}a.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,c=0;if(i==1?(c=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(c=(t[r[0]++]>>2)+1,i==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[w0(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(a.push(a[0].slice(-l)),c-=l;c>=a[a.length-1].length;)a.push(a[a.length-1]),c-=a[a.length-1].length;a.push(a[0].slice(-l,-l+c))}}var u=w0(a);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Kc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(_Ne(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return w0(t)}function lg(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=ta(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,r+=n}return w0(t)}function SNe(e,t,r,n){var a=rm(e),i=a.getUint32(4,!0),s=(n>1?12:8)+$7(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=a.getUint32(s,!0),s+=4),s+=$7(i&(n>1?12288:4096))*4,i&16&&(l=a.getUint32(s,!0),s+=4),i&32&&(c=a.getFloat64(s,!0),s+=8),i&64&&(u.setTime(u.getTime()+a.getFloat64(s,!0)*1e3),s+=8);var A;switch(e[2]){case 0:break;case 2:A={t:"n",v:c};break;case 3:A={t:"s",v:t[l]};break;case 5:A={t:"d",v:u};break;case 6:A={t:"b",v:c>0};break;case 7:A={t:"n",v:c/86400};break;case 8:A={t:"e",v:0};break;case 9:if(o>-1)A={t:"s",v:r[o]};else if(l>-1)A={t:"s",v:t[l]};else if(!isNaN(c))A={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return A}function TNe(e,t,r){var n=rm(e),a=n.getUint32(8,!0),i=12,s=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);a&1&&(l=CNe(e,i),i+=16),a&2&&(c=n.getFloat64(i,!0),i+=8),a&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),a&8&&(o=n.getUint32(i,!0),i+=4),a&16&&(s=n.getUint32(i,!0),i+=4);var A;switch(e[1]){case 0:break;case 2:A={t:"n",v:l};break;case 3:A={t:"s",v:t[o]};break;case 5:A={t:"d",v:u};break;case 6:A={t:"b",v:c>0};break;case 7:A={t:"n",v:c/86400};break;case 8:A={t:"e",v:0};break;case 9:if(s>-1)A={t:"s",v:r[s]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:A={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return A}function DB(e,t){var r=new Uint8Array(32),n=rm(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,ENe(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function RB(e,t){var r=new Uint8Array(32),n=rm(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function NNe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return SNe(e,t,r,e[0]);case 5:return TNe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function _o(e){var t=Ln(e);return Yy(t[1][0].data)}function K7(e,t){var r=Ln(t.data),n=fi(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(s){var o=Ln(s.data),l=fi(o[1][0].data)>>>0;switch(n){case 1:i[l]=A3(o[3][0].data);break;case 8:{var c=e[_o(o[9][0].data)][0],u=Ln(c.data),A=e[_o(u[1][0].data)][0],h=fi(A.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Ln(A.data);i[l]=m[3].map(function(v){return A3(v.data)}).join("")}break}}),i}function BNe(e,t){var r,n,a,i,s,o,l,c,u,A,h,m,v,g,y=Ln(e),w=fi(y[1][0].data)>>>0,T=fi(y[2][0].data)>>>0,N=((n=(r=y[8])==null?void 0:r[0])==null?void 0:n.data)&&fi(y[8][0].data)>0||!1,F,B;if((i=(a=y[7])==null?void 0:a[0])!=null&&i.data&&t!=0)F=(o=(s=y[7])==null?void 0:s[0])==null?void 0:o.data,B=(c=(l=y[6])==null?void 0:l[0])==null?void 0:c.data;else if((A=(u=y[4])==null?void 0:u[0])!=null&&A.data&&t!=1)F=(m=(h=y[4])==null?void 0:h[0])==null?void 0:m.data,B=(g=(v=y[3])==null?void 0:v[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var D=N?4:1,E=rm(F),S=[],k=0;k<F.length/2;++k){var H=E.getUint16(k*2,!0);H<65535&&S.push([k,H])}if(S.length!=T)throw"Expected ".concat(T," cells, found ").concat(S.length);var P=[];for(k=0;k<S.length-1;++k)P[S[k][0]]=B.subarray(S[k][1]*D,S[k+1][1]*D);return S.length>=1&&(P[S[S.length-1][0]]=B.subarray(S[S.length-1][1]*D)),{R:w,cells:P}}function kNe(e,t){var r,n=Ln(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?fi(n[7][0].data)>>>0>0?1:0:-1,i=uP(n[5],function(s){return BNe(s,a)});return{nrows:fi(n[4][0].data)>>>0,data:i.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(l,c){if(s[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));s[o.R][c]=l}),s},[])}}function INe(e,t,r){var n,a=Ln(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(fi(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(fi(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=zr(i);var s=Ln(a[4][0].data),o=K7(e,e[_o(s[4][0].data)][0]),l=(n=s[17])!=null&&n[0]?K7(e,e[_o(s[17][0].data)][0]):[],c=Ln(s[3][0].data),u=0;c[1].forEach(function(A){var h=Ln(A.data),m=e[_o(h[2][0].data)][0],v=fi(m.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var g=kNe(e,m);g.data.forEach(function(y,w){y.forEach(function(T,N){var F=Fr({r:u+w,c:N}),B=NNe(T,o,l);B&&(r[F]=B)})}),u+=g.nrows})}function FNe(e,t){var r=Ln(t.data),n={"!ref":"A1"},a=e[_o(r[2][0].data)],i=fi(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return INe(e,a[0],n),n}function DNe(e,t){var r,n=Ln(t.data),a={name:(r=n[1])!=null&&r[0]?A3(n[1][0].data):"",sheets:[]},i=uP(n[2],_o);return i.forEach(function(s){e[s].forEach(function(o){var l=fi(o.meta[1][0].data);l==6e3&&a.sheets.push(FNe(e,o))})}),a}function RNe(e,t){var r=mP(),n=Ln(t.data),a=uP(n[1],_o);if(a.forEach(function(i){e[i].forEach(function(s){var o=fi(s.meta[1][0].data);if(o==2){var l=DNe(e,s);l.sheets.forEach(function(c,u){gP(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function PB(e){var t,r,n,a,i={},s=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Kc(l.content)}catch(A){return console.log("?? "+l.content.length+" "+(A.message||A))}var u;try{u=$c(c)}catch(A){return console.log("## "+(A.message||A))}u.forEach(function(A){i[A.id]=A.messages,s.push(A.id)})}}),!s.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&fi(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||s.forEach(function(l){i[l].forEach(function(c){var u=fi(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return RNe(i,o)}function PNe(e,t,r){var n,a,i,s;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(i=e[8])==null?void 0:i[0])==null?void 0:s.data)&&fi(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=rm(e[7][0].data),u=0,A=[],h=rm(e[4][0].data),m=0,v=[],g=0;g<t.length;++g){if(t[g]==null){c.setUint16(g*2,65535,!0),h.setUint16(g*2,65535);continue}c.setUint16(g*2,u,!0),h.setUint16(g*2,m,!0);var y,w;switch(typeof t[g]){case"string":y=DB({t:"s",v:t[g]},r),w=RB({t:"s",v:t[g]},r);break;case"number":y=DB({t:"n",v:t[g]},r),w=RB({t:"n",v:t[g]},r);break;case"boolean":y=DB({t:"b",v:t[g]},r),w=RB({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}A.push(y),u+=y.length,v.push(w),m+=w.length,++l}for(e[2][0].data=ta(l);g<e[7][0].data.length/2;++g)c.setUint16(g*2,65535,!0),h.setUint16(g*2,65535,!0);return e[6][0].data=w0(A),e[3][0].data=w0(v),l}function MNe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=_l(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(zr(n)));var i=u_(r,{range:n,header:1}),s=["~Sh33tJ5~"];i.forEach(function(Y){return Y.forEach(function(Z){typeof Z=="string"&&s.push(Z)})});var o={},l=[],c=hr.read(t.numbers,{type:"base64"});c.FileIndex.map(function(Y,Z){return[Y,c.FullPaths[Z]]}).forEach(function(Y){var Z=Y[0],ne=Y[1];if(Z.type==2&&Z.name.match(/\.iwa/)){var de=Z.content,xe=Kc(de),Ae=$c(xe);Ae.forEach(function(ae){l.push(ae.id),o[ae.id]={deps:[],location:ne,type:fi(ae.messages[0].meta[1][0].data)}})}}),l.sort(function(Y,Z){return Y-Z});var u=l.filter(function(Y){return Y>1}).map(function(Y){return[Y,ta(Y)]});c.FileIndex.map(function(Y,Z){return[Y,c.FullPaths[Z]]}).forEach(function(Y){var Z=Y[0];if(Y[1],!!Z.name.match(/\.iwa/)){var ne=$c(Kc(Z.content));ne.forEach(function(de){de.messages.forEach(function(xe){u.forEach(function(Ae){de.messages.some(function(ae){return fi(ae.meta[1][0].data)!=11006&&wNe(ae.data,Ae[1])})&&o[Ae[0]].deps.push(de.id)})})})}});for(var A=hr.find(c,o[1].location),h=$c(Kc(A.content)),m,v=0;v<h.length;++v){var g=h[v];g.id==1&&(m=g)}var y=_o(Ln(m.messages[0].data)[1][0].data);for(A=hr.find(c,o[y].location),h=$c(Kc(A.content)),v=0;v<h.length;++v)g=h[v],g.id==y&&(m=g);for(y=_o(Ln(m.messages[0].data)[2][0].data),A=hr.find(c,o[y].location),h=$c(Kc(A.content)),v=0;v<h.length;++v)g=h[v],g.id==y&&(m=g);for(y=_o(Ln(m.messages[0].data)[2][0].data),A=hr.find(c,o[y].location),h=$c(Kc(A.content)),v=0;v<h.length;++v)g=h[v],g.id==y&&(m=g);var w=Ln(m.messages[0].data);{w[6][0].data=ta(n.e.r+1),w[7][0].data=ta(n.e.c+1);var T=_o(w[46][0].data),N=hr.find(c,o[T].location),F=$c(Kc(N.content));{for(var B=0;B<F.length&&F[B].id!=T;++B);if(F[B].id!=T)throw"Bad ColumnRowUIDMapArchive";var D=Ln(F[B].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var E=0;E<=n.e.c;++E){var S=[];S[1]=S[2]=[{type:0,data:ta(E+420690)}],D[1].push({type:2,data:zs(S)}),D[2].push({type:0,data:ta(E)}),D[3].push({type:0,data:ta(E)})}D[4]=[],D[5]=[],D[6]=[];for(var k=0;k<=n.e.r;++k)S=[],S[1]=S[2]=[{type:0,data:ta(k+726270)}],D[4].push({type:2,data:zs(S)}),D[5].push({type:0,data:ta(k)}),D[6].push({type:0,data:ta(k)});F[B].messages[0].data=zs(D)}N.content=lg(og(F)),N.size=N.content.length,delete w[46];var H=Ln(w[4][0].data);{H[7][0].data=ta(n.e.r+1);var P=Ln(H[1][0].data),M=_o(P[2][0].data);N=hr.find(c,o[M].location),F=$c(Kc(N.content));{if(F[0].id!=M)throw"Bad HeaderStorageBucket";var Q=Ln(F[0].messages[0].data);for(k=0;k<i.length;++k){var V=Ln(Q[2][0].data);V[1][0].data=ta(k),V[4][0].data=ta(i[k].length),Q[2][k]={type:Q[2][0].type,data:zs(V)}}F[0].messages[0].data=zs(Q)}N.content=lg(og(F)),N.size=N.content.length;var te=_o(H[2][0].data);N=hr.find(c,o[te].location),F=$c(Kc(N.content));{if(F[0].id!=te)throw"Bad HeaderStorageBucket";for(Q=Ln(F[0].messages[0].data),E=0;E<=n.e.c;++E)V=Ln(Q[2][0].data),V[1][0].data=ta(E),V[4][0].data=ta(n.e.r+1),Q[2][E]={type:Q[2][0].type,data:zs(V)};F[0].messages[0].data=zs(Q)}N.content=lg(og(F)),N.size=N.content.length;var W=_o(H[4][0].data);(function(){for(var Y=hr.find(c,o[W].location),Z=$c(Kc(Y.content)),ne,de=0;de<Z.length;++de){var xe=Z[de];xe.id==W&&(ne=xe)}var Ae=Ln(ne.messages[0].data);{Ae[3]=[];var ae=[];s.forEach(function(ie,De){ae[1]=[{type:0,data:ta(De)}],ae[2]=[{type:0,data:ta(1)}],ae[3]=[{type:2,data:bNe(ie)}],Ae[3].push({type:2,data:zs(ae)})})}ne.messages[0].data=zs(Ae);var ue=og(Z),le=lg(ue);Y.content=le,Y.size=Y.content.length})();var re=Ln(H[3][0].data);{var z=re[1][0];delete re[2];var X=Ln(z.data);{var K=_o(X[2][0].data);(function(){for(var Y=hr.find(c,o[K].location),Z=$c(Kc(Y.content)),ne,de=0;de<Z.length;++de){var xe=Z[de];xe.id==K&&(ne=xe)}var Ae=Ln(ne.messages[0].data);{delete Ae[6],delete re[7];var ae=new Uint8Array(Ae[5][0].data);Ae[5]=[];for(var ue=0,le=0;le<=n.e.r;++le){var ie=Ln(ae);ue+=PNe(ie,i[le],s),ie[1][0].data=ta(le),Ae[5].push({data:zs(ie),type:2})}Ae[1]=[{type:0,data:ta(n.e.c+1)}],Ae[2]=[{type:0,data:ta(n.e.r+1)}],Ae[3]=[{type:0,data:ta(ue)}],Ae[4]=[{type:0,data:ta(n.e.r+1)}]}ne.messages[0].data=zs(Ae);var De=og(Z),Le=lg(De);Y.content=Le,Y.size=Y.content.length})()}z.data=zs(X)}H[3][0].data=zs(re)}w[4][0].data=zs(H)}m.messages[0].data=zs(w);var se=og(h),U=lg(se);return A.content=U,A.size=A.content.length,c}function SZ(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function dP(e){SZ([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function fP(e){SZ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function LNe(e){return un.WS.indexOf(e)>-1?"sheet":e==un.CS?"chart":e==un.DS?"dialog":e==un.MS?"macro":e&&e.length?e:"sheet"}function ONe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,LNe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function UNe(e,t,r,n,a,i,s,o,l,c,u,A){try{i[n]=uy(rc(e,r,!0),t);var h=Hi(e,t),m;switch(o){case"sheet":m=o5e(h,t,a,l,i[n],c,u,A);break;case"chart":if(m=l5e(h,t,a,l,i[n],c,u,A),!m||!m["!drawel"])break;var v=O1(m["!drawel"].Target,t),g=zy(v),y=KCe(rc(e,v,!0),uy(rc(e,g,!0),v)),w=O1(y,v),T=zy(w);m=PTe(rc(e,w,!0),w,l,uy(rc(e,T,!0),w),c,m);break;case"macro":m=c5e(h,t,a,l,i[n],c,u,A);break;case"dialog":m=u5e(h,t,a,l,i[n],c,u,A);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=m;var N=[];i&&i[n]&&Ai(i[n]).forEach(function(F){var B="";if(i[n][F].Type==un.CMNT){B=O1(i[n][F].Target,t);var D=h5e(Hi(e,B,!0),B,l);if(!D||!D.length)return;D7(m,D,!1)}i[n][F].Type==un.TCMNT&&(B=O1(i[n][F].Target,t),N=N.concat(YCe(Hi(e,B,!0),l)))}),N&&N.length&&D7(m,N,!0,l.people||[])}catch(F){if(l.WTF)throw F}}function Hc(e){return e.charAt(0)=="/"?e.slice(1):e}function jNe(e,t){if(tx(),t=t||{},dP(t),Yc(e,"META-INF/manifest.xml")||Yc(e,"objectdata.xml"))return z7(e,t);if(Yc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof PB<"u"){if(e.FileIndex)return PB(e);var r=hr.utils.cfb_new();return e7(e).forEach(function(V){Yr(r,V,X1e(e,V))}),PB(r)}throw new Error("Unsupported NUMBERS file")}if(!Yc(e,"[Content_Types].xml"))throw Yc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Yc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=e7(e),a=zye(rc(e,"[Content_Types].xml")),i=!1,s,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Hi(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Hi(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(dy=[],a.sst)try{dy=A5e(Hi(e,Hc(a.sst)),a.sst,t)}catch(V){if(t.WTF)throw V}t.cellStyles&&a.themes.length&&(l=f5e(rc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(c=d5e(Hi(e,Hc(a.style)),a.style,l,t))}a.links.map(function(V){try{var te=uy(rc(e,zy(Hc(V))),V);return m5e(Hi(e,Hc(V)),te,V,t)}catch{}});var u=s5e(Hi(e,Hc(a.workbooks[0])),a.workbooks[0],t),A={},h="";a.coreprops.length&&(h=Hi(e,Hc(a.coreprops[0]),!0),h&&(A=hJ(h)),a.extprops.length!==0&&(h=Hi(e,Hc(a.extprops[0]),!0),h&&Xye(h,A,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=rc(e,Hc(a.custprops[0]),!0),h&&(m=Zye(h,t)));var v={};if((t.bookSheets||t.bookProps)&&(u.Sheets?s=u.Sheets.map(function(te){return te.name}):A.Worksheets&&A.SheetNames.length>0&&(s=A.SheetNames),t.bookProps&&(v.Props=A,v.Custprops=m),t.bookSheets&&typeof s<"u"&&(v.SheetNames=s),t.bookSheets?v.SheetNames:t.bookProps))return v;s={};var g={};t.bookDeps&&a.calcchain&&(g=p5e(Hi(e,Hc(a.calcchain)),a.calcchain));var y=0,w={},T,N;{var F=u.Sheets;A.Worksheets=F.length,A.SheetNames=[];for(var B=0;B!=F.length;++B)A.SheetNames[B]=F[B].name}var D=i?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Yc(e,S)||(S="xl/_rels/workbook."+D+".rels");var k=uy(rc(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=g5e(Hi(e,Hc(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=JCe(Hi(e,Hc(a.people[0])),t)),k&&(k=ONe(k,u.Sheets));var H=Hi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=A.Worksheets;++y){var P="sheet";if(k&&k[y]?(T="xl/"+k[y][1].replace(/[\/]?xl\//,""),Yc(e,T)||(T=k[y][1]),Yc(e,T)||(T=S.replace(/_rels\/.*$/,"")+k[y][1]),P=k[y][2]):(T="xl/worksheets/sheet"+(y+1-H)+"."+D,T=T.replace(/sheet0\./,"sheet.")),N=T.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(A.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var M=!1,Q=0;Q!=t.sheets.length;++Q)typeof t.sheets[Q]=="number"&&t.sheets[Q]==y&&(M=1),typeof t.sheets[Q]=="string"&&t.sheets[Q].toLowerCase()==A.SheetNames[y].toLowerCase()&&(M=1);if(!M)continue e}}UNe(e,T,N,A.SheetNames[y],y,w,s,P,t,u,l,c)}return v={Directory:a,Workbook:u,Props:A,Custprops:m,Deps:g,Sheets:s,SheetNames:A.SheetNames,Strings:dy,Styles:c,Themes:l,SSF:Fa(Nr)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(V,te){V=V.replace(/^Root Entry[\/]/,""),v.keys.push(V),v.files[V]=e.FileIndex[te]}))),t&&t.bookVBA&&(a.vba.length>0?v.vbaraw=Hi(e,Hc(a.vba[0]),!0):a.defaults&&a.defaults.bin===sEe&&(v.vbaraw=Hi(e,"xl/vbaProject.bin",!0))),v}function HNe(e,t){var r=t||{},n="Workbook",a=hr.find(e,n);try{if(n="/!DataSpaces/Version",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(g2e(a.content),n="/!DataSpaces/DataSpaceMap",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=x2e(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=y2e(a.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);w2e(a.content)}catch{}if(n="/EncryptionInfo",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=C2e(a.content);if(n="/EncryptedPackage",a=hr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function QNe(e,t){return t.bookType=="ods"?_Z(e,t):t.bookType=="numbers"?MNe(e,t):t.bookType=="xlsb"?VNe(e,t):zNe(e,t)}function VNe(e,t){Lg=1024,e&&!e.SSF&&(e.SSF=Fa(Nr)),e&&e.SSF&&(tx(),cT(e.SSF),t.revssf=dT(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,fy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=ZJ.indexOf(t.bookType)>-1,a=XR();fP(t=t||{});var i=LR(),s="",o=0;if(t.cellXfs=[],k0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",Yr(i,s,pJ(e.Props,t)),a.coreprops.push(s),ra(t.rels,2,s,un.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,Yr(i,s,vJ(e.Props)),a.extprops.push(s),ra(t.rels,3,s,un.EXT_PROPS),e.Custprops!==e.Props&&Ai(e.Custprops||{}).length>0&&(s="docProps/custom.xml",Yr(i,s,xJ(e.Custprops)),a.custprops.push(s),ra(t.rels,4,s,un.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},A=e.Sheets[e.SheetNames[o-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,Yr(i,s,x5e(o-1,s,t,e,u)),a.sheets.push(s),ra(t.wbrels,-1,"worksheets/sheet"+o+"."+r,un.WS[0])}if(A){var m=A["!comments"],v=!1,g="";m&&m.length>0&&(g="xl/comments"+o+"."+r,Yr(i,g,w5e(m,g)),a.comments.push(g),ra(u,-1,"../comments"+o+"."+r,un.CMNT),v=!0),A["!legacy"]&&v&&Yr(i,"xl/drawings/vmlDrawing"+o+".vml",XJ(o,A["!comments"])),delete A["!comments"],delete A["!legacy"]}u["!id"].rId1&&Yr(i,zy(s),rv(u))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,Yr(i,s,b5e(t.Strings,s,t)),a.strs.push(s),ra(t.wbrels,-1,"sharedStrings."+r,un.SST)),s="xl/workbook."+r,Yr(i,s,v5e(e,s)),a.workbooks.push(s),ra(t.rels,1,s,un.WB),s="xl/theme/theme1.xml",Yr(i,s,nP(e.Themes,t)),a.themes.push(s),ra(t.wbrels,-1,"theme/theme1.xml",un.THEME),s="xl/styles."+r,Yr(i,s,y5e(e,s,t)),a.styles.push(s),ra(t.wbrels,-1,"styles."+r,un.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",Yr(i,s,e.vbaraw),a.vba.push(s),ra(t.wbrels,-1,"vbaProject.bin",un.VBA)),s="xl/metadata."+r,Yr(i,s,C5e(s)),a.metadata.push(s),ra(t.wbrels,-1,"metadata."+r,un.XLMETA),Yr(i,"[Content_Types].xml",fJ(a,t)),Yr(i,"_rels/.rels",rv(t.rels)),Yr(i,"xl/_rels/workbook."+r+".rels",rv(t.wbrels)),delete t.revssf,delete t.ssf,i}function zNe(e,t){Lg=1024,e&&!e.SSF&&(e.SSF=Fa(Nr)),e&&e.SSF&&(tx(),cT(e.SSF),t.revssf=dT(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,fy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=ZJ.indexOf(t.bookType)>-1,a=XR();fP(t=t||{});var i=LR(),s="",o=0;if(t.cellXfs=[],k0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",Yr(i,s,pJ(e.Props,t)),a.coreprops.push(s),ra(t.rels,2,s,un.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,Yr(i,s,vJ(e.Props)),a.extprops.push(s),ra(t.rels,3,s,un.EXT_PROPS),e.Custprops!==e.Props&&Ai(e.Custprops||{}).length>0&&(s="docProps/custom.xml",Yr(i,s,xJ(e.Custprops)),a.custprops.push(s),ra(t.rels,4,s,un.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var A={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,Yr(i,s,uZ(o-1,t,e,A)),a.sheets.push(s),ra(t.wbrels,-1,"worksheets/sheet"+o+"."+r,un.WS[0])}if(h){var v=h["!comments"],g=!1,y="";if(v&&v.length>0){var w=!1;v.forEach(function(T){T[1].forEach(function(N){N.T==!0&&(w=!0)})}),w&&(y="xl/threadedComments/threadedComment"+o+"."+r,Yr(i,y,XCe(v,u,t)),a.threadedcomments.push(y),ra(A,-1,"../threadedComments/threadedComment"+o+"."+r,un.TCMNT)),y="xl/comments"+o+"."+r,Yr(i,y,JJ(v)),a.comments.push(y),ra(A,-1,"../comments"+o+"."+r,un.CMNT),g=!0}h["!legacy"]&&g&&Yr(i,"xl/drawings/vmlDrawing"+o+".vml",XJ(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}A["!id"].rId1&&Yr(i,zy(s),rv(A))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,Yr(i,s,UJ(t.Strings,t)),a.strs.push(s),ra(t.wbrels,-1,"sharedStrings."+r,un.SST)),s="xl/workbook."+r,Yr(i,s,pZ(e)),a.workbooks.push(s),ra(t.rels,1,s,un.WB),s="xl/theme/theme1.xml",Yr(i,s,nP(e.Themes,t)),a.themes.push(s),ra(t.wbrels,-1,"theme/theme1.xml",un.THEME),s="xl/styles."+r,Yr(i,s,$J(e,t)),a.styles.push(s),ra(t.wbrels,-1,"styles."+r,un.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",Yr(i,s,e.vbaraw),a.vba.push(s),ra(t.wbrels,-1,"vbaProject.bin",un.VBA)),s="xl/metadata."+r,Yr(i,s,YJ()),a.metadata.push(s),ra(t.wbrels,-1,"metadata."+r,un.XLMETA),u.length>1&&(s="xl/persons/person.xml",Yr(i,s,ZCe(u)),a.people.push(s),ra(t.wbrels,-1,"persons/person.xml",un.PEOPLE)),Yr(i,"[Content_Types].xml",fJ(a,t)),Yr(i,"_rels/.rels",rv(t.rels)),Yr(i,"xl/_rels/workbook."+r+".rels",rv(t.wbrels)),delete t.revssf,delete t.ssf,i}function AP(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=uc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function GNe(e,t){return hr.find(e,"EncryptedPackage")?HNe(e,t):xZ(e,t)}function qNe(e,t){var r,n=e,a=t||{};return a.type||(a.type=nn&&Buffer.isBuffer(e)?"buffer":"base64"),r=HX(n,a),jNe(r,a)}function TZ(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return d3(e.slice(r),t);default:break e}return Ev.to_workbook(e,t)}function $Ne(e,t){var r="",n=AP(e,t);switch(t.type){case"base64":r=uc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Jp(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=pa(r)),t.type="binary",TZ(r,t)}function KNe(e,t){var r=e;return t.type=="base64"&&(r=uc(r)),r=Oy.utils.decode(1200,r.slice(2),"str"),t.type="binary",TZ(r,t)}function WNe(e){return e.match(/[^\x00-\x7F]/)?Yd(e):e}function MB(e,t,r,n){return n?(r.type="string",Ev.to_workbook(e,r)):Ev.to_workbook(t,r)}function Xy(e,t){FR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Xy(new Uint8Array(e),(r=Fa(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),av={},r.dateNF&&(av.dateNF=r.dateNF),r.type||(r.type=nn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=nn?"buffer":"binary",n=V1e(e),typeof Uint8Array<"u"&&!nn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=WNe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return r=Fa(r),r.type="array",Xy(DR(n),r)}switch((a=AP(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return GNe(hr.read(n,r),r);break;case 9:if(a[1]<=8)return xZ(n,r);break;case 60:return d3(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return e2e(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return LJ.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?qNe(n,r):MB(e,n,r,i);case 239:return a[3]===60?d3(n,r):MB(e,n,r,i);case 255:if(a[1]===254)return KNe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Rp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Rp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return u3.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return zJ.to_workbook(n,r);break;case 10:case 13:case 32:return $Ne(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Zwe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?u3.to_workbook(n,r):MB(e,n,r,i)}function NZ(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Lb(t.file,hr.write(e,{type:nn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return hr.write(e,t)}function YNe(e,t){var r=Fa(t||{}),n=QNe(e,r);return XNe(n,r)}function XNe(e,t){var r={},n=nn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(lT(a))}return t.password&&typeof encrypt_agile<"u"?NZ(encrypt_agile(a,t.password),t):t.type==="file"?Lb(t.file,a):t.type=="string"?pa(a):a}function JNe(e,t){var r=t||{},n=W5e(e,r);return NZ(n,r)}function Vd(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Uy(Yd(n));case"binary":return Yd(n);case"string":return e;case"file":return Lb(t.file,n,"utf8");case"buffer":return nn?FA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Vd(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function ZNe(e,t){switch(t.type){case"base64":return Uy(e);case"binary":return e;case"string":return e;case"file":return Lb(t.file,e,"binary");case"buffer":return nn?FA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function R2(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Uy(r):t.type=="string"?pa(r):r;case"file":return Lb(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function BZ(e,t){FR(),GTe(e);var r=Fa(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=BZ(e,r);return r.type="array",lT(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Vd(Q5e(e,r),r);case"slk":case"sylk":return Vd(MJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Vd(bZ(e.Sheets[e.SheetNames[a]],r),r);case"txt":return ZNe(kZ(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Vd(pP(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Vd(LJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return R2(u3.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Vd(Ev.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Vd(zJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Vd(OJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Vd(_Z(e,r),r);case"wk1":return R2(Rp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return R2(Rp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),R2(yZ(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),JNe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return YNe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function eBe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function hP(e,t,r){var n={};return n.type="file",n.file=t,eBe(n),BZ(e,n)}function tBe(e,t,r,n,a,i,s,o){var l=Bi(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),A=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!s||e[r])for(var m=t.s.c;m<=t.e.c;++m){var v=s?e[r][m]:e[n[m]+l];if(v===void 0||v.t===void 0){if(c===void 0)continue;i[m]!=null&&(h[i[m]]=c);continue}var g=v.v;switch(v.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[m]!=null){if(g==null)if(v.t=="e"&&g===null)h[i[m]]=null;else if(c!==void 0)h[i[m]]=c;else if(u&&g===null)h[i[m]]=null;else continue;else h[i[m]]=u&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?g:wA(v,g,o);g!=null&&(A=!1)}}return{row:h,isempty:A}}function u_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=c.range!=null?c.range:e["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=kn(u);break;case"number":l=kn(e["!ref"]),l.s.r=u;break;default:l=u}n>0&&(a=0);var A=Bi(l.s.r),h=[],m=[],v=0,g=0,y=Array.isArray(e),w=l.s.r,T=0,N={};y&&!e[w]&&(e[w]=[]);var F=c.skipHidden&&e["!cols"]||[],B=c.skipHidden&&e["!rows"]||[];for(T=l.s.c;T<=l.e.c;++T)if(!(F[T]||{}).hidden)switch(h[T]=Ka(T),r=y?e[w][T]:e[h[T]+A],n){case 1:i[T]=T-l.s.c;break;case 2:i[T]=h[T];break;case 3:i[T]=c.header[T-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=wA(r,null,c),g=N[s]||0,!g)N[s]=1;else{do o=s+"_"+g++;while(N[o]);N[s]=g,N[o]=1}i[T]=o}for(w=l.s.r+a;w<=l.e.r;++w)if(!(B[w]||{}).hidden){var D=tBe(e,l,w,h,n,i,y,c);(D.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[v++]=D.row)}return m.length=v,m}var W7=/"/g;function rBe(e,t,r,n,a,i,s,o){for(var l=!0,c=[],u="",A=Bi(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=o.dense?(e[r]||[])[h]:e[n[h]+A];if(m==null)u="";else if(m.v!=null){l=!1,u=""+(o.rawNumbers&&m.t=="n"?m.v:wA(m,null,o));for(var v=0,g=0;v!==u.length;++v)if((g=u.charCodeAt(v))===a||g===i||g===34||o.forceQuotes){u='"'+u.replace(W7,'""')+'"';break}u=="ID"&&(u='"ID"')}else m.f!=null&&!m.F?(l=!1,u="="+m.f,u.indexOf(",")>=0&&(u='"'+u.replace(W7,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(s)}function pP(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=kn(e["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",A=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],v=a.s.c;v<=a.e.c;++v)(h[v]||{}).hidden||(A[v]=Ka(v));for(var g=0,y=a.s.r;y<=a.e.r;++y)(m[y]||{}).hidden||(u=rBe(e,a,y,A,s,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((g++?o:"")+u)));return delete n.dense,r.join("")}function kZ(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=pP(e,t);return r}function nBe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=kn(e["!ref"]),i="",s=[],o,l=[],c=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)s[o]=Ka(o);for(var u=a.s.r;u<=a.e.r;++u)for(i=Bi(u),o=a.s.c;o<=a.e.c;++o)if(t=s[o]+i,r=c?(e[u]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function IZ(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},s=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Wa(n.origin):n.origin;s=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:s+t.length-1+a}};if(i["!ref"]){var A=kn(i["!ref"]);u.e.c=Math.max(u.e.c,A.e.c),u.e.r=Math.max(u.e.r,A.e.r),s==-1&&(s=A.e.r+1,u.e.r=s+t.length-1+a)}else s==-1&&(s=0,u.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(g,y){Ai(g).forEach(function(w){(m=h.indexOf(w))==-1&&(h[m=h.length]=w);var T=g[w],N="z",F="",B=Fr({c:o+m,r:s+y+a});c=Jy(i,B),T&&typeof T=="object"&&!(T instanceof Date)?i[B]=T:(typeof T=="number"?N="n":typeof T=="boolean"?N="b":typeof T=="string"?N="s":T instanceof Date?(N="d",n.cellDates||(N="n",T=ds(T)),F=n.dateNF||Nr[14]):T===null&&n.nullError&&(N="e",T=0),c?(c.t=N,c.v=T,delete c.w,delete c.R,F&&(c.z=F)):i[B]=c={t:N,v:T},F&&(c.z=F))})}),u.e.c=Math.max(u.e.c,o+h.length-1);var v=Bi(s);if(a)for(m=0;m<h.length;++m)i[Ka(m+o)+v]={t:"s",v:h[m]};return i["!ref"]=zr(u),i}function aBe(e,t){return IZ(null,e,t)}function Jy(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Wa(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Jy(e,Fr(t)):Jy(e,Fr({r:t,c:r||0}))}function iBe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function mP(){return{SheetNames:[],Sheets:{}}}function gP(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var s=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=s+a)!=-1;++a);}if(hZ(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function sBe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=iBe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function oBe(e,t){return e.z=t,e}function FZ(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function lBe(e,t,r){return FZ(e,"#"+t,r)}function cBe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function uBe(e,t,r,n){for(var a=typeof t!="string"?t:kn(t),i=typeof t=="string"?t:zr(t),s=a.s.r;s<=a.e.r;++s)for(var o=a.s.c;o<=a.e.c;++o){var l=Jy(e,s,o);l.t="n",l.F=i,delete l.v,s==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e}var au={encode_col:Ka,encode_row:Bi,encode_cell:Fr,encode_range:zr,decode_col:GR,decode_row:zR,split_cell:bye,decode_cell:Wa,decode_range:_l,format_cell:wA,sheet_add_aoa:iJ,sheet_add_json:IZ,sheet_add_dom:wZ,aoa_to_sheet:rx,json_to_sheet:aBe,table_to_sheet:CZ,table_to_book:gNe,sheet_to_csv:pP,sheet_to_txt:kZ,sheet_to_json:u_,sheet_to_html:bZ,sheet_to_formulae:nBe,sheet_to_row_object_array:u_,sheet_get_cell:Jy,book_new:mP,book_append_sheet:gP,book_set_sheet_visibility:sBe,cell_set_number_format:oBe,cell_set_hyperlink:FZ,cell_set_internal_link:lBe,cell_add_comment:cBe,sheet_set_array_formula:uBe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const dBe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const i=[];for(const l of r)try{const c=Ft(en,l),u=await $i(c),A=u.size;n+=A,i.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:A});let h=0;u.docs.forEach(m=>{const v=m.data();v.createdAt&&new Date(v.createdAt)>=t&&h++}),a+=h}catch(c){console.warn(`Error accediendo a colección ${l}:`,c),i.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const s=[];try{const l=Ft(en,"apiLogs"),c=new Date(e.getTime()-10080*60*1e3),u=tr(l,On("timestamp",">=",c.toISOString()),an("timestamp","desc")),A=await $i(u),h={};A.docs.forEach(m=>{const v=m.data(),g=new Date(v.timestamp).toLocaleDateString("es-CL");h[g]=(h[g]||0)+1}),Object.entries(h).sort(([m],[v])=>new Date(m).getTime()-new Date(v).getTime()).forEach(([m,v])=>{s.push({label:m,value:v})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:i.sort((l,c)=>c.value-l.value),dailyActivity:s}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},Y7=500,cg=({title:e,value:t,description:r,alert:n})=>d.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),d.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),LB=({title:e,data:t,colorClass:r})=>{const n=L.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),d.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),d.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),d.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:d.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},fBe=()=>{const[e,t]=L.useState([]),[r,n]=L.useState(!0),[a,i]=L.useState(null),[s,o]=L.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});L.useEffect(()=>{n(!0);const A=nve(v=>{t(v),n(!1)}),h=async()=>{try{const v=await dBe();o(v)}catch(v){console.error("Error al cargar estadísticas de Firestore:",v)}};h();const m=setInterval(h,300*1e3);return()=>{A(),clearInterval(m)}},[]);const{stats:l,userStats:c,moduleStats:u}=L.useMemo(()=>{const A=new Date,h=new Date(A.getFullYear(),A.getMonth(),A.getDate()).getTime(),m=h-A.getDay()*24*60*60*1e3,v=new Date(A.getFullYear(),A.getMonth(),1).getTime(),g={today:0,week:0,month:0},y={},w={};e.forEach(F=>{const B=new Date(F.timestamp).getTime();B>=h&&g.today++,B>=m&&g.week++,B>=v&&g.month++;const D=F.userEmail||"Desconocido";y[D]||(y[D]={email:D,today:0,month:0,total:0}),y[D].total++,B>=h&&y[D].today++,B>=v&&y[D].month++,w[F.module]=(w[F.module]||0)+1});const T=Object.values(y).sort((F,B)=>B.total-F.total),N=Object.entries(w).map(([F,B])=>({label:F,value:B})).sort((F,B)=>B.value-F.value);return{stats:g,userStats:T,moduleStats:N}},[e]);return d.jsxs("div",{className:"space-y-8",children:[a&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&d.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsx(cg,{title:"Llamadas Hoy",value:r?"--":l.today,description:`Límite recomendado: ${Y7}`,alert:l.today>Y7}),d.jsx(cg,{title:"Llamadas esta Semana",value:r?"--":l.week}),d.jsx(cg,{title:"Llamadas este Mes",value:r?"--":l.month})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[d.jsx(LB,{title:"Uso por Módulo",data:u,colorClass:"bg-sky-500"}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),d.jsx("div",{className:"overflow-x-auto max-h-96",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),d.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),d.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),d.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&c.length>0?c.map(A=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:A.email}),d.jsx("td",{className:"px-4 py-2 text-center text-sm",children:A.today}),d.jsx("td",{className:"px-4 py-2 text-center text-sm",children:A.month}),d.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:A.total})]},A.email)):d.jsx("tr",{children:d.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsx(cg,{title:"Documentos Creados (Hoy)",value:s.documentsCreatedToday,description:"Nuevos documentos"}),d.jsx(cg,{title:"Lecturas de Firestore (Hoy)",value:s.readsToday,description:"Operaciones de lectura"}),d.jsx(cg,{title:"Total de Documentos",value:s.totalDocuments,description:"En todas las colecciones"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[d.jsx(LB,{title:"Actividad por Colección",data:s.collectionsActivity,colorClass:"bg-green-500"}),d.jsx(LB,{title:"Actividad Diaria (Últimos 7 días)",data:s.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ABe="type.googleapis.com/google.protobuf.Int64Value",hBe="type.googleapis.com/google.protobuf.UInt64Value";function DZ(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function d_(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>d_(t));if(typeof e=="function"||typeof e=="object")return DZ(e,t=>d_(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Sv(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case ABe:case hBe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Sv(t)):typeof e=="function"||typeof e=="object"?DZ(e,t=>Sv(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yl extends Af{constructor(t,r,n){super(`${vP}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,yl.prototype)}}function pBe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function f_(e,t){let r=pBe(e),n=r,a;try{const i=t&&t.error;if(i){const s=i.status;if(typeof s=="string"){if(!X7[s])return new yl("internal","internal");r=X7[s],n=s}const o=i.message;typeof o=="string"&&(n=o),a=i.details,a!==void 0&&(a=Sv(a))}}catch{}return r==="ok"?null:new yl(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mBe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,tu(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||a==null||a.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="us-central1",gBe=/^data: (.*?)(?:\n|$)/;function vBe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new yl("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class xBe{constructor(t,r,n,a,i=h3,s=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new mBe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=h3}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function yBe(e,t,r){const n=dm(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(vD(e.emulatorOrigin),xD("Functions",!0))}function bBe(e,t,r){const n=a=>CBe(e,t,a,{});return n.stream=(a,i)=>_Be(e,t,a,i),n}async function wBe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}async function RZ(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function CBe(e,t,r,n){const a=e._url(t);return EBe(e,a,r,n)}async function EBe(e,t,r,n){r=d_(r);const a={data:r},i=await RZ(e,n),s=n.timeout||7e4,o=vBe(s),l=await Promise.race([wBe(t,a,i,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!l)throw new yl("cancelled","Firebase Functions instance was deleted.");const c=f_(l.status,l.json);if(c)throw c;if(!l.json)throw new yl("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new yl("internal","Response is missing data field.");return{data:Sv(u)}}function _Be(e,t,r,n){const a=e._url(t);return SBe(e,a,r,n||{})}async function SBe(e,t,r,n){var h;r=d_(r);const a={data:r},i=await RZ(e,n);i["Content-Type"]="application/json",i.Accept="text/event-stream";let s;try{s=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:i,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new yl("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const v=f_(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,l;const c=new Promise((m,v)=>{o=m,l=v});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const m=new yl("cancelled","Request was cancelled.");l(m)});const u=s.body.getReader(),A=TBe(u,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=A.getReader();return{async next(){const{value:v,done:g}=await m.read();return{value:v,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function TBe(e,t,r,n){const a=(s,o)=>{const l=s.match(gBe);if(!l)return;const c=l[1];try{const u=JSON.parse(c);if("result"in u){t(Sv(u.result));return}if("message"in u){o.enqueue(Sv(u.message));return}if("error"in u){const A=f_(0,u);o.error(A),r(A);return}}catch(u){if(u instanceof yl){o.error(u),r(u);return}}},i=new TextDecoder;return new ReadableStream({start(s){let o="";return l();async function l(){if(n!=null&&n.aborted){const c=new yl("cancelled","Request was cancelled");return s.error(c),r(c),Promise.resolve()}try{const{value:c,done:u}=await e.read();if(u){o.trim()&&a(o.trim(),s),s.close();return}if(n!=null&&n.aborted){const h=new yl("cancelled","Request was cancelled");s.error(h),r(h),await e.cancel();return}o+=i.decode(c,{stream:!0});const A=o.split(`
`);o=A.pop()||"";for(const h of A)h.trim()&&a(h.trim(),s);return l()}catch(c){const u=c instanceof yl?c:f_(0,null);s.error(u),r(u)}}},cancel(){return e.cancel()}})}const J7="@firebase/functions",Z7="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NBe="auth-internal",BBe="app-check-internal",kBe="messaging-internal";function IBe(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),i=r.getProvider(NBe),s=r.getProvider(kBe),o=r.getProvider(BBe);return new xBe(a,i,s,o,n)};qp(new u0(vP,t,"PUBLIC").setMultipleInstances(!0)),Jd(J7,Z7,e),Jd(J7,Z7,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(e=CD(),t=h3){const n=NS(Ha(e),vP).getImmediate({identifier:t}),a=oK("functions");return a&&FBe(n,...a),n}function FBe(e,t,r){yBe(Ha(e),t,r)}function ug(e,t,r){return bBe(Ha(e),t)}IBe();const eH=Ft(en,"usuarios");async function PZ(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",eH);const e=await $i(eH);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const tH=Object.values(Ht),OB=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",DBe=()=>{const[e,t]=L.useState([]),[r,n]=L.useState(!1),[a,i]=L.useState("Usuarios"),[s,o]=L.useState({nombreCompleto:"",email:"",rut:"",profile:Ht.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,c]=L.useState(null),[u,A]=L.useState(""),[h,m]=L.useState(""),[v,g]=L.useState(""),[y,w]=L.useState(null),[T,N]=L.useState(null),[F,B]=L.useState(null),D=L.useCallback(async()=>{n(!0);try{const z=await PZ();t(z)}catch(z){console.error("Error al cargar usuarios",z),w("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);L.useEffect(()=>{D()},[D]);const E=L.useCallback(z=>{const{name:X,value:K}=z.target;o(se=>({...se,[X]:K,curso:X==="profile"&&K!==Ht.ESTUDIANTE?"":se.curso,cursos:X==="profile"&&K!==Ht.PROFESORADO?[]:se.cursos,asignaturas:X==="profile"&&K!==Ht.PROFESORADO?[]:se.asignaturas}))},[]),S=L.useCallback((z,X)=>{o(K=>{const se=K[z]||[],U=se.includes(X)?se.filter(Y=>Y!==X):[...se,X];return{...K,[z]:U}})},[]),k=L.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Ht.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),c(null),w(null)},[]),H=L.useCallback(async z=>{z.preventDefault(),w(null);const{nombreCompleto:X,email:K,profile:se,curso:U,password:Y}=s;if(!X.trim()||!K.trim()){w("Nombre Completo y Email son obligatorios.");return}if(se===Ht.ESTUDIANTE&&!U){w('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(Y!=null&&Y.trim())){w("La contraseña es obligatoria al crear un nuevo usuario.");return}const Z=o1();try{if(l){const ne=ug(Z,"updateUser"),de={...s,password:(Y==null?void 0:Y.trim())||void 0,curso:se===Ht.ESTUDIANTE?OB(U||""):void 0};await ne(de)}else{const ne=ug(Z,"createUser"),de={...s,curso:se===Ht.ESTUDIANTE?OB(U||""):void 0};await ne(de)}await D(),k()}catch(ne){console.error("Error al guardar usuario:",ne),w(ne.message||"Error al guardar el usuario.")}},[s,l,D,k]),P=L.useCallback(z=>{c(z.email),o({nombreCompleto:z.nombreCompleto,email:z.email,rut:z.rut||"",profile:z.profile,password:"",curso:z.curso||"",cursos:z.cursos||[],asignaturas:z.asignaturas||[]}),setTimeout(()=>{const X=document.querySelector("form");X&&X.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),M=L.useCallback(async z=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${z}? Esta acción es irreversible.`))try{const X=o1();await ug(X,"deleteUser")({email:z}),await D()}catch(X){console.error("Error al eliminar usuario:",X),w(X.message||"No se pudo borrar el usuario.")}},[D]),Q=async z=>{var Y;const X=(Y=z.target.files)==null?void 0:Y[0];if(!X)return;N({message:"Procesando archivo...",isError:!1});const K=o1(),se=ug(K,"createUser"),U=new FileReader;U.onload=async Z=>{var ne;try{const de=new Uint8Array((ne=Z.target)==null?void 0:ne.result),xe=Xy(de,{type:"array"}),Ae=xe.Sheets[xe.SheetNames[0]],ae=au.sheet_to_json(Ae);if(ae.length===0){N({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=ae.map(Be=>{const Ce=Be.Nombre||Be.nombre,Re=Be.Correo||Be.correo||Be.Email||Be.email,je=Be.Curso||Be.curso,We=Be.RUT||Be.rut;return!Ce||!Re||!je?Promise.resolve({email:Re||"Sin email",error:"Datos incompletos"}):se({nombreCompleto:String(Ce).trim(),email:String(Re).trim(),profile:Ht.ESTUDIANTE,curso:OB(String(je).trim()),rut:We?String(We).trim():"",password:"recoleta"}).catch(ct=>({email:Re,error:ct.message}))}),le=await Promise.all(ue),ie=le.filter(Be=>!Be.error).length,De=le.filter(Be=>Be.error);let Le=`Carga completada. ${ie} estudiantes agregados.`;De.length>0&&(Le+=` ${De.length} fallaron.`,console.error("Errores en carga masiva:",De)),N({message:Le,isError:De.length>0}),await D()}catch(de){N({message:`Error: ${de.message}`,isError:!0})}},U.readAsArrayBuffer(X),z.target.value=""},V=async z=>{var Y;const X=(Y=z.target.files)==null?void 0:Y[0];if(!X)return;B({message:"Procesando archivo...",isError:!1});const K=o1(),se=ug(K,"createUser"),U=new FileReader;U.onload=async Z=>{var ne;try{const de=new Uint8Array((ne=Z.target)==null?void 0:ne.result),xe=Xy(de,{type:"array"}),Ae=xe.Sheets[xe.SheetNames[0]],ae=au.sheet_to_json(Ae);if(ae.length===0){B({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=ae.map(Be=>{const Ce=Be.Nombre||Be.nombre,Re=Be.Correo||Be.correo||Be.Email||Be.email,je=Be.Perfil||Be.perfil||Be.Profile||Be.profile,We=Be.RUT||Be.rut;return!Ce||!Re||!je?Promise.resolve({email:Re||"Sin email",error:"Datos incompletos"}):se({nombreCompleto:String(Ce).trim(),email:String(Re).trim(),profile:je,rut:We?String(We).trim():"",password:"recoleta"}).catch(ct=>({email:Re,error:ct.message}))}),le=await Promise.all(ue),ie=le.filter(Be=>!Be.error).length,De=le.filter(Be=>Be.error);let Le=`Carga completada. ${ie} usuarios agregados.`;De.length>0&&(Le+=` ${De.length} fallaron.`,console.error("Errores en carga masiva:",De)),B({message:Le,isError:De.length>0}),await D()}catch(de){B({message:`Error: ${de.message}`,isError:!0})}},U.readAsArrayBuffer(X),z.target.value=""},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=L.useMemo(()=>Array.from(new Set(e.filter(z=>z.profile===Ht.ESTUDIANTE&&z.curso).map(z=>z.curso))).sort(),[e]),re=L.useMemo(()=>e.filter(z=>(u===""||z.nombreCompleto.toLowerCase().includes(u.toLowerCase())||z.email.toLowerCase().includes(u.toLowerCase()))&&(h===""||z.profile===h)&&(v===""||z.curso===v)),[e,u,h,v]);return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),d.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:d.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[d.jsx("button",{onClick:()=>i("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),d.jsx("button",{onClick:()=>i("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),d.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),d.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),T&&d.jsx("p",{className:`text-sm mt-2 ${T.isError?"text-red-600":"text-green-600"}`,children:T.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),d.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:V,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),d.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),F&&d.jsx("p",{className:`text-sm mt-2 ${F.isError?"text-red-600":"text-green-600"}`,children:F.message})]})]})]}),d.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),d.jsxs("form",{onSubmit:H,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),d.jsx("input",{type:"text",name:"nombreCompleto",value:s.nombreCompleto,onChange:E,className:te,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:s.email,onChange:E,className:te,required:!0,readOnly:!!l})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),d.jsx("input",{type:"password",name:"password",value:s.password||"",onChange:E,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:te})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),d.jsx("input",{type:"text",name:"rut",value:s.rut||"",onChange:E,placeholder:"12.345.678-9",className:te})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),d.jsx("select",{name:"profile",value:s.profile,onChange:E,className:te,required:!0,children:tH.map(z=>d.jsx("option",{value:z,children:z},z))})]}),s.profile===Ht.ESTUDIANTE&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),d.jsxs("select",{name:"curso",value:s.curso,onChange:E,className:te,required:!0,children:[d.jsx("option",{value:"",children:"Seleccione un curso"}),Ni.map(z=>d.jsx("option",{value:z,children:z},z))]})]})]}),s.profile===Ht.PROFESORADO&&d.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[d.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[d.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ni.map(z=>{var X;return d.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[d.jsx("input",{type:"checkbox",checked:((X=s.cursos)==null?void 0:X.includes(z))||!1,onChange:()=>S("cursos",z),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),d.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),s.profile===Ht.PROFESORADO&&d.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[d.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[d.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:cc.map(z=>{var X;return d.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[d.jsx("input",{type:"checkbox",checked:((X=s.asignaturas)==null?void 0:X.includes(z))||!1,onChange:()=>S("asignaturas",z),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),d.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:z})]},z)})})]}),y&&d.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:y}),d.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&d.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),d.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const z=o1(),K=await ug(z,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",K),w("✅ Custom claim agregado exitosamente")}catch(z){console.error("❌ Error al agregar custom claim:",z),w(`Error: ${z.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),d.jsx("button",{type:"button",onClick:async()=>{var z,X,K,se,U;try{const{auth:Y}=await $E(async()=>{const{auth:de}=await Promise.resolve().then(()=>qpe);return{auth:de}},void 0);console.log("🔍 Usuario actual:",(z=Y.currentUser)==null?void 0:z.email);const Z=await((X=Y.currentUser)==null?void 0:X.getIdToken(!0));console.log("🔑 Token refreshed:",!!Z);const ne=await((K=Y.currentUser)==null?void 0:K.getIdTokenResult());console.log("📋 Claims completos:",ne==null?void 0:ne.claims),console.log("👤 Profile claim:",(se=ne==null?void 0:ne.claims)==null?void 0:se.profile),((U=ne==null?void 0:ne.claims)==null?void 0:U.profile)==="SUBDIRECCION"?w("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):w(`❌ Custom claim faltante. Claims: ${JSON.stringify(ne==null?void 0:ne.claims)}`)}catch(Y){console.error("❌ Error verificando token:",Y),w(`Error verificando token: ${Y.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsx("div",{children:d.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:u,onChange:z=>A(z.target.value),className:te})}),d.jsx("div",{children:d.jsxs("select",{value:h,onChange:z=>m(z.target.value),className:te,children:[d.jsx("option",{value:"",children:"Todos los perfiles"}),tH.map(z=>d.jsx("option",{value:z,children:z},z))]})}),d.jsx("div",{children:d.jsxs("select",{value:v,onChange:z=>g(z.target.value),className:te,children:[d.jsx("option",{value:"",children:"Todos los cursos"}),W.map(z=>d.jsx("option",{value:z,children:z},z))]})})]}),r?d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(z=>d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:z.nombreCompleto}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:z.email}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z.profile===Ht.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":z.profile===Ht.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:z.profile})}),d.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[z.profile===Ht.ESTUDIANTE&&d.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:z.curso||"Sin curso"}),z.profile===Ht.PROFESORADO&&d.jsxs("div",{className:"space-y-1",children:[z.cursos&&z.cursos.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.cursos.slice(0,3).map(X=>d.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:X},X)),z.cursos.length>3&&d.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.cursos.length-3]})]})]}),z.asignaturas&&z.asignaturas.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[z.asignaturas.slice(0,2).map(X=>d.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:X},X)),z.asignaturas.length>2&&d.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",z.asignaturas.length-2]})]})]}),(!z.cursos||z.cursos.length===0)&&(!z.asignaturas||z.asignaturas.length===0)&&d.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),z.profile!==Ht.ESTUDIANTE&&z.profile!==Ht.PROFESORADO&&d.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),d.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[d.jsx("button",{onClick:()=>P(z),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),d.jsx("button",{onClick:()=>M(z.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},z.email))})]}),re.length===0&&d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&d.jsx(fBe,{})]})},Tv="seguimiento_dual_records",RBe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},PBe=e=>{const t=tr(Ft(Tt,Tv),an("nombreEstudiante","asc"));return yr(t,n=>{const a=n.docs.map(i=>RBe(i));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},A_=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=Ar.fromDate(new Date(t[n]+"T00:00:00")))}),t},MBe=async e=>{try{const t=A_(e);return(await Da(Ft(Tt,Tv),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},rH=async(e,t)=>{try{const r=br(Tt,Tv,e),n=A_(t);await ro(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},LBe=async e=>{try{const t=br(Tt,Tv,e);await Fs(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},OBe=async e=>{const t=vR(Tt),r=Ft(Tt,Tv);let n=0,a=0;for(const i of e){const s=tr(r,On("rutEstudiante","==",i.rutEstudiante)),o=await $i(s);if(o.empty){const l=br(r);t.set(l,A_(i)),a++}else{const l=o.docs[0].id,c=br(Tt,Tv,l);t.set(c,A_(i),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},UBe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},jBe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},HBe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},QBe=({record:e,onSave:t,onClose:r})=>{const[n,a]=L.useState(e),i="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",s=l=>{const{name:c,value:u,type:A,checked:h}=l.target;a(m=>({...m,[c]:A==="checkbox"?h:u}))},o=()=>{t(n)};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),d.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[d.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[d.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),d.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:s,className:i})]}),d.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[d.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:s,className:"h-5 w-5 rounded text-amber-500"}),d.jsx("span",{children:"Realizada"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),d.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:s,className:i})]}),d.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[d.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:s,className:"h-5 w-5 rounded text-amber-500"}),d.jsx("span",{children:"Realizada"})]})]})]}),d.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[d.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),d.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:s,className:i})]}),d.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[d.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:s,className:"h-5 w-5 rounded text-amber-500"}),d.jsx("span",{children:"Realizada"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),d.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:s,className:i})]}),d.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[d.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:s,className:"h-5 w-5 rounded text-amber-500"}),d.jsx("span",{children:"Realizada"})]})]})]}),d.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[d.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),d.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:s,className:i})]}),d.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[d.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:s,className:"h-5 w-5 rounded text-amber-500"}),d.jsx("span",{children:"Realizada"})]})]})]}),d.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[d.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),d.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:s,className:i+" mt-1"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),d.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:s,className:i+" mt-1"})]})]})]})]})]}),d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),d.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},VBe=()=>{const[e,t]=L.useState([]),[r,n]=L.useState(!0),a=L.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:kp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:lB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[i,s]=L.useState(a),[o,l]=L.useState(null),[c,u]=L.useState(""),[A,h]=L.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,v]=L.useState(null),[g,y]=L.useState(null),[w,T]=L.useState(!1),[N,F]=L.useState(null);L.useEffect(()=>{n(!0);const z=PBe(X=>{t(X),n(!1)});return()=>z()},[]);const B=L.useCallback(z=>{const{name:X,value:K}=z.target;s(se=>({...se,[X]:K}))},[]),D=L.useCallback(z=>{const{name:X,value:K}=z.target;h(se=>({...se,[X]:K}))},[]),E=L.useCallback(()=>{s(a),l(null),v(null)},[a]),S=async z=>{z.preventDefault(),v(null);const K=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(se=>{var U;return!((U=i[se])!=null&&U.trim())});if(K){v(`El campo '${K}' es obligatorio.`);return}try{o?await rH(o,i):await MBe(i),E()}catch(se){console.error(se),v("No se pudo guardar el registro.")}},k=L.useCallback(z=>{window.scrollTo({top:0,behavior:"smooth"}),l(z.id),s(z)},[]),H=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await LBe(z)}catch(X){console.error(X),v("No se pudo eliminar el registro.")}},P=z=>{F(z),T(!0)},M=()=>{F(null),T(!1)},Q=async z=>{try{await rH(z.id,z),M()}catch(X){console.error(X),alert("No se pudieron guardar los cambios de supervisión.")}},V=()=>{const z=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],X=au.aoa_to_sheet([z]),K=au.book_new();au.book_append_sheet(K,X,"Plantilla"),hP(K,"Plantilla_Seguimiento_Dual.xlsx")},te=z=>{var se;const X=(se=z.target.files)==null?void 0:se[0];if(!X)return;y({message:"Procesando archivo...",isError:!1});const K=new FileReader;K.onload=async U=>{var Y;try{const Z=new Uint8Array((Y=U.target)==null?void 0:Y.result),ne=Xy(Z,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),de=ne.SheetNames[0],xe=ne.Sheets[de],Ae=au.sheet_to_json(xe,{raw:!1,dateNF:"yyyy-mm-dd"});if(Ae.length===0)throw new Error("El archivo está vacío.");const ae={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ue=Object.keys(Ae[0]).map(Le=>Le.trim().toLowerCase()),ie=["nombre","rut","curso 2025","empresa","estado"].find(Le=>!ue.includes(Le));if(ie)throw new Error(`Falta la columna requerida: '${ie}'`);const De=Ae.map((Le,Be)=>{try{const Ce={};for(const Re in Le){const je=ae[Re.trim().toLowerCase()];if(je){let We=Le[Re];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(je)?(We=jBe(We),We&&(Ce[je]=We)):je.includes("realizada")?Ce[je]=HBe(We):We!=null&&We!==""&&(Ce[je]=String(We).trim())}}return!Ce.nombreEstudiante||!Ce.rutEstudiante?(console.warn(`Fila ${Be+2}: Faltan campos requeridos`),null):Ce}catch(Ce){return console.error(`Error procesando fila ${Be+2}:`,Ce),null}}).filter(Le=>Le!==null);if(console.log("Registros procesados:",De),De.length>0){const{updated:Le,created:Be}=await OBe(De);y({message:`Carga exitosa. ${Be} registros creados, ${Le} actualizados.`,isError:!1})}else y({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Z){console.error("Error completo:",Z),y({message:`Error al procesar el archivo: ${Z.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},K.readAsArrayBuffer(X)},W="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=L.useMemo(()=>e.filter(z=>(c===""||z.nombreEstudiante.toLowerCase().includes(c.toLowerCase())||z.nombreEmpresa.toLowerCase().includes(c.toLowerCase())||z.rutEstudiante.includes(c))&&(A.curso===""||z.curso===A.curso)&&(A.empresa===""||z.nombreEmpresa===A.empresa)&&(A.estado===""||z.estado===A.estado)&&(A.comuna===""||z.comuna===A.comuna)&&(A.profesor===""||z.profesorTutorEmpresa===A.profesor)).sort((z,X)=>z.nombreEstudiante.localeCompare(X.nombreEstudiante)),[e,c,A]);return L.useMemo(()=>{const z=new Set,X=new Set;return e.forEach(K=>{K.nombreEmpresa&&z.add(K.nombreEmpresa),K.comuna&&X.add(K.comuna)}),{empresas:Array.from(z).sort(),comunas:Array.from(X).sort()}},[e]),r?d.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),d.jsxs("form",{onSubmit:S,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),d.jsx("input",{type:"text",name:"nombreEstudiante",value:i.nombreEstudiante,onChange:B,className:W,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),d.jsx("input",{type:"text",name:"rutEstudiante",value:i.rutEstudiante,onChange:B,className:W,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),d.jsx("select",{name:"curso",value:i.curso,onChange:B,className:W,required:!0,children:kp.map(z=>d.jsx("option",{value:z,children:z},z))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),d.jsxs("select",{name:"profesorTutorEmpresa",value:i.profesorTutorEmpresa,onChange:B,className:W,children:[d.jsx("option",{value:"",children:"Seleccione un profesor"}),jI.map(z=>d.jsx("option",{value:z,children:z},z))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),d.jsx("input",{type:"text",name:"nombreEmpresa",value:i.nombreEmpresa,onChange:B,className:W,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),d.jsx("input",{type:"text",name:"rutEmpresa",value:i.rutEmpresa,onChange:B,className:W})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),d.jsx("input",{type:"text",name:"direccionEmpresa",value:i.direccionEmpresa,onChange:B,className:W})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),d.jsx("input",{type:"text",name:"comuna",value:i.comuna,onChange:B,className:W})]}),d.jsxs("div",{className:"lg:col-span-4",children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),d.jsx("select",{name:"estado",value:i.estado,onChange:B,className:W,children:lB.map(z=>d.jsx("option",{value:z,children:z},z))})]})]}),i.estado==="Desvinculado"&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),d.jsx("input",{type:"date",name:"fechaDesvinculacion",value:i.fechaDesvinculacion||"",onChange:B,className:`${W} border-red-300`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),d.jsx("input",{type:"text",name:"motivoDesvinculacion",value:i.motivoDesvinculacion||"",onChange:B,className:`${W} border-red-300`})]})]}),m&&d.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),d.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&d.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[d.jsx("button",{onClick:V,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),d.jsx("input",{type:"file",onChange:te,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),g&&d.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${g.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:g.message})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[d.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:c,onChange:z=>u(z.target.value),className:`${W} md:col-span-2 lg:col-span-1`}),d.jsxs("select",{name:"curso",value:A.curso,onChange:D,className:W,children:[d.jsx("option",{value:"",children:"Todos los Cursos"}),kp.map(z=>d.jsx("option",{children:z},z))]}),d.jsxs("select",{name:"estado",value:A.estado,onChange:D,className:W,children:[d.jsx("option",{value:"",children:"Todos los Estados"}),lB.map(z=>d.jsx("option",{children:z},z))]}),d.jsxs("select",{name:"profesor",value:A.profesor,onChange:D,className:W,children:[d.jsx("option",{value:"",children:"Todos los Profesores"}),jI.map(z=>d.jsx("option",{children:z},z))]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(z=>d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[d.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombreEstudiante}),d.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:z.curso})]}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.nombreEmpresa}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.profesorTutorEmpresa}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${UBe[z.estado]}`,children:z.estado})}),d.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[d.jsx("button",{onClick:()=>P(z),className:"text-blue-600 hover:underline",children:"Supervisión"}),d.jsx("button",{onClick:()=>k(z),className:"text-yellow-600 hover:underline",children:"Editar"}),d.jsx("button",{onClick:()=>H(z.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},z.id))})]})})]}),w&&N&&d.jsx(QBe,{record:N,onClose:M,onSave:Q})]})},MZ="actividades_remotas",zBe="respuestas_actividades",GBe="usuarios",xP=e=>{var r,n,a,i,s,o;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,plazoEntrega:((i=(a=t.plazoEntrega)==null?void 0:a.toDate)==null?void 0:i.call(a).toISOString().split("T")[0])||t.plazoEntrega,fechaCompletado:((o=(s=t.fechaCompletado)==null?void 0:s.toDate)==null?void 0:o.call(s).toISOString())||t.fechaCompletado}},qBe=e=>{const t=tr(Ft(Tt,MZ),an("fechaCreacion","desc"));return yr(t,n=>{const a=n.docs.map(i=>xP(i));e(a)},n=>{console.error("Error al suscribirse a las actividades:",n),e([])})},$Be=async e=>{try{const t={...e,fechaCreacion:Ar.fromDate(new Date),plazoEntrega:Ar.fromDate(new Date(e.plazoEntrega+"T00:00:00"))};return(await Da(Ft(Tt,MZ),t)).id}catch(t){throw console.error("Error al crear la actividad:",t),new Error("No se pudo crear la actividad.")}},KBe=e=>{const t=tr(Ft(Tt,zBe));return yr(t,n=>{const a=n.docs.map(i=>xP(i));e(a)},n=>{console.error("Error al suscribirse a las respuestas:",n),e([])})},WBe=e=>{const t=tr(Ft(Tt,GBe));return yr(t,n=>{const a=n.docs.map(i=>xP(i));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},UB={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},YBe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=a=>r(a)}),XBe=()=>{const[e,t]=L.useState([]),[r,n]=L.useState([]),[a,i]=L.useState([]),[s,o]=L.useState(null),[l,c]=L.useState(!1),[u,A]=L.useState(!1),[h,m]=L.useState(!0),[v,g]=L.useState(null),[y,w]=L.useState(""),[T,N]=L.useState(null),[F,B]=L.useState([]),D={asignatura:cc[0],nivel:GE[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[E,S]=L.useState(D);L.useEffect(()=>{m(!0);const Ae=qBe(t),ae=KBe(n),ue=WBe(le=>{i(le),m(!1)});return()=>{Ae(),ae(),ue()}},[]);const k=Ae=>{S(ae=>({...ae,[Ae.target.name]:Ae.target.value}))},H=Ae=>{S(ae=>({...ae,recursos:{...ae.recursos,[Ae.target.name]:Ae.target.value}}))},P=Ae=>{Ae.target.files&&B(Array.from(Ae.target.files))},M=Ae=>{S(ae=>{const ue=ae.tipos.includes(Ae)?ae.tipos.filter(ie=>ie!==Ae):[...ae.tipos,Ae],le={...ae.cantidadPreguntas};return ue.includes(Ae)?le[Ae]||(le[Ae]=UB[Ae][0]):delete le[Ae],{...ae,tipos:ue,cantidadPreguntas:le}})},Q=(Ae,ae)=>{S(ue=>({...ue,cantidadPreguntas:{...ue.cantidadPreguntas,[Ae]:ae}}))},V=Ae=>{S(ae=>{var le;const ue=(le=ae.cursosDestino)!=null&&le.includes(Ae)?ae.cursosDestino.filter(ie=>ie!==Ae):[...ae.cursosDestino||[],Ae];return{...ae,cursosDestino:ue}})},te=Ae=>{S(ae=>{var le;const ue=(le=ae.estudiantesDestino)!=null&&le.includes(Ae)?ae.estudiantesDestino.filter(ie=>ie!==Ae):[...ae.estudiantesDestino||[],Ae];return{...ae,estudiantesDestino:ue}})},W=()=>{const{tipos:Ae,contenido:ae,asignatura:ue,nivel:le,cantidadPreguntas:ie}=E;let De=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${ae}"
Asignatura: ${ue}
Nivel: ${le}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${ae}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return Ae.forEach(Le=>{const Be=ie[Le]||UB[Le][0];switch(Le){case"Quiz":De+=`- **Quiz**: Un array de ${Be} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":De+=`- **Comprensión de Lectura**: Un array de ${Be} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":De+=`- **Términos Pareados**: Un array de ${Be} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":De+=`- **Desarrollo**: Un array de ${Be} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),De};function re(Ae,ae){if(Ae==="Desarrollo"){if(Array.isArray(ae))return ae.map(ue=>{if(typeof ue=="string"){const le=ue.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return le?{pregunta:le[1].trim(),rubrica:le[2].trim()}:{pregunta:ue.trim(),rubrica:""}}return ue&&typeof ue=="object"?{pregunta:ue.pregunta||ue.Pregunta||ue.texto||"",rubrica:ue.rubrica||ue.Rubrica||ue.rúbrica||ue.Rúbrica||""}:{pregunta:String(ue),rubrica:""}});if(typeof ae=="string")return ae.split(/\n\n|\n- |\d+\. /).map(ue=>{const le=ue.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return le?{pregunta:le[1].trim(),rubrica:le[2].trim()}:{pregunta:ue.trim(),rubrica:""}}).filter(ue=>ue.pregunta)}if(Ae==="Términos Pareados"){if(Array.isArray(ae))return ae.map((ue,le)=>{if(typeof ue=="string"){const ie=ue.match(/^(.+?)[\s:-–]+(.+)$/);return ie?{id:le,concepto:ie[1].trim(),definicion:ie[2].trim()}:{id:le,concepto:ue.trim(),definicion:""}}return ue&&typeof ue=="object"?{id:le,concepto:ue.concepto||ue.termino||"",definicion:ue.definicion||ue.significado||""}:{id:le,concepto:String(ue),definicion:""}});if(typeof ae=="object"&&ae!==null)return Object.entries(ae).map(([ue,le],ie)=>({id:ie,concepto:ue,definicion:le}));if(typeof ae=="string")return ae.split(/\n|;/).map((ue,le)=>{const ie=ue.match(/^(.+?)[\s:-–]+(.+)$/);return ie?{id:le,concepto:ie[1].trim(),definicion:ie[2].trim()}:{id:le,concepto:ue.trim(),definicion:""}}).filter(ue=>ue.concepto)}if(Ae==="Comprensión de Lectura"){if(ae&&typeof ae=="object"&&Array.isArray(ae.preguntas))return{texto:ae.texto||"",preguntas:ae.preguntas.map(ue=>({pregunta:ue.pregunta||ue.Pregunta||"",opciones:ue.opciones||ue.Opciones||[],respuestaCorrecta:ue.respuestaCorrecta||ue.respuesta||""}))};if(Array.isArray(ae)){const ue=ae.find(le=>le&&typeof le=="object"&&"texto"in le&&"preguntas"in le);return ue?{texto:ue.texto||"",preguntas:(ue.preguntas||[]).map(le=>({pregunta:le.pregunta||le.Pregunta||"",opciones:le.opciones||le.Opciones||[],respuestaCorrecta:le.respuestaCorrecta||le.respuesta||""}))}:{texto:ae.map(le=>typeof le=="string"?le:JSON.stringify(le)).join(`
`),preguntas:[]}}if(typeof ae=="string"){const[ue,le]=ae.split(/Preguntas:|\nPreguntas:/i);let ie=[];return le&&(ie=le.split(/\n- |\n\d+\. /).filter(Boolean).map(De=>{const Le=De.split(/Opciones:|\nOpciones:/i),Be=Le[0].trim();let Ce=[],Re="";Le[1]&&(Ce=Le[1].split(/;|\n|,/).map(We=>We.trim()).filter(Boolean));const je=De.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return je&&(Re=je[1].trim()),{pregunta:Be,opciones:Ce,respuestaCorrecta:Re}})),{texto:(ue==null?void 0:ue.trim())||ae,preguntas:ie}}}return ae}const z=async Ae=>{var ae;if(Ae.preventDefault(),!E.contenido.trim()||E.tipos.length===0){g("Contenido y al menos un tipo de actividad son obligatorios.");return}A(!0),g(null);try{const ue=await Promise.all(F.map(async ot=>({nombre:ot.name,url:await YBe(ot)}))),le="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",De=new Wi(le).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Le=W(),je=(await(await(await De.generateContent(Le)).response).text()).replace(/^```json\s*|```\s*$/g,""),We=JSON.parse(je),ct={};for(const ot of E.tipos)ct[ot]=re(ot,(ae=We.actividades)==null?void 0:ae[ot]);const wt={id:"",fechaCreacion:new Date().toISOString(),...E,recursos:{...E.recursos,archivos:ue},introduccion:We.introduccion,generatedContent:ct};N(wt)}catch(ue){console.error("Error al generar actividad con IA",ue),g("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo. Detalle: "+ue.message)}finally{A(!1)}},X=async()=>{if(T)try{await $Be(T),S(D),B([]),c(!1),N(null)}catch(Ae){console.error("Error al guardar la actividad:",Ae),g("No se pudo guardar la actividad en la base de datos.")}},K=L.useMemo(()=>{var ue,le;if(!s||!a)return[];const Ae=a.filter(ie=>{var De;return ie.profile===Ht.ESTUDIANTE&&((De=s.cursosDestino)==null?void 0:De.includes(ie.curso||""))}).map(ie=>ie.nombreCompleto),ae=s.estudiantesDestino||[];if(!((ue=s.cursosDestino)!=null&&ue.length)&&!((le=s.estudiantesDestino)!=null&&le.length)){const ie=s.nivel.charAt(0);return a.filter(De=>{var Le;return De.profile===Ht.ESTUDIANTE&&((Le=De.curso)==null?void 0:Le.startsWith(ie))}).map(De=>De.nombreCompleto).sort()}return Array.from(new Set([...Ae,...ae])).sort()},[s,a]),se=L.useMemo(()=>r.filter(Ae=>Ae.actividadId===(s==null?void 0:s.id)),[r,s]),U=L.useMemo(()=>a.filter(Ae=>Ae.profile===Ht.ESTUDIANTE).sort((Ae,ae)=>Ae.nombreCompleto.localeCompare(ae.nombreCompleto)),[a]),Y=L.useMemo(()=>y.trim()?U.filter(Ae=>Ae.nombreCompleto.toLowerCase().includes(y.toLowerCase())):U,[U,y]),Z=()=>d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[s==null?void 0:s.asignatura," - ",s==null?void 0:s.tipos.join(", ")]}),d.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",s==null?void 0:s.nivel," | Plazo: ",s==null?void 0:s.plazoEntrega]})]}),d.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),d.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[d.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(Ae=>{const ae=se.find(ue=>ue.estudianteId===Ae);return d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:Ae}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:ae?d.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):d.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:ae?`${ae.puntaje}/${ae.puntajeMaximo}`:"-"}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:ae?new Date(ae.fechaCompletado).toLocaleString("es-CL"):"-"})]},Ae)})})]})})]})]}),ne=()=>{var Ae,ae;return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),d.jsx("button",{onClick:()=>c(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),d.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),d.jsxs("form",{onSubmit:z,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),d.jsx("select",{name:"asignatura",value:E.asignatura,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm",children:cc.map(ue=>d.jsx("option",{value:ue,children:ue},ue))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),d.jsx("select",{name:"nivel",value:E.nivel,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm",children:GE.map(ue=>d.jsx("option",{value:ue,children:ue},ue))})]}),d.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),d.jsx("textarea",{name:"instrucciones",value:(Ae=E.recursos)==null?void 0:Ae.instrucciones,onChange:H,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),d.jsx("textarea",{name:"enlaces",value:(ae=E.recursos)==null?void 0:ae.enlaces,onChange:H,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),d.jsx("input",{type:"file",multiple:!0,onChange:P,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),d.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Ni.map(ue=>{var le;return d.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:(le=E.cursosDestino)==null?void 0:le.includes(ue),onChange:()=>V(ue),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),d.jsx("span",{className:"text-sm font-medium text-slate-700",children:ue})]},ue)})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),d.jsx("input",{type:"text",placeholder:"Buscar...",value:y,onChange:ue=>w(ue.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Y.map(ue=>{var le;return d.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:(le=E.estudiantesDestino)==null?void 0:le.includes(ue.nombreCompleto),onChange:()=>te(ue.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),d.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ue.nombreCompleto,children:ue.nombreCompleto})]},ue.id)})})]})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),d.jsx("div",{className:"space-y-3",children:pme.map(ue=>d.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:E.tipos.includes(ue),onChange:()=>M(ue),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),d.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ue})]}),E.tipos.includes(ue)&&d.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[d.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),UB[ue].map(le=>d.jsx("button",{type:"button",onClick:()=>Q(ue,le),className:`px-3 py-1 rounded-full font-semibold text-xs ${E.cantidadPreguntas[ue]===le?"bg-amber-500 text-white":"bg-slate-200"}`,children:le},le))]})]},ue))})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("textarea",{name:"contenido",value:E.contenido,onChange:k,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),d.jsx("input",{type:"date",name:"plazoEntrega",value:E.plazoEntrega,onChange:k,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),v&&d.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),d.jsx("div",{className:"pt-4 text-right",children:d.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:u?d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},de=()=>{var Ae;return d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),d.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),d.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[d.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[d.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),d.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:T==null?void 0:T.introduccion})]}),(T==null?void 0:T.recursos)&&(T.recursos.instrucciones||T.recursos.enlaces||((Ae=T.recursos.archivos)==null?void 0:Ae.length))&&d.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[d.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),d.jsxs("div",{className:"space-y-3",children:[T.recursos.instrucciones&&d.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:T.recursos.instrucciones}),T.recursos.enlaces&&d.jsx("div",{children:T.recursos.enlaces.split(`
`).map((ae,ue)=>ae.trim()&&d.jsx("a",{href:ae,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:ae},ue))}),T.recursos.archivos&&T.recursos.archivos.length>0&&d.jsx("ul",{className:"list-disc list-inside",children:T.recursos.archivos.map(ae=>d.jsx("li",{className:"text-slate-700",children:ae.nombre},ae.nombre))})]})]}),T==null?void 0:T.tipos.map(ae=>{const ue=T.generatedContent[ae];return ue?d.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[d.jsx("h3",{className:"text-xl font-bold mb-4",children:ae}),d.jsxs("div",{className:"space-y-4 text-sm",children:[ae==="Quiz"&&Array.isArray(ue)&&ue.map((le,ie)=>d.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[d.jsxs("p",{className:"font-semibold",children:[ie+1,". ",le.pregunta]}),d.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:le.opciones.map((De,Le)=>d.jsxs("li",{children:[d.jsxs("strong",{children:[String.fromCharCode(65+Le),"."]})," ",De]},Le))}),d.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",le.respuestaCorrecta]})]},ie)),ae==="Comprensión de Lectura"&&ue&&typeof ue=="object"&&Array.isArray(ue.preguntas)&&d.jsxs("div",{children:[d.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:ue.texto}),ue.preguntas.map((le,ie)=>d.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[d.jsxs("p",{className:"font-semibold",children:[ie+1,". ",le.pregunta]}),d.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:le.opciones.map((De,Le)=>d.jsxs("li",{children:[d.jsxs("strong",{children:[String.fromCharCode(65+Le),"."]})," ",De]},Le))}),d.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",le.respuestaCorrecta]})]},ie))]}),ae==="Términos Pareados"&&Array.isArray(ue)&&d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full border border-slate-200",children:[d.jsx("thead",{className:"bg-slate-100",children:d.jsxs("tr",{children:[d.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),d.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),d.jsx("tbody",{children:ue.map(le=>d.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[d.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:le.concepto}),d.jsx("td",{className:"p-2 align-top text-slate-700",children:le.definicion})]},le.id))})]})}),ae==="Desarrollo"&&Array.isArray(ue)&&ue.map((le,ie)=>d.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[d.jsxs("p",{className:"font-semibold",children:[ie+1,". ",le.pregunta]}),d.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[d.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",le.rubrica]})]},ie)),(ae==="Quiz"||ae==="Términos Pareados"||ae==="Desarrollo")&&!Array.isArray(ue)&&d.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',d.jsx("strong",{children:ae}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),ae==="Comprensión de Lectura"&&(!ue||typeof ue!="object"||!Array.isArray(ue.preguntas))&&d.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',d.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},ae):null})]}),d.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[d.jsx("button",{onClick:()=>N(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),d.jsx("button",{onClick:X,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},xe=()=>d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),d.jsx("button",{onClick:()=>c(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),d.jsx("div",{className:"space-y-4",children:e.length>0?e.map(Ae=>{var le,ie;const ae=[];(le=Ae.cursosDestino)!=null&&le.length&&ae.push(`Cursos: ${Ae.cursosDestino.join(", ")}`),(ie=Ae.estudiantesDestino)!=null&&ie.length&&ae.push(`Estudiantes: ${Ae.estudiantesDestino.length}`);const ue=ae.length?ae.join(" | "):`Todo ${Ae.nivel}`;return d.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"font-bold text-slate-800",children:[Ae.asignatura," - ",Ae.tipos.join(", ")]}),d.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ue," | Creado: ",new Date(Ae.fechaCreacion).toLocaleDateString("es-CL")]})]}),d.jsx("button",{onClick:()=>o(Ae),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ae.id)}):d.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return h?d.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):d.jsx("div",{className:"animate-fade-in",children:T?de():s?Z():l?ne():xe()})},JBe="actividades_remotas",LZ="respuestas_actividades",OZ=e=>{var r,n,a,i,s,o;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,plazoEntrega:((i=(a=t.plazoEntrega)==null?void 0:a.toDate)==null?void 0:i.call(a).toISOString().split("T")[0])||t.plazoEntrega,fechaCompletado:((o=(s=t.fechaCompletado)==null?void 0:s.toDate)==null?void 0:o.call(s).toISOString())||t.fechaCompletado}},ZBe=(e,t)=>{if(!e.curso)return t([]),()=>{};const r=e.curso.charAt(0),n=tr(Ft(Tt,JBe),an("fechaCreacion","desc"));return yr(n,a=>{const s=a.docs.map(o=>OZ(o)).filter(o=>{var A,h,m,v;const l=!((A=o.cursosDestino)!=null&&A.length)&&!((h=o.estudiantesDestino)!=null&&h.length),c=((m=o.cursosDestino)==null?void 0:m.includes(e.curso))??!1,u=((v=o.estudiantesDestino)==null?void 0:v.includes(e.nombreCompleto))??!1;return c||u?!0:l?o.nivel.charAt(0)===r:!1});t(s)},a=>{console.error("Error al suscribirse a actividades disponibles:",a),t([])})},e4e=(e,t)=>{const r=tr(Ft(Tt,LZ),On("estudianteId","==",e));return yr(r,n=>{const a=n.docs.map(i=>OZ(i));t(a)},n=>{console.error("Error al suscribirse a las respuestas del estudiante:",n),t([])})},t4e=async e=>{try{const t={...e,fechaCompletado:Ar.fromDate(new Date)};return(await Da(Ft(Tt,LZ),t)).id}catch(t){throw console.error("Error al guardar la respuesta:",t),new Error("No se pudo guardar la respuesta.")}},r4e=e=>[...e].sort(()=>Math.random()-.5),n4e=(e,t)=>{if(t===0)return"1.0";const n=t*.6;let a;return e>=n?a=4+(e-n)*3/(t-n):a=1+e*3/(n||1),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},nH=()=>d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a4e=({actividad:e,onComplete:t,currentUser:r})=>{var T,N,F,B;const[n,a]=L.useState({}),[i,s]=L.useState(!1),[o,l]=L.useState(!1),[c,u]=L.useState(!1),[A,h]=L.useState({}),m=`progress-${r.id}-${e.id}`;L.useEffect(()=>{const D={};e.tipos.forEach(E=>{if(E==="Términos Pareados"){const S=e.generatedContent[E];S&&(D[E]=r4e(S.map(k=>k.definicion)))}}),h(D);try{const E=localStorage.getItem(m);E&&a(JSON.parse(E))}catch(E){console.error("Could not load saved progress",E)}},[e,m]);const v=(D,E)=>{a(S=>({...S,[D]:E}))},g=()=>{l(!0),u(!1),setTimeout(()=>{try{localStorage.setItem(m,JSON.stringify(n)),u(!0),setTimeout(()=>u(!1),2e3)}catch(D){console.error("Could not save progress",D),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},y=async()=>{s(!0);let D=0,E=0;const S=[],k={},H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let P=null;P=new Wi(H);for(const Q of e.tipos){const V=e.generatedContent[Q],te=n[Q];if(Q==="Quiz"||Q==="Comprensión de Lectura"){const W=Q==="Quiz"?V:V.preguntas,re=te||{};let z=0,X=0;W.forEach((K,se)=>{X+=1,re[se]===K.respuestaCorrecta&&(z+=1)}),D+=z,E+=X,S.push(`${Q}: ${z}/${X} correctas.`),k[Q]={puntaje:z,puntajeMaximo:X}}else if(Q==="Términos Pareados"){const W=V,re=te||{};let z=0,X=0;W.forEach(K=>{X+=2,re[K.id]===K.definicion&&(z+=2)}),D+=z,E+=X,S.push(`${Q}: ${z/2}/${W.length} correctas.`),k[Q]={puntaje:z,puntajeMaximo:X}}else if(Q==="Desarrollo"){const W=V,re=te||{};let z=0,X=0;for(let K=0;K<W.length;K++){const se=W[K];if(X+=3,!P){S.push(`${Q} #${K+1}: No se pudo evaluar automáticamente.`);continue}try{yA("Autoaprendizaje - Evaluar Desarrollo");const U=P.getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada.
                        Pregunta: "${se.pregunta}".
                        Rúbrica: "${se.rubrica}".
                        Respuesta del estudiante: "${re[K]||""}".
                        
                        Tu respuesta DEBE ser un objeto JSON con dos claves:
                        1. "puntaje": un número entero de 0 a 3.
                        2. "feedback": una frase corta y constructiva para el estudiante.`,xe=(await(await U.generateContent(Y)).response).text().replace(/^```json\s*|```\s*$/g,""),Ae=JSON.parse(xe),ae=Math.max(0,Math.min(3,parseInt(Ae.puntaje,10)||0));z+=ae,S.push(`${Q} #${K+1}: Puntaje ${ae}/3. (${Ae.feedback})`)}catch(U){console.error("Error evaluating development question:",U),S.push(`${Q} #${K+1}: No se pudo evaluar automáticamente.`)}}D+=z,E+=X,k[Q]={puntaje:z,puntajeMaximo:X}}}let M;if(P){const Q=`
                Un estudiante ha completado una actividad sobre "${e.contenido}".
                Su puntaje total fue ${D} de ${E}.
                Detalle por sección: ${JSON.stringify(k)}
                Respuestas de desarrollo: ${JSON.stringify(n.Desarrollo||{})}
                
                Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
                {
                  "resumenGeneral": "Un párrafo breve y motivador sobre el desempeño general.",
                  "areasDeFortaleza": ["Un array de 2 o 3 strings destacando lo que hizo bien."],
                  "areasDeMejora": ["Un array de 2 o 3 strings con áreas a mejorar."],
                  "planDeMejora": [{ "paso": "Repasar conceptos clave", "detalle": "Una sugerencia concreta."}],
                  "feedbackPorSeccion": { "Quiz": "Feedback específico para esta sección." }
                }
            `;try{yA("Autoaprendizaje - Retroalimentación Detallada");const z=(await(await P.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,"");M=JSON.parse(z)}catch(V){console.error("Error generating detailed feedback:",V)}}t({respuestas:n,puntaje:D,puntajeMaximo:E,retroalimentacion:`¡Buen trabajo! Tu puntaje total es ${D} de ${E}.`,calificacion:n4e(D,E),puntajesPorSeccion:k},M),localStorage.removeItem(m),s(!1)},w=e.recursos&&(e.recursos.instrucciones||e.recursos.enlaces||((T=e.recursos.archivos)==null?void 0:T.length));return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[d.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),d.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:e.introduccion})]}),w&&d.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[d.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),d.jsxs("div",{className:"space-y-4",children:[((N=e.recursos)==null?void 0:N.instrucciones)&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:e.recursos.instrucciones})]}),((F=e.recursos)==null?void 0:F.enlaces)&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),e.recursos.enlaces.split(`
`).map((D,E)=>D.trim()&&d.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:D},E))]}),((B=e.recursos)==null?void 0:B.archivos)&&e.recursos.archivos.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),d.jsx("ul",{className:"list-disc list-inside",children:e.recursos.archivos.map((D,E)=>d.jsx("li",{children:d.jsx("a",{href:D.url,download:D.nombre,className:"text-blue-500 hover:underline",children:D.nombre})},E))})]})]})]}),e.tipos.map(D=>{const E=e.generatedContent[D];if(!E)return null;switch(D){case"Quiz":case"Comprensión de Lectura":{const S=D==="Quiz",k=E,H=S?k:k.preguntas;return d.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[d.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),!S&&d.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:k.texto}),d.jsx("div",{className:"space-y-6",children:H.map((P,M)=>d.jsxs("div",{children:[d.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[M+1,". ",P.pregunta]}),d.jsx("div",{className:"mt-2 space-y-2",children:P.opciones.map((Q,V)=>{var te;return d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[d.jsx("input",{type:"radio",name:`q-${D}-${M}-${e.id}`,value:Q,checked:((te=n[D])==null?void 0:te[M])===Q,onChange:()=>v(D,{...n[D]||{},[M]:Q}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),d.jsx("span",{children:Q})]},V)})})]},`${D}-${M}`))})]},D)}case"Términos Pareados":{const S=E,k=A[D]||[];return d.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[d.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),S.map(H=>d.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:H.concepto},H.id))]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),S.map(H=>{var P;return d.jsx("div",{className:"h-14 flex items-center",children:d.jsxs("select",{value:((P=n[D])==null?void 0:P[H.id])||"",onChange:M=>v(D,{...n[D]||{},[H.id]:M.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[d.jsx("option",{value:"",children:"Seleccionar definición..."}),k.map((M,Q)=>d.jsx("option",{value:M,children:M},Q))]})},H.id)})]})]})]},D)}case"Desarrollo":{const S=E;return d.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[d.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),S.map((k,H)=>{var P;return d.jsxs("div",{className:"mb-6",children:[d.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:k.pregunta}),d.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[d.jsx("strong",{children:"Rúbrica:"})," ",k.rubrica]}),d.jsx("textarea",{value:((P=n[D])==null?void 0:P[H])||"",onChange:M=>v(D,{...n[D]||{},[H]:M.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},H)})]},D)}default:return null}}),d.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[d.jsx("button",{onClick:g,disabled:i||o||c,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?d.jsxs(d.Fragment,{children:[d.jsx(nH,{})," Guardando..."]}):c?"✓ Guardado":"Guardar Progreso"}),d.jsx("button",{onClick:y,disabled:i||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:i?d.jsxs(d.Fragment,{children:[d.jsx(nH,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},i4e=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState([]),[i,s]=L.useState(null),[o,l]=L.useState("list"),[c,u]=L.useState(null),[A,h]=L.useState(null),[m,v]=L.useState(!0);L.useEffect(()=>{v(!0);const T=ZBe(e,r),N=e4e(e.nombreCompleto,F=>{a(F),v(!1)});return()=>{T(),N()}},[e]);const g=T=>{h(T)},y=()=>{A&&(s(A),l("activity"),h(null))},w=L.useCallback(async(T,N)=>{if(!i)return;const F={actividadId:i.id,estudianteId:e.nombreCompleto,fechaCompletado:new Date().toISOString(),...T,retroalimentacionDetallada:N};try{const B=await t4e(F);u({...F,id:B}),l("result")}catch(B){console.error("Error saving submission:",B),alert("No se pudo guardar tu respuesta. El error fue: "+B.message)}},[i,e.nombreCompleto]);if(m)return d.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&i)return d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[i.asignatura,": ",i.tipos.join(", ")]}),d.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",i.plazoEntrega]}),d.jsx(a4e,{actividad:i,onComplete:w,currentUser:e})]});if(o==="result"&&c){const T=c.retroalimentacionDetallada,N=c.puntajesPorSeccion||{},F=(B,D)=>{const E=D>0?B/D:0;return E<.4?"bg-red-100 text-red-800":E<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),T?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),d.jsx("p",{className:"text-slate-600 mb-6",children:T.resumenGeneral}),d.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[d.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),d.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${F(c.puntaje,c.puntajeMaximo)}`,children:[c.puntaje," / ",c.puntajeMaximo]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),d.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:T.areasDeFortaleza.map((B,D)=>d.jsx("li",{children:B},D))})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),d.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:T.areasDeMejora.map((B,D)=>d.jsx("li",{children:B},D))})]})]})]}),d.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(N).map(([B,{puntaje:D,puntajeMaximo:E}])=>{var S;return d.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("h3",{className:"text-xl font-bold",children:B}),d.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${F(D,E)}`,children:[D," / ",E]})]}),d.jsx("p",{className:"text-slate-500 text-sm",children:(S=T.feedbackPorSeccion)==null?void 0:S[B]})]},B)})}),d.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),d.jsx("div",{className:"space-y-4",children:T.planDeMejora.map((B,D)=>d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold",children:B.paso}),d.jsx("p",{className:"text-slate-600 text-sm",children:B.detalle})]})]},D))})]})]}):d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[d.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[d.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[d.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),d.jsxs("p",{className:"text-2xl font-bold",children:[c.puntaje," / ",c.puntajeMaximo]})]}),d.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[d.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),d.jsx("p",{className:"text-2xl font-bold",children:c.calificacion})]})]}),d.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[d.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),d.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:c.retroalimentacion})]})]}),d.jsx("button",{onClick:()=>{l("list"),u(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),d.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",d.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),d.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),d.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>h(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),d.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),d.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),d.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),d.jsx("div",{className:"space-y-4",children:t.length>0?t.map(T=>{const N=n.find(B=>B.actividadId===T.id),F=!!N;return d.jsx("div",{className:`p-4 border rounded-lg ${F?"bg-green-50":"bg-slate-50"}`,children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"font-bold text-slate-800",children:[T.asignatura," - ",T.tipos.join(", ")]}),d.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",T.plazoEntrega]})]}),F?d.jsxs("div",{className:"text-right",children:[d.jsx("button",{onClick:()=>{u(N),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),d.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",N.puntaje,"/",N.puntajeMaximo]})]}):d.jsx("button",{onClick:()=>g(T),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},T.id)}):d.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},gT="estudiantes_inclusion",s4e="usuarios",UZ=e=>{const t=e.data();return{id:e.id,...t}},o4e=e=>{const t=tr(Ft(Tt,gT));return yr(t,n=>{const a=n.docs.map(i=>UZ(i));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},l4e=e=>{const t=tr(Ft(Tt,s4e));return yr(t,n=>{const a=n.docs.map(i=>UZ(i));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},c4e=async e=>{try{return(await Da(Ft(Tt,gT),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},u4e=async(e,t)=>{try{const{id:r,...n}=t,a=br(Tt,gT,e);await ro(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},d4e=async e=>{try{const t=br(Tt,gT,e);await Fs(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},f4e=({student:e,onClose:t,onSave:r,profesores:n})=>{const[a,i]=L.useState("intervenciones"),[s,o]=L.useState(e);L.useEffect(()=>{o(e)},[e]);const[l,c]=L.useState(null),u={responsable:"",accion:"",observaciones:""},[A,h]=L.useState(u),[m,v]=L.useState({trimestre:"T1",meta:""}),[g,y]=L.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,T]=L.useState(null),[N,F]=L.useState(!1),B={motivo:"",acuerdos:"",asistentes:""},[D,E]=L.useState(B),S=()=>{r(s),t()},k=()=>{if(!A.responsable||!A.accion){alert("Responsable y Acción son campos obligatorios.");return}let le;l?le=(s.intervenciones||[]).map(De=>De.id===l.id?{...De,...A}:De):le=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...A},...s.intervenciones||[]];const ie=le.sort((De,Le)=>new Date(Le.fecha).getTime()-new Date(De.fecha).getTime());o(De=>({...De,intervenciones:ie})),h(u),c(null)},H=le=>{c(le),h({responsable:le.responsable,accion:le.accion,observaciones:le.observaciones})},P=le=>{window.confirm("¿Eliminar esta intervención?")&&o(ie=>({...ie,intervenciones:(ie.intervenciones||[]).filter(De=>De.id!==le)}))},M=le=>{const{name:ie,value:De}=le.target;o(Le=>({...Le,[ie]:De,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!m.meta.trim())return;const le={...m,id:crypto.randomUUID(),cumplida:!1};o(ie=>({...ie,metasProgreso:[...ie.metasProgreso||[],le]})),v({trimestre:"T1",meta:""})},V=le=>{o(ie=>({...ie,metasProgreso:(ie.metasProgreso||[]).map(De=>De.id===le?{...De,cumplida:!De.cumplida}:De)}))},te=le=>{o(ie=>({...ie,metasProgreso:(ie.metasProgreso||[]).filter(De=>De.id!==le)}))},W=L.useMemo(()=>{const le=s.metasProgreso||[];if(le.length===0)return{percent:0,color:"bg-slate-300"};const ie=le.filter(Be=>Be.cumplida).length,De=Math.round(ie/le.length*100),Le=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:Le}},[s.metasProgreso]),re=L.useMemo(()=>{if(!s.fechaActualizacionApoyos)return!0;const le=new Date(s.fechaActualizacionApoyos),ie=new Date;return ie.setMonth(ie.getMonth()-3),le<ie},[s.fechaActualizacionApoyos]),z=()=>{if(!g.titulo.trim()||!g.fecha)return;const le={...g,id:crypto.randomUUID(),resuelta:!1};o(ie=>({...ie,alertas:[...ie.alertas||[],le].sort((De,Le)=>new Date(De.fecha).getTime()-new Date(Le.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString().split("T")[0]})},X=le=>{o(ie=>({...ie,alertas:(ie.alertas||[]).map(De=>De.id===le?{...De,resuelta:!De.resuelta}:De)}))},K=le=>{o(ie=>({...ie,alertas:(ie.alertas||[]).filter(De=>De.id!==le)}))},se=le=>{le.target.files&&le.target.files[0]&&T(le.target.files[0])},U=()=>{if(!w)return;F(!0);const le=new FileReader;le.readAsDataURL(w),le.onloadend=()=>{const ie={id:crypto.randomUUID(),nombre:w.name,url:le.result,fechaSubida:new Date().toISOString()};o(De=>({...De,archivos:[ie,...De.archivos||[]]})),T(null),F(!1)},le.onerror=()=>{alert("Error al leer el archivo."),F(!1)}},Y=le=>{window.confirm("¿Eliminar este archivo?")&&o(ie=>({...ie,archivos:(ie.archivos||[]).filter(De=>De.id!==le)}))},Z=()=>{if(!D.motivo.trim()||!D.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const le={...D,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(ie=>({...ie,reuniones:[le,...ie.reuniones||[]].sort((De,Le)=>new Date(Le.fecha).getTime()-new Date(De.fecha).getTime())})),E(B)},ne=le=>{window.confirm("¿Eliminar este registro de reunión?")&&o(ie=>({...ie,reuniones:(ie.reuniones||[]).filter(De=>De.id!==le)}))},de=()=>{var We,ct,wt;const le=new ur("p","mm","a4"),ie=20,De=le.internal.pageSize.getWidth(),Le=le.internal.pageSize.getHeight();let Be=ie;const Ce=ot=>{ot.setFontSize(10),ot.setTextColor(100),ot.text("Ficha de Seguimiento - Módulo Inclusión",ie,15)};Ce(le),le.setFontSize(18),le.setFont("helvetica","bold"),le.setTextColor(40),le.text(s.nombre,ie,Be+10),Be+=15,le.setFontSize(11),le.setFont("helvetica","normal"),le.setTextColor(80),le.text(`Curso: ${s.curso}`,ie,Be),le.text(`Dificultad: ${s.dificultad}`,ie,Be+6),Be+=15;const Re=ot=>{Be+ot>Le-ie&&(le.addPage(),Ce(le),Be=ie)},je=ot=>{Re(15),le.setFontSize(14),le.setFont("helvetica","bold"),le.text(ot,ie,Be),Be+=10};if((We=s.intervenciones)!=null&&We.length&&(je("Historial de Intervenciones"),sc(le,{startY:Be,head:[["Fecha","Responsable","Acción","Observaciones"]],body:s.intervenciones.map(ot=>[new Date(ot.fecha).toLocaleDateString("es-CL"),ot.responsable,ot.accion,ot.observaciones||""]),theme:"grid",didDrawPage:ot=>Ce(le)}),Be=le.lastAutoTable.finalY+10),s.adaptacionesCurriculares||s.apoyosRecibidos){Re(30),je("Seguimiento y Apoyos"),le.setFontSize(11),le.setFont("helvetica","normal");const ot=`Adaptaciones: ${s.adaptacionesCurriculares||"No registradas."}
Apoyos: ${s.apoyosRecibidos||"No registrados."}`,Rt=le.splitTextToSize(ot,De-ie*2);le.text(Rt,ie,Be),Be+=Rt.length*5+10}(ct=s.metasProgreso)!=null&&ct.length&&(Re(30),je("Metas de Progreso"),sc(le,{startY:Be,head:[["Trimestre","Meta","Estado"]],body:s.metasProgreso.map(ot=>[ot.trimestre,ot.meta,ot.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ot=>Ce(le)}),Be=le.lastAutoTable.finalY+10),(wt=s.reuniones)!=null&&wt.length&&(je("Reuniones con Apoderados"),sc(le,{startY:Be,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:s.reuniones.map(ot=>[new Date(ot.fecha).toLocaleDateString("es-CL"),ot.motivo,ot.acuerdos,ot.asistentes]),theme:"grid",didDrawPage:ot=>Ce(le)})),le.save(`Ficha_Inclusion_${s.nombre.replace(/\s/g,"_")}.pdf`)},xe=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[d.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),d.jsxs("select",{value:A.responsable,onChange:le=>h(ie=>({...ie,responsable:le.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(le=>d.jsx("option",{value:le,children:le},le))]}),d.jsx("textarea",{value:A.accion,onChange:le=>h(ie=>({...ie,accion:le.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("textarea",{value:A.observaciones,onChange:le=>h(ie=>({...ie,observaciones:le.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsxs("div",{className:"flex justify-end gap-2",children:[l&&d.jsx("button",{onClick:()=>{c(null),h(u)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),d.jsx("button",{onClick:k,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),d.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(s.intervenciones||[]).map(le=>d.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:le.accion}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:le.observaciones}),d.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(le.fecha).toLocaleString("es-CL")," - ",le.responsable]})]}),d.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[d.jsx("button",{onClick:()=>H(le),className:"text-blue-500",children:"✏️"}),d.jsx("button",{onClick:()=>P(le.id),className:"text-red-500",children:"🗑️"})]})]})},le.id))})]}),Ae=()=>d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),re&&d.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),d.jsx("textarea",{name:"adaptacionesCurriculares",value:s.adaptacionesCurriculares||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),d.jsx("textarea",{name:"apoyosRecibidos",value:s.apoyosRecibidos||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),d.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[d.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",W.percent,"%"]}),d.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:d.jsx("div",{className:`${W.color} h-4 rounded-full transition-all duration-500`,style:{width:`${W.percent}%`}})})]}),d.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[d.jsxs("select",{value:m.trimestre,onChange:le=>v(ie=>({...ie,trimestre:le.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"T1",children:"T1"}),d.jsx("option",{value:"T2",children:"T2"}),d.jsx("option",{value:"T3",children:"T3"})]}),d.jsx("input",{value:m.meta,onChange:le=>v(ie=>({...ie,meta:le.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(s.metasProgreso||[]).map(le=>d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[d.jsx("input",{type:"checkbox",checked:le.cumplida,onChange:()=>V(le.id),className:"h-5 w-5 rounded text-amber-500"}),d.jsxs("span",{className:`flex-grow text-sm ${le.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[d.jsxs("strong",{children:[le.trimestre,":"]})," ",le.meta]}),d.jsx("button",{onClick:()=>te(le.id),className:"text-red-500 text-sm",children:"🗑️"})]},le.id))})]})]}),ae=()=>d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),d.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[d.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),d.jsx("input",{type:"text",value:g.titulo,onChange:le=>y(ie=>({...ie,titulo:le.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),d.jsx("input",{type:"date",value:g.fecha,onChange:le=>y(ie=>({...ie,fecha:le.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),d.jsx("button",{onClick:z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(s.alertas||[]).map(le=>d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[d.jsx("input",{type:"checkbox",checked:le.resuelta,onChange:()=>X(le.id),className:"h-5 w-5 rounded text-amber-500"}),d.jsxs("span",{className:`flex-grow text-sm ${le.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[le.titulo," (",new Date(le.fecha+"T12:00:00").toLocaleDateString(),")"]}),d.jsx("button",{onClick:()=>K(le.id),className:"text-red-500 text-sm",children:"🗑️"})]},le.id))})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),d.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[d.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),d.jsx("input",{type:"file",onChange:se,className:"w-full text-sm"}),d.jsx("button",{onClick:U,disabled:!w||N,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:N?"Subiendo...":"Subir"})]}),d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(s.archivos||[]).map(le=>d.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[d.jsx("a",{href:le.url,download:le.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:le.nombre}),d.jsx("button",{onClick:()=>Y(le.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},le.id))})]})]}),ue=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[d.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),d.jsx("input",{value:D.motivo,onChange:le=>E(ie=>({...ie,motivo:le.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("textarea",{value:D.acuerdos,onChange:le=>E(ie=>({...ie,acuerdos:le.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("input",{value:D.asistentes,onChange:le=>E(ie=>({...ie,asistentes:le.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("div",{className:"text-right",children:d.jsx("button",{onClick:Z,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),d.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(s.reuniones||[]).map(le=>d.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:le.motivo}),d.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("strong",{children:"Acuerdos:"})," ",le.acuerdos]}),d.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(le.fecha).toLocaleString("es-CL")," - Asistentes: ",le.asistentes]})]}),d.jsx("button",{onClick:()=>ne(le.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},le.id))})]});return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:le=>le.stopPropagation(),children:[d.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:de,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),d.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),d.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:d.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(le=>d.jsx("button",{onClick:()=>i(le),className:`${a===le?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:le==="alertas"?"Alertas y Archivos":le==="seguimiento"?"Seguimiento y Metas":le},le))})}),d.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[a==="intervenciones"&&xe(),a==="seguimiento"&&Ae(),a==="reuniones"&&ue(),a==="alertas"&&ae()]}),d.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[d.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),d.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},A4e=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=L.useState(qE[0]),i=()=>{r(e,n)};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[d.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),d.jsx("select",{id:"dificultad",value:n,onChange:s=>a(s.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:qE.map(s=>d.jsx("option",{value:s,children:s},s))})]}),d.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),d.jsx("button",{type:"button",onClick:i,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},aH=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState([]),[i,s]=L.useState(!0),[o,l]=L.useState(null),[c,u]=L.useState(null),[A,h]=L.useState(""),[m,v]=L.useState(""),[g,y]=L.useState("");L.useEffect(()=>{s(!0);const S=o4e(H=>{r(H),s(!1)}),k=l4e(H=>{a(H)});return()=>{S(),k()}},[]);const w=async(S,k)=>{if(t.some(P=>P.nombre===S.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const H={nombre:S.nombreCompleto,curso:S.curso||"",dificultad:k,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await c4e(H)}catch(P){console.error("Error al agregar estudiante:",P),alert("Hubo un error al agregar al estudiante al programa.")}},T=async S=>{try{await u4e(S.id,S)}catch(k){console.error("Error al actualizar la ficha:",k),alert("Hubo un error al guardar los cambios en la ficha.")}},N=async S=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await d4e(S),(o==null?void 0:o.id)===S&&l(null)}catch(k){console.error("Error al eliminar estudiante:",k),alert("Hubo un error al eliminar al estudiante.")}},F=S=>{if(D.length===0){alert("No hay datos para exportar.");return}const k=D.map(H=>{var P;return{Nombre:H.nombre,Curso:H.curso,Dificultad:H.dificultad,"N° Intervenciones":((P=H.intervenciones)==null?void 0:P.length)||0,"Alertas Pendientes":(H.alertas||[]).filter(M=>!M.resuelta).length}});if(S==="xlsx"){const H=au.json_to_sheet(k),P=au.book_new();au.book_append_sheet(P,H,"Estudiantes_Inclusion"),hP(P,"Estudiantes_Inclusion.xlsx")}else{const H=new ur;H.text("Listado de Estudiantes - Programa de Inclusión",14,15),sc(H,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),H.save("Estudiantes_Inclusion.pdf")}},B=L.useMemo(()=>n.filter(S=>{var k;return S.profile===Ht.ESTUDIANTE&&(((k=e.cursos)==null?void 0:k.includes(S.curso||""))||e.profile===Ht.SUBDIRECCION)}).filter(S=>!t.some(k=>k.nombre===S.nombreCompleto)),[n,t,e]),D=L.useMemo(()=>t.filter(S=>S.nombre.toLowerCase().includes(A.toLowerCase())&&(m===""||S.curso===m)&&(g===""||S.dificultad===g)).sort((S,k)=>S.nombre.localeCompare(k.nombre)),[t,A,m,g]),E=L.useMemo(()=>n.filter(S=>S.profile===Ht.PROFESORADO).map(S=>S.nombreCompleto).sort(),[n]);return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),i?d.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[d.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",D.length,")"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>F("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),d.jsx("button",{onClick:()=>F("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:A,onChange:S=>h(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsxs("select",{value:m,onChange:S=>v(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"Todos los Cursos"}),Ni.map(S=>d.jsx("option",{children:S},S))]}),d.jsxs("select",{value:g,onChange:S=>y(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"Todas las Dificultades"}),qE.map(S=>d.jsx("option",{children:S},S))]})]}),d.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:D.map(S=>d.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:S.nombre}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[S.curso," - ",S.dificultad]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>l(S),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),d.jsx("button",{onClick:()=>N(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},S.id))})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),d.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:B.map(S=>d.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:S.nombreCompleto}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:S.curso})]}),d.jsx("button",{onClick:()=>u(S),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},S.id))})]})]}),c&&d.jsx(A4e,{student:c,onClose:()=>u(null),onConfirm:(S,k)=>{w(S,k),u(null)}}),o&&d.jsx(f4e,{student:o,onClose:()=>l(null),onSave:T,profesores:E})]})},jZ="asistencia_dual",h4e=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},p4e=(e,t)=>{const r=tr(Ft(Tt,jZ),On("emailEstudiante","==",e),an("fechaHora","desc"));return yr(r,a=>{const i=a.docs.map(s=>h4e(s));t(i)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},m4e=async e=>{try{const t={...e,fechaHora:Ar.fromDate(new Date(e.fechaHora))};await Da(Ft(Tt,jZ),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},g4e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),v4e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),x4e=({currentUser:e})=>{const[t,r]=L.useState(e.curso||""),[n,a]=L.useState([]),[i,s]=L.useState(!1),[o,l]=L.useState(!0),[c,u]=L.useState(null);L.useEffect(()=>{if(!e.email){l(!1);return}l(!0);const h=p4e(e.email,m=>{a(m),l(!1)});return()=>h()},[e.email]);const A=h=>{if(!t){u({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}s(!0),u(null),navigator.geolocation.getCurrentPosition(async m=>{const v={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await m4e(v),u({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(g){console.error("Error saving record to Firestore:",g),u({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{s(!1)}},m=>{console.error("Geolocation error:",m);let v="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:v="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:v="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:v="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:v=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}u({text:v,type:"error"}),s(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),d.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),d.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"-- Mi curso --"}),kp.map(h=>d.jsx("option",{value:h,children:h},h))]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[d.jsx("button",{onClick:()=>A("Entrada"),disabled:i||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),d.jsx("button",{onClick:()=>A("Salida"),disabled:i||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),i&&d.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d.jsx("span",{children:"Obteniendo ubicación..."})]}),c&&d.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.text})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),d.jsx("div",{className:"overflow-x-auto max-h-96",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?d.jsx("tr",{children:d.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:d.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?d.jsx(g4e,{}):d.jsx(v4e,{}),h.tipo]})}),d.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},y4e=async()=>{try{console.log("🔍 Debugging users collection...");const e=Ft(en,"users"),t=tr(e,t0(10)),r=await $i(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((i,s)=>{const o=i.data(),l={id:i.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(c=>a.add(c))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(i=>n.sampleDocs.filter(o=>i in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},b4e=async(e,t)=>{var l,c,u;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=Ar.fromDate(r),i=Ar.fromDate(n),s=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const A of s)try{const h=Ft(en,A);try{const m=tr(h,On("fechaHora",">=",a),On("fechaHora","<=",i)),v=await $i(m);o[A]={exists:!0,hasDateField:!0,count:v.size,sampleDoc:((l=v.docs[0])==null?void 0:l.data())||null}}catch{const v=["fecha","timestamp","createdAt"];let g=!1;for(const y of v)try{const w=tr(h,On(y,">=",a),On(y,"<=",i)),T=await $i(w);o[A]={exists:!0,hasDateField:y,count:T.size,sampleDoc:((c=T.docs[0])==null?void 0:c.data())||null},g=!0;break}catch{continue}if(!g){const y=tr(h,an("__name__"),t0(5)),w=await $i(y);o[A]={exists:!0,hasDateField:!1,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null,note:"No date field found for filtering"}}}}catch(h){o[A]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},w4e=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const i=new Date(e,t+1,0);i.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${i.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const s=Ar.fromDate(a),o=Ar.fromDate(i),l=[],c=new Map,u=()=>{const h=Array.from(c.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((m,v)=>{let g;v.fechaHora instanceof Date?g=v.fechaHora:typeof v.fechaHora=="string"?g=new Date(v.fechaHora):g=new Date;const y=g.getDate();return m[y]=(m[y]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const m=Ft(en,h),v=tr(m,On("fechaHora",">=",s),On("fechaHora","<=",o),an("fechaHora","desc")),g=yr(v,y=>{console.log(`📋 ${h}: ${y.size} documentos encontrados con filtro`),y.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(c.keys()).filter(T=>T.startsWith(`${h}_`)).forEach(T=>c.delete(T)),y.docs.forEach((T,N)=>{var F;if(N<5){const B=T.data();let D;(F=B.fechaHora)!=null&&F.toDate?D=B.fechaHora.toDate():typeof B.fechaHora=="string"?D=new Date(B.fechaHora):D=new Date,console.log(`   ${N+1}. ${B.emailEstudiante} - ${D.toLocaleString()} - ${B.tipo}`),console.log(`      📅 Fecha original: ${B.fechaHora} (tipo: ${typeof B.fechaHora})`)}}),y.forEach(T=>{var E;const N=T.data();let F;(E=N.fechaHora)!=null&&E.toDate?F=N.fechaHora.toDate():typeof N.fechaHora=="string"?F=new Date(N.fechaHora):N.fechaHora instanceof Date?F=N.fechaHora:N.fechaHora?F=new Date(N.fechaHora):F=new Date;const B={id:T.id,emailEstudiante:N.emailEstudiante||N.email||"",nombreEstudiante:N.nombreEstudiante||N.nombre||"",curso:N.curso||"",fechaHora:F,tipo:N.tipo,ubicacion:N.ubicacion||null,observaciones:N.observaciones||"",...N},D=`${h}_${T.id}`;c.set(D,B)}),u()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},y=>{console.warn(`⚠️ Error con filtro en ${h}:`,y),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const w=tr(m,t0(200)),T=yr(w,F=>{if(console.log(`📋 ${h} (sin filtro): ${F.size} documentos`),F.size>0){const D=F.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(D)),console.log("📄 Primer documento:",D)}const B=F.docs.filter(D=>{var k;const E=D.data();if(!E.fechaHora)return!1;let S;return(k=E.fechaHora)!=null&&k.toDate?S=E.fechaHora.toDate():typeof E.fechaHora=="string"?S=new Date(E.fechaHora):E.fechaHora instanceof Date?S=E.fechaHora:S=new Date(E.fechaHora),S>=a&&S<=i});console.log(`📅 ${h}: ${B.length} registros después de filtro manual`),B.length>0&&(Array.from(c.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>c.delete(E)),B.forEach(E=>{var M;const S=E.data();let k;(M=S.fechaHora)!=null&&M.toDate?k=S.fechaHora.toDate():typeof S.fechaHora=="string"?k=new Date(S.fechaHora):S.fechaHora instanceof Date?k=S.fechaHora:k=new Date(S.fechaHora);const H={id:E.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:k,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},P=`${h}_${E.id}`;c.set(P,H)}),u())}),N=l.findIndex(F=>F===g);N>=0?l[N]=T:l.push(T)});l.push(g)}catch(m){console.warn(`❌ Error configurando ${h}:`,m)}}),()=>{l.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},C4e=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,i=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((u,A)=>(u[A.profile]=(u[A.profile]||0)+1,u),{});console.log("👥 Usuarios por perfil:",l);const c=o.filter(u=>u.profile===Ht.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${c.length}`),c.forEach(u=>{console.log(`   - ${u.nombreCompleto} (${u.curso}) - ${u.email}`)}),e(o)};let s=!1;return r.forEach(o=>{try{const l=Ft(en,o),c=tr(l),u=yr(c,A=>{A.size>0?(console.log(`✅ Encontrados ${A.size} usuarios en colección: ${o}`),s=!0,Array.from(a.keys()).filter(m=>m.startsWith(`${o}_`)).forEach(m=>a.delete(m)),A.forEach(m=>{var v,g,y,w;try{const T=m.data(),N=T.email||T.userEmail||T.mail||T.correo||"",F=T.nombreCompleto||T.displayName||T.name||T.nombre||T.fullName||"",B=T.curso||T.course||T.class||T.grade||"";let D=T.profile||T.role||T.tipo||T.userType||Ht.ESTUDIANTE;if(typeof D=="string"){const k=D.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?D=Ht.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?D=Ht.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?D=Ht.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(D=Ht.COORDINADOR_TP)}const E={id:m.id,email:N,nombreCompleto:F,curso:B,profile:D,activo:T.activo!==!1,fechaCreacion:((g=(v=T.fechaCreacion)==null?void 0:v.toDate)==null?void 0:g.call(v))||new Date(T.fechaCreacion)||new Date,ultimaActividad:((w=(y=T.ultimaActividad)==null?void 0:y.toDate)==null?void 0:w.call(y))||new Date(T.ultimaActividad)||new Date,...T},S=`${o}_${m.id}`;a.set(S,E)}catch(T){console.warn(`Error procesando documento ${m.id} en ${o}:`,T)}}),i()):console.log(`⚪ Colección ${o}: vacía`)},A=>{console.warn(`⚠️ Error en colección ${o}:`,A)});n.push(u)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{s||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},E4e=(e,t)=>{try{console.log("Setting up users subscription...");const r=Ft(en,"users"),n=tr(r);return yr(n,i=>{console.log(`Raw users snapshot size: ${i.size}`);const s=[];i.forEach(u=>{var A,h,m,v;try{const g=u.data();console.log(`Processing user doc ${u.id}:`,g);const y=g.email||g.userEmail||g.mail||"",w=g.nombreCompleto||g.displayName||g.name||g.nombre||"",T=g.curso||g.course||g.class||"";let N=g.profile||g.role||g.tipo||Ht.ESTUDIANTE;if(typeof N=="string"){const B=N.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?N=Ht.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?N=Ht.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?N=Ht.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(N=Ht.COORDINADOR_TP)}const F={id:u.id,email:y,nombreCompleto:w,curso:T,profile:N,activo:g.activo!==!1,fechaCreacion:((h=(A=g.fechaCreacion)==null?void 0:A.toDate)==null?void 0:h.call(A))||new Date(g.fechaCreacion)||new Date,ultimaActividad:((v=(m=g.ultimaActividad)==null?void 0:m.toDate)==null?void 0:v.call(m))||new Date(g.ultimaActividad)||new Date,...g};s.push(F)}catch(g){console.warn(`Error processing user document ${u.id}:`,g)}}),s.sort((u,A)=>u.nombreCompleto.localeCompare(A.nombreCompleto)),console.log(`Processed ${s.length} users successfully`);const o=s.reduce((u,A)=>(u[A.profile]=(u[A.profile]||0)+1,u),{});console.log("Users by profile:",o);const l=s.filter(u=>u.profile===Ht.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const c=l.filter(u=>u.curso);console.log(`Estudiantes con curso: ${c.length}`),e(s)},i=>{console.error("Error in subscribeToAllUsers:",i),t&&t(new Error(`Error al cargar usuarios: ${i.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},P2=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},_4e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),S4e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),T4e=()=>{const[e,t]=L.useState([]),[r,n]=L.useState([]),[a,i]=L.useState(!0),[s,o]=L.useState(null),[l,c]=L.useState(new Date),[u,A]=L.useState("todos"),[h,m]=L.useState("");L.useEffect(()=>{i(!0),o(null);const D=l.getFullYear(),E=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",D,"Mes:",E);let S=!1,k=!1;const H=()=>{S&&k&&(console.log("=== CARGA COMPLETA ==="),i(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const M=Ft(en,"asistencia_dual"),Q=tr(M,t0(5)),V=await $i(Q);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${V.size}`),V.size>0)V.docs.forEach((te,W)=>{const re=te.data();console.log(`   ${W+1}. ${te.id.slice(0,8)} - ${re.emailEstudiante} - ${re.tipo}`),console.log("      Fecha original:",re.fechaHora),console.log("      Todos los campos:",Object.keys(re))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const te=["asistenciaEmpresa","asistencia_empresa"];for(const W of te)try{const re=Ft(en,W),z=tr(re,t0(3)),X=await $i(z);if(console.log(`📋 ${W}: ${X.size} documentos`),X.size>0){const K=X.docs[0].data();console.log("   Estructura:",Object.keys(K)),console.log("   Email:",K.emailEstudiante||K.email),console.log("   Fecha:",K.fechaHora||K.fecha)}}catch(re){console.log(`❌ ${W}: ${re instanceof Error?re.message:"Error"}`)}}}catch(M){console.error("❌ Error en prueba directa:",M),M.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):M.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),b4e(D,E).then(M=>{console.log("🔍 Debug info for collections:",M),Object.entries(M).forEach(([Q,V])=>{if(V.exists&&V.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${Q.toUpperCase()}:`),console.log(`   📊 Total documentos: ${V.totalDocs}`),console.log(`   📅 Documentos del período: ${V.count}`),console.log(`   🔑 Campo de fecha: ${V.hasDateField}`),V.sampleDoc){console.log("   📄 Documento ejemplo:",V.sampleDoc);const te=V.sampleDoc,W=te.emailEstudiante||te.email||te.userEmail||te.correo||"NO ENCONTRADO",re=te.tipo||te.type||te.action||te.tipoRegistro||"NO ENCONTRADO",z=te.fechaHora||te.fecha||te.timestamp||te.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${W}`),console.log(`   📝 Tipo registro: ${re}`),console.log(`   📅 Fecha: ${z}`),console.log("   🗂️ Todos los campos:",Object.keys(te))}V.filteredDocs&&V.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",V.filteredDocs.length),V.filteredDocs.forEach((te,W)=>{W<3&&console.log(`      ${W+1}. ID: ${te.id}`,te.data)}))}else V.exists?console.log(`⚪ Colección ${Q}: vacía`):console.log(`❌ Colección ${Q}: no existe`)})}).catch(M=>{console.error("Debug error:",M)}),y4e().then(M=>{console.log("🔍 Debug info for users:",M),(!M.exists||M.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async V=>{var te;try{const W=Ft(en,V),re=tr(W,t0(5)),z=await $i(re);z.size>0?(console.log(`✅ Encontrada colección alternativa: ${V} con ${z.size} documentos`),console.log("Documento muestra:",(te=z.docs[0])==null?void 0:te.data())):console.log(`❌ Colección ${V}: vacía`)}catch{console.log(`❌ Colección ${V}: no existe`)}}))}).catch(M=>{console.error("Users debug error:",M)});try{console.log("Configurando suscripción a asistencia...");const M=w4e(D,E,V=>{if(console.log("✅ Received registros:",V.length),V.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",V[0]);const te=[...new Set(V.map(se=>se.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",te);const W=[...new Set(V.map(se=>se.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",W);const re=V.reduce((se,U)=>{const Y=new Date(U.fechaHora).getDate();return se[Y]||(se[Y]=[]),se[Y].push(U),se},{});console.log("📅 Registros por día del mes:",Object.keys(re).map(se=>({dia:parseInt(se),cantidad:re[parseInt(se)].length})));const z=r.map(se=>se.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",z);const X=te.filter(se=>z.includes(se)),K=te.filter(se=>!z.includes(se));console.log("✅ Emails que coinciden:",X),console.log("❌ Emails que NO coinciden:",K)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(V),S=!0,H()},V=>{console.error("❌ Error fetching asistencia:",V),o("Error al cargar datos de asistencia: "+V.message),S=!0,H()});console.log("Configurando suscripción a usuarios...");const Q=C4e(V=>{if(console.log("✅ Received users (multi-collection):",V.length),V.length>0){console.log("Sample user:",V[0]);const te=V.filter(W=>W.profile===Ht.ESTUDIANTE&&W.curso);console.log("Dual students found:",te.length),te.forEach(W=>{console.log(`- ${W.nombreCompleto} (${W.curso}) - ${W.email}`)})}n(V),k=!0,H()},V=>{console.error("❌ Error fetching users (multi-collection):",V),console.log("🔄 Intentando con función original de usuarios...");const te=E4e(W=>{console.log("✅ Received users (fallback):",W.length),n(W),k=!0,H()},W=>{console.error("❌ Error en fallback también:",W),o("Error al cargar estudiantes: "+V.message),k=!0,H()})});return()=>{console.log("Limpiando suscripciones..."),M&&M(),Q&&Q()}}catch(M){console.error("❌ Error setting up subscriptions:",M),o("Error al inicializar conexiones: "+(M instanceof Error?M.message:"Error desconocido")),i(!1)}},[l]);const{monthDays:v,monthName:g,year:y}=L.useMemo(()=>{const D=l.getFullYear(),E=l.getMonth();return{monthDays:new Date(D,E+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:D}},[l]),w=L.useMemo(()=>{let D=r.filter(E=>E.profile===Ht.ESTUDIANTE&&E.curso&&kp.includes(P2(E.curso)));if(u!=="todos"&&(D=D.filter(E=>P2(E.curso||"")===u)),h&&(D=D.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(H=>H.emailEstudiante).filter(Boolean))],S=D.map(H=>H.email),k=E.filter(H=>!S.includes(H));if(k.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",k);const P=k.map(M=>{const Q=e.find(V=>V.emailEstudiante===M);return{id:M,email:M,nombreCompleto:(Q==null?void 0:Q.nombreEstudiante)||M.split("@")[0],curso:(Q==null?void 0:Q.curso)||"3ºC",profile:Ht.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(M=>{const Q=u==="todos"||P2(M.curso)===u,V=!h||M.nombreCompleto.toLowerCase().includes(h.toLowerCase());return Q&&V&&kp.includes(P2(M.curso))});D=[...D,...P]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${D.length}`),D.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),D.sort((E,S)=>E.nombreCompleto.localeCompare(S.nombreCompleto))},[r,u,h,e]),T=L.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${w.length}`);const D=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),D):(e.forEach((E,S)=>{const k=E.emailEstudiante;if(!k)return;let H;if(E.fechaHora instanceof Date)H=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)H=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")H=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const P=H.getDate(),M=H.getMonth(),Q=H.getFullYear();S<3&&console.log(`📅 Registro ${S+1}:`,{email:k,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:H.toLocaleString(),año:Q,mes:M,día:P}),D.has(k)||D.set(k,new Map);const V=D.get(k);V.has(P)||V.set(P,{});const te=V.get(P);E.tipo==="Entrada"?(!te.entrada||H<new Date(te.entrada.fechaHora))&&(te.entrada=E):E.tipo==="Salida"&&(!te.salida||H>new Date(te.salida.fechaHora))&&(te.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:D.size,estudiantes:Array.from(D.keys()),registrosPorEstudiante:Array.from(D.entries()).map(([E,S])=>({email:E,dias:Array.from(S.keys()),totalRegistros:Array.from(S.values()).reduce((k,H)=>k+(H.entrada?1:0)+(H.salida?1:0),0)}))}),D)},[e]),N=D=>{c(E=>{const S=new Date(E);return S.setMonth(S.getMonth()+D),S})},F=D=>{D!=null&&D.latitud&&(D!=null&&D.longitud)&&window.open(`https://www.google.com/maps?q=${D.latitud},${D.longitud}`,"_blank")},B=["D","L","M","M","J","V","S"];return s?d.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:s})}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[d.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[d.jsx("button",{onClick:()=>N(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${g} ${y}`}),d.jsx("button",{onClick:()=>N(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),d.jsxs("select",{value:u,onChange:D=>A(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"todos",children:"Todos los Cursos"}),kp.map(D=>d.jsx("option",{value:D,children:D},D))]}),d.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:D=>m(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?d.jsxs("div",{className:"text-center text-amber-600 py-10",children:[d.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),d.jsx("div",{children:"Cargando datos de asistencia..."})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:v},(D,E)=>{const k=new Date(y,l.getMonth(),E+1).getDay(),H=k===0||k===6;return d.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${H?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[d.jsx("div",{className:"font-semibold",children:B[k]}),d.jsx("div",{children:E+1})]},E)})]})}),d.jsx("tbody",{children:w.length>0?w.map(D=>d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[d.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:D.nombreCompleto}),Array.from({length:v},(E,S)=>{var Q;const k=S+1,H=(Q=T.get(D.email))==null?void 0:Q.get(k),P=new Date(y,l.getMonth(),S+1),M=P.getDay()===0||P.getDay()===6;return D.email==="alexis.robles@industrialderecoleta.cl"&&k===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:D.email,day:k,hasDataForStudent:T.has(D.email),studentDayRecords:H,allAttendanceKeys:Array.from(T.keys()),daysForStudent:T.get(D.email)?Array.from(T.get(D.email).keys()):[]}),d.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${M?"bg-slate-100 dark:bg-slate-700/50":""}`,children:d.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(H==null?void 0:H.entrada)&&d.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var V;return F((V=H.entrada)==null?void 0:V.ubicacion)},children:[d.jsx(_4e,{}),d.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(H.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(H==null?void 0:H.salida)&&d.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var V;return F((V=H.salida)==null?void 0:V.ubicacion)},children:[d.jsx(S4e,{}),d.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(H.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},k)})]},D.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:v+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},vT="evaluaciones_formativas",xT="calificaciones_formativas",yP="trabajos_grupales_formativos",N4e="usuarios",bP=e=>{var r,n,a,i;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((i=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:i.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},B4e=(e,t,r)=>{const n=tr(Ft(Tt,vT),On("curso","==",e),On("asignatura","==",t),an("fecha","asc"));return yr(n,a=>{r(a.docs.map(i=>bP(i)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},k4e=async(e,t)=>{const r=vR(Tt),n=br(Ft(Tt,vT));r.set(n,{...e,fecha:Ar.fromDate(new Date(e.fecha+"T00:00:00"))});const a=br(Tt,xT,n.id);return r.set(a,t),await r.commit(),n.id},I4e=async(e,t)=>{const r=br(Tt,vT,e);await ro(r,t,{merge:!0})},F4e=async e=>{const t=vR(Tt);t.delete(br(Tt,vT,e)),t.delete(br(Tt,xT,e)),await t.commit()},D4e=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=br(Tt,xT,n);return yr(a,i=>{i.exists()&&t({[n]:i.data()})})});return()=>r.forEach(n=>n())},R4e=async(e,t)=>{const r=br(Tt,xT,e);await ro(r,t,{merge:!0})},P4e=(e,t,r)=>{const n=tr(Ft(Tt,yP),On("curso","==",e),On("asignatura","==",t),an("fechaPresentacion","desc"));return yr(n,a=>{r(a.docs.map(i=>bP(i)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},M4e=async e=>{const t={...e,fechaPresentacion:Ar.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Da(Ft(Tt,yP),t)},L4e=async(e,t)=>{const r=br(Tt,yP,e);await ro(r,t,{merge:!0})},O4e=e=>{const t=tr(Ft(Tt,N4e));return yr(t,r=>{e(r.docs.map(n=>bP(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},HZ=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Og={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},QZ=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},U4e=({cursos:e,onSelect:t})=>d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=QZ(r);return d.jsxs("div",{className:"space-y-2 text-center",children:[d.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[d.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),d.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[d.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),d.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),d.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):d.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[d.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),d.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),j4e=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=QZ(e);return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),d.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),d.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(i=>d.jsxs("button",{onClick:()=>r(i),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[d.jsx("span",{className:"text-2xl",children:Og[i]||Og.Default}),d.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:i})]},i))}):d.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[d.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),d.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},H4e=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,i]=L.useState([]),[s,o]=L.useState({}),[l,c]=L.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[u,A]=L.useState(null),[h,m]=L.useState(null),[v,g]=L.useState(!0),y=L.useMemo(()=>r.filter(S=>S.profile===Ht.ESTUDIANTE&&HZ(S.curso||"")===e).map(S=>S.nombreCompleto).sort((S,k)=>S.localeCompare(k)),[r,e]);L.useEffect(()=>{g(!0);const S=B4e(e,t,k=>{i(k);const H=k.map(M=>M.id),P=D4e(H,M=>{o(Q=>({...Q,...M}))});return g(!1),()=>P()});return()=>S()},[e,t]);const w=S=>{const{name:k,value:H}=S.target;u?A(P=>P?{...P,[k]:H}:null):c(P=>({...P,[k]:H}))},T=async S=>{if(S.preventDefault(),m(null),!l.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const k={asignatura:t,curso:e,...l},H=y.reduce((P,M)=>(P[M]="trabajado",P),{});try{await k4e(k,H),c({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),m("No se pudo crear la evaluación.")}},N=(S,k)=>{var Q;const H=((Q=s[S])==null?void 0:Q[k])||"trabajado";let P;H==="trabajado"?P="no trabajado":H==="no trabajado"?P="ausente":P="trabajado";const M={...s,[S]:{...s[S]||{},[k]:P}};o(M),R4e(S,{[k]:P}).catch(V=>{console.error("Error updating grade:",V)})},F=S=>A(S),B=async()=>{if(u)try{await I4e(u.id,{nombreActividad:u.nombreActividad,fecha:u.fecha}),A(null)}catch(S){console.error(S),m("No se pudo guardar la edición.")}},D=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await F4e(S)}catch(k){console.error(k),m("No se pudo eliminar la evaluación.")}},E=L.useCallback(S=>{if(a.length===0)return"-";let k=0,H=0;return a.forEach(P=>{var Q;const M=(Q=s[P.id])==null?void 0:Q[S];M==="trabajado"?(k+=7,H++):M==="no trabajado"&&(k+=2,H++)}),H===0?"-":(k/H).toFixed(1)},[s,a]);return v?d.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),d.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),d.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[d.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),d.jsxs("div",{className:"w-full",children:[d.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),d.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),d.jsxs("div",{className:"w-full",children:[d.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),d.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),d.jsx("div",{className:"w-full",children:d.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&d.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),d.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(S=>d.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(u==null?void 0:u.id)===S.id?d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsx("input",{type:"text",name:"nombreActividad",value:u.nombreActividad,onChange:w,className:"text-xs p-1 w-full dark:bg-slate-600"}),d.jsx("input",{type:"date",name:"fecha",value:u.fecha,onChange:w,className:"text-xs p-1 w-full dark:bg-slate-600"}),d.jsx("button",{onClick:B,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"font-semibold",children:S.nombreActividad}),d.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx("button",{onClick:()=>F(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),d.jsx("button",{onClick:()=>D(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),d.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:y.map(S=>d.jsxs("tr",{children:[d.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),a.map(k=>{var M;const H=(M=s[k.id])==null?void 0:M[S];let P;return H==="trabajado"?P=Og[t]||Og.Default:H==="no trabajado"?P="❌":H==="ausente"?P="A":P=Og[t]||Og.Default,d.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:d.jsx("button",{onClick:()=>N(k.id,S),className:`text-3xl transition-opacity duration-200 ${H==="trabajado"?"opacity-100":H==="no trabajado"?"opacity-40":H==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:P})},k.id)}),d.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(S)})]},S))})]})})]})},Q4e=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,i]=L.useState([]),[s,o]=L.useState(null),[l,c]=L.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[u,A]=L.useState({}),[h,m]=L.useState(2),v=L.useMemo(()=>r.filter(F=>F.profile===Ht.ESTUDIANTE&&HZ(F.curso||"")===e).sort((F,B)=>F.nombreCompleto.localeCompare(B.nombreCompleto)),[r,e]);L.useEffect(()=>{const F=P4e(e,t,i);return()=>F()},[e,t]),L.useEffect(()=>{if(s){const F={};s.grupos.forEach(B=>{B.integrantes.forEach(D=>{F[D.nombre]={groupNumber:String(B.numero),role:D.rol||""}})}),A(F)}else A({})},[s]);const g=async F=>{if(F.preventDefault(),!l.nombre.trim())return;const B={curso:e,asignatura:t,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await M4e(B),c({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(D){console.error(D),alert("No se pudo crear la actividad grupal.")}},y=async()=>{if(!s)return;const F=new Map;for(const D of v){const E=u[D.nombreCompleto];if(E&&E.groupNumber){const S=parseInt(E.groupNumber,10);isNaN(S)||(F.has(S)||F.set(S,[]),F.get(S).push({nombre:D.nombreCompleto,rol:E.role||""}))}}const B=Array.from(F.entries()).map(([D,E])=>({numero:D,integrantes:E})).sort((D,E)=>D.numero-E.numero);try{await L4e(s.id,{grupos:B}),alert("Grupos guardados con éxito.")}catch(D){console.error(D),alert("No se pudieron guardar los grupos.")}},w=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const F=[...v].sort(()=>Math.random()-.5),B={};F.forEach((D,E)=>{var S;B[D.nombreCompleto]={groupNumber:String(E%h+1),role:((S=u[D.nombreCompleto])==null?void 0:S.role)||""}}),A(B)},T=(F,B,D)=>{A(E=>({...E,[F]:{...E[F]||{groupNumber:"",role:""},[B]:D}}))},N=L.useMemo(()=>{const F=new Map;return Object.entries(u).forEach(([B,D])=>{D.groupNumber&&(F.has(D.groupNumber)||F.set(D.groupNumber,[]),F.get(D.groupNumber).push({nombre:B,rol:D.role}))}),Array.from(F.entries()).sort((B,D)=>parseInt(B[0])-parseInt(D[0]))},[u]);return s?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),d.jsx("h2",{className:"text-2xl font-bold",children:s.nombreActividad})]}),d.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-1 space-y-4",children:[d.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"number",value:h,onChange:F=>m(parseInt(F.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),d.jsx("button",{onClick:w,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),d.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),d.jsx("table",{className:"w-full text-sm",children:d.jsx("tbody",{children:v.map(F=>{var B;return d.jsxs("tr",{children:[d.jsx("td",{className:"py-1 pr-2",children:F.nombreCompleto}),d.jsx("td",{className:"py-1",children:d.jsx("input",{type:"number",value:((B=u[F.nombreCompleto])==null?void 0:B.groupNumber)||"",onChange:D=>T(F.nombreCompleto,"groupNumber",D.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},F.id)})})})]})]}),d.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:N.map(([F,B])=>d.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[d.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",F]}),d.jsx("ul",{className:"space-y-2",children:B.map(D=>d.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{className:"flex-1 truncate",children:D.nombre}),d.jsxs("select",{value:D.rol||"",onChange:E=>T(D.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[d.jsx("option",{value:"",children:"-- Asignar Rol --"}),BY.map(E=>d.jsx("option",{value:E,children:E},E))]})]},D.nombre))})]},F))})]})]})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),d.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),d.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),d.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[d.jsx("input",{value:l.nombre,onChange:F=>c({...l,nombre:F.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),d.jsx("input",{type:"date",value:l.fecha,onChange:F=>c({...l,fecha:F.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(F=>d.jsxs("button",{onClick:()=>o(F),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[d.jsx("p",{className:"font-bold",children:F.nombreActividad}),d.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",F.fechaPresentacion]})]},F.id))]})]})},V4e=({currentUser:e})=>{const[t,r]=L.useState("calificaciones"),[n,a]=L.useState(null),[i,s]=L.useState(null),[o,l]=L.useState([]),[c,u]=L.useState(!0);L.useEffect(()=>{u(!0);const g=O4e(y=>{l(y),u(!1)});return()=>g()},[]);const A=L.useMemo(()=>e.cursos||[],[e.cursos]),h=L.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:g,label:y})=>d.jsx("button",{onClick:()=>r(g),className:`${t===g?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:y}),v=()=>{if(c)return d.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return d.jsx(U4e,{cursos:A,onSelect:a});if(!i)return d.jsx(j4e,{curso:n,asignaturas:h,onSelect:s,onBack:()=>a(null)});if(t==="calificaciones")return d.jsx(H4e,{curso:n,asignatura:i,allUsers:o,onBack:()=>s(null)});if(t==="grupos")return d.jsx(Q4e,{curso:n,asignatura:i,allUsers:o,onBack:()=>s(null)})};return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),d.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:d.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[d.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),d.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),d.jsx("div",{className:"mt-6",children:v()})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let z4e,G4e;function q4e(){return{geminiUrl:z4e,vertexUrl:G4e}}function $4e(e,t,r,n){var a,i;if(!(e!=null&&e.baseUrl)){const s=q4e();return t?(a=s.vertexUrl)!==null&&a!==void 0?a:r:(i=s.geminiUrl)!==null&&i!==void 0?i:n}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wm{}function lr(e,t){const r=/\{([^}]+)\}/g;return e.replace(r,(n,a)=>{if(Object.prototype.hasOwnProperty.call(t,a)){const i=t[a];return i!=null?String(i):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function C(e,t,r){for(let i=0;i<t.length-1;i++){const s=t[i];if(s.endsWith("[]")){const o=s.slice(0,-2);if(!(o in e))if(Array.isArray(r))e[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[o])){const l=e[o];if(Array.isArray(r))for(let c=0;c<l.length;c++){const u=l[c];C(u,t.slice(i+1),r[c])}else for(const c of l)C(c,t.slice(i+1),r)}return}else if(s.endsWith("[0]")){const o=s.slice(0,-3);o in e||(e[o]=[{}]);const l=e[o];C(l[0],t.slice(i+1),r);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const n=t[t.length-1],a=e[n];if(a!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===a)return;if(typeof a=="object"&&typeof r=="object"&&a!==null&&r!==null)Object.assign(a,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else e[n]=r}function b(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return;const n=t[r];if(n.endsWith("[]")){const a=n.slice(0,-2);if(a in e){const i=e[a];return Array.isArray(i)?i.map(s=>b(s,t.slice(r+1))):void 0}else return}else e=e[n]}return e}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p3(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var iH;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(iH||(iH={}));var sH;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(sH||(sH={}));var qh;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(qh||(qh={}));var oH;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(oH||(oH={}));var lH;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(lH||(lH={}));var cH;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(cH||(cH={}));var uH;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(uH||(uH={}));var dH;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(dH||(dH={}));var fH;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fH||(fH={}));var AH;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(AH||(AH={}));var hH;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(hH||(hH={}));var pH;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(pH||(pH={}));var mH;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(mH||(mH={}));var gH;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gH||(gH={}));var vH;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(vH||(vH={}));var xH;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xH||(xH={}));var h_;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(h_||(h_={}));var yH;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yH||(yH={}));var m3;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(m3||(m3={}));var bH;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bH||(bH={}));var wH;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(wH||(wH={}));var CH;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(CH||(CH={}));var EH;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(EH||(EH={}));var _H;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(_H||(_H={}));var SH;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(SH||(SH={}));var TH;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(TH||(TH={}));var NH;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(NH||(NH={}));var BH;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(BH||(BH={}));var kH;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kH||(kH={}));var IH;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(IH||(IH={}));var FH;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(FH||(FH={}));var DH;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(DH||(DH={}));var RH;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(RH||(RH={}));var PH;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(PH||(PH={}));var MH;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(MH||(MH={}));var LH;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LH||(LH={}));var OH;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(OH||(OH={}));var UH;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(UH||(UH={}));var jH;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(jH||(jH={}));var HH;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(HH||(HH={}));var QH;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(QH||(QH={}));var Ug;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Ug||(Ug={}));class g3{constructor(t){const r={};for(const n of t.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=t}json(){return this.responseInternal.json()}}class l1{get text(){var t,r,n,a,i,s,o,l;if(((a=(n=(r=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const A=[];for(const h of(l=(o=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,v]of Object.entries(h))m!=="text"&&m!=="thought"&&(v!==null||v!==void 0)&&A.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;u=!0,c+=h.text}}return A.length>0&&console.warn(`there are non-text parts ${A} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var t,r,n,a,i,s,o,l;if(((a=(n=(r=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const A of(l=(o=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[h,m]of Object.entries(A))h!=="inlineData"&&(m!==null||m!==void 0)&&u.push(h);A.inlineData&&typeof A.inlineData.data=="string"&&(c+=atob(A.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,r,n,a,i,s,o,l;if(((a=(n=(r=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(o=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,r,n,a,i,s,o,l,c;if(((a=(n=(r=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(o=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(A=>A.executableCode).map(A=>A.executableCode).filter(A=>A!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,r,n,a,i,s,o,l,c;if(((a=(n=(r=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(o=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(A=>A.codeExecutionResult).map(A=>A.codeExecutionResult).filter(A=>A!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class VH{}class zH{}class K4e{}class W4e{}class GH{}class qH{}class $H{}class Y4e{}class KH{}class WH{}class YH{}class XH{}class X4e{}class J4e{}class Z4e{}class JH{}class eke{get text(){var t,r,n;let a="",i=!1;const s=[];for(const o of(n=(r=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[l,c]of Object.entries(o))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;i=!0,a+=o.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?a:void 0}get data(){var t,r,n;let a="";const i=[];for(const s of(n=(r=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,l]of Object.entries(s))o!=="inlineData"&&l!==null&&i.push(o);s.inlineData&&typeof s.inlineData.data=="string"&&(a+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class p_{_fromAPIResponse({apiResponse:t,isVertexAI:r}){const n=new p_;if(n.name=t.name,n.metadata=t.metadata,n.done=t.done,n.error=t.error,r){const a=t.response;if(a){const i=new KH,s=a.videos;i.generatedVideos=s==null?void 0:s.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?p3(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),i.raiMediaFilteredCount=a.raiMediaFilteredCount,i.raiMediaFilteredReasons=a.raiMediaFilteredReasons,n.response=i}}else{const a=t.response;if(a){const i=new KH,s=a.generateVideoResponse,o=s==null?void 0:s.generatedSamples;i.generatedVideos=o==null?void 0:o.map(l=>{const c=l.video;return{video:{uri:c==null?void 0:c.uri,videoBytes:c!=null&&c.encodedVideo?p3(c==null?void 0:c.encodedVideo):void 0,mimeType:l.encoding}}}),i.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,i.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,n.response=i}}return n}}class tke{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sa(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const r=t.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function VZ(e,t){const r=sa(e,t);return r?r.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${r}`:r.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${r}`:r:""}function zZ(e){return Array.isArray(e)?e.map(t=>m_(t)):[m_(e)]}function m_(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function GZ(e){const t=m_(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function qZ(e){const t=m_(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ZH(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function $Z(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>ZH(t)):[ZH(e)]}function v3(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function eQ(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function tQ(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Po(e){if(e==null)throw new Error("ContentUnion is required");return v3(e)?e:{role:"user",parts:$Z(e)}}function KZ(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(r=>{const n=Po(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(e.isVertexAI()){const r=Po(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(t)?t.map(r=>Po(r)):[Po(t)]}function uu(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(eQ(e)||tQ(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Po(e)]}const t=[],r=[],n=v3(e[0]);for(const a of e){const i=v3(a);if(i!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(a);else{if(eQ(a)||tQ(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(a)}}return n||t.push({role:"user",parts:$Z(r)}),t}function rke(e,t){e.includes("null")&&(t.nullable=!0);const r=e.filter(n=>n!=="null");if(r.length===1)t.type=Object.values(qh).includes(r[0].toUpperCase())?r[0].toUpperCase():qh.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of r)t.anyOf.push({type:Object.values(qh).includes(n.toUpperCase())?n.toUpperCase():qh.TYPE_UNSPECIFIED})}}function iv(e){const t={},r=["items"],n=["anyOf"],a=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&rke(e.type,t);for(const[s,o]of Object.entries(e))if(o!=null)if(s=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;t.type=Object.values(qh).includes(o.toUpperCase())?o.toUpperCase():qh.TYPE_UNSPECIFIED}else if(r.includes(s))t[s]=iv(o);else if(n.includes(s)){const l=[];for(const c of o){if(c.type=="null"){t.nullable=!0;continue}l.push(iv(c))}t[s]=l}else if(a.includes(s)){const l={};for(const[c,u]of Object.entries(o))l[c]=iv(u);t[s]=l}else{if(s==="additionalProperties")continue;t[s]=o}return t}function wP(e){return iv(e)}function CP(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function EP(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function ax(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=iv(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=iv(t.response));return e}function ix(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const r of e)t.push(r);return t}function nke(e,t,r,n=1){const a=!t.startsWith(`${r}/`)&&t.split("/").length===n;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${r}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:a?`projects/${e.getProject()}/locations/${e.getLocation()}/${r}/${t}`:t:a?`${r}/${t}`:t}function PA(e,t){if(typeof t!="string")throw new Error("name must be a string");return nke(e,t,"cachedContents")}function WZ(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Cm(e){return p3(e)}function ake(e){return e!=null&&typeof e=="object"&&"name"in e}function ike(e){return e!=null&&typeof e=="object"&&"video"in e}function ske(e){return e!=null&&typeof e=="object"&&"uri"in e}function YZ(e){var t;let r;if(ake(e)&&(r=e.name),!(ske(e)&&(r=e.uri,r===void 0))&&!(ike(e)&&(r=(t=e.video)===null||t===void 0?void 0:t.uri,r===void 0))){if(typeof e=="string"&&(r=e),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const a=r.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${r}`);r=a[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function XZ(e,t){let r;return e.isVertexAI()?r=t?"publishers/google/models":"models":r=t?"models":"tunedModels",r}function JZ(e){for(const t of["models","tunedModels","publisherModels"])if(oke(e,t))return e[t];return[]}function oke(e,t){return e!==null&&typeof e=="object"&&t in e}function lke(e,t={}){const r=e,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}function cke(e,t={}){const r=[],n=new Set;for(const a of e){const i=a.name;if(n.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);n.add(i);const s=lke(a,t);s.functionDeclarations&&r.push(...s.functionDeclarations)}return{functionDeclarations:r}}function ZZ(e,t){if(typeof t!="string"&&!Array.isArray(t)){if(e&&e.isVertexAI()){if(t.gcsUri&&t.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!t.gcsUri&&!t.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(t.inlinedRequests&&t.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!t.inlinedRequests&&!t.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return t}else{if(Array.isArray(t))return{inlinedRequests:t};if(typeof t=="string"){if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:[t]};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};if(t.startsWith("files/"))return{fileName:t}}}throw new Error(`Unsupported source: ${t}`)}function uke(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function sx(e,t){const r=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function eee(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dke(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function fke(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function Ake(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function hke(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],dke(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],fke(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],Ake(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function tee(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>hke(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function pke(e){const t={},r=b(e,["anyOf"]);r!=null&&C(t,["anyOf"],r);const n=b(e,["default"]);n!=null&&C(t,["default"],n);const a=b(e,["description"]);a!=null&&C(t,["description"],a);const i=b(e,["enum"]);i!=null&&C(t,["enum"],i);const s=b(e,["example"]);s!=null&&C(t,["example"],s);const o=b(e,["format"]);o!=null&&C(t,["format"],o);const l=b(e,["items"]);l!=null&&C(t,["items"],l);const c=b(e,["maxItems"]);c!=null&&C(t,["maxItems"],c);const u=b(e,["maxLength"]);u!=null&&C(t,["maxLength"],u);const A=b(e,["maxProperties"]);A!=null&&C(t,["maxProperties"],A);const h=b(e,["maximum"]);h!=null&&C(t,["maximum"],h);const m=b(e,["minItems"]);m!=null&&C(t,["minItems"],m);const v=b(e,["minLength"]);v!=null&&C(t,["minLength"],v);const g=b(e,["minProperties"]);g!=null&&C(t,["minProperties"],g);const y=b(e,["minimum"]);y!=null&&C(t,["minimum"],y);const w=b(e,["nullable"]);w!=null&&C(t,["nullable"],w);const T=b(e,["pattern"]);T!=null&&C(t,["pattern"],T);const N=b(e,["properties"]);N!=null&&C(t,["properties"],N);const F=b(e,["propertyOrdering"]);F!=null&&C(t,["propertyOrdering"],F);const B=b(e,["required"]);B!=null&&C(t,["required"],B);const D=b(e,["title"]);D!=null&&C(t,["title"],D);const E=b(e,["type"]);return E!=null&&C(t,["type"],E),t}function mke(e){const t={};if(b(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(e,["category"]);r!=null&&C(t,["category"],r);const n=b(e,["threshold"]);return n!=null&&C(t,["threshold"],n),t}function gke(e){const t={},r=b(e,["behavior"]);r!=null&&C(t,["behavior"],r);const n=b(e,["description"]);n!=null&&C(t,["description"],n);const a=b(e,["name"]);a!=null&&C(t,["name"],a);const i=b(e,["parameters"]);i!=null&&C(t,["parameters"],i);const s=b(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const o=b(e,["response"]);o!=null&&C(t,["response"],o);const l=b(e,["responseJsonSchema"]);return l!=null&&C(t,["responseJsonSchema"],l),t}function vke(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function xke(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],vke(r)),t}function yke(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function bke(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],yke(r)),t}function wke(){return{}}function Cke(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>gke(c))),C(t,["functionDeclarations"],l)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=b(e,["googleSearch"]);n!=null&&C(t,["googleSearch"],xke(n));const a=b(e,["googleSearchRetrieval"]);if(a!=null&&C(t,["googleSearchRetrieval"],bke(a)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&C(t,["urlContext"],wke());const s=b(e,["codeExecution"]);s!=null&&C(t,["codeExecution"],s);const o=b(e,["computerUse"]);return o!=null&&C(t,["computerUse"],o),t}function Eke(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["allowedFunctionNames"]);return n!=null&&C(t,["allowedFunctionNames"],n),t}function _ke(e){const t={},r=b(e,["latitude"]);r!=null&&C(t,["latitude"],r);const n=b(e,["longitude"]);return n!=null&&C(t,["longitude"],n),t}function Ske(e){const t={},r=b(e,["latLng"]);r!=null&&C(t,["latLng"],_ke(r));const n=b(e,["languageCode"]);return n!=null&&C(t,["languageCode"],n),t}function Tke(e){const t={},r=b(e,["functionCallingConfig"]);r!=null&&C(t,["functionCallingConfig"],Eke(r));const n=b(e,["retrievalConfig"]);return n!=null&&C(t,["retrievalConfig"],Ske(n)),t}function Nke(e){const t={},r=b(e,["voiceName"]);return r!=null&&C(t,["voiceName"],r),t}function ree(e){const t={},r=b(e,["prebuiltVoiceConfig"]);return r!=null&&C(t,["prebuiltVoiceConfig"],Nke(r)),t}function Bke(e){const t={},r=b(e,["speaker"]);r!=null&&C(t,["speaker"],r);const n=b(e,["voiceConfig"]);return n!=null&&C(t,["voiceConfig"],ree(n)),t}function kke(e){const t={},r=b(e,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Bke(a))),C(t,["speakerVoiceConfigs"],n)}return t}function Ike(e){const t={},r=b(e,["voiceConfig"]);r!=null&&C(t,["voiceConfig"],ree(r));const n=b(e,["multiSpeakerVoiceConfig"]);n!=null&&C(t,["multiSpeakerVoiceConfig"],kke(n));const a=b(e,["languageCode"]);return a!=null&&C(t,["languageCode"],a),t}function Fke(e){const t={},r=b(e,["includeThoughts"]);r!=null&&C(t,["includeThoughts"],r);const n=b(e,["thinkingBudget"]);return n!=null&&C(t,["thinkingBudget"],n),t}function Dke(e,t,r){const n={},a=b(t,["systemInstruction"]);r!==void 0&&a!=null&&C(r,["systemInstruction"],tee(Po(a)));const i=b(t,["temperature"]);i!=null&&C(n,["temperature"],i);const s=b(t,["topP"]);s!=null&&C(n,["topP"],s);const o=b(t,["topK"]);o!=null&&C(n,["topK"],o);const l=b(t,["candidateCount"]);l!=null&&C(n,["candidateCount"],l);const c=b(t,["maxOutputTokens"]);c!=null&&C(n,["maxOutputTokens"],c);const u=b(t,["stopSequences"]);u!=null&&C(n,["stopSequences"],u);const A=b(t,["responseLogprobs"]);A!=null&&C(n,["responseLogprobs"],A);const h=b(t,["logprobs"]);h!=null&&C(n,["logprobs"],h);const m=b(t,["presencePenalty"]);m!=null&&C(n,["presencePenalty"],m);const v=b(t,["frequencyPenalty"]);v!=null&&C(n,["frequencyPenalty"],v);const g=b(t,["seed"]);g!=null&&C(n,["seed"],g);const y=b(t,["responseMimeType"]);y!=null&&C(n,["responseMimeType"],y);const w=b(t,["responseSchema"]);w!=null&&C(n,["responseSchema"],pke(wP(w)));const T=b(t,["responseJsonSchema"]);if(T!=null&&C(n,["responseJsonSchema"],T),b(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=b(t,["safetySettings"]);if(r!==void 0&&N!=null){let P=N;Array.isArray(P)&&(P=P.map(M=>mke(M))),C(r,["safetySettings"],P)}const F=b(t,["tools"]);if(r!==void 0&&F!=null){let P=ix(F);Array.isArray(P)&&(P=P.map(M=>Cke(ax(M)))),C(r,["tools"],P)}const B=b(t,["toolConfig"]);if(r!==void 0&&B!=null&&C(r,["toolConfig"],Tke(B)),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=b(t,["cachedContent"]);r!==void 0&&D!=null&&C(r,["cachedContent"],PA(e,D));const E=b(t,["responseModalities"]);E!=null&&C(n,["responseModalities"],E);const S=b(t,["mediaResolution"]);S!=null&&C(n,["mediaResolution"],S);const k=b(t,["speechConfig"]);if(k!=null&&C(n,["speechConfig"],Ike(CP(k))),b(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=b(t,["thinkingConfig"]);return H!=null&&C(n,["thinkingConfig"],Fke(H)),n}function Rke(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["request","model"],sa(e,n));const a=b(t,["contents"]);if(a!=null){let s=uu(a);Array.isArray(s)&&(s=s.map(o=>tee(o))),C(r,["request","contents"],s)}const i=b(t,["config"]);return i!=null&&C(r,["request","generationConfig"],Dke(e,i,r)),r}function Pke(e,t){const r={};if(b(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=b(t,["fileName"]);n!=null&&C(r,["fileName"],n);const a=b(t,["inlinedRequests"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Rke(e,s))),C(r,["requests","requests"],i)}return r}function Mke(e,t){const r={},n=b(e,["displayName"]);if(t!==void 0&&n!=null&&C(t,["batch","displayName"],n),b(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function Lke(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["src"]);a!=null&&C(r,["batch","inputConfig"],Pke(e,ZZ(e,a)));const i=b(t,["config"]);return i!=null&&C(r,["config"],Mke(i,r)),r}function Oke(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],sx(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function Uke(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],sx(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function jke(e,t){const r={},n=b(e,["pageSize"]);t!==void 0&&n!=null&&C(t,["_query","pageSize"],n);const a=b(e,["pageToken"]);if(t!==void 0&&a!=null&&C(t,["_query","pageToken"],a),b(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function Hke(e){const t={},r=b(e,["config"]);return r!=null&&C(t,["config"],jke(r,t)),t}function Qke(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],sx(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function Vke(e){const t={},r=b(e,["format"]);r!=null&&C(t,["instancesFormat"],r);const n=b(e,["gcsUri"]);n!=null&&C(t,["gcsSource","uris"],n);const a=b(e,["bigqueryUri"]);if(a!=null&&C(t,["bigquerySource","inputUri"],a),b(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function zke(e){const t={},r=b(e,["format"]);r!=null&&C(t,["predictionsFormat"],r);const n=b(e,["gcsUri"]);n!=null&&C(t,["gcsDestination","outputUriPrefix"],n);const a=b(e,["bigqueryUri"]);if(a!=null&&C(t,["bigqueryDestination","outputUri"],a),b(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return t}function Gke(e,t){const r={},n=b(e,["displayName"]);t!==void 0&&n!=null&&C(t,["displayName"],n);const a=b(e,["dest"]);return t!==void 0&&a!=null&&C(t,["outputConfig"],zke(uke(a))),r}function qke(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["model"],sa(e,n));const a=b(t,["src"]);a!=null&&C(r,["inputConfig"],Vke(ZZ(e,a)));const i=b(t,["config"]);return i!=null&&C(r,["config"],Gke(i,r)),r}function $ke(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],sx(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function Kke(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],sx(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function Wke(e,t){const r={},n=b(e,["pageSize"]);t!==void 0&&n!=null&&C(t,["_query","pageSize"],n);const a=b(e,["pageToken"]);t!==void 0&&a!=null&&C(t,["_query","pageToken"],a);const i=b(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function Yke(e){const t={},r=b(e,["config"]);return r!=null&&C(t,["config"],Wke(r,t)),t}function Xke(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],sx(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function Jke(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function Zke(e){const t={},r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function eIe(e){const t={},r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function tIe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],Jke(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],Zke(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],eIe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function rIe(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>tIe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function nIe(e){const t={},r=b(e,["citationSources"]);return r!=null&&C(t,["citations"],r),t}function aIe(e){const t={},r=b(e,["retrievedUrl"]);r!=null&&C(t,["retrievedUrl"],r);const n=b(e,["urlRetrievalStatus"]);return n!=null&&C(t,["urlRetrievalStatus"],n),t}function iIe(e){const t={},r=b(e,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>aIe(a))),C(t,["urlMetadata"],n)}return t}function sIe(e){const t={},r=b(e,["content"]);r!=null&&C(t,["content"],rIe(r));const n=b(e,["citationMetadata"]);n!=null&&C(t,["citationMetadata"],nIe(n));const a=b(e,["tokenCount"]);a!=null&&C(t,["tokenCount"],a);const i=b(e,["finishReason"]);i!=null&&C(t,["finishReason"],i);const s=b(e,["urlContextMetadata"]);s!=null&&C(t,["urlContextMetadata"],iIe(s));const o=b(e,["avgLogprobs"]);o!=null&&C(t,["avgLogprobs"],o);const l=b(e,["groundingMetadata"]);l!=null&&C(t,["groundingMetadata"],l);const c=b(e,["index"]);c!=null&&C(t,["index"],c);const u=b(e,["logprobsResult"]);u!=null&&C(t,["logprobsResult"],u);const A=b(e,["safetyRatings"]);return A!=null&&C(t,["safetyRatings"],A),t}function oIe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>sIe(l))),C(t,["candidates"],o)}const a=b(e,["modelVersion"]);a!=null&&C(t,["modelVersion"],a);const i=b(e,["promptFeedback"]);i!=null&&C(t,["promptFeedback"],i);const s=b(e,["usageMetadata"]);return s!=null&&C(t,["usageMetadata"],s),t}function nee(e){const t={},r=b(e,["details"]);r!=null&&C(t,["details"],r);const n=b(e,["code"]);n!=null&&C(t,["code"],n);const a=b(e,["message"]);return a!=null&&C(t,["message"],a),t}function lIe(e){const t={},r=b(e,["response"]);r!=null&&C(t,["response"],oIe(r));const n=b(e,["error"]);return n!=null&&C(t,["error"],nee(n)),t}function cIe(e){const t={},r=b(e,["responsesFile"]);r!=null&&C(t,["fileName"],r);const n=b(e,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>lIe(i))),C(t,["inlinedResponses"],a)}return t}function x3(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["metadata","displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["metadata","state"]);a!=null&&C(t,["state"],eee(a));const i=b(e,["metadata","createTime"]);i!=null&&C(t,["createTime"],i);const s=b(e,["metadata","endTime"]);s!=null&&C(t,["endTime"],s);const o=b(e,["metadata","updateTime"]);o!=null&&C(t,["updateTime"],o);const l=b(e,["metadata","model"]);l!=null&&C(t,["model"],l);const c=b(e,["metadata","output"]);return c!=null&&C(t,["dest"],cIe(c)),t}function uIe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["operations"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>x3(s))),C(t,["batchJobs"],i)}return t}function dIe(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["done"]);n!=null&&C(t,["done"],n);const a=b(e,["error"]);return a!=null&&C(t,["error"],nee(a)),t}function aee(e){const t={},r=b(e,["details"]);r!=null&&C(t,["details"],r);const n=b(e,["code"]);n!=null&&C(t,["code"],n);const a=b(e,["message"]);return a!=null&&C(t,["message"],a),t}function fIe(e){const t={},r=b(e,["instancesFormat"]);r!=null&&C(t,["format"],r);const n=b(e,["gcsSource","uris"]);n!=null&&C(t,["gcsUri"],n);const a=b(e,["bigquerySource","inputUri"]);return a!=null&&C(t,["bigqueryUri"],a),t}function AIe(e){const t={},r=b(e,["predictionsFormat"]);r!=null&&C(t,["format"],r);const n=b(e,["gcsDestination","outputUriPrefix"]);n!=null&&C(t,["gcsUri"],n);const a=b(e,["bigqueryDestination","outputUri"]);return a!=null&&C(t,["bigqueryUri"],a),t}function y3(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["state"]);a!=null&&C(t,["state"],eee(a));const i=b(e,["error"]);i!=null&&C(t,["error"],aee(i));const s=b(e,["createTime"]);s!=null&&C(t,["createTime"],s);const o=b(e,["startTime"]);o!=null&&C(t,["startTime"],o);const l=b(e,["endTime"]);l!=null&&C(t,["endTime"],l);const c=b(e,["updateTime"]);c!=null&&C(t,["updateTime"],c);const u=b(e,["model"]);u!=null&&C(t,["model"],u);const A=b(e,["inputConfig"]);A!=null&&C(t,["src"],fIe(A));const h=b(e,["outputConfig"]);return h!=null&&C(t,["dest"],AIe(h)),t}function hIe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["batchPredictionJobs"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>y3(s))),C(t,["batchJobs"],i)}return t}function pIe(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["done"]);n!=null&&C(t,["done"],n);const a=b(e,["error"]);return a!=null&&C(t,["error"],aee(a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nm;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(nm||(nm={}));class Gb{constructor(t,r,n,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(t,n,a)}init(t,r,n){var a,i;this.nameInternal=t,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!n||Object.keys(n).length===0?s={config:{}}:typeof n=="object"?s=Object.assign({},n):s=n,s.config&&(s.config.pageToken=r.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(a=s.config)===null||a===void 0?void 0:a.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mIe extends wm{constructor(t){super(),this.apiClient=t,this.create=async r=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${a}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new Gb(nm.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=qke(this.apiClient,t);return o=lr("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>y3(u))}else{const c=Lke(this.apiClient,t);return o=lr("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>x3(u))}}async get(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=$ke(this.apiClient,t);return o=lr("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>y3(u))}else{const c=Oke(this.apiClient,t);return o=lr("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>x3(u))}}async cancel(t){var r,n,a,i;let s="",o={};if(this.apiClient.isVertexAI()){const l=Kke(this.apiClient,t);s=lr("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}else{const l=Uke(this.apiClient,t);s=lr("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=Yke(t);return o=lr("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=hIe(u),h=new JH;return Object.assign(h,A),h})}else{const c=Hke(t);return o=lr("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=uIe(u),h=new JH;return Object.assign(h,A),h})}}async delete(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=Xke(this.apiClient,t);return o=lr("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>pIe(u))}else{const c=Qke(this.apiClient,t);return o=lr("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>dIe(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gIe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function vIe(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function xIe(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function yIe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],gIe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],vIe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],xIe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function rQ(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>yIe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function bIe(e){const t={},r=b(e,["behavior"]);r!=null&&C(t,["behavior"],r);const n=b(e,["description"]);n!=null&&C(t,["description"],n);const a=b(e,["name"]);a!=null&&C(t,["name"],a);const i=b(e,["parameters"]);i!=null&&C(t,["parameters"],i);const s=b(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const o=b(e,["response"]);o!=null&&C(t,["response"],o);const l=b(e,["responseJsonSchema"]);return l!=null&&C(t,["responseJsonSchema"],l),t}function wIe(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function CIe(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],wIe(r)),t}function EIe(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function _Ie(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],EIe(r)),t}function SIe(){return{}}function TIe(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>bIe(c))),C(t,["functionDeclarations"],l)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=b(e,["googleSearch"]);n!=null&&C(t,["googleSearch"],CIe(n));const a=b(e,["googleSearchRetrieval"]);if(a!=null&&C(t,["googleSearchRetrieval"],_Ie(a)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&C(t,["urlContext"],SIe());const s=b(e,["codeExecution"]);s!=null&&C(t,["codeExecution"],s);const o=b(e,["computerUse"]);return o!=null&&C(t,["computerUse"],o),t}function NIe(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["allowedFunctionNames"]);return n!=null&&C(t,["allowedFunctionNames"],n),t}function BIe(e){const t={},r=b(e,["latitude"]);r!=null&&C(t,["latitude"],r);const n=b(e,["longitude"]);return n!=null&&C(t,["longitude"],n),t}function kIe(e){const t={},r=b(e,["latLng"]);r!=null&&C(t,["latLng"],BIe(r));const n=b(e,["languageCode"]);return n!=null&&C(t,["languageCode"],n),t}function IIe(e){const t={},r=b(e,["functionCallingConfig"]);r!=null&&C(t,["functionCallingConfig"],NIe(r));const n=b(e,["retrievalConfig"]);return n!=null&&C(t,["retrievalConfig"],kIe(n)),t}function FIe(e,t){const r={},n=b(e,["ttl"]);t!==void 0&&n!=null&&C(t,["ttl"],n);const a=b(e,["expireTime"]);t!==void 0&&a!=null&&C(t,["expireTime"],a);const i=b(e,["displayName"]);t!==void 0&&i!=null&&C(t,["displayName"],i);const s=b(e,["contents"]);if(t!==void 0&&s!=null){let u=uu(s);Array.isArray(u)&&(u=u.map(A=>rQ(A))),C(t,["contents"],u)}const o=b(e,["systemInstruction"]);t!==void 0&&o!=null&&C(t,["systemInstruction"],rQ(Po(o)));const l=b(e,["tools"]);if(t!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(A=>TIe(A))),C(t,["tools"],u)}const c=b(e,["toolConfig"]);if(t!==void 0&&c!=null&&C(t,["toolConfig"],IIe(c)),b(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function DIe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["model"],VZ(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],FIe(a,r)),r}function RIe(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],PA(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function PIe(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],PA(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function MIe(e,t){const r={},n=b(e,["ttl"]);t!==void 0&&n!=null&&C(t,["ttl"],n);const a=b(e,["expireTime"]);return t!==void 0&&a!=null&&C(t,["expireTime"],a),r}function LIe(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],PA(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],MIe(a,r)),r}function OIe(e,t){const r={},n=b(e,["pageSize"]);t!==void 0&&n!=null&&C(t,["_query","pageSize"],n);const a=b(e,["pageToken"]);return t!==void 0&&a!=null&&C(t,["_query","pageToken"],a),r}function UIe(e){const t={},r=b(e,["config"]);return r!=null&&C(t,["config"],OIe(r,t)),t}function jIe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function HIe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["data"]);n!=null&&C(t,["data"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function QIe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function VIe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],jIe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],HIe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],QIe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function nQ(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>VIe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function zIe(e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=b(e,["description"]);r!=null&&C(t,["description"],r);const n=b(e,["name"]);n!=null&&C(t,["name"],n);const a=b(e,["parameters"]);a!=null&&C(t,["parameters"],a);const i=b(e,["parametersJsonSchema"]);i!=null&&C(t,["parametersJsonSchema"],i);const s=b(e,["response"]);s!=null&&C(t,["response"],s);const o=b(e,["responseJsonSchema"]);return o!=null&&C(t,["responseJsonSchema"],o),t}function GIe(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function qIe(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],GIe(r)),t}function $Ie(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function KIe(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],$Ie(r)),t}function WIe(){return{}}function YIe(e){const t={},r=b(e,["apiKeyString"]);return r!=null&&C(t,["apiKeyString"],r),t}function XIe(e){const t={},r=b(e,["apiKeyConfig"]);r!=null&&C(t,["apiKeyConfig"],YIe(r));const n=b(e,["authType"]);n!=null&&C(t,["authType"],n);const a=b(e,["googleServiceAccountConfig"]);a!=null&&C(t,["googleServiceAccountConfig"],a);const i=b(e,["httpBasicAuthConfig"]);i!=null&&C(t,["httpBasicAuthConfig"],i);const s=b(e,["oauthConfig"]);s!=null&&C(t,["oauthConfig"],s);const o=b(e,["oidcConfig"]);return o!=null&&C(t,["oidcConfig"],o),t}function JIe(e){const t={},r=b(e,["authConfig"]);return r!=null&&C(t,["authConfig"],XIe(r)),t}function ZIe(){return{}}function e3e(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let A=r;Array.isArray(A)&&(A=A.map(h=>zIe(h))),C(t,["functionDeclarations"],A)}const n=b(e,["retrieval"]);n!=null&&C(t,["retrieval"],n);const a=b(e,["googleSearch"]);a!=null&&C(t,["googleSearch"],qIe(a));const i=b(e,["googleSearchRetrieval"]);i!=null&&C(t,["googleSearchRetrieval"],KIe(i)),b(e,["enterpriseWebSearch"])!=null&&C(t,["enterpriseWebSearch"],WIe());const o=b(e,["googleMaps"]);o!=null&&C(t,["googleMaps"],JIe(o)),b(e,["urlContext"])!=null&&C(t,["urlContext"],ZIe());const c=b(e,["codeExecution"]);c!=null&&C(t,["codeExecution"],c);const u=b(e,["computerUse"]);return u!=null&&C(t,["computerUse"],u),t}function t3e(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["allowedFunctionNames"]);return n!=null&&C(t,["allowedFunctionNames"],n),t}function r3e(e){const t={},r=b(e,["latitude"]);r!=null&&C(t,["latitude"],r);const n=b(e,["longitude"]);return n!=null&&C(t,["longitude"],n),t}function n3e(e){const t={},r=b(e,["latLng"]);r!=null&&C(t,["latLng"],r3e(r));const n=b(e,["languageCode"]);return n!=null&&C(t,["languageCode"],n),t}function a3e(e){const t={},r=b(e,["functionCallingConfig"]);r!=null&&C(t,["functionCallingConfig"],t3e(r));const n=b(e,["retrievalConfig"]);return n!=null&&C(t,["retrievalConfig"],n3e(n)),t}function i3e(e,t){const r={},n=b(e,["ttl"]);t!==void 0&&n!=null&&C(t,["ttl"],n);const a=b(e,["expireTime"]);t!==void 0&&a!=null&&C(t,["expireTime"],a);const i=b(e,["displayName"]);t!==void 0&&i!=null&&C(t,["displayName"],i);const s=b(e,["contents"]);if(t!==void 0&&s!=null){let A=uu(s);Array.isArray(A)&&(A=A.map(h=>nQ(h))),C(t,["contents"],A)}const o=b(e,["systemInstruction"]);t!==void 0&&o!=null&&C(t,["systemInstruction"],nQ(Po(o)));const l=b(e,["tools"]);if(t!==void 0&&l!=null){let A=l;Array.isArray(A)&&(A=A.map(h=>e3e(h))),C(t,["tools"],A)}const c=b(e,["toolConfig"]);t!==void 0&&c!=null&&C(t,["toolConfig"],a3e(c));const u=b(e,["kmsKeyName"]);return t!==void 0&&u!=null&&C(t,["encryption_spec","kmsKeyName"],u),r}function s3e(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["model"],VZ(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],i3e(a,r)),r}function o3e(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],PA(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function l3e(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],PA(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function c3e(e,t){const r={},n=b(e,["ttl"]);t!==void 0&&n!=null&&C(t,["ttl"],n);const a=b(e,["expireTime"]);return t!==void 0&&a!=null&&C(t,["expireTime"],a),r}function u3e(e,t){const r={},n=b(t,["name"]);n!=null&&C(r,["_url","name"],PA(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],c3e(a,r)),r}function d3e(e,t){const r={},n=b(e,["pageSize"]);t!==void 0&&n!=null&&C(t,["_query","pageSize"],n);const a=b(e,["pageToken"]);return t!==void 0&&a!=null&&C(t,["_query","pageToken"],a),r}function f3e(e){const t={},r=b(e,["config"]);return r!=null&&C(t,["config"],d3e(r,t)),t}function ZC(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["model"]);a!=null&&C(t,["model"],a);const i=b(e,["createTime"]);i!=null&&C(t,["createTime"],i);const s=b(e,["updateTime"]);s!=null&&C(t,["updateTime"],s);const o=b(e,["expireTime"]);o!=null&&C(t,["expireTime"],o);const l=b(e,["usageMetadata"]);return l!=null&&C(t,["usageMetadata"],l),t}function A3e(){return{}}function h3e(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>ZC(s))),C(t,["cachedContents"],i)}return t}function eE(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["model"]);a!=null&&C(t,["model"],a);const i=b(e,["createTime"]);i!=null&&C(t,["createTime"],i);const s=b(e,["updateTime"]);s!=null&&C(t,["updateTime"],s);const o=b(e,["expireTime"]);o!=null&&C(t,["expireTime"],o);const l=b(e,["usageMetadata"]);return l!=null&&C(t,["usageMetadata"],l),t}function p3e(){return{}}function m3e(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>eE(s))),C(t,["cachedContents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g3e extends wm{constructor(t){super(),this.apiClient=t,this.list=async(r={})=>new Gb(nm.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=s3e(this.apiClient,t);return o=lr("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>eE(u))}else{const c=DIe(this.apiClient,t);return o=lr("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>ZC(u))}}async get(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=o3e(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>eE(u))}else{const c=RIe(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>ZC(u))}}async delete(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=l3e(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(()=>{const u=p3e(),A=new YH;return Object.assign(A,u),A})}else{const c=PIe(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(()=>{const u=A3e(),A=new YH;return Object.assign(A,u),A})}}async update(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=u3e(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>eE(u))}else{const c=LIe(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>ZC(u))}}async listInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=f3e(t);return o=lr("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=m3e(u),h=new XH;return Object.assign(h,A),h})}else{const c=UIe(t);return o=lr("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=h3e(u),h=new XH;return Object.assign(h,A),h})}}}function aQ(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ta(e){return this instanceof Ta?(this.v=e,this):new Ta(e)}function sv(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(m){return function(v){return Promise.resolve(v).then(m,A)}}function o(m,v){n[m]&&(a[m]=function(g){return new Promise(function(y,w){i.push([m,g,y,w])>1||l(m,g)})},v&&(a[m]=v(a[m])))}function l(m,v){try{c(n[m](v))}catch(g){h(i[0][3],g)}}function c(m){m.value instanceof Ta?Promise.resolve(m.value.v).then(u,A):h(i[0][2],m)}function u(m){l("next",m)}function A(m){l("throw",m)}function h(m,v){m(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function py(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof aQ=="function"?aQ(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(o,l){s=e[i](s),a(o,l,s.done,s.value)})}}function a(i,s,o,l){Promise.resolve(l).then(function(c){i({value:c,done:o})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v3e(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return r===void 0?!1:iee(r)}function iee(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function x3e(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function iQ(e){if(e===void 0||e.length===0)return[];const t=[],r=e.length;let n=0;for(;n<r;)if(e[n].role==="user")t.push(e[n]),n++;else{const a=[];let i=!0;for(;n<r&&e[n].role==="model";)a.push(e[n]),i&&!iee(e[n])&&(i=!1),n++;i?t.push(...a):t.pop()}return t}class y3e{constructor(t,r){this.modelsModule=t,this.apiClient=r}create(t){return new b3e(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class b3e{constructor(t,r,n,a={},i=[]){this.apiClient=t,this.modelsModule=r,this.model=n,this.config=a,this.history=i,this.sendPromise=Promise.resolve(),x3e(i)}async sendMessage(t){var r;await this.sendPromise;const n=Po(t.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=t.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var i,s,o;const l=await a,c=(s=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,u=l.automaticFunctionCallingHistory,A=this.getHistory(!0).length;let h=[];u!=null&&(h=(o=u.slice(A))!==null&&o!==void 0?o:[]);const m=c?[c]:[];this.recordHistory(n,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(t){var r;await this.sendPromise;const n=Po(t.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=t.config)!==null&&r!==void 0?r:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const i=await a;return this.processStreamResponse(i,n)}getHistory(t=!1){const r=t?iQ(this.history):this.history;return structuredClone(r)}processStreamResponse(t,r){var n,a;return sv(this,arguments,function*(){var s,o,l,c;const u=[];try{for(var A=!0,h=py(t),m;m=yield Ta(h.next()),s=m.done,!s;A=!0){c=m.value,A=!1;const v=c;if(v3e(v)){const g=(a=(n=v.candidates)===null||n===void 0?void 0:n[0])===null||a===void 0?void 0:a.content;g!==void 0&&u.push(g)}yield yield Ta(v)}}catch(v){o={error:v}}finally{try{!A&&!s&&(l=h.return)&&(yield Ta(l.call(h)))}finally{if(o)throw o.error}}this.recordHistory(r,u)})}recordHistory(t,r,n){let a=[];r.length>0&&r.every(i=>i.role!==void 0)?a=r:a.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...iQ(n)):this.history.push(t),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yT extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,yT.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w3e(e,t){const r={},n=b(e,["pageSize"]);t!==void 0&&n!=null&&C(t,["_query","pageSize"],n);const a=b(e,["pageToken"]);return t!==void 0&&a!=null&&C(t,["_query","pageToken"],a),r}function C3e(e){const t={},r=b(e,["config"]);return r!=null&&C(t,["config"],w3e(r,t)),t}function E3e(e){const t={},r=b(e,["details"]);r!=null&&C(t,["details"],r);const n=b(e,["message"]);n!=null&&C(t,["message"],n);const a=b(e,["code"]);return a!=null&&C(t,["code"],a),t}function _3e(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["mimeType"]);a!=null&&C(t,["mimeType"],a);const i=b(e,["sizeBytes"]);i!=null&&C(t,["sizeBytes"],i);const s=b(e,["createTime"]);s!=null&&C(t,["createTime"],s);const o=b(e,["expirationTime"]);o!=null&&C(t,["expirationTime"],o);const l=b(e,["updateTime"]);l!=null&&C(t,["updateTime"],l);const c=b(e,["sha256Hash"]);c!=null&&C(t,["sha256Hash"],c);const u=b(e,["uri"]);u!=null&&C(t,["uri"],u);const A=b(e,["downloadUri"]);A!=null&&C(t,["downloadUri"],A);const h=b(e,["state"]);h!=null&&C(t,["state"],h);const m=b(e,["source"]);m!=null&&C(t,["source"],m);const v=b(e,["videoMetadata"]);v!=null&&C(t,["videoMetadata"],v);const g=b(e,["error"]);return g!=null&&C(t,["error"],E3e(g)),t}function S3e(e){const t={},r=b(e,["file"]);r!=null&&C(t,["file"],_3e(r));const n=b(e,["config"]);return n!=null&&C(t,["config"],n),t}function T3e(e){const t={},r=b(e,["name"]);r!=null&&C(t,["_url","file"],YZ(r));const n=b(e,["config"]);return n!=null&&C(t,["config"],n),t}function N3e(e){const t={},r=b(e,["name"]);r!=null&&C(t,["_url","file"],YZ(r));const n=b(e,["config"]);return n!=null&&C(t,["config"],n),t}function B3e(e){const t={},r=b(e,["details"]);r!=null&&C(t,["details"],r);const n=b(e,["message"]);n!=null&&C(t,["message"],n);const a=b(e,["code"]);return a!=null&&C(t,["code"],a),t}function b3(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["mimeType"]);a!=null&&C(t,["mimeType"],a);const i=b(e,["sizeBytes"]);i!=null&&C(t,["sizeBytes"],i);const s=b(e,["createTime"]);s!=null&&C(t,["createTime"],s);const o=b(e,["expirationTime"]);o!=null&&C(t,["expirationTime"],o);const l=b(e,["updateTime"]);l!=null&&C(t,["updateTime"],l);const c=b(e,["sha256Hash"]);c!=null&&C(t,["sha256Hash"],c);const u=b(e,["uri"]);u!=null&&C(t,["uri"],u);const A=b(e,["downloadUri"]);A!=null&&C(t,["downloadUri"],A);const h=b(e,["state"]);h!=null&&C(t,["state"],h);const m=b(e,["source"]);m!=null&&C(t,["source"],m);const v=b(e,["videoMetadata"]);v!=null&&C(t,["videoMetadata"],v);const g=b(e,["error"]);return g!=null&&C(t,["error"],B3e(g)),t}function k3e(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["files"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>b3(s))),C(t,["files"],i)}return t}function I3e(e){const t={},r=b(e,["sdkHttpResponse"]);return r!=null&&C(t,["sdkHttpResponse"],r),t}function F3e(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D3e extends wm{constructor(t){super(),this.apiClient=t,this.list=async(r={})=>new Gb(nm.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(r=>b3(r))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=C3e(t);return i=lr("files",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),a.then(l=>{const c=k3e(l),u=new X4e;return Object.assign(u,c),u})}}async createInternal(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=S3e(t);return i=lr("upload/v1beta/files",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>{const c=I3e(l),u=new J4e;return Object.assign(u,c),u})}}async get(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=T3e(t);return i=lr("files/{file}",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>b3(l))}}async delete(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=N3e(t);return i=lr("files/{file}",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(()=>{const l=F3e(),c=new Z4e;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R3e(e){const t={},r=b(e,["voiceName"]);return r!=null&&C(t,["voiceName"],r),t}function see(e){const t={},r=b(e,["prebuiltVoiceConfig"]);return r!=null&&C(t,["prebuiltVoiceConfig"],R3e(r)),t}function P3e(e){const t={},r=b(e,["speaker"]);r!=null&&C(t,["speaker"],r);const n=b(e,["voiceConfig"]);return n!=null&&C(t,["voiceConfig"],see(n)),t}function M3e(e){const t={},r=b(e,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>P3e(a))),C(t,["speakerVoiceConfigs"],n)}return t}function L3e(e){const t={},r=b(e,["voiceConfig"]);r!=null&&C(t,["voiceConfig"],see(r));const n=b(e,["multiSpeakerVoiceConfig"]);n!=null&&C(t,["multiSpeakerVoiceConfig"],M3e(n));const a=b(e,["languageCode"]);return a!=null&&C(t,["languageCode"],a),t}function O3e(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function U3e(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function j3e(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function H3e(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],O3e(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],U3e(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],j3e(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function Q3e(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>H3e(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function V3e(e){const t={},r=b(e,["behavior"]);r!=null&&C(t,["behavior"],r);const n=b(e,["description"]);n!=null&&C(t,["description"],n);const a=b(e,["name"]);a!=null&&C(t,["name"],a);const i=b(e,["parameters"]);i!=null&&C(t,["parameters"],i);const s=b(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const o=b(e,["response"]);o!=null&&C(t,["response"],o);const l=b(e,["responseJsonSchema"]);return l!=null&&C(t,["responseJsonSchema"],l),t}function z3e(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function G3e(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],z3e(r)),t}function q3e(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function $3e(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],q3e(r)),t}function K3e(){return{}}function W3e(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>V3e(c))),C(t,["functionDeclarations"],l)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=b(e,["googleSearch"]);n!=null&&C(t,["googleSearch"],G3e(n));const a=b(e,["googleSearchRetrieval"]);if(a!=null&&C(t,["googleSearchRetrieval"],$3e(a)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&C(t,["urlContext"],K3e());const s=b(e,["codeExecution"]);s!=null&&C(t,["codeExecution"],s);const o=b(e,["computerUse"]);return o!=null&&C(t,["computerUse"],o),t}function Y3e(e){const t={},r=b(e,["handle"]);if(r!=null&&C(t,["handle"],r),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function sQ(){return{}}function X3e(e){const t={},r=b(e,["disabled"]);r!=null&&C(t,["disabled"],r);const n=b(e,["startOfSpeechSensitivity"]);n!=null&&C(t,["startOfSpeechSensitivity"],n);const a=b(e,["endOfSpeechSensitivity"]);a!=null&&C(t,["endOfSpeechSensitivity"],a);const i=b(e,["prefixPaddingMs"]);i!=null&&C(t,["prefixPaddingMs"],i);const s=b(e,["silenceDurationMs"]);return s!=null&&C(t,["silenceDurationMs"],s),t}function J3e(e){const t={},r=b(e,["automaticActivityDetection"]);r!=null&&C(t,["automaticActivityDetection"],X3e(r));const n=b(e,["activityHandling"]);n!=null&&C(t,["activityHandling"],n);const a=b(e,["turnCoverage"]);return a!=null&&C(t,["turnCoverage"],a),t}function Z3e(e){const t={},r=b(e,["targetTokens"]);return r!=null&&C(t,["targetTokens"],r),t}function eFe(e){const t={},r=b(e,["triggerTokens"]);r!=null&&C(t,["triggerTokens"],r);const n=b(e,["slidingWindow"]);return n!=null&&C(t,["slidingWindow"],Z3e(n)),t}function tFe(e){const t={},r=b(e,["proactiveAudio"]);return r!=null&&C(t,["proactiveAudio"],r),t}function rFe(e,t){const r={},n=b(e,["generationConfig"]);t!==void 0&&n!=null&&C(t,["setup","generationConfig"],n);const a=b(e,["responseModalities"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","responseModalities"],a);const i=b(e,["temperature"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","temperature"],i);const s=b(e,["topP"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","topP"],s);const o=b(e,["topK"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","topK"],o);const l=b(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=b(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=b(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const A=b(e,["speechConfig"]);t!==void 0&&A!=null&&C(t,["setup","generationConfig","speechConfig"],L3e(EP(A)));const h=b(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],h);const m=b(e,["systemInstruction"]);t!==void 0&&m!=null&&C(t,["setup","systemInstruction"],Q3e(Po(m)));const v=b(e,["tools"]);if(t!==void 0&&v!=null){let B=ix(v);Array.isArray(B)&&(B=B.map(D=>W3e(ax(D)))),C(t,["setup","tools"],B)}const g=b(e,["sessionResumption"]);t!==void 0&&g!=null&&C(t,["setup","sessionResumption"],Y3e(g));const y=b(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&C(t,["setup","inputAudioTranscription"],sQ());const w=b(e,["outputAudioTranscription"]);t!==void 0&&w!=null&&C(t,["setup","outputAudioTranscription"],sQ());const T=b(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&C(t,["setup","realtimeInputConfig"],J3e(T));const N=b(e,["contextWindowCompression"]);t!==void 0&&N!=null&&C(t,["setup","contextWindowCompression"],eFe(N));const F=b(e,["proactivity"]);return t!==void 0&&F!=null&&C(t,["setup","proactivity"],tFe(F)),r}function nFe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["setup","model"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],rFe(a,r)),r}function aFe(){return{}}function iFe(){return{}}function sFe(e){const t={},r=b(e,["media"]);r!=null&&C(t,["mediaChunks"],zZ(r));const n=b(e,["audio"]);n!=null&&C(t,["audio"],qZ(n));const a=b(e,["audioStreamEnd"]);a!=null&&C(t,["audioStreamEnd"],a);const i=b(e,["video"]);i!=null&&C(t,["video"],GZ(i));const s=b(e,["text"]);return s!=null&&C(t,["text"],s),b(e,["activityStart"])!=null&&C(t,["activityStart"],aFe()),b(e,["activityEnd"])!=null&&C(t,["activityEnd"],iFe()),t}function oee(e){const t={},r=b(e,["text"]);r!=null&&C(t,["text"],r);const n=b(e,["weight"]);return n!=null&&C(t,["weight"],n),t}function oFe(e){const t={},r=b(e,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>oee(a))),C(t,["weightedPrompts"],n)}return t}function lee(e){const t={},r=b(e,["temperature"]);r!=null&&C(t,["temperature"],r);const n=b(e,["topK"]);n!=null&&C(t,["topK"],n);const a=b(e,["seed"]);a!=null&&C(t,["seed"],a);const i=b(e,["guidance"]);i!=null&&C(t,["guidance"],i);const s=b(e,["bpm"]);s!=null&&C(t,["bpm"],s);const o=b(e,["density"]);o!=null&&C(t,["density"],o);const l=b(e,["brightness"]);l!=null&&C(t,["brightness"],l);const c=b(e,["scale"]);c!=null&&C(t,["scale"],c);const u=b(e,["muteBass"]);u!=null&&C(t,["muteBass"],u);const A=b(e,["muteDrums"]);A!=null&&C(t,["muteDrums"],A);const h=b(e,["onlyBassAndDrums"]);return h!=null&&C(t,["onlyBassAndDrums"],h),t}function lFe(e){const t={},r=b(e,["musicGenerationConfig"]);return r!=null&&C(t,["musicGenerationConfig"],lee(r)),t}function cee(e){const t={},r=b(e,["model"]);return r!=null&&C(t,["model"],r),t}function uee(e){const t={},r=b(e,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>oee(a))),C(t,["weightedPrompts"],n)}return t}function w3(e){const t={},r=b(e,["setup"]);r!=null&&C(t,["setup"],cee(r));const n=b(e,["clientContent"]);n!=null&&C(t,["clientContent"],uee(n));const a=b(e,["musicGenerationConfig"]);a!=null&&C(t,["musicGenerationConfig"],lee(a));const i=b(e,["playbackControl"]);return i!=null&&C(t,["playbackControl"],i),t}function cFe(e){const t={},r=b(e,["voiceName"]);return r!=null&&C(t,["voiceName"],r),t}function uFe(e){const t={},r=b(e,["prebuiltVoiceConfig"]);return r!=null&&C(t,["prebuiltVoiceConfig"],cFe(r)),t}function dFe(e){const t={},r=b(e,["voiceConfig"]);if(r!=null&&C(t,["voiceConfig"],uFe(r)),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=b(e,["languageCode"]);return n!=null&&C(t,["languageCode"],n),t}function fFe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function AFe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["data"]);n!=null&&C(t,["data"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function hFe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function pFe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],fFe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],AFe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],hFe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function mFe(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>pFe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function gFe(e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=b(e,["description"]);r!=null&&C(t,["description"],r);const n=b(e,["name"]);n!=null&&C(t,["name"],n);const a=b(e,["parameters"]);a!=null&&C(t,["parameters"],a);const i=b(e,["parametersJsonSchema"]);i!=null&&C(t,["parametersJsonSchema"],i);const s=b(e,["response"]);s!=null&&C(t,["response"],s);const o=b(e,["responseJsonSchema"]);return o!=null&&C(t,["responseJsonSchema"],o),t}function vFe(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function xFe(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],vFe(r)),t}function yFe(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function bFe(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],yFe(r)),t}function wFe(){return{}}function CFe(e){const t={},r=b(e,["apiKeyString"]);return r!=null&&C(t,["apiKeyString"],r),t}function EFe(e){const t={},r=b(e,["apiKeyConfig"]);r!=null&&C(t,["apiKeyConfig"],CFe(r));const n=b(e,["authType"]);n!=null&&C(t,["authType"],n);const a=b(e,["googleServiceAccountConfig"]);a!=null&&C(t,["googleServiceAccountConfig"],a);const i=b(e,["httpBasicAuthConfig"]);i!=null&&C(t,["httpBasicAuthConfig"],i);const s=b(e,["oauthConfig"]);s!=null&&C(t,["oauthConfig"],s);const o=b(e,["oidcConfig"]);return o!=null&&C(t,["oidcConfig"],o),t}function _Fe(e){const t={},r=b(e,["authConfig"]);return r!=null&&C(t,["authConfig"],EFe(r)),t}function SFe(){return{}}function TFe(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let A=r;Array.isArray(A)&&(A=A.map(h=>gFe(h))),C(t,["functionDeclarations"],A)}const n=b(e,["retrieval"]);n!=null&&C(t,["retrieval"],n);const a=b(e,["googleSearch"]);a!=null&&C(t,["googleSearch"],xFe(a));const i=b(e,["googleSearchRetrieval"]);i!=null&&C(t,["googleSearchRetrieval"],bFe(i)),b(e,["enterpriseWebSearch"])!=null&&C(t,["enterpriseWebSearch"],wFe());const o=b(e,["googleMaps"]);o!=null&&C(t,["googleMaps"],_Fe(o)),b(e,["urlContext"])!=null&&C(t,["urlContext"],SFe());const c=b(e,["codeExecution"]);c!=null&&C(t,["codeExecution"],c);const u=b(e,["computerUse"]);return u!=null&&C(t,["computerUse"],u),t}function NFe(e){const t={},r=b(e,["handle"]);r!=null&&C(t,["handle"],r);const n=b(e,["transparent"]);return n!=null&&C(t,["transparent"],n),t}function oQ(){return{}}function BFe(e){const t={},r=b(e,["disabled"]);r!=null&&C(t,["disabled"],r);const n=b(e,["startOfSpeechSensitivity"]);n!=null&&C(t,["startOfSpeechSensitivity"],n);const a=b(e,["endOfSpeechSensitivity"]);a!=null&&C(t,["endOfSpeechSensitivity"],a);const i=b(e,["prefixPaddingMs"]);i!=null&&C(t,["prefixPaddingMs"],i);const s=b(e,["silenceDurationMs"]);return s!=null&&C(t,["silenceDurationMs"],s),t}function kFe(e){const t={},r=b(e,["automaticActivityDetection"]);r!=null&&C(t,["automaticActivityDetection"],BFe(r));const n=b(e,["activityHandling"]);n!=null&&C(t,["activityHandling"],n);const a=b(e,["turnCoverage"]);return a!=null&&C(t,["turnCoverage"],a),t}function IFe(e){const t={},r=b(e,["targetTokens"]);return r!=null&&C(t,["targetTokens"],r),t}function FFe(e){const t={},r=b(e,["triggerTokens"]);r!=null&&C(t,["triggerTokens"],r);const n=b(e,["slidingWindow"]);return n!=null&&C(t,["slidingWindow"],IFe(n)),t}function DFe(e){const t={},r=b(e,["proactiveAudio"]);return r!=null&&C(t,["proactiveAudio"],r),t}function RFe(e,t){const r={},n=b(e,["generationConfig"]);t!==void 0&&n!=null&&C(t,["setup","generationConfig"],n);const a=b(e,["responseModalities"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","responseModalities"],a);const i=b(e,["temperature"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","temperature"],i);const s=b(e,["topP"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","topP"],s);const o=b(e,["topK"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","topK"],o);const l=b(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=b(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=b(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const A=b(e,["speechConfig"]);t!==void 0&&A!=null&&C(t,["setup","generationConfig","speechConfig"],dFe(EP(A)));const h=b(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],h);const m=b(e,["systemInstruction"]);t!==void 0&&m!=null&&C(t,["setup","systemInstruction"],mFe(Po(m)));const v=b(e,["tools"]);if(t!==void 0&&v!=null){let B=ix(v);Array.isArray(B)&&(B=B.map(D=>TFe(ax(D)))),C(t,["setup","tools"],B)}const g=b(e,["sessionResumption"]);t!==void 0&&g!=null&&C(t,["setup","sessionResumption"],NFe(g));const y=b(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&C(t,["setup","inputAudioTranscription"],oQ());const w=b(e,["outputAudioTranscription"]);t!==void 0&&w!=null&&C(t,["setup","outputAudioTranscription"],oQ());const T=b(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&C(t,["setup","realtimeInputConfig"],kFe(T));const N=b(e,["contextWindowCompression"]);t!==void 0&&N!=null&&C(t,["setup","contextWindowCompression"],FFe(N));const F=b(e,["proactivity"]);return t!==void 0&&F!=null&&C(t,["setup","proactivity"],DFe(F)),r}function PFe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["setup","model"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],RFe(a,r)),r}function MFe(){return{}}function LFe(){return{}}function OFe(e){const t={},r=b(e,["media"]);r!=null&&C(t,["mediaChunks"],zZ(r));const n=b(e,["audio"]);n!=null&&C(t,["audio"],qZ(n));const a=b(e,["audioStreamEnd"]);a!=null&&C(t,["audioStreamEnd"],a);const i=b(e,["video"]);i!=null&&C(t,["video"],GZ(i));const s=b(e,["text"]);return s!=null&&C(t,["text"],s),b(e,["activityStart"])!=null&&C(t,["activityStart"],MFe()),b(e,["activityEnd"])!=null&&C(t,["activityEnd"],LFe()),t}function UFe(){return{}}function jFe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function HFe(e){const t={},r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function QFe(e){const t={},r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function VFe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],jFe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],HFe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],QFe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function zFe(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>VFe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function lQ(e){const t={},r=b(e,["text"]);r!=null&&C(t,["text"],r);const n=b(e,["finished"]);return n!=null&&C(t,["finished"],n),t}function GFe(e){const t={},r=b(e,["retrievedUrl"]);r!=null&&C(t,["retrievedUrl"],r);const n=b(e,["urlRetrievalStatus"]);return n!=null&&C(t,["urlRetrievalStatus"],n),t}function qFe(e){const t={},r=b(e,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>GFe(a))),C(t,["urlMetadata"],n)}return t}function $Fe(e){const t={},r=b(e,["modelTurn"]);r!=null&&C(t,["modelTurn"],zFe(r));const n=b(e,["turnComplete"]);n!=null&&C(t,["turnComplete"],n);const a=b(e,["interrupted"]);a!=null&&C(t,["interrupted"],a);const i=b(e,["groundingMetadata"]);i!=null&&C(t,["groundingMetadata"],i);const s=b(e,["generationComplete"]);s!=null&&C(t,["generationComplete"],s);const o=b(e,["inputTranscription"]);o!=null&&C(t,["inputTranscription"],lQ(o));const l=b(e,["outputTranscription"]);l!=null&&C(t,["outputTranscription"],lQ(l));const c=b(e,["urlContextMetadata"]);return c!=null&&C(t,["urlContextMetadata"],qFe(c)),t}function KFe(e){const t={},r=b(e,["id"]);r!=null&&C(t,["id"],r);const n=b(e,["args"]);n!=null&&C(t,["args"],n);const a=b(e,["name"]);return a!=null&&C(t,["name"],a),t}function WFe(e){const t={},r=b(e,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>KFe(a))),C(t,["functionCalls"],n)}return t}function YFe(e){const t={},r=b(e,["ids"]);return r!=null&&C(t,["ids"],r),t}function M2(e){const t={},r=b(e,["modality"]);r!=null&&C(t,["modality"],r);const n=b(e,["tokenCount"]);return n!=null&&C(t,["tokenCount"],n),t}function XFe(e){const t={},r=b(e,["promptTokenCount"]);r!=null&&C(t,["promptTokenCount"],r);const n=b(e,["cachedContentTokenCount"]);n!=null&&C(t,["cachedContentTokenCount"],n);const a=b(e,["responseTokenCount"]);a!=null&&C(t,["responseTokenCount"],a);const i=b(e,["toolUsePromptTokenCount"]);i!=null&&C(t,["toolUsePromptTokenCount"],i);const s=b(e,["thoughtsTokenCount"]);s!=null&&C(t,["thoughtsTokenCount"],s);const o=b(e,["totalTokenCount"]);o!=null&&C(t,["totalTokenCount"],o);const l=b(e,["promptTokensDetails"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>M2(m))),C(t,["promptTokensDetails"],h)}const c=b(e,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>M2(m))),C(t,["cacheTokensDetails"],h)}const u=b(e,["responseTokensDetails"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>M2(m))),C(t,["responseTokensDetails"],h)}const A=b(e,["toolUsePromptTokensDetails"]);if(A!=null){let h=A;Array.isArray(h)&&(h=h.map(m=>M2(m))),C(t,["toolUsePromptTokensDetails"],h)}return t}function JFe(e){const t={},r=b(e,["timeLeft"]);return r!=null&&C(t,["timeLeft"],r),t}function ZFe(e){const t={},r=b(e,["newHandle"]);r!=null&&C(t,["newHandle"],r);const n=b(e,["resumable"]);n!=null&&C(t,["resumable"],n);const a=b(e,["lastConsumedClientMessageIndex"]);return a!=null&&C(t,["lastConsumedClientMessageIndex"],a),t}function eDe(e){const t={};b(e,["setupComplete"])!=null&&C(t,["setupComplete"],UFe());const n=b(e,["serverContent"]);n!=null&&C(t,["serverContent"],$Fe(n));const a=b(e,["toolCall"]);a!=null&&C(t,["toolCall"],WFe(a));const i=b(e,["toolCallCancellation"]);i!=null&&C(t,["toolCallCancellation"],YFe(i));const s=b(e,["usageMetadata"]);s!=null&&C(t,["usageMetadata"],XFe(s));const o=b(e,["goAway"]);o!=null&&C(t,["goAway"],JFe(o));const l=b(e,["sessionResumptionUpdate"]);return l!=null&&C(t,["sessionResumptionUpdate"],ZFe(l)),t}function tDe(){return{}}function rDe(e){const t={},r=b(e,["text"]);r!=null&&C(t,["text"],r);const n=b(e,["weight"]);return n!=null&&C(t,["weight"],n),t}function nDe(e){const t={},r=b(e,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>rDe(a))),C(t,["weightedPrompts"],n)}return t}function aDe(e){const t={},r=b(e,["temperature"]);r!=null&&C(t,["temperature"],r);const n=b(e,["topK"]);n!=null&&C(t,["topK"],n);const a=b(e,["seed"]);a!=null&&C(t,["seed"],a);const i=b(e,["guidance"]);i!=null&&C(t,["guidance"],i);const s=b(e,["bpm"]);s!=null&&C(t,["bpm"],s);const o=b(e,["density"]);o!=null&&C(t,["density"],o);const l=b(e,["brightness"]);l!=null&&C(t,["brightness"],l);const c=b(e,["scale"]);c!=null&&C(t,["scale"],c);const u=b(e,["muteBass"]);u!=null&&C(t,["muteBass"],u);const A=b(e,["muteDrums"]);A!=null&&C(t,["muteDrums"],A);const h=b(e,["onlyBassAndDrums"]);return h!=null&&C(t,["onlyBassAndDrums"],h),t}function iDe(e){const t={},r=b(e,["clientContent"]);r!=null&&C(t,["clientContent"],nDe(r));const n=b(e,["musicGenerationConfig"]);return n!=null&&C(t,["musicGenerationConfig"],aDe(n)),t}function sDe(e){const t={},r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);n!=null&&C(t,["mimeType"],n);const a=b(e,["sourceMetadata"]);return a!=null&&C(t,["sourceMetadata"],iDe(a)),t}function oDe(e){const t={},r=b(e,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>sDe(a))),C(t,["audioChunks"],n)}return t}function lDe(e){const t={},r=b(e,["text"]);r!=null&&C(t,["text"],r);const n=b(e,["filteredReason"]);return n!=null&&C(t,["filteredReason"],n),t}function cDe(e){const t={};b(e,["setupComplete"])!=null&&C(t,["setupComplete"],tDe());const n=b(e,["serverContent"]);n!=null&&C(t,["serverContent"],oDe(n));const a=b(e,["filteredPrompt"]);return a!=null&&C(t,["filteredPrompt"],lDe(a)),t}function uDe(e){const t={},r=b(e,["sessionId"]);return r!=null&&C(t,["sessionId"],r),t}function dDe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function fDe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["data"]);n!=null&&C(t,["data"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function ADe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function hDe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],dDe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],fDe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],ADe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function pDe(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>hDe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function cQ(e){const t={},r=b(e,["text"]);r!=null&&C(t,["text"],r);const n=b(e,["finished"]);return n!=null&&C(t,["finished"],n),t}function mDe(e){const t={},r=b(e,["modelTurn"]);r!=null&&C(t,["modelTurn"],pDe(r));const n=b(e,["turnComplete"]);n!=null&&C(t,["turnComplete"],n);const a=b(e,["interrupted"]);a!=null&&C(t,["interrupted"],a);const i=b(e,["groundingMetadata"]);i!=null&&C(t,["groundingMetadata"],i);const s=b(e,["generationComplete"]);s!=null&&C(t,["generationComplete"],s);const o=b(e,["inputTranscription"]);o!=null&&C(t,["inputTranscription"],cQ(o));const l=b(e,["outputTranscription"]);return l!=null&&C(t,["outputTranscription"],cQ(l)),t}function gDe(e){const t={},r=b(e,["args"]);r!=null&&C(t,["args"],r);const n=b(e,["name"]);return n!=null&&C(t,["name"],n),t}function vDe(e){const t={},r=b(e,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>gDe(a))),C(t,["functionCalls"],n)}return t}function xDe(e){const t={},r=b(e,["ids"]);return r!=null&&C(t,["ids"],r),t}function L2(e){const t={},r=b(e,["modality"]);r!=null&&C(t,["modality"],r);const n=b(e,["tokenCount"]);return n!=null&&C(t,["tokenCount"],n),t}function yDe(e){const t={},r=b(e,["promptTokenCount"]);r!=null&&C(t,["promptTokenCount"],r);const n=b(e,["cachedContentTokenCount"]);n!=null&&C(t,["cachedContentTokenCount"],n);const a=b(e,["candidatesTokenCount"]);a!=null&&C(t,["responseTokenCount"],a);const i=b(e,["toolUsePromptTokenCount"]);i!=null&&C(t,["toolUsePromptTokenCount"],i);const s=b(e,["thoughtsTokenCount"]);s!=null&&C(t,["thoughtsTokenCount"],s);const o=b(e,["totalTokenCount"]);o!=null&&C(t,["totalTokenCount"],o);const l=b(e,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(v=>L2(v))),C(t,["promptTokensDetails"],m)}const c=b(e,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(v=>L2(v))),C(t,["cacheTokensDetails"],m)}const u=b(e,["candidatesTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(v=>L2(v))),C(t,["responseTokensDetails"],m)}const A=b(e,["toolUsePromptTokensDetails"]);if(A!=null){let m=A;Array.isArray(m)&&(m=m.map(v=>L2(v))),C(t,["toolUsePromptTokensDetails"],m)}const h=b(e,["trafficType"]);return h!=null&&C(t,["trafficType"],h),t}function bDe(e){const t={},r=b(e,["timeLeft"]);return r!=null&&C(t,["timeLeft"],r),t}function wDe(e){const t={},r=b(e,["newHandle"]);r!=null&&C(t,["newHandle"],r);const n=b(e,["resumable"]);n!=null&&C(t,["resumable"],n);const a=b(e,["lastConsumedClientMessageIndex"]);return a!=null&&C(t,["lastConsumedClientMessageIndex"],a),t}function CDe(e){const t={},r=b(e,["setupComplete"]);r!=null&&C(t,["setupComplete"],uDe(r));const n=b(e,["serverContent"]);n!=null&&C(t,["serverContent"],mDe(n));const a=b(e,["toolCall"]);a!=null&&C(t,["toolCall"],vDe(a));const i=b(e,["toolCallCancellation"]);i!=null&&C(t,["toolCallCancellation"],xDe(i));const s=b(e,["usageMetadata"]);s!=null&&C(t,["usageMetadata"],yDe(s));const o=b(e,["goAway"]);o!=null&&C(t,["goAway"],bDe(o));const l=b(e,["sessionResumptionUpdate"]);return l!=null&&C(t,["sessionResumptionUpdate"],wDe(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EDe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function _De(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function SDe(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function TDe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],EDe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],_De(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],SDe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function bT(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>TDe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function NDe(e){const t={},r=b(e,["anyOf"]);r!=null&&C(t,["anyOf"],r);const n=b(e,["default"]);n!=null&&C(t,["default"],n);const a=b(e,["description"]);a!=null&&C(t,["description"],a);const i=b(e,["enum"]);i!=null&&C(t,["enum"],i);const s=b(e,["example"]);s!=null&&C(t,["example"],s);const o=b(e,["format"]);o!=null&&C(t,["format"],o);const l=b(e,["items"]);l!=null&&C(t,["items"],l);const c=b(e,["maxItems"]);c!=null&&C(t,["maxItems"],c);const u=b(e,["maxLength"]);u!=null&&C(t,["maxLength"],u);const A=b(e,["maxProperties"]);A!=null&&C(t,["maxProperties"],A);const h=b(e,["maximum"]);h!=null&&C(t,["maximum"],h);const m=b(e,["minItems"]);m!=null&&C(t,["minItems"],m);const v=b(e,["minLength"]);v!=null&&C(t,["minLength"],v);const g=b(e,["minProperties"]);g!=null&&C(t,["minProperties"],g);const y=b(e,["minimum"]);y!=null&&C(t,["minimum"],y);const w=b(e,["nullable"]);w!=null&&C(t,["nullable"],w);const T=b(e,["pattern"]);T!=null&&C(t,["pattern"],T);const N=b(e,["properties"]);N!=null&&C(t,["properties"],N);const F=b(e,["propertyOrdering"]);F!=null&&C(t,["propertyOrdering"],F);const B=b(e,["required"]);B!=null&&C(t,["required"],B);const D=b(e,["title"]);D!=null&&C(t,["title"],D);const E=b(e,["type"]);return E!=null&&C(t,["type"],E),t}function BDe(e){const t={};if(b(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(e,["category"]);r!=null&&C(t,["category"],r);const n=b(e,["threshold"]);return n!=null&&C(t,["threshold"],n),t}function kDe(e){const t={},r=b(e,["behavior"]);r!=null&&C(t,["behavior"],r);const n=b(e,["description"]);n!=null&&C(t,["description"],n);const a=b(e,["name"]);a!=null&&C(t,["name"],a);const i=b(e,["parameters"]);i!=null&&C(t,["parameters"],i);const s=b(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const o=b(e,["response"]);o!=null&&C(t,["response"],o);const l=b(e,["responseJsonSchema"]);return l!=null&&C(t,["responseJsonSchema"],l),t}function IDe(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function FDe(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],IDe(r)),t}function DDe(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function RDe(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],DDe(r)),t}function PDe(){return{}}function MDe(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>kDe(c))),C(t,["functionDeclarations"],l)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=b(e,["googleSearch"]);n!=null&&C(t,["googleSearch"],FDe(n));const a=b(e,["googleSearchRetrieval"]);if(a!=null&&C(t,["googleSearchRetrieval"],RDe(a)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&C(t,["urlContext"],PDe());const s=b(e,["codeExecution"]);s!=null&&C(t,["codeExecution"],s);const o=b(e,["computerUse"]);return o!=null&&C(t,["computerUse"],o),t}function LDe(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["allowedFunctionNames"]);return n!=null&&C(t,["allowedFunctionNames"],n),t}function ODe(e){const t={},r=b(e,["latitude"]);r!=null&&C(t,["latitude"],r);const n=b(e,["longitude"]);return n!=null&&C(t,["longitude"],n),t}function UDe(e){const t={},r=b(e,["latLng"]);r!=null&&C(t,["latLng"],ODe(r));const n=b(e,["languageCode"]);return n!=null&&C(t,["languageCode"],n),t}function jDe(e){const t={},r=b(e,["functionCallingConfig"]);r!=null&&C(t,["functionCallingConfig"],LDe(r));const n=b(e,["retrievalConfig"]);return n!=null&&C(t,["retrievalConfig"],UDe(n)),t}function HDe(e){const t={},r=b(e,["voiceName"]);return r!=null&&C(t,["voiceName"],r),t}function dee(e){const t={},r=b(e,["prebuiltVoiceConfig"]);return r!=null&&C(t,["prebuiltVoiceConfig"],HDe(r)),t}function QDe(e){const t={},r=b(e,["speaker"]);r!=null&&C(t,["speaker"],r);const n=b(e,["voiceConfig"]);return n!=null&&C(t,["voiceConfig"],dee(n)),t}function VDe(e){const t={},r=b(e,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>QDe(a))),C(t,["speakerVoiceConfigs"],n)}return t}function zDe(e){const t={},r=b(e,["voiceConfig"]);r!=null&&C(t,["voiceConfig"],dee(r));const n=b(e,["multiSpeakerVoiceConfig"]);n!=null&&C(t,["multiSpeakerVoiceConfig"],VDe(n));const a=b(e,["languageCode"]);return a!=null&&C(t,["languageCode"],a),t}function GDe(e){const t={},r=b(e,["includeThoughts"]);r!=null&&C(t,["includeThoughts"],r);const n=b(e,["thinkingBudget"]);return n!=null&&C(t,["thinkingBudget"],n),t}function qDe(e,t,r){const n={},a=b(t,["systemInstruction"]);r!==void 0&&a!=null&&C(r,["systemInstruction"],bT(Po(a)));const i=b(t,["temperature"]);i!=null&&C(n,["temperature"],i);const s=b(t,["topP"]);s!=null&&C(n,["topP"],s);const o=b(t,["topK"]);o!=null&&C(n,["topK"],o);const l=b(t,["candidateCount"]);l!=null&&C(n,["candidateCount"],l);const c=b(t,["maxOutputTokens"]);c!=null&&C(n,["maxOutputTokens"],c);const u=b(t,["stopSequences"]);u!=null&&C(n,["stopSequences"],u);const A=b(t,["responseLogprobs"]);A!=null&&C(n,["responseLogprobs"],A);const h=b(t,["logprobs"]);h!=null&&C(n,["logprobs"],h);const m=b(t,["presencePenalty"]);m!=null&&C(n,["presencePenalty"],m);const v=b(t,["frequencyPenalty"]);v!=null&&C(n,["frequencyPenalty"],v);const g=b(t,["seed"]);g!=null&&C(n,["seed"],g);const y=b(t,["responseMimeType"]);y!=null&&C(n,["responseMimeType"],y);const w=b(t,["responseSchema"]);w!=null&&C(n,["responseSchema"],NDe(wP(w)));const T=b(t,["responseJsonSchema"]);if(T!=null&&C(n,["responseJsonSchema"],T),b(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=b(t,["safetySettings"]);if(r!==void 0&&N!=null){let P=N;Array.isArray(P)&&(P=P.map(M=>BDe(M))),C(r,["safetySettings"],P)}const F=b(t,["tools"]);if(r!==void 0&&F!=null){let P=ix(F);Array.isArray(P)&&(P=P.map(M=>MDe(ax(M)))),C(r,["tools"],P)}const B=b(t,["toolConfig"]);if(r!==void 0&&B!=null&&C(r,["toolConfig"],jDe(B)),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=b(t,["cachedContent"]);r!==void 0&&D!=null&&C(r,["cachedContent"],PA(e,D));const E=b(t,["responseModalities"]);E!=null&&C(n,["responseModalities"],E);const S=b(t,["mediaResolution"]);S!=null&&C(n,["mediaResolution"],S);const k=b(t,["speechConfig"]);if(k!=null&&C(n,["speechConfig"],zDe(CP(k))),b(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=b(t,["thinkingConfig"]);return H!=null&&C(n,["thinkingConfig"],GDe(H)),n}function uQ(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["contents"]);if(a!=null){let s=uu(a);Array.isArray(s)&&(s=s.map(o=>bT(o))),C(r,["contents"],s)}const i=b(t,["config"]);return i!=null&&C(r,["generationConfig"],qDe(e,i,r)),r}function $De(e,t){const r={},n=b(e,["taskType"]);t!==void 0&&n!=null&&C(t,["requests[]","taskType"],n);const a=b(e,["title"]);t!==void 0&&a!=null&&C(t,["requests[]","title"],a);const i=b(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&C(t,["requests[]","outputDimensionality"],i),b(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function KDe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["contents"]);a!=null&&C(r,["requests[]","content"],KZ(e,a));const i=b(t,["config"]);i!=null&&C(r,["config"],$De(i,r));const s=b(t,["model"]);return s!==void 0&&C(r,["requests[]","model"],sa(e,s)),r}function WDe(e,t){const r={};if(b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=b(e,["numberOfImages"]);t!==void 0&&n!=null&&C(t,["parameters","sampleCount"],n);const a=b(e,["aspectRatio"]);t!==void 0&&a!=null&&C(t,["parameters","aspectRatio"],a);const i=b(e,["guidanceScale"]);if(t!==void 0&&i!=null&&C(t,["parameters","guidanceScale"],i),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=b(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&C(t,["parameters","safetySetting"],s);const o=b(e,["personGeneration"]);t!==void 0&&o!=null&&C(t,["parameters","personGeneration"],o);const l=b(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&C(t,["parameters","includeSafetyAttributes"],l);const c=b(e,["includeRaiReason"]);t!==void 0&&c!=null&&C(t,["parameters","includeRaiReason"],c);const u=b(e,["language"]);t!==void 0&&u!=null&&C(t,["parameters","language"],u);const A=b(e,["outputMimeType"]);t!==void 0&&A!=null&&C(t,["parameters","outputOptions","mimeType"],A);const h=b(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&C(t,["parameters","outputOptions","compressionQuality"],h),b(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(e,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(b(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function YDe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["prompt"]);a!=null&&C(r,["instances[0]","prompt"],a);const i=b(t,["config"]);return i!=null&&C(r,["config"],WDe(i,r)),r}function XDe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","name"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function JDe(e,t,r){const n={},a=b(t,["pageSize"]);r!==void 0&&a!=null&&C(r,["_query","pageSize"],a);const i=b(t,["pageToken"]);r!==void 0&&i!=null&&C(r,["_query","pageToken"],i);const s=b(t,["filter"]);r!==void 0&&s!=null&&C(r,["_query","filter"],s);const o=b(t,["queryBase"]);return r!==void 0&&o!=null&&C(r,["_url","models_url"],XZ(e,o)),n}function ZDe(e,t){const r={},n=b(t,["config"]);return n!=null&&C(r,["config"],JDe(e,n,r)),r}function eRe(e,t){const r={},n=b(e,["displayName"]);t!==void 0&&n!=null&&C(t,["displayName"],n);const a=b(e,["description"]);t!==void 0&&a!=null&&C(t,["description"],a);const i=b(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&C(t,["defaultCheckpointId"],i),r}function tRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","name"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],eRe(a,r)),r}function rRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","name"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function nRe(e){const t={};if(b(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function aRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["contents"]);if(a!=null){let s=uu(a);Array.isArray(s)&&(s=s.map(o=>bT(o))),C(r,["contents"],s)}const i=b(t,["config"]);return i!=null&&C(r,["config"],nRe(i)),r}function iRe(e){const t={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=b(e,["imageBytes"]);r!=null&&C(t,["bytesBase64Encoded"],Cm(r));const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function sRe(e,t){const r={},n=b(e,["numberOfVideos"]);if(t!==void 0&&n!=null&&C(t,["parameters","sampleCount"],n),b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=b(e,["durationSeconds"]);if(t!==void 0&&a!=null&&C(t,["parameters","durationSeconds"],a),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=b(e,["aspectRatio"]);if(t!==void 0&&i!=null&&C(t,["parameters","aspectRatio"],i),b(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const s=b(e,["personGeneration"]);if(t!==void 0&&s!=null&&C(t,["parameters","personGeneration"],s),b(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=b(e,["negativePrompt"]);t!==void 0&&o!=null&&C(t,["parameters","negativePrompt"],o);const l=b(e,["enhancePrompt"]);if(t!==void 0&&l!=null&&C(t,["parameters","enhancePrompt"],l),b(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(b(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(b(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function oRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["prompt"]);a!=null&&C(r,["instances[0]","prompt"],a);const i=b(t,["image"]);if(i!=null&&C(r,["instances[0]","image"],iRe(i)),b(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=b(t,["config"]);return s!=null&&C(r,["config"],sRe(s,r)),r}function lRe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function cRe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["data"]);n!=null&&C(t,["data"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function uRe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function dRe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],lRe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],cRe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],uRe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function ox(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>dRe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function fRe(e){const t={},r=b(e,["anyOf"]);r!=null&&C(t,["anyOf"],r);const n=b(e,["default"]);n!=null&&C(t,["default"],n);const a=b(e,["description"]);a!=null&&C(t,["description"],a);const i=b(e,["enum"]);i!=null&&C(t,["enum"],i);const s=b(e,["example"]);s!=null&&C(t,["example"],s);const o=b(e,["format"]);o!=null&&C(t,["format"],o);const l=b(e,["items"]);l!=null&&C(t,["items"],l);const c=b(e,["maxItems"]);c!=null&&C(t,["maxItems"],c);const u=b(e,["maxLength"]);u!=null&&C(t,["maxLength"],u);const A=b(e,["maxProperties"]);A!=null&&C(t,["maxProperties"],A);const h=b(e,["maximum"]);h!=null&&C(t,["maximum"],h);const m=b(e,["minItems"]);m!=null&&C(t,["minItems"],m);const v=b(e,["minLength"]);v!=null&&C(t,["minLength"],v);const g=b(e,["minProperties"]);g!=null&&C(t,["minProperties"],g);const y=b(e,["minimum"]);y!=null&&C(t,["minimum"],y);const w=b(e,["nullable"]);w!=null&&C(t,["nullable"],w);const T=b(e,["pattern"]);T!=null&&C(t,["pattern"],T);const N=b(e,["properties"]);N!=null&&C(t,["properties"],N);const F=b(e,["propertyOrdering"]);F!=null&&C(t,["propertyOrdering"],F);const B=b(e,["required"]);B!=null&&C(t,["required"],B);const D=b(e,["title"]);D!=null&&C(t,["title"],D);const E=b(e,["type"]);return E!=null&&C(t,["type"],E),t}function ARe(e){const t={},r=b(e,["featureSelectionPreference"]);return r!=null&&C(t,["featureSelectionPreference"],r),t}function hRe(e){const t={},r=b(e,["method"]);r!=null&&C(t,["method"],r);const n=b(e,["category"]);n!=null&&C(t,["category"],n);const a=b(e,["threshold"]);return a!=null&&C(t,["threshold"],a),t}function pRe(e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=b(e,["description"]);r!=null&&C(t,["description"],r);const n=b(e,["name"]);n!=null&&C(t,["name"],n);const a=b(e,["parameters"]);a!=null&&C(t,["parameters"],a);const i=b(e,["parametersJsonSchema"]);i!=null&&C(t,["parametersJsonSchema"],i);const s=b(e,["response"]);s!=null&&C(t,["response"],s);const o=b(e,["responseJsonSchema"]);return o!=null&&C(t,["responseJsonSchema"],o),t}function mRe(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function gRe(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],mRe(r)),t}function vRe(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function xRe(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],vRe(r)),t}function yRe(){return{}}function bRe(e){const t={},r=b(e,["apiKeyString"]);return r!=null&&C(t,["apiKeyString"],r),t}function wRe(e){const t={},r=b(e,["apiKeyConfig"]);r!=null&&C(t,["apiKeyConfig"],bRe(r));const n=b(e,["authType"]);n!=null&&C(t,["authType"],n);const a=b(e,["googleServiceAccountConfig"]);a!=null&&C(t,["googleServiceAccountConfig"],a);const i=b(e,["httpBasicAuthConfig"]);i!=null&&C(t,["httpBasicAuthConfig"],i);const s=b(e,["oauthConfig"]);s!=null&&C(t,["oauthConfig"],s);const o=b(e,["oidcConfig"]);return o!=null&&C(t,["oidcConfig"],o),t}function CRe(e){const t={},r=b(e,["authConfig"]);return r!=null&&C(t,["authConfig"],wRe(r)),t}function ERe(){return{}}function fee(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let A=r;Array.isArray(A)&&(A=A.map(h=>pRe(h))),C(t,["functionDeclarations"],A)}const n=b(e,["retrieval"]);n!=null&&C(t,["retrieval"],n);const a=b(e,["googleSearch"]);a!=null&&C(t,["googleSearch"],gRe(a));const i=b(e,["googleSearchRetrieval"]);i!=null&&C(t,["googleSearchRetrieval"],xRe(i)),b(e,["enterpriseWebSearch"])!=null&&C(t,["enterpriseWebSearch"],yRe());const o=b(e,["googleMaps"]);o!=null&&C(t,["googleMaps"],CRe(o)),b(e,["urlContext"])!=null&&C(t,["urlContext"],ERe());const c=b(e,["codeExecution"]);c!=null&&C(t,["codeExecution"],c);const u=b(e,["computerUse"]);return u!=null&&C(t,["computerUse"],u),t}function _Re(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["allowedFunctionNames"]);return n!=null&&C(t,["allowedFunctionNames"],n),t}function SRe(e){const t={},r=b(e,["latitude"]);r!=null&&C(t,["latitude"],r);const n=b(e,["longitude"]);return n!=null&&C(t,["longitude"],n),t}function TRe(e){const t={},r=b(e,["latLng"]);r!=null&&C(t,["latLng"],SRe(r));const n=b(e,["languageCode"]);return n!=null&&C(t,["languageCode"],n),t}function NRe(e){const t={},r=b(e,["functionCallingConfig"]);r!=null&&C(t,["functionCallingConfig"],_Re(r));const n=b(e,["retrievalConfig"]);return n!=null&&C(t,["retrievalConfig"],TRe(n)),t}function BRe(e){const t={},r=b(e,["voiceName"]);return r!=null&&C(t,["voiceName"],r),t}function kRe(e){const t={},r=b(e,["prebuiltVoiceConfig"]);return r!=null&&C(t,["prebuiltVoiceConfig"],BRe(r)),t}function IRe(e){const t={},r=b(e,["voiceConfig"]);if(r!=null&&C(t,["voiceConfig"],kRe(r)),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=b(e,["languageCode"]);return n!=null&&C(t,["languageCode"],n),t}function FRe(e){const t={},r=b(e,["includeThoughts"]);r!=null&&C(t,["includeThoughts"],r);const n=b(e,["thinkingBudget"]);return n!=null&&C(t,["thinkingBudget"],n),t}function DRe(e,t,r){const n={},a=b(t,["systemInstruction"]);r!==void 0&&a!=null&&C(r,["systemInstruction"],ox(Po(a)));const i=b(t,["temperature"]);i!=null&&C(n,["temperature"],i);const s=b(t,["topP"]);s!=null&&C(n,["topP"],s);const o=b(t,["topK"]);o!=null&&C(n,["topK"],o);const l=b(t,["candidateCount"]);l!=null&&C(n,["candidateCount"],l);const c=b(t,["maxOutputTokens"]);c!=null&&C(n,["maxOutputTokens"],c);const u=b(t,["stopSequences"]);u!=null&&C(n,["stopSequences"],u);const A=b(t,["responseLogprobs"]);A!=null&&C(n,["responseLogprobs"],A);const h=b(t,["logprobs"]);h!=null&&C(n,["logprobs"],h);const m=b(t,["presencePenalty"]);m!=null&&C(n,["presencePenalty"],m);const v=b(t,["frequencyPenalty"]);v!=null&&C(n,["frequencyPenalty"],v);const g=b(t,["seed"]);g!=null&&C(n,["seed"],g);const y=b(t,["responseMimeType"]);y!=null&&C(n,["responseMimeType"],y);const w=b(t,["responseSchema"]);w!=null&&C(n,["responseSchema"],fRe(wP(w)));const T=b(t,["responseJsonSchema"]);T!=null&&C(n,["responseJsonSchema"],T);const N=b(t,["routingConfig"]);N!=null&&C(n,["routingConfig"],N);const F=b(t,["modelSelectionConfig"]);F!=null&&C(n,["modelConfig"],ARe(F));const B=b(t,["safetySettings"]);if(r!==void 0&&B!=null){let te=B;Array.isArray(te)&&(te=te.map(W=>hRe(W))),C(r,["safetySettings"],te)}const D=b(t,["tools"]);if(r!==void 0&&D!=null){let te=ix(D);Array.isArray(te)&&(te=te.map(W=>fee(ax(W)))),C(r,["tools"],te)}const E=b(t,["toolConfig"]);r!==void 0&&E!=null&&C(r,["toolConfig"],NRe(E));const S=b(t,["labels"]);r!==void 0&&S!=null&&C(r,["labels"],S);const k=b(t,["cachedContent"]);r!==void 0&&k!=null&&C(r,["cachedContent"],PA(e,k));const H=b(t,["responseModalities"]);H!=null&&C(n,["responseModalities"],H);const P=b(t,["mediaResolution"]);P!=null&&C(n,["mediaResolution"],P);const M=b(t,["speechConfig"]);M!=null&&C(n,["speechConfig"],IRe(CP(M)));const Q=b(t,["audioTimestamp"]);Q!=null&&C(n,["audioTimestamp"],Q);const V=b(t,["thinkingConfig"]);return V!=null&&C(n,["thinkingConfig"],FRe(V)),n}function dQ(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["contents"]);if(a!=null){let s=uu(a);Array.isArray(s)&&(s=s.map(o=>ox(o))),C(r,["contents"],s)}const i=b(t,["config"]);return i!=null&&C(r,["generationConfig"],DRe(e,i,r)),r}function RRe(e,t){const r={},n=b(e,["taskType"]);t!==void 0&&n!=null&&C(t,["instances[]","task_type"],n);const a=b(e,["title"]);t!==void 0&&a!=null&&C(t,["instances[]","title"],a);const i=b(e,["outputDimensionality"]);t!==void 0&&i!=null&&C(t,["parameters","outputDimensionality"],i);const s=b(e,["mimeType"]);t!==void 0&&s!=null&&C(t,["instances[]","mimeType"],s);const o=b(e,["autoTruncate"]);return t!==void 0&&o!=null&&C(t,["parameters","autoTruncate"],o),r}function PRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["contents"]);a!=null&&C(r,["instances[]","content"],KZ(e,a));const i=b(t,["config"]);return i!=null&&C(r,["config"],RRe(i,r)),r}function MRe(e,t){const r={},n=b(e,["outputGcsUri"]);t!==void 0&&n!=null&&C(t,["parameters","storageUri"],n);const a=b(e,["negativePrompt"]);t!==void 0&&a!=null&&C(t,["parameters","negativePrompt"],a);const i=b(e,["numberOfImages"]);t!==void 0&&i!=null&&C(t,["parameters","sampleCount"],i);const s=b(e,["aspectRatio"]);t!==void 0&&s!=null&&C(t,["parameters","aspectRatio"],s);const o=b(e,["guidanceScale"]);t!==void 0&&o!=null&&C(t,["parameters","guidanceScale"],o);const l=b(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=b(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=b(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const A=b(e,["includeSafetyAttributes"]);t!==void 0&&A!=null&&C(t,["parameters","includeSafetyAttributes"],A);const h=b(e,["includeRaiReason"]);t!==void 0&&h!=null&&C(t,["parameters","includeRaiReason"],h);const m=b(e,["language"]);t!==void 0&&m!=null&&C(t,["parameters","language"],m);const v=b(e,["outputMimeType"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","mimeType"],v);const g=b(e,["outputCompressionQuality"]);t!==void 0&&g!=null&&C(t,["parameters","outputOptions","compressionQuality"],g);const y=b(e,["addWatermark"]);t!==void 0&&y!=null&&C(t,["parameters","addWatermark"],y);const w=b(e,["imageSize"]);t!==void 0&&w!=null&&C(t,["parameters","sampleImageSize"],w);const T=b(e,["enhancePrompt"]);return t!==void 0&&T!=null&&C(t,["parameters","enhancePrompt"],T),r}function LRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["prompt"]);a!=null&&C(r,["instances[0]","prompt"],a);const i=b(t,["config"]);return i!=null&&C(r,["config"],MRe(i,r)),r}function wT(e){const t={},r=b(e,["gcsUri"]);r!=null&&C(t,["gcsUri"],r);const n=b(e,["imageBytes"]);n!=null&&C(t,["bytesBase64Encoded"],Cm(n));const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function ORe(e){const t={},r=b(e,["maskMode"]);r!=null&&C(t,["maskMode"],r);const n=b(e,["segmentationClasses"]);n!=null&&C(t,["maskClasses"],n);const a=b(e,["maskDilation"]);return a!=null&&C(t,["dilation"],a),t}function URe(e){const t={},r=b(e,["controlType"]);r!=null&&C(t,["controlType"],r);const n=b(e,["enableControlImageComputation"]);return n!=null&&C(t,["computeControl"],n),t}function jRe(e){const t={},r=b(e,["styleDescription"]);return r!=null&&C(t,["styleDescription"],r),t}function HRe(e){const t={},r=b(e,["subjectType"]);r!=null&&C(t,["subjectType"],r);const n=b(e,["subjectDescription"]);return n!=null&&C(t,["subjectDescription"],n),t}function QRe(e){const t={},r=b(e,["referenceImage"]);r!=null&&C(t,["referenceImage"],wT(r));const n=b(e,["referenceId"]);n!=null&&C(t,["referenceId"],n);const a=b(e,["referenceType"]);a!=null&&C(t,["referenceType"],a);const i=b(e,["maskImageConfig"]);i!=null&&C(t,["maskImageConfig"],ORe(i));const s=b(e,["controlImageConfig"]);s!=null&&C(t,["controlImageConfig"],URe(s));const o=b(e,["styleImageConfig"]);o!=null&&C(t,["styleImageConfig"],jRe(o));const l=b(e,["subjectImageConfig"]);return l!=null&&C(t,["subjectImageConfig"],HRe(l)),t}function VRe(e,t){const r={},n=b(e,["outputGcsUri"]);t!==void 0&&n!=null&&C(t,["parameters","storageUri"],n);const a=b(e,["negativePrompt"]);t!==void 0&&a!=null&&C(t,["parameters","negativePrompt"],a);const i=b(e,["numberOfImages"]);t!==void 0&&i!=null&&C(t,["parameters","sampleCount"],i);const s=b(e,["aspectRatio"]);t!==void 0&&s!=null&&C(t,["parameters","aspectRatio"],s);const o=b(e,["guidanceScale"]);t!==void 0&&o!=null&&C(t,["parameters","guidanceScale"],o);const l=b(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=b(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=b(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const A=b(e,["includeSafetyAttributes"]);t!==void 0&&A!=null&&C(t,["parameters","includeSafetyAttributes"],A);const h=b(e,["includeRaiReason"]);t!==void 0&&h!=null&&C(t,["parameters","includeRaiReason"],h);const m=b(e,["language"]);t!==void 0&&m!=null&&C(t,["parameters","language"],m);const v=b(e,["outputMimeType"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","mimeType"],v);const g=b(e,["outputCompressionQuality"]);t!==void 0&&g!=null&&C(t,["parameters","outputOptions","compressionQuality"],g);const y=b(e,["addWatermark"]);t!==void 0&&y!=null&&C(t,["parameters","addWatermark"],y);const w=b(e,["editMode"]);t!==void 0&&w!=null&&C(t,["parameters","editMode"],w);const T=b(e,["baseSteps"]);return t!==void 0&&T!=null&&C(t,["parameters","editConfig","baseSteps"],T),r}function zRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["prompt"]);a!=null&&C(r,["instances[0]","prompt"],a);const i=b(t,["referenceImages"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>QRe(l))),C(r,["instances[0]","referenceImages"],o)}const s=b(t,["config"]);return s!=null&&C(r,["config"],VRe(s,r)),r}function GRe(e,t){const r={},n=b(e,["includeRaiReason"]);t!==void 0&&n!=null&&C(t,["parameters","includeRaiReason"],n);const a=b(e,["outputMimeType"]);t!==void 0&&a!=null&&C(t,["parameters","outputOptions","mimeType"],a);const i=b(e,["outputCompressionQuality"]);t!==void 0&&i!=null&&C(t,["parameters","outputOptions","compressionQuality"],i);const s=b(e,["enhanceInputImage"]);t!==void 0&&s!=null&&C(t,["parameters","upscaleConfig","enhanceInputImage"],s);const o=b(e,["imagePreservationFactor"]);t!==void 0&&o!=null&&C(t,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=b(e,["numberOfImages"]);t!==void 0&&l!=null&&C(t,["parameters","sampleCount"],l);const c=b(e,["mode"]);return t!==void 0&&c!=null&&C(t,["parameters","mode"],c),r}function qRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["image"]);a!=null&&C(r,["instances[0]","image"],wT(a));const i=b(t,["upscaleFactor"]);i!=null&&C(r,["parameters","upscaleConfig","upscaleFactor"],i);const s=b(t,["config"]);return s!=null&&C(r,["config"],GRe(s,r)),r}function $Re(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","name"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function KRe(e,t,r){const n={},a=b(t,["pageSize"]);r!==void 0&&a!=null&&C(r,["_query","pageSize"],a);const i=b(t,["pageToken"]);r!==void 0&&i!=null&&C(r,["_query","pageToken"],i);const s=b(t,["filter"]);r!==void 0&&s!=null&&C(r,["_query","filter"],s);const o=b(t,["queryBase"]);return r!==void 0&&o!=null&&C(r,["_url","models_url"],XZ(e,o)),n}function WRe(e,t){const r={},n=b(t,["config"]);return n!=null&&C(r,["config"],KRe(e,n,r)),r}function YRe(e,t){const r={},n=b(e,["displayName"]);t!==void 0&&n!=null&&C(t,["displayName"],n);const a=b(e,["description"]);t!==void 0&&a!=null&&C(t,["description"],a);const i=b(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&C(t,["defaultCheckpointId"],i),r}function XRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],YRe(a,r)),r}function JRe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","name"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],a),r}function ZRe(e,t){const r={},n=b(e,["systemInstruction"]);t!==void 0&&n!=null&&C(t,["systemInstruction"],ox(Po(n)));const a=b(e,["tools"]);if(t!==void 0&&a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>fee(o))),C(t,["tools"],s)}const i=b(e,["generationConfig"]);return t!==void 0&&i!=null&&C(t,["generationConfig"],i),r}function ePe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["contents"]);if(a!=null){let s=uu(a);Array.isArray(s)&&(s=s.map(o=>ox(o))),C(r,["contents"],s)}const i=b(t,["config"]);return i!=null&&C(r,["config"],ZRe(i,r)),r}function tPe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["contents"]);if(a!=null){let s=uu(a);Array.isArray(s)&&(s=s.map(o=>ox(o))),C(r,["contents"],s)}const i=b(t,["config"]);return i!=null&&C(r,["config"],i),r}function rPe(e){const t={},r=b(e,["uri"]);r!=null&&C(t,["gcsUri"],r);const n=b(e,["videoBytes"]);n!=null&&C(t,["bytesBase64Encoded"],Cm(n));const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function nPe(e,t){const r={},n=b(e,["numberOfVideos"]);t!==void 0&&n!=null&&C(t,["parameters","sampleCount"],n);const a=b(e,["outputGcsUri"]);t!==void 0&&a!=null&&C(t,["parameters","storageUri"],a);const i=b(e,["fps"]);t!==void 0&&i!=null&&C(t,["parameters","fps"],i);const s=b(e,["durationSeconds"]);t!==void 0&&s!=null&&C(t,["parameters","durationSeconds"],s);const o=b(e,["seed"]);t!==void 0&&o!=null&&C(t,["parameters","seed"],o);const l=b(e,["aspectRatio"]);t!==void 0&&l!=null&&C(t,["parameters","aspectRatio"],l);const c=b(e,["resolution"]);t!==void 0&&c!=null&&C(t,["parameters","resolution"],c);const u=b(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const A=b(e,["pubsubTopic"]);t!==void 0&&A!=null&&C(t,["parameters","pubsubTopic"],A);const h=b(e,["negativePrompt"]);t!==void 0&&h!=null&&C(t,["parameters","negativePrompt"],h);const m=b(e,["enhancePrompt"]);t!==void 0&&m!=null&&C(t,["parameters","enhancePrompt"],m);const v=b(e,["generateAudio"]);t!==void 0&&v!=null&&C(t,["parameters","generateAudio"],v);const g=b(e,["lastFrame"]);t!==void 0&&g!=null&&C(t,["instances[0]","lastFrame"],wT(g));const y=b(e,["compressionQuality"]);return t!==void 0&&y!=null&&C(t,["parameters","compressionQuality"],y),r}function aPe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["_url","model"],sa(e,n));const a=b(t,["prompt"]);a!=null&&C(r,["instances[0]","prompt"],a);const i=b(t,["image"]);i!=null&&C(r,["instances[0]","image"],wT(i));const s=b(t,["video"]);s!=null&&C(r,["instances[0]","video"],rPe(s));const o=b(t,["config"]);return o!=null&&C(r,["config"],nPe(o,r)),r}function iPe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function sPe(e){const t={},r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function oPe(e){const t={},r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function lPe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],iPe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],sPe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],oPe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function cPe(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>lPe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function uPe(e){const t={},r=b(e,["citationSources"]);return r!=null&&C(t,["citations"],r),t}function dPe(e){const t={},r=b(e,["retrievedUrl"]);r!=null&&C(t,["retrievedUrl"],r);const n=b(e,["urlRetrievalStatus"]);return n!=null&&C(t,["urlRetrievalStatus"],n),t}function fPe(e){const t={},r=b(e,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>dPe(a))),C(t,["urlMetadata"],n)}return t}function APe(e){const t={},r=b(e,["content"]);r!=null&&C(t,["content"],cPe(r));const n=b(e,["citationMetadata"]);n!=null&&C(t,["citationMetadata"],uPe(n));const a=b(e,["tokenCount"]);a!=null&&C(t,["tokenCount"],a);const i=b(e,["finishReason"]);i!=null&&C(t,["finishReason"],i);const s=b(e,["urlContextMetadata"]);s!=null&&C(t,["urlContextMetadata"],fPe(s));const o=b(e,["avgLogprobs"]);o!=null&&C(t,["avgLogprobs"],o);const l=b(e,["groundingMetadata"]);l!=null&&C(t,["groundingMetadata"],l);const c=b(e,["index"]);c!=null&&C(t,["index"],c);const u=b(e,["logprobsResult"]);u!=null&&C(t,["logprobsResult"],u);const A=b(e,["safetyRatings"]);return A!=null&&C(t,["safetyRatings"],A),t}function fQ(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>APe(l))),C(t,["candidates"],o)}const a=b(e,["modelVersion"]);a!=null&&C(t,["modelVersion"],a);const i=b(e,["promptFeedback"]);i!=null&&C(t,["promptFeedback"],i);const s=b(e,["usageMetadata"]);return s!=null&&C(t,["usageMetadata"],s),t}function hPe(e){const t={},r=b(e,["values"]);return r!=null&&C(t,["values"],r),t}function pPe(){return{}}function mPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["embeddings"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>hPe(s))),C(t,["embeddings"],i)}return b(e,["metadata"])!=null&&C(t,["metadata"],pPe()),t}function gPe(e){const t={},r=b(e,["bytesBase64Encoded"]);r!=null&&C(t,["imageBytes"],Cm(r));const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function Aee(e){const t={},r=b(e,["safetyAttributes","categories"]);r!=null&&C(t,["categories"],r);const n=b(e,["safetyAttributes","scores"]);n!=null&&C(t,["scores"],n);const a=b(e,["contentType"]);return a!=null&&C(t,["contentType"],a),t}function vPe(e){const t={},r=b(e,["_self"]);r!=null&&C(t,["image"],gPe(r));const n=b(e,["raiFilteredReason"]);n!=null&&C(t,["raiFilteredReason"],n);const a=b(e,["_self"]);return a!=null&&C(t,["safetyAttributes"],Aee(a)),t}function xPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>vPe(s))),C(t,["generatedImages"],i)}const a=b(e,["positivePromptSafetyAttributes"]);return a!=null&&C(t,["positivePromptSafetyAttributes"],Aee(a)),t}function yPe(e){const t={},r=b(e,["baseModel"]);r!=null&&C(t,["baseModel"],r);const n=b(e,["createTime"]);n!=null&&C(t,["createTime"],n);const a=b(e,["updateTime"]);return a!=null&&C(t,["updateTime"],a),t}function C3(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["description"]);a!=null&&C(t,["description"],a);const i=b(e,["version"]);i!=null&&C(t,["version"],i);const s=b(e,["_self"]);s!=null&&C(t,["tunedModelInfo"],yPe(s));const o=b(e,["inputTokenLimit"]);o!=null&&C(t,["inputTokenLimit"],o);const l=b(e,["outputTokenLimit"]);l!=null&&C(t,["outputTokenLimit"],l);const c=b(e,["supportedGenerationMethods"]);return c!=null&&C(t,["supportedActions"],c),t}function bPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["_self"]);if(a!=null){let i=JZ(a);Array.isArray(i)&&(i=i.map(s=>C3(s))),C(t,["models"],i)}return t}function wPe(){return{}}function CPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["totalTokens"]);n!=null&&C(t,["totalTokens"],n);const a=b(e,["cachedContentTokenCount"]);return a!=null&&C(t,["cachedContentTokenCount"],a),t}function EPe(e){const t={},r=b(e,["video","uri"]);r!=null&&C(t,["uri"],r);const n=b(e,["video","encodedVideo"]);n!=null&&C(t,["videoBytes"],Cm(n));const a=b(e,["encoding"]);return a!=null&&C(t,["mimeType"],a),t}function _Pe(e){const t={},r=b(e,["_self"]);return r!=null&&C(t,["video"],EPe(r)),t}function SPe(e){const t={},r=b(e,["generatedSamples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>_Pe(s))),C(t,["generatedVideos"],i)}const n=b(e,["raiMediaFilteredCount"]);n!=null&&C(t,["raiMediaFilteredCount"],n);const a=b(e,["raiMediaFilteredReasons"]);return a!=null&&C(t,["raiMediaFilteredReasons"],a),t}function TPe(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["metadata"]);n!=null&&C(t,["metadata"],n);const a=b(e,["done"]);a!=null&&C(t,["done"],a);const i=b(e,["error"]);i!=null&&C(t,["error"],i);const s=b(e,["response","generateVideoResponse"]);return s!=null&&C(t,["response"],SPe(s)),t}function NPe(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function BPe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["data"]);n!=null&&C(t,["data"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function kPe(e){const t={},r=b(e,["displayName"]);r!=null&&C(t,["displayName"],r);const n=b(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function IPe(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],NPe(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],BPe(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],kPe(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function FPe(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>IPe(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function DPe(e){const t={},r=b(e,["citations"]);return r!=null&&C(t,["citations"],r),t}function RPe(e){const t={},r=b(e,["retrievedUrl"]);r!=null&&C(t,["retrievedUrl"],r);const n=b(e,["urlRetrievalStatus"]);return n!=null&&C(t,["urlRetrievalStatus"],n),t}function PPe(e){const t={},r=b(e,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>RPe(a))),C(t,["urlMetadata"],n)}return t}function MPe(e){const t={},r=b(e,["content"]);r!=null&&C(t,["content"],FPe(r));const n=b(e,["citationMetadata"]);n!=null&&C(t,["citationMetadata"],DPe(n));const a=b(e,["finishMessage"]);a!=null&&C(t,["finishMessage"],a);const i=b(e,["finishReason"]);i!=null&&C(t,["finishReason"],i);const s=b(e,["urlContextMetadata"]);s!=null&&C(t,["urlContextMetadata"],PPe(s));const o=b(e,["avgLogprobs"]);o!=null&&C(t,["avgLogprobs"],o);const l=b(e,["groundingMetadata"]);l!=null&&C(t,["groundingMetadata"],l);const c=b(e,["index"]);c!=null&&C(t,["index"],c);const u=b(e,["logprobsResult"]);u!=null&&C(t,["logprobsResult"],u);const A=b(e,["safetyRatings"]);return A!=null&&C(t,["safetyRatings"],A),t}function AQ(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(u=>MPe(u))),C(t,["candidates"],c)}const a=b(e,["createTime"]);a!=null&&C(t,["createTime"],a);const i=b(e,["responseId"]);i!=null&&C(t,["responseId"],i);const s=b(e,["modelVersion"]);s!=null&&C(t,["modelVersion"],s);const o=b(e,["promptFeedback"]);o!=null&&C(t,["promptFeedback"],o);const l=b(e,["usageMetadata"]);return l!=null&&C(t,["usageMetadata"],l),t}function LPe(e){const t={},r=b(e,["truncated"]);r!=null&&C(t,["truncated"],r);const n=b(e,["token_count"]);return n!=null&&C(t,["tokenCount"],n),t}function OPe(e){const t={},r=b(e,["values"]);r!=null&&C(t,["values"],r);const n=b(e,["statistics"]);return n!=null&&C(t,["statistics"],LPe(n)),t}function UPe(e){const t={},r=b(e,["billableCharacterCount"]);return r!=null&&C(t,["billableCharacterCount"],r),t}function jPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["predictions[]","embeddings"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>OPe(s))),C(t,["embeddings"],i)}const a=b(e,["metadata"]);return a!=null&&C(t,["metadata"],UPe(a)),t}function HPe(e){const t={},r=b(e,["gcsUri"]);r!=null&&C(t,["gcsUri"],r);const n=b(e,["bytesBase64Encoded"]);n!=null&&C(t,["imageBytes"],Cm(n));const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function hee(e){const t={},r=b(e,["safetyAttributes","categories"]);r!=null&&C(t,["categories"],r);const n=b(e,["safetyAttributes","scores"]);n!=null&&C(t,["scores"],n);const a=b(e,["contentType"]);return a!=null&&C(t,["contentType"],a),t}function _P(e){const t={},r=b(e,["_self"]);r!=null&&C(t,["image"],HPe(r));const n=b(e,["raiFilteredReason"]);n!=null&&C(t,["raiFilteredReason"],n);const a=b(e,["_self"]);a!=null&&C(t,["safetyAttributes"],hee(a));const i=b(e,["prompt"]);return i!=null&&C(t,["enhancedPrompt"],i),t}function QPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>_P(s))),C(t,["generatedImages"],i)}const a=b(e,["positivePromptSafetyAttributes"]);return a!=null&&C(t,["positivePromptSafetyAttributes"],hee(a)),t}function VPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>_P(i))),C(t,["generatedImages"],a)}return t}function zPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>_P(i))),C(t,["generatedImages"],a)}return t}function GPe(e){const t={},r=b(e,["endpoint"]);r!=null&&C(t,["name"],r);const n=b(e,["deployedModelId"]);return n!=null&&C(t,["deployedModelId"],n),t}function qPe(e){const t={},r=b(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&C(t,["baseModel"],r);const n=b(e,["createTime"]);n!=null&&C(t,["createTime"],n);const a=b(e,["updateTime"]);return a!=null&&C(t,["updateTime"],a),t}function $Pe(e){const t={},r=b(e,["checkpointId"]);r!=null&&C(t,["checkpointId"],r);const n=b(e,["epoch"]);n!=null&&C(t,["epoch"],n);const a=b(e,["step"]);return a!=null&&C(t,["step"],a),t}function E3(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["displayName"]);n!=null&&C(t,["displayName"],n);const a=b(e,["description"]);a!=null&&C(t,["description"],a);const i=b(e,["versionId"]);i!=null&&C(t,["version"],i);const s=b(e,["deployedModels"]);if(s!=null){let A=s;Array.isArray(A)&&(A=A.map(h=>GPe(h))),C(t,["endpoints"],A)}const o=b(e,["labels"]);o!=null&&C(t,["labels"],o);const l=b(e,["_self"]);l!=null&&C(t,["tunedModelInfo"],qPe(l));const c=b(e,["defaultCheckpointId"]);c!=null&&C(t,["defaultCheckpointId"],c);const u=b(e,["checkpoints"]);if(u!=null){let A=u;Array.isArray(A)&&(A=A.map(h=>$Pe(h))),C(t,["checkpoints"],A)}return t}function KPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["_self"]);if(a!=null){let i=JZ(a);Array.isArray(i)&&(i=i.map(s=>E3(s))),C(t,["models"],i)}return t}function WPe(){return{}}function YPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["totalTokens"]);return n!=null&&C(t,["totalTokens"],n),t}function XPe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["tokensInfo"]);return n!=null&&C(t,["tokensInfo"],n),t}function JPe(e){const t={},r=b(e,["gcsUri"]);r!=null&&C(t,["uri"],r);const n=b(e,["bytesBase64Encoded"]);n!=null&&C(t,["videoBytes"],Cm(n));const a=b(e,["mimeType"]);return a!=null&&C(t,["mimeType"],a),t}function ZPe(e){const t={},r=b(e,["_self"]);return r!=null&&C(t,["video"],JPe(r)),t}function e6e(e){const t={},r=b(e,["videos"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ZPe(s))),C(t,["generatedVideos"],i)}const n=b(e,["raiMediaFilteredCount"]);n!=null&&C(t,["raiMediaFilteredCount"],n);const a=b(e,["raiMediaFilteredReasons"]);return a!=null&&C(t,["raiMediaFilteredReasons"],a),t}function t6e(e){const t={},r=b(e,["name"]);r!=null&&C(t,["name"],r);const n=b(e,["metadata"]);n!=null&&C(t,["metadata"],n);const a=b(e,["done"]);a!=null&&C(t,["done"],a);const i=b(e,["error"]);i!=null&&C(t,["error"],i);const s=b(e,["response"]);return s!=null&&C(t,["response"],e6e(s)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r6e="Content-Type",n6e="X-Server-Timeout",a6e="User-Agent",_3="x-goog-api-client",i6e="1.12.0",s6e=`google-genai-sdk/${i6e}`,o6e="v1beta1",l6e="v1beta",hQ=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class c6e{constructor(t){var r,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:o6e,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:l6e,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),r=new URL(t);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,r,n){const a=[this.getRequestUrlInternal(r)];return n&&a.push(this.getBaseResourcePath()),t!==""&&a.push(t),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let r=this.clientOptions.httpOptions;t.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,r,n);if(t.queryParams)for(const[s,o]of Object.entries(t.queryParams))a.searchParams.append(s,String(o));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,r,t.abortSignal),this.unaryApiCall(a,i,t.httpMethod)}patchHttpOptions(t,r){const n=JSON.parse(JSON.stringify(t));for(const[a,i]of Object.entries(r))typeof i=="object"?n[a]=Object.assign(Object.assign({},n[a]),i):i!==void 0&&(n[a]=i);return n}async requestStream(t){let r=this.clientOptions.httpOptions;t.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,r,n);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,r,t.abortSignal),this.streamApiCall(a,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,r,n){if(r&&r.timeout||n){const a=new AbortController,i=a.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const s=setTimeout(()=>a.abort(),r.timeout);s&&typeof s.unref=="function"&&s.unref()}n&&n.addEventListener("abort",()=>{a.abort()}),t.signal=i}return r&&r.extraBody!==null&&u6e(t,r.extraBody),t.headers=await this.getHeadersInternal(r),t}async unaryApiCall(t,r,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await pQ(a),new g3(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(t,r,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await pQ(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(t){var r;return sv(this,arguments,function*(){const a=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let s="";for(;;){const{done:o,value:l}=yield Ta(a.read());if(o){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(l,{stream:!0});try{const A=JSON.parse(c);if("error"in A){const h=JSON.parse(JSON.stringify(A.error)),m=h.status,v=h.code,g=`got status: ${m}. ${JSON.stringify(A)}`;if(v>=400&&v<600)throw new yT({message:g,status:v})}}catch(A){if(A.name==="ApiError")throw A}s+=c;let u=s.match(hQ);for(;u;){const A=u[1];try{const h=new Response(A,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Ta(new g3(h)),s=s.slice(u[0].length),u=s.match(hQ)}catch(h){throw new Error(`exception parsing stream chunk ${A}. ${h}`)}}}}finally{a.releaseLock()}})}async apiCall(t,r){return fetch(t,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},r=s6e+" "+this.clientOptions.userAgentExtra;return t[a6e]=r,t[_3]=r,t[r6e]="application/json",t}async getHeadersInternal(t){const r=new Headers;if(t&&t.headers){for(const[n,a]of Object.entries(t.headers))r.append(n,a);t.timeout&&t.timeout>0&&r.append(n6e,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(t,r){var n;const a={};r!=null&&(a.mimeType=r.mimeType,a.name=r.name,a.displayName=r.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const i=this.clientOptions.uploader,s=await i.stat(t);a.sizeBytes=String(s.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:s.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=o;const l=await this.fetchUploadUrl(a,r);return i.upload(t,l,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,r){var n;let a={};r!=null&&r.httpOptions?a=r.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const i={file:t},s=await this.request({path:lr("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:a});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=s==null?void 0:s.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function pQ(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const r=e.status;let n;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?n=await e.json():n={error:{message:await e.text(),code:e.status,status:e.statusText}};const a=JSON.stringify(n);throw r>=400&&r<600?new yT({message:a,status:r}):new Error(a)}}function u6e(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))r=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(i,s){const o=Object.assign({},i);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l],u=o[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?o[l]=n(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),o[l]=c)}return o}const a=n(r,t);e.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d6e="mcp_used/unknown";let f6e=!1;function pee(e){for(const t of e)if(A6e(t)||typeof t=="object"&&"inputSchema"in t)return!0;return f6e}function mee(e){var t;const r=(t=e[_3])!==null&&t!==void 0?t:"";e[_3]=(r+` ${d6e}`).trimStart()}function A6e(e){return e!==null&&typeof e=="object"&&e instanceof SP}function h6e(e,t=100){return sv(this,arguments,function*(){let n,a=0;for(;a<t;){const i=yield Ta(e.listTools({cursor:n}));for(const s of i.tools)yield yield Ta(s),a++;if(!i.nextCursor)break;n=i.nextCursor}})}class SP{constructor(t=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=r}static create(t,r){return new SP(t,r)}async initialize(){var t,r,n,a;if(this.mcpTools.length>0)return;const i={},s=[];for(const u of this.mcpClients)try{for(var o=!0,l=(r=void 0,py(h6e(u))),c;c=await l.next(),t=c.done,!t;o=!0){a=c.value,o=!1;const A=a;s.push(A);const h=A.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=u}}catch(A){r={error:A}}finally{try{!o&&!t&&(n=l.return)&&await n.call(l)}finally{if(r)throw r.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),cke(this.mcpTools,this.config)}async callTool(t){await this.initialize();const r=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[n.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await a.callTool({name:n.name,arguments:n.args},void 0,i);r.push({functionResponse:{name:n.name,response:s.isError?{error:s}:s}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function p6e(e,t,r){const n=new tke;let a;r.data instanceof Blob?a=JSON.parse(await r.data.text()):a=JSON.parse(r.data);const i=cDe(a);Object.assign(n,i),t(n)}class m6e{constructor(t,r,n){this.apiClient=t,this.auth=r,this.webSocketFactory=n}async connect(t){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=x6e(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${a}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${o}`;let c=()=>{};const u=new Promise(N=>{c=N}),A=t.callbacks,h=function(){c({})},m=this.apiClient,v={onopen:h,onmessage:N=>{p6e(m,A.onmessage,N)},onerror:(r=A==null?void 0:A.onerror)!==null&&r!==void 0?r:function(N){},onclose:(n=A==null?void 0:A.onclose)!==null&&n!==void 0?n:function(N){}},g=this.webSocketFactory.create(l,v6e(s),v);g.connect(),await u;const y=sa(this.apiClient,t.model),w=cee({model:y}),T=w3({setup:w});return g.send(JSON.stringify(T)),new g6e(g,this.apiClient)}}class g6e{constructor(t,r){this.conn=t,this.apiClient=r}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=oFe(t),n=uee(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const r=lFe(t),n=w3(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const r=w3({playbackControl:t});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(Ug.PLAY)}pause(){this.sendPlaybackControl(Ug.PAUSE)}stop(){this.sendPlaybackControl(Ug.STOP)}resetContext(){this.sendPlaybackControl(Ug.RESET_CONTEXT)}close(){this.conn.close()}}function v6e(e){const t={};return e.forEach((r,n)=>{t[n]=r}),t}function x6e(e){const t=new Headers;for(const[r,n]of Object.entries(e))t.append(r,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y6e="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function b6e(e,t,r){const n=new eke;let a;r.data instanceof Blob?a=await r.data.text():r.data instanceof ArrayBuffer?a=new TextDecoder().decode(r.data):a=r.data;const i=JSON.parse(a);if(e.isVertexAI()){const s=CDe(i);Object.assign(n,s)}else{const s=eDe(i);Object.assign(n,s)}t(n)}class w6e{constructor(t,r,n){this.apiClient=t,this.auth=r,this.webSocketFactory=n,this.music=new m6e(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var r,n,a,i,s,o;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const A=this.apiClient.getHeaders();t.config&&t.config.tools&&pee(t.config.tools)&&mee(A);const h=S6e(A);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const k=this.apiClient.getApiKey();let H="BidiGenerateContent",P="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",P="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${H}?${P}=${k}`}let m=()=>{};const v=new Promise(k=>{m=k}),g=t.callbacks,y=function(){var k;(k=g==null?void 0:g.onopen)===null||k===void 0||k.call(g),m({})},w=this.apiClient,T={onopen:y,onmessage:k=>{b6e(w,g.onmessage,k)},onerror:(r=g==null?void 0:g.onerror)!==null&&r!==void 0?r:function(k){},onclose:(n=g==null?void 0:g.onclose)!==null&&n!==void 0?n:function(k){}},N=this.webSocketFactory.create(u,_6e(h),T);N.connect(),await v;let F=sa(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const k=this.apiClient.getProject(),H=this.apiClient.getLocation();F=`projects/${k}/locations/${H}/`+F}let B={};this.apiClient.isVertexAI()&&((a=t.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[h_.AUDIO]}:t.config.responseModalities=[h_.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(o=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[],E=[];for(const k of D)if(this.isCallableTool(k)){const H=k;E.push(await H.tool())}else E.push(k);E.length>0&&(t.config.tools=E);const S={model:F,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?B=PFe(this.apiClient,S):B=nFe(this.apiClient,S),delete B.config,N.send(JSON.stringify(B)),new E6e(N,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const C6e={turnComplete:!0};class E6e{constructor(t,r){this.conn=t,this.apiClient=r}tLiveClientContent(t,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=uu(r.turns),t.isVertexAI()?n=n.map(a=>ox(a)):n=n.map(a=>bT(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(t,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const i of n){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(y6e)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},C6e),t);const r=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(r))}sendRealtimeInput(t){let r={};this.apiClient.isVertexAI()?r={realtimeInput:OFe(t)}:r={realtimeInput:sFe(t)},this.conn.send(JSON.stringify(r))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function _6e(e){const t={};return e.forEach((r,n)=>{t[n]=r}),t}function S6e(e){const t=new Headers;for(const[r,n]of Object.entries(e))t.append(r,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mQ=10;function gQ(e){var t,r,n;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let a=!1;for(const s of(r=e==null?void 0:e.tools)!==null&&r!==void 0?r:[])if(ov(s)){a=!0;break}if(!a)return!0;const i=(n=e==null?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function ov(e){return"callTool"in e&&typeof e.callTool=="function"}function T6e(e){var t,r,n;return(n=(r=(t=e.config)===null||t===void 0?void 0:t.tools)===null||r===void 0?void 0:r.some(a=>ov(a)))!==null&&n!==void 0?n:!1}function N6e(e){var t,r,n;return(n=(r=(t=e.config)===null||t===void 0?void 0:t.tools)===null||r===void 0?void 0:r.some(a=>!ov(a)))!==null&&n!==void 0?n:!1}function vQ(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B6e extends wm{constructor(t){super(),this.apiClient=t,this.generateContent=async r=>{var n,a,i,s,o;const l=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!T6e(r)||gQ(r.config))return await this.generateContentInternal(l);if(N6e(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,u;const A=uu(l.contents),h=(i=(a=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&i!==void 0?i:mQ;let m=0;for(;m<h&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const v=c.candidates[0].content,g=[];for(const y of(o=(s=r.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(ov(y)){const T=await y.callTool(c.functionCalls);g.push(...T)}m++,u={role:"user",parts:g},l.contents=uu(l.contents),l.contents.push(v),l.contents.push(u),vQ(l.config)&&(A.push(v),A.push(u))}return vQ(l.config)&&(c.automaticFunctionCallingHistory=A),c},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),gQ(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var a;let i;const s=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((a=l==null?void 0:l.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:s.push(l);let o;return i?o={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:s,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const s={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((n=s.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Gb(nm.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(s),s)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const a={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(a)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var r,n,a;const i=(r=t.config)===null||r===void 0?void 0:r.tools;if(!i)return t;const s=await Promise.all(i.map(async l=>ov(l)?await l.tool():l)),o={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(o.config.tools=s,t.config&&t.config.tools&&pee(t.config.tools)){const l=(a=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&a!==void 0?a:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),mee(c),o.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return o}async initAfcToolsMap(t){var r,n,a;const i=new Map;for(const s of(n=(r=t.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(ov(s)){const o=s,l=await o.tool();for(const c of(a=l.functionDeclarations)!==null&&a!==void 0?a:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,o)}}return i}async processAfcStream(t){var r,n,a;const i=(a=(n=(r=t.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&a!==void 0?a:mQ;let s=!1,o=0;const l=await this.initAfcToolsMap(t);return function(c,u,A){var h,m;return sv(this,arguments,function*(){for(var v,g,y,w;o<i;){s&&(o++,s=!1);const B=yield Ta(c.processParamsMaybeAddMcpUsage(A)),D=yield Ta(c.generateContentStreamInternal(B)),E=[],S=[];try{for(var T=!0,N=(g=void 0,py(D)),F;F=yield Ta(N.next()),v=F.done,!v;T=!0){w=F.value,T=!1;const k=w;if(yield yield Ta(k),k.candidates&&(!((h=k.candidates[0])===null||h===void 0)&&h.content)){S.push(k.candidates[0].content);for(const H of(m=k.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(o<i&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(H.functionCall.name)){const P=yield Ta(u.get(H.functionCall.name).callTool([H.functionCall]));E.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(k){g={error:k}}finally{try{!T&&!v&&(y=N.return)&&(yield Ta(y.call(N)))}finally{if(g)throw g.error}}if(E.length>0){s=!0;const k=new l1;k.candidates=[{content:{role:"user",parts:E}}],yield yield Ta(k);const H=[];H.push(...S),H.push({role:"user",parts:E});const P=uu(A.contents).concat(H);A.contents=P}else break}})}(this,l,t)}async generateContentInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=dQ(this.apiClient,t);return o=lr("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=AQ(u),h=new l1;return Object.assign(h,A),h})}else{const c=uQ(this.apiClient,t);return o=lr("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=fQ(u),h=new l1;return Object.assign(h,A),h})}}async generateContentStreamInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=dQ(this.apiClient,t);return o=lr("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),s.then(function(A){return sv(this,arguments,function*(){var h,m,v,g;try{for(var y=!0,w=py(A),T;T=yield Ta(w.next()),h=T.done,!h;y=!0){g=T.value,y=!1;const N=g,F=AQ(yield Ta(N.json()));F.sdkHttpResponse={headers:N.headers};const B=new l1;Object.assign(B,F),yield yield Ta(B)}}catch(N){m={error:N}}finally{try{!y&&!h&&(v=w.return)&&(yield Ta(v.call(w)))}finally{if(m)throw m.error}}})})}else{const c=uQ(this.apiClient,t);return o=lr("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(A){return sv(this,arguments,function*(){var h,m,v,g;try{for(var y=!0,w=py(A),T;T=yield Ta(w.next()),h=T.done,!h;y=!0){g=T.value,y=!1;const N=g,F=fQ(yield Ta(N.json()));F.sdkHttpResponse={headers:N.headers};const B=new l1;Object.assign(B,F),yield yield Ta(B)}}catch(N){m={error:N}}finally{try{!y&&!h&&(v=w.return)&&(yield Ta(v.call(w)))}finally{if(m)throw m.error}}})})}}async embedContent(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=PRe(this.apiClient,t);return o=lr("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=jPe(u),h=new VH;return Object.assign(h,A),h})}else{const c=KDe(this.apiClient,t);return o=lr("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=mPe(u),h=new VH;return Object.assign(h,A),h})}}async generateImagesInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=LRe(this.apiClient,t);return o=lr("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=QPe(u),h=new zH;return Object.assign(h,A),h})}else{const c=YDe(this.apiClient,t);return o=lr("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=xPe(u),h=new zH;return Object.assign(h,A),h})}}async editImageInternal(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI()){const o=zRe(this.apiClient,t);return i=lr("{model}:predict",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),a.then(l=>{const c=VPe(l),u=new K4e;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI()){const o=qRe(this.apiClient,t);return i=lr("{model}:predict",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),a.then(l=>{const c=zPe(l),u=new W4e;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=$Re(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>E3(u))}else{const c=XDe(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>C3(u))}}async listInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=WRe(this.apiClient,t);return o=lr("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=KPe(u),h=new GH;return Object.assign(h,A),h})}else{const c=ZDe(this.apiClient,t);return o=lr("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=bPe(u),h=new GH;return Object.assign(h,A),h})}}async update(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=XRe(this.apiClient,t);return o=lr("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>E3(u))}else{const c=tRe(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>C3(u))}}async delete(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=JRe(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(()=>{const u=WPe(),A=new qH;return Object.assign(A,u),A})}else{const c=rRe(this.apiClient,t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(()=>{const u=wPe(),A=new qH;return Object.assign(A,u),A})}}async countTokens(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=ePe(this.apiClient,t);return o=lr("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=YPe(u),h=new $H;return Object.assign(h,A),h})}else{const c=aRe(this.apiClient,t);return o=lr("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=CPe(u),h=new $H;return Object.assign(h,A),h})}}async computeTokens(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI()){const o=tPe(this.apiClient,t);return i=lr("{model}:computeTokens",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),a.then(l=>{const c=XPe(l),u=new Y4e;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=aPe(this.apiClient,t);return o=lr("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const A=t6e(u),h=new p_;return Object.assign(h,A),h})}else{const c=oRe(this.apiClient,t);return o=lr("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const A=TPe(u),h=new p_;return Object.assign(h,A),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k6e(e){const t={},r=b(e,["operationName"]);r!=null&&C(t,["_url","operationName"],r);const n=b(e,["config"]);return n!=null&&C(t,["config"],n),t}function I6e(e){const t={},r=b(e,["operationName"]);r!=null&&C(t,["_url","operationName"],r);const n=b(e,["config"]);return n!=null&&C(t,["config"],n),t}function F6e(e){const t={},r=b(e,["operationName"]);r!=null&&C(t,["operationName"],r);const n=b(e,["resourceName"]);n!=null&&C(t,["_url","resourceName"],n);const a=b(e,["config"]);return a!=null&&C(t,["config"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D6e extends wm{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const r=t.operation,n=t.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let i;n&&"httpOptions"in n&&(i=n.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:i}});return r._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(t){const r=t.operation,n=t.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let i;n&&"httpOptions"in n&&(i=n.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:i}});return r._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=I6e(t);return o=lr("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s}else{const c=k6e(t);return o=lr("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s}}async fetchPredictVideosOperationInternal(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI()){const o=F6e(t);return i=lr("{resourceName}:fetchPredictOperation",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R6e(e){const t={},r=b(e,["voiceName"]);return r!=null&&C(t,["voiceName"],r),t}function gee(e){const t={},r=b(e,["prebuiltVoiceConfig"]);return r!=null&&C(t,["prebuiltVoiceConfig"],R6e(r)),t}function P6e(e){const t={},r=b(e,["speaker"]);r!=null&&C(t,["speaker"],r);const n=b(e,["voiceConfig"]);return n!=null&&C(t,["voiceConfig"],gee(n)),t}function M6e(e){const t={},r=b(e,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>P6e(a))),C(t,["speakerVoiceConfigs"],n)}return t}function L6e(e){const t={},r=b(e,["voiceConfig"]);r!=null&&C(t,["voiceConfig"],gee(r));const n=b(e,["multiSpeakerVoiceConfig"]);n!=null&&C(t,["multiSpeakerVoiceConfig"],M6e(n));const a=b(e,["languageCode"]);return a!=null&&C(t,["languageCode"],a),t}function O6e(e){const t={},r=b(e,["fps"]);r!=null&&C(t,["fps"],r);const n=b(e,["endOffset"]);n!=null&&C(t,["endOffset"],n);const a=b(e,["startOffset"]);return a!=null&&C(t,["startOffset"],a),t}function U6e(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["data"]);r!=null&&C(t,["data"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function j6e(e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(e,["fileUri"]);r!=null&&C(t,["fileUri"],r);const n=b(e,["mimeType"]);return n!=null&&C(t,["mimeType"],n),t}function H6e(e){const t={},r=b(e,["videoMetadata"]);r!=null&&C(t,["videoMetadata"],O6e(r));const n=b(e,["thought"]);n!=null&&C(t,["thought"],n);const a=b(e,["inlineData"]);a!=null&&C(t,["inlineData"],U6e(a));const i=b(e,["fileData"]);i!=null&&C(t,["fileData"],j6e(i));const s=b(e,["thoughtSignature"]);s!=null&&C(t,["thoughtSignature"],s);const o=b(e,["codeExecutionResult"]);o!=null&&C(t,["codeExecutionResult"],o);const l=b(e,["executableCode"]);l!=null&&C(t,["executableCode"],l);const c=b(e,["functionCall"]);c!=null&&C(t,["functionCall"],c);const u=b(e,["functionResponse"]);u!=null&&C(t,["functionResponse"],u);const A=b(e,["text"]);return A!=null&&C(t,["text"],A),t}function Q6e(e){const t={},r=b(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>H6e(i))),C(t,["parts"],a)}const n=b(e,["role"]);return n!=null&&C(t,["role"],n),t}function V6e(e){const t={},r=b(e,["behavior"]);r!=null&&C(t,["behavior"],r);const n=b(e,["description"]);n!=null&&C(t,["description"],n);const a=b(e,["name"]);a!=null&&C(t,["name"],a);const i=b(e,["parameters"]);i!=null&&C(t,["parameters"],i);const s=b(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const o=b(e,["response"]);o!=null&&C(t,["response"],o);const l=b(e,["responseJsonSchema"]);return l!=null&&C(t,["responseJsonSchema"],l),t}function z6e(e){const t={},r=b(e,["startTime"]);r!=null&&C(t,["startTime"],r);const n=b(e,["endTime"]);return n!=null&&C(t,["endTime"],n),t}function G6e(e){const t={},r=b(e,["timeRangeFilter"]);return r!=null&&C(t,["timeRangeFilter"],z6e(r)),t}function q6e(e){const t={},r=b(e,["mode"]);r!=null&&C(t,["mode"],r);const n=b(e,["dynamicThreshold"]);return n!=null&&C(t,["dynamicThreshold"],n),t}function $6e(e){const t={},r=b(e,["dynamicRetrievalConfig"]);return r!=null&&C(t,["dynamicRetrievalConfig"],q6e(r)),t}function K6e(){return{}}function W6e(e){const t={},r=b(e,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>V6e(c))),C(t,["functionDeclarations"],l)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=b(e,["googleSearch"]);n!=null&&C(t,["googleSearch"],G6e(n));const a=b(e,["googleSearchRetrieval"]);if(a!=null&&C(t,["googleSearchRetrieval"],$6e(a)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&C(t,["urlContext"],K6e());const s=b(e,["codeExecution"]);s!=null&&C(t,["codeExecution"],s);const o=b(e,["computerUse"]);return o!=null&&C(t,["computerUse"],o),t}function Y6e(e){const t={},r=b(e,["handle"]);if(r!=null&&C(t,["handle"],r),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function xQ(){return{}}function X6e(e){const t={},r=b(e,["disabled"]);r!=null&&C(t,["disabled"],r);const n=b(e,["startOfSpeechSensitivity"]);n!=null&&C(t,["startOfSpeechSensitivity"],n);const a=b(e,["endOfSpeechSensitivity"]);a!=null&&C(t,["endOfSpeechSensitivity"],a);const i=b(e,["prefixPaddingMs"]);i!=null&&C(t,["prefixPaddingMs"],i);const s=b(e,["silenceDurationMs"]);return s!=null&&C(t,["silenceDurationMs"],s),t}function J6e(e){const t={},r=b(e,["automaticActivityDetection"]);r!=null&&C(t,["automaticActivityDetection"],X6e(r));const n=b(e,["activityHandling"]);n!=null&&C(t,["activityHandling"],n);const a=b(e,["turnCoverage"]);return a!=null&&C(t,["turnCoverage"],a),t}function Z6e(e){const t={},r=b(e,["targetTokens"]);return r!=null&&C(t,["targetTokens"],r),t}function eMe(e){const t={},r=b(e,["triggerTokens"]);r!=null&&C(t,["triggerTokens"],r);const n=b(e,["slidingWindow"]);return n!=null&&C(t,["slidingWindow"],Z6e(n)),t}function tMe(e){const t={},r=b(e,["proactiveAudio"]);return r!=null&&C(t,["proactiveAudio"],r),t}function rMe(e,t){const r={},n=b(e,["generationConfig"]);t!==void 0&&n!=null&&C(t,["setup","generationConfig"],n);const a=b(e,["responseModalities"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","responseModalities"],a);const i=b(e,["temperature"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","temperature"],i);const s=b(e,["topP"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","topP"],s);const o=b(e,["topK"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","topK"],o);const l=b(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=b(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=b(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const A=b(e,["speechConfig"]);t!==void 0&&A!=null&&C(t,["setup","generationConfig","speechConfig"],L6e(EP(A)));const h=b(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],h);const m=b(e,["systemInstruction"]);t!==void 0&&m!=null&&C(t,["setup","systemInstruction"],Q6e(Po(m)));const v=b(e,["tools"]);if(t!==void 0&&v!=null){let B=ix(v);Array.isArray(B)&&(B=B.map(D=>W6e(ax(D)))),C(t,["setup","tools"],B)}const g=b(e,["sessionResumption"]);t!==void 0&&g!=null&&C(t,["setup","sessionResumption"],Y6e(g));const y=b(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&C(t,["setup","inputAudioTranscription"],xQ());const w=b(e,["outputAudioTranscription"]);t!==void 0&&w!=null&&C(t,["setup","outputAudioTranscription"],xQ());const T=b(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&C(t,["setup","realtimeInputConfig"],J6e(T));const N=b(e,["contextWindowCompression"]);t!==void 0&&N!=null&&C(t,["setup","contextWindowCompression"],eMe(N));const F=b(e,["proactivity"]);return t!==void 0&&F!=null&&C(t,["setup","proactivity"],tMe(F)),r}function nMe(e,t){const r={},n=b(t,["model"]);n!=null&&C(r,["setup","model"],sa(e,n));const a=b(t,["config"]);return a!=null&&C(r,["config"],rMe(a,r)),r}function aMe(e,t,r){const n={},a=b(t,["expireTime"]);r!==void 0&&a!=null&&C(r,["expireTime"],a);const i=b(t,["newSessionExpireTime"]);r!==void 0&&i!=null&&C(r,["newSessionExpireTime"],i);const s=b(t,["uses"]);r!==void 0&&s!=null&&C(r,["uses"],s);const o=b(t,["liveConnectConstraints"]);r!==void 0&&o!=null&&C(r,["bidiGenerateContentSetup"],nMe(e,o));const l=b(t,["lockAdditionalFields"]);return r!==void 0&&l!=null&&C(r,["fieldMask"],l),n}function iMe(e,t){const r={},n=b(t,["config"]);return n!=null&&C(r,["config"],aMe(e,n,r)),r}function sMe(e){const t={},r=b(e,["name"]);return r!=null&&C(t,["name"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oMe(e){const t=[];for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const a=Object.keys(n).map(i=>`${r}.${i}`);t.push(...a)}else t.push(r)}return t.join(",")}function lMe(e,t){let r=null;const n=e.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const i=n.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,r=i):delete e.bidiGenerateContentSetup}else n!==void 0&&delete e.bidiGenerateContentSetup;const a=e.fieldMask;if(r){const i=oMe(r);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];a.length>0&&(o=a.map(c=>s.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),o.length>0&&l.push(...o),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?e.fieldMask=a.join(","):delete e.fieldMask;return e}class cMe extends wm{constructor(t){super(),this.apiClient=t}async create(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=iMe(this.apiClient,t);i=lr("auth_tokens",o._url),s=o._query,delete o.config,delete o._url,delete o._query;const l=lMe(o,t.config);return a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),a.then(c=>sMe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uMe(e){const t={},r=b(e,["name"]);r!=null&&C(t,["_url","name"],r);const n=b(e,["config"]);return n!=null&&C(t,["config"],n),t}function dMe(e,t){const r={},n=b(e,["pageSize"]);t!==void 0&&n!=null&&C(t,["_query","pageSize"],n);const a=b(e,["pageToken"]);t!==void 0&&a!=null&&C(t,["_query","pageToken"],a);const i=b(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function fMe(e){const t={},r=b(e,["config"]);return r!=null&&C(t,["config"],dMe(r,t)),t}function AMe(e){const t={},r=b(e,["textInput"]);r!=null&&C(t,["textInput"],r);const n=b(e,["output"]);return n!=null&&C(t,["output"],n),t}function hMe(e){const t={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=b(e,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>AMe(a))),C(t,["examples","examples"],n)}return t}function pMe(e,t){const r={};if(b(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=b(e,["tunedModelDisplayName"]);if(t!==void 0&&n!=null&&C(t,["displayName"],n),b(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=b(e,["epochCount"]);t!==void 0&&a!=null&&C(t,["tuningTask","hyperparameters","epochCount"],a);const i=b(e,["learningRateMultiplier"]);if(i!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),b(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=b(e,["batchSize"]);t!==void 0&&s!=null&&C(t,["tuningTask","hyperparameters","batchSize"],s);const o=b(e,["learningRate"]);return t!==void 0&&o!=null&&C(t,["tuningTask","hyperparameters","learningRate"],o),r}function mMe(e){const t={},r=b(e,["baseModel"]);r!=null&&C(t,["baseModel"],r);const n=b(e,["trainingDataset"]);n!=null&&C(t,["tuningTask","trainingData"],hMe(n));const a=b(e,["config"]);return a!=null&&C(t,["config"],pMe(a,t)),t}function gMe(e){const t={},r=b(e,["name"]);r!=null&&C(t,["_url","name"],r);const n=b(e,["config"]);return n!=null&&C(t,["config"],n),t}function vMe(e,t){const r={},n=b(e,["pageSize"]);t!==void 0&&n!=null&&C(t,["_query","pageSize"],n);const a=b(e,["pageToken"]);t!==void 0&&a!=null&&C(t,["_query","pageToken"],a);const i=b(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function xMe(e){const t={},r=b(e,["config"]);return r!=null&&C(t,["config"],vMe(r,t)),t}function yMe(e,t){const r={},n=b(e,["gcsUri"]);t!==void 0&&n!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],n);const a=b(e,["vertexDatasetResource"]);if(t!==void 0&&a!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],a),b(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function bMe(e,t){const r={},n=b(e,["gcsUri"]);n!=null&&C(r,["validationDatasetUri"],n);const a=b(e,["vertexDatasetResource"]);return t!==void 0&&a!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],a),r}function wMe(e,t){const r={},n=b(e,["validationDataset"]);t!==void 0&&n!=null&&C(t,["supervisedTuningSpec"],bMe(n,r));const a=b(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&C(t,["tunedModelDisplayName"],a);const i=b(e,["description"]);t!==void 0&&i!=null&&C(t,["description"],i);const s=b(e,["epochCount"]);t!==void 0&&s!=null&&C(t,["supervisedTuningSpec","hyperParameters","epochCount"],s);const o=b(e,["learningRateMultiplier"]);t!==void 0&&o!=null&&C(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=b(e,["exportLastCheckpointOnly"]);t!==void 0&&l!=null&&C(t,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=b(e,["adapterSize"]);if(t!==void 0&&c!=null&&C(t,["supervisedTuningSpec","hyperParameters","adapterSize"],c),b(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function CMe(e){const t={},r=b(e,["baseModel"]);r!=null&&C(t,["baseModel"],r);const n=b(e,["trainingDataset"]);n!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],yMe(n,t));const a=b(e,["config"]);return a!=null&&C(t,["config"],wMe(a,t)),t}function EMe(e){const t={},r=b(e,["name"]);r!=null&&C(t,["model"],r);const n=b(e,["name"]);return n!=null&&C(t,["endpoint"],n),t}function vee(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["name"]);n!=null&&C(t,["name"],n);const a=b(e,["state"]);a!=null&&C(t,["state"],WZ(a));const i=b(e,["createTime"]);i!=null&&C(t,["createTime"],i);const s=b(e,["tuningTask","startTime"]);s!=null&&C(t,["startTime"],s);const o=b(e,["tuningTask","completeTime"]);o!=null&&C(t,["endTime"],o);const l=b(e,["updateTime"]);l!=null&&C(t,["updateTime"],l);const c=b(e,["description"]);c!=null&&C(t,["description"],c);const u=b(e,["baseModel"]);u!=null&&C(t,["baseModel"],u);const A=b(e,["_self"]);A!=null&&C(t,["tunedModel"],EMe(A));const h=b(e,["distillationSpec"]);h!=null&&C(t,["distillationSpec"],h);const m=b(e,["experiment"]);m!=null&&C(t,["experiment"],m);const v=b(e,["labels"]);v!=null&&C(t,["labels"],v);const g=b(e,["pipelineJob"]);g!=null&&C(t,["pipelineJob"],g);const y=b(e,["satisfiesPzi"]);y!=null&&C(t,["satisfiesPzi"],y);const w=b(e,["satisfiesPzs"]);w!=null&&C(t,["satisfiesPzs"],w);const T=b(e,["serviceAccount"]);T!=null&&C(t,["serviceAccount"],T);const N=b(e,["tunedModelDisplayName"]);return N!=null&&C(t,["tunedModelDisplayName"],N),t}function _Me(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["tunedModels"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>vee(s))),C(t,["tuningJobs"],i)}return t}function SMe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["name"]);n!=null&&C(t,["name"],n);const a=b(e,["metadata"]);a!=null&&C(t,["metadata"],a);const i=b(e,["done"]);i!=null&&C(t,["done"],i);const s=b(e,["error"]);return s!=null&&C(t,["error"],s),t}function TMe(e){const t={},r=b(e,["checkpointId"]);r!=null&&C(t,["checkpointId"],r);const n=b(e,["epoch"]);n!=null&&C(t,["epoch"],n);const a=b(e,["step"]);a!=null&&C(t,["step"],a);const i=b(e,["endpoint"]);return i!=null&&C(t,["endpoint"],i),t}function NMe(e){const t={},r=b(e,["model"]);r!=null&&C(t,["model"],r);const n=b(e,["endpoint"]);n!=null&&C(t,["endpoint"],n);const a=b(e,["checkpoints"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>TMe(s))),C(t,["checkpoints"],i)}return t}function S3(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["name"]);n!=null&&C(t,["name"],n);const a=b(e,["state"]);a!=null&&C(t,["state"],WZ(a));const i=b(e,["createTime"]);i!=null&&C(t,["createTime"],i);const s=b(e,["startTime"]);s!=null&&C(t,["startTime"],s);const o=b(e,["endTime"]);o!=null&&C(t,["endTime"],o);const l=b(e,["updateTime"]);l!=null&&C(t,["updateTime"],l);const c=b(e,["error"]);c!=null&&C(t,["error"],c);const u=b(e,["description"]);u!=null&&C(t,["description"],u);const A=b(e,["baseModel"]);A!=null&&C(t,["baseModel"],A);const h=b(e,["tunedModel"]);h!=null&&C(t,["tunedModel"],NMe(h));const m=b(e,["supervisedTuningSpec"]);m!=null&&C(t,["supervisedTuningSpec"],m);const v=b(e,["tuningDataStats"]);v!=null&&C(t,["tuningDataStats"],v);const g=b(e,["encryptionSpec"]);g!=null&&C(t,["encryptionSpec"],g);const y=b(e,["partnerModelTuningSpec"]);y!=null&&C(t,["partnerModelTuningSpec"],y);const w=b(e,["distillationSpec"]);w!=null&&C(t,["distillationSpec"],w);const T=b(e,["experiment"]);T!=null&&C(t,["experiment"],T);const N=b(e,["labels"]);N!=null&&C(t,["labels"],N);const F=b(e,["pipelineJob"]);F!=null&&C(t,["pipelineJob"],F);const B=b(e,["satisfiesPzi"]);B!=null&&C(t,["satisfiesPzi"],B);const D=b(e,["satisfiesPzs"]);D!=null&&C(t,["satisfiesPzs"],D);const E=b(e,["serviceAccount"]);E!=null&&C(t,["serviceAccount"],E);const S=b(e,["tunedModelDisplayName"]);return S!=null&&C(t,["tunedModelDisplayName"],S),t}function BMe(e){const t={},r=b(e,["sdkHttpResponse"]);r!=null&&C(t,["sdkHttpResponse"],r);const n=b(e,["nextPageToken"]);n!=null&&C(t,["nextPageToken"],n);const a=b(e,["tuningJobs"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>S3(s))),C(t,["tuningJobs"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kMe extends wm{constructor(t){super(),this.apiClient=t,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new Gb(nm.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let a="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?a=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(a=n.name.split("/operations/")[0]),{name:a,state:m3.JOB_STATE_QUEUED}}}}async getInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=gMe(t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>S3(u))}else{const c=uMe(t);return o=lr("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>vee(u))}}async listInternal(t){var r,n,a,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=xMe(t);return o=lr("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=BMe(u),h=new WH;return Object.assign(h,A),h})}else{const c=fMe(t);return o=lr("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(A=>{const h=A;return h.sdkHttpResponse={headers:u.headers},h})),s.then(u=>{const A=_Me(u),h=new WH;return Object.assign(h,A),h})}}async tuneInternal(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI()){const o=CMe(t);return i=lr("tuningJobs",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),a.then(l=>S3(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var r,n;let a,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=mMe(t);return i=lr("tunedModels",o._url),s=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),a.then(l=>SMe(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IMe{async download(t,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const FMe=1024*1024*8,DMe=3,RMe=1e3,PMe=2,jB="x-goog-upload-status";async function MMe(e,t,r){var n,a,i;let s=0,o=0,l=new g3(new Response),c="upload";for(s=e.size;o<s;){const A=Math.min(FMe,s-o),h=e.slice(o,o+A);o+A>=s&&(c+=", finalize");let m=0,v=RMe;for(;m<DMe&&(l=await r.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(A)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[jB]));)m++,await OMe(v),v=v*PMe;if(o+=A,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[jB])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(l==null?void 0:l.json());if(((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[jB])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function LMe(e){return{size:e.size,type:e.type}}function OMe(e){return new Promise(t=>setTimeout(t,e))}class UMe{async upload(t,r,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await MMe(t,r,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await LMe(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jMe{create(t,r,n){return new HMe(t,r,n)}}class HMe{constructor(t,r,n){this.url=t,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yQ="x-goog-api-key";class QMe{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(yQ)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(yQ,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VMe="gl-node/";class zMe{constructor(t){var r;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=t.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=t.apiKey;const n=$4e(t.httpOptions,t.vertexai,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion;const a=new QMe(this.apiKey);this.apiClient=new c6e({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:VMe+"web",uploader:new UMe,downloader:new IMe}),this.models=new B6e(this.apiClient),this.live=new w6e(this.apiClient,a,new jMe),this.batches=new mIe(this.apiClient),this.chats=new y3e(this.models,this.apiClient),this.caches=new g3e(this.apiClient),this.files=new D3e(this.apiClient),this.operations=new D6e(this.apiClient),this.authTokens=new cMe(this.apiClient),this.tunings=new kMe(this.apiClient)}}const qb="acompanamientos",GMe=async()=>{try{const e=tr(Ft(en,qb),an("fecha","desc"));return(await $i(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompañamientos:",e),new Error("No se pudieron cargar los registros de acompañamiento")}},qMe=async e=>{try{return{id:(await Da(Ft(en,qb),{...e,fecha:e.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acompañamiento:",t),new Error("No se pudo crear el registro de acompañamiento")}},$Me=async(e,t)=>{try{const r=br(en,qb,e);await Fb(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",e),new Error("No se pudo actualizar el registro de acompañamiento")}},KMe=async e=>{try{const t=br(en,qb,e);await Fs(t)}catch(t){throw console.error("Error al eliminar acompañamiento:",t,"ID:",e),new Error("No se pudo eliminar el registro de acompañamiento")}},WMe=async e=>{try{const t=tr(Ft(en,qb),On("docente","==",e),an("fecha","desc"));return(await $i(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompañamientos por docente:",t),new Error("No se pudieron cargar los acompañamientos del docente")}},YMe=async()=>{try{const e=br(en,"configuracion","rubricaAcompanamiento"),t=await Ib(e);return t.exists()?t.data().rubrica:null}catch(e){return console.error("Error al obtener rúbrica personalizada:",e),null}},XMe=()=>{const[e,t]=L.useState([]),[r,n]=L.useState([]),[a,i]=L.useState(!1),[s,o]=L.useState(!1),[l,c]=L.useState(null),[u,A]=L.useState("list"),[h,m]=L.useState(null),[v,g]=L.useState(!1),[y,w]=L.useState(!1),T=ny,N=L.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[F,B]=L.useState(N),D=L.useCallback(async()=>{i(!0);try{const z=await GMe();t(z),c(null)}catch(z){console.error("Error al cargar acompañamientos desde Firestore",z),c("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{i(!1)}},[]),E=L.useCallback(async()=>{o(!0);try{const X=(await PZ()).filter(K=>K.profile===Ht.PROFESORADO).map(K=>K.nombreCompleto).sort();n(X)}catch(z){console.error("Error al cargar profesores desde Firestore",z),c("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);L.useEffect(()=>{D(),E()},[D,E]);const S=z=>{B(X=>({...X,[z.target.name]:z.target.value}))},k=(z,X)=>{B(K=>({...K,rubricaResultados:{...K.rubricaResultados,[z]:X}}))},H=async()=>{g(!0);const{rubricaResultados:z,observacionesGenerales:X}=F;let K=`Resultados de la Rúbrica:
`;T.forEach(U=>{U.criteria.forEach(Y=>{const Z=z[Y.name];if(Z&&Y.levels[Z-1]){const ne=Y.levels[Z-1];K+=`- Criterio: "${Y.name}" | Nivel: ${Z} (${ne})
`}})}),K+=`
Observaciones Generales del Evaluador:
${X||"No se proveyeron observaciones adicionales."}`;const se=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${K}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{yA("Acompañamiento - Consolidar Feedback");const Z=(await new zMe({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:se})).text.replace(/(\*\*|\*)/g,"");B(ne=>({...ne,retroalimentacionConsolidada:Z}))}catch(U){console.error("Error al generar retroalimentación con IA",U),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{g(!1)}},P=async()=>{const z=h;if(!z)return;w(!0);const X=e.find(ue=>ue.id===z);if(!X){w(!1);return}const K=new ur({orientation:"p",unit:"mm",format:"a4"}),se=20,U=K.internal.pageSize.getWidth(),Y=K.internal.pageSize.getHeight(),Z=U-se*2;let ne=se;const de=ue=>{ue.setFont("helvetica","bold"),ue.setFontSize(10),ue.setTextColor(100),ue.text("LICEO INDUSTRIAL DE RECOLETA",U/2,15,{align:"center"})};de(K),K.setFont("helvetica","bold"),K.setFontSize(18),K.setTextColor(40),K.text("Informe de Acompañamiento Docente",U/2,ne+10,{align:"center"}),ne+=25,sc(K,{startY:ne,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},X.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(X.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},X.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},X.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),ne=K.lastAutoTable.finalY+10;const xe=[],Ae=["Débil","Incipiente","Satisfactorio","Avanzado"];T.forEach(ue=>{xe.push([{content:ue.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),ue.criteria.forEach(le=>{const ie=X.rubricaResultados[le.name],De=ie?Ae[ie-1]:"No evaluado";xe.push([le.name,De])})}),sc(K,{startY:ne,head:[["Indicador","Nivel de Logro"]],body:xe,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:ue=>{ue.pageNumber>1&&de(K)}}),ne=K.lastAutoTable.finalY+15;const ae=(ue,le)=>{ne>Y-se-10&&(K.addPage(),de(K),ne=se),K.setFont("helvetica",le.style),K.setFontSize(le.size);const ie=K.splitTextToSize(ue,Z),De=ie.length*(le.size*.352778*1.15);ne+De>Y-se&&(K.addPage(),de(K),ne=se),K.text(ie,se,ne,{align:"left"}),ne+=De+(le.isTitle?5:8)};X.retroalimentacionConsolidada?X.retroalimentacionConsolidada.split(/(?=## )/).forEach(le=>{if(le.trim()){const ie=le.trim().split(`
`),De=ie[0].replace("## ",""),Le=ie.slice(1).join(`
`).trim();ae(De,{size:14,style:"bold",isTitle:!0}),ae(Le,{size:11,style:"normal",isTitle:!1})}}):(ae("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),ae("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),K.save(`Acompanamiento_${X.docente.replace(/\s/g,"_")}_${new Date(X.fecha).toLocaleDateString("es-CL")}.pdf`),w(!1)},M=async z=>{if(z.preventDefault(),!F.docente||!F.curso||!F.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let X=h;if(h)await $Me(h,F);else{const K=await qMe(F);m(K.id),B({...F}),X=K.id}await D(),X&&alert("¡Guardado correctamente!")}catch(X){console.error("Error al guardar acompañamiento:",X),c("Error al guardar el registro en la nube.")}},Q=()=>{B(N),m(null),A("form"),c(null)},V=z=>{B(z),m(z.id),A("form"),c(null)},te=async z=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await KMe(z),await D()}catch(X){console.error("Error al eliminar acompañamiento:",X),c("No se pudo eliminar el registro en la nube.")}},W=()=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),d.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),a&&d.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!a&&e.length===0&&d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),d.jsx("div",{className:"space-y-4",children:!a&&e.length>0&&e.map(z=>d.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:z.docente}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[z.curso," - ",z.asignatura]}),d.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(z.fecha).toLocaleDateString("es-CL")]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>V(z),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),d.jsx("button",{onClick:()=>te(z.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},z.id))})]}),re=()=>d.jsx("div",{className:"animate-fade-in",children:d.jsxs("form",{onSubmit:M,className:"space-y-8",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:h?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),d.jsx("button",{type:"button",onClick:()=>A("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),d.jsxs("select",{name:"docente",value:F.docente,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:s,children:[d.jsx("option",{value:"",children:s?"Cargando...":"Seleccione"}),r.map(z=>d.jsx("option",{value:z,children:z},z))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),d.jsxs("select",{name:"curso",value:F.curso,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"Seleccione"}),Ni.map(z=>d.jsx("option",{value:z,children:z},z))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),d.jsxs("select",{name:"asignatura",value:F.asignatura,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"Seleccione"}),cc.map(z=>d.jsx("option",{value:z,children:z},z))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),d.jsx("input",{type:"text",name:"bloques",value:F.bloques,onChange:S,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),d.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:T.map(z=>d.jsx(ft.Fragment,{children:z.criteria.map((X,K)=>d.jsxs("tr",{children:[K===0&&d.jsx("td",{rowSpan:z.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:z.domain}),d.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:X.name}),X.levels.map((se,U)=>{const Y=U+1,Z=F.rubricaResultados[X.name]===Y;return d.jsx("td",{onClick:()=>k(X.name,Y),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Z?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:se},Y)})]},X.name))},z.domain))})]})}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),d.jsx("textarea",{name:"observacionesGenerales",value:F.observacionesGenerales,onChange:S,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("textarea",{name:"retroalimentacionConsolidada",value:F.retroalimentacionConsolidada,onChange:S,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),d.jsx("button",{type:"button",onClick:H,disabled:v,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:v?"...":"Consolidar"})]})]}),d.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[d.jsx("button",{type:"button",onClick:P,disabled:!h||y,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:y?"...":"Exportar PDF"}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),d.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:u==="list"?W():re()})]})},TP="mensajes_internos",JMe="usuarios",xee="mensajes_read_status",yee=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},ZMe=(e,t)=>{const r=tr(Ft(Tt,TP),On("participants","array-contains",e),an("fecha","desc"));return yr(r,a=>{const i=a.docs.map(s=>yee(s));t(i)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},eLe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:Ar.fromDate(new Date)};await Da(Ft(Tt,TP),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},tLe=async e=>{try{const t=br(Tt,TP,e);await Fs(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},rLe=(e,t)=>{const r=br(Tt,xee,e);return yr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},nLe=async(e,t)=>{try{const r=br(Tt,xee,e);await ro(r,{messages:zpe(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},aLe=e=>{const t=tr(Ft(Tt,JMe),an("nombreCompleto","asc"));return yr(t,n=>{const a=n.docs.map(i=>yee(i));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},iLe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=L.useState("inbox"),[a,i]=L.useState([]),[s,o]=L.useState([]),[l,c]=L.useState(null),[u,A]=L.useState({announcements:[],messages:[]}),[h,m]=L.useState(!0),v={para:"",asunto:"",cuerpo:""},[g,y]=L.useState(v);L.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const E=ZMe(e.email,H=>{i(H),m(!1)}),S=aLe(o),k=rLe(e.id,H=>{A(H),t()});return()=>{E(),S(),k()}},[e.id,e.email,t]);const w=E=>{c(E),r==="inbox"&&!u.messages.includes(E.id)&&nLe(e.id,E.id).catch(S=>{console.error("Failed to mark message as read:",S)})},T=async E=>{if(E.preventDefault(),!g.para||!g.asunto.trim()||!g.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:e.email,para:g.para,asunto:g.asunto,cuerpo:g.cuerpo};try{await eLe(S),y(v),n("sent")}catch(k){console.error("Error sending message:",k),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},N=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await tLe(E),c(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},F=E=>{y({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},B=L.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),D=L.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?d.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):d.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[d.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[d.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:d.jsx("button",{onClick:()=>{n("compose"),c(null),y(v)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),d.jsxs("nav",{className:"p-2 space-y-1",children:[d.jsx("button",{onClick:()=>{n("inbox"),c(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),d.jsx("button",{onClick:()=>{n("sent"),c(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&d.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?B:D).map(E=>{const S=r==="inbox"&&!u.messages.includes(E.id);return d.jsxs("div",{onClick:()=>w(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),S&&d.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),d.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),d.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),d.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),d.jsxs("form",{onSubmit:T,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),d.jsxs("select",{id:"para",value:g.para,onChange:E=>y({...g,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{value:"",children:"Seleccione un destinatario..."}),s.filter(E=>E.email!==e.email).map(E=>d.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),d.jsx("input",{type:"text",id:"asunto",value:g.asunto,onChange:E=>y({...g,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),d.jsx("textarea",{id:"cuerpo",value:g.cuerpo,onChange:E=>y({...g,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),d.jsx("div",{className:"text-right",children:d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?d.jsxs("div",{children:[d.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[d.jsx("strong",{children:"De:"})," ",l.de," ",d.jsx("br",{}),d.jsx("strong",{children:"Para:"})," ",l.para," ",d.jsx("br",{}),d.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),d.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),d.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&d.jsx("button",{onClick:()=>F(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),d.jsx("button",{onClick:()=>N(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):d.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:d.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T3=function(e,t){return T3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},T3(e,t)};function id(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");T3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var N3=function(){return N3=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},N3.apply(this,arguments)};function Go(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(A){s(A)}}function l(u){try{c(n.throw(u))}catch(A){s(A)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(e,[])).next())})}function wo(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function O2(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||t)}var CA=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),CT=function(e,t){return CA.fromClientRect(e,t.getBoundingClientRect())},sLe=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new CA(0,0,n,a)},ET=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Ci=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,i="";++a<r;){var s=e[a];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(a+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},bQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oLe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var U2=0;U2<bQ.length;U2++)oLe[bQ.charCodeAt(U2)]=U2;var wQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var j2=0;j2<wQ.length;j2++)U1[wQ.charCodeAt(j2)]=j2;var lLe=function(e){var t=e.length*.75,r=e.length,n,a=0,i,s,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=U1[e.charCodeAt(n)],s=U1[e.charCodeAt(n+1)],o=U1[e.charCodeAt(n+2)],l=U1[e.charCodeAt(n+3)],u[a++]=i<<2|s>>4,u[a++]=(s&15)<<4|o>>2,u[a++]=(o&3)<<6|l&63;return c},cLe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},uLe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Mp=5,NP=11,HB=2,dLe=NP-Mp,bee=65536>>Mp,fLe=1<<Mp,QB=fLe-1,ALe=1024>>Mp,hLe=bee+ALe,pLe=hLe,mLe=32,gLe=pLe+mLe,vLe=65536>>NP,xLe=1<<dLe,yLe=xLe-1,CQ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},bLe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},wLe=function(e,t){var r=lLe(e),n=Array.isArray(r)?uLe(r):new Uint32Array(r),a=Array.isArray(r)?cLe(r):new Uint16Array(r),i=24,s=CQ(a,i/2,n[4]/2),o=n[5]===2?CQ(a,(i+n[4])/2):bLe(n,Math.ceil((i+n[4])/4));return new CLe(n[0],n[1],n[2],n[3],s,o)},CLe=function(){function e(t,r,n,a,i,s){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=s}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Mp],r=(r<<HB)+(t&QB),this.data[r];if(t<=65535)return r=this.index[bee+(t-55296>>Mp)],r=(r<<HB)+(t&QB),this.data[r];if(t<this.highStart)return r=gLe-vLe+(t>>NP),r=this.index[r],r+=t>>Mp&yLe,r=this.index[r],r=(r<<HB)+(t&QB),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),EQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ELe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var H2=0;H2<EQ.length;H2++)ELe[EQ.charCodeAt(H2)]=H2;var _Le="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",_Q=50,SLe=1,wee=2,Cee=3,TLe=4,NLe=5,SQ=7,Eee=8,TQ=9,$h=10,B3=11,NQ=12,k3=13,BLe=14,j1=15,I3=16,Q2=17,c1=18,kLe=19,BQ=20,F3=21,u1=22,VB=23,dg=24,$l=25,H1=26,Q1=27,fg=28,ILe=29,gp=30,FLe=31,V2=32,z2=33,D3=34,R3=35,P3=36,Zy=37,M3=38,tE=39,rE=40,zB=41,_ee=42,DLe=43,RLe=[9001,65288],See="!",mn="×",G2="÷",L3=wLe(_Le),Yf=[gp,P3],O3=[SLe,wee,Cee,NLe],Tee=[$h,Eee],kQ=[Q1,H1],PLe=O3.concat(Tee),IQ=[M3,tE,rE,D3,R3],MLe=[j1,k3],LLe=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(i,s){var o=L3.get(i);if(o>_Q?(a.push(!0),o-=_Q):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(s),r.push(I3);if(o===TLe||o===B3){if(s===0)return n.push(s),r.push(gp);var l=r[s-1];return PLe.indexOf(l)===-1?(n.push(n[s-1]),r.push(l)):(n.push(s),r.push(gp))}if(n.push(s),o===FLe)return r.push(t==="strict"?F3:Zy);if(o===_ee||o===ILe)return r.push(gp);if(o===DLe)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(Zy):r.push(gp);r.push(o)}),[n,r,a]},GB=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var i=r;i<=n.length;){i++;var s=n[i];if(s===t)return!0;if(s!==$h)break}if(a===$h)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var l=r;l<=n.length;){l++;var s=n[l];if(s===t)return!0;if(s!==$h)break}if(o!==$h)break}return!1},FQ=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===$h)r--;else return n}return 0},OLe=function(e,t,r,n,a){if(r[n]===0)return mn;var i=n-1;if(Array.isArray(a)&&a[i]===!0)return mn;var s=i-1,o=i+1,l=t[i],c=s>=0?t[s]:0,u=t[o];if(l===wee&&u===Cee)return mn;if(O3.indexOf(l)!==-1)return See;if(O3.indexOf(u)!==-1||Tee.indexOf(u)!==-1)return mn;if(FQ(i,t)===Eee)return G2;if(L3.get(e[i])===B3||(l===V2||l===z2)&&L3.get(e[o])===B3||l===SQ||u===SQ||l===TQ||[$h,k3,j1].indexOf(l)===-1&&u===TQ||[Q2,c1,kLe,dg,fg].indexOf(u)!==-1||FQ(i,t)===u1||GB(VB,u1,i,t)||GB([Q2,c1],F3,i,t)||GB(NQ,NQ,i,t))return mn;if(l===$h)return G2;if(l===VB||u===VB)return mn;if(u===I3||l===I3)return G2;if([k3,j1,F3].indexOf(u)!==-1||l===BLe||c===P3&&MLe.indexOf(l)!==-1||l===fg&&u===P3||u===BQ||Yf.indexOf(u)!==-1&&l===$l||Yf.indexOf(l)!==-1&&u===$l||l===Q1&&[Zy,V2,z2].indexOf(u)!==-1||[Zy,V2,z2].indexOf(l)!==-1&&u===H1||Yf.indexOf(l)!==-1&&kQ.indexOf(u)!==-1||kQ.indexOf(l)!==-1&&Yf.indexOf(u)!==-1||[Q1,H1].indexOf(l)!==-1&&(u===$l||[u1,j1].indexOf(u)!==-1&&t[o+1]===$l)||[u1,j1].indexOf(l)!==-1&&u===$l||l===$l&&[$l,fg,dg].indexOf(u)!==-1)return mn;if([$l,fg,dg,Q2,c1].indexOf(u)!==-1)for(var A=i;A>=0;){var h=t[A];if(h===$l)return mn;if([fg,dg].indexOf(h)!==-1)A--;else break}if([Q1,H1].indexOf(u)!==-1)for(var A=[Q2,c1].indexOf(l)!==-1?s:i;A>=0;){var h=t[A];if(h===$l)return mn;if([fg,dg].indexOf(h)!==-1)A--;else break}if(M3===l&&[M3,tE,D3,R3].indexOf(u)!==-1||[tE,D3].indexOf(l)!==-1&&[tE,rE].indexOf(u)!==-1||[rE,R3].indexOf(l)!==-1&&u===rE||IQ.indexOf(l)!==-1&&[BQ,H1].indexOf(u)!==-1||IQ.indexOf(u)!==-1&&l===Q1||Yf.indexOf(l)!==-1&&Yf.indexOf(u)!==-1||l===dg&&Yf.indexOf(u)!==-1||Yf.concat($l).indexOf(l)!==-1&&u===u1&&RLe.indexOf(e[o])===-1||Yf.concat($l).indexOf(u)!==-1&&l===c1)return mn;if(l===zB&&u===zB){for(var m=r[i],v=1;m>0&&(m--,t[m]===zB);)v++;if(v%2!==0)return mn}return l===V2&&u===z2?mn:G2},ULe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=LLe(e,t.lineBreak),n=r[0],a=r[1],i=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[$l,gp,_ee].indexOf(o)!==-1?Zy:o}));var s=t.wordBreak==="keep-all"?i.map(function(o,l){return o&&e[l]>=19968&&e[l]<=40959}):void 0;return[n,a,s]},jLe=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===See,this.start=n,this.end=a}return e.prototype.slice=function(){return Ci.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),HLe=function(e,t){var r=ET(e),n=ULe(r,t),a=n[0],i=n[1],s=n[2],o=r.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=mn;c<o&&(u=OLe(r,i,a,++c,s))===mn;);if(u!==mn||c===o){var A=new jLe(r,u,l,c);return l=c,{value:A,done:!1}}return{done:!0,value:null}}}},QLe=1,VLe=2,$b=4,DQ=8,g_=10,RQ=47,my=92,zLe=9,GLe=32,q2=34,d1=61,qLe=35,$Le=36,KLe=37,$2=39,K2=40,f1=41,WLe=95,vl=45,YLe=33,XLe=60,JLe=62,ZLe=64,eOe=91,tOe=93,rOe=61,nOe=123,W2=63,aOe=125,PQ=124,iOe=126,sOe=128,MQ=65533,qB=42,bp=43,oOe=44,lOe=58,cOe=59,eb=46,uOe=0,dOe=8,fOe=11,AOe=14,hOe=31,pOe=127,jd=-1,Nee=48,Bee=97,kee=101,mOe=102,gOe=117,vOe=122,Iee=65,Fee=69,Dee=70,xOe=85,yOe=90,To=function(e){return e>=Nee&&e<=57},bOe=function(e){return e>=55296&&e<=57343},Ag=function(e){return To(e)||e>=Iee&&e<=Dee||e>=Bee&&e<=mOe},wOe=function(e){return e>=Bee&&e<=vOe},COe=function(e){return e>=Iee&&e<=yOe},EOe=function(e){return wOe(e)||COe(e)},_Oe=function(e){return e>=sOe},Y2=function(e){return e===g_||e===zLe||e===GLe},v_=function(e){return EOe(e)||_Oe(e)||e===WLe},LQ=function(e){return v_(e)||To(e)||e===vl},SOe=function(e){return e>=uOe&&e<=dOe||e===fOe||e>=AOe&&e<=hOe||e===pOe},Fh=function(e,t){return e!==my?!1:t!==g_},X2=function(e,t,r){return e===vl?v_(t)||Fh(t,r):v_(e)?!0:!!(e===my&&Fh(e,t))},$B=function(e,t,r){return e===bp||e===vl?To(t)?!0:t===eb&&To(r):To(e===eb?t:e)},TOe=function(e){var t=0,r=1;(e[t]===bp||e[t]===vl)&&(e[t]===vl&&(r=-1),t++);for(var n=[];To(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Ci.apply(void 0,n),10):0;e[t]===eb&&t++;for(var i=[];To(e[t]);)i.push(e[t++]);var s=i.length,o=s?parseInt(Ci.apply(void 0,i),10):0;(e[t]===Fee||e[t]===kee)&&t++;var l=1;(e[t]===bp||e[t]===vl)&&(e[t]===vl&&(l=-1),t++);for(var c=[];To(e[t]);)c.push(e[t++]);var u=c.length?parseInt(Ci.apply(void 0,c),10):0;return r*(a+o*Math.pow(10,-s))*Math.pow(10,l*u)},NOe={type:2},BOe={type:3},kOe={type:4},IOe={type:13},FOe={type:8},DOe={type:21},ROe={type:9},POe={type:10},MOe={type:11},LOe={type:12},OOe={type:14},J2={type:23},UOe={type:1},jOe={type:25},HOe={type:24},QOe={type:26},VOe={type:27},zOe={type:28},GOe={type:29},qOe={type:31},U3={type:32},Ree=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(ET(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==U3;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case q2:return this.consumeStringToken(q2);case qLe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(LQ(r)||Fh(n,a)){var i=X2(r,n,a)?VLe:QLe,s=this.consumeName();return{type:5,value:s,flags:i}}break;case $Le:if(this.peekCodePoint(0)===d1)return this.consumeCodePoint(),IOe;break;case $2:return this.consumeStringToken($2);case K2:return NOe;case f1:return BOe;case qB:if(this.peekCodePoint(0)===d1)return this.consumeCodePoint(),OOe;break;case bp:if($B(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case oOe:return kOe;case vl:var o=t,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if($B(o,l,c))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(X2(o,l,c))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(l===vl&&c===JLe)return this.consumeCodePoint(),this.consumeCodePoint(),HOe;break;case eb:if($B(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case RQ:if(this.peekCodePoint(0)===qB)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===qB&&(u=this.consumeCodePoint(),u===RQ))return this.consumeToken();if(u===jd)return this.consumeToken()}break;case lOe:return QOe;case cOe:return VOe;case XLe:if(this.peekCodePoint(0)===YLe&&this.peekCodePoint(1)===vl&&this.peekCodePoint(2)===vl)return this.consumeCodePoint(),this.consumeCodePoint(),jOe;break;case ZLe:var A=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(X2(A,h,m)){var s=this.consumeName();return{type:7,value:s}}break;case eOe:return zOe;case my:if(Fh(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case tOe:return GOe;case rOe:if(this.peekCodePoint(0)===d1)return this.consumeCodePoint(),FOe;break;case nOe:return MOe;case aOe:return LOe;case gOe:case xOe:var v=this.peekCodePoint(0),g=this.peekCodePoint(1);return v===bp&&(Ag(g)||g===W2)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case PQ:if(this.peekCodePoint(0)===d1)return this.consumeCodePoint(),ROe;if(this.peekCodePoint(0)===PQ)return this.consumeCodePoint(),DOe;break;case iOe:if(this.peekCodePoint(0)===d1)return this.consumeCodePoint(),POe;break;case jd:return U3}return Y2(t)?(this.consumeWhiteSpace(),qOe):To(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):v_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Ci(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Ag(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===W2&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Ci.apply(void 0,t.map(function(l){return l===W2?Nee:l})),16),i=parseInt(Ci.apply(void 0,t.map(function(l){return l===W2?Dee:l})),16);return{type:30,start:a,end:i}}var s=parseInt(Ci.apply(void 0,t),16);if(this.peekCodePoint(0)===vl&&Ag(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Ag(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(Ci.apply(void 0,o),16);return{type:30,start:s,end:i}}else return{type:30,start:s,end:s}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===K2?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===K2?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===jd)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===$2||r===q2){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===jd||this.peekCodePoint(0)===f1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),J2)}for(;;){var a=this.consumeCodePoint();if(a===jd||a===f1)return{type:22,value:Ci.apply(void 0,t)};if(Y2(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===jd||this.peekCodePoint(0)===f1?(this.consumeCodePoint(),{type:22,value:Ci.apply(void 0,t)}):(this.consumeBadUrlRemnants(),J2);if(a===q2||a===$2||a===K2||SOe(a))return this.consumeBadUrlRemnants(),J2;if(a===my)if(Fh(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),J2;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Y2(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===f1||t===jd)return;Fh(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Ci.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===jd||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===g_)return this._value.splice(0,n),UOe;if(a===my){var i=this._value[n+1];i!==jd&&i!==void 0&&(i===g_?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Fh(a,i)&&(r+=this.consumeStringSlice(n),r+=Ci(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=$b,n=this.peekCodePoint(0);for((n===bp||n===vl)&&t.push(this.consumeCodePoint());To(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===eb&&To(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=DQ;To(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===Fee||n===kee)&&((a===bp||a===vl)&&To(i)||To(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=DQ;To(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[TOe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),s=this.peekCodePoint(2);if(X2(a,i,s)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===KLe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Ag(t)){for(var r=Ci(t);Ag(this.peekCodePoint(0))&&r.length<6;)r+=Ci(this.consumeCodePoint());Y2(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||bOe(n)||n>1114111?MQ:n}return t===jd?MQ:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(LQ(r))t+=Ci(r);else if(Fh(r,this.peekCodePoint(0)))t+=Ci(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Pee=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Ree;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||KOe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?U3:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Kb=function(e){return e.type===15},lx=function(e){return e.type===17},ha=function(e){return e.type===20},$Oe=function(e){return e.type===0},j3=function(e,t){return ha(e)&&e.value===t},Mee=function(e){return e.type!==31},Nv=function(e){return e.type!==31&&e.type!==4},gf=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},KOe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},C0=function(e){return e.type===17||e.type===15},Vi=function(e){return e.type===16||C0(e)},Lee=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Zs={type:17,number:0,flags:$b},BP={type:16,number:50,flags:$b},Kh={type:16,number:100,flags:$b},V1=function(e,t,r){var n=e[0],a=e[1];return[Ea(n,t),Ea(typeof a<"u"?a:n,r)]},Ea=function(e,t){if(e.type===16)return e.number/100*t;if(Kb(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Oee="deg",Uee="grad",jee="rad",Hee="turn",_T={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Oee:return Math.PI*t.number/180;case Uee:return Math.PI/200*t.number;case jee:return t.number;case Hee:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Qee=function(e){return e.type===15&&(e.unit===Oee||e.unit===Uee||e.unit===jee||e.unit===Hee)},Vee=function(e){var t=e.filter(ha).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Zs,Zs];case"to top":case"bottom":return iu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Zs,Kh];case"to right":case"left":return iu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Kh,Kh];case"to bottom":case"top":return iu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Kh,Zs];case"to left":case"right":return iu(270)}return 0},iu=function(e){return Math.PI*e/180},n0={name:"color",parse:function(e,t){if(t.type===18){var r=WOe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3);return Wh(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3),s=t.value.substring(3,4);return Wh(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(s+s,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6);return Wh(parseInt(n,16),parseInt(a,16),parseInt(i,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6),s=t.value.substring(6,8);return Wh(parseInt(n,16),parseInt(a,16),parseInt(i,16),parseInt(s,16)/255)}}if(t.type===20){var o=fA[t.value.toUpperCase()];if(typeof o<"u")return o}return fA.TRANSPARENT}},a0=function(e){return(255&e)===0},Cs=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},Wh=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},OQ=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},UQ=function(e,t){var r=t.filter(Nv);if(r.length===3){var n=r.map(OQ),a=n[0],i=n[1],s=n[2];return Wh(a,i,s,1)}if(r.length===4){var o=r.map(OQ),a=o[0],i=o[1],s=o[2],l=o[3];return Wh(a,i,s,l)}return 0};function KB(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var jQ=function(e,t){var r=t.filter(Nv),n=r[0],a=r[1],i=r[2],s=r[3],o=(n.type===17?iu(n.number):_T.parse(e,n))/(Math.PI*2),l=Vi(a)?a.number/100:0,c=Vi(i)?i.number/100:0,u=typeof s<"u"&&Vi(s)?Ea(s,1):1;if(l===0)return Wh(c*255,c*255,c*255,1);var A=c<=.5?c*(l+1):c+l-c*l,h=c*2-A,m=KB(h,A,o+1/3),v=KB(h,A,o),g=KB(h,A,o-1/3);return Wh(m*255,v*255,g*255,u)},WOe={hsl:jQ,hsla:jQ,rgb:UQ,rgba:UQ},gy=function(e,t){return n0.parse(e,Pee.create(t).parseComponentValue())},fA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},YOe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ha(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},XOe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ST=function(e,t){var r=n0.parse(e,t[0]),n=t[1];return n&&Vi(n)?{color:r,stop:n}:{color:r,stop:null}},HQ=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Zs),n.stop===null&&(n.stop=Kh);for(var a=[],i=0,s=0;s<e.length;s++){var o=e[s].stop;if(o!==null){var l=Ea(o,t);l>i?a.push(l):a.push(i),i=l}else a.push(null)}for(var c=null,s=0;s<a.length;s++){var u=a[s];if(u===null)c===null&&(c=s);else if(c!==null){for(var A=s-c,h=a[c-1],m=(u-h)/(A+1),v=1;v<=A;v++)a[c+v-1]=m*v;c=null}}return e.map(function(g,y){var w=g.color;return{color:w,stop:Math.max(Math.min(1,a[y]/t),0)}})},JOe=function(e,t,r){var n=t/2,a=r/2,i=Ea(e[0],t)-n,s=a-Ea(e[1],r);return(Math.atan2(s,i)+Math.PI*2)%(Math.PI*2)},ZOe=function(e,t,r){var n=typeof e=="number"?e:JOe(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),i=t/2,s=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[a,i-c,i+c,s-l,s+l]},Vu=function(e,t){return Math.sqrt(e*e+t*t)},QQ=function(e,t,r,n,a){var i=[[0,0],[0,t],[e,0],[e,t]];return i.reduce(function(s,o){var l=o[0],c=o[1],u=Vu(r-l,n-c);return(a?u<s.optimumDistance:u>s.optimumDistance)?{optimumCorner:o,optimumDistance:u}:s},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},eUe=function(e,t,r,n,a){var i=0,s=0;switch(e.size){case 0:e.shape===0?i=s=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-n)),s=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)i=s=Math.min(Vu(t,r),Vu(t,r-a),Vu(t-n,r),Vu(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),l=QQ(n,a,t,r,!0),c=l[0],u=l[1];i=Vu(c-t,(u-r)/o),s=o*i}break;case 1:e.shape===0?i=s=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-n)),s=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)i=s=Math.max(Vu(t,r),Vu(t,r-a),Vu(t-n,r),Vu(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),A=QQ(n,a,t,r,!1),c=A[0],u=A[1];i=Vu(c-t,(u-r)/o),s=o*i}break}return Array.isArray(e.size)&&(i=Ea(e.size[0],n),s=e.size.length===2?Ea(e.size[1],a):i),[i,s]},tUe=function(e,t){var r=iu(180),n=[];return gf(t).forEach(function(a,i){if(i===0){var s=a[0];if(s.type===20&&s.value==="to"){r=Vee(a);return}else if(Qee(s)){r=_T.parse(e,s);return}}var o=ST(e,a);n.push(o)}),{angle:r,stops:n,type:1}},Z2=function(e,t){var r=iu(180),n=[];return gf(t).forEach(function(a,i){if(i===0){var s=a[0];if(s.type===20&&["top","left","right","bottom"].indexOf(s.value)!==-1){r=Vee(a);return}else if(Qee(s)){r=(_T.parse(e,s)+iu(270))%iu(360);return}}var o=ST(e,a);n.push(o)}),{angle:r,stops:n,type:1}},rUe=function(e,t){var r=iu(180),n=[],a=1,i=0,s=3,o=[];return gf(t).forEach(function(l,c){var u=l[0];if(c===0){if(ha(u)&&u.value==="linear"){a=1;return}else if(ha(u)&&u.value==="radial"){a=2;return}}if(u.type===18){if(u.name==="from"){var A=n0.parse(e,u.values[0]);n.push({stop:Zs,color:A})}else if(u.name==="to"){var A=n0.parse(e,u.values[0]);n.push({stop:Kh,color:A})}else if(u.name==="color-stop"){var h=u.values.filter(Nv);if(h.length===2){var A=n0.parse(e,h[1]),m=h[0];lx(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:A})}}}}),a===1?{angle:(r+iu(180))%iu(360),stops:n,type:a}:{size:s,shape:i,stops:n,position:o,type:a}},zee="closest-side",Gee="farthest-side",qee="closest-corner",$ee="farthest-corner",Kee="circle",Wee="ellipse",Yee="cover",Xee="contain",nUe=function(e,t){var r=0,n=3,a=[],i=[];return gf(t).forEach(function(s,o){var l=!0;if(o===0){var c=!1;l=s.reduce(function(A,h){if(c)if(ha(h))switch(h.value){case"center":return i.push(BP),A;case"top":case"left":return i.push(Zs),A;case"right":case"bottom":return i.push(Kh),A}else(Vi(h)||C0(h))&&i.push(h);else if(ha(h))switch(h.value){case Kee:return r=0,!1;case Wee:return r=1,!1;case"at":return c=!0,!1;case zee:return n=0,!1;case Yee:case Gee:return n=1,!1;case Xee:case qee:return n=2,!1;case $ee:return n=3,!1}else if(C0(h)||Vi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return A},l)}if(l){var u=ST(e,s);a.push(u)}}),{size:n,shape:r,stops:a,position:i,type:2}},eC=function(e,t){var r=0,n=3,a=[],i=[];return gf(t).forEach(function(s,o){var l=!0;if(o===0?l=s.reduce(function(u,A){if(ha(A))switch(A.value){case"center":return i.push(BP),!1;case"top":case"left":return i.push(Zs),!1;case"right":case"bottom":return i.push(Kh),!1}else if(Vi(A)||C0(A))return i.push(A),!1;return u},l):o===1&&(l=s.reduce(function(u,A){if(ha(A))switch(A.value){case Kee:return r=0,!1;case Wee:return r=1,!1;case Xee:case zee:return n=0,!1;case Gee:return n=1,!1;case qee:return n=2,!1;case Yee:case $ee:return n=3,!1}else if(C0(A)||Vi(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return u},l)),l){var c=ST(e,s);a.push(c)}}),{size:n,shape:r,stops:a,position:i,type:2}},aUe=function(e){return e.type===1},iUe=function(e){return e.type===2},kP={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=Jee[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function sUe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Jee[e.name])}var Jee={"linear-gradient":tUe,"-moz-linear-gradient":Z2,"-ms-linear-gradient":Z2,"-o-linear-gradient":Z2,"-webkit-linear-gradient":Z2,"radial-gradient":nUe,"-moz-radial-gradient":eC,"-ms-radial-gradient":eC,"-o-radial-gradient":eC,"-webkit-radial-gradient":eC,"-webkit-gradient":rUe},oUe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Nv(n)&&sUe(n)}).map(function(n){return kP.parse(e,n)})}},lUe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ha(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},cUe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return gf(t).map(function(r){return r.filter(Vi)}).map(Lee)}},uUe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return gf(t).map(function(r){return r.filter(ha).map(function(n){return n.value}).join(" ")}).map(dUe)}},dUe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},lv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(lv||(lv={}));var fUe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return gf(t).map(function(r){return r.filter(AUe)})}},AUe=function(e){return ha(e)||Vi(e)},TT=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},hUe=TT("top"),pUe=TT("right"),mUe=TT("bottom"),gUe=TT("left"),NT=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Lee(r.filter(Vi))}}},vUe=NT("top-left"),xUe=NT("top-right"),yUe=NT("bottom-right"),bUe=NT("bottom-left"),BT=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},wUe=BT("top"),CUe=BT("right"),EUe=BT("bottom"),_Ue=BT("left"),kT=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Kb(r)?r.number:0}}},SUe=kT("top"),TUe=kT("right"),NUe=kT("bottom"),BUe=kT("left"),kUe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},IUe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},FUe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(ha).reduce(function(r,n){return r|DUe(n.value)},0)}},DUe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},RUe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},PUe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},x_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(x_||(x_={}));var MUe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return x_.STRICT;case"normal":default:return x_.NORMAL}}},LUe={name:"line-height",initialValue:"normal",prefix:!1,type:4},VQ=function(e,t){return ha(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Vi(e)?Ea(e,t):t},OUe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:kP.parse(e,t)}},UUe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},H3={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},IT=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},jUe=IT("top"),HUe=IT("right"),QUe=IT("bottom"),VUe=IT("left"),zUe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(ha).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},GUe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},FT=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},qUe=FT("top"),$Ue=FT("right"),KUe=FT("bottom"),WUe=FT("left"),YUe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},XUe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},JUe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&j3(t[0],"none")?[]:gf(t).map(function(r){for(var n={color:fA.TRANSPARENT,offsetX:Zs,offsetY:Zs,blur:Zs},a=0,i=0;i<r.length;i++){var s=r[i];C0(s)?(a===0?n.offsetX=s:a===1?n.offsetY=s:n.blur=s,a++):n.color=n0.parse(e,s)}return n})}},ZUe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},eje={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=nje[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},tje=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},rje=function(e){var t=e.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var s=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,i,s,o]:null},nje={matrix:tje,matrix3d:rje},zQ={type:16,number:50,flags:$b},aje=[zQ,zQ],ije={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Vi);return r.length!==2?aje:[r[0],r[1]]}},sje={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},vy;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(vy||(vy={}));var oje={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return vy.BREAK_ALL;case"keep-all":return vy.KEEP_ALL;case"normal":default:return vy.NORMAL}}},lje={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(lx(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Zee={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},cje={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return lx(t)?t.number:1}},uje={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dje={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(ha).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},fje={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Aje={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},hje={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(lx(t))return t.number;if(ha(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},pje={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(ha).map(function(r){return r.value})}},mje={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},os=function(e,t){return(e&t)!==0},gje={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},vje={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Mee),i=0;i<a.length;i++){var s=a[i],o=a[i+1];if(s.type===20){var l=o&&lx(o)?o.number:1;n.push({counter:s.value,increment:l})}}return n}},xje={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Mee),a=0;a<n.length;a++){var i=n[a],s=n[a+1];if(ha(i)&&i.value!=="none"){var o=s&&lx(s)?s.number:0;r.push({counter:i.value,reset:o})}}return r}},yje={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Kb).map(function(r){return Zee.parse(e,r)})}},bje={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter($Oe);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var s=a[i].value,o=a[i+1].value;n.push({open:s,close:o})}return n}},GQ=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},wje={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&j3(t[0],"none")?[]:gf(t).map(function(r){for(var n={color:255,offsetX:Zs,offsetY:Zs,blur:Zs,spread:Zs,inset:!1},a=0,i=0;i<r.length;i++){var s=r[i];j3(s,"inset")?n.inset=!0:C0(s)?(a===0?n.offsetX=s:a===1?n.offsetY=s:a===2?n.blur=s:n.spread=s,a++):n.color=n0.parse(e,s)}return n})}},Cje={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(ha).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Eje={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},_je={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Kb(t)?t.number:0}},Sje=function(){function e(t,r){var n,a;this.animationDuration=Jt(t,yje,r.animationDuration),this.backgroundClip=Jt(t,YOe,r.backgroundClip),this.backgroundColor=Jt(t,XOe,r.backgroundColor),this.backgroundImage=Jt(t,oUe,r.backgroundImage),this.backgroundOrigin=Jt(t,lUe,r.backgroundOrigin),this.backgroundPosition=Jt(t,cUe,r.backgroundPosition),this.backgroundRepeat=Jt(t,uUe,r.backgroundRepeat),this.backgroundSize=Jt(t,fUe,r.backgroundSize),this.borderTopColor=Jt(t,hUe,r.borderTopColor),this.borderRightColor=Jt(t,pUe,r.borderRightColor),this.borderBottomColor=Jt(t,mUe,r.borderBottomColor),this.borderLeftColor=Jt(t,gUe,r.borderLeftColor),this.borderTopLeftRadius=Jt(t,vUe,r.borderTopLeftRadius),this.borderTopRightRadius=Jt(t,xUe,r.borderTopRightRadius),this.borderBottomRightRadius=Jt(t,yUe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Jt(t,bUe,r.borderBottomLeftRadius),this.borderTopStyle=Jt(t,wUe,r.borderTopStyle),this.borderRightStyle=Jt(t,CUe,r.borderRightStyle),this.borderBottomStyle=Jt(t,EUe,r.borderBottomStyle),this.borderLeftStyle=Jt(t,_Ue,r.borderLeftStyle),this.borderTopWidth=Jt(t,SUe,r.borderTopWidth),this.borderRightWidth=Jt(t,TUe,r.borderRightWidth),this.borderBottomWidth=Jt(t,NUe,r.borderBottomWidth),this.borderLeftWidth=Jt(t,BUe,r.borderLeftWidth),this.boxShadow=Jt(t,wje,r.boxShadow),this.color=Jt(t,kUe,r.color),this.direction=Jt(t,IUe,r.direction),this.display=Jt(t,FUe,r.display),this.float=Jt(t,RUe,r.cssFloat),this.fontFamily=Jt(t,fje,r.fontFamily),this.fontSize=Jt(t,Aje,r.fontSize),this.fontStyle=Jt(t,mje,r.fontStyle),this.fontVariant=Jt(t,pje,r.fontVariant),this.fontWeight=Jt(t,hje,r.fontWeight),this.letterSpacing=Jt(t,PUe,r.letterSpacing),this.lineBreak=Jt(t,MUe,r.lineBreak),this.lineHeight=Jt(t,LUe,r.lineHeight),this.listStyleImage=Jt(t,OUe,r.listStyleImage),this.listStylePosition=Jt(t,UUe,r.listStylePosition),this.listStyleType=Jt(t,H3,r.listStyleType),this.marginTop=Jt(t,jUe,r.marginTop),this.marginRight=Jt(t,HUe,r.marginRight),this.marginBottom=Jt(t,QUe,r.marginBottom),this.marginLeft=Jt(t,VUe,r.marginLeft),this.opacity=Jt(t,cje,r.opacity);var i=Jt(t,zUe,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Jt(t,GUe,r.overflowWrap),this.paddingTop=Jt(t,qUe,r.paddingTop),this.paddingRight=Jt(t,$Ue,r.paddingRight),this.paddingBottom=Jt(t,KUe,r.paddingBottom),this.paddingLeft=Jt(t,WUe,r.paddingLeft),this.paintOrder=Jt(t,Cje,r.paintOrder),this.position=Jt(t,XUe,r.position),this.textAlign=Jt(t,YUe,r.textAlign),this.textDecorationColor=Jt(t,uje,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Jt(t,dje,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Jt(t,JUe,r.textShadow),this.textTransform=Jt(t,ZUe,r.textTransform),this.transform=Jt(t,eje,r.transform),this.transformOrigin=Jt(t,ije,r.transformOrigin),this.visibility=Jt(t,sje,r.visibility),this.webkitTextStrokeColor=Jt(t,Eje,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Jt(t,_je,r.webkitTextStrokeWidth),this.wordBreak=Jt(t,oje,r.wordBreak),this.zIndex=Jt(t,lje,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return a0(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return os(this.display,4)||os(this.display,33554432)||os(this.display,268435456)||os(this.display,536870912)||os(this.display,67108864)||os(this.display,134217728)},e}(),Tje=function(){function e(t,r){this.content=Jt(t,gje,r.content),this.quotes=Jt(t,bje,r.quotes)}return e}(),qQ=function(){function e(t,r){this.counterIncrement=Jt(t,vje,r.counterIncrement),this.counterReset=Jt(t,xje,r.counterReset)}return e}(),Jt=function(e,t,r){var n=new Ree,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var i=new Pee(n.read());switch(t.type){case 2:var s=i.parseComponentValue();return t.parse(e,ha(s)?s.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return _T.parse(e,i.parseComponentValue());case"color":return n0.parse(e,i.parseComponentValue());case"image":return kP.parse(e,i.parseComponentValue());case"length":var o=i.parseComponentValue();return C0(o)?o:Zs;case"length-percentage":var l=i.parseComponentValue();return Vi(l)?l:Zs;case"time":return Zee.parse(e,i.parseComponentValue())}break}},Nje="data-html2canvas-debug",Bje=function(e){var t=e.getAttribute(Nje);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Q3=function(e,t){var r=Bje(e);return r===1||t===r},vf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Q3(r,3))debugger;this.styles=new Sje(t,window.getComputedStyle(r,null)),G3(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=CT(this.context,r),Q3(r,4)&&(this.flags|=16)}return e}(),kje="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",$Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tC=0;tC<$Q.length;tC++)z1[$Q.charCodeAt(tC)]=tC;var Ije=function(e){var t=e.length*.75,r=e.length,n,a=0,i,s,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=z1[e.charCodeAt(n)],s=z1[e.charCodeAt(n+1)],o=z1[e.charCodeAt(n+2)],l=z1[e.charCodeAt(n+3)],u[a++]=i<<2|s>>4,u[a++]=(s&15)<<4|o>>2,u[a++]=(o&3)<<6|l&63;return c},Fje=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Dje=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Lp=5,IP=11,WB=2,Rje=IP-Lp,ete=65536>>Lp,Pje=1<<Lp,YB=Pje-1,Mje=1024>>Lp,Lje=ete+Mje,Oje=Lje,Uje=32,jje=Oje+Uje,Hje=65536>>IP,Qje=1<<Rje,Vje=Qje-1,KQ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},zje=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Gje=function(e,t){var r=Ije(e),n=Array.isArray(r)?Dje(r):new Uint32Array(r),a=Array.isArray(r)?Fje(r):new Uint16Array(r),i=24,s=KQ(a,i/2,n[4]/2),o=n[5]===2?KQ(a,(i+n[4])/2):zje(n,Math.ceil((i+n[4])/4));return new qje(n[0],n[1],n[2],n[3],s,o)},qje=function(){function e(t,r,n,a,i,s){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=s}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Lp],r=(r<<WB)+(t&YB),this.data[r];if(t<=65535)return r=this.index[ete+(t-55296>>Lp)],r=(r<<WB)+(t&YB),this.data[r];if(t<this.highStart)return r=jje-Hje+(t>>IP),r=this.index[r],r+=t>>Lp&Vje,r=this.index[r],r=(r<<WB)+(t&YB),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),WQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$je=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rC=0;rC<WQ.length;rC++)$je[WQ.charCodeAt(rC)]=rC;var Kje=1,XB=2,JB=3,YQ=4,XQ=5,Wje=7,JQ=8,ZB=9,e4=10,ZQ=11,e9=12,t9=13,r9=14,t4=15,Yje=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var i=e.charCodeAt(r++);(i&64512)===56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Xje=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,i="";++a<r;){var s=e[a];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(a+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Jje=Gje(kje),Xc="×",r4="÷",Zje=function(e){return Jje.get(e)},e8e=function(e,t,r){var n=r-2,a=t[n],i=t[r-1],s=t[r];if(i===XB&&s===JB)return Xc;if(i===XB||i===JB||i===YQ||s===XB||s===JB||s===YQ)return r4;if(i===JQ&&[JQ,ZB,ZQ,e9].indexOf(s)!==-1||(i===ZQ||i===ZB)&&(s===ZB||s===e4)||(i===e9||i===e4)&&s===e4||s===t9||s===XQ||s===Wje||i===Kje)return Xc;if(i===t9&&s===r9){for(;a===XQ;)a=t[--n];if(a===r9)return Xc}if(i===t4&&s===t4){for(var o=0;a===t4;)o++,a=t[--n];if(o%2===0)return Xc}return r4},t8e=function(e){var t=Yje(e),r=t.length,n=0,a=0,i=t.map(Zje);return{next:function(){if(n>=r)return{done:!0,value:null};for(var s=Xc;n<r&&(s=e8e(t,i,++n))===Xc;);if(s!==Xc||n===r){var o=Xje.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},r8e=function(e){for(var t=t8e(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},n8e=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),i=Math.round(a.height);if(e.body.removeChild(n),i===t)return!0}}return!1},a8e=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=ET(n.data).map(function(l){return Ci(l)}),i=0,s={},o=a.every(function(l,c){r.setStart(n,i),r.setEnd(n,i+l.length);var u=r.getBoundingClientRect();i+=l.length;var A=u.x>s.x||u.y>s.y;return s=u,c===0?!0:A});return e.body.removeChild(t),o},i8e=function(){return typeof new Image().crossOrigin<"u"},s8e=function(){return typeof new XMLHttpRequest().responseType=="string"},o8e=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},n9=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},l8e=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,i=t.toDataURL();a.src=i;var s=V3(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),a9(s).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=e.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",n9(l)?a9(V3(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),n9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},V3=function(e,t,r,n,a){var i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return s.setAttributeNS(null,"width",e.toString()),s.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(a),s},a9=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},$s={get SUPPORT_RANGE_BOUNDS(){var e=n8e(document);return Object.defineProperty($s,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=$s.SUPPORT_RANGE_BOUNDS&&a8e(document);return Object.defineProperty($s,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=o8e(document);return Object.defineProperty($s,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?l8e(document):Promise.resolve(!1);return Object.defineProperty($s,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=i8e();return Object.defineProperty($s,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=s8e();return Object.defineProperty($s,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty($s,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty($s,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},xy=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),c8e=function(e,t,r,n){var a=f8e(t,r),i=[],s=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if($s.SUPPORT_RANGE_BOUNDS){var l=i9(n,s,o.length).getClientRects();if(l.length>1){var c=FP(o),u=0;c.forEach(function(h){i.push(new xy(h,CA.fromDOMRectList(e,i9(n,u+s,h.length).getClientRects()))),u+=h.length})}else i.push(new xy(o,CA.fromDOMRectList(e,l)))}else{var A=n.splitText(o.length);i.push(new xy(o,u8e(e,n))),n=A}else $s.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));s+=o.length}),i},u8e=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var i=CT(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),i}}return CA.EMPTY},i9=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},FP=function(e){if($s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return r8e(e)},d8e=function(e,t){if($s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return h8e(e,t)},f8e=function(e,t){return t.letterSpacing!==0?FP(e):d8e(e,t)},A8e=[32,160,4961,65792,65793,4153,4241],h8e=function(e,t){for(var r=HLe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,i=function(){if(a.value){var s=a.value.slice(),o=ET(s),l="";o.forEach(function(c){A8e.indexOf(c)===-1?l+=Ci(c):(l.length&&n.push(l),n.push(Ci(c)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)i();return n},p8e=function(){function e(t,r,n){this.text=m8e(r.data,n.textTransform),this.textBounds=c8e(t,this.text,n,r)}return e}(),m8e=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(g8e,v8e);case 2:return e.toUpperCase();default:return e}},g8e=/(^|\s|:|-|\(|\))([a-z])/g,v8e=function(e,t,r){return e.length>0?t+r.toUpperCase():e},tte=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(vf),rte=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(vf),nte=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this,i=new XMLSerializer,s=CT(r,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(vf),ate=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(vf),z3=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(vf),x8e=[{type:15,flags:0,unit:"px",number:3}],y8e=[{type:16,flags:0,number:50}],b8e=function(e){return e.width>e.height?new CA(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new CA(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},w8e=function(e){var t=e.type===C8e?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},y_="checkbox",b_="radio",C8e="password",s9=707406591,DP=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=w8e(n),(a.type===y_||a.type===b_)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=b8e(a.bounds)),a.type){case y_:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=x8e;break;case b_:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=y8e;break}return a}return t}(vf),ite=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return a.value=i&&i.text||"",a}return t}(vf),ste=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(vf),ote=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=cte(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?gy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):fA.TRANSPARENT,s=n.contentWindow.document.body?gy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):fA.TRANSPARENT;a.backgroundColor=a0(i)?a0(s)?a.styles.backgroundColor:s:i}}catch{}return a}return t}(vf),E8e=["OL","UL","MENU"],nE=function(e,t,r,n){for(var a=t.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,ute(a)&&a.data.trim().length>0)r.textNodes.push(new p8e(e,a,r.styles));else if(jg(a))if(hte(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return nE(e,o,r,n)});else{var s=lte(e,a);s.styles.isVisible()&&(_8e(a,s,n)?s.flags|=4:S8e(s.styles)&&(s.flags|=2),E8e.indexOf(a.tagName)!==-1&&(s.flags|=8),r.elements.push(s),a.slot,a.shadowRoot?nE(e,a.shadowRoot,s,n):!w_(a)&&!dte(a)&&!C_(a)&&nE(e,a,s,n))}},lte=function(e,t){return q3(t)?new tte(e,t):fte(t)?new rte(e,t):dte(t)?new nte(e,t):T8e(t)?new ate(e,t):N8e(t)?new z3(e,t):B8e(t)?new DP(e,t):C_(t)?new ite(e,t):w_(t)?new ste(e,t):Ate(t)?new ote(e,t):new vf(e,t)},cte=function(e,t){var r=lte(e,t);return r.flags|=4,nE(e,t,r,r),r},_8e=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||RP(e)&&r.styles.isTransparent()},S8e=function(e){return e.isPositioned()||e.isFloating()},ute=function(e){return e.nodeType===Node.TEXT_NODE},jg=function(e){return e.nodeType===Node.ELEMENT_NODE},G3=function(e){return jg(e)&&typeof e.style<"u"&&!aE(e)},aE=function(e){return typeof e.className=="object"},T8e=function(e){return e.tagName==="LI"},N8e=function(e){return e.tagName==="OL"},B8e=function(e){return e.tagName==="INPUT"},k8e=function(e){return e.tagName==="HTML"},dte=function(e){return e.tagName==="svg"},RP=function(e){return e.tagName==="BODY"},fte=function(e){return e.tagName==="CANVAS"},o9=function(e){return e.tagName==="VIDEO"},q3=function(e){return e.tagName==="IMG"},Ate=function(e){return e.tagName==="IFRAME"},l9=function(e){return e.tagName==="STYLE"},I8e=function(e){return e.tagName==="SCRIPT"},w_=function(e){return e.tagName==="TEXTAREA"},C_=function(e){return e.tagName==="SELECT"},hte=function(e){return e.tagName==="SLOT"},c9=function(e){return e.tagName.indexOf("-")>0},F8e=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,i=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var s=[];return i&&a.forEach(function(o){var l=r.counters[o.counter];s.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),s},e}(),u9={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},d9={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},D8e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},R8e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},hg=function(e,t,r,n,a,i){return e<t||e>r?tb(e,a,i.length>0):n.integers.reduce(function(s,o,l){for(;e>=o;)e-=o,s+=n.values[l];return s},"")+i},pte=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},bi=function(e,t,r,n,a){var i=r-t+1;return(e<0?"-":"")+(pte(Math.abs(e),i,n,function(s){return Ci(Math.floor(s%i)+t)})+a)},op=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return pte(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Dg=1,Bh=2,kh=4,G1=8,Xf=function(e,t,r,n,a,i){if(e<-9999||e>9999)return tb(e,4,a.length>0);var s=Math.abs(e),o=a;if(s===0)return t[0]+o;for(var l=0;s>0&&l<=4;l++){var c=s%10;c===0&&os(i,Dg)&&o!==""?o=t[c]+o:c>1||c===1&&l===0||c===1&&l===1&&os(i,Bh)||c===1&&l===1&&os(i,kh)&&e>100||c===1&&l>1&&os(i,G1)?o=t[c]+(l>0?r[l-1]:"")+o:c===1&&l>0&&(o=r[l-1]+o),s=Math.floor(s/10)}return(e<0?n:"")+o},f9="十百千萬",A9="拾佰仟萬",h9="マイナス",n4="마이너스",tb=function(e,t,r){var n=r?". ":"",a=r?"、":"",i=r?", ":"",s=r?" ":"";switch(t){case 0:return"•"+s;case 1:return"◦"+s;case 2:return"◾"+s;case 5:var o=bi(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return op(e,"〇一二三四五六七八九",a);case 6:return hg(e,1,3999,u9,3,n).toLowerCase();case 7:return hg(e,1,3999,u9,3,n);case 8:return bi(e,945,969,!1,n);case 9:return bi(e,97,122,!1,n);case 10:return bi(e,65,90,!1,n);case 11:return bi(e,1632,1641,!0,n);case 12:case 49:return hg(e,1,9999,d9,3,n);case 35:return hg(e,1,9999,d9,3,n).toLowerCase();case 13:return bi(e,2534,2543,!0,n);case 14:case 30:return bi(e,6112,6121,!0,n);case 15:return op(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return op(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Xf(e,"零一二三四五六七八九",f9,"負",a,Bh|kh|G1);case 47:return Xf(e,"零壹貳參肆伍陸柒捌玖",A9,"負",a,Dg|Bh|kh|G1);case 42:return Xf(e,"零一二三四五六七八九",f9,"负",a,Bh|kh|G1);case 41:return Xf(e,"零壹贰叁肆伍陆柒捌玖",A9,"负",a,Dg|Bh|kh|G1);case 26:return Xf(e,"〇一二三四五六七八九","十百千万",h9,a,0);case 25:return Xf(e,"零壱弐参四伍六七八九","拾百千万",h9,a,Dg|Bh|kh);case 31:return Xf(e,"영일이삼사오육칠팔구","십백천만",n4,i,Dg|Bh|kh);case 33:return Xf(e,"零一二三四五六七八九","十百千萬",n4,i,0);case 32:return Xf(e,"零壹貳參四五六七八九","拾百千",n4,i,Dg|Bh|kh);case 18:return bi(e,2406,2415,!0,n);case 20:return hg(e,1,19999,R8e,3,n);case 21:return bi(e,2790,2799,!0,n);case 22:return bi(e,2662,2671,!0,n);case 22:return hg(e,1,10999,D8e,3,n);case 23:return op(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return op(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return bi(e,3302,3311,!0,n);case 28:return op(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return op(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return bi(e,3792,3801,!0,n);case 37:return bi(e,6160,6169,!0,n);case 38:return bi(e,4160,4169,!0,n);case 39:return bi(e,2918,2927,!0,n);case 40:return bi(e,1776,1785,!0,n);case 43:return bi(e,3046,3055,!0,n);case 44:return bi(e,3174,3183,!0,n);case 45:return bi(e,3664,3673,!0,n);case 46:return bi(e,3872,3881,!0,n);case 3:default:return bi(e,48,57,!0,n)}},mte="data-html2canvas-ignore",p9=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new F8e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=P8e(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,s=t.defaultView.pageYOffset,o=a.contentWindow,l=o.document,c=O8e(a).then(function(){return Go(n,void 0,void 0,function(){var u,A;return wo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Q8e),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),u=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,L8e(l)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,A)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(j8e(document.doctype)+"<html></html>"),H8e(this.referenceElement.ownerDocument,i,s),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},e.prototype.createElementClone=function(t){if(Q3(t,2))debugger;if(fte(t))return this.createCanvasClone(t);if(o9(t))return this.createVideoClone(t);if(l9(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return q3(r)&&(q3(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),c9(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return a4(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,s){return s&&typeof s.cssText=="string"?i+s.cssText:i},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var i=t.getContext("2d"),s=a.getContext("2d");if(s)if(!this.options.allowTaint&&i)s.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}s.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!jg(r)||!I8e(r)&&!r.hasAttribute(mte)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!jg(r)||!l9(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(jg(i)&&hte(i)&&typeof i.assignedNodes=="function"){var s=i.assignedNodes();s.length&&s.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},e.prototype.cloneNode=function(t,r){if(ute(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&jg(t)&&(G3(t)||aE(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var i=n.getComputedStyle(t),s=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&G3(a)&&(this.clonedReferenceElement=a),RP(a)&&G8e(a);var l=this.counters.parse(new qQ(this.context,i)),c=this.resolvePseudoContent(t,a,s,yy.BEFORE);c9(t)&&(r=!0),o9(t)||this.cloneChildNodes(t,a,r),c&&a.insertBefore(c,a.firstChild);var u=this.resolvePseudoContent(t,a,o,yy.AFTER);return u&&a.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||aE(t))&&!Ate(t)||r)&&a4(i,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(w_(t)||C_(t))&&(w_(a)||C_(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var i=this;if(n){var s=n.content,o=r.ownerDocument;if(!(!o||!s||s==="none"||s==="-moz-alt-content"||n.display==="none")){this.counters.parse(new qQ(this.context,n));var l=new Tje(this.context,n),c=o.createElement("html2canvaspseudoelement");a4(n,c),l.content.forEach(function(A){if(A.type===0)c.appendChild(o.createTextNode(A.value));else if(A.type===22){var h=o.createElement("img");h.src=A.value,h.style.opacity="1",c.appendChild(h)}else if(A.type===18){if(A.name==="attr"){var m=A.values.filter(ha);m.length&&c.appendChild(o.createTextNode(t.getAttribute(m[0].value)||""))}else if(A.name==="counter"){var v=A.values.filter(Nv),g=v[0],y=v[1];if(g&&ha(g)){var w=i.counters.getCounterValue(g.value),T=y&&ha(y)?H3.parse(i.context,y.value):3;c.appendChild(o.createTextNode(tb(w,T,!1)))}}else if(A.name==="counters"){var N=A.values.filter(Nv),g=N[0],F=N[1],y=N[2];if(g&&ha(g)){var B=i.counters.getCounterValues(g.value),D=y&&ha(y)?H3.parse(i.context,y.value):3,E=F&&F.type===0?F.value:"",S=B.map(function(P){return tb(P,D,!1)}).join(E);c.appendChild(o.createTextNode(S))}}}else if(A.type===20)switch(A.value){case"open-quote":c.appendChild(o.createTextNode(GQ(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(GQ(l.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(A.value))}}),c.className=$3+" "+K3;var u=a===yy.BEFORE?" "+$3:" "+K3;return aE(r)?r.className.baseValue+=u:r.className+=u,c}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),yy;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(yy||(yy={}));var P8e=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(mte,"true"),e.body.appendChild(r),r},M8e=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},L8e=function(e){return Promise.all([].slice.call(e.images,0).map(M8e))},O8e=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),t(e))},50)}})},U8e=["all","d","content"],a4=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);U8e.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},j8e=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},H8e=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Q8e=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},V8e=":before",z8e=":after",$3="___html2canvas___pseudoelement_before",K3="___html2canvas___pseudoelement_after",m9=`{
    content: "" !important;
    display: none !important;
}`,G8e=function(e){q8e(e,"."+$3+V8e+m9+`
         .`+K3+z8e+m9)},q8e=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},gte=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),$8e=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(s4(t)||X8e(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Go(this,void 0,void 0,function(){var r,n,a,i,s=this;return wo(this,function(o){switch(o.label){case 0:return r=gte.isSameOrigin(t),n=!i4(t)&&this._options.useCORS===!0&&$s.SUPPORT_CORS_IMAGES&&!r,a=!i4(t)&&!r&&!s4(t)&&typeof this._options.proxy=="string"&&$s.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!i4(t)&&!s4(t)&&!a&&!n?[2]:(i=t,a?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(J8e(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),s._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(i,s){var o=$s.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")i(l.response);else{var A=new FileReader;A.addEventListener("load",function(){return i(A.result)},!1),A.addEventListener("error",function(h){return s(h)},!1),A.readAsDataURL(l.response)}else s("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=s;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var u=r._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return s("Timed out ("+u+"ms) proxying "+a)}}l.send()})},e}(),K8e=/^data:image\/svg\+xml/i,W8e=/^data:image\/.*;base64,/i,Y8e=/^data:image\/.*/i,X8e=function(e){return $s.SUPPORT_SVG_DRAWING||!Z8e(e)},i4=function(e){return Y8e.test(e)},J8e=function(e){return W8e.test(e)},s4=function(e){return e.substr(0,4)==="blob"},Z8e=function(e){return e.substr(-3).toLowerCase()==="svg"||K8e.test(e)},Yt=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),pg=function(e,t,r){return new Yt(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},nC=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=pg(this.start,this.startControl,t),a=pg(this.startControl,this.endControl,t),i=pg(this.endControl,this.end,t),s=pg(n,a,t),o=pg(a,i,t),l=pg(s,o,t);return r?new e(this.start,n,s,l):new e(l,o,i,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Zc=function(e){return e.type===1},e7e=function(){function e(t){var r=t.styles,n=t.bounds,a=V1(r.borderTopLeftRadius,n.width,n.height),i=a[0],s=a[1],o=V1(r.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],u=V1(r.borderBottomRightRadius,n.width,n.height),A=u[0],h=u[1],m=V1(r.borderBottomLeftRadius,n.width,n.height),v=m[0],g=m[1],y=[];y.push((i+l)/n.width),y.push((v+A)/n.width),y.push((s+g)/n.height),y.push((c+h)/n.height);var w=Math.max.apply(Math,y);w>1&&(i/=w,s/=w,l/=w,c/=w,A/=w,h/=w,v/=w,g/=w);var T=n.width-l,N=n.height-h,F=n.width-A,B=n.height-g,D=r.borderTopWidth,E=r.borderRightWidth,S=r.borderBottomWidth,k=r.borderLeftWidth,H=Ea(r.paddingTop,t.bounds.width),P=Ea(r.paddingRight,t.bounds.width),M=Ea(r.paddingBottom,t.bounds.width),Q=Ea(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||s>0?Ua(n.left+k/3,n.top+D/3,i-k/3,s-D/3,qn.TOP_LEFT):new Yt(n.left+k/3,n.top+D/3),this.topRightBorderDoubleOuterBox=i>0||s>0?Ua(n.left+T,n.top+D/3,l-E/3,c-D/3,qn.TOP_RIGHT):new Yt(n.left+n.width-E/3,n.top+D/3),this.bottomRightBorderDoubleOuterBox=A>0||h>0?Ua(n.left+F,n.top+N,A-E/3,h-S/3,qn.BOTTOM_RIGHT):new Yt(n.left+n.width-E/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=v>0||g>0?Ua(n.left+k/3,n.top+B,v-k/3,g-S/3,qn.BOTTOM_LEFT):new Yt(n.left+k/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=i>0||s>0?Ua(n.left+k*2/3,n.top+D*2/3,i-k*2/3,s-D*2/3,qn.TOP_LEFT):new Yt(n.left+k*2/3,n.top+D*2/3),this.topRightBorderDoubleInnerBox=i>0||s>0?Ua(n.left+T,n.top+D*2/3,l-E*2/3,c-D*2/3,qn.TOP_RIGHT):new Yt(n.left+n.width-E*2/3,n.top+D*2/3),this.bottomRightBorderDoubleInnerBox=A>0||h>0?Ua(n.left+F,n.top+N,A-E*2/3,h-S*2/3,qn.BOTTOM_RIGHT):new Yt(n.left+n.width-E*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||g>0?Ua(n.left+k*2/3,n.top+B,v-k*2/3,g-S*2/3,qn.BOTTOM_LEFT):new Yt(n.left+k*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=i>0||s>0?Ua(n.left+k/2,n.top+D/2,i-k/2,s-D/2,qn.TOP_LEFT):new Yt(n.left+k/2,n.top+D/2),this.topRightBorderStroke=i>0||s>0?Ua(n.left+T,n.top+D/2,l-E/2,c-D/2,qn.TOP_RIGHT):new Yt(n.left+n.width-E/2,n.top+D/2),this.bottomRightBorderStroke=A>0||h>0?Ua(n.left+F,n.top+N,A-E/2,h-S/2,qn.BOTTOM_RIGHT):new Yt(n.left+n.width-E/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=v>0||g>0?Ua(n.left+k/2,n.top+B,v-k/2,g-S/2,qn.BOTTOM_LEFT):new Yt(n.left+k/2,n.top+n.height-S/2),this.topLeftBorderBox=i>0||s>0?Ua(n.left,n.top,i,s,qn.TOP_LEFT):new Yt(n.left,n.top),this.topRightBorderBox=l>0||c>0?Ua(n.left+T,n.top,l,c,qn.TOP_RIGHT):new Yt(n.left+n.width,n.top),this.bottomRightBorderBox=A>0||h>0?Ua(n.left+F,n.top+N,A,h,qn.BOTTOM_RIGHT):new Yt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||g>0?Ua(n.left,n.top+B,v,g,qn.BOTTOM_LEFT):new Yt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||s>0?Ua(n.left+k,n.top+D,Math.max(0,i-k),Math.max(0,s-D),qn.TOP_LEFT):new Yt(n.left+k,n.top+D),this.topRightPaddingBox=l>0||c>0?Ua(n.left+Math.min(T,n.width-E),n.top+D,T>n.width+E?0:Math.max(0,l-E),Math.max(0,c-D),qn.TOP_RIGHT):new Yt(n.left+n.width-E,n.top+D),this.bottomRightPaddingBox=A>0||h>0?Ua(n.left+Math.min(F,n.width-k),n.top+Math.min(N,n.height-S),Math.max(0,A-E),Math.max(0,h-S),qn.BOTTOM_RIGHT):new Yt(n.left+n.width-E,n.top+n.height-S),this.bottomLeftPaddingBox=v>0||g>0?Ua(n.left+k,n.top+Math.min(B,n.height-S),Math.max(0,v-k),Math.max(0,g-S),qn.BOTTOM_LEFT):new Yt(n.left+k,n.top+n.height-S),this.topLeftContentBox=i>0||s>0?Ua(n.left+k+Q,n.top+D+H,Math.max(0,i-(k+Q)),Math.max(0,s-(D+H)),qn.TOP_LEFT):new Yt(n.left+k+Q,n.top+D+H),this.topRightContentBox=l>0||c>0?Ua(n.left+Math.min(T,n.width+k+Q),n.top+D+H,T>n.width+k+Q?0:l-k+Q,c-(D+H),qn.TOP_RIGHT):new Yt(n.left+n.width-(E+P),n.top+D+H),this.bottomRightContentBox=A>0||h>0?Ua(n.left+Math.min(F,n.width-(k+Q)),n.top+Math.min(N,n.height+D+H),Math.max(0,A-(E+P)),h-(S+M),qn.BOTTOM_RIGHT):new Yt(n.left+n.width-(E+P),n.top+n.height-(S+M)),this.bottomLeftContentBox=v>0||g>0?Ua(n.left+k+Q,n.top+B,Math.max(0,v-(k+Q)),g-(S+M),qn.BOTTOM_LEFT):new Yt(n.left+k+Q,n.top+n.height-(S+M))}return e}(),qn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(qn||(qn={}));var Ua=function(e,t,r,n,a){var i=4*((Math.sqrt(2)-1)/3),s=r*i,o=n*i,l=e+r,c=t+n;switch(a){case qn.TOP_LEFT:return new nC(new Yt(e,c),new Yt(e,c-o),new Yt(l-s,t),new Yt(l,t));case qn.TOP_RIGHT:return new nC(new Yt(e,t),new Yt(e+s,t),new Yt(l,c-o),new Yt(l,c));case qn.BOTTOM_RIGHT:return new nC(new Yt(l,t),new Yt(l,t+o),new Yt(e+s,c),new Yt(e,c));case qn.BOTTOM_LEFT:default:return new nC(new Yt(l,c),new Yt(l-s,c),new Yt(e,t+o),new Yt(e,t))}},E_=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},t7e=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},__=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},r7e=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),aC=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),n7e=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),a7e=function(e){return e.type===0},vte=function(e){return e.type===1},i7e=function(e){return e.type===2},g9=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},s7e=function(e,t,r,n,a){return e.map(function(i,s){switch(s){case 0:return i.add(t,r);case 1:return i.add(t+n,r);case 2:return i.add(t+n,r+a);case 3:return i.add(t,r+a)}return i})},xte=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),yte=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new e7e(this.container),this.container.styles.opacity<1&&this.effects.push(new n7e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new r7e(n,a,i))}if(this.container.styles.overflowX!==0){var s=E_(this.curves),o=__(this.curves);g9(s,o)?this.effects.push(new aC(s,6)):(this.effects.push(new aC(s,2)),this.effects.push(new aC(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var i=n.effects.filter(function(l){return!vte(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var s=E_(n.curves),o=__(n.curves);g9(s,o)||a.unshift(new aC(o,6))}}else a.unshift.apply(a,i);n=n.parent}return a.filter(function(l){return os(l.target,t)})},e}(),W3=function(e,t,r,n){e.container.elements.forEach(function(a){var i=os(a.flags,4),s=os(a.flags,2),o=new yte(a,e);os(a.styles.display,2048)&&n.push(o);var l=os(a.flags,8)?[]:n;if(i||s){var c=i||a.styles.isPositioned()?r:t,u=new xte(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var A=a.styles.zIndex.order;if(A<0){var h=0;c.negativeZIndex.some(function(v,g){return A>v.element.container.styles.zIndex.order?(h=g,!1):h>0}),c.negativeZIndex.splice(h,0,u)}else if(A>0){var m=0;c.positiveZIndex.some(function(v,g){return A>=v.element.container.styles.zIndex.order?(m=g+1,!1):m>0}),c.positiveZIndex.splice(m,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else a.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);W3(o,u,i?u:r,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),W3(o,t,r,l);os(a.flags,8)&&bte(a,l)})},bte=function(e,t){for(var r=e instanceof z3?e.start:1,n=e instanceof z3?e.reversed:!1,a=0;a<t.length;a++){var i=t[a];i.container instanceof ate&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=tb(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},o7e=function(e){var t=new yte(e,null),r=new xte(t),n=[];return W3(t,r,r,n),bte(t.container,n),r},v9=function(e,t){switch(t){case 0:return su(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return su(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return su(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return su(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},l7e=function(e,t){switch(t){case 0:return su(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return su(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return su(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return su(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},c7e=function(e,t){switch(t){case 0:return su(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return su(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return su(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return su(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},u7e=function(e,t){switch(t){case 0:return iC(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return iC(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return iC(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return iC(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},iC=function(e,t){var r=[];return Zc(e)?r.push(e.subdivide(.5,!1)):r.push(e),Zc(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},su=function(e,t,r,n){var a=[];return Zc(e)?a.push(e.subdivide(.5,!1)):a.push(e),Zc(r)?a.push(r.subdivide(.5,!0)):a.push(r),Zc(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Zc(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},wte=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},S_=function(e){var t=e.styles,r=e.bounds,n=Ea(t.paddingLeft,r.width),a=Ea(t.paddingRight,r.width),i=Ea(t.paddingTop,r.width),s=Ea(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+i+s))},d7e=function(e,t){return e===0?t.bounds:e===2?S_(t):wte(t)},f7e=function(e,t){return e===0?t.bounds:e===2?S_(t):wte(t)},o4=function(e,t,r){var n=d7e(Rg(e.styles.backgroundOrigin,t),e),a=f7e(Rg(e.styles.backgroundClip,t),e),i=A7e(Rg(e.styles.backgroundSize,t),r,n),s=i[0],o=i[1],l=V1(Rg(e.styles.backgroundPosition,t),n.width-s,n.height-o),c=h7e(Rg(e.styles.backgroundRepeat,t),l,i,n,a),u=Math.round(n.left+l[0]),A=Math.round(n.top+l[1]);return[c,u,A,s,o]},mg=function(e){return ha(e)&&e.value===lv.AUTO},sC=function(e){return typeof e=="number"},A7e=function(e,t,r){var n=t[0],a=t[1],i=t[2],s=e[0],o=e[1];if(!s)return[0,0];if(Vi(s)&&o&&Vi(o))return[Ea(s,r.width),Ea(o,r.height)];var l=sC(i);if(ha(s)&&(s.value===lv.CONTAIN||s.value===lv.COVER)){if(sC(i)){var c=r.width/r.height;return c<i!=(s.value===lv.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=sC(n),A=sC(a),h=u||A;if(mg(s)&&(!o||mg(o))){if(u&&A)return[n,a];if(!l&&!h)return[r.width,r.height];if(h&&l){var m=u?n:a*i,v=A?a:n/i;return[m,v]}var g=u?n:r.width,y=A?a:r.height;return[g,y]}if(l){var w=0,T=0;return Vi(s)?w=Ea(s,r.width):Vi(o)&&(T=Ea(o,r.height)),mg(s)?w=T*i:(!o||mg(o))&&(T=w/i),[w,T]}var N=null,F=null;if(Vi(s)?N=Ea(s,r.width):o&&Vi(o)&&(F=Ea(o,r.height)),N!==null&&(!o||mg(o))&&(F=u&&A?N/n*a:r.height),F!==null&&mg(s)&&(N=u&&A?F/a*n:r.width),N!==null&&F!==null)return[N,F];throw new Error("Unable to calculate background-size for element")},Rg=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},h7e=function(e,t,r,n,a){var i=t[0],s=t[1],o=r[0],l=r[1];switch(e){case 2:return[new Yt(Math.round(n.left),Math.round(n.top+s)),new Yt(Math.round(n.left+n.width),Math.round(n.top+s)),new Yt(Math.round(n.left+n.width),Math.round(l+n.top+s)),new Yt(Math.round(n.left),Math.round(l+n.top+s))];case 3:return[new Yt(Math.round(n.left+i),Math.round(n.top)),new Yt(Math.round(n.left+i+o),Math.round(n.top)),new Yt(Math.round(n.left+i+o),Math.round(n.height+n.top)),new Yt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new Yt(Math.round(n.left+i),Math.round(n.top+s)),new Yt(Math.round(n.left+i+o),Math.round(n.top+s)),new Yt(Math.round(n.left+i+o),Math.round(n.top+s+l)),new Yt(Math.round(n.left+i),Math.round(n.top+s+l))];default:return[new Yt(Math.round(a.left),Math.round(a.top)),new Yt(Math.round(a.left+a.width),Math.round(a.top)),new Yt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Yt(Math.round(a.left),Math.round(a.height+a.top))]}},p7e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",x9="Hidden Text",m7e=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),a.src=p7e,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(x9)),n.appendChild(i),n.appendChild(a);var o=a.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(x9)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:l}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Cte=function(){function e(t,r){this.context=t,this.options=r}return e}(),g7e=1e4,v7e=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new m7e(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),i7e(r)&&(this.ctx.globalAlpha=r.opacity),a7e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),vte(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return Go(this,void 0,void 0,function(){var n;return wo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return Go(this,void 0,void 0,function(){return wo(this,function(n){switch(n.label){case 0:if(os(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var s=FP(r.text);s.reduce(function(o,l){return i.ctx.fillText(l,o,r.bounds.top+a),o+i.ctx.measureText(l).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(s){return s==="normal"||s==="small-caps"}).join(""),a=C7e(r.fontFamily).join(", "),i=Kb(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,a].join(" "),a,i]},t.prototype.renderTextNode=function(r,n){return Go(this,void 0,void 0,function(){var a,i,s,o,l,c,u,A,h=this;return wo(this,function(m){return a=this.createFontStyle(n),i=a[0],s=a[1],o=a[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(s,o),c=l.baseline,u=l.middle,A=n.paintOrder,r.textBounds.forEach(function(v){A.forEach(function(g){switch(g){case 0:h.ctx.fillStyle=Cs(n.color),h.renderTextWithLetterSpacing(v,n.letterSpacing,c);var y=n.textShadow;y.length&&v.text.trim().length&&(y.slice(0).reverse().forEach(function(w){h.ctx.shadowColor=Cs(w.color),h.ctx.shadowOffsetX=w.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=w.offsetY.number*h.options.scale,h.ctx.shadowBlur=w.blur.number,h.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Cs(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(w){switch(w){case 1:h.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:h.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:h.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+u),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(h.ctx.strokeStyle=Cs(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=S_(r),s=__(n);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return Go(this,void 0,void 0,function(){var n,a,i,s,o,l,T,T,c,u,A,h,F,m,v,B,g,y,w,T,N,F,B;return wo(this,function(D){switch(D.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,i=n.styles,s=0,o=n.textNodes,D.label=1;case 1:return s<o.length?(l=o[s],[4,this.renderTextNode(l,i)]):[3,4];case 2:D.sent(),D.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof tte))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return T=D.sent(),this.renderReplacedElement(n,a,T),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof rte&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof nte))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return T=D.sent(),this.renderReplacedElement(n,a,T),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof ote&&n.tree?(c=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=D.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),D.label=14;case 14:if(n instanceof DP&&(A=Math.min(n.bounds.width,n.bounds.height),n.type===y_?n.checked&&(this.ctx.save(),this.path([new Yt(n.bounds.left+A*.39363,n.bounds.top+A*.79),new Yt(n.bounds.left+A*.16,n.bounds.top+A*.5549),new Yt(n.bounds.left+A*.27347,n.bounds.top+A*.44071),new Yt(n.bounds.left+A*.39694,n.bounds.top+A*.5649),new Yt(n.bounds.left+A*.72983,n.bounds.top+A*.23),new Yt(n.bounds.left+A*.84,n.bounds.top+A*.34085),new Yt(n.bounds.left+A*.39363,n.bounds.top+A*.79)]),this.ctx.fillStyle=Cs(s9),this.ctx.fill(),this.ctx.restore()):n.type===b_&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+A/2,n.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Cs(s9),this.ctx.fill(),this.ctx.restore())),x7e(n)&&n.value.length){switch(h=this.createFontStyle(i),F=h[0],m=h[1],v=this.fontMetrics.getMetrics(F,m).baseline,this.ctx.font=F,this.ctx.fillStyle=Cs(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=b7e(n.styles.textAlign),B=S_(n),g=0,n.styles.textAlign){case 1:g+=B.width/2;break;case 2:g+=B.width;break}y=B.add(g,0,0,-B.height/2+1),this.ctx.save(),this.path([new Yt(B.left,B.top),new Yt(B.left+B.width,B.top),new Yt(B.left+B.width,B.top+B.height),new Yt(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new xy(n.value,y),i.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!os(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(w=n.styles.listStyleImage,w.type!==0)return[3,18];T=void 0,N=w.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return T=D.sent(),this.ctx.drawImage(T,n.bounds.left-(T.width+10),n.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(i)[0],this.ctx.font=F,this.ctx.fillStyle=Cs(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new CA(n.bounds.left,n.bounds.top+Ea(n.styles.paddingTop,n.bounds.width),n.bounds.width,VQ(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new xy(r.listValue,B),i.letterSpacing,VQ(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return Go(this,void 0,void 0,function(){var n,a,w,i,s,w,o,l,w,c,u,w,A,h,w,m,v,w,g,y,w;return wo(this,function(T){switch(T.label){case 0:if(os(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:T.sent(),n=0,a=r.negativeZIndex,T.label=2;case 2:return n<a.length?(w=a[n],[4,this.renderStack(w)]):[3,5];case 3:T.sent(),T.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:T.sent(),i=0,s=r.nonInlineLevel,T.label=7;case 7:return i<s.length?(w=s[i],[4,this.renderNode(w)]):[3,10];case 8:T.sent(),T.label=9;case 9:return i++,[3,7];case 10:o=0,l=r.nonPositionedFloats,T.label=11;case 11:return o<l.length?(w=l[o],[4,this.renderStack(w)]):[3,14];case 12:T.sent(),T.label=13;case 13:return o++,[3,11];case 14:c=0,u=r.nonPositionedInlineLevel,T.label=15;case 15:return c<u.length?(w=u[c],[4,this.renderStack(w)]):[3,18];case 16:T.sent(),T.label=17;case 17:return c++,[3,15];case 18:A=0,h=r.inlineLevel,T.label=19;case 19:return A<h.length?(w=h[A],[4,this.renderNode(w)]):[3,22];case 20:T.sent(),T.label=21;case 21:return A++,[3,19];case 22:m=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,T.label=23;case 23:return m<v.length?(w=v[m],[4,this.renderStack(w)]):[3,26];case 24:T.sent(),T.label=25;case 25:return m++,[3,23];case 26:g=0,y=r.positiveZIndex,T.label=27;case 27:return g<y.length?(w=y[g],[4,this.renderStack(w)]):[3,30];case 28:T.sent(),T.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,i){var s=Zc(a)?a.start:a;i===0?n.ctx.moveTo(s.x,s.y):n.ctx.lineTo(s.x,s.y),Zc(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},t.prototype.resizeImage=function(r,n,a){var i;if(r.width===n&&r.height===a)return r;var s=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=s.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return Go(this,void 0,void 0,function(){var n,a,i,s,o,l;return wo(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,a=function(u){var A,h,m,H,W,re,Q,V,S,v,H,W,re,Q,V,g,y,w,T,N,F,B,D,E,S,k,H,P,M,Q,V,te,W,re,z,X,K,se,U,Y,Z,ne;return wo(this,function(de){switch(de.label){case 0:if(u.type!==0)return[3,5];A=void 0,h=u.url,de.label=1;case 1:return de.trys.push([1,3,,4]),[4,i.context.cache.match(h)];case 2:return A=de.sent(),[3,4];case 3:return de.sent(),i.context.logger.error("Error loading background-image "+h),[3,4];case 4:return A&&(m=o4(r,n,[A.width,A.height,A.width/A.height]),H=m[0],W=m[1],re=m[2],Q=m[3],V=m[4],S=i.ctx.createPattern(i.resizeImage(A,Q,V),"repeat"),i.renderRepeat(H,S,W,re)),[3,6];case 5:aUe(u)?(v=o4(r,n,[null,null,null]),H=v[0],W=v[1],re=v[2],Q=v[3],V=v[4],g=ZOe(u.angle,Q,V),y=g[0],w=g[1],T=g[2],N=g[3],F=g[4],B=document.createElement("canvas"),B.width=Q,B.height=V,D=B.getContext("2d"),E=D.createLinearGradient(w,N,T,F),HQ(u.stops,y).forEach(function(xe){return E.addColorStop(xe.stop,Cs(xe.color))}),D.fillStyle=E,D.fillRect(0,0,Q,V),Q>0&&V>0&&(S=i.ctx.createPattern(B,"repeat"),i.renderRepeat(H,S,W,re))):iUe(u)&&(k=o4(r,n,[null,null,null]),H=k[0],P=k[1],M=k[2],Q=k[3],V=k[4],te=u.position.length===0?[BP]:u.position,W=Ea(te[0],Q),re=Ea(te[te.length-1],V),z=eUe(u,W,re,Q,V),X=z[0],K=z[1],X>0&&K>0&&(se=i.ctx.createRadialGradient(P+W,M+re,0,P+W,M+re,X),HQ(u.stops,X*2).forEach(function(xe){return se.addColorStop(xe.stop,Cs(xe.color))}),i.path(H),i.ctx.fillStyle=se,X!==K?(U=r.bounds.left+.5*r.bounds.width,Y=r.bounds.top+.5*r.bounds.height,Z=K/X,ne=1/Z,i.ctx.save(),i.ctx.translate(U,Y),i.ctx.transform(1,0,0,Z,0,0),i.ctx.translate(-U,-Y),i.ctx.fillRect(P,ne*(M-Y)+Y,Q,V*ne),i.ctx.restore()):i.ctx.fill())),de.label=6;case 6:return n--,[2]}})},i=this,s=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return s<o.length?(l=o[s],[5,a(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return Go(this,void 0,void 0,function(){return wo(this,function(i){return this.path(v9(a,n)),this.ctx.fillStyle=Cs(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,i){return Go(this,void 0,void 0,function(){var s,o;return wo(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,i)]:[3,2];case 1:return l.sent(),[2];case 2:return s=l7e(i,a),this.path(s),this.ctx.fillStyle=Cs(r),this.ctx.fill(),o=c7e(i,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return Go(this,void 0,void 0,function(){var n,a,i,s,o,l,c,u,A=this;return wo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!a0(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],s=y7e(Rg(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),a0(n.backgroundColor)||(this.ctx.fillStyle=Cs(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){A.ctx.save();var v=E_(r.curves),g=m.inset?0:g7e,y=s7e(v,-g+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(A.path(v),A.ctx.clip(),A.mask(y)):(A.mask(v),A.ctx.clip(),A.path(y)),A.ctx.shadowOffsetX=m.offsetX.number+g,A.ctx.shadowOffsetY=m.offsetY.number,A.ctx.shadowColor=Cs(m.color),A.ctx.shadowBlur=m.blur.number,A.ctx.fillStyle=m.inset?Cs(m.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),h.label=2;case 2:o=0,l=0,c=i,h.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!a0(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,i,s){return Go(this,void 0,void 0,function(){var o,l,c,u,A,h,m,v,g,y,w,T,N,F,B,D,B,D;return wo(this,function(E){return this.ctx.save(),o=u7e(i,a),l=v9(i,a),s===2&&(this.path(l),this.ctx.clip()),Zc(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),Zc(l[1])?(A=l[1].end.x,h=l[1].end.y):(A=l[1].x,h=l[1].y),a===0||a===2?m=Math.abs(c-A):m=Math.abs(u-h),this.ctx.beginPath(),s===3?this.formatPath(o):this.formatPath(l.slice(0,2)),v=n<3?n*3:n*2,g=n<3?n*2:n,s===3&&(v=n,g=n),y=!0,m<=v*2?y=!1:m<=v*2+g?(w=m/(2*v+g),v*=w,g*=w):(T=Math.floor((m+g)/(v+g)),N=(m-T*v)/(T-1),F=(m-(T+1)*v)/T,g=F<=0||Math.abs(g-N)<Math.abs(g-F)?N:F),y&&(s===3?this.ctx.setLineDash([0,v+g]):this.ctx.setLineDash([v,g])),s===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Cs(r),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&(Zc(l[0])&&(B=l[3],D=l[0],this.ctx.beginPath(),this.formatPath([new Yt(B.end.x,B.end.y),new Yt(D.start.x,D.start.y)]),this.ctx.stroke()),Zc(l[1])&&(B=l[1],D=l[2],this.ctx.beginPath(),this.formatPath([new Yt(B.end.x,B.end.y),new Yt(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return Go(this,void 0,void 0,function(){var n;return wo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Cs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=o7e(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Cte),x7e=function(e){return e instanceof ste||e instanceof ite?!0:e instanceof DP&&e.type!==b_&&e.type!==y_},y7e=function(e,t){switch(e){case 0:return E_(t);case 2:return t7e(t);case 1:default:return __(t)}},b7e=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},w7e=["-apple-system","system-ui"],C7e=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return w7e.indexOf(t)===-1}):e},E7e=function(e){id(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return Go(this,void 0,void 0,function(){var n,a;return wo(this,function(i){switch(i.label){case 0:return n=V3(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,_7e(n)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Cs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Cte),_7e=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},S7e=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,O2([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,O2([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,O2([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,O2([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),T7e=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new S7e({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new $8e(this,t)}return e.instanceCount=1,e}(),Ete=function(e,t){return t===void 0&&(t={}),N7e(e,t)};typeof window<"u"&&gte.setContext(window);var N7e=function(e,t){return Go(void 0,void 0,void 0,function(){var r,n,a,i,s,o,l,c,u,A,h,m,v,g,y,w,T,N,F,B,E,D,E,S,k,H,P,M,Q,V,te,W,re,z,X,K,se,U,Y,Z;return wo(this,function(ne){switch(ne.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(k=t.imageTimeout)!==null&&k!==void 0?k:15e3,proxy:t.proxy,useCORS:(H=t.useCORS)!==null&&H!==void 0?H:!1},i=N3({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},a),s={windowWidth:(M=t.windowWidth)!==null&&M!==void 0?M:n.innerWidth,windowHeight:(Q=t.windowHeight)!==null&&Q!==void 0?Q:n.innerHeight,scrollX:(V=t.scrollX)!==null&&V!==void 0?V:n.pageXOffset,scrollY:(te=t.scrollY)!==null&&te!==void 0?te:n.pageYOffset},o=new CA(s.scrollX,s.scrollY,s.windowWidth,s.windowHeight),l=new T7e(i,o),c=(W=t.foreignObjectRendering)!==null&&W!==void 0?W:!1,u={allowTaint:(re=t.allowTaint)!==null&&re!==void 0?re:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),A=new p9(l,e,u),h=A.clonedReferenceElement,h?[4,A.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=ne.sent(),v=RP(h)||k8e(h)?sLe(h.ownerDocument):CT(l,h),g=v.width,y=v.height,w=v.left,T=v.top,N=B7e(l,h,t.backgroundColor),F={canvas:t.canvas,backgroundColor:N,scale:(X=(z=t.scale)!==null&&z!==void 0?z:n.devicePixelRatio)!==null&&X!==void 0?X:1,x:((K=t.x)!==null&&K!==void 0?K:0)+w,y:((se=t.y)!==null&&se!==void 0?se:0)+T,width:(U=t.width)!==null&&U!==void 0?U:Math.ceil(g),height:(Y=t.height)!==null&&Y!==void 0?Y:Math.ceil(y)},c?(l.logger.debug("Document cloned, using foreign object rendering"),E=new E7e(l,F),[4,E.render(h)]):[3,3];case 2:return B=ne.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+w+","+T+" with size "+g+"x"+y+" using computed rendering"),l.logger.debug("Starting DOM parsing"),D=cte(l,h),N===D.styles.backgroundColor&&(D.styles.backgroundColor=fA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),E=new v7e(l,F),[4,E.render(D)];case 4:B=ne.sent(),ne.label=5;case 5:return(!((Z=t.removeContainer)!==null&&Z!==void 0)||Z)&&(p9.destroy(m)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,B]}})})},B7e=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?gy(e,getComputedStyle(n.documentElement).backgroundColor):fA.TRANSPARENT,i=n.body?gy(e,getComputedStyle(n.body).backgroundColor):fA.TRANSPARENT,s=typeof r=="string"?gy(e,r):r===null?fA.TRANSPARENT:4294967295;return t===n.documentElement?a0(a)?a0(i)?s:i:a:s};const k7e=Object.freeze(Object.defineProperty({__proto__:null,default:Ete},Symbol.toStringTag,{value:"Module"})),DT="proyectos_interdisciplinarios",_te="entregas_interdisciplinarias",I7e="usuarios",PP=e=>{const t=e.data();return{id:e.id,...t}},F7e=e=>{const t=tr(Ft(Tt,DT),an("nombreProyecto","asc"));return yr(t,n=>{const a=n.docs.map(i=>PP(i));e(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},D7e=async e=>{try{return(await Da(Ft(Tt,DT),e)).id}catch(t){throw console.error("Error al crear la planificación:",t),new Error("No se pudo crear la planificación.")}},y9=async(e,t)=>{try{const{id:r,...n}=t,a=br(Tt,DT,e);await ro(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},R7e=async e=>{try{const t=br(Tt,DT,e);await Fs(t)}catch(t){throw console.error("Error al eliminar la planificación:",t),new Error("No se pudo eliminar la planificación.")}},P7e=(e,t)=>{const r=tr(Ft(Tt,_te),On("planificacionId","==",e));return yr(r,a=>{const i=a.docs.map(s=>PP(s));t(i)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},b9=async(e,t)=>{try{const r=br(Tt,_te,e);await ro(r,{feedbackProfesor:t,fechaFeedback:Ar.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},M7e=e=>{const t=tr(Ft(Tt,I7e));return yr(t,n=>{const a=n.docs.map(i=>PP(i));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},L7e=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=L.useState(null),a=L.useMemo(()=>{const l=[];return e.forEach(c=>{(c.actividades||[]).forEach(u=>l.push({...u,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(u=>l.push({id:u.id,planId:c.id,type:"keyDate",nombre:u.nombre,fechaInicio:u.fecha,fechaFin:u.fecha,responsables:c.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((c,u)=>new Date(c.fechaInicio).getTime()-new Date(u.fechaInicio).getTime())},[e]),i=L.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const c=new Date;c.setHours(0,0,0,0);const u=new Date(`${l.fechaInicio}T00:00:00`),A=new Date(`${l.fechaFin}T00:00:00`);return A<c?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:u<=c&&A>=c?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),s=({name:l})=>{const c=(l||"").split(" ").map(m=>m[0]).join("").toUpperCase(),u=m=>{let v=0;for(let g=0;g<m.length;g++)v=m.charCodeAt(g)+((v<<5)-v);return v},A=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],h=Math.abs(u(l))%A.length;return d.jsx("div",{className:`w-9 h-9 rounded-full ${A[h]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:c.slice(0,2)})},o=({data:l,onClose:c,onSave:u})=>{const[A,h]=L.useState(l.activity),m=g=>{h({...A,[g.target.name]:g.target.value})},v=()=>{u(l.planId,A),c()};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[d.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),d.jsx("input",{name:"nombre",value:A.nombre,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),d.jsx("input",{name:"responsables",value:A.responsables,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),d.jsx("input",{type:"date",name:"fechaInicio",value:A.fechaInicio,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),d.jsx("input",{type:"date",name:"fechaFin",value:A.fechaFin,onChange:m,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),d.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[d.jsx("button",{onClick:c,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),d.jsx("button",{onClick:v,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),d.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[d.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),d.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),d.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),d.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),d.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const c=i(l),u=l.type==="activity";return d.jsxs("tr",{className:`${u?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>u&&n({planId:l.planId,activity:l}),children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${c.color}`,children:c.text})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx(s,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&d.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},O7e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),U7e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),j7e=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),d.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),H7e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),Q7e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),V7e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),z7e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),G7e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Y3=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),_h=({icon:e,label:t,children:r,aiButton:n})=>d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[e,d.jsx("span",{children:t})]}),n]}),r]}),q7e=({initialPlan:e,onSave:t,onCancel:r})=>{const[n,a]=L.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,s]=L.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=L.useState({nombre:"",fecha:""}),[c,u]=L.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[A,h]=L.useState(!1),[m,v]=L.useState(!1),[g,y]=L.useState(!1);L.useEffect(()=>{a(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const w=async S=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}S==="objetivos"?h(!0):v(!0);const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let H="";S==="objetivos"?H=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:H=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const te=(await(await new Wi(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(H)).response).text();a(W=>({...W,[S]:te.replace(/(\*\*|\*)/g,"")}))}catch(P){console.error(`Error al generar ${S}`,P),alert(`Hubo un error al generar los ${S}. Inténtelo de nuevo.`)}finally{S==="objetivos"?h(!1):v(!1)}},T=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}y(!0);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const te=(await(await new Wi(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(k)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(te);a(re=>{var z,X,K;return{...re,actividades:((z=W.actividades)==null?void 0:z.map(se=>({...se,id:crypto.randomUUID()})))||re.actividades,fechasClave:((X=W.fechasClave)==null?void 0:X.map(se=>({...se,id:crypto.randomUUID()})))||re.fechasClave,tareas:((K=W.tareas)==null?void 0:K.map((se,U)=>({...se,id:crypto.randomUUID(),numero:U+1})))||re.tareas}})}catch(H){console.error("Error al generar la estructura del proyecto:",H),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{y(!1)}},N=S=>{a(k=>({...k,[S.target.name]:S.target.value}))},F=(S,k)=>{a(H=>{const P=H[S],M=P.includes(k)?P.filter(Q=>Q!==k):[...P,k];return{...H,[S]:M}})},B=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(S=>({...S,actividades:[...S.actividades||[],{...i,id:crypto.randomUUID()}]})),s({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},D=()=>{!o.nombre||!o.fecha||(a(S=>({...S,fechasClave:[...S.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},E=()=>{var k;if(!c.instrucciones||!c.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const S={id:crypto.randomUUID(),numero:(((k=n.tareas)==null?void 0:k.length)||0)+1,...c};a(H=>({...H,tareas:[...H.tareas||[],S]})),u({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return d.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[d.jsx("div",{className:"text-center mb-12",children:d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),d.jsxs("div",{className:"space-y-6",children:[d.jsx(_h,{icon:d.jsx(O7e,{}),label:"Nombre del Proyecto",children:d.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:N,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),d.jsx(_h,{icon:d.jsx(U7e,{}),label:"Profesores",children:d.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:N,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),d.jsx(_h,{icon:d.jsx(j7e,{}),label:"Cursos",children:d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:Ni.map(S=>d.jsx("button",{type:"button",onClick:()=>F("cursos",S),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(S)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:S},S))})}),d.jsx(_h,{icon:d.jsx(H7e,{}),label:"Asignaturas",children:d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:cc.map(S=>d.jsx("button",{type:"button",onClick:()=>F("asignaturas",S),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(S)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:S},S))})}),d.jsx(_h,{icon:d.jsx(Q7e,{}),label:"Descripción del Proyecto",children:d.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:N,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),d.jsx(_h,{icon:d.jsx(V7e,{}),label:"Objetivos",aiButton:d.jsx("button",{type:"button",onClick:()=>w("objetivos"),disabled:!n.descripcionProyecto.trim()||A,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:d.jsx(Y3,{})}),children:A?d.jsx("div",{className:"p-4 text-center",children:"Generando..."}):d.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:N,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),d.jsx(_h,{icon:d.jsx(z7e,{}),label:"Indicadores de Éxito",aiButton:d.jsx("button",{type:"button",onClick:()=>w("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||m,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:d.jsx(Y3,{})}),children:m?d.jsx("div",{className:"p-4 text-center",children:"Generando..."}):d.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:N,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),d.jsx(_h,{icon:d.jsx(G7e,{}),label:"Carta Gantt",children:d.jsxs("div",{className:"space-y-4 mt-2",children:[d.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:d.jsx("button",{type:"button",onClick:T,disabled:g||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:g?"Generando...":"✨ Sugerir Estructura con IA"})}),d.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[d.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[d.jsx("input",{value:i.nombre,onChange:S=>s({...i,nombre:S.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),d.jsx("input",{type:"date",value:i.fechaInicio,onChange:S=>s({...i,fechaInicio:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),d.jsx("input",{type:"date",value:i.fechaFin,onChange:S=>s({...i,fechaFin:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),d.jsx("button",{onClick:B,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),d.jsx("ul",{className:"text-xs",children:n.actividades.map(S=>d.jsx("li",{children:S.nombre},S.id))})]}),d.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[d.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[d.jsx("input",{value:o.nombre,onChange:S=>l({...o,nombre:S.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),d.jsx("input",{type:"date",value:o.fecha,onChange:S=>l({...o,fecha:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),d.jsx("button",{onClick:D,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),d.jsx("ul",{className:"text-xs",children:n.fechasClave.map(S=>d.jsxs("li",{children:[S.nombre," (",S.fecha,")"]},S.id))})]}),d.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[d.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[d.jsx("input",{value:c.instrucciones,onChange:S=>u({...c,instrucciones:S.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),d.jsx("input",{type:"date",value:c.fechaEntrega,onChange:S=>u({...c,fechaEntrega:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),d.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),d.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(S=>d.jsxs("li",{children:[S.numero,". ",S.instrucciones]},S.id))})]})]})}),d.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[d.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),d.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:e?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},w9=()=>{const[e,t]=L.useState([]),[r,n]=L.useState(!0),[a,i]=L.useState("list"),[s,o]=L.useState(null),[l,c]=L.useState(null),[u,A]=L.useState(null);L.useEffect(()=>{n(!0);const N=F7e(F=>{t(F),n(!1)});return()=>N()},[]);const h=L.useCallback(async(N,F)=>{const B=e.find(D=>D.id===N);if(B){const D={...B,actividades:(B.actividades||[]).map(E=>E.id===F.id?F:E)};await y9(N,D)}},[e]),m=async N=>{try{"id"in N&&N.id?await y9(N.id,N):await D7e(N),i("list"),o(null)}catch(F){console.error("Error al guardar la planificación:",F),alert("No se pudo guardar la planificación.")}},v=N=>{o(N),i("form")},g=async N=>{if(console.log("ID recibido por handleDelete:",N),!N){console.error("handleDelete fue llamado con un ID inválido:",N),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await R7e(N)}catch(F){console.error("Error al eliminar la planificación:",F),alert("No se pudo eliminar la planificación.")}},y=()=>{o(null),i("form")},w=async N=>{c(N.id);const F=new ur("p","mm","a4"),B=15,D=F.internal.pageSize.getWidth(),E=F.internal.pageSize.getHeight(),S=D-B*2;let k=B;const H=22,P=14,M=11,Q=()=>{F.setFont("helvetica","normal"),F.setFontSize(9),F.setTextColor(150),F.text("Proyecto Interdisciplinario",B,12),F.text("Liceo Industrial de Recoleta",D-B,12,{align:"right"}),F.setDrawColor(220),F.line(B,15,D-B,15)},V=X=>{k+X>E-B&&(F.addPage(),Q(),k=B+15)},te=(X,K)=>{if(!K||Array.isArray(K)&&K.length===0||typeof K=="string"&&!K.trim())return;const se=10;F.setFontSize(M);const U=Array.isArray(K)?K.join(", "):String(K),Y=F.splitTextToSize(U,S),Z=Y.length*(M*.35*1.15);V(se+Z+12),F.setFont("helvetica","bold"),F.setFontSize(P),F.setTextColor(40),F.text(X,B,k),k+=6,F.setDrawColor(200),F.line(B,k,B+30,k),k+=8,F.setFont("helvetica","normal"),F.setFontSize(M),F.setTextColor(80),F.text(Y,B,k),k+=Z+12};Q(),k=B+20,F.setFont("helvetica","bold"),F.setFontSize(H),F.setTextColor(0);const W=F.splitTextToSize(N.nombreProyecto,S);if(F.text(W,B,k),k+=W.length*(H*.4)+10,sc(F,{startY:k,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},N.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},N.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},N.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:M,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),k=F.lastAutoTable.finalY+15,te("Descripción del Proyecto",N.descripcionProyecto),te("Objetivos de Aprendizaje",N.objetivos),te("Indicadores de Logro",N.indicadoresLogro),N.tareas&&N.tareas.length>0){const X=N.tareas.map(se=>[se.numero.toString(),se.instrucciones,se.fechaEntrega]),K=(X.length+1)*10+15;V(K+15),F.setFont("helvetica","bold"),F.setFontSize(P),F.setTextColor(40),F.text("Tareas para Estudiantes",B,k),k+=10,sc(F,{startY:k,head:[["#","Instrucciones","Fecha de Entrega"]],body:X,theme:"striped",headStyles:{fillColor:[52,73,94]}}),k=F.lastAutoTable.finalY+15}const re=document.getElementById("gantt-container-vertical");if(re)try{const K=(await Ete(re,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");F.addPage(),Q(),k=B+15,F.setFont("helvetica","bold"),F.setFontSize(P),F.setTextColor(40),F.text("Cronograma del Proyecto",B,k),k+=10;const se=F.getImageProperties(K),U=S,Y=se.height*U/se.width;F.addImage(K,"PNG",B,k,U,Y)}catch(X){console.error("Error generating timeline image:",X)}const z=F.internal.pages.length-1;for(let X=1;X<=z;X++)F.setPage(X),F.setFont("helvetica","normal"),F.setFontSize(9),F.setTextColor(150),F.text(`Página ${X} de ${z}`,D-B,F.internal.pageSize.getHeight()-10,{align:"right"});F.save(`Proyecto_${N.nombreProyecto.replace(/\s/g,"_")}.pdf`),c(null)},T=({plan:N,onBack:F})=>{var te,W;const[B,D]=L.useState([]),[E,S]=L.useState([]),[k,H]=L.useState(((te=N.tareas)==null?void 0:te[0])||null),[P,M]=L.useState(null);L.useEffect(()=>{const re=M7e(D),z=P7e(N.id,S);return()=>{re(),z()}},[N.id]);const Q=L.useMemo(()=>B.filter(re=>re.profile===Ht.ESTUDIANTE&&N.cursos.includes(re.curso||"")).sort((re,z)=>re.nombreCompleto.localeCompare(z.nombreCompleto)),[B,N.cursos]),V=async re=>{var K;M(re.id);const z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${k==null?void 0:k.instrucciones}"
                - Comentario del estudiante: "${re.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${re.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((K=re.archivoAdjunto)==null?void 0:K.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const ne=(await(await new Wi(z).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(X)).response).text().replace(/(\*\*|\*)/g,"");await b9(re.id,ne)}catch(se){console.error("Error al generar feedback con IA:",se),alert("No se pudo generar la retroalimentación.")}finally{M(null)}};return k?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",N.nombreProyecto]}),d.jsx("button",{onClick:F,className:"font-semibold",children:"← Volver a Proyectos"})]}),d.jsx("select",{value:k.id,onChange:re=>{var z;return H(((z=N.tareas)==null?void 0:z.find(X=>X.id===re.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(W=N.tareas)==null?void 0:W.map(re=>d.jsxs("option",{value:re.id,children:["Tarea ",re.numero,": ",re.instrucciones]},re.id))}),d.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:Q.map(re=>{const z=E.find(X=>X.tareaId===k.id&&X.estudianteId===re.id);return d.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[d.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[re.nombreCompleto," - ",z!=null&&z.completada?d.jsx("span",{className:"text-green-600",children:"Entregado"}):d.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),z?d.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[z.observacionesEstudiante&&d.jsxs("p",{children:[d.jsx("strong",{children:"Comentario:"})," ",z.observacionesEstudiante]}),z.enlaceUrl&&d.jsxs("p",{children:[d.jsx("strong",{children:"Enlace:"})," ",d.jsx("a",{href:z.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:z.enlaceUrl})]}),z.archivoAdjunto&&d.jsxs("p",{children:[d.jsx("strong",{children:"Archivo:"})," ",d.jsx("a",{href:z.archivoAdjunto.url,download:z.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:z.archivoAdjunto.nombre})]}),d.jsxs("div",{className:"flex items-end gap-2",children:[d.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:z.feedbackProfesor||"",onBlur:X=>b9(z.id,X.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},z.id),d.jsx("button",{onClick:()=>V(z),disabled:P===z.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:P===z.id?"...":d.jsx(Y3,{})})]})]}):d.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},re.id)})})]}):d.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?d.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):u?d.jsx(T,{plan:u,onBack:()=>A(null)}):d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),d.jsx("button",{onClick:y,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),d.jsx("div",{className:"space-y-4",children:e.map(N=>(console.log("Inspeccionando objeto plan:",N),d.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:N.nombreProyecto}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(N.cursos||[]).join(", ")]})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("button",{onClick:()=>A(N),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),d.jsx("button",{onClick:()=>w(N),disabled:l===N.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===N.id?"Exportando...":"Exportar PDF"}),d.jsx("button",{onClick:()=>v(N),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),d.jsx("button",{onClick:()=>g(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},N.id)))})]}):d.jsx(q7e,{initialPlan:s,onSave:m,onCancel:()=>{i("list"),o(null)}}),e.length>0&&d.jsx("div",{id:"gantt-container-vertical",children:d.jsx(L7e,{planificaciones:e,onActivityUpdate:h})})]})},l4="pañolMaquinas",C9="pañolRegistros",$7e=()=>{const[e,t]=L.useState([]),[r,n]=L.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[i,s]=L.useState(a),[o,l]=L.useState(null),c={nombre:"",especialidad:"Industrial"},[u,A]=L.useState(c),[h,m]=L.useState(null),[v,g]=L.useState({maquinaId:"",curso:"",profesor:"",fecha:""});L.useEffect(()=>{try{const M=localStorage.getItem(l4);if(M&&JSON.parse(M).length>0)t(JSON.parse(M));else{const V=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];t(V),localStorage.setItem(l4,JSON.stringify(V))}const Q=localStorage.getItem(C9);Q&&n(JSON.parse(Q))}catch(M){console.error("Error al cargar datos de Pañol desde localStorage",M)}},[]);const y=L.useCallback(M=>{t(M),localStorage.setItem(l4,JSON.stringify(M))},[]),w=L.useCallback(M=>{n(M),localStorage.setItem(C9,JSON.stringify(M))},[]),T=M=>{M.preventDefault(),u.nombre.trim()&&(y(h?e.map(Q=>Q.id===h.id?{...h,...u}:Q):[{...u,id:crypto.randomUUID()},...e]),A(c),m(null))},N=L.useCallback(M=>{if(r.some(Q=>Q.maquinaId===M)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&y(e.filter(Q=>Q.id!==M))},[e,r,y]),F=M=>{M.preventDefault();const Q=o||i;if(!Q.curso||!Q.profesorResponsable.trim()||!Q.maquinaId||Q.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}w(o?r.map(V=>V.id===o.id?o:V):[{...i,id:crypto.randomUUID()},...r]),s(a),l(null)},B=L.useCallback(M=>{window.confirm("¿Eliminar este registro de uso?")&&w(r.filter(Q=>Q.id!==M))},[r,w]),D=L.useMemo(()=>r.filter(M=>(v.maquinaId===""||M.maquinaId===v.maquinaId)&&(v.curso===""||M.curso===v.curso)&&(v.profesor===""||M.profesorResponsable.toLowerCase().includes(v.profesor.toLowerCase()))&&(v.fecha===""||M.fecha===v.fecha)).sort((M,Q)=>new Date(Q.fecha).getTime()-new Date(M.fecha).getTime()),[r,v]),E=L.useMemo(()=>new Map(e.map(M=>[M.id,M])),[e]),S=()=>{const M=D.map(te=>{var W,re;return{Fecha:te.fecha,Curso:te.curso,Profesor:te.profesorResponsable,Máquina:((W=E.get(te.maquinaId))==null?void 0:W.nombre)||"N/A",Especialidad:((re=E.get(te.maquinaId))==null?void 0:re.especialidad)||"N/A","Total Horas":te.totalHoras,Observaciones:te.observaciones}}),Q=au.json_to_sheet(M),V=au.book_new();au.book_append_sheet(V,Q,"RegistrosPañol"),hP(V,"Registros_Pañol.xlsx")},k=()=>{const M=new ur;sc(M,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:D.map(Q=>{var V,te;return[Q.fecha,Q.curso,Q.profesorResponsable,((V=E.get(Q.maquinaId))==null?void 0:V.nombre)||"N/A",((te=E.get(Q.maquinaId))==null?void 0:te.especialidad)||"N/A",Q.totalHoras,Q.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:Q=>{M.setFontSize(10),M.setFont("helvetica","bold"),M.text("LICEO INDUSTRIAL DE RECOLETA",Q.settings.margin.left,15)}}),M.save("Registros_Pañol.pdf")},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",P=()=>{const M=o||i,Q=o?l:s;return d.jsxs("form",{onSubmit:F,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),d.jsx("input",{name:"fecha",type:"date",value:M.fecha,onChange:V=>Q({...M,fecha:V.target.value}),className:H,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Curso"}),d.jsxs("select",{name:"curso",value:M.curso,onChange:V=>Q({...M,curso:V.target.value}),className:H,required:!0,children:[d.jsx("option",{value:"",children:"Curso"}),Ni.map(V=>d.jsx("option",{children:V},V))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),d.jsxs("select",{name:"profesorResponsable",value:M.profesorResponsable,onChange:V=>Q({...M,profesorResponsable:V.target.value}),className:H,required:!0,children:[d.jsx("option",{value:"",children:"Profesor Responsable"}),jI.map(V=>d.jsx("option",{value:V,children:V},V))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),d.jsxs("select",{name:"maquinaId",value:M.maquinaId,onChange:V=>Q({...M,maquinaId:V.target.value}),className:H,required:!0,children:[d.jsx("option",{value:"",children:"Máquina"}),e.map(V=>d.jsx("option",{value:V.id,children:V.nombre},V.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),d.jsx("input",{name:"totalHoras",type:"number",value:M.totalHoras,onChange:V=>Q({...M,totalHoras:Number(V.target.value)}),className:H,required:!0,min:"0.5",step:"0.5"})]}),d.jsxs("div",{className:"lg:col-span-3",children:[d.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),d.jsx("textarea",{name:"observaciones",value:M.observaciones,onChange:V=>Q({...M,observaciones:V.target.value}),placeholder:"Observaciones...",className:`${H}`,rows:1})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&d.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),P()]}),d.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),d.jsxs("form",{onSubmit:T,className:"flex gap-2 mb-4",children:[d.jsx("input",{value:u.nombre,onChange:M=>A({...u,nombre:M.target.value}),placeholder:"Nombre máquina",className:H}),d.jsxs("select",{value:u.especialidad,onChange:M=>A({...u,especialidad:M.target.value}),className:H,children:[d.jsx("option",{value:"Industrial",children:"Industrial"}),d.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),d.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:h?"✓":"+"})]}),d.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.map(M=>d.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[d.jsxs("span",{children:[M.nombre," ",d.jsxs("span",{className:"text-xs text-slate-500",children:["(",M.especialidad,")"]})]}),d.jsxs("div",{className:"space-x-2",children:[d.jsx("button",{onClick:()=>{m(M),A(M)},className:"text-blue-500",children:"✏️"}),d.jsx("button",{onClick:()=>N(M.id),className:"text-red-500",children:"🗑️"})]})]},M.id))})]}),d.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:S,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),d.jsx("button",{onClick:k,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[d.jsx("input",{type:"date",value:v.fecha,onChange:M=>g({...v,fecha:M.target.value}),className:H}),d.jsxs("select",{value:v.curso,onChange:M=>g({...v,curso:M.target.value}),className:H,children:[d.jsx("option",{value:"",children:"Todos los Cursos"}),Ni.map(M=>d.jsx("option",{children:M},M))]}),d.jsxs("select",{value:v.maquinaId,onChange:M=>g({...v,maquinaId:M.target.value}),className:H,children:[d.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(M=>d.jsx("option",{value:M.id,children:M.nombre},M.id))]}),d.jsx("input",{value:v.profesor,onChange:M=>g({...v,profesor:M.target.value}),placeholder:"Buscar profesor...",className:H})]}),d.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),d.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:D.map(M=>{var Q;return d.jsxs("tr",{children:[d.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:M.fecha}),d.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((Q=E.get(M.maquinaId))==null?void 0:Q.nombre)||"N/A"}),d.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[M.profesorResponsable," (",M.curso,")"]}),d.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:M.totalHoras}),d.jsxs("td",{className:"px-3 py-2 text-center",children:[d.jsx("button",{onClick:()=>l(M),className:"text-blue-500",children:"✏️"}),d.jsx("button",{onClick:()=>B(M.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},M.id)})})]})})]})]})]})};function Zo(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Zo(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var c4={exports:{}},u4={},d4={exports:{}},f4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E9;function K7e(){if(E9)return f4;E9=1;var e=Gv();function t(A,h){return A===h&&(A!==0||1/A===1/h)||A!==A&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function o(A,h){var m=h(),v=n({inst:{value:m,getSnapshot:h}}),g=v[0].inst,y=v[1];return i(function(){g.value=m,g.getSnapshot=h,l(g)&&y({inst:g})},[A,m,h]),a(function(){return l(g)&&y({inst:g}),A(function(){l(g)&&y({inst:g})})},[A]),s(m),m}function l(A){var h=A.getSnapshot;A=A.value;try{var m=h();return!r(A,m)}catch{return!0}}function c(A,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return f4.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,f4}var _9;function W7e(){return _9||(_9=1,d4.exports=K7e()),d4.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S9;function Y7e(){if(S9)return u4;S9=1;var e=Gv(),t=W7e();function r(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return u4.useSyncExternalStoreWithSelector=function(c,u,A,h,m){var v=i(null);if(v.current===null){var g={hasValue:!1,value:null};v.current=g}else g=v.current;v=o(function(){function w(D){if(!T){if(T=!0,N=D,D=h(D),m!==void 0&&g.hasValue){var E=g.value;if(m(E,D))return F=E}return F=D}if(E=F,n(N,D))return E;var S=h(D);return m!==void 0&&m(E,S)?(N=D,E):(N=D,F=S)}var T=!1,N,F,B=A===void 0?null:A;return[function(){return w(u())},B===null?void 0:function(){return w(B())}]},[u,A,h,m]);var y=a(c,v[0],v[1]);return s(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},u4}var T9;function X7e(){return T9||(T9=1,c4.exports=Y7e()),c4.exports}var Ste=X7e();const J7e=mc(Ste),Z7e={},N9=e=>{let t;const r=new Set,n=(u,A)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=A??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(v=>v(t,m))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(Z7e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=t=e(n,a,l);return l},eHe=e=>e?N9(e):N9,{useDebugValue:tHe}=ft,{useSyncExternalStoreWithSelector:rHe}=J7e,nHe=e=>e;function Tte(e,t=nHe,r){const n=rHe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return tHe(n),n}const B9=(e,t)=>{const r=eHe(e),n=(a,i=t)=>Tte(r,a,i);return Object.assign(n,r),n},aHe=(e,t)=>e?B9(e,t):B9;function Uo(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var iHe={value:()=>{}};function RT(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new iE(r)}function iE(e){this._=e}function sHe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}iE.prototype=RT.prototype={constructor:iE,on:function(e,t){var r=this._,n=sHe(e+"",r),a,i=-1,s=n.length;if(arguments.length<2){for(;++i<s;)if((a=(e=n[i]).type)&&(a=oHe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(a=(e=n[i]).type)r[a]=k9(r[a],e.name,t);else if(t==null)for(a in r)r[a]=k9(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new iE(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function oHe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function k9(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=iHe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var X3="http://www.w3.org/1999/xhtml";const I9={svg:"http://www.w3.org/2000/svg",xhtml:X3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function PT(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),I9.hasOwnProperty(t)?{space:I9[t],local:e}:e}function lHe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===X3&&t.documentElement.namespaceURI===X3?t.createElement(e):t.createElementNS(r,e)}}function cHe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Nte(e){var t=PT(e);return(t.local?cHe:lHe)(t)}function uHe(){}function MP(e){return e==null?uHe:function(){return this.querySelector(e)}}function dHe(e){typeof e!="function"&&(e=MP(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,o=n[a]=new Array(s),l,c,u=0;u<s;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new dc(n,this._parents)}function fHe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function AHe(){return[]}function Bte(e){return e==null?AHe:function(){return this.querySelectorAll(e)}}function hHe(e){return function(){return fHe(e.apply(this,arguments))}}function pHe(e){typeof e=="function"?e=hHe(e):e=Bte(e);for(var t=this._groups,r=t.length,n=[],a=[],i=0;i<r;++i)for(var s=t[i],o=s.length,l,c=0;c<o;++c)(l=s[c])&&(n.push(e.call(l,l.__data__,c,s)),a.push(l));return new dc(n,a)}function kte(e){return function(){return this.matches(e)}}function Ite(e){return function(t){return t.matches(e)}}var mHe=Array.prototype.find;function gHe(e){return function(){return mHe.call(this.children,e)}}function vHe(){return this.firstElementChild}function xHe(e){return this.select(e==null?vHe:gHe(typeof e=="function"?e:Ite(e)))}var yHe=Array.prototype.filter;function bHe(){return Array.from(this.children)}function wHe(e){return function(){return yHe.call(this.children,e)}}function CHe(e){return this.selectAll(e==null?bHe:wHe(typeof e=="function"?e:Ite(e)))}function EHe(e){typeof e!="function"&&(e=kte(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,o=n[a]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&o.push(l);return new dc(n,this._parents)}function Fte(e){return new Array(e.length)}function _He(){return new dc(this._enter||this._groups.map(Fte),this._parents)}function T_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}T_.prototype={constructor:T_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function SHe(e){return function(){return e}}function THe(e,t,r,n,a,i){for(var s=0,o,l=t.length,c=i.length;s<c;++s)(o=t[s])?(o.__data__=i[s],n[s]=o):r[s]=new T_(e,i[s]);for(;s<l;++s)(o=t[s])&&(a[s]=o)}function NHe(e,t,r,n,a,i,s){var o,l,c=new Map,u=t.length,A=i.length,h=new Array(u),m;for(o=0;o<u;++o)(l=t[o])&&(h[o]=m=s.call(l,l.__data__,o,t)+"",c.has(m)?a[o]=l:c.set(m,l));for(o=0;o<A;++o)m=s.call(e,i[o],o,i)+"",(l=c.get(m))?(n[o]=l,l.__data__=i[o],c.delete(m)):r[o]=new T_(e,i[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(h[o])===l&&(a[o]=l)}function BHe(e){return e.__data__}function kHe(e,t){if(!arguments.length)return Array.from(this,BHe);var r=t?NHe:THe,n=this._parents,a=this._groups;typeof e!="function"&&(e=SHe(e));for(var i=a.length,s=new Array(i),o=new Array(i),l=new Array(i),c=0;c<i;++c){var u=n[c],A=a[c],h=A.length,m=IHe(e.call(u,u&&u.__data__,c,n)),v=m.length,g=o[c]=new Array(v),y=s[c]=new Array(v),w=l[c]=new Array(h);r(u,A,g,y,w,m,t);for(var T=0,N=0,F,B;T<v;++T)if(F=g[T]){for(T>=N&&(N=T+1);!(B=y[N])&&++N<v;);F._next=B||null}}return s=new dc(s,n),s._enter=o,s._exit=l,s}function IHe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FHe(){return new dc(this._exit||this._groups.map(Fte),this._parents)}function DHe(e,t,r){var n=this.enter(),a=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?i.remove():r(i),n&&a?n.merge(a).order():a}function RHe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,i=n.length,s=Math.min(a,i),o=new Array(a),l=0;l<s;++l)for(var c=r[l],u=n[l],A=c.length,h=o[l]=new Array(A),m,v=0;v<A;++v)(m=c[v]||u[v])&&(h[v]=m);for(;l<a;++l)o[l]=r[l];return new dc(o,this._parents)}function PHe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,i=n[a],s;--a>=0;)(s=n[a])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function MHe(e){e||(e=LHe);function t(A,h){return A&&h?e(A.__data__,h.__data__):!A-!h}for(var r=this._groups,n=r.length,a=new Array(n),i=0;i<n;++i){for(var s=r[i],o=s.length,l=a[i]=new Array(o),c,u=0;u<o;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new dc(a,this._parents).order()}function LHe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function OHe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function UHe(){return Array.from(this)}function jHe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length;a<i;++a){var s=n[a];if(s)return s}return null}function HHe(){let e=0;for(const t of this)++e;return e}function QHe(){return!this.node()}function VHe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,s=a.length,o;i<s;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this}function zHe(e){return function(){this.removeAttribute(e)}}function GHe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qHe(e,t){return function(){this.setAttribute(e,t)}}function $He(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function KHe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function WHe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function YHe(e,t){var r=PT(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?GHe:zHe:typeof t=="function"?r.local?WHe:KHe:r.local?$He:qHe)(r,t))}function Dte(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function XHe(e){return function(){this.style.removeProperty(e)}}function JHe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function ZHe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function eQe(e,t,r){return arguments.length>1?this.each((t==null?XHe:typeof t=="function"?ZHe:JHe)(e,t,r??"")):Bv(this.node(),e)}function Bv(e,t){return e.style.getPropertyValue(t)||Dte(e).getComputedStyle(e,null).getPropertyValue(t)}function tQe(e){return function(){delete this[e]}}function rQe(e,t){return function(){this[e]=t}}function nQe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function aQe(e,t){return arguments.length>1?this.each((t==null?tQe:typeof t=="function"?nQe:rQe)(e,t)):this.node()[e]}function Rte(e){return e.trim().split(/^|\s+/)}function LP(e){return e.classList||new Pte(e)}function Pte(e){this._node=e,this._names=Rte(e.getAttribute("class")||"")}Pte.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mte(e,t){for(var r=LP(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Lte(e,t){for(var r=LP(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function iQe(e){return function(){Mte(this,e)}}function sQe(e){return function(){Lte(this,e)}}function oQe(e,t){return function(){(t.apply(this,arguments)?Mte:Lte)(this,e)}}function lQe(e,t){var r=Rte(e+"");if(arguments.length<2){for(var n=LP(this.node()),a=-1,i=r.length;++a<i;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?oQe:t?iQe:sQe)(r,t))}function cQe(){this.textContent=""}function uQe(e){return function(){this.textContent=e}}function dQe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fQe(e){return arguments.length?this.each(e==null?cQe:(typeof e=="function"?dQe:uQe)(e)):this.node().textContent}function AQe(){this.innerHTML=""}function hQe(e){return function(){this.innerHTML=e}}function pQe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mQe(e){return arguments.length?this.each(e==null?AQe:(typeof e=="function"?pQe:hQe)(e)):this.node().innerHTML}function gQe(){this.nextSibling&&this.parentNode.appendChild(this)}function vQe(){return this.each(gQe)}function xQe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yQe(){return this.each(xQe)}function bQe(e){var t=typeof e=="function"?e:Nte(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wQe(){return null}function CQe(e,t){var r=typeof e=="function"?e:Nte(e),n=t==null?wQe:typeof t=="function"?t:MP(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function EQe(){var e=this.parentNode;e&&e.removeChild(this)}function _Qe(){return this.each(EQe)}function SQe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TQe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NQe(e){return this.select(e?TQe:SQe)}function BQe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kQe(e){return function(t){e.call(this,t,this.__data__)}}function IQe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function FQe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,i;r<a;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function DQe(e,t,r){return function(){var n=this.__on,a,i=kQe(t);if(n){for(var s=0,o=n.length;s<o;++s)if((a=n[s]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=t;return}}this.addEventListener(e.type,i,r),a={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(a):this.__on=[a]}}function RQe(e,t,r){var n=IQe(e+""),a,i=n.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(a=0,u=o[l];a<i;++a)if((s=n[a]).type===u.type&&s.name===u.name)return u.value}return}for(o=t?DQe:FQe,a=0;a<i;++a)this.each(o(n[a],t,r));return this}function Ote(e,t,r){var n=Dte(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function PQe(e,t){return function(){return Ote(this,e,t)}}function MQe(e,t){return function(){return Ote(this,e,t.apply(this,arguments))}}function LQe(e,t){return this.each((typeof t=="function"?MQe:PQe)(e,t))}function*OQe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length,s;a<i;++a)(s=n[a])&&(yield s)}var Ute=[null];function dc(e,t){this._groups=e,this._parents=t}function Wb(){return new dc([[document.documentElement]],Ute)}function UQe(){return this}dc.prototype=Wb.prototype={constructor:dc,select:dHe,selectAll:pHe,selectChild:xHe,selectChildren:CHe,filter:EHe,data:kHe,enter:_He,exit:FHe,join:DHe,merge:RHe,selection:UQe,order:PHe,sort:MHe,call:OHe,nodes:UHe,node:jHe,size:HHe,empty:QHe,each:VHe,attr:YHe,style:eQe,property:aQe,classed:lQe,text:fQe,html:mQe,raise:vQe,lower:yQe,append:bQe,insert:CQe,remove:_Qe,clone:NQe,datum:BQe,on:RQe,dispatch:LQe,[Symbol.iterator]:OQe};function nu(e){return typeof e=="string"?new dc([[document.querySelector(e)]],[document.documentElement]):new dc([[e]],Ute)}function jQe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Gd(e,t){if(e=jQe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const HQe={passive:!1},rb={capture:!0,passive:!1};function A4(e){e.stopImmediatePropagation()}function cv(e){e.preventDefault(),e.stopImmediatePropagation()}function jte(e){var t=e.document.documentElement,r=nu(e).on("dragstart.drag",cv,rb);"onselectstart"in t?r.on("selectstart.drag",cv,rb):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hte(e,t){var r=e.document.documentElement,n=nu(e).on("dragstart.drag",null);t&&(n.on("click.drag",cv,rb),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const oC=e=>()=>e;function J3(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:i,x:s,y:o,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}J3.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function QQe(e){return!e.ctrlKey&&!e.button}function VQe(){return this.parentNode}function zQe(e,t){return t??{x:e.x,y:e.y}}function GQe(){return navigator.maxTouchPoints||"ontouchstart"in this}function qQe(){var e=QQe,t=VQe,r=zQe,n=GQe,a={},i=RT("start","drag","end"),s=0,o,l,c,u,A=0;function h(F){F.on("mousedown.drag",m).filter(n).on("touchstart.drag",y).on("touchmove.drag",w,HQe).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(F,B){if(!(u||!e.call(this,F,B))){var D=N(this,t.call(this,F,B),F,B,"mouse");D&&(nu(F.view).on("mousemove.drag",v,rb).on("mouseup.drag",g,rb),jte(F.view),A4(F),c=!1,o=F.clientX,l=F.clientY,D("start",F))}}function v(F){if(cv(F),!c){var B=F.clientX-o,D=F.clientY-l;c=B*B+D*D>A}a.mouse("drag",F)}function g(F){nu(F.view).on("mousemove.drag mouseup.drag",null),Hte(F.view,c),cv(F),a.mouse("end",F)}function y(F,B){if(e.call(this,F,B)){var D=F.changedTouches,E=t.call(this,F,B),S=D.length,k,H;for(k=0;k<S;++k)(H=N(this,E,F,B,D[k].identifier,D[k]))&&(A4(F),H("start",F,D[k]))}}function w(F){var B=F.changedTouches,D=B.length,E,S;for(E=0;E<D;++E)(S=a[B[E].identifier])&&(cv(F),S("drag",F,B[E]))}function T(F){var B=F.changedTouches,D=B.length,E,S;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),E=0;E<D;++E)(S=a[B[E].identifier])&&(A4(F),S("end",F,B[E]))}function N(F,B,D,E,S,k){var H=i.copy(),P=Gd(k||D,B),M,Q,V;if((V=r.call(F,new J3("beforestart",{sourceEvent:D,target:h,identifier:S,active:s,x:P[0],y:P[1],dx:0,dy:0,dispatch:H}),E))!=null)return M=V.x-P[0]||0,Q=V.y-P[1]||0,function te(W,re,z){var X=P,K;switch(W){case"start":a[S]=te,K=s++;break;case"end":delete a[S],--s;case"drag":P=Gd(z||re,B),K=s;break}H.call(W,F,new J3(W,{sourceEvent:re,subject:V,target:h,identifier:S,active:K,x:P[0]+M,y:P[1]+Q,dx:P[0]-X[0],dy:P[1]-X[1],dispatch:H}),E)}}return h.filter=function(F){return arguments.length?(e=typeof F=="function"?F:oC(!!F),h):e},h.container=function(F){return arguments.length?(t=typeof F=="function"?F:oC(F),h):t},h.subject=function(F){return arguments.length?(r=typeof F=="function"?F:oC(F),h):r},h.touchable=function(F){return arguments.length?(n=typeof F=="function"?F:oC(!!F),h):n},h.on=function(){var F=i.on.apply(i,arguments);return F===i?h:F},h.clickDistance=function(F){return arguments.length?(A=(F=+F)*F,h):Math.sqrt(A)},h}function OP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Qte(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Yb(){}var nb=.7,N_=1/nb,uv="\\s*([+-]?\\d+)\\s*",ab="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$Qe=/^#([0-9a-f]{3,8})$/,KQe=new RegExp(`^rgb\\(${uv},${uv},${uv}\\)$`),WQe=new RegExp(`^rgb\\(${of},${of},${of}\\)$`),YQe=new RegExp(`^rgba\\(${uv},${uv},${uv},${ab}\\)$`),XQe=new RegExp(`^rgba\\(${of},${of},${of},${ab}\\)$`),JQe=new RegExp(`^hsl\\(${ab},${of},${of}\\)$`),ZQe=new RegExp(`^hsla\\(${ab},${of},${of},${ab}\\)$`),F9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};OP(Yb,am,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:D9,formatHex:D9,formatHex8:e9e,formatHsl:t9e,formatRgb:R9,toString:R9});function D9(){return this.rgb().formatHex()}function e9e(){return this.rgb().formatHex8()}function t9e(){return Vte(this).formatHsl()}function R9(){return this.rgb().formatRgb()}function am(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=$Qe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?P9(t):r===3?new bl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?lC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?lC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=KQe.exec(e))?new bl(t[1],t[2],t[3],1):(t=WQe.exec(e))?new bl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=YQe.exec(e))?lC(t[1],t[2],t[3],t[4]):(t=XQe.exec(e))?lC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=JQe.exec(e))?O9(t[1],t[2]/100,t[3]/100,1):(t=ZQe.exec(e))?O9(t[1],t[2]/100,t[3]/100,t[4]):F9.hasOwnProperty(e)?P9(F9[e]):e==="transparent"?new bl(NaN,NaN,NaN,0):null}function P9(e){return new bl(e>>16&255,e>>8&255,e&255,1)}function lC(e,t,r,n){return n<=0&&(e=t=r=NaN),new bl(e,t,r,n)}function r9e(e){return e instanceof Yb||(e=am(e)),e?(e=e.rgb(),new bl(e.r,e.g,e.b,e.opacity)):new bl}function Z3(e,t,r,n){return arguments.length===1?r9e(e):new bl(e,t,r,n??1)}function bl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}OP(bl,Z3,Qte(Yb,{brighter(e){return e=e==null?N_:Math.pow(N_,e),new bl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nb:Math.pow(nb,e),new bl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bl(Op(this.r),Op(this.g),Op(this.b),B_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M9,formatHex:M9,formatHex8:n9e,formatRgb:L9,toString:L9}));function M9(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}`}function n9e(){return`#${wp(this.r)}${wp(this.g)}${wp(this.b)}${wp((isNaN(this.opacity)?1:this.opacity)*255)}`}function L9(){const e=B_(this.opacity);return`${e===1?"rgb(":"rgba("}${Op(this.r)}, ${Op(this.g)}, ${Op(this.b)}${e===1?")":`, ${e})`}`}function B_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Op(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wp(e){return e=Op(e),(e<16?"0":"")+e.toString(16)}function O9(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qu(e,t,r,n)}function Vte(e){if(e instanceof qu)return new qu(e.h,e.s,e.l,e.opacity);if(e instanceof Yb||(e=am(e)),!e)return new qu;if(e instanceof qu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,l=(i+a)/2;return o?(t===i?s=(r-n)/o+(r<n)*6:r===i?s=(n-t)/o+2:s=(t-r)/o+4,o/=l<.5?i+a:2-i-a,s*=60):o=l>0&&l<1?0:s,new qu(s,o,l,e.opacity)}function a9e(e,t,r,n){return arguments.length===1?Vte(e):new qu(e,t,r,n??1)}function qu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}OP(qu,a9e,Qte(Yb,{brighter(e){return e=e==null?N_:Math.pow(N_,e),new qu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nb:Math.pow(nb,e),new qu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new bl(h4(e>=240?e-240:e+120,a,n),h4(e,a,n),h4(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new qu(U9(this.h),cC(this.s),cC(this.l),B_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=B_(this.opacity);return`${e===1?"hsl(":"hsla("}${U9(this.h)}, ${cC(this.s)*100}%, ${cC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function U9(e){return e=(e||0)%360,e<0?e+360:e}function cC(e){return Math.max(0,Math.min(1,e||0))}function h4(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const UP=e=>()=>e;function i9e(e,t){return function(r){return e+r*t}}function s9e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function o9e(e){return(e=+e)==1?zte:function(t,r){return r-t?s9e(t,r,e):UP(isNaN(t)?r:t)}}function zte(e,t){var r=t-e;return r?i9e(e,r):UP(isNaN(e)?t:e)}const k_=function e(t){var r=o9e(t);function n(a,i){var s=r((a=Z3(a)).r,(i=Z3(i)).r),o=r(a.g,i.g),l=r(a.b,i.b),c=zte(a.opacity,i.opacity);return function(u){return a.r=s(u),a.g=o(u),a.b=l(u),a.opacity=c(u),a+""}}return n.gamma=e,n}(1);function l9e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function c9e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function u9e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=cx(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function d9e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Gu(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function f9e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=cx(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var eF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p4=new RegExp(eF.source,"g");function A9e(e){return function(){return e}}function h9e(e){return function(t){return e(t)+""}}function Gte(e,t){var r=eF.lastIndex=p4.lastIndex=0,n,a,i,s=-1,o=[],l=[];for(e=e+"",t=t+"";(n=eF.exec(e))&&(a=p4.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,l.push({i:s,x:Gu(n,a)})),r=p4.lastIndex;return r<t.length&&(i=t.slice(r),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?h9e(l[0].x):A9e(t):(t=l.length,function(c){for(var u=0,A;u<t;++u)o[(A=l[u]).i]=A.x(c);return o.join("")})}function cx(e,t){var r=typeof t,n;return t==null||r==="boolean"?UP(t):(r==="number"?Gu:r==="string"?(n=am(t))?(t=n,k_):Gte:t instanceof am?k_:t instanceof Date?d9e:c9e(t)?l9e:Array.isArray(t)?u9e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?f9e:Gu)(e,t)}function jP(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var j9=180/Math.PI,tF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qte(e,t,r,n,a,i){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),e*n<t*r&&(e=-e,t=-t,l=-l,s=-s),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*j9,skewX:Math.atan(l)*j9,scaleX:s,scaleY:o}}var uC;function p9e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tF:qte(t.a,t.b,t.c,t.d,t.e,t.f)}function m9e(e){return e==null||(uC||(uC=document.createElementNS("http://www.w3.org/2000/svg","g")),uC.setAttribute("transform",e),!(e=uC.transform.baseVal.consolidate()))?tF:(e=e.matrix,qte(e.a,e.b,e.c,e.d,e.e,e.f))}function $te(e,t,r,n){function a(c){return c.length?c.pop()+" ":""}function i(c,u,A,h,m,v){if(c!==A||u!==h){var g=m.push("translate(",null,t,null,r);v.push({i:g-4,x:Gu(c,A)},{i:g-2,x:Gu(u,h)})}else(A||h)&&m.push("translate("+A+t+h+r)}function s(c,u,A,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:A.push(a(A)+"rotate(",null,n)-2,x:Gu(c,u)})):u&&A.push(a(A)+"rotate("+u+n)}function o(c,u,A,h){c!==u?h.push({i:A.push(a(A)+"skewX(",null,n)-2,x:Gu(c,u)}):u&&A.push(a(A)+"skewX("+u+n)}function l(c,u,A,h,m,v){if(c!==A||u!==h){var g=m.push(a(m)+"scale(",null,",",null,")");v.push({i:g-4,x:Gu(c,A)},{i:g-2,x:Gu(u,h)})}else(A!==1||h!==1)&&m.push(a(m)+"scale("+A+","+h+")")}return function(c,u){var A=[],h=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,A,h),s(c.rotate,u.rotate,A,h),o(c.skewX,u.skewX,A,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,A,h),c=u=null,function(m){for(var v=-1,g=h.length,y;++v<g;)A[(y=h[v]).i]=y.x(m);return A.join("")}}}var g9e=$te(p9e,"px, ","px)","deg)"),v9e=$te(m9e,", ",")",")"),x9e=1e-12;function H9(e){return((e=Math.exp(e))+1/e)/2}function y9e(e){return((e=Math.exp(e))-1/e)/2}function b9e(e){return((e=Math.exp(2*e))-1)/(e+1)}const w9e=function e(t,r,n){function a(i,s){var o=i[0],l=i[1],c=i[2],u=s[0],A=s[1],h=s[2],m=u-o,v=A-l,g=m*m+v*v,y,w;if(g<x9e)w=Math.log(h/c)/t,y=function(E){return[o+E*m,l+E*v,c*Math.exp(t*E*w)]};else{var T=Math.sqrt(g),N=(h*h-c*c+n*g)/(2*c*r*T),F=(h*h-c*c-n*g)/(2*h*r*T),B=Math.log(Math.sqrt(N*N+1)-N),D=Math.log(Math.sqrt(F*F+1)-F);w=(D-B)/t,y=function(E){var S=E*w,k=H9(B),H=c/(r*T)*(k*b9e(t*S+B)-y9e(B));return[o+H*m,l+H*v,c*k/H9(t*S+B)]}}return y.duration=w*1e3*t/Math.SQRT2,y}return a.rho=function(i){var s=Math.max(.001,+i),o=s*s,l=o*o;return e(s,o,l)},a}(Math.SQRT2,2,4);function C9e(e,t){t===void 0&&(t=e,e=cx);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}var kv=0,q1=0,A1=0,Kte=1e3,I_,$1,F_=0,im=0,MT=0,ib=typeof performance=="object"&&performance.now?performance:Date,Wte=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function HP(){return im||(Wte(E9e),im=ib.now()+MT)}function E9e(){im=0}function D_(){this._call=this._time=this._next=null}D_.prototype=Yte.prototype={constructor:D_,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?HP():+r)+(t==null?0:+t),!this._next&&$1!==this&&($1?$1._next=this:I_=this,$1=this),this._call=e,this._time=r,rF()},stop:function(){this._call&&(this._call=null,this._time=1/0,rF())}};function Yte(e,t,r){var n=new D_;return n.restart(e,t,r),n}function _9e(){HP(),++kv;for(var e=I_,t;e;)(t=im-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kv}function Q9(){im=(F_=ib.now())+MT,kv=q1=0;try{_9e()}finally{kv=0,T9e(),im=0}}function S9e(){var e=ib.now(),t=e-F_;t>Kte&&(MT-=t,F_=e)}function T9e(){for(var e,t=I_,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:I_=r);$1=e,rF(n)}function rF(e){if(!kv){q1&&(q1=clearTimeout(q1));var t=e-im;t>24?(e<1/0&&(q1=setTimeout(Q9,e-ib.now()-MT)),A1&&(A1=clearInterval(A1))):(A1||(F_=ib.now(),A1=setInterval(S9e,Kte)),kv=1,Wte(Q9))}}function V9(e,t,r){var n=new D_;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var N9e=RT("start","end","cancel","interrupt"),B9e=[],Xte=0,z9=1,nF=2,sE=3,G9=4,aF=5,oE=6;function LT(e,t,r,n,a,i){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;k9e(e,r,{name:t,index:n,group:a,on:N9e,tween:B9e,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Xte})}function QP(e,t){var r=sd(e,t);if(r.state>Xte)throw new Error("too late; already scheduled");return r}function xf(e,t){var r=sd(e,t);if(r.state>sE)throw new Error("too late; already running");return r}function sd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function k9e(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Yte(i,0,r.time);function i(c){r.state=z9,r.timer.restart(s,r.delay,r.time),r.delay<=c&&s(c-r.delay)}function s(c){var u,A,h,m;if(r.state!==z9)return l();for(u in n)if(m=n[u],m.name===r.name){if(m.state===sE)return V9(s);m.state===G9?(m.state=oE,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[u]):+u<t&&(m.state=oE,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[u])}if(V9(function(){r.state===sE&&(r.state=G9,r.timer.restart(o,r.delay,r.time),o(c))}),r.state=nF,r.on.call("start",e,e.__data__,r.index,r.group),r.state===nF){for(r.state=sE,a=new Array(h=r.tween.length),u=0,A=-1;u<h;++u)(m=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(a[++A]=m);a.length=A+1}}function o(c){for(var u=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=aF,1),A=-1,h=a.length;++A<h;)a[A].call(e,u);r.state===aF&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=oE,r.timer.stop(),delete n[t];for(var c in n)return;delete e.__transition}}function lE(e,t){var r=e.__transition,n,a,i=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((n=r[s]).name!==t){i=!1;continue}a=n.state>nF&&n.state<aF,n.state=oE,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[s]}i&&delete e.__transition}}function I9e(e){return this.each(function(){lE(this,e)})}function F9e(e,t){var r,n;return function(){var a=xf(this,e),i=a.tween;if(i!==r){n=r=i;for(var s=0,o=n.length;s<o;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}a.tween=n}}function D9e(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var i=xf(this,e),s=i.tween;if(s!==n){a=(n=s).slice();for(var o={name:t,value:r},l=0,c=a.length;l<c;++l)if(a[l].name===t){a[l]=o;break}l===c&&a.push(o)}i.tween=a}}function R9e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=sd(this.node(),r).tween,a=0,i=n.length,s;a<i;++a)if((s=n[a]).name===e)return s.value;return null}return this.each((t==null?F9e:D9e)(r,e,t))}function VP(e,t,r){var n=e._id;return e.each(function(){var a=xf(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return sd(a,n).value[t]}}function Jte(e,t){var r;return(typeof t=="number"?Gu:t instanceof am?k_:(r=am(t))?(t=r,k_):Gte)(e,t)}function P9e(e){return function(){this.removeAttribute(e)}}function M9e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L9e(e,t,r){var n,a=r+"",i;return function(){var s=this.getAttribute(e);return s===a?null:s===n?i:i=t(n=s,r)}}function O9e(e,t,r){var n,a=r+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===n?i:i=t(n=s,r)}}function U9e(e,t,r){var n,a,i;return function(){var s,o=r(this),l;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=o+"",s===l?null:s===n&&l===a?i:(a=l,i=t(n=s,o)))}}function j9e(e,t,r){var n,a,i;return function(){var s,o=r(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=o+"",s===l?null:s===n&&l===a?i:(a=l,i=t(n=s,o)))}}function H9e(e,t){var r=PT(e),n=r==="transform"?v9e:Jte;return this.attrTween(e,typeof t=="function"?(r.local?j9e:U9e)(r,n,VP(this,"attr."+e,t)):t==null?(r.local?M9e:P9e)(r):(r.local?O9e:L9e)(r,n,t))}function Q9e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function V9e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function z9e(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&V9e(e,i)),r}return a._value=t,a}function G9e(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Q9e(e,i)),r}return a._value=t,a}function q9e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=PT(e);return this.tween(r,(n.local?z9e:G9e)(n,t))}function $9e(e,t){return function(){QP(this,e).delay=+t.apply(this,arguments)}}function K9e(e,t){return t=+t,function(){QP(this,e).delay=t}}function W9e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$9e:K9e)(t,e)):sd(this.node(),t).delay}function Y9e(e,t){return function(){xf(this,e).duration=+t.apply(this,arguments)}}function X9e(e,t){return t=+t,function(){xf(this,e).duration=t}}function J9e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Y9e:X9e)(t,e)):sd(this.node(),t).duration}function Z9e(e,t){if(typeof t!="function")throw new Error;return function(){xf(this,e).ease=t}}function eVe(e){var t=this._id;return arguments.length?this.each(Z9e(t,e)):sd(this.node(),t).ease}function tVe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;xf(this,e).ease=r}}function rVe(e){if(typeof e!="function")throw new Error;return this.each(tVe(this._id,e))}function nVe(e){typeof e!="function"&&(e=kte(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,o=n[a]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&o.push(l);return new EA(n,this._parents,this._name,this._id)}function aVe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,i=Math.min(n,a),s=new Array(n),o=0;o<i;++o)for(var l=t[o],c=r[o],u=l.length,A=s[o]=new Array(u),h,m=0;m<u;++m)(h=l[m]||c[m])&&(A[m]=h);for(;o<n;++o)s[o]=t[o];return new EA(s,this._parents,this._name,this._id)}function iVe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function sVe(e,t,r){var n,a,i=iVe(t)?QP:xf;return function(){var s=i(this,e),o=s.on;o!==n&&(a=(n=o).copy()).on(t,r),s.on=a}}function oVe(e,t){var r=this._id;return arguments.length<2?sd(this.node(),r).on.on(e):this.each(sVe(r,e,t))}function lVe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function cVe(){return this.on("end.remove",lVe(this._id))}function uVe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=MP(e));for(var n=this._groups,a=n.length,i=new Array(a),s=0;s<a;++s)for(var o=n[s],l=o.length,c=i[s]=new Array(l),u,A,h=0;h<l;++h)(u=o[h])&&(A=e.call(u,u.__data__,h,o))&&("__data__"in u&&(A.__data__=u.__data__),c[h]=A,LT(c[h],t,r,h,c,sd(u,r)));return new EA(i,this._parents,t,r)}function dVe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Bte(e));for(var n=this._groups,a=n.length,i=[],s=[],o=0;o<a;++o)for(var l=n[o],c=l.length,u,A=0;A<c;++A)if(u=l[A]){for(var h=e.call(u,u.__data__,A,l),m,v=sd(u,r),g=0,y=h.length;g<y;++g)(m=h[g])&&LT(m,t,r,g,h,v);i.push(h),s.push(u)}return new EA(i,s,t,r)}var fVe=Wb.prototype.constructor;function AVe(){return new fVe(this._groups,this._parents)}function hVe(e,t){var r,n,a;return function(){var i=Bv(this,e),s=(this.style.removeProperty(e),Bv(this,e));return i===s?null:i===r&&s===n?a:a=t(r=i,n=s)}}function Zte(e){return function(){this.style.removeProperty(e)}}function pVe(e,t,r){var n,a=r+"",i;return function(){var s=Bv(this,e);return s===a?null:s===n?i:i=t(n=s,r)}}function mVe(e,t,r){var n,a,i;return function(){var s=Bv(this,e),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),Bv(this,e))),s===l?null:s===n&&l===a?i:(a=l,i=t(n=s,o))}}function gVe(e,t){var r,n,a,i="style."+t,s="end."+i,o;return function(){var l=xf(this,e),c=l.on,u=l.value[i]==null?o||(o=Zte(t)):void 0;(c!==r||a!==u)&&(n=(r=c).copy()).on(s,a=u),l.on=n}}function vVe(e,t,r){var n=(e+="")=="transform"?g9e:Jte;return t==null?this.styleTween(e,hVe(e,n)).on("end.style."+e,Zte(e)):typeof t=="function"?this.styleTween(e,mVe(e,n,VP(this,"style."+e,t))).each(gVe(this._id,e)):this.styleTween(e,pVe(e,n,t),r).on("end.style."+e,null)}function xVe(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function yVe(e,t,r){var n,a;function i(){var s=t.apply(this,arguments);return s!==a&&(n=(a=s)&&xVe(e,s,r)),n}return i._value=t,i}function bVe(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,yVe(e,t,r??""))}function wVe(e){return function(){this.textContent=e}}function CVe(e){return function(){var t=e(this);this.textContent=t??""}}function EVe(e){return this.tween("text",typeof e=="function"?CVe(VP(this,"text",e)):wVe(e==null?"":e+""))}function _Ve(e){return function(t){this.textContent=e.call(this,t)}}function SVe(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&_Ve(a)),t}return n._value=e,n}function TVe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,SVe(e))}function NVe(){for(var e=this._name,t=this._id,r=ere(),n=this._groups,a=n.length,i=0;i<a;++i)for(var s=n[i],o=s.length,l,c=0;c<o;++c)if(l=s[c]){var u=sd(l,t);LT(l,e,r,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new EA(n,this._parents,e,r)}function BVe(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(i,s){var o={value:s},l={value:function(){--a===0&&i()}};r.each(function(){var c=xf(this,n),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),a===0&&i()})}var kVe=0;function EA(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function ere(){return++kVe}var Jf=Wb.prototype;EA.prototype={constructor:EA,select:uVe,selectAll:dVe,selectChild:Jf.selectChild,selectChildren:Jf.selectChildren,filter:nVe,merge:aVe,selection:AVe,transition:NVe,call:Jf.call,nodes:Jf.nodes,node:Jf.node,size:Jf.size,empty:Jf.empty,each:Jf.each,on:oVe,attr:H9e,attrTween:q9e,style:vVe,styleTween:bVe,text:EVe,textTween:TVe,remove:cVe,tween:R9e,delay:W9e,duration:J9e,ease:eVe,easeVarying:rVe,end:BVe,[Symbol.iterator]:Jf[Symbol.iterator]};function IVe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var FVe={time:null,delay:0,duration:250,ease:IVe};function DVe(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function RVe(e){var t,r;e instanceof EA?(t=e._id,e=e._name):(t=ere(),(r=FVe).time=HP(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,i=0;i<a;++i)for(var s=n[i],o=s.length,l,c=0;c<o;++c)(l=s[c])&&LT(l,e,t,c,s,r||DVe(l,t));return new EA(n,this._parents,e,t)}Wb.prototype.interrupt=I9e;Wb.prototype.transition=RVe;const dC=e=>()=>e;function PVe(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function iA(e,t,r){this.k=e,this.x=t,this.y=r}iA.prototype={constructor:iA,scale:function(e){return e===1?this:new iA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new iA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var i0=new iA(1,0,0);iA.prototype;function m4(e){e.stopImmediatePropagation()}function h1(e){e.preventDefault(),e.stopImmediatePropagation()}function MVe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function LVe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function q9(){return this.__zoom||i0}function OVe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function UVe(){return navigator.maxTouchPoints||"ontouchstart"in this}function jVe(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],s=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function HVe(){var e=MVe,t=LVe,r=jVe,n=OVe,a=UVe,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,l=w9e,c=RT("start","zoom","end"),u,A,h,m=500,v=150,g=0,y=10;function w(V){V.property("__zoom",q9).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",H).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(V,te,W,re){var z=V.selection?V.selection():V;z.property("__zoom",q9),V!==z?B(V,te,W,re):z.interrupt().each(function(){D(this,arguments).event(re).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},w.scaleBy=function(V,te,W,re){w.scaleTo(V,function(){var z=this.__zoom.k,X=typeof te=="function"?te.apply(this,arguments):te;return z*X},W,re)},w.scaleTo=function(V,te,W,re){w.transform(V,function(){var z=t.apply(this,arguments),X=this.__zoom,K=W==null?F(z):typeof W=="function"?W.apply(this,arguments):W,se=X.invert(K),U=typeof te=="function"?te.apply(this,arguments):te;return r(N(T(X,U),K,se),z,s)},W,re)},w.translateBy=function(V,te,W,re){w.transform(V,function(){return r(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof W=="function"?W.apply(this,arguments):W),t.apply(this,arguments),s)},null,re)},w.translateTo=function(V,te,W,re,z){w.transform(V,function(){var X=t.apply(this,arguments),K=this.__zoom,se=re==null?F(X):typeof re=="function"?re.apply(this,arguments):re;return r(i0.translate(se[0],se[1]).scale(K.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof W=="function"?-W.apply(this,arguments):-W),X,s)},re,z)};function T(V,te){return te=Math.max(i[0],Math.min(i[1],te)),te===V.k?V:new iA(te,V.x,V.y)}function N(V,te,W){var re=te[0]-W[0]*V.k,z=te[1]-W[1]*V.k;return re===V.x&&z===V.y?V:new iA(V.k,re,z)}function F(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function B(V,te,W,re){V.on("start.zoom",function(){D(this,arguments).event(re).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(re).end()}).tween("zoom",function(){var z=this,X=arguments,K=D(z,X).event(re),se=t.apply(z,X),U=W==null?F(se):typeof W=="function"?W.apply(z,X):W,Y=Math.max(se[1][0]-se[0][0],se[1][1]-se[0][1]),Z=z.__zoom,ne=typeof te=="function"?te.apply(z,X):te,de=l(Z.invert(U).concat(Y/Z.k),ne.invert(U).concat(Y/ne.k));return function(xe){if(xe===1)xe=ne;else{var Ae=de(xe),ae=Y/Ae[2];xe=new iA(ae,U[0]-Ae[0]*ae,U[1]-Ae[1]*ae)}K.zoom(null,xe)}})}function D(V,te,W){return!W&&V.__zooming||new E(V,te)}function E(V,te){this.that=V,this.args=te,this.active=0,this.sourceEvent=null,this.extent=t.apply(V,te),this.taps=0}E.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,te){return this.mouse&&V!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var te=nu(this.that).datum();c.call(V,this.that,new PVe(V,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:c}),te)}};function S(V,...te){if(!e.apply(this,arguments))return;var W=D(this,te).event(V),re=this.__zoom,z=Math.max(i[0],Math.min(i[1],re.k*Math.pow(2,n.apply(this,arguments)))),X=Gd(V);if(W.wheel)(W.mouse[0][0]!==X[0]||W.mouse[0][1]!==X[1])&&(W.mouse[1]=re.invert(W.mouse[0]=X)),clearTimeout(W.wheel);else{if(re.k===z)return;W.mouse=[X,re.invert(X)],lE(this),W.start()}h1(V),W.wheel=setTimeout(K,v),W.zoom("mouse",r(N(T(re,z),W.mouse[0],W.mouse[1]),W.extent,s));function K(){W.wheel=null,W.end()}}function k(V,...te){if(h||!e.apply(this,arguments))return;var W=V.currentTarget,re=D(this,te,!0).event(V),z=nu(V.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",Y,!0),X=Gd(V,W),K=V.clientX,se=V.clientY;jte(V.view),m4(V),re.mouse=[X,this.__zoom.invert(X)],lE(this),re.start();function U(Z){if(h1(Z),!re.moved){var ne=Z.clientX-K,de=Z.clientY-se;re.moved=ne*ne+de*de>g}re.event(Z).zoom("mouse",r(N(re.that.__zoom,re.mouse[0]=Gd(Z,W),re.mouse[1]),re.extent,s))}function Y(Z){z.on("mousemove.zoom mouseup.zoom",null),Hte(Z.view,re.moved),h1(Z),re.event(Z).end()}}function H(V,...te){if(e.apply(this,arguments)){var W=this.__zoom,re=Gd(V.changedTouches?V.changedTouches[0]:V,this),z=W.invert(re),X=W.k*(V.shiftKey?.5:2),K=r(N(T(W,X),re,z),t.apply(this,te),s);h1(V),o>0?nu(this).transition().duration(o).call(B,K,re,V):nu(this).call(w.transform,K,re,V)}}function P(V,...te){if(e.apply(this,arguments)){var W=V.touches,re=W.length,z=D(this,te,V.changedTouches.length===re).event(V),X,K,se,U;for(m4(V),K=0;K<re;++K)se=W[K],U=Gd(se,this),U=[U,this.__zoom.invert(U),se.identifier],z.touch0?!z.touch1&&z.touch0[2]!==U[2]&&(z.touch1=U,z.taps=0):(z.touch0=U,X=!0,z.taps=1+!!u);u&&(u=clearTimeout(u)),X&&(z.taps<2&&(A=U[0],u=setTimeout(function(){u=null},m)),lE(this),z.start())}}function M(V,...te){if(this.__zooming){var W=D(this,te).event(V),re=V.changedTouches,z=re.length,X,K,se,U;for(h1(V),X=0;X<z;++X)K=re[X],se=Gd(K,this),W.touch0&&W.touch0[2]===K.identifier?W.touch0[0]=se:W.touch1&&W.touch1[2]===K.identifier&&(W.touch1[0]=se);if(K=W.that.__zoom,W.touch1){var Y=W.touch0[0],Z=W.touch0[1],ne=W.touch1[0],de=W.touch1[1],xe=(xe=ne[0]-Y[0])*xe+(xe=ne[1]-Y[1])*xe,Ae=(Ae=de[0]-Z[0])*Ae+(Ae=de[1]-Z[1])*Ae;K=T(K,Math.sqrt(xe/Ae)),se=[(Y[0]+ne[0])/2,(Y[1]+ne[1])/2],U=[(Z[0]+de[0])/2,(Z[1]+de[1])/2]}else if(W.touch0)se=W.touch0[0],U=W.touch0[1];else return;W.zoom("touch",r(N(K,se,U),W.extent,s))}}function Q(V,...te){if(this.__zooming){var W=D(this,te).event(V),re=V.changedTouches,z=re.length,X,K;for(m4(V),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),X=0;X<z;++X)K=re[X],W.touch0&&W.touch0[2]===K.identifier?delete W.touch0:W.touch1&&W.touch1[2]===K.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(K=Gd(K,this),Math.hypot(A[0]-K[0],A[1]-K[1])<y)){var se=nu(this).on("dblclick.zoom");se&&se.apply(this,arguments)}}}return w.wheelDelta=function(V){return arguments.length?(n=typeof V=="function"?V:dC(+V),w):n},w.filter=function(V){return arguments.length?(e=typeof V=="function"?V:dC(!!V),w):e},w.touchable=function(V){return arguments.length?(a=typeof V=="function"?V:dC(!!V),w):a},w.extent=function(V){return arguments.length?(t=typeof V=="function"?V:dC([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),w):t},w.scaleExtent=function(V){return arguments.length?(i[0]=+V[0],i[1]=+V[1],w):[i[0],i[1]]},w.translateExtent=function(V){return arguments.length?(s[0][0]=+V[0][0],s[1][0]=+V[1][0],s[0][1]=+V[0][1],s[1][1]=+V[1][1],w):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},w.constrain=function(V){return arguments.length?(r=V,w):r},w.duration=function(V){return arguments.length?(o=+V,w):o},w.interpolate=function(V){return arguments.length?(l=V,w):l},w.on=function(){var V=c.on.apply(c,arguments);return V===c?w:V},w.clickDistance=function(V){return arguments.length?(g=(V=+V)*V,w):Math.sqrt(g)},w.tapDistance=function(V){return arguments.length?(y=+V,w):y},w}var zP=rK();const OT=L.createContext(null),QVe=OT.Provider,_A={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},tre=_A.error001();function Xa(e,t){const r=L.useContext(OT);if(r===null)throw new Error(tre);return Tte(r,e,t)}const Ds=()=>{const e=L.useContext(OT);if(e===null)throw new Error(tre);return L.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},VVe=e=>e.userSelectionActive?"none":"all";function rre({position:e,children:t,className:r,style:n,...a}){const i=Xa(VVe),s=`${e}`.split("-");return ft.createElement("div",{className:Zo(["react-flow__panel",r,...s]),style:{...n,pointerEvents:i},...a},t)}function zVe({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ft.createElement(rre,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ft.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const GVe=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:l,className:c,...u})=>{const A=L.useRef(null),[h,m]=L.useState({x:0,y:0,width:0,height:0}),v=Zo(["react-flow__edge-textwrapper",c]);return L.useEffect(()=>{if(A.current){const g=A.current.getBBox();m({x:g.x,y:g.y,width:g.width,height:g.height})}},[r]),typeof r>"u"||!r?null:ft.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:v,visibility:h.width?"visible":"hidden",...u},a&&ft.createElement("rect",{width:h.width+2*s[0],x:-s[0],y:-s[1],height:h.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:o,ry:o}),ft.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:A,style:n},r),l)};var qVe=L.memo(GVe);const GP=e=>({width:e.offsetWidth,height:e.offsetHeight}),Iv=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),qP=(e={x:0,y:0},t)=>({x:Iv(e.x,t[0][0],t[1][0]),y:Iv(e.y,t[0][1],t[1][1])}),$9=(e,t,r)=>e<t?Iv(Math.abs(e-t),1,50)/50:e>r?-Iv(Math.abs(e-r),1,50)/50:0,nre=(e,t)=>{const r=$9(e.x,35,t.width-35)*20,n=$9(e.y,35,t.height-35)*20;return[r,n]},are=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},$Ve=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$P=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),KVe=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),K9=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),iF=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},WVe=e=>ou(e.width)&&ou(e.height)&&ou(e.x)&&ou(e.y),ou=e=>!isNaN(e)&&isFinite(e),di=Symbol.for("internals"),ire=["Enter"," ","Escape"],YVe=(e,t)=>{},XVe=e=>"nativeEvent"in e;function sF(e){var a,i;const t=XVe(e)?e.nativeEvent:e,r=((i=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const sre=e=>"clientX"in e,s0=(e,t)=>{var i,s;const r=sre(e),n=r?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,a=r?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},R_=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Xb=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:A,markerStart:h,interactionWidth:m=20})=>ft.createElement(ft.Fragment,null,ft.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:A,markerStart:h}),m&&ft.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&ou(r)&&ou(n)?ft.createElement(qVe,{x:r,y:n,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c}):null);Xb.displayName="BaseEdge";function p1(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(i=>i.id===e);a&&r(n,{...a})}}function ore({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,i=r<e?r+a:r-a,s=Math.abs(n-t)/2,o=n<t?n+s:n-s;return[i,o,a,s]}function lre({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:i,targetControlX:s,targetControlY:o}){const l=e*.125+a*.375+s*.375+r*.125,c=t*.125+i*.375+o*.375+n*.125,u=Math.abs(l-e),A=Math.abs(c-t);return[l,c,u,A]}var sm;(function(e){e.Strict="strict",e.Loose="loose"})(sm||(sm={}));var Cp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Cp||(Cp={}));var sb;(function(e){e.Partial="partial",e.Full="full"})(sb||(sb={}));var jh;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(jh||(jh={}));var P_;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(P_||(P_={}));var fr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fr||(fr={}));function W9({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===fr.Left||e===fr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function cre({sourceX:e,sourceY:t,sourcePosition:r=fr.Bottom,targetX:n,targetY:a,targetPosition:i=fr.Top}){const[s,o]=W9({pos:r,x1:e,y1:t,x2:n,y2:a}),[l,c]=W9({pos:i,x1:n,y1:a,x2:e,y2:t}),[u,A,h,m]=lre({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${o} ${l},${c} ${n},${a}`,u,A,h,m]}const KP=L.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=fr.Bottom,targetPosition:i=fr.Top,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:v,interactionWidth:g})=>{const[y,w,T]=cre({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:i});return ft.createElement(Xb,{path:y,labelX:w,labelY:T,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:v,interactionWidth:g})});KP.displayName="SimpleBezierEdge";const Y9={[fr.Left]:{x:-1,y:0},[fr.Right]:{x:1,y:0},[fr.Top]:{x:0,y:-1},[fr.Bottom]:{x:0,y:1}},JVe=({source:e,sourcePosition:t=fr.Bottom,target:r})=>t===fr.Left||t===fr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},X9=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ZVe({source:e,sourcePosition:t=fr.Bottom,target:r,targetPosition:n=fr.Top,center:a,offset:i}){const s=Y9[t],o=Y9[n],l={x:e.x+s.x*i,y:e.y+s.y*i},c={x:r.x+o.x*i,y:r.y+o.y*i},u=JVe({source:l,sourcePosition:t,target:c}),A=u.x!==0?"x":"y",h=u[A];let m=[],v,g;const y={x:0,y:0},w={x:0,y:0},[T,N,F,B]=ore({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(s[A]*o[A]===-1){v=a.x??T,g=a.y??N;const E=[{x:v,y:l.y},{x:v,y:c.y}],S=[{x:l.x,y:g},{x:c.x,y:g}];s[A]===h?m=A==="x"?E:S:m=A==="x"?S:E}else{const E=[{x:l.x,y:c.y}],S=[{x:c.x,y:l.y}];if(A==="x"?m=s.x===h?S:E:m=s.y===h?E:S,t===n){const Q=Math.abs(e[A]-r[A]);if(Q<=i){const V=Math.min(i-1,i-Q);s[A]===h?y[A]=(l[A]>e[A]?-1:1)*V:w[A]=(c[A]>r[A]?-1:1)*V}}if(t!==n){const Q=A==="x"?"y":"x",V=s[A]===o[Q],te=l[Q]>c[Q],W=l[Q]<c[Q];(s[A]===1&&(!V&&te||V&&W)||s[A]!==1&&(!V&&W||V&&te))&&(m=A==="x"?E:S)}const k={x:l.x+y.x,y:l.y+y.y},H={x:c.x+w.x,y:c.y+w.y},P=Math.max(Math.abs(k.x-m[0].x),Math.abs(H.x-m[0].x)),M=Math.max(Math.abs(k.y-m[0].y),Math.abs(H.y-m[0].y));P>=M?(v=(k.x+H.x)/2,g=m[0].y):(v=m[0].x,g=(k.y+H.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...m,{x:c.x+w.x,y:c.y+w.y},r],v,g,F,B]}function eze(e,t,r,n){const a=Math.min(X9(e,t)/2,X9(t,r)/2,n),{x:i,y:s}=t;if(e.x===i&&i===r.x||e.y===s&&s===r.y)return`L${i} ${s}`;if(e.y===s){const c=e.x<r.x?-1:1,u=e.y<r.y?1:-1;return`L ${i+a*c},${s}Q ${i},${s} ${i},${s+a*u}`}const o=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${i},${s+a*l}Q ${i},${s} ${i+a*o},${s}`}function oF({sourceX:e,sourceY:t,sourcePosition:r=fr.Bottom,targetX:n,targetY:a,targetPosition:i=fr.Top,borderRadius:s=5,centerX:o,centerY:l,offset:c=20}){const[u,A,h,m,v]=ZVe({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:i,center:{x:o,y:l},offset:c});return[u.reduce((y,w,T)=>{let N="";return T>0&&T<u.length-1?N=eze(u[T-1],w,u[T+1],s):N=`${T===0?"M":"L"}${w.x} ${w.y}`,y+=N,y},""),A,h,m,v]}const UT=L.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:A=fr.Bottom,targetPosition:h=fr.Top,markerEnd:m,markerStart:v,pathOptions:g,interactionWidth:y})=>{const[w,T,N]=oF({sourceX:e,sourceY:t,sourcePosition:A,targetX:r,targetY:n,targetPosition:h,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return ft.createElement(Xb,{path:w,labelX:T,labelY:N,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:m,markerStart:v,interactionWidth:y})});UT.displayName="SmoothStepEdge";const WP=L.memo(e=>{var t;return ft.createElement(UT,{...e,pathOptions:L.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});WP.displayName="StepEdge";function tze({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,i,s,o]=ore({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,i,s,o]}const YP=L.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:A,markerStart:h,interactionWidth:m})=>{const[v,g,y]=tze({sourceX:e,sourceY:t,targetX:r,targetY:n});return ft.createElement(Xb,{path:v,labelX:g,labelY:y,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:A,markerStart:h,interactionWidth:m})});YP.displayName="StraightEdge";function fC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function J9({pos:e,x1:t,y1:r,x2:n,y2:a,c:i}){switch(e){case fr.Left:return[t-fC(t-n,i),r];case fr.Right:return[t+fC(n-t,i),r];case fr.Top:return[t,r-fC(r-a,i)];case fr.Bottom:return[t,r+fC(a-r,i)]}}function ure({sourceX:e,sourceY:t,sourcePosition:r=fr.Bottom,targetX:n,targetY:a,targetPosition:i=fr.Top,curvature:s=.25}){const[o,l]=J9({pos:r,x1:e,y1:t,x2:n,y2:a,c:s}),[c,u]=J9({pos:i,x1:n,y1:a,x2:e,y2:t,c:s}),[A,h,m,v]=lre({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${n},${a}`,A,h,m,v]}const M_=L.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=fr.Bottom,targetPosition:i=fr.Top,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:v,pathOptions:g,interactionWidth:y})=>{const[w,T,N]=ure({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:i,curvature:g==null?void 0:g.curvature});return ft.createElement(Xb,{path:w,labelX:T,labelY:N,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:A,style:h,markerEnd:m,markerStart:v,interactionWidth:y})});M_.displayName="BezierEdge";const XP=L.createContext(null),rze=XP.Provider;XP.Consumer;const nze=()=>L.useContext(XP),aze=e=>"id"in e&&"source"in e&&"target"in e,ize=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,lF=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,sze=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),oze=(e,t)=>{if(!e.source||!e.target)return t;let r;return aze(e)?r={...e}:r={...e,id:ize(e)},sze(r,t)?t:t.concat(r)},cF=({x:e,y:t},[r,n,a],i,[s,o])=>{const l={x:(e-r)/a,y:(t-n)/a};return i?{x:s*Math.round(l.x/s),y:o*Math.round(l.y/o)}:l},dre=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),dv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},JP=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:i,y:s}=dv(a,t).positionAbsolute;return $Ve(n,$P({x:i,y:s,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return KVe(r)},fre=(e,t,[r,n,a]=[0,0,1],i=!1,s=!1,o=[0,0])=>{const l={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},c=[];return e.forEach(u=>{const{width:A,height:h,selectable:m=!0,hidden:v=!1}=u;if(s&&!m||v)return!1;const{positionAbsolute:g}=dv(u,o),y={x:g.x,y:g.y,width:A||0,height:h||0},w=iF(l,y),T=typeof A>"u"||typeof h>"u"||A===null||h===null,N=i&&w>0,F=(A||0)*(h||0);(T||N||w>=F||u.dragging)&&c.push(u)}),c},Are=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},hre=(e,t,r,n,a,i=.1)=>{const s=t/(e.width*(1+i)),o=r/(e.height*(1+i)),l=Math.min(s,o),c=Iv(l,n,a),u=e.x+e.width/2,A=e.y+e.height/2,h=t/2-u*c,m=r/2-A*c;return{x:h,y:m,zoom:c}},up=(e,t=0)=>e.transition().duration(t);function Z9(e,t,r,n){return(t[r]||[]).reduce((a,i)=>{var s,o;return`${e.id}-${i.id}-${r}`!==n&&a.push({id:i.id||null,type:r,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+i.y+i.height/2}),a},[])}function lze(e,t,r,n,a,i){const{x:s,y:o}=s0(e),c=t.elementsFromPoint(s,o).find(v=>v.classList.contains("react-flow__handle"));if(c){const v=c.getAttribute("data-nodeid");if(v){const g=ZP(void 0,c),y=c.getAttribute("data-handleid"),w=i({nodeId:v,id:y,type:g});if(w){const T=a.find(N=>N.nodeId===v&&N.type===g&&N.id===y);return{handle:{id:y,type:g,nodeId:v,x:(T==null?void 0:T.x)||r.x,y:(T==null?void 0:T.y)||r.y},validHandleResult:w}}}}let u=[],A=1/0;if(a.forEach(v=>{const g=Math.sqrt((v.x-r.x)**2+(v.y-r.y)**2);if(g<=n){const y=i(v);g<=A&&(g<A?u=[{handle:v,validHandleResult:y}]:g===A&&u.push({handle:v,validHandleResult:y}),A=g)}}),!u.length)return{handle:null,validHandleResult:pre()};if(u.length===1)return u[0];const h=u.some(({validHandleResult:v})=>v.isValid),m=u.some(({handle:v})=>v.type==="target");return u.find(({handle:v,validHandleResult:g})=>m?v.type==="target":h?g.isValid:!0)||u[0]}const cze={source:null,target:null,sourceHandle:null,targetHandle:null},pre=()=>({handleDomNode:null,isValid:!1,connection:cze,endHandle:null});function mre(e,t,r,n,a,i,s){const o=a==="target",l=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...pre(),handleDomNode:l};if(l){const u=ZP(void 0,l),A=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),v=l.classList.contains("connectableend"),g={source:o?A:r,sourceHandle:o?h:n,target:o?r:A,targetHandle:o?n:h};c.connection=g,m&&v&&(t===sm.Strict?o&&u==="source"||!o&&u==="target":A!==r||h!==n)&&(c.endHandle={nodeId:A,handleId:h,type:u},c.isValid=i(g))}return c}function uze({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,i)=>{if(i[di]){const{handleBounds:s}=i[di];let o=[],l=[];s&&(o=Z9(i,s,"source",`${t}-${r}-${n}`),l=Z9(i,s,"target",`${t}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function ZP(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function g4(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function dze(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function gre({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:i,setState:s,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:c}){const u=are(e.target),{connectionMode:A,domNode:h,autoPanOnConnect:m,connectionRadius:v,onConnectStart:g,panBy:y,getNodes:w,cancelConnection:T}=i();let N=0,F;const{x:B,y:D}=s0(e),E=u==null?void 0:u.elementFromPoint(B,D),S=ZP(l,E),k=h==null?void 0:h.getBoundingClientRect();if(!k||!S)return;let H,P=s0(e,k),M=!1,Q=null,V=!1,te=null;const W=uze({nodes:w(),nodeId:r,handleId:t,handleType:S}),re=()=>{if(!m)return;const[K,se]=nre(P,k);y({x:K,y:se}),N=requestAnimationFrame(re)};s({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:t,type:S},connectionEndHandle:null}),g==null||g(e,{nodeId:r,handleId:t,handleType:S});function z(K){const{transform:se}=i();P=s0(K,k);const{handle:U,validHandleResult:Y}=lze(K,u,cF(P,se,!1,[1,1]),v,W,Z=>mre(Z,A,r,t,a?"target":"source",o,u));if(F=U,M||(re(),M=!0),te=Y.handleDomNode,Q=Y.connection,V=Y.isValid,s({connectionPosition:F&&V?dre({x:F.x,y:F.y},se):P,connectionStatus:dze(!!F,V),connectionEndHandle:Y.endHandle}),!F&&!V&&!te)return g4(H);Q.source!==Q.target&&te&&(g4(H),H=te,te.classList.add("connecting","react-flow__handle-connecting"),te.classList.toggle("valid",V),te.classList.toggle("react-flow__handle-valid",V))}function X(K){var se,U;(F||te)&&Q&&V&&(n==null||n(Q)),(U=(se=i()).onConnectEnd)==null||U.call(se,K),l&&(c==null||c(K)),g4(H),T(),cancelAnimationFrame(N),M=!1,V=!1,Q=null,te=null,u.removeEventListener("mousemove",z),u.removeEventListener("mouseup",X),u.removeEventListener("touchmove",z),u.removeEventListener("touchend",X)}u.addEventListener("mousemove",z),u.addEventListener("mouseup",X),u.addEventListener("touchmove",z),u.addEventListener("touchend",X)}const eV=()=>!0,fze=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Aze=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:i,connectionClickStartHandle:s}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r}},vre=L.forwardRef(({type:e="source",position:t=fr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:i=!0,id:s,onConnect:o,children:l,className:c,onMouseDown:u,onTouchStart:A,...h},m)=>{var k,H;const v=s||null,g=e==="target",y=Ds(),w=nze(),{connectOnClick:T,noPanClassName:N}=Xa(fze,Uo),{connecting:F,clickConnecting:B}=Xa(Aze(w,v,e),Uo);w||(H=(k=y.getState()).onError)==null||H.call(k,"010",_A.error010());const D=P=>{const{defaultEdgeOptions:M,onConnect:Q,hasDefaultEdges:V}=y.getState(),te={...M,...P};if(V){const{edges:W,setEdges:re}=y.getState();re(oze(te,W))}Q==null||Q(te),o==null||o(te)},E=P=>{if(!w)return;const M=sre(P);a&&(M&&P.button===0||!M)&&gre({event:P,handleId:v,nodeId:w,onConnect:D,isTarget:g,getState:y.getState,setState:y.setState,isValidConnection:r||y.getState().isValidConnection||eV}),M?u==null||u(P):A==null||A(P)},S=P=>{const{onClickConnectStart:M,onClickConnectEnd:Q,connectionClickStartHandle:V,connectionMode:te,isValidConnection:W}=y.getState();if(!w||!V&&!a)return;if(!V){M==null||M(P,{nodeId:w,handleId:v,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:w,type:e,handleId:v}});return}const re=are(P.target),z=r||W||eV,{connection:X,isValid:K}=mre({nodeId:w,id:v,type:e},te,V.nodeId,V.handleId||null,V.type,z,re);K&&D(X),Q==null||Q(P),y.setState({connectionClickStartHandle:null})};return ft.createElement("div",{"data-handleid":v,"data-nodeid":w,"data-handlepos":t,"data-id":`${w}-${v}-${e}`,className:Zo(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,c,{source:!g,target:g,connectable:n,connectablestart:a,connectableend:i,connecting:B,connectionindicator:n&&(a&&!F||i&&F)}]),onMouseDown:E,onTouchStart:E,onClick:T?S:void 0,ref:m,...h},l)});vre.displayName="Handle";var Fv=L.memo(vre);const xre=({data:e,isConnectable:t,targetPosition:r=fr.Top,sourcePosition:n=fr.Bottom})=>ft.createElement(ft.Fragment,null,ft.createElement(Fv,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ft.createElement(Fv,{type:"source",position:n,isConnectable:t}));xre.displayName="DefaultNode";var uF=L.memo(xre);const yre=({data:e,isConnectable:t,sourcePosition:r=fr.Bottom})=>ft.createElement(ft.Fragment,null,e==null?void 0:e.label,ft.createElement(Fv,{type:"source",position:r,isConnectable:t}));yre.displayName="InputNode";var bre=L.memo(yre);const wre=({data:e,isConnectable:t,targetPosition:r=fr.Top})=>ft.createElement(ft.Fragment,null,ft.createElement(Fv,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);wre.displayName="OutputNode";var Cre=L.memo(wre);const e6=()=>null;e6.displayName="GroupNode";const hze=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),AC=e=>e.id;function pze(e,t){return Uo(e.selectedNodes.map(AC),t.selectedNodes.map(AC))&&Uo(e.selectedEdges.map(AC),t.selectedEdges.map(AC))}const Ere=L.memo(({onSelectionChange:e})=>{const t=Ds(),{selectedNodes:r,selectedEdges:n}=Xa(hze,pze);return L.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(i=>i(a))},[r,n,e]),null});Ere.displayName="SelectionListener";const mze=e=>!!e.onSelectionChange;function gze({onSelectionChange:e}){const t=Xa(mze);return e||t?ft.createElement(Ere,{onSelectionChange:e}):null}const vze=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function gg(e,t){L.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function cn(e,t,r){L.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const xze=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:i,onConnectEnd:s,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:A,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:v,minZoom:g,maxZoom:y,nodeExtent:w,onNodesChange:T,onEdgesChange:N,elementsSelectable:F,connectionMode:B,snapGrid:D,snapToGrid:E,translateExtent:S,connectOnClick:k,defaultEdgeOptions:H,fitView:P,fitViewOptions:M,onNodesDelete:Q,onEdgesDelete:V,onNodeDrag:te,onNodeDragStart:W,onNodeDragStop:re,onSelectionDrag:z,onSelectionDragStart:X,onSelectionDragStop:K,noPanClassName:se,nodeOrigin:U,rfId:Y,autoPanOnConnect:Z,autoPanOnNodeDrag:ne,onError:de,connectionRadius:xe,isValidConnection:Ae,nodeDragThreshold:ae})=>{const{setNodes:ue,setEdges:le,setDefaultNodesAndEdges:ie,setMinZoom:De,setMaxZoom:Le,setTranslateExtent:Be,setNodeExtent:Ce,reset:Re}=Xa(vze,Uo),je=Ds();return L.useEffect(()=>{const We=n==null?void 0:n.map(ct=>({...ct,...H}));return ie(r,We),()=>{Re()}},[]),cn("defaultEdgeOptions",H,je.setState),cn("connectionMode",B,je.setState),cn("onConnect",a,je.setState),cn("onConnectStart",i,je.setState),cn("onConnectEnd",s,je.setState),cn("onClickConnectStart",o,je.setState),cn("onClickConnectEnd",l,je.setState),cn("nodesDraggable",c,je.setState),cn("nodesConnectable",u,je.setState),cn("nodesFocusable",A,je.setState),cn("edgesFocusable",h,je.setState),cn("edgesUpdatable",m,je.setState),cn("elementsSelectable",F,je.setState),cn("elevateNodesOnSelect",v,je.setState),cn("snapToGrid",E,je.setState),cn("snapGrid",D,je.setState),cn("onNodesChange",T,je.setState),cn("onEdgesChange",N,je.setState),cn("connectOnClick",k,je.setState),cn("fitViewOnInit",P,je.setState),cn("fitViewOnInitOptions",M,je.setState),cn("onNodesDelete",Q,je.setState),cn("onEdgesDelete",V,je.setState),cn("onNodeDrag",te,je.setState),cn("onNodeDragStart",W,je.setState),cn("onNodeDragStop",re,je.setState),cn("onSelectionDrag",z,je.setState),cn("onSelectionDragStart",X,je.setState),cn("onSelectionDragStop",K,je.setState),cn("noPanClassName",se,je.setState),cn("nodeOrigin",U,je.setState),cn("rfId",Y,je.setState),cn("autoPanOnConnect",Z,je.setState),cn("autoPanOnNodeDrag",ne,je.setState),cn("onError",de,je.setState),cn("connectionRadius",xe,je.setState),cn("isValidConnection",Ae,je.setState),cn("nodeDragThreshold",ae,je.setState),gg(e,ue),gg(t,le),gg(g,De),gg(y,Le),gg(S,Be),gg(w,Ce),null},tV={display:"none"},yze={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},_re="react-flow__node-desc",Sre="react-flow__edge-desc",bze="react-flow__aria-live",wze=e=>e.ariaLiveMessage;function Cze({rfId:e}){const t=Xa(wze);return ft.createElement("div",{id:`${bze}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:yze},t)}function Eze({rfId:e,disableKeyboardA11y:t}){return ft.createElement(ft.Fragment,null,ft.createElement("div",{id:`${_re}-${e}`,style:tV},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ft.createElement("div",{id:`${Sre}-${e}`,style:tV},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ft.createElement(Cze,{rfId:e}))}var ob=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=L.useState(!1),a=L.useRef(!1),i=L.useRef(new Set([])),[s,o]=L.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(A=>typeof A=="string").map(A=>A.split("+")),u=c.reduce((A,h)=>A.concat(...h),[]);return[c,u]}return[[],[]]},[e]);return L.useEffect(()=>{const l=typeof document<"u"?document:null,c=(t==null?void 0:t.target)||l;if(e!==null){const u=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&sF(m))return!1;const g=nV(m.code,o);i.current.add(m[g]),rV(s,i.current,!1)&&(m.preventDefault(),n(!0))},A=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&sF(m))return!1;const g=nV(m.code,o);rV(s,i.current,!0)?(n(!1),i.current.clear()):i.current.delete(m[g]),m.key==="Meta"&&i.current.clear(),a.current=!1},h=()=>{i.current.clear(),n(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",A),window.addEventListener("blur",h),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",A),window.removeEventListener("blur",h)}}},[e,n]),r};function rV(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function nV(e,t){return t.includes(e)?"code":"key"}function Tre(e,t,r,n){var o,l;const a=e.parentNode||e.parentId;if(!a)return r;const i=t.get(a),s=dv(i,n);return Tre(i,t,{x:(r.x??0)+s.x,y:(r.y??0)+s.y,z:(((o=i[di])==null?void 0:o.z)??0)>(r.z??0)?((l=i[di])==null?void 0:l.z)??0:r.z??0},n)}function Nre(e,t,r){e.forEach(n=>{var i;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:s,y:o,z:l}=Tre(n,e,{...n.position,z:((i=n[di])==null?void 0:i.z)??0},t);n.positionAbsolute={x:s,y:o},n[di].z=l,r!=null&&r[n.id]&&(n[di].isParent=!0)}})}function v4(e,t,r,n){const a=new Map,i={},s=n?1e3:0;return e.forEach(o=>{var m;const l=(ou(o.zIndex)?o.zIndex:0)+(o.selected?s:0),c=t.get(o.id),u={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},A=o.parentNode||o.parentId;A&&(i[A]=!0);const h=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==o.type;Object.defineProperty(u,di,{enumerable:!1,value:{handleBounds:h||(m=c==null?void 0:c[di])==null?void 0:m.handleBounds,z:l}}),a.set(o.id,u)}),Nre(a,r,i),a}function Bre(e,t={}){const{getNodes:r,width:n,height:a,minZoom:i,maxZoom:s,d3Zoom:o,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:A}=e(),h=t.initial&&!c&&u;if(o&&l&&(h||!t.initial)){const v=r().filter(y=>{var T;const w=t.includeHiddenNodes?y.width&&y.height:!y.hidden;return(T=t.nodes)!=null&&T.length?w&&t.nodes.some(N=>N.id===y.id):w}),g=v.every(y=>y.width&&y.height);if(v.length>0&&g){const y=JP(v,A),{x:w,y:T,zoom:N}=hre(y,n,a,t.minZoom??i,t.maxZoom??s,t.padding??.1),F=i0.translate(w,T).scale(N);return typeof t.duration=="number"&&t.duration>0?o.transform(up(l,t.duration),F):o.transform(l,F),!0}}return!1}function _ze(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[di]:n[di],selected:r.selected})}),new Map(t)}function Sze(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function hC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:i,onNodesChange:s,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:c}=r();e!=null&&e.length&&(l&&n({nodeInternals:_ze(e,a)}),s==null||s(e)),t!=null&&t.length&&(c&&n({edges:Sze(t,i)}),o==null||o(t))}const vg=()=>{},Tze={zoomIn:vg,zoomOut:vg,zoomTo:vg,getZoom:()=>1,setViewport:vg,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:vg,fitBounds:vg,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Nze=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Bze=()=>{const e=Ds(),{d3Zoom:t,d3Selection:r}=Xa(Nze,Uo);return L.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(up(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(up(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,i)=>t.scaleTo(up(r,i==null?void 0:i.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,i)=>{const[s,o,l]=e.getState().transform,c=i0.translate(a.x??s,a.y??o).scale(a.zoom??l);t.transform(up(r,i==null?void 0:i.duration),c)},getViewport:()=>{const[a,i,s]=e.getState().transform;return{x:a,y:i,zoom:s}},fitView:a=>Bre(e.getState,a),setCenter:(a,i,s)=>{const{width:o,height:l,maxZoom:c}=e.getState(),u=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:c,A=o/2-a*u,h=l/2-i*u,m=i0.translate(A,h).scale(u);t.transform(up(r,s==null?void 0:s.duration),m)},fitBounds:(a,i)=>{const{width:s,height:o,minZoom:l,maxZoom:c}=e.getState(),{x:u,y:A,zoom:h}=hre(a,s,o,l,c,(i==null?void 0:i.padding)??.1),m=i0.translate(u,A).scale(h);t.transform(up(r,i==null?void 0:i.duration),m)},project:a=>{const{transform:i,snapToGrid:s,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),cF(a,i,s,o)},screenToFlowPosition:a=>{const{transform:i,snapToGrid:s,snapGrid:o,domNode:l}=e.getState();if(!l)return a;const{x:c,y:u}=l.getBoundingClientRect(),A={x:a.x-c,y:a.y-u};return cF(A,i,s,o)},flowToScreenPosition:a=>{const{transform:i,domNode:s}=e.getState();if(!s)return a;const{x:o,y:l}=s.getBoundingClientRect(),c=dre(a,i);return{x:c.x+o,y:c.y+l}},viewportInitialized:!0}:Tze,[t,r])};function jT(){const e=Bze(),t=Ds(),r=L.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),n=L.useCallback(g=>t.getState().nodeInternals.get(g),[]),a=L.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(y=>({...y}))},[]),i=L.useCallback(g=>{const{edges:y=[]}=t.getState();return y.find(w=>w.id===g)},[]),s=L.useCallback(g=>{const{getNodes:y,setNodes:w,hasDefaultNodes:T,onNodesChange:N}=t.getState(),F=y(),B=typeof g=="function"?g(F):g;if(T)w(B);else if(N){const D=B.length===0?F.map(E=>({type:"remove",id:E.id})):B.map(E=>({item:E,type:"reset"}));N(D)}},[]),o=L.useCallback(g=>{const{edges:y=[],setEdges:w,hasDefaultEdges:T,onEdgesChange:N}=t.getState(),F=typeof g=="function"?g(y):g;if(T)w(F);else if(N){const B=F.length===0?y.map(D=>({type:"remove",id:D.id})):F.map(D=>({item:D,type:"reset"}));N(B)}},[]),l=L.useCallback(g=>{const y=Array.isArray(g)?g:[g],{getNodes:w,setNodes:T,hasDefaultNodes:N,onNodesChange:F}=t.getState();if(N){const D=[...w(),...y];T(D)}else if(F){const B=y.map(D=>({item:D,type:"add"}));F(B)}},[]),c=L.useCallback(g=>{const y=Array.isArray(g)?g:[g],{edges:w=[],setEdges:T,hasDefaultEdges:N,onEdgesChange:F}=t.getState();if(N)T([...w,...y]);else if(F){const B=y.map(D=>({item:D,type:"add"}));F(B)}},[]),u=L.useCallback(()=>{const{getNodes:g,edges:y=[],transform:w}=t.getState(),[T,N,F]=w;return{nodes:g().map(B=>({...B})),edges:y.map(B=>({...B})),viewport:{x:T,y:N,zoom:F}}},[]),A=L.useCallback(({nodes:g,edges:y})=>{const{nodeInternals:w,getNodes:T,edges:N,hasDefaultNodes:F,hasDefaultEdges:B,onNodesDelete:D,onEdgesDelete:E,onNodesChange:S,onEdgesChange:k}=t.getState(),H=(g||[]).map(te=>te.id),P=(y||[]).map(te=>te.id),M=T().reduce((te,W)=>{const re=W.parentNode||W.parentId,z=!H.includes(W.id)&&re&&te.find(K=>K.id===re);return(typeof W.deletable=="boolean"?W.deletable:!0)&&(H.includes(W.id)||z)&&te.push(W),te},[]),Q=N.filter(te=>typeof te.deletable=="boolean"?te.deletable:!0),V=Q.filter(te=>P.includes(te.id));if(M||V){const te=Are(M,Q),W=[...V,...te],re=W.reduce((z,X)=>(z.includes(X.id)||z.push(X.id),z),[]);if((B||F)&&(B&&t.setState({edges:N.filter(z=>!re.includes(z.id))}),F&&(M.forEach(z=>{w.delete(z.id)}),t.setState({nodeInternals:new Map(w)}))),re.length>0&&(E==null||E(W),k&&k(re.map(z=>({id:z,type:"remove"})))),M.length>0&&(D==null||D(M),S)){const z=M.map(X=>({id:X.id,type:"remove"}));S(z)}}},[]),h=L.useCallback(g=>{const y=WVe(g),w=y?null:t.getState().nodeInternals.get(g.id);return!y&&!w?[null,null,y]:[y?g:K9(w),w,y]},[]),m=L.useCallback((g,y=!0,w)=>{const[T,N,F]=h(g);return T?(w||t.getState().getNodes()).filter(B=>{if(!F&&(B.id===N.id||!B.positionAbsolute))return!1;const D=K9(B),E=iF(D,T);return y&&E>0||E>=T.width*T.height}):[]},[]),v=L.useCallback((g,y,w=!0)=>{const[T]=h(g);if(!T)return!1;const N=iF(T,y);return w&&N>0||N>=T.width*T.height},[]);return L.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:i,setNodes:s,setEdges:o,addNodes:l,addEdges:c,toObject:u,deleteElements:A,getIntersectingNodes:m,isNodeIntersecting:v}),[e,r,n,a,i,s,o,l,c,u,A,m,v])}const kze={actInsideInputWithModifier:!1};var Ize=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=Ds(),{deleteElements:n}=jT(),a=ob(e,kze),i=ob(t);L.useEffect(()=>{if(a){const{edges:s,getNodes:o}=r.getState(),l=o().filter(u=>u.selected),c=s.filter(u=>u.selected);n({nodes:l,edges:c}),r.setState({nodesSelectionActive:!1})}},[a]),L.useEffect(()=>{r.setState({multiSelectionActive:i})},[i])};function Fze(e){const t=Ds();L.useEffect(()=>{let r;const n=()=>{var i,s;if(!e.current)return;const a=GP(e.current);(a.height===0||a.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",_A.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const t6={position:"absolute",width:"100%",height:"100%",top:0,left:0},Dze=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,pC=e=>({x:e.x,y:e.y,zoom:e.k}),xg=(e,t)=>e.target.closest(`.${t}`),aV=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),iV=e=>{const t=e.ctrlKey&&R_()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Rze=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Pze=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Cp.Free,zoomOnDoubleClick:c=!0,elementsSelectable:u,panOnDrag:A=!0,defaultViewport:h,translateExtent:m,minZoom:v,maxZoom:g,zoomActivationKeyCode:y,preventScrolling:w=!0,children:T,noWheelClassName:N,noPanClassName:F})=>{const B=L.useRef(),D=Ds(),E=L.useRef(!1),S=L.useRef(!1),k=L.useRef(null),H=L.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:M,d3ZoomHandler:Q,userSelectionActive:V}=Xa(Rze,Uo),te=ob(y),W=L.useRef(0),re=L.useRef(!1),z=L.useRef();return Fze(k),L.useEffect(()=>{if(k.current){const X=k.current.getBoundingClientRect(),K=HVe().scaleExtent([v,g]).translateExtent(m),se=nu(k.current).call(K),U=i0.translate(h.x,h.y).scale(Iv(h.zoom,v,g)),Y=[[0,0],[X.width,X.height]],Z=K.constrain()(U,Y,m);K.transform(se,Z),K.wheelDelta(iV),D.setState({d3Zoom:K,d3Selection:se,d3ZoomHandler:se.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:k.current.closest(".react-flow")})}},[]),L.useEffect(()=>{M&&P&&(s&&!te&&!V?M.on("wheel.zoom",X=>{if(xg(X,N))return!1;X.preventDefault(),X.stopImmediatePropagation();const K=M.property("__zoom").k||1;if(X.ctrlKey&&i){const Ae=Gd(X),ae=iV(X),ue=K*Math.pow(2,ae);P.scaleTo(M,ue,Ae,X);return}const se=X.deltaMode===1?20:1;let U=l===Cp.Vertical?0:X.deltaX*se,Y=l===Cp.Horizontal?0:X.deltaY*se;!R_()&&X.shiftKey&&l!==Cp.Vertical&&(U=X.deltaY*se,Y=0),P.translateBy(M,-(U/K)*o,-(Y/K)*o,{internal:!0});const Z=pC(M.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:de,onViewportChangeEnd:xe}=D.getState();clearTimeout(z.current),re.current||(re.current=!0,t==null||t(X,Z),ne==null||ne(Z)),re.current&&(e==null||e(X,Z),de==null||de(Z),z.current=setTimeout(()=>{r==null||r(X,Z),xe==null||xe(Z),re.current=!1},150))},{passive:!1}):typeof Q<"u"&&M.on("wheel.zoom",function(X,K){if(!w&&X.type==="wheel"&&!X.ctrlKey||xg(X,N))return null;X.preventDefault(),Q.call(this,X,K)},{passive:!1}))},[V,s,l,M,P,Q,te,i,w,N,t,e,r]),L.useEffect(()=>{P&&P.on("start",X=>{var U,Y;if(!X.sourceEvent||X.sourceEvent.internal)return null;W.current=(U=X.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:K}=D.getState(),se=pC(X.transform);E.current=!0,H.current=se,((Y=X.sourceEvent)==null?void 0:Y.type)==="mousedown"&&D.setState({paneDragging:!0}),K==null||K(se),t==null||t(X.sourceEvent,se)})},[P,t]),L.useEffect(()=>{P&&(V&&!E.current?P.on("zoom",null):V||P.on("zoom",X=>{var se;const{onViewportChange:K}=D.getState();if(D.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),S.current=!!(n&&aV(A,W.current??0)),(e||K)&&!((se=X.sourceEvent)!=null&&se.internal)){const U=pC(X.transform);K==null||K(U),e==null||e(X.sourceEvent,U)}}))},[V,P,e,A,n]),L.useEffect(()=>{P&&P.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=D.getState();if(E.current=!1,D.setState({paneDragging:!1}),n&&aV(A,W.current??0)&&!S.current&&n(X.sourceEvent),S.current=!1,(r||K)&&Dze(H.current,X.transform)){const se=pC(X.transform);H.current=se,clearTimeout(B.current),B.current=setTimeout(()=>{K==null||K(se),r==null||r(X.sourceEvent,se)},s?150:0)}})},[P,s,A,r,n]),L.useEffect(()=>{P&&P.filter(X=>{const K=te||a,se=i&&X.ctrlKey;if((A===!0||Array.isArray(A)&&A.includes(1))&&X.button===1&&X.type==="mousedown"&&(xg(X,"react-flow__node")||xg(X,"react-flow__edge")))return!0;if(!A&&!K&&!s&&!c&&!i||V||!c&&X.type==="dblclick"||xg(X,N)&&X.type==="wheel"||xg(X,F)&&(X.type!=="wheel"||s&&X.type==="wheel"&&!te)||!i&&X.ctrlKey&&X.type==="wheel"||!K&&!s&&!se&&X.type==="wheel"||!A&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(A)&&!A.includes(X.button)&&X.type==="mousedown")return!1;const U=Array.isArray(A)&&A.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&U})},[V,P,a,i,s,c,A,u,te]),ft.createElement("div",{className:"react-flow__renderer",ref:k,style:t6},T)},Mze=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Lze(){const{userSelectionActive:e,userSelectionRect:t}=Xa(Mze,Uo);return e&&t?ft.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function sV(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(a>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),i>0&&(n.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);n.position.y=n.position.y-s,n.style.height+=s,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function kre(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const i=e.filter(o=>o.id===a.id);if(i.length===0)return n.push(a),n;const s={...a};for(const o of i)if(o)switch(o.type){case"select":{s.selected=o.selected;break}case"position":{typeof o.position<"u"&&(s.position=o.position),typeof o.positionAbsolute<"u"&&(s.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(s.dragging=o.dragging),s.expandParent&&sV(n,s);break}case"dimensions":{typeof o.dimensions<"u"&&(s.width=o.dimensions.width,s.height=o.dimensions.height),typeof o.updateStyle<"u"&&(s.style={...s.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(s.resizing=o.resizing),s.expandParent&&sV(n,s);break}case"remove":return n}return n.push(s),n},r)}function Ire(e,t){return kre(e,t)}function Oze(e,t){return kre(e,t)}const Dh=(e,t)=>({id:e,type:"select",selected:t});function Hg(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Dh(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Dh(n.id,!1))),r},[])}const x4=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},Uze=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Fre=L.memo(({isSelecting:e,selectionMode:t=sb.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:u,children:A})=>{const h=L.useRef(null),m=Ds(),v=L.useRef(0),g=L.useRef(0),y=L.useRef(),{userSelectionActive:w,elementsSelectable:T,dragging:N}=Xa(Uze,Uo),F=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,g.current=0},B=Q=>{i==null||i(Q),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},D=Q=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){Q.preventDefault();return}s==null||s(Q)},E=o?Q=>o(Q):void 0,S=Q=>{const{resetSelectedElements:V,domNode:te}=m.getState();if(y.current=te==null?void 0:te.getBoundingClientRect(),!T||!e||Q.button!==0||Q.target!==h.current||!y.current)return;const{x:W,y:re}=s0(Q,y.current);V(),m.setState({userSelectionRect:{width:0,height:0,startX:W,startY:re,x:W,y:re}}),n==null||n(Q)},k=Q=>{const{userSelectionRect:V,nodeInternals:te,edges:W,transform:re,onNodesChange:z,onEdgesChange:X,nodeOrigin:K,getNodes:se}=m.getState();if(!e||!y.current||!V)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=s0(Q,y.current),Y=V.startX??0,Z=V.startY??0,ne={...V,x:U.x<Y?U.x:Y,y:U.y<Z?U.y:Z,width:Math.abs(U.x-Y),height:Math.abs(U.y-Z)},de=se(),xe=fre(te,ne,re,t===sb.Partial,!0,K),Ae=Are(xe,W).map(ue=>ue.id),ae=xe.map(ue=>ue.id);if(v.current!==ae.length){v.current=ae.length;const ue=Hg(de,ae);ue.length&&(z==null||z(ue))}if(g.current!==Ae.length){g.current=Ae.length;const ue=Hg(W,Ae);ue.length&&(X==null||X(ue))}m.setState({userSelectionRect:ne})},H=Q=>{if(Q.button!==0)return;const{userSelectionRect:V}=m.getState();!w&&V&&Q.target===h.current&&(B==null||B(Q)),m.setState({nodesSelectionActive:v.current>0}),F(),a==null||a(Q)},P=Q=>{w&&(m.setState({nodesSelectionActive:v.current>0}),a==null||a(Q)),F()},M=T&&(e||w);return ft.createElement("div",{className:Zo(["react-flow__pane",{dragging:N,selection:e}]),onClick:M?void 0:x4(B,h),onContextMenu:x4(D,h),onWheel:x4(E,h),onMouseEnter:M?void 0:l,onMouseDown:M?S:void 0,onMouseMove:M?k:c,onMouseUp:M?H:void 0,onMouseLeave:M?P:u,ref:h,style:t6},A,ft.createElement(Lze,null))});Fre.displayName="Pane";function Dre(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:Dre(n,t):!1}function oV(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function jze(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!Dre(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var i,s;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((i=a.positionAbsolute)==null?void 0:i.x)??0),y:r.y-(((s=a.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function Hze(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Rre(e,t,r,n,a=[0,0],i){const s=Hze(e,e.extent||n);let o=s;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const A=r.get(l),{x:h,y:m}=dv(A,a).positionAbsolute;o=A&&ou(h)&&ou(m)&&ou(A.width)&&ou(A.height)?[[h+e.width*a[0],m+e.height*a[1]],[h+A.width-e.width+e.width*a[0],m+A.height-e.height+e.height*a[1]]]:o}else i==null||i("005",_A.error005()),o=s;else if(e.extent&&l&&e.extent!=="parent"){const A=r.get(l),{x:h,y:m}=dv(A,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let c={x:0,y:0};if(l){const A=r.get(l);c=dv(A,a).positionAbsolute}const u=o&&o!=="parent"?qP(t,o):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function y4({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const lV=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const i=Array.from(a),s=t.getBoundingClientRect(),o={x:s.width*n[0],y:s.height*n[1]};return i.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-s.left-o.x)/r,y:(c.top-s.top-o.y)/r,...GP(l)}})};function m1(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function dF({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:o,onError:l}=t.getState(),c=o.get(e);if(!c){l==null||l("012",_A.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(r||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var u;return(u=n==null?void 0:n.current)==null?void 0:u.blur()})):a([e])}function Qze(){const e=Ds();return L.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:i}=e.getState(),s=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(s-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:i?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:i?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function b4(e){return(t,r,n)=>e==null?void 0:e(t,n)}function Pre({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:i,selectNodesOnDrag:s}){const o=Ds(),[l,c]=L.useState(!1),u=L.useRef([]),A=L.useRef({x:null,y:null}),h=L.useRef(0),m=L.useRef(null),v=L.useRef({x:0,y:0}),g=L.useRef(null),y=L.useRef(!1),w=L.useRef(!1),T=L.useRef(!1),N=Qze();return L.useEffect(()=>{if(e!=null&&e.current){const F=nu(e.current),B=({x:S,y:k})=>{const{nodeInternals:H,onNodeDrag:P,onSelectionDrag:M,updateNodePositions:Q,nodeExtent:V,snapGrid:te,snapToGrid:W,nodeOrigin:re,onError:z}=o.getState();A.current={x:S,y:k};let X=!1,K={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&V){const U=JP(u.current,re);K=$P(U)}if(u.current=u.current.map(U=>{const Y={x:S-U.distance.x,y:k-U.distance.y};W&&(Y.x=te[0]*Math.round(Y.x/te[0]),Y.y=te[1]*Math.round(Y.y/te[1]));const Z=[[V[0][0],V[0][1]],[V[1][0],V[1][1]]];u.current.length>1&&V&&!U.extent&&(Z[0][0]=U.positionAbsolute.x-K.x+V[0][0],Z[1][0]=U.positionAbsolute.x+(U.width??0)-K.x2+V[1][0],Z[0][1]=U.positionAbsolute.y-K.y+V[0][1],Z[1][1]=U.positionAbsolute.y+(U.height??0)-K.y2+V[1][1]);const ne=Rre(U,Y,H,Z,re,z);return X=X||U.position.x!==ne.position.x||U.position.y!==ne.position.y,U.position=ne.position,U.positionAbsolute=ne.positionAbsolute,U}),!X)return;Q(u.current,!0,!0),c(!0);const se=a?P:b4(M);if(se&&g.current){const[U,Y]=y4({nodeId:a,dragItems:u.current,nodeInternals:H});se(g.current,U,Y)}},D=()=>{if(!m.current)return;const[S,k]=nre(v.current,m.current);if(S!==0||k!==0){const{transform:H,panBy:P}=o.getState();A.current.x=(A.current.x??0)-S/H[2],A.current.y=(A.current.y??0)-k/H[2],P({x:S,y:k})&&B(A.current)}h.current=requestAnimationFrame(D)},E=S=>{var re;const{nodeInternals:k,multiSelectionActive:H,nodesDraggable:P,unselectNodesAndEdges:M,onNodeDragStart:Q,onSelectionDragStart:V}=o.getState();w.current=!0;const te=a?Q:b4(V);(!s||!i)&&!H&&a&&((re=k.get(a))!=null&&re.selected||M()),a&&i&&s&&dF({id:a,store:o,nodeRef:e});const W=N(S);if(A.current=W,u.current=jze(k,P,W,a),te&&u.current){const[z,X]=y4({nodeId:a,dragItems:u.current,nodeInternals:k});te(S.sourceEvent,z,X)}};if(t)F.on(".drag",null);else{const S=qQe().on("start",k=>{const{domNode:H,nodeDragThreshold:P}=o.getState();P===0&&E(k),T.current=!1;const M=N(k);A.current=M,m.current=(H==null?void 0:H.getBoundingClientRect())||null,v.current=s0(k.sourceEvent,m.current)}).on("drag",k=>{var Q,V;const H=N(k),{autoPanOnNodeDrag:P,nodeDragThreshold:M}=o.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(T.current=!0),!T.current){if(!y.current&&w.current&&P&&(y.current=!0,D()),!w.current){const te=H.xSnapped-(((Q=A==null?void 0:A.current)==null?void 0:Q.x)??0),W=H.ySnapped-(((V=A==null?void 0:A.current)==null?void 0:V.y)??0);Math.sqrt(te*te+W*W)>M&&E(k)}(A.current.x!==H.xSnapped||A.current.y!==H.ySnapped)&&u.current&&w.current&&(g.current=k.sourceEvent,v.current=s0(k.sourceEvent,m.current),B(H))}}).on("end",k=>{if(!(!w.current||T.current)&&(c(!1),y.current=!1,w.current=!1,cancelAnimationFrame(h.current),u.current)){const{updateNodePositions:H,nodeInternals:P,onNodeDragStop:M,onSelectionDragStop:Q}=o.getState(),V=a?M:b4(Q);if(H(u.current,!1,!1),V){const[te,W]=y4({nodeId:a,dragItems:u.current,nodeInternals:P});V(k.sourceEvent,te,W)}}}).filter(k=>{const H=k.target;return!k.button&&(!r||!oV(H,`.${r}`,e))&&(!n||oV(H,n,e))});return F.call(S),()=>{F.on(".drag",null)}}}},[e,t,r,n,i,o,a,s,N]),l}function Mre(){const e=Ds();return L.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:i,getNodes:s,snapToGrid:o,snapGrid:l,onError:c,nodesDraggable:u}=e.getState(),A=s().filter(T=>T.selected&&(T.draggable||u&&typeof T.draggable>"u")),h=o?l[0]:5,m=o?l[1]:5,v=r.isShiftPressed?4:1,g=r.x*h*v,y=r.y*m*v,w=A.map(T=>{if(T.positionAbsolute){const N={x:T.positionAbsolute.x+g,y:T.positionAbsolute.y+y};o&&(N.x=l[0]*Math.round(N.x/l[0]),N.y=l[1]*Math.round(N.y/l[1]));const{positionAbsolute:F,position:B}=Rre(T,N,n,a,void 0,c);T.position=B,T.positionAbsolute=F}return T});i(w,!0,!1)},[])}const fv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var g1=e=>{const t=({id:r,type:n,data:a,xPos:i,yPos:s,xPosOrigin:o,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:A,onMouseMove:h,onMouseLeave:m,onContextMenu:v,onDoubleClick:g,style:y,className:w,isDraggable:T,isSelectable:N,isConnectable:F,isFocusable:B,selectNodesOnDrag:D,sourcePosition:E,targetPosition:S,hidden:k,resizeObserver:H,dragHandle:P,zIndex:M,isParent:Q,noDragClassName:V,noPanClassName:te,initialized:W,disableKeyboardA11y:re,ariaLabel:z,rfId:X,hasHandleBounds:K})=>{const se=Ds(),U=L.useRef(null),Y=L.useRef(null),Z=L.useRef(E),ne=L.useRef(S),de=L.useRef(n),xe=N||T||u||A||h||m,Ae=Mre(),ae=m1(r,se.getState,A),ue=m1(r,se.getState,h),le=m1(r,se.getState,m),ie=m1(r,se.getState,v),De=m1(r,se.getState,g),Le=Re=>{const{nodeDragThreshold:je}=se.getState();if(N&&(!D||!T||je>0)&&dF({id:r,store:se,nodeRef:U}),u){const We=se.getState().nodeInternals.get(r);We&&u(Re,{...We})}},Be=Re=>{if(!sF(Re)&&!re)if(ire.includes(Re.key)&&N){const je=Re.key==="Escape";dF({id:r,store:se,unselect:je,nodeRef:U})}else T&&c&&Object.prototype.hasOwnProperty.call(fv,Re.key)&&(se.setState({ariaLiveMessage:`Moved selected node ${Re.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),Ae({x:fv[Re.key].x,y:fv[Re.key].y,isShiftPressed:Re.shiftKey}))};L.useEffect(()=>()=>{Y.current&&(H==null||H.unobserve(Y.current),Y.current=null)},[]),L.useEffect(()=>{if(U.current&&!k){const Re=U.current;(!W||!K||Y.current!==Re)&&(Y.current&&(H==null||H.unobserve(Y.current)),H==null||H.observe(Re),Y.current=Re)}},[k,W,K]),L.useEffect(()=>{const Re=de.current!==n,je=Z.current!==E,We=ne.current!==S;U.current&&(Re||je||We)&&(Re&&(de.current=n),je&&(Z.current=E),We&&(ne.current=S),se.getState().updateNodeDimensions([{id:r,nodeElement:U.current,forceUpdate:!0}]))},[r,n,E,S]);const Ce=Pre({nodeRef:U,disabled:k||!T,noDragClassName:V,handleSelector:P,nodeId:r,isSelectable:N,selectNodesOnDrag:D});return k?null:ft.createElement("div",{className:Zo(["react-flow__node",`react-flow__node-${n}`,{[te]:T},w,{selected:c,selectable:N,parent:Q,dragging:Ce}]),ref:U,style:{zIndex:M,transform:`translate(${o}px,${l}px)`,pointerEvents:xe?"all":"none",visibility:W?"visible":"hidden",...y},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ae,onMouseMove:ue,onMouseLeave:le,onContextMenu:ie,onClick:Le,onDoubleClick:De,onKeyDown:B?Be:void 0,tabIndex:B?0:void 0,role:B?"button":void 0,"aria-describedby":re?void 0:`${_re}-${X}`,"aria-label":z},ft.createElement(rze,{value:r},ft.createElement(e,{id:r,data:a,type:n,xPos:i,yPos:s,selected:c,isConnectable:F,sourcePosition:E,targetPosition:S,dragging:Ce,dragHandle:P,zIndex:M})))};return t.displayName="NodeWrapper",L.memo(t)};const Vze=e=>{const t=e.getNodes().filter(r=>r.selected);return{...JP(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function zze({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Ds(),{width:a,height:i,x:s,y:o,transformString:l,userSelectionActive:c}=Xa(Vze,Uo),u=Mre(),A=L.useRef(null);if(L.useEffect(()=>{var v;r||(v=A.current)==null||v.focus({preventScroll:!0})},[r]),Pre({nodeRef:A}),c||!a||!i)return null;const h=e?v=>{const g=n.getState().getNodes().filter(y=>y.selected);e(v,g)}:void 0,m=v=>{Object.prototype.hasOwnProperty.call(fv,v.key)&&u({x:fv[v.key].x,y:fv[v.key].y,isShiftPressed:v.shiftKey})};return ft.createElement("div",{className:Zo(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},ft.createElement("div",{ref:A,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:i,top:o,left:s}}))}var Gze=L.memo(zze);const qze=e=>e.nodesSelectionActive,Lre=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:o,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:A,selectionOnDrag:h,selectionMode:m,onSelectionStart:v,onSelectionEnd:g,multiSelectionKeyCode:y,panActivationKeyCode:w,zoomActivationKeyCode:T,elementsSelectable:N,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:D,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:H,defaultViewport:P,translateExtent:M,minZoom:Q,maxZoom:V,preventScrolling:te,onSelectionContextMenu:W,noWheelClassName:re,noPanClassName:z,disableKeyboardA11y:X})=>{const K=Xa(qze),se=ob(A),U=ob(w),Y=U||H,Z=U||D,ne=se||h&&Y!==!0;return Ize({deleteKeyCode:o,multiSelectionKeyCode:y}),ft.createElement(Pze,{onMove:l,onMoveStart:c,onMoveEnd:u,onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:Z,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:!se&&Y,defaultViewport:P,translateExtent:M,minZoom:Q,maxZoom:V,zoomActivationKeyCode:T,preventScrolling:te,noWheelClassName:re,noPanClassName:z},ft.createElement(Fre,{onSelectionStart:v,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:Y,isSelecting:!!ne,selectionMode:m},e,K&&ft.createElement(Gze,{onSelectionContextMenu:W,noPanClassName:z,disableKeyboardA11y:X})))};Lre.displayName="FlowRenderer";var $ze=L.memo(Lre);function Kze(e){return Xa(L.useCallback(r=>e?fre(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Wze(e){const t={input:g1(e.input||bre),default:g1(e.default||uF),output:g1(e.output||Cre),group:g1(e.group||e6)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,i)=>(a[i]=g1(e[i]||uF),a),r);return{...t,...n}}const Yze=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},Xze=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ore=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:i,onError:s}=Xa(Xze,Uo),o=Kze(e.onlyRenderVisibleElements),l=L.useRef(),c=L.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(A=>{const h=A.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));i(h)});return l.current=u,u},[]);return L.useEffect(()=>()=>{var u;(u=l==null?void 0:l.current)==null||u.disconnect()},[]),ft.createElement("div",{className:"react-flow__nodes",style:t6},o.map(u=>{var B,D,E;let A=u.type||"default";e.nodeTypes[A]||(s==null||s("003",_A.error003(A)),A="default");const h=e.nodeTypes[A]||e.nodeTypes.default,m=!!(u.draggable||t&&typeof u.draggable>"u"),v=!!(u.selectable||a&&typeof u.selectable>"u"),g=!!(u.connectable||r&&typeof u.connectable>"u"),y=!!(u.focusable||n&&typeof u.focusable>"u"),w=e.nodeExtent?qP(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,T=(w==null?void 0:w.x)??0,N=(w==null?void 0:w.y)??0,F=Yze({x:T,y:N,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return ft.createElement(h,{key:u.id,id:u.id,className:u.className,style:u.style,type:A,data:u.data,sourcePosition:u.sourcePosition||fr.Bottom,targetPosition:u.targetPosition||fr.Top,hidden:u.hidden,xPos:T,yPos:N,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:m,isSelectable:v,isConnectable:g,isFocusable:y,resizeObserver:c,dragHandle:u.dragHandle,zIndex:((B=u[di])==null?void 0:B.z)??0,isParent:!!((D=u[di])!=null&&D.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((E=u[di])!=null&&E.handleBounds)})}))};Ore.displayName="NodeRenderer";var Jze=L.memo(Ore);const Zze=(e,t,r)=>r===fr.Left?e-t:r===fr.Right?e+t:e,eGe=(e,t,r)=>r===fr.Top?e-t:r===fr.Bottom?e+t:e,cV="react-flow__edgeupdater",uV=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:i,onMouseOut:s,type:o})=>ft.createElement("circle",{onMouseDown:a,onMouseEnter:i,onMouseOut:s,className:Zo([cV,`${cV}-${o}`]),cx:Zze(t,n,e),cy:eGe(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),tGe=()=>!0;var yg=e=>{const t=({id:r,className:n,type:a,data:i,onClick:s,onEdgeDoubleClick:o,selected:l,animated:c,label:u,labelStyle:A,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:g,style:y,source:w,target:T,sourceX:N,sourceY:F,targetX:B,targetY:D,sourcePosition:E,targetPosition:S,elementsSelectable:k,hidden:H,sourceHandleId:P,targetHandleId:M,onContextMenu:Q,onMouseEnter:V,onMouseMove:te,onMouseLeave:W,reconnectRadius:re,onReconnect:z,onReconnectStart:X,onReconnectEnd:K,markerEnd:se,markerStart:U,rfId:Y,ariaLabel:Z,isFocusable:ne,isReconnectable:de,pathOptions:xe,interactionWidth:Ae,disableKeyboardA11y:ae})=>{const ue=L.useRef(null),[le,ie]=L.useState(!1),[De,Le]=L.useState(!1),Be=Ds(),Ce=L.useMemo(()=>`url('#${lF(U,Y)}')`,[U,Y]),Re=L.useMemo(()=>`url('#${lF(se,Y)}')`,[se,Y]);if(H)return null;const je=gt=>{var jn;const{edges:Br,addSelectedEdges:Zt,unselectNodesAndEdges:yn,multiSelectionActive:_r}=Be.getState(),Vr=Br.find(Ur=>Ur.id===r);Vr&&(k&&(Be.setState({nodesSelectionActive:!1}),Vr.selected&&_r?(yn({nodes:[],edges:[Vr]}),(jn=ue.current)==null||jn.blur()):Zt([r])),s&&s(gt,Vr))},We=p1(r,Be.getState,o),ct=p1(r,Be.getState,Q),wt=p1(r,Be.getState,V),ot=p1(r,Be.getState,te),Rt=p1(r,Be.getState,W),Pt=(gt,Br)=>{if(gt.button!==0)return;const{edges:Zt,isValidConnection:yn}=Be.getState(),_r=Br?T:w,Vr=(Br?M:P)||null,jn=Br?"target":"source",Ur=yn||tGe,Ii=Br,dn=Zt.find(Gr=>Gr.id===r);Le(!0),X==null||X(gt,dn,jn);const ma=Gr=>{Le(!1),K==null||K(Gr,dn,jn)};gre({event:gt,handleId:Vr,nodeId:_r,onConnect:Gr=>z==null?void 0:z(dn,Gr),isTarget:Ii,getState:Be.getState,setState:Be.setState,isValidConnection:Ur,edgeUpdaterType:jn,onReconnectEnd:ma})},Xt=gt=>Pt(gt,!0),Mt=gt=>Pt(gt,!1),Qt=()=>ie(!0),$t=()=>ie(!1),It=!k&&!s,Dt=gt=>{var Br;if(!ae&&ire.includes(gt.key)&&k){const{unselectNodesAndEdges:Zt,addSelectedEdges:yn,edges:_r}=Be.getState();gt.key==="Escape"?((Br=ue.current)==null||Br.blur(),Zt({edges:[_r.find(jn=>jn.id===r)]})):yn([r])}};return ft.createElement("g",{className:Zo(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:c,inactive:It,updating:le}]),onClick:je,onDoubleClick:We,onContextMenu:ct,onMouseEnter:wt,onMouseMove:ot,onMouseLeave:Rt,onKeyDown:ne?Dt:void 0,tabIndex:ne?0:void 0,role:ne?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Z===null?void 0:Z||`Edge from ${w} to ${T}`,"aria-describedby":ne?`${Sre}-${Y}`:void 0,ref:ue},!De&&ft.createElement(e,{id:r,source:w,target:T,selected:l,animated:c,label:u,labelStyle:A,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:g,data:i,style:y,sourceX:N,sourceY:F,targetX:B,targetY:D,sourcePosition:E,targetPosition:S,sourceHandleId:P,targetHandleId:M,markerStart:Ce,markerEnd:Re,pathOptions:xe,interactionWidth:Ae}),de&&ft.createElement(ft.Fragment,null,(de==="source"||de===!0)&&ft.createElement(uV,{position:E,centerX:N,centerY:F,radius:re,onMouseDown:Xt,onMouseEnter:Qt,onMouseOut:$t,type:"source"}),(de==="target"||de===!0)&&ft.createElement(uV,{position:S,centerX:B,centerY:D,radius:re,onMouseDown:Mt,onMouseEnter:Qt,onMouseOut:$t,type:"target"})))};return t.displayName="EdgeWrapper",L.memo(t)};function rGe(e){const t={default:yg(e.default||M_),straight:yg(e.bezier||YP),step:yg(e.step||WP),smoothstep:yg(e.step||UT),simplebezier:yg(e.simplebezier||KP)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,i)=>(a[i]=yg(e[i]||M_),a),r);return{...t,...n}}function dV(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,i=(r==null?void 0:r.width)||t.width,s=(r==null?void 0:r.height)||t.height;switch(e){case fr.Top:return{x:n+i/2,y:a};case fr.Right:return{x:n+i,y:a+s/2};case fr.Bottom:return{x:n+i/2,y:a+s};case fr.Left:return{x:n,y:a+s/2}}}function fV(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const nGe=(e,t,r,n,a,i)=>{const s=dV(r,e,t),o=dV(i,n,a);return{sourceX:s.x,sourceY:s.y,targetX:o.x,targetY:o.y}};function aGe({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:i,width:s,height:o,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=$P({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:s/l[2],height:o/l[2]}),A=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),h=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(A*h)>0}function AV(e){var n,a,i,s,o;const t=((n=e==null?void 0:e[di])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const iGe=[{level:0,isMaxLevel:!0,edges:[]}];function sGe(e,t,r=!1){let n=-1;const a=e.reduce((s,o)=>{var u,A;const l=ou(o.zIndex);let c=l?o.zIndex:0;if(r){const h=t.get(o.target),m=t.get(o.source),v=o.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),g=Math.max(((u=m==null?void 0:m[di])==null?void 0:u.z)||0,((A=h==null?void 0:h[di])==null?void 0:A.z)||0,1e3);c=(l?o.zIndex:0)+(v?g:0)}return s[c]?s[c].push(o):s[c]=[o],n=c>n?c:n,s},{}),i=Object.entries(a).map(([s,o])=>{const l=+s;return{edges:o,level:l,isMaxLevel:l===n}});return i.length===0?iGe:i}function oGe(e,t,r){const n=Xa(L.useCallback(a=>e?a.edges.filter(i=>{const s=t.get(i.source),o=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&aGe({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return sGe(n,t,r)}const lGe=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),cGe=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),hV={[P_.Arrow]:lGe,[P_.ArrowClosed]:cGe};function uGe(e){const t=Ds();return L.useMemo(()=>{var a,i;return Object.prototype.hasOwnProperty.call(hV,e)?hV[e]:((i=(a=t.getState()).onError)==null||i.call(a,"009",_A.error009(e)),null)},[e])}const dGe=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const l=uGe(t);return l?ft.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:o,refX:"0",refY:"0"},ft.createElement(l,{color:r,strokeWidth:s})):null},fGe=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const o=lF(s,t);n.includes(o)||(a.push({id:o,color:s.color||e,...s}),n.push(o))}}),a),[]).sort((a,i)=>a.id.localeCompare(i.id))},Ure=({defaultColor:e,rfId:t})=>{const r=Xa(L.useCallback(fGe({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((i,s)=>i.id!==a[s].id)));return ft.createElement("defs",null,r.map(n=>ft.createElement(dGe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Ure.displayName="MarkerDefinitions";var AGe=L.memo(Ure);const hGe=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),jre=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,onEdgeDoubleClick:A,onReconnect:h,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:g,children:y,disableKeyboardA11y:w})=>{const{edgesFocusable:T,edgesUpdatable:N,elementsSelectable:F,width:B,height:D,connectionMode:E,nodeInternals:S,onError:k}=Xa(hGe,Uo),H=oGe(t,S,r);return B?ft.createElement(ft.Fragment,null,H.map(({level:P,edges:M,isMaxLevel:Q})=>ft.createElement("svg",{key:P,style:{zIndex:P},width:B,height:D,className:"react-flow__edges react-flow__container"},Q&&ft.createElement(AGe,{defaultColor:e,rfId:n}),ft.createElement("g",null,M.map(V=>{const[te,W,re]=AV(S.get(V.source)),[z,X,K]=AV(S.get(V.target));if(!re||!K)return null;let se=V.type||"default";a[se]||(k==null||k("011",_A.error011(se)),se="default");const U=a[se]||a.default,Y=E===sm.Strict?X.target:(X.target??[]).concat(X.source??[]),Z=fV(W.source,V.sourceHandle),ne=fV(Y,V.targetHandle),de=(Z==null?void 0:Z.position)||fr.Bottom,xe=(ne==null?void 0:ne.position)||fr.Top,Ae=!!(V.focusable||T&&typeof V.focusable>"u"),ae=V.reconnectable||V.updatable,ue=typeof h<"u"&&(ae||N&&typeof ae>"u");if(!Z||!ne)return k==null||k("008",_A.error008(Z,V)),null;const{sourceX:le,sourceY:ie,targetX:De,targetY:Le}=nGe(te,Z,de,z,ne,xe);return ft.createElement(U,{key:V.id,id:V.id,className:Zo([V.className,i]),type:se,data:V.data,selected:!!V.selected,animated:!!V.animated,hidden:!!V.hidden,label:V.label,labelStyle:V.labelStyle,labelShowBg:V.labelShowBg,labelBgStyle:V.labelBgStyle,labelBgPadding:V.labelBgPadding,labelBgBorderRadius:V.labelBgBorderRadius,style:V.style,source:V.source,target:V.target,sourceHandleId:V.sourceHandle,targetHandleId:V.targetHandle,markerEnd:V.markerEnd,markerStart:V.markerStart,sourceX:le,sourceY:ie,targetX:De,targetY:Le,sourcePosition:de,targetPosition:xe,elementsSelectable:F,onContextMenu:s,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,onClick:u,onEdgeDoubleClick:A,onReconnect:h,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:g,rfId:n,ariaLabel:V.ariaLabel,isFocusable:Ae,isReconnectable:ue,pathOptions:"pathOptions"in V?V.pathOptions:void 0,interactionWidth:V.interactionWidth,disableKeyboardA11y:w})})))),y):null};jre.displayName="EdgeRenderer";var pGe=L.memo(jre);const mGe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function gGe({children:e}){const t=Xa(mGe);return ft.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function vGe(e){const t=jT(),r=L.useRef(!1);L.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const xGe={[fr.Left]:fr.Right,[fr.Right]:fr.Left,[fr.Top]:fr.Bottom,[fr.Bottom]:fr.Top},Hre=({nodeId:e,handleType:t,style:r,type:n=jh.Bezier,CustomComponent:a,connectionStatus:i})=>{var D,E,S;const{fromNode:s,handleId:o,toX:l,toY:c,connectionMode:u}=Xa(L.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),Uo),A=(D=s==null?void 0:s[di])==null?void 0:D.handleBounds;let h=A==null?void 0:A[t];if(u===sm.Loose&&(h=h||(A==null?void 0:A[t==="source"?"target":"source"])),!s||!h)return null;const m=o?h.find(k=>k.id===o):h[0],v=m?m.x+m.width/2:(s.width??0)/2,g=m?m.y+m.height/2:s.height??0,y=(((E=s.positionAbsolute)==null?void 0:E.x)??0)+v,w=(((S=s.positionAbsolute)==null?void 0:S.y)??0)+g,T=m==null?void 0:m.position,N=T?xGe[T]:null;if(!T||!N)return null;if(a)return ft.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:s,fromHandle:m,fromX:y,fromY:w,toX:l,toY:c,fromPosition:T,toPosition:N,connectionStatus:i});let F="";const B={sourceX:y,sourceY:w,sourcePosition:T,targetX:l,targetY:c,targetPosition:N};return n===jh.Bezier?[F]=ure(B):n===jh.Step?[F]=oF({...B,borderRadius:0}):n===jh.SmoothStep?[F]=oF(B):n===jh.SimpleBezier?[F]=cre(B):F=`M${y},${w} ${l},${c}`,ft.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:r})};Hre.displayName="ConnectionLine";const yGe=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function bGe({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:i,nodesConnectable:s,width:o,height:l,connectionStatus:c}=Xa(yGe,Uo);return!(a&&i&&o&&s)?null:ft.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},ft.createElement("g",{className:Zo(["react-flow__connection",c])},ft.createElement(Hre,{nodeId:a,handleType:i,style:t,type:r,CustomComponent:n,connectionStatus:c})))}function pV(e,t){return L.useRef(null),Ds(),L.useMemo(()=>t(e),[e])}const Qre=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:i,onNodeClick:s,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:A,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:v,onSelectionStart:g,onSelectionEnd:y,connectionLineType:w,connectionLineStyle:T,connectionLineComponent:N,connectionLineContainerStyle:F,selectionKeyCode:B,selectionOnDrag:D,selectionMode:E,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:H,deleteKeyCode:P,onlyRenderVisibleElements:M,elementsSelectable:Q,selectNodesOnDrag:V,defaultViewport:te,translateExtent:W,minZoom:re,maxZoom:z,preventScrolling:X,defaultMarkerColor:K,zoomOnScroll:se,zoomOnPinch:U,panOnScroll:Y,panOnScrollSpeed:Z,panOnScrollMode:ne,zoomOnDoubleClick:de,panOnDrag:xe,onPaneClick:Ae,onPaneMouseEnter:ae,onPaneMouseMove:ue,onPaneMouseLeave:le,onPaneScroll:ie,onPaneContextMenu:De,onEdgeContextMenu:Le,onEdgeMouseEnter:Be,onEdgeMouseMove:Ce,onEdgeMouseLeave:Re,onReconnect:je,onReconnectStart:We,onReconnectEnd:ct,reconnectRadius:wt,noDragClassName:ot,noWheelClassName:Rt,noPanClassName:Pt,elevateEdgesOnSelect:Xt,disableKeyboardA11y:Mt,nodeOrigin:Qt,nodeExtent:$t,rfId:It})=>{const Dt=pV(e,Wze),gt=pV(t,rGe);return vGe(i),ft.createElement($ze,{onPaneClick:Ae,onPaneMouseEnter:ae,onPaneMouseMove:ue,onPaneMouseLeave:le,onPaneContextMenu:De,onPaneScroll:ie,deleteKeyCode:P,selectionKeyCode:B,selectionOnDrag:D,selectionMode:E,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:H,elementsSelectable:Q,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:se,zoomOnPinch:U,zoomOnDoubleClick:de,panOnScroll:Y,panOnScrollSpeed:Z,panOnScrollMode:ne,panOnDrag:xe,defaultViewport:te,translateExtent:W,minZoom:re,maxZoom:z,onSelectionContextMenu:v,preventScrolling:X,noDragClassName:ot,noWheelClassName:Rt,noPanClassName:Pt,disableKeyboardA11y:Mt},ft.createElement(gGe,null,ft.createElement(pGe,{edgeTypes:gt,onEdgeClick:o,onEdgeDoubleClick:c,onlyRenderVisibleElements:M,onEdgeContextMenu:Le,onEdgeMouseEnter:Be,onEdgeMouseMove:Ce,onEdgeMouseLeave:Re,onReconnect:je,onReconnectStart:We,onReconnectEnd:ct,reconnectRadius:wt,defaultMarkerColor:K,noPanClassName:Pt,elevateEdgesOnSelect:!!Xt,disableKeyboardA11y:Mt,rfId:It},ft.createElement(bGe,{style:T,type:w,component:N,containerStyle:F})),ft.createElement("div",{className:"react-flow__edgelabel-renderer"}),ft.createElement(Jze,{nodeTypes:Dt,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:A,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:V,onlyRenderVisibleElements:M,noPanClassName:Pt,noDragClassName:ot,disableKeyboardA11y:Mt,nodeOrigin:Qt,nodeExtent:$t,rfId:It})))};Qre.displayName="GraphView";var wGe=L.memo(Qre);const fF=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Sh={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:fF,nodeExtent:fF,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:sm.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:YVe,isValidConnection:void 0},CGe=()=>aHe((e,t)=>({...Sh,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:i}=t();e({nodeInternals:v4(r,n,a,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",i=typeof n<"u",s=a?v4(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?n:[],hasDefaultNodes:a,hasDefaultEdges:i})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:o,domNode:l,nodeOrigin:c}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const A=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(A.transform),m=r.reduce((g,y)=>{const w=a.get(y.id);if(w!=null&&w.hidden)a.set(w.id,{...w,[di]:{...w[di],handleBounds:void 0}});else if(w){const T=GP(y.nodeElement);!!(T.width&&T.height&&(w.width!==T.width||w.height!==T.height||y.forceUpdate))&&(a.set(w.id,{...w,[di]:{...w[di],handleBounds:{source:lV(".source",y.nodeElement,h,c),target:lV(".target",y.nodeElement,h,c)}},...T}),g.push({id:w.id,type:"dimensions",dimensions:T}))}return g},[]);Nre(a,c);const v=s||i&&!s&&Bre(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:v}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:i}=t(),s=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});i(s)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:i,nodeOrigin:s,getNodes:o,elevateNodesOnSelect:l}=t();if(r!=null&&r.length){if(i){const c=Ire(r,o()),u=v4(c,a,s,l);e({nodeInternals:u})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:i}=t();let s,o=null;n?s=r.map(l=>Dh(l,!0)):(s=Hg(i(),r),o=Hg(a,[])),hC({changedNodes:s,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:i}=t();let s,o=null;n?s=r.map(l=>Dh(l,!0)):(s=Hg(a,r),o=Hg(i(),[])),hC({changedNodes:o,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:i}=t(),s=r||i(),o=n||a,l=s.map(u=>(u.selected=!1,Dh(u.id,!1))),c=o.map(u=>Dh(u.id,!1));hC({changedNodes:l,changedEdges:c,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),i=n().filter(o=>o.selected).map(o=>Dh(o.id,!1)),s=r.filter(o=>o.selected).map(o=>Dh(o.id,!1));hC({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=qP(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:i,d3Zoom:s,d3Selection:o,translateExtent:l}=t();if(!s||!o||!r.x&&!r.y)return!1;const c=i0.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),u=[[0,0],[a,i]],A=s==null?void 0:s.constrain()(c,u,l);return s.transform(o,A),n[0]!==A.x||n[1]!==A.y||n[2]!==A.k},cancelConnection:()=>e({connectionNodeId:Sh.connectionNodeId,connectionHandleId:Sh.connectionHandleId,connectionHandleType:Sh.connectionHandleType,connectionStatus:Sh.connectionStatus,connectionStartHandle:Sh.connectionStartHandle,connectionEndHandle:Sh.connectionEndHandle}),reset:()=>e({...Sh})}),Object.is),r6=({children:e})=>{const t=L.useRef(null);return t.current||(t.current=CGe()),ft.createElement(QVe,{value:t.current},e)};r6.displayName="ReactFlowProvider";const Vre=({children:e})=>L.useContext(OT)?ft.createElement(ft.Fragment,null,e):ft.createElement(r6,null,e);Vre.displayName="ReactFlowWrapper";const EGe={input:bre,default:uF,output:Cre,group:e6},_Ge={default:M_,straight:YP,step:WP,smoothstep:UT,simplebezier:KP},SGe=[0,0],TGe=[15,15],NGe={x:0,y:0,zoom:1},BGe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},zre=L.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:i=EGe,edgeTypes:s=_Ge,onNodeClick:o,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:A,onMoveEnd:h,onConnect:m,onConnectStart:v,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:w,onNodeMouseEnter:T,onNodeMouseMove:N,onNodeMouseLeave:F,onNodeContextMenu:B,onNodeDoubleClick:D,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:k,onNodesDelete:H,onEdgesDelete:P,onSelectionChange:M,onSelectionDragStart:Q,onSelectionDrag:V,onSelectionDragStop:te,onSelectionContextMenu:W,onSelectionStart:re,onSelectionEnd:z,connectionMode:X=sm.Strict,connectionLineType:K=jh.Bezier,connectionLineStyle:se,connectionLineComponent:U,connectionLineContainerStyle:Y,deleteKeyCode:Z="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:de=!1,selectionMode:xe=sb.Full,panActivationKeyCode:Ae="Space",multiSelectionKeyCode:ae=R_()?"Meta":"Control",zoomActivationKeyCode:ue=R_()?"Meta":"Control",snapToGrid:le=!1,snapGrid:ie=TGe,onlyRenderVisibleElements:De=!1,selectNodesOnDrag:Le=!0,nodesDraggable:Be,nodesConnectable:Ce,nodesFocusable:Re,nodeOrigin:je=SGe,edgesFocusable:We,edgesUpdatable:ct,elementsSelectable:wt,defaultViewport:ot=NGe,minZoom:Rt=.5,maxZoom:Pt=2,translateExtent:Xt=fF,preventScrolling:Mt=!0,nodeExtent:Qt,defaultMarkerColor:$t="#b1b1b7",zoomOnScroll:It=!0,zoomOnPinch:Dt=!0,panOnScroll:gt=!1,panOnScrollSpeed:Br=.5,panOnScrollMode:Zt=Cp.Free,zoomOnDoubleClick:yn=!0,panOnDrag:_r=!0,onPaneClick:Vr,onPaneMouseEnter:jn,onPaneMouseMove:Ur,onPaneMouseLeave:Ii,onPaneScroll:dn,onPaneContextMenu:ma,children:Ra,onEdgeContextMenu:Gr,onEdgeDoubleClick:sr,onEdgeMouseEnter:Xr,onEdgeMouseMove:Fi,onEdgeMouseLeave:la,onEdgeUpdate:Qa,onEdgeUpdateStart:Zi,onEdgeUpdateEnd:qt,onReconnect:bn,onReconnectStart:fn,onReconnectEnd:Hn,reconnectRadius:Yn=10,edgeUpdaterRadius:ca=10,onNodesChange:me,onEdgesChange:ke,noDragClassName:_e="nodrag",noWheelClassName:Se="nowheel",noPanClassName:Te="nopan",fitView:Ie=!1,fitViewOptions:Ke,connectOnClick:nt=!0,attributionPosition:ze,proOptions:Xe,defaultEdgeOptions:et,elevateNodesOnSelect:bt=!0,elevateEdgesOnSelect:kt=!1,disableKeyboardA11y:Vt=!1,autoPanOnConnect:Bt=!0,autoPanOnNodeDrag:Lt=!0,connectionRadius:mr=20,isValidConnection:qr,onError:$r,style:Jr,id:Ja,nodeDragThreshold:no,...Za},Di)=>{const hi=Ja||"1";return ft.createElement("div",{...Za,style:{...Jr,...BGe},ref:Di,className:Zo(["react-flow",a]),"data-testid":"rf__wrapper",id:Ja},ft.createElement(Vre,null,ft.createElement(wGe,{onInit:c,onMove:u,onMoveStart:A,onMoveEnd:h,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:T,onNodeMouseMove:N,onNodeMouseLeave:F,onNodeContextMenu:B,onNodeDoubleClick:D,nodeTypes:i,edgeTypes:s,connectionLineType:K,connectionLineStyle:se,connectionLineComponent:U,connectionLineContainerStyle:Y,selectionKeyCode:ne,selectionOnDrag:de,selectionMode:xe,deleteKeyCode:Z,multiSelectionKeyCode:ae,panActivationKeyCode:Ae,zoomActivationKeyCode:ue,onlyRenderVisibleElements:De,selectNodesOnDrag:Le,defaultViewport:ot,translateExtent:Xt,minZoom:Rt,maxZoom:Pt,preventScrolling:Mt,zoomOnScroll:It,zoomOnPinch:Dt,zoomOnDoubleClick:yn,panOnScroll:gt,panOnScrollSpeed:Br,panOnScrollMode:Zt,panOnDrag:_r,onPaneClick:Vr,onPaneMouseEnter:jn,onPaneMouseMove:Ur,onPaneMouseLeave:Ii,onPaneScroll:dn,onPaneContextMenu:ma,onSelectionContextMenu:W,onSelectionStart:re,onSelectionEnd:z,onEdgeContextMenu:Gr,onEdgeDoubleClick:sr,onEdgeMouseEnter:Xr,onEdgeMouseMove:Fi,onEdgeMouseLeave:la,onReconnect:bn??Qa,onReconnectStart:fn??Zi,onReconnectEnd:Hn??qt,reconnectRadius:Yn??ca,defaultMarkerColor:$t,noDragClassName:_e,noWheelClassName:Se,noPanClassName:Te,elevateEdgesOnSelect:kt,rfId:hi,disableKeyboardA11y:Vt,nodeOrigin:je,nodeExtent:Qt}),ft.createElement(xze,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:v,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:w,nodesDraggable:Be,nodesConnectable:Ce,nodesFocusable:Re,edgesFocusable:We,edgesUpdatable:ct,elementsSelectable:wt,elevateNodesOnSelect:bt,minZoom:Rt,maxZoom:Pt,nodeExtent:Qt,onNodesChange:me,onEdgesChange:ke,snapToGrid:le,snapGrid:ie,connectionMode:X,translateExtent:Xt,connectOnClick:nt,defaultEdgeOptions:et,fitView:Ie,fitViewOptions:Ke,onNodesDelete:H,onEdgesDelete:P,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:k,onSelectionDrag:V,onSelectionDragStart:Q,onSelectionDragStop:te,noPanClassName:Te,nodeOrigin:je,rfId:hi,autoPanOnConnect:Bt,autoPanOnNodeDrag:Lt,onError:$r,connectionRadius:mr,isValidConnection:qr,nodeDragThreshold:no}),ft.createElement(gze,{onSelectionChange:M}),Ra,ft.createElement(zVe,{proOptions:Xe,position:ze}),ft.createElement(Eze,{rfId:hi,disableKeyboardA11y:Vt})))});zre.displayName="ReactFlow";function Gre(e){return t=>{const[r,n]=L.useState(t),a=L.useCallback(i=>n(s=>e(i,s)),[]);return[r,n,a]}}const kGe=Gre(Ire),IGe=Gre(Oze);function FGe(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ft.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function DGe(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ft.createElement("path",{d:"M0 0h32v4.2H0z"}))}function RGe(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ft.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function PGe(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function MGe(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const K1=({children:e,className:t,...r})=>ft.createElement("button",{type:"button",className:Zo(["react-flow__controls-button",t]),...r},e);K1.displayName="ControlButton";const LGe=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),qre=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:i,onZoomOut:s,onFitView:o,onInteractiveChange:l,className:c,children:u,position:A="bottom-left"})=>{const h=Ds(),[m,v]=L.useState(!1),{isInteractive:g,minZoomReached:y,maxZoomReached:w}=Xa(LGe,Uo),{zoomIn:T,zoomOut:N,fitView:F}=jT();if(L.useEffect(()=>{v(!0)},[]),!m)return null;const B=()=>{T(),i==null||i()},D=()=>{N(),s==null||s()},E=()=>{F(a),o==null||o()},S=()=>{h.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)};return ft.createElement(rre,{className:Zo(["react-flow__controls",c]),position:A,style:e,"data-testid":"rf__controls"},t&&ft.createElement(ft.Fragment,null,ft.createElement(K1,{onClick:B,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w},ft.createElement(FGe,null)),ft.createElement(K1,{onClick:D,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y},ft.createElement(DGe,null))),r&&ft.createElement(K1,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},ft.createElement(RGe,null)),n&&ft.createElement(K1,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},g?ft.createElement(MGe,null):ft.createElement(PGe,null)),u)};qre.displayName="Controls";var OGe=L.memo(qre),Zu;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Zu||(Zu={}));function UGe({color:e,dimensions:t,lineWidth:r}){return ft.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function jGe({color:e,radius:t}){return ft.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const HGe={[Zu.Dots]:"#91919a",[Zu.Lines]:"#eee",[Zu.Cross]:"#e2e2e2"},QGe={[Zu.Dots]:1,[Zu.Lines]:1,[Zu.Cross]:6},VGe=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function $re({id:e,variant:t=Zu.Dots,gap:r=20,size:n,lineWidth:a=1,offset:i=2,color:s,style:o,className:l}){const c=L.useRef(null),{transform:u,patternId:A}=Xa(VGe,Uo),h=s||HGe[t],m=n||QGe[t],v=t===Zu.Dots,g=t===Zu.Cross,y=Array.isArray(r)?r:[r,r],w=[y[0]*u[2]||1,y[1]*u[2]||1],T=m*u[2],N=g?[T,T]:w,F=v?[T/i,T/i]:[N[0]/i,N[1]/i];return ft.createElement("svg",{className:Zo(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},ft.createElement("pattern",{id:A+e,x:u[0]%w[0],y:u[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},v?ft.createElement(jGe,{color:h,radius:T/i}):ft.createElement(UGe,{dimensions:N,color:h,lineWidth:a})),ft.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${A+e})`}))}$re.displayName="Background";var zGe=L.memo($re);function GGe(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const qGe=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function o0(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let bg=null;function Kre(e={}){return bg||(e.includeStyleProperties?(bg=e.includeStyleProperties,bg):(bg=o0(window.getComputedStyle(document.documentElement)),bg))}function L_(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function $Ge(e){const t=L_(e,"border-left-width"),r=L_(e,"border-right-width");return e.clientWidth+t+r}function KGe(e){const t=L_(e,"border-top-width"),r=L_(e,"border-bottom-width");return e.clientHeight+t+r}function Wre(e,t={}){const r=t.width||$Ge(e),n=t.height||KGe(e);return{width:r,height:n}}function WGe(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const ql=16384;function YGe(e){(e.width>ql||e.height>ql)&&(e.width>ql&&e.height>ql?e.width>e.height?(e.height*=ql/e.width,e.width=ql):(e.width*=ql/e.height,e.height=ql):e.width>ql?(e.height*=ql/e.width,e.width=ql):(e.width*=ql/e.height,e.height=ql))}function O_(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function XGe(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function JGe(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),i=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),a.appendChild(i),i.appendChild(e),XGe(a)}const El=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||El(r,t)};function ZGe(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function eqe(e,t){return Kre(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function tqe(e,t,r,n){const a=`.${e}:${t}`,i=r.cssText?ZGe(r):eqe(r,n);return document.createTextNode(`${a}{${i}}`)}function mV(e,t,r,n){const a=window.getComputedStyle(e,r),i=a.getPropertyValue("content");if(i===""||i==="none")return;const s=qGe();try{t.className=`${t.className} ${s}`}catch{return}const o=document.createElement("style");o.appendChild(tqe(s,r,a,n)),t.appendChild(o)}function rqe(e,t,r){mV(e,t,":before",r),mV(e,t,":after",r)}const gV="application/font-woff",vV="image/jpeg",nqe={woff:gV,woff2:gV,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:vV,jpeg:vV,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function aqe(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function n6(e){const t=aqe(e).toLowerCase();return nqe[t]||""}function iqe(e){return e.split(/,/)[1]}function AF(e){return e.search(/^(data:)/)!==-1}function sqe(e,t){return`data:${t};base64,${e}`}async function Yre(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((i,s)=>{const o=new FileReader;o.onerror=s,o.onloadend=()=>{try{i(r({res:n,result:o.result}))}catch(l){s(l)}},o.readAsDataURL(a)})}const w4={};function oqe(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function a6(e,t,r){const n=oqe(e,t,r.includeQueryParams);if(w4[n]!=null)return w4[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const i=await Yre(e,r.fetchRequestInit,({res:s,result:o})=>(t||(t=s.headers.get("Content-Type")||""),iqe(o)));a=sqe(i,t)}catch(i){a=r.imagePlaceholder||"";let s=`Failed to fetch resource: ${e}`;i&&(s=typeof i=="string"?i:i.message),s&&console.warn(s)}return w4[n]=a,a}async function lqe(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):O_(t)}async function cqe(e,t){if(e.currentSrc){const i=document.createElement("canvas"),s=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,s==null||s.drawImage(e,0,0,i.width,i.height);const o=i.toDataURL();return O_(o)}const r=e.poster,n=n6(r),a=await a6(r,n,t);return O_(a)}async function uqe(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await HT(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function dqe(e,t){return El(e,HTMLCanvasElement)?lqe(e):El(e,HTMLVideoElement)?cqe(e,t):El(e,HTMLIFrameElement)?uqe(e,t):e.cloneNode(Xre(e))}const fqe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Xre=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Aqe(e,t,r){var n,a;if(Xre(t))return t;let i=[];return fqe(e)&&e.assignedNodes?i=o0(e.assignedNodes()):El(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?i=o0(e.contentDocument.body.childNodes):i=o0(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),i.length===0||El(e,HTMLVideoElement)||await i.reduce((s,o)=>s.then(()=>HT(o,r)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function hqe(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Kre(r).forEach(i=>{let s=a.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),El(e,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),n.setProperty(i,s,a.getPropertyPriority(i))})}function pqe(e,t){El(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),El(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function mqe(e,t){if(El(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function gqe(e,t,r){return El(t,Element)&&(hqe(e,t,r),rqe(e,t,r),pqe(e,t),mqe(e,t)),t}async function vqe(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let i=0;i<r.length;i++){const o=r[i].getAttribute("xlink:href");if(o){const l=e.querySelector(o),c=document.querySelector(o);!l&&c&&!n[o]&&(n[o]=await HT(c,t,!0))}}const a=Object.values(n);if(a.length){const i="http://www.w3.org/1999/xhtml",s=document.createElementNS(i,"svg");s.setAttribute("xmlns",i),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const o=document.createElementNS(i,"defs");s.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);e.appendChild(s)}return e}async function HT(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>dqe(n,t)).then(n=>Aqe(e,n,t)).then(n=>gqe(e,n,t)).then(n=>vqe(n,t))}const Jre=/url\((['"]?)([^'"]+?)\1\)/g,xqe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,yqe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function bqe(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function wqe(e){const t=[];return e.replace(Jre,(r,n,a)=>(t.push(a),r)),t.filter(r=>!AF(r))}async function Cqe(e,t,r,n,a){try{const i=r?GGe(t,r):t,s=n6(t);let o;return a||(o=await a6(i,s,n)),e.replace(bqe(t),`$1${o}$3`)}catch{}return e}function Eqe(e,{preferredFontFormat:t}){return t?e.replace(yqe,r=>{for(;;){const[n,,a]=xqe.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Zre(e){return e.search(Jre)!==-1}async function ene(e,t,r){if(!Zre(e))return e;const n=Eqe(e,r);return wqe(n).reduce((i,s)=>i.then(o=>Cqe(o,s,t,r)),Promise.resolve(n))}async function wg(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const i=await ene(a,null,r);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function _qe(e,t){await wg("background",e,t)||await wg("background-image",e,t),await wg("mask",e,t)||await wg("-webkit-mask",e,t)||await wg("mask-image",e,t)||await wg("-webkit-mask-image",e,t)}async function Sqe(e,t){const r=El(e,HTMLImageElement);if(!(r&&!AF(e.src))&&!(El(e,SVGImageElement)&&!AF(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await a6(n,n6(n),t);await new Promise((i,s)=>{e.onload=i,e.onerror=t.onImageErrorHandler?(...l)=>{try{i(t.onImageErrorHandler(...l))}catch(c){s(c)}}:s;const o=e;o.decode&&(o.decode=i),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Tqe(e,t){const n=o0(e.childNodes).map(a=>tne(a,t));await Promise.all(n).then(()=>e)}async function tne(e,t){El(e,Element)&&(await _qe(e,t),await Sqe(e,t),await Tqe(e,t))}function Nqe(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const xV={};async function yV(e){let t=xV[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},xV[e]=t,t}async function bV(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,i=(r.match(/url\([^)]+\)/g)||[]).map(async s=>{let o=s.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Yre(o,t.fetchRequestInit,({result:l})=>(r=r.replace(s,`url(${l})`),[s,l]))});return Promise.all(i).then(()=>r)}function wV(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;t.push(l[0])}n=n.replace(a,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(s,"gi");for(;;){let l=i.exec(n);if(l===null){if(l=o.exec(n),l===null)break;i.lastIndex=o.lastIndex}else o.lastIndex=i.lastIndex;t.push(l[0])}return t}async function Bqe(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{o0(a.cssRules||[]).forEach((i,s)=>{if(i.type===CSSRule.IMPORT_RULE){let o=s+1;const l=i.href,c=yV(l).then(u=>bV(u,t)).then(u=>wV(u).forEach(A=>{try{a.insertRule(A,A.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:A,error:h})}})).catch(u=>{console.error("Error loading remote css",u.toString())});n.push(c)}})}catch(i){const s=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(yV(a.href).then(o=>bV(o,t)).then(o=>wV(o).forEach(l=>{s.insertRule(l,s.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",i)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{o0(a.cssRules||[]).forEach(i=>{r.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${a.href}`,i)}}),r))}function kqe(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Zre(t.style.getPropertyValue("src")))}async function Iqe(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=o0(e.ownerDocument.styleSheets),n=await Bqe(r,t);return kqe(n)}function rne(e){return e.trim().replace(/["']/g,"")}function Fqe(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(i=>{t.add(rne(i))}),Array.from(n.children).forEach(i=>{i instanceof HTMLElement&&r(i)})}return r(e),t}async function Dqe(e,t){const r=await Iqe(e,t),n=Fqe(e);return(await Promise.all(r.filter(i=>n.has(rne(i.style.fontFamily))).map(i=>{const s=i.parentStyleSheet?i.parentStyleSheet.href:null;return ene(i.cssText,s,t)}))).join(`
`)}async function Rqe(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Dqe(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Pqe(e,t={}){const{width:r,height:n}=Wre(e,t),a=await HT(e,t,!0);return await Rqe(a,t),await tne(a,t),Nqe(a,t),await JGe(a,r,n)}async function Mqe(e,t={}){const{width:r,height:n}=Wre(e,t),a=await Pqe(e,t),i=await O_(a),s=document.createElement("canvas"),o=s.getContext("2d"),l=t.pixelRatio||WGe(),c=t.canvasWidth||r,u=t.canvasHeight||n;return s.width=c*l,s.height=u*l,t.skipAutoScale||YGe(s),s.style.width=`${c}`,s.style.height=`${u}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,s.width,s.height)),o.drawImage(i,0,0,s.width,s.height),s}async function QT(e,t={}){return(await Mqe(e,t)).toDataURL()}const nne="recursos_crucigramas",VT="recursos_lineas_de_tiempo",zT="recursos_mapas_mentales",ane="recursos_sopas_de_letras",GT=e=>{var r,n,a,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((i=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:i.call(a).toISOString())||t.createdAt}},Lqe=e=>{const t=tr(Ft(Tt,nne),an("fechaCreacion","desc"));return yr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Oqe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:Ar.fromDate(new Date)};return(await Da(Ft(Tt,nne),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},Uqe=e=>{const t=tr(Ft(Tt,VT),an("createdAt","desc"));return yr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},jqe=async(e,t)=>{try{const{id:r,...n}=e,a=br(Tt,VT,r);await ro(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Hqe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await Da(Ft(Tt,VT),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Qqe=async e=>{try{const t=br(Tt,VT,e);await Fs(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Vqe=e=>{const t=tr(Ft(Tt,zT),an("createdAt","desc"));return yr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},zqe=async(e,t)=>{try{const{id:r,...n}=e,a=br(Tt,zT,r);await ro(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Gqe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await Da(Ft(Tt,zT),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},qqe=async e=>{try{const t=br(Tt,zT,e);await Fs(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},$qe=e=>{const t=tr(Ft(Tt,ane),an("createdAt","desc"));return yr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Kqe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:Ar.fromDate(new Date)};return(await Da(Ft(Tt,ane),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Wqe=()=>d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Yqe=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Xqe=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Jqe=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return d.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[d.jsx(Fv,{type:"target",position:fr.Left,className:"w-2 h-2 !bg-slate-400"}),d.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&d.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),d.jsx(Fv,{type:"source",position:fr.Right,className:"w-2 h-2 !bg-slate-400"})]})},hF=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+hF(n,t),0),pF=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const s=(o,l,c)=>{r.push({id:o.id,position:{x:l*280,y:c},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const u=hF(o,100);let A=c-u/2+100/2;(o.children||[]).forEach(h=>{const m=hF(h,100),v=A+m/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),s(h,l+1,v),A+=m})};s(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const s=300,o=500;(e.children||[]).forEach((l,c)=>{const u=c/e.children.length*2*Math.PI;r.push({id:l.id,position:{x:s*Math.cos(u),y:s*Math.sin(u)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),n.push({id:`e-${e.id}-${l.id}`,source:e.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((A,h)=>{const m=u+(h-(l.children.length-1)/2)*.25;r.push({id:A.id,position:{x:o*Math.cos(m),y:o*Math.sin(m)},data:{label:A.label,icon:A.icon,type:A.type},type:"custom"}),n.push({id:`e-${l.id}-${A.id}`,source:l.id,target:A.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},ine=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const i=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],s=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return d.jsxs("div",{className:`pl-4 ${a>0?"border-l "+s[a-1%s.length]:""}`,children:[d.jsx("div",{className:`p-2 rounded-lg my-1 ${i[a%i.length]}`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),d.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&d.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>d.jsx(ine,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},Zqe={custom:Jqe},e$e=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=L.useState(e.treeData),[i,s]=L.useState("tree"),[o,l]=L.useState(!1),[c,u,A]=kGe([]),[h,m,v]=IGe([]),{fitView:g}=jT();L.useEffect(()=>{const{nodes:B,edges:D}=pF(n,i);u(B),m(D),setTimeout(()=>g({duration:300}),50)},[n,i,u,m,g]);const y=(B,D)=>{const E=JSON.parse(JSON.stringify(n)),S=k=>k.id===B?(k.label=D,!0):(k.children||[]).some(S);S(E),a(E)},w=B=>{const D=JSON.parse(JSON.stringify(n)),E=S=>S.id===B?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(E);E(D),a(D)},T=B=>{const D=JSON.parse(JSON.stringify(n)),E=S=>{const k=(S.children||[]).findIndex(H=>H.id===B);return k!==-1?(S.children.splice(k,1),!0):(S.children||[]).some(E)};E(D),a(D)},N=()=>{l(!0);const{nodes:B,edges:D}=pF(n,i);r({...e,treeData:n,nodes:B,edges:D}),setTimeout(()=>l(!1),1e3)},F=async B=>{const D=document.querySelector(".react-flow");D&&QT(D,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const S=document.createElement("a");S.download=`${e.tema}.png`,S.href=E,S.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),d.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:d.jsxs(zre,{nodes:c,edges:h,onNodesChange:A,onEdgesChange:v,fitView:!0,nodeTypes:Zqe,children:[d.jsx(OGe,{}),d.jsx(zGe,{})]})}),d.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[d.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),d.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[d.jsxs("button",{onClick:()=>s("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${i==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[d.jsx(Yqe,{})," Vista en árbol"]}),d.jsxs("button",{onClick:()=>s("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${i==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[d.jsx(Xqe,{})," Vista central"]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:d.jsx(ine,{node:n,onUpdate:y,onAddChild:w,onDelete:T})}),d.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[d.jsx("button",{onClick:()=>F(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),d.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},t$e=({onBack:e,currentUser:t})=>{const[r,n]=L.useState("list"),[a,i]=L.useState([]),[s,o]=L.useState(null),[l,c]=L.useState(!1),[u,A]=L.useState(!0),[h,m]=L.useState(""),[v,g]=L.useState(""),[y,w]=L.useState("");L.useEffect(()=>{A(!0);const E=Vqe(S=>{i(S),A(!1)});return()=>E()},[]);const T=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}c(!0);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${y}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const te=(await(await new Wi(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(k)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(te),re=Y=>({id:crypto.randomUUID(),label:Y.label||"Sin etiqueta",icon:Y.icon||"🧠",type:Y.type||"default",children:(Y.children||[]).map(re)}),z=re(W),{nodes:X,edges:K}=pF(z),se={tema:h,nivel:v,treeData:z,nodes:X,edges:K},U=await Gqe(se,t);o({...se,id:U,createdAt:new Date().toISOString()}),n("editor")}catch(H){console.error("AI Generation Error:",H),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{c(!1)}},N=async E=>{try{await zqe(E,t)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},F=E=>{o(E),n("editor")},B=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await qqe(E)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},D=()=>{switch(r){case"editor":return s?d.jsx(r6,{children:d.jsx(e$e,{mapData:s,onBack:()=>n("list"),onSave:N})}):null;case"config":return d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),d.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),d.jsxs("form",{onSubmit:T,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>m(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),d.jsx("textarea",{id:"contenido",value:y,onChange:E=>w(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?d.jsx(Wqe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),d.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[d.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),d.jsxs("div",{className:"mt-4 flex gap-2",children:[d.jsx("button",{onClick:()=>F(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),d.jsx("button",{onClick:()=>B(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):d.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return u?d.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("span",{className:"text-4xl",children:"🧠"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),d.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),D()]})},r$e=()=>d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n$e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),a$e=({onBack:e,currentUser:t})=>{const[r,n]=L.useState([]),[a,i]=L.useState("Media"),[s,o]=L.useState(10),[l,c]=L.useState(!1),[u,A]=L.useState(Array(10).fill("")),[h,m]=L.useState(""),[v,g]=L.useState(null),[y,w]=L.useState({ai:!1,puzzle:!1,data:!0}),T=L.useRef(null);L.useEffect(()=>{w(P=>({...P,data:!0}));const H=$qe(P=>{n(P),w(M=>({...M,data:!1}))});return()=>H()},[]),L.useEffect(()=>{A(H=>{const P=Array(s).fill("");for(let M=0;M<Math.min(H.length,s);M++)P[M]=H[M];return P})},[s]);const N=(H,P)=>{const M=[...u];M[H]=P,A(M)},F=async()=>{if(h.trim()){w(H=>({...H,ai:!0}));try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=new Wi(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Q=`
                Genera una lista de ${s} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${s} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,re=(await(await M.generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(re);if(!z.palabras||!Array.isArray(z.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const K=[...z.palabras.map(se=>se.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,s)];for(;K.length<s;)K.push("");A(K)}catch(H){console.error("Error generating words with AI:",H),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{w(H=>({...H,ai:!1}))}}},B=(H,P,M,Q,V,te)=>{for(let W=0;W<H.length;W++){const re=M+W*V.y,z=Q+W*V.x;if(re<0||re>=te||z<0||z>=te||P[re][z]&&P[re][z]!==H[W])return!1}return!0},D=(H,P,M,Q,V)=>{for(let te=0;te<H.length;te++)P[M+te*V.y][Q+te*V.x]=H[te]},E=async()=>{w(re=>({...re,puzzle:!0})),g(null),await new Promise(re=>setTimeout(re,100));const H=u.map(re=>re.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(H.length===0){alert("Por favor, ingrese al menos una palabra válida."),w(re=>({...re,puzzle:!1}));return}const P=Math.max(...H.map(re=>re.length));let M=Math.max(P,H.length)+2;a==="Media"&&(M+=3),a==="Difícil"&&(M+=5),M=Math.min(Math.max(M,10),25);const Q=Array(M).fill(null).map(()=>Array(M).fill(null)),V=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&V.push({x:1,y:-1}),a==="Difícil"&&V.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const re of H.sort((z,X)=>X.length-z.length)){let z=!1;for(let X=0;X<100;X++){const K=V[Math.floor(Math.random()*V.length)],se=Math.floor(Math.random()*M),U=Math.floor(Math.random()*M);if(B(re,Q,se,U,K,M)){D(re,Q,se,U,K),z=!0;break}}z||console.warn(`No se pudo colocar la palabra: ${re}`)}const te=Q.map(re=>re.map(z=>z||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),W={tema:h||"Personalizado",grid:te.map(re=>re.join("")),words:H.sort()};try{const re=await Kqe(W,t);g({...W,id:re,createdAt:new Date().toISOString()})}catch(re){console.error("Error saving puzzle:",re),alert("No se pudo guardar la sopa de letras.")}finally{w(re=>({...re,puzzle:!1}))}},S=()=>{T.current&&QT(T.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(H=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=H,P.click()}).catch(H=>{console.error("oops, something went wrong!",H),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},k=()=>{var M;if(!v)return null;const H=((M=v.grid[0])==null?void 0:M.length)||1,P=v.grid.join("").split("");return d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{ref:T,className:"p-6 bg-white",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[d.jsx("div",{className:"md:col-span-2",children:d.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${H}, minmax(0, 1fr))`},children:P.map((Q,V)=>d.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:Q},V))})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),d.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:v.words.map(Q=>d.jsx("li",{children:Q},Q))})]})]})}),d.jsxs("div",{className:"flex justify-end gap-4",children:[d.jsx("button",{onClick:()=>g(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),d.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return y.data?d.jsx("div",{className:"text-center py-10",children:"Cargando..."}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"text-4xl",children:"🅰️"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),d.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!v&&d.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),d.jsxs("select",{value:a,onChange:H=>i(H.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[d.jsx("option",{children:"Fácil"}),d.jsx("option",{children:"Media"}),d.jsx("option",{children:"Difícil"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(H=>d.jsx("button",{onClick:()=>{o(H),c(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&s===H?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:H},H)),d.jsx("button",{onClick:()=>c(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&d.jsx("input",{type:"number",value:s,onChange:H=>o(parseInt(H.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:H=>m(H.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("button",{onClick:F,disabled:y.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:y.ai?d.jsx(r$e,{}):d.jsxs(d.Fragment,{children:[d.jsx(n$e,{}),d.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:u.map((H,P)=>d.jsx("input",{type:"text",value:H,onChange:M=>N(P,M.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),d.jsx("div",{className:"text-right pt-4",children:d.jsx("button",{onClick:E,disabled:y.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:y.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),v&&k()]})},i$e=()=>d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s$e=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),o$e=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=L.useState(e),[i,s]=L.useState(null),o=L.useRef(null),l=(m,v,g)=>{a(y=>({...y,events:y.events.map(w=>w.id===m?{...w,[v]:g}:w)}))},c=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},v=[...n.events,m].sort((g,y)=>parseInt(g.date)-parseInt(y.date));a(g=>({...g,events:v}))},u=m=>{a(v=>({...v,events:v.events.filter(g=>g.id!==m)}))},A=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}s(m.id);const v="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",g=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${m.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const B=(await(await new Wi(v).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(g)).response).text().replace(/^```json\s*|```\s*$/g,""),D=JSON.parse(B);a(E=>({...E,events:E.events.map(S=>S.id===m.id?{...S,date:D.date,description:D.description,icon:D.icon}:S).sort((S,k)=>parseInt(S.date)-parseInt(k.date))}))}catch(y){console.error("Error al generar descripción del hito:",y),alert("No se pudo autocompletar el hito.")}finally{s(null)}},h=()=>{o.current&&QT(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const v=document.createElement("a");v.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,v.href=m,v.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),d.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:d.jsxs("div",{ref:o,className:"relative p-10",children:[d.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),d.jsx("div",{className:"relative",children:n.events.sort((m,v)=>parseInt(m.date)-parseInt(v.date)).map((m,v)=>{const g=v%2===0;return d.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[d.jsx("div",{className:"w-1/2",children:g&&d.jsx("div",{className:"text-right pr-8",children:d.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[d.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),d.jsx("div",{className:"z-10 flex-shrink-0",children:d.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),d.jsx("div",{className:"w-1/2",children:!g&&d.jsx("div",{className:"text-left pl-8",children:d.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[d.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),d.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[d.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),d.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>d.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[d.jsx("input",{type:"text",value:m.date,onChange:v=>l(m.id,"date",v.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("textarea",{value:m.description,onChange:v=>l(m.id,"description",v.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),d.jsx("button",{onClick:()=>A(m),disabled:i===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:i===m.id?d.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):d.jsx(s$e,{})})]}),d.jsx("button",{onClick:()=>u(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),d.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[d.jsx("button",{onClick:c,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),d.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},l$e=({onBack:e,currentUser:t})=>{const[r,n]=L.useState("list"),[a,i]=L.useState([]),[s,o]=L.useState(null),[l,c]=L.useState(!1),[u,A]=L.useState(!0),[h,m]=L.useState(""),[v,g]=L.useState(""),[y,w]=L.useState("");L.useEffect(()=>{A(!0);const B=Uqe(D=>{i(D),A(!1)});return()=>B()},[]);const T=async B=>{if(B.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}c(!0);const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=v&&y?`entre ${v} y ${y}`:v?`a partir de ${v}`:y?`hasta ${y}`:"",S=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const V=(await(await new Wi(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(S)).response).text().replace(/^```json\s*|```\s*$/g,""),te=JSON.parse(V);if(!te.events||!Array.isArray(te.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const W={tema:h,fechaInicio:v,fechaFin:y,events:te.events.map(z=>({id:crypto.randomUUID(),date:z.date||"Sin fecha",description:z.description||"Sin descripción",icon:z.icon||"🗓️"}))},re=await Hqe(W,t);o({...W,id:re,createdAt:new Date().toISOString()}),n("editor")}catch(k){console.error("AI Generation Error:",k),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{c(!1)}},N=async B=>{try{await jqe(B,t),n("list"),o(null)}catch(D){console.error("Error saving timeline:",D),alert("No se pudo guardar la línea de tiempo.")}},F=async B=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Qqe(B)}catch(D){console.error("Error deleting timeline:",D),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&s?d.jsx(o$e,{timeline:s,onSave:N,onBack:()=>n("list")}):u?d.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"text-4xl",children:"🕒"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),d.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),d.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),d.jsxs("form",{onSubmit:T,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",id:"tema",value:h,onChange:B=>m(B.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),d.jsx("input",{type:"text",id:"fechaInicio",value:v,onChange:B=>g(B.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),d.jsx("input",{type:"text",id:"fechaFin",value:y,onChange:B=>w(B.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),d.jsx("div",{className:"text-right",children:d.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?d.jsx(i$e,{}):"Generar con IA"})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(B=>d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.tema}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(B.createdAt).toLocaleDateString("es-CL")]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{o(B),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),d.jsx("button",{onClick:()=>F(B.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},B.id)):d.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},c$e=()=>d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),CV=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),u$e=({onBack:e,currentUser:t})=>{const[r,n]=L.useState([]),[a,i]=L.useState(10),[s,o]=L.useState(!1),[l,c]=L.useState(Array(10).fill("")),[u,A]=L.useState(Array(10).fill("")),[h,m]=L.useState(""),[v,g]=L.useState(null),[y,w]=L.useState(!1),[T,N]=L.useState({ai:!1,puzzle:!1,data:!0}),[F,B]=L.useState(null),D=L.useRef(null);L.useEffect(()=>{N(te=>({...te,data:!0}));const V=Lqe(te=>{const W=te.map(re=>{const{grid_flat:z,grid_width:X,...K}=re,se=[];if(z&&X>0)for(let U=0;U<z.length;U+=X)se.push(z.slice(U,U+X));return{...K,grid:se}});n(W),N(re=>({...re,data:!1}))});return()=>V()},[]),L.useEffect(()=>{const V=a;c(te=>Array.from({length:V},(W,re)=>te[re]||"")),A(te=>Array.from({length:V},(W,re)=>te[re]||""))},[a]);const E=(V,te)=>{const W=[...l];W[V]=te,c(W)},S=(V,te)=>{const W=[...u];W[V]=te,A(W)},k=async()=>{if(h.trim()){N(V=>({...V,ai:!0}));try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new Wi(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),re=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let se=(await(await W.generateContent(re)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const U=se.indexOf("{"),Y=se.lastIndexOf("}");U!==-1&&Y!==-1&&(se=se.substring(U,Y+1)),se=se.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),se.includes("__SPLIT__")&&(se=se.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(xe,Ae,ae,ue)=>{const le=ae.split("__SPLIT__").map(ie=>ie.trim().replace(/,$/,""));return Ae+le.join(",")+ue})),se=se.replace(/,\s*]/g,"]");let Z;try{Z=JSON.parse(se)}catch{console.error("Respuesta IA no es JSON válido:",se),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),N(Ae=>({...Ae,ai:!1}));return}if(!Z.items||!Array.isArray(Z.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const ne=Z.items.map(xe=>(xe.word||"").toUpperCase().replace(/\s/g,"")),de=Z.items.map(xe=>xe.clue||"");c(Array.from({length:a},(xe,Ae)=>ne[Ae]||"")),A(Array.from({length:a},(xe,Ae)=>de[Ae]||""))}catch(V){console.error("Error generating words/clues with AI:",V),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{N(V=>({...V,ai:!1}))}}},H=async V=>{const te=l[V];if(!te||!te.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}B(V);try{const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new Wi(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),X=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${te}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,Y=(await(await z.generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(Y);Z.clue&&S(V,Z.clue)}catch(W){console.error("Error generating clue with AI:",W),alert("No se pudo generar la pista.")}finally{B(null)}},P=L.useCallback(()=>{try{const V=l.map((Re,je)=>({word:Re.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:u[je]})).filter(Re=>Re.word.length>0);if(V.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;V.sort((Re,je)=>je.word.length-Re.word.length);const te=V[0].word.length,W=Math.max(te,V.length)*2;let re=Array.from({length:W},()=>Array(W).fill(null));const z=[],X=V.shift(),K=Math.floor(W/2),se=Math.floor((W-X.word.length)/2);for(let Re=0;Re<X.word.length;Re++)re[K][se+Re]=X.word[Re];z.push({word:X.word,clue:X.clue,direction:"across",row:K,col:se});for(const Re of V){let je={score:-1,row:-1,col:-1,direction:"across"};for(const We of z)for(let ct=0;ct<We.word.length;ct++)for(let wt=0;wt<Re.word.length;wt++)if(We.word[ct]===Re.word[wt]){let ot=0,Rt,Pt,Xt;We.direction==="across"?(Xt="down",Rt=We.row-wt,Pt=We.col+ct):(Xt="across",Rt=We.row+ct,Pt=We.col-wt);let Mt=!0;for(let Qt=0;Qt<Re.word.length;Qt++){const $t=Rt+(Xt==="down"?Qt:0),It=Pt+(Xt==="across"?Qt:0);if($t<0||$t>=W||It<0||It>=W){Mt=!1;break}const Dt=re[$t][It],gt=$t===We.row+(We.direction==="down"?ct:0)&&It===We.col+(We.direction==="across"?ct:0);if(Dt&&!gt){Mt=!1;break}if(Dt&&gt&&Dt!==Re.word[wt]){Mt=!1;break}if(!gt){if(Xt==="across"&&($t>0&&re[$t-1][It]||$t<W-1&&re[$t+1][It])){Mt=!1;break}if(Xt==="down"&&(It>0&&re[$t][It-1]||It<W-1&&re[$t][It+1])){Mt=!1;break}}Dt&&ot++}Mt&&ot>je.score&&(je={score:ot,row:Rt,col:Pt,direction:Xt})}if(je.score>-1){for(let We=0;We<Re.word.length;We++){const ct=je.row+(je.direction==="down"?We:0),wt=je.col+(je.direction==="across"?We:0);re[ct][wt]=Re.word[We]}z.push({word:Re.word,clue:Re.clue,direction:je.direction,row:je.row,col:je.col})}}let U=W,Y=-1,Z=W,ne=-1;z.forEach(Re=>{U=Math.min(U,Re.row),Y=Math.max(Y,Re.row+(Re.direction==="down"?Re.word.length-1:0)),Z=Math.min(Z,Re.col),ne=Math.max(ne,Re.col+(Re.direction==="across"?Re.word.length-1:0))}),Y===-1&&(U=z[0].row,Y=z[0].row,Z=z[0].col,ne=z[0].col+z[0].word.length-1);const de=1,xe=Math.max(0,U-de),Ae=Math.min(W,Y+1+de),ae=Math.max(0,Z-de),ue=Math.min(W,ne+1+de),le=re.slice(xe,Ae).map(Re=>Re.slice(ae,ue)),ie=z.map(Re=>({...Re,row:Re.row-xe,col:Re.col-ae})).sort((Re,je)=>Re.row-je.row||Re.col-je.col);let De=1;const Le=[],Be=new Map;ie.forEach(Re=>{const je=`${Re.row},${Re.col}`;Be.has(je)||Be.set(je,De++),Le.push({...Re,number:Be.get(je)})});const Ce=le.map(Re=>Re.map(je=>({char:je,number:null})));return Le.forEach(Re=>{const je=`${Re.row},${Re.col}`;Ce[Re.row]&&Ce[Re.row][Re.col]!==void 0&&(Ce[Re.row][Re.col].number=Be.get(je))}),{grid:Ce,clues:{across:Le.filter(Re=>Re.direction==="across").sort((Re,je)=>Re.number-je.number),down:Le.filter(Re=>Re.direction==="down").sort((Re,je)=>Re.number-je.number)}}}catch(V){return console.error("Error generating crossword grid:",V),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,u]),M=async()=>{var te;N(W=>({...W,puzzle:!0})),g(null),await new Promise(W=>setTimeout(W,100));const V=P();if(V){const W={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:V.grid,clues:V.clues},{grid:re,...z}=W,X={...z,grid_flat:re.flat().map(K=>K.char||""),grid_width:((te=re[0])==null?void 0:te.length)||0};try{const K=await Oqe(X,t);g({...W,id:K,fechaCreacion:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar el crucigrama en la base de datos.")}}N(W=>({...W,puzzle:!1}))},Q=()=>{D.current&&(w(!1),setTimeout(()=>{QT(D.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(V=>{const te=document.createElement("a");te.download="crucigrama.png",te.href=V,te.click()}).catch(V=>console.error("Error generating image",V))},100))};return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"text-4xl",children:"✏️"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),d.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),v?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{ref:D,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsx("div",{children:d.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${v.grid[0].length}, 2rem)`},children:v.grid.flat().map((V,te)=>d.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:V.char?"white":"black"},children:[V.number&&d.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:V.number}),y&&V.char&&d.jsx("span",{children:V.char})]},te))})}),d.jsxs("div",{className:"text-sm",children:[d.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),d.jsx("ul",{className:"space-y-1",children:v.clues.across.map(V=>d.jsxs("li",{children:[d.jsxs("strong",{children:[V.number,"."]})," ",V.clue]},`${V.word}-${V.clue}`))}),d.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),d.jsx("ul",{className:"space-y-1",children:v.clues.down.map(V=>d.jsxs("li",{children:[d.jsxs("strong",{children:[V.number,"."]})," ",V.clue]},`${V.word}-${V.clue}`))})]})]})}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("label",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",checked:y,onChange:()=>w(!y),className:"h-5 w-5 rounded"}),d.jsx("span",{children:"Mostrar Solución"})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>g(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),d.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):d.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(V=>d.jsx("button",{onClick:()=>{i(V),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!s&&a===V?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:V},V)),d.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${s?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),s&&d.jsx("input",{type:"number",value:a,onChange:V=>i(parseInt(V.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:V=>m(V.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("button",{onClick:k,disabled:T.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:T.ai?d.jsx(c$e,{}):d.jsxs(d.Fragment,{children:[d.jsx(CV,{}),d.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),d.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((V,te)=>d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[d.jsx("input",{type:"text",value:l[te],onChange:W=>E(te,W.target.value),placeholder:`Palabra ${te+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[d.jsx("textarea",{value:u[te],onChange:W=>S(te,W.target.value),placeholder:`Pista ${te+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),d.jsx("button",{onClick:()=>H(te),disabled:F===te,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:F===te?d.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):d.jsx(CV,{})})]})]},te))}),d.jsx("div",{className:"text-right pt-4",children:d.jsx("button",{onClick:M,disabled:T.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:T.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},d$e=()=>{const[e,t]=L.useState(null),[r,n]=L.useState(!0);return L.useEffect(()=>{const a=LK(wme,async i=>{if(i&&i.email)try{const s=await TY(i.email);t(s)}catch(s){console.error("Error al obtener el perfil del usuario:",s),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},f$e=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],A$e=({recurso:e,onClick:t})=>d.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[d.jsx("div",{className:"text-6xl mb-4",children:e.icon}),d.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),h$e=()=>{const[e,t]=L.useState("menu"),{currentUser:r}=d$e(),n=()=>e!=="menu"&&!r?d.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?d.jsx(t$e,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?d.jsx(a$e,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?d.jsx(l$e,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?d.jsx(u$e,{onBack:()=>t("menu"),currentUser:r}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f$e.map(a=>d.jsx(A$e,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return d.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},p$e="evaluaciones_formativas",m$e="calificaciones_formativas",sne="trabajos_grupales_formativos",one=e=>{var r,n,a,i;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((i=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:i.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},g$e=(e,t)=>{const r=tr(Ft(Tt,p$e),On("curso","==",e));return yr(r,n=>{t(n.docs.map(a=>one(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},v$e=e=>{const t=tr(Ft(Tt,m$e));return yr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},x$e=(e,t)=>{const r=tr(Ft(Tt,sne),On("curso","==",e));return yr(r,n=>{t(n.docs.map(a=>one(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},y$e=async e=>{try{const{id:t,...r}=e,n=br(Tt,sne,t);await ro(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},b$e=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState({}),[i,s]=L.useState([]),[o,l]=L.useState(!0),[c,u]=L.useState(null),[A,h]=L.useState(!1),[m,v]=L.useState(null),g=L.useRef(null);L.useEffect(()=>{if(!e.curso){l(!1);return}l(!0);const F=g$e(e.curso,r),B=v$e(a),D=x$e(e.curso,E=>{s(E),l(!1)});return()=>{F(),B(),D()}},[e.curso]);const y=L.useMemo(()=>{if(!e.curso)return[];const B=t.filter(D=>D.curso===e.curso).reduce((D,E)=>((D[E.asignatura]=D[E.asignatura]||[]).push(E),D),{});return Object.entries(B).map(([D,E])=>{let S=0,k=0;const H=E.map(M=>{var te;const Q=(te=n[M.id])==null?void 0:te[e.nombreCompleto];let V="No Trabajado";return Q==="trabajado"?(S+=7,k++,V="Trabajado"):Q==="no trabajado"&&(S+=2,k++,V="No Trabajado"),{id:M.id,nombreActividad:M.nombreActividad,fecha:M.fecha,estado:V}}).filter(M=>{var Q;return(Q=n[M.id])==null?void 0:Q[e.nombreCompleto]}),P=k>0?(S/k).toFixed(1):"N/A";return{asignatura:D,promedio:P,actividades:H.sort((M,Q)=>new Date(Q.fecha).getTime()-new Date(M.fecha).getTime())}}).filter(D=>D.actividades.length>0).sort((D,E)=>D.asignatura.localeCompare(E.asignatura))},[t,n,e]);L.useEffect(()=>{if(y.reduce((k,H)=>k+H.actividades.length,0)===0){u(null);return}const B=y.reduce((k,H)=>{const P=parseFloat(H.promedio);return isNaN(P)?k:k+P},0),D=y.length>0?B/y.length:0,E=x2.find(k=>D>=k.promedioMin&&D<=k.promedioMax)||null,S=x2.filter(k=>D>=k.promedioMin);if(u({puntajeTotal:0,promedio:D,rangoActual:E,insigniasGanadas:S}),g.current!==null){const k=x2.find(H=>g.current>=H.promedioMin&&g.current<=H.promedioMax)||null;E&&(!k||E.nombre!==k.nombre)&&v(E)}g.current=D},[y]);const w=L.useMemo(()=>e.curso?i.filter(F=>F.curso===e.curso).map(F=>{const B=F.grupos.find(D=>D.integrantes.some(E=>E.nombre===e.nombreCompleto));return B?{...F,miGrupo:B}:null}).filter(F=>F!==null).sort((F,B)=>new Date(B.fechaPresentacion).getTime()-new Date(F.fechaPresentacion).getTime()):[],[i,e]),T=async(F,B)=>{const D=i.find(S=>S.id===F);if(!D)return;const E={...D,grupos:D.grupos.map(S=>S.integrantes.some(H=>H.nombre===e.nombreCompleto)?{...S,integrantes:S.integrantes.map(H=>H.nombre===e.nombreCompleto?{...H,rol:B||void 0}:H)}:S)};try{await y$e(E)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},N=F=>{const B=parseFloat(F);return isNaN(B)?"bg-slate-400":B<4?"bg-red-500":B<5.5?"bg-yellow-500":"bg-green-500"};return o?d.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>v(null),children:d.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:F=>F.stopPropagation(),children:[d.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),d.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),d.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),d.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),d.jsx("button",{onClick:()=>v(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),A&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:d.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:F=>F.stopPropagation(),children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),d.jsx("div",{className:"overflow-y-auto space-y-3",children:x2.map(F=>{const B=c==null?void 0:c.insigniasGanadas.some(D=>D.nombre===F.nombre);return d.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${B?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[d.jsx("div",{className:"text-5xl",children:F.emoji}),d.jsxs("div",{children:[d.jsx("h3",{className:`font-bold ${B?"text-amber-700":"text-slate-600"}`,children:F.nombre}),d.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",F.promedioMin," y ",F.promedioMax]})]})]},F.nombre)})})]})}),d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),d.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),c&&c.rangoActual&&d.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),d.jsx("h2",{className:"text-3xl font-bold",children:c.rangoActual.nombre}),d.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-7xl",children:c.rangoActual.emoji}),d.jsx("p",{className:"font-bold text-2xl mt-2",children:c.promedio.toFixed(1)}),d.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),y.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(F=>d.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800",children:F.asignatura}),d.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),d.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${N(F.promedio)}`,children:F.promedio})]}),d.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),F.actividades.map(B=>d.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-slate-700",children:B.nombreActividad}),d.jsx("p",{className:"text-xs text-slate-500",children:new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),d.jsx("span",{className:`font-semibold ${B.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:B.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},B.id))]})]},F.asignatura))}):d.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[d.jsx("span",{className:"text-5xl",children:"📊"}),d.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),d.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),w.length>0&&d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),d.jsx("div",{className:"space-y-4",children:w.map(F=>{const B=F.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),D=BY.filter(E=>!B.includes(E));return d.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[d.jsx("h3",{className:"font-bold text-slate-800",children:F.nombreActividad}),d.jsxs("p",{className:"text-sm text-slate-500",children:[F.asignatura," - Presentación: ",new Date(F.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),d.jsxs("div",{className:"mt-3 pt-3 border-t",children:[d.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",F.miGrupo.numero]}),d.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:F.miGrupo.integrantes.map(E=>d.jsxs("li",{className:"grid grid-cols-2 items-center",children:[d.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?d.jsxs("select",{value:E.rol||"",onChange:S=>T(F.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[d.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!D.includes(E.rol)&&d.jsx("option",{value:E.rol,children:E.rol}),D.map(S=>d.jsx("option",{value:S,children:S},S))]}):d.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},F.id)})})]})]})},w$e="proyectos_interdisciplinarios",lne="entregas_interdisciplinarias",cne=e=>{var r,n,a,i;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((i=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:i.call(a).toISOString())||t.fechaCompletado}},C$e=(e,t)=>{const r=tr(Ft(Tt,w$e),On("cursos","array-contains",e));return yr(r,n=>{const a=n.docs.map(i=>cne(i));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},E$e=(e,t)=>{const r=tr(Ft(Tt,lne),On("estudianteId","==",e));return yr(r,n=>{const a=n.docs.map(i=>cne(i));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},_$e=async e=>{try{const{id:t,...r}=e,n=br(Tt,lne,t),a={...r,fechaCompletado:Ar.fromDate(new Date(r.fechaCompletado||Date.now()))};await ro(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},S$e=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState([]),[i,s]=L.useState(null),[o,l]=L.useState(!0);L.useEffect(()=>{if(!e.curso||!e.id){l(!1);return}l(!0);const A=C$e(e.curso,r),h=E$e(e.id,m=>{a(m),l(!1)});return()=>{A(),h()}},[e.curso,e.id]);const c=async A=>{try{await _$e(A)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},u=({plan:A,tarea:h})=>{const m=L.useMemo(()=>{const B=n.find(D=>D.planificacionId===A.id&&D.tareaId===h.id);return B||{id:`${A.id}_${h.id}_${e.id}`,planificacionId:A.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[A.id,h.id,n]),[v,g]=L.useState(!1),[y,w]=L.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),T=B=>{var E;const D=(E=B.target.files)==null?void 0:E[0];D&&(alert(`Simulación: Archivo "${D.name}" listo para subir.`),c({...m,archivoAdjunto:{nombre:D.name,url:`simulated/path/${D.name}`},fechaCompletado:new Date().toISOString()}))},N=()=>{c({...m,observacionesEstudiante:y.observaciones,enlaceUrl:y.enlace,fechaCompletado:new Date().toISOString()})},F=()=>{c({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return d.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("input",{type:"checkbox",checked:m.completada,onChange:F,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),d.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&d.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),d.jsx("button",{onClick:()=>g(!v),className:"text-sm font-semibold",children:v?"Ocultar":"Entregar"})]}),v&&d.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[d.jsx("textarea",{value:y.observaciones,onChange:B=>w({...y,observaciones:B.target.value}),onBlur:N,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),d.jsx("input",{type:"url",value:y.enlace,onChange:B=>w({...y,enlace:B.target.value}),onBlur:N,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),d.jsx("input",{type:"file",onChange:T,className:"text-sm"}),m.archivoAdjunto&&d.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&d.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[d.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),d.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return o?d.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(A=>{const h=A.tareas||[],v=n.filter(y=>y.planificacionId===A.id).filter(y=>y.completada).length,g=h.length>0?v/h.length*100:0;return d.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[d.jsxs("button",{onClick:()=>s(i===A.id?null:A.id),className:"w-full text-left",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:A.nombreProyecto}),d.jsxs("div",{className:"mt-2 space-y-1",children:[d.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[d.jsx("span",{children:"Progreso"}),d.jsxs("span",{children:[Math.round(g),"%"]})]}),d.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:d.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${g}%`}})})]})]}),i===A.id&&d.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(y=>d.jsx(u,{plan:A,tarea:y},y.id)):d.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},A.id)}):d.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[d.jsx("span",{className:"text-5xl",children:"🎉"}),d.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),d.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},T$e=({data:e})=>d.jsx("div",{className:"space-y-4",children:e.map((r,n)=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),d.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),d.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:d.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),N$e=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState(!1),[i,s]=L.useState(null),[o,l]=L.useState(null),[c,u]=L.useState(ny),A=L.useCallback(async()=>{a(!0);try{const y=(await WMe(e.nombreCompleto)).sort((w,T)=>new Date(T.fecha).getTime()-new Date(w.fecha).getTime());r(y),s(null)}catch(g){console.error("Error al cargar acompañamientos desde Firestore",g),s("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=L.useCallback(async()=>{try{const g=await YMe();g&&u(g)}catch(g){console.error("Error al cargar rúbrica personalizada",g)}},[]);L.useEffect(()=>{A(),h()},[A,h]);const m=L.useMemo(()=>{if(!o)return[];const g={};return c.forEach(y=>{g[y.domain]={total:0,count:0},y.criteria.forEach(w=>{const T=o.rubricaResultados[w.name];T&&(g[y.domain].total+=T,g[y.domain].count++)})}),Object.entries(g).map(([y,w])=>({label:y,value:w.count>0?w.total/w.count:0}))},[o,c]),v=g=>{const y=new ur;y.setFont("helvetica","bold"),y.setFontSize(10),y.setTextColor(100),y.text("LICEO INDUSTRIAL DE RECOLETA",y.internal.pageSize.getWidth()/2,15,{align:"center"}),y.setFont("helvetica","bold"),y.setFontSize(16),y.setTextColor(40),y.text("Informe de Acompañamiento Docente",y.internal.pageSize.getWidth()/2,25,{align:"center"}),y.setFontSize(12),y.setFont("helvetica","normal"),sc(y,{startY:35,body:[["Docente:",g.docente],["Fecha:",new Date(g.fecha).toLocaleDateString("es-CL")],["Asignatura:",g.asignatura],["Curso:",g.curso],["Bloques:",g.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let w=y.lastAutoTable.finalY+15;if(Object.keys(g.rubricaResultados).length>0){const F=[],B=["Débil","Incipiente","Satisfactorio","Avanzado"];c.forEach(D=>{F.push([{content:D.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),D.criteria.forEach(E=>{const S=g.rubricaResultados[E.name],k=S?B[S-1]:"No evaluado";F.push([E.name,k])})}),sc(y,{startY:w,head:[["Indicador","Nivel de Logro"]],body:F,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),w=y.lastAutoTable.finalY+15}const T=(F,B)=>{if(!B)return;w>250&&(y.addPage(),w=20,y.setFont("helvetica","bold"),y.setFontSize(10),y.setTextColor(100),y.text("LICEO INDUSTRIAL DE RECOLETA",y.internal.pageSize.getWidth()/2,15,{align:"center"}),w=25),y.setFont("helvetica","bold"),y.setFontSize(14),y.setTextColor(40),y.text(F,14,w),w+=8,y.setFont("helvetica","normal"),y.setFontSize(11),y.setTextColor(60);const D=y.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);y.text(D,14,w),w+=D.length*5+10};T("Observaciones Generales",g.observacionesGenerales),T("Retroalimentación Consolidada",g.retroalimentacionConsolidada);const N=y.getNumberOfPages();for(let F=1;F<=N;F++)y.setPage(F),y.setFontSize(8),y.setTextColor(128),y.text(`Página ${F} de ${N}`,y.internal.pageSize.getWidth()/2,y.internal.pageSize.getHeight()-10,{align:"center"});y.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(g.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),d.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),d.jsxs("button",{onClick:()=>v(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[d.jsx(NY,{})," Exportar PDF"]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[d.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),d.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:d.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),d.jsx("h3",{children:"Observaciones Generales"}),d.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:d.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),d.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:d.jsx(T$e,{data:m})})]})]})]}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&d.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),i&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),!n&&t.length===0&&d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),d.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(g=>d.jsx("button",{onClick:()=>l(g),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[g.curso," - ",g.asignatura]}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(g.fecha).toLocaleDateString("es-CL"),g.bloques&&` | Bloques: ${g.bloques}`]}),Object.keys(g.rubricaResultados).length>0&&d.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(g.rubricaResultados).length," criterios"]})]}),d.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},g.id)):!n&&d.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[d.jsx("span",{className:"text-5xl",children:"👍"}),d.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},B$e=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=Ft(en,"planificaciones"),r=tr(t,an("fechaCreacion","desc"));return yr(r,a=>{const i=[];a.forEach(s=>{const o=s.data();i.push({id:s.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},k$e=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Ft(en,"planificaciones"),n=tr(r,On("userId","==",e),an("fechaCreacion","desc"));return yr(n,i=>{const s=[];i.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",s.length),t(s)},i=>{throw console.error("❌ Error al cargar planificaciones del usuario:",i),i})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function l0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function I$e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i6(e){let t,r,n;e.length!==2?(t=l0,r=(o,l)=>l0(e(o),l),n=(o,l)=>e(o)-l):(t=e===l0||e===I$e?e:F$e,r=e,n=e);function a(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const A=c+u>>>1;r(o[A],l)<0?c=A+1:u=A}while(c<u)}return c}function i(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const A=c+u>>>1;r(o[A],l)<=0?c=A+1:u=A}while(c<u)}return c}function s(o,l,c=0,u=o.length){const A=a(o,l,c,u-1);return A>c&&n(o[A-1],l)>-n(o[A],l)?A-1:A}return{left:a,center:s,right:i}}function F$e(){return 0}function une(e){return e===null?NaN:+e}function*D$e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const R$e=i6(l0),Jb=R$e.right;i6(une).center;class EV extends Map{constructor(t,r=L$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(_V(this,t))}has(t){return super.has(_V(this,t))}set(t,r){return super.set(P$e(this,t),r)}delete(t){return super.delete(M$e(this,t))}}function _V({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function P$e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function M$e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function L$e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function O$e(e=l0){if(e===l0)return dne;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function dne(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const U$e=Math.sqrt(50),j$e=Math.sqrt(10),H$e=Math.sqrt(2);function U_(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=U$e?10:i>=j$e?5:i>=H$e?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?U_(e,t,r*2):[o,l,c]}function mF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?U_(t,e,r):U_(e,t,r);if(!(i>=a))return[];const o=i-a+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(i-c)/-s;else for(let c=0;c<o;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(a+c)/-s;else for(let c=0;c<o;++c)l[c]=(a+c)*s;return l}function gF(e,t,r){return t=+t,e=+e,r=+r,U_(e,t,r)[2]}function vF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?gF(t,e,r):gF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function SV(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function TV(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function fne(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?dne:O$e(a);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,u=Math.log(l),A=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*A*(l-A)/l)*(c-l/2<0?-1:1),m=Math.max(r,Math.floor(t-c*A/l+h)),v=Math.min(n,Math.floor(t+(l-c)*A/l+h));fne(e,t,m,v,a)}const i=e[t];let s=r,o=n;for(v1(e,r,t),a(e[n],i)>0&&v1(e,r,n);s<o;){for(v1(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?v1(e,r,o):(++o,v1(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function v1(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Q$e(e,t,r){if(e=Float64Array.from(D$e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return TV(e);if(t>=1)return SV(e);var n,a=(n-1)*t,i=Math.floor(a),s=SV(fne(e,i).subarray(0,i+1)),o=TV(e.subarray(i+1));return s+(o-s)*(a-i)}}function V$e(e,t,r=une){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return s+(o-s)*(a-i)}}function z$e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}const xF=Math.PI,yF=2*xF,dp=1e-6,G$e=yF-dp;function Ane(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function q$e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ane;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class $$e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ane:q$e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,l=n-t,c=a-r,u=s-t,A=o-r,h=u*u+A*A;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>dp)if(!(Math.abs(A*l-c*u)>dp)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,v=a-o,g=l*l+c*c,y=m*m+v*v,w=Math.sqrt(g),T=Math.sqrt(h),N=i*Math.tan((xF-Math.acos((g+h-y)/(2*w*T)))/2),F=N/T,B=N/w;Math.abs(F-1)>dp&&this._append`L${t+F*u},${r+F*A}`,this._append`A${i},${i},0,0,${+(A*m>u*v)},${this._x1=t+B*l},${this._y1=r+B*c}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),l=n*Math.sin(a),c=t+o,u=r+l,A=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>dp||Math.abs(this._y1-u)>dp)&&this._append`L${c},${u}`,n&&(h<0&&(h=h%yF+yF),h>G$e?this._append`A${n},${n},0,1,${A},${t-o},${r-l}A${n},${n},0,1,${A},${this._x1=c},${this._y1=u}`:h>dp&&this._append`A${n},${n},0,${+(h>=xF)},${A},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function K$e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function j_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Dv(e){return e=j_(Math.abs(e)),e?e[1]:NaN}function W$e(e,t){return function(r,n){for(var a=r.length,i=[],s=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),i.push(r.substring(a-=o,a+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(t)}}function Y$e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var X$e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lb(e){if(!(t=X$e.exec(e)))throw new Error("invalid format: "+e);var t;return new s6({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lb.prototype=s6.prototype;function s6(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}s6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function J$e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var hne;function Z$e(e,t){var r=j_(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(hne=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+j_(e,Math.max(0,t+i-1))[0]}function NV(e,t){var r=j_(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const BV={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:K$e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>NV(e*100,t),r:NV,s:Z$e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kV(e){return e}var IV=Array.prototype.map,FV=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function eKe(e){var t=e.grouping===void 0||e.thousands===void 0?kV:W$e(IV.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?kV:Y$e(IV.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(A){A=lb(A);var h=A.fill,m=A.align,v=A.sign,g=A.symbol,y=A.zero,w=A.width,T=A.comma,N=A.precision,F=A.trim,B=A.type;B==="n"?(T=!0,B="g"):BV[B]||(N===void 0&&(N=12),F=!0,B="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var D=g==="$"?r:g==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",E=g==="$"?n:/[%p]/.test(B)?s:"",S=BV[B],k=/[defgprs%]/.test(B);N=N===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function H(P){var M=D,Q=E,V,te,W;if(B==="c")Q=S(P)+Q,P="";else{P=+P;var re=P<0||1/P<0;if(P=isNaN(P)?l:S(Math.abs(P),N),F&&(P=J$e(P)),re&&+P==0&&v!=="+"&&(re=!1),M=(re?v==="("?v:o:v==="-"||v==="("?"":v)+M,Q=(B==="s"?FV[8+hne/3]:"")+Q+(re&&v==="("?")":""),k){for(V=-1,te=P.length;++V<te;)if(W=P.charCodeAt(V),48>W||W>57){Q=(W===46?a+P.slice(V+1):P.slice(V))+Q,P=P.slice(0,V);break}}}T&&!y&&(P=t(P,1/0));var z=M.length+P.length+Q.length,X=z<w?new Array(w-z+1).join(h):"";switch(T&&y&&(P=t(X+P,X.length?w-Q.length:1/0),X=""),m){case"<":P=M+P+Q+X;break;case"=":P=M+X+P+Q;break;case"^":P=X.slice(0,z=X.length>>1)+M+P+Q+X.slice(z);break;default:P=X+M+P+Q;break}return i(P)}return H.toString=function(){return A+""},H}function u(A,h){var m=c((A=lb(A),A.type="f",A)),v=Math.max(-8,Math.min(8,Math.floor(Dv(h)/3)))*3,g=Math.pow(10,-v),y=FV[8+v/3];return function(w){return m(g*w)+y}}return{format:c,formatPrefix:u}}var mC,o6,pne;tKe({thousands:",",grouping:[3],currency:["$",""]});function tKe(e){return mC=eKe(e),o6=mC.format,pne=mC.formatPrefix,mC}function rKe(e){return Math.max(0,-Dv(Math.abs(e)))}function nKe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dv(t)/3)))*3-Dv(Math.abs(e)))}function aKe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dv(t)-Dv(e))+1}function pu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function MA(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const bF=Symbol("implicit");function qT(){var e=new EV,t=[],r=[],n=bF;function a(i){let s=e.get(i);if(s===void 0){if(n!==bF)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new EV;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return qT(t,r).unknown(n)},pu.apply(a,arguments),a}function l6(){var e=qT().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,o=!1,l=0,c=0,u=.5;delete e.unknown;function A(){var h=t().length,m=a<n,v=m?a:n,g=m?n:a;i=(g-v)/Math.max(1,h-l+c*2),o&&(i=Math.floor(i)),v+=(g-v-i*(h-l))*u,s=i*(1-l),o&&(v=Math.round(v),s=Math.round(s));var y=z$e(h).map(function(w){return v+i*w});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),A()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,A()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,A()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(o=!!h,A()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),A()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),A()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,A()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),A()):u},e.copy=function(){return l6(t(),[n,a]).round(o).paddingInner(l).paddingOuter(c).align(u)},pu.apply(A(),arguments)}function mne(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return mne(t())},e}function iKe(){return mne(l6.apply(null,arguments).paddingInner(1))}function sKe(e){return function(){return e}}function H_(e){return+e}var DV=[0,1];function Ko(e){return e}function wF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:sKe(isNaN(t)?NaN:.5)}function oKe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function lKe(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=wF(a,n),i=r(s,i)):(n=wF(n,a),i=r(i,s)),function(o){return i(n(o))}}function cKe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=wF(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(o){var l=Jb(e,o,1,n)-1;return i[l](a[l](o))}}function Zb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $T(){var e=DV,t=DV,r=cx,n,a,i,s=Ko,o,l,c;function u(){var h=Math.min(e.length,t.length);return s!==Ko&&(s=oKe(e[0],e[h-1])),o=h>2?cKe:lKe,l=c=null,A}function A(h){return h==null||isNaN(h=+h)?i:(l||(l=o(e.map(n),t,r)))(n(s(h)))}return A.invert=function(h){return s(a((c||(c=o(t,e.map(n),Gu)))(h)))},A.domain=function(h){return arguments.length?(e=Array.from(h,H_),u()):e.slice()},A.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},A.rangeRound=function(h){return t=Array.from(h),r=jP,u()},A.clamp=function(h){return arguments.length?(s=h?!0:Ko,u()):s!==Ko},A.interpolate=function(h){return arguments.length?(r=h,u()):r},A.unknown=function(h){return arguments.length?(i=h,A):i},function(h,m){return n=h,a=m,u()}}function c6(){return $T()(Ko,Ko)}function gne(e,t,r,n){var a=vF(e,t,r),i;switch(n=lb(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=nKe(a,s))&&(n.precision=i),pne(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=aKe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=rKe(a))&&(n.precision=i-(n.type==="%")*2);break}}return o6(n)}function I0(e){var t=e.domain;return e.ticks=function(r){var n=t();return mF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return gne(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],l,c,u=10;for(o<s&&(c=s,s=o,o=c,c=a,a=i,i=c);u-- >0;){if(c=gF(s,o,r),c===l)return n[a]=s,n[i]=o,t(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function vne(){var e=c6();return e.copy=function(){return Zb(e,vne())},pu.apply(e,arguments),I0(e)}function xne(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,H_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return xne(e).unknown(t)},e=arguments.length?Array.from(e,H_):[0,1],I0(r)}function yne(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function RV(e){return Math.log(e)}function PV(e){return Math.exp(e)}function uKe(e){return-Math.log(-e)}function dKe(e){return-Math.exp(-e)}function fKe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function AKe(e){return e===10?fKe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function hKe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function MV(e){return(t,r)=>-e(-t,r)}function u6(e){const t=e(RV,PV),r=t.domain;let n=10,a,i;function s(){return a=hKe(n),i=AKe(n),r()[0]<0?(a=MV(a),i=MV(i),e(uKe,dKe)):e(RV,PV),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const l=r();let c=l[0],u=l[l.length-1];const A=u<c;A&&([c,u]=[u,c]);let h=a(c),m=a(u),v,g;const y=o==null?10:+o;let w=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),c>0){for(;h<=m;++h)for(v=1;v<n;++v)if(g=h<0?v/i(-h):v*i(h),!(g<c)){if(g>u)break;w.push(g)}}else for(;h<=m;++h)for(v=n-1;v>=1;--v)if(g=h>0?v/i(-h):v*i(h),!(g<c)){if(g>u)break;w.push(g)}w.length*2<y&&(w=mF(c,u,y))}else w=mF(h,m,Math.min(m-h,y)).map(i);return A?w.reverse():w},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=lb(l)).precision==null&&(l.trim=!0),l=o6(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return u=>{let A=u/i(Math.round(a(u)));return A*n<n-.5&&(A*=n),A<=c?l(u):""}},t.nice=()=>r(yne(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function bne(){const e=u6($T()).domain([1,10]);return e.copy=()=>Zb(e,bne()).base(e.base()),pu.apply(e,arguments),e}function LV(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function OV(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function d6(e){var t=1,r=e(LV(t),OV(t));return r.constant=function(n){return arguments.length?e(LV(t=+n),OV(t)):t},I0(r)}function wne(){var e=d6($T());return e.copy=function(){return Zb(e,wne()).constant(e.constant())},pu.apply(e,arguments)}function UV(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pKe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function mKe(e){return e<0?-e*e:e*e}function f6(e){var t=e(Ko,Ko),r=1;function n(){return r===1?e(Ko,Ko):r===.5?e(pKe,mKe):e(UV(r),UV(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},I0(t)}function A6(){var e=f6($T());return e.copy=function(){return Zb(e,A6()).exponent(e.exponent())},pu.apply(e,arguments),e}function gKe(){return A6.apply(null,arguments).exponent(.5)}function jV(e){return Math.sign(e)*e*e}function vKe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Cne(){var e=c6(),t=[0,1],r=!1,n;function a(i){var s=vKe(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(jV(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,H_)).map(jV)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Cne(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},pu.apply(a,arguments),I0(a)}function Ene(){var e=[],t=[],r=[],n;function a(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=V$e(e,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[Jb(r,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(l0),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return Ene().domain(e).range(t).unknown(n)},pu.apply(i,arguments)}function _ne(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(l){return l!=null&&l<=l?a[Jb(n,l,0,r)]:i}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,o()):a.slice()},s.invertExtent=function(l){var c=a.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(i=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return _ne().domain([e,t]).range(a).unknown(i)},pu.apply(I0(s),arguments)}function Sne(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Jb(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Sne().domain(e).range(t).unknown(r)},pu.apply(a,arguments)}const C4=new Date,E4=new Date;function fs(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const l=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return l;let c;do l.push(c=new Date(+i)),t(i,o),e(i);while(c<i&&i<s);return l},a.filter=i=>fs(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(C4.setTime(+i),E4.setTime(+s),e(C4),e(E4),Math.floor(r(C4,E4))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Q_=fs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Q_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fs(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Q_);Q_.range;const sA=1e3,lu=sA*60,oA=lu*60,SA=oA*24,h6=SA*7,HV=SA*30,_4=SA*365,Ep=fs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sA)},(e,t)=>(t-e)/sA,e=>e.getUTCSeconds());Ep.range;const p6=fs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sA)},(e,t)=>{e.setTime(+e+t*lu)},(e,t)=>(t-e)/lu,e=>e.getMinutes());p6.range;const m6=fs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*lu)},(e,t)=>(t-e)/lu,e=>e.getUTCMinutes());m6.range;const g6=fs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sA-e.getMinutes()*lu)},(e,t)=>{e.setTime(+e+t*oA)},(e,t)=>(t-e)/oA,e=>e.getHours());g6.range;const v6=fs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*oA)},(e,t)=>(t-e)/oA,e=>e.getUTCHours());v6.range;const ew=fs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*lu)/SA,e=>e.getDate()-1);ew.range;const KT=fs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/SA,e=>e.getUTCDate()-1);KT.range;const Tne=fs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/SA,e=>Math.floor(e/SA));Tne.range;function Em(e){return fs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*lu)/h6)}const WT=Em(0),V_=Em(1),xKe=Em(2),yKe=Em(3),Rv=Em(4),bKe=Em(5),wKe=Em(6);WT.range;V_.range;xKe.range;yKe.range;Rv.range;bKe.range;wKe.range;function _m(e){return fs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/h6)}const YT=_m(0),z_=_m(1),CKe=_m(2),EKe=_m(3),Pv=_m(4),_Ke=_m(5),SKe=_m(6);YT.range;z_.range;CKe.range;EKe.range;Pv.range;_Ke.range;SKe.range;const x6=fs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());x6.range;const y6=fs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());y6.range;const TA=fs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());TA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});TA.range;const NA=fs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());NA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});NA.range;function Nne(e,t,r,n,a,i){const s=[[Ep,1,sA],[Ep,5,5*sA],[Ep,15,15*sA],[Ep,30,30*sA],[i,1,lu],[i,5,5*lu],[i,15,15*lu],[i,30,30*lu],[a,1,oA],[a,3,3*oA],[a,6,6*oA],[a,12,12*oA],[n,1,SA],[n,2,2*SA],[r,1,h6],[t,1,HV],[t,3,3*HV],[e,1,_4]];function o(c,u,A){const h=u<c;h&&([c,u]=[u,c]);const m=A&&typeof A.range=="function"?A:l(c,u,A),v=m?m.range(c,+u+1):[];return h?v.reverse():v}function l(c,u,A){const h=Math.abs(u-c)/A,m=i6(([,,y])=>y).right(s,h);if(m===s.length)return e.every(vF(c/_4,u/_4,A));if(m===0)return Q_.every(Math.max(vF(c,u,A),1));const[v,g]=s[h/s[m-1][2]<s[m][2]/h?m-1:m];return v.every(g)}return[o,l]}const[TKe,NKe]=Nne(NA,y6,YT,Tne,v6,m6),[BKe,kKe]=Nne(TA,x6,WT,ew,g6,p6);function S4(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function T4(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function x1(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function IKe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=y1(a),u=b1(a),A=y1(i),h=b1(i),m=y1(s),v=b1(s),g=y1(o),y=b1(o),w=y1(l),T=b1(l),N={a:re,A:z,b:X,B:K,c:null,d:$V,e:$V,f:eWe,g:uWe,G:fWe,H:XKe,I:JKe,j:ZKe,L:Bne,m:tWe,M:rWe,p:se,q:U,Q:YV,s:XV,S:nWe,u:aWe,U:iWe,V:sWe,w:oWe,W:lWe,x:null,X:null,y:cWe,Y:dWe,Z:AWe,"%":WV},F={a:Y,A:Z,b:ne,B:de,c:null,d:KV,e:KV,f:gWe,g:TWe,G:BWe,H:hWe,I:pWe,j:mWe,L:Ine,m:vWe,M:xWe,p:xe,q:Ae,Q:YV,s:XV,S:yWe,u:bWe,U:wWe,V:CWe,w:EWe,W:_We,x:null,X:null,y:SWe,Y:NWe,Z:kWe,"%":WV},B={a:H,A:P,b:M,B:Q,c:V,d:GV,e:GV,f:$Ke,g:zV,G:VV,H:qV,I:qV,j:VKe,L:qKe,m:QKe,M:zKe,p:k,q:HKe,Q:WKe,s:YKe,S:GKe,u:MKe,U:LKe,V:OKe,w:PKe,W:UKe,x:te,X:W,y:zV,Y:VV,Z:jKe,"%":KKe};N.x=D(r,N),N.X=D(n,N),N.c=D(t,N),F.x=D(r,F),F.X=D(n,F),F.c=D(t,F);function D(ae,ue){return function(le){var ie=[],De=-1,Le=0,Be=ae.length,Ce,Re,je;for(le instanceof Date||(le=new Date(+le));++De<Be;)ae.charCodeAt(De)===37&&(ie.push(ae.slice(Le,De)),(Re=QV[Ce=ae.charAt(++De)])!=null?Ce=ae.charAt(++De):Re=Ce==="e"?" ":"0",(je=ue[Ce])&&(Ce=je(le,Re)),ie.push(Ce),Le=De+1);return ie.push(ae.slice(Le,De)),ie.join("")}}function E(ae,ue){return function(le){var ie=x1(1900,void 0,1),De=S(ie,ae,le+="",0),Le,Be;if(De!=le.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(ue&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Le=T4(x1(ie.y,0,1)),Be=Le.getUTCDay(),Le=Be>4||Be===0?z_.ceil(Le):z_(Le),Le=KT.offset(Le,(ie.V-1)*7),ie.y=Le.getUTCFullYear(),ie.m=Le.getUTCMonth(),ie.d=Le.getUTCDate()+(ie.w+6)%7):(Le=S4(x1(ie.y,0,1)),Be=Le.getDay(),Le=Be>4||Be===0?V_.ceil(Le):V_(Le),Le=ew.offset(Le,(ie.V-1)*7),ie.y=Le.getFullYear(),ie.m=Le.getMonth(),ie.d=Le.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),Be="Z"in ie?T4(x1(ie.y,0,1)).getUTCDay():S4(x1(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(Be+5)%7:ie.w+ie.U*7-(Be+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,T4(ie)):S4(ie)}}function S(ae,ue,le,ie){for(var De=0,Le=ue.length,Be=le.length,Ce,Re;De<Le;){if(ie>=Be)return-1;if(Ce=ue.charCodeAt(De++),Ce===37){if(Ce=ue.charAt(De++),Re=B[Ce in QV?ue.charAt(De++):Ce],!Re||(ie=Re(ae,le,ie))<0)return-1}else if(Ce!=le.charCodeAt(ie++))return-1}return ie}function k(ae,ue,le){var ie=c.exec(ue.slice(le));return ie?(ae.p=u.get(ie[0].toLowerCase()),le+ie[0].length):-1}function H(ae,ue,le){var ie=m.exec(ue.slice(le));return ie?(ae.w=v.get(ie[0].toLowerCase()),le+ie[0].length):-1}function P(ae,ue,le){var ie=A.exec(ue.slice(le));return ie?(ae.w=h.get(ie[0].toLowerCase()),le+ie[0].length):-1}function M(ae,ue,le){var ie=w.exec(ue.slice(le));return ie?(ae.m=T.get(ie[0].toLowerCase()),le+ie[0].length):-1}function Q(ae,ue,le){var ie=g.exec(ue.slice(le));return ie?(ae.m=y.get(ie[0].toLowerCase()),le+ie[0].length):-1}function V(ae,ue,le){return S(ae,t,ue,le)}function te(ae,ue,le){return S(ae,r,ue,le)}function W(ae,ue,le){return S(ae,n,ue,le)}function re(ae){return s[ae.getDay()]}function z(ae){return i[ae.getDay()]}function X(ae){return l[ae.getMonth()]}function K(ae){return o[ae.getMonth()]}function se(ae){return a[+(ae.getHours()>=12)]}function U(ae){return 1+~~(ae.getMonth()/3)}function Y(ae){return s[ae.getUTCDay()]}function Z(ae){return i[ae.getUTCDay()]}function ne(ae){return l[ae.getUTCMonth()]}function de(ae){return o[ae.getUTCMonth()]}function xe(ae){return a[+(ae.getUTCHours()>=12)]}function Ae(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ue=D(ae+="",N);return ue.toString=function(){return ae},ue},parse:function(ae){var ue=E(ae+="",!1);return ue.toString=function(){return ae},ue},utcFormat:function(ae){var ue=D(ae+="",F);return ue.toString=function(){return ae},ue},utcParse:function(ae){var ue=E(ae+="",!0);return ue.toString=function(){return ae},ue}}}var QV={"-":"",_:" ",0:"0"},Rs=/^\s*\d+/,FKe=/^%/,DKe=/[\\^$*+?|[\]().{}]/g;function Un(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function RKe(e){return e.replace(DKe,"\\$&")}function y1(e){return new RegExp("^(?:"+e.map(RKe).join("|")+")","i")}function b1(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function PKe(e,t,r){var n=Rs.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function MKe(e,t,r){var n=Rs.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function LKe(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function OKe(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function UKe(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function VV(e,t,r){var n=Rs.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function zV(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function jKe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function HKe(e,t,r){var n=Rs.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function QKe(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function GV(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function VKe(e,t,r){var n=Rs.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function qV(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function zKe(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function GKe(e,t,r){var n=Rs.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function qKe(e,t,r){var n=Rs.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $Ke(e,t,r){var n=Rs.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function KKe(e,t,r){var n=FKe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function WKe(e,t,r){var n=Rs.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function YKe(e,t,r){var n=Rs.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function $V(e,t){return Un(e.getDate(),t,2)}function XKe(e,t){return Un(e.getHours(),t,2)}function JKe(e,t){return Un(e.getHours()%12||12,t,2)}function ZKe(e,t){return Un(1+ew.count(TA(e),e),t,3)}function Bne(e,t){return Un(e.getMilliseconds(),t,3)}function eWe(e,t){return Bne(e,t)+"000"}function tWe(e,t){return Un(e.getMonth()+1,t,2)}function rWe(e,t){return Un(e.getMinutes(),t,2)}function nWe(e,t){return Un(e.getSeconds(),t,2)}function aWe(e){var t=e.getDay();return t===0?7:t}function iWe(e,t){return Un(WT.count(TA(e)-1,e),t,2)}function kne(e){var t=e.getDay();return t>=4||t===0?Rv(e):Rv.ceil(e)}function sWe(e,t){return e=kne(e),Un(Rv.count(TA(e),e)+(TA(e).getDay()===4),t,2)}function oWe(e){return e.getDay()}function lWe(e,t){return Un(V_.count(TA(e)-1,e),t,2)}function cWe(e,t){return Un(e.getFullYear()%100,t,2)}function uWe(e,t){return e=kne(e),Un(e.getFullYear()%100,t,2)}function dWe(e,t){return Un(e.getFullYear()%1e4,t,4)}function fWe(e,t){var r=e.getDay();return e=r>=4||r===0?Rv(e):Rv.ceil(e),Un(e.getFullYear()%1e4,t,4)}function AWe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Un(t/60|0,"0",2)+Un(t%60,"0",2)}function KV(e,t){return Un(e.getUTCDate(),t,2)}function hWe(e,t){return Un(e.getUTCHours(),t,2)}function pWe(e,t){return Un(e.getUTCHours()%12||12,t,2)}function mWe(e,t){return Un(1+KT.count(NA(e),e),t,3)}function Ine(e,t){return Un(e.getUTCMilliseconds(),t,3)}function gWe(e,t){return Ine(e,t)+"000"}function vWe(e,t){return Un(e.getUTCMonth()+1,t,2)}function xWe(e,t){return Un(e.getUTCMinutes(),t,2)}function yWe(e,t){return Un(e.getUTCSeconds(),t,2)}function bWe(e){var t=e.getUTCDay();return t===0?7:t}function wWe(e,t){return Un(YT.count(NA(e)-1,e),t,2)}function Fne(e){var t=e.getUTCDay();return t>=4||t===0?Pv(e):Pv.ceil(e)}function CWe(e,t){return e=Fne(e),Un(Pv.count(NA(e),e)+(NA(e).getUTCDay()===4),t,2)}function EWe(e){return e.getUTCDay()}function _We(e,t){return Un(z_.count(NA(e)-1,e),t,2)}function SWe(e,t){return Un(e.getUTCFullYear()%100,t,2)}function TWe(e,t){return e=Fne(e),Un(e.getUTCFullYear()%100,t,2)}function NWe(e,t){return Un(e.getUTCFullYear()%1e4,t,4)}function BWe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Pv(e):Pv.ceil(e),Un(e.getUTCFullYear()%1e4,t,4)}function kWe(){return"+0000"}function WV(){return"%"}function YV(e){return+e}function XV(e){return Math.floor(+e/1e3)}var Cg,Dne,Rne;IWe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function IWe(e){return Cg=IKe(e),Dne=Cg.format,Cg.parse,Rne=Cg.utcFormat,Cg.utcParse,Cg}function FWe(e){return new Date(e)}function DWe(e){return e instanceof Date?+e:+new Date(+e)}function b6(e,t,r,n,a,i,s,o,l,c){var u=c6(),A=u.invert,h=u.domain,m=c(".%L"),v=c(":%S"),g=c("%I:%M"),y=c("%I %p"),w=c("%a %d"),T=c("%b %d"),N=c("%B"),F=c("%Y");function B(D){return(l(D)<D?m:o(D)<D?v:s(D)<D?g:i(D)<D?y:n(D)<D?a(D)<D?w:T:r(D)<D?N:F)(D)}return u.invert=function(D){return new Date(A(D))},u.domain=function(D){return arguments.length?h(Array.from(D,DWe)):h().map(FWe)},u.ticks=function(D){var E=h();return e(E[0],E[E.length-1],D??10)},u.tickFormat=function(D,E){return E==null?B:c(E)},u.nice=function(D){var E=h();return(!D||typeof D.range!="function")&&(D=t(E[0],E[E.length-1],D??10)),D?h(yne(E,D)):u},u.copy=function(){return Zb(u,b6(e,t,r,n,a,i,s,o,l,c))},u}function RWe(){return pu.apply(b6(BKe,kKe,TA,x6,WT,ew,g6,p6,Ep,Dne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PWe(){return pu.apply(b6(TKe,NKe,NA,y6,YT,KT,v6,m6,Ep,Rne).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function XT(){var e=0,t=1,r,n,a,i,s=Ko,o=!1,l;function c(A){return A==null||isNaN(A=+A)?l:s(a===0?.5:(A=(i(A)-r)*a,o?Math.max(0,Math.min(1,A)):A))}c.domain=function(A){return arguments.length?([e,t]=A,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(A){return arguments.length?(o=!!A,c):o},c.interpolator=function(A){return arguments.length?(s=A,c):s};function u(A){return function(h){var m,v;return arguments.length?([m,v]=h,s=A(m,v),c):[s(0),s(1)]}}return c.range=u(cx),c.rangeRound=u(jP),c.unknown=function(A){return arguments.length?(l=A,c):l},function(A){return i=A,r=A(e),n=A(t),a=r===n?0:1/(n-r),c}}function F0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Pne(){var e=I0(XT()(Ko));return e.copy=function(){return F0(e,Pne())},MA.apply(e,arguments)}function Mne(){var e=u6(XT()).domain([1,10]);return e.copy=function(){return F0(e,Mne()).base(e.base())},MA.apply(e,arguments)}function Lne(){var e=d6(XT());return e.copy=function(){return F0(e,Lne()).constant(e.constant())},MA.apply(e,arguments)}function w6(){var e=f6(XT());return e.copy=function(){return F0(e,w6()).exponent(e.exponent())},MA.apply(e,arguments)}function MWe(){return w6.apply(null,arguments).exponent(.5)}function One(){var e=[],t=Ko;function r(n){if(n!=null&&!isNaN(n=+n))return t((Jb(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(l0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Q$e(e,i/n))},r.copy=function(){return One(t).domain(e)},MA.apply(r,arguments)}function JT(){var e=0,t=.5,r=1,n=1,a,i,s,o,l,c=Ko,u,A=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-i)*(n*g<n*i?o:l),c(A?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=u(e=+e),i=u(t=+t),s=u(r=+r),o=a===i?0:.5/(i-a),l=i===s?0:.5/(s-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(A=!!g,m):A},m.interpolator=function(g){return arguments.length?(c=g,m):c};function v(g){return function(y){var w,T,N;return arguments.length?([w,T,N]=y,c=C9e(g,[w,T,N]),m):[c(0),c(.5),c(1)]}}return m.range=v(cx),m.rangeRound=v(jP),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return u=g,a=g(e),i=g(t),s=g(r),o=a===i?0:.5/(i-a),l=i===s?0:.5/(s-i),n=i<a?-1:1,m}}function Une(){var e=I0(JT()(Ko));return e.copy=function(){return F0(e,Une())},MA.apply(e,arguments)}function jne(){var e=u6(JT()).domain([.1,1,10]);return e.copy=function(){return F0(e,jne()).base(e.base())},MA.apply(e,arguments)}function Hne(){var e=d6(JT());return e.copy=function(){return F0(e,Hne()).constant(e.constant())},MA.apply(e,arguments)}function C6(){var e=f6(JT());return e.copy=function(){return F0(e,C6()).exponent(e.exponent())},MA.apply(e,arguments)}function LWe(){return C6.apply(null,arguments).exponent(.5)}function OWe(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const UWe=OWe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function wa(e){return function(){return e}}const Qne=Math.cos,G_=Math.sin,od=Math.sqrt,q_=Math.PI,ZT=2*q_;function E6(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new $$e(t)}function _6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vne(e){this._context=e}Vne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function e5(e){return new Vne(e)}function zne(e){return e[0]}function Gne(e){return e[1]}function qne(e,t){var r=wa(!0),n=null,a=e5,i=null,s=E6(o);e=typeof e=="function"?e:e===void 0?zne:wa(e),t=typeof t=="function"?t:t===void 0?Gne:wa(t);function o(l){var c,u=(l=_6(l)).length,A,h=!1,m;for(n==null&&(i=a(m=s())),c=0;c<=u;++c)!(c<u&&r(A=l[c],c,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(A,c,l),+t(A,c,l));if(m)return i=null,m+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:wa(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:wa(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:wa(!!l),o):r},o.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),o):a},o.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),o):n},o}function gC(e,t,r){var n=null,a=wa(!0),i=null,s=e5,o=null,l=E6(c);e=typeof e=="function"?e:e===void 0?zne:wa(+e),t=typeof t=="function"?t:wa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Gne:wa(+r);function c(A){var h,m,v,g=(A=_6(A)).length,y,w=!1,T,N=new Array(g),F=new Array(g);for(i==null&&(o=s(T=l())),h=0;h<=g;++h){if(!(h<g&&a(y=A[h],h,A))===w)if(w=!w)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=h-1;v>=m;--v)o.point(N[v],F[v]);o.lineEnd(),o.areaEnd()}w&&(N[h]=+e(y,h,A),F[h]=+t(y,h,A),o.point(n?+n(y,h,A):N[h],r?+r(y,h,A):F[h]))}if(T)return o=null,T+""||null}function u(){return qne().defined(a).curve(s).context(i)}return c.x=function(A){return arguments.length?(e=typeof A=="function"?A:wa(+A),n=null,c):e},c.x0=function(A){return arguments.length?(e=typeof A=="function"?A:wa(+A),c):e},c.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:wa(+A),c):n},c.y=function(A){return arguments.length?(t=typeof A=="function"?A:wa(+A),r=null,c):t},c.y0=function(A){return arguments.length?(t=typeof A=="function"?A:wa(+A),c):t},c.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:wa(+A),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(A){return arguments.length?(a=typeof A=="function"?A:wa(!!A),c):a},c.curve=function(A){return arguments.length?(s=A,i!=null&&(o=s(i)),c):s},c.context=function(A){return arguments.length?(A==null?i=o=null:o=s(i=A),c):i},c}class $ne{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function jWe(e){return new $ne(e,!0)}function HWe(e){return new $ne(e,!1)}const S6={draw(e,t){const r=od(t/q_);e.moveTo(r,0),e.arc(0,0,r,0,ZT)}},QWe={draw(e,t){const r=od(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Kne=od(1/3),VWe=Kne*2,zWe={draw(e,t){const r=od(t/VWe),n=r*Kne;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},GWe={draw(e,t){const r=od(t),n=-r/2;e.rect(n,n,r,r)}},qWe=.8908130915292852,Wne=G_(q_/10)/G_(7*q_/10),$We=G_(ZT/10)*Wne,KWe=-Qne(ZT/10)*Wne,WWe={draw(e,t){const r=od(t*qWe),n=$We*r,a=KWe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=ZT*i/5,o=Qne(s),l=G_(s);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*a,l*n+o*a)}e.closePath()}},N4=od(3),YWe={draw(e,t){const r=-od(t/(N4*3));e.moveTo(0,r*2),e.lineTo(-N4*r,-r),e.lineTo(N4*r,-r),e.closePath()}},Qc=-.5,Vc=od(3)/2,CF=1/od(12),XWe=(CF/2+1)*3,JWe={draw(e,t){const r=od(t/XWe),n=r/2,a=r*CF,i=n,s=r*CF+r,o=-i,l=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,l),e.lineTo(Qc*n-Vc*a,Vc*n+Qc*a),e.lineTo(Qc*i-Vc*s,Vc*i+Qc*s),e.lineTo(Qc*o-Vc*l,Vc*o+Qc*l),e.lineTo(Qc*n+Vc*a,Qc*a-Vc*n),e.lineTo(Qc*i+Vc*s,Qc*s-Vc*i),e.lineTo(Qc*o+Vc*l,Qc*l-Vc*o),e.closePath()}};function ZWe(e,t){let r=null,n=E6(a);e=typeof e=="function"?e:wa(e||S6),t=typeof t=="function"?t:wa(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:wa(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:wa(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function $_(){}function K_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Yne(e){this._context=e}Yne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:K_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:K_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eYe(e){return new Yne(e)}function Xne(e){this._context=e}Xne.prototype={areaStart:$_,areaEnd:$_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:K_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tYe(e){return new Xne(e)}function Jne(e){this._context=e}Jne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:K_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rYe(e){return new Jne(e)}function Zne(e){this._context=e}Zne.prototype={areaStart:$_,areaEnd:$_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nYe(e){return new Zne(e)}function JV(e){return e<0?-1:1}function ZV(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(JV(i)+JV(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function ez(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function B4(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function W_(e){this._context=e}W_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:B4(this,this._t0,ez(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,B4(this,ez(this,r=ZV(this,e,t)),r);break;default:B4(this,this._t0,r=ZV(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function eae(e){this._context=new tae(e)}(eae.prototype=Object.create(W_.prototype)).point=function(e,t){W_.prototype.point.call(this,t,e)};function tae(e){this._context=e}tae.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function aYe(e){return new W_(e)}function iYe(e){return new eae(e)}function rae(e){this._context=e}rae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=tz(e),a=tz(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tz(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function sYe(e){return new rae(e)}function t5(e,t){this._context=e,this._t=t}t5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function oYe(e){return new t5(e,.5)}function lYe(e){return new t5(e,0)}function cYe(e){return new t5(e,1)}function Mv(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,o=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function EF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function uYe(e,t){return e[t]}function dYe(e){const t=[];return t.key=e,t}function fYe(){var e=wa([]),t=EF,r=Mv,n=uYe;function a(i){var s=Array.from(e.apply(this,arguments),dYe),o,l=s.length,c=-1,u;for(const A of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(A,s[o].key,c,i)]).data=A;for(o=0,u=_6(t(s));o<l;++o)s[u[o]].index=o;return r(s,u),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:wa(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:wa(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?EF:typeof i=="function"?i:wa(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Mv,a):r},a}function AYe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}Mv(e,t)}}function hYe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,o=0;s<a;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Mv(e,t)}}function pYe(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var o=0,l=0,c=0;o<s;++o){for(var u=e[t[o]],A=u[n][1]||0,h=u[n-1][1]||0,m=(A-h)/2,v=0;v<o;++v){var g=e[t[v]],y=g[n][1]||0,w=g[n-1][1]||0;m+=y-w}l+=A,c+=m*A}a[n-1][1]+=a[n-1][0]=r,l&&(r-=c/l)}a[n-1][1]+=a[n-1][0]=r,Mv(e,t)}}var mYe={value:function(){}};function nae(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new cE(r)}function cE(e){this._=e}function gYe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}cE.prototype=nae.prototype={constructor:cE,on:function(e,t){var r=this._,n=gYe(e+"",r),a,i=-1,s=n.length;if(arguments.length<2){for(;++i<s;)if((a=(e=n[i]).type)&&(a=vYe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(a=(e=n[i]).type)r[a]=rz(r[a],e.name,t);else if(t==null)for(a in r)r[a]=rz(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new cE(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function vYe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function rz(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=mYe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const xYe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:nae},Symbol.toStringTag,{value:"Module"})),yYe=Ece(xYe);var k4,nz;function bYe(){if(nz)return k4;nz=1;const e=yYe.dispatch,t=Math.PI/180,r={archimedean:g,rectangular:y},n=64,a=2048;k4=function(){var F=[256,256],B=i,D=s,E=l,S=o,k=o,H=c,P=u,M=g,Q=[],V=1/0,te=e("word","end"),W=null,re=Math.random,z={},X=T;z.canvas=function(U){return arguments.length?(X=N(U),z):X},z.start=function(){var U=K(X()),Y=w((F[0]>>5)*F[1]),Z=null,ne=Q.length,de=-1,xe=[],Ae=Q.map(function(ue,le){return ue.text=B.call(this,ue,le),ue.font=D.call(this,ue,le),ue.style=S.call(this,ue,le),ue.weight=k.call(this,ue,le),ue.rotate=H.call(this,ue,le),ue.size=~~E.call(this,ue,le),ue.padding=P.call(this,ue,le),ue}).sort(function(ue,le){return le.size-ue.size});return W&&clearInterval(W),W=setInterval(ae,0),ae(),z;function ae(){for(var ue=Date.now();Date.now()-ue<V&&++de<ne&&W;){var le=Ae[de];le.x=F[0]*(re()+.5)>>1,le.y=F[1]*(re()+.5)>>1,A(U,le,Ae,de),le.hasText&&se(Y,le,Z)&&(xe.push(le),te.call("word",z,le),Z?m(Z,le):Z=[{x:le.x+le.x0,y:le.y+le.y0},{x:le.x+le.x1,y:le.y+le.y1}],le.x-=F[0]>>1,le.y-=F[1]>>1)}de>=ne&&(z.stop(),te.call("end",z,xe,Z))}},z.stop=function(){W&&(clearInterval(W),W=null);for(const U of Q)delete U.sprite;return z};function K(U){const Y=U.getContext("2d",{willReadFrequently:!0});U.width=U.height=1;const Z=Math.sqrt(Y.getImageData(0,0,1,1).data.length>>2);return U.width=(n<<5)/Z,U.height=a/Z,Y.fillStyle=Y.strokeStyle="red",{context:Y,ratio:Z}}function se(U,Y,Z){F[0],F[1];for(var ne=Y.x,de=Y.y,xe=Math.sqrt(F[0]*F[0]+F[1]*F[1]),Ae=M(F),ae=re()<.5?1:-1,ue=-ae,le,ie,De;(le=Ae(ue+=ae))&&(ie=~~le[0],De=~~le[1],!(Math.min(Math.abs(ie),Math.abs(De))>=xe));)if(Y.x=ne+ie,Y.y=de+De,!(Y.x+Y.x0<0||Y.y+Y.y0<0||Y.x+Y.x1>F[0]||Y.y+Y.y1>F[1])&&(!Z||v(Y,Z))&&!h(Y,U,F[0])){for(var Le=Y.sprite,Be=Y.width>>5,Ce=F[0]>>5,Re=Y.x-(Be<<4),je=Re&127,We=32-je,ct=Y.y1-Y.y0,wt=(Y.y+Y.y0)*Ce+(Re>>5),ot,Rt=0;Rt<ct;Rt++){ot=0;for(var Pt=0;Pt<=Be;Pt++)U[wt+Pt]|=ot<<We|(Pt<Be?(ot=Le[Rt*Be+Pt])>>>je:0);wt+=Ce}return!0}return!1}return z.timeInterval=function(U){return arguments.length?(V=U??1/0,z):V},z.words=function(U){return arguments.length?(Q=U,z):Q},z.size=function(U){return arguments.length?(F=[+U[0],+U[1]],z):F},z.font=function(U){return arguments.length?(D=N(U),z):D},z.fontStyle=function(U){return arguments.length?(S=N(U),z):S},z.fontWeight=function(U){return arguments.length?(k=N(U),z):k},z.rotate=function(U){return arguments.length?(H=N(U),z):H},z.text=function(U){return arguments.length?(B=N(U),z):B},z.spiral=function(U){return arguments.length?(M=r[U]||U,z):M},z.fontSize=function(U){return arguments.length?(E=N(U),z):E},z.padding=function(U){return arguments.length?(P=N(U),z):P},z.random=function(U){return arguments.length?(re=U,z):re},z.on=function(){var U=te.on.apply(te,arguments);return U===te?z:U},z};function i(F){return F.text}function s(){return"serif"}function o(){return"normal"}function l(F){return Math.sqrt(F.value)}function c(){return(~~(random()*6)-3)*30}function u(){return 1}function A(F,B,D,E){if(!B.sprite){var S=F.context,k=F.ratio;S.clearRect(0,0,(n<<5)/k,a/k);var H=0,P=0,M=0,Q=D.length;for(--E;++E<Q;){B=D[E],S.save(),S.font=B.style+" "+B.weight+" "+~~((B.size+1)/k)+"px "+B.font;const le=S.measureText(B.text),ie=-Math.floor(le.width/2);let De=(le.width+1)*k,Le=B.size<<1;if(B.rotate){var V=Math.sin(B.rotate*t),te=Math.cos(B.rotate*t),W=De*te,re=De*V,z=Le*te,X=Le*V;De=Math.max(Math.abs(W+X),Math.abs(W-X))+31>>5<<5,Le=~~Math.max(Math.abs(re+z),Math.abs(re-z))}else De=De+31>>5<<5;if(Le>M&&(M=Le),H+De>=n<<5&&(H=0,P+=M,M=0),P+Le>=a)break;S.translate((H+(De>>1))/k,(P+(Le>>1))/k),B.rotate&&S.rotate(B.rotate*t),S.fillText(B.text,ie,0),B.padding&&(S.lineWidth=2*B.padding,S.strokeText(B.text,ie,0)),S.restore(),B.width=De,B.height=Le,B.xoff=H,B.yoff=P,B.x1=De>>1,B.y1=Le>>1,B.x0=-B.x1,B.y0=-B.y1,B.hasText=!0,H+=De}for(var K=S.getImageData(0,0,(n<<5)/k,a/k).data,se=[];--E>=0;)if(B=D[E],!!B.hasText){for(var U=B.width,Y=U>>5,Z=B.y1-B.y0,ne=0;ne<Z*Y;ne++)se[ne]=0;if(H=B.xoff,H==null)return;P=B.yoff;for(var de=0,xe=-1,Ae=0;Ae<Z;Ae++){for(var ne=0;ne<U;ne++){var ae=Y*Ae+(ne>>5),ue=K[(P+Ae)*(n<<5)+(H+ne)<<2]?1<<31-ne%32:0;se[ae]|=ue,de|=ue}de?xe=Ae:(B.y0++,Z--,Ae--,P++)}B.y1=B.y0+xe,B.sprite=se.slice(0,(B.y1-B.y0)*Y)}}}function h(F,B,D){D>>=5;for(var E=F.sprite,S=F.width>>5,k=F.x-(S<<4),H=k&127,P=32-H,M=F.y1-F.y0,Q=(F.y+F.y0)*D+(k>>5),V,te=0;te<M;te++){V=0;for(var W=0;W<=S;W++)if((V<<P|(W<S?(V=E[te*S+W])>>>H:0))&B[Q+W])return!0;Q+=D}return!1}function m(F,B){var D=F[0],E=F[1];B.x+B.x0<D.x&&(D.x=B.x+B.x0),B.y+B.y0<D.y&&(D.y=B.y+B.y0),B.x+B.x1>E.x&&(E.x=B.x+B.x1),B.y+B.y1>E.y&&(E.y=B.y+B.y1)}function v(F,B){return F.x+F.x1>B[0].x&&F.x+F.x0<B[1].x&&F.y+F.y1>B[0].y&&F.y+F.y0<B[1].y}function g(F){var B=F[0]/F[1];return function(D){return[B*(D*=.1)*Math.cos(D),D*Math.sin(D)]}}function y(F){var B=4,D=B*F[0]/F[1],E=0,S=0;return function(k){var H=k<0?-1:1;switch(Math.sqrt(1+4*H*k)-H&3){case 0:E+=D;break;case 1:S+=B;break;case 2:E-=D;break;default:S-=B;break}return[E,S]}}function w(F){for(var B=[],D=-1;++D<F;)B[D]=0;return B}function T(){return document.createElement("canvas")}function N(F){return typeof F=="function"?F:function(){return F}}return k4}var wYe=bYe();const CYe=mc(wYe),EYe=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),_Ye=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),SYe=()=>d.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),TYe=e=>{const[t,r]=L.useState([]),[n,a]=L.useState(!0),[i,s]=L.useState(null),o=L.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return L.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){s("Usuario no autenticado"),a(!1);return}try{let l;const c=u=>{r(u),a(!1),s(null)};if(o)l=B$e(c);else{const u=e.email||e.id||"";l=k$e(c,u)}return l}catch(l){s(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:i,canViewAllPlans:o}},NYe=({plan:e,onClose:t})=>d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[d.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),d.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:d.jsx(_Ye,{})})]}),d.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[d.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),d.jsxs("p",{className:"mt-2",children:[d.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),d.jsx("div",{className:"mt-3",children:d.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),d.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),d.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>d.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[d.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[d.jsxs("span",{children:[d.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),d.jsxs("span",{children:[d.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?d.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>d.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[d.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),az=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],BYe=["1º Medio","2º Medio","3º Medio","4º Medio"],kYe=({words:e})=>{const t=L.useRef(null);return L.useEffect(()=>{if(!e.length||!t.current)return;const r=nu(t.current);r.selectAll("*").remove();const n=CYe().size([500,350]).words(e.map(i=>({...i}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(i=>Math.sqrt(i.value)*12).on("end",a);n.start();function a(i){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(i).enter().append("text").style("font-size",s=>`${s.size}px`).style("font-family","Impact").style("fill",(s,o)=>qT(UWe)(o.toString())).attr("text-anchor","middle").attr("transform",s=>`translate(${[s.x,s.y]})rotate(${s.rotate})`).text(s=>s.text)}},[e]),d.jsx("svg",{ref:t})},IYe=({planificaciones:e})=>{const[t,r]=L.useState("todos"),[n,a]=L.useState("todos"),i=L.useMemo(()=>["todos",...Array.from(new Set(e.map(u=>u.asignatura)))],[e]),s=L.useMemo(()=>e.filter(u=>(t==="todos"||u.nivel===t)&&(n==="todos"||u.asignatura===n)&&u.reflexionUnidad),[e,t,n]),o=L.useMemo(()=>{const u=az.reduce((A,h)=>({...A,[h]:0}),{});return s.forEach(A=>{var h,m;return(m=(h=A.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((v,g)=>{u[v]!==void 0&&(u[v]+=az.length-g)})}),Object.entries(u).map(([A,h])=>({text:A,value:h})).sort((A,h)=>h.value-A.value)},[s]),l=L.useMemo(()=>{const u=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(s.map(m=>{var v,g;return`${((v=m.reflexionUnidad)==null?void 0:v.fortalezas)||""} ${((g=m.reflexionUnidad)==null?void 0:g.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,v)=>(u.has(v)||(m[v]=(m[v]||0)+1),m),{});return Object.entries(h).map(([m,v])=>({text:m,value:v})).sort((m,v)=>v.value-m.value).slice(0,50)},[s]),c="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return d.jsxs("div",{className:"animate-fade-in",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),d.jsxs("select",{value:t,onChange:u=>r(u.target.value),className:c,children:[d.jsx("option",{value:"todos",children:"Todos los Niveles"}),BYe.map(u=>d.jsx("option",{value:u,children:u},u))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),d.jsx("select",{value:n,onChange:u=>a(u.target.value),className:c,children:i.map(u=>d.jsx("option",{value:u,children:u==="todos"?"Todas las Asignaturas":u},u))})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(u=>u.value===0)?d.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):d.jsx("ul",{className:"space-y-3",children:o.map((u,A)=>d.jsxs("li",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:A+1}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:u.text}),d.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:d.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${u.value/(o[0].value||1)*100}%`}})})]})]},u.text))})]}),d.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?d.jsx(kYe,{words:l}):d.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},FYe=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=TYe(e),[i,s]=L.useState("seguimiento"),[o,l]=L.useState("1º"),[c,u]=L.useState(null),[A,h]=L.useState(null),m=L.useMemo(()=>{const y={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(w=>w.nivel===y[o]&&w.tipo==="Unidad")},[t,o]),v=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{children:"Usuario no autenticado."})});if(r)return d.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[d.jsx(SYe,{}),d.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return d.jsx("div",{className:"text-center py-8",children:d.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const g=()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:d.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:v.map(y=>d.jsx("button",{onClick:()=>l(y.key),className:`${o===y.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:y.label},y.key))})}),m.length===0?d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):d.jsx("div",{className:"space-y-4",children:cc.map(y=>{const w=m.filter(N=>N.asignatura===y);if(w.length===0)return null;const T=c===y;return d.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[d.jsxs("button",{onClick:()=>u(T?null:y),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:y}),d.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[w.length," unidad",w.length>1?"es":""]})]}),d.jsx("span",{className:`transform transition-transform ${T?"rotate-180":""}`,children:d.jsx(EYe,{})})]}),T&&d.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:d.jsx("ul",{className:"space-y-3",children:w.map(N=>d.jsx("li",{children:d.jsxs("button",{onClick:()=>h(N),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[d.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:N.nombreUnidad}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",N.autor||"N/A"]})]})},N.id))})})]},y)})})]});return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&d.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),d.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:d.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[d.jsx("button",{onClick:()=>s("seguimiento"),className:`${i==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),d.jsx("button",{onClick:()=>s("analisis"),className:`${i==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),i==="seguimiento"&&g(),i==="analisis"&&d.jsx(IYe,{planificaciones:t.filter(y=>y.tipo==="Unidad")})]}),A&&d.jsx(NYe,{plan:A,onClose:()=>h(null)})]})},r5="analisisTaxonomicos",DYe=async()=>{try{const e=tr(Ft(en,r5),an("uploadDate","desc"));return(await $i(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},RYe=async e=>{if(!e)return[];try{const t=tr(Ft(en,r5),On("userId","==",e),an("uploadDate","desc"));return(await $i(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},PYe=async e=>{try{return{id:(await Da(Ft(en,r5),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},MYe=async e=>{try{const t=br(en,r5,e);await Fs(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},I4=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],iz={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},LYe=()=>d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),sz=({currentUser:e})=>{const[t,r]=L.useState([]),[n,a]=L.useState(!1),[i,s]=L.useState(null),[o,l]=L.useState(null),[c,u]=L.useState(""),[A,h]=L.useState(!1),[m,v]=L.useState(null),[g,y]=L.useState(null),w=L.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const D=e.profile==="SUBDIRECCION"?await DYe():await RYe(e.id);r(D),s(null)}catch(D){console.error("Error al cargar análisis:",D),s("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);L.useEffect(()=>{w()},[w]);const T=async D=>{var S;const E=(S=D.target.files)==null?void 0:S[0];if(E){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(E.type)){s("Por favor, suba un archivo PDF o DOCX válido.");return}v(E),u(E.name),s(null);const H=new FileReader;H.onloadend=()=>{var M;const P=(M=H.result)==null?void 0:M.split(",")[1];if(!P){s("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),y(null);return}y({mimeType:E.type,data:P})},H.onerror=()=>s("Error al leer el archivo."),H.readAsDataURL(E)}},N=async()=>{if(!c.trim()||!g){s("Debe subir un documento y asignarle un nombre para analizar.");return}h(!0),s(null);const D=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,E={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:I4}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:I4.reduce((S,k)=>({...S,[k]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{yA("Análisis Taxonómico",e);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new Wi(S).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:E}}),P={inlineData:{mimeType:g.mimeType,data:g.data}},Q=(await H.generateContent([D,P])).response.text();let V;try{V=JSON.parse(Q)}catch(re){throw console.error("Error al parsear JSON:",re),console.error("Respuesta recibida (no es JSON válido):",Q),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const te={documentName:c,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:V.analysisResults,summary:V.summary},W=await PYe(te);await w(),l(W),u(""),v(null),y(null)}catch(S){console.error(S);const k=S instanceof Error?S.message:"Hubo un error al analizar el documento.";s(k)}finally{h(!1)}},F=async D=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await MYe(D),await w(),(o==null?void 0:o.id)===D&&l(null)}catch{s("No se pudo eliminar el análisis.")}},B=L.useMemo(()=>o?Object.values(o.summary).reduce((D,E)=>D+(E||0),0):0,[o]);return d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),i&&d.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),d.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:d.jsxs("div",{className:"space-y-1 text-center",children:[d.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:d.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),d.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[d.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[d.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:T,accept:".pdf,.doc,.docx"}),d.jsx("span",{children:"Cargue un archivo"})]}),d.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),d.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),d.jsx("input",{type:"text",id:"documentName",value:c,onChange:D=>u(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),d.jsx("button",{onClick:N,disabled:A||!g,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:A?d.jsx(LYe,{}):"Analizar con IA"})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?d.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?d.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(D=>d.jsxs("button",{onClick:()=>l(D),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===D.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[d.jsx("p",{className:"font-semibold truncate",children:D.documentName}),d.jsx("p",{className:"text-xs text-slate-500",children:new Date(D.uploadDate).toLocaleString("es-CL")})]},D.id))})]})]}),d.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),d.jsx("button",{onClick:()=>F(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",B," preguntas)"]}),d.jsx("div",{className:"space-y-3",children:I4.map(D=>{const E=o.summary[D]||0,S=B>0?E/B*100:0;return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[d.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),d.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[E," (",S.toFixed(0),"%)"]})]}),d.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:d.jsx("div",{className:`${iz[D]} h-4 rounded-full`,style:{width:`${S}%`}})})]},D)})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),d.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:d.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),d.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((D,E)=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:D.question}),d.jsx("td",{className:"px-4 py-3 text-sm",children:d.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${iz[D.habilidadBloom]}`,children:D.habilidadBloom})})]},E))})]})})]})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[d.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),d.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},Y_="empresas_practicas",aae="usuarios",T6=e=>{const t=e.data();return{id:e.id,...t}};async function OYe(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:(console.warn("Geocodificación no exitosa:",a.status),null)}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const UYe=e=>{const t=tr(Ft(Tt,Y_),an("nombre","asc"));return yr(t,r=>{const n=r.docs.map(a=>T6(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},jYe=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await OYe(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,i=br(Tt,Y_,n);return await ro(i,a,{merge:!0}),n}else return(await Da(Ft(Tt,Y_),{...r,createdAt:Vpe()})).id},HYe=async e=>{const t=br(Tt,Y_,e);await Fs(t)},QYe=e=>{const t=tr(Ft(Tt,aae),On("profile","==",Ht.ESTUDIANTE),an("nombreCompleto","asc"));return yr(t,r=>{const n=r.docs.map(a=>T6(a));e(n)},r=>console.error("Error al suscribirse a estudiantes:",r))},VYe=e=>{const t=tr(Ft(Tt,aae),On("profile","==","PROFESORADO"),an("nombreCompleto","asc"));return yr(t,r=>{const n=r.docs.map(a=>T6(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Up=function(){return Up=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Up.apply(this,arguments)};function zYe(e,t,r,n){return new(r||(r=Promise))(function(a,i){function s(c){try{l(n.next(c))}catch(u){i(u)}}function o(c){try{l(n.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?a(c.value):(u=c.value,u instanceof r?u:new r(function(A){A(u)})).then(s,o)}l((n=n.apply(e,[])).next())})}function GYe(e,t){var r,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&u[0]?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!((a=a.length>0&&a[a.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){s.label=u[1];break}if(u[0]===6&&s.label<a[1]){s.label=a[1],a=u;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(u);break}a[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(A){u=[6,A],n=0}finally{r=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}function Tr(){return Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tr.apply(this,arguments)}function jp(e){return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function iae(e){var t=function(r,n){if(jp(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var i=a.call(r,n);if(jp(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return jp(t)==="symbol"?t:String(t)}function Qg(e,t,r){return(t=iae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(r),!0).forEach(function(n){Qg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iae(n.key),n)}}function _F(e,t){return _F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},_F(e,t)}function X_(e){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X_(e)}function qYe(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function $Ye(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=X_(e);if(t){var a=X_(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return qYe(this,r)}}function SF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sae(e,t){if(e){if(typeof e=="string")return SF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?SF(e,t):void 0}}function N6(e){return function(t){if(Array.isArray(t))return SF(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||sae(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var KYe=function(){function e(r){var n=this;this._insertTag=function(a){var i;i=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,i),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(i){var s=document.createElement("style");return s.setAttribute("data-emotion",i.key),i.nonce!==void 0&&s.setAttribute("nonce",i.nonce),s.appendChild(document.createTextNode("")),s.setAttribute("data-s",""),s}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(i){if(i.sheet)return i.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===i)return document.styleSheets[s]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),zc="-ms-",cz="-moz-",Qn="-webkit-",B6="decl",oae="@keyframes",WYe=Math.abs,n5=String.fromCharCode,YYe=Object.assign;function lae(e){return e.trim()}function $n(e,t,r){return e.replace(t,r)}function TF(e,t){return e.indexOf(t)}function qs(e,t){return 0|e.charCodeAt(t)}function cb(e,t,r){return e.slice(t,r)}function qd(e){return e.length}function k6(e){return e.length}function vC(e,t){return t.push(e),e}var a5=1,Lv=1,cae=0,Sl=0,zi=0,ux="";function i5(e,t,r,n,a,i,s){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:a5,column:Lv,length:s,return:""}}function w1(e,t){return YYe(i5("",null,null,"",null,null,0),e,{length:-e.length},t)}function oc(){return zi=Sl<cae?qs(ux,Sl++):0,Lv++,zi===10&&(Lv=1,a5++),zi}function lf(){return qs(ux,Sl)}function uE(){return Sl}function tw(e,t){return cb(ux,e,t)}function ub(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function uae(e){return a5=Lv=1,cae=qd(ux=e),Sl=0,[]}function dae(e){return ux="",e}function dE(e){return lae(tw(Sl-1,NF(e===91?e+2:e===40?e+1:e)))}function XYe(e){for(;(zi=lf())&&zi<33;)oc();return ub(e)>2||ub(zi)>3?"":" "}function JYe(e,t){for(;--t&&oc()&&!(zi<48||zi>102||zi>57&&zi<65||zi>70&&zi<97););return tw(e,uE()+(t<6&&lf()==32&&oc()==32))}function NF(e){for(;oc();)switch(zi){case e:return Sl;case 34:case 39:e!==34&&e!==39&&NF(zi);break;case 40:e===41&&NF(e);break;case 92:oc()}return Sl}function ZYe(e,t){for(;oc()&&e+zi!==57&&(e+zi!==84||lf()!==47););return"/*"+tw(t,Sl-1)+"*"+n5(e===47?e:oc())}function eXe(e){for(;!ub(lf());)oc();return tw(e,Sl)}function uz(e){return dae(fE("",null,null,null,[""],e=uae(e),0,[0],e))}function fE(e,t,r,n,a,i,s,o,l){for(var c=0,u=0,A=s,h=0,m=0,v=0,g=1,y=1,w=1,T=0,N="",F=a,B=i,D=n,E=N;y;)switch(v=T,T=oc()){case 40:if(v!=108&&qs(E,A-1)==58){TF(E+=$n(dE(T),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:E+=dE(T);break;case 9:case 10:case 13:case 32:E+=XYe(v);break;case 92:E+=JYe(uE()-1,7);continue;case 47:switch(lf()){case 42:case 47:vC(tXe(ZYe(oc(),uE()),t,r),l);break;default:E+="/"}break;case 123*g:o[c++]=qd(E)*w;case 125*g:case 59:case 0:switch(T){case 0:case 125:y=0;case 59+u:m>0&&qd(E)-A&&vC(m>32?fz(E+";",n,r,A-1):fz($n(E," ","")+";",n,r,A-2),l);break;case 59:E+=";";default:if(vC(D=dz(E,t,r,c,u,a,o,N,F=[],B=[],A),i),T===123)if(u===0)fE(E,t,D,D,F,i,A,o,B);else switch(h===99&&qs(E,3)===110?100:h){case 100:case 109:case 115:fE(e,D,D,n&&vC(dz(e,D,D,0,0,a,o,N,a,F=[],A),B),a,B,A,o,n?F:B);break;default:fE(E,D,D,D,[""],B,0,o,B)}}c=u=m=0,g=w=1,N=E="",A=s;break;case 58:A=1+qd(E),m=v;default:if(g<1){if(T==123)--g;else if(T==125&&g++==0&&(zi=Sl>0?qs(ux,--Sl):0,Lv--,zi===10&&(Lv=1,a5--),zi==125))continue}switch(E+=n5(T),T*g){case 38:w=u>0?1:(E+="\f",-1);break;case 44:o[c++]=(qd(E)-1)*w,w=1;break;case 64:lf()===45&&(E+=dE(oc())),h=lf(),u=A=qd(N=E+=eXe(uE())),T++;break;case 45:v===45&&qd(E)==2&&(g=0)}}return i}function dz(e,t,r,n,a,i,s,o,l,c,u){for(var A=a-1,h=a===0?i:[""],m=k6(h),v=0,g=0,y=0;v<n;++v)for(var w=0,T=cb(e,A+1,A=WYe(g=s[v])),N=e;w<m;++w)(N=lae(g>0?h[w]+" "+T:$n(T,/&\f/g,h[w])))&&(l[y++]=N);return i5(e,t,r,a===0?"rule":o,l,c,u)}function tXe(e,t,r){return i5(e,t,r,"comm",n5(zi),cb(e,2,-2),0)}function fz(e,t,r,n){return i5(e,t,r,B6,cb(e,0,n),cb(e,n+1,-1),n)}function Hp(e,t){for(var r="",n=k6(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function Az(e,t,r,n){switch(e.type){case"@import":case B6:return e.return=e.return||e.value;case"comm":return"";case oae:return e.return=e.value+"{"+Hp(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return qd(r=Hp(e.children,n))?e.return=e.value+"{"+r+"}":""}function hz(e){var t=k6(e);return function(r,n,a,i){for(var s="",o=0;o<t;o++)s+=e[o](r,n,a,i)||"";return s}}function rXe(e){return function(t){t.root||(t=t.return)&&e(t)}}function fae(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var nXe=function(e,t,r){for(var n=0,a=0;n=a,a=lf(),n===38&&a===12&&(t[r]=1),!ub(a);)oc();return tw(e,Sl)},aXe=function(e,t){return dae(function(r,n){var a=-1,i=44;do switch(ub(i)){case 0:i===38&&lf()===12&&(n[a]=1),r[a]+=nXe(Sl-1,n,a);break;case 2:r[a]+=dE(i);break;case 4:if(i===44){r[++a]=lf()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=n5(i)}while(i=oc());return r}(uae(e),t))},pz=new WeakMap,iXe=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||pz.get(r))&&!n){pz.set(e,!0);for(var a=[],i=aXe(t,a),s=r.props,o=0,l=0;o<i.length;o++)for(var c=0;c<s.length;c++,l++)e.props[l]=a[o]?i[o].replace(/&\f/g,s[c]):s[c]+" "+i[o]}}},sXe=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Aae(e,t){switch(function(r,n){return 45^qs(r,0)?(((n<<2^qs(r,0))<<2^qs(r,1))<<2^qs(r,2))<<2^qs(r,3):0}(e,t)){case 5103:return Qn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qn+e+cz+e+zc+e+e;case 6828:case 4268:return Qn+e+zc+e+e;case 6165:return Qn+e+zc+"flex-"+e+e;case 5187:return Qn+e+$n(e,/(\w+).+(:[^]+)/,Qn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Qn+e+zc+"flex-item-"+$n(e,/flex-|-self/,"")+e;case 4675:return Qn+e+zc+"flex-line-pack"+$n(e,/align-content|flex-|-self/,"")+e;case 5548:return Qn+e+zc+$n(e,"shrink","negative")+e;case 5292:return Qn+e+zc+$n(e,"basis","preferred-size")+e;case 6060:return Qn+"box-"+$n(e,"-grow","")+Qn+e+zc+$n(e,"grow","positive")+e;case 4554:return Qn+$n(e,/([^-])(transform)/g,"$1"+Qn+"$2")+e;case 6187:return $n($n($n(e,/(zoom-|grab)/,Qn+"$1"),/(image-set)/,Qn+"$1"),e,"")+e;case 5495:case 3959:return $n(e,/(image-set\([^]*)/,Qn+"$1$`$1");case 4968:return $n($n(e,/(.+:)(flex-)?(.*)/,Qn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qn+e+e;case 4095:case 3583:case 4068:case 2532:return $n(e,/(.+)-inline(.+)/,Qn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qd(e)-1-t>6)switch(qs(e,t+1)){case 109:if(qs(e,t+4)!==45)break;case 102:return $n(e,/(.+:)(.+)-([^]+)/,"$1"+Qn+"$2-$3$1"+cz+(qs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~TF(e,"stretch")?Aae($n(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(qs(e,t+1)!==115)break;case 6444:switch(qs(e,qd(e)-3-(~TF(e,"!important")&&10))){case 107:return $n(e,":",":"+Qn)+e;case 101:return $n(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qn+(qs(e,14)===45?"inline-":"")+"box$3$1"+Qn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(qs(e,t+11)){case 114:return Qn+e+zc+$n(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qn+e+zc+$n(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qn+e+zc+$n(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Qn+e+zc+e+e}return e}var mz,xC,AE=typeof document<"u",oXe=AE?void 0:(mz=function(){return fae(function(){var e={};return function(t){return e[t]}})},xC=new WeakMap,function(e){if(xC.has(e))return xC.get(e);var t=mz(e);return xC.set(e,t),t}),lXe=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case B6:e.return=Aae(e.value,e.length);break;case oae:return Hp([w1(e,{value:$n(e.value,"@","@"+Qn)})],n);case"rule":if(e.length)return function(a,i){return a.map(i).join("")}(e.props,function(a){switch(function(i,s){return(i=s.exec(i))?i[0]:i}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hp([w1(e,{props:[$n(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Hp([w1(e,{props:[$n(a,/:(plac\w+)/,":"+Qn+"input-$1")]}),w1(e,{props:[$n(a,/:(plac\w+)/,":-moz-$1")]}),w1(e,{props:[$n(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],hae=function(e){var t=e.key;if(AE&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(w){w.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var n=e.stylisPlugins||lXe,a,i,s={},o=[];AE&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(w){for(var T=w.getAttribute("data-emotion").split(" "),N=1;N<T.length;N++)s[T[N]]=!0;o.push(w)}));var l=[iXe,sXe];if(AE){var c,u=[Az,rXe(function(w){c.insert(w)})],A=hz(l.concat(n,u));i=function(w,T,N,F){c=N,Hp(uz(w?w+"{"+T.styles+"}":T.styles),A),F&&(y.inserted[T.name]=!0)}}else{var h=[Az],m=hz(l.concat(n,h)),v=oXe(n)(t),g=function(w,T){var N=T.name;return v[N]===void 0&&(v[N]=Hp(uz(w?w+"{"+T.styles+"}":T.styles),m)),v[N]};i=function(w,T,N,F){var B=T.name,D=g(w,T);return y.compat===void 0?(F&&(y.inserted[B]=!0),D):F?void(y.inserted[B]=D):D}}var y={key:t,sheet:new KYe({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return y.sheet.hydrate(o),y};function Wn(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var Ps=typeof Symbol=="function"&&Symbol.for,BF=Ps?Symbol.for("react.element"):60103,kF=Ps?Symbol.for("react.portal"):60106,hE=Ps?Symbol.for("react.fragment"):60107,pE=Ps?Symbol.for("react.strict_mode"):60108,mE=Ps?Symbol.for("react.profiler"):60114,gE=Ps?Symbol.for("react.provider"):60109,vE=Ps?Symbol.for("react.context"):60110,IF=Ps?Symbol.for("react.async_mode"):60111,J_=Ps?Symbol.for("react.concurrent_mode"):60111,xE=Ps?Symbol.for("react.forward_ref"):60112,yE=Ps?Symbol.for("react.suspense"):60113,cXe=Ps?Symbol.for("react.suspense_list"):60120,bE=Ps?Symbol.for("react.memo"):60115,wE=Ps?Symbol.for("react.lazy"):60116,uXe=Ps?Symbol.for("react.block"):60121,dXe=Ps?Symbol.for("react.fundamental"):60117,fXe=Ps?Symbol.for("react.responder"):60118,AXe=Ps?Symbol.for("react.scope"):60119;function Kl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case BF:switch(e=e.type){case IF:case J_:case hE:case mE:case pE:case yE:return e;default:switch(e=e&&e.$$typeof){case vE:case xE:case wE:case bE:case gE:return e;default:return t}}case kF:return t}}}function gz(e){return Kl(e)===J_}var hXe={AsyncMode:IF,ConcurrentMode:J_,ContextConsumer:vE,ContextProvider:gE,Element:BF,ForwardRef:xE,Fragment:hE,Lazy:wE,Memo:bE,Portal:kF,Profiler:mE,StrictMode:pE,Suspense:yE,isAsyncMode:function(e){return gz(e)||Kl(e)===IF},isConcurrentMode:gz,isContextConsumer:function(e){return Kl(e)===vE},isContextProvider:function(e){return Kl(e)===gE},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===BF},isForwardRef:function(e){return Kl(e)===xE},isFragment:function(e){return Kl(e)===hE},isLazy:function(e){return Kl(e)===wE},isMemo:function(e){return Kl(e)===bE},isPortal:function(e){return Kl(e)===kF},isProfiler:function(e){return Kl(e)===mE},isStrictMode:function(e){return Kl(e)===pE},isSuspense:function(e){return Kl(e)===yE},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===hE||e===J_||e===mE||e===pE||e===yE||e===cXe||typeof e=="object"&&e!==null&&(e.$$typeof===wE||e.$$typeof===bE||e.$$typeof===gE||e.$$typeof===vE||e.$$typeof===xE||e.$$typeof===dXe||e.$$typeof===fXe||e.$$typeof===AXe||e.$$typeof===uXe)},typeOf:Kl};Wn(function(e,t){});var vz=Wn(function(e){e.exports=hXe}),xz={};xz[vz.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xz[vz.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var FF=typeof document<"u";function pae(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var I6=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||FF===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},F6=function(e,t,r){I6(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",i=t;do{var s=e.insert(t===i?"."+n:"",i,e.sheet,!0);FF||s===void 0||(a+=s),i=i.next}while(i!==void 0);if(!FF&&a.length!==0)return a}},pXe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},mXe=/[A-Z]|^ms/g,gXe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mae=function(e){return e.charCodeAt(1)===45},yz=function(e){return e!=null&&typeof e!="boolean"},F4=fae(function(e){return mae(e)?e:e.replace(mXe,"-$&").toLowerCase()}),bz=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(gXe,function(r,n,a){return $d={name:n,styles:a,next:$d},n})}return pXe[e]===1||mae(e)||typeof t!="number"||t===0?t:t+"px"};function by(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return $d={name:r.name,styles:r.styles,next:$d},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)$d={name:n.name,styles:n.styles,next:$d},n=n.next;var a=r.styles+";";return a}return function(l,c,u){var A="";if(Array.isArray(u))for(var h=0;h<u.length;h++)A+=by(l,c,u[h])+";";else for(var m in u){var v=u[m];if(typeof v!="object")c!=null&&c[v]!==void 0?A+=m+"{"+c[v]+"}":yz(v)&&(A+=F4(m)+":"+bz(m,v)+";");else if(!Array.isArray(v)||typeof v[0]!="string"||c!=null&&c[v[0]]!==void 0){var g=by(l,c,v);switch(m){case"animation":case"animationName":A+=F4(m)+":"+g+";";break;default:A+=m+"{"+g+"}"}}else for(var y=0;y<v.length;y++)yz(v[y])&&(A+=F4(m)+":"+bz(m,v[y])+";")}return A}(e,t,r);case"function":if(e!==void 0){var i=$d,s=r(e);return $d=i,by(e,t,s)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var $d,wz=/label:\s*([^\s;\n{]+)\s*(;|$)/g,s5=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";$d=void 0;var i=e[0];i==null||i.raw===void 0?(n=!1,a+=by(r,t,i)):a+=i[0];for(var s=1;s<e.length;s++)a+=by(r,t,e[s]),n&&(a+=i[s]);wz.lastIndex=0;for(var o,l="";(o=wz.exec(a))!==null;)l+="-"+o[1];var c=function(u){for(var A,h=0,m=0,v=u.length;v>=4;++m,v-=4)A=1540483477*(65535&(A=255&u.charCodeAt(m)|(255&u.charCodeAt(++m))<<8|(255&u.charCodeAt(++m))<<16|(255&u.charCodeAt(++m))<<24))+(59797*(A>>>16)<<16),h=1540483477*(65535&(A^=A>>>24))+(59797*(A>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(v){case 3:h^=(255&u.charCodeAt(m+2))<<16;case 2:h^=(255&u.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&u.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+l;return{name:c,styles:a,next:$d}},vXe=typeof document<"u",xXe=function(e){return e()},gae=!!L.useInsertionEffect&&L.useInsertionEffect,vae=vXe&&gae||xXe,Cz=gae||L.useLayoutEffect,Av=typeof document<"u",D6={}.hasOwnProperty,Z_=L.createContext(typeof HTMLElement<"u"?hae({key:"css"}):null);Z_.Provider;var o5=function(e){return L.forwardRef(function(t,r){var n=L.useContext(Z_);return e(t,n,r)})};Av||(o5=function(e){return function(t){var r=L.useContext(Z_);return r===null?(r=hae({key:"css"}),L.createElement(Z_.Provider,{value:r},e(t,r))):e(t,r)}});var R6=L.createContext({}),DF="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",yXe=function(e,t){var r={};for(var n in t)D6.call(t,n)&&(r[n]=t[n]);return r[DF]=e,r},bXe=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;I6(t,r,n);var a=vae(function(){return F6(t,r,n)});if(!Av&&a!==void 0){for(var i,s=r.name,o=r.next;o!==void 0;)s+=" "+o.name,o=o.next;return L.createElement("style",((i={})["data-emotion"]=t.key+" "+s,i.dangerouslySetInnerHTML={__html:a},i.nonce=t.sheet.nonce,i))}return null},wXe=o5(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[DF],i=[n],s="";typeof e.className=="string"?s=pae(t.registered,i,e.className):e.className!=null&&(s=e.className+" ");var o=s5(i,void 0,L.useContext(R6));s+=t.key+"-"+o.name;var l={};for(var c in e)!D6.call(e,c)||c==="css"||c===DF||(l[c]=e[c]);return l.ref=r,l.className=s,L.createElement(L.Fragment,null,L.createElement(bXe,{cache:t,serialized:o,isStringTag:typeof a=="string"}),L.createElement(a,l))});Wn(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var xr=function(e,t){var r=arguments;if(t==null||!D6.call(t,"css"))return L.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=wXe,a[1]=yXe(e,t);for(var i=2;i<n;i++)a[i]=r[i];return L.createElement.apply(null,a)};o5(function(e,t){var r=e.styles,n=s5([r],void 0,L.useContext(R6));if(!Av){for(var a,i=n.name,s=n.styles,o=n.next;o!==void 0;)i+=" "+o.name,s+=o.styles,o=o.next;var l=t.compat===!0,c=t.insert("",{name:i,styles:s},t.sheet,l);return l?null:L.createElement("style",((a={})["data-emotion"]=t.key+"-global "+i,a.dangerouslySetInnerHTML={__html:c},a.nonce=t.sheet.nonce,a))}var u=L.useRef();return Cz(function(){var A=t.key+"-global",h=new t.sheet.constructor({key:A,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,v=document.querySelector('style[data-emotion="'+A+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),v!==null&&(m=!0,v.setAttribute("data-emotion",A),h.hydrate([v])),u.current=[h,m],function(){h.flush()}},[t]),Cz(function(){var A=u.current,h=A[0];if(A[1])A[1]=!1;else{if(n.next!==void 0&&F6(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function P6(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s5(t)}var CXe=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var i=t[n];if(i!=null){var s=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))s=e(i);else for(var o in s="",i)i[o]&&o&&(s&&(s+=" "),s+=o);break;default:s=i}s&&(a&&(a+=" "),a+=s)}}return a};function EXe(e,t,r){var n=[],a=pae(e,n,r);return n.length<2?r:a+t(n)}var _Xe=function(e){var t,r=e.cache,n=e.serializedArr,a=vae(function(){for(var i="",s=0;s<n.length;s++){var o=F6(r,n[s],!1);Av||o===void 0||(i+=o)}if(!Av)return i});return Av||a.length===0?null:L.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(i){return i.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};o5(function(e,t){var r=[],n=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=s5(o,t.registered);return r.push(c),I6(t,c,!1),t.key+"-"+c.name},a={css:n,cx:function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return EXe(t.registered,n,CXe(o))},theme:L.useContext(R6)},i=e.children(a);return L.createElement(L.Fragment,null,L.createElement(_Xe,{cache:t,serializedArr:r}),i)});function Es(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var i,s,o,l,c=[],u=!0,A=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;u=!1}else for(;!(u=(i=o.call(a)).done)&&(c.push(i.value),c.length!==n);u=!0);}catch(h){A=!0,s=h}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(A)throw s}}return c}}(e,t)||sae(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kd(e,t){if(e==null)return{};var r,n,a=function(s,o){if(s==null)return{};var l,c,u={},A=Object.keys(s);for(c=0;c<A.length;c++)l=A[c],o.indexOf(l)>=0||(u[l]=s[l]);return u}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AA(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xae(e){return AA(e).getComputedStyle(e)}const yC=Math.round;function yae(e){return wae(e)?(e.nodeName||"").toLowerCase():""}let bC;function bae(e){return e instanceof AA(e).HTMLElement}function CE(e){return e instanceof AA(e).Element}function wae(e){return e instanceof AA(e).Node}function Ez(e){return typeof ShadowRoot>"u"?!1:e instanceof AA(e).ShadowRoot||e instanceof ShadowRoot}function Cae(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=xae(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function SXe(){return/^((?!chrome|android).)*safari/i.test(function(){if(bC)return bC;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(bC=e.brands.map(t=>t.brand+"/"+t.version).join(" "),bC):navigator.userAgent}())}function Eae(e){return CE(e)?e:e.contextElement}const _ae={x:1,y:1};function _z(e){const t=Eae(e);if(!bae(t))return _ae;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:i}=function(l){const c=xae(l);let u=parseFloat(c.width),A=parseFloat(c.height);const h=l.offsetWidth,m=l.offsetHeight,v=yC(u)!==h||yC(A)!==m;return v&&(u=h,A=m),{width:u,height:A,fallback:v}}(t);let s=(i?yC(r.width):r.width)/n,o=(i?yC(r.height):r.height)/a;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}function Sz(e,t,r,n){var a,i;t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=Eae(e);let l=_ae;t&&(l=_z(e));const c=o?AA(o):window,u=SXe()&&r;let A=(s.left+(u&&((a=c.visualViewport)==null?void 0:a.offsetLeft)||0))/l.x,h=(s.top+(u&&((i=c.visualViewport)==null?void 0:i.offsetTop)||0))/l.y,m=s.width/l.x,v=s.height/l.y;if(o){const g=AA(o),y=n;let w=g.frameElement;for(;w&&n&&y!==g;){const T=_z(w),N=w.getBoundingClientRect(),F=getComputedStyle(w);N.x+=(w.clientLeft+parseFloat(F.paddingLeft))*T.x,N.y+=(w.clientTop+parseFloat(F.paddingTop))*T.y,A*=T.x,h*=T.y,m*=T.x,v*=T.y,A+=N.x,h+=N.y,w=AA(w).frameElement}}return{width:m,height:v,top:h,right:A+m,bottom:h+v,left:A,x:A,y:h}}function TXe(e){if(yae(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ez(e)&&e.host||function(r){return((wae(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return Ez(t)?t.host:t}function Sae(e){const t=TXe(e);return function(r){return["html","body","#document"].includes(yae(r))}(t)?t.ownerDocument.body:bae(t)&&Cae(t)?t:Sae(t)}function EE(e,t){var r;t===void 0&&(t=[]);const n=Sae(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),i=AA(n);return a?t.concat(i,i.visualViewport||[],Cae(n)?n:[]):t.concat(n,EE(n))}var RF=typeof document<"u"?L.useLayoutEffect:L.useEffect,NXe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],eS=function(){};function BXe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function kXe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var i=[].concat(n);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&i.push("".concat(BXe(e,s)));return i.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var Tz=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):jp(e)==="object"&&e!==null?[e]:[];var t},Nz=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,dr({},Kd(e,NXe))},oi=function(e,t,r){var n=e.cx,a=e.getStyles,i=e.getClassNames,s=e.className;return{css:a(t,e),className:n(r??{},i(t,e),s)}};function l5(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Tae(e){return l5(e)?window.pageYOffset:e.scrollTop}function tS(e,t){l5(e)?window.scrollTo(0,t):e.scrollTop=t}function IXe(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function wC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:eS,a=Tae(e),i=t-a,s=10,o=0;function l(){var c=IXe(o+=s,a,i,r);tS(e,c),o<r?window.requestAnimationFrame(l):n(e)}l()}function Bz(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?tS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&tS(e,Math.max(t.offsetTop-a,0))}function kz(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Nae=!1,FXe={get passive(){return Nae=!0}},CC=typeof window<"u"?window:{};CC.addEventListener&&CC.removeEventListener&&(CC.addEventListener("p",eS,FXe),CC.removeEventListener("p",eS,!1));var DXe=Nae;function RXe(e){return e!=null}function EC(e,t,r){return e?t:r}var PXe=["children","innerProps"],MXe=["children","innerProps"];function LXe(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,i=e.shouldScroll,s=e.isFixedPosition,o=e.controlHeight,l=function(te){var W=getComputedStyle(te),re=W.position==="absolute",z=/(auto|scroll)/;if(W.position==="fixed")return document.documentElement;for(var X=te;X=X.parentElement;)if(W=getComputedStyle(X),(!re||W.position!=="static")&&z.test(W.overflow+W.overflowY+W.overflowX))return X;return document.documentElement}(r),c={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return c;var u,A=l.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,v=h.height,g=h.top,y=r.offsetParent.getBoundingClientRect().top,w=s||l5(u=l)?window.innerHeight:u.clientHeight,T=Tae(l),N=parseInt(getComputedStyle(r).marginBottom,10),F=parseInt(getComputedStyle(r).marginTop,10),B=y-F,D=w-g,E=B+T,S=A-T-g,k=m-w+T+N,H=T+g-F,P=160;switch(a){case"auto":case"bottom":if(D>=v)return{placement:"bottom",maxHeight:t};if(S>=v&&!s)return i&&wC(l,k,P),{placement:"bottom",maxHeight:t};if(!s&&S>=n||s&&D>=n)return i&&wC(l,k,P),{placement:"bottom",maxHeight:s?D-N:S-N};if(a==="auto"||s){var M=t,Q=s?B:E;return Q>=n&&(M=Math.min(Q-N-o,t)),{placement:"top",maxHeight:M}}if(a==="bottom")return i&&tS(l,k),{placement:"bottom",maxHeight:t};break;case"top":if(B>=v)return{placement:"top",maxHeight:t};if(E>=v&&!s)return i&&wC(l,H,P),{placement:"top",maxHeight:t};if(!s&&E>=n||s&&B>=n){var V=t;return(!s&&E>=n||s&&B>=n)&&(V=s?B-F:E-F),i&&wC(l,H,P),{placement:"top",maxHeight:V}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return c}var Iz,Bae=function(e){return e==="auto"?"bottom":e},kae=L.createContext(null),OXe=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,i=e.menuPosition,s=e.menuShouldScrollIntoView,o=e.theme,l=(L.useContext(kae)||{}).setPortalPlacement,c=L.useRef(null),u=Es(L.useState(n),2),A=u[0],h=u[1],m=Es(L.useState(null),2),v=m[0],g=m[1],y=o.spacing.controlHeight;return RF(function(){var w=c.current;if(w){var T=i==="fixed",N=LXe({maxHeight:n,menuEl:w,minHeight:r,placement:a,shouldScroll:s&&!T,isFixedPosition:T,controlHeight:y});h(N.maxHeight),g(N.placement),l==null||l(N.placement)}},[n,a,i,s,r,l,y]),t({ref:c,placerProps:dr(dr({},e),{},{placement:v||Bae(a),maxHeight:A})})},UXe=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return xr("div",Tr({},oi(e,"menu",{menu:!0}),{ref:r},n),t)},Iae=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return dr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},jXe=Iae,HXe=Iae,QXe=["size"],VXe=["innerProps","isRtl","size"],D4,R4,zXe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Fae=function(e){var t=e.size,r=Kd(e,QXe);return xr("svg",Tr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:zXe},r))},P4=function(e){return xr(Fae,Tr({size:20},e),xr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Fz=function(e){return xr(Fae,Tr({size:20},e),xr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Dae=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,i=n.colors;return dr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*a,":hover":{color:r?i.neutral80:i.neutral40}})},GXe=Dae,qXe=Dae,$Xe=function(){var e=P6.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(Iz||(D4=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],R4||(R4=D4.slice(0)),Iz=Object.freeze(Object.defineProperties(D4,{raw:{value:Object.freeze(R4)}})))),M4=function(e){var t=e.delay,r=e.offset;return xr("span",{css:P6({animation:"".concat($Xe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},KXe=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,i=e.innerProps,s=e.menuIsOpen;return xr("div",Tr({ref:a},oi(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":s}),i,{"aria-disabled":r||void 0}),t)},WXe=["data"],YXe=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,i=e.Heading,s=e.headingProps,o=e.innerProps,l=e.label,c=e.theme,u=e.selectProps;return xr("div",Tr({},oi(e,"group",{group:!0}),o),xr(i,Tr({},s,{selectProps:u,theme:c,getStyles:n,getClassNames:a,cx:r}),l),xr("div",null,t))},XXe=["innerRef","isDisabled","isHidden","inputClassName"],Rae={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},JXe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":dr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Rae)},ZXe=function(e){return dr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Rae)},Dz=function(e){var t=e.children,r=e.innerProps;return xr("div",r,t)},eJe=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,i=e.isDisabled,s=e.removeProps,o=e.selectProps,l=r.Container,c=r.Label,u=r.Remove;return xr(l,{data:n,innerProps:dr(dr({},oi(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":i})),a),selectProps:o},xr(c,{data:n,innerProps:dr({},oi(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),xr(u,{data:n,innerProps:dr(dr({},oi(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},s),selectProps:o}))},tJe={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return xr("div",Tr({},oi(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||xr(P4,null))},Control:KXe,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return xr("div",Tr({},oi(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||xr(Fz,null))},DownChevron:Fz,CrossIcon:P4,Group:YXe,GroupHeading:function(e){var t=Nz(e);t.data;var r=Kd(t,WXe);return xr("div",Tr({},oi(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return xr("div",Tr({},oi(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return xr("span",Tr({},t,oi(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=Nz(e),a=n.innerRef,i=n.isDisabled,s=n.isHidden,o=n.inputClassName,l=Kd(n,XXe);return xr("div",Tr({},oi(e,"input",{"input-container":!0}),{"data-value":r||""}),xr("input",Tr({className:t({input:!0},o),ref:a,style:ZXe(s),disabled:i},l)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,i=Kd(e,VXe);return xr("div",Tr({},oi(dr(dr({},i),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),xr(M4,{delay:0,offset:r}),xr(M4,{delay:160,offset:!0}),xr(M4,{delay:320,offset:!r}))},Menu:UXe,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return xr("div",Tr({},oi(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,i=e.menuPlacement,s=e.menuPosition,o=L.useRef(null),l=L.useRef(null),c=Es(L.useState(Bae(i)),2),u=c[0],A=c[1],h=L.useMemo(function(){return{setPortalPlacement:A}},[]),m=Es(L.useState(null),2),v=m[0],g=m[1],y=L.useCallback(function(){if(n){var F=function(E){var S=E.getBoundingClientRect();return{bottom:S.bottom,height:S.height,left:S.left,right:S.right,top:S.top,width:S.width}}(n),B=s==="fixed"?0:window.pageYOffset,D=F[u]+B;D===(v==null?void 0:v.offset)&&F.left===(v==null?void 0:v.rect.left)&&F.width===(v==null?void 0:v.rect.width)||g({offset:D,rect:F})}},[n,s,u,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);RF(function(){y()},[y]);var w=L.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),n&&o.current&&(l.current=function(F,B,D,E){E===void 0&&(E={});const{ancestorScroll:S=!0,ancestorResize:k=!0,elementResize:H=!0,animationFrame:P=!1}=E,M=S&&!P,Q=M||k?[...CE(F)?EE(F):F.contextElement?EE(F.contextElement):[],...EE(B)]:[];Q.forEach(re=>{M&&re.addEventListener("scroll",D,{passive:!0}),k&&re.addEventListener("resize",D)});let V,te=null;if(H){let re=!0;te=new ResizeObserver(()=>{re||D(),re=!1}),CE(F)&&!P&&te.observe(F),CE(F)||!F.contextElement||P||te.observe(F.contextElement),te.observe(B)}let W=P?Sz(F):null;return P&&function re(){const z=Sz(F);!W||z.x===W.x&&z.y===W.y&&z.width===W.width&&z.height===W.height||D(),W=z,V=requestAnimationFrame(re)}(),D(),()=>{var re;Q.forEach(z=>{M&&z.removeEventListener("scroll",D),k&&z.removeEventListener("resize",D)}),(re=te)==null||re.disconnect(),te=null,P&&cancelAnimationFrame(V)}}(n,o.current,y,{elementResize:"ResizeObserver"in window}))},[n,y]);RF(function(){w()},[w]);var T=L.useCallback(function(F){o.current=F,w()},[w]);if(!t&&s!=="fixed"||!v)return null;var N=xr("div",Tr({ref:T},oi(dr(dr({},e),{},{offset:v.offset,position:s,rect:v.rect}),"menuPortal",{"menu-portal":!0}),a),r);return xr(kae.Provider,{value:h},t?zP.createPortal(N,t):N)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=Kd(e,MXe);return xr("div",Tr({},oi(dr(dr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=Kd(e,PXe);return xr("div",Tr({},oi(dr(dr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:eJe,MultiValueContainer:Dz,MultiValueLabel:Dz,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return xr("div",Tr({role:"button"},r),t||xr(P4,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,i=e.innerRef,s=e.innerProps;return xr("div",Tr({},oi(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:i,"aria-disabled":r},s),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return xr("div",Tr({},oi(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return xr("div",Tr({},oi(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return xr("div",Tr({},oi(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return xr("div",Tr({},oi(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},Rz=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function rJe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||Rz(n)&&Rz(a)))return!1;var n,a;return!0}for(var nJe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Pz=function(e){return xr("span",Tr({css:nJe},e))},aJe={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,i=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return i?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,i=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,i?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,i=a===void 0?"":a,s=e.selectValue,o=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,u=function(m,v){return m&&m.length?"".concat(m.indexOf(v)+1," of ").concat(m.length):""};if(t==="value"&&s)return"value ".concat(i," focused, ").concat(u(s,r),".");if(t==="menu"&&c){var A=o?" disabled":"",h="".concat(l?" selected":"").concat(A);return"".concat(i).concat(h,", ").concat(u(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},iJe=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,i=e.isFocused,s=e.selectValue,o=e.selectProps,l=e.id,c=e.isAppleDevice,u=o.ariaLiveMessages,A=o.getOptionLabel,h=o.inputValue,m=o.isMulti,v=o.isOptionDisabled,g=o.isSearchable,y=o.menuIsOpen,w=o.options,T=o.screenReaderStatus,N=o.tabSelectsValue,F=o.isLoading,B=o["aria-label"],D=o["aria-live"],E=L.useMemo(function(){return dr(dr({},aJe),u||{})},[u]),S=L.useMemo(function(){var V,te="";if(t&&E.onChange){var W=t.option,re=t.options,z=t.removedValue,X=t.removedValues,K=t.value,se=z||W||(V=K,Array.isArray(V)?null:V),U=se?A(se):"",Y=re||X||void 0,Z=Y?Y.map(A):[],ne=dr({isDisabled:se&&v(se,s),label:U,labels:Z},t);te=E.onChange(ne)}return te},[t,E,v,s,A]),k=L.useMemo(function(){var V="",te=r||n,W=!!(r&&s&&s.includes(r));if(te&&E.onFocus){var re={focused:te,label:A(te),isDisabled:v(te,s),isSelected:W,options:a,context:te===r?"menu":"value",selectValue:s,isAppleDevice:c};V=E.onFocus(re)}return V},[r,n,A,v,E,a,s,c]),H=L.useMemo(function(){var V="";if(y&&w.length&&!F&&E.onFilter){var te=T({count:a.length});V=E.onFilter({inputValue:h,resultsMessage:te})}return V},[a,h,y,E,w,T,F]),P=(t==null?void 0:t.action)==="initial-input-focus",M=L.useMemo(function(){var V="";if(E.guidance){var te=n?"value":y?"menu":"input";V=E.guidance({"aria-label":B,context:te,isDisabled:r&&v(r,s),isMulti:m,isSearchable:g,tabSelectsValue:N,isInitialFocus:P})}return V},[B,r,n,m,v,g,y,E,s,N,P]),Q=xr(L.Fragment,null,xr("span",{id:"aria-selection"},S),xr("span",{id:"aria-focused"},k),xr("span",{id:"aria-results"},H),xr("span",{id:"aria-guidance"},M));return xr(L.Fragment,null,xr(Pz,{id:l},P&&Q),xr(Pz,{"aria-live":D,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},i&&!P&&Q))},L4=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],sJe=new RegExp("["+L4.map(function(e){return e.letters}).join("")+"]","g"),Pae={},O4=0;O4<L4.length;O4++)for(var U4=L4[O4],j4=0;j4<U4.letters.length;j4++)Pae[U4.letters[j4]]=U4.base;var Mae=function(e){return e.replace(sJe,function(t){return Pae[t]})},oJe=function(e,t){t===void 0&&(t=rJe);var r=null;function n(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var s=e.apply(this,a);return r={lastResult:s,lastArgs:a,lastThis:this},s}return n.clear=function(){r=null},n}(Mae),Mz=function(e){return e.replace(/^\s+|\s+$/g,"")},lJe=function(e){return"".concat(e.label," ").concat(e.value)},cJe=["innerRef"];function uJe(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];var o=Object.entries(n).filter(function(l){var c=Es(l,1)[0];return!i.includes(c)});return o.reduce(function(l,c){var u=Es(c,2),A=u[0],h=u[1];return l[A]=h,l},{})}(Kd(e,cJe),"onExited","in","enter","exit","appear");return xr("input",Tr({ref:t},r,{css:P6({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Lz=["boxSizing","height","overflow","paddingRight","position"],Oz={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Uz(e){e.preventDefault()}function jz(e){e.stopPropagation()}function Hz(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function Qz(){return"ontouchstart"in window||navigator.maxTouchPoints}var Vz=!(typeof window>"u"||!window.document||!window.document.createElement),C1=0,Eg={capture:!1,passive:!1},dJe=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},fJe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function AJe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(s){var o=s.isEnabled,l=s.onBottomArrive,c=s.onBottomLeave,u=s.onTopArrive,A=s.onTopLeave,h=L.useRef(!1),m=L.useRef(!1),v=L.useRef(0),g=L.useRef(null),y=L.useCallback(function(D,E){if(g.current!==null){var S=g.current,k=S.scrollTop,H=S.scrollHeight,P=S.clientHeight,M=g.current,Q=E>0,V=H-P-k,te=!1;V>E&&h.current&&(c&&c(D),h.current=!1),Q&&m.current&&(A&&A(D),m.current=!1),Q&&E>V?(l&&!h.current&&l(D),M.scrollTop=H,te=!0,h.current=!0):!Q&&-E>k&&(u&&!m.current&&u(D),M.scrollTop=0,te=!0,m.current=!0),te&&function(W){W.cancelable&&W.preventDefault(),W.stopPropagation()}(D)}},[l,c,u,A]),w=L.useCallback(function(D){y(D,D.deltaY)},[y]),T=L.useCallback(function(D){v.current=D.changedTouches[0].clientY},[]),N=L.useCallback(function(D){var E=v.current-D.changedTouches[0].clientY;y(D,E)},[y]),F=L.useCallback(function(D){if(D){var E=!!DXe&&{passive:!1};D.addEventListener("wheel",w,E),D.addEventListener("touchstart",T,E),D.addEventListener("touchmove",N,E)}},[N,T,w]),B=L.useCallback(function(D){D&&(D.removeEventListener("wheel",w,!1),D.removeEventListener("touchstart",T,!1),D.removeEventListener("touchmove",N,!1))},[N,T,w]);return L.useEffect(function(){if(o){var D=g.current;return F(D),function(){B(D)}}},[o,F,B]),function(D){g.current=D}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),i=function(s){var o=s.isEnabled,l=s.accountForScrollbars,c=l===void 0||l,u=L.useRef({}),A=L.useRef(null),h=L.useCallback(function(v){if(Vz){var g=document.body,y=g&&g.style;if(c&&Lz.forEach(function(F){var B=y&&y[F];u.current[F]=B}),c&&C1<1){var w=parseInt(u.current.paddingRight,10)||0,T=document.body?document.body.clientWidth:0,N=window.innerWidth-T+w||0;Object.keys(Oz).forEach(function(F){var B=Oz[F];y&&(y[F]=B)}),y&&(y.paddingRight="".concat(N,"px"))}g&&Qz()&&(g.addEventListener("touchmove",Uz,Eg),v&&(v.addEventListener("touchstart",Hz,Eg),v.addEventListener("touchmove",jz,Eg))),C1+=1}},[c]),m=L.useCallback(function(v){if(Vz){var g=document.body,y=g&&g.style;C1=Math.max(C1-1,0),c&&C1<1&&Lz.forEach(function(w){var T=u.current[w];y&&(y[w]=T)}),g&&Qz()&&(g.removeEventListener("touchmove",Uz,Eg),v&&(v.removeEventListener("touchstart",Hz,Eg),v.removeEventListener("touchmove",jz,Eg)))}},[c]);return L.useEffect(function(){if(o){var v=A.current;return h(v),function(){m(v)}}},[o,h,m]),function(v){A.current=v}}({isEnabled:r});return xr(L.Fragment,null,r&&xr("div",{onClick:dJe,css:fJe}),t(function(s){a(s),i(s)}))}var hJe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},pJe=function(e){var t=e.name,r=e.onFocus;return xr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:hJe,value:"",onChange:function(){}})};function PF(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Lae(){return PF(/^Mac/i)}function mJe(){return PF(/^iPhone/i)||PF(/^iPad/i)||Lae()&&navigator.maxTouchPoints>1}var gJe,vJe={clearIndicator:qXe,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,i=a.colors,s=a.borderRadius;return dr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?i.neutral5:i.neutral0,borderColor:r?i.neutral10:n?i.primary:i.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(i.primary):void 0,"&:hover":{borderColor:n?i.primary:i.neutral30}})},dropdownIndicator:GXe,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return dr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,i=n.colors;return dr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?i.neutral10:i.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,i=a.spacing,s=a.colors;return dr(dr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},JXe),t?{}:{margin:i.baseUnit/2,paddingBottom:i.baseUnit/2,paddingTop:i.baseUnit/2,color:s.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,i=a.colors,s=a.spacing.baseUnit;return dr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*s})},loadingMessage:HXe,menu:function(e,t){var r,n=e.placement,a=e.theme,i=a.borderRadius,s=a.spacing,o=a.colors;return dr((Qg(r={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(n),"100%"),Qg(r,"position","absolute"),Qg(r,"width","100%"),Qg(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:i,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return dr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,i=r.colors;return dr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:i.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,i=e.cropWithEllipsis;return dr({overflow:"hidden",textOverflow:i||i===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,i=r.colors,s=e.isFocused;return dr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:s?i.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}})},noOptionsMessage:jXe,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,i=e.theme,s=i.spacing,o=i.colors;return dr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*s.baseUnit,"px ").concat(3*s.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return dr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,i=n.colors;return dr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?i.neutral40:i.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,i=e.selectProps.controlShouldRenderValue;return dr({alignItems:"center",display:n&&a&&i?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},H4={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},xJe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:kz(),captureMenuScroll:!kz(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=dr({ignoreCase:!0,ignoreAccents:!0,stringify:lJe,trim:!0,matchFrom:"any"},gJe),n=r.ignoreCase,a=r.ignoreAccents,i=r.stringify,s=r.trim,o=r.matchFrom,l=s?Mz(t):t,c=s?Mz(i(e)):i(e);return n&&(l=l.toLowerCase(),c=c.toLowerCase()),a&&(l=oJe(l),c=Mae(c)),o==="start"?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function zz(e,t,r,n){return{type:"option",data:t,isDisabled:Uae(e,t,r),isSelected:jae(e,t,r),label:Oae(e,t),value:rS(e,t),index:n}}function _C(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(s,o){return zz(e,s,t,o)}).filter(function(s){return $z(e,s)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var i=zz(e,r,t,n);return $z(e,i)?i:void 0}).filter(RXe)}function Gz(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,N6(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function qz(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,N6(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function $z(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,i=t.isSelected,s=t.label,o=t.value;return(!Qae(e)||!i)&&Hae(e,{label:s,value:o,data:a},n)}var Q4=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Oae=function(e,t){return e.getOptionLabel(t)},rS=function(e,t){return e.getOptionValue(t)};function Uae(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function jae(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=rS(e,t);return r.some(function(a){return rS(e,a)===n})}function Hae(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Qae=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},yJe=1,Vae=function(e){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&_F(s,o)})(i,L.Component);var t,r,n,a=$Ye(i);function i(s){var o;if(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,i),(o=a.call(this,s)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=Lae()||mJe(),o.controlRef=null,o.getControlRef=function(A){o.controlRef=A},o.focusedOptionRef=null,o.getFocusedOptionRef=function(A){o.focusedOptionRef=A},o.menuListRef=null,o.getMenuListRef=function(A){o.menuListRef=A},o.inputRef=null,o.getInputRef=function(A){o.inputRef=A},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(A,h){var m=o.props,v=m.onChange,g=m.name;h.name=g,o.ariaOnChange(A,h),v(A,h)},o.setValue=function(A,h,m){var v=o.props,g=v.closeMenuOnSelect,y=v.isMulti,w=v.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:w}),g&&(o.setState({inputIsHiddenAfterUpdate:!y}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(A,{action:h,option:m})},o.selectOption=function(A){var h=o.props,m=h.blurInputOnSelect,v=h.isMulti,g=h.name,y=o.state.selectValue,w=v&&o.isOptionSelected(A,y),T=o.isOptionDisabled(A,y);if(w){var N=o.getOptionValue(A);o.setValue(y.filter(function(F){return o.getOptionValue(F)!==N}),"deselect-option",A)}else{if(T)return void o.ariaOnChange(A,{action:"select-option",option:A,name:g});v?o.setValue([].concat(N6(y),[A]),"select-option",A):o.setValue(A,"select-option")}m&&o.blurInput()},o.removeValue=function(A){var h=o.props.isMulti,m=o.state.selectValue,v=o.getOptionValue(A),g=m.filter(function(w){return o.getOptionValue(w)!==v}),y=EC(h,g,g[0]||null);o.onChange(y,{action:"remove-value",removedValue:A}),o.focusInput()},o.clearValue=function(){var A=o.state.selectValue;o.onChange(EC(o.props.isMulti,[],null),{action:"clear",removedValues:A})},o.popValue=function(){var A=o.props.isMulti,h=o.state.selectValue,m=h[h.length-1],v=h.slice(0,h.length-1),g=EC(A,v,v[0]||null);o.onChange(g,{action:"pop-value",removedValue:m})},o.getFocusedOptionId=function(A){return Q4(o.state.focusableOptionsWithIds,A)},o.getFocusableOptionsWithIds=function(){return qz(_C(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var A=arguments.length,h=new Array(A),m=0;m<A;m++)h[m]=arguments[m];return kXe.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(A){return Oae(o.props,A)},o.getOptionValue=function(A){return rS(o.props,A)},o.getStyles=function(A,h){var m=o.props.unstyled,v=vJe[A](h,m);v.boxSizing="border-box";var g=o.props.styles[A];return g?g(v,h):v},o.getClassNames=function(A,h){var m,v;return(m=(v=o.props.classNames)[A])===null||m===void 0?void 0:m.call(v,h)},o.getElementId=function(A){return"".concat(o.state.instancePrefix,"-").concat(A)},o.getComponents=function(){return A=o.props,dr(dr({},tJe),A.components);var A},o.buildCategorizedOptions=function(){return _C(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return Gz(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(A,h){o.setState({ariaSelection:dr({value:A},h)})},o.onMenuMouseDown=function(A){A.button===0&&(A.stopPropagation(),A.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(A){o.blockOptionHover=!1},o.onControlMouseDown=function(A){if(!A.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&A.preventDefault()}},o.onDropdownIndicatorMouseDown=function(A){if(!(A&&A.type==="mousedown"&&A.button!==0||o.props.isDisabled)){var h=o.props,m=h.isMulti,v=h.menuIsOpen;o.focusInput(),v?(o.setState({inputIsHiddenAfterUpdate:!m}),o.onMenuClose()):o.openMenu("first"),A.preventDefault()}},o.onClearIndicatorMouseDown=function(A){A&&A.type==="mousedown"&&A.button!==0||(o.clearValue(),A.preventDefault(),o.openAfterFocus=!1,A.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(A){typeof o.props.closeMenuOnScroll=="boolean"?A.target instanceof HTMLElement&&l5(A.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(A)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(A){var h=A.touches,m=h&&h.item(0);m&&(o.initialTouchX=m.clientX,o.initialTouchY=m.clientY,o.userIsDragging=!1)},o.onTouchMove=function(A){var h=A.touches,m=h&&h.item(0);if(m){var v=Math.abs(m.clientX-o.initialTouchX),g=Math.abs(m.clientY-o.initialTouchY);o.userIsDragging=v>5||g>5}},o.onTouchEnd=function(A){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(A.target)&&o.menuListRef&&!o.menuListRef.contains(A.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(A){o.userIsDragging||o.onControlMouseDown(A)},o.onClearIndicatorTouchEnd=function(A){o.userIsDragging||o.onClearIndicatorMouseDown(A)},o.onDropdownIndicatorTouchEnd=function(A){o.userIsDragging||o.onDropdownIndicatorMouseDown(A)},o.handleInputChange=function(A){var h=o.props.inputValue,m=A.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(m,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(A){o.props.onFocus&&o.props.onFocus(A),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(A){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(A),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(A){if(!o.blockOptionHover&&o.state.focusedOption!==A){var h=o.getFocusableOptions().indexOf(A);o.setState({focusedOption:A,focusedOptionId:h>-1?o.getFocusedOptionId(A):null})}},o.shouldHideSelectedOptions=function(){return Qae(o.props)},o.onValueInputFocus=function(A){A.preventDefault(),A.stopPropagation(),o.focus()},o.onKeyDown=function(A){var h=o.props,m=h.isMulti,v=h.backspaceRemovesValue,g=h.escapeClearsValue,y=h.inputValue,w=h.isClearable,T=h.isDisabled,N=h.menuIsOpen,F=h.onKeyDown,B=h.tabSelectsValue,D=h.openMenuOnFocus,E=o.state,S=E.focusedOption,k=E.focusedValue,H=E.selectValue;if(!(T||typeof F=="function"&&(F(A),A.defaultPrevented))){switch(o.blockOptionHover=!0,A.key){case"ArrowLeft":if(!m||y)return;o.focusValue("previous");break;case"ArrowRight":if(!m||y)return;o.focusValue("next");break;case"Delete":case"Backspace":if(y)return;if(k)o.removeValue(k);else{if(!v)return;m?o.popValue():w&&o.clearValue()}break;case"Tab":if(o.isComposing||A.shiftKey||!N||!B||!S||D&&o.isOptionSelected(S,H))return;o.selectOption(S);break;case"Enter":if(A.keyCode===229)break;if(N){if(!S||o.isComposing)return;o.selectOption(S);break}return;case"Escape":N?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:y}),o.onMenuClose()):w&&g&&o.clearValue();break;case" ":if(y)return;if(!N){o.openMenu("first");break}if(!S)return;o.selectOption(S);break;case"ArrowUp":N?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":N?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!N)return;o.focusOption("pageup");break;case"PageDown":if(!N)return;o.focusOption("pagedown");break;case"Home":if(!N)return;o.focusOption("first");break;case"End":if(!N)return;o.focusOption("last");break;default:return}A.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++yJe),o.state.selectValue=Tz(s.value),s.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),c=o.buildFocusableOptions(),u=c.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=c[u],o.state.focusedOptionId=Q4(l,c[u])}return o}return t=i,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Bz(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var o=this.props,l=o.isDisabled,c=o.menuIsOpen,u=this.state.isFocused;(u&&!l&&s.isDisabled||u&&c&&!s.menuIsOpen)&&this.focusInput(),u&&l&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):u||l||!s.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Bz(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,o){this.props.onInputChange(s,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var o=this,l=this.state,c=l.selectValue,u=l.isFocused,A=this.buildFocusableOptions(),h=s==="first"?0:A.length-1;if(!this.props.isMulti){var m=A.indexOf(c[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(u&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:A[h],focusedOptionId:this.getFocusedOptionId(A[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(s){var o=this.state,l=o.selectValue,c=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var u=l.indexOf(c);c||(u=-1);var A=l.length-1,h=-1;if(l.length){switch(s){case"previous":h=u===0?0:u===-1?A:u-1;break;case"next":u>-1&&u<A&&(h=u+1)}this.setState({inputIsHidden:h!==-1,focusedValue:l[h]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var u=0,A=c.indexOf(l);l||(A=-1),s==="up"?u=A>0?A-1:c.length-1:s==="down"?u=(A+1)%c.length:s==="pageup"?(u=A-o)<0&&(u=0):s==="pagedown"?(u=A+o)>c.length-1&&(u=c.length-1):s==="last"&&(u=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[u],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[u])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(H4):dr(dr({},H4),this.props.theme):H4}},{key:"getCommonProps",value:function(){var s=this.clearValue,o=this.cx,l=this.getStyles,c=this.getClassNames,u=this.getValue,A=this.selectOption,h=this.setValue,m=this.props,v=m.isMulti,g=m.isRtl,y=m.options;return{clearValue:s,cx:o,getStyles:l,getClassNames:c,getValue:u,hasValue:this.hasValue(),isMulti:v,isRtl:g,options:y,selectOption:A,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,o=s.isClearable,l=s.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(s,o){return Uae(this.props,s,o)}},{key:"isOptionSelected",value:function(s,o){return jae(this.props,s,o)}},{key:"filterOption",value:function(s,o){return Hae(this.props,s,o)}},{key:"formatOptionLabel",value:function(s,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(s,{context:o,inputValue:l,selectValue:c})}return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,o=s.isDisabled,l=s.isSearchable,c=s.inputId,u=s.inputValue,A=s.tabIndex,h=s.form,m=s.menuIsOpen,v=s.required,g=this.getComponents().Input,y=this.state,w=y.inputIsHidden,T=y.ariaSelection,N=this.commonProps,F=c||this.getElementId("input"),B=dr(dr(dr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":v,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(T==null?void 0:T.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?L.createElement(g,Tr({},N,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:F,innerRef:this.getInputRef,isDisabled:o,isHidden:w,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:A,form:h,type:"text",value:u},B)):L.createElement(uJe,Tr({id:F,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:eS,onFocus:this.onInputFocus,disabled:o,tabIndex:A,inputMode:"none",form:h,value:""},B))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,o=this.getComponents(),l=o.MultiValue,c=o.MultiValueContainer,u=o.MultiValueLabel,A=o.MultiValueRemove,h=o.SingleValue,m=o.Placeholder,v=this.commonProps,g=this.props,y=g.controlShouldRenderValue,w=g.isDisabled,T=g.isMulti,N=g.inputValue,F=g.placeholder,B=this.state,D=B.selectValue,E=B.focusedValue,S=B.isFocused;if(!this.hasValue()||!y)return N?null:L.createElement(m,Tr({},v,{key:"placeholder",isDisabled:w,isFocused:S,innerProps:{id:this.getElementId("placeholder")}}),F);if(T)return D.map(function(H,P){var M=H===E,Q="".concat(s.getOptionLabel(H),"-").concat(s.getOptionValue(H));return L.createElement(l,Tr({},v,{components:{Container:c,Label:u,Remove:A},isFocused:M,isDisabled:w,key:Q,index:P,removeProps:{onClick:function(){return s.removeValue(H)},onTouchEnd:function(){return s.removeValue(H)},onMouseDown:function(V){V.preventDefault()}},data:H}),s.formatOptionLabel(H,"value"))});if(N)return null;var k=D[0];return L.createElement(h,Tr({},v,{data:k,isDisabled:w}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,A=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||u)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return L.createElement(s,Tr({},o,{innerProps:h,isFocused:A}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,A=this.state.isFocused;return s&&u?L.createElement(s,Tr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:c,isFocused:A})):null}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),o=s.DropdownIndicator,l=s.IndicatorSeparator;if(!o||!l)return null;var c=this.commonProps,u=this.props.isDisabled,A=this.state.isFocused;return L.createElement(l,Tr({},c,{isDisabled:u,isFocused:A}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents().DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return L.createElement(s,Tr({},o,{innerProps:u,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var s=this,o=this.getComponents(),l=o.Group,c=o.GroupHeading,u=o.Menu,A=o.MenuList,h=o.MenuPortal,m=o.LoadingMessage,v=o.NoOptionsMessage,g=o.Option,y=this.commonProps,w=this.state.focusedOption,T=this.props,N=T.captureMenuScroll,F=T.inputValue,B=T.isLoading,D=T.loadingMessage,E=T.minMenuHeight,S=T.maxMenuHeight,k=T.menuIsOpen,H=T.menuPlacement,P=T.menuPosition,M=T.menuPortalTarget,Q=T.menuShouldBlockScroll,V=T.menuShouldScrollIntoView,te=T.noOptionsMessage,W=T.onMenuScrollToTop,re=T.onMenuScrollToBottom;if(!k)return null;var z,X=function(Z,ne){var de=Z.type,xe=Z.data,Ae=Z.isDisabled,ae=Z.isSelected,ue=Z.label,le=Z.value,ie=w===xe,De=Ae?void 0:function(){return s.onOptionHover(xe)},Le=Ae?void 0:function(){return s.selectOption(xe)},Be="".concat(s.getElementId("option"),"-").concat(ne),Ce={id:Be,onClick:Le,onMouseMove:De,onMouseOver:De,tabIndex:-1,role:"option","aria-selected":s.isAppleDevice?void 0:ae};return L.createElement(g,Tr({},y,{innerProps:Ce,data:xe,isDisabled:Ae,isSelected:ae,key:Be,label:ue,type:de,value:le,isFocused:ie,innerRef:ie?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(Z.data,"menu"))};if(this.hasOptions())z=this.getCategorizedOptions().map(function(Z){if(Z.type==="group"){var ne=Z.data,de=Z.options,xe=Z.index,Ae="".concat(s.getElementId("group"),"-").concat(xe),ae="".concat(Ae,"-heading");return L.createElement(l,Tr({},y,{key:Ae,data:ne,options:de,Heading:c,headingProps:{id:ae,data:Z.data},label:s.formatGroupLabel(Z.data)}),Z.options.map(function(ue){return X(ue,"".concat(xe,"-").concat(ue.index))}))}if(Z.type==="option")return X(Z,"".concat(Z.index))});else if(B){var K=D({inputValue:F});if(K===null)return null;z=L.createElement(m,y,K)}else{var se=te({inputValue:F});if(se===null)return null;z=L.createElement(v,y,se)}var U={minMenuHeight:E,maxMenuHeight:S,menuPlacement:H,menuPosition:P,menuShouldScrollIntoView:V},Y=L.createElement(OXe,Tr({},y,U),function(Z){var ne=Z.ref,de=Z.placerProps,xe=de.placement,Ae=de.maxHeight;return L.createElement(u,Tr({},y,U,{innerRef:ne,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:B,placement:xe}),L.createElement(AJe,{captureEnabled:N,onTopArrive:W,onBottomArrive:re,lockEnabled:Q},function(ae){return L.createElement(A,Tr({},y,{innerRef:function(ue){s.getMenuListRef(ue),ae(ue)},innerProps:{role:"listbox","aria-multiselectable":y.isMulti,id:s.getElementId("listbox")},isLoading:B,maxHeight:Ae,focusedOption:w}),z)}))});return M||P==="fixed"?L.createElement(h,Tr({},y,{appendTo:M,controlElement:this.controlRef,menuPlacement:H,menuPosition:P}),Y):Y}},{key:"renderFormField",value:function(){var s=this,o=this.props,l=o.delimiter,c=o.isDisabled,u=o.isMulti,A=o.name,h=o.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!c)return L.createElement(pJe,{name:A,onFocus:this.onValueInputFocus});if(A&&!c){if(u){if(l){var v=m.map(function(w){return s.getOptionValue(w)}).join(l);return L.createElement("input",{name:A,type:"hidden",value:v})}var g=m.length>0?m.map(function(w,T){return L.createElement("input",{key:"i-".concat(T),name:A,type:"hidden",value:s.getOptionValue(w)})}):L.createElement("input",{name:A,type:"hidden",value:""});return L.createElement("div",null,g)}var y=m[0]?this.getOptionValue(m[0]):"";return L.createElement("input",{name:A,type:"hidden",value:y})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,o=this.state,l=o.ariaSelection,c=o.focusedOption,u=o.focusedValue,A=o.isFocused,h=o.selectValue,m=this.getFocusableOptions();return L.createElement(iJe,Tr({},s,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:c,focusedValue:u,isFocused:A,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),o=s.Control,l=s.IndicatorsContainer,c=s.SelectContainer,u=s.ValueContainer,A=this.props,h=A.className,m=A.id,v=A.isDisabled,g=A.menuIsOpen,y=this.state.isFocused,w=this.commonProps=this.getCommonProps();return L.createElement(c,Tr({},w,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:v,isFocused:y}),this.renderLiveRegion(),L.createElement(o,Tr({},w,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:v,isFocused:y,menuIsOpen:g}),L.createElement(u,Tr({},w,{isDisabled:v}),this.renderPlaceholderOrValue(),this.renderInput()),L.createElement(l,Tr({},w,{isDisabled:v}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(s,o){var l=o.prevProps,c=o.clearFocusValueOnUpdate,u=o.inputIsHiddenAfterUpdate,A=o.ariaSelection,h=o.isFocused,m=o.prevWasFocused,v=o.instancePrefix,g=s.options,y=s.value,w=s.menuIsOpen,T=s.inputValue,N=s.isMulti,F=Tz(y),B={};if(l&&(y!==l.value||g!==l.options||w!==l.menuIsOpen||T!==l.inputValue)){var D=w?function(Q,V){return Gz(_C(Q,V))}(s,F):[],E=w?qz(_C(s,F),"".concat(v,"-option")):[],S=c?function(Q,V){var te=Q.focusedValue,W=Q.selectValue.indexOf(te);if(W>-1){if(V.indexOf(te)>-1)return te;if(W<V.length)return V[W]}return null}(o,F):null,k=function(Q,V){var te=Q.focusedOption;return te&&V.indexOf(te)>-1?te:V[0]}(o,D);B={selectValue:F,focusedOption:k,focusedOptionId:Q4(E,k),focusableOptionsWithIds:E,focusedValue:S,clearFocusValueOnUpdate:!1}}var H=u!=null&&s!==l?{inputIsHidden:u,inputIsHiddenAfterUpdate:void 0}:{},P=A,M=h&&m;return h&&!M&&(P={value:EC(N,F,F[0]||null),options:F,action:"initial-input-focus"},M=!m),(A==null?void 0:A.action)==="initial-input-focus"&&(P=null),dr(dr(dr({},B),H),{},{prevProps:s,ariaSelection:P,prevWasFocused:M})}}],r&&lz(t.prototype,r),n&&lz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();Vae.defaultProps=xJe;var bJe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],wJe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],M6=Wn(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),CJe=Wn(function(e){var t=M6.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var i=a.call(r,n||"default");if(t(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),zae=Wn(function(e){var t=M6.default;e.exports=function(r){var n=CJe(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),EJe=Wn(function(e){e.exports=function(t,r,n){return(r=zae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});Wn(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),a.push.apply(a,i)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(i){EJe(r,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(a,i))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),Wn(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),Wn(function(e){function t(r,n){for(var a=0;a<n.length;a++){var i=n[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,zae(i.key),i)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var _Je=Wn(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});Wn(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_Je(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var Kz=Wn(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),SJe=Wn(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),TJe=Wn(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),NJe=Wn(function(e){var t=M6.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TJe(r)},e.exports.__esModule=!0,e.exports.default=e.exports});Wn(function(e){e.exports=function(t){var r=SJe();return function(){var n,a=Kz(t);if(r){var i=Kz(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return NJe(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var MF=Wn(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),BJe=Wn(function(e){e.exports=function(t){if(Array.isArray(t))return MF(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),kJe=Wn(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Gae=Wn(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return MF(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MF(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),IJe=Wn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});Wn(function(e){e.exports=function(t){return BJe(t)||kJe(t)||Gae(t)||IJe()},e.exports.__esModule=!0,e.exports.default=e.exports});var FJe=Wn(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),DJe=Wn(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==r);c=!0);}catch(A){u=!0,i=A}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}},e.exports.__esModule=!0,e.exports.default=e.exports}),RJe=Wn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});Wn(function(e){e.exports=function(t,r){return FJe(t)||DJe(t,r)||Gae(t,r)||RJe()},e.exports.__esModule=!0,e.exports.default=e.exports});var PJe=Wn(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,i={},s=Object.keys(t);for(a=0;a<s.length;a++)n=s[a],r.indexOf(n)>=0||(i[n]=t[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports});Wn(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,i=PJe(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports}),Wn(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var MJe=L.forwardRef(function(e,t){var r=function(a){var i=a.defaultOptions,s=i!==void 0&&i,o=a.cacheOptions,l=o!==void 0&&o,c=a.loadOptions;a.options;var u=a.isLoading,A=u!==void 0&&u,h=a.onInputChange,m=a.filterOption,v=m===void 0?null:m,g=Kd(a,wJe),y=g.inputValue,w=L.useRef(void 0),T=L.useRef(!1),N=Es(L.useState(Array.isArray(s)?s:void 0),2),F=N[0],B=N[1],D=Es(L.useState(y!==void 0?y:""),2),E=D[0],S=D[1],k=Es(L.useState(s===!0),2),H=k[0],P=k[1],M=Es(L.useState(void 0),2),Q=M[0],V=M[1],te=Es(L.useState([]),2),W=te[0],re=te[1],z=Es(L.useState(!1),2),X=z[0],K=z[1],se=Es(L.useState({}),2),U=se[0],Y=se[1],Z=Es(L.useState(void 0),2),ne=Z[0],de=Z[1],xe=Es(L.useState(void 0),2),Ae=xe[0],ae=xe[1];l!==Ae&&(Y({}),ae(l)),s!==ne&&(B(Array.isArray(s)?s:void 0),de(s)),L.useEffect(function(){return T.current=!0,function(){T.current=!1}},[]);var ue=L.useCallback(function(De,Le){if(!c)return Le();var Be=c(De,Le);Be&&typeof Be.then=="function"&&Be.then(Le,function(){return Le()})},[c]);L.useEffect(function(){s===!0&&ue(E,function(De){T.current&&(B(De||[]),P(!!w.current))})},[]);var le=L.useCallback(function(De,Le){var Be=function(Re,je,We){if(We){var ct=We(Re,je);if(typeof ct=="string")return ct}return Re}(De,Le,h);if(!Be)return w.current=void 0,S(""),V(""),re([]),P(!1),void K(!1);if(l&&U[Be])S(Be),V(Be),re(U[Be]),P(!1),K(!1);else{var Ce=w.current={};S(Be),P(!0),K(!Q),ue(Be,function(Re){T&&Ce===w.current&&(w.current=void 0,P(!1),V(Be),re(Re||[]),K(!1),Y(Re?dr(dr({},U),{},Qg({},Be,Re)):U))})}},[l,ue,Q,U,h]),ie=X?[]:E&&Q?W:F||[];return dr(dr({},g),{},{options:ie,isLoading:H||A,onInputChange:le,filterOption:v})}(e),n=function(a){var i=a.defaultInputValue,s=i===void 0?"":i,o=a.defaultMenuIsOpen,l=o!==void 0&&o,c=a.defaultValue,u=c===void 0?null:c,A=a.inputValue,h=a.menuIsOpen,m=a.onChange,v=a.onInputChange,g=a.onMenuClose,y=a.onMenuOpen,w=a.value,T=Kd(a,bJe),N=Es(L.useState(A!==void 0?A:s),2),F=N[0],B=N[1],D=Es(L.useState(h!==void 0?h:l),2),E=D[0],S=D[1],k=Es(L.useState(w!==void 0?w:u),2),H=k[0],P=k[1],M=L.useCallback(function(X,K){typeof m=="function"&&m(X,K),P(X)},[m]),Q=L.useCallback(function(X,K){var se;typeof v=="function"&&(se=v(X,K)),B(se!==void 0?se:X)},[v]),V=L.useCallback(function(){typeof y=="function"&&y(),S(!0)},[y]),te=L.useCallback(function(){typeof g=="function"&&g(),S(!1)},[g]),W=A!==void 0?A:F,re=h!==void 0?h:E,z=w!==void 0?w:H;return dr(dr({},T),{},{inputValue:W,menuIsOpen:re,onChange:M,onInputChange:Q,onMenuClose:te,onMenuOpen:V,value:z})}(r);return L.createElement(Vae,Tr({ref:t},n))}),LJe=MJe,OJe=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!=0;){var s=i[a];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r},Vg;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Vg||(Vg={}));class vp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:i="__googleMapsScriptId",language:s,libraries:o=[],mapIds:l,nonce:c,region:u,retries:A=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=i||"__googleMapsScriptId",this.language=s,this.libraries=o,this.mapIds=l,this.nonce=c,this.region=u,this.retries=A,this.url=h,this.version=m,vp.instance){if(!OJe(this.options,vp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(vp.instance.options)}`);return vp.instance}vp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Vg.FAILURE:this.done?Vg.SUCCESS:this.loading?Vg.LOADING:Vg.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var UJe=function(e,t,r){var n,a=e.bounds,i=e.location,s=function(l,c){var u={};for(var A in l)Object.prototype.hasOwnProperty.call(l,A)&&c.indexOf(A)<0&&(u[A]=l[A]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(A=Object.getOwnPropertySymbols(l);h<A.length;h++)c.indexOf(A[h])<0&&Object.prototype.propertyIsEnumerable.call(l,A[h])&&(u[A[h]]=l[A[h]])}return u}(e,["bounds","location"]),o=Up({input:t},s);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var l=0,c=0,u=arguments.length;c<u;c++)l+=arguments[c].length;var A=Array(l),h=0;for(c=0;c<u;c++)for(var m=arguments[c],v=0,g=m.length;v<g;v++,h++)A[h]=m[v];return A}([void 0],a)))),i&&(o.location=new google.maps.LatLng(i)),o},jJe=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,i=e.sessionToken,s=e.withSessionToken,o=function(l,c,u){u===void 0&&(u={});var A=u.maxWait,h=L.useRef(null),m=L.useRef([]),v=u.leading,g=u.trailing===void 0||u.trailing,y=L.useRef(!1),w=L.useRef(null),T=L.useRef(!1),N=L.useRef(l);N.current=l;var F=L.useCallback(function(){clearTimeout(w.current),clearTimeout(h.current),h.current=null,m.current=[],w.current=null,y.current=!1},[]);L.useEffect(function(){return T.current=!1,function(){T.current=!0}},[]);var B=L.useCallback(function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];m.current=E,clearTimeout(w.current),y.current&&(y.current=!1),w.current||!v||y.current||(N.current.apply(N,E),y.current=!0),w.current=setTimeout(function(){var k=!0;v&&y.current&&(k=!1),F(),!T.current&&g&&k&&N.current.apply(N,E)},c),A&&!h.current&&g&&(h.current=setTimeout(function(){var k=m.current;F(),T.current||N.current.apply(null,k)},A))},[A,c,F,v,g]),D=L.useCallback(function(){w.current&&(N.current.apply(null,m.current),F())},[F]);return[B,F,D]}(function(l,c){if(!a)return c([]);if(l.length<n)return c([]);var u=Up({},t);a.getPlacePredictions(UJe(u,l,s&&i),function(A){c((A||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},Wz=L.forwardRef(function(e,t){var r,n,a,i,s,o,l,c,u=function(g){var y=g.apiKey,w=g.apiOptions,T=g.onLoadFailed,N=L.useState(void 0),F=N[0],B=N[1],D=L.useState(void 0),E=D[0],S=D[1],k=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");B(new window.google.maps.places.AutocompleteService),S(new google.maps.places.AutocompleteSessionToken)};return L.useEffect(function(){y?zYe(void 0,void 0,void 0,function(){var H;return GYe(this,function(P){switch(P.label){case 0:if(!y)return[2];P.label=1;case 1:return P.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new vp(Up({apiKey:y},Up({libraries:["places"]},w))).load()];case 2:P.sent(),P.label=3;case 3:return k(),[3,5];case 4:return H=P.sent(),typeof T=="function"&&T(H),[3,5];case 5:return[2]}})}):k()},[]),{placesService:F,sessionToken:E,setSessionToken:S}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),A=u.placesService,h=u.sessionToken,m=u.setSessionToken,v=jJe({autocompletionRequest:(i=e.autocompletionRequest)!==null&&i!==void 0?i:{},debounce:(s=e.debounce)!==null&&s!==void 0?s:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:A,sessionToken:h,withSessionToken:(l=e.withSessionToken)!==null&&l!==void 0&&l});return L.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),ft.createElement(LJe,Up({},(c=e.selectProps)!==null&&c!==void 0?c:{},{loadOptions:v,getOptionValue:function(g){return g.value.place_id}}))});function qae(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=qae(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function _a(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=qae(e))&&(n&&(n+=" "),n+=t);return n}var V4={},z4={},Yz;function HJe(){return Yz||(Yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(z4)),z4}var G4={},Xz;function $ae(){return Xz||(Xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(G4)),G4}var q4={},Jz;function Kae(){return Jz||(Jz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(q4)),q4}var $4={},Zz;function L6(){return Zz||(Zz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let i=0,s="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<a;){const c=r[i];o?c==="\\"&&i+1<a?(i++,s+=r[i]):c===o?o="":s+=c:l?c==='"'||c==="'"?o=c:c==="]"?(l=!1,n.push(s),s=""):s+=c:c==="["?(l=!0,s&&(n.push(s),s="")):c==="."?s&&(n.push(s),s=""):s+=c,i++}return s&&n.push(s),n}e.toPath=t}($4)),$4}var eG;function O6(){return eG||(eG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HJe(),r=$ae(),n=Kae(),a=L6();function i(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?r.isDeepKey(l)?i(o,a.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const u=o[l];return u===void 0?c:u}default:{if(Array.isArray(l))return s(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?c:u}}}function s(o,l,c){if(l.length===0)return c;let u=o;for(let A=0;A<l.length;A++){if(u==null||t.isUnsafeProperty(l[A]))return c;u=u[l[A]]}return u===void 0?c:u}e.get=i}(V4)),V4}var K4,tG;function QJe(){return tG||(tG=1,K4=O6().get),K4}var VJe=QJe();const om=mc(VJe);var W4={exports:{}},Gn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rG;function zJe(){if(rG)return Gn;rG=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,A=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,T=e?Symbol.for("react.scope"):60119;function N(B){if(typeof B=="object"&&B!==null){var D=B.$$typeof;switch(D){case t:switch(B=B.type,B){case l:case c:case n:case i:case a:case A:return B;default:switch(B=B&&B.$$typeof,B){case o:case u:case v:case m:case s:return B;default:return D}}case r:return D}}}function F(B){return N(B)===c}return Gn.AsyncMode=l,Gn.ConcurrentMode=c,Gn.ContextConsumer=o,Gn.ContextProvider=s,Gn.Element=t,Gn.ForwardRef=u,Gn.Fragment=n,Gn.Lazy=v,Gn.Memo=m,Gn.Portal=r,Gn.Profiler=i,Gn.StrictMode=a,Gn.Suspense=A,Gn.isAsyncMode=function(B){return F(B)||N(B)===l},Gn.isConcurrentMode=F,Gn.isContextConsumer=function(B){return N(B)===o},Gn.isContextProvider=function(B){return N(B)===s},Gn.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===t},Gn.isForwardRef=function(B){return N(B)===u},Gn.isFragment=function(B){return N(B)===n},Gn.isLazy=function(B){return N(B)===v},Gn.isMemo=function(B){return N(B)===m},Gn.isPortal=function(B){return N(B)===r},Gn.isProfiler=function(B){return N(B)===i},Gn.isStrictMode=function(B){return N(B)===a},Gn.isSuspense=function(B){return N(B)===A},Gn.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===n||B===c||B===i||B===a||B===A||B===h||typeof B=="object"&&B!==null&&(B.$$typeof===v||B.$$typeof===m||B.$$typeof===s||B.$$typeof===o||B.$$typeof===u||B.$$typeof===y||B.$$typeof===w||B.$$typeof===T||B.$$typeof===g)},Gn.typeOf=N,Gn}var nG;function GJe(){return nG||(nG=1,W4.exports=zJe()),W4.exports}var qJe=GJe(),wl=e=>e===0?0:e>0?1:-1,fc=e=>typeof e=="number"&&e!=+e,_p=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ir=e=>(typeof e=="number"||e instanceof Number)&&!fc(e),df=e=>ir(e)||typeof e=="string",$Je=0,db=e=>{var t=++$Je;return"".concat(e||"").concat(t)},rd=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ir(t)&&typeof t!="string")return n;var i;if(_p(t)){if(r==null)return n;var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return fc(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},Wae=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function _g(e,t,r){return ir(e)&&ir(t)?e+r*(t-e):t}function KJe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):om(n,t))===r)}var us=e=>e===null||typeof e>"u",rw=e=>us(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),WJe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function U6(e){if(typeof e!="string")return!1;var t=WJe;return t.includes(e)}var YJe=["viewBox","children"],aG=["points","pathLength"],Y4={svg:YJe,polygon:aG,polyline:aG},XJe=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(L.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{U6(a)&&(n[a]=i=>r[a](r,i))}),n},JJe=(e,t,r)=>n=>(e(t,r,n),null),c5=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];U6(a)&&typeof i=="function"&&(n||(n={}),n[a]=JJe(i,t,r))}),n},ZJe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Yae(e){if(typeof e!="string")return!1;var t=ZJe;return t.includes(e)}function nw(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Yae(n)});return Object.fromEntries(t)}var iG=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",sG=null,X4=null,Xae=e=>{if(e===sG&&Array.isArray(X4))return X4;var t=[];return L.Children.forEach(e,r=>{us(r)||(qJe.isFragment(r)?t=t.concat(Xae(r.props.children)):t.push(r))}),X4=t,sG=e,t};function j6(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>iG(a)):n=[iG(t)],Xae(e).forEach(a=>{var i=om(a,"type.displayName")||om(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var eZe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(a=n&&(Y4==null?void 0:Y4[n]))!==null&&a!==void 0?a:[],s=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&i.includes(t)||Yae(t)),l=!!r&&U6(t);return s||o||l},Is=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(L.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{var s;eZe((s=n)===null||s===void 0?void 0:s[i],i,t,r)&&(a[i]=n[i])}),a},tZe=["children","width","height","viewBox","className","style","title","desc"];function LF(){return LF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LF.apply(null,arguments)}function rZe(e,t){if(e==null)return{};var r,n,a=nZe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var H6=L.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:s,style:o,title:l,desc:c}=e,u=rZe(e,tZe),A=i||{width:n,height:a,x:0,y:0},h=_a("recharts-surface",s);return L.createElement("svg",LF({},Is(u,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(A.x," ").concat(A.y," ").concat(A.width," ").concat(A.height),ref:t}),L.createElement("title",null,l),L.createElement("desc",null,c),r)}),aZe=["children","className"];function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OF.apply(null,arguments)}function iZe(e,t){if(e==null)return{};var r,n,a=sZe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var E0=L.forwardRef((e,t)=>{var{children:r,className:n}=e,a=iZe(e,aZe),i=_a("recharts-layer",n);return L.createElement("g",OF({className:i},Is(a,!0),{ref:t}),r)}),Jae=L.createContext(null),oZe=()=>L.useContext(Jae),lZe=["type","size","sizeType"];function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UF.apply(null,arguments)}function oG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oG(Object(r),!0).forEach(function(n){cZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cZe(e,t,r){return(t=uZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uZe(e){var t=dZe(e,"string");return typeof t=="symbol"?t:t+""}function dZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fZe(e,t){if(e==null)return{};var r,n,a=AZe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Zae={symbolCircle:S6,symbolCross:QWe,symbolDiamond:zWe,symbolSquare:GWe,symbolStar:WWe,symbolTriangle:YWe,symbolWye:JWe},hZe=Math.PI/180,pZe=e=>{var t="symbol".concat(rw(e));return Zae[t]||S6},mZe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*hZe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gZe=(e,t)=>{Zae["symbol".concat(rw(e))]=t},Q6=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=fZe(e,lZe),i=lG(lG({},a),{},{type:t,size:r,sizeType:n}),s=()=>{var A=pZe(t),h=ZWe().type(A).size(mZe(r,n,t));return h()},{className:o,cx:l,cy:c}=i,u=Is(i,!0);return l===+l&&c===+c&&r===+r?L.createElement("path",UF({},u,{className:_a("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(c,")"),d:s()})):null};Q6.registerSymbol=gZe;function jF(){return jF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jF.apply(null,arguments)}function cG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vZe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cG(Object(r),!0).forEach(function(n){V6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V6(e,t,r){return(t=xZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xZe(e){var t=yZe(e,"string");return typeof t=="symbol"?t:t+""}function yZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gc=32;class z6 extends L.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Gc/2,i=Gc/6,s=Gc/3,o=t.inactive?n:t.color,l=r??t.type;if(l==="none")return null;if(l==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Gc,y2:a,className:"recharts-legend-icon"});if(l==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(Gc,"M").concat(2*s,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(l==="rect")return L.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Gc/8,"h").concat(Gc,"v").concat(Gc*3/4,"h").concat(-Gc,"z"),className:"recharts-legend-icon"});if(L.isValidElement(t.legendIcon)){var c=vZe({},t);return delete c.legendIcon,L.cloneElement(t.legendIcon,c)}return L.createElement(Q6,{fill:o,cx:a,cy:a,size:Gc,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:s}=this.props,o={x:0,y:0,width:Gc,height:Gc},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,A)=>{var h=u.formatter||a,m=_a({"recharts-legend-item":!0,["legend-item-".concat(A)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,g=h?h(u.value,u,A):u.value;return L.createElement("li",jF({className:m,style:l,key:"legend-item-".concat(A)},c5(this.props,u,A)),L.createElement(H6,{width:r,height:r,viewBox:o,style:c,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,s)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},g))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}V6(z6,"displayName","Legend");V6(z6,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var J4={},Z4={},uG;function bZe(){return uG||(uG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const s=r[i],o=n(s);a.has(o)||a.set(o,s)}return Array.from(a.values())}e.uniqBy=t}(Z4)),Z4}var ek={},dG;function eie(){return dG||(dG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(ek)),ek}var tk={},rk={},nk={},fG;function wZe(){return fG||(fG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(nk)),nk}var AG;function G6(){return AG||(AG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wZe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(rk)),rk}var ak={},hG;function CZe(){return hG||(hG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(ak)),ak}var pG;function EZe(){return pG||(pG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G6(),r=CZe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(tk)),tk}var ik={},sk={},mG;function _Ze(){return mG||(mG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O6();function r(n){return function(a){return t.get(a,n)}}e.property=r}(sk)),sk}var ok={},lk={},ck={},uk={},gG;function tie(){return gG||(gG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(uk)),uk}var dk={},vG;function rie(){return vG||(vG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(dk)),dk}var fk={},xG;function q6(){return xG||(xG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(fk)),fk}var yG;function SZe(){return yG||(yG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$6(),r=tie(),n=rie(),a=q6();function i(A,h,m){return typeof m!="function"?t.isMatch(A,h):s(A,h,function v(g,y,w,T,N,F){const B=m(g,y,w,T,N,F);return B!==void 0?!!B:s(g,y,v,F)},new Map)}function s(A,h,m,v){if(h===A)return!0;switch(typeof h){case"object":return o(A,h,m,v);case"function":return Object.keys(h).length>0?s(A,{...h},m,v):a.eq(A,h);default:return r.isObject(A)?typeof h=="string"?h==="":!0:a.eq(A,h)}}function o(A,h,m,v){if(h==null)return!0;if(Array.isArray(h))return c(A,h,m,v);if(h instanceof Map)return l(A,h,m,v);if(h instanceof Set)return u(A,h,m,v);const g=Object.keys(h);if(A==null)return g.length===0;if(g.length===0)return!0;if(v&&v.has(h))return v.get(h)===A;v&&v.set(h,A);try{for(let y=0;y<g.length;y++){const w=g[y];if(!n.isPrimitive(A)&&!(w in A)||h[w]===void 0&&A[w]!==void 0||h[w]===null&&A[w]!==null||!m(A[w],h[w],w,A,h,v))return!1}return!0}finally{v&&v.delete(h)}}function l(A,h,m,v){if(h.size===0)return!0;if(!(A instanceof Map))return!1;for(const[g,y]of h.entries()){const w=A.get(g);if(m(w,y,g,A,h,v)===!1)return!1}return!0}function c(A,h,m,v){if(h.length===0)return!0;if(!Array.isArray(A))return!1;const g=new Set;for(let y=0;y<h.length;y++){const w=h[y];let T=!1;for(let N=0;N<A.length;N++){if(g.has(N))continue;const F=A[N];let B=!1;if(m(F,w,y,A,h,v)&&(B=!0),B){g.add(N),T=!0;break}}if(!T)return!1}return!0}function u(A,h,m,v){return h.size===0?!0:A instanceof Set?c([...A],[...h],m,v):!1}e.isMatchWith=i,e.isSetMatch=u}(ck)),ck}var bG;function $6(){return bG||(bG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SZe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(lk)),lk}var Ak={},hk={},pk={},wG;function nie(){return wG||(wG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(pk)),pk}var mk={},CG;function K6(){return CG||(CG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(mk)),mk}var gk={},EG;function W6(){return EG||(EG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",A="[object Function]",h="[object ArrayBuffer]",m="[object Object]",v="[object Error]",g="[object DataView]",y="[object Uint8Array]",w="[object Uint8ClampedArray]",T="[object Uint16Array]",N="[object Uint32Array]",F="[object BigUint64Array]",B="[object Int8Array]",D="[object Int16Array]",E="[object Int32Array]",S="[object BigInt64Array]",k="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=u,e.bigInt64ArrayTag=S,e.bigUint64ArrayTag=F,e.booleanTag=a,e.dataViewTag=g,e.dateTag=o,e.errorTag=v,e.float32ArrayTag=k,e.float64ArrayTag=H,e.functionTag=A,e.int16ArrayTag=D,e.int32ArrayTag=E,e.int8ArrayTag=B,e.mapTag=l,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=T,e.uint32ArrayTag=N,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=w}(gk)),gk}var vk={},_G;function TZe(){return _G||(_G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(vk)),vk}var SG;function aie(){return SG||(SG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nie(),r=K6(),n=W6(),a=rie(),i=TZe();function s(u,A){return o(u,void 0,u,new Map,A)}function o(u,A,h,m=new Map,v=void 0){const g=v==null?void 0:v(u,A,h,m);if(g!=null)return g;if(a.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const y=new Array(u.length);m.set(u,y);for(let w=0;w<u.length;w++)y[w]=o(u[w],w,h,m,v);return Object.hasOwn(u,"index")&&(y.index=u.index),Object.hasOwn(u,"input")&&(y.input=u.input),y}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const y=new RegExp(u.source,u.flags);return y.lastIndex=u.lastIndex,y}if(u instanceof Map){const y=new Map;m.set(u,y);for(const[w,T]of u)y.set(w,o(T,w,h,m,v));return y}if(u instanceof Set){const y=new Set;m.set(u,y);for(const w of u)y.add(o(w,void 0,h,m,v));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const y=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,y);for(let w=0;w<u.length;w++)y[w]=o(u[w],w,h,m,v);return y}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const y=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,y),l(y,u,h,m,v),y}if(typeof File<"u"&&u instanceof File){const y=new File([u],u.name,{type:u.type});return m.set(u,y),l(y,u,h,m,v),y}if(u instanceof Blob){const y=new Blob([u],{type:u.type});return m.set(u,y),l(y,u,h,m,v),y}if(u instanceof Error){const y=new u.constructor;return m.set(u,y),y.message=u.message,y.name=u.name,y.stack=u.stack,y.cause=u.cause,l(y,u,h,m,v),y}if(typeof u=="object"&&c(u)){const y=Object.create(Object.getPrototypeOf(u));return m.set(u,y),l(y,u,h,m,v),y}return u}function l(u,A,h=u,m,v){const g=[...Object.keys(A),...t.getSymbols(A)];for(let y=0;y<g.length;y++){const w=g[y],T=Object.getOwnPropertyDescriptor(u,w);(T==null||T.writable)&&(u[w]=o(A[w],w,h,m,v))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=l}(hk)),hk}var TG;function NZe(){return TG||(TG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aie();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(Ak)),Ak}var NG;function BZe(){return NG||(NG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$6(),r=NZe();function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n}(ok)),ok}var xk={},yk={},bk={},BG;function kZe(){return BG||(BG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aie(),r=W6();function n(a,i){return t.cloneDeepWith(a,(s,o,l,c)=>{const u=i==null?void 0:i(s,o,l,c);if(u!=null)return u;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const A=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(A,a),A}case r.argumentsTag:{const A={};return t.copyProperties(A,a),A.length=a.length,A[Symbol.iterator]=a[Symbol.iterator],A}default:return}})}e.cloneDeepWith=n}(bk)),bk}var kG;function IZe(){return kG||(kG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kZe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(yk)),yk}var wk={},Ck={},IG;function iie(){return IG||(IG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(Ck)),Ck}var Ek={},FG;function FZe(){return FG||(FG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K6();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(Ek)),Ek}var DG;function DZe(){return DG||(DG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$ae(),r=iie(),n=FZe(),a=L6();function i(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=a.toPath(o):l=[o],l.length===0)return!1;let c=s;for(let u=0;u<l.length;u++){const A=l[u];if((c==null||!Object.hasOwn(c,A))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(A)&&A<c.length))return!1;c=c[A]}return!0}e.has=i}(wk)),wk}var RG;function RZe(){return RG||(RG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$6(),r=Kae(),n=IZe(),a=O6(),i=DZe();function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(c){const u=a.get(c,o);return u===void 0?i.has(c,o):l===void 0?u===void 0:t.isMatch(u,l)}}e.matchesProperty=s}(xk)),xk}var PG;function PZe(){return PG||(PG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eie(),r=_Ze(),n=BZe(),a=RZe();function i(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?a.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=i}(ik)),ik}var MG;function MZe(){return MG||(MG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bZe(),r=eie(),n=EZe(),a=PZe();function i(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),a.iteratee(o)):[]}e.uniqBy=i}(J4)),J4}var _k,LG;function LZe(){return LG||(LG=1,_k=MZe().uniqBy),_k}var OZe=LZe();const OG=mc(OZe);function sie(e,t,r){return t===!0?OG(e,r):typeof t=="function"?OG(e,t):e}var Y6=L.createContext(null),UZe=e=>e,Xi=()=>{var e=L.useContext(Y6);return e?e.store.dispatch:UZe},_E=()=>{},jZe=()=>_E,HZe=(e,t)=>e===t;function vr(e){var t=L.useContext(Y6);return Ste.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:jZe,t?t.store.getState:_E,t?t.store.getState:_E,t?e:_E,HZe)}function QZe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function VZe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function zZe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var UG=e=>Array.isArray(e)?e:[e];function GZe(e){const t=Array.isArray(e[0])?e[0]:e;return zZe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function qZe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var $Ze=class{constructor(e){this.value=e}deref(){return this.value}},KZe=typeof WeakRef<"u"?WeakRef:$Ze,WZe=0,jG=1;function SC(){return{s:WZe,v:void 0,o:null,p:null}}function oie(e,t={}){let r=SC();const{resultEqualityCheck:n}=t;let a,i=0;function s(){var A;let o=r;const{length:l}=arguments;for(let h=0,m=l;h<m;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let g=o.o;g===null&&(o.o=g=new WeakMap);const y=g.get(v);y===void 0?(o=SC(),g.set(v,o)):o=y}else{let g=o.p;g===null&&(o.p=g=new Map);const y=g.get(v);y===void 0?(o=SC(),g.set(v,o)):o=y}}const c=o;let u;if(o.s===jG)u=o.v;else if(u=e.apply(null,arguments),i++,n){const h=((A=a==null?void 0:a.deref)==null?void 0:A.call(a))??a;h!=null&&n(h,u)&&(u=h,i!==0&&i--),a=typeof u=="object"&&u!==null||typeof u=="function"?new KZe(u):u}return c.s=jG,c.v=u,u}return s.clearCache=()=>{r=SC(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function YZe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,s=0,o,l={},c=a.pop();typeof c=="object"&&(l=c,c=a.pop()),QZe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...l},{memoize:A,memoizeOptions:h=[],argsMemoize:m=oie,argsMemoizeOptions:v=[]}=u,g=UG(h),y=UG(v),w=GZe(a),T=A(function(){return i++,c.apply(null,arguments)},...g),N=m(function(){s++;const B=qZe(w,arguments);return o=T.apply(null,B),o},...y);return Object.assign(N,{resultFunc:c,memoizedResultFunc:T,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:A,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var ut=YZe(oie),XZe=Object.assign((e,t=ut)=>{VZe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((s,o,l)=>(s[r[l]]=o,s),{}))},{withTypes:()=>XZe}),Sk={},Tk={},Nk={},HG;function JZe(){return HG||(HG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const s=t(n),o=t(a);if(s===o&&s===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?o-s:s-o}return 0};e.compareValues=r}(Nk)),Nk}var Bk={},kk={},QG;function lie(){return QG||(QG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(kk)),kk}var VG;function ZZe(){return VG||(VG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lie(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||s!=null&&Object.hasOwn(s,i)}e.isKey=a}(Bk)),Bk}var zG;function eet(){return zG||(zG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JZe(),r=ZZe(),n=L6();function a(i,s,o,l){if(i==null)return[];o=l?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,v)=>{let g=m;for(let y=0;y<v.length&&g!=null;++y)g=g[v[y]];return g},u=(m,v)=>v==null||m==null?v:typeof m=="object"&&"key"in m?Object.hasOwn(v,m.key)?v[m.key]:c(v,m.path):typeof m=="function"?m(v):Array.isArray(m)?c(v,m):typeof v=="object"?v[m]:v,A=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:A.map(v=>u(v,m))})).slice().sort((m,v)=>{for(let g=0;g<A.length;g++){const y=t.compareValues(m.criteria[g],v.criteria[g],o[g]);if(y!==0)return y}return 0}).map(m=>m.original)}e.orderBy=a}(Tk)),Tk}var Ik={},GG;function tet(){return GG||(GG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),s=(o,l)=>{for(let c=0;c<o.length;c++){const u=o[c];Array.isArray(u)&&l<i?s(u,l+1):a.push(u)}};return s(r,0),a}e.flatten=t}(Ik)),Ik}var Fk={},qG;function cie(){return qG||(qG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iie(),r=G6(),n=tie(),a=q6();function i(s,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?a.eq(l[o],s):!1}e.isIterateeCall=i}(Fk)),Fk}var $G;function ret(){return $G||($G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eet(),r=tet(),n=cie();function a(i,...s){const o=s.length;return o>1&&n.isIterateeCall(i,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(i,r.flatten(s),["asc"])}e.sortBy=a}(Sk)),Sk}var Dk,KG;function net(){return KG||(KG=1,Dk=ret().sortBy),Dk}var aet=net();const u5=mc(aet);var uie=e=>e.legend.settings,iet=e=>e.legend.size,set=e=>e.legend.payload,oet=ut([set,uie],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?u5(n,r):n});function cet(){return vr(oet)}var TC=1;function die(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=L.useState({height:0,left:0,top:0,width:0}),n=L.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),s={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(s.height-t.height)>TC||Math.abs(s.left-t.left)>TC||Math.abs(s.top-t.top)>TC||Math.abs(s.width-t.width)>TC)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Gs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var uet=typeof Symbol=="function"&&Symbol.observable||"@@observable",WG=uet,Rk=()=>Math.random().toString(36).substring(7).split("").join("."),det={INIT:`@@redux/INIT${Rk()}`,REPLACE:`@@redux/REPLACE${Rk()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Rk()}`},nS=det;function X6(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function fie(e,t,r){if(typeof e!="function")throw new Error(Gs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Gs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Gs(1));return r(fie)(e,t)}let n=e,a=t,i=new Map,s=i,o=0,l=!1;function c(){s===i&&(s=new Map,i.forEach((y,w)=>{s.set(w,y)}))}function u(){if(l)throw new Error(Gs(3));return a}function A(y){if(typeof y!="function")throw new Error(Gs(4));if(l)throw new Error(Gs(5));let w=!0;c();const T=o++;return s.set(T,y),function(){if(w){if(l)throw new Error(Gs(6));w=!1,c(),s.delete(T),i=null}}}function h(y){if(!X6(y))throw new Error(Gs(7));if(typeof y.type>"u")throw new Error(Gs(8));if(typeof y.type!="string")throw new Error(Gs(17));if(l)throw new Error(Gs(9));try{l=!0,a=n(a,y)}finally{l=!1}return(i=s).forEach(T=>{T()}),y}function m(y){if(typeof y!="function")throw new Error(Gs(10));n=y,h({type:nS.REPLACE})}function v(){const y=A;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Gs(11));function T(){const F=w;F.next&&F.next(u())}return T(),{unsubscribe:y(T)}},[WG](){return this}}}return h({type:nS.INIT}),{dispatch:h,subscribe:A,getState:u,replaceReducer:m,[WG]:v}}function fet(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:nS.INIT})>"u")throw new Error(Gs(12));if(typeof r(void 0,{type:nS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gs(13))})}function Aie(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let a;try{fet(r)}catch(i){a=i}return function(s={},o){if(a)throw a;let l=!1;const c={};for(let u=0;u<n.length;u++){const A=n[u],h=r[A],m=s[A],v=h(m,o);if(typeof v>"u")throw o&&o.type,new Error(Gs(14));c[A]=v,l=l||v!==m}return l=l||n.length!==Object.keys(s).length,l?c:s}}function aS(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Aet(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Gs(15))};const s={getState:a.getState,dispatch:(l,...c)=>i(l,...c)},o=e.map(l=>l(s));return i=aS(...o)(a.dispatch),{...a,dispatch:i}}}function hie(e){return X6(e)&&"type"in e&&typeof e.type=="string"}var pie=Symbol.for("immer-nothing"),YG=Symbol.for("immer-draftable"),Ac=Symbol.for("immer-state");function $u(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ov=Object.getPrototypeOf;function lm(e){return!!e&&!!e[Ac]}function BA(e){var t;return e?mie(e)||Array.isArray(e)||!!e[YG]||!!((t=e.constructor)!=null&&t[YG])||f5(e)||A5(e):!1}var het=Object.prototype.constructor.toString();function mie(e){if(!e||typeof e!="object")return!1;const t=Ov(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===het}function iS(e,t){d5(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function d5(e){const t=e[Ac];return t?t.type_:Array.isArray(e)?1:f5(e)?2:A5(e)?3:0}function HF(e,t){return d5(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function gie(e,t,r){const n=d5(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function pet(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function f5(e){return e instanceof Map}function A5(e){return e instanceof Set}function fp(e){return e.copy_||e.base_}function QF(e,t){if(f5(e))return new Map(e);if(A5(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=mie(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ac];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const s=a[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Ov(e),n)}else{const n=Ov(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function J6(e,t=!1){return h5(e)||lm(e)||!BA(e)||(d5(e)>1&&(e.set=e.add=e.clear=e.delete=met),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>J6(n,!0))),e}function met(){$u(2)}function h5(e){return Object.isFrozen(e)}var get={};function cm(e){const t=get[e];return t||$u(0,e),t}var fb;function vie(){return fb}function vet(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function XG(e,t){t&&(cm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function VF(e){zF(e),e.drafts_.forEach(xet),e.drafts_=null}function zF(e){e===fb&&(fb=e.parent_)}function JG(e){return fb=vet(fb,e)}function xet(e){const t=e[Ac];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ZG(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ac].modified_&&(VF(t),$u(4)),BA(e)&&(e=sS(t,e),t.parent_||oS(t,e)),t.patches_&&cm("Patches").generateReplacementPatches_(r[Ac].base_,e,t.patches_,t.inversePatches_)):e=sS(t,r,[]),VF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pie?e:void 0}function sS(e,t,r){if(h5(t))return t;const n=t[Ac];if(!n)return iS(t,(a,i)=>eq(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return oS(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,s=!1;n.type_===3&&(i=new Set(a),a.clear(),s=!0),iS(i,(o,l)=>eq(e,n,a,o,l,r,s)),oS(e,a,!1),r&&e.patches_&&cm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function eq(e,t,r,n,a,i,s){if(lm(a)){const o=i&&t&&t.type_!==3&&!HF(t.assigned_,n)?i.concat(n):void 0,l=sS(e,a,o);if(gie(r,n,l),lm(l))e.canAutoFreeze_=!1;else return}else s&&r.add(a);if(BA(a)&&!h5(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sS(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&oS(e,a)}}function oS(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&J6(t,r)}function yet(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:vie(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Z6;r&&(a=[n],i=Ab);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=s,o}var Z6={get(e,t){if(t===Ac)return e;const r=fp(e);if(!HF(r,t))return bet(e,r,t);const n=r[t];return e.finalized_||!BA(n)?n:n===Pk(e.base_,t)?(Mk(e),e.copy_[t]=qF(n,e)):n},has(e,t){return t in fp(e)},ownKeys(e){return Reflect.ownKeys(fp(e))},set(e,t,r){const n=xie(fp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Pk(fp(e),t),i=a==null?void 0:a[Ac];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(pet(r,a)&&(r!==void 0||HF(e.base_,t)))return!0;Mk(e),GF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Pk(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Mk(e),GF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=fp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){$u(11)},getPrototypeOf(e){return Ov(e.base_)},setPrototypeOf(){$u(12)}},Ab={};iS(Z6,(e,t)=>{Ab[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ab.deleteProperty=function(e,t){return Ab.set.call(this,e,t,void 0)};Ab.set=function(e,t,r){return Z6.set.call(this,e[0],t,r,e[0])};function Pk(e,t){const r=e[Ac];return(r?fp(r):e)[t]}function bet(e,t,r){var a;const n=xie(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function xie(e,t){if(!(t in e))return;let r=Ov(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ov(r)}}function GF(e){e.modified_||(e.modified_=!0,e.parent_&&GF(e.parent_))}function Mk(e){e.copy_||(e.copy_=QF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wet=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const s=this;return function(l=i,...c){return s.produce(l,u=>r.call(this,u,...c))}}typeof r!="function"&&$u(6),n!==void 0&&typeof n!="function"&&$u(7);let a;if(BA(t)){const i=JG(this),s=qF(t,void 0);let o=!0;try{a=r(s),o=!1}finally{o?VF(i):zF(i)}return XG(i,n),ZG(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===pie&&(a=void 0),this.autoFreeze_&&J6(a,!0),n){const i=[],s=[];cm("Patches").generateReplacementPatches_(t,a,i,s),n(i,s)}return a}else $u(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let n,a;return[this.produce(t,r,(s,o)=>{n=s,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){BA(e)||$u(8),lm(e)&&(e=hA(e));const t=JG(this),r=qF(e,void 0);return r[Ac].isManual_=!0,zF(t),r}finishDraft(e,t){const r=e&&e[Ac];(!r||!r.isManual_)&&$u(9);const{scope_:n}=r;return XG(n,t),ZG(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=cm("Patches").applyPatches_;return lm(e)?n(e,t):this.produce(e,a=>n(a,t))}};function qF(e,t){const r=f5(e)?cm("MapSet").proxyMap_(e,t):A5(e)?cm("MapSet").proxySet_(e,t):yet(e,t);return(t?t.scope_:vie()).drafts_.push(r),r}function hA(e){return lm(e)||$u(10,e),yie(e)}function yie(e){if(!BA(e)||h5(e))return e;const t=e[Ac];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=QF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=QF(e,!0);return iS(r,(n,a)=>{gie(r,n,yie(a))}),t&&(t.finalized_=!1),r}var hc=new wet,bie=hc.produce;hc.produceWithPatches.bind(hc);hc.setAutoFreeze.bind(hc);hc.setUseStrictShallowCopy.bind(hc);hc.applyPatches.bind(hc);hc.createDraft.bind(hc);hc.finishDraft.bind(hc);function wie(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var Cet=wie(),Eet=wie,_et=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?aS:aS.apply(null,arguments)};function fu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(lc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>hie(n)&&n.type===e,r}var Cie=class W1 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,W1.prototype)}static get[Symbol.species](){return W1}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new W1(...t[0].concat(this)):new W1(...t.concat(this))}};function tq(e){return BA(e)?bie(e,()=>{}):e}function NC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Tet(e){return typeof e=="boolean"}var Net=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let s=new Cie;return r&&(Tet(r)?s.push(Cet):s.push(Eet(r.extraArgument))),s},Bet="RTK_autoBatch",rq=e=>t=>{setTimeout(t,e)},ket=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,s=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:rq(10):e.type==="callback"?e.queueNotification:rq(e.timeout),c=()=>{s=!1,i&&(i=!1,o.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const A=()=>a&&u(),h=n.subscribe(A);return o.add(u),()=>{h(),o.delete(u)}},dispatch(u){var A;try{return a=!((A=u==null?void 0:u.meta)!=null&&A[Bet]),i=!a,i&&(s||(s=!0,l(c))),n.dispatch(u)}finally{a=!0}}})},Iet=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Cie(e);return n&&a.push(ket(typeof n=="object"?n:void 0)),a};function Fet(e){const t=Net(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(X6(r))o=Aie(r);else throw new Error(lc(1));let l;typeof n=="function"?l=n(t):l=t();let c=aS;a&&(c=_et({trace:!1,...typeof a=="object"&&a}));const u=Aet(...l),A=Iet(u);let h=typeof s=="function"?s(A):A();const m=c(...h);return fie(o,i,m)}function Eie(e){const t={},r=[];let n;const a={addCase(i,s){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(lc(28));if(o in t)throw new Error(lc(29));return t[o]=s,a},addMatcher(i,s){return r.push({matcher:i,reducer:s}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function Det(e){return typeof e=="function"}function Ret(e,t){let[r,n,a]=Eie(t),i;if(Det(e))i=()=>tq(e());else{const o=tq(e);i=()=>o}function s(o=i(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[a]),c.reduce((u,A)=>{if(A)if(lm(u)){const m=A(u,l);return m===void 0?u:m}else{if(BA(u))return bie(u,h=>A(h,l));{const h=A(u,l);if(h===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return u},o)}return s.getInitialState=i,s}var Pet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Met=(e=21)=>{let t="",r=e;for(;r--;)t+=Pet[Math.random()*64|0];return t},Let=Symbol.for("rtk-slice-createasyncthunk");function Oet(e,t){return`${e}/${t}`}function Uet({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Let];return function(a){const{name:i,reducerPath:s=i}=a;if(!i)throw new Error(lc(11));const o=(typeof a.reducers=="function"?a.reducers(Het()):a.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(F,B){const D=typeof F=="string"?F:F.type;if(!D)throw new Error(lc(12));if(D in c.sliceCaseReducersByType)throw new Error(lc(13));return c.sliceCaseReducersByType[D]=B,u},addMatcher(F,B){return c.sliceMatchers.push({matcher:F,reducer:B}),u},exposeAction(F,B){return c.actionCreators[F]=B,u},exposeCaseReducer(F,B){return c.sliceCaseReducersByName[F]=B,u}};l.forEach(F=>{const B=o[F],D={reducerName:F,type:Oet(i,F),createNotation:typeof a.reducers=="function"};Vet(B)?Get(D,B,u,t):Qet(D,B,u)});function A(){const[F={},B=[],D=void 0]=typeof a.extraReducers=="function"?Eie(a.extraReducers):[a.extraReducers],E={...F,...c.sliceCaseReducersByType};return Ret(a.initialState,S=>{for(let k in E)S.addCase(k,E[k]);for(let k of c.sliceMatchers)S.addMatcher(k.matcher,k.reducer);for(let k of B)S.addMatcher(k.matcher,k.reducer);D&&S.addDefaultCase(D)})}const h=F=>F,m=new Map,v=new WeakMap;let g;function y(F,B){return g||(g=A()),g(F,B)}function w(){return g||(g=A()),g.getInitialState()}function T(F,B=!1){function D(S){let k=S[F];return typeof k>"u"&&B&&(k=NC(v,D,w)),k}function E(S=h){const k=NC(m,B,()=>new WeakMap);return NC(k,S,()=>{const H={};for(const[P,M]of Object.entries(a.selectors??{}))H[P]=jet(M,S,()=>NC(v,S,w),B);return H})}return{reducerPath:F,getSelectors:E,get selectors(){return E(D)},selectSlice:D}}const N={name:i,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...T(s),injectInto(F,{reducerPath:B,...D}={}){const E=B??s;return F.inject({reducerPath:E,reducer:y},D),{...N,...T(E,!0)}}};return N}}function jet(e,t,r,n){function a(i,...s){let o=t(i);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return a.unwrapped=e,a}var gc=Uet();function Het(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Qet({type:e,reducerName:t,createNotation:r},n,a){let i,s;if("reducer"in n){if(r&&!zet(n))throw new Error(lc(17));i=n.reducer,s=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,s?fu(e,s):fu(e))}function Vet(e){return e._reducerDefinitionType==="asyncThunk"}function zet(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Get({type:e,reducerName:t},r,n,a){if(!a)throw new Error(lc(18));const{payloadCreator:i,fulfilled:s,pending:o,rejected:l,settled:c,options:u}=r,A=a(e,i,u);n.exposeAction(t,A),s&&n.addCase(A.fulfilled,s),o&&n.addCase(A.pending,o),l&&n.addCase(A.rejected,l),c&&n.addMatcher(A.settled,c),n.exposeCaseReducer(t,{fulfilled:s||BC,pending:o||BC,rejected:l||BC,settled:c||BC})}function BC(){}var qet="task",_ie="listener",Sie="completed",eM="cancelled",$et=`task-${eM}`,Ket=`task-${Sie}`,$F=`${_ie}-${eM}`,Wet=`${_ie}-${Sie}`,p5=class{constructor(e){LN(this,"name","TaskAbortError");LN(this,"message");this.code=e,this.message=`${qet} ${eM} (reason: ${e})`}},tM=(e,t)=>{if(typeof e!="function")throw new TypeError(lc(32))},lS=()=>{},Tie=(e,t=lS)=>(e.catch(t),e),Nie=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Qp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Vp=e=>{if(e.aborted){const{reason:t}=e;throw new p5(t)}};function Bie(e,t){let r=lS;return new Promise((n,a)=>{const i=()=>a(new p5(e.reason));if(e.aborted){i();return}r=Nie(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=lS})}var Yet=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof p5?"cancelled":"rejected",error:r}}finally{t==null||t()}},cS=e=>t=>Tie(Bie(e,t).then(r=>(Vp(e),r))),kie=e=>{const t=cS(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:hv}=Object,nq={},m5="listenerMiddleware",Xet=(e,t)=>{const r=n=>Nie(e,()=>Qp(n,e.reason));return(n,a)=>{tM(n);const i=new AbortController;r(i);const s=Yet(async()=>{Vp(e),Vp(i.signal);const o=await n({pause:cS(i.signal),delay:kie(i.signal),signal:i.signal});return Vp(i.signal),o},()=>Qp(i,Ket));return a!=null&&a.autoJoin&&t.push(s.catch(lS)),{result:cS(e)(s),cancel(){Qp(i,$et)}}}},Jet=(e,t)=>{const r=async(n,a)=>{Vp(t);let i=()=>{};const o=[new Promise((l,c)=>{let u=e({predicate:n,effect:(A,h)=>{h.unsubscribe(),l([A,h.getState(),h.getOriginalState()])}});i=()=>{u(),c()}})];a!=null&&o.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await Bie(t,Promise.race(o));return Vp(t),l}finally{i()}};return(n,a)=>Tie(r(n,a))},Iie=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=fu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(lc(21));return tM(i),{predicate:a,type:t,effect:i}},Fie=hv(e=>{const{type:t,predicate:r,effect:n}=Iie(e);return{id:Met(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(lc(22))}}},{withTypes:()=>Fie}),aq=(e,t)=>{const{type:r,effect:n,predicate:a}=Iie(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},KF=e=>{e.pending.forEach(t=>{Qp(t,$F)})},Zet=e=>()=>{e.forEach(KF),e.clear()},iq=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Die=hv(fu(`${m5}/add`),{withTypes:()=>Die}),ett=fu(`${m5}/removeAll`),Rie=hv(fu(`${m5}/remove`),{withTypes:()=>Rie}),ttt=(...e)=>{console.error(`${m5}/error`,...e)},aw=(e={})=>{const t=new Map,{extra:r,onError:n=ttt}=e;tM(n);const a=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),A=>{u.unsubscribe(),A!=null&&A.cancelActive&&KF(u)}),i=u=>{const A=aq(t,u)??Fie(u);return a(A)};hv(i,{withTypes:()=>i});const s=u=>{const A=aq(t,u);return A&&(A.unsubscribe(),u.cancelActive&&KF(A)),!!A};hv(s,{withTypes:()=>s});const o=async(u,A,h,m)=>{const v=new AbortController,g=Jet(i,v.signal),y=[];try{u.pending.add(v),await Promise.resolve(u.effect(A,hv({},h,{getOriginalState:m,condition:(w,T)=>g(w,T).then(Boolean),take:g,delay:kie(v.signal),pause:cS(v.signal),extra:r,signal:v.signal,fork:Xet(v.signal,y),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((w,T,N)=>{w!==v&&(Qp(w,$F),N.delete(w))})},cancel:()=>{Qp(v,$F),u.pending.delete(v)},throwIfCancelled:()=>{Vp(v.signal)}})))}catch(w){w instanceof p5||iq(n,w,{raisedBy:"effect"})}finally{await Promise.all(y),Qp(v,Wet),u.pending.delete(v)}},l=Zet(t);return{middleware:u=>A=>h=>{if(!hie(h))return A(h);if(Die.match(h))return i(h.payload);if(ett.match(h)){l();return}if(Rie.match(h))return s(h.payload);let m=u.getState();const v=()=>{if(m===nq)throw new Error(lc(23));return m};let g;try{if(g=A(h),t.size>0){const y=u.getState(),w=Array.from(t.values());for(const T of w){let N=!1;try{N=T.predicate(h,y,m)}catch(F){N=!1,iq(n,F,{raisedBy:"predicate"})}N&&o(T,h,u,v)}}}finally{m=nq}return g},startListening:i,stopListening:s,clearListeners:l}};function lc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rtt={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Pie=gc({name:"chartLayout",initialState:rtt,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:ntt,setLayout:att,setChartSize:itt,setScale:stt}=Pie.actions,ott=Pie.reducer;function sq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sq(Object(r),!0).forEach(function(n){ltt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ltt(e,t,r){return(t=ctt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ctt(e){var t=utt(e,"string");return typeof t=="symbol"?t:t+""}function utt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uS=Math.PI/180,dtt=e=>e*180/Math.PI,eo=(e,t,r,n)=>({x:e+Math.cos(-uS*n)*r,y:t+Math.sin(-uS*n)*r}),ftt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Att=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},htt=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,s=Att({x:r,y:n},{x:a,y:i});if(s<=0)return{radius:s,angle:0};var o=(r-a)/s,l=Math.acos(o);return n>i&&(l=2*Math.PI-l),{radius:s,angle:dtt(l),angleInRadian:l}},ptt=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},mtt=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return e+s*360},gtt=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=htt({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(a<s||a>o||a===0)return null;var{startAngle:l,endAngle:c}=ptt(t),u=i,A;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;A=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;A=u>=c&&u<=l}return A?oq(oq({},t),{},{radius:a,angle:mtt(u,t)}):null};function Mie(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lq(Object(r),!0).forEach(function(n){vtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vtt(e,t,r){return(t=xtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xtt(e){var t=ytt(e,"string");return typeof t=="symbol"?t:t+""}function ytt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jo(e,t,r){return us(e)||us(t)?r:df(t)?om(e,t,r):typeof t=="function"?t(e):r}var btt=(e,t,r,n,a)=>{var i,s=-1,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,u=r[l].coordinate,A=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(wl(u-c)!==wl(A-u)){var m=[];if(wl(A-u)===wl(a[1]-a[0])){h=A;var v=u+a[1]-a[0];m[0]=Math.min(v,(v+c)/2),m[1]=Math.max(v,(v+c)/2)}else{h=c;var g=A+a[1]-a[0];m[0]=Math.min(u,(g+u)/2),m[1]=Math.max(u,(g+u)/2)}var y=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){({index:s}=r[l]);break}}else{var w=Math.min(c,A),T=Math.max(c,A);if(e>(w+u)/2&&e<=(T+u)/2){({index:s}=r[l]);break}}}else if(t){for(var N=0;N<o;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<o-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===o-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:s}=t[N]);break}}return s},wtt=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&i!=="center"&&ir(e[i]))return eu(eu({},e),{},{[i]:e[i]+(n||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&s!=="middle"&&ir(e[s]))return eu(eu({},e),{},{[s]:e[s]+(a||0)})}return e},Sm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Lie=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,i,s=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(i=!0),o.coordinate));return a||s.push(t),i||s.push(r),s},Oie=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:A,niceTicks:h,axisType:m}=e;if(!s)return null;var v=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,g=a==="category"&&s.bandwidth?s.bandwidth()/v:0;if(g=m==="angleAxis"&&i&&i.length>=2?wl(i[0]-i[1])*2*g:g,A||h){var y=(A||h||[]).map((w,T)=>{var N=n?n.indexOf(w):w;return{coordinate:s(N)+g,value:w,offset:g,index:T}});return y.filter(w=>!fc(w.coordinate))}return l&&c?c.map((w,T)=>({coordinate:s(w)+g,value:w,index:T,offset:g})):s.ticks&&u!=null?s.ticks(u).map((w,T)=>({coordinate:s(w)+g,value:w,offset:g,index:T})):s.domain().map((w,T)=>({coordinate:s(w)+g,value:n?n[w]:w,index:T,offset:g}))},cq=1e-4,Ctt=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-cq,i=Math.max(n[0],n[1])+cq,s=e(t[0]),o=e(t[r-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[r-1]])}},Ett=(e,t)=>{if(!t||t.length!==2||!ir(t[0])||!ir(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ir(e[0])||e[0]<r)&&(a[0]=r),(!ir(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},_tt=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,s=0;s<t;++s){var o=fc(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1])}},Stt=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var s=fc(e[i][r][1])?e[i][r][0]:e[i][r][1];s>=0?(e[i][r][0]=a,e[i][r][1]=a+s,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Ttt={sign:_tt,expand:AYe,none:Mv,silhouette:hYe,wiggle:pYe,positive:Stt},Ntt=(e,t,r)=>{var n=Ttt[r],a=fYe().keys(t).value((i,s)=>+Jo(i,s,0)).order(EF).offset(n);return a(e)};function Btt(e){return e==null?void 0:String(e)}var uq=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=Jo(i,t.dataKey,t.scale.domain()[s]);return us(o)?null:t.scale(o)-a/2+n},ktt=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},Itt=e=>{var t=e.flat(2).filter(ir);return[Math.min(...t),Math.max(...t)]},Ftt=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Dtt=(e,t,r)=>{if(e!=null)return Ftt(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:s}=i,o=s.reduce((l,c)=>{var u=Mie(c,t,r),A=Itt(u);return[Math.min(l[0],A[0]),Math.max(l[1],A[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},dq=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fq=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rM=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=u5(t,u=>u.coordinate),i=1/0,s=1,o=a.length;s<o;s++){var l=a[s],c=a[s-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function Aq(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return eu(eu({},t),{},{dataKey:r,payload:n,value:a,name:i})}function Uie(e,t){if(e)return String(e);if(typeof t=="string")return t}function Rtt(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?gtt({x:e,y:t},n):null}var Ptt=(e,t,r,n)=>{var a=t.find(c=>c&&c.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:s}=n;return eu(eu(eu({},n),eo(n.cx,n.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,{angle:l}=n;return eu(eu(eu({},n),eo(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},Mtt=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,LA=e=>e.layout.width,OA=e=>e.layout.height,Ltt=e=>e.layout.scale,jie=e=>e.layout.margin,nM=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),aM=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Ott="data-recharts-item-index",Utt="data-recharts-item-data-key",g5=60;function hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hq(Object(r),!0).forEach(function(n){jtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jtt(e,t,r){return(t=Htt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Htt(e){var t=Qtt(e,"string");return typeof t=="symbol"?t:t+""}function Qtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vtt=e=>e.brush.height,Ms=ut([LA,OA,jie,Vtt,nM,aM,uie,iet],(e,t,r,n,a,i,s,o)=>{var l=i.reduce((v,g)=>{var{orientation:y}=g;if(!g.mirror&&!g.hide){var w=typeof g.width=="number"?g.width:g5;return Th(Th({},v),{},{[y]:v[y]+w})}return v},{left:r.left||0,right:r.right||0}),c=a.reduce((v,g)=>{var{orientation:y}=g;return!g.mirror&&!g.hide?Th(Th({},v),{},{[y]:om(v,"".concat(y))+g.height}):v},{top:r.top||0,bottom:r.bottom||0}),u=Th(Th({},c),l),A=u.bottom;u.bottom+=n,u=wtt(u,s,o);var h=e-u.left-u.right,m=t-u.top-u.bottom;return Th(Th({brushBottom:A},u),{},{width:Math.max(h,0),height:Math.max(m,0)})}),ztt=ut(Ms,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Hie=ut(LA,OA,(e,t)=>({x:0,y:0,width:e,height:t})),Gtt=L.createContext(null),mu=()=>L.useContext(Gtt)!=null,v5=e=>e.brush,x5=ut([v5,Ms,jie],(e,t,r)=>({height:e.height,x:ir(e.x)?e.x:t.left,y:ir(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ir(e.width)?e.width:t.width})),iM=()=>{var e,t=mu(),r=vr(ztt),n=vr(x5),a=(e=vr(v5))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},qtt={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Qie=()=>{var e;return(e=vr(Ms))!==null&&e!==void 0?e:qtt},sM=()=>vr(LA),oM=()=>vr(OA),$tt={top:0,right:0,bottom:0,left:0},Ktt=()=>{var e;return(e=vr(t=>t.layout.margin))!==null&&e!==void 0?e:$tt},oa=e=>e.layout.layoutType,lM=()=>vr(oa),Wtt={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Vie=gc({name:"legend",initialState:Wtt,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=hA(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:pq,setLegendSettings:Ytt,addLegendPayload:Xtt,removeLegendPayload:Jtt}=Vie.actions,Ztt=Vie.reducer,ert=["contextPayload"];function WF(){return WF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WF.apply(null,arguments)}function mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mq(Object(r),!0).forEach(function(n){cM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cM(e,t,r){return(t=trt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function trt(e){var t=rrt(e,"string");return typeof t=="symbol"?t:t+""}function rrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nrt(e,t){if(e==null)return{};var r,n,a=art(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function art(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function irt(e){return e.value}function srt(e){var{contextPayload:t}=e,r=nrt(e,ert),n=sie(t,e.payloadUniqBy,irt),a=Uv(Uv({},r),{},{payload:n});return L.isValidElement(e.content)?L.cloneElement(e.content,a):typeof e.content=="function"?L.createElement(e.content,a):L.createElement(z6,a)}function ort(e,t,r,n,a,i){var{layout:s,align:o,verticalAlign:l}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&s==="vertical"?c={left:((n||0)-i.width)/2}:c=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?u={top:((a||0)-i.height)/2}:u=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Uv(Uv({},c),u)}function lrt(e){var t=Xi();return L.useEffect(()=>{t(Ytt(e))},[t,e]),null}function crt(e){var t=Xi();return L.useEffect(()=>(t(pq(e)),()=>{t(pq({width:0,height:0}))}),[t,e]),null}function urt(e){var t=cet(),r=oZe(),n=Ktt(),{width:a,height:i,wrapperStyle:s,portal:o}=e,[l,c]=die([t]),u=sM(),A=oM(),h=u-(n.left||0)-(n.right||0),m=y5.getWidthOrHeight(e.layout,i,a,h),v=o?s:Uv(Uv({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||i||"auto"},ort(s,e,n,u,A,l)),s),g=o??r;if(g==null)return null;var y=L.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:c},L.createElement(lrt,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),L.createElement(crt,{width:l.width,height:l.height}),L.createElement(srt,WF({},e,m,{margin:n,chartWidth:u,chartHeight:A,contextPayload:t})));return zP.createPortal(y,g)}class y5 extends L.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&ir(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return L.createElement(urt,this.props)}}cM(y5,"displayName","Legend");cM(y5,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function YF(){return YF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YF.apply(null,arguments)}function gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gq(Object(r),!0).forEach(function(n){drt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function drt(e,t,r){return(t=frt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function frt(e){var t=Art(e,"string");return typeof t=="symbol"?t:t+""}function Art(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hrt(e){return Array.isArray(e)&&df(e[0])&&df(e[1])?e.join(" ~ "):e}var prt=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:A,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var B={padding:0,margin:0},D=(o?u5(i,o):i).map((E,S)=>{if(E.type==="none")return null;var k=E.formatter||s||hrt,{value:H,name:P}=E,M=H,Q=P;if(k){var V=k(H,P,E,S,i);if(Array.isArray(V))[M,Q]=V;else if(V!=null)M=V;else return null}var te=Lk({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:te},df(Q)?L.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,df(Q)?L.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,L.createElement("span",{className:"recharts-tooltip-item-value"},M),L.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:B},D)}return null},v=Lk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=Lk({margin:0},a),y=!us(u),w=y?u:"",T=_a("recharts-default-tooltip",l),N=_a("recharts-tooltip-label",c);y&&A&&i!==void 0&&i!==null&&(w=A(u,i));var F=h?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",YF({className:T,style:v},F),L.createElement("p",{className:N,style:g},L.isValidElement(w)?w:"".concat(w)),m())},E1="recharts-tooltip-wrapper",mrt={visibility:"hidden"};function grt(e){var{coordinate:t,translateX:r,translateY:n}=e;return _a(E1,{["".concat(E1,"-right")]:ir(r)&&t&&ir(t.x)&&r>=t.x,["".concat(E1,"-left")]:ir(r)&&t&&ir(t.x)&&r<t.x,["".concat(E1,"-bottom")]:ir(n)&&t&&ir(t.y)&&n>=t.y,["".concat(E1,"-top")]:ir(n)&&t&&ir(t.y)&&n<t.y})}function vq(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(i&&ir(i[n]))return i[n];var u=r[n]-o-(a>0?a:0),A=r[n]+a;if(t[n])return s[n]?u:A;var h=l[n];if(h==null)return 0;if(s[n]){var m=u,v=h;return m<v?Math.max(A,h):Math.max(u,h)}if(c==null)return 0;var g=A+o,y=h+c;return g>y?Math.max(u,h):Math.max(A,h)}function vrt(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xrt(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:s,useTranslate3d:o,viewBox:l}=e,c,u,A;return s.height>0&&s.width>0&&r?(u=vq({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),A=vq({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=vrt({translateX:u,translateY:A,useTranslate3d:o})):c=mrt,{cssProperties:c,cssClasses:grt({translateX:u,translateY:A,coordinate:r})}}function xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xq(Object(r),!0).forEach(function(n){XF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XF(e,t,r){return(t=yrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yrt(e){var t=brt(e,"string");return typeof t=="symbol"?t:t+""}function brt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wrt extends L.PureComponent{constructor(){super(...arguments),XF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),XF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:A,useTranslate3d:h,viewBox:m,wrapperStyle:v,lastBoundingBox:g,innerRef:y,hasPortalFromProps:w}=this.props,{cssClasses:T,cssProperties:N}=xrt({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:c,position:u,reverseDirection:A,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:m}),F=w?{}:kC(kC({transition:l&&t?"transform ".concat(n,"ms ").concat(a):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),B=kC(kC({},F),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},v);return L.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:B,ref:y},i)}}var Crt=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),iw={isSsr:Crt()},zie=()=>vr(e=>e.rootProps.accessibilityLayer);function pc(e){return Number.isFinite(e)}function dS(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function JF(){return JF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JF.apply(null,arguments)}function yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yq(Object(r),!0).forEach(function(n){Ert(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ert(e,t,r){return(t=_rt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _rt(e){var t=Srt(e,"string");return typeof t=="symbol"?t:t+""}function Srt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wq={curveBasisClosed:tYe,curveBasisOpen:rYe,curveBasis:eYe,curveBumpX:jWe,curveBumpY:HWe,curveLinearClosed:nYe,curveLinear:e5,curveMonotoneX:aYe,curveMonotoneY:iYe,curveNatural:sYe,curveStep:oYe,curveStepAfter:cYe,curveStepBefore:lYe},IC=e=>pc(e.x)&&pc(e.y),_1=e=>e.x,S1=e=>e.y,Trt=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(rw(e));return(r==="curveMonotone"||r==="curveBump")&&t?wq["".concat(r).concat(t==="vertical"?"Y":"X")]:wq[r]||e5},Nrt=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,s=Trt(t,a),o=i?r.filter(IC):r,l;if(Array.isArray(n)){var c=i?n.filter(A=>IC(A)):n,u=o.map((A,h)=>bq(bq({},A),{},{base:c[h]}));return a==="vertical"?l=gC().y(S1).x1(_1).x0(A=>A.base.x):l=gC().x(_1).y1(S1).y0(A=>A.base.y),l.defined(IC).curve(s),l(u)}return a==="vertical"&&ir(n)?l=gC().y(S1).x1(_1).x0(n):ir(n)?l=gC().x(_1).y1(S1).y0(n):l=qne().x(_1).y(S1),l.defined(IC).curve(s),l(o)},Brt=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Nrt(e):n;return L.createElement("path",JF({},nw(e),XJe(e),{className:_a("recharts-curve",t),d:i===null?void 0:i,ref:a}))},krt=["x","y","top","left","width","height","className"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZF.apply(null,arguments)}function Cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Irt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cq(Object(r),!0).forEach(function(n){Frt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Frt(e,t,r){return(t=Drt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Drt(e){var t=Rrt(e,"string");return typeof t=="symbol"?t:t+""}function Rrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Prt(e,t){if(e==null)return{};var r,n,a=Mrt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Lrt=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Ort=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:s=0,className:o}=e,l=Prt(e,krt),c=Irt({x:t,y:r,top:n,left:a,width:i,height:s},l);return!ir(t)||!ir(r)||!ir(i)||!ir(s)||!ir(n)||!ir(a)?null:L.createElement("path",ZF({},Is(c,!0),{className:_a("recharts-cross",o),d:Lrt(t,r,i,s,n,a)}))};function Urt(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jrt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eq(Object(r),!0).forEach(function(n){Hrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hrt(e,t,r){return(t=Qrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qrt(e){var t=Vrt(e,"string");return typeof t=="symbol"?t:t+""}function Vrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D0(e,t){var r=jrt({},e),n=t,a=Object.keys(t),i=a.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return i}var Ok={},Uk={},jk={},_q;function zrt(){return _q||(_q=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(jk)),jk}var Sq;function Grt(){return Sq||(Sq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zrt(),r=nie(),n=K6(),a=W6(),i=q6();function s(c,u,A){return o(c,u,void 0,void 0,void 0,void 0,A)}function o(c,u,A,h,m,v,g){const y=g(c,u,A,h,m,v);if(y!==void 0)return y;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return l(c,u,v,g)}return l(c,u,v,g)}function l(c,u,A,h){if(Object.is(c,u))return!0;let m=n.getTag(c),v=n.getTag(u);if(m===a.argumentsTag&&(m=a.objectTag),v===a.argumentsTag&&(v=a.objectTag),m!==v)return!1;switch(m){case a.stringTag:return c.toString()===u.toString();case a.numberTag:{const w=c.valueOf(),T=u.valueOf();return i.eq(w,T)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(c.valueOf(),u.valueOf());case a.regexpTag:return c.source===u.source&&c.flags===u.flags;case a.functionTag:return c===u}A=A??new Map;const g=A.get(c),y=A.get(u);if(g!=null&&y!=null)return g===u;A.set(c,u),A.set(u,c);try{switch(m){case a.mapTag:{if(c.size!==u.size)return!1;for(const[w,T]of c.entries())if(!u.has(w)||!o(T,u.get(w),w,c,u,A,h))return!1;return!0}case a.setTag:{if(c.size!==u.size)return!1;const w=Array.from(c.values()),T=Array.from(u.values());for(let N=0;N<w.length;N++){const F=w[N],B=T.findIndex(D=>o(F,D,void 0,c,u,A,h));if(B===-1)return!1;T.splice(B,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let w=0;w<c.length;w++)if(!o(c[w],u[w],w,c,u,A,h))return!1;return!0}case a.arrayBufferTag:return c.byteLength!==u.byteLength?!1:l(new Uint8Array(c),new Uint8Array(u),A,h);case a.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:l(new Uint8Array(c),new Uint8Array(u),A,h);case a.errorTag:return c.name===u.name&&c.message===u.message;case a.objectTag:{if(!(l(c.constructor,u.constructor,A,h)||t.isPlainObject(c)&&t.isPlainObject(u)))return!1;const T=[...Object.keys(c),...r.getSymbols(c)],N=[...Object.keys(u),...r.getSymbols(u)];if(T.length!==N.length)return!1;for(let F=0;F<T.length;F++){const B=T[F],D=c[B];if(!Object.hasOwn(u,B))return!1;const E=u[B];if(!o(D,E,B,c,u,A,h))return!1}return!0}default:return!1}}finally{A.delete(c),A.delete(u)}}e.isEqualWith=s}(Uk)),Uk}var Hk={},Tq;function qrt(){return Tq||(Tq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(Hk)),Hk}var Nq;function $rt(){return Nq||(Nq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Grt(),r=qrt();function n(a,i){return t.isEqualWith(a,i,r.noop)}e.isEqual=n}(Ok)),Ok}var Qk,Bq;function Krt(){return Bq||(Bq=1,Qk=$rt().isEqual),Qk}var Wrt=Krt();const Yrt=mc(Wrt);var fS=1e-4,Gie=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],qie=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),kq=(e,t)=>r=>{var n=Gie(e,t);return qie(n,r)},Xrt=(e,t)=>r=>{var n=Gie(e,t),a=[...n.map((i,s)=>i*s).slice(1),0];return qie(a,r)},Iq=function(){for(var t,r,n,a,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];if(s.length===1)switch(s[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var l=s[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,a]=l[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else s.length===4&&([t,n,r,a]=s);var c=kq(t,r),u=kq(n,a),A=Xrt(t,r),h=v=>v>1?1:v<0?0:v,m=v=>{for(var g=v>1?1:v,y=g,w=0;w<8;++w){var T=c(y)-g,N=A(y);if(Math.abs(T-g)<fS||N<fS)return u(y);y=h(y-T/N)}return u(y)};return m.isStepper=!1,m},Jrt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(s,o,l)=>{var c=-(s-o)*r,u=l*n,A=l+(c-u)*a/1e3,h=l*a/1e3+s;return Math.abs(h-o)<fS&&Math.abs(A)<fS?[o,0]:[h,A]};return i.isStepper=!0,i.dt=a,i},$ie=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Iq(e);case"spring":return Jrt();default:if(e.split("(")[0]==="cubic-bezier")return Iq(e)}return typeof e=="function"?e:null};function Fq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fq(Object(r),!0).forEach(function(n){Zrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zrt(e,t,r){return(t=ent(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ent(e){var t=tnt(e,"string");return typeof t=="symbol"?t:t+""}function tnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rnt=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),nnt=(e,t,r)=>e.map(n=>"".concat(rnt(n)," ").concat(t,"ms ").concat(r)).join(","),ant=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),hb=(e,t)=>Object.keys(t).reduce((r,n)=>Dq(Dq({},r),{},{[n]:e(n,t[n])}),{});function Rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rq(Object(r),!0).forEach(function(n){int(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function int(e,t,r){return(t=snt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function snt(e){var t=ont(e,"string");return typeof t=="symbol"?t:t+""}function ont(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AS=(e,t,r)=>e+(t-e)*r,eD=e=>{var{from:t,to:r}=e;return t!==r},Kie=(e,t,r)=>{var n=hb((a,i)=>{if(eD(i)){var[s,o]=e(i.from,i.to,i.velocity);return Ws(Ws({},i),{},{from:s,velocity:o})}return i},t);return r<1?hb((a,i)=>eD(i)?Ws(Ws({},i),{},{velocity:AS(i.velocity,n[a].velocity,r),from:AS(i.from,n[a].from,r)}):i,t):Kie(e,n,r-1)};function lnt(e,t,r,n,a,i){var s,o=n.reduce((h,m)=>Ws(Ws({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),l=()=>hb((h,m)=>m.from,o),c=()=>!Object.values(o).filter(eD).length,u=null,A=h=>{s||(s=h);var m=h-s,v=m/r.dt;o=Kie(r,o,v),a(Ws(Ws(Ws({},e),t),l())),s=h,c()||(u=i.setTimeout(A))};return()=>(u=i.setTimeout(A),()=>{u()})}function cnt(e,t,r,n,a,i,s){var o=null,l=a.reduce((A,h)=>Ws(Ws({},A),{},{[h]:[e[h],t[h]]}),{}),c,u=A=>{c||(c=A);var h=(A-c)/n,m=hb((g,y)=>AS(...y,r(h)),l);if(i(Ws(Ws(Ws({},e),t),m)),h<1)o=s.setTimeout(u);else{var v=hb((g,y)=>AS(...y,r(1)),l);i(Ws(Ws(Ws({},e),t),v))}};return()=>(o=s.setTimeout(u),()=>{o()})}const Wie=(e,t,r,n,a,i)=>{var s=ant(e,t);return r.isStepper===!0?lnt(e,t,r,s,a,i):cnt(e,t,r,n,s,a,i)};function unt(e){var t,r=()=>null,n=!1,a=null,i=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...c]=o;if(typeof l=="number"){a=e.setTimeout(i.bind(null,c),l);return}i(l),a=e.setTimeout(i.bind(null,c));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,a&&(a(),a=null),i(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class dnt{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}function fnt(){return unt(new dnt)}var Ant=L.createContext(fnt);function Yie(e,t){var r=L.useContext(Ant);return L.useMemo(()=>t??r(e),[e,t,r])}var hnt=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function tD(){return tD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tD.apply(null,arguments)}function pnt(e,t){if(e==null)return{};var r,n,a=mnt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pq(Object(r),!0).forEach(function(n){Sp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sp(e,t,r){return(t=gnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gnt(e){var t=vnt(e,"string");return typeof t=="symbol"?t:t+""}function vnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uM extends L.PureComponent{constructor(t,r){super(t,r),Sp(this,"mounted",!1),Sp(this,"manager",void 0),Sp(this,"stopJSAnimation",null),Sp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:i,to:s,children:o,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:s});return}if(i){if(typeof o=="function"){this.state={style:i};return}this.state={style:a?{[a]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:i,to:s,from:o}=this.props,{style:l}=this.state;if(n){if(!r){var c={style:a?{[a]:s}:s};this.state&&l&&(a&&l[a]!==s||!a&&l!==s)&&this.setState(c);return}if(!(Yrt(t.to,s)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var A=u||i?o:t.to;if(this.state&&l){var h={style:a?{[a]:A}:A};(a&&l[a]!==A||!a&&l!==A)&&this.setState(h)}this.runAnimation(Nh(Nh({},this.props),{},{from:A,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:i,begin:s,onAnimationEnd:o,onAnimationStart:l}=t,c=Wie(r,n,$ie(i),a,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([l,s,u,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:i,easing:s,onAnimationStart:o,onAnimationEnd:l,children:c}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof s=="function"||typeof c=="function"||s==="spring"){this.runJSAnimation(t);return}var u=a?{[a]:i}:i,A=nnt(Object.keys(u),n,s);this.manager.start([o,r,Nh(Nh({},u),{},{transition:A}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:i,easing:s,isActive:o,from:l,to:c,canBegin:u,onAnimationEnd:A,shouldReAnimate:h,onAnimationReStart:m,animationManager:v}=t,g=pnt(t,hnt),y=L.Children.count(r),w=this.state.style;if(typeof r=="function")return r(w);if(!o||y===0||a<=0)return r;var T=N=>{var{style:F={},className:B}=N.props,D=L.cloneElement(N,Nh(Nh({},g),{},{style:Nh(Nh({},F),w),className:B}));return D};return y===1?T(L.Children.only(r)):L.createElement("div",null,L.Children.map(r,N=>T(N)))}}Sp(uM,"displayName","Animate");Sp(uM,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function hS(e){var t,r=Yie((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return L.createElement(uM,tD({},e,{animationManager:r}))}function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pS.apply(null,arguments)}var Mq=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(i>0&&a instanceof Array){for(var u=[0,0,0,0],A=0,h=4;A<h;A++)u[A]=a[A]>i?i:a[A];c="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(e+o*u[0],",").concat(t)),c+="L ".concat(e+r-o*u[1],",").concat(t),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+s*u[1])),c+="L ".concat(e+r,",").concat(t+n-s*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(e+r-o*u[2],",").concat(t+n)),c+="L ".concat(e+o*u[3],",").concat(t+n),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-s*u[3])),c+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);c="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e,",").concat(t+n-s*m," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},xnt={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xie=e=>{var t=D0(e,xnt),r=L.useRef(null),[n,a]=L.useState(-1);L.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&a(w)}catch{}},[]);var{x:i,y:s,width:o,height:l,radius:c,className:u}=t,{animationEasing:A,animationDuration:h,animationBegin:m,isAnimationActive:v,isUpdateAnimationActive:g}=t;if(i!==+i||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var y=_a("recharts-rectangle",u);return g?L.createElement(hS,{canBegin:n>0,from:{width:o,height:l,x:i,y:s},to:{width:o,height:l,x:i,y:s},duration:h,animationEasing:A,isActive:g},w=>{var{width:T,height:N,x:F,y:B}=w;return L.createElement(hS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:v,easing:A},L.createElement("path",pS({},Is(t,!0),{className:y,d:Mq(F,B,T,N,c),ref:r})))}):L.createElement("path",pS({},Is(t,!0),{className:y,d:Mq(i,s,o,l,c)}))};function Jie(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,s=eo(t,r,n,a),o=eo(t,r,n,i);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function rD(){return rD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rD.apply(null,arguments)}var ynt=(e,t)=>{var r=wl(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},FC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,c=o*(s?1:-1)+n,u=Math.asin(o/c)/uS,A=l?a:a+i*u,h=eo(t,r,c,A),m=eo(t,r,n,A),v=l?a-i*u:a,g=eo(t,r,c*Math.cos(u*uS),v);return{center:h,circleTangency:m,lineTangency:g,theta:u}},Zie=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:s}=e,o=ynt(i,s),l=i+o,c=eo(t,r,a,i),u=eo(t,r,a,l),A="M ".concat(c.x,",").concat(c.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var h=eo(t,r,n,i),m=eo(t,r,n,l);A+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else A+="L ".concat(t,",").concat(r," Z");return A},bnt=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=e,u=wl(c-l),{circleTangency:A,lineTangency:h,theta:m}=FC({cx:t,cy:r,radius:a,angle:l,sign:u,cornerRadius:i,cornerIsExternal:o}),{circleTangency:v,lineTangency:g,theta:y}=FC({cx:t,cy:r,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:o}),w=o?Math.abs(l-c):Math.abs(l-c)-m-y;if(w<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):Zie({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var T="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(A.x,",").concat(A.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(w>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:F,theta:B}=FC({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:D,lineTangency:E,theta:S}=FC({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),k=o?Math.abs(l-c):Math.abs(l-c)-B-S;if(k<0&&i===0)return"".concat(T,"L").concat(t,",").concat(r,"Z");T+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(u>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(F.x,",").concat(F.y,"Z")}else T+="L".concat(t,",").concat(r,"Z");return T},wnt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ese=e=>{var t=D0(e,wnt),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:A}=t;if(i<a||c===u)return null;var h=_a("recharts-sector",A),m=i-a,v=rd(s,m,0,!0),g;return v>0&&Math.abs(c-u)<360?g=bnt({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(v,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):g=Zie({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u}),L.createElement("path",rD({},Is(t,!0),{className:h,d:g}))};function Cnt(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:c,outerRadius:u,angle:A}=t,h=eo(o,l,c,A),m=eo(o,l,u,A);n=h.x,a=h.y,i=m.x,s=m.y}else return Jie(t);return[{x:n,y:a},{x:i,y:s}]}var Vk={},zk={},Gk={},Lq;function Ent(){return Lq||(Lq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lie();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(Gk)),Gk}var Oq;function _nt(){return Oq||(Oq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ent();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(zk)),zk}var Uq;function Snt(){return Uq||(Uq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cie(),r=_nt();function n(a,i,s){s&&typeof s!="number"&&t.isIterateeCall(a,i,s)&&(i=s=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),s=s===void 0?a<i?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((i-a)/(s||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=a,a+=s;return l}e.range=n}(Vk)),Vk}var qk,jq;function Tnt(){return jq||(jq=1,qk=Snt().range),qk}var Nnt=Tnt();const tse=mc(Nnt),Y1=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:l6,scaleDiverging:Une,scaleDivergingLog:jne,scaleDivergingPow:C6,scaleDivergingSqrt:LWe,scaleDivergingSymlog:Hne,scaleIdentity:xne,scaleImplicit:bF,scaleLinear:vne,scaleLog:bne,scaleOrdinal:qT,scalePoint:iKe,scalePow:A6,scaleQuantile:Ene,scaleQuantize:_ne,scaleRadial:Cne,scaleSequential:Pne,scaleSequentialLog:Mne,scaleSequentialPow:w6,scaleSequentialQuantile:One,scaleSequentialSqrt:MWe,scaleSequentialSymlog:Lne,scaleSqrt:gKe,scaleSymlog:wne,scaleThreshold:Sne,scaleTime:RWe,scaleUtc:PWe,tickFormat:gne},Symbol.toStringTag,{value:"Module"}));var R0=e=>e.chartData,Bnt=ut([R0],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),dM=(e,t,r,n)=>n?Bnt(e):R0(e);function jv(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(pc(t)&&pc(r))return!0}return!1}function Hq(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function knt(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(pc(r))a=r;else if(typeof r=="function")return;if(pc(n))i=n;else if(typeof n=="function")return;var s=[a,i];if(jv(s))return s}}function Int(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(jv(n))return Hq(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,s,o;if(a==="auto")t!=null&&(s=Math.min(...t));else if(ir(a))s=a;else if(typeof a=="function")try{t!=null&&(s=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&dq.test(a)){var l=dq.exec(a);if(l==null||t==null)s=void 0;else{var c=+l[1];s=t[0]-c}}else s=t==null?void 0:t[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(ir(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&fq.test(i)){var u=fq.exec(i);if(u==null||t==null)o=void 0;else{var A=+u[1];o=t[1]+A}}else o=t==null?void 0:t[1];var h=[s,o];if(jv(h))return t==null?h:Hq(h,t,r)}}}var dx=1e9,Fnt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AM,ja=!0,Au="[DecimalError] ",zp=Au+"Invalid argument: ",fM=Au+"Exponent out of range: ",fx=Math.floor,Ap=Math.pow,Dnt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,nc,Ts=1e7,Na=7,rse=9007199254740991,mS=fx(rse/Na),rr={};rr.absoluteValue=rr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};rr.comparedTo=rr.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};rr.decimalPlaces=rr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Na;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};rr.dividedBy=rr.div=function(e){return pA(this,new this.constructor(e))};rr.dividedToIntegerBy=rr.idiv=function(e){var t=this,r=t.constructor;return xa(pA(t,new r(e),0,1),r.precision)};rr.equals=rr.eq=function(e){return!this.cmp(e)};rr.exponent=function(){return Ki(this)};rr.greaterThan=rr.gt=function(e){return this.cmp(e)>0};rr.greaterThanOrEqualTo=rr.gte=function(e){return this.cmp(e)>=0};rr.isInteger=rr.isint=function(){return this.e>this.d.length-2};rr.isNegative=rr.isneg=function(){return this.s<0};rr.isPositive=rr.ispos=function(){return this.s>0};rr.isZero=function(){return this.s===0};rr.lessThan=rr.lt=function(e){return this.cmp(e)<0};rr.lessThanOrEqualTo=rr.lte=function(e){return this.cmp(e)<1};rr.logarithm=rr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(nc))throw Error(Au+"NaN");if(r.s<1)throw Error(Au+(r.s?"NaN":"-Infinity"));return r.eq(nc)?new n(0):(ja=!1,t=pA(pb(r,i),pb(e,i),i),ja=!0,xa(t,a))};rr.minus=rr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ise(t,e):nse(t,(e.s=-e.s,e))};rr.modulo=rr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Au+"NaN");return r.s?(ja=!1,t=pA(r,e,0,1).times(e),ja=!0,r.minus(t)):xa(new n(r),a)};rr.naturalExponential=rr.exp=function(){return ase(this)};rr.naturalLogarithm=rr.ln=function(){return pb(this)};rr.negated=rr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};rr.plus=rr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?nse(t,e):ise(t,(e.s=-e.s,e))};rr.precision=rr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(zp+e);if(t=Ki(a)+1,n=a.d.length-1,r=n*Na+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};rr.squareRoot=rr.sqrt=function(){var e,t,r,n,a,i,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Au+"NaN")}for(e=Ki(o),ja=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=Xd(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=fx((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=s=r+3;;)if(i=n,n=i.plus(pA(o,i,s+2)).times(.5),Xd(i.d).slice(0,s)===(t=Xd(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(xa(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return ja=!0,xa(n,r)};rr.times=rr.mul=function(e){var t,r,n,a,i,s,o,l,c,u=this,A=u.constructor,h=u.d,m=(e=new A(e)).d;if(!u.s||!e.s)return new A(0);for(e.s*=u.s,r=u.e+e.e,l=h.length,c=m.length,l<c&&(i=h,h=m,m=i,s=l,l=c,c=s),i=[],s=l+c,n=s;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,a=l+n;a>n;)o=i[a]+m[n]*h[a-n-1]+t,i[a--]=o%Ts|0,t=o/Ts|0;i[a]=(i[a]+t)%Ts|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ja?xa(e,A.precision):e};rr.toDecimalPlaces=rr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ff(e,0,dx),t===void 0?t=n.rounding:ff(t,0,8),xa(r,e+Ki(r)+1,t))};rr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=um(n,!0):(ff(e,0,dx),t===void 0?t=a.rounding:ff(t,0,8),n=xa(new a(n),e+1,t),r=um(n,!0,e+1)),r};rr.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?um(a):(ff(e,0,dx),t===void 0?t=i.rounding:ff(t,0,8),n=xa(new i(a),e+Ki(a)+1,t),r=um(n.abs(),!1,e+Ki(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};rr.toInteger=rr.toint=function(){var e=this,t=e.constructor;return xa(new t(e),Ki(e)+1,t.rounding)};rr.toNumber=function(){return+this};rr.toPower=rr.pow=function(e){var t,r,n,a,i,s,o=this,l=o.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(nc);if(o=new l(o),!o.s){if(e.s<1)throw Error(Au+"Infinity");return o}if(o.eq(nc))return o;if(n=l.precision,e.eq(nc))return xa(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=o.s,s){if((r=u<0?-u:u)<=rse){for(a=new l(nc),t=Math.ceil(n/Na+4),ja=!1;r%2&&(a=a.times(o),Vq(a.d,t)),r=fx(r/2),r!==0;)o=o.times(o),Vq(o.d,t);return ja=!0,e.s<0?new l(nc).div(a):xa(a,n)}}else if(i<0)throw Error(Au+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,ja=!1,a=e.times(pb(o,n+c)),ja=!0,a=ase(a),a.s=i,a};rr.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ki(a),n=um(a,r<=i.toExpNeg||r>=i.toExpPos)):(ff(e,1,dx),t===void 0?t=i.rounding:ff(t,0,8),a=xa(new i(a),e,t),r=Ki(a),n=um(a,e<=r||r<=i.toExpNeg,e)),n};rr.toSignificantDigits=rr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ff(e,1,dx),t===void 0?t=n.rounding:ff(t,0,8)),xa(new n(r),e,t)};rr.toString=rr.valueOf=rr.val=rr.toJSON=rr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ki(e),r=e.constructor;return um(e,t<=r.toExpNeg||t>=r.toExpPos)};function nse(e,t){var r,n,a,i,s,o,l,c,u=e.constructor,A=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),ja?xa(t,A):t;if(l=e.d,c=t.d,s=e.e,a=t.e,l=l.slice(),i=s-a,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,a=s,o=l.length),s=Math.ceil(A/Na),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),r=0;i;)r=(l[--i]=l[i]+c[i]+r)/Ts|0,l[i]%=Ts;for(r&&(l.unshift(r),++a),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=a,ja?xa(t,A):t}function ff(e,t,r){if(e!==~~e||e<t||e>r)throw Error(zp+e)}function Xd(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=Na-n.length,r&&(i+=Rh(r)),i+=n;s=e[t],n=s+"",r=Na-n.length,r&&(i+=Rh(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var pA=function(){function e(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%Ts|0,s=i/Ts|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,l;if(i!=s)l=i>s?1:-1;else for(o=l=0;o<i;o++)if(n[o]!=a[o]){l=n[o]>a[o]?1:-1;break}return l}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Ts+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,l,c,u,A,h,m,v,g,y,w,T,N,F,B,D,E,S,k=n.constructor,H=n.s==a.s?1:-1,P=n.d,M=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(Au+"Division by zero");for(l=n.e-a.e,E=M.length,B=P.length,m=new k(H),v=m.d=[],c=0;M[c]==(P[c]||0);)++c;if(M[c]>(P[c]||0)&&--l,i==null?T=i=k.precision:s?T=i+(Ki(n)-Ki(a))+1:T=i,T<0)return new k(0);if(T=T/Na+2|0,c=0,E==1)for(u=0,M=M[0],T++;(c<B||u)&&T--;c++)N=u*Ts+(P[c]||0),v[c]=N/M|0,u=N%M|0;else{for(u=Ts/(M[0]+1)|0,u>1&&(M=e(M,u),P=e(P,u),E=M.length,B=P.length),F=E,g=P.slice(0,E),y=g.length;y<E;)g[y++]=0;S=M.slice(),S.unshift(0),D=M[0],M[1]>=Ts/2&&++D;do u=0,o=t(M,g,E,y),o<0?(w=g[0],E!=y&&(w=w*Ts+(g[1]||0)),u=w/D|0,u>1?(u>=Ts&&(u=Ts-1),A=e(M,u),h=A.length,y=g.length,o=t(A,g,h,y),o==1&&(u--,r(A,E<h?S:M,h))):(u==0&&(o=u=1),A=M.slice()),h=A.length,h<y&&A.unshift(0),r(g,A,y),o==-1&&(y=g.length,o=t(M,g,E,y),o<1&&(u++,r(g,E<y?S:M,y))),y=g.length):o===0&&(u++,g=[0]),v[c++]=u,o&&g[0]?g[y++]=P[F]||0:(g=[P[F]],y=1);while((F++<B||g[0]!==void 0)&&T--)}return v[0]||v.shift(),m.e=l,xa(m,s?i+Ki(m)+1:i)}}();function ase(e,t){var r,n,a,i,s,o,l=0,c=0,u=e.constructor,A=u.precision;if(Ki(e)>16)throw Error(fM+Ki(e));if(!e.s)return new u(nc);for(ja=!1,o=A,s=new u(.03125);e.abs().gte(.1);)e=e.times(s),c+=5;for(n=Math.log(Ap(2,c))/Math.LN10*2+5|0,o+=n,r=a=i=new u(nc),u.precision=o;;){if(a=xa(a.times(e),o),r=r.times(++l),s=i.plus(pA(a,r,o)),Xd(s.d).slice(0,o)===Xd(i.d).slice(0,o)){for(;c--;)i=xa(i.times(i),o);return u.precision=A,t==null?(ja=!0,xa(i,A)):i}i=s}}function Ki(e){for(var t=e.e*Na,r=e.d[0];r>=10;r/=10)t++;return t}function $k(e,t,r){if(t>e.LN10.sd())throw ja=!0,r&&(e.precision=r),Error(Au+"LN10 precision limit exceeded");return xa(new e(e.LN10),t)}function Rh(e){for(var t="";e--;)t+="0";return t}function pb(e,t){var r,n,a,i,s,o,l,c,u,A=1,h=10,m=e,v=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(Au+(m.s?"NaN":"-Infinity"));if(m.eq(nc))return new g(0);if(t==null?(ja=!1,c=y):c=t,m.eq(10))return t==null&&(ja=!0),$k(g,c);if(c+=h,g.precision=c,r=Xd(v),n=r.charAt(0),i=Ki(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Xd(m.d),n=r.charAt(0),A++;i=Ki(m),n>1?(m=new g("0."+r),i++):m=new g(n+"."+r.slice(1))}else return l=$k(g,c+2,y).times(i+""),m=pb(new g(n+"."+r.slice(1)),c-h).plus(l),g.precision=y,t==null?(ja=!0,xa(m,y)):m;for(o=s=m=pA(m.minus(nc),m.plus(nc),c),u=xa(m.times(m),c),a=3;;){if(s=xa(s.times(u),c),l=o.plus(pA(s,new g(a),c)),Xd(l.d).slice(0,c)===Xd(o.d).slice(0,c))return o=o.times(2),i!==0&&(o=o.plus($k(g,c+2,y).times(i+""))),o=pA(o,new g(A),c),g.precision=y,t==null?(ja=!0,xa(o,y)):o;o=l,a+=2}}function Qq(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=fx(r/Na),e.d=[],n=(r+1)%Na,r<0&&(n+=Na),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Na;n<a;)e.d.push(+t.slice(n,n+=Na));t=t.slice(n),n=Na-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ja&&(e.e>mS||e.e<-mS))throw Error(fM+r)}else e.s=0,e.e=0,e.d=[0];return e}function xa(e,t,r){var n,a,i,s,o,l,c,u,A=e.d;for(s=1,i=A[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=Na,a=t,c=A[u=0];else{if(u=Math.ceil((n+1)/Na),i=A.length,u>=i)return e;for(c=i=A[u],s=1;i>=10;i/=10)s++;n%=Na,a=n-Na+s}if(r!==void 0&&(i=Ap(10,s-a-1),o=c/i%10|0,l=t<0||A[u+1]!==void 0||c%i,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?a>0?c/Ap(10,s-a):0:A[u-1])%10&1||r==(e.s<0?8:7))),t<1||!A[0])return l?(i=Ki(e),A.length=1,t=t-i-1,A[0]=Ap(10,(Na-t%Na)%Na),e.e=fx(-t/Na)||0):(A.length=1,A[0]=e.e=e.s=0),e;if(n==0?(A.length=u,i=1,u--):(A.length=u+1,i=Ap(10,Na-n),A[u]=a>0?(c/Ap(10,s-a)%Ap(10,a)|0)*i:0),l)for(;;)if(u==0){(A[0]+=i)==Ts&&(A[0]=1,++e.e);break}else{if(A[u]+=i,A[u]!=Ts)break;A[u--]=0,i=1}for(n=A.length;A[--n]===0;)A.pop();if(ja&&(e.e>mS||e.e<-mS))throw Error(fM+Ki(e));return e}function ise(e,t){var r,n,a,i,s,o,l,c,u,A,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ja?xa(t,m):t;if(l=e.d,A=t.d,n=t.e,c=e.e,l=l.slice(),s=c-n,s){for(u=s<0,u?(r=l,s=-s,o=A.length):(r=A,n=c,o=l.length),a=Math.max(Math.ceil(m/Na),o)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=l.length,o=A.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(l[a]!=A[a]){u=l[a]<A[a];break}s=0}for(u&&(r=l,l=A,A=r,t.s=-t.s),o=l.length,a=A.length-o;a>0;--a)l[o++]=0;for(a=A.length;a>s;){if(l[--a]<A[a]){for(i=a;i&&l[--i]===0;)l[i]=Ts-1;--l[i],l[a]+=Ts}l[a]-=A[a]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,ja?xa(t,m):t):new h(0)}function um(e,t,r){var n,a=Ki(e),i=Xd(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Rh(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Rh(-a-1)+i,r&&(n=r-s)>0&&(i+=Rh(n))):a>=s?(i+=Rh(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Rh(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Rh(n))),e.s<0?"-"+i:i}function Vq(e,t){if(e.length>t)return e.length=t,!0}function sse(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(zp+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return Qq(s,i.toString())}else if(typeof i!="string")throw Error(zp+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,Dnt.test(i))Qq(s,i);else throw Error(zp+i)}if(a.prototype=rr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=sse,a.config=a.set=Rnt,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Rnt(e){if(!e||typeof e!="object")throw Error(Au+"Object expected");var t,r,n,a=["precision",1,dx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(fx(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(zp+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(zp+r+": "+n);return this}var AM=sse(Fnt);nc=new AM(1);const na=AM;var Pnt=e=>e,ose={},lse=e=>e===ose,zq=e=>function t(){return arguments.length===0||arguments.length===1&&lse(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},cse=(e,t)=>e===1?t:zq(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(s=>s!==ose).length;return i>=e?t(...n):cse(e-i,zq(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=n.map(u=>lse(u)?o.shift():u);return t(...c,...o)}))}),b5=e=>cse(e.length,e),nD=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Mnt=b5((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Lnt=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Pnt;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce((o,l)=>l(o),i(...arguments))}},aD=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),use=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((s,o)=>{var l;return s===((l=t)===null||l===void 0?void 0:l[o])})||(t=a,r=e(...a)),r}};function dse(e){var t;return e===0?t=1:t=Math.floor(new na(e).abs().log(10).toNumber())+1,t}function fse(e,t,r){for(var n=new na(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}b5((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});b5((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});b5((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Ase=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},hse=(e,t,r)=>{if(e.lte(0))return new na(0);var n=dse(e.toNumber()),a=new na(10).pow(n),i=e.div(a),s=n!==1?.05:.1,o=new na(Math.ceil(i.div(s).toNumber())).add(r).mul(s),l=o.mul(a);return t?new na(l.toNumber()):new na(Math.ceil(l.toNumber()))},Ont=(e,t,r)=>{var n=new na(1),a=new na(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new na(10).pow(dse(e)-1),a=new na(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new na(Math.floor(e)))}else e===0?a=new na(Math.floor((t-1)/2)):r||(a=new na(Math.floor(e)));var s=Math.floor((t-1)/2),o=Lnt(Mnt(l=>a.add(new na(l-s).mul(n)).toNumber()),nD);return o(0,t)},pse=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new na(0),tickMin:new na(0),tickMax:new na(0)};var s=hse(new na(r).sub(t).div(n-1),a,i),o;t<=0&&r>=0?o=new na(0):(o=new na(t).add(r).div(2),o=o.sub(new na(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new na(r).sub(o).div(s).toNumber()),u=l+c+1;return u>n?pse(t,r,n,a,i+1):(u<n&&(c=r>0?c+(n-u):c,l=r>0?l:l+(n-u)),{step:s,tickMin:o.sub(new na(l).mul(s)),tickMax:o.add(new na(c).mul(s))})};function Unt(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[s,o]=Ase([t,r]);if(s===-1/0||o===1/0){var l=o===1/0?[s,...nD(0,n-1).map(()=>1/0)]:[...nD(0,n-1).map(()=>-1/0),o];return t>r?aD(l):l}if(s===o)return Ont(s,n,a);var{step:c,tickMin:u,tickMax:A}=pse(s,o,i,a,0),h=fse(u,A.add(new na(.1).mul(c)),c);return t>r?aD(h):h}function jnt(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,s]=Ase([r,n]);if(i===-1/0||s===1/0)return[r,n];if(i===s)return[i];var o=Math.max(t,2),l=hse(new na(s).sub(i).div(o-1),a,0),c=[...fse(new na(i),new na(s),l),s];return a===!1&&(c=c.map(u=>Math.round(u))),r>n?aD(c):c}var Hnt=use(Unt),Qnt=use(jnt),mse=e=>e.rootProps.maxBarSize,Vnt=e=>e.rootProps.barGap,gse=e=>e.rootProps.barCategoryGap,znt=e=>e.rootProps.barSize,w5=e=>e.rootProps.stackOffset,hM=e=>e.options.chartName,pM=e=>e.rootProps.syncId,vse=e=>e.rootProps.syncMethod,mM=e=>e.options.eventEmitter,Zf={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Xl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},C5=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Gnt={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zf.angleAxisId,includeHidden:!1,name:void 0,reversed:Zf.reversed,scale:Zf.scale,tick:Zf.tick,tickCount:void 0,ticks:void 0,type:Zf.type,unit:void 0},qnt={allowDataOverflow:Xl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xl.scale,tick:Xl.tick,tickCount:Xl.tickCount,ticks:void 0,type:Xl.type,unit:void 0},$nt={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Zf.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zf.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zf.scale,tick:Zf.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Knt={allowDataOverflow:Xl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xl.scale,tick:Xl.tick,tickCount:Xl.tickCount,ticks:void 0,type:"category",unit:void 0},gM=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?$nt:Gnt,vM=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Knt:qnt,E5=e=>e.polarOptions,xM=ut([LA,OA,Ms],ftt),xse=ut([E5,xM],(e,t)=>{if(e!=null)return rd(e.innerRadius,t,0)}),yse=ut([E5,xM],(e,t)=>{if(e!=null)return rd(e.outerRadius,t,t*.8)}),Wnt=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},bse=ut([E5],Wnt);ut([gM,bse],C5);var wse=ut([xM,xse,yse],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ut([vM,wse],C5);var Cse=ut([oa,E5,xse,yse,LA,OA],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:c}=t;return{cx:rd(s,a,a/2),cy:rd(o,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Ji=(e,t)=>t,_5=(e,t,r)=>r;function yM(e){return e==null?void 0:e.id}var As=e=>{var t=oa(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ax=e=>e.tooltip.settings.axisId,hs=e=>{var t=As(e),r=Ax(e);return sw(e,t,r)};function Ese(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,i=new Map;return e.forEach(s=>{var o,l=(o=s.data)!==null&&o!==void 0?o:n;if(!(l==null||l.length===0)){var c=yM(s);l.forEach((u,A)=>{var h=a==null?A:String(Jo(u,a,null)),m=Jo(u,s.dataKey,0),v;i.has(h)?v=i.get(h):v={},Object.assign(v,{[c]:m}),i.set(h,v)})}}),Array.from(i.values())}function S5(e){return e.stackId!=null&&e.dataKey!=null}function Gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gq(Object(r),!0).forEach(function(n){Ynt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ynt(e,t,r){return(t=Xnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xnt(e){var t=Jnt(e,"string");return typeof t=="symbol"?t:t+""}function Jnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iD=[0,"auto"],Wl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},UA=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Wl},Yl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iD,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:g5},P0=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Yl},Znt={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bM=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Znt},Nl=(e,t,r)=>{switch(t){case"xAxis":return UA(e,r);case"yAxis":return P0(e,r);case"zAxis":return bM(e,r);case"angleAxis":return gM(e,r);case"radiusAxis":return vM(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},eat=(e,t,r)=>{switch(t){case"xAxis":return UA(e,r);case"yAxis":return P0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},sw=(e,t,r)=>{switch(t){case"xAxis":return UA(e,r);case"yAxis":return P0(e,r);case"angleAxis":return gM(e,r);case"radiusAxis":return vM(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_se=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Sse(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var wM=e=>e.graphicalItems.cartesianItems,tat=ut([Ji,_5],Sse),Tse=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),ow=ut([wM,Nl,tat],Tse),Nse=ut([ow],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(S5)),Bse=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),kse=ut([ow],Bse),Ise=e=>e.map(t=>t.data).filter(Boolean).flat(1),rat=ut([ow],Ise),Fse=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},CM=ut([rat,dM],Fse),Dse=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Jo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Jo(a,n)}))):e.map(n=>({value:n})),T5=ut([CM,Nl,ow],Dse);function Rse(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Tm(e){return e.filter(t=>df(t)||t instanceof Date).map(Number).filter(t=>fc(t)===!1)}function nat(e,t,r){return!r||typeof t!="number"||fc(t)?[]:r.length?Tm(r.flatMap(n=>{var a=Jo(e,n.dataKey),i,s;if(Array.isArray(a)?[i,s]=a:i=s=a,!(!pc(i)||!pc(s)))return[t-i,t+s]})):[]}var aat=ut([Nse,dM,hs],Ese),Pse=(e,t,r)=>{var n={},a=t.reduce((i,s)=>(s.stackId==null||(i[s.stackId]==null&&(i[s.stackId]=[]),i[s.stackId].push(s)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[s,o]=i,l=o.map(yM);return[s,{stackedData:Ntt(e,l,r),graphicalItems:o}]}))},sD=ut([aat,Nse,w5],Pse),Mse=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var i=Dtt(e,n,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},iat=ut([sD,R0,Ji],Mse),Lse=(e,t,r,n,a)=>r.length>0?e.flatMap(i=>r.flatMap(s=>{var o,l,c=(o=n[s.id])===null||o===void 0?void 0:o.filter(A=>Rse(a,A)),u=Jo(i,(l=t.dataKey)!==null&&l!==void 0?l:s.dataKey);return{value:u,errorDomain:nat(i,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Jo(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),N5=e=>e.errorBars,Ose=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Rse(r,n));ut([kse,N5,Ji],Ose);var sat=ut([CM,Nl,kse,N5,Ji],Lse);function oat(e){var{value:t}=e;if(df(t)||t instanceof Date)return t}var qq=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Tm(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},lat=(e,t,r)=>{var n=e.map(oat).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Wae(n))?tse(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},EM=e=>{var t;if(e==null||!("domain"in e))return iD;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Tm(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:iD},vS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),s=Math.min(...i),o=Math.max(...i);return[s,o]}},Use=e=>e.referenceElements.dots,hx=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),cat=ut([Use,Ji,_5],hx),jse=e=>e.referenceElements.areas,uat=ut([jse,Ji,_5],hx),Hse=e=>e.referenceElements.lines,dat=ut([Hse,Ji,_5],hx),Qse=(e,t)=>{var r=Tm(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},fat=ut(cat,Ji,Qse),Vse=(e,t)=>{var r=Tm(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Aat=ut([uat,Ji],Vse),zse=(e,t)=>{var r=Tm(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},hat=ut(dat,Ji,zse),pat=ut(fat,hat,Aat,(e,t,r)=>vS(e,r,t)),mat=ut([Nl],EM),Gse=(e,t,r,n,a,i,s)=>{var o=knt(t,e.allowDataOverflow);if(o!=null)return o;var l=i==="vertical"&&s==="xAxis"||i==="horizontal"&&s==="yAxis",c=l?vS(r,a,qq(n)):vS(a,qq(n));return Int(t,c,e.allowDataOverflow)},gat=ut([Nl,mat,iat,sat,pat,oa,Ji],Gse),vat=[0,1],qse=(e,t,r,n,a,i,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:l}=e,c=Sm(t,i);return c&&o==null?tse(0,r.length):l==="category"?lat(n,e,c):a==="expand"?vat:s}},_M=ut([Nl,oa,CM,T5,w5,Ji,gat],qse),$se=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:s}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(rw(i));return o in Y1?o:"point"}}},lw=ut([Nl,oa,_se,hM,Ji],$se);function xat(e){if(e!=null){if(e in Y1)return Y1[e]();var t="scale".concat(rw(e));if(t in Y1)return Y1[t]()}}function SM(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=xat(t);if(a!=null){var i=a.domain(r).range(n);return Ctt(i),i}}}var Kse=(e,t,r)=>{var n=EM(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&jv(e))return Hnt(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&jv(e))return Qnt(e,t.tickCount,t.allowDecimals)}},TM=ut([_M,sw,lw],Kse),Wse=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&jv(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],s=t[1],o=r[r.length-1];return[Math.min(a,i),Math.max(s,o)]}return t},yat=ut([Nl,_M,TM,Ji],Wse),bat=ut(T5,Nl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Tm(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var s=n[i+1]-n[i];r=Math.min(r,s)}return r/a}}),Yse=ut(bat,oa,gse,Ms,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!pc(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var s=rd(r,e*i),o=e*i/2;return o-s-(o-s)/i*s}return 0}),wat=(e,t)=>{var r=UA(e,t);return r==null||typeof r.padding!="string"?0:Yse(e,"xAxis",t,r.padding)},Cat=(e,t)=>{var r=P0(e,t);return r==null||typeof r.padding!="string"?0:Yse(e,"yAxis",t,r.padding)},Eat=ut(UA,wat,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),_at=ut(P0,Cat,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),Sat=ut([Ms,Eat,x5,v5,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Tat=ut([Ms,oa,_at,x5,v5,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:s}=a;return i?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),cw=(e,t,r,n)=>{var a;switch(t){case"xAxis":return Sat(e,r,n);case"yAxis":return Tat(e,r,n);case"zAxis":return(a=bM(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return bse(e);case"radiusAxis":return wse(e,r);default:return}},Xse=ut([Nl,cw],C5),px=ut([Nl,lw,yat,Xse],SM);ut([ow,N5,Ji],Ose);function Jse(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var B5=(e,t)=>t,k5=(e,t,r)=>r,Nat=ut(nM,B5,k5,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Jse)),Bat=ut(aM,B5,k5,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Jse)),Zse=(e,t)=>({width:e.width,height:t.height}),kat=(e,t)=>{var r=typeof t.width=="number"?t.width:g5;return{width:r,height:e.height}},eoe=ut(Ms,UA,Zse),Iat=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Fat=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Dat=ut(OA,Ms,Nat,B5,k5,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var l=Zse(t,o);s==null&&(s=Iat(t,n,e));var c=n==="top"&&!a||n==="bottom"&&a;i[o.id]=s-Number(c)*l.height,s+=(c?-1:1)*l.height}),i}),Rat=ut(LA,Ms,Bat,B5,k5,(e,t,r,n,a)=>{var i={},s;return r.forEach(o=>{var l=kat(t,o);s==null&&(s=Fat(t,n,e));var c=n==="left"&&!a||n==="right"&&a;i[o.id]=s-Number(c)*l.width,s+=(c?-1:1)*l.width}),i}),Pat=(e,t)=>{var r=Ms(e),n=UA(e,t);if(n!=null){var a=Dat(e,n.orientation,n.mirror),i=a[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Mat=(e,t)=>{var r=Ms(e),n=P0(e,t);if(n!=null){var a=Rat(e,n.orientation,n.mirror),i=a[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},toe=ut(Ms,P0,(e,t)=>{var r=typeof t.width=="number"?t.width:g5;return{width:r,height:e.height}}),$q=(e,t,r)=>{switch(t){case"xAxis":return eoe(e,r).width;case"yAxis":return toe(e,r).height;default:return}},roe=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:s}=r,o=Sm(e,n),l=t.map(c=>c.value);if(s&&o&&i==="category"&&a&&Wae(l))return l}},NM=ut([oa,T5,Nl,Ji],roe),noe=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,s=Sm(e,n);if(s&&(a==="number"||i!=="auto"))return t.map(o=>o.value)}},BM=ut([oa,T5,sw,Ji],noe),Kq=ut([oa,eat,lw,px,NM,BM,cw,TM,Ji],(e,t,r,n,a,i,s,o,l)=>{if(t==null)return null;var c=Sm(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:o,range:s,realScaleType:r,scale:n}}),Lat=(e,t,r,n,a,i,s,o,l)=>{if(!(t==null||n==null)){var c=Sm(e,l),{type:u,ticks:A,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=u==="category"&&n.bandwidth?n.bandwidth()/m:0;v=l==="angleAxis"&&i!=null&&i.length>=2?wl(i[0]-i[1])*2*v:v;var g=A||a;if(g){var y=g.map((w,T)=>{var N=s?s.indexOf(w):w;return{index:T,coordinate:n(N)+v,value:w,offset:v}});return y.filter(w=>!fc(w.coordinate))}return c&&o?o.map((w,T)=>({coordinate:n(w)+v,value:w,index:T,offset:v})):n.ticks?n.ticks(h).map(w=>({coordinate:n(w)+v,value:w,offset:v})):n.domain().map((w,T)=>({coordinate:n(w)+v,value:s?s[w]:w,index:T,offset:v}))}},aoe=ut([oa,sw,lw,px,TM,cw,NM,BM,Ji],Lat),Oat=(e,t,r,n,a,i,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Sm(e,s),{tickCount:l}=t,c=0;return c=s==="angleAxis"&&(n==null?void 0:n.length)>=2?wl(n[0]-n[1])*2*c:c,o&&i?i.map((u,A)=>({coordinate:r(u)+c,value:u,index:A,offset:c})):r.ticks?r.ticks(l).map(u=>({coordinate:r(u)+c,value:u,offset:c})):r.domain().map((u,A)=>({coordinate:r(u)+c,value:a?a[u]:u,index:A,offset:c}))}},Hv=ut([oa,sw,px,cw,NM,BM,Ji],Oat),Qv=ut(Nl,px,(e,t)=>{if(!(e==null||t==null))return gS(gS({},e),{},{scale:t})}),Uat=ut([Nl,lw,_M,Xse],SM);ut((e,t,r)=>bM(e,r),Uat,(e,t)=>{if(!(e==null||t==null))return gS(gS({},e),{},{scale:t})});var jat=ut([oa,nM,aM],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ioe=e=>e.options.defaultTooltipEventType,soe=e=>e.options.validateTooltipEventTypes;function ooe(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function kM(e,t){var r=ioe(e),n=soe(e);return ooe(t,r,n)}function Hat(e){return vr(t=>kM(t,e))}var loe=(e,t)=>{var r,n=Number(t);if(!(fc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Qat=e=>e.tooltip.settings,Hh={active:!1,index:null,dataKey:void 0,coordinate:void 0},Vat={itemInteraction:{click:Hh,hover:Hh},axisInteraction:{click:Hh,hover:Hh},keyboardInteraction:Hh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},coe=gc({name:"tooltip",initialState:Vat,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=hA(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:zat,removeTooltipEntrySettings:Gat,setTooltipSettingsState:qat,setActiveMouseOverItemIndex:uoe,mouseLeaveItem:$at,mouseLeaveChart:doe,setActiveClickItemIndex:Kat,setMouseOverAxisIndex:foe,setMouseClickAxisIndex:Wat,setSyncInteraction:oD,setKeyboardInteraction:lD}=coe.actions,Yat=coe.reducer;function Wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wq(Object(r),!0).forEach(function(n){Xat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xat(e,t,r){return(t=Jat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jat(e){var t=Zat(e,"string");return typeof t=="symbol"?t:t+""}function Zat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eit(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function tit(e){return e.index!=null}var Aoe=(e,t,r,n)=>{if(t==null)return Hh;var a=eit(e,t,r);if(a==null)return Hh;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(tit(a)){if(i)return DC(DC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return DC(DC({},Hh),{},{coordinate:a.coordinate})},IM=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!pc(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},hoe=(e,t,r,n,a,i,s,o)=>{if(!(i==null||o==null)){var l=s[0],c=l==null?void 0:o(l.positions,i);if(c!=null)return c;var u=a==null?void 0:a[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},poe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var s;return((s=i.settings)===null||s===void 0?void 0:s.dataKey)===a})},uw=e=>e.options.tooltipPayloadSearcher,mx=e=>e.tooltip;function Yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yq(Object(r),!0).forEach(function(n){rit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rit(e,t,r){return(t=nit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nit(e){var t=ait(e,"string");return typeof t=="symbol"?t:t+""}function ait(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iit(e,t){return e??t}var moe=(e,t,r,n,a,i,s)=>{if(!(t==null||i==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=r,A=[];return e.reduce((h,m)=>{var v,{dataDefinedOnItem:g,settings:y}=m,w=iit(g,o),T=Array.isArray(w)?Mie(w,c,u):w,N=(v=y==null?void 0:y.dataKey)!==null&&v!==void 0?v:n==null?void 0:n.dataKey,F=y==null?void 0:y.nameKey,B;if(n!=null&&n.dataKey&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?B=KJe(T,n.dataKey,a):B=i(T,t,l,F),Array.isArray(B))B.forEach(E=>{var S=Xq(Xq({},y),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(Aq({tooltipEntrySettings:S,dataKey:E.dataKey,payload:E.payload,value:Jo(E.payload,E.dataKey),name:E.name}))});else{var D;h.push(Aq({tooltipEntrySettings:y,dataKey:N,payload:B,value:Jo(B,N),name:(D=Jo(B,F))!==null&&D!==void 0?D:y==null?void 0:y.name}))}return h},A)}},FM=ut([hs,oa,_se,hM,As],$se),sit=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),oit=ut([As,Ax],Sse),dw=ut([sit,hs,oit],Tse),lit=ut([dw],e=>e.filter(S5)),cit=ut([dw],Ise),gx=ut([cit,R0],Fse),uit=ut([lit,R0,hs],Ese),DM=ut([gx,hs,dw],Dse),dit=ut([hs],EM),fit=ut([dw],e=>e.filter(S5)),Ait=ut([uit,fit,w5],Pse),hit=ut([Ait,R0,As],Mse),pit=ut([dw],Bse),mit=ut([gx,hs,pit,N5,As],Lse),git=ut([Use,As,Ax],hx),vit=ut([git,As],Qse),xit=ut([jse,As,Ax],hx),yit=ut([xit,As],Vse),bit=ut([Hse,As,Ax],hx),wit=ut([bit,As],zse),Cit=ut([vit,wit,yit],vS),Eit=ut([hs,dit,hit,mit,Cit,oa,As],Gse),goe=ut([hs,oa,gx,DM,w5,As,Eit],qse),_it=ut([goe,hs,FM],Kse),Sit=ut([hs,goe,_it,As],Wse),voe=e=>{var t=As(e),r=Ax(e),n=!1;return cw(e,t,r,n)},xoe=ut([hs,voe],C5),yoe=ut([hs,FM,Sit,xoe],SM),Tit=ut([oa,DM,hs,As],roe),Nit=ut([oa,DM,hs,As],noe),Bit=(e,t,r,n,a,i,s,o)=>{if(t){var{type:l}=t,c=Sm(e,o);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,A=l==="category"&&n.bandwidth?n.bandwidth()/u:0;return A=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?wl(a[0]-a[1])*2*A:A,c&&s?s.map((h,m)=>({coordinate:n(h)+A,value:h,index:m,offset:A})):n.domain().map((h,m)=>({coordinate:n(h)+A,value:i?i[h]:h,index:m,offset:A}))}}},jA=ut([oa,hs,FM,yoe,voe,Tit,Nit,As],Bit),RM=ut([ioe,soe,Qat],(e,t,r)=>ooe(r.shared,e,t)),boe=e=>e.tooltip.settings.trigger,PM=e=>e.tooltip.settings.defaultIndex,I5=ut([mx,RM,boe,PM],Aoe),Vv=ut([I5,gx],IM),woe=ut([jA,Vv],loe),Coe=ut([I5],e=>{if(e)return e.dataKey}),Eoe=ut([mx,RM,boe,PM],poe),kit=ut([LA,OA,oa,Ms,jA,PM,Eoe,uw],hoe),Iit=ut([I5,kit],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Fit=ut([I5],e=>e.active),Dit=ut([Eoe,Vv,R0,hs,woe,uw,RM],moe);ut([Dit],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(n){Rit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rit(e,t,r){return(t=Pit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pit(e){var t=Mit(e,"string");return typeof t=="symbol"?t:t+""}function Mit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lit=()=>vr(hs),Oit=()=>{var e=Lit(),t=vr(jA),r=vr(yoe);return rM(Zq(Zq({},e),{},{scale:r}),t)},Uit=()=>vr(hM),MM=(e,t)=>t,_oe=(e,t,r)=>r,LM=(e,t,r,n)=>n,jit=ut(jA,e=>u5(e,t=>t.coordinate)),OM=ut([mx,MM,_oe,LM],Aoe),Soe=ut([OM,gx],IM),Hit=(e,t,r)=>{if(t!=null){var n=mx(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Toe=ut([mx,MM,_oe,LM],poe),xS=ut([LA,OA,oa,Ms,jA,LM,Toe,uw],hoe),Qit=ut([OM,xS],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Noe=ut(jA,Soe,loe),Vit=ut([Toe,Soe,R0,hs,Noe,uw,MM],moe),zit=ut([OM],e=>({isActive:e.active,activeIndex:e.index})),Git=(e,t,r,n,a,i,s,o)=>{if(!(!e||!t||!n||!a||!i)){var l=Rtt(e.chartX,e.chartY,t,r,o);if(l){var c=Mtt(l,t),u=btt(c,s,i,n,a),A=Ptt(t,i,u,l);return{activeIndex:String(u),activeCoordinate:A}}}};function cD(){return cD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cD.apply(null,arguments)}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(n){qit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qit(e,t,r){return(t=$it(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $it(e){var t=Kit(e,"string");return typeof t=="symbol"?t:t+""}function Kit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wit(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:s,cursor:o,tooltipEventType:l,chartName:c}=e,u=t,A=r,h=n;if(!o||!u||c!=="ScatterChart"&&l!=="axis")return null;var m,v;if(c==="ScatterChart")m=u,v=Ort;else if(c==="BarChart")m=Urt(s,u,a,i),v=Xie;else if(s==="radial"){var{cx:g,cy:y,radius:w,startAngle:T,endAngle:N}=Jie(u);m={cx:g,cy:y,startAngle:T,endAngle:N,innerRadius:w,outerRadius:w},v=ese}else m={points:Cnt(s,u,a)},v=Brt;var F=typeof o=="object"&&"className"in o?o.className:void 0,B=RC(RC(RC(RC({stroke:"#ccc",pointerEvents:"none"},a),m),Is(o,!1)),{},{payload:A,payloadIndex:h,className:_a("recharts-tooltip-cursor",F)});return L.isValidElement(o)?L.cloneElement(o,B):L.createElement(v,B)}function Yit(e){var t=Oit(),r=Qie(),n=lM(),a=Uit();return L.createElement(Wit,cD({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var Boe=L.createContext(null),Xit=()=>L.useContext(Boe),Kk={exports:{}},t$;function Jit(){return t$||(t$=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,A,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,A||l,h),v=r?r+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],m]:l._events[v].push(m):(l._events[v]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,A;if(this._eventsCount===0)return c;for(A in u=this._events)t.call(u,A)&&c.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=r?r+c:c,A=this._events[u];if(!A)return[];if(A.fn)return[A.fn];for(var h=0,m=A.length,v=new Array(m);h<m;h++)v[h]=A[h].fn;return v},o.prototype.listenerCount=function(c){var u=r?r+c:c,A=this._events[u];return A?A.fn?1:A.length:0},o.prototype.emit=function(c,u,A,h,m,v){var g=r?r+c:c;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,T,N;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,A),!0;case 4:return y.fn.call(y.context,u,A,h),!0;case 5:return y.fn.call(y.context,u,A,h,m),!0;case 6:return y.fn.call(y.context,u,A,h,m,v),!0}for(N=1,T=new Array(w-1);N<w;N++)T[N-1]=arguments[N];y.fn.apply(y.context,T)}else{var F=y.length,B;for(N=0;N<F;N++)switch(y[N].once&&this.removeListener(c,y[N].fn,void 0,!0),w){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,u);break;case 3:y[N].fn.call(y[N].context,u,A);break;case 4:y[N].fn.call(y[N].context,u,A,h);break;default:if(!T)for(B=1,T=new Array(w-1);B<w;B++)T[B-1]=arguments[B];y[N].fn.apply(y[N].context,T)}}return!0},o.prototype.on=function(c,u,A){return i(this,c,u,A,!1)},o.prototype.once=function(c,u,A){return i(this,c,u,A,!0)},o.prototype.removeListener=function(c,u,A,h){var m=r?r+c:c;if(!this._events[m])return this;if(!u)return s(this,m),this;var v=this._events[m];if(v.fn)v.fn===u&&(!h||v.once)&&(!A||v.context===A)&&s(this,m);else{for(var g=0,y=[],w=v.length;g<w;g++)(v[g].fn!==u||h&&!v[g].once||A&&v[g].context!==A)&&y.push(v[g]);y.length?this._events[m]=y.length===1?y[0]:y:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Kk)),Kk.exports}var Zit=Jit();const est=mc(Zit);var mb=new est,uD="recharts.syncEvent.tooltip",r$="recharts.syncEvent.brush";function tst(e,t){if(t){var r=Number.parseInt(t,10);if(!fc(r))return e==null?void 0:e[r]}}var rst={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},koe=gc({name:"options",initialState:rst,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),nst=koe.reducer,{createEventEmitter:ast}=koe.actions;function ist(e){return e.tooltip.syncInteraction}var sst={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Ioe=gc({name:"chartData",initialState:sst,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:n$,setDataStartEndIndexes:ost,setComputedData:Wdt}=Ioe.actions,lst=Ioe.reducer,Foe=()=>{};function cst(){var e=vr(pM),t=vr(mM),r=Xi(),n=vr(vse),a=vr(jA),i=lM(),s=iM(),o=vr(l=>l.rootProps.className);L.useEffect(()=>{if(e==null)return Foe;var l=(c,u,A)=>{if(t!==A&&e===c){if(n==="index"){r(u);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},v=n(a,m);h=a[v]}else n==="value"&&(h=a.find(D=>String(D.value)===u.payload.label));var{coordinate:g}=u.payload;if(h==null||u.payload.active===!1||g==null||s==null){r(oD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:y,y:w}=g,T=Math.min(y,s.x+s.width),N=Math.min(w,s.y+s.height),F={x:i==="horizontal"?h.coordinate:T,y:i==="horizontal"?N:h.coordinate},B=oD({active:u.payload.active,coordinate:F,dataKey:u.payload.dataKey,index:String(h.index),label:u.payload.label});r(B)}}};return mb.on(uD,l),()=>{mb.off(uD,l)}},[o,r,t,e,n,a,i,s])}function ust(){var e=vr(pM),t=vr(mM),r=Xi();L.useEffect(()=>{if(e==null)return Foe;var n=(a,i,s)=>{t!==s&&e===a&&r(ost(i))};return mb.on(r$,n),()=>{mb.off(r$,n)}},[r,t,e])}function dst(){var e=Xi();L.useEffect(()=>{e(ast())},[e]),cst(),ust()}function fst(e,t,r,n,a,i){var s=vr(h=>Hit(h,e,t)),o=vr(mM),l=vr(pM),c=vr(vse),u=vr(ist),A=u==null?void 0:u.active;L.useEffect(()=>{if(!A&&l!=null&&o!=null){var h=oD({active:i,coordinate:r,dataKey:s,index:a,label:typeof n=="number"?String(n):n});mb.emit(uD,l,h,o)}},[A,r,s,a,n,o,l,c,i])}function a$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a$(Object(r),!0).forEach(function(n){Ast(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ast(e,t,r){return(t=hst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hst(e){var t=pst(e,"string");return typeof t=="symbol"?t:t+""}function pst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mst(e){return e.dataKey}function gst(e,t){return L.isValidElement(e)?L.cloneElement(e,t):typeof e=="function"?L.createElement(e,t):L.createElement(prt,t)}var s$=[],vst={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!iw.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function xst(e){var t=D0(e,vst),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:s,filterNull:o,isAnimationActive:l,offset:c,payloadUniqBy:u,position:A,reverseDirection:h,useTranslate3d:m,wrapperStyle:v,cursor:g,shared:y,trigger:w,defaultIndex:T,portal:N,axisId:F}=t,B=Xi(),D=typeof T=="number"?String(T):T;L.useEffect(()=>{B(qat({shared:y,trigger:w,axisId:F,active:r,defaultIndex:D}))},[B,y,w,F,r,D]);var E=iM(),S=zie(),k=Hat(y),{activeIndex:H,isActive:P}=vr(ne=>zit(ne,k,w,D)),M=vr(ne=>Vit(ne,k,w,D)),Q=vr(ne=>Noe(ne,k,w,D)),V=vr(ne=>Qit(ne,k,w,D)),te=M,W=Xit(),re=r??P,[z,X]=die([te,re]),K=k==="axis"?Q:void 0;fst(k,w,V,K,H,re);var se=N??W;if(se==null)return null;var U=te??s$;re||(U=s$),o&&U.length&&(U=sie(te.filter(ne=>ne.value!=null&&(ne.hide!==!0||t.includeHidden)),u,mst));var Y=U.length>0,Z=L.createElement(wrt,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:l,active:re,coordinate:V,hasPayload:Y,offset:c,position:A,reverseDirection:h,useTranslate3d:m,viewBox:E,wrapperStyle:v,lastBoundingBox:z,innerRef:X,hasPortalFromProps:!!N},gst(s,i$(i$({},t),{},{payload:U,label:K,active:re,coordinate:V,accessibilityLayer:S})));return L.createElement(L.Fragment,null,zP.createPortal(Z,se),re&&L.createElement(Yit,{cursor:g,tooltipEventType:k,coordinate:V,payload:te,index:H}))}var Wk={},Yk={},Xk={},o$;function yst(){return o$||(o$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let s,o=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},A=()=>{c&&u(),g()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,A()},n)},v=()=>{h!==null&&(clearTimeout(h),h=null)},g=()=>{v(),s=void 0,o=null},y=()=>{u()},w=function(...T){if(a!=null&&a.aborted)return;s=this,o=T;const N=h==null;m(),l&&N&&u()};return w.schedule=m,w.cancel=g,w.flush=y,a==null||a.addEventListener("abort",g,{once:!0}),w}e.debounce=t}(Xk)),Xk}var l$;function bst(){return l$||(l$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yst();function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:s=!1,trailing:o=!0,maxWait:l}=i,c=Array(2);s&&(c[0]="leading"),o&&(c[1]="trailing");let u,A=null;const h=t.debounce(function(...g){u=n.apply(this,g),A=null},a,{edges:c}),m=function(...g){return l!=null&&(A===null&&(A=Date.now()),Date.now()-A>=l)?(u=n.apply(this,g),A=Date.now(),h.cancel(),h.schedule(),u):(h.apply(this,g),u)},v=()=>(h.flush(),u);return m.cancel=h.cancel,m.flush=v,m}e.debounce=r}(Yk)),Yk}var c$;function wst(){return c$||(c$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bst();function r(n,a=0,i={}){const{leading:s=!0,trailing:o=!0}=i;return t.debounce(n,a,{leading:s,maxWait:a,trailing:o})}e.throttle=r}(Wk)),Wk}var Jk,u$;function Cst(){return u$||(u$=1,Jk=wst().throttle),Jk}var Est=Cst();const _st=mc(Est);var wy=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function d$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d$(Object(r),!0).forEach(function(n){Sst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sst(e,t,r){return(t=Tst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tst(e){var t=Nst(e,"string");return typeof t=="symbol"?t:t+""}function Nst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bst=L.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:i="100%",minWidth:s=0,minHeight:o,maxHeight:l,children:c,debounce:u=0,id:A,className:h,onResize:m,style:v={}}=e,g=L.useRef(null),y=L.useRef();y.current=m,L.useImperativeHandle(t,()=>g.current);var[w,T]=L.useState({containerWidth:n.width,containerHeight:n.height}),N=L.useCallback((B,D)=>{T(E=>{var S=Math.round(B),k=Math.round(D);return E.containerWidth===S&&E.containerHeight===k?E:{containerWidth:S,containerHeight:k}})},[]);L.useEffect(()=>{var B=k=>{var H,{width:P,height:M}=k[0].contentRect;N(P,M),(H=y.current)===null||H===void 0||H.call(y,P,M)};u>0&&(B=_st(B,u,{trailing:!0,leading:!1}));var D=new ResizeObserver(B),{width:E,height:S}=g.current.getBoundingClientRect();return N(E,S),D.observe(g.current),()=>{D.disconnect()}},[N,u]);var F=L.useMemo(()=>{var{containerWidth:B,containerHeight:D}=w;if(B<0||D<0)return null;wy(_p(a)||_p(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,i),wy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=_p(a)?B:a,S=_p(i)?D:i;return r&&r>0&&(E?S=E/r:S&&(E=S*r),l&&S>l&&(S=l)),wy(E>0||S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,S,a,i,s,o,r),L.Children.map(c,k=>L.cloneElement(k,{width:E,height:S,style:Zk({width:E,height:S},k.props.style)}))},[r,c,i,l,o,s,w,a]);return L.createElement("div",{id:A?"".concat(A):void 0,className:_a("recharts-responsive-container",h),style:Zk(Zk({},v),{},{width:a,height:i,minWidth:s,minHeight:o,maxHeight:l}),ref:g},L.createElement("div",{style:{width:0,height:0,overflow:"visible"}},F))}),Doe=e=>null;Doe.displayName="Cell";function kst(e,t,r){return(t=Ist(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ist(e){var t=Fst(e,"string");return typeof t=="symbol"?t:t+""}function Fst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dst{constructor(t){kst(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function f$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rst(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f$(Object(r),!0).forEach(function(n){Pst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pst(e,t,r){return(t=Mst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mst(e){var t=Lst(e,"string");return typeof t=="symbol"?t:t+""}function Lst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ost={cacheSize:2e3,enableCache:!0},Roe=Rst({},Ost),A$=new Dst(Roe.cacheSize),Ust={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},h$="recharts_measurement_span";function jst(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(s,"|").concat(o)}var p$=(e,t)=>{try{var r=document.getElementById(h$);r||(r=document.createElement("span"),r.setAttribute("id",h$),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Ust,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Cy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||iw.isSsr)return{width:0,height:0};if(!Roe.enableCache)return p$(t,r);var n=jst(t,r),a=A$.get(n);if(a)return a;var i=p$(t,r);return A$.set(n,i),i},m$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Hst=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Qst=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Poe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Vst=Object.keys(Poe),zg="NaN";function zst(e,t){return e*Poe[t]}class ml{static parse(t){var r,[,n,a]=(r=Qst.exec(t))!==null&&r!==void 0?r:[];return new ml(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,fc(t)&&(this.unit=""),r!==""&&!Hst.test(r)&&(this.num=NaN,this.unit=""),Vst.includes(r)&&(this.num=zst(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ml(NaN,""):new ml(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ml(NaN,""):new ml(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ml(NaN,""):new ml(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ml(NaN,""):new ml(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return fc(this.num)}}function Moe(e){if(e.includes(zg))return zg;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=m$.exec(t))!==null&&r!==void 0?r:[],s=ml.parse(n??""),o=ml.parse(i??""),l=a==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return zg;t=t.replace(m$,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,A,h]=(c=g$.exec(t))!==null&&c!==void 0?c:[],m=ml.parse(u??""),v=ml.parse(h??""),g=A==="+"?m.add(v):m.subtract(v);if(g.isNaN())return zg;t=t.replace(g$,g.toString())}return t}var v$=/\(([^()]*)\)/;function Gst(e){for(var t=e,r;(r=v$.exec(t))!=null;){var[,n]=r;t=t.replace(v$,Moe(n))}return t}function qst(e){var t=e.replace(/\s+/g,"");return t=Gst(t),t=Moe(t),t}function $st(e){try{return qst(e)}catch{return zg}}function eI(e){var t=$st(e.slice(5,-1));return t===zg?"":t}var Kst=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Wst=["dx","dy","angle","className","breakAll"];function dD(){return dD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dD.apply(null,arguments)}function x$(e,t){if(e==null)return{};var r,n,a=Yst(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Yst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Loe=/[ \f\n\r\t\v\u2028\u2029]+/,Ooe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];us(t)||(r?a=t.toString().split(""):a=t.toString().split(Loe));var i=a.map(o=>({word:o,width:Cy(o,n).width})),s=r?0:Cy(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:s}}catch{return null}},Xst=(e,t,r,n,a)=>{var{maxLines:i,children:s,style:o,breakAll:l}=e,c=ir(i),u=s,A=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((M,Q)=>{var{word:V,width:te}=Q,W=M[M.length-1];if(W&&(n==null||a||W.width+te+r<Number(n)))W.words.push(V),W.width+=te+r;else{var re={words:[V],width:te};M.push(re)}return M},[])},h=A(t),m=H=>H.reduce((P,M)=>P.width>M.width?P:M);if(!c||a)return h;var v=h.length>i||m(h).width>Number(n);if(!v)return h;for(var g="…",y=H=>{var P=u.slice(0,H),M=Ooe({breakAll:l,style:o,children:P+g}).wordsWithComputedWidth,Q=A(M),V=Q.length>i||m(Q).width>Number(n);return[V,Q]},w=0,T=u.length-1,N=0,F;w<=T&&N<=u.length-1;){var B=Math.floor((w+T)/2),D=B-1,[E,S]=y(D),[k]=y(B);if(!E&&!k&&(w=B+1),E&&k&&(T=B-1),!E&&k){F=S;break}N++}return F||h},y$=e=>{var t=us(e)?[]:e.toString().split(Loe);return[{words:t}]},Jst=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:s}=e;if((t||r)&&!iw.isSsr){var o,l,c=Ooe({breakAll:i,children:n,style:a});if(c){var{wordsWithComputedWidth:u,spaceWidth:A}=c;o=u,l=A}else return y$(n);return Xst({breakAll:i,children:n,maxLines:s,style:a},o,l,t,r)}return y$(n)},b$="#808080",UM=L.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:s=!1,textAnchor:o="start",verticalAnchor:l="end",fill:c=b$}=e,u=x$(e,Kst),A=L.useMemo(()=>Jst({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:s,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,s,u.style,u.width]),{dx:h,dy:m,angle:v,className:g,breakAll:y}=u,w=x$(u,Wst);if(!df(r)||!df(n))return null;var T=r+(ir(h)?h:0),N=n+(ir(m)?m:0),F;switch(l){case"start":F=eI("calc(".concat(i,")"));break;case"middle":F=eI("calc(".concat((A.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:F=eI("calc(".concat(A.length-1," * -").concat(a,")"));break}var B=[];if(s){var D=A[0].width,{width:E}=u;B.push("scale(".concat(ir(E)?E/D:1,")"))}return v&&B.push("rotate(".concat(v,", ").concat(T,", ").concat(N,")")),B.length&&(w.transform=B.join(" ")),L.createElement("text",dD({},Is(w,!0),{ref:t,x:T,y:N,className:_a("recharts-text",g),textAnchor:o,fill:c.includes("url")?b$:c}),A.map((S,k)=>{var H=S.words.join(y?"":" ");return L.createElement("tspan",{x:T,dy:k===0?F:a,key:"".concat(H,"-").concat(k)},H)}))});UM.displayName="Text";var Zst=["offset"],eot=["labelRef"];function w$(e,t){if(e==null)return{};var r,n,a=tot(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function C$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C$(Object(r),!0).forEach(function(n){rot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rot(e,t,r){return(t=not(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function not(e){var t=aot(e,"string");return typeof t=="symbol"?t:t+""}function aot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eA(){return eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eA.apply(null,arguments)}var iot=e=>{var{value:t,formatter:r}=e,n=us(e.children)?t:e.children;return typeof r=="function"?r(n):n},jM=e=>e!=null&&typeof e=="function",sot=(e,t)=>{var r=wl(t-e),n=Math.min(Math.abs(t-e),360);return r*n},oot=(e,t,r,n)=>{var{position:a,offset:i,className:s}=e,{cx:o,cy:l,innerRadius:c,outerRadius:u,startAngle:A,endAngle:h,clockWise:m}=n,v=(c+u)/2,g=sot(A,h),y=g>=0?1:-1,w,T;a==="insideStart"?(w=A+y*i,T=m):a==="insideEnd"?(w=h-y*i,T=!m):a==="end"&&(w=h+y*i,T=m),T=g<=0?T:!T;var N=eo(o,l,v,w),F=eo(o,l,v,w+(T?1:-1)*359),B="M".concat(N.x,",").concat(N.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(T?0:1,`,
    `).concat(F.x,",").concat(F.y),D=us(e.id)?db("recharts-radial-line-"):e.id;return L.createElement("text",eA({},r,{dominantBaseline:"central",className:_a("recharts-radial-bar-label",s)}),L.createElement("defs",null,L.createElement("path",{id:D,d:B})),L.createElement("textPath",{xlinkHref:"#".concat(D)},t))},lot=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:o,endAngle:l}=e,c=(o+l)/2;if(r==="outside"){var{x:u,y:A}=eo(n,a,s+t,c);return{x:u,y:A,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+s)/2,{x:m,y:v}=eo(n,a,h,c);return{x:m,y:v,textAnchor:"middle",verticalAnchor:"middle"}},cot=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:i,y:s,width:o,height:l}=t,c=l>=0?1:-1,u=c*n,A=c>0?"end":"start",h=c>0?"start":"end",m=o>=0?1:-1,v=m*n,g=m>0?"end":"start",y=m>0?"start":"end";if(a==="top"){var w={x:i+o/2,y:s-c*n,textAnchor:"middle",verticalAnchor:A};return si(si({},w),r?{height:Math.max(s-r.y,0),width:o}:{})}if(a==="bottom"){var T={x:i+o/2,y:s+l+u,textAnchor:"middle",verticalAnchor:h};return si(si({},T),r?{height:Math.max(r.y+r.height-(s+l),0),width:o}:{})}if(a==="left"){var N={x:i-v,y:s+l/2,textAnchor:g,verticalAnchor:"middle"};return si(si({},N),r?{width:Math.max(N.x-r.x,0),height:l}:{})}if(a==="right"){var F={x:i+o+v,y:s+l/2,textAnchor:y,verticalAnchor:"middle"};return si(si({},F),r?{width:Math.max(r.x+r.width-F.x,0),height:l}:{})}var B=r?{width:o,height:l}:{};return a==="insideLeft"?si({x:i+v,y:s+l/2,textAnchor:y,verticalAnchor:"middle"},B):a==="insideRight"?si({x:i+o-v,y:s+l/2,textAnchor:g,verticalAnchor:"middle"},B):a==="insideTop"?si({x:i+o/2,y:s+u,textAnchor:"middle",verticalAnchor:h},B):a==="insideBottom"?si({x:i+o/2,y:s+l-u,textAnchor:"middle",verticalAnchor:A},B):a==="insideTopLeft"?si({x:i+v,y:s+u,textAnchor:y,verticalAnchor:h},B):a==="insideTopRight"?si({x:i+o-v,y:s+u,textAnchor:g,verticalAnchor:h},B):a==="insideBottomLeft"?si({x:i+v,y:s+l-u,textAnchor:y,verticalAnchor:A},B):a==="insideBottomRight"?si({x:i+o-v,y:s+l-u,textAnchor:g,verticalAnchor:A},B):a&&typeof a=="object"&&(ir(a.x)||_p(a.x))&&(ir(a.y)||_p(a.y))?si({x:i+rd(a.x,o),y:s+rd(a.y,l),textAnchor:"end",verticalAnchor:"end"},B):si({x:i+o/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},B)},uot=e=>"cx"in e&&ir(e.cx);function ec(e){var{offset:t=5}=e,r=w$(e,Zst),n=si({offset:t},r),{viewBox:a,position:i,value:s,children:o,content:l,className:c="",textBreakAll:u,labelRef:A}=n,h=vr(Cse),m=iM(),v=i==="center"?m:h??m,g=a||v;if(!g||us(s)&&us(o)&&!L.isValidElement(l)&&typeof l!="function")return null;var y=si(si({},n),{},{viewBox:g});if(L.isValidElement(l)){var{labelRef:w}=y,T=w$(y,eot);return L.cloneElement(l,T)}var N;if(typeof l=="function"){if(N=L.createElement(l,y),L.isValidElement(N))return N}else N=iot(n);var F=uot(g),B=Is(n,!0);if(F&&(i==="insideStart"||i==="insideEnd"||i==="end"))return oot(n,N,B,g);var D=F?lot(g,n.offset,n.position):cot(n,g);return L.createElement(UM,eA({ref:A,className:_a("recharts-label",c)},B,D,{breakAll:u}),N)}ec.displayName="Label";var Uoe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:i,r:s,radius:o,innerRadius:l,outerRadius:c,x:u,y:A,top:h,left:m,width:v,height:g,clockWise:y,labelViewBox:w}=e;if(w)return w;if(ir(v)&&ir(g)){if(ir(u)&&ir(A))return{x:u,y:A,width:v,height:g};if(ir(h)&&ir(m))return{x:h,y:m,width:v,height:g}}if(ir(u)&&ir(A))return{x:u,y:A,width:0,height:0};if(ir(t)&&ir(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:c||o||s||0,clockWise:y};if(e.viewBox)return e.viewBox},dot=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?L.createElement(ec,eA({key:"label-implicit"},n)):df(e)?L.createElement(ec,eA({key:"label-implicit",value:e},n)):L.isValidElement(e)?e.type===ec?L.cloneElement(e,si({key:"label-implicit"},n)):L.createElement(ec,eA({key:"label-implicit",content:e},n)):jM(e)?L.createElement(ec,eA({key:"label-implicit",content:e},n)):e&&typeof e=="object"?L.createElement(ec,eA({},e,{key:"label-implicit"},n)):null},fot=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:i}=t,s=Uoe(t),o=j6(a,ec).map((c,u)=>L.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)}));if(!n)return o;var l=dot(t.label,r||s,i);return[l,...o]};ec.parseViewBox=Uoe;ec.renderCallByParent=fot;var tI={},rI={},E$;function Aot(){return E$||(E$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(rI)),rI}var nI={},_$;function hot(){return _$||(_$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(nI)),nI}var S$;function pot(){return S$||(S$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Aot(),r=hot(),n=G6();function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a}(tI)),tI}var aI,T$;function mot(){return T$||(T$=1,aI=pot().last),aI}var got=mot();const vot=mc(got);var xot=["valueAccessor"],yot=["data","dataKey","clockWise","id","textBreakAll"];function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yS.apply(null,arguments)}function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){bot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bot(e,t,r){return(t=wot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wot(e){var t=Cot(e,"string");return typeof t=="symbol"?t:t+""}function Cot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k$(e,t){if(e==null)return{};var r,n,a=Eot(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Eot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _ot=e=>Array.isArray(e.value)?vot(e.value):e.value;function Gp(e){var{valueAccessor:t=_ot}=e,r=k$(e,xot),{data:n,dataKey:a,clockWise:i,id:s,textBreakAll:o}=r,l=k$(r,yot);return!n||!n.length?null:L.createElement(E0,{className:"recharts-label-list"},n.map((c,u)=>{var A=us(a)?t(c,u):Jo(c&&c.payload,a),h=us(s)?{}:{id:"".concat(s,"-").concat(u)};return L.createElement(ec,yS({},Is(c,!0),l,h,{parentViewBox:c.parentViewBox,value:A,textBreakAll:o,viewBox:ec.parseViewBox(us(i)?c:B$(B$({},c),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}Gp.displayName="LabelList";function Sot(e,t){return e?e===!0?L.createElement(Gp,{key:"labelList-implicit",data:t}):L.isValidElement(e)||jM(e)?L.createElement(Gp,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?L.createElement(Gp,yS({data:t},e,{key:"labelList-implicit"})):null:null}function Tot(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=j6(n,Gp).map((s,o)=>L.cloneElement(s,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var i=Sot(e.label,t);return[i,...a]}Gp.renderCallByParent=Tot;var Not={radiusAxis:{},angleAxis:{}},joe=gc({name:"polarAxis",initialState:Not,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Ydt,removeRadiusAxis:Xdt,addAngleAxis:Jdt,removeAngleAxis:Zdt}=joe.actions,Bot=joe.reducer,iI={},I$;function kot(){return I$||(I$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(iI)),iI}var sI,F$;function Iot(){return F$||(F$=1,sI=kot().isPlainObject),sI}var Fot=Iot();const Dot=mc(Fot);function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bS.apply(null,arguments)}var D$=(e,t,r,n,a)=>{var i=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z"),s},Rot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pot=e=>{var t=D0(e,Rot),r=L.useRef(),[n,a]=L.useState(-1);L.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:i,y:s,upperWidth:o,lowerWidth:l,height:c,className:u}=t,{animationEasing:A,animationDuration:h,animationBegin:m,isUpdateAnimationActive:v}=t;if(i!==+i||s!==+s||o!==+o||l!==+l||c!==+c||o===0&&l===0||c===0)return null;var g=_a("recharts-trapezoid",u);return v?L.createElement(hS,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:c,x:i,y:s},to:{upperWidth:o,lowerWidth:l,height:c,x:i,y:s},duration:h,animationEasing:A,isActive:v},y=>{var{upperWidth:w,lowerWidth:T,height:N,x:F,y:B}=y;return L.createElement(hS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:A},L.createElement("path",bS({},Is(t,!0),{className:g,d:D$(F,B,w,T,N),ref:r})))}):L.createElement("g",null,L.createElement("path",bS({},Is(t,!0),{className:g,d:D$(i,s,o,l,c)})))},Mot=["option","shapeType","propTransformer","activeClassName","isActive"];function Lot(e,t){if(e==null)return{};var r,n,a=Oot(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Oot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R$(Object(r),!0).forEach(function(n){Uot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uot(e,t,r){return(t=jot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jot(e){var t=Hot(e,"string");return typeof t=="symbol"?t:t+""}function Hot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qot(e,t){return wS(wS({},t),e)}function Vot(e,t){return e==="symbols"}function P$(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return L.createElement(Xie,r);case"trapezoid":return L.createElement(Pot,r);case"sector":return L.createElement(ese,r);case"symbols":if(Vot(t))return L.createElement(Q6,r);break;default:return null}}function zot(e){return L.isValidElement(e)?e.props:e}function Got(e){var{option:t,shapeType:r,propTransformer:n=Qot,activeClassName:a="recharts-active-shape",isActive:i}=e,s=Lot(e,Mot),o;if(L.isValidElement(t))o=L.cloneElement(t,wS(wS({},s),zot(t)));else if(typeof t=="function")o=t(s);else if(Dot(t)&&typeof t!="boolean"){var l=n(t,s);o=L.createElement(P$,{shapeType:r,elementProps:l})}else{var c=s;o=L.createElement(P$,{shapeType:r,elementProps:c})}return i?L.createElement(E0,{className:a},o):o}var Hoe=(e,t)=>{var r=Xi();return(n,a)=>i=>{e==null||e(n,a,i),r(uoe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},Qoe=e=>{var t=Xi();return(r,n)=>a=>{e==null||e(r,n,a),t($at())}},Voe=(e,t)=>{var r=Xi();return(n,a)=>i=>{e==null||e(n,a,i),r(Kat({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function qot(e){var{fn:t,args:r}=e,n=Xi(),a=mu();return L.useEffect(()=>{if(!a){var i=t(r);return n(zat(i)),()=>{n(Gat(i))}}},[t,r,n,a]),null}var $ot=()=>{};function Kot(e){var{legendPayload:t}=e,r=Xi(),n=mu();return L.useEffect(()=>n?$ot:(r(Xtt(t)),()=>{r(Jtt(t))}),[r,n,t]),null}function Wot(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=L.useRef(db(t)),n=L.useRef(e);return n.current!==e&&(r.current=db(t),n.current=e),r.current}var oI,Yot=()=>{var[e]=L.useState(()=>db("uid-"));return e},Xot=(oI=Nce.useId)!==null&&oI!==void 0?oI:Yot;function Jot(e,t){var r=Xot();return t||(e?"".concat(e,"-").concat(r):r)}var Zot=L.createContext(void 0),elt=e=>{var{id:t,type:r,children:n}=e,a=Jot("recharts-".concat(r),t);return L.createElement(Zot.Provider,{value:a},n(a))},tlt={cartesianItems:[],polarItems:[]},zoe=gc({name:"graphicalItems",initialState:tlt,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=hA(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=hA(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=hA(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:rlt,replaceCartesianGraphicalItem:nlt,removeCartesianGraphicalItem:alt,addPolarGraphicalItem:eft,removePolarGraphicalItem:tft}=zoe.actions,ilt=zoe.reducer;function slt(e){var t=Xi(),r=L.useRef(null);return L.useEffect(()=>{r.current===null?t(rlt(e)):r.current!==e&&t(nlt({prev:r.current,next:e})),r.current=e},[t,e]),L.useEffect(()=>()=>{r.current&&(t(alt(r.current)),r.current=null)},[t]),null}function olt(){}var llt={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},M$={t:0},lI={t:1};function clt(e){var t=D0(e,llt),{isActive:r,canBegin:n,duration:a,easing:i,begin:s,onAnimationEnd:o,onAnimationStart:l,children:c}=t,u=Yie("JavascriptAnimate",t.animationManager),[A,h]=L.useState(r?M$:lI),m=L.useRef(null);return L.useEffect(()=>{r||h(lI)},[r]),L.useEffect(()=>{if(!r||!n)return olt;var v=Wie(M$,lI,$ie(i),a,h,u.getTimeoutController()),g=()=>{m.current=v()};return u.start([l,s,g,a,o]),()=>{u.stop(),m.current&&m.current(),o()}},[r,n,a,i,s,l,o,u]),c(A.t)}var ult=ut([Ms],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),dlt=ut([ult,LA,OA],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Goe=()=>vr(dlt),flt="Invariant failed";function Alt(e,t){throw new Error(flt)}var hlt=["x","y"];function fD(){return fD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fD.apply(null,arguments)}function L$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(r),!0).forEach(function(n){plt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function plt(e,t,r){return(t=mlt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mlt(e){var t=glt(e,"string");return typeof t=="symbol"?t:t+""}function glt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vlt(e,t){if(e==null)return{};var r,n,a=xlt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xlt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ylt(e,t){var{x:r,y:n}=e,a=vlt(e,hlt),i="".concat(r),s=parseInt(i,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),u=parseInt(c,10),A="".concat(t.width||a.width),h=parseInt(A,10);return T1(T1(T1(T1(T1({},t),a),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function qoe(e){return L.createElement(Got,fD({shapeType:"rectangle",propTransformer:ylt,activeClassName:"recharts-active-bar"},e))}var blt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ir(t))return t;var i=ir(n)||us(n);return i?t(n,a):(i||Alt(),r)}},wlt={},$oe=gc({name:"errorBars",initialState:wlt,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:rft,removeErrorBar:nft}=$oe.actions,Clt=$oe.reducer,Elt=["children"];function _lt(e,t){if(e==null)return{};var r,n,a=Slt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Slt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Tlt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Nlt=L.createContext(Tlt);function Blt(e){var{children:t}=e,r=_lt(e,Elt);return L.createElement(Nlt.Provider,{value:r},t)}function Koe(e,t){var r,n,a=vr(c=>UA(c,e)),i=vr(c=>P0(c,t)),s=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Wl.allowDataOverflow,o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Yl.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function klt(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Goe(),{needClipX:i,needClipY:s,needClip:o}=Koe(t,r);if(!o)return null;var{x:l,y:c,width:u,height:A}=a;return L.createElement("clipPath",{id:"clipPath-".concat(n)},L.createElement("rect",{x:i?l:l-u/2,y:s?c:c-A/2,width:i?u:u*2,height:s?A:A*2}))}var Ilt=["onMouseEnter","onMouseLeave","onClick"],Flt=["value","background","tooltipPosition"],Dlt=["id"],Rlt=["onMouseEnter","onClick","onMouseLeave"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(null,arguments)}function O$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O$(Object(r),!0).forEach(function(n){Plt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Plt(e,t,r){return(t=Mlt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mlt(e){var t=Llt(e,"string");return typeof t=="symbol"?t:t+""}function Llt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CS(e,t){if(e==null)return{};var r,n,a=Olt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Olt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ult=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Uie(r,t),payload:e}]};function jlt(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Uie(i,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function Hlt(e){var t=vr(Vv),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:s,onMouseLeave:o,onClick:l}=i,c=CS(i,Ilt),u=Hoe(s,n),A=Qoe(o),h=Voe(l,n);if(!a||r==null)return null;var m=Is(a,!1);return L.createElement(L.Fragment,null,r.map((v,g)=>{var{value:y,background:w,tooltipPosition:T}=v,N=CS(v,Flt);if(!w)return null;var F=u(v,g),B=A(v,g),D=h(v,g),E=ko(ko(ko(ko(ko({option:a,isActive:String(g)===t},N),{},{fill:"#eee"},w),m),c5(c,v,g)),{},{onMouseEnter:F,onMouseLeave:B,onClick:D,dataKey:n,index:g,className:"recharts-bar-background-rectangle"});return L.createElement(qoe,zv({key:"background-bar-".concat(g)},E))}))}function Woe(e){var{data:t,props:r,showLabels:n}=e,a=nw(r),{id:i}=a,s=CS(a,Dlt),{shape:o,dataKey:l,activeBar:c}=r,u=vr(Vv),A=vr(Coe),{onMouseEnter:h,onClick:m,onMouseLeave:v}=r,g=CS(r,Rlt),y=Hoe(h,l),w=Qoe(v),T=Voe(m,l);return t?L.createElement(L.Fragment,null,t.map((N,F)=>{var B=c&&String(F)===u&&(A==null||l===A),D=B?c:o,E=ko(ko(ko({},s),N),{},{isActive:B,option:D,index:F,dataKey:l});return L.createElement(E0,zv({className:"recharts-bar-rectangle"},c5(g,N,F),{onMouseEnter:y(N,F),onMouseLeave:w(N,F),onClick:T(N,F),key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(F)}),L.createElement(qoe,E))}),n&&Gp.renderCallByParent(r,t)):null}function Qlt(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,A=r.current,h=Wot(t,"recharts-bar-"),[m,v]=L.useState(!1),g=L.useCallback(()=>{typeof c=="function"&&c(),v(!1)},[c]),y=L.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return L.createElement(clt,{begin:s,duration:o,isActive:i,easing:l,onAnimationEnd:g,onAnimationStart:y,key:h},w=>{var T=w===1?n:n==null?void 0:n.map((N,F)=>{var B=A&&A[F];if(B)return ko(ko({},N),{},{x:_g(B.x,N.x,w),y:_g(B.y,N.y,w),width:_g(B.width,N.width,w),height:_g(B.height,N.height,w)});if(a==="horizontal"){var D=_g(0,N.height,w);return ko(ko({},N),{},{y:N.y+N.height-D,height:D})}var E=_g(0,N.width,w);return ko(ko({},N),{},{width:E})});return w>0&&(r.current=T??null),T==null?null:L.createElement(E0,null,L.createElement(Woe,{props:t,data:T,showLabels:!m}))})}function Vlt(e){var{data:t,isAnimationActive:r}=e,n=L.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?L.createElement(Qlt,{previousRectanglesRef:n,props:e}):L.createElement(Woe,{props:e,data:t,showLabels:!0})}var Yoe=0,zlt=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Jo(e,t)}};class Glt extends L.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:s,needClip:o,background:l,id:c}=this.props;if(t)return null;var u=_a("recharts-bar",a),A=c;return L.createElement(E0,{className:u,id:c},o&&L.createElement("defs",null,L.createElement(klt,{clipPathId:A,xAxisId:i,yAxisId:s})),L.createElement(E0,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(A,")"):void 0},L.createElement(Hlt,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),L.createElement(Vlt,this.props)),this.props.children)}}var qlt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!iw.isSsr,legendType:"rect",minPointSize:Yoe,xAxisId:0,yAxisId:0};function $lt(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u}=e,{needClip:A}=Koe(t,r),h=lM(),m=mu(),v=j6(e.children,Doe),g=vr(T=>yct(T,t,r,m,e.id,v));if(h!=="vertical"&&h!=="horizontal")return null;var y,w=g==null?void 0:g[0];return w==null||w.height==null||w.width==null?y=0:y=h==="vertical"?w.height/2:w.width/2,L.createElement(Blt,{xAxisId:t,yAxisId:r,data:g,dataPointFormatter:zlt,errorBarOffset:y},L.createElement(Glt,zv({},e,{layout:h,needClip:A,data:g,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function Klt(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:A,offset:h,cells:m}=e,v=t==="horizontal"?o:s,g=u?v.scale.domain():null,y=ktt({numericAxis:v});return A.map((w,T)=>{var N,F,B,D,E,S;u?N=Ett(u[T],g):(N=Jo(w,r),Array.isArray(N)||(N=[y,N]));var k=blt(n,Yoe)(N[1],T);if(t==="horizontal"){var H,[P,M]=[o.scale(N[0]),o.scale(N[1])];F=uq({axis:s,ticks:l,bandSize:i,offset:a.offset,entry:w,index:T}),B=(H=M??P)!==null&&H!==void 0?H:void 0,D=a.size;var Q=P-M;if(E=fc(Q)?0:Q,S={x:F,y:h.top,width:D,height:h.height},Math.abs(k)>0&&Math.abs(E)<Math.abs(k)){var V=wl(E||k)*(Math.abs(k)-Math.abs(E));B-=V,E+=V}}else{var[te,W]=[s.scale(N[0]),s.scale(N[1])];if(F=te,B=uq({axis:o,ticks:c,bandSize:i,offset:a.offset,entry:w,index:T}),D=W-te,E=a.size,S={x:h.left,y:B,width:h.width,height:E},Math.abs(k)>0&&Math.abs(D)<Math.abs(k)){var re=wl(D||k)*(Math.abs(k)-Math.abs(D));D+=re}}if(F==null||B==null||D==null||E==null)return null;var z=ko(ko({},w),{},{x:F,y:B,width:D,height:E,value:u?N:N[1],payload:w,background:S,tooltipPosition:{x:F+D/2,y:B+E/2}},m&&m[T]&&m[T].props);return z}).filter(Boolean)}function Xoe(e){var t=D0(e,qlt),r=mu();return L.createElement(elt,{id:t.id,type:"bar"},n=>L.createElement(L.Fragment,null,L.createElement(Kot,{legendPayload:Ult(t)}),L.createElement(qot,{fn:jlt,args:t}),L.createElement(slt,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Btt(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),L.createElement($lt,zv({},t,{id:n}))))}Xoe.displayName="Bar";function U$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U$(Object(r),!0).forEach(function(n){Wlt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wlt(e,t,r){return(t=Ylt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ylt(e){var t=Xlt(e,"string");return typeof t=="symbol"?t:t+""}function Xlt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jlt=(e,t)=>t,Zlt=(e,t,r)=>r,ect=(e,t,r,n)=>n,tct=(e,t,r,n,a)=>a,fw=ut([wM,tct],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),rct=ut([fw],e=>e==null?void 0:e.maxBarSize),nct=(e,t,r,n,a,i)=>i,j$=(e,t,r)=>{var n=r??e;if(!us(n))return rd(n,t,0)},act=ut([oa,wM,Jlt,Zlt,ect],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),ict=(e,t,r,n)=>{var a=oa(e);return a==="horizontal"?sD(e,"yAxis",r,n):sD(e,"xAxis",t,n)},sct=(e,t,r)=>{var n=oa(e);return n==="horizontal"?$q(e,"xAxis",t):$q(e,"yAxis",r)},oct=(e,t,r)=>{var n={},a=e.filter(S5),i=e.filter(c=>c.stackId==null),s=a.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),n),o=Object.entries(s).map(c=>{var[u,A]=c,h=A.map(v=>v.dataKey),m=j$(t,r,A[0].barSize);return{stackId:u,dataKeys:h,barSize:m}}),l=i.map(c=>{var u=[c.dataKey].filter(h=>h!=null),A=j$(t,r,c.barSize);return{stackId:void 0,dataKeys:u,barSize:A}});return[...o,...l]},lct=ut([act,znt,sct],oct),cct=(e,t,r,n,a)=>{var i,s,o=fw(e,t,r,n,a);if(o!=null){var l=oa(e),c=mse(e),{maxBarSize:u}=o,A=us(u)?c:u,h,m;return l==="horizontal"?(h=Qv(e,"xAxis",t,n),m=Hv(e,"xAxis",t,n)):(h=Qv(e,"yAxis",r,n),m=Hv(e,"yAxis",r,n)),(i=(s=rM(h,m,!0))!==null&&s!==void 0?s:A)!==null&&i!==void 0?i:0}},Joe=(e,t,r,n)=>{var a=oa(e),i,s;return a==="horizontal"?(i=Qv(e,"xAxis",t,n),s=Hv(e,"xAxis",t,n)):(i=Qv(e,"yAxis",r,n),s=Hv(e,"yAxis",r,n)),rM(i,s)};function uct(e,t,r,n,a){var i=n.length;if(!(i<1)){var s=rd(e,r,0,!0),o,l=[];if(pc(n[0].barSize)){var c=!1,u=r/i,A=n.reduce((w,T)=>w+(T.barSize||0),0);A+=(i-1)*s,A>=r&&(A-=(i-1)*s,s=0),A>=r&&u>0&&(c=!0,u*=.9,A=i*u);var h=(r-A)/2>>0,m={offset:h-s,size:0};o=n.reduce((w,T)=>{var N,F={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:m.offset+m.size+s,size:c?u:(N=T.barSize)!==null&&N!==void 0?N:0}},B=[...w,F];return m=B[B.length-1].position,B},l)}else{var v=rd(t,r,0,!0);r-2*v-(i-1)*s<=0&&(s=0);var g=(r-2*v-(i-1)*s)/i;g>1&&(g>>=0);var y=pc(a)?Math.min(g,a):g;o=n.reduce((w,T,N)=>[...w,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:v+(g+s)*N+(g-y)/2,size:y}}],l)}return o}}var dct=(e,t,r,n,a,i,s)=>{var o=us(s)?t:s,l=uct(r,n,a!==i?a:i,e,o);return a!==i&&l!=null&&(l=l.map(c=>PC(PC({},c),{},{position:PC(PC({},c.position),{},{offset:c.position.offset-a/2})}))),l},fct=ut([lct,mse,Vnt,gse,cct,Joe,rct],dct),Act=(e,t,r,n)=>Qv(e,"xAxis",t,n),hct=(e,t,r,n)=>Qv(e,"yAxis",r,n),pct=(e,t,r,n)=>Hv(e,"xAxis",t,n),mct=(e,t,r,n)=>Hv(e,"yAxis",r,n),gct=ut([fct,fw],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),vct=(e,t)=>{var r=yM(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(s=>s.key===r)}}}},xct=ut([ict,fw],vct),yct=ut([Ms,Act,hct,pct,mct,gct,oa,dM,Joe,xct,fw,nct],(e,t,r,n,a,i,s,o,l,c,u,A)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:v}=o;if(!(u==null||i==null||s!=="horizontal"&&s!=="vertical"||t==null||r==null||n==null||a==null||l==null)){var{data:g}=u,y;if(g!=null&&g.length>0?y=g:y=h==null?void 0:h.slice(m,v+1),y!=null)return Klt({layout:s,barSettings:u,pos:i,bandSize:l,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:c,displayedData:y,offset:e,cells:A})}}),bct=e=>{var{chartData:t}=e,r=Xi(),n=mu();return L.useEffect(()=>n?()=>{}:(r(n$(t)),()=>{r(n$(void 0))}),[t,r,n]),null},H$={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Zoe=gc({name:"brush",initialState:H$,reducers:{setBrushSettings(e,t){return t.payload==null?H$:t.payload}}}),{setBrushSettings:aft}=Zoe.actions,wct=Zoe.reducer;function Cct(e,t,r){return(t=Ect(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ect(e){var t=_ct(e,"string");return typeof t=="symbol"?t:t+""}function _ct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class HM{static create(t){return new HM(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Cct(HM,"EPS",1e-4);function Sct(e){return(e%180+180)%180}var Tct=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Sct(a),s=i*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},Nct={dots:[],areas:[],lines:[]},ele=gc({name:"referenceElements",initialState:Nct,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=hA(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=hA(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=hA(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:ift,removeDot:sft,addArea:oft,removeArea:lft,addLine:cft,removeLine:uft}=ele.actions,Bct=ele.reducer,kct=L.createContext(void 0),Ict=e=>{var{children:t}=e,[r]=L.useState("".concat(db("recharts"),"-clip")),n=Goe();if(n==null)return null;var{x:a,y:i,width:s,height:o}=n;return L.createElement(kct.Provider,{value:r},L.createElement("defs",null,L.createElement("clipPath",{id:r},L.createElement("rect",{x:a,y:i,height:o,width:s}))),t)};function cI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function tle(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Fct(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Tct(n,r)}function Dct(e,t,r){var n=r==="width",{x:a,y:i,width:s,height:o}=e;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function ES(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function Rct(e,t){return tle(e,t+1)}function Pct(e,t,r,n,a){for(var i=(n||[]).slice(),{start:s,end:o}=t,l=0,c=1,u=s,A=function(){var v=n==null?void 0:n[l];if(v===void 0)return{v:tle(n,c)};var g=l,y,w=()=>(y===void 0&&(y=r(v,g)),y),T=v.coordinate,N=l===0||ES(e,T,w,u,o);N||(l=0,u=s,c+=1),N&&(u=T+e*(w()/2+a),l+=c)},h;c<=i.length;)if(h=A(),h)return h.v;return[]}function Q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q$(Object(r),!0).forEach(function(n){Mct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mct(e,t,r){return(t=Lct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lct(e){var t=Oct(e,"string");return typeof t=="symbol"?t:t+""}function Oct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uct(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,{start:o}=t,{end:l}=t,c=function(h){var m=i[h],v,g=()=>(v===void 0&&(v=r(m,h)),v);if(h===s-1){var y=e*(m.coordinate+e*g()/2-l);i[h]=m=Co(Co({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=Co(Co({},m),{},{tickCoord:m.coordinate});var w=ES(e,m.tickCoord,g,o,l);w&&(l=m.tickCoord-e*(g()/2+a),i[h]=Co(Co({},m),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return i}function jct(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,{start:l,end:c}=t;if(i){var u=n[o-1],A=r(u,o-1),h=e*(u.coordinate+e*A/2-c);s[o-1]=u=Co(Co({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate});var m=ES(e,u.tickCoord,()=>A,l,c);m&&(c=u.tickCoord-e*(A/2+a),s[o-1]=Co(Co({},u),{},{isShow:!0}))}for(var v=i?o-1:o,g=function(T){var N=s[T],F,B=()=>(F===void 0&&(F=r(N,T)),F);if(T===0){var D=e*(N.coordinate-e*B()/2-l);s[T]=N=Co(Co({},N),{},{tickCoord:D<0?N.coordinate-D*e:N.coordinate})}else s[T]=N=Co(Co({},N),{},{tickCoord:N.coordinate});var E=ES(e,N.tickCoord,B,l,c);E&&(l=N.tickCoord+e*(B()/2+a),s[T]=Co(Co({},N),{},{isShow:!0}))},y=0;y<v;y++)g(y);return s}function QM(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:s,orientation:o,interval:l,tickFormatter:c,unit:u,angle:A}=e;if(!a||!a.length||!n)return[];if(ir(l)||iw.isSsr){var h;return(h=Rct(a,ir(l)?l:0))!==null&&h!==void 0?h:[]}var m=[],v=o==="top"||o==="bottom"?"width":"height",g=u&&v==="width"?Cy(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=(N,F)=>{var B=typeof c=="function"?c(N.value,F):N.value;return v==="width"?Fct(Cy(B,{fontSize:t,letterSpacing:r}),g,A):Cy(B,{fontSize:t,letterSpacing:r})[v]},w=a.length>=2?wl(a[1].coordinate-a[0].coordinate):1,T=Dct(i,w,v);return l==="equidistantPreserveStart"?Pct(w,T,y,a,s):(l==="preserveStart"||l==="preserveStartEnd"?m=jct(w,T,y,a,s,l==="preserveStartEnd"):m=Uct(w,T,y,a,s),m.filter(N=>N.isShow))}var Hct=["viewBox"],Qct=["viewBox"];function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gg.apply(null,arguments)}function V$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V$(Object(r),!0).forEach(function(n){VM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z$(e,t){if(e==null)return{};var r,n,a=Vct(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VM(e,t,r){return(t=zct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zct(e){var t=Gct(e,"string");return typeof t=="symbol"?t:t+""}function Gct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class M0 extends L.Component{constructor(t){super(t),this.tickRefs=L.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=z$(t,Hct),i=this.props,{viewBox:s}=i,o=z$(i,Qct);return!cI(n,s)||!cI(a,o)||!cI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:i,orientation:s,tickSize:o,mirror:l,tickMargin:c}=this.props,u,A,h,m,v,g,y=l?-1:1,w=t.tickSize||o,T=ir(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=A=t.coordinate,m=n+ +!l*i,h=m-y*w,g=h-y*c,v=T;break;case"left":h=m=t.coordinate,A=r+ +!l*a,u=A-y*w,v=u-y*c,g=T;break;case"right":h=m=t.coordinate,A=r+ +l*a,u=A+y*w,v=u+y*c,g=T;break;default:u=A=t.coordinate,m=n+ +l*i,h=m+y*w,g=h+y*c,v=T;break}return{line:{x1:u,y1:h,x2:A,y2:m},tick:{x:v,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:i,mirror:s,axisLine:o}=this.props,l=ss(ss(ss({},Is(this.props,!1)),Is(o,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!s||i==="bottom"&&s);l=ss(ss({},l),{},{x1:t,y1:r+c*a,x2:t+n,y2:r+c*a})}else{var u=+(i==="left"&&!s||i==="right"&&s);l=ss(ss({},l),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+a})}return L.createElement("line",Gg({},l,{className:_a("recharts-cartesian-axis-line",om(o,"className"))}))}static renderTickItem(t,r,n){var a,i=_a(r.className,"recharts-cartesian-axis-tick-value");if(L.isValidElement(t))a=L.cloneElement(t,ss(ss({},r),{},{className:i}));else if(typeof t=="function")a=t(ss(ss({},r),{},{className:i}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=_a(s,t.className)),a=L.createElement(UM,Gg({},r,{className:s}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:i,tick:s,tickFormatter:o,unit:l,padding:c}=this.props,u=QM(ss(ss({},this.props),{},{ticks:n}),t,r),A=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=nw(this.props),v=Is(s,!1),g=ss(ss({},m),{},{fill:"none"},Is(a,!1)),y=u.map((w,T)=>{var{line:N,tick:F}=this.getTickLineCoord(w),B=ss(ss(ss(ss({textAnchor:A,verticalAnchor:h},m),{},{stroke:"none",fill:i},v),F),{},{index:T,payload:w,visibleTicksCount:u.length,tickFormatter:o,padding:c});return L.createElement(E0,Gg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},c5(this.props,w,T)),a&&L.createElement("line",Gg({},g,N,{className:_a("recharts-cartesian-axis-tick-line",om(a,"className"))})),s&&M0.renderTickItem(s,B,"".concat(typeof o=="function"?o(w.value,T):w.value).concat(l||"")))});return y.length>0?L.createElement("g",{className:"recharts-cartesian-axis-ticks"},y):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:i}=this.props;if(i)return null;var{ticks:s}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:L.createElement(E0,{className:_a("recharts-cartesian-axis",a),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var c=l[0];if(c){var u=window.getComputedStyle(c).fontSize,A=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||A!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),ec.renderCallByParent(this.props))}}VM(M0,"displayName","CartesianAxis");VM(M0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qct=["x1","y1","x2","y2","key"],$ct=["offset"],Kct=["xAxisId","yAxisId"],Wct=["xAxisId","yAxisId"];function G$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G$(Object(r),!0).forEach(function(n){Yct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yct(e,t,r){return(t=Xct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xct(e){var t=Jct(e,"string");return typeof t=="symbol"?t:t+""}function Jct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tp.apply(null,arguments)}function _S(e,t){if(e==null)return{};var r,n,a=Zct(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eut=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:s,ry:o}=e;return L.createElement("rect",{x:n,y:a,ry:o,width:i,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function rle(e,t){var r;if(L.isValidElement(e))r=L.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:s,key:o}=t,l=_S(t,qct),c=nw(l),{offset:u}=c,A=_S(c,$ct);r=L.createElement("line",Tp({},A,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:o}))}return r}function tut(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=_S(e,Kct),l=a.map((c,u)=>{var A=Io(Io({},o),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return rle(n,A)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function rut(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:s}=e,o=_S(e,Wct),l=a.map((c,u)=>{var A=Io(Io({},o),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return rle(n,A)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function nut(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:s,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=o.map(A=>Math.round(A+a-a)).sort((A,h)=>A-h);a!==c[0]&&c.unshift(0);var u=c.map((A,h)=>{var m=!c[h+1],v=m?a+s-A:c[h+1]-A;if(v<=0)return null;var g=h%t.length;return L.createElement("rect",{key:"react-".concat(h),y:A,x:n,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function aut(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:s,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(A=>Math.round(A+a-a)).sort((A,h)=>A-h);a!==c[0]&&c.unshift(0);var u=c.map((A,h)=>{var m=!c[h+1],v=m?a+s-A:c[h+1]-A;if(v<=0)return null;var g=h%r.length;return L.createElement("rect",{key:"react-".concat(h),x:A,y:i,width:v,height:o,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var iut=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return Lie(QM(Io(Io(Io({},M0.defaultProps),r),{},{ticks:Oie(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},sut=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return Lie(QM(Io(Io(Io({},M0.defaultProps),r),{},{ticks:Oie(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},out={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function nle(e){var t=sM(),r=oM(),n=Qie(),a=Io(Io({},D0(e,out)),{},{x:ir(e.x)?e.x:n.left,y:ir(e.y)?e.y:n.top,width:ir(e.width)?e.width:n.width,height:ir(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:s,x:o,y:l,width:c,height:u,syncWithTicks:A,horizontalValues:h,verticalValues:m}=a,v=mu(),g=vr(k=>Kq(k,"xAxis",i,v)),y=vr(k=>Kq(k,"yAxis",s,v));if(!ir(c)||c<=0||!ir(u)||u<=0||!ir(o)||o!==+o||!ir(l)||l!==+l)return null;var w=a.verticalCoordinatesGenerator||iut,T=a.horizontalCoordinatesGenerator||sut,{horizontalPoints:N,verticalPoints:F}=a;if((!N||!N.length)&&typeof T=="function"){var B=h&&h.length,D=T({yAxis:y?Io(Io({},y),{},{ticks:B?h:y.ticks}):void 0,width:t,height:r,offset:n},B?!0:A);wy(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}if((!F||!F.length)&&typeof w=="function"){var E=m&&m.length,S=w({xAxis:g?Io(Io({},g),{},{ticks:E?m:g.ticks}):void 0,width:t,height:r,offset:n},E?!0:A);wy(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(F=S)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(eut,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),L.createElement(nut,Tp({},a,{horizontalPoints:N})),L.createElement(aut,Tp({},a,{verticalPoints:F})),L.createElement(tut,Tp({},a,{offset:n,horizontalPoints:N,xAxis:g,yAxis:y})),L.createElement(rut,Tp({},a,{offset:n,verticalPoints:F,xAxis:g,yAxis:y})))}nle.displayName="CartesianGrid";function q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q$(Object(r),!0).forEach(function(n){lut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lut(e,t,r){return(t=cut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cut(e){var t=uut(e,"string");return typeof t=="symbol"?t:t+""}function uut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dut={xAxis:{},yAxis:{},zAxis:{}},ale=gc({name:"cartesianAxis",initialState:dut,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=$$($$({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:fut,removeXAxis:Aut,addYAxis:hut,removeYAxis:put,addZAxis:dft,removeZAxis:fft,updateYAxisWidth:mut}=ale.actions,gut=ale.reducer,vut=["children"],xut=["dangerouslySetInnerHTML","ticks"];function ile(e,t,r){return(t=yut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yut(e){var t=but(e,"string");return typeof t=="symbol"?t:t+""}function but(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AD(){return AD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AD.apply(null,arguments)}function sle(e,t){if(e==null)return{};var r,n,a=wut(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wut(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cut(e){var t=Xi(),r=L.useMemo(()=>{var{children:i}=e,s=sle(e,vut);return s},[e]),n=vr(i=>UA(i,r.id)),a=r===n;return L.useEffect(()=>(t(fut(r)),()=>{t(Aut(r))}),[r,t]),a?e.children:null}var Eut=e=>{var{xAxisId:t,className:r}=e,n=vr(Hie),a=mu(),i="xAxis",s=vr(m=>px(m,i,t,a)),o=vr(m=>aoe(m,i,t,a)),l=vr(m=>eoe(m,t)),c=vr(m=>Pat(m,t));if(l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:A}=e,h=sle(e,xut);return L.createElement(M0,AD({},h,{scale:s,x:c.x,y:c.y,width:l.width,height:l.height,className:_a("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o}))},_ut=e=>{var t,r,n,a,i;return L.createElement(Cut,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},L.createElement(Eut,e))};class zM extends L.Component{render(){return L.createElement(_ut,this.props)}}ile(zM,"displayName","XAxis");ile(zM,"defaultProps",{allowDataOverflow:Wl.allowDataOverflow,allowDecimals:Wl.allowDecimals,allowDuplicatedCategory:Wl.allowDuplicatedCategory,height:Wl.height,hide:!1,mirror:Wl.mirror,orientation:Wl.orientation,padding:Wl.padding,reversed:Wl.reversed,scale:Wl.scale,tickCount:Wl.tickCount,type:Wl.type,xAxisId:0});var Sut=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,s=0;if(t){t.forEach(u=>{if(u){var A=u.getBoundingClientRect();A.width>s&&(s=A.width)}});var o=r?r.getBoundingClientRect().width:0,l=a+i,c=s+l+o+(r?n:0);return Math.round(c)}return 0},Tut=["dangerouslySetInnerHTML","ticks"];function ole(e,t,r){return(t=Nut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nut(e){var t=But(e,"string");return typeof t=="symbol"?t:t+""}function But(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hD(){return hD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hD.apply(null,arguments)}function kut(e,t){if(e==null)return{};var r,n,a=Iut(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Iut(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Fut(e){var t=Xi();return L.useEffect(()=>(t(hut(e)),()=>{t(put(e))}),[e,t]),null}var Dut=e=>{var t,{yAxisId:r,className:n,width:a,label:i}=e,s=L.useRef(null),o=L.useRef(null),l=vr(Hie),c=mu(),u=Xi(),A="yAxis",h=vr(N=>px(N,A,r,c)),m=vr(N=>toe(N,r)),v=vr(N=>Mat(N,r)),g=vr(N=>aoe(N,A,r,c));if(L.useLayoutEffect(()=>{var N;if(!(a!=="auto"||!m||jM(i)||L.isValidElement(i))){var F=s.current,B=F==null||(N=F.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:D,tickMargin:E}=F.props,S=Sut({ticks:B,label:o.current,labelGapWithTick:5,tickSize:D,tickMargin:E});Math.round(m.width)!==Math.round(S)&&u(mut({id:r,width:S}))}},[s,s==null||(t=s.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,u,i,r,a]),m==null||v==null)return null;var{dangerouslySetInnerHTML:y,ticks:w}=e,T=kut(e,Tut);return L.createElement(M0,hD({},T,{ref:s,labelRef:o,scale:h,x:v.x,y:v.y,width:m.width,height:m.height,className:_a("recharts-".concat(A," ").concat(A),n),viewBox:l,ticks:g}))},Rut=e=>{var t,r,n,a,i;return L.createElement(L.Fragment,null,L.createElement(Fut,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),L.createElement(Dut,e))},Put={allowDataOverflow:Yl.allowDataOverflow,allowDecimals:Yl.allowDecimals,allowDuplicatedCategory:Yl.allowDuplicatedCategory,hide:!1,mirror:Yl.mirror,orientation:Yl.orientation,padding:Yl.padding,reversed:Yl.reversed,scale:Yl.scale,tickCount:Yl.tickCount,type:Yl.type,width:Yl.width,yAxisId:0};class GM extends L.Component{render(){return L.createElement(Rut,this.props)}}ole(GM,"displayName","YAxis");ole(GM,"defaultProps",Put);var uI={exports:{}},dI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K$;function Mut(){if(K$)return dI;K$=1;var e=Gv();function t(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,s=e.useMemo,o=e.useDebugValue;return dI.useSyncExternalStoreWithSelector=function(l,c,u,A,h){var m=a(null);if(m.current===null){var v={hasValue:!1,value:null};m.current=v}else v=m.current;m=s(function(){function y(B){if(!w){if(w=!0,T=B,B=A(B),h!==void 0&&v.hasValue){var D=v.value;if(h(D,B))return N=D}return N=B}if(D=N,r(T,B))return D;var E=A(B);return h!==void 0&&h(D,E)?(T=B,D):(T=B,N=E)}var w=!1,T,N,F=u===void 0?null:u;return[function(){return y(c())},F===null?void 0:function(){return y(F())}]},[c,u,A,h]);var g=n(l,m[0],m[1]);return i(function(){v.hasValue=!0,v.value=g},[g]),o(g),g},dI}var W$;function Lut(){return W$||(W$=1,uI.exports=Mut()),uI.exports}Lut();function Out(e){e()}function Uut(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Out(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Y$={notify(){},get:()=>[]};function jut(e,t){let r,n=Y$,a=0,i=!1;function s(g){u();const y=n.subscribe(g);let w=!1;return()=>{w||(w=!0,y(),A())}}function o(){n.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return i}function u(){a++,r||(r=e.subscribe(l),n=Uut())}function A(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Y$)}function h(){i||(i=!0,u())}function m(){i&&(i=!1,A())}const v={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return v}var Hut=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qut=Hut(),Vut=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zut=Vut(),Gut=()=>Qut||zut?L.useLayoutEffect:L.useEffect,qut=Gut(),fI=Symbol.for("react-redux-context"),AI=typeof globalThis<"u"?globalThis:{};function $ut(){if(!L.createContext)return{};const e=AI[fI]??(AI[fI]=new Map);let t=e.get(L.createContext);return t||(t=L.createContext(null),e.set(L.createContext,t)),t}var Kut=$ut();function Wut(e){const{children:t,context:r,serverState:n,store:a}=e,i=L.useMemo(()=>{const l=jut(a);return{store:a,subscription:l,getServerState:n?()=>n:void 0}},[a,n]),s=L.useMemo(()=>a.getState(),[a]);qut(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,s]);const o=r||Kut;return L.createElement(o.Provider,{value:i},t)}var Yut=Wut,Xut=(e,t)=>t,qM=ut([Xut,oa,Cse,As,xoe,jA,jit,Ms],Git),$M=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},lle=fu("mouseClick"),cle=aw();cle.startListening({actionCreator:lle,effect:(e,t)=>{var r=e.payload,n=qM(t.getState(),$M(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Wat({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var pD=fu("mouseMove"),ule=aw();ule.startListening({actionCreator:pD,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=kM(n,n.tooltip.settings.shared),i=qM(n,$M(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(foe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(doe()))}});function Jut(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var X$={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},dle=gc({name:"rootProps",initialState:X$,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:X$.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Zut=dle.reducer,{updateOptions:edt}=dle.actions,fle=gc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Aft}=fle.actions,tdt=fle.reducer,Ale=fu("keyDown"),hle=fu("focus"),KM=aw();KM.startListening({actionCreator:Ale,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var s=Number(IM(a,gx(r))),o=jA(r);if(i==="Enter"){var l=xS(r,"axis","hover",String(a.index));t.dispatch(lD({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:l}));return}var c=jat(r),u=c==="left-to-right"?1:-1,A=i==="ArrowRight"?1:-1,h=s+A*u;if(!(o==null||h>=o.length||h<0)){var m=xS(r,"axis","hover",String(h));t.dispatch(lD({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});KM.startListening({actionCreator:hle,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",s=xS(r,"axis","hover",String(i));t.dispatch(lD({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:s}))}}}});var Wc=fu("externalEvent"),ple=aw();ple.startListening({actionCreator:Wc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Iit(r),activeDataKey:Coe(r),activeIndex:Vv(r),activeLabel:woe(r),activeTooltipIndex:Vv(r),isTooltipActive:Fit(r)};e.payload.handler(n,e.payload.reactEvent)}}});var rdt=ut([mx],e=>e.tooltipItemPayloads),ndt=ut([rdt,uw,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var s=t(i,r);return s}}}),mle=fu("touchMove"),gle=aw();gle.startListening({actionCreator:mle,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=kM(n,n.tooltip.settings.shared);if(a==="axis"){var i=qM(n,$M({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(foe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var s,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Ott),u=(s=l.getAttribute(Utt))!==null&&s!==void 0?s:void 0,A=ndt(t.getState(),c,u);t.dispatch(uoe({activeDataKey:u,activeIndex:c,activeCoordinate:A}))}}});var adt=Aie({brush:wct,cartesianAxis:gut,chartData:lst,errorBars:Clt,graphicalItems:ilt,layout:ott,legend:Ztt,options:nst,polarAxis:Bot,polarOptions:tdt,referenceElements:Bct,rootProps:Zut,tooltip:Yat}),idt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Fet({reducer:adt,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([cle.middleware,ule.middleware,KM.middleware,ple.middleware,gle.middleware]),devTools:{serialize:{replacer:Jut},name:"recharts-".concat(r)}})};function sdt(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=mu(),i=L.useRef(null);if(a)return r;i.current==null&&(i.current=idt(t,n));var s=Y6;return L.createElement(Yut,{context:s,store:i.current},r)}function odt(e){var{layout:t,width:r,height:n,margin:a}=e,i=Xi(),s=mu();return L.useEffect(()=>{s||(i(att(t)),i(itt({width:r,height:n})),i(ntt(a)))},[i,s,t,r,n,a]),null}function ldt(e){var t=Xi();return L.useEffect(()=>{t(edt(e))},[t,e]),null}var cdt=["children"];function udt(e,t){if(e==null)return{};var r,n,a=ddt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ddt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SS.apply(null,arguments)}var fdt={width:"100%",height:"100%"},Adt=L.forwardRef((e,t)=>{var r=sM(),n=oM(),a=zie();if(!dS(r)||!dS(n))return null;var{children:i,otherAttributes:s,title:o,desc:l}=e,c,u;return typeof s.tabIndex=="number"?c=s.tabIndex:c=a?0:void 0,typeof s.role=="string"?u=s.role:u=a?"application":void 0,L.createElement(H6,SS({},s,{title:o,desc:l,role:u,tabIndex:c,width:r,height:n,style:fdt,ref:t}),i)}),hdt=e=>{var{children:t}=e,r=vr(x5);if(!r)return null;var{width:n,height:a,y:i,x:s}=r;return L.createElement(H6,{width:n,height:a,x:s,y:i},t)},J$=L.forwardRef((e,t)=>{var{children:r}=e,n=udt(e,cdt),a=mu();return a?L.createElement(hdt,null,r):L.createElement(Adt,SS({ref:t},n),r)});function pdt(){var e=Xi(),[t,r]=L.useState(null),n=vr(Ltt);return L.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;pc(i)&&i!==n&&e(stt(i))}},[t,e,n]),r}function Z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mdt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(r),!0).forEach(function(n){gdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gdt(e,t,r){return(t=vdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vdt(e){var t=xdt(e,"string");return typeof t=="symbol"?t:t+""}function xdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ydt=L.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:A,onMouseUp:h,onTouchEnd:m,onTouchMove:v,onTouchStart:g,style:y,width:w}=e,T=Xi(),[N,F]=L.useState(null),[B,D]=L.useState(null);dst();var E=pdt(),S=L.useCallback(U=>{E(U),typeof t=="function"&&t(U),F(U),D(U)},[E,t,F,D]),k=L.useCallback(U=>{T(lle(U)),T(Wc({handler:i,reactEvent:U}))},[T,i]),H=L.useCallback(U=>{T(pD(U)),T(Wc({handler:c,reactEvent:U}))},[T,c]),P=L.useCallback(U=>{T(doe()),T(Wc({handler:u,reactEvent:U}))},[T,u]),M=L.useCallback(U=>{T(pD(U)),T(Wc({handler:A,reactEvent:U}))},[T,A]),Q=L.useCallback(()=>{T(hle())},[T]),V=L.useCallback(U=>{T(Ale(U.key))},[T]),te=L.useCallback(U=>{T(Wc({handler:s,reactEvent:U}))},[T,s]),W=L.useCallback(U=>{T(Wc({handler:o,reactEvent:U}))},[T,o]),re=L.useCallback(U=>{T(Wc({handler:l,reactEvent:U}))},[T,l]),z=L.useCallback(U=>{T(Wc({handler:h,reactEvent:U}))},[T,h]),X=L.useCallback(U=>{T(Wc({handler:g,reactEvent:U}))},[T,g]),K=L.useCallback(U=>{T(mle(U)),T(Wc({handler:v,reactEvent:U}))},[T,v]),se=L.useCallback(U=>{T(Wc({handler:m,reactEvent:U}))},[T,m]);return L.createElement(Boe.Provider,{value:N},L.createElement(Jae.Provider,{value:B},L.createElement("div",{className:_a("recharts-wrapper",n),style:mdt({position:"relative",cursor:"default",width:w,height:a},y),onClick:k,onContextMenu:te,onDoubleClick:W,onFocus:Q,onKeyDown:V,onMouseDown:re,onMouseEnter:H,onMouseLeave:P,onMouseMove:M,onMouseUp:z,onTouchEnd:se,onTouchMove:K,onTouchStart:X,ref:S},r)))}),bdt=["children","className","width","height","style","compact","title","desc"];function wdt(e,t){if(e==null)return{};var r,n,a=Cdt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Cdt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Edt=L.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:i,style:s,compact:o,title:l,desc:c}=e,u=wdt(e,bdt),A=nw(u);return o?L.createElement(J$,{otherAttributes:A,title:l,desc:c},r):L.createElement(ydt,{className:n,style:s,width:a,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},L.createElement(J$,{otherAttributes:A,title:l,desc:c,ref:t},L.createElement(Ict,null,r)))}),_dt=["width","height"];function mD(){return mD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mD.apply(null,arguments)}function Sdt(e,t){if(e==null)return{};var r,n,a=Tdt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tdt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ndt={top:5,right:5,bottom:5,left:5},Bdt={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Ndt,reverseStackOrder:!1,syncMethod:"index"},kdt=L.forwardRef(function(t,r){var n,a=D0(t.categoricalChartProps,Bdt),{width:i,height:s}=a,o=Sdt(a,_dt);if(!dS(i)||!dS(s))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:A,categoricalChartProps:h}=t,m={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:A,eventEmitter:void 0};return L.createElement(sdt,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:l},L.createElement(bct,{chartData:h.data}),L.createElement(odt,{width:i,height:s,layout:a.layout,margin:a.margin}),L.createElement(ldt,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),L.createElement(Edt,mD({},o,{width:i,height:s,ref:r})))}),Idt=["axis","item"],Fdt=L.forwardRef((e,t)=>L.createElement(kdt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Idt,tooltipPayloadSearcher:tst,categoricalChartProps:e,ref:t}));const Ddt=e=>{const[t,r]=L.useState(!1),[n,a]=L.useState(null);return L.useEffect(()=>{const i="google-maps-script";if(document.getElementById(i)||window.google){r(!0);return}const s=document.createElement("script");s.id=i,s.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,s.async=!0,s.defer=!0,s.onload=()=>r(!0),s.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(s)},[e]),{isLoaded:t,error:n}},gD=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],Rdt=["Mecánica Industrial","Mecánica Automotriz"],Pdt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:gD.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),eK=({empresas:e,isLoaded:t,route:r})=>{const n=L.useRef(null),a=L.useRef(null),i=L.useRef([]),s=L.useRef(null),o=e.filter(l=>{var c,u;return((c=l.coordenadas)==null?void 0:c.lat)&&((u=l.coordenadas)==null?void 0:u.lng)});return L.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0})),s.current||(s.current=new window.google.maps.DirectionsRenderer,s.current.setMap(a.current)),i.current.forEach(l=>l.setMap(null)),i.current=[],r?s.current.setDirections(r):(s.current.setDirections(null),o.forEach(l=>{const c=new window.google.maps.Marker({position:{lat:l.coordenadas.lat,lng:l.coordenadas.lng},map:a.current,title:l.nombre});i.current.push(c)})))},[o,t,r]),t?d.jsxs("div",{className:"relative",children:[d.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border",style:{minHeight:"600px"}}),!r&&o.length===0&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:d.jsx("div",{className:"text-center p-6",children:d.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]}):d.jsx("div",{className:"h-[600px] w-full rounded-lg border bg-gray-100 flex items-center justify-center",children:d.jsx("p",{className:"text-gray-600",children:"Cargando Google Maps..."})})},Mdt=({route:e})=>(e.routes[0].legs[0],d.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",children:[d.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),d.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((t,r)=>{var n,a;return d.jsxs("div",{className:"p-3 border-b",children:[d.jsxs("p",{children:[d.jsxs("strong",{children:["Tramo ",r+1,":"]})," De ",d.jsx("strong",{children:t.start_address.split(",")[0]})," a ",d.jsx("strong",{children:t.end_address.split(",")[0]})]}),d.jsxs("p",{className:"text-sm text-slate-600",children:["Duración: ",(n=t.duration)==null?void 0:n.text,", Distancia: ",(a=t.distance)==null?void 0:a.text]})]},r)})}),d.jsx("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:d.jsxs("p",{children:["Total: ",e.routes[0].legs.reduce((t,r)=>{var n;return t+(((n=r.duration)==null?void 0:n.value)||0)},0)/60|0," min / ",e.routes[0].legs.reduce((t,r)=>{var n;return t+(((n=r.distance)==null?void 0:n.value)||0)},0)/1e3," km"]})})]})),Ldt=({elemento:e,className:t="w-5 h-5"})=>{const r=n=>{const a=n.toLowerCase();return a.includes("legal")?"🛡️":a.includes("contrato")?"📄":a.includes("ambiente")?"😊":a.includes("supervisión")?"👥":a.includes("aprendizaje")?"🎓":a.includes("recursos")?"🔧":a.includes("seguridad")?"🔒":a.includes("comunicación")?"💬":"📋"};return d.jsx("div",{className:"flex-shrink-0 text-2xl",children:r(e)})},tK=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var i;a===window.google.maps.places.PlacesServiceStatus.OK&&((i=n==null?void 0:n.geometry)!=null&&i.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Odt=()=>{const[e,t]=L.useState([]),[r,n]=L.useState([]),[a,i]=L.useState([]),[s,o]=L.useState("list"),[l,c]=L.useState(null),[u,A]=L.useState(!0),[h,m]=L.useState(null),[v,g]=L.useState(null),[y,w]=L.useState(null),[T,N]=L.useState([]),[F,B]=L.useState(null),[D,E]=L.useState(!1),S="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:k,error:H}=Ddt(S),[P,M]=L.useState("todos"),[Q,V]=L.useState("todos"),[te,W]=L.useState("");L.useEffect(()=>{const ae=UYe(t),ue=QYe(n),le=VYe(ie=>{i(ie),A(!1)});return()=>{ae(),ue(),le()}},[]);const re=async()=>{if(l)try{await jYe(l),o("list"),c(null),m(null)}catch{alert("No se pudo guardar la empresa.")}},z=async ae=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await HYe(ae)},X=(ae,ue)=>{c(le=>le?{...le,[ae]:ue}:null)},K=async ae=>{var ue;if(m(ae),(ue=ae==null?void 0:ae.value)!=null&&ue.place_id&&k){const le=await tK(ae.value.place_id);X("direccion",ae.label||""),X("coordenadas",le)}else X("direccion",(ae==null?void 0:ae.label)||"")},se=ae=>{c(JSON.parse(JSON.stringify(ae))),ae.direccion&&m({label:ae.direccion,value:{description:ae.direccion}}),o("form")},U=async ae=>{var ue;if(g(ae),(ue=ae==null?void 0:ae.value)!=null&&ue.place_id&&k){const le=await tK(ae.value.place_id);w(le)}},Y=ae=>{N(ue=>ue.some(le=>le.id===ae.id)?ue.filter(le=>le.id!==ae.id):[...ue,ae])},Z=()=>{if(!y||T.length===0||!k)return;E(!0);const ae=new window.google.maps.DirectionsService,ue=T.filter(le=>le.coordenadas).map(le=>({location:le.coordenadas,stopover:!0}));ae.route({origin:y,destination:y,waypoints:ue,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode.DRIVING},(le,ie)=>{E(!1),ie===window.google.maps.DirectionsStatus.OK&&le?B(le):alert("No se pudo calcular la ruta: "+ie)})},ne=()=>{B(null),g(null),w(null),N([])},de=ae=>{const ue=ae.calificaciones.map(le=>le.score).filter(le=>le!==null);return ue.length===0?null:ue.reduce((le,ie)=>le+ie,0)/ue.length},xe=L.useMemo(()=>{const ae=parseInt(te);return e.filter(ue=>!te||isNaN(ae)?!0:ue.cupos>=ae).filter(ue=>{if(P==="todos")return!0;const le=de(ue);return le===null?!1:P==="excelente"?le>=4.5:P==="bueno"?le>=3.5&&le<4.5:P==="regular"?le>=2.5&&le<3.5:P==="deficiente"?le<2.5:!1})},[e,P,te]),Ae=L.useMemo(()=>Q!=="todos"?xe.map(ae=>{var ue;return{name:ae.nombre,Puntaje:((ue=ae.calificaciones.find(le=>le.elemento===Q))==null?void 0:ue.score)||0}}).filter(ae=>ae.Puntaje>0):gD.map(ae=>{const ue=xe.map(ie=>{var De;return(De=ie.calificaciones.find(Le=>Le.elemento===ae.elemento))==null?void 0:De.score}).filter(ie=>ie!=null),le=ue.length>0?ue.reduce((ie,De)=>ie+De,0)/ue.length:0;return{name:ae.elemento.split(" ")[0],Promedio:parseFloat(le.toFixed(1)),fullName:ae.elemento}}),[xe,Q]);return u?d.jsx("div",{className:"text-center p-8",children:"Cargando..."}):d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),d.jsxs("div",{className:"flex items-center gap-4",children:[s!=="list"&&d.jsx("button",{onClick:()=>{o("list"),m(null),c(null),ne()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),s==="list"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>o("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),d.jsx("button",{onClick:()=>o("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),d.jsx("button",{onClick:()=>{c(Pdt()),o("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),s==="route"&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa el punto de partida"}),d.jsx(Wz,{apiKey:S,selectProps:{value:v,onChange:U,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Selecciona las empresas a visitar"}),d.jsx("div",{className:"max-h-80 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ae=>ae.coordenadas).map(ae=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:`route-${ae.id}`,checked:T.some(ue=>ue.id===ae.id),onChange:()=>Y(ae),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("label",{htmlFor:`route-${ae.id}`,className:"ml-3 text-sm text-gray-700",children:ae.nombre})]},ae.id))})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:Z,disabled:!y||T.length===0||D,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:D?"Calculando...":"Generar Ruta"}),F&&d.jsx("button",{onClick:ne,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar Ruta"})]})]}),d.jsx("div",{children:d.jsx(eK,{empresas:T,isLoaded:k,route:F})})]}),F&&d.jsx(Mdt,{route:F})]}),s==="map"&&d.jsx(eK,{empresas:e,isLoaded:k}),s==="list"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-3",children:e.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas"}):e.map(ae=>{var ue;return d.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg",children:ae.nombre}),d.jsxs("p",{className:"text-sm text-slate-500",children:[ae.rut," | ",ae.direccion]}),d.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ae.area||"No especificada"," | Cupos: ",ae.cupos," | Supervisor: ",((ue=ae.docenteSupervisor)==null?void 0:ue.nombreCompleto)||"Ninguno"]}),d.jsx("p",{className:"text-sm text-slate-600",children:ae.coordenadas?" 📍 Geo-localizada":" ⚠️ Sin coordenadas"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("button",{onClick:()=>se(ae),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),d.jsx("button",{onClick:()=>z(ae.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ae.id)})}),d.jsxs("div",{className:"mt-12 pt-6 border-t",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Resumen Gráfico de Calificaciones"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nivel de Desempeño"}),d.jsxs("select",{value:P,onChange:ae=>M(ae.target.value),className:"input-style w-full",children:[d.jsx("option",{value:"todos",children:"Todos"}),d.jsx("option",{value:"excelente",children:"Excelente (4.5+)"}),d.jsx("option",{value:"bueno",children:"Bueno (3.5 - 4.4)"}),d.jsx("option",{value:"regular",children:"Regular (2.5 - 3.4)"}),d.jsx("option",{value:"deficiente",children:"Deficiente (<2.5)"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indicador de Evaluación"}),d.jsxs("select",{value:Q,onChange:ae=>V(ae.target.value),className:"input-style w-full",children:[d.jsx("option",{value:"todos",children:"Todos los indicadores (Promedio)"}),gD.map(ae=>d.jsx("option",{value:ae.elemento,children:ae.elemento},ae.elemento))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cupos Mínimos"}),d.jsx("input",{type:"number",value:te,onChange:ae=>W(ae.target.value),placeholder:"Ej: 5",className:"input-style w-full"})]})]}),d.jsx("div",{className:"h-[450px] w-full bg-white rounded-lg p-4 border",children:Ae.length>0?d.jsx(Bst,{width:"100%",height:"100%",children:d.jsxs(Fdt,{data:Ae,margin:{top:5,right:20,left:-10,bottom:100},children:[d.jsx(nle,{strokeDasharray:"3 3"}),d.jsx(zM,{dataKey:"name",angle:-60,textAnchor:"end",interval:0}),d.jsx(GM,{domain:[0,5]}),d.jsx(xst,{formatter:(ae,ue,le)=>[`${ae}`,le.payload.fullName||ue]}),d.jsx(y5,{verticalAlign:"top",wrapperStyle:{paddingBottom:"20px"}}),d.jsx(Xoe,{dataKey:Q!=="todos"?"Puntaje":"Promedio",fill:"#8884d8"})]})}):d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-gray-500",children:"No hay datos para mostrar con los filtros seleccionados."})})})]})]}),s==="form"&&l&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"id"in l?"Editando Empresa":"Nueva Empresa"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsx("input",{value:l.nombre,onChange:ae=>X("nombre",ae.target.value),placeholder:"Nombre Empresa",className:"input-style",required:!0}),d.jsx("input",{value:l.rut,onChange:ae=>X("rut",ae.target.value),placeholder:"RUT Empresa",className:"input-style",required:!0}),d.jsx("div",{className:"md:col-span-2",children:H?d.jsxs("div",{className:"p-3 bg-red-100 border border-red-300 rounded-lg",children:[d.jsx("p",{className:"text-red-700",children:"Error al cargar Google Places."}),d.jsx("input",{value:l.direccion,onChange:ae=>X("direccion",ae.target.value),placeholder:"Ingrese dirección manualmente...",className:"input-style w-full mt-2"})]}):k?d.jsxs("div",{children:[d.jsx(Wz,{apiKey:S,selectProps:{value:h,onChange:K,placeholder:"Buscar dirección en Chile...",className:"w-full"},autocompletionRequest:{componentRestrictions:{country:["cl"]}}}),l.coordenadas&&d.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ Coordenadas: ",l.coordenadas.lat.toFixed(4),", ",l.coordenadas.lng.toFixed(4)]})]}):d.jsx("input",{disabled:!0,className:"input-style w-full opacity-50",placeholder:"Cargando Google Places..."})}),d.jsx("input",{value:l.contacto,onChange:ae=>X("contacto",ae.target.value),placeholder:"Contacto",className:"input-style"}),d.jsx("input",{type:"email",value:l.email||"",onChange:ae=>X("email",ae.target.value),placeholder:"Correo electrónico (opcional)",className:"input-style"}),d.jsx("input",{type:"number",value:l.cupos,onChange:ae=>X("cupos",parseInt(ae.target.value)||1),placeholder:"Número de cupos",className:"input-style",min:"1"}),d.jsxs("select",{value:l.area||"",onChange:ae=>X("area",ae.target.value),className:"input-style w-full",children:[d.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),Rdt.map(ae=>d.jsx("option",{value:ae,children:ae},ae))]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Docente Supervisor"}),d.jsxs("select",{value:l.docenteSupervisor?JSON.stringify(l.docenteSupervisor):"",onChange:ae=>{const ue=ae.target.value;X("docenteSupervisor",ue?JSON.parse(ue):void 0)},className:"input-style w-full",children:[d.jsx("option",{value:"",children:"Sin supervisor asignado"}),a.map(ae=>d.jsx("option",{value:JSON.stringify({id:ae.id,nombre:ae.nombreCompleto}),children:ae.nombreCompleto},ae.id))]})]})]}),l.calificaciones&&l.calificaciones.length>0&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),d.jsx("div",{className:"grid gap-3",children:l.calificaciones.map((ae,ue)=>d.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors",children:[d.jsx(Ldt,{elemento:ae.elemento}),d.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ae.elemento}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("select",{value:ae.score||"",onChange:le=>{const ie=[...l.calificaciones];ie[ue].score=le.target.value?parseInt(le.target.value):null,X("calificaciones",ie)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"",children:"Sin calificar"}),d.jsx("option",{value:"1",children:"1 - Muy deficiente"}),d.jsx("option",{value:"2",children:"2 - Deficiente"}),d.jsx("option",{value:"3",children:"3 - Regular"}),d.jsx("option",{value:"4",children:"4 - Bueno"}),d.jsx("option",{value:"5",children:"5 - Excelente"})]}),ae.score&&d.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(le=>d.jsx("span",{className:`text-lg ${le<=ae.score?"text-yellow-400":"text-gray-300"}`,children:"★"},le))})]})]},ue))}),l.calificaciones.some(ae=>ae.score)&&d.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[d.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Resumen de Evaluación"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-blue-600",children:"Aspectos evaluados:"}),d.jsxs("span",{className:"ml-2 font-semibold",children:[l.calificaciones.filter(ae=>ae.score).length," / ",l.calificaciones.length]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-blue-600",children:"Promedio:"}),d.jsxs("span",{className:"ml-2 font-semibold",children:[(l.calificaciones.filter(ae=>ae.score).reduce((ae,ue)=>ae+ue.score,0)/l.calificaciones.filter(ae=>ae.score).length).toFixed(1)," / 5.0"]})]})]})]})]}),d.jsx("button",{onClick:re,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!l.nombre||!l.rut,children:"Guardar Empresa"})]})]})},Udt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},jdt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:i,refreshUnreadCount:s})=>{const o=e.profile,l=L.useMemo(()=>{const w=fme[o];return o!==Ht.ESTUDIANTE?w:w.filter(T=>{if(T.name==="Asistencia a Empresa"){const N=Udt(e.curso||"");return N.startsWith("3º")||N.startsWith("4º")}return!0})},[o,e.curso]),[c,u]=L.useState(null),[A,h]=L.useState(!1);L.useEffect(()=>{l&&l.length>0?u(l[0]):u(null)},[o,l]);const m=L.useCallback(w=>{u(w),window.innerWidth<768&&h(!1)},[]),v=L.useCallback(w=>{const T=l.find(N=>N.name===w);T&&m(T)},[l,m]),g=()=>d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[d.jsx(Ype,{}),d.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),d.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(w=>d.jsxs("button",{onClick:()=>m(w),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(c==null?void 0:c.name)===w.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[w.icon,d.jsx("span",{className:"ml-4",children:w.name})]},w.name))})]}),y=()=>{if(!c)return d.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(c.name==="Calendario Académico")return d.jsx(Yge,{profile:o});if(c.name==="Muro de Anuncios")return d.jsx(tve,{currentUser:e});if(c.name==="Mensajería Interna")return d.jsx(iLe,{currentUser:e,refreshUnreadCount:s});if(c.name==="Generador de Actas")return d.jsx(cve,{});if(o===Ht.SUBDIRECCION){if(c.name==="Dashboard")return d.jsx(Hme,{currentUser:e});if(c.name==="Administración")return d.jsx(DBe,{});if(c.name==="Seguimiento Curricular")return d.jsx(FYe,{currentUser:e});if(c.name==="Acompañamiento docente")return d.jsx(XMe,{currentUser:e});if(c.name==="Análisis Taxonómico")return d.jsx(sz,{currentUser:e});if(c.name==="Interdisciplinario")return d.jsx(w9,{});if(c.name==="Registro de inasistencias y reemplazos docentes")return d.jsx(Mme,{currentUser:e});if(c.name==="Crear horarios")return d.jsx(Ege,{});if(c.name==="Seguimiento de acciones pedagógicas")return d.jsx(Bge,{});if(c.name==="Inclusión")return d.jsx(aH,{currentUser:e})}if(o===Ht.PROFESORADO){if(c.name==="Planificación")return d.jsx(Qge,{currentUser:e});if(c.name==="Mis Acompañamientos")return d.jsx(N$e,{currentUser:e});if(c.name==="Recursos de Aprendizaje")return d.jsx(h$e,{});if(c.name==="Análisis Taxonómico")return d.jsx(sz,{currentUser:e});if(c.name==="Interdisciplinario")return d.jsx(w9,{});if(c.name==="Inclusión")return d.jsx(aH,{currentUser:e});if(c.name==="Actividades Remotas")return d.jsx(XBe,{});if(c.name==="Evaluación de Aprendizajes")return d.jsx(u1e,{});if(c.name==="Evaluaciones Formativas")return d.jsx(V4e,{currentUser:e})}if(o===Ht.COORDINACION_TP){if(c.name==="Seguimiento Dual")return d.jsx(VBe,{});if(c.name==="Asistencia Dual")return d.jsx(T4e,{});if(c.name==="Pañol")return d.jsx($7e,{});if(c.name==="Gestión de Empresas")return d.jsx(Odt,{})}if(o===Ht.ESTUDIANTE){if(c.name==="Auto-aprendizaje")return d.jsx(i4e,{currentUser:e});if(c.name==="Evaluación Formativa")return d.jsx(b$e,{currentUser:e});if(c.name==="Tareas Interdisciplinarias")return d.jsx(S$e,{currentUser:e});if(c.name==="Asistencia a Empresa")return d.jsx(x4e,{currentUser:e})}return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:c.name}),d.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:d.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",d.jsx("span",{className:"font-semibold",children:c.name}),"."]})})]})};return d.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[d.jsx(yme,{currentUser:e,onLogout:t,onNavigate:v,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(!A),unreadMessagesCount:i,refreshUnreadCount:s}),d.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[A&&d.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),d.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${A?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:d.jsx(g,{})}),d.jsx("main",{className:"flex-1 overflow-y-auto",children:d.jsx("div",{className:"p-6 md:p-8",children:y()})})]})]})},Hdt=({onSelectProfile:e,isAdminView:t=!1})=>d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx("div",{className:"mb-4 flex justify-center items-center",children:d.jsx(xR,{})}),d.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:dme.map(r=>d.jsxs("button",{onClick:()=>e(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[d.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),d.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),d.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),Qdt=()=>{const[e,t]=L.useState(null),[r,n]=L.useState(null),[a,i]=L.useState(!0),[s,o]=L.useState(null),[l,c]=L.useState(!1),[u,A]=L.useState(null);L.useEffect(()=>{const T=LK(Rb,async N=>{if(t(N),N)try{const F=await TY(N.email);F?(n(F),F.profile===Ht.SUBDIRECCION&&c(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await nB())}catch{o("Error al conectar con la base de datos."),await nB()}else n(null),A(null),c(!1),o(null);i(!1)});return()=>T()},[]);const h=async(T,N)=>{if(o(null),!T.trim()||!N.trim()){o("Por favor ingrese email y contraseña");return}try{await $pe(T.trim(),N)}catch(F){switch(F.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},m=async T=>{try{await Kpe(T)}catch(N){console.error("Error al enviar email de recuperación:",N)}},v=T=>{A(T),c(!1)},g=()=>{c(!0),A(null)},y=async()=>{try{await nB()}catch(T){console.error("Error al cerrar sesión:",T)}};if(a)return d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"mb-4 flex justify-center items-center",children:d.jsx(xR,{})}),d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),d.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return d.jsx(mme,{onLoginAttempt:h,onForgotPasswordRequest:m,error:s});if(l&&r.profile===Ht.SUBDIRECCION)return d.jsx(Hdt,{onSelectProfile:v,isAdminView:!0});const w=u||r.profile;return d.jsx(jdt,{currentUser:{...r,profile:w},onLogout:y,onChangeProfile:r.profile===Ht.SUBDIRECCION?g:void 0,canChangeProfile:r.profile===Ht.SUBDIRECCION})},vle=document.getElementById("root");if(!vle)throw new Error("Could not find root element to mount to");const Vdt=Pce.createRoot(vle);Vdt.render(d.jsx(ft.StrictMode,{children:d.jsx(Qdt,{})}));export{aa as _,Gdt as c,mc as g};
