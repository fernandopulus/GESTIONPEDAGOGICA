var zhe=Object.defineProperty;var $he=(e,t,r)=>t in e?zhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var M3=(e,t,r)=>$he(e,typeof t!="symbol"?t+"":t,r);function Ghe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var ppt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qhe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var U3={exports:{}},uy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y9;function Khe(){if(y9)return uy;y9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:s}}return uy.Fragment=t,uy.jsx=r,uy.jsxs=r,uy}var w9;function Whe(){return w9||(w9=1,U3.exports=Khe()),U3.exports}var i=Whe(),Q3={exports:{}},tn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N9;function Xhe(){if(N9)return tn;N9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(K){return K===null||typeof K!="object"?null:(K=f&&K[f]||K["@@iterator"],typeof K=="function"?K:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(K,H,F){this.props=K,this.context=H,this.refs=x,this.updater=F||m}v.prototype.isReactComponent={},v.prototype.setState=function(K,H){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,H,"setState")},v.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(K,H,F){this.props=K,this.context=H,this.refs=x,this.updater=F||m}var _=w.prototype=new y;_.constructor=w,g(_,v.prototype),_.isPureReactComponent=!0;var O=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function C(K,H,F,D,q,J){return F=J.ref,{$$typeof:e,type:K,key:H,ref:F!==void 0?F:null,props:J}}function k(K,H){return C(K.type,H,void 0,void 0,void 0,K.props)}function T(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function L(K){var H={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(F){return H[F]})}var R=/\/+/g;function S(K,H){return typeof K=="object"&&K!==null&&K.key!=null?L(""+K.key):H.toString(36)}function U(){}function Q(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(U,U):(K.status="pending",K.then(function(H){K.status==="pending"&&(K.status="fulfilled",K.value=H)},function(H){K.status==="pending"&&(K.status="rejected",K.reason=H)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function X(K,H,F,D,q){var J=typeof K;(J==="undefined"||J==="boolean")&&(K=null);var te=!1;if(K===null)te=!0;else switch(J){case"bigint":case"string":case"number":te=!0;break;case"object":switch(K.$$typeof){case e:case t:te=!0;break;case d:return te=K._init,X(te(K._payload),H,F,D,q)}}if(te)return q=q(K),te=D===""?"."+S(K,0):D,O(q)?(F="",te!=null&&(F=te.replace(R,"$&/")+"/"),X(q,H,F,"",function(oe){return oe})):q!=null&&(T(q)&&(q=k(q,F+(q.key==null||K&&K.key===q.key?"":(""+q.key).replace(R,"$&/")+"/")+te)),H.push(q)),1;te=0;var ne=D===""?".":D+":";if(O(K))for(var ie=0;ie<K.length;ie++)D=K[ie],J=ne+S(D,ie),te+=X(D,H,F,J,q);else if(ie=h(K),typeof ie=="function")for(K=ie.call(K),ie=0;!(D=K.next()).done;)D=D.value,J=ne+S(D,ie++),te+=X(D,H,F,J,q);else if(J==="object"){if(typeof K.then=="function")return X(Q(K),H,F,D,q);throw H=String(K),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return te}function z(K,H,F){if(K==null)return K;var D=[],q=0;return X(K,D,"","",function(J){return H.call(F,J,q++)}),D}function W(K){if(K._status===-1){var H=K._result;H=H(),H.then(function(F){(K._status===0||K._status===-1)&&(K._status=1,K._result=F)},function(F){(K._status===0||K._status===-1)&&(K._status=2,K._result=F)}),K._status===-1&&(K._status=0,K._result=H)}if(K._status===1)return K._result.default;throw K._result}var G=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Y(){}return tn.Children={map:z,forEach:function(K,H,F){z(K,function(){H.apply(this,arguments)},F)},count:function(K){var H=0;return z(K,function(){H++}),H},toArray:function(K){return z(K,function(H){return H})||[]},only:function(K){if(!T(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},tn.Component=v,tn.Fragment=r,tn.Profiler=a,tn.PureComponent=w,tn.StrictMode=n,tn.Suspense=c,tn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,tn.__COMPILER_RUNTIME={__proto__:null,c:function(K){return j.H.useMemoCache(K)}},tn.cache=function(K){return function(){return K.apply(null,arguments)}},tn.cloneElement=function(K,H,F){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var D=g({},K.props),q=K.key,J=void 0;if(H!=null)for(te in H.ref!==void 0&&(J=void 0),H.key!==void 0&&(q=""+H.key),H)!B.call(H,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&H.ref===void 0||(D[te]=H[te]);var te=arguments.length-2;if(te===1)D.children=F;else if(1<te){for(var ne=Array(te),ie=0;ie<te;ie++)ne[ie]=arguments[ie+2];D.children=ne}return C(K.type,q,void 0,void 0,J,D)},tn.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:s,_context:K},K},tn.createElement=function(K,H,F){var D,q={},J=null;if(H!=null)for(D in H.key!==void 0&&(J=""+H.key),H)B.call(H,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(q[D]=H[D]);var te=arguments.length-2;if(te===1)q.children=F;else if(1<te){for(var ne=Array(te),ie=0;ie<te;ie++)ne[ie]=arguments[ie+2];q.children=ne}if(K&&K.defaultProps)for(D in te=K.defaultProps,te)q[D]===void 0&&(q[D]=te[D]);return C(K,J,void 0,void 0,null,q)},tn.createRef=function(){return{current:null}},tn.forwardRef=function(K){return{$$typeof:l,render:K}},tn.isValidElement=T,tn.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:W}},tn.memo=function(K,H){return{$$typeof:u,type:K,compare:H===void 0?null:H}},tn.startTransition=function(K){var H=j.T,F={};j.T=F;try{var D=K(),q=j.S;q!==null&&q(F,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(Y,G)}catch(J){G(J)}finally{j.T=H}},tn.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},tn.use=function(K){return j.H.use(K)},tn.useActionState=function(K,H,F){return j.H.useActionState(K,H,F)},tn.useCallback=function(K,H){return j.H.useCallback(K,H)},tn.useContext=function(K){return j.H.useContext(K)},tn.useDebugValue=function(){},tn.useDeferredValue=function(K,H){return j.H.useDeferredValue(K,H)},tn.useEffect=function(K,H,F){var D=j.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(K,H)},tn.useId=function(){return j.H.useId()},tn.useImperativeHandle=function(K,H,F){return j.H.useImperativeHandle(K,H,F)},tn.useInsertionEffect=function(K,H){return j.H.useInsertionEffect(K,H)},tn.useLayoutEffect=function(K,H){return j.H.useLayoutEffect(K,H)},tn.useMemo=function(K,H){return j.H.useMemo(K,H)},tn.useOptimistic=function(K,H){return j.H.useOptimistic(K,H)},tn.useReducer=function(K,H,F){return j.H.useReducer(K,H,F)},tn.useRef=function(K){return j.H.useRef(K)},tn.useState=function(K){return j.H.useState(K)},tn.useSyncExternalStore=function(K,H,F){return j.H.useSyncExternalStore(K,H,F)},tn.useTransition=function(){return j.H.useTransition()},tn.version="19.1.1",tn}var E9;function Qb(){return E9||(E9=1,Q3.exports=Xhe()),Q3.exports}var N=Qb();const ot=Tl(N),Yhe=Ghe({__proto__:null,default:ot},[N]);var H3={exports:{}},dy={},V3={exports:{}},z3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C9;function Jhe(){return C9||(C9=1,function(e){function t(z,W){var G=z.length;z.push(W);e:for(;0<G;){var Y=G-1>>>1,K=z[Y];if(0<a(K,W))z[Y]=W,z[G]=K,G=Y;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var W=z[0],G=z.pop();if(G!==W){z[0]=G;e:for(var Y=0,K=z.length,H=K>>>1;Y<H;){var F=2*(Y+1)-1,D=z[F],q=F+1,J=z[q];if(0>a(D,G))q<K&&0>a(J,D)?(z[Y]=J,z[q]=G,Y=q):(z[Y]=D,z[F]=G,Y=F);else if(q<K&&0>a(J,G))z[Y]=J,z[q]=G,Y=q;else break e}}return W}function a(z,W){var G=z.sortIndex-W.sortIndex;return G!==0?G:z.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function O(z){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=z)n(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=r(u)}}function j(z){if(x=!1,O(z),!g)if(r(c)!==null)g=!0,B||(B=!0,S());else{var W=r(u);W!==null&&X(j,W.startTime-z)}}var B=!1,C=-1,k=5,T=-1;function L(){return v?!0:!(e.unstable_now()-T<k)}function R(){if(v=!1,B){var z=e.unstable_now();T=z;var W=!0;try{e:{g=!1,x&&(x=!1,w(C),C=-1),m=!0;var G=h;try{t:{for(O(z),f=r(c);f!==null&&!(f.expirationTime>z&&L());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,h=f.priorityLevel;var K=Y(f.expirationTime<=z);if(z=e.unstable_now(),typeof K=="function"){f.callback=K,O(z),W=!0;break t}f===r(c)&&n(c),O(z)}else n(c);f=r(c)}if(f!==null)W=!0;else{var H=r(u);H!==null&&X(j,H.startTime-z),W=!1}}break e}finally{f=null,h=G,m=!1}W=void 0}}finally{W?S():B=!1}}}var S;if(typeof _=="function")S=function(){_(R)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Q=U.port2;U.port1.onmessage=R,S=function(){Q.postMessage(null)}}else S=function(){y(R,0)};function X(z,W){C=y(function(){z(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var G=h;h=W;try{return z()}finally{h=G}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=h;h=z;try{return W()}finally{h=G}},e.unstable_scheduleCallback=function(z,W,G){var Y=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,z={id:d++,callback:W,priorityLevel:z,startTime:G,expirationTime:K,sortIndex:-1},G>Y?(z.sortIndex=G,t(u,z),r(c)===null&&z===r(u)&&(x?(w(C),C=-1):x=!0,X(j,G-Y))):(z.sortIndex=K,t(c,z),g||m||(g=!0,B||(B=!0,S()))),z},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(z){var W=h;return function(){var G=h;h=W;try{return z.apply(this,arguments)}finally{h=G}}}}(z3)),z3}var _9;function Zhe(){return _9||(_9=1,V3.exports=Jhe()),V3.exports}var $3={exports:{}},Mo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S9;function e0e(){if(S9)return Mo;S9=1;var e=Qb();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Mo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Mo.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Mo.flushSync=function(c){var u=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=u,n.p=d,n.d.f()}},Mo.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Mo.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Mo.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Mo.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Mo.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Mo.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Mo.requestFormReset=function(c){n.d.r(c)},Mo.unstable_batchedUpdates=function(c,u){return c(u)},Mo.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},Mo.useFormStatus=function(){return o.H.useHostTransitionStatus()},Mo.version="19.1.1",Mo}var k9;function vJ(){if(k9)return $3.exports;k9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$3.exports=e0e(),$3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j9;function t0e(){if(j9)return dy;j9=1;var e=Zhe(),t=Qb(),r=vJ();function n(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var p=A,b=A;if(A.alternate)for(;p.return;)p=p.return;else{A=p;do p=A,(p.flags&4098)!==0&&(b=p.return),A=p.return;while(A)}return p.tag===3?b:null}function o(A){if(A.tag===13){var p=A.memoizedState;if(p===null&&(A=A.alternate,A!==null&&(p=A.memoizedState)),p!==null)return p.dehydrated}return null}function l(A){if(s(A)!==A)throw Error(n(188))}function c(A){var p=A.alternate;if(!p){if(p=s(A),p===null)throw Error(n(188));return p!==A?null:A}for(var b=A,E=p;;){var M=b.return;if(M===null)break;var Z=M.alternate;if(Z===null){if(E=M.return,E!==null){b=E;continue}break}if(M.child===Z.child){for(Z=M.child;Z;){if(Z===b)return l(M),A;if(Z===E)return l(M),p;Z=Z.sibling}throw Error(n(188))}if(b.return!==E.return)b=M,E=Z;else{for(var he=!1,Ce=M.child;Ce;){if(Ce===b){he=!0,b=M,E=Z;break}if(Ce===E){he=!0,E=M,b=Z;break}Ce=Ce.sibling}if(!he){for(Ce=Z.child;Ce;){if(Ce===b){he=!0,b=Z,E=M;break}if(Ce===E){he=!0,E=Z,b=M;break}Ce=Ce.sibling}if(!he)throw Error(n(189))}}if(b.alternate!==E)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?A:p}function u(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A;for(A=A.child;A!==null;){if(p=u(A),p!==null)return p;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function S(A){return A===null||typeof A!="object"?null:(A=R&&A[R]||A["@@iterator"],typeof A=="function"?A:null)}var U=Symbol.for("react.client.reference");function Q(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===U?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case B:return"SuspenseList";case T:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case _:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case O:var p=A.render;return A=A.displayName,A||(A=p.displayName||p.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return p=A.displayName||null,p!==null?p:Q(A.type)||"Memo";case k:p=A._payload,A=A._init;try{return Q(A(p))}catch{}}return null}var X=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Y=[],K=-1;function H(A){return{current:A}}function F(A){0>K||(A.current=Y[K],Y[K]=null,K--)}function D(A,p){K++,Y[K]=A.current,A.current=p}var q=H(null),J=H(null),te=H(null),ne=H(null);function ie(A,p){switch(D(te,p),D(J,A),D(q,null),p.nodeType){case 9:case 11:A=(A=p.documentElement)&&(A=A.namespaceURI)?W7(A):0;break;default:if(A=p.tagName,p=p.namespaceURI)p=W7(p),A=X7(p,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}F(q),D(q,A)}function oe(){F(q),F(J),F(te)}function de(A){A.memoizedState!==null&&D(ne,A);var p=q.current,b=X7(p,A.type);p!==b&&(D(J,A),D(q,b))}function ke(A){J.current===A&&(F(q),F(J)),ne.current===A&&(F(ne),sy._currentValue=G)}var ae=Object.prototype.hasOwnProperty,Oe=e.unstable_scheduleCallback,Te=e.unstable_cancelCallback,Se=e.unstable_shouldYield,fe=e.unstable_requestPaint,ye=e.unstable_now,Le=e.unstable_getCurrentPriorityLevel,Qe=e.unstable_ImmediatePriority,ue=e.unstable_UserBlockingPriority,we=e.unstable_NormalPriority,De=e.unstable_LowPriority,He=e.unstable_IdlePriority,Ye=e.log,tt=e.unstable_setDisableYieldValue,ft=null,$e=null;function nt(A){if(typeof Ye=="function"&&tt(A),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ft,A)}catch{}}var bt=Math.clz32?Math.clz32:xr,Bt=Math.log,xt=Math.LN2;function xr(A){return A>>>=0,A===0?32:31-(Bt(A)/xt|0)|0}var Xt=256,Gr=4194304;function wr(A){var p=A&42;if(p!==0)return p;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Ur(A,p,b){var E=A.pendingLanes;if(E===0)return 0;var M=0,Z=A.suspendedLanes,he=A.pingedLanes;A=A.warmLanes;var Ce=E&134217727;return Ce!==0?(E=Ce&~Z,E!==0?M=wr(E):(he&=Ce,he!==0?M=wr(he):b||(b=Ce&~A,b!==0&&(M=wr(b))))):(Ce=E&~Z,Ce!==0?M=wr(Ce):he!==0?M=wr(he):b||(b=E&~A,b!==0&&(M=wr(b)))),M===0?0:p!==0&&p!==M&&(p&Z)===0&&(Z=M&-M,b=p&-p,Z>=b||Z===32&&(b&4194048)!==0)?p:M}function _n(A,p){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&p)===0}function jr(A,p){switch(A){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hs(){var A=Xt;return Xt<<=1,(Xt&4194048)===0&&(Xt=256),A}function qr(){var A=Gr;return Gr<<=1,(Gr&62914560)===0&&(Gr=4194304),A}function Rn(A){for(var p=[],b=0;31>b;b++)p.push(A);return p}function ja(A,p){A.pendingLanes|=p,p!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Fr(A,p,b,E,M,Z){var he=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var Ce=A.entanglements,Ve=A.expirationTimes,dt=A.hiddenUpdates;for(b=he&~b;0<b;){var _t=31-bt(b),Ft=1<<_t;Ce[_t]=0,Ve[_t]=-1;var ht=dt[_t];if(ht!==null)for(dt[_t]=null,_t=0;_t<ht.length;_t++){var pt=ht[_t];pt!==null&&(pt.lane&=-536870913)}b&=~Ft}E!==0&&fr(A,E,0),Z!==0&&M===0&&A.tag!==0&&(A.suspendedLanes|=Z&~(he&~p))}function fr(A,p,b){A.pendingLanes|=p,A.suspendedLanes&=~p;var E=31-bt(p);A.entangledLanes|=p,A.entanglements[E]=A.entanglements[E]|1073741824|b&4194090}function Xr(A,p){var b=A.entangledLanes|=p;for(A=A.entanglements;b;){var E=31-bt(b),M=1<<E;M&p|A[E]&p&&(A[E]|=p),b&=~M}}function ms(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Yn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Ba(){var A=W.p;return A!==0?A:(A=window.event,A===void 0?32:m9(A.type))}function Rs(A,p){var b=W.p;try{return W.p=A,p()}finally{W.p=b}}var Wt=Math.random().toString(36).slice(2),xn="__reactFiber$"+Wt,ln="__reactProps$"+Wt,Fn="__reactContainer$"+Wt,Kn="__reactEvents$"+Wt,Jn="__reactListeners$"+Wt,xe="__reactHandles$"+Wt,Re="__reactResources$"+Wt,Be="__reactMarker$"+Wt;function Fe(A){delete A[xn],delete A[ln],delete A[Kn],delete A[Jn],delete A[xe]}function me(A){var p=A[xn];if(p)return p;for(var b=A.parentNode;b;){if(p=b[Fn]||b[xn]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(A=e9(A);A!==null;){if(b=A[xn])return b;A=e9(A)}return p}A=b,b=A.parentNode}return null}function Ae(A){if(A=A[xn]||A[Fn]){var p=A.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return A}return null}function _e(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A.stateNode;throw Error(n(33))}function Me(A){var p=A[Re];return p||(p=A[Re]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ie(A){A[Be]=!0}var ze=new Set,qe={};function vt(A,p){yt(A,p),yt(A+"Capture",p)}function yt(A,p){for(qe[A]=p,A=0;A<p.length;A++)ze.add(p[A])}var Ut=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kt={},Qt={};function Nr(A){return ae.call(Qt,A)?!0:ae.call(kt,A)?!1:Ut.test(A)?Qt[A]=!0:(kt[A]=!0,!1)}function Jr(A,p,b){if(Nr(p))if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(p);return}}A.setAttribute(p,""+b)}}function Zr(A,p,b){if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttribute(p,""+b)}}function an(A,p,b,E){if(E===null)A.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(p,b,""+E)}}var ps,ko;function gs(A){if(ps===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);ps=p&&p[1]||"",ko=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ps+A+ko}var ni=!1;function Ls(A,p){if(!A||ni)return"";ni=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(pt){var ht=pt}Reflect.construct(A,[],Ft)}else{try{Ft.call()}catch(pt){ht=pt}A.call(Ft.prototype)}}else{try{throw Error()}catch(pt){ht=pt}(Ft=A())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(pt){if(pt&&ht&&typeof pt.stack=="string")return[pt.stack,ht.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Z=E.DetermineComponentFrameRoot(),he=Z[0],Ce=Z[1];if(he&&Ce){var Ve=he.split(`
`),dt=Ce.split(`
`);for(M=E=0;E<Ve.length&&!Ve[E].includes("DetermineComponentFrameRoot");)E++;for(;M<dt.length&&!dt[M].includes("DetermineComponentFrameRoot");)M++;if(E===Ve.length||M===dt.length)for(E=Ve.length-1,M=dt.length-1;1<=E&&0<=M&&Ve[E]!==dt[M];)M--;for(;1<=E&&0<=M;E--,M--)if(Ve[E]!==dt[M]){if(E!==1||M!==1)do if(E--,M--,0>M||Ve[E]!==dt[M]){var _t=`
`+Ve[E].replace(" at new "," at ");return A.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",A.displayName)),_t}while(1<=E&&0<=M);break}}}finally{ni=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?gs(b):""}function wi(A){switch(A.tag){case 26:case 27:case 5:return gs(A.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 15:return Ls(A.type,!1);case 11:return Ls(A.type.render,!1);case 1:return Ls(A.type,!0);case 31:return gs("Activity");default:return""}}function ma(A){try{var p="";do p+=wi(A),A=A.return;while(A);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ai(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function af(A){var p=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Jh(A){var p=af(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,p),E=""+A[p];if(!A.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var M=b.get,Z=b.set;return Object.defineProperty(A,p,{configurable:!0,get:function(){return M.call(this)},set:function(he){E=""+he,Z.call(this,he)}}),Object.defineProperty(A,p,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(he){E=""+he},stopTracking:function(){A._valueTracker=null,delete A[p]}}}}function su(A){A._valueTracker||(A._valueTracker=Jh(A))}function vA(A){if(!A)return!1;var p=A._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return A&&(E=af(A)?A.checked?"true":"false":A.value),A=E,A!==b?(p.setValue(A),!0):!1}function Ni(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var sf=/[\n"\\]/g;function Sn(A){return A.replace(sf,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Ei(A,p,b,E,M,Z,he,Ce){A.name="",he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?A.type=he:A.removeAttribute("type"),p!=null?he==="number"?(p===0&&A.value===""||A.value!=p)&&(A.value=""+ai(p)):A.value!==""+ai(p)&&(A.value=""+ai(p)):he!=="submit"&&he!=="reset"||A.removeAttribute("value"),p!=null?ou(A,he,ai(p)):b!=null?ou(A,he,ai(b)):E!=null&&A.removeAttribute("value"),M==null&&Z!=null&&(A.defaultChecked=!!Z),M!=null&&(A.checked=M&&typeof M!="function"&&typeof M!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?A.name=""+ai(Ce):A.removeAttribute("name")}function iu(A,p,b,E,M,Z,he,Ce){if(Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(A.type=Z),p!=null||b!=null){if(!(Z!=="submit"&&Z!=="reset"||p!=null))return;b=b!=null?""+ai(b):"",p=p!=null?""+ai(p):b,Ce||p===A.value||(A.value=p),A.defaultValue=p}E=E??M,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=Ce?A.checked:!!E,A.defaultChecked=!!E,he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"&&(A.name=he)}function ou(A,p,b){p==="number"&&Ni(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Fl(A,p,b,E){if(A=A.options,p){p={};for(var M=0;M<b.length;M++)p["$"+b[M]]=!0;for(b=0;b<A.length;b++)M=p.hasOwnProperty("$"+A[b].value),A[b].selected!==M&&(A[b].selected=M),M&&E&&(A[b].defaultSelected=!0)}else{for(b=""+ai(b),p=null,M=0;M<A.length;M++){if(A[M].value===b){A[M].selected=!0,E&&(A[M].defaultSelected=!0);return}p!==null||A[M].disabled||(p=A[M])}p!==null&&(p.selected=!0)}}function Ln(A,p,b){if(p!=null&&(p=""+ai(p),p!==A.value&&(A.value=p),b==null)){A.defaultValue!==p&&(A.defaultValue=p);return}A.defaultValue=b!=null?""+ai(b):""}function lu(A,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(n(92));if(X(E)){if(1<E.length)throw Error(n(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=ai(p),A.defaultValue=b,E=A.textContent,E===b&&E!==""&&E!==null&&(A.value=E)}function jo(A,p){if(p){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=p;return}}A.textContent=p}var hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zh(A,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?A.setProperty(p,""):p==="float"?A.cssFloat="":A[p]="":E?A.setProperty(p,b):typeof b!="number"||b===0||hc.has(p)?p==="float"?A.cssFloat=b:A[p]=(""+b).trim():A[p]=b+"px"}function bA(A,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(A=A.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var M in p)E=p[M],p.hasOwnProperty(M)&&b[M]!==E&&Zh(A,M,E)}else for(var Z in p)p.hasOwnProperty(Z)&&Zh(A,Z,p[Z])}function yA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),of=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pc(A){return of.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Ol=null;function ia(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var gc=null,Dl=null;function _r(A){var p=Ae(A);if(p&&(A=p.stateNode)){var b=A[ln]||null;e:switch(A=p.stateNode,p.type){case"input":if(Ei(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Sn(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==A&&E.form===A.form){var M=E[ln]||null;if(!M)throw Error(n(90));Ei(E,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===A.form&&vA(E)}break e;case"textarea":Ln(A,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Fl(A,!!b.multiple,p,!1)}}}var Pl=!1;function e0(A,p,b){if(Pl)return A(p,b);Pl=!0;try{var E=A(p);return E}finally{if(Pl=!1,(gc!==null||Dl!==null)&&(gE(),gc&&(p=gc,A=Dl,Dl=gc=null,_r(p),A)))for(p=0;p<A.length;p++)_r(A[p])}}function Li(A,p){var b=A.stateNode;if(b===null)return null;var E=b[ln]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var Bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=!1;if(Bo)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){lo=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{lo=!1}var To=null,cu=null,xc=null;function wA(){if(xc)return xc;var A,p=cu,b=p.length,E,M="value"in To?To.value:To.textContent,Z=M.length;for(A=0;A<b&&p[A]===M[A];A++);var he=b-A;for(E=1;E<=he&&p[b-E]===M[Z-E];E++);return xc=M.slice(A,1<E?1-E:void 0)}function Io(A){var p=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&p===13&&(A=13)):A=p,A===10&&(A=13),32<=A||A===13?A:0}function Mi(){return!0}function Ll(){return!1}function xs(A){function p(b,E,M,Z,he){this._reactName=b,this._targetInst=M,this.type=E,this.nativeEvent=Z,this.target=he,this.currentTarget=null;for(var Ce in A)A.hasOwnProperty(Ce)&&(b=A[Ce],this[Ce]=b?b(Z):Z[Ce]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Mi:Ll,this.isPropagationStopped=Ll,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),p}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=xs(An),Ml=d({},An,{view:0,detail:0}),NA=xs(Ml),nd,ad,hl,Ui=d({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==hl&&(hl&&A.type==="mousemove"?(nd=A.screenX-hl.screenX,ad=A.screenY-hl.screenY):ad=nd=0,hl=A),nd)},movementY:function(A){return"movementY"in A?A.movementY:ad}}),vs=xs(Ui),t0=d({},Ui,{dataTransfer:0}),du=xs(t0),Ci=d({},Ml,{relatedTarget:0}),fu=xs(Ci),vc=d({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),lf=xs(vc),sd=d({},An,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),cf=xs(sd),EA=d({},An,{data:0}),id=xs(EA),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},od={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ld(A){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(A):(A=uf[A])?!!p[A]:!1}function hu(){return ld}var r0=d({},Ml,{key:function(A){if(A.key){var p=Au[A.key]||A.key;if(p!=="Unidentified")return p}return A.type==="keypress"?(A=Io(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?od[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(A){return A.type==="keypress"?Io(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Io(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),bc=xs(r0),mu=d({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=xs(mu),Qi=d({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),df=xs(Qi),ee=d({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),ge=xs(ee),Ue=d({},Ui,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Ge=xs(Ue),et=d({},An,{newState:0,oldState:0}),wt=xs(et),Rt=[9,13,27,32],qt=Bo&&"CompositionEvent"in window,P=null;Bo&&"documentMode"in document&&(P=document.documentMode);var se=Bo&&"TextEvent"in window&&!P,ce=Bo&&(!qt||P&&8<P&&11>=P),Ee=" ",Ze=!1;function ut(A,p){switch(A){case"keyup":return Rt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Sr=!1;function hn(A,p){switch(A){case"compositionend":return Mt(p);case"keypress":return p.which!==32?null:(Ze=!0,Ee);case"textInput":return A=p.data,A===Ee&&Ze?null:A;default:return null}}function Vr(A,p){if(Sr)return A==="compositionend"||!qt&&ut(A,p)?(A=wA(),xc=cu=To=null,Sr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ce&&p.locale!=="ko"?null:p.data;default:return null}}var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p==="input"?!!Mn[A.type]:p==="textarea"}function Ul(A,p,b,E){gc?Dl?Dl.push(E):Dl=[E]:gc=E,p=NE(p,"onChange"),0<p.length&&(b=new uu("onChange","change",null,b,E),A.push({event:b,listeners:p}))}var rs=null,Fo=null;function pu(A){z7(A,0)}function ff(A){var p=_e(A);if(vA(p))return A}function n0(A,p){if(A==="change")return p}var CA=!1;if(Bo){var Ms;if(Bo){var Af="oninput"in document;if(!Af){var _A=document.createElement("div");_A.setAttribute("oninput","return;"),Af=typeof _A.oninput=="function"}Ms=Af}else Ms=!1;CA=Ms&&(!document.documentMode||9<document.documentMode)}function SA(){rs&&(rs.detachEvent("onpropertychange",a0),Fo=rs=null)}function a0(A){if(A.propertyName==="value"&&ff(Fo)){var p=[];Ul(p,Fo,A,ia(A)),e0(pu,p)}}function Oo(A,p,b){A==="focusin"?(SA(),rs=p,Fo=b,rs.attachEvent("onpropertychange",a0)):A==="focusout"&&SA()}function _1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return ff(Fo)}function ip(A,p){if(A==="click")return ff(p)}function sx(A,p){if(A==="input"||A==="change")return ff(p)}function Ql(A,p){return A===p&&(A!==0||1/A===1/p)||A!==A&&p!==p}var si=typeof Object.is=="function"?Object.is:Ql;function hf(A,p){if(si(A,p))return!0;if(typeof A!="object"||A===null||typeof p!="object"||p===null)return!1;var b=Object.keys(A),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var M=b[E];if(!ae.call(p,M)||!si(A[M],p[M]))return!1}return!0}function op(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function ud(A,p){var b=op(A);A=0;for(var E;b;){if(b.nodeType===3){if(E=A+b.textContent.length,A<=p&&E>=p)return{node:b,offset:p-A};A=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=op(b)}}function mf(A,p){return A&&p?A===p?!0:A&&A.nodeType===3?!1:p&&p.nodeType===3?mf(A,p.parentNode):"contains"in A?A.contains(p):A.compareDocumentPosition?!!(A.compareDocumentPosition(p)&16):!1:!1}function co(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var p=Ni(A.document);p instanceof A.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)A=p.contentWindow;else break;p=Ni(A.document)}return p}function _i(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p&&(p==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||p==="textarea"||A.contentEditable==="true")}var pf=Bo&&"documentMode"in document&&11>=document.documentMode,Do=null,yc=null,gu=null,wc=!1;function Ka(A,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;wc||Do==null||Do!==Ni(E)||(E=Do,"selectionStart"in E&&_i(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),gu&&hf(gu,E)||(gu=E,E=NE(yc,"onSelect"),0<E.length&&(p=new uu("onSelect","select",null,p,b),A.push({event:p,listeners:E}),p.target=Do)))}function Nc(A,p){var b={};return b[A.toLowerCase()]=p.toLowerCase(),b["Webkit"+A]="webkit"+p,b["Moz"+A]="moz"+p,b}var bs={animationend:Nc("Animation","AnimationEnd"),animationiteration:Nc("Animation","AnimationIteration"),animationstart:Nc("Animation","AnimationStart"),transitionrun:Nc("Transition","TransitionRun"),transitionstart:Nc("Transition","TransitionStart"),transitioncancel:Nc("Transition","TransitionCancel"),transitionend:Nc("Transition","TransitionEnd")},Po={},kA={};Bo&&(kA=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function xu(A){if(Po[A])return Po[A];if(!bs[A])return A;var p=bs[A],b;for(b in p)if(p.hasOwnProperty(b)&&b in kA)return Po[A]=p[b];return A}var s0=xu("animationend"),gf=xu("animationiteration"),xf=xu("animationstart"),vf=xu("transitionrun"),jA=xu("transitionstart"),i0=xu("transitioncancel"),bf=xu("transitionend"),dd=new Map,BA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");BA.push("scrollEnd");function Wa(A,p){dd.set(A,p),vt(p,[A])}var ml=new WeakMap;function cn(A,p){if(typeof A=="object"&&A!==null){var b=ml.get(A);return b!==void 0?b:(p={value:A,source:p,stack:ma(p)},ml.set(A,p),p)}return{value:A,source:p,stack:ma(p)}}var un=[],pa=0,ns=0;function Hl(){for(var A=pa,p=ns=pa=0;p<A;){var b=un[p];un[p++]=null;var E=un[p];un[p++]=null;var M=un[p];un[p++]=null;var Z=un[p];if(un[p++]=null,E!==null&&M!==null){var he=E.pending;he===null?M.next=M:(M.next=he.next,he.next=M),E.pending=M}Z!==0&&ix(b,M,Z)}}function yf(A,p,b,E){un[pa++]=A,un[pa++]=p,un[pa++]=b,un[pa++]=E,ns|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function wf(A,p,b,E){return yf(A,p,b,E),TA(A)}function fd(A,p){return yf(A,null,null,p),TA(A)}function ix(A,p,b){A.lanes|=b;var E=A.alternate;E!==null&&(E.lanes|=b);for(var M=!1,Z=A.return;Z!==null;)Z.childLanes|=b,E=Z.alternate,E!==null&&(E.childLanes|=b),Z.tag===22&&(A=Z.stateNode,A===null||A._visibility&1||(M=!0)),A=Z,Z=Z.return;return A.tag===3?(Z=A.stateNode,M&&p!==null&&(M=31-bt(b),A=Z.hiddenUpdates,E=A[M],E===null?A[M]=[p]:E.push(p),p.lane=b|536870912),Z):null}function TA(A){if(50<Y1)throw Y1=0,c3=null,Error(n(185));for(var p=A.return;p!==null;)A=p,p=A.return;return A.tag===3?A.stateNode:null}var ii={};function Vl(A,p,b,E){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(A,p,b,E){return new Vl(A,p,b,E)}function o0(A){return A=A.prototype,!(!A||!A.isReactComponent)}function vu(A,p){var b=A.alternate;return b===null?(b=Hi(A.tag,p,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=p,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,p=A.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function lp(A,p){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=p,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,p=b.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A}function IA(A,p,b,E,M,Z){var he=0;if(E=A,typeof A=="function")o0(A)&&(he=1);else if(typeof A=="string")he=The(A,b,q.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case T:return A=Hi(31,b,p,M),A.elementType=T,A.lanes=Z,A;case g:return Ad(b.children,M,Z,p);case x:he=8,M|=24;break;case v:return A=Hi(12,b,p,M|2),A.elementType=v,A.lanes=Z,A;case j:return A=Hi(13,b,p,M),A.elementType=j,A.lanes=Z,A;case B:return A=Hi(19,b,p,M),A.elementType=B,A.lanes=Z,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case _:he=10;break e;case w:he=9;break e;case O:he=11;break e;case C:he=14;break e;case k:he=16,E=null;break e}he=29,b=Error(n(130,A===null?"null":typeof A,"")),E=null}return p=Hi(he,b,p,M),p.elementType=A,p.type=E,p.lanes=Z,p}function Ad(A,p,b,E){return A=Hi(7,A,E,p),A.lanes=b,A}function ox(A,p,b){return A=Hi(6,A,null,p),A.lanes=b,A}function cp(A,p,b){return p=Hi(4,A.children!==null?A.children:[],A.key,p),p.lanes=b,p.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},p}var Nf=[],hd=0,l0=null,lx=0,zl=[],pl=0,FA=null,md=1,pd="";function OA(A,p){Nf[hd++]=lx,Nf[hd++]=l0,l0=A,lx=p}function QN(A,p,b){zl[pl++]=md,zl[pl++]=pd,zl[pl++]=FA,FA=A;var E=md;A=pd;var M=32-bt(E)-1;E&=~(1<<M),b+=1;var Z=32-bt(p)+M;if(30<Z){var he=M-M%5;Z=(E&(1<<he)-1).toString(32),E>>=he,M-=he,md=1<<32-bt(p)+M|b<<M|E,pd=Z+A}else md=1<<Z|b<<M|E,pd=A}function up(A){A.return!==null&&(OA(A,1),QN(A,1,0))}function dp(A){for(;A===l0;)l0=Nf[--hd],Nf[hd]=null,lx=Nf[--hd],Nf[hd]=null;for(;A===FA;)FA=zl[--pl],zl[pl]=null,pd=zl[--pl],zl[pl]=null,md=zl[--pl],zl[pl]=null}var Us=null,Xa=null,On=!1,Ef=null,bu=!1,S1=Error(n(519));function DA(A){var p=Error(n(418,""));throw c0(cn(p,A)),S1}function HN(A){var p=A.stateNode,b=A.type,E=A.memoizedProps;switch(p[xn]=A,p[ln]=E,b){case"dialog":bn("cancel",p),bn("close",p);break;case"iframe":case"object":case"embed":bn("load",p);break;case"video":case"audio":for(b=0;b<Z1.length;b++)bn(Z1[b],p);break;case"source":bn("error",p);break;case"img":case"image":case"link":bn("error",p),bn("load",p);break;case"details":bn("toggle",p);break;case"input":bn("invalid",p),iu(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),su(p);break;case"select":bn("invalid",p);break;case"textarea":bn("invalid",p),lu(p,E.value,E.defaultValue,E.children),su(p)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||K7(p.textContent,b)?(E.popover!=null&&(bn("beforetoggle",p),bn("toggle",p)),E.onScroll!=null&&bn("scroll",p),E.onScrollEnd!=null&&bn("scrollend",p),E.onClick!=null&&(p.onclick=EE),p=!0):p=!1,p||DA(A)}function gd(A){for(Us=A.return;Us;)switch(Us.tag){case 5:case 13:bu=!1;return;case 27:case 3:bu=!0;return;default:Us=Us.return}}function uo(A){if(A!==Us)return!1;if(!On)return gd(A),On=!0,!1;var p=A.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||C3(A.type,A.memoizedProps)),b=!b),b&&Xa&&DA(A),gd(A),p===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,p=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(p===0){Xa=Cd(A.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;A=A.nextSibling}Xa=null}}else p===27?(p=Xa,_0(A.type)?(A=j3,j3=null,Xa=A):Xa=p):Xa=Us?Cd(A.stateNode.nextSibling):null;return!0}function gl(){Xa=Us=null,On=!1}function VN(){var A=Ef;return A!==null&&(ql===null?ql=A:ql.push.apply(ql,A),Ef=null),A}function c0(A){Ef===null?Ef=[A]:Ef.push(A)}var yu=H(null),oi=null,xd=null;function Cf(A,p,b){D(yu,p._currentValue),p._currentValue=b}function wu(A){A._currentValue=yu.current,F(yu)}function cx(A,p,b){for(;A!==null;){var E=A.alternate;if((A.childLanes&p)!==p?(A.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),A===b)break;A=A.return}}function ux(A,p,b,E){var M=A.child;for(M!==null&&(M.return=A);M!==null;){var Z=M.dependencies;if(Z!==null){var he=M.child;Z=Z.firstContext;e:for(;Z!==null;){var Ce=Z;Z=M;for(var Ve=0;Ve<p.length;Ve++)if(Ce.context===p[Ve]){Z.lanes|=b,Ce=Z.alternate,Ce!==null&&(Ce.lanes|=b),cx(Z.return,b,A),E||(he=null);break e}Z=Ce.next}}else if(M.tag===18){if(he=M.return,he===null)throw Error(n(341));he.lanes|=b,Z=he.alternate,Z!==null&&(Z.lanes|=b),cx(he,b,A),he=null}else he=M.child;if(he!==null)he.return=M;else for(he=M;he!==null;){if(he===A){he=null;break}if(M=he.sibling,M!==null){M.return=he.return,he=M;break}he=he.return}M=he}}function u0(A,p,b,E){A=null;for(var M=p,Z=!1;M!==null;){if(!Z){if((M.flags&524288)!==0)Z=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var he=M.alternate;if(he===null)throw Error(n(387));if(he=he.memoizedProps,he!==null){var Ce=M.type;si(M.pendingProps.value,he.value)||(A!==null?A.push(Ce):A=[Ce])}}else if(M===ne.current){if(he=M.alternate,he===null)throw Error(n(387));he.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(A!==null?A.push(sy):A=[sy])}M=M.return}A!==null&&ux(p,A,b,E),p.flags|=262144}function dx(A){for(A=A.firstContext;A!==null;){if(!si(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Nu(A){oi=A,xd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Qs(A){return fx(oi,A)}function _f(A,p){return oi===null&&Nu(A),fx(A,p)}function fx(A,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},xd===null){if(A===null)throw Error(n(308));xd=p,A.dependencies={lanes:0,firstContext:p},A.flags|=524288}else xd=xd.next=p;return b}var Oj=typeof AbortController<"u"?AbortController:function(){var A=[],p=this.signal={aborted:!1,addEventListener:function(b,E){A.push(E)}};this.abort=function(){p.aborted=!0,A.forEach(function(b){return b()})}},zN=e.unstable_scheduleCallback,Dj=e.unstable_NormalPriority,Hs={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function k1(){return{controller:new Oj,data:new Map,refCount:0}}function fp(A){A.refCount--,A.refCount===0&&zN(Dj,function(){A.controller.abort()})}var Ap=null,j1=0,PA=0,vd=null;function Pj(A,p){if(Ap===null){var b=Ap=[];j1=0,PA=p3(),vd={status:"pending",value:void 0,then:function(E){b.push(E)}}}return j1++,p.then($N,$N),p}function $N(){if(--j1===0&&Ap!==null){vd!==null&&(vd.status="fulfilled");var A=Ap;Ap=null,PA=0,vd=null;for(var p=0;p<A.length;p++)(0,A[p])()}}function GN(A,p){var b=[],E={status:"pending",value:null,reason:null,then:function(M){b.push(M)}};return A.then(function(){E.status="fulfilled",E.value=p;for(var M=0;M<b.length;M++)(0,b[M])(p)},function(M){for(E.status="rejected",E.reason=M,M=0;M<b.length;M++)(0,b[M])(void 0)}),E}var I=z.S;z.S=function(A,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Pj(A,p),I!==null&&I(A,p)};var V=H(null);function re(){var A=V.current;return A!==null?A:Ia.pooledCache}function le(A,p){p===null?D(V,V.current):D(V,p.pool)}function pe(){var A=re();return A===null?null:{parent:Hs._currentValue,pool:A}}var ve=Error(n(460)),be=Error(n(474)),Ne=Error(n(542)),je={then:function(){}};function Pe(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ke(){}function ct(A,p,b){switch(b=A[b],b===void 0?A.push(p):b!==p&&(p.then(Ke,Ke),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Tt(A),A;default:if(typeof p.status=="string")p.then(Ke,Ke);else{if(A=Ia,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=p,A.status="pending",A.then(function(E){if(p.status==="pending"){var M=p;M.status="fulfilled",M.value=E}},function(E){if(p.status==="pending"){var M=p;M.status="rejected",M.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Tt(A),A}throw it=p,ve}}var it=null;function rt(){if(it===null)throw Error(n(459));var A=it;return it=null,A}function Tt(A){if(A===ve||A===Ne)throw Error(n(483))}var gt=!1;function We(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Je(A,p){A=A.updateQueue,p.updateQueue===A&&(p.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Ct(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function It(A,p,b){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(la&2)!==0){var M=E.pending;return M===null?p.next=p:(p.next=M.next,M.next=p),E.pending=p,p=TA(A),ix(A,null,b),p}return yf(A,E,p,b),TA(A)}function St(A,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,Xr(A,b)}}function Zt(A,p){var b=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var M=null,Z=null;if(b=b.firstBaseUpdate,b!==null){do{var he={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};Z===null?M=Z=he:Z=Z.next=he,b=b.next}while(b!==null);Z===null?M=Z=p:Z=Z.next=p}else M=Z=p;b={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:Z,shared:E.shared,callbacks:E.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=p:A.next=p,b.lastBaseUpdate=p}var Gt=!1;function hr(){if(Gt){var A=vd;if(A!==null)throw A}}function Kt(A,p,b,E){Gt=!1;var M=A.updateQueue;gt=!1;var Z=M.firstBaseUpdate,he=M.lastBaseUpdate,Ce=M.shared.pending;if(Ce!==null){M.shared.pending=null;var Ve=Ce,dt=Ve.next;Ve.next=null,he===null?Z=dt:he.next=dt,he=Ve;var _t=A.alternate;_t!==null&&(_t=_t.updateQueue,Ce=_t.lastBaseUpdate,Ce!==he&&(Ce===null?_t.firstBaseUpdate=dt:Ce.next=dt,_t.lastBaseUpdate=Ve))}if(Z!==null){var Ft=M.baseState;he=0,_t=dt=Ve=null,Ce=Z;do{var ht=Ce.lane&-536870913,pt=ht!==Ce.lane;if(pt?(Tn&ht)===ht:(E&ht)===ht){ht!==0&&ht===PA&&(Gt=!0),_t!==null&&(_t=_t.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var Qr=A,kr=Ce;ht=p;var xa=b;switch(kr.tag){case 1:if(Qr=kr.payload,typeof Qr=="function"){Ft=Qr.call(xa,Ft,ht);break e}Ft=Qr;break e;case 3:Qr.flags=Qr.flags&-65537|128;case 0:if(Qr=kr.payload,ht=typeof Qr=="function"?Qr.call(xa,Ft,ht):Qr,ht==null)break e;Ft=d({},Ft,ht);break e;case 2:gt=!0}}ht=Ce.callback,ht!==null&&(A.flags|=64,pt&&(A.flags|=8192),pt=M.callbacks,pt===null?M.callbacks=[ht]:pt.push(ht))}else pt={lane:ht,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},_t===null?(dt=_t=pt,Ve=Ft):_t=_t.next=pt,he|=ht;if(Ce=Ce.next,Ce===null){if(Ce=M.shared.pending,Ce===null)break;pt=Ce,Ce=pt.next,pt.next=null,M.lastBaseUpdate=pt,M.shared.pending=null}}while(!0);_t===null&&(Ve=Ft),M.baseState=Ve,M.firstBaseUpdate=dt,M.lastBaseUpdate=_t,Z===null&&(M.shared.lanes=0),w0|=he,A.lanes=he,A.memoizedState=Ft}}function jn(A,p){if(typeof A!="function")throw Error(n(191,A));A.call(p)}function Un(A,p){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)jn(b[A],p)}var sn=H(null),en=H(0);function ea(A,p){A=GA,D(en,A),D(sn,p),GA=A|p.baseLanes}function Qn(){D(en,GA),D(sn,sn.current)}function zr(){GA=en.current,F(sn),F(en)}var oa=0,Er=null,Or=null,kn=null,Bn=!1,li=!1,Vs=!1,as=0,ss=0,ys=null,$l=0;function Hn(){throw Error(n(321))}function ws(A,p){if(p===null)return!1;for(var b=0;b<p.length&&b<A.length;b++)if(!si(A[b],p[b]))return!1;return!0}function Ec(A,p,b,E,M,Z){return oa=Z,Er=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,z.H=A===null||A.memoizedState===null?kU:jU,Vs=!1,Z=b(E,M),Vs=!1,li&&(Z=RA(p,b,E,M)),Sf(A),Z}function Sf(A){z.H=aE;var p=Or!==null&&Or.next!==null;if(oa=0,kn=Or=Er=null,Bn=!1,ss=0,ys=null,p)throw Error(n(300));A===null||Vi||(A=A.dependencies,A!==null&&dx(A)&&(Vi=!0))}function RA(A,p,b,E){Er=A;var M=0;do{if(li&&(ys=null),ss=0,li=!1,25<=M)throw Error(n(301));if(M+=1,kn=Or=null,A.updateQueue!=null){var Z=A.updateQueue;Z.lastEffect=null,Z.events=null,Z.stores=null,Z.memoCache!=null&&(Z.memoCache.index=0)}z.H=HAe,Z=p(b,E)}while(li);return Z}function kf(){var A=z.H,p=A.useState()[0];return p=typeof p.then=="function"?jf(p):p,A=A.useState()[0],(Or!==null?Or.memoizedState:null)!==A&&(Er.flags|=1024),p}function Ta(){var A=as!==0;return as=0,A}function hp(A,p,b){p.updateQueue=A.updateQueue,p.flags&=-2053,A.lanes&=~b}function Ax(A){if(Bn){for(A=A.memoizedState;A!==null;){var p=A.queue;p!==null&&(p.pending=null),A=A.next}Bn=!1}oa=0,kn=Or=Er=null,li=!1,ss=as=0,ys=null}function fo(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Er.memoizedState=kn=A:kn=kn.next=A,kn}function Ra(){if(Or===null){var A=Er.alternate;A=A!==null?A.memoizedState:null}else A=Or.next;var p=kn===null?Er.memoizedState:kn.next;if(p!==null)kn=p,Or=A;else{if(A===null)throw Er.alternate===null?Error(n(467)):Error(n(310));Or=A,A={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},kn===null?Er.memoizedState=kn=A:kn=kn.next=A}return kn}function LA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jf(A){var p=ss;return ss+=1,ys===null&&(ys=[]),A=ct(ys,A,p),p=Er,(kn===null?p.memoizedState:kn.next)===null&&(p=p.alternate,z.H=p===null||p.memoizedState===null?kU:jU),A}function Ro(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return jf(A);if(A.$$typeof===_)return Qs(A)}throw Error(n(438,String(A)))}function Bf(A){var p=null,b=Er.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=Er.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(M){return M.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=LA(),Er.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(A),E=0;E<A;E++)b[E]=L;return p.index++,b}function Lo(A,p){return typeof p=="function"?p(A):p}function mp(A){var p=Ra();return d0(p,Or,A)}function d0(A,p,b){var E=A.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=b;var M=A.baseQueue,Z=E.pending;if(Z!==null){if(M!==null){var he=M.next;M.next=Z.next,Z.next=he}p.baseQueue=M=Z,E.pending=null}if(Z=A.baseState,M===null)A.memoizedState=Z;else{p=M.next;var Ce=he=null,Ve=null,dt=p,_t=!1;do{var Ft=dt.lane&-536870913;if(Ft!==dt.lane?(Tn&Ft)===Ft:(oa&Ft)===Ft){var ht=dt.revertLane;if(ht===0)Ve!==null&&(Ve=Ve.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Ft===PA&&(_t=!0);else if((oa&ht)===ht){dt=dt.next,ht===PA&&(_t=!0);continue}else Ft={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ve===null?(Ce=Ve=Ft,he=Z):Ve=Ve.next=Ft,Er.lanes|=ht,w0|=ht;Ft=dt.action,Vs&&b(Z,Ft),Z=dt.hasEagerState?dt.eagerState:b(Z,Ft)}else ht={lane:Ft,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ve===null?(Ce=Ve=ht,he=Z):Ve=Ve.next=ht,Er.lanes|=Ft,w0|=Ft;dt=dt.next}while(dt!==null&&dt!==p);if(Ve===null?he=Z:Ve.next=Ce,!si(Z,A.memoizedState)&&(Vi=!0,_t&&(b=vd,b!==null)))throw b;A.memoizedState=Z,A.baseState=he,A.baseQueue=Ve,E.lastRenderedState=Z}return M===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function hx(A){var p=Ra(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=A;var E=b.dispatch,M=b.pending,Z=p.memoizedState;if(M!==null){b.pending=null;var he=M=M.next;do Z=A(Z,he.action),he=he.next;while(he!==M);si(Z,p.memoizedState)||(Vi=!0),p.memoizedState=Z,p.baseQueue===null&&(p.baseState=Z),b.lastRenderedState=Z}return[Z,E]}function pp(A,p,b){var E=Er,M=Ra(),Z=On;if(Z){if(b===void 0)throw Error(n(407));b=b()}else b=p();var he=!si((Or||M).memoizedState,b);he&&(M.memoizedState=b,Vi=!0),M=M.queue;var Ce=f0.bind(null,E,M,A);if(m0(2048,8,Ce,[A]),M.getSnapshot!==p||he||kn!==null&&kn.memoizedState.tag&1){if(E.flags|=2048,yd(9,bp(),gp.bind(null,E,M,b,p),null),Ia===null)throw Error(n(349));Z||(oa&124)!==0||mx(E,p,b)}return b}function mx(A,p,b){A.flags|=16384,A={getSnapshot:p,value:b},p=Er.updateQueue,p===null?(p=LA(),Er.updateQueue=p,p.stores=[A]):(b=p.stores,b===null?p.stores=[A]:b.push(A))}function gp(A,p,b,E){p.value=b,p.getSnapshot=E,qN(p)&&KN(A)}function f0(A,p,b){return b(function(){qN(p)&&KN(A)})}function qN(A){var p=A.getSnapshot;A=A.value;try{var b=p();return!si(A,b)}catch{return!0}}function KN(A){var p=fd(A,2);p!==null&&Bc(p,A,2)}function xp(A){var p=fo();if(typeof A=="function"){var b=A;if(A=b(),Vs){nt(!0);try{b()}finally{nt(!1)}}}return p.memoizedState=p.baseState=A,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:A},p}function bd(A,p,b,E){return A.baseState=b,d0(A,Or,typeof E=="function"?E:Lo)}function Rj(A,p,b,E,M){if(nE(A))throw Error(n(485));if(A=p.action,A!==null){var Z={payload:M,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(he){Z.listeners.push(he)}};z.T!==null?b(!0):Z.isTransition=!1,E(Z),b=p.pending,b===null?(Z.next=p.pending=Z,WN(p,Z)):(Z.next=b.next,p.pending=b.next=Z)}}function WN(A,p){var b=p.action,E=p.payload,M=A.state;if(p.isTransition){var Z=z.T,he={};z.T=he;try{var Ce=b(M,E),Ve=z.S;Ve!==null&&Ve(he,Ce),XN(A,p,Ce)}catch(dt){A0(A,p,dt)}finally{z.T=Z}}else try{Z=b(M,E),XN(A,p,Z)}catch(dt){A0(A,p,dt)}}function XN(A,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){B1(A,p,E)},function(E){return A0(A,p,E)}):B1(A,p,b)}function B1(A,p,b){p.status="fulfilled",p.value=b,T1(p),A.state=b,p=A.pending,p!==null&&(b=p.next,b===p?A.pending=null:(b=b.next,p.next=b,WN(A,b)))}function A0(A,p,b){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,T1(p),p=p.next;while(p!==E)}A.action=null}function T1(A){A=A.listeners;for(var p=0;p<A.length;p++)(0,A[p])()}function I1(A,p){return p}function vp(A,p){if(On){var b=Ia.formState;if(b!==null){e:{var E=Er;if(On){if(Xa){t:{for(var M=Xa,Z=bu;M.nodeType!==8;){if(!Z){M=null;break t}if(M=Cd(M.nextSibling),M===null){M=null;break t}}Z=M.data,M=Z==="F!"||Z==="F"?M:null}if(M){Xa=Cd(M.nextSibling),E=M.data==="F!";break e}}DA(E)}E=!1}E&&(p=b[0])}}return b=fo(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I1,lastRenderedState:p},b.queue=E,b=CU.bind(null,Er,E),E.dispatch=b,E=xp(!1),Z=Lj.bind(null,Er,!1,E.queue),E=fo(),M={state:p,dispatch:null,action:A,pending:null},E.queue=M,b=Rj.bind(null,Er,M,Z,b),M.dispatch=b,E.memoizedState=A,[p,b,!1]}function px(A){var p=Ra();return h0(p,Or,A)}function h0(A,p,b){if(p=d0(A,p,I1)[0],A=mp(Lo)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=jf(p)}catch(he){throw he===ve?Ne:he}else E=p;p=Ra();var M=p.queue,Z=M.dispatch;return b!==p.memoizedState&&(Er.flags|=2048,yd(9,bp(),YN.bind(null,M,b),null)),[E,Z,A]}function YN(A,p){A.action=p}function JN(A){var p=Ra(),b=Or;if(b!==null)return h0(p,b,A);Ra(),p=p.memoizedState,b=Ra();var E=b.queue.dispatch;return b.memoizedState=A,[p,E,!1]}function yd(A,p,b,E){return A={tag:A,create:b,deps:E,inst:p,next:null},p=Er.updateQueue,p===null&&(p=LA(),Er.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=A.next=A:(E=b.next,b.next=A,A.next=E,p.lastEffect=A),A}function bp(){return{destroy:void 0,resource:void 0}}function gx(){return Ra().memoizedState}function Cc(A,p,b,E){var M=fo();E=E===void 0?null:E,Er.flags|=A,M.memoizedState=yd(1|p,bp(),b,E)}function m0(A,p,b,E){var M=Ra();E=E===void 0?null:E;var Z=M.memoizedState.inst;Or!==null&&E!==null&&ws(E,Or.memoizedState.deps)?M.memoizedState=yd(p,Z,b,E):(Er.flags|=A,M.memoizedState=yd(1|p,Z,b,E))}function F1(A,p){Cc(8390656,8,A,p)}function ZN(A,p){m0(2048,8,A,p)}function O1(A,p){return m0(4,2,A,p)}function MA(A,p){return m0(4,4,A,p)}function eE(A,p){if(typeof p=="function"){A=A();var b=p(A);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return A=A(),p.current=A,function(){p.current=null}}function D1(A,p,b){b=b!=null?b.concat([A]):null,m0(4,4,eE.bind(null,p,A),b)}function P1(){}function R1(A,p){var b=Ra();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&ws(p,E[1])?E[0]:(b.memoizedState=[A,p],A)}function tE(A,p){var b=Ra();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&ws(p,E[1]))return E[0];if(E=A(),Vs){nt(!0);try{A()}finally{nt(!1)}}return b.memoizedState=[E,p],E}function UA(A,p,b){return b===void 0||(oa&1073741824)!==0?A.memoizedState=p:(A.memoizedState=b,A=y7(),Er.lanes|=A,w0|=A,b)}function xx(A,p,b,E){return si(b,p)?b:sn.current!==null?(A=UA(A,b,E),si(A,p)||(Vi=!0),A):(oa&42)===0?(Vi=!0,A.memoizedState=b):(A=y7(),Er.lanes|=A,w0|=A,p)}function yp(A,p,b,E,M){var Z=W.p;W.p=Z!==0&&8>Z?Z:8;var he=z.T,Ce={};z.T=Ce,Lj(A,!1,p,b);try{var Ve=M(),dt=z.S;if(dt!==null&&dt(Ce,Ve),Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var _t=GN(Ve,E);Q1(A,p,_t,jc(A))}else Q1(A,p,E,jc(A))}catch(Ft){Q1(A,p,{then:function(){},status:"rejected",reason:Ft},jc())}finally{W.p=Z,z.T=he}}function wd(){}function Eu(A,p,b,E){if(A.tag!==5)throw Error(n(476));var M=Nd(A).queue;yp(A,M,p,G,b===null?wd:function(){return wp(A),b(E)})}function Nd(A){var p=A.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:G},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:b},next:null},A.memoizedState=p,A=A.alternate,A!==null&&(A.memoizedState=p),p}function wp(A){var p=Nd(A).next.queue;Q1(A,p,{},jc())}function Np(){return Qs(sy)}function L1(){return Ra().memoizedState}function rE(){return Ra().memoizedState}function M1(A){for(var p=A.return;p!==null;){switch(p.tag){case 24:case 3:var b=jc();A=Ct(b);var E=It(p,A,b);E!==null&&(Bc(E,p,b),St(E,p,b)),p={cache:k1()},A.payload=p;return}p=p.return}}function U1(A,p,b){var E=jc();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},nE(A)?_U(p,b):(b=wf(A,p,b,E),b!==null&&(Bc(b,A,E),SU(b,p,E)))}function CU(A,p,b){var E=jc();Q1(A,p,b,E)}function Q1(A,p,b,E){var M={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(nE(A))_U(p,M);else{var Z=A.alternate;if(A.lanes===0&&(Z===null||Z.lanes===0)&&(Z=p.lastRenderedReducer,Z!==null))try{var he=p.lastRenderedState,Ce=Z(he,b);if(M.hasEagerState=!0,M.eagerState=Ce,si(Ce,he))return yf(A,p,M,0),Ia===null&&Hl(),!1}catch{}finally{}if(b=wf(A,p,M,E),b!==null)return Bc(b,A,E),SU(b,p,E),!0}return!1}function Lj(A,p,b,E){if(E={lane:2,revertLane:p3(),action:E,hasEagerState:!1,eagerState:null,next:null},nE(A)){if(p)throw Error(n(479))}else p=wf(A,b,E,2),p!==null&&Bc(p,A,2)}function nE(A){var p=A.alternate;return A===Er||p!==null&&p===Er}function _U(A,p){li=Bn=!0;var b=A.pending;b===null?p.next=p:(p.next=b.next,b.next=p),A.pending=p}function SU(A,p,b){if((b&4194048)!==0){var E=p.lanes;E&=A.pendingLanes,b|=E,p.lanes=b,Xr(A,b)}}var aE={readContext:Qs,use:Ro,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn,useHostTransitionStatus:Hn,useFormState:Hn,useActionState:Hn,useOptimistic:Hn,useMemoCache:Hn,useCacheRefresh:Hn},kU={readContext:Qs,use:Ro,useCallback:function(A,p){return fo().memoizedState=[A,p===void 0?null:p],A},useContext:Qs,useEffect:F1,useImperativeHandle:function(A,p,b){b=b!=null?b.concat([A]):null,Cc(4194308,4,eE.bind(null,p,A),b)},useLayoutEffect:function(A,p){return Cc(4194308,4,A,p)},useInsertionEffect:function(A,p){Cc(4,2,A,p)},useMemo:function(A,p){var b=fo();p=p===void 0?null:p;var E=A();if(Vs){nt(!0);try{A()}finally{nt(!1)}}return b.memoizedState=[E,p],E},useReducer:function(A,p,b){var E=fo();if(b!==void 0){var M=b(p);if(Vs){nt(!0);try{b(p)}finally{nt(!1)}}}else M=p;return E.memoizedState=E.baseState=M,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:M},E.queue=A,A=A.dispatch=U1.bind(null,Er,A),[E.memoizedState,A]},useRef:function(A){var p=fo();return A={current:A},p.memoizedState=A},useState:function(A){A=xp(A);var p=A.queue,b=CU.bind(null,Er,p);return p.dispatch=b,[A.memoizedState,b]},useDebugValue:P1,useDeferredValue:function(A,p){var b=fo();return UA(b,A,p)},useTransition:function(){var A=xp(!1);return A=yp.bind(null,Er,A.queue,!0,!1),fo().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,p,b){var E=Er,M=fo();if(On){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Ia===null)throw Error(n(349));(Tn&124)!==0||mx(E,p,b)}M.memoizedState=b;var Z={value:b,getSnapshot:p};return M.queue=Z,F1(f0.bind(null,E,Z,A),[A]),E.flags|=2048,yd(9,bp(),gp.bind(null,E,Z,b,p),null),b},useId:function(){var A=fo(),p=Ia.identifierPrefix;if(On){var b=pd,E=md;b=(E&~(1<<32-bt(E)-1)).toString(32)+b,p="«"+p+"R"+b,b=as++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=$l++,p="«"+p+"r"+b.toString(32)+"»";return A.memoizedState=p},useHostTransitionStatus:Np,useFormState:vp,useActionState:vp,useOptimistic:function(A){var p=fo();p.memoizedState=p.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=Lj.bind(null,Er,!0,b),b.dispatch=p,[A,p]},useMemoCache:Bf,useCacheRefresh:function(){return fo().memoizedState=M1.bind(null,Er)}},jU={readContext:Qs,use:Ro,useCallback:R1,useContext:Qs,useEffect:ZN,useImperativeHandle:D1,useInsertionEffect:O1,useLayoutEffect:MA,useMemo:tE,useReducer:mp,useRef:gx,useState:function(){return mp(Lo)},useDebugValue:P1,useDeferredValue:function(A,p){var b=Ra();return xx(b,Or.memoizedState,A,p)},useTransition:function(){var A=mp(Lo)[0],p=Ra().memoizedState;return[typeof A=="boolean"?A:jf(A),p]},useSyncExternalStore:pp,useId:L1,useHostTransitionStatus:Np,useFormState:px,useActionState:px,useOptimistic:function(A,p){var b=Ra();return bd(b,Or,A,p)},useMemoCache:Bf,useCacheRefresh:rE},HAe={readContext:Qs,use:Ro,useCallback:R1,useContext:Qs,useEffect:ZN,useImperativeHandle:D1,useInsertionEffect:O1,useLayoutEffect:MA,useMemo:tE,useReducer:hx,useRef:gx,useState:function(){return hx(Lo)},useDebugValue:P1,useDeferredValue:function(A,p){var b=Ra();return Or===null?UA(b,A,p):xx(b,Or.memoizedState,A,p)},useTransition:function(){var A=hx(Lo)[0],p=Ra().memoizedState;return[typeof A=="boolean"?A:jf(A),p]},useSyncExternalStore:pp,useId:L1,useHostTransitionStatus:Np,useFormState:JN,useActionState:JN,useOptimistic:function(A,p){var b=Ra();return Or!==null?bd(b,Or,A,p):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:Bf,useCacheRefresh:rE},vx=null,H1=0;function sE(A){var p=H1;return H1+=1,vx===null&&(vx=[]),ct(vx,A,p)}function V1(A,p){p=p.props.ref,A.ref=p!==void 0?p:null}function iE(A,p){throw p.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(p),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":A)))}function BU(A){var p=A._init;return p(A._payload)}function TU(A){function p(at,Xe){if(A){var lt=at.deletions;lt===null?(at.deletions=[Xe],at.flags|=16):lt.push(Xe)}}function b(at,Xe){if(!A)return null;for(;Xe!==null;)p(at,Xe),Xe=Xe.sibling;return null}function E(at){for(var Xe=new Map;at!==null;)at.key!==null?Xe.set(at.key,at):Xe.set(at.index,at),at=at.sibling;return Xe}function M(at,Xe){return at=vu(at,Xe),at.index=0,at.sibling=null,at}function Z(at,Xe,lt){return at.index=lt,A?(lt=at.alternate,lt!==null?(lt=lt.index,lt<Xe?(at.flags|=67108866,Xe):lt):(at.flags|=67108866,Xe)):(at.flags|=1048576,Xe)}function he(at){return A&&at.alternate===null&&(at.flags|=67108866),at}function Ce(at,Xe,lt,jt){return Xe===null||Xe.tag!==6?(Xe=ox(lt,at.mode,jt),Xe.return=at,Xe):(Xe=M(Xe,lt),Xe.return=at,Xe)}function Ve(at,Xe,lt,jt){var cr=lt.type;return cr===g?_t(at,Xe,lt.props.children,jt,lt.key):Xe!==null&&(Xe.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===k&&BU(cr)===Xe.type)?(Xe=M(Xe,lt.props),V1(Xe,lt),Xe.return=at,Xe):(Xe=IA(lt.type,lt.key,lt.props,null,at.mode,jt),V1(Xe,lt),Xe.return=at,Xe)}function dt(at,Xe,lt,jt){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==lt.containerInfo||Xe.stateNode.implementation!==lt.implementation?(Xe=cp(lt,at.mode,jt),Xe.return=at,Xe):(Xe=M(Xe,lt.children||[]),Xe.return=at,Xe)}function _t(at,Xe,lt,jt,cr){return Xe===null||Xe.tag!==7?(Xe=Ad(lt,at.mode,jt,cr),Xe.return=at,Xe):(Xe=M(Xe,lt),Xe.return=at,Xe)}function Ft(at,Xe,lt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Xe=ox(""+Xe,at.mode,lt),Xe.return=at,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case h:return lt=IA(Xe.type,Xe.key,Xe.props,null,at.mode,lt),V1(lt,Xe),lt.return=at,lt;case m:return Xe=cp(Xe,at.mode,lt),Xe.return=at,Xe;case k:var jt=Xe._init;return Xe=jt(Xe._payload),Ft(at,Xe,lt)}if(X(Xe)||S(Xe))return Xe=Ad(Xe,at.mode,lt,null),Xe.return=at,Xe;if(typeof Xe.then=="function")return Ft(at,sE(Xe),lt);if(Xe.$$typeof===_)return Ft(at,_f(at,Xe),lt);iE(at,Xe)}return null}function ht(at,Xe,lt,jt){var cr=Xe!==null?Xe.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return cr!==null?null:Ce(at,Xe,""+lt,jt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case h:return lt.key===cr?Ve(at,Xe,lt,jt):null;case m:return lt.key===cr?dt(at,Xe,lt,jt):null;case k:return cr=lt._init,lt=cr(lt._payload),ht(at,Xe,lt,jt)}if(X(lt)||S(lt))return cr!==null?null:_t(at,Xe,lt,jt,null);if(typeof lt.then=="function")return ht(at,Xe,sE(lt),jt);if(lt.$$typeof===_)return ht(at,Xe,_f(at,lt),jt);iE(at,lt)}return null}function pt(at,Xe,lt,jt,cr){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return at=at.get(lt)||null,Ce(Xe,at,""+jt,cr);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case h:return at=at.get(jt.key===null?lt:jt.key)||null,Ve(Xe,at,jt,cr);case m:return at=at.get(jt.key===null?lt:jt.key)||null,dt(Xe,at,jt,cr);case k:var mn=jt._init;return jt=mn(jt._payload),pt(at,Xe,lt,jt,cr)}if(X(jt)||S(jt))return at=at.get(lt)||null,_t(Xe,at,jt,cr,null);if(typeof jt.then=="function")return pt(at,Xe,lt,sE(jt),cr);if(jt.$$typeof===_)return pt(at,Xe,lt,_f(Xe,jt),cr);iE(Xe,jt)}return null}function Qr(at,Xe,lt,jt){for(var cr=null,mn=null,gr=Xe,Br=Xe=0,$i=null;gr!==null&&Br<lt.length;Br++){gr.index>Br?($i=gr,gr=null):$i=gr.sibling;var Vn=ht(at,gr,lt[Br],jt);if(Vn===null){gr===null&&(gr=$i);break}A&&gr&&Vn.alternate===null&&p(at,gr),Xe=Z(Vn,Xe,Br),mn===null?cr=Vn:mn.sibling=Vn,mn=Vn,gr=$i}if(Br===lt.length)return b(at,gr),On&&OA(at,Br),cr;if(gr===null){for(;Br<lt.length;Br++)gr=Ft(at,lt[Br],jt),gr!==null&&(Xe=Z(gr,Xe,Br),mn===null?cr=gr:mn.sibling=gr,mn=gr);return On&&OA(at,Br),cr}for(gr=E(gr);Br<lt.length;Br++)$i=pt(gr,at,Br,lt[Br],jt),$i!==null&&(A&&$i.alternate!==null&&gr.delete($i.key===null?Br:$i.key),Xe=Z($i,Xe,Br),mn===null?cr=$i:mn.sibling=$i,mn=$i);return A&&gr.forEach(function(T0){return p(at,T0)}),On&&OA(at,Br),cr}function kr(at,Xe,lt,jt){if(lt==null)throw Error(n(151));for(var cr=null,mn=null,gr=Xe,Br=Xe=0,$i=null,Vn=lt.next();gr!==null&&!Vn.done;Br++,Vn=lt.next()){gr.index>Br?($i=gr,gr=null):$i=gr.sibling;var T0=ht(at,gr,Vn.value,jt);if(T0===null){gr===null&&(gr=$i);break}A&&gr&&T0.alternate===null&&p(at,gr),Xe=Z(T0,Xe,Br),mn===null?cr=T0:mn.sibling=T0,mn=T0,gr=$i}if(Vn.done)return b(at,gr),On&&OA(at,Br),cr;if(gr===null){for(;!Vn.done;Br++,Vn=lt.next())Vn=Ft(at,Vn.value,jt),Vn!==null&&(Xe=Z(Vn,Xe,Br),mn===null?cr=Vn:mn.sibling=Vn,mn=Vn);return On&&OA(at,Br),cr}for(gr=E(gr);!Vn.done;Br++,Vn=lt.next())Vn=pt(gr,at,Br,Vn.value,jt),Vn!==null&&(A&&Vn.alternate!==null&&gr.delete(Vn.key===null?Br:Vn.key),Xe=Z(Vn,Xe,Br),mn===null?cr=Vn:mn.sibling=Vn,mn=Vn);return A&&gr.forEach(function(Vhe){return p(at,Vhe)}),On&&OA(at,Br),cr}function xa(at,Xe,lt,jt){if(typeof lt=="object"&&lt!==null&&lt.type===g&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case h:e:{for(var cr=lt.key;Xe!==null;){if(Xe.key===cr){if(cr=lt.type,cr===g){if(Xe.tag===7){b(at,Xe.sibling),jt=M(Xe,lt.props.children),jt.return=at,at=jt;break e}}else if(Xe.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===k&&BU(cr)===Xe.type){b(at,Xe.sibling),jt=M(Xe,lt.props),V1(jt,lt),jt.return=at,at=jt;break e}b(at,Xe);break}else p(at,Xe);Xe=Xe.sibling}lt.type===g?(jt=Ad(lt.props.children,at.mode,jt,lt.key),jt.return=at,at=jt):(jt=IA(lt.type,lt.key,lt.props,null,at.mode,jt),V1(jt,lt),jt.return=at,at=jt)}return he(at);case m:e:{for(cr=lt.key;Xe!==null;){if(Xe.key===cr)if(Xe.tag===4&&Xe.stateNode.containerInfo===lt.containerInfo&&Xe.stateNode.implementation===lt.implementation){b(at,Xe.sibling),jt=M(Xe,lt.children||[]),jt.return=at,at=jt;break e}else{b(at,Xe);break}else p(at,Xe);Xe=Xe.sibling}jt=cp(lt,at.mode,jt),jt.return=at,at=jt}return he(at);case k:return cr=lt._init,lt=cr(lt._payload),xa(at,Xe,lt,jt)}if(X(lt))return Qr(at,Xe,lt,jt);if(S(lt)){if(cr=S(lt),typeof cr!="function")throw Error(n(150));return lt=cr.call(lt),kr(at,Xe,lt,jt)}if(typeof lt.then=="function")return xa(at,Xe,sE(lt),jt);if(lt.$$typeof===_)return xa(at,Xe,_f(at,lt),jt);iE(at,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Xe!==null&&Xe.tag===6?(b(at,Xe.sibling),jt=M(Xe,lt),jt.return=at,at=jt):(b(at,Xe),jt=ox(lt,at.mode,jt),jt.return=at,at=jt),he(at)):b(at,Xe)}return function(at,Xe,lt,jt){try{H1=0;var cr=xa(at,Xe,lt,jt);return vx=null,cr}catch(gr){if(gr===ve||gr===Ne)throw gr;var mn=Hi(29,gr,null,at.mode);return mn.lanes=jt,mn.return=at,mn}finally{}}}var bx=TU(!0),IU=TU(!1),Cu=H(null),Tf=null;function p0(A){var p=A.alternate;D(Si,Si.current&1),D(Cu,A),Tf===null&&(p===null||sn.current!==null||p.memoizedState!==null)&&(Tf=A)}function FU(A){if(A.tag===22){if(D(Si,Si.current),D(Cu,A),Tf===null){var p=A.alternate;p!==null&&p.memoizedState!==null&&(Tf=A)}}else g0()}function g0(){D(Si,Si.current),D(Cu,Cu.current)}function QA(A){F(Cu),Tf===A&&(Tf=null),F(Si)}var Si=H(0);function oE(A){for(var p=A;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||k3(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Mj(A,p,b,E){p=A.memoizedState,b=b(E,p),b=b==null?p:d({},p,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var Uj={enqueueSetState:function(A,p,b){A=A._reactInternals;var E=jc(),M=Ct(E);M.payload=p,b!=null&&(M.callback=b),p=It(A,M,E),p!==null&&(Bc(p,A,E),St(p,A,E))},enqueueReplaceState:function(A,p,b){A=A._reactInternals;var E=jc(),M=Ct(E);M.tag=1,M.payload=p,b!=null&&(M.callback=b),p=It(A,M,E),p!==null&&(Bc(p,A,E),St(p,A,E))},enqueueForceUpdate:function(A,p){A=A._reactInternals;var b=jc(),E=Ct(b);E.tag=2,p!=null&&(E.callback=p),p=It(A,E,b),p!==null&&(Bc(p,A,b),St(p,A,b))}};function OU(A,p,b,E,M,Z,he){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,Z,he):p.prototype&&p.prototype.isPureReactComponent?!hf(b,E)||!hf(M,Z):!0}function DU(A,p,b,E){A=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==A&&Uj.enqueueReplaceState(p,p.state,null)}function Ep(A,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(A=A.defaultProps){b===p&&(b=d({},b));for(var M in A)b[M]===void 0&&(b[M]=A[M])}return b}var lE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function PU(A){lE(A)}function RU(A){console.error(A)}function LU(A){lE(A)}function cE(A,p){try{var b=A.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function MU(A,p,b){try{var E=A.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Qj(A,p,b){return b=Ct(b),b.tag=3,b.payload={element:null},b.callback=function(){cE(A,p)},b}function UU(A){return A=Ct(A),A.tag=3,A}function QU(A,p,b,E){var M=b.type.getDerivedStateFromError;if(typeof M=="function"){var Z=E.value;A.payload=function(){return M(Z)},A.callback=function(){MU(p,b,E)}}var he=b.stateNode;he!==null&&typeof he.componentDidCatch=="function"&&(A.callback=function(){MU(p,b,E),typeof M!="function"&&(N0===null?N0=new Set([this]):N0.add(this));var Ce=E.stack;this.componentDidCatch(E.value,{componentStack:Ce!==null?Ce:""})})}function VAe(A,p,b,E,M){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&u0(p,b,M,!0),b=Cu.current,b!==null){switch(b.tag){case 13:return Tf===null?d3():b.alternate===null&&Ns===0&&(Ns=3),b.flags&=-257,b.flags|=65536,b.lanes=M,E===je?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),A3(A,E,M)),!1;case 22:return b.flags|=65536,E===je?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),A3(A,E,M)),!1}throw Error(n(435,b.tag))}return A3(A,E,M),d3(),!1}if(On)return p=Cu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=M,E!==S1&&(A=Error(n(422),{cause:E}),c0(cn(A,b)))):(E!==S1&&(p=Error(n(423),{cause:E}),c0(cn(p,b))),A=A.current.alternate,A.flags|=65536,M&=-M,A.lanes|=M,E=cn(E,b),M=Qj(A.stateNode,E,M),Zt(A,M),Ns!==4&&(Ns=2)),!1;var Z=Error(n(520),{cause:E});if(Z=cn(Z,b),X1===null?X1=[Z]:X1.push(Z),Ns!==4&&(Ns=2),p===null)return!0;E=cn(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,A=M&-M,b.lanes|=A,A=Qj(b.stateNode,E,A),Zt(b,A),!1;case 1:if(p=b.type,Z=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(N0===null||!N0.has(Z))))return b.flags|=65536,M&=-M,b.lanes|=M,M=UU(M),QU(M,A,b,E),Zt(b,M),!1}b=b.return}while(b!==null);return!1}var HU=Error(n(461)),Vi=!1;function Ao(A,p,b,E){p.child=A===null?IU(p,null,b,E):bx(p,A.child,b,E)}function VU(A,p,b,E,M){b=b.render;var Z=p.ref;if("ref"in E){var he={};for(var Ce in E)Ce!=="ref"&&(he[Ce]=E[Ce])}else he=E;return Nu(p),E=Ec(A,p,b,he,Z,M),Ce=Ta(),A!==null&&!Vi?(hp(A,p,M),HA(A,p,M)):(On&&Ce&&up(p),p.flags|=1,Ao(A,p,E,M),p.child)}function zU(A,p,b,E,M){if(A===null){var Z=b.type;return typeof Z=="function"&&!o0(Z)&&Z.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=Z,$U(A,p,Z,E,M)):(A=IA(b.type,null,E,p,p.mode,M),A.ref=p.ref,A.return=p,p.child=A)}if(Z=A.child,!Wj(A,M)){var he=Z.memoizedProps;if(b=b.compare,b=b!==null?b:hf,b(he,E)&&A.ref===p.ref)return HA(A,p,M)}return p.flags|=1,A=vu(Z,E),A.ref=p.ref,A.return=p,p.child=A}function $U(A,p,b,E,M){if(A!==null){var Z=A.memoizedProps;if(hf(Z,E)&&A.ref===p.ref)if(Vi=!1,p.pendingProps=E=Z,Wj(A,M))(A.flags&131072)!==0&&(Vi=!0);else return p.lanes=A.lanes,HA(A,p,M)}return Hj(A,p,b,E,M)}function GU(A,p,b){var E=p.pendingProps,M=E.children,Z=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((p.flags&128)!==0){if(E=Z!==null?Z.baseLanes|b:b,A!==null){for(M=p.child=A.child,Z=0;M!==null;)Z=Z|M.lanes|M.childLanes,M=M.sibling;p.childLanes=Z&~E}else p.childLanes=0,p.child=null;return qU(A,p,E,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},A!==null&&le(p,Z!==null?Z.cachePool:null),Z!==null?ea(p,Z):Qn(),FU(p);else return p.lanes=p.childLanes=536870912,qU(A,p,Z!==null?Z.baseLanes|b:b,b)}else Z!==null?(le(p,Z.cachePool),ea(p,Z),g0(),p.memoizedState=null):(A!==null&&le(p,null),Qn(),g0());return Ao(A,p,M,b),p.child}function qU(A,p,b,E){var M=re();return M=M===null?null:{parent:Hs._currentValue,pool:M},p.memoizedState={baseLanes:b,cachePool:M},A!==null&&le(p,null),Qn(),FU(p),A!==null&&u0(A,p,E,!0),null}function uE(A,p){var b=p.ref;if(b===null)A!==null&&A.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(A===null||A.ref!==b)&&(p.flags|=4194816)}}function Hj(A,p,b,E,M){return Nu(p),b=Ec(A,p,b,E,void 0,M),E=Ta(),A!==null&&!Vi?(hp(A,p,M),HA(A,p,M)):(On&&E&&up(p),p.flags|=1,Ao(A,p,b,M),p.child)}function KU(A,p,b,E,M,Z){return Nu(p),p.updateQueue=null,b=RA(p,E,b,M),Sf(A),E=Ta(),A!==null&&!Vi?(hp(A,p,Z),HA(A,p,Z)):(On&&E&&up(p),p.flags|=1,Ao(A,p,b,Z),p.child)}function WU(A,p,b,E,M){if(Nu(p),p.stateNode===null){var Z=ii,he=b.contextType;typeof he=="object"&&he!==null&&(Z=Qs(he)),Z=new b(E,Z),p.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Z.updater=Uj,p.stateNode=Z,Z._reactInternals=p,Z=p.stateNode,Z.props=E,Z.state=p.memoizedState,Z.refs={},We(p),he=b.contextType,Z.context=typeof he=="object"&&he!==null?Qs(he):ii,Z.state=p.memoizedState,he=b.getDerivedStateFromProps,typeof he=="function"&&(Mj(p,b,he,E),Z.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(he=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),he!==Z.state&&Uj.enqueueReplaceState(Z,Z.state,null),Kt(p,E,Z,M),hr(),Z.state=p.memoizedState),typeof Z.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(A===null){Z=p.stateNode;var Ce=p.memoizedProps,Ve=Ep(b,Ce);Z.props=Ve;var dt=Z.context,_t=b.contextType;he=ii,typeof _t=="object"&&_t!==null&&(he=Qs(_t));var Ft=b.getDerivedStateFromProps;_t=typeof Ft=="function"||typeof Z.getSnapshotBeforeUpdate=="function",Ce=p.pendingProps!==Ce,_t||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(Ce||dt!==he)&&DU(p,Z,E,he),gt=!1;var ht=p.memoizedState;Z.state=ht,Kt(p,E,Z,M),hr(),dt=p.memoizedState,Ce||ht!==dt||gt?(typeof Ft=="function"&&(Mj(p,b,Ft,E),dt=p.memoizedState),(Ve=gt||OU(p,b,Ve,E,ht,dt,he))?(_t||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=dt),Z.props=E,Z.state=dt,Z.context=he,E=Ve):(typeof Z.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{Z=p.stateNode,Je(A,p),he=p.memoizedProps,_t=Ep(b,he),Z.props=_t,Ft=p.pendingProps,ht=Z.context,dt=b.contextType,Ve=ii,typeof dt=="object"&&dt!==null&&(Ve=Qs(dt)),Ce=b.getDerivedStateFromProps,(dt=typeof Ce=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(he!==Ft||ht!==Ve)&&DU(p,Z,E,Ve),gt=!1,ht=p.memoizedState,Z.state=ht,Kt(p,E,Z,M),hr();var pt=p.memoizedState;he!==Ft||ht!==pt||gt||A!==null&&A.dependencies!==null&&dx(A.dependencies)?(typeof Ce=="function"&&(Mj(p,b,Ce,E),pt=p.memoizedState),(_t=gt||OU(p,b,_t,E,ht,pt,Ve)||A!==null&&A.dependencies!==null&&dx(A.dependencies))?(dt||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(E,pt,Ve),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(E,pt,Ve)),typeof Z.componentDidUpdate=="function"&&(p.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Z.componentDidUpdate!="function"||he===A.memoizedProps&&ht===A.memoizedState||(p.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||he===A.memoizedProps&&ht===A.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=pt),Z.props=E,Z.state=pt,Z.context=Ve,E=_t):(typeof Z.componentDidUpdate!="function"||he===A.memoizedProps&&ht===A.memoizedState||(p.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||he===A.memoizedProps&&ht===A.memoizedState||(p.flags|=1024),E=!1)}return Z=E,uE(A,p),E=(p.flags&128)!==0,Z||E?(Z=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:Z.render(),p.flags|=1,A!==null&&E?(p.child=bx(p,A.child,null,M),p.child=bx(p,null,b,M)):Ao(A,p,b,M),p.memoizedState=Z.state,A=p.child):A=HA(A,p,M),A}function XU(A,p,b,E){return gl(),p.flags|=256,Ao(A,p,b,E),p.child}var Vj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zj(A){return{baseLanes:A,cachePool:pe()}}function $j(A,p,b){return A=A!==null?A.childLanes&~b:0,p&&(A|=_u),A}function YU(A,p,b){var E=p.pendingProps,M=!1,Z=(p.flags&128)!==0,he;if((he=Z)||(he=A!==null&&A.memoizedState===null?!1:(Si.current&2)!==0),he&&(M=!0,p.flags&=-129),he=(p.flags&32)!==0,p.flags&=-33,A===null){if(On){if(M?p0(p):g0(),On){var Ce=Xa,Ve;if(Ve=Ce){e:{for(Ve=Ce,Ce=bu;Ve.nodeType!==8;){if(!Ce){Ce=null;break e}if(Ve=Cd(Ve.nextSibling),Ve===null){Ce=null;break e}}Ce=Ve}Ce!==null?(p.memoizedState={dehydrated:Ce,treeContext:FA!==null?{id:md,overflow:pd}:null,retryLane:536870912,hydrationErrors:null},Ve=Hi(18,null,null,0),Ve.stateNode=Ce,Ve.return=p,p.child=Ve,Us=p,Xa=null,Ve=!0):Ve=!1}Ve||DA(p)}if(Ce=p.memoizedState,Ce!==null&&(Ce=Ce.dehydrated,Ce!==null))return k3(Ce)?p.lanes=32:p.lanes=536870912,null;QA(p)}return Ce=E.children,E=E.fallback,M?(g0(),M=p.mode,Ce=dE({mode:"hidden",children:Ce},M),E=Ad(E,M,b,null),Ce.return=p,E.return=p,Ce.sibling=E,p.child=Ce,M=p.child,M.memoizedState=zj(b),M.childLanes=$j(A,he,b),p.memoizedState=Vj,E):(p0(p),Gj(p,Ce))}if(Ve=A.memoizedState,Ve!==null&&(Ce=Ve.dehydrated,Ce!==null)){if(Z)p.flags&256?(p0(p),p.flags&=-257,p=qj(A,p,b)):p.memoizedState!==null?(g0(),p.child=A.child,p.flags|=128,p=null):(g0(),M=E.fallback,Ce=p.mode,E=dE({mode:"visible",children:E.children},Ce),M=Ad(M,Ce,b,null),M.flags|=2,E.return=p,M.return=p,E.sibling=M,p.child=E,bx(p,A.child,null,b),E=p.child,E.memoizedState=zj(b),E.childLanes=$j(A,he,b),p.memoizedState=Vj,p=M);else if(p0(p),k3(Ce)){if(he=Ce.nextSibling&&Ce.nextSibling.dataset,he)var dt=he.dgst;he=dt,E=Error(n(419)),E.stack="",E.digest=he,c0({value:E,source:null,stack:null}),p=qj(A,p,b)}else if(Vi||u0(A,p,b,!1),he=(b&A.childLanes)!==0,Vi||he){if(he=Ia,he!==null&&(E=b&-b,E=(E&42)!==0?1:ms(E),E=(E&(he.suspendedLanes|b))!==0?0:E,E!==0&&E!==Ve.retryLane))throw Ve.retryLane=E,fd(A,E),Bc(he,A,E),HU;Ce.data==="$?"||d3(),p=qj(A,p,b)}else Ce.data==="$?"?(p.flags|=192,p.child=A.child,p=null):(A=Ve.treeContext,Xa=Cd(Ce.nextSibling),Us=p,On=!0,Ef=null,bu=!1,A!==null&&(zl[pl++]=md,zl[pl++]=pd,zl[pl++]=FA,md=A.id,pd=A.overflow,FA=p),p=Gj(p,E.children),p.flags|=4096);return p}return M?(g0(),M=E.fallback,Ce=p.mode,Ve=A.child,dt=Ve.sibling,E=vu(Ve,{mode:"hidden",children:E.children}),E.subtreeFlags=Ve.subtreeFlags&65011712,dt!==null?M=vu(dt,M):(M=Ad(M,Ce,b,null),M.flags|=2),M.return=p,E.return=p,E.sibling=M,p.child=E,E=M,M=p.child,Ce=A.child.memoizedState,Ce===null?Ce=zj(b):(Ve=Ce.cachePool,Ve!==null?(dt=Hs._currentValue,Ve=Ve.parent!==dt?{parent:dt,pool:dt}:Ve):Ve=pe(),Ce={baseLanes:Ce.baseLanes|b,cachePool:Ve}),M.memoizedState=Ce,M.childLanes=$j(A,he,b),p.memoizedState=Vj,E):(p0(p),b=A.child,A=b.sibling,b=vu(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,A!==null&&(he=p.deletions,he===null?(p.deletions=[A],p.flags|=16):he.push(A)),p.child=b,p.memoizedState=null,b)}function Gj(A,p){return p=dE({mode:"visible",children:p},A.mode),p.return=A,A.child=p}function dE(A,p){return A=Hi(22,A,null,p),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function qj(A,p,b){return bx(p,A.child,null,b),A=Gj(p,p.pendingProps.children),A.flags|=2,p.memoizedState=null,A}function JU(A,p,b){A.lanes|=p;var E=A.alternate;E!==null&&(E.lanes|=p),cx(A.return,p,b)}function Kj(A,p,b,E,M){var Z=A.memoizedState;Z===null?A.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:M}:(Z.isBackwards=p,Z.rendering=null,Z.renderingStartTime=0,Z.last=E,Z.tail=b,Z.tailMode=M)}function ZU(A,p,b){var E=p.pendingProps,M=E.revealOrder,Z=E.tail;if(Ao(A,p,E.children,b),E=Si.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=p.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&JU(A,b,p);else if(A.tag===19)JU(A,b,p);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break e;for(;A.sibling===null;){if(A.return===null||A.return===p)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(D(Si,E),M){case"forwards":for(b=p.child,M=null;b!==null;)A=b.alternate,A!==null&&oE(A)===null&&(M=b),b=b.sibling;b=M,b===null?(M=p.child,p.child=null):(M=b.sibling,b.sibling=null),Kj(p,!1,M,b,Z);break;case"backwards":for(b=null,M=p.child,p.child=null;M!==null;){if(A=M.alternate,A!==null&&oE(A)===null){p.child=M;break}A=M.sibling,M.sibling=b,b=M,M=A}Kj(p,!0,b,null,Z);break;case"together":Kj(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function HA(A,p,b){if(A!==null&&(p.dependencies=A.dependencies),w0|=p.lanes,(b&p.childLanes)===0)if(A!==null){if(u0(A,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(A!==null&&p.child!==A.child)throw Error(n(153));if(p.child!==null){for(A=p.child,b=vu(A,A.pendingProps),p.child=b,b.return=p;A.sibling!==null;)A=A.sibling,b=b.sibling=vu(A,A.pendingProps),b.return=p;b.sibling=null}return p.child}function Wj(A,p){return(A.lanes&p)!==0?!0:(A=A.dependencies,!!(A!==null&&dx(A)))}function zAe(A,p,b){switch(p.tag){case 3:ie(p,p.stateNode.containerInfo),Cf(p,Hs,A.memoizedState.cache),gl();break;case 27:case 5:de(p);break;case 4:ie(p,p.stateNode.containerInfo);break;case 10:Cf(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(p0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?YU(A,p,b):(p0(p),A=HA(A,p,b),A!==null?A.sibling:null);p0(p);break;case 19:var M=(A.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(u0(A,p,b,!1),E=(b&p.childLanes)!==0),M){if(E)return ZU(A,p,b);p.flags|=128}if(M=p.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),D(Si,Si.current),E)break;return null;case 22:case 23:return p.lanes=0,GU(A,p,b);case 24:Cf(p,Hs,A.memoizedState.cache)}return HA(A,p,b)}function e7(A,p,b){if(A!==null)if(A.memoizedProps!==p.pendingProps)Vi=!0;else{if(!Wj(A,b)&&(p.flags&128)===0)return Vi=!1,zAe(A,p,b);Vi=(A.flags&131072)!==0}else Vi=!1,On&&(p.flags&1048576)!==0&&QN(p,lx,p.index);switch(p.lanes=0,p.tag){case 16:e:{A=p.pendingProps;var E=p.elementType,M=E._init;if(E=M(E._payload),p.type=E,typeof E=="function")o0(E)?(A=Ep(E,A),p.tag=1,p=WU(null,p,E,A,b)):(p.tag=0,p=Hj(null,p,E,A,b));else{if(E!=null){if(M=E.$$typeof,M===O){p.tag=11,p=VU(null,p,E,A,b);break e}else if(M===C){p.tag=14,p=zU(null,p,E,A,b);break e}}throw p=Q(E)||E,Error(n(306,p,""))}}return p;case 0:return Hj(A,p,p.type,p.pendingProps,b);case 1:return E=p.type,M=Ep(E,p.pendingProps),WU(A,p,E,M,b);case 3:e:{if(ie(p,p.stateNode.containerInfo),A===null)throw Error(n(387));E=p.pendingProps;var Z=p.memoizedState;M=Z.element,Je(A,p),Kt(p,E,null,b);var he=p.memoizedState;if(E=he.cache,Cf(p,Hs,E),E!==Z.cache&&ux(p,[Hs],b,!0),hr(),E=he.element,Z.isDehydrated)if(Z={element:E,isDehydrated:!1,cache:he.cache},p.updateQueue.baseState=Z,p.memoizedState=Z,p.flags&256){p=XU(A,p,E,b);break e}else if(E!==M){M=cn(Error(n(424)),p),c0(M),p=XU(A,p,E,b);break e}else{switch(A=p.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Xa=Cd(A.firstChild),Us=p,On=!0,Ef=null,bu=!0,b=IU(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(gl(),E===M){p=HA(A,p,b);break e}Ao(A,p,E,b)}p=p.child}return p;case 26:return uE(A,p),A===null?(b=a9(p.type,null,p.pendingProps,null))?p.memoizedState=b:On||(b=p.type,A=p.pendingProps,E=CE(te.current).createElement(b),E[xn]=p,E[ln]=A,mo(E,b,A),Ie(E),p.stateNode=E):p.memoizedState=a9(p.type,A.memoizedProps,p.pendingProps,A.memoizedState),null;case 27:return de(p),A===null&&On&&(E=p.stateNode=t9(p.type,p.pendingProps,te.current),Us=p,bu=!0,M=Xa,_0(p.type)?(j3=M,Xa=Cd(E.firstChild)):Xa=M),Ao(A,p,p.pendingProps.children,b),uE(A,p),A===null&&(p.flags|=4194304),p.child;case 5:return A===null&&On&&((M=E=Xa)&&(E=xhe(E,p.type,p.pendingProps,bu),E!==null?(p.stateNode=E,Us=p,Xa=Cd(E.firstChild),bu=!1,M=!0):M=!1),M||DA(p)),de(p),M=p.type,Z=p.pendingProps,he=A!==null?A.memoizedProps:null,E=Z.children,C3(M,Z)?E=null:he!==null&&C3(M,he)&&(p.flags|=32),p.memoizedState!==null&&(M=Ec(A,p,kf,null,null,b),sy._currentValue=M),uE(A,p),Ao(A,p,E,b),p.child;case 6:return A===null&&On&&((A=b=Xa)&&(b=vhe(b,p.pendingProps,bu),b!==null?(p.stateNode=b,Us=p,Xa=null,A=!0):A=!1),A||DA(p)),null;case 13:return YU(A,p,b);case 4:return ie(p,p.stateNode.containerInfo),E=p.pendingProps,A===null?p.child=bx(p,null,E,b):Ao(A,p,E,b),p.child;case 11:return VU(A,p,p.type,p.pendingProps,b);case 7:return Ao(A,p,p.pendingProps,b),p.child;case 8:return Ao(A,p,p.pendingProps.children,b),p.child;case 12:return Ao(A,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,Cf(p,p.type,E.value),Ao(A,p,E.children,b),p.child;case 9:return M=p.type._context,E=p.pendingProps.children,Nu(p),M=Qs(M),E=E(M),p.flags|=1,Ao(A,p,E,b),p.child;case 14:return zU(A,p,p.type,p.pendingProps,b);case 15:return $U(A,p,p.type,p.pendingProps,b);case 19:return ZU(A,p,b);case 31:return E=p.pendingProps,b=p.mode,E={mode:E.mode,children:E.children},A===null?(b=dE(E,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=vu(A.child,E),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return GU(A,p,b);case 24:return Nu(p),E=Qs(Hs),A===null?(M=re(),M===null&&(M=Ia,Z=k1(),M.pooledCache=Z,Z.refCount++,Z!==null&&(M.pooledCacheLanes|=b),M=Z),p.memoizedState={parent:E,cache:M},We(p),Cf(p,Hs,M)):((A.lanes&b)!==0&&(Je(A,p),Kt(p,null,null,b),hr()),M=A.memoizedState,Z=p.memoizedState,M.parent!==E?(M={parent:E,cache:E},p.memoizedState=M,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=M),Cf(p,Hs,E)):(E=Z.cache,Cf(p,Hs,E),E!==M.cache&&ux(p,[Hs],b,!0))),Ao(A,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function VA(A){A.flags|=4}function t7(A,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!c9(p)){if(p=Cu.current,p!==null&&((Tn&4194048)===Tn?Tf!==null:(Tn&62914560)!==Tn&&(Tn&536870912)===0||p!==Tf))throw it=je,be;A.flags|=8192}}function fE(A,p){p!==null&&(A.flags|=4),A.flags&16384&&(p=A.tag!==22?qr():536870912,A.lanes|=p,Ex|=p)}function z1(A,p){if(!On)switch(A.tailMode){case"hidden":p=A.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function is(A){var p=A.alternate!==null&&A.alternate.child===A.child,b=0,E=0;if(p)for(var M=A.child;M!==null;)b|=M.lanes|M.childLanes,E|=M.subtreeFlags&65011712,E|=M.flags&65011712,M.return=A,M=M.sibling;else for(M=A.child;M!==null;)b|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=A,M=M.sibling;return A.subtreeFlags|=E,A.childLanes=b,p}function $Ae(A,p,b){var E=p.pendingProps;switch(dp(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(p),null;case 1:return is(p),null;case 3:return b=p.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),wu(Hs),oe(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(uo(p)?VA(p):A===null||A.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,VN())),is(p),null;case 26:return b=p.memoizedState,A===null?(VA(p),b!==null?(is(p),t7(p,b)):(is(p),p.flags&=-16777217)):b?b!==A.memoizedState?(VA(p),is(p),t7(p,b)):(is(p),p.flags&=-16777217):(A.memoizedProps!==E&&VA(p),is(p),p.flags&=-16777217),null;case 27:ke(p),b=te.current;var M=p.type;if(A!==null&&p.stateNode!=null)A.memoizedProps!==E&&VA(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return is(p),null}A=q.current,uo(p)?HN(p):(A=t9(M,E,b),p.stateNode=A,VA(p))}return is(p),null;case 5:if(ke(p),b=p.type,A!==null&&p.stateNode!=null)A.memoizedProps!==E&&VA(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return is(p),null}if(A=q.current,uo(p))HN(p);else{switch(M=CE(te.current),A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?M.createElement("select",{is:E.is}):M.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?M.createElement(b,{is:E.is}):M.createElement(b)}}A[xn]=p,A[ln]=E;e:for(M=p.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===p)break e;for(;M.sibling===null;){if(M.return===null||M.return===p)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}p.stateNode=A;e:switch(mo(A,b,E),b){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&VA(p)}}return is(p),p.flags&=-16777217,null;case 6:if(A&&p.stateNode!=null)A.memoizedProps!==E&&VA(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(n(166));if(A=te.current,uo(p)){if(A=p.stateNode,b=p.memoizedProps,E=null,M=Us,M!==null)switch(M.tag){case 27:case 5:E=M.memoizedProps}A[xn]=p,A=!!(A.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||K7(A.nodeValue,b)),A||DA(p)}else A=CE(A).createTextNode(E),A[xn]=p,p.stateNode=A}return is(p),null;case 13:if(E=p.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(M=uo(p),E!==null&&E.dehydrated!==null){if(A===null){if(!M)throw Error(n(318));if(M=p.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[xn]=p}else gl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;is(p),M=!1}else M=VN(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=M),M=!0;if(!M)return p.flags&256?(QA(p),p):(QA(p),null)}if(QA(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=E!==null,A=A!==null&&A.memoizedState!==null,b){E=p.child,M=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(M=E.alternate.memoizedState.cachePool.pool);var Z=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(Z=E.memoizedState.cachePool.pool),Z!==M&&(E.flags|=2048)}return b!==A&&b&&(p.child.flags|=8192),fE(p,p.updateQueue),is(p),null;case 4:return oe(),A===null&&b3(p.stateNode.containerInfo),is(p),null;case 10:return wu(p.type),is(p),null;case 19:if(F(Si),M=p.memoizedState,M===null)return is(p),null;if(E=(p.flags&128)!==0,Z=M.rendering,Z===null)if(E)z1(M,!1);else{if(Ns!==0||A!==null&&(A.flags&128)!==0)for(A=p.child;A!==null;){if(Z=oE(A),Z!==null){for(p.flags|=128,z1(M,!1),A=Z.updateQueue,p.updateQueue=A,fE(p,A),p.subtreeFlags=0,A=b,b=p.child;b!==null;)lp(b,A),b=b.sibling;return D(Si,Si.current&1|2),p.child}A=A.sibling}M.tail!==null&&ye()>mE&&(p.flags|=128,E=!0,z1(M,!1),p.lanes=4194304)}else{if(!E)if(A=oE(Z),A!==null){if(p.flags|=128,E=!0,A=A.updateQueue,p.updateQueue=A,fE(p,A),z1(M,!0),M.tail===null&&M.tailMode==="hidden"&&!Z.alternate&&!On)return is(p),null}else 2*ye()-M.renderingStartTime>mE&&b!==536870912&&(p.flags|=128,E=!0,z1(M,!1),p.lanes=4194304);M.isBackwards?(Z.sibling=p.child,p.child=Z):(A=M.last,A!==null?A.sibling=Z:p.child=Z,M.last=Z)}return M.tail!==null?(p=M.tail,M.rendering=p,M.tail=p.sibling,M.renderingStartTime=ye(),p.sibling=null,A=Si.current,D(Si,E?A&1|2:A&1),p):(is(p),null);case 22:case 23:return QA(p),zr(),E=p.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(is(p),p.subtreeFlags&6&&(p.flags|=8192)):is(p),b=p.updateQueue,b!==null&&fE(p,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),A!==null&&F(V),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),wu(Hs),is(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function GAe(A,p){switch(dp(p),p.tag){case 1:return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 3:return wu(Hs),oe(),A=p.flags,(A&65536)!==0&&(A&128)===0?(p.flags=A&-65537|128,p):null;case 26:case 27:case 5:return ke(p),null;case 13:if(QA(p),A=p.memoizedState,A!==null&&A.dehydrated!==null){if(p.alternate===null)throw Error(n(340));gl()}return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 19:return F(Si),null;case 4:return oe(),null;case 10:return wu(p.type),null;case 22:case 23:return QA(p),zr(),A!==null&&F(V),A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 24:return wu(Hs),null;case 25:return null;default:return null}}function r7(A,p){switch(dp(p),p.tag){case 3:wu(Hs),oe();break;case 26:case 27:case 5:ke(p);break;case 4:oe();break;case 13:QA(p);break;case 19:F(Si);break;case 10:wu(p.type);break;case 22:case 23:QA(p),zr(),A!==null&&F(V);break;case 24:wu(Hs)}}function $1(A,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var M=E.next;b=M;do{if((b.tag&A)===A){E=void 0;var Z=b.create,he=b.inst;E=Z(),he.destroy=E}b=b.next}while(b!==M)}}catch(Ce){Na(p,p.return,Ce)}}function x0(A,p,b){try{var E=p.updateQueue,M=E!==null?E.lastEffect:null;if(M!==null){var Z=M.next;E=Z;do{if((E.tag&A)===A){var he=E.inst,Ce=he.destroy;if(Ce!==void 0){he.destroy=void 0,M=p;var Ve=b,dt=Ce;try{dt()}catch(_t){Na(M,Ve,_t)}}}E=E.next}while(E!==Z)}}catch(_t){Na(p,p.return,_t)}}function n7(A){var p=A.updateQueue;if(p!==null){var b=A.stateNode;try{Un(p,b)}catch(E){Na(A,A.return,E)}}}function a7(A,p,b){b.props=Ep(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(E){Na(A,p,E)}}function G1(A,p){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof b=="function"?A.refCleanup=b(E):b.current=E}}catch(M){Na(A,p,M)}}function If(A,p){var b=A.ref,E=A.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(M){Na(A,p,M)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(M){Na(A,p,M)}else b.current=null}function s7(A){var p=A.type,b=A.memoizedProps,E=A.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(M){Na(A,A.return,M)}}function Xj(A,p,b){try{var E=A.stateNode;Ahe(E,A.type,b,p),E[ln]=p}catch(M){Na(A,A.return,M)}}function i7(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&_0(A.type)||A.tag===4}function Yj(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||i7(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&_0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Jj(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(A),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=EE));else if(E!==4&&(E===27&&_0(A.type)&&(b=A.stateNode,p=null),A=A.child,A!==null))for(Jj(A,p,b),A=A.sibling;A!==null;)Jj(A,p,b),A=A.sibling}function AE(A,p,b){var E=A.tag;if(E===5||E===6)A=A.stateNode,p?b.insertBefore(A,p):b.appendChild(A);else if(E!==4&&(E===27&&_0(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(AE(A,p,b),A=A.sibling;A!==null;)AE(A,p,b),A=A.sibling}function o7(A){var p=A.stateNode,b=A.memoizedProps;try{for(var E=A.type,M=p.attributes;M.length;)p.removeAttributeNode(M[0]);mo(p,E,b),p[xn]=A,p[ln]=b}catch(Z){Na(A,A.return,Z)}}var zA=!1,zs=!1,Zj=!1,l7=typeof WeakSet=="function"?WeakSet:Set,zi=null;function qAe(A,p){if(A=A.containerInfo,N3=TE,A=co(A),_i(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var M=E.anchorOffset,Z=E.focusNode;E=E.focusOffset;try{b.nodeType,Z.nodeType}catch{b=null;break e}var he=0,Ce=-1,Ve=-1,dt=0,_t=0,Ft=A,ht=null;t:for(;;){for(var pt;Ft!==b||M!==0&&Ft.nodeType!==3||(Ce=he+M),Ft!==Z||E!==0&&Ft.nodeType!==3||(Ve=he+E),Ft.nodeType===3&&(he+=Ft.nodeValue.length),(pt=Ft.firstChild)!==null;)ht=Ft,Ft=pt;for(;;){if(Ft===A)break t;if(ht===b&&++dt===M&&(Ce=he),ht===Z&&++_t===E&&(Ve=he),(pt=Ft.nextSibling)!==null)break;Ft=ht,ht=Ft.parentNode}Ft=pt}b=Ce===-1||Ve===-1?null:{start:Ce,end:Ve}}else b=null}b=b||{start:0,end:0}}else b=null;for(E3={focusedElem:A,selectionRange:b},TE=!1,zi=p;zi!==null;)if(p=zi,A=p.child,(p.subtreeFlags&1024)!==0&&A!==null)A.return=p,zi=A;else for(;zi!==null;){switch(p=zi,Z=p.alternate,A=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&Z!==null){A=void 0,b=p,M=Z.memoizedProps,Z=Z.memoizedState,E=b.stateNode;try{var Qr=Ep(b.type,M,b.elementType===b.type);A=E.getSnapshotBeforeUpdate(Qr,Z),E.__reactInternalSnapshotBeforeUpdate=A}catch(kr){Na(b,b.return,kr)}}break;case 3:if((A&1024)!==0){if(A=p.stateNode.containerInfo,b=A.nodeType,b===9)S3(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":S3(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=p.sibling,A!==null){A.return=p.return,zi=A;break}zi=p.return}}function c7(A,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:v0(A,b),E&4&&$1(5,b);break;case 1:if(v0(A,b),E&4)if(A=b.stateNode,p===null)try{A.componentDidMount()}catch(he){Na(b,b.return,he)}else{var M=Ep(b.type,p.memoizedProps);p=p.memoizedState;try{A.componentDidUpdate(M,p,A.__reactInternalSnapshotBeforeUpdate)}catch(he){Na(b,b.return,he)}}E&64&&n7(b),E&512&&G1(b,b.return);break;case 3:if(v0(A,b),E&64&&(A=b.updateQueue,A!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{Un(A,p)}catch(he){Na(b,b.return,he)}}break;case 27:p===null&&E&4&&o7(b);case 26:case 5:v0(A,b),p===null&&E&4&&s7(b),E&512&&G1(b,b.return);break;case 12:v0(A,b);break;case 13:v0(A,b),E&4&&f7(A,b),E&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=rhe.bind(null,b),bhe(A,b))));break;case 22:if(E=b.memoizedState!==null||zA,!E){p=p!==null&&p.memoizedState!==null||zs,M=zA;var Z=zs;zA=E,(zs=p)&&!Z?b0(A,b,(b.subtreeFlags&8772)!==0):v0(A,b),zA=M,zs=Z}break;case 30:break;default:v0(A,b)}}function u7(A){var p=A.alternate;p!==null&&(A.alternate=null,u7(p)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(p=A.stateNode,p!==null&&Fe(p)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ya=null,Gl=!1;function $A(A,p,b){for(b=b.child;b!==null;)d7(A,p,b),b=b.sibling}function d7(A,p,b){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ft,b)}catch{}switch(b.tag){case 26:zs||If(b,p),$A(A,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:zs||If(b,p);var E=Ya,M=Gl;_0(b.type)&&(Ya=b.stateNode,Gl=!1),$A(A,p,b),ty(b.stateNode),Ya=E,Gl=M;break;case 5:zs||If(b,p);case 6:if(E=Ya,M=Gl,Ya=null,$A(A,p,b),Ya=E,Gl=M,Ya!==null)if(Gl)try{(Ya.nodeType===9?Ya.body:Ya.nodeName==="HTML"?Ya.ownerDocument.body:Ya).removeChild(b.stateNode)}catch(Z){Na(b,p,Z)}else try{Ya.removeChild(b.stateNode)}catch(Z){Na(b,p,Z)}break;case 18:Ya!==null&&(Gl?(A=Ya,Z7(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),cy(A)):Z7(Ya,b.stateNode));break;case 4:E=Ya,M=Gl,Ya=b.stateNode.containerInfo,Gl=!0,$A(A,p,b),Ya=E,Gl=M;break;case 0:case 11:case 14:case 15:zs||x0(2,b,p),zs||x0(4,b,p),$A(A,p,b);break;case 1:zs||(If(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&a7(b,p,E)),$A(A,p,b);break;case 21:$A(A,p,b);break;case 22:zs=(E=zs)||b.memoizedState!==null,$A(A,p,b),zs=E;break;default:$A(A,p,b)}}function f7(A,p){if(p.memoizedState===null&&(A=p.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{cy(A)}catch(b){Na(p,p.return,b)}}function KAe(A){switch(A.tag){case 13:case 19:var p=A.stateNode;return p===null&&(p=A.stateNode=new l7),p;case 22:return A=A.stateNode,p=A._retryCache,p===null&&(p=A._retryCache=new l7),p;default:throw Error(n(435,A.tag))}}function e3(A,p){var b=KAe(A);p.forEach(function(E){var M=nhe.bind(null,A,E);b.has(E)||(b.add(E),E.then(M,M))})}function _c(A,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var M=b[E],Z=A,he=p,Ce=he;e:for(;Ce!==null;){switch(Ce.tag){case 27:if(_0(Ce.type)){Ya=Ce.stateNode,Gl=!1;break e}break;case 5:Ya=Ce.stateNode,Gl=!1;break e;case 3:case 4:Ya=Ce.stateNode.containerInfo,Gl=!0;break e}Ce=Ce.return}if(Ya===null)throw Error(n(160));d7(Z,he,M),Ya=null,Gl=!1,Z=M.alternate,Z!==null&&(Z.return=null),M.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)A7(p,A),p=p.sibling}var Ed=null;function A7(A,p){var b=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:_c(p,A),Sc(A),E&4&&(x0(3,A,A.return),$1(3,A),x0(5,A,A.return));break;case 1:_c(p,A),Sc(A),E&512&&(zs||b===null||If(b,b.return)),E&64&&zA&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var M=Ed;if(_c(p,A),Sc(A),E&512&&(zs||b===null||If(b,b.return)),E&4){var Z=b!==null?b.memoizedState:null;if(E=A.memoizedState,b===null)if(E===null)if(A.stateNode===null){e:{E=A.type,b=A.memoizedProps,M=M.ownerDocument||M;t:switch(E){case"title":Z=M.getElementsByTagName("title")[0],(!Z||Z[Be]||Z[xn]||Z.namespaceURI==="http://www.w3.org/2000/svg"||Z.hasAttribute("itemprop"))&&(Z=M.createElement(E),M.head.insertBefore(Z,M.querySelector("head > title"))),mo(Z,E,b),Z[xn]=A,Ie(Z),E=Z;break e;case"link":var he=o9("link","href",M).get(E+(b.href||""));if(he){for(var Ce=0;Ce<he.length;Ce++)if(Z=he[Ce],Z.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&Z.getAttribute("rel")===(b.rel==null?null:b.rel)&&Z.getAttribute("title")===(b.title==null?null:b.title)&&Z.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){he.splice(Ce,1);break t}}Z=M.createElement(E),mo(Z,E,b),M.head.appendChild(Z);break;case"meta":if(he=o9("meta","content",M).get(E+(b.content||""))){for(Ce=0;Ce<he.length;Ce++)if(Z=he[Ce],Z.getAttribute("content")===(b.content==null?null:""+b.content)&&Z.getAttribute("name")===(b.name==null?null:b.name)&&Z.getAttribute("property")===(b.property==null?null:b.property)&&Z.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&Z.getAttribute("charset")===(b.charSet==null?null:b.charSet)){he.splice(Ce,1);break t}}Z=M.createElement(E),mo(Z,E,b),M.head.appendChild(Z);break;default:throw Error(n(468,E))}Z[xn]=A,Ie(Z),E=Z}A.stateNode=E}else l9(M,A.type,A.stateNode);else A.stateNode=i9(M,E,A.memoizedProps);else Z!==E?(Z===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):Z.count--,E===null?l9(M,A.type,A.stateNode):i9(M,E,A.memoizedProps)):E===null&&A.stateNode!==null&&Xj(A,A.memoizedProps,b.memoizedProps)}break;case 27:_c(p,A),Sc(A),E&512&&(zs||b===null||If(b,b.return)),b!==null&&E&4&&Xj(A,A.memoizedProps,b.memoizedProps);break;case 5:if(_c(p,A),Sc(A),E&512&&(zs||b===null||If(b,b.return)),A.flags&32){M=A.stateNode;try{jo(M,"")}catch(pt){Na(A,A.return,pt)}}E&4&&A.stateNode!=null&&(M=A.memoizedProps,Xj(A,M,b!==null?b.memoizedProps:M)),E&1024&&(Zj=!0);break;case 6:if(_c(p,A),Sc(A),E&4){if(A.stateNode===null)throw Error(n(162));E=A.memoizedProps,b=A.stateNode;try{b.nodeValue=E}catch(pt){Na(A,A.return,pt)}}break;case 3:if(kE=null,M=Ed,Ed=_E(p.containerInfo),_c(p,A),Ed=M,Sc(A),E&4&&b!==null&&b.memoizedState.isDehydrated)try{cy(p.containerInfo)}catch(pt){Na(A,A.return,pt)}Zj&&(Zj=!1,h7(A));break;case 4:E=Ed,Ed=_E(A.stateNode.containerInfo),_c(p,A),Sc(A),Ed=E;break;case 12:_c(p,A),Sc(A);break;case 13:_c(p,A),Sc(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(i3=ye()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,e3(A,E)));break;case 22:M=A.memoizedState!==null;var Ve=b!==null&&b.memoizedState!==null,dt=zA,_t=zs;if(zA=dt||M,zs=_t||Ve,_c(p,A),zs=_t,zA=dt,Sc(A),E&8192)e:for(p=A.stateNode,p._visibility=M?p._visibility&-2:p._visibility|1,M&&(b===null||Ve||zA||zs||Cp(A)),b=null,p=A;;){if(p.tag===5||p.tag===26){if(b===null){Ve=b=p;try{if(Z=Ve.stateNode,M)he=Z.style,typeof he.setProperty=="function"?he.setProperty("display","none","important"):he.display="none";else{Ce=Ve.stateNode;var Ft=Ve.memoizedProps.style,ht=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;Ce.style.display=ht==null||typeof ht=="boolean"?"":(""+ht).trim()}}catch(pt){Na(Ve,Ve.return,pt)}}}else if(p.tag===6){if(b===null){Ve=p;try{Ve.stateNode.nodeValue=M?"":Ve.memoizedProps}catch(pt){Na(Ve,Ve.return,pt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===A)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break e;for(;p.sibling===null;){if(p.return===null||p.return===A)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=A.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,e3(A,b))));break;case 19:_c(p,A),Sc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,e3(A,E)));break;case 30:break;case 21:break;default:_c(p,A),Sc(A)}}function Sc(A){var p=A.flags;if(p&2){try{for(var b,E=A.return;E!==null;){if(i7(E)){b=E;break}E=E.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var M=b.stateNode,Z=Yj(A);AE(A,Z,M);break;case 5:var he=b.stateNode;b.flags&32&&(jo(he,""),b.flags&=-33);var Ce=Yj(A);AE(A,Ce,he);break;case 3:case 4:var Ve=b.stateNode.containerInfo,dt=Yj(A);Jj(A,dt,Ve);break;default:throw Error(n(161))}}catch(_t){Na(A,A.return,_t)}A.flags&=-3}p&4096&&(A.flags&=-4097)}function h7(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var p=A;h7(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),A=A.sibling}}function v0(A,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)c7(A,p.alternate,p),p=p.sibling}function Cp(A){for(A=A.child;A!==null;){var p=A;switch(p.tag){case 0:case 11:case 14:case 15:x0(4,p,p.return),Cp(p);break;case 1:If(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&a7(p,p.return,b),Cp(p);break;case 27:ty(p.stateNode);case 26:case 5:If(p,p.return),Cp(p);break;case 22:p.memoizedState===null&&Cp(p);break;case 30:Cp(p);break;default:Cp(p)}A=A.sibling}}function b0(A,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,M=A,Z=p,he=Z.flags;switch(Z.tag){case 0:case 11:case 15:b0(M,Z,b),$1(4,Z);break;case 1:if(b0(M,Z,b),E=Z,M=E.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(dt){Na(E,E.return,dt)}if(E=Z,M=E.updateQueue,M!==null){var Ce=E.stateNode;try{var Ve=M.shared.hiddenCallbacks;if(Ve!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Ve.length;M++)jn(Ve[M],Ce)}catch(dt){Na(E,E.return,dt)}}b&&he&64&&n7(Z),G1(Z,Z.return);break;case 27:o7(Z);case 26:case 5:b0(M,Z,b),b&&E===null&&he&4&&s7(Z),G1(Z,Z.return);break;case 12:b0(M,Z,b);break;case 13:b0(M,Z,b),b&&he&4&&f7(M,Z);break;case 22:Z.memoizedState===null&&b0(M,Z,b),G1(Z,Z.return);break;case 30:break;default:b0(M,Z,b)}p=p.sibling}}function t3(A,p){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&fp(b))}function r3(A,p){A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&fp(A))}function Ff(A,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)m7(A,p,b,E),p=p.sibling}function m7(A,p,b,E){var M=p.flags;switch(p.tag){case 0:case 11:case 15:Ff(A,p,b,E),M&2048&&$1(9,p);break;case 1:Ff(A,p,b,E);break;case 3:Ff(A,p,b,E),M&2048&&(A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&fp(A)));break;case 12:if(M&2048){Ff(A,p,b,E),A=p.stateNode;try{var Z=p.memoizedProps,he=Z.id,Ce=Z.onPostCommit;typeof Ce=="function"&&Ce(he,p.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Ve){Na(p,p.return,Ve)}}else Ff(A,p,b,E);break;case 13:Ff(A,p,b,E);break;case 23:break;case 22:Z=p.stateNode,he=p.alternate,p.memoizedState!==null?Z._visibility&2?Ff(A,p,b,E):q1(A,p):Z._visibility&2?Ff(A,p,b,E):(Z._visibility|=2,yx(A,p,b,E,(p.subtreeFlags&10256)!==0)),M&2048&&t3(he,p);break;case 24:Ff(A,p,b,E),M&2048&&r3(p.alternate,p);break;default:Ff(A,p,b,E)}}function yx(A,p,b,E,M){for(M=M&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var Z=A,he=p,Ce=b,Ve=E,dt=he.flags;switch(he.tag){case 0:case 11:case 15:yx(Z,he,Ce,Ve,M),$1(8,he);break;case 23:break;case 22:var _t=he.stateNode;he.memoizedState!==null?_t._visibility&2?yx(Z,he,Ce,Ve,M):q1(Z,he):(_t._visibility|=2,yx(Z,he,Ce,Ve,M)),M&&dt&2048&&t3(he.alternate,he);break;case 24:yx(Z,he,Ce,Ve,M),M&&dt&2048&&r3(he.alternate,he);break;default:yx(Z,he,Ce,Ve,M)}p=p.sibling}}function q1(A,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=A,E=p,M=E.flags;switch(E.tag){case 22:q1(b,E),M&2048&&t3(E.alternate,E);break;case 24:q1(b,E),M&2048&&r3(E.alternate,E);break;default:q1(b,E)}p=p.sibling}}var K1=8192;function wx(A){if(A.subtreeFlags&K1)for(A=A.child;A!==null;)p7(A),A=A.sibling}function p7(A){switch(A.tag){case 26:wx(A),A.flags&K1&&A.memoizedState!==null&&Fhe(Ed,A.memoizedState,A.memoizedProps);break;case 5:wx(A);break;case 3:case 4:var p=Ed;Ed=_E(A.stateNode.containerInfo),wx(A),Ed=p;break;case 22:A.memoizedState===null&&(p=A.alternate,p!==null&&p.memoizedState!==null?(p=K1,K1=16777216,wx(A),K1=p):wx(A));break;default:wx(A)}}function g7(A){var p=A.alternate;if(p!==null&&(A=p.child,A!==null)){p.child=null;do p=A.sibling,A.sibling=null,A=p;while(A!==null)}}function W1(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];zi=E,v7(E,A)}g7(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)x7(A),A=A.sibling}function x7(A){switch(A.tag){case 0:case 11:case 15:W1(A),A.flags&2048&&x0(9,A,A.return);break;case 3:W1(A);break;case 12:W1(A);break;case 22:var p=A.stateNode;A.memoizedState!==null&&p._visibility&2&&(A.return===null||A.return.tag!==13)?(p._visibility&=-3,hE(A)):W1(A);break;default:W1(A)}}function hE(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];zi=E,v7(E,A)}g7(A)}for(A=A.child;A!==null;){switch(p=A,p.tag){case 0:case 11:case 15:x0(8,p,p.return),hE(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,hE(p));break;default:hE(p)}A=A.sibling}}function v7(A,p){for(;zi!==null;){var b=zi;switch(b.tag){case 0:case 11:case 15:x0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:fp(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,zi=E;else e:for(b=A;zi!==null;){E=zi;var M=E.sibling,Z=E.return;if(u7(E),E===b){zi=null;break e}if(M!==null){M.return=Z,zi=M;break e}zi=Z}}}var WAe={getCacheForType:function(A){var p=Qs(Hs),b=p.data.get(A);return b===void 0&&(b=A(),p.data.set(A,b)),b}},XAe=typeof WeakMap=="function"?WeakMap:Map,la=0,Ia=null,vn=null,Tn=0,ca=0,kc=null,y0=!1,Nx=!1,n3=!1,GA=0,Ns=0,w0=0,_p=0,a3=0,_u=0,Ex=0,X1=null,ql=null,s3=!1,i3=0,mE=1/0,pE=null,N0=null,ho=0,E0=null,Cx=null,_x=0,o3=0,l3=null,b7=null,Y1=0,c3=null;function jc(){if((la&2)!==0&&Tn!==0)return Tn&-Tn;if(z.T!==null){var A=PA;return A!==0?A:p3()}return Ba()}function y7(){_u===0&&(_u=(Tn&536870912)===0||On?hs():536870912);var A=Cu.current;return A!==null&&(A.flags|=32),_u}function Bc(A,p,b){(A===Ia&&(ca===2||ca===9)||A.cancelPendingCommit!==null)&&(Sx(A,0),C0(A,Tn,_u,!1)),ja(A,b),((la&2)===0||A!==Ia)&&(A===Ia&&((la&2)===0&&(_p|=b),Ns===4&&C0(A,Tn,_u,!1)),Of(A))}function w7(A,p,b){if((la&6)!==0)throw Error(n(327));var E=!b&&(p&124)===0&&(p&A.expiredLanes)===0||_n(A,p),M=E?ZAe(A,p):f3(A,p,!0),Z=E;do{if(M===0){Nx&&!E&&C0(A,p,0,!1);break}else{if(b=A.current.alternate,Z&&!YAe(b)){M=f3(A,p,!1),Z=!1;continue}if(M===2){if(Z=p,A.errorRecoveryDisabledLanes&Z)var he=0;else he=A.pendingLanes&-536870913,he=he!==0?he:he&536870912?536870912:0;if(he!==0){p=he;e:{var Ce=A;M=X1;var Ve=Ce.current.memoizedState.isDehydrated;if(Ve&&(Sx(Ce,he).flags|=256),he=f3(Ce,he,!1),he!==2){if(n3&&!Ve){Ce.errorRecoveryDisabledLanes|=Z,_p|=Z,M=4;break e}Z=ql,ql=M,Z!==null&&(ql===null?ql=Z:ql.push.apply(ql,Z))}M=he}if(Z=!1,M!==2)continue}}if(M===1){Sx(A,0),C0(A,p,0,!0);break}e:{switch(E=A,Z=M,Z){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:C0(E,p,_u,!y0);break e;case 2:ql=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(M=i3+300-ye(),10<M)){if(C0(E,p,_u,!y0),Ur(E,0,!0)!==0)break e;E.timeoutHandle=Y7(N7.bind(null,E,b,ql,pE,s3,p,_u,_p,Ex,y0,Z,2,-0,0),M);break e}N7(E,b,ql,pE,s3,p,_u,_p,Ex,y0,Z,0,-0,0)}}break}while(!0);Of(A)}function N7(A,p,b,E,M,Z,he,Ce,Ve,dt,_t,Ft,ht,pt){if(A.timeoutHandle=-1,Ft=p.subtreeFlags,(Ft&8192||(Ft&16785408)===16785408)&&(ay={stylesheets:null,count:0,unsuspend:Ihe},p7(p),Ft=Ohe(),Ft!==null)){A.cancelPendingCommit=Ft(B7.bind(null,A,p,Z,b,E,M,he,Ce,Ve,_t,1,ht,pt)),C0(A,Z,he,!dt);return}B7(A,p,Z,b,E,M,he,Ce,Ve)}function YAe(A){for(var p=A;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var M=b[E],Z=M.getSnapshot;M=M.value;try{if(!si(Z(),M))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function C0(A,p,b,E){p&=~a3,p&=~_p,A.suspendedLanes|=p,A.pingedLanes&=~p,E&&(A.warmLanes|=p),E=A.expirationTimes;for(var M=p;0<M;){var Z=31-bt(M),he=1<<Z;E[Z]=-1,M&=~he}b!==0&&fr(A,b,p)}function gE(){return(la&6)===0?(J1(0),!1):!0}function u3(){if(vn!==null){if(ca===0)var A=vn.return;else A=vn,xd=oi=null,Ax(A),vx=null,H1=0,A=vn;for(;A!==null;)r7(A.alternate,A),A=A.return;vn=null}}function Sx(A,p){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,mhe(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),u3(),Ia=A,vn=b=vu(A.current,null),Tn=p,ca=0,kc=null,y0=!1,Nx=_n(A,p),n3=!1,Ex=_u=a3=_p=w0=Ns=0,ql=X1=null,s3=!1,(p&8)!==0&&(p|=p&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=p;0<E;){var M=31-bt(E),Z=1<<M;p|=A[M],E&=~Z}return GA=p,Hl(),b}function E7(A,p){Er=null,z.H=aE,p===ve||p===Ne?(p=rt(),ca=3):p===be?(p=rt(),ca=4):ca=p===HU?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,kc=p,vn===null&&(Ns=1,cE(A,cn(p,A.current)))}function C7(){var A=z.H;return z.H=aE,A===null?aE:A}function _7(){var A=z.A;return z.A=WAe,A}function d3(){Ns=4,y0||(Tn&4194048)!==Tn&&Cu.current!==null||(Nx=!0),(w0&134217727)===0&&(_p&134217727)===0||Ia===null||C0(Ia,Tn,_u,!1)}function f3(A,p,b){var E=la;la|=2;var M=C7(),Z=_7();(Ia!==A||Tn!==p)&&(pE=null,Sx(A,p)),p=!1;var he=Ns;e:do try{if(ca!==0&&vn!==null){var Ce=vn,Ve=kc;switch(ca){case 8:u3(),he=6;break e;case 3:case 2:case 9:case 6:Cu.current===null&&(p=!0);var dt=ca;if(ca=0,kc=null,kx(A,Ce,Ve,dt),b&&Nx){he=0;break e}break;default:dt=ca,ca=0,kc=null,kx(A,Ce,Ve,dt)}}JAe(),he=Ns;break}catch(_t){E7(A,_t)}while(!0);return p&&A.shellSuspendCounter++,xd=oi=null,la=E,z.H=M,z.A=Z,vn===null&&(Ia=null,Tn=0,Hl()),he}function JAe(){for(;vn!==null;)S7(vn)}function ZAe(A,p){var b=la;la|=2;var E=C7(),M=_7();Ia!==A||Tn!==p?(pE=null,mE=ye()+500,Sx(A,p)):Nx=_n(A,p);e:do try{if(ca!==0&&vn!==null){p=vn;var Z=kc;t:switch(ca){case 1:ca=0,kc=null,kx(A,p,Z,1);break;case 2:case 9:if(Pe(Z)){ca=0,kc=null,k7(p);break}p=function(){ca!==2&&ca!==9||Ia!==A||(ca=7),Of(A)},Z.then(p,p);break e;case 3:ca=7;break e;case 4:ca=5;break e;case 7:Pe(Z)?(ca=0,kc=null,k7(p)):(ca=0,kc=null,kx(A,p,Z,7));break;case 5:var he=null;switch(vn.tag){case 26:he=vn.memoizedState;case 5:case 27:var Ce=vn;if(!he||c9(he)){ca=0,kc=null;var Ve=Ce.sibling;if(Ve!==null)vn=Ve;else{var dt=Ce.return;dt!==null?(vn=dt,xE(dt)):vn=null}break t}}ca=0,kc=null,kx(A,p,Z,5);break;case 6:ca=0,kc=null,kx(A,p,Z,6);break;case 8:u3(),Ns=6;break e;default:throw Error(n(462))}}ehe();break}catch(_t){E7(A,_t)}while(!0);return xd=oi=null,z.H=E,z.A=M,la=b,vn!==null?0:(Ia=null,Tn=0,Hl(),Ns)}function ehe(){for(;vn!==null&&!Se();)S7(vn)}function S7(A){var p=e7(A.alternate,A,GA);A.memoizedProps=A.pendingProps,p===null?xE(A):vn=p}function k7(A){var p=A,b=p.alternate;switch(p.tag){case 15:case 0:p=KU(b,p,p.pendingProps,p.type,void 0,Tn);break;case 11:p=KU(b,p,p.pendingProps,p.type.render,p.ref,Tn);break;case 5:Ax(p);default:r7(b,p),p=vn=lp(p,GA),p=e7(b,p,GA)}A.memoizedProps=A.pendingProps,p===null?xE(A):vn=p}function kx(A,p,b,E){xd=oi=null,Ax(p),vx=null,H1=0;var M=p.return;try{if(VAe(A,M,p,b,Tn)){Ns=1,cE(A,cn(b,A.current)),vn=null;return}}catch(Z){if(M!==null)throw vn=M,Z;Ns=1,cE(A,cn(b,A.current)),vn=null;return}p.flags&32768?(On||E===1?A=!0:Nx||(Tn&536870912)!==0?A=!1:(y0=A=!0,(E===2||E===9||E===3||E===6)&&(E=Cu.current,E!==null&&E.tag===13&&(E.flags|=16384))),j7(p,A)):xE(p)}function xE(A){var p=A;do{if((p.flags&32768)!==0){j7(p,y0);return}A=p.return;var b=$Ae(p.alternate,p,GA);if(b!==null){vn=b;return}if(p=p.sibling,p!==null){vn=p;return}vn=p=A}while(p!==null);Ns===0&&(Ns=5)}function j7(A,p){do{var b=GAe(A.alternate,A);if(b!==null){b.flags&=32767,vn=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(A=A.sibling,A!==null)){vn=A;return}vn=A=b}while(A!==null);Ns=6,vn=null}function B7(A,p,b,E,M,Z,he,Ce,Ve){A.cancelPendingCommit=null;do vE();while(ho!==0);if((la&6)!==0)throw Error(n(327));if(p!==null){if(p===A.current)throw Error(n(177));if(Z=p.lanes|p.childLanes,Z|=ns,Fr(A,b,Z,he,Ce,Ve),A===Ia&&(vn=Ia=null,Tn=0),Cx=p,E0=A,_x=b,o3=Z,l3=M,b7=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,ahe(we,function(){return D7(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=z.T,z.T=null,M=W.p,W.p=2,he=la,la|=4;try{qAe(A,p,b)}finally{la=he,W.p=M,z.T=E}}ho=1,T7(),I7(),F7()}}function T7(){if(ho===1){ho=0;var A=E0,p=Cx,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=z.T,z.T=null;var E=W.p;W.p=2;var M=la;la|=4;try{A7(p,A);var Z=E3,he=co(A.containerInfo),Ce=Z.focusedElem,Ve=Z.selectionRange;if(he!==Ce&&Ce&&Ce.ownerDocument&&mf(Ce.ownerDocument.documentElement,Ce)){if(Ve!==null&&_i(Ce)){var dt=Ve.start,_t=Ve.end;if(_t===void 0&&(_t=dt),"selectionStart"in Ce)Ce.selectionStart=dt,Ce.selectionEnd=Math.min(_t,Ce.value.length);else{var Ft=Ce.ownerDocument||document,ht=Ft&&Ft.defaultView||window;if(ht.getSelection){var pt=ht.getSelection(),Qr=Ce.textContent.length,kr=Math.min(Ve.start,Qr),xa=Ve.end===void 0?kr:Math.min(Ve.end,Qr);!pt.extend&&kr>xa&&(he=xa,xa=kr,kr=he);var at=ud(Ce,kr),Xe=ud(Ce,xa);if(at&&Xe&&(pt.rangeCount!==1||pt.anchorNode!==at.node||pt.anchorOffset!==at.offset||pt.focusNode!==Xe.node||pt.focusOffset!==Xe.offset)){var lt=Ft.createRange();lt.setStart(at.node,at.offset),pt.removeAllRanges(),kr>xa?(pt.addRange(lt),pt.extend(Xe.node,Xe.offset)):(lt.setEnd(Xe.node,Xe.offset),pt.addRange(lt))}}}}for(Ft=[],pt=Ce;pt=pt.parentNode;)pt.nodeType===1&&Ft.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof Ce.focus=="function"&&Ce.focus(),Ce=0;Ce<Ft.length;Ce++){var jt=Ft[Ce];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}TE=!!N3,E3=N3=null}finally{la=M,W.p=E,z.T=b}}A.current=p,ho=2}}function I7(){if(ho===2){ho=0;var A=E0,p=Cx,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=z.T,z.T=null;var E=W.p;W.p=2;var M=la;la|=4;try{c7(A,p.alternate,p)}finally{la=M,W.p=E,z.T=b}}ho=3}}function F7(){if(ho===4||ho===3){ho=0,fe();var A=E0,p=Cx,b=_x,E=b7;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?ho=5:(ho=0,Cx=E0=null,O7(A,A.pendingLanes));var M=A.pendingLanes;if(M===0&&(N0=null),Yn(b),p=p.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ft,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=z.T,M=W.p,W.p=2,z.T=null;try{for(var Z=A.onRecoverableError,he=0;he<E.length;he++){var Ce=E[he];Z(Ce.value,{componentStack:Ce.stack})}}finally{z.T=p,W.p=M}}(_x&3)!==0&&vE(),Of(A),M=A.pendingLanes,(b&4194090)!==0&&(M&42)!==0?A===c3?Y1++:(Y1=0,c3=A):Y1=0,J1(0)}}function O7(A,p){(A.pooledCacheLanes&=p)===0&&(p=A.pooledCache,p!=null&&(A.pooledCache=null,fp(p)))}function vE(A){return T7(),I7(),F7(),D7()}function D7(){if(ho!==5)return!1;var A=E0,p=o3;o3=0;var b=Yn(_x),E=z.T,M=W.p;try{W.p=32>b?32:b,z.T=null,b=l3,l3=null;var Z=E0,he=_x;if(ho=0,Cx=E0=null,_x=0,(la&6)!==0)throw Error(n(331));var Ce=la;if(la|=4,x7(Z.current),m7(Z,Z.current,he,b),la=Ce,J1(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ft,Z)}catch{}return!0}finally{W.p=M,z.T=E,O7(A,p)}}function P7(A,p,b){p=cn(b,p),p=Qj(A.stateNode,p,2),A=It(A,p,2),A!==null&&(ja(A,2),Of(A))}function Na(A,p,b){if(A.tag===3)P7(A,A,b);else for(;p!==null;){if(p.tag===3){P7(p,A,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(N0===null||!N0.has(E))){A=cn(b,A),b=UU(2),E=It(p,b,2),E!==null&&(QU(b,E,p,A),ja(E,2),Of(E));break}}p=p.return}}function A3(A,p,b){var E=A.pingCache;if(E===null){E=A.pingCache=new XAe;var M=new Set;E.set(p,M)}else M=E.get(p),M===void 0&&(M=new Set,E.set(p,M));M.has(b)||(n3=!0,M.add(b),A=the.bind(null,A,p,b),p.then(A,A))}function the(A,p,b){var E=A.pingCache;E!==null&&E.delete(p),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Ia===A&&(Tn&b)===b&&(Ns===4||Ns===3&&(Tn&62914560)===Tn&&300>ye()-i3?(la&2)===0&&Sx(A,0):a3|=b,Ex===Tn&&(Ex=0)),Of(A)}function R7(A,p){p===0&&(p=qr()),A=fd(A,p),A!==null&&(ja(A,p),Of(A))}function rhe(A){var p=A.memoizedState,b=0;p!==null&&(b=p.retryLane),R7(A,b)}function nhe(A,p){var b=0;switch(A.tag){case 13:var E=A.stateNode,M=A.memoizedState;M!==null&&(b=M.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(p),R7(A,b)}function ahe(A,p){return Oe(A,p)}var bE=null,jx=null,h3=!1,yE=!1,m3=!1,Sp=0;function Of(A){A!==jx&&A.next===null&&(jx===null?bE=jx=A:jx=jx.next=A),yE=!0,h3||(h3=!0,ihe())}function J1(A,p){if(!m3&&yE){m3=!0;do for(var b=!1,E=bE;E!==null;){if(A!==0){var M=E.pendingLanes;if(M===0)var Z=0;else{var he=E.suspendedLanes,Ce=E.pingedLanes;Z=(1<<31-bt(42|A)+1)-1,Z&=M&~(he&~Ce),Z=Z&201326741?Z&201326741|1:Z?Z|2:0}Z!==0&&(b=!0,Q7(E,Z))}else Z=Tn,Z=Ur(E,E===Ia?Z:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(Z&3)===0||_n(E,Z)||(b=!0,Q7(E,Z));E=E.next}while(b);m3=!1}}function she(){L7()}function L7(){yE=h3=!1;var A=0;Sp!==0&&(hhe()&&(A=Sp),Sp=0);for(var p=ye(),b=null,E=bE;E!==null;){var M=E.next,Z=M7(E,p);Z===0?(E.next=null,b===null?bE=M:b.next=M,M===null&&(jx=b)):(b=E,(A!==0||(Z&3)!==0)&&(yE=!0)),E=M}J1(A)}function M7(A,p){for(var b=A.suspendedLanes,E=A.pingedLanes,M=A.expirationTimes,Z=A.pendingLanes&-62914561;0<Z;){var he=31-bt(Z),Ce=1<<he,Ve=M[he];Ve===-1?((Ce&b)===0||(Ce&E)!==0)&&(M[he]=jr(Ce,p)):Ve<=p&&(A.expiredLanes|=Ce),Z&=~Ce}if(p=Ia,b=Tn,b=Ur(A,A===p?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,b===0||A===p&&(ca===2||ca===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&Te(E),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||_n(A,b)){if(p=b&-b,p===A.callbackPriority)return p;switch(E!==null&&Te(E),Yn(b)){case 2:case 8:b=ue;break;case 32:b=we;break;case 268435456:b=He;break;default:b=we}return E=U7.bind(null,A),b=Oe(b,E),A.callbackPriority=p,A.callbackNode=b,p}return E!==null&&E!==null&&Te(E),A.callbackPriority=2,A.callbackNode=null,2}function U7(A,p){if(ho!==0&&ho!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(vE()&&A.callbackNode!==b)return null;var E=Tn;return E=Ur(A,A===Ia?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(w7(A,E,p),M7(A,ye()),A.callbackNode!=null&&A.callbackNode===b?U7.bind(null,A):null)}function Q7(A,p){if(vE())return null;w7(A,p,!0)}function ihe(){phe(function(){(la&6)!==0?Oe(Qe,she):L7()})}function p3(){return Sp===0&&(Sp=hs()),Sp}function H7(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:pc(""+A)}function V7(A,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,A.id&&b.setAttribute("form",A.id),p.parentNode.insertBefore(b,p),A=new FormData(A),b.parentNode.removeChild(b),A}function ohe(A,p,b,E,M){if(p==="submit"&&b&&b.stateNode===M){var Z=H7((M[ln]||null).action),he=E.submitter;he&&(p=(p=he[ln]||null)?H7(p.formAction):he.getAttribute("formAction"),p!==null&&(Z=p,he=null));var Ce=new uu("action","action",null,E,M);A.push({event:Ce,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Sp!==0){var Ve=he?V7(M,he):new FormData(M);Eu(b,{pending:!0,data:Ve,method:M.method,action:Z},null,Ve)}}else typeof Z=="function"&&(Ce.preventDefault(),Ve=he?V7(M,he):new FormData(M),Eu(b,{pending:!0,data:Ve,method:M.method,action:Z},Z,Ve))},currentTarget:M}]})}}for(var g3=0;g3<BA.length;g3++){var x3=BA[g3],lhe=x3.toLowerCase(),che=x3[0].toUpperCase()+x3.slice(1);Wa(lhe,"on"+che)}Wa(s0,"onAnimationEnd"),Wa(gf,"onAnimationIteration"),Wa(xf,"onAnimationStart"),Wa("dblclick","onDoubleClick"),Wa("focusin","onFocus"),Wa("focusout","onBlur"),Wa(vf,"onTransitionRun"),Wa(jA,"onTransitionStart"),Wa(i0,"onTransitionCancel"),Wa(bf,"onTransitionEnd"),yt("onMouseEnter",["mouseout","mouseover"]),yt("onMouseLeave",["mouseout","mouseover"]),yt("onPointerEnter",["pointerout","pointerover"]),yt("onPointerLeave",["pointerout","pointerover"]),vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vt("onBeforeInput",["compositionend","keypress","textInput","paste"]),vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Z1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uhe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Z1));function z7(A,p){p=(p&4)!==0;for(var b=0;b<A.length;b++){var E=A[b],M=E.event;E=E.listeners;e:{var Z=void 0;if(p)for(var he=E.length-1;0<=he;he--){var Ce=E[he],Ve=Ce.instance,dt=Ce.currentTarget;if(Ce=Ce.listener,Ve!==Z&&M.isPropagationStopped())break e;Z=Ce,M.currentTarget=dt;try{Z(M)}catch(_t){lE(_t)}M.currentTarget=null,Z=Ve}else for(he=0;he<E.length;he++){if(Ce=E[he],Ve=Ce.instance,dt=Ce.currentTarget,Ce=Ce.listener,Ve!==Z&&M.isPropagationStopped())break e;Z=Ce,M.currentTarget=dt;try{Z(M)}catch(_t){lE(_t)}M.currentTarget=null,Z=Ve}}}}function bn(A,p){var b=p[Kn];b===void 0&&(b=p[Kn]=new Set);var E=A+"__bubble";b.has(E)||($7(p,A,2,!1),b.add(E))}function v3(A,p,b){var E=0;p&&(E|=4),$7(b,A,E,p)}var wE="_reactListening"+Math.random().toString(36).slice(2);function b3(A){if(!A[wE]){A[wE]=!0,ze.forEach(function(b){b!=="selectionchange"&&(uhe.has(b)||v3(b,!1,A),v3(b,!0,A))});var p=A.nodeType===9?A:A.ownerDocument;p===null||p[wE]||(p[wE]=!0,v3("selectionchange",!1,p))}}function $7(A,p,b,E){switch(m9(p)){case 2:var M=Rhe;break;case 8:M=Lhe;break;default:M=O3}b=M.bind(null,p,b,A),M=void 0,!lo||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(M=!0),E?M!==void 0?A.addEventListener(p,b,{capture:!0,passive:M}):A.addEventListener(p,b,!0):M!==void 0?A.addEventListener(p,b,{passive:M}):A.addEventListener(p,b,!1)}function y3(A,p,b,E,M){var Z=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var he=E.tag;if(he===3||he===4){var Ce=E.stateNode.containerInfo;if(Ce===M)break;if(he===4)for(he=E.return;he!==null;){var Ve=he.tag;if((Ve===3||Ve===4)&&he.stateNode.containerInfo===M)return;he=he.return}for(;Ce!==null;){if(he=me(Ce),he===null)return;if(Ve=he.tag,Ve===5||Ve===6||Ve===26||Ve===27){E=Z=he;continue e}Ce=Ce.parentNode}}E=E.return}e0(function(){var dt=Z,_t=ia(b),Ft=[];e:{var ht=dd.get(A);if(ht!==void 0){var pt=uu,Qr=A;switch(A){case"keypress":if(Io(b)===0)break e;case"keydown":case"keyup":pt=bc;break;case"focusin":Qr="focus",pt=fu;break;case"focusout":Qr="blur",pt=fu;break;case"beforeblur":case"afterblur":pt=fu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=df;break;case s0:case gf:case xf:pt=lf;break;case bf:pt=ge;break;case"scroll":case"scrollend":pt=NA;break;case"wheel":pt=Ge;break;case"copy":case"cut":case"paste":pt=cf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=cd;break;case"toggle":case"beforetoggle":pt=wt}var kr=(p&4)!==0,xa=!kr&&(A==="scroll"||A==="scrollend"),at=kr?ht!==null?ht+"Capture":null:ht;kr=[];for(var Xe=dt,lt;Xe!==null;){var jt=Xe;if(lt=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||lt===null||at===null||(jt=Li(Xe,at),jt!=null&&kr.push(ey(Xe,jt,lt))),xa)break;Xe=Xe.return}0<kr.length&&(ht=new pt(ht,Qr,null,b,_t),Ft.push({event:ht,listeners:kr}))}}if((p&7)===0){e:{if(ht=A==="mouseover"||A==="pointerover",pt=A==="mouseout"||A==="pointerout",ht&&b!==Ol&&(Qr=b.relatedTarget||b.fromElement)&&(me(Qr)||Qr[Fn]))break e;if((pt||ht)&&(ht=_t.window===_t?_t:(ht=_t.ownerDocument)?ht.defaultView||ht.parentWindow:window,pt?(Qr=b.relatedTarget||b.toElement,pt=dt,Qr=Qr?me(Qr):null,Qr!==null&&(xa=s(Qr),kr=Qr.tag,Qr!==xa||kr!==5&&kr!==27&&kr!==6)&&(Qr=null)):(pt=null,Qr=dt),pt!==Qr)){if(kr=vs,jt="onMouseLeave",at="onMouseEnter",Xe="mouse",(A==="pointerout"||A==="pointerover")&&(kr=cd,jt="onPointerLeave",at="onPointerEnter",Xe="pointer"),xa=pt==null?ht:_e(pt),lt=Qr==null?ht:_e(Qr),ht=new kr(jt,Xe+"leave",pt,b,_t),ht.target=xa,ht.relatedTarget=lt,jt=null,me(_t)===dt&&(kr=new kr(at,Xe+"enter",Qr,b,_t),kr.target=lt,kr.relatedTarget=xa,jt=kr),xa=jt,pt&&Qr)t:{for(kr=pt,at=Qr,Xe=0,lt=kr;lt;lt=Bx(lt))Xe++;for(lt=0,jt=at;jt;jt=Bx(jt))lt++;for(;0<Xe-lt;)kr=Bx(kr),Xe--;for(;0<lt-Xe;)at=Bx(at),lt--;for(;Xe--;){if(kr===at||at!==null&&kr===at.alternate)break t;kr=Bx(kr),at=Bx(at)}kr=null}else kr=null;pt!==null&&G7(Ft,ht,pt,kr,!1),Qr!==null&&xa!==null&&G7(Ft,xa,Qr,kr,!0)}}e:{if(ht=dt?_e(dt):window,pt=ht.nodeName&&ht.nodeName.toLowerCase(),pt==="select"||pt==="input"&&ht.type==="file")var cr=n0;else if(Zn(ht))if(CA)cr=sx;else{cr=_1;var mn=Oo}else pt=ht.nodeName,!pt||pt.toLowerCase()!=="input"||ht.type!=="checkbox"&&ht.type!=="radio"?dt&&yA(dt.elementType)&&(cr=n0):cr=ip;if(cr&&(cr=cr(A,dt))){Ul(Ft,cr,b,_t);break e}mn&&mn(A,ht,dt),A==="focusout"&&dt&&ht.type==="number"&&dt.memoizedProps.value!=null&&ou(ht,"number",ht.value)}switch(mn=dt?_e(dt):window,A){case"focusin":(Zn(mn)||mn.contentEditable==="true")&&(Do=mn,yc=dt,gu=null);break;case"focusout":gu=yc=Do=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Ka(Ft,b,_t);break;case"selectionchange":if(pf)break;case"keydown":case"keyup":Ka(Ft,b,_t)}var gr;if(qt)e:{switch(A){case"compositionstart":var Br="onCompositionStart";break e;case"compositionend":Br="onCompositionEnd";break e;case"compositionupdate":Br="onCompositionUpdate";break e}Br=void 0}else Sr?ut(A,b)&&(Br="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Br="onCompositionStart");Br&&(ce&&b.locale!=="ko"&&(Sr||Br!=="onCompositionStart"?Br==="onCompositionEnd"&&Sr&&(gr=wA()):(To=_t,cu="value"in To?To.value:To.textContent,Sr=!0)),mn=NE(dt,Br),0<mn.length&&(Br=new id(Br,A,null,b,_t),Ft.push({event:Br,listeners:mn}),gr?Br.data=gr:(gr=Mt(b),gr!==null&&(Br.data=gr)))),(gr=se?hn(A,b):Vr(A,b))&&(Br=NE(dt,"onBeforeInput"),0<Br.length&&(mn=new id("onBeforeInput","beforeinput",null,b,_t),Ft.push({event:mn,listeners:Br}),mn.data=gr)),ohe(Ft,A,dt,b,_t)}z7(Ft,p)})}function ey(A,p,b){return{instance:A,listener:p,currentTarget:b}}function NE(A,p){for(var b=p+"Capture",E=[];A!==null;){var M=A,Z=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||Z===null||(M=Li(A,b),M!=null&&E.unshift(ey(A,M,Z)),M=Li(A,p),M!=null&&E.push(ey(A,M,Z))),A.tag===3)return E;A=A.return}return[]}function Bx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function G7(A,p,b,E,M){for(var Z=p._reactName,he=[];b!==null&&b!==E;){var Ce=b,Ve=Ce.alternate,dt=Ce.stateNode;if(Ce=Ce.tag,Ve!==null&&Ve===E)break;Ce!==5&&Ce!==26&&Ce!==27||dt===null||(Ve=dt,M?(dt=Li(b,Z),dt!=null&&he.unshift(ey(b,dt,Ve))):M||(dt=Li(b,Z),dt!=null&&he.push(ey(b,dt,Ve)))),b=b.return}he.length!==0&&A.push({event:p,listeners:he})}var dhe=/\r\n?/g,fhe=/\u0000|\uFFFD/g;function q7(A){return(typeof A=="string"?A:""+A).replace(dhe,`
`).replace(fhe,"")}function K7(A,p){return p=q7(p),q7(A)===p}function EE(){}function ga(A,p,b,E,M,Z){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||jo(A,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&jo(A,""+E);break;case"className":Zr(A,"class",E);break;case"tabIndex":Zr(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Zr(A,b,E);break;case"style":bA(A,E,Z);break;case"data":if(p!=="object"){Zr(A,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){A.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=pc(""+E),A.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Z=="function"&&(b==="formAction"?(p!=="input"&&ga(A,p,"name",M.name,M,null),ga(A,p,"formEncType",M.formEncType,M,null),ga(A,p,"formMethod",M.formMethod,M,null),ga(A,p,"formTarget",M.formTarget,M,null)):(ga(A,p,"encType",M.encType,M,null),ga(A,p,"method",M.method,M,null),ga(A,p,"target",M.target,M,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(b);break}E=pc(""+E),A.setAttribute(b,E);break;case"onClick":E!=null&&(A.onclick=EE);break;case"onScroll":E!=null&&bn("scroll",A);break;case"onScrollEnd":E!=null&&bn("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}b=pc(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""+E):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":E===!0?A.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(b,E):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(b,E):A.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(b):A.setAttribute(b,E);break;case"popover":bn("beforetoggle",A),bn("toggle",A),Jr(A,"popover",E);break;case"xlinkActuate":an(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":an(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":an(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":an(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":an(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":an(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":an(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":an(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":an(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Jr(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=mc.get(b)||b,Jr(A,b,E))}}function w3(A,p,b,E,M,Z){switch(b){case"style":bA(A,E,Z);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"children":typeof E=="string"?jo(A,E):(typeof E=="number"||typeof E=="bigint")&&jo(A,""+E);break;case"onScroll":E!=null&&bn("scroll",A);break;case"onScrollEnd":E!=null&&bn("scrollend",A);break;case"onClick":E!=null&&(A.onclick=EE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qe.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(M=b.endsWith("Capture"),p=b.slice(2,M?b.length-7:void 0),Z=A[ln]||null,Z=Z!=null?Z[b]:null,typeof Z=="function"&&A.removeEventListener(p,Z,M),typeof E=="function")){typeof Z!="function"&&Z!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(p,E,M);break e}b in A?A[b]=E:E===!0?A.setAttribute(b,""):Jr(A,b,E)}}}function mo(A,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bn("error",A),bn("load",A);var E=!1,M=!1,Z;for(Z in b)if(b.hasOwnProperty(Z)){var he=b[Z];if(he!=null)switch(Z){case"src":E=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ga(A,p,Z,he,b,null)}}M&&ga(A,p,"srcSet",b.srcSet,b,null),E&&ga(A,p,"src",b.src,b,null);return;case"input":bn("invalid",A);var Ce=Z=he=M=null,Ve=null,dt=null;for(E in b)if(b.hasOwnProperty(E)){var _t=b[E];if(_t!=null)switch(E){case"name":M=_t;break;case"type":he=_t;break;case"checked":Ve=_t;break;case"defaultChecked":dt=_t;break;case"value":Z=_t;break;case"defaultValue":Ce=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(n(137,p));break;default:ga(A,p,E,_t,b,null)}}iu(A,Z,Ce,Ve,dt,he,M,!1),su(A);return;case"select":bn("invalid",A),E=he=Z=null;for(M in b)if(b.hasOwnProperty(M)&&(Ce=b[M],Ce!=null))switch(M){case"value":Z=Ce;break;case"defaultValue":he=Ce;break;case"multiple":E=Ce;default:ga(A,p,M,Ce,b,null)}p=Z,b=he,A.multiple=!!E,p!=null?Fl(A,!!E,p,!1):b!=null&&Fl(A,!!E,b,!0);return;case"textarea":bn("invalid",A),Z=M=E=null;for(he in b)if(b.hasOwnProperty(he)&&(Ce=b[he],Ce!=null))switch(he){case"value":E=Ce;break;case"defaultValue":M=Ce;break;case"children":Z=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(n(91));break;default:ga(A,p,he,Ce,b,null)}lu(A,E,M,Z),su(A);return;case"option":for(Ve in b)if(b.hasOwnProperty(Ve)&&(E=b[Ve],E!=null))switch(Ve){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ga(A,p,Ve,E,b,null)}return;case"dialog":bn("beforetoggle",A),bn("toggle",A),bn("cancel",A),bn("close",A);break;case"iframe":case"object":bn("load",A);break;case"video":case"audio":for(E=0;E<Z1.length;E++)bn(Z1[E],A);break;case"image":bn("error",A),bn("load",A);break;case"details":bn("toggle",A);break;case"embed":case"source":case"link":bn("error",A),bn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in b)if(b.hasOwnProperty(dt)&&(E=b[dt],E!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ga(A,p,dt,E,b,null)}return;default:if(yA(p)){for(_t in b)b.hasOwnProperty(_t)&&(E=b[_t],E!==void 0&&w3(A,p,_t,E,b,void 0));return}}for(Ce in b)b.hasOwnProperty(Ce)&&(E=b[Ce],E!=null&&ga(A,p,Ce,E,b,null))}function Ahe(A,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,Z=null,he=null,Ce=null,Ve=null,dt=null,_t=null;for(pt in b){var Ft=b[pt];if(b.hasOwnProperty(pt)&&Ft!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":Ve=Ft;default:E.hasOwnProperty(pt)||ga(A,p,pt,null,E,Ft)}}for(var ht in E){var pt=E[ht];if(Ft=b[ht],E.hasOwnProperty(ht)&&(pt!=null||Ft!=null))switch(ht){case"type":Z=pt;break;case"name":M=pt;break;case"checked":dt=pt;break;case"defaultChecked":_t=pt;break;case"value":he=pt;break;case"defaultValue":Ce=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(n(137,p));break;default:pt!==Ft&&ga(A,p,ht,pt,E,Ft)}}Ei(A,he,Ce,Ve,dt,_t,Z,M);return;case"select":pt=he=Ce=ht=null;for(Z in b)if(Ve=b[Z],b.hasOwnProperty(Z)&&Ve!=null)switch(Z){case"value":break;case"multiple":pt=Ve;default:E.hasOwnProperty(Z)||ga(A,p,Z,null,E,Ve)}for(M in E)if(Z=E[M],Ve=b[M],E.hasOwnProperty(M)&&(Z!=null||Ve!=null))switch(M){case"value":ht=Z;break;case"defaultValue":Ce=Z;break;case"multiple":he=Z;default:Z!==Ve&&ga(A,p,M,Z,E,Ve)}p=Ce,b=he,E=pt,ht!=null?Fl(A,!!b,ht,!1):!!E!=!!b&&(p!=null?Fl(A,!!b,p,!0):Fl(A,!!b,b?[]:"",!1));return;case"textarea":pt=ht=null;for(Ce in b)if(M=b[Ce],b.hasOwnProperty(Ce)&&M!=null&&!E.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:ga(A,p,Ce,null,E,M)}for(he in E)if(M=E[he],Z=b[he],E.hasOwnProperty(he)&&(M!=null||Z!=null))switch(he){case"value":ht=M;break;case"defaultValue":pt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==Z&&ga(A,p,he,M,E,Z)}Ln(A,ht,pt);return;case"option":for(var Qr in b)if(ht=b[Qr],b.hasOwnProperty(Qr)&&ht!=null&&!E.hasOwnProperty(Qr))switch(Qr){case"selected":A.selected=!1;break;default:ga(A,p,Qr,null,E,ht)}for(Ve in E)if(ht=E[Ve],pt=b[Ve],E.hasOwnProperty(Ve)&&ht!==pt&&(ht!=null||pt!=null))switch(Ve){case"selected":A.selected=ht&&typeof ht!="function"&&typeof ht!="symbol";break;default:ga(A,p,Ve,ht,E,pt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kr in b)ht=b[kr],b.hasOwnProperty(kr)&&ht!=null&&!E.hasOwnProperty(kr)&&ga(A,p,kr,null,E,ht);for(dt in E)if(ht=E[dt],pt=b[dt],E.hasOwnProperty(dt)&&ht!==pt&&(ht!=null||pt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,p));break;default:ga(A,p,dt,ht,E,pt)}return;default:if(yA(p)){for(var xa in b)ht=b[xa],b.hasOwnProperty(xa)&&ht!==void 0&&!E.hasOwnProperty(xa)&&w3(A,p,xa,void 0,E,ht);for(_t in E)ht=E[_t],pt=b[_t],!E.hasOwnProperty(_t)||ht===pt||ht===void 0&&pt===void 0||w3(A,p,_t,ht,E,pt);return}}for(var at in b)ht=b[at],b.hasOwnProperty(at)&&ht!=null&&!E.hasOwnProperty(at)&&ga(A,p,at,null,E,ht);for(Ft in E)ht=E[Ft],pt=b[Ft],!E.hasOwnProperty(Ft)||ht===pt||ht==null&&pt==null||ga(A,p,Ft,ht,E,pt)}var N3=null,E3=null;function CE(A){return A.nodeType===9?A:A.ownerDocument}function W7(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X7(A,p){if(A===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&p==="foreignObject"?0:A}function C3(A,p){return A==="textarea"||A==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var _3=null;function hhe(){var A=window.event;return A&&A.type==="popstate"?A===_3?!1:(_3=A,!0):(_3=null,!1)}var Y7=typeof setTimeout=="function"?setTimeout:void 0,mhe=typeof clearTimeout=="function"?clearTimeout:void 0,J7=typeof Promise=="function"?Promise:void 0,phe=typeof queueMicrotask=="function"?queueMicrotask:typeof J7<"u"?function(A){return J7.resolve(null).then(A).catch(ghe)}:Y7;function ghe(A){setTimeout(function(){throw A})}function _0(A){return A==="head"}function Z7(A,p){var b=p,E=0,M=0;do{var Z=b.nextSibling;if(A.removeChild(b),Z&&Z.nodeType===8)if(b=Z.data,b==="/$"){if(0<E&&8>E){b=E;var he=A.ownerDocument;if(b&1&&ty(he.documentElement),b&2&&ty(he.body),b&4)for(b=he.head,ty(b),he=b.firstChild;he;){var Ce=he.nextSibling,Ve=he.nodeName;he[Be]||Ve==="SCRIPT"||Ve==="STYLE"||Ve==="LINK"&&he.rel.toLowerCase()==="stylesheet"||b.removeChild(he),he=Ce}}if(M===0){A.removeChild(Z),cy(p);return}M--}else b==="$"||b==="$?"||b==="$!"?M++:E=b.charCodeAt(0)-48;else E=0;b=Z}while(b);cy(p)}function S3(A){var p=A.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":S3(b),Fe(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function xhe(A,p,b,E){for(;A.nodeType===1;){var M=b;if(A.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[Be])switch(p){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(Z=A.getAttribute("rel"),Z==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(Z!==M.rel||A.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||A.getAttribute("title")!==(M.title==null?null:M.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(Z=A.getAttribute("src"),(Z!==(M.src==null?null:M.src)||A.getAttribute("type")!==(M.type==null?null:M.type)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&Z&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(p==="input"&&A.type==="hidden"){var Z=M.name==null?null:""+M.name;if(M.type==="hidden"&&A.getAttribute("name")===Z)return A}else return A;if(A=Cd(A.nextSibling),A===null)break}return null}function vhe(A,p,b){if(p==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=Cd(A.nextSibling),A===null))return null;return A}function k3(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function bhe(A,p){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function Cd(A){for(;A!=null;A=A.nextSibling){var p=A.nodeType;if(p===1||p===3)break;if(p===8){if(p=A.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return A}var j3=null;function e9(A){A=A.previousSibling;for(var p=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return A;p--}else b==="/$"&&p++}A=A.previousSibling}return null}function t9(A,p,b){switch(p=CE(b),A){case"html":if(A=p.documentElement,!A)throw Error(n(452));return A;case"head":if(A=p.head,!A)throw Error(n(453));return A;case"body":if(A=p.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function ty(A){for(var p=A.attributes;p.length;)A.removeAttributeNode(p[0]);Fe(A)}var Su=new Map,r9=new Set;function _E(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var qA=W.d;W.d={f:yhe,r:whe,D:Nhe,C:Ehe,L:Che,m:_he,X:khe,S:She,M:jhe};function yhe(){var A=qA.f(),p=gE();return A||p}function whe(A){var p=Ae(A);p!==null&&p.tag===5&&p.type==="form"?wp(p):qA.r(A)}var Tx=typeof document>"u"?null:document;function n9(A,p,b){var E=Tx;if(E&&typeof p=="string"&&p){var M=Sn(p);M='link[rel="'+A+'"][href="'+M+'"]',typeof b=="string"&&(M+='[crossorigin="'+b+'"]'),r9.has(M)||(r9.add(M),A={rel:A,crossOrigin:b,href:p},E.querySelector(M)===null&&(p=E.createElement("link"),mo(p,"link",A),Ie(p),E.head.appendChild(p)))}}function Nhe(A){qA.D(A),n9("dns-prefetch",A,null)}function Ehe(A,p){qA.C(A,p),n9("preconnect",A,p)}function Che(A,p,b){qA.L(A,p,b);var E=Tx;if(E&&A&&p){var M='link[rel="preload"][as="'+Sn(p)+'"]';p==="image"&&b&&b.imageSrcSet?(M+='[imagesrcset="'+Sn(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(M+='[imagesizes="'+Sn(b.imageSizes)+'"]')):M+='[href="'+Sn(A)+'"]';var Z=M;switch(p){case"style":Z=Ix(A);break;case"script":Z=Fx(A)}Su.has(Z)||(A=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:A,as:p},b),Su.set(Z,A),E.querySelector(M)!==null||p==="style"&&E.querySelector(ry(Z))||p==="script"&&E.querySelector(ny(Z))||(p=E.createElement("link"),mo(p,"link",A),Ie(p),E.head.appendChild(p)))}}function _he(A,p){qA.m(A,p);var b=Tx;if(b&&A){var E=p&&typeof p.as=="string"?p.as:"script",M='link[rel="modulepreload"][as="'+Sn(E)+'"][href="'+Sn(A)+'"]',Z=M;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Z=Fx(A)}if(!Su.has(Z)&&(A=d({rel:"modulepreload",href:A},p),Su.set(Z,A),b.querySelector(M)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(ny(Z)))return}E=b.createElement("link"),mo(E,"link",A),Ie(E),b.head.appendChild(E)}}}function She(A,p,b){qA.S(A,p,b);var E=Tx;if(E&&A){var M=Me(E).hoistableStyles,Z=Ix(A);p=p||"default";var he=M.get(Z);if(!he){var Ce={loading:0,preload:null};if(he=E.querySelector(ry(Z)))Ce.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":p},b),(b=Su.get(Z))&&B3(A,b);var Ve=he=E.createElement("link");Ie(Ve),mo(Ve,"link",A),Ve._p=new Promise(function(dt,_t){Ve.onload=dt,Ve.onerror=_t}),Ve.addEventListener("load",function(){Ce.loading|=1}),Ve.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,SE(he,p,E)}he={type:"stylesheet",instance:he,count:1,state:Ce},M.set(Z,he)}}}function khe(A,p){qA.X(A,p);var b=Tx;if(b&&A){var E=Me(b).hoistableScripts,M=Fx(A),Z=E.get(M);Z||(Z=b.querySelector(ny(M)),Z||(A=d({src:A,async:!0},p),(p=Su.get(M))&&T3(A,p),Z=b.createElement("script"),Ie(Z),mo(Z,"link",A),b.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},E.set(M,Z))}}function jhe(A,p){qA.M(A,p);var b=Tx;if(b&&A){var E=Me(b).hoistableScripts,M=Fx(A),Z=E.get(M);Z||(Z=b.querySelector(ny(M)),Z||(A=d({src:A,async:!0,type:"module"},p),(p=Su.get(M))&&T3(A,p),Z=b.createElement("script"),Ie(Z),mo(Z,"link",A),b.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},E.set(M,Z))}}function a9(A,p,b,E){var M=(M=te.current)?_E(M):null;if(!M)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Ix(b.href),b=Me(M).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=Ix(b.href);var Z=Me(M).hoistableStyles,he=Z.get(A);if(he||(M=M.ownerDocument||M,he={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Z.set(A,he),(Z=M.querySelector(ry(A)))&&!Z._p&&(he.instance=Z,he.state.loading=5),Su.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Su.set(A,b),Z||Bhe(M,A,b,he.state))),p&&E===null)throw Error(n(528,""));return he}if(p&&E!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Fx(b),b=Me(M).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function Ix(A){return'href="'+Sn(A)+'"'}function ry(A){return'link[rel="stylesheet"]['+A+"]"}function s9(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function Bhe(A,p,b,E){A.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=A.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),mo(p,"link",b),Ie(p),A.head.appendChild(p))}function Fx(A){return'[src="'+Sn(A)+'"]'}function ny(A){return"script[async]"+A}function i9(A,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=A.querySelector('style[data-href~="'+Sn(b.href)+'"]');if(E)return p.instance=E,Ie(E),E;var M=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),Ie(E),mo(E,"style",M),SE(E,b.precedence,A),p.instance=E;case"stylesheet":M=Ix(b.href);var Z=A.querySelector(ry(M));if(Z)return p.state.loading|=4,p.instance=Z,Ie(Z),Z;E=s9(b),(M=Su.get(M))&&B3(E,M),Z=(A.ownerDocument||A).createElement("link"),Ie(Z);var he=Z;return he._p=new Promise(function(Ce,Ve){he.onload=Ce,he.onerror=Ve}),mo(Z,"link",E),p.state.loading|=4,SE(Z,b.precedence,A),p.instance=Z;case"script":return Z=Fx(b.src),(M=A.querySelector(ny(Z)))?(p.instance=M,Ie(M),M):(E=b,(M=Su.get(Z))&&(E=d({},b),T3(E,M)),A=A.ownerDocument||A,M=A.createElement("script"),Ie(M),mo(M,"link",E),A.head.appendChild(M),p.instance=M);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,SE(E,b.precedence,A));return p.instance}function SE(A,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=E.length?E[E.length-1]:null,Z=M,he=0;he<E.length;he++){var Ce=E[he];if(Ce.dataset.precedence===p)Z=Ce;else if(Z!==M)break}Z?Z.parentNode.insertBefore(A,Z.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(A,p.firstChild))}function B3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.title==null&&(A.title=p.title)}function T3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.integrity==null&&(A.integrity=p.integrity)}var kE=null;function o9(A,p,b){if(kE===null){var E=new Map,M=kE=new Map;M.set(b,E)}else M=kE,E=M.get(b),E||(E=new Map,M.set(b,E));if(E.has(A))return E;for(E.set(A,null),b=b.getElementsByTagName(A),M=0;M<b.length;M++){var Z=b[M];if(!(Z[Be]||Z[xn]||A==="link"&&Z.getAttribute("rel")==="stylesheet")&&Z.namespaceURI!=="http://www.w3.org/2000/svg"){var he=Z.getAttribute(p)||"";he=A+he;var Ce=E.get(he);Ce?Ce.push(Z):E.set(he,[Z])}}return E}function l9(A,p,b){A=A.ownerDocument||A,A.head.insertBefore(b,p==="title"?A.querySelector("head > title"):null)}function The(A,p,b){if(b===1||p.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return A=p.disabled,typeof p.precedence=="string"&&A==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function c9(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var ay=null;function Ihe(){}function Fhe(A,p,b){if(ay===null)throw Error(n(475));var E=ay;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var M=Ix(b.href),Z=A.querySelector(ry(M));if(Z){A=Z._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=jE.bind(E),A.then(E,E)),p.state.loading|=4,p.instance=Z,Ie(Z);return}Z=A.ownerDocument||A,b=s9(b),(M=Su.get(M))&&B3(b,M),Z=Z.createElement("link"),Ie(Z);var he=Z;he._p=new Promise(function(Ce,Ve){he.onload=Ce,he.onerror=Ve}),mo(Z,"link",b),p.instance=Z}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(E.count++,p=jE.bind(E),A.addEventListener("load",p),A.addEventListener("error",p))}}function Ohe(){if(ay===null)throw Error(n(475));var A=ay;return A.stylesheets&&A.count===0&&I3(A,A.stylesheets),0<A.count?function(p){var b=setTimeout(function(){if(A.stylesheets&&I3(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=p,function(){A.unsuspend=null,clearTimeout(b)}}:null}function jE(){if(this.count--,this.count===0){if(this.stylesheets)I3(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var BE=null;function I3(A,p){A.stylesheets=null,A.unsuspend!==null&&(A.count++,BE=new Map,p.forEach(Dhe,A),BE=null,jE.call(A))}function Dhe(A,p){if(!(p.state.loading&4)){var b=BE.get(A);if(b)var E=b.get(null);else{b=new Map,BE.set(A,b);for(var M=A.querySelectorAll("link[data-precedence],style[data-precedence]"),Z=0;Z<M.length;Z++){var he=M[Z];(he.nodeName==="LINK"||he.getAttribute("media")!=="not all")&&(b.set(he.dataset.precedence,he),E=he)}E&&b.set(null,E)}M=p.instance,he=M.getAttribute("data-precedence"),Z=b.get(he)||E,Z===E&&b.set(null,M),b.set(he,M),this.count++,E=jE.bind(this),M.addEventListener("load",E),M.addEventListener("error",E),Z?Z.parentNode.insertBefore(M,Z.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(M,A.firstChild)),p.state.loading|=4}}var sy={$$typeof:_,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Phe(A,p,b,E,M,Z,he,Ce){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rn(0),this.hiddenUpdates=Rn(null),this.identifierPrefix=E,this.onUncaughtError=M,this.onCaughtError=Z,this.onRecoverableError=he,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ce,this.incompleteTransitions=new Map}function u9(A,p,b,E,M,Z,he,Ce,Ve,dt,_t,Ft){return A=new Phe(A,p,b,he,Ce,Ve,dt,Ft),p=1,Z===!0&&(p|=24),Z=Hi(3,null,null,p),A.current=Z,Z.stateNode=A,p=k1(),p.refCount++,A.pooledCache=p,p.refCount++,Z.memoizedState={element:E,isDehydrated:b,cache:p},We(Z),A}function d9(A){return A?(A=ii,A):ii}function f9(A,p,b,E,M,Z){M=d9(M),E.context===null?E.context=M:E.pendingContext=M,E=Ct(p),E.payload={element:b},Z=Z===void 0?null:Z,Z!==null&&(E.callback=Z),b=It(A,E,p),b!==null&&(Bc(b,A,p),St(b,A,p))}function A9(A,p){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<p?b:p}}function F3(A,p){A9(A,p),(A=A.alternate)&&A9(A,p)}function h9(A){if(A.tag===13){var p=fd(A,67108864);p!==null&&Bc(p,A,67108864),F3(A,67108864)}}var TE=!0;function Rhe(A,p,b,E){var M=z.T;z.T=null;var Z=W.p;try{W.p=2,O3(A,p,b,E)}finally{W.p=Z,z.T=M}}function Lhe(A,p,b,E){var M=z.T;z.T=null;var Z=W.p;try{W.p=8,O3(A,p,b,E)}finally{W.p=Z,z.T=M}}function O3(A,p,b,E){if(TE){var M=D3(E);if(M===null)y3(A,p,E,IE,b),p9(A,E);else if(Uhe(M,A,p,b,E))E.stopPropagation();else if(p9(A,E),p&4&&-1<Mhe.indexOf(A)){for(;M!==null;){var Z=Ae(M);if(Z!==null)switch(Z.tag){case 3:if(Z=Z.stateNode,Z.current.memoizedState.isDehydrated){var he=wr(Z.pendingLanes);if(he!==0){var Ce=Z;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;he;){var Ve=1<<31-bt(he);Ce.entanglements[1]|=Ve,he&=~Ve}Of(Z),(la&6)===0&&(mE=ye()+500,J1(0))}}break;case 13:Ce=fd(Z,2),Ce!==null&&Bc(Ce,Z,2),gE(),F3(Z,2)}if(Z=D3(E),Z===null&&y3(A,p,E,IE,b),Z===M)break;M=Z}M!==null&&E.stopPropagation()}else y3(A,p,E,null,b)}}function D3(A){return A=ia(A),P3(A)}var IE=null;function P3(A){if(IE=null,A=me(A),A!==null){var p=s(A);if(p===null)A=null;else{var b=p.tag;if(b===13){if(A=o(p),A!==null)return A;A=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;A=null}else p!==A&&(A=null)}}return IE=A,null}function m9(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case Qe:return 2;case ue:return 8;case we:case De:return 32;case He:return 268435456;default:return 32}default:return 32}}var R3=!1,S0=null,k0=null,j0=null,iy=new Map,oy=new Map,B0=[],Mhe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p9(A,p){switch(A){case"focusin":case"focusout":S0=null;break;case"dragenter":case"dragleave":k0=null;break;case"mouseover":case"mouseout":j0=null;break;case"pointerover":case"pointerout":iy.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":oy.delete(p.pointerId)}}function ly(A,p,b,E,M,Z){return A===null||A.nativeEvent!==Z?(A={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:Z,targetContainers:[M]},p!==null&&(p=Ae(p),p!==null&&h9(p)),A):(A.eventSystemFlags|=E,p=A.targetContainers,M!==null&&p.indexOf(M)===-1&&p.push(M),A)}function Uhe(A,p,b,E,M){switch(p){case"focusin":return S0=ly(S0,A,p,b,E,M),!0;case"dragenter":return k0=ly(k0,A,p,b,E,M),!0;case"mouseover":return j0=ly(j0,A,p,b,E,M),!0;case"pointerover":var Z=M.pointerId;return iy.set(Z,ly(iy.get(Z)||null,A,p,b,E,M)),!0;case"gotpointercapture":return Z=M.pointerId,oy.set(Z,ly(oy.get(Z)||null,A,p,b,E,M)),!0}return!1}function g9(A){var p=me(A.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){A.blockedOn=p,Rs(A.priority,function(){if(b.tag===13){var E=jc();E=ms(E);var M=fd(b,E);M!==null&&Bc(M,b,E),F3(b,E)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function FE(A){if(A.blockedOn!==null)return!1;for(var p=A.targetContainers;0<p.length;){var b=D3(A.nativeEvent);if(b===null){b=A.nativeEvent;var E=new b.constructor(b.type,b);Ol=E,b.target.dispatchEvent(E),Ol=null}else return p=Ae(b),p!==null&&h9(p),A.blockedOn=b,!1;p.shift()}return!0}function x9(A,p,b){FE(A)&&b.delete(p)}function Qhe(){R3=!1,S0!==null&&FE(S0)&&(S0=null),k0!==null&&FE(k0)&&(k0=null),j0!==null&&FE(j0)&&(j0=null),iy.forEach(x9),oy.forEach(x9)}function OE(A,p){A.blockedOn===p&&(A.blockedOn=null,R3||(R3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qhe)))}var DE=null;function v9(A){DE!==A&&(DE=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){DE===A&&(DE=null);for(var p=0;p<A.length;p+=3){var b=A[p],E=A[p+1],M=A[p+2];if(typeof E!="function"){if(P3(E||b)===null)continue;break}var Z=Ae(b);Z!==null&&(A.splice(p,3),p-=3,Eu(Z,{pending:!0,data:M,method:b.method,action:E},E,M))}}))}function cy(A){function p(Ve){return OE(Ve,A)}S0!==null&&OE(S0,A),k0!==null&&OE(k0,A),j0!==null&&OE(j0,A),iy.forEach(p),oy.forEach(p);for(var b=0;b<B0.length;b++){var E=B0[b];E.blockedOn===A&&(E.blockedOn=null)}for(;0<B0.length&&(b=B0[0],b.blockedOn===null);)g9(b),b.blockedOn===null&&B0.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var M=b[E],Z=b[E+1],he=M[ln]||null;if(typeof Z=="function")he||v9(b);else if(he){var Ce=null;if(Z&&Z.hasAttribute("formAction")){if(M=Z,he=Z[ln]||null)Ce=he.formAction;else if(P3(M)!==null)continue}else Ce=he.action;typeof Ce=="function"?b[E+1]=Ce:(b.splice(E,3),E-=3),v9(b)}}}function L3(A){this._internalRoot=A}PE.prototype.render=L3.prototype.render=function(A){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,E=jc();f9(b,E,A,p,null,null)},PE.prototype.unmount=L3.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var p=A.containerInfo;f9(A.current,2,null,A,null,null),gE(),p[Fn]=null}};function PE(A){this._internalRoot=A}PE.prototype.unstable_scheduleHydration=function(A){if(A){var p=Ba();A={blockedOn:null,target:A,priority:p};for(var b=0;b<B0.length&&p!==0&&p<B0[b].priority;b++);B0.splice(b,0,A),b===0&&g9(A)}};var b9=t.version;if(b9!=="19.1.1")throw Error(n(527,b9,"19.1.1"));W.findDOMNode=function(A){var p=A._reactInternals;if(p===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(p),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var Hhe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var RE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!RE.isDisabled&&RE.supportsFiber)try{ft=RE.inject(Hhe),$e=RE}catch{}}return dy.createRoot=function(A,p){if(!a(A))throw Error(n(299));var b=!1,E="",M=PU,Z=RU,he=LU,Ce=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(M=p.onUncaughtError),p.onCaughtError!==void 0&&(Z=p.onCaughtError),p.onRecoverableError!==void 0&&(he=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Ce=p.unstable_transitionCallbacks)),p=u9(A,1,!1,null,null,b,E,M,Z,he,Ce,null),A[Fn]=p.current,b3(A),new L3(p)},dy.hydrateRoot=function(A,p,b){if(!a(A))throw Error(n(299));var E=!1,M="",Z=PU,he=RU,Ce=LU,Ve=null,dt=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(M=b.identifierPrefix),b.onUncaughtError!==void 0&&(Z=b.onUncaughtError),b.onCaughtError!==void 0&&(he=b.onCaughtError),b.onRecoverableError!==void 0&&(Ce=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Ve=b.unstable_transitionCallbacks),b.formState!==void 0&&(dt=b.formState)),p=u9(A,1,!0,p,b??null,E,M,Z,he,Ce,Ve,dt),p.context=d9(null),b=p.current,E=jc(),E=ms(E),M=Ct(E),M.callback=null,It(b,M,E),b=E,p.current.lanes=b,ja(p,b),Of(p),A[Fn]=p.current,b3(A),new PE(p)},dy.version="19.1.1",dy}var B9;function r0e(){if(B9)return H3.exports;B9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),H3.exports=t0e(),H3.exports}var n0e=r0e();const a0e=Tl(n0e),s0e=()=>{};var T9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},i0e=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],o=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return t.join("")},yJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],o=a+1<e.length,l=o?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(h=64)),n.push(r[d],r[f],r[h],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bJ(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):i0e(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new o0e;const h=s<<2|l>>4;if(n.push(h),u!==64){const m=l<<4&240|u>>2;if(n.push(m),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l0e=function(e){const t=bJ(e);return yJ.encodeByteArray(t,!0)},s_=function(e){return l0e(e).replace(/\./g,"")},wJ=function(e){try{return yJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0e=()=>c0e().__FIREBASE_DEFAULTS__,d0e=()=>{if(typeof process>"u"||typeof T9>"u")return;const e=T9.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},f0e=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&wJ(e[1]);return t&&JSON.parse(t)},mk=()=>{try{return s0e()||u0e()||d0e()||f0e()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},NJ=e=>{var t,r;return(r=(t=mk())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},eP=e=>{const t=NJ(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},EJ=()=>{var e;return(e=mk())==null?void 0:e.config},CJ=e=>{var t;return(t=mk())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pk(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _J(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[s_(JSON.stringify(r)),s_(JSON.stringify(o)),""].join(".")}const f2={};function h0e(){const e={prod:[],emulator:[]};for(const t of Object.keys(f2))f2[t]?e.emulator.push(t):e.prod.push(t);return e}function m0e(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let I9=!1;function gk(e,t){if(typeof window>"u"||typeof document>"u"||!Hh(window.location.host)||f2[e]===t||f2[e]||I9)return;f2[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=h0e().prod.length>0;function o(){const h=document.getElementById(n);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{I9=!0,o()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=m0e(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;l(_),d(v,x);const O=u();c(w,y),_.append(w,g,v,O),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ll())}function g0e(){var t;const e=(t=mk())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x0e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v0e(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function b0e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y0e(){const e=ll();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w0e(){return!g0e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N0e(){try{return typeof indexedDB=="object"}catch{return!1}}function E0e(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0e="FirebaseError";class Yd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=C0e,Object.setPrototypeOf(this,Yd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gw.prototype.create)}}class Gw{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],o=s?_0e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Yd(a,l,n)}}function _0e(e,t){return e.replace(S0e,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const S0e=/\{\$([^}]+)}/g;function k0e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _m(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],o=t[a];if(F9(s)&&F9(o)){if(!_m(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function F9(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Vy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function zy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function j0e(e,t){const r=new B0e(e,t);return r.subscribe.bind(r)}class B0e{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");T0e(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=G3),a.error===void 0&&(a.error=G3),a.complete===void 0&&(a.complete=G3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T0e(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function G3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(e){return e&&e._delegate?e._delegate:e}class Nh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I0e=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new A0e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(O0e(t))try{this.getOrInitializeService({instanceIdentifier:Fp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Fp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fp){return this.instances.has(t)}getOptions(t=Fp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:F0e(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Fp){return this.component?this.component.multipleInstances?t:Fp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function F0e(e){return e===Fp?void 0:e}function O0e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new I0e(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(wn||(wn={}));const P0e={debug:wn.DEBUG,verbose:wn.VERBOSE,info:wn.INFO,warn:wn.WARN,error:wn.ERROR,silent:wn.SILENT},R0e=wn.INFO,L0e={[wn.DEBUG]:"log",[wn.VERBOSE]:"log",[wn.INFO]:"info",[wn.WARN]:"warn",[wn.ERROR]:"error"},M0e=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=L0e[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let tP=class{constructor(t){this.name=t,this._logLevel=R0e,this._logHandler=M0e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in wn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?P0e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,wn.DEBUG,...t),this._logHandler(this,wn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,wn.VERBOSE,...t),this._logHandler(this,wn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,wn.INFO,...t),this._logHandler(this,wn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,wn.WARN,...t),this._logHandler(this,wn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,wn.ERROR,...t),this._logHandler(this,wn.ERROR,...t)}};const U0e=(e,t)=>t.some(r=>e instanceof r);let O9,D9;function Q0e(){return O9||(O9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H0e(){return D9||(D9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SJ=new WeakMap,z6=new WeakMap,kJ=new WeakMap,q3=new WeakMap,rP=new WeakMap;function V0e(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(dm(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&SJ.set(r,e)}).catch(()=>{}),rP.set(t,e),t}function z0e(e){if(z6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});z6.set(e,t)}let $6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return z6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||kJ.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return dm(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $0e(e){$6=e($6)}function G0e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(K3(this),t,...r);return kJ.set(n,t.sort?t.sort():[t]),dm(n)}:H0e().includes(e)?function(...t){return e.apply(K3(this),t),dm(SJ.get(this))}:function(...t){return dm(e.apply(K3(this),t))}}function q0e(e){return typeof e=="function"?G0e(e):(e instanceof IDBTransaction&&z0e(e),U0e(e,Q0e())?new Proxy(e,$6):e)}function dm(e){if(e instanceof IDBRequest)return V0e(e);if(q3.has(e))return q3.get(e);const t=q0e(e);return t!==e&&(q3.set(e,t),rP.set(t,e)),t}const K3=e=>rP.get(e);function K0e(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(e,t),l=dm(o);return n&&o.addEventListener("upgradeneeded",c=>{n(dm(o.result),c.oldVersion,c.newVersion,dm(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const W0e=["get","getKey","getAll","getAllKeys","count"],X0e=["put","add","delete","clear"],W3=new Map;function P9(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(W3.get(t))return W3.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=X0e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||W0e.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return W3.set(t,s),s}$0e(e=>({...e,get:(t,r,n)=>P9(t,r)||e.get(t,r,n),has:(t,r)=>!!P9(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(J0e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function J0e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const G6="@firebase/app",R9="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new tP("@firebase/app"),Z0e="@firebase/app-compat",eme="@firebase/analytics-compat",tme="@firebase/analytics",rme="@firebase/app-check-compat",nme="@firebase/app-check",ame="@firebase/auth",sme="@firebase/auth-compat",ime="@firebase/database",ome="@firebase/data-connect",lme="@firebase/database-compat",cme="@firebase/functions",ume="@firebase/functions-compat",dme="@firebase/installations",fme="@firebase/installations-compat",Ame="@firebase/messaging",hme="@firebase/messaging-compat",mme="@firebase/performance",pme="@firebase/performance-compat",gme="@firebase/remote-config",xme="@firebase/remote-config-compat",vme="@firebase/storage",bme="@firebase/storage-compat",yme="@firebase/firestore",wme="@firebase/ai",Nme="@firebase/firestore-compat",Eme="firebase",Cme="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6="[DEFAULT]",_me={[G6]:"fire-core",[Z0e]:"fire-core-compat",[tme]:"fire-analytics",[eme]:"fire-analytics-compat",[nme]:"fire-app-check",[rme]:"fire-app-check-compat",[ame]:"fire-auth",[sme]:"fire-auth-compat",[ime]:"fire-rtdb",[ome]:"fire-data-connect",[lme]:"fire-rtdb-compat",[cme]:"fire-fn",[ume]:"fire-fn-compat",[dme]:"fire-iid",[fme]:"fire-iid-compat",[Ame]:"fire-fcm",[hme]:"fire-fcm-compat",[mme]:"fire-perf",[pme]:"fire-perf-compat",[gme]:"fire-rc",[xme]:"fire-rc-compat",[vme]:"fire-gcs",[bme]:"fire-gcs-compat",[yme]:"fire-fst",[Nme]:"fire-fst-compat",[wme]:"fire-vertex","fire-js":"fire-js",[Eme]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Map,Sme=new Map,K6=new Map;function L9(e,t){try{e.container.addComponent(t)}catch(r){Eh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Sm(e){const t=e.name;if(K6.has(t))return Eh.debug(`There were multiple attempts to register component ${t}.`),!1;K6.set(t,e);for(const r of z2.values())L9(r,e);for(const r of Sme.values())L9(r,e);return!0}function Kw(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Uc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fm=new Gw("app","Firebase",kme);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jme{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Nh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=Cme;function nP(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:q6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw fm.create("bad-app-name",{appName:String(a)});if(r||(r=EJ()),!r)throw fm.create("no-options");const s=z2.get(a);if(s){if(_m(r,s.options)&&_m(n,s.config))return s;throw fm.create("duplicate-app",{appName:a})}const o=new D0e(a);for(const c of K6.values())o.addComponent(c);const l=new jme(r,n,o);return z2.set(a,l),l}function xk(e=q6){const t=z2.get(e);if(!t&&e===q6&&EJ())return nP();if(!t)throw fm.create("no-app",{appName:e});return t}function M9(){return Array.from(z2.values())}function Ku(e,t,r){let n=_me[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${t}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Eh.warn(o.join(" "));return}Sm(new Nh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bme="firebase-heartbeat-database",Tme=1,$2="firebase-heartbeat-store";let X3=null;function jJ(){return X3||(X3=K0e(Bme,Tme,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($2)}catch(r){console.warn(r)}}}}).catch(e=>{throw fm.create("idb-open",{originalErrorMessage:e.message})})),X3}async function Ime(e){try{const r=(await jJ()).transaction($2),n=await r.objectStore($2).get(BJ(e));return await r.done,n}catch(t){if(t instanceof Yd)Eh.warn(t.message);else{const r=fm.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Eh.warn(r.message)}}}async function U9(e,t){try{const n=(await jJ()).transaction($2,"readwrite");await n.objectStore($2).put(t,BJ(e)),await n.done}catch(r){if(r instanceof Yd)Eh.warn(r.message);else{const n=fm.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Eh.warn(n.message)}}}function BJ(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fme=1024,Ome=30;class Dme{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Rme(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Q9();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Ome){const o=Lme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Eh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Q9(),{heartbeatsToSend:n,unsentEntries:a}=Pme(this._heartbeatsCache.heartbeats),s=s_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Eh.warn(r),""}}}function Q9(){return new Date().toISOString().substring(0,10)}function Pme(e,t=Fme){const r=[];let n=e.slice();for(const a of e){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),H9(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),H9(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Rme{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N0e()?E0e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Ime(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return U9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return U9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function H9(e){return s_(JSON.stringify({version:2,heartbeats:e})).length}function Lme(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mme(e){Sm(new Nh("platform-logger",t=>new Y0e(t),"PRIVATE")),Sm(new Nh("heartbeat",t=>new Dme(t),"PRIVATE")),Ku(G6,R9,e),Ku(G6,R9,"esm2020"),Ku("fire-js","")}Mme("");function TJ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ume=TJ,IJ=new Gw("auth","Firebase",TJ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new tP("@firebase/auth");function Qme(e,...t){i_.logLevel<=wn.WARN&&i_.warn(`Auth (${Ug}): ${e}`,...t)}function g5(e,...t){i_.logLevel<=wn.ERROR&&i_.error(`Auth (${Ug}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(e,...t){throw aP(e,...t)}function tA(e,...t){return aP(e,...t)}function FJ(e,t,r){const n={...Ume(),[t]:r};return new Gw("auth","Firebase",n).create(t,{appName:e.name})}function Am(e){return FJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aP(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return IJ.create(e,...t)}function Rr(e,t,...r){if(!e)throw aP(t,...r)}function ah(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g5(t),new Error(t)}function Ch(e,t){e||ah(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Hme(){return V9()==="http:"||V9()==="https:"}function V9(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hme()||v0e()||"connection"in navigator)?navigator.onLine:!0}function zme(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t,r){this.shortDelay=t,this.longDelay=r,Ch(r>t,"Short delay should be less than long delay!"),this.isMobile=p0e()||b0e()}get(){return Vme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(e,t){Ch(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ah("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ah("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ah("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qme=new Ww(3e4,6e4);function Gm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Vh(e,t,r,n,a={}){return DJ(e,a,async()=>{let s={},o={};n&&(t==="GET"?o=n:s={body:JSON.stringify(n)});const l=qw({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return x0e()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Hh(e.emulatorConfig.host)&&(u.credentials="include"),OJ.fetch()(await PJ(e,e.config.apiHost,r,l),u)})}async function DJ(e,t,r){e._canInitEmulator=!1;const n={...$me,...t};try{const a=new Wme(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw LE(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw LE(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw LE(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw LE(e,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FJ(e,d,u);Kd(e,d)}}catch(a){if(a instanceof Yd)throw a;Kd(e,"network-request-failed",{message:String(a)})}}async function vk(e,t,r,n,a={}){const s=await Vh(e,t,r,n,a);return"mfaPendingCredential"in s&&Kd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function PJ(e,t,r,n){const a=`${t}${r}?${n}`,s=e,o=s.config.emulator?sP(e.config,a):`${e.config.apiScheme}://${a}`;return Gme.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Kme(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wme{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(tA(this.auth,"network-request-failed")),qme.get())})}}function LE(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=tA(e,t,n);return a.customData._tokenResponse=r,a}function z9(e){return e!==void 0&&e.enterprise!==void 0}class Xme{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Kme(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yme(e,t){return Vh(e,"GET","/v2/recaptchaConfig",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jme(e,t){return Vh(e,"POST","/v1/accounts:delete",t)}async function o_(e,t){return Vh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Zme(e,t=!1){const r=Gn(e),n=await r.getIdToken(t),a=iP(n);Rr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:A2(Y3(a.auth_time)),issuedAtTime:A2(Y3(a.iat)),expirationTime:A2(Y3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Y3(e){return Number(e)*1e3}function iP(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return g5("JWT malformed, contained fewer than 3 sections"),null;try{const a=wJ(r);return a?JSON.parse(a):(g5("Failed to decode base64 JWT payload"),null)}catch(a){return g5("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function $9(e){const t=iP(e);return Rr(t,"internal-error"),Rr(typeof t.exp<"u","internal-error"),Rr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Yd&&epe(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function epe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=A2(this.lastLoginAt),this.creationTime=A2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(e){var f;const t=e.auth,r=await e.getIdToken(),n=await G2(e,o_(t,{idToken:r}));Rr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?RJ(a.providerUserInfo):[],o=npe(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new X6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function rpe(e){const t=Gn(e);await l_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function npe(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function RJ(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ape(e,t){const r=await DJ(e,{},async()=>{const n=qw({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,o=await PJ(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return e.emulatorConfig&&Hh(e.emulatorConfig.host)&&(c.credentials="include"),OJ.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function spe(e,t){return Vh(e,"POST","/v2/accounts:revokeToken",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rr(t.idToken,"internal-error"),Rr(typeof t.idToken<"u","internal-error"),Rr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$9(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Rr(t.length!==0,"internal-error");const r=$9(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Rr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await ape(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new Tv;return n&&(Rr(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&(Rr(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),s&&(Rr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Tv,this.toJSON())}_performRefresh(){return ah("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(e,t){Rr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Rd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new tpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new X6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await G2(this,this.stsTokenManager.getToken(this.auth,t));return Rr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Zme(this,t)}reload(){return rpe(this)}_assign(t){this!==t&&(Rr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Rd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Rr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await l_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Uc(this.auth.app))return Promise.reject(Am(this.auth));const t=await this.getIdToken();return await G2(this,Jme(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Rr(f&&x,t,"internal-error");const v=Tv.fromJSON(this.name,x);Rr(typeof f=="string",t,"internal-error"),I0(n,t.name),I0(a,t.name),Rr(typeof h=="boolean",t,"internal-error"),Rr(typeof m=="boolean",t,"internal-error"),I0(s,t.name),I0(o,t.name),I0(l,t.name),I0(c,t.name),I0(u,t.name),I0(d,t.name);const y=new Rd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new Tv;a.updateFromServerResponse(r);const s=new Rd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await l_(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Rr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?RJ(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Tv;l.updateFromIdToken(n);const c=new Rd({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new X6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9=new Map;function sh(e){Ch(e instanceof Function,"Expected a class definition");let t=G9.get(e);return t?(Ch(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,G9.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LJ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}LJ.type="NONE";const q9=LJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(e,t,r){return`firebase:${e}:${t}:${r}`}class Iv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=x5(this.userKey,a.apiKey,s),this.fullPersistenceKey=x5("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await o_(this.auth,{idToken:t}).catch(()=>{});return r?Rd._fromGetAccountInfoResponse(this.auth,r,t):null}return Rd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Iv(sh(q9),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||sh(q9);const o=x5(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const h=await o_(t,{idToken:d}).catch(()=>{});if(!h)break;f=await Rd._fromGetAccountInfoResponse(t,h,d)}else f=Rd._fromJSON(t,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Iv(s,t,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Iv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(HJ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(MJ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zJ(t))return"Blackberry";if($J(t))return"Webos";if(UJ(t))return"Safari";if((t.includes("chrome/")||QJ(t))&&!t.includes("edge/"))return"Chrome";if(VJ(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function MJ(e=ll()){return/firefox\//i.test(e)}function UJ(e=ll()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function QJ(e=ll()){return/crios\//i.test(e)}function HJ(e=ll()){return/iemobile/i.test(e)}function VJ(e=ll()){return/android/i.test(e)}function zJ(e=ll()){return/blackberry/i.test(e)}function $J(e=ll()){return/webos/i.test(e)}function oP(e=ll()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ipe(e=ll()){var t;return oP(e)&&!!((t=window.navigator)!=null&&t.standalone)}function ope(){return y0e()&&document.documentMode===10}function GJ(e=ll()){return oP(e)||VJ(e)||$J(e)||zJ(e)||/windows phone/i.test(e)||HJ(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qJ(e,t=[]){let r;switch(e){case"Browser":r=K9(ll());break;case"Worker":r=`${K9(ll())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ug}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpe{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cpe(e,t={}){return Vh(e,"GET","/v2/passwordPolicy",Gm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe=6;class dpe{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??upe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fpe{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W9(this),this.idTokenSubscription=new W9(this),this.beforeStateQueue=new lpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IJ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=sh(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Iv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await o_(this,{idToken:t}),n=await Rd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Uc(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Rr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await l_(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=zme()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Uc(this.app))return Promise.reject(Am(this));const r=t?Gn(t):null;return r&&Rr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Rr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Uc(this.app)?Promise.reject(Am(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Uc(this.app)?Promise.reject(Am(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await cpe(this),r=new dpe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gw("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await spe(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&sh(t)||this._popupRedirectResolver;Rr(r,this,"argument-error"),this.redirectPersistenceManager=await Iv.create(this,[sh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rr(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=qJ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Uc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&Qme(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Qg(e){return Gn(e)}class W9{constructor(t){this.auth=t,this.observer=null,this.addObserver=j0e(r=>this.observer=r)}get next(){return Rr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ape(e){bk=e}function KJ(e){return bk.loadJS(e)}function hpe(){return bk.recaptchaEnterpriseScript}function mpe(){return bk.gapiScript}function ppe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class gpe{constructor(){this.enterprise=new xpe}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class xpe{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const vpe="recaptcha-enterprise",WJ="NO_RECAPTCHA";class bpe{constructor(t){this.type=vpe,this.auth=Qg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Yme(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Xme(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;z9(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(WJ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gpe().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&z9(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=hpe();c.length!==0&&(c+=l),KJ(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function X9(e,t,r,n=!1,a=!1){const s=new bpe(e);let o;if(a)o=WJ;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Y6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await X9(e,t,r,r==="getOobCode");return n(e,o)}else return n(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await X9(e,t,r,r==="getOobCode");return n(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ype(e,t){const r=Kw(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(_m(s,t??{}))return a;Kd(a,"already-initialized")}return r.initialize({options:t})}function wpe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(sh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Npe(e,t,r){const n=Qg(e);Rr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=XJ(t),{host:o,port:l}=Epe(t),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Rr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Rr(_m(u,n.config.emulator)&&_m(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Hh(o)?(pk(`${s}//${o}${c}`),gk("Auth",!0)):Cpe()}function XJ(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Epe(e){const t=XJ(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:Y9(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:Y9(o)}}}function Y9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Cpe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return ah("not implemented")}_getIdTokenResponse(t){return ah("not implemented")}_linkToIdToken(t,r){return ah("not implemented")}_getReauthenticationResolver(t){return ah("not implemented")}}async function _pe(e,t){return Vh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Spe(e,t){return vk(e,"POST","/v1/accounts:signInWithPassword",Gm(e,t))}async function kpe(e,t){return Vh(e,"POST","/v1/accounts:sendOobCode",Gm(e,t))}async function jpe(e,t){return kpe(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bpe(e,t){return vk(e,"POST","/v1/accounts:signInWithEmailLink",Gm(e,t))}async function Tpe(e,t){return vk(e,"POST","/v1/accounts:signInWithEmailLink",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2 extends lP{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new q2(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new q2(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Y6(t,r,"signInWithPassword",Spe);case"emailLink":return Bpe(t,{email:this._email,oobCode:this._password});default:Kd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Y6(t,n,"signUpPassword",_pe);case"emailLink":return Tpe(t,{idToken:r,email:this._email,oobCode:this._password});default:Kd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fv(e,t){return vk(e,"POST","/v1/accounts:signInWithIdp",Gm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ipe="http://localhost";class xg extends lP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new xg(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Kd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new xg(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Fv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Fv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Fv(t,r)}buildRequest(){const t={requestUri:Ipe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=qw(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fpe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ope(e){const t=Vy(zy(e)).link,r=t?Vy(zy(t)).deep_link_id:null,n=Vy(zy(e)).deep_link_id;return(n?Vy(zy(n)).link:null)||n||r||t||e}class cP{constructor(t){const r=Vy(zy(t)),n=r.apiKey??null,a=r.oobCode??null,s=Fpe(r.mode??null);Rr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=Ope(t);try{return new cP(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.providerId=Hb.PROVIDER_ID}static credential(t,r){return q2._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=cP.parseLink(r);return Rr(n,"argument-error"),q2._fromEmailAndCode(t,n.code,n.tenantId)}}Hb.PROVIDER_ID="password";Hb.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends YJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends Xw{constructor(){super("facebook.com")}static credential(t){return xg._fromParams({providerId:W0.PROVIDER_ID,signInMethod:W0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return W0.credentialFromTaggedObject(t)}static credentialFromError(t){return W0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return W0.credential(t.oauthAccessToken)}catch{return null}}}W0.FACEBOOK_SIGN_IN_METHOD="facebook.com";W0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends Xw{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return xg._fromParams({providerId:X0.PROVIDER_ID,signInMethod:X0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return X0.credentialFromTaggedObject(t)}static credentialFromError(t){return X0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return X0.credential(r,n)}catch{return null}}}X0.GOOGLE_SIGN_IN_METHOD="google.com";X0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0 extends Xw{constructor(){super("github.com")}static credential(t){return xg._fromParams({providerId:Y0.PROVIDER_ID,signInMethod:Y0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Y0.credentialFromTaggedObject(t)}static credentialFromError(t){return Y0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Y0.credential(t.oauthAccessToken)}catch{return null}}}Y0.GITHUB_SIGN_IN_METHOD="github.com";Y0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends Xw{constructor(){super("twitter.com")}static credential(t,r){return xg._fromParams({providerId:J0.PROVIDER_ID,signInMethod:J0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return J0.credentialFromTaggedObject(t)}static credentialFromError(t){return J0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return J0.credential(r,n)}catch{return null}}}J0.TWITTER_SIGN_IN_METHOD="twitter.com";J0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Rd._fromIdTokenResponse(t,n,a),o=J9(n);return new tb({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=J9(n);return new tb({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function J9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_ extends Yd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,c_.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new c_(t,r,n,a)}}function JJ(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?c_._fromErrorAndOperation(e,s,t,n):s})}async function Dpe(e,t,r=!1){const n=await G2(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return tb._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ppe(e,t,r=!1){const{auth:n}=e;if(Uc(n.app))return Promise.reject(Am(n));const a="reauthenticate";try{const s=await G2(e,JJ(n,a,t,e),r);Rr(s.idToken,n,"internal-error");const o=iP(s.idToken);Rr(o,n,"internal-error");const{sub:l}=o;return Rr(e.uid===l,n,"user-mismatch"),tb._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Kd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZJ(e,t,r=!1){if(Uc(e.app))return Promise.reject(Am(e));const n="signIn",a=await JJ(e,n,t),s=await tb._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function Rpe(e,t){return ZJ(Qg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lpe(e){const t=Qg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Mpe(e,t,r){const n=Qg(e);await Y6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jpe)}function Upe(e,t,r){return Uc(e.app)?Promise.reject(Am(e)):Rpe(Gn(e),Hb.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Lpe(e),n})}function Qpe(e,t,r,n){return Gn(e).onIdTokenChanged(t,r,n)}function Hpe(e,t,r){return Gn(e).beforeAuthStateChanged(t,r)}function eZ(e,t,r,n){return Gn(e).onAuthStateChanged(t,r,n)}function Vpe(e){return Gn(e).signOut()}const u_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(u_,"1"),this.storage.removeItem(u_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe=1e3,$pe=10;class rZ extends tZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GJ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);ope()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,$pe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},zpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}rZ.type="LOCAL";const Gpe=rZ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ extends tZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}nZ.type="SESSION";const aZ=nZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qpe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new yk(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await qpe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yk.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kpe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=uP("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return window}function Wpe(e){rA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sZ(){return typeof rA().WorkerGlobalScope<"u"&&typeof rA().importScripts=="function"}async function Xpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ype(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Jpe(){return sZ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iZ="firebaseLocalStorageDb",Zpe=1,d_="firebaseLocalStorage",oZ="fbase_key";class Yw{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function wk(e,t){return e.transaction([d_],t?"readwrite":"readonly").objectStore(d_)}function ege(){const e=indexedDB.deleteDatabase(iZ);return new Yw(e).toPromise()}function J6(){const e=indexedDB.open(iZ,Zpe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(d_,{keyPath:oZ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(d_)?t(n):(n.close(),await ege(),t(await J6()))})})}async function Z9(e,t,r){const n=wk(e,!0).put({[oZ]:t,value:r});return new Yw(n).toPromise()}async function tge(e,t){const r=wk(e,!1).get(t),n=await new Yw(r).toPromise();return n===void 0?null:n.value}function eQ(e,t){const r=wk(e,!0).delete(t);return new Yw(r).toPromise()}const rge=800,nge=3;class lZ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>nge)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sZ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yk._getInstance(Jpe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Xpe(),!this.activeServiceWorker)return;this.sender=new Kpe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Ype()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await J6();return await Z9(t,u_,"1"),await eQ(t,u_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z9(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>tge(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>eQ(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=wk(a,!1).getAll();return new Yw(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lZ.type="LOCAL";const age=lZ;new Ww(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sge(e,t){return t?sh(t):(Rr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP extends lP{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Fv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Fv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Fv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function ige(e){return ZJ(e.auth,new dP(e),e.bypassAuthState)}function oge(e){const{auth:t,user:r}=e;return Rr(r,t,"internal-error"),Ppe(r,new dP(e),e.bypassAuthState)}async function lge(e){const{auth:t,user:r}=e;return Rr(r,t,"internal-error"),Dpe(r,new dP(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ige;case"linkViaPopup":case"linkViaRedirect":return lge;case"reauthViaPopup":case"reauthViaRedirect":return oge;default:Kd(this.auth,"internal-error")}}resolve(t){Ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cge=new Ww(2e3,1e4);class gv extends cZ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,gv.currentPopupAction&&gv.currentPopupAction.cancel(),gv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rr(t,this.auth,"internal-error"),t}async onExecution(){Ch(this.filter.length===1,"Popup operations only handle one event");const t=uP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(tA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(tA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,cge.get())};t()}}gv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uge="pendingRedirect",v5=new Map;class dge extends cZ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=v5.get(this.auth._key());if(!t){try{const n=await fge(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}v5.set(this.auth._key(),t)}return this.bypassAuthState||v5.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fge(e,t){const r=mge(t),n=hge(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Age(e,t){v5.set(e._key(),t)}function hge(e){return sh(e._redirectPersistence)}function mge(e){return x5(uge,e.config.apiKey,e.name)}async function pge(e,t,r=!1){if(Uc(e.app))return Promise.reject(Am(e));const n=Qg(e),a=sge(n,t),o=await new dge(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gge=600*1e3;class xge{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!vge(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!uZ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(tA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=gge&&this.cachedEventUids.clear(),this.cachedEventUids.has(tQ(t))}saveEventToCache(t){this.cachedEventUids.add(tQ(t)),this.lastProcessedEventTime=Date.now()}}function tQ(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function uZ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function vge(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uZ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bge(e,t={}){return Vh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wge=/^https?/;async function Nge(e){if(e.config.emulator)return;const{authorizedDomains:t}=await bge(e);for(const r of t)try{if(Ege(r))return}catch{}Kd(e,"unauthorized-domain")}function Ege(e){const t=W6(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!wge.test(r))return!1;if(yge.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cge=new Ww(3e4,6e4);function rQ(){const e=rA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function _ge(e){return new Promise((t,r)=>{var a,s,o;function n(){rQ(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rQ(),r(tA(e,"network-request-failed"))},timeout:Cge.get()})}if((s=(a=rA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((o=rA().gapi)!=null&&o.load)n();else{const l=ppe("iframefcb");return rA()[l]=()=>{gapi.load?n():r(tA(e,"network-request-failed"))},KJ(`${mpe()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw b5=null,t})}let b5=null;function Sge(e){return b5=b5||_ge(e),b5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kge=new Ww(5e3,15e3),jge="__/auth/iframe",Bge="emulator/auth/iframe",Tge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ige=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fge(e){const t=e.config;Rr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?sP(t,Bge):`https://${e.config.authDomain}/${jge}`,n={apiKey:t.apiKey,appName:e.name,v:Ug},a=Ige.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${qw(n).slice(1)}`}async function Oge(e){const t=await Sge(e),r=rA().gapi;return Rr(r,e,"internal-error"),t.open({where:document.body,url:Fge(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tge,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=tA(e,"network-request-failed"),l=rA().setTimeout(()=>{s(o)},kge.get());function c(){rA().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pge=500,Rge=600,Lge="_blank",Mge="http://localhost";class nQ{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Uge(e,t,r,n=Pge,a=Rge){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...Dge,width:n.toString(),height:a.toString(),top:s,left:o},u=ll().toLowerCase();r&&(l=QJ(u)?Lge:r),MJ(u)&&(t=t||Mge,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(ipe(u)&&l!=="_self")return Qge(t||"",l),new nQ(null);const f=window.open(t||"",l,d);Rr(f,e,"popup-blocked");try{f.focus()}catch{}return new nQ(f)}function Qge(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hge="__/auth/handler",Vge="emulator/auth/handler",zge=encodeURIComponent("fac");async function aQ(e,t,r,n,a,s){Rr(e.config.authDomain,e,"auth-domain-config-required"),Rr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Ug,eventId:a};if(t instanceof YJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",k0e(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof Xw){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${zge}=${encodeURIComponent(c)}`:"";return`${$ge(e)}?${qw(l).slice(1)}${u}`}function $ge({config:e}){return e.emulator?sP(e,Vge):`https://${e.authDomain}/${Hge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="webStorageSupport";class Gge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aZ,this._completeRedirectFn=pge,this._overrideRedirectResult=Age}async _openPopup(t,r,n,a){var o;Ch((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await aQ(t,r,n,W6(),a);return Uge(t,s,uP())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await aQ(t,r,n,W6(),a);return Wpe(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Ch(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Oge(t),n=new xge(t);return r.register("authEvent",a=>(Rr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(J3,{type:J3},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[J3];s!==void 0&&r(!!s),Kd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Nge(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return GJ()||UJ()||oP()}}const qge=Gge;var sQ="@firebase/auth",iQ="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kge{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Rr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wge(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xge(e){Sm(new Nh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Rr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qJ(e)},u=new fpe(n,a,s,c);return wpe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Sm(new Nh("auth-internal",t=>{const r=Qg(t.getProvider("auth").getImmediate());return(n=>new Kge(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ku(sQ,iQ,Wge(e)),Ku(sQ,iQ,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yge=300,Jge=CJ("authIdTokenMaxAge")||Yge;let oQ=null;const Zge=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Jge)return;const a=r==null?void 0:r.token;oQ!==a&&(oQ=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dZ(e=xk()){const t=Kw(e,"auth");if(t.isInitialized())return t.getImmediate();const r=ype(e,{popupRedirectResolver:qge,persistence:[age,Gpe,aZ]}),n=CJ("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=Zge(s.toString());Hpe(r,o,()=>o(r.currentUser)),Qpe(r,l=>o(l))}}const a=NJ("auth");return a&&Npe(r,`http://${a}`),r}function exe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Ape({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=tA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",exe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xge("Browser");var txe="firebase",rxe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ku(txe,rxe,"app");var lQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hm,fZ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,k){function T(){}T.prototype=k.prototype,C.D=k.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(L,R,S){for(var U=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)U[Q-2]=arguments[Q];return k.prototype[R].apply(L,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,k,T){T||(T=0);var L=Array(16);if(typeof k=="string")for(var R=0;16>R;++R)L[R]=k.charCodeAt(T++)|k.charCodeAt(T++)<<8|k.charCodeAt(T++)<<16|k.charCodeAt(T++)<<24;else for(R=0;16>R;++R)L[R]=k[T++]|k[T++]<<8|k[T++]<<16|k[T++]<<24;k=C.g[0],T=C.g[1],R=C.g[2];var S=C.g[3],U=k+(S^T&(R^S))+L[0]+3614090360&4294967295;k=T+(U<<7&4294967295|U>>>25),U=S+(R^k&(T^R))+L[1]+3905402710&4294967295,S=k+(U<<12&4294967295|U>>>20),U=R+(T^S&(k^T))+L[2]+606105819&4294967295,R=S+(U<<17&4294967295|U>>>15),U=T+(k^R&(S^k))+L[3]+3250441966&4294967295,T=R+(U<<22&4294967295|U>>>10),U=k+(S^T&(R^S))+L[4]+4118548399&4294967295,k=T+(U<<7&4294967295|U>>>25),U=S+(R^k&(T^R))+L[5]+1200080426&4294967295,S=k+(U<<12&4294967295|U>>>20),U=R+(T^S&(k^T))+L[6]+2821735955&4294967295,R=S+(U<<17&4294967295|U>>>15),U=T+(k^R&(S^k))+L[7]+4249261313&4294967295,T=R+(U<<22&4294967295|U>>>10),U=k+(S^T&(R^S))+L[8]+1770035416&4294967295,k=T+(U<<7&4294967295|U>>>25),U=S+(R^k&(T^R))+L[9]+2336552879&4294967295,S=k+(U<<12&4294967295|U>>>20),U=R+(T^S&(k^T))+L[10]+4294925233&4294967295,R=S+(U<<17&4294967295|U>>>15),U=T+(k^R&(S^k))+L[11]+2304563134&4294967295,T=R+(U<<22&4294967295|U>>>10),U=k+(S^T&(R^S))+L[12]+1804603682&4294967295,k=T+(U<<7&4294967295|U>>>25),U=S+(R^k&(T^R))+L[13]+4254626195&4294967295,S=k+(U<<12&4294967295|U>>>20),U=R+(T^S&(k^T))+L[14]+2792965006&4294967295,R=S+(U<<17&4294967295|U>>>15),U=T+(k^R&(S^k))+L[15]+1236535329&4294967295,T=R+(U<<22&4294967295|U>>>10),U=k+(R^S&(T^R))+L[1]+4129170786&4294967295,k=T+(U<<5&4294967295|U>>>27),U=S+(T^R&(k^T))+L[6]+3225465664&4294967295,S=k+(U<<9&4294967295|U>>>23),U=R+(k^T&(S^k))+L[11]+643717713&4294967295,R=S+(U<<14&4294967295|U>>>18),U=T+(S^k&(R^S))+L[0]+3921069994&4294967295,T=R+(U<<20&4294967295|U>>>12),U=k+(R^S&(T^R))+L[5]+3593408605&4294967295,k=T+(U<<5&4294967295|U>>>27),U=S+(T^R&(k^T))+L[10]+38016083&4294967295,S=k+(U<<9&4294967295|U>>>23),U=R+(k^T&(S^k))+L[15]+3634488961&4294967295,R=S+(U<<14&4294967295|U>>>18),U=T+(S^k&(R^S))+L[4]+3889429448&4294967295,T=R+(U<<20&4294967295|U>>>12),U=k+(R^S&(T^R))+L[9]+568446438&4294967295,k=T+(U<<5&4294967295|U>>>27),U=S+(T^R&(k^T))+L[14]+3275163606&4294967295,S=k+(U<<9&4294967295|U>>>23),U=R+(k^T&(S^k))+L[3]+4107603335&4294967295,R=S+(U<<14&4294967295|U>>>18),U=T+(S^k&(R^S))+L[8]+1163531501&4294967295,T=R+(U<<20&4294967295|U>>>12),U=k+(R^S&(T^R))+L[13]+2850285829&4294967295,k=T+(U<<5&4294967295|U>>>27),U=S+(T^R&(k^T))+L[2]+4243563512&4294967295,S=k+(U<<9&4294967295|U>>>23),U=R+(k^T&(S^k))+L[7]+1735328473&4294967295,R=S+(U<<14&4294967295|U>>>18),U=T+(S^k&(R^S))+L[12]+2368359562&4294967295,T=R+(U<<20&4294967295|U>>>12),U=k+(T^R^S)+L[5]+4294588738&4294967295,k=T+(U<<4&4294967295|U>>>28),U=S+(k^T^R)+L[8]+2272392833&4294967295,S=k+(U<<11&4294967295|U>>>21),U=R+(S^k^T)+L[11]+1839030562&4294967295,R=S+(U<<16&4294967295|U>>>16),U=T+(R^S^k)+L[14]+4259657740&4294967295,T=R+(U<<23&4294967295|U>>>9),U=k+(T^R^S)+L[1]+2763975236&4294967295,k=T+(U<<4&4294967295|U>>>28),U=S+(k^T^R)+L[4]+1272893353&4294967295,S=k+(U<<11&4294967295|U>>>21),U=R+(S^k^T)+L[7]+4139469664&4294967295,R=S+(U<<16&4294967295|U>>>16),U=T+(R^S^k)+L[10]+3200236656&4294967295,T=R+(U<<23&4294967295|U>>>9),U=k+(T^R^S)+L[13]+681279174&4294967295,k=T+(U<<4&4294967295|U>>>28),U=S+(k^T^R)+L[0]+3936430074&4294967295,S=k+(U<<11&4294967295|U>>>21),U=R+(S^k^T)+L[3]+3572445317&4294967295,R=S+(U<<16&4294967295|U>>>16),U=T+(R^S^k)+L[6]+76029189&4294967295,T=R+(U<<23&4294967295|U>>>9),U=k+(T^R^S)+L[9]+3654602809&4294967295,k=T+(U<<4&4294967295|U>>>28),U=S+(k^T^R)+L[12]+3873151461&4294967295,S=k+(U<<11&4294967295|U>>>21),U=R+(S^k^T)+L[15]+530742520&4294967295,R=S+(U<<16&4294967295|U>>>16),U=T+(R^S^k)+L[2]+3299628645&4294967295,T=R+(U<<23&4294967295|U>>>9),U=k+(R^(T|~S))+L[0]+4096336452&4294967295,k=T+(U<<6&4294967295|U>>>26),U=S+(T^(k|~R))+L[7]+1126891415&4294967295,S=k+(U<<10&4294967295|U>>>22),U=R+(k^(S|~T))+L[14]+2878612391&4294967295,R=S+(U<<15&4294967295|U>>>17),U=T+(S^(R|~k))+L[5]+4237533241&4294967295,T=R+(U<<21&4294967295|U>>>11),U=k+(R^(T|~S))+L[12]+1700485571&4294967295,k=T+(U<<6&4294967295|U>>>26),U=S+(T^(k|~R))+L[3]+2399980690&4294967295,S=k+(U<<10&4294967295|U>>>22),U=R+(k^(S|~T))+L[10]+4293915773&4294967295,R=S+(U<<15&4294967295|U>>>17),U=T+(S^(R|~k))+L[1]+2240044497&4294967295,T=R+(U<<21&4294967295|U>>>11),U=k+(R^(T|~S))+L[8]+1873313359&4294967295,k=T+(U<<6&4294967295|U>>>26),U=S+(T^(k|~R))+L[15]+4264355552&4294967295,S=k+(U<<10&4294967295|U>>>22),U=R+(k^(S|~T))+L[6]+2734768916&4294967295,R=S+(U<<15&4294967295|U>>>17),U=T+(S^(R|~k))+L[13]+1309151649&4294967295,T=R+(U<<21&4294967295|U>>>11),U=k+(R^(T|~S))+L[4]+4149444226&4294967295,k=T+(U<<6&4294967295|U>>>26),U=S+(T^(k|~R))+L[11]+3174756917&4294967295,S=k+(U<<10&4294967295|U>>>22),U=R+(k^(S|~T))+L[2]+718787259&4294967295,R=S+(U<<15&4294967295|U>>>17),U=T+(S^(R|~k))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+k&4294967295,C.g[1]=C.g[1]+(R+(U<<21&4294967295|U>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+S&4294967295}n.prototype.u=function(C,k){k===void 0&&(k=C.length);for(var T=k-this.blockSize,L=this.B,R=this.h,S=0;S<k;){if(R==0)for(;S<=T;)a(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<k;)if(L[R++]=C.charCodeAt(S++),R==this.blockSize){a(this,L),R=0;break}}else for(;S<k;)if(L[R++]=C[S++],R==this.blockSize){a(this,L),R=0;break}}this.h=R,this.o+=k},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var k=1;k<C.length-8;++k)C[k]=0;var T=8*this.o;for(k=C.length-8;k<C.length;++k)C[k]=T&255,T/=256;for(this.u(C),C=Array(16),k=T=0;4>k;++k)for(var L=0;32>L;L+=8)C[T++]=this.g[k]>>>L&255;return C};function s(C,k){var T=l;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=k(C)}function o(C,k){this.h=k;for(var T=[],L=!0,R=C.length-1;0<=R;R--){var S=C[R]|0;L&&S==k||(T[R]=S,L=!1)}this.g=T}var l={};function c(C){return-128<=C&&128>C?s(C,function(k){return new o([k|0],0>k?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return v(u(-C));for(var k=[],T=1,L=0;C>=T;L++)k[L]=C/T|0,T*=4294967296;return new o(k,0)}function d(C,k){if(C.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C.charAt(0)=="-")return v(d(C.substring(1),k));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(k,8)),L=f,R=0;R<C.length;R+=8){var S=Math.min(8,C.length-R),U=parseInt(C.substring(R,R+S),k);8>S?(S=u(Math.pow(k,S)),L=L.j(S).add(u(U))):(L=L.j(T),L=L.add(u(U)))}return L}var f=c(0),h=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var C=0,k=1,T=0;T<this.g.length;T++){var L=this.i(T);C+=(0<=L?L:4294967296+L)*k,k*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(x(this))return"-"+v(this).toString(C);for(var k=u(Math.pow(C,6)),T=this,L="";;){var R=O(T,k).g;T=y(T,R.j(k));var S=((0<T.g.length?T.g[0]:T.h)>>>0).toString(C);if(T=R,g(T))return S+L;for(;6>S.length;)S="0"+S;L=S+L}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(var k=0;k<C.g.length;k++)if(C.g[k]!=0)return!1;return!0}function x(C){return C.h==-1}e.l=function(C){return C=y(this,C),x(C)?-1:g(C)?0:1};function v(C){for(var k=C.g.length,T=[],L=0;L<k;L++)T[L]=~C.g[L];return new o(T,~C.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(C){for(var k=Math.max(this.g.length,C.g.length),T=[],L=0,R=0;R<=k;R++){var S=L+(this.i(R)&65535)+(C.i(R)&65535),U=(S>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);L=U>>>16,S&=65535,U&=65535,T[R]=U<<16|S}return new o(T,T[T.length-1]&-2147483648?-1:0)};function y(C,k){return C.add(v(k))}e.j=function(C){if(g(this)||g(C))return f;if(x(this))return x(C)?v(this).j(v(C)):v(v(this).j(C));if(x(C))return v(this.j(v(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var k=this.g.length+C.g.length,T=[],L=0;L<2*k;L++)T[L]=0;for(L=0;L<this.g.length;L++)for(var R=0;R<C.g.length;R++){var S=this.i(L)>>>16,U=this.i(L)&65535,Q=C.i(R)>>>16,X=C.i(R)&65535;T[2*L+2*R]+=U*X,w(T,2*L+2*R),T[2*L+2*R+1]+=S*X,w(T,2*L+2*R+1),T[2*L+2*R+1]+=U*Q,w(T,2*L+2*R+1),T[2*L+2*R+2]+=S*Q,w(T,2*L+2*R+2)}for(L=0;L<k;L++)T[L]=T[2*L+1]<<16|T[2*L];for(L=k;L<2*k;L++)T[L]=0;return new o(T,0)};function w(C,k){for(;(C[k]&65535)!=C[k];)C[k+1]+=C[k]>>>16,C[k]&=65535,k++}function _(C,k){this.g=C,this.h=k}function O(C,k){if(g(k))throw Error("division by zero");if(g(C))return new _(f,f);if(x(C))return k=O(v(C),k),new _(v(k.g),v(k.h));if(x(k))return k=O(C,v(k)),new _(v(k.g),k.h);if(30<C.g.length){if(x(C)||x(k))throw Error("slowDivide_ only works with positive integers.");for(var T=h,L=k;0>=L.l(C);)T=j(T),L=j(L);var R=B(T,1),S=B(L,1);for(L=B(L,2),T=B(T,2);!g(L);){var U=S.add(L);0>=U.l(C)&&(R=R.add(T),S=U),L=B(L,1),T=B(T,1)}return k=y(C,R.j(k)),new _(R,k)}for(R=f;0<=C.l(k);){for(T=Math.max(1,Math.floor(C.m()/k.m())),L=Math.ceil(Math.log(T)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),S=u(T),U=S.j(k);x(U)||0<U.l(C);)T-=L,S=u(T),U=S.j(k);g(S)&&(S=h),R=R.add(S),C=y(C,U)}return new _(R,C)}e.A=function(C){return O(this,C).h},e.and=function(C){for(var k=Math.max(this.g.length,C.g.length),T=[],L=0;L<k;L++)T[L]=this.i(L)&C.i(L);return new o(T,this.h&C.h)},e.or=function(C){for(var k=Math.max(this.g.length,C.g.length),T=[],L=0;L<k;L++)T[L]=this.i(L)|C.i(L);return new o(T,this.h|C.h)},e.xor=function(C){for(var k=Math.max(this.g.length,C.g.length),T=[],L=0;L<k;L++)T[L]=this.i(L)^C.i(L);return new o(T,this.h^C.h)};function j(C){for(var k=C.g.length+1,T=[],L=0;L<k;L++)T[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(T,C.h)}function B(C,k){var T=k>>5;k%=32;for(var L=C.g.length-T,R=[],S=0;S<L;S++)R[S]=0<k?C.i(S+T)>>>k|C.i(S+T+1)<<32-k:C.i(S+T);return new o(R,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,fZ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,hm=o}).apply(typeof lQ<"u"?lQ:typeof self<"u"?self:typeof window<"u"?window:{});var ME=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AZ,$y,hZ,y5,Z6,mZ,pZ,gZ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(P,se,ce){return P==Array.prototype||P==Object.prototype||(P[se]=ce.value),P};function r(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof ME=="object"&&ME];for(var se=0;se<P.length;++se){var ce=P[se];if(ce&&ce.Math==Math)return ce}throw Error("Cannot find global object")}var n=r(this);function a(P,se){if(se)e:{var ce=n;P=P.split(".");for(var Ee=0;Ee<P.length-1;Ee++){var Ze=P[Ee];if(!(Ze in ce))break e;ce=ce[Ze]}P=P[P.length-1],Ee=ce[P],se=se(Ee),se!=Ee&&se!=null&&t(ce,P,{configurable:!0,writable:!0,value:se})}}function s(P,se){P instanceof String&&(P+="");var ce=0,Ee=!1,Ze={next:function(){if(!Ee&&ce<P.length){var ut=ce++;return{value:se(ut,P[ut]),done:!1}}return Ee=!0,{done:!0,value:void 0}}};return Ze[Symbol.iterator]=function(){return Ze},Ze}a("Array.prototype.values",function(P){return P||function(){return s(this,function(se,ce){return ce})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(P){var se=typeof P;return se=se!="object"?se:P?Array.isArray(P)?"array":se:"null",se=="array"||se=="object"&&typeof P.length=="number"}function u(P){var se=typeof P;return se=="object"&&P!=null||se=="function"}function d(P,se,ce){return P.call.apply(P.bind,arguments)}function f(P,se,ce){if(!P)throw Error();if(2<arguments.length){var Ee=Array.prototype.slice.call(arguments,2);return function(){var Ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ze,Ee),P.apply(se,Ze)}}return function(){return P.apply(se,arguments)}}function h(P,se,ce){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(P,se){var ce=Array.prototype.slice.call(arguments,1);return function(){var Ee=ce.slice();return Ee.push.apply(Ee,arguments),P.apply(this,Ee)}}function g(P,se){function ce(){}ce.prototype=se.prototype,P.aa=se.prototype,P.prototype=new ce,P.prototype.constructor=P,P.Qb=function(Ee,Ze,ut){for(var Mt=Array(arguments.length-2),Sr=2;Sr<arguments.length;Sr++)Mt[Sr-2]=arguments[Sr];return se.prototype[Ze].apply(Ee,Mt)}}function x(P){const se=P.length;if(0<se){const ce=Array(se);for(let Ee=0;Ee<se;Ee++)ce[Ee]=P[Ee];return ce}return[]}function v(P,se){for(let ce=1;ce<arguments.length;ce++){const Ee=arguments[ce];if(c(Ee)){const Ze=P.length||0,ut=Ee.length||0;P.length=Ze+ut;for(let Mt=0;Mt<ut;Mt++)P[Ze+Mt]=Ee[Mt]}else P.push(Ee)}}class y{constructor(se,ce){this.i=se,this.j=ce,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function w(P){return/^[\s\xa0]*$/.test(P)}function _(){var P=l.navigator;return P&&(P=P.userAgent)?P:""}function O(P){return O[" "](P),P}O[" "]=function(){};var j=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function B(P,se,ce){for(const Ee in P)se.call(ce,P[Ee],Ee,P)}function C(P,se){for(const ce in P)se.call(void 0,P[ce],ce,P)}function k(P){const se={};for(const ce in P)se[ce]=P[ce];return se}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(P,se){let ce,Ee;for(let Ze=1;Ze<arguments.length;Ze++){Ee=arguments[Ze];for(ce in Ee)P[ce]=Ee[ce];for(let ut=0;ut<T.length;ut++)ce=T[ut],Object.prototype.hasOwnProperty.call(Ee,ce)&&(P[ce]=Ee[ce])}}function R(P){var se=1;P=P.split(":");const ce=[];for(;0<se&&P.length;)ce.push(P.shift()),se--;return P.length&&ce.push(P.join(":")),ce}function S(P){l.setTimeout(()=>{throw P},0)}function U(){var P=Y;let se=null;return P.g&&(se=P.g,P.g=P.g.next,P.g||(P.h=null),se.next=null),se}class Q{constructor(){this.h=this.g=null}add(se,ce){const Ee=X.get();Ee.set(se,ce),this.h?this.h.next=Ee:this.g=Ee,this.h=Ee}}var X=new y(()=>new z,P=>P.reset());class z{constructor(){this.next=this.g=this.h=null}set(se,ce){this.h=se,this.g=ce,this.next=null}reset(){this.next=this.g=this.h=null}}let W,G=!1,Y=new Q,K=()=>{const P=l.Promise.resolve(void 0);W=()=>{P.then(H)}};var H=()=>{for(var P;P=U();){try{P.h.call(P.g)}catch(ce){S(ce)}var se=X;se.j(P),100>se.h&&(se.h++,P.next=se.g,se.g=P)}G=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(P,se){this.type=P,this.g=this.target=se,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var P=!1,se=Object.defineProperty({},"passive",{get:function(){P=!0}});try{const ce=()=>{};l.addEventListener("test",ce,se),l.removeEventListener("test",ce,se)}catch{}return P}();function J(P,se){if(D.call(this,P?P.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,P){var ce=this.type=P.type,Ee=P.changedTouches&&P.changedTouches.length?P.changedTouches[0]:null;if(this.target=P.target||P.srcElement,this.g=se,se=P.relatedTarget){if(j){e:{try{O(se.nodeName);var Ze=!0;break e}catch{}Ze=!1}Ze||(se=null)}}else ce=="mouseover"?se=P.fromElement:ce=="mouseout"&&(se=P.toElement);this.relatedTarget=se,Ee?(this.clientX=Ee.clientX!==void 0?Ee.clientX:Ee.pageX,this.clientY=Ee.clientY!==void 0?Ee.clientY:Ee.pageY,this.screenX=Ee.screenX||0,this.screenY=Ee.screenY||0):(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0),this.button=P.button,this.key=P.key||"",this.ctrlKey=P.ctrlKey,this.altKey=P.altKey,this.shiftKey=P.shiftKey,this.metaKey=P.metaKey,this.pointerId=P.pointerId||0,this.pointerType=typeof P.pointerType=="string"?P.pointerType:te[P.pointerType]||"",this.state=P.state,this.i=P,P.defaultPrevented&&J.aa.h.call(this)}}g(J,D);var te={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var P=this.i;P.preventDefault?P.preventDefault():P.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),ie=0;function oe(P,se,ce,Ee,Ze){this.listener=P,this.proxy=null,this.src=se,this.type=ce,this.capture=!!Ee,this.ha=Ze,this.key=++ie,this.da=this.fa=!1}function de(P){P.da=!0,P.listener=null,P.proxy=null,P.src=null,P.ha=null}function ke(P){this.src=P,this.g={},this.h=0}ke.prototype.add=function(P,se,ce,Ee,Ze){var ut=P.toString();P=this.g[ut],P||(P=this.g[ut]=[],this.h++);var Mt=Oe(P,se,Ee,Ze);return-1<Mt?(se=P[Mt],ce||(se.fa=!1)):(se=new oe(se,this.src,ut,!!Ee,Ze),se.fa=ce,P.push(se)),se};function ae(P,se){var ce=se.type;if(ce in P.g){var Ee=P.g[ce],Ze=Array.prototype.indexOf.call(Ee,se,void 0),ut;(ut=0<=Ze)&&Array.prototype.splice.call(Ee,Ze,1),ut&&(de(se),P.g[ce].length==0&&(delete P.g[ce],P.h--))}}function Oe(P,se,ce,Ee){for(var Ze=0;Ze<P.length;++Ze){var ut=P[Ze];if(!ut.da&&ut.listener==se&&ut.capture==!!ce&&ut.ha==Ee)return Ze}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),Se={};function fe(P,se,ce,Ee,Ze){if(Array.isArray(se)){for(var ut=0;ut<se.length;ut++)fe(P,se[ut],ce,Ee,Ze);return null}return ce=tt(ce),P&&P[ne]?P.K(se,ce,u(Ee)?!!Ee.capture:!1,Ze):ye(P,se,ce,!1,Ee,Ze)}function ye(P,se,ce,Ee,Ze,ut){if(!se)throw Error("Invalid event type");var Mt=u(Ze)?!!Ze.capture:!!Ze,Sr=He(P);if(Sr||(P[Te]=Sr=new ke(P)),ce=Sr.add(se,ce,Ee,Mt,ut),ce.proxy)return ce;if(Ee=Le(),ce.proxy=Ee,Ee.src=P,Ee.listener=ce,P.addEventListener)q||(Ze=Mt),Ze===void 0&&(Ze=!1),P.addEventListener(se.toString(),Ee,Ze);else if(P.attachEvent)P.attachEvent(we(se.toString()),Ee);else if(P.addListener&&P.removeListener)P.addListener(Ee);else throw Error("addEventListener and attachEvent are unavailable.");return ce}function Le(){function P(ce){return se.call(P.src,P.listener,ce)}const se=De;return P}function Qe(P,se,ce,Ee,Ze){if(Array.isArray(se))for(var ut=0;ut<se.length;ut++)Qe(P,se[ut],ce,Ee,Ze);else Ee=u(Ee)?!!Ee.capture:!!Ee,ce=tt(ce),P&&P[ne]?(P=P.i,se=String(se).toString(),se in P.g&&(ut=P.g[se],ce=Oe(ut,ce,Ee,Ze),-1<ce&&(de(ut[ce]),Array.prototype.splice.call(ut,ce,1),ut.length==0&&(delete P.g[se],P.h--)))):P&&(P=He(P))&&(se=P.g[se.toString()],P=-1,se&&(P=Oe(se,ce,Ee,Ze)),(ce=-1<P?se[P]:null)&&ue(ce))}function ue(P){if(typeof P!="number"&&P&&!P.da){var se=P.src;if(se&&se[ne])ae(se.i,P);else{var ce=P.type,Ee=P.proxy;se.removeEventListener?se.removeEventListener(ce,Ee,P.capture):se.detachEvent?se.detachEvent(we(ce),Ee):se.addListener&&se.removeListener&&se.removeListener(Ee),(ce=He(se))?(ae(ce,P),ce.h==0&&(ce.src=null,se[Te]=null)):de(P)}}}function we(P){return P in Se?Se[P]:Se[P]="on"+P}function De(P,se){if(P.da)P=!0;else{se=new J(se,this);var ce=P.listener,Ee=P.ha||P.src;P.fa&&ue(P),P=ce.call(Ee,se)}return P}function He(P){return P=P[Te],P instanceof ke?P:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function tt(P){return typeof P=="function"?P:(P[Ye]||(P[Ye]=function(se){return P.handleEvent(se)}),P[Ye])}function ft(){F.call(this),this.i=new ke(this),this.M=this,this.F=null}g(ft,F),ft.prototype[ne]=!0,ft.prototype.removeEventListener=function(P,se,ce,Ee){Qe(this,P,se,ce,Ee)};function $e(P,se){var ce,Ee=P.F;if(Ee)for(ce=[];Ee;Ee=Ee.F)ce.push(Ee);if(P=P.M,Ee=se.type||se,typeof se=="string")se=new D(se,P);else if(se instanceof D)se.target=se.target||P;else{var Ze=se;se=new D(Ee,P),L(se,Ze)}if(Ze=!0,ce)for(var ut=ce.length-1;0<=ut;ut--){var Mt=se.g=ce[ut];Ze=nt(Mt,Ee,!0,se)&&Ze}if(Mt=se.g=P,Ze=nt(Mt,Ee,!0,se)&&Ze,Ze=nt(Mt,Ee,!1,se)&&Ze,ce)for(ut=0;ut<ce.length;ut++)Mt=se.g=ce[ut],Ze=nt(Mt,Ee,!1,se)&&Ze}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var P=this.i,se;for(se in P.g){for(var ce=P.g[se],Ee=0;Ee<ce.length;Ee++)de(ce[Ee]);delete P.g[se],P.h--}}this.F=null},ft.prototype.K=function(P,se,ce,Ee){return this.i.add(String(P),se,!1,ce,Ee)},ft.prototype.L=function(P,se,ce,Ee){return this.i.add(String(P),se,!0,ce,Ee)};function nt(P,se,ce,Ee){if(se=P.i.g[String(se)],!se)return!0;se=se.concat();for(var Ze=!0,ut=0;ut<se.length;++ut){var Mt=se[ut];if(Mt&&!Mt.da&&Mt.capture==ce){var Sr=Mt.listener,hn=Mt.ha||Mt.src;Mt.fa&&ae(P.i,Mt),Ze=Sr.call(hn,Ee)!==!1&&Ze}}return Ze&&!Ee.defaultPrevented}function bt(P,se,ce){if(typeof P=="function")ce&&(P=h(P,ce));else if(P&&typeof P.handleEvent=="function")P=h(P.handleEvent,P);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:l.setTimeout(P,se||0)}function Bt(P){P.g=bt(()=>{P.g=null,P.i&&(P.i=!1,Bt(P))},P.l);const se=P.h;P.h=null,P.m.apply(null,se)}class xt extends F{constructor(se,ce){super(),this.m=se,this.l=ce,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:Bt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(P){F.call(this),this.h=P,this.g={}}g(xr,F);var Xt=[];function Gr(P){B(P.g,function(se,ce){this.g.hasOwnProperty(ce)&&ue(se)},P),P.g={}}xr.prototype.N=function(){xr.aa.N.call(this),Gr(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=l.JSON.stringify,Ur=l.JSON.parse,_n=class{stringify(P){return l.JSON.stringify(P,void 0)}parse(P){return l.JSON.parse(P,void 0)}};function jr(){}jr.prototype.h=null;function hs(P){return P.h||(P.h=P.i())}function qr(){}var Rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ja(){D.call(this,"d")}g(ja,D);function Fr(){D.call(this,"c")}g(Fr,D);var fr={},Xr=null;function ms(){return Xr=Xr||new ft}fr.La="serverreachability";function Yn(P){D.call(this,fr.La,P)}g(Yn,D);function Ba(P){const se=ms();$e(se,new Yn(se))}fr.STAT_EVENT="statevent";function Rs(P,se){D.call(this,fr.STAT_EVENT,P),this.stat=se}g(Rs,D);function Wt(P){const se=ms();$e(se,new Rs(se,P))}fr.Ma="timingevent";function xn(P,se){D.call(this,fr.Ma,P),this.size=se}g(xn,D);function ln(P,se){if(typeof P!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){P()},se)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Kn(P,se,ce,Ee,Ze,ut){P.info(function(){if(P.g)if(ut)for(var Mt="",Sr=ut.split("&"),hn=0;hn<Sr.length;hn++){var Vr=Sr[hn].split("=");if(1<Vr.length){var Mn=Vr[0];Vr=Vr[1];var Zn=Mn.split("_");Mt=2<=Zn.length&&Zn[1]=="type"?Mt+(Mn+"="+Vr+"&"):Mt+(Mn+"=redacted&")}}else Mt=null;else Mt=ut;return"XMLHTTP REQ ("+Ee+") [attempt "+Ze+"]: "+se+`
`+ce+`
`+Mt})}function Jn(P,se,ce,Ee,Ze,ut,Mt){P.info(function(){return"XMLHTTP RESP ("+Ee+") [ attempt "+Ze+"]: "+se+`
`+ce+`
`+ut+" "+Mt})}function xe(P,se,ce,Ee){P.info(function(){return"XMLHTTP TEXT ("+se+"): "+Be(P,ce)+(Ee?" "+Ee:"")})}function Re(P,se){P.info(function(){return"TIMEOUT: "+se})}Fn.prototype.info=function(){};function Be(P,se){if(!P.g)return se;if(!se)return null;try{var ce=JSON.parse(se);if(ce){for(P=0;P<ce.length;P++)if(Array.isArray(ce[P])){var Ee=ce[P];if(!(2>Ee.length)){var Ze=Ee[1];if(Array.isArray(Ze)&&!(1>Ze.length)){var ut=Ze[0];if(ut!="noop"&&ut!="stop"&&ut!="close")for(var Mt=1;Mt<Ze.length;Mt++)Ze[Mt]=""}}}}return wr(ce)}catch{return se}}var Fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},me={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ae;function _e(){}g(_e,jr),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},Ae=new _e;function Me(P,se,ce,Ee){this.j=P,this.i=se,this.l=ce,this.R=Ee||1,this.U=new xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}var ze={},qe={};function vt(P,se,ce){P.L=1,P.v=lu(Ei(se)),P.m=ce,P.P=!0,yt(P,null)}function yt(P,se){P.F=Date.now(),Qt(P),P.A=Ei(P.v);var ce=P.A,Ee=P.R;Array.isArray(Ee)||(Ee=[String(Ee)]),_r(ce.i,"t",Ee),P.C=0,ce=P.j.J,P.h=new Ie,P.g=ge(P.j,ce?se:null,!P.m),0<P.O&&(P.M=new xt(h(P.Y,P,P.g),P.O)),se=P.U,ce=P.g,Ee=P.ca;var Ze="readystatechange";Array.isArray(Ze)||(Ze&&(Xt[0]=Ze.toString()),Ze=Xt);for(var ut=0;ut<Ze.length;ut++){var Mt=fe(ce,Ze[ut],Ee||se.handleEvent,!1,se.h||se);if(!Mt)break;se.g[Mt.key]=Mt}se=P.H?k(P.H):{},P.m?(P.u||(P.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",P.g.ea(P.A,P.u,P.m,se)):(P.u="GET",P.g.ea(P.A,P.u,null,se)),Ba(),Kn(P.i,P.u,P.A,P.l,P.R,P.m)}Me.prototype.ca=function(P){P=P.target;const se=this.M;se&&vs(P)==3?se.j():this.Y(P)},Me.prototype.Y=function(P){try{if(P==this.g)e:{const Zn=vs(this.g);var se=this.g.Ba();const Ul=this.g.Z();if(!(3>Zn)&&(Zn!=3||this.g&&(this.h.h||this.g.oa()||t0(this.g)))){this.J||Zn!=4||se==7||(se==8||0>=Ul?Ba(3):Ba(2)),Jr(this);var ce=this.g.Z();this.X=ce;t:if(Ut(this)){var Ee=t0(this.g);P="";var Ze=Ee.length,ut=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Zr(this);var Mt="";break t}this.h.i=new l.TextDecoder}for(se=0;se<Ze;se++)this.h.h=!0,P+=this.h.i.decode(Ee[se],{stream:!(ut&&se==Ze-1)});Ee.length=0,this.h.g+=P,this.C=0,Mt=this.h.g}else Mt=this.g.oa();if(this.o=ce==200,Jn(this.i,this.u,this.A,this.l,this.R,Zn,ce),this.o){if(this.T&&!this.K){t:{if(this.g){var Sr,hn=this.g;if((Sr=hn.g?hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Sr)){var Vr=Sr;break t}}Vr=null}if(ce=Vr)xe(this.i,this.l,ce,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ps(this,ce);else{this.o=!1,this.s=3,Wt(12),an(this),Zr(this);break e}}if(this.P){ce=!0;let rs;for(;!this.J&&this.C<Mt.length;)if(rs=kt(this,Mt),rs==qe){Zn==4&&(this.s=4,Wt(14),ce=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}else if(rs==ze){this.s=4,Wt(15),xe(this.i,this.l,Mt,"[Invalid Chunk]"),ce=!1;break}else xe(this.i,this.l,rs,null),ps(this,rs);if(Ut(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zn!=4||Mt.length!=0||this.h.h||(this.s=1,Wt(16),ce=!1),this.o=this.o&&ce,!ce)xe(this.i,this.l,Mt,"[Invalid Chunked Response]"),an(this),Zr(this);else if(0<Mt.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+Mt.length),hu(Mn),Mn.M=!0,Wt(11))}}else xe(this.i,this.l,Mt,null),ps(this,Mt);Zn==4&&an(this),this.o&&!this.J&&(Zn==4?mu(this.j,this):(this.o=!1,Qt(this)))}else du(this.g),ce==400&&0<Mt.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),an(this),Zr(this)}}}catch{}finally{}};function Ut(P){return P.g?P.u=="GET"&&P.L!=2&&P.j.Ca:!1}function kt(P,se){var ce=P.C,Ee=se.indexOf(`
`,ce);return Ee==-1?qe:(ce=Number(se.substring(ce,Ee)),isNaN(ce)?ze:(Ee+=1,Ee+ce>se.length?qe:(se=se.slice(Ee,Ee+ce),P.C=Ee+ce,se)))}Me.prototype.cancel=function(){this.J=!0,an(this)};function Qt(P){P.S=Date.now()+P.I,Nr(P,P.I)}function Nr(P,se){if(P.B!=null)throw Error("WatchDog timer not null");P.B=ln(h(P.ba,P),se)}function Jr(P){P.B&&(l.clearTimeout(P.B),P.B=null)}Me.prototype.ba=function(){this.B=null;const P=Date.now();0<=P-this.S?(Re(this.i,this.A),this.L!=2&&(Ba(),Wt(17)),an(this),this.s=2,Zr(this)):Nr(this,this.S-P)};function Zr(P){P.j.G==0||P.J||mu(P.j,P)}function an(P){Jr(P);var se=P.M;se&&typeof se.ma=="function"&&se.ma(),P.M=null,Gr(P.U),P.g&&(se=P.g,P.g=null,se.abort(),se.ma())}function ps(P,se){try{var ce=P.j;if(ce.G!=0&&(ce.g==P||wi(ce.h,P))){if(!P.K&&wi(ce.h,P)&&ce.G==3){try{var Ee=ce.Da.g.parse(se)}catch{Ee=null}if(Array.isArray(Ee)&&Ee.length==3){var Ze=Ee;if(Ze[0]==0){e:if(!ce.u){if(ce.g)if(ce.g.F+3e3<P.F)bc(ce),lf(ce);else break e;ld(ce),Wt(18)}}else ce.za=Ze[1],0<ce.za-ce.T&&37500>Ze[2]&&ce.F&&ce.v==0&&!ce.C&&(ce.C=ln(h(ce.Za,ce),6e3));if(1>=Ls(ce.h)&&ce.ca){try{ce.ca()}catch{}ce.ca=void 0}}else Qi(ce,11)}else if((P.K||ce.g==P)&&bc(ce),!w(se))for(Ze=ce.Da.g.parse(se),se=0;se<Ze.length;se++){let Vr=Ze[se];if(ce.T=Vr[0],Vr=Vr[1],ce.G==2)if(Vr[0]=="c"){ce.K=Vr[1],ce.ia=Vr[2];const Mn=Vr[3];Mn!=null&&(ce.la=Mn,ce.j.info("VER="+ce.la));const Zn=Vr[4];Zn!=null&&(ce.Aa=Zn,ce.j.info("SVER="+ce.Aa));const Ul=Vr[5];Ul!=null&&typeof Ul=="number"&&0<Ul&&(Ee=1.5*Ul,ce.L=Ee,ce.j.info("backChannelRequestTimeoutMs_="+Ee)),Ee=ce;const rs=P.g;if(rs){const Fo=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var ut=Ee.h;ut.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(ma(ut,ut.h),ut.h=null))}if(Ee.D){const pu=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(Ee.ya=pu,Ln(Ee.I,Ee.D,pu))}}ce.G=3,ce.l&&ce.l.ua(),ce.ba&&(ce.R=Date.now()-P.F,ce.j.info("Handshake RTT: "+ce.R+"ms")),Ee=ce;var Mt=P;if(Ee.qa=ee(Ee,Ee.J?Ee.ia:null,Ee.W),Mt.K){ai(Ee.h,Mt);var Sr=Mt,hn=Ee.L;hn&&(Sr.I=hn),Sr.B&&(Jr(Sr),Qt(Sr)),Ee.g=Mt}else uf(Ee);0<ce.i.length&&cf(ce)}else Vr[0]!="stop"&&Vr[0]!="close"||Qi(ce,7);else ce.G==3&&(Vr[0]=="stop"||Vr[0]=="close"?Vr[0]=="stop"?Qi(ce,7):vc(ce):Vr[0]!="noop"&&ce.l&&ce.l.ta(Vr),ce.v=0)}}Ba(4)}catch{}}var ko=class{constructor(P,se){this.g=P,this.map=se}};function gs(P){this.l=P||10,l.PerformanceNavigationTiming?(P=l.performance.getEntriesByType("navigation"),P=0<P.length&&(P[0].nextHopProtocol=="hq"||P[0].nextHopProtocol=="h2")):P=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=P?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ni(P){return P.h?!0:P.g?P.g.size>=P.j:!1}function Ls(P){return P.h?1:P.g?P.g.size:0}function wi(P,se){return P.h?P.h==se:P.g?P.g.has(se):!1}function ma(P,se){P.g?P.g.add(se):P.h=se}function ai(P,se){P.h&&P.h==se?P.h=null:P.g&&P.g.has(se)&&P.g.delete(se)}gs.prototype.cancel=function(){if(this.i=af(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const P of this.g.values())P.cancel();this.g.clear()}};function af(P){if(P.h!=null)return P.i.concat(P.h.D);if(P.g!=null&&P.g.size!==0){let se=P.i;for(const ce of P.g.values())se=se.concat(ce.D);return se}return x(P.i)}function Jh(P){if(P.V&&typeof P.V=="function")return P.V();if(typeof Map<"u"&&P instanceof Map||typeof Set<"u"&&P instanceof Set)return Array.from(P.values());if(typeof P=="string")return P.split("");if(c(P)){for(var se=[],ce=P.length,Ee=0;Ee<ce;Ee++)se.push(P[Ee]);return se}se=[],ce=0;for(Ee in P)se[ce++]=P[Ee];return se}function su(P){if(P.na&&typeof P.na=="function")return P.na();if(!P.V||typeof P.V!="function"){if(typeof Map<"u"&&P instanceof Map)return Array.from(P.keys());if(!(typeof Set<"u"&&P instanceof Set)){if(c(P)||typeof P=="string"){var se=[];P=P.length;for(var ce=0;ce<P;ce++)se.push(ce);return se}se=[],ce=0;for(const Ee in P)se[ce++]=Ee;return se}}}function vA(P,se){if(P.forEach&&typeof P.forEach=="function")P.forEach(se,void 0);else if(c(P)||typeof P=="string")Array.prototype.forEach.call(P,se,void 0);else for(var ce=su(P),Ee=Jh(P),Ze=Ee.length,ut=0;ut<Ze;ut++)se.call(void 0,Ee[ut],ce&&ce[ut],P)}var Ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sf(P,se){if(P){P=P.split("&");for(var ce=0;ce<P.length;ce++){var Ee=P[ce].indexOf("="),Ze=null;if(0<=Ee){var ut=P[ce].substring(0,Ee);Ze=P[ce].substring(Ee+1)}else ut=P[ce];se(ut,Ze?decodeURIComponent(Ze.replace(/\+/g," ")):"")}}}function Sn(P){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,P instanceof Sn){this.h=P.h,iu(this,P.j),this.o=P.o,this.g=P.g,ou(this,P.s),this.l=P.l;var se=P.i,ce=new Ol;ce.i=se.i,se.g&&(ce.g=new Map(se.g),ce.h=se.h),Fl(this,ce),this.m=P.m}else P&&(se=String(P).match(Ni))?(this.h=!1,iu(this,se[1]||"",!0),this.o=jo(se[2]||""),this.g=jo(se[3]||"",!0),ou(this,se[4]),this.l=jo(se[5]||"",!0),Fl(this,se[6]||"",!0),this.m=jo(se[7]||"")):(this.h=!1,this.i=new Ol(null,this.h))}Sn.prototype.toString=function(){var P=[],se=this.j;se&&P.push(hc(se,bA,!0),":");var ce=this.g;return(ce||se=="file")&&(P.push("//"),(se=this.o)&&P.push(hc(se,bA,!0),"@"),P.push(encodeURIComponent(String(ce)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ce=this.s,ce!=null&&P.push(":",String(ce))),(ce=this.l)&&(this.g&&ce.charAt(0)!="/"&&P.push("/"),P.push(hc(ce,ce.charAt(0)=="/"?mc:yA,!0))),(ce=this.i.toString())&&P.push("?",ce),(ce=this.m)&&P.push("#",hc(ce,pc)),P.join("")};function Ei(P){return new Sn(P)}function iu(P,se,ce){P.j=ce?jo(se,!0):se,P.j&&(P.j=P.j.replace(/:$/,""))}function ou(P,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);P.s=se}else P.s=null}function Fl(P,se,ce){se instanceof Ol?(P.i=se,e0(P.i,P.h)):(ce||(se=hc(se,of)),P.i=new Ol(se,P.h))}function Ln(P,se,ce){P.i.set(se,ce)}function lu(P){return Ln(P,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),P}function jo(P,se){return P?se?decodeURI(P.replace(/%25/g,"%2525")):decodeURIComponent(P):""}function hc(P,se,ce){return typeof P=="string"?(P=encodeURI(P).replace(se,Zh),ce&&(P=P.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P):null}function Zh(P){return P=P.charCodeAt(0),"%"+(P>>4&15).toString(16)+(P&15).toString(16)}var bA=/[#\/\?@]/g,yA=/[#\?:]/g,mc=/[#\?]/g,of=/[#\?@]/g,pc=/#/g;function Ol(P,se){this.h=this.g=null,this.i=P||null,this.j=!!se}function ia(P){P.g||(P.g=new Map,P.h=0,P.i&&sf(P.i,function(se,ce){P.add(decodeURIComponent(se.replace(/\+/g," ")),ce)}))}e=Ol.prototype,e.add=function(P,se){ia(this),this.i=null,P=Pl(this,P);var ce=this.g.get(P);return ce||this.g.set(P,ce=[]),ce.push(se),this.h+=1,this};function gc(P,se){ia(P),se=Pl(P,se),P.g.has(se)&&(P.i=null,P.h-=P.g.get(se).length,P.g.delete(se))}function Dl(P,se){return ia(P),se=Pl(P,se),P.g.has(se)}e.forEach=function(P,se){ia(this),this.g.forEach(function(ce,Ee){ce.forEach(function(Ze){P.call(se,Ze,Ee,this)},this)},this)},e.na=function(){ia(this);const P=Array.from(this.g.values()),se=Array.from(this.g.keys()),ce=[];for(let Ee=0;Ee<se.length;Ee++){const Ze=P[Ee];for(let ut=0;ut<Ze.length;ut++)ce.push(se[Ee])}return ce},e.V=function(P){ia(this);let se=[];if(typeof P=="string")Dl(this,P)&&(se=se.concat(this.g.get(Pl(this,P))));else{P=Array.from(this.g.values());for(let ce=0;ce<P.length;ce++)se=se.concat(P[ce])}return se},e.set=function(P,se){return ia(this),this.i=null,P=Pl(this,P),Dl(this,P)&&(this.h-=this.g.get(P).length),this.g.set(P,[se]),this.h+=1,this},e.get=function(P,se){return P?(P=this.V(P),0<P.length?String(P[0]):se):se};function _r(P,se,ce){gc(P,se),0<ce.length&&(P.i=null,P.g.set(Pl(P,se),x(ce)),P.h+=ce.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const P=[],se=Array.from(this.g.keys());for(var ce=0;ce<se.length;ce++){var Ee=se[ce];const ut=encodeURIComponent(String(Ee)),Mt=this.V(Ee);for(Ee=0;Ee<Mt.length;Ee++){var Ze=ut;Mt[Ee]!==""&&(Ze+="="+encodeURIComponent(String(Mt[Ee]))),P.push(Ze)}}return this.i=P.join("&")};function Pl(P,se){return se=String(se),P.j&&(se=se.toLowerCase()),se}function e0(P,se){se&&!P.j&&(ia(P),P.i=null,P.g.forEach(function(ce,Ee){var Ze=Ee.toLowerCase();Ee!=Ze&&(gc(this,Ee),_r(this,Ze,ce))},P)),P.j=se}function Li(P,se){const ce=new Fn;if(l.Image){const Ee=new Image;Ee.onload=m(lo,ce,"TestLoadImage: loaded",!0,se,Ee),Ee.onerror=m(lo,ce,"TestLoadImage: error",!1,se,Ee),Ee.onabort=m(lo,ce,"TestLoadImage: abort",!1,se,Ee),Ee.ontimeout=m(lo,ce,"TestLoadImage: timeout",!1,se,Ee),l.setTimeout(function(){Ee.ontimeout&&Ee.ontimeout()},1e4),Ee.src=P}else se(!1)}function Bo(P,se){const ce=new Fn,Ee=new AbortController,Ze=setTimeout(()=>{Ee.abort(),lo(ce,"TestPingServer: timeout",!1,se)},1e4);fetch(P,{signal:Ee.signal}).then(ut=>{clearTimeout(Ze),ut.ok?lo(ce,"TestPingServer: ok",!0,se):lo(ce,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(Ze),lo(ce,"TestPingServer: error",!1,se)})}function lo(P,se,ce,Ee,Ze){try{Ze&&(Ze.onload=null,Ze.onerror=null,Ze.onabort=null,Ze.ontimeout=null),Ee(ce)}catch{}}function Rl(){this.g=new _n}function To(P,se,ce){const Ee=ce||"";try{vA(P,function(Ze,ut){let Mt=Ze;u(Ze)&&(Mt=wr(Ze)),se.push(Ee+ut+"="+encodeURIComponent(Mt))})}catch(Ze){throw se.push(Ee+"type="+encodeURIComponent("_badmap")),Ze}}function cu(P){this.l=P.Ub||null,this.j=P.eb||!1}g(cu,jr),cu.prototype.g=function(){return new xc(this.l,this.j)},cu.prototype.i=function(P){return function(){return P}}({});function xc(P,se){ft.call(this),this.D=P,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(xc,ft),e=xc.prototype,e.open=function(P,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=P,this.A=se,this.readyState=1,Mi(this)},e.send=function(P){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};P&&(se.body=P),(this.D||l).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},e.Sa=function(P){if(this.g&&(this.l=P,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=P.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")P.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in P){if(this.j=P.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wA(this)}else P.text().then(this.Ra.bind(this),this.ga.bind(this))};function wA(P){P.j.read().then(P.Pa.bind(P)).catch(P.ga.bind(P))}e.Pa=function(P){if(this.g){if(this.o&&P.value)this.response.push(P.value);else if(!this.o){var se=P.value?P.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!P.done}))&&(this.response=this.responseText+=se)}P.done?Io(this):Mi(this),this.readyState==3&&wA(this)}},e.Ra=function(P){this.g&&(this.response=this.responseText=P,Io(this))},e.Qa=function(P){this.g&&(this.response=P,Io(this))},e.ga=function(){this.g&&Io(this)};function Io(P){P.readyState=4,P.l=null,P.j=null,P.v=null,Mi(P)}e.setRequestHeader=function(P,se){this.u.append(P,se)},e.getResponseHeader=function(P){return this.h&&this.h.get(P.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const P=[],se=this.h.entries();for(var ce=se.next();!ce.done;)ce=ce.value,P.push(ce[0]+": "+ce[1]),ce=se.next();return P.join(`\r
`)};function Mi(P){P.onreadystatechange&&P.onreadystatechange.call(P)}Object.defineProperty(xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(P){this.m=P?"include":"same-origin"}});function Ll(P){let se="";return B(P,function(ce,Ee){se+=Ee,se+=":",se+=ce,se+=`\r
`}),se}function xs(P,se,ce){e:{for(Ee in ce){var Ee=!1;break e}Ee=!0}Ee||(ce=Ll(ce),typeof P=="string"?ce!=null&&encodeURIComponent(String(ce)):Ln(P,se,ce))}function An(P){ft.call(this),this.headers=new Map,this.o=P||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(An,ft);var uu=/^https?$/i,Ml=["POST","PUT"];e=An.prototype,e.Ha=function(P){this.J=P},e.ea=function(P,se,ce,Ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+P);se=se?se.toUpperCase():"GET",this.D=P,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?hs(this.o):hs(Ae),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(se,String(P),!0),this.B=!1}catch(ut){NA(this,ut);return}if(P=ce||"",ce=new Map(this.headers),Ee)if(Object.getPrototypeOf(Ee)===Object.prototype)for(var Ze in Ee)ce.set(Ze,Ee[Ze]);else if(typeof Ee.keys=="function"&&typeof Ee.get=="function")for(const ut of Ee.keys())ce.set(ut,Ee.get(ut));else throw Error("Unknown input type for opt_headers: "+String(Ee));Ee=Array.from(ce.keys()).find(ut=>ut.toLowerCase()=="content-type"),Ze=l.FormData&&P instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ml,se,void 0))||Ee||Ze||ce.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Mt]of ce)this.g.setRequestHeader(ut,Mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ui(this),this.u=!0,this.g.send(P),this.u=!1}catch(ut){NA(this,ut)}};function NA(P,se){P.h=!1,P.g&&(P.j=!0,P.g.abort(),P.j=!1),P.l=se,P.m=5,nd(P),hl(P)}function nd(P){P.A||(P.A=!0,$e(P,"complete"),$e(P,"error"))}e.abort=function(P){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=P||7,$e(this,"complete"),$e(this,"abort"),hl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hl(this,!0)),An.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ad(this):this.bb())},e.bb=function(){ad(this)};function ad(P){if(P.h&&typeof o<"u"&&(!P.v[1]||vs(P)!=4||P.Z()!=2)){if(P.u&&vs(P)==4)bt(P.Ea,0,P);else if($e(P,"readystatechange"),vs(P)==4){P.h=!1;try{const Mt=P.Z();e:switch(Mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var ce;if(!(ce=se)){var Ee;if(Ee=Mt===0){var Ze=String(P.D).match(Ni)[1]||null;!Ze&&l.self&&l.self.location&&(Ze=l.self.location.protocol.slice(0,-1)),Ee=!uu.test(Ze?Ze.toLowerCase():"")}ce=Ee}if(ce)$e(P,"complete"),$e(P,"success");else{P.m=6;try{var ut=2<vs(P)?P.g.statusText:""}catch{ut=""}P.l=ut+" ["+P.Z()+"]",nd(P)}}finally{hl(P)}}}}function hl(P,se){if(P.g){Ui(P);const ce=P.g,Ee=P.v[0]?()=>{}:null;P.g=null,P.v=null,se||$e(P,"ready");try{ce.onreadystatechange=Ee}catch{}}}function Ui(P){P.I&&(l.clearTimeout(P.I),P.I=null)}e.isActive=function(){return!!this.g};function vs(P){return P.g?P.g.readyState:0}e.Z=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(P){if(this.g){var se=this.g.responseText;return P&&se.indexOf(P)==0&&(se=se.substring(P.length)),Ur(se)}};function t0(P){try{if(!P.g)return null;if("response"in P.g)return P.g.response;switch(P.H){case"":case"text":return P.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in P.g)return P.g.mozResponseArrayBuffer}return null}catch{return null}}function du(P){const se={};P=(P.g&&2<=vs(P)&&P.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ee=0;Ee<P.length;Ee++){if(w(P[Ee]))continue;var ce=R(P[Ee]);const Ze=ce[0];if(ce=ce[1],typeof ce!="string")continue;ce=ce.trim();const ut=se[Ze]||[];se[Ze]=ut,ut.push(ce)}C(se,function(Ee){return Ee.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(P,se,ce){return ce&&ce.internalChannelParams&&ce.internalChannelParams[P]||se}function fu(P){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,P),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,P),this.cb=Ci("retryDelaySeedMs",1e4,P),this.Wa=Ci("forwardChannelMaxRetries",2,P),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,P),this.pa=P&&P.xmlHttpFactory||void 0,this.Xa=P&&P.Tb||void 0,this.Ca=P&&P.useFetchStreams||!1,this.L=void 0,this.J=P&&P.supportsCrossDomainXhr||!1,this.K="",this.h=new gs(P&&P.concurrentRequestLimit),this.Da=new Rl,this.P=P&&P.fastHandshake||!1,this.O=P&&P.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=P&&P.Rb||!1,P&&P.xa&&this.j.xa(),P&&P.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&P&&P.detectBufferingProxy||!1,this.ja=void 0,P&&P.longPollingTimeout&&0<P.longPollingTimeout&&(this.ja=P.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=fu.prototype,e.la=8,e.G=1,e.connect=function(P,se,ce,Ee){Wt(0),this.W=P,this.H=se||{},ce&&Ee!==void 0&&(this.H.OSID=ce,this.H.OAID=Ee),this.F=this.X,this.I=ee(this,null,this.W),cf(this)};function vc(P){if(sd(P),P.G==3){var se=P.U++,ce=Ei(P.I);if(Ln(ce,"SID",P.K),Ln(ce,"RID",se),Ln(ce,"TYPE","terminate"),Au(P,ce),se=new Me(P,P.j,se),se.L=2,se.v=lu(Ei(ce)),ce=!1,l.navigator&&l.navigator.sendBeacon)try{ce=l.navigator.sendBeacon(se.v.toString(),"")}catch{}!ce&&l.Image&&(new Image().src=se.v,ce=!0),ce||(se.g=ge(se.j,null),se.g.ea(se.v)),se.F=Date.now(),Qt(se)}df(P)}function lf(P){P.g&&(hu(P),P.g.cancel(),P.g=null)}function sd(P){lf(P),P.u&&(l.clearTimeout(P.u),P.u=null),bc(P),P.h.cancel(),P.s&&(typeof P.s=="number"&&l.clearTimeout(P.s),P.s=null)}function cf(P){if(!ni(P.h)&&!P.s){P.s=!0;var se=P.Ga;W||K(),G||(W(),G=!0),Y.add(se,P),P.B=0}}function EA(P,se){return Ls(P.h)>=P.h.j-(P.s?1:0)?!1:P.s?(P.i=se.D.concat(P.i),!0):P.G==1||P.G==2||P.B>=(P.Va?0:P.Wa)?!1:(P.s=ln(h(P.Ga,P,se),cd(P,P.B)),P.B++,!0)}e.Ga=function(P){if(this.s)if(this.s=null,this.G==1){if(!P){this.U=Math.floor(1e5*Math.random()),P=this.U++;const Ze=new Me(this,this.j,P);let ut=this.o;if(this.S&&(ut?(ut=k(ut),L(ut,this.S)):ut=this.S),this.m!==null||this.O||(Ze.H=ut,ut=null),this.P)e:{for(var se=0,ce=0;ce<this.i.length;ce++){t:{var Ee=this.i[ce];if("__data__"in Ee.map&&(Ee=Ee.map.__data__,typeof Ee=="string")){Ee=Ee.length;break t}Ee=void 0}if(Ee===void 0)break;if(se+=Ee,4096<se){se=ce;break e}if(se===4096||ce===this.i.length-1){se=ce+1;break e}}se=1e3}else se=1e3;se=od(this,Ze,se),ce=Ei(this.I),Ln(ce,"RID",P),Ln(ce,"CVER",22),this.D&&Ln(ce,"X-HTTP-Session-Id",this.D),Au(this,ce),ut&&(this.O?se="headers="+encodeURIComponent(String(Ll(ut)))+"&"+se:this.m&&xs(ce,this.m,ut)),ma(this.h,Ze),this.Ua&&Ln(ce,"TYPE","init"),this.P?(Ln(ce,"$req",se),Ln(ce,"SID","null"),Ze.T=!0,vt(Ze,ce,null)):vt(Ze,ce,se),this.G=2}}else this.G==3&&(P?id(this,P):this.i.length==0||ni(this.h)||id(this))};function id(P,se){var ce;se?ce=se.l:ce=P.U++;const Ee=Ei(P.I);Ln(Ee,"SID",P.K),Ln(Ee,"RID",ce),Ln(Ee,"AID",P.T),Au(P,Ee),P.m&&P.o&&xs(Ee,P.m,P.o),ce=new Me(P,P.j,ce,P.B+1),P.m===null&&(ce.H=P.o),se&&(P.i=se.D.concat(P.i)),se=od(P,ce,1e3),ce.I=Math.round(.5*P.wa)+Math.round(.5*P.wa*Math.random()),ma(P.h,ce),vt(ce,Ee,se)}function Au(P,se){P.H&&B(P.H,function(ce,Ee){Ln(se,Ee,ce)}),P.l&&vA({},function(ce,Ee){Ln(se,Ee,ce)})}function od(P,se,ce){ce=Math.min(P.i.length,ce);var Ee=P.l?h(P.l.Na,P.l,P):null;e:{var Ze=P.i;let ut=-1;for(;;){const Mt=["count="+ce];ut==-1?0<ce?(ut=Ze[0].g,Mt.push("ofs="+ut)):ut=0:Mt.push("ofs="+ut);let Sr=!0;for(let hn=0;hn<ce;hn++){let Vr=Ze[hn].g;const Mn=Ze[hn].map;if(Vr-=ut,0>Vr)ut=Math.max(0,Ze[hn].g-100),Sr=!1;else try{To(Mn,Mt,"req"+Vr+"_")}catch{Ee&&Ee(Mn)}}if(Sr){Ee=Mt.join("&");break e}}}return P=P.i.splice(0,ce),se.D=P,Ee}function uf(P){if(!P.g&&!P.u){P.Y=1;var se=P.Fa;W||K(),G||(W(),G=!0),Y.add(se,P),P.v=0}}function ld(P){return P.g||P.u||3<=P.v?!1:(P.Y++,P.u=ln(h(P.Fa,P),cd(P,P.v)),P.v++,!0)}e.Fa=function(){if(this.u=null,r0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var P=2*this.R;this.j.info("BP detection timer enabled: "+P),this.A=ln(h(this.ab,this),P)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),lf(this),r0(this))};function hu(P){P.A!=null&&(l.clearTimeout(P.A),P.A=null)}function r0(P){P.g=new Me(P,P.j,"rpc",P.Y),P.m===null&&(P.g.H=P.o),P.g.O=0;var se=Ei(P.qa);Ln(se,"RID","rpc"),Ln(se,"SID",P.K),Ln(se,"AID",P.T),Ln(se,"CI",P.F?"0":"1"),!P.F&&P.ja&&Ln(se,"TO",P.ja),Ln(se,"TYPE","xmlhttp"),Au(P,se),P.m&&P.o&&xs(se,P.m,P.o),P.L&&(P.g.I=P.L);var ce=P.g;P=P.ia,ce.L=1,ce.v=lu(Ei(se)),ce.m=null,ce.P=!0,yt(ce,P)}e.Za=function(){this.C!=null&&(this.C=null,lf(this),ld(this),Wt(19))};function bc(P){P.C!=null&&(l.clearTimeout(P.C),P.C=null)}function mu(P,se){var ce=null;if(P.g==se){bc(P),hu(P),P.g=null;var Ee=2}else if(wi(P.h,se))ce=se.D,ai(P.h,se),Ee=1;else return;if(P.G!=0){if(se.o)if(Ee==1){ce=se.m?se.m.length:0,se=Date.now()-se.F;var Ze=P.B;Ee=ms(),$e(Ee,new xn(Ee,ce)),cf(P)}else uf(P);else if(Ze=se.s,Ze==3||Ze==0&&0<se.X||!(Ee==1&&EA(P,se)||Ee==2&&ld(P)))switch(ce&&0<ce.length&&(se=P.h,se.i=se.i.concat(ce)),Ze){case 1:Qi(P,5);break;case 4:Qi(P,10);break;case 3:Qi(P,6);break;default:Qi(P,2)}}}function cd(P,se){let ce=P.Ta+Math.floor(Math.random()*P.cb);return P.isActive()||(ce*=2),ce*se}function Qi(P,se){if(P.j.info("Error code "+se),se==2){var ce=h(P.fb,P),Ee=P.Xa;const Ze=!Ee;Ee=new Sn(Ee||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||iu(Ee,"https"),lu(Ee),Ze?Li(Ee.toString(),ce):Bo(Ee.toString(),ce)}else Wt(2);P.G=0,P.l&&P.l.sa(se),df(P),sd(P)}e.fb=function(P){P?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function df(P){if(P.G=0,P.ka=[],P.l){const se=af(P.h);(se.length!=0||P.i.length!=0)&&(v(P.ka,se),v(P.ka,P.i),P.h.i.length=0,x(P.i),P.i.length=0),P.l.ra()}}function ee(P,se,ce){var Ee=ce instanceof Sn?Ei(ce):new Sn(ce);if(Ee.g!="")se&&(Ee.g=se+"."+Ee.g),ou(Ee,Ee.s);else{var Ze=l.location;Ee=Ze.protocol,se=se?se+"."+Ze.hostname:Ze.hostname,Ze=+Ze.port;var ut=new Sn(null);Ee&&iu(ut,Ee),se&&(ut.g=se),Ze&&ou(ut,Ze),ce&&(ut.l=ce),Ee=ut}return ce=P.D,se=P.ya,ce&&se&&Ln(Ee,ce,se),Ln(Ee,"VER",P.la),Au(P,Ee),Ee}function ge(P,se,ce){if(se&&!P.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=P.Ca&&!P.pa?new An(new cu({eb:ce})):new An(P.pa),se.Ha(P.J),se}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ue(){}e=Ue.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ge(){}Ge.prototype.g=function(P,se){return new et(P,se)};function et(P,se){ft.call(this),this.g=new fu(se),this.l=P,this.h=se&&se.messageUrlParams||null,P=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(P?P["X-Client-Protocol"]="webchannel":P={"X-Client-Protocol":"webchannel"}),this.g.o=P,P=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(P?P["X-WebChannel-Content-Type"]=se.messageContentType:P={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(P?P["X-WebChannel-Client-Profile"]=se.va:P={"X-WebChannel-Client-Profile":se.va}),this.g.S=P,(P=se&&se.Sb)&&!w(P)&&(this.g.m=P),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!w(se)&&(this.g.D=se,P=this.h,P!==null&&se in P&&(P=this.h,se in P&&delete P[se])),this.j=new qt(this)}g(et,ft),et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},et.prototype.close=function(){vc(this.g)},et.prototype.o=function(P){var se=this.g;if(typeof P=="string"){var ce={};ce.__data__=P,P=ce}else this.u&&(ce={},ce.__data__=wr(P),P=ce);se.i.push(new ko(se.Ya++,P)),se.G==3&&cf(se)},et.prototype.N=function(){this.g.l=null,delete this.j,vc(this.g),delete this.g,et.aa.N.call(this)};function wt(P){ja.call(this),P.__headers__&&(this.headers=P.__headers__,this.statusCode=P.__status__,delete P.__headers__,delete P.__status__);var se=P.__sm__;if(se){e:{for(const ce in se){P=ce;break e}P=void 0}(this.i=P)&&(P=this.i,se=se!==null&&P in se?se[P]:void 0),this.data=se}else this.data=P}g(wt,ja);function Rt(){Fr.call(this),this.status=1}g(Rt,Fr);function qt(P){this.g=P}g(qt,Ue),qt.prototype.ua=function(){$e(this.g,"a")},qt.prototype.ta=function(P){$e(this.g,new wt(P))},qt.prototype.sa=function(P){$e(this.g,new Rt)},qt.prototype.ra=function(){$e(this.g,"b")},Ge.prototype.createWebChannel=Ge.prototype.g,et.prototype.send=et.prototype.o,et.prototype.open=et.prototype.m,et.prototype.close=et.prototype.close,gZ=function(){return new Ge},pZ=function(){return ms()},mZ=fr,Z6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,y5=Fe,me.COMPLETE="complete",hZ=me,qr.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",ft.prototype.listen=ft.prototype.K,$y=qr,An.prototype.listenOnce=An.prototype.L,An.prototype.getLastError=An.prototype.Ka,An.prototype.getLastErrorCode=An.prototype.Ba,An.prototype.getStatus=An.prototype.Z,An.prototype.getResponseJson=An.prototype.Oa,An.prototype.getResponseText=An.prototype.oa,An.prototype.send=An.prototype.ea,An.prototype.setWithCredentials=An.prototype.Ha,AZ=An}).apply(typeof ME<"u"?ME:typeof self<"u"?self:typeof window<"u"?window:{});const cQ="@firebase/firestore",uQ="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Wo.UNAUTHENTICATED=new Wo(null),Wo.GOOGLE_CREDENTIALS=new Wo("google-credentials-uid"),Wo.FIRST_PARTY=new Wo("first-party-uid"),Wo.MOCK_USER=new Wo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vb="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new tP("@firebase/firestore");function lv(){return vg.logLevel}function sr(e,...t){if(vg.logLevel<=wn.DEBUG){const r=t.map(fP);vg.debug(`Firestore (${Vb}): ${e}`,...r)}}function _h(e,...t){if(vg.logLevel<=wn.ERROR){const r=t.map(fP);vg.error(`Firestore (${Vb}): ${e}`,...r)}}function bg(e,...t){if(vg.logLevel<=wn.WARN){const r=t.map(fP);vg.warn(`Firestore (${Vb}): ${e}`,...r)}}function fP(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,xZ(e,n,r)}function xZ(e,t,r){let n=`FIRESTORE (${Vb}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw _h(n),new Error(n)}function aa(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||xZ(t,a,n)}function Wr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $t extends Yd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Wo.UNAUTHENTICATED))}shutdown(){}}class nxe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class axe{constructor(t){this.t=t,this.currentUser=Wo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){aa(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new hh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hh,t.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{sr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(sr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hh)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(sr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(aa(typeof n.accessToken=="string",31837,{l:n}),new vZ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return aa(t===null||typeof t=="string",2055,{h:t}),new Wo(t)}}class sxe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Wo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ixe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new sxe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Wo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dQ{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oxe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Uc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){aa(this.o===void 0,3512);const n=s=>{s.error!=null&&sr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,sr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{sr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):sr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dQ(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(aa(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new dQ(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lxe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=lxe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Nn(e,t){return e<t?-1:e>t?1:0}function eF(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return Z3(a)===Z3(s)?Nn(a,s):Z3(a)?1:-1}return Nn(e.length,t.length)}const cxe=55296,uxe=57343;function Z3(e){const t=e.charCodeAt(0);return t>=cxe&&t<=uxe}function rb(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ="__name__";class Qf{constructor(t,r,n){r===void 0?r=0:r>t.length&&Lr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Lr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Qf.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Qf?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=Qf.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Nn(t.length,r.length)}static compareSegments(t,r){const n=Qf.isNumericId(t),a=Qf.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Qf.extractNumericId(t).compare(Qf.extractNumericId(r)):eF(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return hm.fromString(t.substring(4,t.length-2))}}class _a extends Qf{construct(t,r,n){return new _a(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new $t(Et.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new _a(r)}static emptyPath(){return new _a([])}}const dxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ji extends Qf{construct(t,r,n){return new Ji(t,r,n)}static isValidIdentifier(t){return dxe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ji.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fQ}static keyField(){return new Ji([fQ])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new $t(Et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new $t(Et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $t(Et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new $t(Et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ji(r)}static emptyPath(){return new Ji([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t){this.path=t}static fromPath(t){return new mr(_a.fromString(t))}static fromName(t){return new mr(_a.fromString(t).popFirst(5))}static empty(){return new mr(_a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_a.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return _a.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mr(new _a(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yZ(e,t,r){if(!r)throw new $t(Et.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function wZ(e,t,r,n){if(t===!0&&n===!0)throw new $t(Et.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function AQ(e){if(!mr.isDocumentKey(e))throw new $t(Et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function hQ(e){if(mr.isDocumentKey(e))throw new $t(Et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function NZ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ek(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Lr(12329,{type:typeof e})}function il(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $t(Et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Ek(e);throw new $t(Et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function fxe(e,t){if(t<=0)throw new $t(Et.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(e,t){const r={typeString:e};return t&&(r.value=t),r}function Jw(e,t){if(!NZ(e))throw new $t(Et.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const o=e[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new $t(Et.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ=-62135596800,pQ=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(t){return nr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*pQ);return new nr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new $t(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new $t(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<mQ)throw new $t(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $t(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pQ}_compareTo(t){return this.seconds===t.seconds?Nn(this.nanoseconds,t.nanoseconds):Nn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Jw(t,nr._jsonSchema))return new nr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-mQ;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:xi("string",nr._jsonSchemaVersion),seconds:xi("number"),nanoseconds:xi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{static fromTimestamp(t){return new $r(t)}static min(){return new $r(new nr(0,0))}static max(){return new $r(new nr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=-1;function Axe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=$r.fromTimestamp(n===1e9?new nr(r+1,0):new nr(r,n));return new km(a,mr.empty(),t)}function hxe(e){return new km(e.readTime,e.key,K2)}class km{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new km($r.min(),mr.empty(),K2)}static max(){return new km($r.max(),mr.empty(),K2)}}function mxe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=mr.comparator(e.documentKey,t.documentKey),r!==0?r:Nn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pxe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gxe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(e){if(e.code!==Et.FAILED_PRECONDITION||e.message!==pxe)throw e;sr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Lr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ot((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ot?r:Ot.resolve(r)}catch(r){return Ot.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ot.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ot.reject(r)}static resolve(t){return new Ot((r,n)=>{r(t)})}static reject(t){return new Ot((r,n)=>{n(t)})}static waitFor(t){return new Ot((r,n)=>{let a=0,s=0,o=!1;t.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(t){let r=Ot.resolve(!1);for(const n of t)r=r.next(a=>a?Ot.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Ot((n,a)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(t,r){return new Ot((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function xxe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function $b(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ck.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=-1;function _k(e){return e==null}function f_(e){return e===0&&1/e==-1/0}function vxe(e){return typeof e=="number"&&Number.isInteger(e)&&!f_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EZ="";function bxe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=gQ(t)),t=yxe(e.get(r),t);return gQ(t)}function yxe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case EZ:r+="";break;default:r+=s}}return r}function gQ(e){return e+EZ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function qm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function CZ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t,r){this.comparator=t,this.root=r||yo.EMPTY}insert(t,r){return new us(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,yo.BLACK,null,null))}remove(t){return new us(this.comparator,this.root.remove(t,this.comparator).copy(null,null,yo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new UE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new UE(this.root,t,this.comparator,!1)}getReverseIterator(){return new UE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new UE(this.root,t,this.comparator,!0)}}class UE{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class yo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??yo.RED,this.left=a??yo.EMPTY,this.right=s??yo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new yo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return yo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return yo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,yo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,yo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Lr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Lr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Lr(27949);return t+(this.isRed()?0:1)}}yo.EMPTY=null,yo.RED=!0,yo.BLACK=!1;yo.EMPTY=new class{constructor(){this.size=0}get key(){throw Lr(57766)}get value(){throw Lr(16141)}get color(){throw Lr(16727)}get left(){throw Lr(29726)}get right(){throw Lr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new yo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.comparator=t,this.data=new us(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new vQ(this.data.getIterator())}getIteratorFrom(t){return new vQ(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Ii)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ii(this.comparator);return r.data=t,r}}class vQ{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t){this.fields=t,t.sort(Ji.comparator)}static empty(){return new Gc([])}unionWith(t){let r=new Ii(Ji.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Gc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return rb(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _Z("Invalid base64 string: "+s):s}}(t);return new no(r)}static fromUint8Array(t){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(t);return new no(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}no.EMPTY_BYTE_STRING=new no("");const wxe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jm(e){if(aa(!!e,39018),typeof e=="string"){let t=0;const r=wxe.exec(e);if(aa(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ws(e.seconds),nanos:Ws(e.nanos)}}function Ws(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Bm(e){return typeof e=="string"?no.fromBase64String(e):no.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SZ="server_timestamp",kZ="__type__",jZ="__previous_value__",BZ="__local_write_time__";function Sk(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[kZ])==null?void 0:n.stringValue)===SZ}function kk(e){const t=e.mapValue.fields[jZ];return Sk(t)?kk(t):t}function W2(e){const t=jm(e.mapValue.fields[BZ].timestampValue);return new nr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nxe{constructor(t,r,n,a,s,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const A_="(default)";class nb{constructor(t,r){this.projectId=t,this.database=r||A_}static empty(){return new nb("","")}get isDefaultDatabase(){return this.database===A_}isEqual(t){return t instanceof nb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZ="__type__",Exe="__max__",QE={mapValue:{}},IZ="__vector__",h_="value";function Tm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Sk(e)?4:_xe(e)?9007199254740991:Cxe(e)?10:11:Lr(28295,{value:e})}function cA(e,t){if(e===t)return!0;const r=Tm(e);if(r!==Tm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return W2(e).isEqual(W2(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=jm(a.timestampValue),l=jm(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return Bm(a.bytesValue).isEqual(Bm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Ws(a.geoPointValue.latitude)===Ws(s.geoPointValue.latitude)&&Ws(a.geoPointValue.longitude)===Ws(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ws(a.integerValue)===Ws(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=Ws(a.doubleValue),l=Ws(s.doubleValue);return o===l?f_(o)===f_(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return rb(e.arrayValue.values||[],t.arrayValue.values||[],cA);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(xQ(o)!==xQ(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!cA(o[c],l[c])))return!1;return!0}(e,t);default:return Lr(52216,{left:e})}}function X2(e,t){return(e.values||[]).find(r=>cA(r,t))!==void 0}function ab(e,t){if(e===t)return 0;const r=Tm(e),n=Tm(t);if(r!==n)return Nn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Nn(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Ws(s.integerValue||s.doubleValue),c=Ws(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return bQ(e.timestampValue,t.timestampValue);case 4:return bQ(W2(e),W2(t));case 5:return eF(e.stringValue,t.stringValue);case 6:return function(s,o){const l=Bm(s),c=Bm(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Nn(l[u],c[u]);if(d!==0)return d}return Nn(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Nn(Ws(s.latitude),Ws(o.latitude));return l!==0?l:Nn(Ws(s.longitude),Ws(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return yQ(e.arrayValue,t.arrayValue);case 10:return function(s,o){var h,m,g,x;const l=s.fields||{},c=o.fields||{},u=(h=l[h_])==null?void 0:h.arrayValue,d=(m=c[h_])==null?void 0:m.arrayValue,f=Nn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:yQ(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===QE.mapValue&&o===QE.mapValue)return 0;if(s===QE.mapValue)return 1;if(o===QE.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=eF(c[f],d[f]);if(h!==0)return h;const m=ab(l[c[f]],u[d[f]]);if(m!==0)return m}return Nn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Lr(23264,{he:r})}}function bQ(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Nn(e,t);const r=jm(e),n=jm(t),a=Nn(r.seconds,n.seconds);return a!==0?a:Nn(r.nanos,n.nanos)}function yQ(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=ab(r[a],n[a]);if(s)return s}return Nn(r.length,n.length)}function sb(e){return tF(e)}function tF(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=jm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Bm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return mr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=tF(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${tF(r.fields[o])}`;return a+"}"}(e.mapValue):Lr(61005,{value:e})}function w5(e){switch(Tm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=kk(e);return t?16+w5(t):16;case 5:return 2*e.stringValue.length;case 6:return Bm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+w5(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return qm(n.fields,(s,o)=>{a+=s.length+w5(o)}),a}(e.mapValue);default:throw Lr(13486,{value:e})}}function m_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function rF(e){return!!e&&"integerValue"in e}function hP(e){return!!e&&"arrayValue"in e}function wQ(e){return!!e&&"nullValue"in e}function NQ(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function N5(e){return!!e&&"mapValue"in e}function Cxe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[TZ])==null?void 0:n.stringValue)===IZ}function h2(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return qm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=h2(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=h2(e.arrayValue.values[r]);return t}return{...e}}function _xe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Exe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t){this.value=t}static empty(){return new nc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!N5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=h2(r)}setAll(t){let r=Ji.emptyPath(),n={},a=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=h2(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());N5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return cA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];N5(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){qm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new nc(h2(this.value))}}function FZ(e){const t=[];return qm(e.fields,(r,n)=>{const a=new Ji([r]);if(N5(n)){const s=FZ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const o of s)t.push(a.child(o))}else t.push(a)}),new Gc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,r,n,a,s,o,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Zo(t,0,$r.min(),$r.min(),$r.min(),nc.empty(),0)}static newFoundDocument(t,r,n,a){return new Zo(t,1,r,$r.min(),n,a,0)}static newNoDocument(t,r){return new Zo(t,2,r,$r.min(),$r.min(),nc.empty(),0)}static newUnknownDocument(t,r){return new Zo(t,3,r,$r.min(),$r.min(),nc.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual($r.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=nc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=nc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$r.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t,r){this.position=t,this.inclusive=r}}function EQ(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],o=e.position[a];if(s.field.isKeyField()?n=mr.comparator(mr.fromName(o.referenceValue),r.key):n=ab(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function CQ(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!cA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t,r="asc"){this.field=t,this.dir=r}}function Sxe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{}class pi extends OZ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new jxe(t,r,n):r==="array-contains"?new Ixe(t,n):r==="in"?new Fxe(t,n):r==="not-in"?new Oxe(t,n):r==="array-contains-any"?new Dxe(t,n):new pi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new Bxe(t,n):new Txe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(ab(r,this.value)):r!==null&&Tm(this.value)===Tm(r)&&this.matchesComparison(ab(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Lr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wd extends OZ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Wd(t,r)}matches(t){return DZ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DZ(e){return e.op==="and"}function PZ(e){return kxe(e)&&DZ(e)}function kxe(e){for(const t of e.filters)if(t instanceof Wd)return!1;return!0}function nF(e){if(e instanceof pi)return e.field.canonicalString()+e.op.toString()+sb(e.value);if(PZ(e))return e.filters.map(t=>nF(t)).join(",");{const t=e.filters.map(r=>nF(r)).join(",");return`${e.op}(${t})`}}function RZ(e,t){return e instanceof pi?function(n,a){return a instanceof pi&&n.op===a.op&&n.field.isEqual(a.field)&&cA(n.value,a.value)}(e,t):e instanceof Wd?function(n,a){return a instanceof Wd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&RZ(o,a.filters[l]),!0):!1}(e,t):void Lr(19439)}function LZ(e){return e instanceof pi?function(r){return`${r.field.canonicalString()} ${r.op} ${sb(r.value)}`}(e):e instanceof Wd?function(r){return r.op.toString()+" {"+r.getFilters().map(LZ).join(" ,")+"}"}(e):"Filter"}class jxe extends pi{constructor(t,r,n){super(t,r,n),this.key=mr.fromName(n.referenceValue)}matches(t){const r=mr.comparator(t.key,this.key);return this.matchesComparison(r)}}class Bxe extends pi{constructor(t,r){super(t,"in",r),this.keys=MZ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Txe extends pi{constructor(t,r){super(t,"not-in",r),this.keys=MZ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function MZ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>mr.fromName(n.referenceValue))}class Ixe extends pi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return hP(r)&&X2(r.arrayValue,this.value)}}class Fxe extends pi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&X2(this.value.arrayValue,r)}}class Oxe extends pi{constructor(t,r){super(t,"not-in",r)}matches(t){if(X2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!X2(this.value.arrayValue,r)}}class Dxe extends pi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!hP(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>X2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pxe{constructor(t,r=null,n=[],a=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function _Q(e,t=null,r=[],n=[],a=null,s=null,o=null){return new Pxe(e,t,r,n,a,s,o)}function mP(e){const t=Wr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>nF(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),_k(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>sb(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>sb(n)).join(",")),t.Te=r}return t.Te}function pP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Sxe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!RZ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!CQ(e.startAt,t.startAt)&&CQ(e.endAt,t.endAt)}function aF(e){return mr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rxe(e,t,r,n,a,s,o,l){return new Hg(e,t,r,n,a,s,o,l)}function jk(e){return new Hg(e)}function SQ(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function gP(e){return e.collectionGroup!==null}function Ov(e){const t=Wr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ii(Ji.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Y2(s,n))}),r.has(Ji.keyField().canonicalString())||t.Ie.push(new Y2(Ji.keyField(),n))}return t.Ie}function nA(e){const t=Wr(e);return t.Ee||(t.Ee=Lxe(t,Ov(e))),t.Ee}function Lxe(e,t){if(e.limitType==="F")return _Q(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Y2(a.field,s)});const r=e.endAt?new ib(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new ib(e.startAt.position,e.startAt.inclusive):null;return _Q(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function sF(e,t){const r=e.filters.concat([t]);return new Hg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function p_(e,t,r){return new Hg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function Bk(e,t){return pP(nA(e),nA(t))&&e.limitType===t.limitType}function UZ(e){return`${mP(nA(e))}|lt:${e.limitType}`}function cv(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>LZ(a)).join(", ")}]`),_k(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>sb(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>sb(a)).join(",")),`Target(${n})`}(nA(e))}; limitType=${e.limitType})`}function Tk(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):mr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Ov(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=EQ(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,Ov(n),a)||n.endAt&&!function(o,l,c){const u=EQ(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,Ov(n),a))}(e,t)}function Mxe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function QZ(e){return(t,r)=>{let n=!1;for(const a of Ov(e)){const s=Uxe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Uxe(e,t,r){const n=e.field.isKeyField()?mr.comparator(t.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?ab(c,u):Lr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Lr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){qm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return CZ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qxe=new us(mr.comparator);function Sh(){return Qxe}const HZ=new us(mr.comparator);function Gy(...e){let t=HZ;for(const r of e)t=t.insert(r.key,r);return t}function VZ(e){let t=HZ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function $p(){return m2()}function zZ(){return m2()}function m2(){return new Vg(e=>e.toString(),(e,t)=>e.isEqual(t))}const Hxe=new us(mr.comparator),Vxe=new Ii(mr.comparator);function En(...e){let t=Vxe;for(const r of e)t=t.add(r);return t}const zxe=new Ii(Nn);function $xe(){return zxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f_(t)?"-0":t}}function $Z(e){return{integerValue:""+e}}function Gxe(e,t){return vxe(t)?$Z(t):xP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this._=void 0}}function qxe(e,t,r){return e instanceof J2?function(a,s){const o={fields:{[kZ]:{stringValue:SZ},[BZ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&Sk(s)&&(s=kk(s)),s&&(o.fields[jZ]=s),{mapValue:o}}(r,t):e instanceof ob?qZ(e,t):e instanceof Z2?KZ(e,t):function(a,s){const o=GZ(a,s),l=kQ(o)+kQ(a.Ae);return rF(o)&&rF(a.Ae)?$Z(l):xP(a.serializer,l)}(e,t)}function Kxe(e,t,r){return e instanceof ob?qZ(e,t):e instanceof Z2?KZ(e,t):r}function GZ(e,t){return e instanceof g_?function(n){return rF(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class J2 extends Ik{}class ob extends Ik{constructor(t){super(),this.elements=t}}function qZ(e,t){const r=WZ(t);for(const n of e.elements)r.some(a=>cA(a,n))||r.push(n);return{arrayValue:{values:r}}}class Z2 extends Ik{constructor(t){super(),this.elements=t}}function KZ(e,t){let r=WZ(t);for(const n of e.elements)r=r.filter(a=>!cA(a,n));return{arrayValue:{values:r}}}class g_ extends Ik{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function kQ(e){return Ws(e.integerValue||e.doubleValue)}function WZ(e){return hP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZ{constructor(t,r){this.field=t,this.transform=r}}function Wxe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof ob&&a instanceof ob||n instanceof Z2&&a instanceof Z2?rb(n.elements,a.elements,cA):n instanceof g_&&a instanceof g_?cA(n.Ae,a.Ae):n instanceof J2&&a instanceof J2}(e.transform,t.transform)}class Xxe{constructor(t,r){this.version=t,this.transformResults=r}}class kl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new kl}static exists(t){return new kl(void 0,t)}static updateTime(t){return new kl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function E5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Fk{}function YZ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ok(e.key,kl.none()):new Zw(e.key,e.data,kl.none());{const r=e.data,n=nc.empty();let a=new Ii(Ji.comparator);for(let s of t.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new Km(e.key,n,new Gc(a.toArray()),kl.none())}}function Yxe(e,t,r){e instanceof Zw?function(a,s,o){const l=a.value.clone(),c=BQ(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof Km?function(a,s,o){if(!E5(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=BQ(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(JZ(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function p2(e,t,r,n){return e instanceof Zw?function(s,o,l,c){if(!E5(s.precondition,o))return l;const u=s.value.clone(),d=TQ(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Km?function(s,o,l,c){if(!E5(s.precondition,o))return l;const u=TQ(s.fieldTransforms,c,o),d=o.data;return d.setAll(JZ(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,o,l){return E5(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function Jxe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=GZ(n.transform,a||null);s!=null&&(r===null&&(r=nc.empty()),r.set(n.field,s))}return r||null}function jQ(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&rb(n,a,(s,o)=>Wxe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zw extends Fk{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Km extends Fk{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function JZ(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function BQ(e,t,r){const n=new Map;aa(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],o=s.transform,l=t.data.field(s.field);n.set(s.field,Kxe(o,l,r[a]))}return n}function TQ(e,t,r){const n=new Map;for(const a of e){const s=a.transform,o=r.data.field(a.field);n.set(a.field,qxe(s,o,t))}return n}class Ok extends Fk{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zxe extends Fk{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&Yxe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=p2(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=p2(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=zZ();return this.mutations.forEach(a=>{const s=t.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=YZ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument($r.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),En())}isEqual(t){return this.batchId===t.batchId&&rb(this.mutations,t.mutations,(r,n)=>jQ(r,n))&&rb(this.baseMutations,t.baseMutations,(r,n)=>jQ(r,n))}}class vP{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){aa(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return Hxe}();const s=t.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new vP(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tve{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rve{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui,In;function nve(e){switch(e){case Et.OK:return Lr(64938);case Et.CANCELLED:case Et.UNKNOWN:case Et.DEADLINE_EXCEEDED:case Et.RESOURCE_EXHAUSTED:case Et.INTERNAL:case Et.UNAVAILABLE:case Et.UNAUTHENTICATED:return!1;case Et.INVALID_ARGUMENT:case Et.NOT_FOUND:case Et.ALREADY_EXISTS:case Et.PERMISSION_DENIED:case Et.FAILED_PRECONDITION:case Et.ABORTED:case Et.OUT_OF_RANGE:case Et.UNIMPLEMENTED:case Et.DATA_LOSS:return!0;default:return Lr(15467,{code:e})}}function ZZ(e){if(e===void 0)return _h("GRPC error has no .code"),Et.UNKNOWN;switch(e){case ui.OK:return Et.OK;case ui.CANCELLED:return Et.CANCELLED;case ui.UNKNOWN:return Et.UNKNOWN;case ui.DEADLINE_EXCEEDED:return Et.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return Et.RESOURCE_EXHAUSTED;case ui.INTERNAL:return Et.INTERNAL;case ui.UNAVAILABLE:return Et.UNAVAILABLE;case ui.UNAUTHENTICATED:return Et.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return Et.INVALID_ARGUMENT;case ui.NOT_FOUND:return Et.NOT_FOUND;case ui.ALREADY_EXISTS:return Et.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return Et.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return Et.FAILED_PRECONDITION;case ui.ABORTED:return Et.ABORTED;case ui.OUT_OF_RANGE:return Et.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return Et.UNIMPLEMENTED;case ui.DATA_LOSS:return Et.DATA_LOSS;default:return Lr(39323,{code:e})}}(In=ui||(ui={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ave(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sve=new hm([4294967295,4294967295],0);function IQ(e){const t=ave().encode(e),r=new fZ;return r.update(t),new Uint8Array(r.digest())}function FQ(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new hm([r,n],0),new hm([a,s],0)]}class bP{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new qy(`Invalid padding: ${r}`);if(n<0)throw new qy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new qy(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new qy(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=hm.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(hm.fromNumber(n)));return a.compare(sve)===1&&(a=new hm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=IQ(t),[n,a]=FQ(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new bP(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=IQ(t),[n,a]=FQ(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class qy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,eN.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new Dk($r.min(),a,new us(Nn),Sh(),En())}}class eN{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new eN(n,r,En(),En(),En())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class eee{constructor(t,r){this.targetId=t,this.Ce=r}}class tee{constructor(t,r,n=no.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class OQ{constructor(){this.ve=0,this.Fe=DQ(),this.Me=no.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=En(),r=En(),n=En();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Lr(38017,{changeType:s})}}),new eN(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=DQ()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,aa(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ive{constructor(t){this.Ge=t,this.ze=new Map,this.je=Sh(),this.Je=HE(),this.He=HE(),this.Ye=new us(Nn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Lr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(aF(s))if(n===0){const o=new mr(s.path);this.et(r,o,Zo.newNoDocument(o,$r.min()))}else aa(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=Bm(n).toUint8Array()}catch(c){if(c instanceof _Z)return bg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new bP(o,a,s)}catch(c){return bg(c instanceof qy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&aF(l.target)){const c=new mr(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Zo.newNoDocument(c,t))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=En();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(t));const a=new Dk(t,r,this.Ye,this.je,n);return this.je=Sh(),this.Je=HE(),this.He=HE(),this.Ye=new us(Nn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new OQ,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Ii(Nn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Ii(Nn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||sr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new OQ),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function HE(){return new us(mr.comparator)}function DQ(){return new us(mr.comparator)}const ove={asc:"ASCENDING",desc:"DESCENDING"},lve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cve={and:"AND",or:"OR"};class uve{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function iF(e,t){return e.useProto3Json||_k(t)?t:{value:t}}function x_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ree(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function dve(e,t){return x_(e,t.toTimestamp())}function aA(e){return aa(!!e,49232),$r.fromTimestamp(function(r){const n=jm(r);return new nr(n.seconds,n.nanos)}(e))}function yP(e,t){return oF(e,t).canonicalString()}function oF(e,t){const r=function(a){return new _a(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function nee(e){const t=_a.fromString(e);return aa(lee(t),10190,{key:t.toString()}),t}function lF(e,t){return yP(e.databaseId,t.path)}function eB(e,t){const r=nee(t);if(r.get(1)!==e.databaseId.projectId)throw new $t(Et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new $t(Et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new mr(see(r))}function aee(e,t){return yP(e.databaseId,t)}function fve(e){const t=nee(e);return t.length===4?_a.emptyPath():see(t)}function cF(e){return new _a(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function see(e){return aa(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function PQ(e,t,r){return{name:lF(e,t),fields:r.value.mapValue.fields}}function Ave(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Lr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(aa(d===void 0||typeof d=="string",58123),no.fromBase64String(d||"")):(aa(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),no.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Et.UNKNOWN:ZZ(u.code);return new $t(d,u.message||"")}(o);r=new tee(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=eB(e,n.document.name),s=aA(n.document.updateTime),o=n.document.createTime?aA(n.document.createTime):$r.min(),l=new nc({mapValue:{fields:n.document.fields}}),c=Zo.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new C5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=eB(e,n.document),s=n.readTime?aA(n.readTime):$r.min(),o=Zo.newNoDocument(a,s),l=n.removedTargetIds||[];r=new C5([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=eB(e,n.document),s=n.removedTargetIds||[];r=new C5([],s,a,null)}else{if(!("filter"in t))return Lr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new rve(a,s),l=n.targetId;r=new eee(l,o)}}return r}function hve(e,t){let r;if(t instanceof Zw)r={update:PQ(e,t.key,t.value)};else if(t instanceof Ok)r={delete:lF(e,t.key)};else if(t instanceof Km)r={update:PQ(e,t.key,t.data),updateMask:Nve(t.fieldMask)};else{if(!(t instanceof Zxe))return Lr(16599,{Vt:t.type});r={verify:lF(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof J2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ob)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Z2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof g_)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Lr(20930,{transform:o.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:dve(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Lr(27497)}(e,t.precondition)),r}function mve(e,t){return e&&e.length>0?(aa(t!==void 0,14353),e.map(r=>function(a,s){let o=a.updateTime?aA(a.updateTime):aA(s);return o.isEqual($r.min())&&(o=aA(s)),new Xxe(o,a.transformResults||[])}(r,t))):[]}function pve(e,t){return{documents:[aee(e,t.path)]}}function gve(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=aee(e,a);const s=function(u){if(u.length!==0)return oee(Wd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:uv(h.field),direction:bve(h.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=iF(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function xve(e){let t=fve(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){aa(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=iee(f);return h instanceof Wd&&PZ(h)?h.getFilters():[h]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(h=>function(g){return new Y2(dv(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,_k(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new ib(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new ib(m,h)}(r.endAt)),Rxe(t,a,o,s,l,"F",c,u)}function vve(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function iee(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=dv(r.unaryFilter.field);return pi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=dv(r.unaryFilter.field);return pi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=dv(r.unaryFilter.field);return pi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dv(r.unaryFilter.field);return pi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Lr(61313);default:return Lr(60726)}}(e):e.fieldFilter!==void 0?function(r){return pi.create(dv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Lr(58110);default:return Lr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Wd.create(r.compositeFilter.filters.map(n=>iee(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Lr(1026)}}(r.compositeFilter.op))}(e):Lr(30097,{filter:e})}function bve(e){return ove[e]}function yve(e){return lve[e]}function wve(e){return cve[e]}function uv(e){return{fieldPath:e.canonicalString()}}function dv(e){return Ji.fromServerFormat(e.fieldPath)}function oee(e){return e instanceof pi?function(r){if(r.op==="=="){if(NQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NAN"}};if(wQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(NQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NOT_NAN"}};if(wQ(r.value))return{unaryFilter:{field:uv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uv(r.field),op:yve(r.op),value:r.value}}}(e):e instanceof Wd?function(r){const n=r.getFilters().map(a=>oee(a));return n.length===1?n[0]:{compositeFilter:{op:wve(r.op),filters:n}}}(e):Lr(54877,{filter:e})}function Nve(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function lee(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,r,n,a,s=$r.min(),o=$r.min(),l=no.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new nm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new nm(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eve{constructor(t){this.yt=t}}function Cve(e){const t=xve({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?p_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ve{constructor(){this.Cn=new Sve}addToCollectionParentIndex(t,r){return this.Cn.add(r),Ot.resolve()}getCollectionParents(t,r){return Ot.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Ot.resolve()}deleteFieldIndex(t,r){return Ot.resolve()}deleteAllFieldIndexes(t){return Ot.resolve()}createTargetIndexes(t,r){return Ot.resolve()}getDocumentsMatchingTarget(t,r){return Ot.resolve(null)}getIndexType(t,r){return Ot.resolve(0)}getFieldIndexes(t,r){return Ot.resolve([])}getNextCollectionGroupToUpdate(t){return Ot.resolve(null)}getMinOffset(t,r){return Ot.resolve(km.min())}getMinOffsetFromCollectionGroup(t,r){return Ot.resolve(km.min())}updateCollectionGroup(t,r,n){return Ot.resolve()}updateIndexEntries(t,r){return Ot.resolve()}}class Sve{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Ii(_a.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Ii(_a.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cee=41943040;class Yl{static withCacheSize(t){return new Yl(t,Yl.DEFAULT_COLLECTION_PERCENTILE,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yl.DEFAULT_COLLECTION_PERCENTILE=10,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yl.DEFAULT=new Yl(cee,Yl.DEFAULT_COLLECTION_PERCENTILE,Yl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yl.DISABLED=new Yl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new lb(0)}static cr(){return new lb(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQ="LruGarbageCollector",kve=1048576;function MQ([e,t],[r,n]){const a=Nn(e,r);return a===0?Nn(t,n):a}class jve{constructor(t){this.Ir=t,this.buffer=new Ii(MQ),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();MQ(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Bve{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){sr(LQ,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){$b(r)?sr(LQ,"Ignoring IndexedDB error during garbage collection: ",r):await zb(r)}await this.Vr(3e5)})}}class Tve{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Ot.resolve(Ck.ce);const n=new jve(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(sr("LruGarbageCollector","Garbage collection skipped; disabled"),Ot.resolve(RQ)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(sr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RQ):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(sr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),lv()<=wn.DEBUG&&sr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Ot.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Ive(e,t){return new Tve(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{constructor(){this.changes=new Vg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Zo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ot.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ove{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dve{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&p2(n.mutation,a,Gc.empty(),nr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,En()).next(()=>n))}getLocalViewOfDocuments(t,r,n=En()){const a=$p();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let o=Gy();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const n=$p();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,En()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,n,a){let s=Sh();const o=m2(),l=function(){return m2()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Km)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),p2(d.mutation,u,d.mutation.getFieldMask(),nr.now())):o.set(u.key,Gc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new Ove(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const n=m2();let a=new us((o,l)=>o-l),s=En();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Gc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||En()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=zZ();d.forEach(h=>{if(!s.has(h)){const m=YZ(r.get(h),n.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Ot.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(o){return mr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):gP(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Ot.resolve($p());let l=K2,c=s;return o.next(u=>Ot.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Ot.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,En())).next(d=>({batchId:l,changes:VZ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new mr(r)).next(n=>{let a=Gy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let o=Gy();return this.indexManager.getCollectionParents(t,s).next(l=>Ot.forEach(l,c=>{const u=function(f,h){return new Hg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Zo.newInvalidDocument(d)))});let l=Gy();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&p2(d.mutation,u,Gc.empty(),nr.now()),Tk(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Ot.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:aA(a.createTime)}}(r)),Ot.resolve()}getNamedQuery(t,r){return Ot.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Cve(a.bundledQuery),readTime:aA(a.readTime)}}(r)),Ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(){this.overlays=new us(mr.comparator),this.qr=new Map}getOverlay(t,r){return Ot.resolve(this.overlays.get(r))}getOverlays(t,r){const n=$p();return Ot.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Ot.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Ot.resolve()}getOverlaysForCollection(t,r,n){const a=$p(),s=r.length+1,o=new mr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Ot.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new us((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=$p(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=$p(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Ot.resolve(l)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new tve(r,n));let s=this.qr.get(r);s===void 0&&(s=En(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lve{constructor(){this.sessionToken=no.EMPTY_BYTE_STRING}getSessionToken(t){return Ot.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.Qr=new Ii(Ki.$r),this.Ur=new Ii(Ki.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Ki(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Ki(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new mr(new _a([])),n=new Ki(r,t),a=new Ki(r,t+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new mr(new _a([])),n=new Ki(r,t),a=new Ki(r,t+1);let s=En();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new Ki(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Ki{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return mr.comparator(t.key,r.key)||Nn(t.Yr,r.Yr)}static Kr(t,r){return Nn(t.Yr,r.Yr)||mr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mve{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ii(Ki.$r)}checkEmpty(t){return Ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eve(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new Ki(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Ot.resolve(o)}lookupMutationBatch(t,r){return Ot.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Ot.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ot.resolve(this.mutationQueue.length===0?AP:this.tr-1)}getAllMutationBatches(t){return Ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Ki(r,0),a=new Ki(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const l=this.Xr(o.Yr);s.push(l)}),Ot.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Ii(Nn);return r.forEach(a=>{const s=new Ki(a,0),o=new Ki(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),Ot.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;mr.isDocumentKey(s)||(s=s.child(""));const o=new Ki(new mr(s),0);let l=new Ii(Nn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},o),Ot.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){aa(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ot.forEach(r.mutations,a=>{const s=new Ki(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Ki(r,0),a=this.Zr.firstAfterOrEqual(n);return Ot.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ot.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(t){this.ri=t,this.docs=function(){return new us(mr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Ot.resolve(n?n.document.mutableCopy():Zo.newInvalidDocument(r))}getEntries(t,r){let n=Sh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Zo.newInvalidDocument(a))}),Ot.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Sh();const o=r.path,l=new mr(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||mxe(hxe(d),n)<=0||(a.has(d.key)||Tk(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ot.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Lr(9500)}ii(t,r){return Ot.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Qve(this)}getSize(t){return Ot.resolve(this.size)}}class Qve extends Fve{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Ot.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{constructor(t){this.persistence=t,this.si=new Vg(r=>mP(r),pP),this.lastRemoteSnapshotVersion=$r.min(),this.highestTargetId=0,this.oi=0,this._i=new wP,this.targetCount=0,this.ai=lb.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Ot.resolve()}getLastRemoteSnapshotVersion(t){return Ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ot.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Ot.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ot.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new lb(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Ot.resolve()}updateTargetData(t,r){return this.Pr(r),Ot.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ot.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),Ot.waitFor(s).next(()=>a)}getTargetCount(t){return Ot.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Ot.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Ot.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(t,o))}),Ot.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Ot.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Ot.resolve(n)}containsKey(t,r){return Ot.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{constructor(t,r){this.ui={},this.overlays={},this.ci=new Ck(0),this.li=!1,this.li=!0,this.hi=new Lve,this.referenceDelegate=t(this),this.Pi=new Hve(this),this.indexManager=new _ve,this.remoteDocumentCache=function(a){return new Uve(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Eve(r),this.Ii=new Pve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Rve,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new Mve(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){sr("MemoryPersistence","Starting transaction:",t);const a=new Vve(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Ot.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Vve extends gxe{constructor(t){super(),this.currentSequenceNumber=t}}class NP{constructor(t){this.persistence=t,this.Ri=new wP,this.Vi=null}static mi(t){return new NP(t)}get fi(){if(this.Vi)return this.Vi;throw Lr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ot.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ot.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Ot.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ot.forEach(this.fi,n=>{const a=mr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,$r.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Ot.or([()=>Ot.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class v_{constructor(t,r){this.persistence=t,this.pi=new Vg(n=>bxe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Ive(this,r)}static mi(t,r){return new v_(t,r)}Ei(){}di(t){return Ot.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Ot.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Ot.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,o=>this.br(t,o,r).next(l=>{l||(n++,s.removeEntry(o,$r.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Ot.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ot.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ot.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Ot.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=w5(t.data.value)),r}br(t,r,n){return Ot.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Ot.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=En(),a=En();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new EP(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ve{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return w0e()?8:xxe(ll())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zve;return this.Ss(t,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(lv()<=wn.DEBUG&&sr("QueryEngine","SDK will not create cache indexes for query:",cv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ot.resolve()):(lv()<=wn.DEBUG&&sr("QueryEngine","Query:",cv(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(lv()<=wn.DEBUG&&sr("QueryEngine","The SDK decides to create cache indexes for query:",cv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,nA(r))):Ot.resolve())}ys(t,r){if(SQ(r))return Ot.resolve(null);let n=nA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=p_(r,null,"F"),n=nA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=En(...s);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(t,p_(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return SQ(r)||a.isEqual($r.min())?Ot.resolve(null):this.ps.getDocuments(t,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?Ot.resolve(null):(lv()<=wn.DEBUG&&sr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),cv(r)),this.vs(t,o,r,Axe(a,K2)).next(l=>l))})}Ds(t,r){let n=new Ii(QZ(t));return r.forEach((a,s)=>{Tk(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return lv()<=wn.DEBUG&&sr("QueryEngine","Using full collection scan to execute query:",cv(r)),this.ps.getDocumentsMatchingQuery(t,r,km.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="LocalStore",Gve=3e8;class qve{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new us(Nn),this.xs=new Vg(s=>mP(s),pP),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Dve(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Kve(e,t,r,n){return new qve(e,t,r,n)}async function dee(e,t){const r=Wr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=En();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Wve(e,t){const r=Wr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=Ot.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);aa(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=En();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function fee(e){const t=Wr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Xve(e,t){const r=Wr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(no.EMPTY_BYTE_STRING,$r.min()).withLastLimboFreeSnapshotVersion($r.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Gve?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=Sh(),u=En();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Yve(s,o,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual($r.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Ot.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function Yve(e,t,r){let n=En(),a=En();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let o=Sh();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual($r.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):sr(CP,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:a}})}function Jve(e,t){const r=Wr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=AP),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Zve(e,t){const r=Wr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Ot.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new nm(t,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function uF(e,t,r){const n=Wr(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!$b(o))throw o;sr(CP,`Failed to update sequence numbers for target ${t}: ${o}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function UQ(e,t,r){const n=Wr(e);let a=$r.min(),s=En();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=Wr(c),h=f.xs.get(d);return h!==void 0?Ot.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,o,nA(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,t,r?a:$r.min(),r?s:En())).next(l=>(ebe(n,Mxe(t),l),{documents:l,Qs:s})))}function ebe(e,t,r){let n=e.Os.get(t)||$r.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class QQ{constructor(){this.activeTargetIds=$xe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class tbe{constructor(){this.Mo=new QQ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new QQ,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rbe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HQ="ConnectivityMonitor";class VQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){sr(HQ,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){sr(HQ,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VE=null;function dF(){return VE===null?VE=function(){return 268435456+Math.round(2147483648*Math.random())}():VE++,"0x"+VE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="RestConnection",nbe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class abe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===A_?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const o=dF(),l=this.zo(t,r.toUriEncodedString());sr(tB,`Sending RPC '${t}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=Hh(u);return this.Jo(t,l,c,n,d).then(f=>(sr(tB,`Received RPC '${t}' ${o}: `,f),f),f=>{throw bg(tB,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(t,r,n,a,s,o){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vb}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=nbe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sbe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="WebChannelConnection";class ibe extends abe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const o=dF();return new Promise((l,c)=>{const u=new AZ;u.setWithCredentials(!0),u.listenOnce(hZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case y5.NO_ERROR:const f=u.getResponseJson();sr(Uo,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case y5.TIMEOUT:sr(Uo,`RPC '${t}' ${o} timed out`),c(new $t(Et.DEADLINE_EXCEEDED,"Request time out"));break;case y5.HTTP_ERROR:const h=u.getStatus();if(sr(Uo,`RPC '${t}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Et).indexOf(w)>=0?w:Et.UNKNOWN}(g.status);c(new $t(x,g.message))}else c(new $t(Et.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new $t(Et.UNAVAILABLE,"Connection failed."));break;default:Lr(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{sr(Uo,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(a);sr(Uo,`RPC '${t}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=dF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=gZ(),l=pZ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");sr(Uo,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let h=!1,m=!1;const g=new sbe({Yo:v=>{m?sr(Uo,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(h||(sr(Uo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),sr(Uo,`RPC '${t}' stream ${a} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,w)=>{v.listen(y,_=>{try{w(_)}catch(O){setTimeout(()=>{throw O},0)}})};return x(f,$y.EventType.OPEN,()=>{m||(sr(Uo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,$y.EventType.CLOSE,()=>{m||(m=!0,sr(Uo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,$y.EventType.ERROR,v=>{m||(m=!0,bg(Uo,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new $t(Et.UNAVAILABLE,"The operation could not be completed")))}),x(f,$y.EventType.MESSAGE,v=>{var y;if(!m){const w=v.data[0];aa(!!w,16349);const _=w,O=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(O){sr(Uo,`RPC '${t}' stream ${a} received error:`,O);const j=O.status;let B=function(T){const L=ui[T];if(L!==void 0)return ZZ(L)}(j),C=O.message;B===void 0&&(B=Et.INTERNAL,C="Unknown error status: "+j+" with message "+O.message),m=!0,g.a_(new $t(B,C)),f.close()}else sr(Uo,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(l,mZ.STAT_EVENT,v=>{v.stat===Z6.PROXY?sr(Uo,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===Z6.NOPROXY&&sr(Uo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function rB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(e){return new uve(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aee{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&sr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zQ="PersistentStream";class hee{constructor(t,r,n,a,s,o,l,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Aee(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Et.RESOURCE_EXHAUSTED?(_h(r.toString()),_h("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new $t(Et.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return sr(zQ,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(sr(zQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class obe extends hee{constructor(t,r,n,a,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Ave(this.serializer,t),n=function(s){if(!("targetChange"in s))return $r.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?$r.min():o.readTime?aA(o.readTime):$r.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=cF(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=aF(c)?{documents:pve(s,c)}:{query:gve(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=ree(s,o.resumeToken);const u=iF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo($r.min())>0){l.readTime=x_(s,o.snapshotVersion.toTimestamp());const u=iF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=vve(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=cF(this.serializer),r.removeTarget=t,this.q_(r)}}class lbe extends hee{constructor(t,r,n,a,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return aa(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,aa(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){aa(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=mve(t.writeResults,t.commitTime),n=aA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=cF(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>hve(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cbe{}class ube extends cbe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new $t(Et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(t,oF(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $t(Et.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,oF(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $t(Et.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dbe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_h(r),this.aa=!1):sr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="RemoteStore";class fbe{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{zg(this)&&(sr(yg,"Restarting streams for network reachability change."),await async function(c){const u=Wr(c);u.Ea.add(4),await tN(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Rk(u)}(this))})}),this.Ra=new dbe(n,a)}}async function Rk(e){if(zg(e))for(const t of e.da)await t(!0)}async function tN(e){for(const t of e.da)await t(!1)}function mee(e,t){const r=Wr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),jP(r)?kP(r):Gb(r).O_()&&SP(r,t))}function _P(e,t){const r=Wr(e),n=Gb(r);r.Ia.delete(t),n.O_()&&pee(r,t),r.Ia.size===0&&(n.O_()?n.L_():zg(r)&&r.Ra.set("Unknown"))}function SP(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($r.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Gb(e).Y_(t)}function pee(e,t){e.Va.Ue(t),Gb(e).Z_(t)}function kP(e){e.Va=new ive({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Gb(e).start(),e.Ra.ua()}function jP(e){return zg(e)&&!Gb(e).x_()&&e.Ia.size>0}function zg(e){return Wr(e).Ea.size===0}function gee(e){e.Va=void 0}async function Abe(e){e.Ra.set("Online")}async function hbe(e){e.Ia.forEach((t,r)=>{SP(e,t)})}async function mbe(e,t){gee(e),jP(e)?(e.Ra.ha(t),kP(e)):e.Ra.set("Unknown")}async function pbe(e,t,r){if(e.Ra.set("Online"),t instanceof tee&&t.state===2&&t.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(e,t)}catch(n){sr(yg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await b_(e,n)}else if(t instanceof C5?e.Va.Ze(t):t instanceof eee?e.Va.st(t):e.Va.tt(t),!r.isEqual($r.min()))try{const n=await fee(e.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(no.EMPTY_BYTE_STRING,d.snapshotVersion)),pee(s,c);const f=new nm(d.target,c,u,d.sequenceNumber);SP(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){sr(yg,"Failed to raise snapshot:",n),await b_(e,n)}}async function b_(e,t,r){if(!$b(t))throw t;e.Ea.add(1),await tN(e),e.Ra.set("Offline"),r||(r=()=>fee(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{sr(yg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Rk(e)})}function xee(e,t){return t().catch(r=>b_(e,r,t))}async function Lk(e){const t=Wr(e),r=Im(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:AP;for(;gbe(t);)try{const a=await Jve(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,xbe(t,a)}catch(a){await b_(t,a)}vee(t)&&bee(t)}function gbe(e){return zg(e)&&e.Ta.length<10}function xbe(e,t){e.Ta.push(t);const r=Im(e);r.O_()&&r.X_&&r.ea(t.mutations)}function vee(e){return zg(e)&&!Im(e).x_()&&e.Ta.length>0}function bee(e){Im(e).start()}async function vbe(e){Im(e).ra()}async function bbe(e){const t=Im(e);for(const r of e.Ta)t.ea(r.mutations)}async function ybe(e,t,r){const n=e.Ta.shift(),a=vP.from(n,t,r);await xee(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Lk(e)}async function wbe(e,t){t&&Im(e).X_&&await async function(n,a){if(function(o){return nve(o)&&o!==Et.ABORTED}(a.code)){const s=n.Ta.shift();Im(n).B_(),await xee(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Lk(n)}}(e,t),vee(e)&&bee(e)}async function $Q(e,t){const r=Wr(e);r.asyncQueue.verifyOperationInProgress(),sr(yg,"RemoteStore received new credentials");const n=zg(r);r.Ea.add(3),await tN(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Rk(r)}async function Nbe(e,t){const r=Wr(e);t?(r.Ea.delete(2),await Rk(r)):t||(r.Ea.add(2),await tN(r),r.Ra.set("Unknown"))}function Gb(e){return e.ma||(e.ma=function(r,n,a){const s=Wr(r);return s.sa(),new obe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:Abe.bind(null,e),t_:hbe.bind(null,e),r_:mbe.bind(null,e),H_:pbe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),jP(e)?kP(e):e.Ra.set("Unknown")):(await e.ma.stop(),gee(e))})),e.ma}function Im(e){return e.fa||(e.fa=function(r,n,a){const s=Wr(r);return s.sa(),new lbe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:vbe.bind(null,e),r_:wbe.bind(null,e),ta:bbe.bind(null,e),na:ybe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Lk(e)):(await e.fa.stop(),e.Ta.length>0&&(sr(yg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new hh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const o=Date.now()+n,l=new BP(t,r,o,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $t(Et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TP(e,t){if(_h("AsyncQueue",`${t}: ${e}`),$b(e))return new $t(Et.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{static emptySet(t){return new Dv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||mr.comparator(r.key,n.key):(r,n)=>mr.comparator(r.key,n.key),this.keyedMap=Gy(),this.sortedSet=new us(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Dv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Dv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(){this.ga=new us(mr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Lr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class cb{constructor(t,r,n,a,s,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new cb(t,r,Dv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bk(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ebe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Cbe{constructor(){this.queries=qQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Wr(r),s=a.queries;a.queries=qQ(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new $t(Et.ABORTED,"Firestore shutting down"))}}function qQ(){return new Vg(e=>UZ(e),Bk)}async function IP(e,t){const r=Wr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Ebe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=TP(o,`Initialization of query '${cv(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&OP(r)}async function FP(e,t){const r=Wr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(t);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function _be(e,t){const r=Wr(e);let n=!1;for(const a of t){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(a)&&(n=!0);o.wa=a}}n&&OP(r)}function Sbe(e,t,r){const n=Wr(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function OP(e){e.Ca.forEach(t=>{t.next()})}var fF,KQ;(KQ=fF||(fF={})).Ma="default",KQ.Cache="cache";class DP{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new cb(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=cb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==fF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yee{constructor(t){this.key=t}}class wee{constructor(t){this.key=t}}class kbe{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=En(),this.mutatedKeys=En(),this.eu=QZ(t),this.tu=new Dv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new GQ,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),m=Tk(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(h,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!h&&m?(n.track({type:0,doc:m}),v=!0):h&&!m&&(n.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new cb(this.query,t.tu,s,o,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new GQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=En(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new wee(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new yee(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=En();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return cb.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const PP="SyncEngine";class jbe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class Bbe{constructor(t){this.key=t,this.hu=!1}}class Tbe{constructor(t,r,n,a,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Vg(l=>UZ(l),Bk),this.Iu=new Map,this.Eu=new Set,this.du=new us(mr.comparator),this.Au=new Map,this.Ru=new wP,this.Vu={},this.mu=new Map,this.fu=lb.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ibe(e,t,r=!0){const n=kee(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await Nee(n,t,r,!0),a}async function Fbe(e,t){const r=kee(e);await Nee(r,t,!0,!1)}async function Nee(e,t,r,n){const a=await Zve(e.localStore,nA(t)),s=a.targetId,o=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await Obe(e,t,s,o==="current",a.resumeToken)),e.isPrimaryClient&&r&&mee(e.remoteStore,a),l}async function Obe(e,t,r,n,a){e.pu=(f,h,m)=>async function(x,v,y,w){let _=v.view.ru(y);_.Cs&&(_=await UQ(x.localStore,v.query,!1).then(({documents:C})=>v.view.ru(C,_)));const O=w&&w.targetChanges.get(v.targetId),j=w&&w.targetMismatches.get(v.targetId)!=null,B=v.view.applyChanges(_,x.isPrimaryClient,O,j);return XQ(x,v.targetId,B.au),B.snapshot}(e,f,h,m);const s=await UQ(e.localStore,t,!0),o=new kbe(t,s.Qs),l=o.ru(s.documents),c=eN.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=o.applyChanges(l,e.isPrimaryClient,c);XQ(e,r,u.au);const d=new jbe(t,r,o);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function Dbe(e,t,r){const n=Wr(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!Bk(o,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await uF(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&_P(n.remoteStore,a.targetId),AF(n,a.targetId)}).catch(zb)):(AF(n,a.targetId),await uF(n.localStore,a.targetId,!0))}async function Pbe(e,t){const r=Wr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),_P(r.remoteStore,n.targetId))}async function Rbe(e,t,r){const n=zbe(e);try{const a=await function(o,l){const c=Wr(o),u=nr.now(),d=l.reduce((m,g)=>m.add(g.key),En());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Sh(),x=En();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const w of l){const _=Jxe(w,f.get(w.key).overlayedDocument);_!=null&&y.push(new Km(w.key,_,FZ(_.value.mapValue),kl.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:VZ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new us(Nn)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,a.batchId,r),await rN(n,a.changes),await Lk(n.remoteStore)}catch(a){const s=TP(a,"Failed to persist write");r.reject(s)}}async function Eee(e,t){const r=Wr(e);try{const n=await Xve(r.localStore,t);t.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(aa(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?aa(o.hu,14607):a.removedDocuments.size>0&&(aa(o.hu,42227),o.hu=!1))}),await rN(r,n,t)}catch(n){await zb(n)}}function WQ(e,t,r){const n=Wr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(t);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=Wr(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(l)&&(u=!0)}),u&&OP(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Lbe(e,t,r){const n=Wr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let o=new us(mr.comparator);o=o.insert(s,Zo.newNoDocument(s,$r.min()));const l=En().add(s),c=new Dk($r.min(),new Map,new us(Nn),o,l);await Eee(n,c),n.du=n.du.remove(s),n.Au.delete(t),RP(n)}else await uF(n.localStore,t,!1).then(()=>AF(n,t,r)).catch(zb)}async function Mbe(e,t){const r=Wr(e),n=t.batch.batchId;try{const a=await Wve(r.localStore,t);_ee(r,n,null),Cee(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await rN(r,a)}catch(a){await zb(a)}}async function Ube(e,t,r){const n=Wr(e);try{const a=await function(o,l){const c=Wr(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(aa(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);_ee(n,t,r),Cee(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await rN(n,a)}catch(a){await zb(a)}}function Cee(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function _ee(e,t,r){const n=Wr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function AF(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||See(e,n)})}function See(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(_P(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),RP(e))}function XQ(e,t,r){for(const n of r)n instanceof yee?(e.Ru.addReference(n.key,t),Qbe(e,n)):n instanceof wee?(sr(PP,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||See(e,n.key)):Lr(19791,{wu:n})}function Qbe(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(sr(PP,"New document in limbo: "+r),e.Eu.add(n),RP(e))}function RP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new mr(_a.fromString(t)),n=e.fu.next();e.Au.set(n,new Bbe(r)),e.du=e.du.insert(r,n),mee(e.remoteStore,new nm(nA(jk(r.path)),n,"TargetPurposeLimboResolution",Ck.ce))}}async function rN(e,t,r){const n=Wr(e),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=EP.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(c,u){const d=Wr(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ot.forEach(u,h=>Ot.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Ot.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!$b(f))throw f;sr(CP,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function Hbe(e,t){const r=Wr(e);if(!r.currentUser.isEqual(t)){sr(PP,"User change. New user:",t.toKey());const n=await dee(r.localStore,t);r.currentUser=t,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new $t(Et.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await rN(r,n.Ls)}}function Vbe(e,t){const r=Wr(e),n=r.Au.get(t);if(n&&n.hu)return En().add(n.key);{let a=En();const s=r.Iu.get(t);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function kee(e){const t=Wr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Eee.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vbe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lbe.bind(null,t),t.Pu.H_=_be.bind(null,t.eventManager),t.Pu.yu=Sbe.bind(null,t.eventManager),t}function zbe(e){const t=Wr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mbe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ube.bind(null,t),t}class y_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pk(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Kve(this.persistence,new $ve,t.initialUser,this.serializer)}Cu(t){return new uee(NP.mi,this.serializer)}Du(t){return new tbe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}y_.provider={build:()=>new y_};class $be extends y_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){aa(this.persistence.referenceDelegate instanceof v_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Bve(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Yl.withCacheSize(this.cacheSizeBytes):Yl.DEFAULT;return new uee(n=>v_.mi(n,r),this.serializer)}}class hF{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>WQ(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hbe.bind(null,this.syncEngine),await Nbe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Cbe}()}createDatastore(t){const r=Pk(t.databaseInfo.databaseId),n=function(s){return new ibe(s)}(t.databaseInfo);return function(s,o,l,c){return new ube(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,o,l){return new fbe(n,a,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>WQ(this.syncEngine,r,0),function(){return VQ.v()?new VQ:new rbe}())}createSyncEngine(t,r){return function(a,s,o,l,c,u,d){const f=new Tbe(a,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Wr(a);sr(yg,"RemoteStore shutting down."),s.Ea.add(5),await tN(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}hF.provider={build:()=>new hF};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):_h("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="FirestoreClient";class Gbe{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Wo.UNAUTHENTICATED,this.clientId=Nk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{sr(Fm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(sr(Fm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new hh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=TP(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function nB(e,t){e.asyncQueue.verifyOperationInProgress(),sr(Fm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await dee(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function YQ(e,t){e.asyncQueue.verifyOperationInProgress();const r=await qbe(e);sr(Fm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>$Q(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>$Q(t.remoteStore,a)),e._onlineComponents=t}async function qbe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){sr(Fm,"Using user provided OfflineComponentProvider");try{await nB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Et.FAILED_PRECONDITION||a.code===Et.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;bg("Error using user provided cache. Falling back to memory cache: "+r),await nB(e,new y_)}}else sr(Fm,"Using default OfflineComponentProvider"),await nB(e,new $be(void 0));return e._offlineComponents}async function jee(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(sr(Fm,"Using user provided OnlineComponentProvider"),await YQ(e,e._uninitializedComponentsProvider._online)):(sr(Fm,"Using default OnlineComponentProvider"),await YQ(e,new hF))),e._onlineComponents}function Kbe(e){return jee(e).then(t=>t.syncEngine)}async function w_(e){const t=await jee(e),r=t.eventManager;return r.onListen=Ibe.bind(null,t.syncEngine),r.onUnlisten=Dbe.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Fbe.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Pbe.bind(null,t.syncEngine),r}function Wbe(e,t,r={}){const n=new hh;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new LP({next:h=>{d.Nu(),o.enqueueAndForget(()=>FP(s,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new $t(Et.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new $t(Et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new DP(jk(l.path),d,{includeMetadataChanges:!0,qa:!0});return IP(s,f)}(await w_(e),e.asyncQueue,t,r,n)),n.promise}function Xbe(e,t,r={}){const n=new hh;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new LP({next:h=>{d.Nu(),o.enqueueAndForget(()=>FP(s,f)),h.fromCache&&c.source==="server"?u.reject(new $t(Et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new DP(l,d,{includeMetadataChanges:!0,qa:!0});return IP(s,f)}(await w_(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bee(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JQ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tee="firestore.googleapis.com",ZQ=!0;class eH{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new $t(Et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Tee,this.ssl=ZQ}else this.host=t.host,this.ssl=t.ssl??ZQ;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=cee;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<kve)throw new $t(Et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wZ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bee(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new $t(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new $t(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new $t(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Mk{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eH({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $t(Et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new $t(Et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eH(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new bZ;switch(n.type){case"firstParty":return new ixe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new $t(Et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=JQ.get(r);n&&(sr("ComponentProvider","Removing Datastore"),JQ.delete(r),n.terminate())}(this),Promise.resolve()}}function Iee(e,t,r,n={}){var u;e=il(e,Mk);const a=Hh(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;a&&(pk(`https://${l}`),gk("Firestore",!0)),s.host!==Tee&&s.host!==l&&bg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!_m(c,o)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Wo.MOCK_USER;else{d=_J(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new $t(Et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Wo(h)}e._authCredentials=new nxe(new vZ(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Jd(this.firestore,t,this._query)}}class os{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new os(this.firestore,t,this._key)}toJSON(){return{type:os._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(Jw(r,os._jsonSchema))return new os(t,n||null,new mr(_a.fromString(r.referencePath)))}}os._jsonSchemaVersion="firestore/documentReference/1.0",os._jsonSchema={type:xi("string",os._jsonSchemaVersion),referencePath:xi("string")};class mh extends Jd{constructor(t,r,n){super(t,r,jk(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new os(this.firestore,null,new mr(t))}withConverter(t){return new mh(this.firestore,t,this._path)}}function mt(e,t,...r){if(e=Gn(e),yZ("collection","path",t),e instanceof Mk){const n=_a.fromString(t,...r);return hQ(n),new mh(e,null,n)}{if(!(e instanceof os||e instanceof mh))throw new $t(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return hQ(n),new mh(e.firestore,null,n)}}function Yt(e,t,...r){if(e=Gn(e),arguments.length===1&&(t=Nk.newId()),yZ("doc","path",t),e instanceof Mk){const n=_a.fromString(t,...r);return AQ(n),new os(e,null,new mr(n))}{if(!(e instanceof os||e instanceof mh))throw new $t(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return AQ(n),new os(e.firestore,e instanceof mh?e.converter:null,new mr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH="AsyncQueue";class rH{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Aee(this,"async_queue_retry"),this._c=()=>{const n=rB();n&&sr(tH,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=rB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=rB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new hh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!$b(t))throw t;sr(tH,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,_h("INTERNAL UNHANDLED ERROR: ",nH(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=BP.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Lr(47125,{Pc:nH(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function nH(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Xd extends Mk{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new rH,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new rH(t),this._firestoreClient=void 0,await t}}}function MP(e,t){const r=typeof e=="object"?e:xk(),n=typeof e=="string"?e:A_,a=Kw(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=eP("firestore");s&&Iee(a,...s)}return a}function qb(e){if(e._terminated)throw new $t(Et.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ybe(e),e._firestoreClient}function Ybe(e){var n,a,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new Nxe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Bee(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Gbe(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qc(no.fromBase64String(t))}catch(r){throw new $t(Et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Qc(no.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Jw(t,Qc._jsonSchema))return Qc.fromBase64String(t.bytes)}}Qc._jsonSchemaVersion="firestore/bytes/1.0",Qc._jsonSchema={type:xi("string",Qc._jsonSchemaVersion),bytes:xi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new $t(Et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new $t(Et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new $t(Et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nn(this._lat,t._lat)||Nn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qd._jsonSchemaVersion}}static fromJSON(t){if(Jw(t,Qd._jsonSchema))return new Qd(t.latitude,t.longitude)}}Qd._jsonSchemaVersion="firestore/geoPoint/1.0",Qd._jsonSchema={type:xi("string",Qd._jsonSchemaVersion),latitude:xi("number"),longitude:xi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Hd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Jw(t,Hd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Hd(t.vectorValues);throw new $t(Et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hd._jsonSchemaVersion="firestore/vectorValue/1.0",Hd._jsonSchema={type:xi("string",Hd._jsonSchemaVersion),vectorValues:xi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jbe=/^__.*__$/;class Zbe{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Km(t,this.data,this.fieldMask,r,this.fieldTransforms):new Zw(t,this.data,r,this.fieldTransforms)}}class Fee{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Km(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Oee(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lr(40011,{Ac:e})}}class Uk{constructor(t,r,n,a,s,o){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Uk({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return N_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Oee(this.Ac)&&Jbe.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class e1e{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||Pk(t)}Cc(t,r,n,a=!1){return new Uk({Ac:t,methodName:r,Dc:n,path:Ji.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xb(e){const t=e._freezeSettings(),r=Pk(e._databaseId);return new e1e(e._databaseId,!!t.ignoreUndefinedProperties,r)}function UP(e,t,r,n,a,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);VP("Data must be an object, but it was:",o,n);const l=Lee(n,o);let c,u;if(s.merge)c=new Gc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=mF(t,f,r);if(!o.contains(h))throw new $t(Et.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Uee(d,h)||d.push(h)}c=new Gc(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Zbe(new nc(l),c,u)}class Qk extends Wb{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Qk}}function t1e(e,t,r){return new Uk({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class QP extends Wb{_toFieldTransform(t){return new XZ(t.path,new J2)}isEqual(t){return t instanceof QP}}class HP extends Wb{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=t1e(this,t,!0),n=this.vc.map(s=>Yb(s,r)),a=new ob(n);return new XZ(t.path,a)}isEqual(t){return t instanceof HP&&_m(this.vc,t.vc)}}function Dee(e,t,r,n){const a=e.Cc(1,t,r);VP("Data must be an object, but it was:",a,n);const s=[],o=nc.empty();qm(n,(c,u)=>{const d=zP(t,c,r);u=Gn(u);const f=a.yc(d);if(u instanceof Qk)s.push(d);else{const h=Yb(u,f);h!=null&&(s.push(d),o.set(d,h))}});const l=new Gc(s);return new Fee(o,l,a.fieldTransforms)}function Pee(e,t,r,n,a,s){const o=e.Cc(1,t,r),l=[mF(t,n,r)],c=[a];if(s.length%2!=0)throw new $t(Et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(mF(t,s[h])),c.push(s[h+1]);const u=[],d=nc.empty();for(let h=l.length-1;h>=0;--h)if(!Uee(u,l[h])){const m=l[h];let g=c[h];g=Gn(g);const x=o.yc(m);if(g instanceof Qk)u.push(m);else{const v=Yb(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new Gc(u);return new Fee(d,f,o.fieldTransforms)}function Ree(e,t,r,n=!1){return Yb(r,e.Cc(n?4:3,t))}function Yb(e,t){if(Mee(e=Gn(e)))return VP("Unsupported field value:",t,e),Lee(e,t);if(e instanceof Wb)return function(n,a){if(!Oee(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=Yb(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Gn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Gxe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=nr.fromDate(n);return{timestampValue:x_(a.serializer,s)}}if(n instanceof nr){const s=new nr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:x_(a.serializer,s)}}if(n instanceof Qd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Qc)return{bytesValue:ree(a.serializer,n._byteString)};if(n instanceof os){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yP(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Hd)return function(o,l){return{mapValue:{fields:{[TZ]:{stringValue:IZ},[h_]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return xP(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${Ek(n)}`)}(e,t)}function Lee(e,t){const r={};return CZ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qm(e,(n,a)=>{const s=Yb(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function Mee(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof nr||e instanceof Qd||e instanceof Qc||e instanceof os||e instanceof Wb||e instanceof Hd)}function VP(e,t,r){if(!Mee(r)||!NZ(r)){const n=Ek(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function mF(e,t,r){if((t=Gn(t))instanceof Kb)return t._internalPath;if(typeof t=="string")return zP(e,t);throw N_("Field path arguments must be of type string or ",e,!1,void 0,r)}const r1e=new RegExp("[~\\*/\\[\\]]");function zP(e,t,r){if(t.search(r1e)>=0)throw N_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Kb(...t.split("."))._internalPath}catch{throw N_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function N_(e,t,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new $t(Et.INVALID_ARGUMENT,l+e+c)}function Uee(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new os(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new n1e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Hk("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class n1e extends $P{data(){return super.data()}}function Hk(e,t){return typeof t=="string"?zP(e,t):t instanceof Kb?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qee(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new $t(Et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GP{}class nN extends GP{}function Lt(e,t,...r){let n=[];t instanceof GP&&n.push(t),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof Vk).length,l=s.filter(c=>c instanceof aN).length;if(o>1||o>0&&l>0)throw new $t(Et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class aN extends nN{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new aN(t,r,n)}_apply(t){const r=this._parse(t);return Vee(t._query,r),new Jd(t.firestore,t.converter,sF(t._query,r))}_parse(t){const r=Xb(t.firestore);return function(s,o,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new $t(Et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){iH(f,d);const g=[];for(const x of f)g.push(sH(c,s,x));h={arrayValue:{values:g}}}else h=sH(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||iH(f,d),h=Ree(l,o,f,d==="in"||d==="not-in");return pi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function dr(e,t,r){const n=t,a=Hk("where",e);return aN._create(a,n,r)}class Vk extends GP{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Vk(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Wd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)Vee(o,c),o=sF(o,c)}(t._query,r),new Jd(t.firestore,t.converter,sF(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zk extends nN{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new zk(t,r)}_apply(t){const r=function(a,s,o){if(a.startAt!==null)throw new $t(Et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new $t(Et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Y2(s,o)}(t._query,this._field,this._direction);return new Jd(t.firestore,t.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Hg(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Jt(e,t="asc"){const r=t,n=Hk("orderBy",e);return zk._create(n,r)}class $k extends nN{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new $k(t,r,n)}_apply(t){return new Jd(t.firestore,t.converter,p_(t._query,this._limit,this._limitType))}}function Vd(e){return fxe("limit",e),$k._create("limit",e,"F")}class Gk extends nN{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new Gk(t,r,n)}_apply(t){const r=a1e(t,this.type,this._docOrFields,this._inclusive);return new Jd(t.firestore,t.converter,function(a,s){return new Hg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function Hee(...e){return Gk._create("startAfter",e,!1)}function a1e(e,t,r,n){if(r[0]=Gn(r[0]),r[0]instanceof $P)return function(s,o,l,c,u){if(!c)throw new $t(Et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of Ov(s))if(f.field.isKeyField())d.push(m_(o,c.key));else{const h=c.data.field(f.field);if(Sk(h))throw new $t(Et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=f.field.canonicalString();throw new $t(Et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new ib(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=Xb(e.firestore);return function(o,l,c,u,d,f){const h=o.explicitOrderBy;if(d.length>h.length)throw new $t(Et.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new $t(Et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!gP(o)&&x.indexOf("/")!==-1)throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child(_a.fromString(x));if(!mr.isDocumentKey(v))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new mr(v);m.push(m_(l,y))}else{const v=Ree(c,u,x);m.push(v)}}return new ib(m,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function sH(e,t,r){if(typeof(r=Gn(r))=="string"){if(r==="")throw new $t(Et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gP(t)&&r.indexOf("/")!==-1)throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(_a.fromString(r));if(!mr.isDocumentKey(n))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return m_(e,new mr(n))}if(r instanceof os)return m_(e,r._key);throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ek(r)}.`)}function iH(e,t){if(!Array.isArray(e)||e.length===0)throw new $t(Et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Vee(e,t){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new $t(Et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new $t(Et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class zee{convertValue(t,r="none"){switch(Tm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ws(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Bm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Lr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return qm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[h_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>Ws(o.doubleValue));return new Hd(r)}convertGeoPoint(t){return new Qd(Ws(t.latitude),Ws(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=kk(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(W2(t));default:return null}}convertTimestamp(t){const r=jm(t);return new nr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=_a.fromString(t);aa(lee(n),9688,{name:t});const a=new nb(n.get(1),n.get(3)),s=new mr(n.popFirst(5));return a.isEqual(r)||_h(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class xv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class mm extends $P{constructor(t,r,n,a,s,o){super(t,r,n,a,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new g2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(Hk("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $t(Et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=mm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}mm._jsonSchemaVersion="firestore/documentSnapshot/1.0",mm._jsonSchema={type:xi("string",mm._jsonSchemaVersion),bundleSource:xi("string","DocumentSnapshot"),bundleName:xi("string"),bundle:xi("string")};class g2 extends mm{data(t={}){return super.data(t)}}class pm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new xv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new g2(this._firestore,this._userDataWriter,n.key,n,new xv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new $t(Et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new g2(a._firestore,a._userDataWriter,l.doc.key,l.doc,new xv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new g2(a._firestore,a._userDataWriter,l.doc.key,l.doc,new xv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:s1e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $t(Et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=pm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Nk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function s1e(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(e){e=il(e,os);const t=il(e.firestore,Xd);return Wbe(qb(t),e._key).then(r=>$ee(t,e,r))}pm._jsonSchemaVersion="firestore/querySnapshot/1.0",pm._jsonSchema={type:xi("string",pm._jsonSchemaVersion),bundleSource:xi("string","QuerySnapshot"),bundleName:xi("string"),bundle:xi("string")};class KP extends zee{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new os(this.firestore,null,r)}}function Mr(e){e=il(e,Jd);const t=il(e.firestore,Xd),r=qb(t),n=new KP(t);return Qee(e._query),Xbe(r,e._query).then(a=>new pm(t,n,e,a))}function yi(e,t,r){e=il(e,os);const n=il(e.firestore,Xd),a=qP(e.converter,t,r);return Jb(n,[UP(Xb(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,kl.none())])}function dl(e,t,r,...n){e=il(e,os);const a=il(e.firestore,Xd),s=Xb(a);let o;return o=typeof(t=Gn(t))=="string"||t instanceof Kb?Pee(s,"updateDoc",e._key,t,r,n):Dee(s,"updateDoc",e._key,t),Jb(a,[o.toMutation(e._key,kl.exists(!0))])}function wa(e){return Jb(il(e.firestore,Xd),[new Ok(e._key,kl.none())])}function on(e,t){const r=il(e.firestore,Xd),n=Yt(e),a=qP(e.converter,t);return Jb(r,[UP(Xb(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,kl.exists(!1))]).then(()=>n)}function lr(e,...t){var c,u,d;e=Gn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||aH(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(aH(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,l;if(e instanceof os)o=il(e.firestore,Xd),l=jk(e._key.path),s={next:f=>{t[n]&&t[n]($ee(o,e,f))},error:t[n+1],complete:t[n+2]};else{const f=il(e,Jd);o=il(f.firestore,Xd),l=f._query;const h=new KP(o);s={next:m=>{t[n]&&t[n](new pm(o,h,f,m))},error:t[n+1],complete:t[n+2]},Qee(e._query)}return function(h,m,g,x){const v=new LP(x),y=new DP(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>IP(await w_(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>FP(await w_(h),y))}}(qb(o),l,a,s)}function Jb(e,t){return function(n,a){const s=new hh;return n.asyncQueue.enqueueAndForget(async()=>Rbe(await Kbe(n),a,s)),s.promise}(qb(e),t)}function $ee(e,t,r){const n=r.docs.get(t._key),a=new KP(e);return new mm(e,a,t._key,n,new xv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gee{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Xb(t)}set(t,r,n){this._verifyNotCommitted();const a=aB(t,this._firestore),s=qP(a.converter,r,n),o=UP(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,kl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=aB(t,this._firestore);let o;return o=typeof(r=Gn(r))=="string"||r instanceof Kb?Pee(this._dataReader,"WriteBatch.update",s._key,r,n,a):Dee(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,kl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=aB(t,this._firestore);return this._mutations=this._mutations.concat(new Ok(r._key,kl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $t(Et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function aB(e,t){if((e=Gn(e)).firestore!==t)throw new $t(Et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function ya(){return new QP("serverTimestamp")}function qee(...e){return new HP("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(e){return qb(e=il(e,Xd)),new Gee(e,t=>Jb(e,t))}(function(t,r=!0){(function(a){Vb=a})(Ug),Sm(new Nh("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Xd(new axe(n.getProvider("auth-internal")),new oxe(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new $t(Et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nb(u.options.projectId,d)}(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ku(cQ,uQ,t),Ku(cQ,uQ,"esm2020")})();const ub=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:zee,Bytes:Qc,CollectionReference:mh,DocumentReference:os,DocumentSnapshot:mm,FieldPath:Kb,FieldValue:Wb,Firestore:Xd,FirestoreError:$t,GeoPoint:Qd,Query:Jd,QueryCompositeFilterConstraint:Vk,QueryConstraint:nN,QueryDocumentSnapshot:g2,QueryFieldFilterConstraint:aN,QueryLimitConstraint:$k,QueryOrderByConstraint:zk,QuerySnapshot:pm,QueryStartAtConstraint:Gk,SnapshotMetadata:xv,Timestamp:nr,VectorValue:Hd,WriteBatch:Gee,_AutoId:Nk,_ByteString:no,_DatabaseId:nb,_DocumentKey:mr,_EmptyAuthCredentialsProvider:bZ,_FieldPath:Ji,_cast:il,_logWarn:bg,_validateIsNotUsedTogether:wZ,addDoc:on,arrayUnion:qee,collection:mt,connectFirestoreEmulator:Iee,deleteDoc:wa,doc:Yt,ensureFirestoreConfigured:qb,executeWrite:Jb,getDoc:kh,getDocs:Mr,getFirestore:MP,limit:Vd,onSnapshot:lr,orderBy:Jt,query:Lt,serverTimestamp:ya,setDoc:yi,startAfter:Hee,updateDoc:dl,where:dr,writeBatch:$g},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kee="firebasestorage.googleapis.com",Wee="storageBucket",i1e=120*1e3,o1e=600*1e3,l1e=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Yd{constructor(t,r,n=0){super(sB(t),`Firebase Storage: ${r} (${sB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,As.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return sB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ga;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ga||(Ga={}));function sB(e){return"storage/"+e}function WP(){const e="An unknown error occurred, please check the error payload for server response.";return new As(Ga.UNKNOWN,e)}function c1e(e){return new As(Ga.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function u1e(e){return new As(Ga.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function d1e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new As(Ga.UNAUTHENTICATED,e)}function f1e(){return new As(Ga.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function A1e(e){return new As(Ga.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Xee(){return new As(Ga.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Yee(){return new As(Ga.CANCELED,"User canceled the upload/download.")}function h1e(e){return new As(Ga.INVALID_URL,"Invalid URL '"+e+"'.")}function m1e(e){return new As(Ga.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function p1e(){return new As(Ga.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wee+"' property when initializing the app?")}function Jee(){return new As(Ga.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g1e(){return new As(Ga.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function x1e(){return new As(Ga.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v1e(e){return new As(Ga.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pF(e){return new As(Ga.INVALID_ARGUMENT,e)}function Zee(){return new As(Ga.APP_DELETED,"The Firebase app was deleted.")}function b1e(e){return new As(Ga.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function x2(e,t){return new As(Ga.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function fy(e){throw new As(Ga.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=Cl.makeFromUrl(t,r)}catch{return new Cl(t,"")}if(n.path==="")return n;throw m1e(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===Kee?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),_=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<_.length;O++){const j=_[O],B=j.regex.exec(t);if(B){const C=B[j.indices.bucket];let k=B[j.indices.path];k||(k=""),n=new Cl(C,k),j.postModify(n);break}}if(n==null)throw h1e(t);return n}}class y1e{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1e(e,t,r){let n=1,a=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function h(){s&&clearTimeout(s)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||o){h(),d.call(null,v,...y);return}n<64&&(n*=2);let _;l===1?(l=2,_=0):_=(n+Math.random())*1e3,f(_)}let g=!1;function x(v){g||(g=!0,h(),!u&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},r),x}function N1e(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1e(e){return e!==void 0}function C1e(e){return typeof e=="function"}function _1e(e){return typeof e=="object"&&!Array.isArray(e)}function qk(e){return typeof e=="string"||e instanceof String}function oH(e){return XP()&&e instanceof Blob}function XP(){return typeof Blob<"u"}function gF(e,t,r,n){if(n<t)throw pF(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw pF(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function ete(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var tg;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(tg||(tg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tte(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1e{constructor(t,r,n,a,s,o,l,c,u,d,f,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new zE(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===tg.NO_ERROR,c=s.getStatus();if(!l||tte(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===tg.ABORT;n(!1,new zE(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new zE(u,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());E1e(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=WP();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?Zee():Yee();o(c)}else{const c=Xee();o(c)}};this.canceled_?r(!1,new zE(!1,null,!0)):this.backoffId_=w1e(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&N1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zE{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function k1e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function j1e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function B1e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function T1e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function I1e(e,t,r,n,a,s,o=!0,l=!1){const c=ete(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return B1e(d,t),k1e(d,r),j1e(d,s),T1e(d,n),new S1e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function O1e(...e){const t=F1e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(XP())return new Blob(e);throw new As(Ga.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function D1e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1e(e){if(typeof atob>"u")throw v1e("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class iB{constructor(t,r){this.data=t,this.contentType=r||null}}function R1e(e,t){switch(e){case Wf.RAW:return new iB(rte(t));case Wf.BASE64:case Wf.BASE64URL:return new iB(nte(e,t));case Wf.DATA_URL:return new iB(M1e(t),U1e(t))}throw WP()}function rte(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,o=e.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function L1e(e){let t;try{t=decodeURIComponent(e)}catch{throw x2(Wf.DATA_URL,"Malformed data URL.")}return rte(t)}function nte(e,t){switch(e){case Wf.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw x2(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Wf.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw x2(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=P1e(t)}catch(a){throw a.message.includes("polyfill")?a:x2(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class ate{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw x2(Wf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Q1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function M1e(e){const t=new ate(e);return t.base64?nte(Wf.BASE64,t.rest):L1e(t.rest)}function U1e(e){return new ate(e).contentType}function Q1e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,r){let n=0,a="";oH(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(oH(this.data_)){const n=this.data_,a=D1e(n,t,r);return a===null?null:new eh(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new eh(n,!0)}}static getBlob(...t){if(XP()){const r=t.map(n=>n instanceof eh?n.data_:n);return new eh(O1e.apply(null,r))}else{const r=t.map(o=>qk(o)?R1e(Wf.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[s++]=o[l]}),new eh(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(e){let t;try{t=JSON.parse(e)}catch{return null}return _1e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function V1e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function ste(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1e(e,t){return t}class xl{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||z1e}}let $E=null;function $1e(e){return!qk(e)||e.length<2?e:ste(e)}function JP(){if($E)return $E;const e=[];e.push(new xl("bucket")),e.push(new xl("generation")),e.push(new xl("metageneration")),e.push(new xl("name","fullPath",!0));function t(s,o){return $1e(o)}const r=new xl("name");r.xform=t,e.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new xl("size");return a.xform=n,e.push(a),e.push(new xl("timeCreated")),e.push(new xl("updated")),e.push(new xl("md5Hash",null,!0)),e.push(new xl("cacheControl",null,!0)),e.push(new xl("contentDisposition",null,!0)),e.push(new xl("contentEncoding",null,!0)),e.push(new xl("contentLanguage",null,!0)),e.push(new xl("contentType",null,!0)),e.push(new xl("metadata","customMetadata",!0)),$E=e,$E}function G1e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new Cl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function q1e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,t[o.server])}return G1e(n,e),n}function ite(e,t,r){const n=YP(t);return n===null?null:q1e(e,n,r)}function K1e(e,t,r,n){const a=YP(t);if(a===null||!qk(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+o(d)+"/o/"+o(f),m=Gg(h,r,n),g=ete({alt:"media",token:u});return m+g})[0]}function ote(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH="prefixes",cH="items";function W1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[lH])for(const a of r[lH]){const s=a.replace(/\/$/,""),o=e._makeStorageReference(new Cl(t,s));n.prefixes.push(o)}if(r[cH])for(const a of r[cH]){const s=e._makeStorageReference(new Cl(t,a.name));n.items.push(s)}return n}function X1e(e,t,r){const n=YP(r);return n===null?null:W1e(e,t,n)}class Wm{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(e){if(!e)throw WP()}function ZP(e,t){function r(n,a){const s=ite(e,a,t);return sA(s!==null),s}return r}function Y1e(e,t){function r(n,a){const s=X1e(e,t,a);return sA(s!==null),s}return r}function J1e(e,t){function r(n,a){const s=ite(e,a,t);return sA(s!==null),K1e(s,a,e.host,e._protocol)}return r}function Zb(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=f1e():a=d1e():r.getStatus()===402?a=u1e(e.bucket):r.getStatus()===403?a=A1e(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function eR(e){const t=Zb(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=c1e(e.path)),s.serverResponse=a.serverResponse,s}return r}function Z1e(e,t,r){const n=t.fullServerUrl(),a=Gg(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Wm(a,s,ZP(e,r),o);return l.errorHandler=eR(t),l}function eye(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const o=t.bucketOnlyServerUrl(),l=Gg(o,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Wm(l,c,Y1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=Zb(t),d}function tye(e,t,r){const n=t.fullServerUrl(),a=Gg(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Wm(a,s,J1e(e,r),o);return l.errorHandler=eR(t),l}function rye(e,t){const r=t.fullServerUrl(),n=Gg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function o(c,u){}const l=new Wm(n,a,o,s);return l.successCodes=[200,204],l.errorHandler=eR(t),l}function nye(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function lte(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=nye(null,t)),n}function cte(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let O=0;O<2;O++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=lte(t,n,a),d=ote(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=eh.getBlob(f,n,h);if(m===null)throw Jee();const g={name:u.fullPath},x=Gg(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,w=new Wm(x,v,ZP(e,r),y);return w.urlParams=g,w.headers=o,w.body=m.uploadData(),w.errorHandler=Zb(t),w}class E_{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function tR(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{sA(!1)}return sA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function aye(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o=lte(t,n,a),l={name:o.fullPath},c=Gg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=ote(o,r),h=e.maxUploadRetryTime;function m(x){tR(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{sA(!1)}return sA(qk(v)),v}const g=new Wm(c,u,m,h);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=Zb(t),g}function sye(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=tR(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{sA(!1)}f||sA(!1);const h=Number(f);return sA(!isNaN(h)),new E_(h,n.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new Wm(r,o,s,l);return c.headers=a,c.errorHandler=Zb(t),c}const uH=256*1024;function iye(e,t,r,n,a,s,o,l){const c=new E_(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw g1e();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw Jee();function v(O,j){const B=tR(O,["active","final"]),C=c.current+d,k=n.size();let T;return B==="final"?T=ZP(t,s)(O,j):T=null,new E_(C,k,B==="final",T)}const y="POST",w=t.maxUploadRetryTime,_=new Wm(r,y,v,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=l||null,_.errorHandler=Zb(e),_}const Jl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oB(e){switch(e){case"running":case"pausing":case"canceling":return Jl.RUNNING;case"paused":return Jl.PAUSED;case"success":return Jl.SUCCESS;case"canceled":return Jl.CANCELED;case"error":return Jl.ERROR;default:return Jl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oye{constructor(t,r,n){if(C1e(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class lye{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tg.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tg.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tg.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw fy("cannot .send() more than once");if(Hh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw fy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class cye extends lye{initXhr(){this.xhr_.responseType="text"}}function th(){return new cye}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uye{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=JP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Ga.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(tte(a.status,[]))if(s)a=Xee();else{this.sleepTime=Math.max(this.sleepTime*2,l1e),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Ga.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=aye(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,th,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=sye(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,th,r,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=uH*this._chunkMultiplier,r=new E_(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let o;try{o=iye(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,th,a,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){uH*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=Z1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,th,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=cte(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,th,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Yee(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=oB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new oye(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(oB(this._state)){case Jl.SUCCESS:Ox(this._resolve.bind(null,this.snapshot))();break;case Jl.CANCELED:case Jl.ERROR:const r=this._reject;Ox(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(oB(this._state)){case Jl.RUNNING:case Jl.PAUSED:t.next&&Ox(t.next.bind(t,this.snapshot))();break;case Jl.SUCCESS:t.complete&&Ox(t.complete.bind(t))();break;case Jl.CANCELED:case Jl.ERROR:t.error&&Ox(t.error.bind(t,this._error))();break;default:t.error&&Ox(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t,r){this._service=t,r instanceof Cl?this._location=r:this._location=Cl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new wg(t,r)}get root(){const t=new Cl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ste(this._location.path)}get storage(){return this._service}get parent(){const t=H1e(this._location.path);if(t===null)return null;const r=new Cl(this._location.bucket,t);return new wg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw b1e(t)}}function dye(e,t,r){e._throwIfRoot("uploadBytes");const n=cte(e.storage,e._location,JP(),new eh(t,!0),r);return e.storage.makeRequestWithTokens(n,th).then(a=>({metadata:a,ref:e}))}function fye(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new uye(e,new eh(t),r)}function Aye(e){const t={prefixes:[],items:[]};return ute(e,t).then(()=>t)}async function ute(e,t,r){const a=await hye(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await ute(e,t,a.nextPageToken)}function hye(e,t){t!=null&&typeof t.maxResults=="number"&&gF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=eye(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,th)}function mye(e){e._throwIfRoot("getDownloadURL");const t=tye(e.storage,e._location,JP());return e.storage.makeRequestWithTokens(t,th).then(r=>{if(r===null)throw x1e();return r})}function pye(e){e._throwIfRoot("deleteObject");const t=rye(e.storage,e._location);return e.storage.makeRequestWithTokens(t,th)}function gye(e,t){const r=V1e(e._location.path,t),n=new Cl(e._location.bucket,r);return new wg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xye(e){return/^[A-Za-z]+:\/\//.test(e)}function vye(e,t){return new wg(e,t)}function dte(e,t){if(e instanceof rR){const r=e;if(r._bucket==null)throw p1e();const n=new wg(r,r._bucket);return t!=null?dte(n,t):n}else return t!==void 0?gye(e,t):e}function bye(e,t){if(t&&xye(t)){if(e instanceof rR)return vye(e,t);throw pF("To use ref(service, url), the first argument must be a Storage instance.")}else return dte(e,t)}function dH(e,t){const r=t==null?void 0:t[Wee];return r==null?null:Cl.makeFromBucketSpec(r,e)}function yye(e,t,r,n={}){e.host=`${t}:${r}`;const a=Hh(t);a&&(pk(`https://${e.host}/b`),gk("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:_J(s,e.app.options.projectId))}class rR{constructor(t,r,n,a,s,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Kee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i1e,this._maxUploadRetryTime=o1e,this._requests=new Set,a!=null?this._bucket=Cl.makeFromBucketSpec(a,this._host):this._bucket=dH(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Cl.makeFromBucketSpec(this._url,t):this._bucket=dH(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){gF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){gF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Uc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new wg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new y1e(Zee());{const o=I1e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const fH="@firebase/storage",AH="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fte="storage";function nR(e,t,r){return e=Gn(e),dye(e,t,r)}function wye(e,t,r){return e=Gn(e),fye(e,t,r)}function Nye(e){return e=Gn(e),Aye(e)}function Kk(e){return e=Gn(e),mye(e)}function Eye(e){return e=Gn(e),pye(e)}function sN(e,t){return e=Gn(e),bye(e,t)}function aR(e=xk(),t){e=Gn(e);const n=Kw(e,fte).getImmediate({identifier:t}),a=eP("storage");return a&&Cye(n,...a),n}function Cye(e,t,r,n={}){yye(e,t,r,n)}function _ye(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new rR(r,n,a,t,Ug)}function Sye(){Sm(new Nh(fte,_ye,"PUBLIC").setMultipleInstances(!0)),Ku(fH,AH,""),Ku(fH,AH,"esm2020")}Sye();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kye="type.googleapis.com/google.protobuf.Int64Value",jye="type.googleapis.com/google.protobuf.UInt64Value";function Ate(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function C_(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>C_(t));if(typeof e=="function"||typeof e=="object")return Ate(e,t=>C_(t));throw new Error("Data cannot be encoded in JSON: "+e)}function db(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case kye:case jye:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>db(t)):typeof e=="function"||typeof e=="object"?Ate(e,t=>db(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ac extends Yd{constructor(t,r,n){super(`${sR}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,ac.prototype)}}function Bye(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function __(e,t){let r=Bye(e),n=r,a;try{const s=t&&t.error;if(s){const o=s.status;if(typeof o=="string"){if(!hH[o])return new ac("internal","internal");r=hH[o],n=o}const l=s.message;typeof l=="string"&&(n=l),a=s.details,a!==void 0&&(a=db(a))}}catch{}return r==="ok"?null:new ac(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tye{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Uc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF="us-central1",Iye=/^data: (.*?)(?:\n|$)/;function Fye(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new ac("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Oye{constructor(t,r,n,a,s=xF,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Tye(t,r,n,a),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=xF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Dye(e,t,r){const n=Hh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(pk(e.emulatorOrigin),gk("Functions",!0))}function Pye(e,t,r){const n=a=>Lye(e,t,a,{});return n.stream=(a,s)=>Uye(e,t,a,s),n}async function Rye(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function hte(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Lye(e,t,r,n){const a=e._url(t);return Mye(e,a,r,n)}async function Mye(e,t,r,n){r=C_(r);const a={data:r},s=await hte(e,n),o=n.timeout||7e4,l=Fye(o),c=await Promise.race([Rye(t,a,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new ac("cancelled","Firebase Functions instance was deleted.");const u=__(c.status,c.json);if(u)throw u;if(!c.json)throw new ac("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ac("internal","Response is missing data field.");return{data:db(d)}}function Uye(e,t,r,n){const a=e._url(t);return Qye(e,a,r,n||{})}async function Qye(e,t,r,n){var h;r=C_(r);const a={data:r},s=await hte(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new ac("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=__(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const m=new ac("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=Hye(d,l,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function Hye(e,t,r,n){const a=(o,l)=>{const c=o.match(Iye);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(db(d.result));return}if("message"in d){l.enqueue(db(d.message));return}if("error"in d){const f=__(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof ac){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(n!=null&&n.aborted){const u=new ac("cancelled","Request was cancelled");return o.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&a(l.trim(),o),o.close();return}if(n!=null&&n.aborted){const h=new ac("cancelled","Request was cancelled");o.error(h),r(h),await e.cancel();return}l+=s.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),o);return c()}catch(u){const d=u instanceof ac?u:__(0,null);o.error(d),r(d)}}},cancel(){return e.cancel()}})}const mH="@firebase/functions",pH="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vye="auth-internal",zye="app-check-internal",$ye="messaging-internal";function Gye(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(Vye),o=r.getProvider($ye),l=r.getProvider(zye);return new Oye(a,s,o,l,n)};Sm(new Nh(sR,t,"PUBLIC").setMultipleInstances(!0)),Ku(mH,pH,e),Ku(mH,pH,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(e=xk(),t=xF){const n=Kw(Gn(e),sR).getImmediate({identifier:t}),a=eP("functions");return a&&qye(n,...a),n}function qye(e,t,r){Dye(Gn(e),t,r)}function Td(e,t,r){return Pye(Gn(e),t)}Gye();const Kye={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.appspot.com",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604"},e1=nP(Kye),ao=dZ(e1),pr=MP(e1),iR=aR(e1),oR=Z0(e1,"us-central1"),mte=Object.freeze(Object.defineProperty({__proto__:null,app:e1,auth:ao,db:pr,functions:oR,storage:iR},Symbol.toStringTag,{value:"Module"})),Wye=async(e,t)=>{try{return(await Upe(ao,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},lB=async()=>{try{await Vpe(ao)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},Xye=async e=>{try{await Mpe(ao,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},pte=async e=>{try{const t=Yt(pr,"usuarios",e),r=await kh(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Ht=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Ht||{}),nn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(nn||{}),Mp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Mp||{});const Yye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),Jye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Ps="w-6 h-6",Wk="w-24 h-24",lR=()=>i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),Zye=()=>i.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M9 18h6"}),i.jsx("path",{d:"M10 22h4"}),i.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),e2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),t2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Ky=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Wy=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),gte=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Wk,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),n2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Wk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),a2e=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Wk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Wk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),i2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),gH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),GE=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),cB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),qE=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),uB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),xH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),o2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),l2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),u2e=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),KE=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),d2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),dB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),f2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ps,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),A2e=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ps,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),vH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ps,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),WE=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ps,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),h2e=[{id:Ht.SUBDIRECCION,label:"Subdirección Pedagógica",icon:i.jsx(r2e,{})},{id:Ht.PROFESORADO,label:"Profesorado",icon:i.jsx(n2e,{})},{id:Ht.COORDINACION_TP,label:"Coordinación TP",icon:i.jsx(a2e,{})},{id:Ht.ESTUDIANTE,label:"Estudiantes",icon:i.jsx(s2e,{})}],m2e={[Ht.SUBDIRECCION]:[{name:"Dashboard",icon:i.jsx(i2e,{})},{name:"Administración",icon:i.jsx(u2e,{})},{name:"Seguimiento Curricular",icon:i.jsx(A2e,{})},{name:"Acompañamiento docente",icon:i.jsx(c2e,{})},{name:"Análisis Taxonómico",icon:i.jsx(vH,{})},{name:"SIMCE",icon:i.jsx(WE,{})},{name:"Interdisciplinario",icon:i.jsx(dB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:i.jsx(gH,{})},{name:"Crear horarios",icon:i.jsx(cB,{})},{name:"Seguimiento de acciones pedagógicas",icon:i.jsx(qE,{})},{name:"Inclusión",icon:i.jsx(KE,{})},{name:"Calendario Académico",icon:i.jsx(GE,{})},{name:"Muro de Anuncios",icon:i.jsx(Ky,{})},{name:"Mensajería Interna",icon:i.jsx(Wy,{})},{name:"Generador de Actas",icon:i.jsx(uB,{})}],[Ht.PROFESORADO]:[{name:"Planificación",icon:i.jsx(xH,{})},{name:"Mis Acompañamientos",icon:i.jsx(d2e,{})},{name:"Recursos de Aprendizaje",icon:i.jsx(o2e,{})},{name:"Análisis Taxonómico",icon:i.jsx(vH,{})},{name:"SIMCE",icon:i.jsx(WE,{})},{name:"Interdisciplinario",icon:i.jsx(dB,{})},{name:"Inclusión",icon:i.jsx(KE,{})},{name:"Actividades Remotas",icon:i.jsx(l2e,{})},{name:"Evaluación de Aprendizajes",icon:i.jsx(uB,{})},{name:"Evaluaciones Formativas",icon:i.jsx(qE,{})},{name:"Desarrollo Profesional",icon:i.jsx(KE,{})},{name:"Evaluación de Competencias",icon:i.jsx(Jye,{})},{name:"Calendario Académico",icon:i.jsx(GE,{})},{name:"Muro de Anuncios",icon:i.jsx(Ky,{})},{name:"Mensajería Interna",icon:i.jsx(Wy,{})},{name:"Generador de Actas",icon:i.jsx(gH,{})}],[Ht.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:i.jsx(qE,{})},{name:"Asistencia Dual",icon:i.jsx(cB,{})},{name:"Pañol",icon:i.jsx(f2e,{})},{name:"SIMCE",icon:i.jsx(WE,{})},{name:"Gestión de Empresas",icon:i.jsx(Yye,{})},{name:"Calendario Académico",icon:i.jsx(GE,{})},{name:"Muro de Anuncios",icon:i.jsx(Ky,{})},{name:"Mensajería Interna",icon:i.jsx(Wy,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:i.jsx(KE,{})},{name:"Generador de Actas",icon:i.jsx(uB,{})}],[Ht.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:i.jsx(xH,{})},{name:"Evaluación Formativa",icon:i.jsx(qE,{})},{name:"SIMCE",icon:i.jsx(WE,{})},{name:"Tareas Interdisciplinarias",icon:i.jsx(dB,{})},{name:"Asistencia a Empresa",icon:i.jsx(cB,{})},{name:"Calendario Académico",icon:i.jsx(GE,{})},{name:"Muro de Anuncios",icon:i.jsx(Ky,{})},{name:"Mensajería Interna",icon:i.jsx(Wy,{})}]},XE=["1º Medio","2º Medio","3º Medio","4º Medio"],Ua=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],ks=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],vF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Pv={[nn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[nn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[nn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[nn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},p2e=Object.values(Mp),fB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],AB=["Vinculado","Desvinculado","En proceso","Empresa"],rg=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],g2e=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],S_=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],v2=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],xte=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],YE=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],x2e=["Mecánica Industrial","Mecánica Automotriz"],v2e=["INACAP","UNAB","DUOC","Universidad de Las Américas"],b2e={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},y2e=["Pasantía","Visita","Certificación","Formación en empresa"],w2e={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},N2e={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},rh={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},bH=["Pendiente","En Proceso","Cumplida"],yH=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],E2e=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>l==="forgot"?i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):l==="forgot_sent"?i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),i.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",i.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),i.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>o(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:i.jsx("p",{children:r})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(lR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),i.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},JE=({trigger:e,children:t,onOpen:r})=>{const[n,a]=N.useState(!1),s=N.useRef(null),o=()=>{const c=!n;a(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return N.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),i.jsxs("div",{className:"relative",ref:s,children:[i.jsx("div",{onClick:o,children:e}),n&&i.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},wH="usuariosLiceo",C2e=({user:e,onClose:t,onSave:r})=>{const[n,a]=N.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{a({...n,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(wH);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(wH,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:i.jsxs("form",{onSubmit:o,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),i.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),i.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},NH="usuariosLiceo",_2e=({user:e,onClose:t,onSave:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(NH);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(NH,JSON.stringify(m)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>o(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:i.jsx("p",{children:l})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k2e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),EH=e=>{const t=k2e(e);return t.charAt(0).toUpperCase()+t.slice(1)},vte=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),j2e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B2e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2e=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...B2e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:vte("lucide",a),...!s&&!j2e(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=(e,t)=>{const r=N.forwardRef(({className:n,...a},s)=>N.createElement(T2e,{ref:s,iconNode:t,className:vte(`lucide-${S2e(EH(e))}`,`lucide-${e}`,n),...a}));return r.displayName=EH(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],F2e=Pt("activity",I2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2e=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ZE=Pt("arrow-left",O2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2e=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],P2e=Pt("arrow-up-down",D2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2e=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],L2e=Pt("award",R2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],U2e=Pt("bell-ring",M2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2e=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],H2e=Pt("book-marked",Q2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2e=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],z2e=Pt("book-open-check",V2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],vi=Pt("book-open",$2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2e=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],CH=Pt("book",G2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2e=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],K2e=Pt("brain-circuit",q2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2e=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ew=Pt("brain",W2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2e=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],tw=Pt("briefcase",X2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],b2=Pt("building-2",Y2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Z2e=Pt("building",J2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cR=Pt("calculator",ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],rwe=Pt("calendar-check",twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],oc=Pt("calendar",nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const awe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],qc=Pt("chart-column",awe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const swe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],iwe=Pt("chart-line",swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const owe=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],lwe=Pt("chart-no-axes-column-increasing",owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cwe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],bte=Pt("chart-no-axes-column",cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uwe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],y2=Pt("chart-pie",uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yte=Pt("check",dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fwe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_H=Pt("chevron-down",fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Awe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rw=Pt("chevron-left",Awe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hwe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],uR=Pt("chevron-right",hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wu=Pt("circle-alert",mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dR=Pt("circle-check-big",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ha=Pt("circle-check",gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],eC=Pt("circle-plus",xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wte=Pt("circle-question-mark",vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],nw=Pt("circle-x",bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ywe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],wwe=Pt("clipboard-check",ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ng=Pt("clipboard-list",Nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ewe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Fd=Pt("clock",Ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cwe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jh=Pt("download",Cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _we=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],hB=Pt("external-link",_we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Swe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nte=Pt("eye",Swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],jwe=Pt("factory",kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bwe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],bF=Pt("file-check",Bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Twe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Iwe=Pt("file-down",Twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],Owe=Pt("file-pen",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dwe=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],Pwe=Pt("file-play",Dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rwe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],fR=Pt("file-spreadsheet",Rwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lwe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zd=Pt("file-text",Lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mwe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],mB=Pt("files",Mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],Qwe=Pt("folder-closed",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hwe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],SH=Pt("folder-open",Hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Xk=Pt("funnel",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zwe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],k_=Pt("gauge",zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $we=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Eg=Pt("graduation-cap",$we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],qwe=Pt("hash",Gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kwe=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Ete=Pt("hourglass",Kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wwe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Xwe=Pt("image",Wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ywe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Jwe=Pt("info",Ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zwe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Cte=Pt("layout-dashboard",Zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eNe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],AR=Pt("layers",eNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tNe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],rNe=Pt("layout-grid",tNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nNe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],aNe=Pt("layout-list",nNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sNe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],kH=Pt("link-2",sNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iNe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],oNe=Pt("link",iNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lNe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Rv=Pt("list-checks",lNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cNe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],El=Pt("loader-circle",cNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uNe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],dNe=Pt("mail",uNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fNe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],j_=Pt("map-pin",fNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ANe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],hNe=Pt("megaphone",ANe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mNe=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],pNe=Pt("menu",mNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gNe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],_te=Pt("message-square",gNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xNe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],jH=Pt("notebook-pen",xNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vNe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],bNe=Pt("palette",vNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yNe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],B_=Pt("pen-line",yNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wNe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],hR=Pt("pencil",wNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NNe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],ENe=Pt("percent",NNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CNe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],So=Pt("plus",CNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ne=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],yF=Pt("presentation",_Ne);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SNe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],kNe=Pt("puzzle",SNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jNe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],wF=Pt("refresh-ccw",jNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BNe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gm=Pt("refresh-cw",BNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TNe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],INe=Pt("route",TNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FNe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],ONe=Pt("ruler",FNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DNe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yc=Pt("save",DNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PNe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],am=Pt("school",PNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RNe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],BH=Pt("scroll-text",RNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LNe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],t1=Pt("search",LNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MNe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],UNe=Pt("send",MNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QNe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],HNe=Pt("settings",QNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VNe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zNe=Pt("shield-check",VNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ne=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ng=Pt("sparkles",$Ne);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GNe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ih=Pt("square-pen",GNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qNe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],NF=Pt("square-plus",qNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KNe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],WNe=Pt("star",KNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XNe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fb=Pt("target",XNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YNe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Va=Pt("trash-2",YNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JNe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],T_=Pt("trending-up",JNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZNe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aw=Pt("triangle-alert",ZNe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],tEe=Pt("university",eEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rEe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],r1=Pt("upload",rEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nEe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],TH=Pt("user-cog",nEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],IH=Pt("user-minus",aEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],I_=Pt("user-plus",sEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iEe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sw=Pt("user",iEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oEe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Ay=Pt("users-round",oEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ro=Pt("users",lEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cEe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Up=Pt("video",cEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uEe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],dEe=Pt("wand-sparkles",uEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fEe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],_5=Pt("wrench",fEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AEe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uA=Pt("x",AEe);async function hEe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:ya()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await on(mt(pr,"notificaciones"),t)).id}function mEe(e,t){const r=[];let n=[],a=[];const s=()=>{const o=new Map;[...n,...a].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const o=Lt(mt(pr,"notificaciones"),dr("docenteEmailLower","==",e.email.toLowerCase()),Jt("createdAt","desc"));r.push(lr(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const o=Lt(mt(pr,"notificaciones"),dr("docenteNombre","==",e.nombreCompleto),Jt("createdAt","desc"));r.push(lr(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(o=>o())}async function pEe(e){const t=Yt(pr,"notificaciones",e);await dl(t,{leida:!0})}async function gEe(e){const t=Yt(pr,"notificaciones",e);await wa(t)}const FH="anunciosMuro",OH="mensajesInternos",DH="lir-read-status",xEe=({user:e})=>{if(e.fotoUrl)return i.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return i.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},vEe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=N.useState([]),[f,h]=N.useState([]),[m,g]=N.useState(!1),[x,v]=N.useState(!1),[y,w]=N.useState([]),_=N.useCallback(()=>{try{const T=localStorage.getItem(`${DH}-${e.id}`);return T?JSON.parse(T):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),O=N.useCallback(T=>{try{localStorage.setItem(`${DH}-${e.id}`,JSON.stringify(T))}catch(L){console.error("Failed to set read status:",L)}},[e.id]);N.useEffect(()=>{const T=JSON.parse(localStorage.getItem(FH)||"[]"),L=_();d(T.filter(S=>!L.announcements.includes(S.id)));const R=JSON.parse(localStorage.getItem(OH)||"[]");h(R.filter(S=>S.para===e.email).sort((S,U)=>new Date(U.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[e.id,_,l]),N.useEffect(()=>{if(!(e!=null&&e.email))return;const T=mEe({email:e.email,nombreCompleto:e.nombreCompleto},L=>{const R=L.filter(S=>S.tipo&&(S.tipo.toLowerCase()==="pie"||S.tipo==="nueva_intervencion"));w(R)});return()=>T()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const j=()=>{const T=_(),L=JSON.parse(localStorage.getItem(FH)||"[]").map(R=>R.id);T.announcements=L,O(T),d([])},B=()=>{const T=_(),R=JSON.parse(localStorage.getItem(OH)||"[]").filter(S=>S.para===e.email).map(S=>S.id);T.messages=[...new Set([...T.messages,...R])],O(T),c()},C=y.filter(T=>!T.leida).length,k=T=>{var L;try{const R=(L=T.createdAt)!=null&&L.toDate?T.createdAt.toDate():new Date(T.createdAt);return R?R.toLocaleString("es-CL"):""}catch{return""}};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:i.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:i.jsx(e2e,{})}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:i.jsx(t2e,{})})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(JE,{onOpen:j,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[i.jsx(Ky,{}),u.length>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),i.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(T=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("p",{className:"font-bold dark:text-slate-200",children:T.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:T.mensaje})]},T.id)),u.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),i.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),i.jsx(JE,{trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[i.jsx(kNe,{className:"w-5 h-5"}),C>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:C})]}),children:i.jsxs("div",{className:"p-2 w-80",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),i.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&i.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(T=>i.jsx("li",{className:"p-2 text-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:T.titulo}),i.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:T.mensaje}),T.estudianteNombre&&i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",i.jsx("b",{children:T.estudianteNombre})]}),i.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:k(T)})]}),i.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!T.leida&&i.jsx("button",{onClick:()=>T.id&&pEe(T.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),i.jsx("button",{onClick:()=>T.id&&gEe(T.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},T.id))]})]})}),i.jsx(JE,{onOpen:B,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[i.jsx(Wy,{}),l>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),i.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(T=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",T.de]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:T.asunto})]},T.id)),f.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),i.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),i.jsx(JE,{trigger:i.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(xEe,{user:e})}),children:i.jsxs("div",{className:"p-2",children:[i.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),i.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&i.jsx("li",{children:i.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),i.jsx("li",{children:i.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&i.jsx(C2e,{user:e,onClose:()=>g(!1),onSave:n}),x&&i.jsx(_2e,{user:e,onClose:()=>v(!1),onSave:n})]})},bEe={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604",measurementId:void 0},mR=M9().length?M9()[0]:nP(bEe),st=MP(mR),F_=dZ(mR),Ste=aR(mR),pR=Object.freeze(Object.defineProperty({__proto__:null,auth:F_,db:st,storage:Ste},Symbol.toStringTag,{value:"Module"})),Yk="reemplazos_docentes",yEe="usuarios",kte=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},wEe=e=>{const t=e.data();return{id:e.id,...t}},NEe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:nr.fromDate(new Date),fechaActualizacion:nr.fromDate(new Date)};return(await on(mt(st,Yk),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},EEe=async(e,t)=>{try{const r=Yt(st,Yk,e),n=await kh(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await wa(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},CEe=(e,t,r=50)=>{try{const n=Lt(mt(st,Yk),dr("userId","==",e),Jt("diaAusencia","desc"),Vd(r));return lr(n,a=>{const s=a.docs.map(kte);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},_Ee=e=>{try{const t=Lt(mt(st,yEe),dr("profile","==",Ht.PROFESORADO));return lr(t,n=>{const a=n.docs.map(wEe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},SEe=async(e,t)=>{try{if(!t.trim())return[];const r=Lt(mt(st,Yk),dr("userId","==",e),Jt("diaAusencia","desc"),Vd(100)),a=(await Mr(r)).docs.map(kte),s=t.toLowerCase();return a.filter(o=>o.docenteAusente.toLowerCase().includes(s)||o.docenteReemplazante.toLowerCase().includes(s)||o.curso.toLowerCase().includes(s)||o.diaAusencia.includes(s)||o.asignaturaAusente.toLowerCase().includes(s)||o.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var O_={};O_.version="0.18.5";var jte=1252,kEe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],gR={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},xR=function(e){kEe.indexOf(e)!=-1&&(jte=gR[0]=e)};function jEe(){xR(1252)}var Ld=function(e){xR(e)};function vR(){Ld(1200),jEe()}function PH(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function BEe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Bte(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Xy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?BEe(e.slice(2)):t==254&&r==255?Bte(e.slice(2)):t==65279?e.slice(1):e},tC=function(t){return String.fromCharCode(t)},RH=function(t){return String.fromCharCode(t)},iw,sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ow(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=sm.charAt(s)+sm.charAt(o)+sm.charAt(l)+sm.charAt(c);return t}function Jc(e){var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=sm.indexOf(e.charAt(u++)),o=sm.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=sm.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=sm.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var dn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),zh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Om(e){return dn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function LH(e){return dn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Hc=function(t){return dn?zh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Jk(e){if(typeof ArrayBuffer>"u")return Hc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Xm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function TEe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function bR(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return bR(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Zi=dn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:zh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function IEe(e){for(var t=[],r=0,n=e.length+250,a=Om(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Om(65535),n=65530)}return t.push(a.slice(0,r)),Zi(t)}var jl=/\u0000/g,Yy=/[\u0001-\u0006]/g;function Lv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Md(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}function yR(e,t){var r=""+e;return r.length>=t?r:js(" ",t-r.length)+r}function D_(e,t){var r=""+e;return r.length>=t?r:r+js(" ",t-r.length)}function FEe(e,t){var r=""+Math.round(e);return r.length>=t?r:js("0",t-r.length)+r}function OEe(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}var MH=Math.pow(2,32);function Dx(e,t){if(e>MH||e<-MH)return FEe(e,t);var r=Math.round(e);return OEe(r,t)}function P_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var UH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],pB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function DEe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Ir={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},QH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},PEe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function R_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Gp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=HEe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var Tte=new Date(1899,11,31,0,0,0),REe=Tte.getTime(),LEe=new Date(1900,2,1,0,0,0);function Ite(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=LEe&&(r+=1440*60*1e3),(r-(REe+(e.getTimezoneOffset()-Tte.getTimezoneOffset())*6e4))/(1440*60*1e3)}function wR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function MEe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function UEe(e){var t=e<0?12:11,r=wR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function QEe(e){var t=wR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function lw(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=UEe(e):t===10?r=e.toFixed(10).substr(0,12):r=QEe(e),wR(MEe(r.toUpperCase()))}function Cg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):lw(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Yu(14,Ite(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function HEe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function VEe(e,t,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return pB[r.m-1][1];case 5:return pB[r.m-1][0];default:return pB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return UH[r.q][0];default:return UH[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Md(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(a=Md(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Md(c,u):"";return d}function im(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Fte=/%/g;function zEe(e,t,r){var n=t.replace(Fte,""),a=t.length-n.length;return ph(e,n,r*Math.pow(10,2*a))+js("%",a)}function $Ee(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ph(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Ote(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Ote(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Dte=/# (\?+)( ?)\/( ?)(\d+)/;function GEe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?js(" ",e[1].length+1+e[4].length):yR(o,e[1].length)+e[2]+"/"+e[3]+Md(l,e[4].length))}function qEe(e,t,r){return r+(t===0?"":""+t)+js(" ",e[1].length+2+e[4].length)}var Pte=/^#*0*\.([0#]+)/,Rte=/\).*[0#]/,Lte=/\(###\) ###\\?-####/;function yl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function HH(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function VH(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function KEe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function WEe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Fu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Rte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Fu("n",n,r):"("+Fu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return $Ee(e,t,r);if(t.indexOf("%")!==-1)return zEe(e,t,r);if(t.indexOf("E")!==-1)return Ote(t,r);if(t.charCodeAt(0)===36)return"$"+Fu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Dx(c,t.length);if(t.match(/^[#?]+$/))return a=Dx(r,0),a==="0"&&(a=""),a.length>t.length?a:yl(t.substr(0,t.length-a.length))+a;if(s=t.match(Dte))return GEe(s,c,u);if(t.match(/^#+0+$/))return u+Dx(c,t.length-t.indexOf("0"));if(s=t.match(Pte))return a=HH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+yl(s[1])).replace(/\.$/,"."+yl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+js("0",yl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+HH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+im(Dx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Fu(e,t,-r):im(""+(Math.floor(r)+KEe(r,s[1].length)))+"."+Md(VH(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Fu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Lv(Fu(e,t.replace(/[\\-]/g,""),r)),o=0,Lv(Lv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Lte))return a=Fu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=R_(c,Math.pow(10,o)-1,!1),a=""+u,d=ph("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=D_(l[2],o),d.length<s[4].length&&(d=yl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=R_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?yR(l[1],o)+s[2]+"/"+s[3]+D_(l[2],o):js(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Dx(r,0),t.length<=a.length?a:yl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return yl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=VH(r,s[1].length),r<0?"-"+Fu(e,t,-r):im(WEe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Md(0,3-g.length):"")+g})+"."+Md(o,s[1].length);switch(t){case"###,##0.00":return Fu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=im(Dx(c,0));return m!=="0"?u+m:"";case"###,###.00":return Fu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Fu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function XEe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ph(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function YEe(e,t,r){var n=t.replace(Fte,""),a=t.length-n.length;return ph(e,n,r*Math.pow(10,2*a))+js("%",a)}function Mte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Mte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Lf(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Rte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Lf("n",n,r):"("+Lf("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return XEe(e,t,r);if(t.indexOf("%")!==-1)return YEe(e,t,r);if(t.indexOf("E")!==-1)return Mte(t,r);if(t.charCodeAt(0)===36)return"$"+Lf(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Md(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:yl(t.substr(0,t.length-a.length))+a;if(s=t.match(Dte))return qEe(s,c,u);if(t.match(/^#+0+$/))return u+Md(c,t.length-t.indexOf("0"));if(s=t.match(Pte))return a=(""+r).replace(/^([^\.]+)$/,"$1."+yl(s[1])).replace(/\.$/,"."+yl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+js("0",yl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+im(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Lf(e,t,-r):im(""+r)+"."+js("0",s[1].length);if(s=t.match(/^#,#*,#0/))return Lf(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Lv(Lf(e,t.replace(/[\\-]/g,""),r)),o=0,Lv(Lv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Lte))return a=Lf(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=R_(c,Math.pow(10,o)-1,!1),a=""+u,d=ph("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=D_(l[2],o),d.length<s[4].length&&(d=yl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=R_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?yR(l[1],o)+s[2]+"/"+s[3]+D_(l[2],o):js(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:yl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return yl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Lf(e,t,-r):im(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Md(0,3-g.length):"")+g})+"."+Md(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=im(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return Lf(e,t.slice(0,t.lastIndexOf(".")),r)+yl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ph(e,t,r){return(r|0)===r?Lf(e,t,r):Fu(e,t,r)}function JEe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Ute=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function n1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":P_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Ute))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ZEe(e,t,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!P_(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Gp(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Gp(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"上":var x={t:l,v:l};if(u==null&&(u=Gp(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",o+=5,h="h"):(x.t="t",++o),u==null&&x.t==="T")return"";a[a.length]=x,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Ute)){if(u==null&&(u=Gp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",n1(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var v=0,y=0,w;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=h,c="h",v<1&&(v=1);break;case"s":(w=a[o].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[o].v.match(/[Hh]/)&&(v=1),v<2&&a[o].v.match(/[Mm]/)&&(v=2),v<3&&a[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",O;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=VEe(a[o].t.charCodeAt(0),a[o].v,u,y),a[o].t="t";break;case"n":case"?":for(O=o+1;a[O]!=null&&((l=a[O].t)==="?"||l==="D"||(l===" "||l==="t")&&a[O+1]!=null&&(a[O+1].t==="?"||a[O+1].t==="t"&&a[O+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[O].v==="/"||a[O].v===" "&&a[O+1]!=null&&a[O+1].t=="?"));)a[o].v+=a[O].v,a[O]={v:"",t:";"},++O;_+=a[o].v,o=O-1;break;case"G":a[o].t="t",a[o].v=Cg(t,r);break}var j="",B,C;if(_.length>0){_.charCodeAt(0)==40?(B=t<0&&_.charCodeAt(0)===45?-t:t,C=ph("n",_,B)):(B=t<0&&n>1?-t:t,C=ph("n",_,B),B<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),O=C.length-1;var k=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){k=o;break}var T=a.length;if(k===a.length&&C.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(O>=a[o].v.length-1?(O-=a[o].v.length,a[o].v=C.substr(O+1,a[o].v.length)):O<0?a[o].v="":(a[o].v=C.substr(0,O+1),O=-1),a[o].t="t",T=o);O>=0&&T<a.length&&(a[T].v=C.substr(0,O+1)+a[T].v)}else if(k!==a.length&&C.indexOf("E")===-1){for(O=C.indexOf(".")-1,o=k;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===k?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)O>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=C.charAt(O--)+j);a[o].v=j,a[o].t="t",T=o}for(O>=0&&T<a.length&&(a[T].v=C.substr(0,O+1)+a[T].v),O=C.indexOf(".")+1,o=k;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==k)){for(d=a[o].v.indexOf(".")>-1&&o===k?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)O<C.length&&(j+=C.charAt(O++));a[o].v=j,a[o].t="t",T=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(B=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=ph(a[o].t,a[o].v,B),a[o].t="t");var L="";for(o=0;o!==a.length;++o)a[o]!=null&&(L+=a[o].v);return L}var zH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function $H(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function eCe(e,t){var r=JEe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(zH),l=r[1].match(zH);return $H(t,o)?[n,r[0]]:$H(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Yu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ir)[e],n==null&&(n=r.table&&r.table[QH[e]]||Ir[QH[e]]),n==null&&(n=PEe[e]||"General");break}if(P_(n,0))return Cg(t,r);t instanceof Date&&(t=Ite(t,r.date1904));var a=eCe(n,t);if(P_(a[1]))return Cg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ZEe(a[1],t,r,a[0])}function gh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Ir[r]==null){t<0&&(t=r);continue}if(Ir[r]==e){t=r;break}}t<0&&(t=391)}return Ir[t]=e,t}function Zk(e){for(var t=0;t!=392;++t)e[t]!==void 0&&gh(e[t],t)}function a1(){Ir=DEe()}var tCe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Qte=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function rCe(e){var t=typeof e=="number"?Ir[e]:e;return t=t.replace(Qte,"(\\d+)"),new RegExp("^"+t+"$")}function nCe(e,t,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(t.match(Qte)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var aCe=function(){var e={};e.version="1.2.0";function t(){for(var C=0,k=new Array(256),T=0;T!=256;++T)C=T,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,k[T]=C;return typeof Int32Array<"u"?new Int32Array(k):k}var r=t();function n(C){var k=0,T=0,L=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)R[L]=C[L];for(L=0;L!=256;++L)for(T=C[L],k=256+L;k<4096;k+=256)T=R[k]=T>>>8^C[T&255];var S=[];for(L=1;L!=16;++L)S[L-1]=typeof Int32Array<"u"?R.subarray(L*256,L*256+256):R.slice(L*256,L*256+256);return S}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],w=a[13],_=a[14];function O(C,k){for(var T=k^-1,L=0,R=C.length;L<R;)T=T>>>8^r[(T^C.charCodeAt(L++))&255];return~T}function j(C,k){for(var T=k^-1,L=C.length-15,R=0;R<L;)T=_[C[R++]^T&255]^w[C[R++]^T>>8&255]^y[C[R++]^T>>16&255]^v[C[R++]^T>>>24]^x[C[R++]]^g[C[R++]]^m[C[R++]]^h[C[R++]]^f[C[R++]]^d[C[R++]]^u[C[R++]]^c[C[R++]]^l[C[R++]]^o[C[R++]]^s[C[R++]]^r[C[R++]];for(L+=15;R<L;)T=T>>>8^r[(T^C[R++])&255];return~T}function B(C,k){for(var T=k^-1,L=0,R=C.length,S=0,U=0;L<R;)S=C.charCodeAt(L++),S<128?T=T>>>8^r[(T^S)&255]:S<2048?(T=T>>>8^r[(T^(192|S>>6&31))&255],T=T>>>8^r[(T^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,U=C.charCodeAt(L++)&1023,T=T>>>8^r[(T^(240|S>>8&7))&255],T=T>>>8^r[(T^(128|S>>2&63))&255],T=T>>>8^r[(T^(128|U>>6&15|(S&3)<<4))&255],T=T>>>8^r[(T^(128|U&63))&255]):(T=T>>>8^r[(T^(224|S>>12&15))&255],T=T>>>8^r[(T^(128|S>>6&63))&255],T=T>>>8^r[(T^(128|S&63))&255]);return~T}return e.table=r,e.bstr=O,e.buf=j,e.str=B,e}(),yr=function(){var t={};t.version="1.2.1";function r(xe,Re){for(var Be=xe.split("/"),Fe=Re.split("/"),me=0,Ae=0,_e=Math.min(Be.length,Fe.length);me<_e;++me){if(Ae=Be[me].length-Fe[me].length)return Ae;if(Be[me]!=Fe[me])return Be[me]<Fe[me]?-1:1}return Be.length-Fe.length}function n(xe){if(xe.charAt(xe.length-1)=="/")return xe.slice(0,-1).indexOf("/")===-1?xe:n(xe.slice(0,-1));var Re=xe.lastIndexOf("/");return Re===-1?xe:xe.slice(0,Re+1)}function a(xe){if(xe.charAt(xe.length-1)=="/")return a(xe.slice(0,-1));var Re=xe.lastIndexOf("/");return Re===-1?xe:xe.slice(Re+1)}function s(xe,Re){typeof Re=="string"&&(Re=new Date(Re));var Be=Re.getHours();Be=Be<<6|Re.getMinutes(),Be=Be<<5|Re.getSeconds()>>>1,xe.write_shift(2,Be);var Fe=Re.getFullYear()-1980;Fe=Fe<<4|Re.getMonth()+1,Fe=Fe<<5|Re.getDate(),xe.write_shift(2,Fe)}function o(xe){var Re=xe.read_shift(2)&65535,Be=xe.read_shift(2)&65535,Fe=new Date,me=Be&31;Be>>>=5;var Ae=Be&15;Be>>>=4,Fe.setMilliseconds(0),Fe.setFullYear(Be+1980),Fe.setMonth(Ae-1),Fe.setDate(me);var _e=Re&31;Re>>>=5;var Me=Re&63;return Re>>>=6,Fe.setHours(Re),Fe.setMinutes(Me),Fe.setSeconds(_e<<1),Fe}function l(xe){No(xe,0);for(var Re={},Be=0;xe.l<=xe.length-4;){var Fe=xe.read_shift(2),me=xe.read_shift(2),Ae=xe.l+me,_e={};switch(Fe){case 21589:Be=xe.read_shift(1),Be&1&&(_e.mtime=xe.read_shift(4)),me>5&&(Be&2&&(_e.atime=xe.read_shift(4)),Be&4&&(_e.ctime=xe.read_shift(4))),_e.mtime&&(_e.mt=new Date(_e.mtime*1e3));break}xe.l=Ae,Re[Fe]=_e}return Re}var c;function u(){return c||(c={})}function d(xe,Re){if(xe[0]==80&&xe[1]==75)return qr(xe,Re);if((xe[0]|32)==109&&(xe[1]|32)==105)return Rs(xe,Re);if(xe.length<512)throw new Error("CFB file size "+xe.length+" < 512");var Be=3,Fe=512,me=0,Ae=0,_e=0,Me=0,Ie=0,ze=[],qe=xe.slice(0,512);No(qe,0);var vt=f(qe);switch(Be=vt[0],Be){case 3:Fe=512;break;case 4:Fe=4096;break;case 0:if(vt[1]==0)return qr(xe,Re);default:throw new Error("Major Version: Expected 3 or 4 saw "+Be)}Fe!==512&&(qe=xe.slice(0,Fe),No(qe,28));var yt=xe.slice(0,Fe);h(qe,Be);var Ut=qe.read_shift(4,"i");if(Be===3&&Ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ut);qe.l+=4,_e=qe.read_shift(4,"i"),qe.l+=4,qe.chk("00100000","Mini Stream Cutoff Size: "),Me=qe.read_shift(4,"i"),me=qe.read_shift(4,"i"),Ie=qe.read_shift(4,"i"),Ae=qe.read_shift(4,"i");for(var kt=-1,Qt=0;Qt<109&&(kt=qe.read_shift(4,"i"),!(kt<0));++Qt)ze[Qt]=kt;var Nr=m(xe,Fe);v(Ie,Ae,Nr,Fe,ze);var Jr=w(Nr,_e,ze,Fe);Jr[_e].name="!Directory",me>0&&Me!==U&&(Jr[Me].name="!MiniFAT"),Jr[ze[0]].name="!FAT",Jr.fat_addrs=ze,Jr.ssz=Fe;var Zr={},an=[],ps=[],ko=[];_(_e,Jr,Nr,an,me,Zr,ps,Me),g(ps,ko,an),an.shift();var gs={FileIndex:ps,FullPaths:ko};return Re&&Re.raw&&(gs.raw={header:yt,sectors:Nr}),gs}function f(xe){if(xe[xe.l]==80&&xe[xe.l+1]==75)return[0,0];xe.chk(Q,"Header Signature: "),xe.l+=16;var Re=xe.read_shift(2,"u");return[xe.read_shift(2,"u"),Re]}function h(xe,Re){var Be=9;switch(xe.l+=2,Be=xe.read_shift(2)){case 9:if(Re!=3)throw new Error("Sector Shift: Expected 9 saw "+Be);break;case 12:if(Re!=4)throw new Error("Sector Shift: Expected 12 saw "+Be);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Be)}xe.chk("0600","Mini Sector Shift: "),xe.chk("000000000000","Reserved: ")}function m(xe,Re){for(var Be=Math.ceil(xe.length/Re)-1,Fe=[],me=1;me<Be;++me)Fe[me-1]=xe.slice(me*Re,(me+1)*Re);return Fe[Be-1]=xe.slice(Be*Re),Fe}function g(xe,Re,Be){for(var Fe=0,me=0,Ae=0,_e=0,Me=0,Ie=Be.length,ze=[],qe=[];Fe<Ie;++Fe)ze[Fe]=qe[Fe]=Fe,Re[Fe]=Be[Fe];for(;Me<qe.length;++Me)Fe=qe[Me],me=xe[Fe].L,Ae=xe[Fe].R,_e=xe[Fe].C,ze[Fe]===Fe&&(me!==-1&&ze[me]!==me&&(ze[Fe]=ze[me]),Ae!==-1&&ze[Ae]!==Ae&&(ze[Fe]=ze[Ae])),_e!==-1&&(ze[_e]=Fe),me!==-1&&Fe!=ze[Fe]&&(ze[me]=ze[Fe],qe.lastIndexOf(me)<Me&&qe.push(me)),Ae!==-1&&Fe!=ze[Fe]&&(ze[Ae]=ze[Fe],qe.lastIndexOf(Ae)<Me&&qe.push(Ae));for(Fe=1;Fe<Ie;++Fe)ze[Fe]===Fe&&(Ae!==-1&&ze[Ae]!==Ae?ze[Fe]=ze[Ae]:me!==-1&&ze[me]!==me&&(ze[Fe]=ze[me]));for(Fe=1;Fe<Ie;++Fe)if(xe[Fe].type!==0){if(Me=Fe,Me!=ze[Me])do Me=ze[Me],Re[Fe]=Re[Me]+"/"+Re[Fe];while(Me!==0&&ze[Me]!==-1&&Me!=ze[Me]);ze[Fe]=-1}for(Re[0]+="/",Fe=1;Fe<Ie;++Fe)xe[Fe].type!==2&&(Re[Fe]+="/")}function x(xe,Re,Be){for(var Fe=xe.start,me=xe.size,Ae=[],_e=Fe;Be&&me>0&&_e>=0;)Ae.push(Re.slice(_e*S,_e*S+S)),me-=S,_e=Qp(Be,_e*4);return Ae.length===0?Nt(0):Zi(Ae).slice(0,xe.size)}function v(xe,Re,Be,Fe,me){var Ae=U;if(xe===U){if(Re!==0)throw new Error("DIFAT chain shorter than expected")}else if(xe!==-1){var _e=Be[xe],Me=(Fe>>>2)-1;if(!_e)return;for(var Ie=0;Ie<Me&&(Ae=Qp(_e,Ie*4))!==U;++Ie)me.push(Ae);v(Qp(_e,Fe-4),Re-1,Be,Fe,me)}}function y(xe,Re,Be,Fe,me){var Ae=[],_e=[];me||(me=[]);var Me=Fe-1,Ie=0,ze=0;for(Ie=Re;Ie>=0;){me[Ie]=!0,Ae[Ae.length]=Ie,_e.push(xe[Ie]);var qe=Be[Math.floor(Ie*4/Fe)];if(ze=Ie*4&Me,Fe<4+ze)throw new Error("FAT boundary crossed: "+Ie+" 4 "+Fe);if(!xe[qe])break;Ie=Qp(xe[qe],ze)}return{nodes:Ae,data:nV([_e])}}function w(xe,Re,Be,Fe){var me=xe.length,Ae=[],_e=[],Me=[],Ie=[],ze=Fe-1,qe=0,vt=0,yt=0,Ut=0;for(qe=0;qe<me;++qe)if(Me=[],yt=qe+Re,yt>=me&&(yt-=me),!_e[yt]){Ie=[];var kt=[];for(vt=yt;vt>=0;){kt[vt]=!0,_e[vt]=!0,Me[Me.length]=vt,Ie.push(xe[vt]);var Qt=Be[Math.floor(vt*4/Fe)];if(Ut=vt*4&ze,Fe<4+Ut)throw new Error("FAT boundary crossed: "+vt+" 4 "+Fe);if(!xe[Qt]||(vt=Qp(xe[Qt],Ut),kt[vt]))break}Ae[yt]={nodes:Me,data:nV([Ie])}}return Ae}function _(xe,Re,Be,Fe,me,Ae,_e,Me){for(var Ie=0,ze=Fe.length?2:0,qe=Re[xe].data,vt=0,yt=0,Ut;vt<qe.length;vt+=128){var kt=qe.slice(vt,vt+128);No(kt,64),yt=kt.read_shift(2),Ut=jR(kt,0,yt-ze),Fe.push(Ut);var Qt={name:Ut,type:kt.read_shift(1),color:kt.read_shift(1),L:kt.read_shift(4,"i"),R:kt.read_shift(4,"i"),C:kt.read_shift(4,"i"),clsid:kt.read_shift(16),state:kt.read_shift(4,"i"),start:0,size:0},Nr=kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2);Nr!==0&&(Qt.ct=O(kt,kt.l-8));var Jr=kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2);Jr!==0&&(Qt.mt=O(kt,kt.l-8)),Qt.start=kt.read_shift(4,"i"),Qt.size=kt.read_shift(4,"i"),Qt.size<0&&Qt.start<0&&(Qt.size=Qt.type=0,Qt.start=U,Qt.name=""),Qt.type===5?(Ie=Qt.start,me>0&&Ie!==U&&(Re[Ie].name="!StreamData")):Qt.size>=4096?(Qt.storage="fat",Re[Qt.start]===void 0&&(Re[Qt.start]=y(Be,Qt.start,Re.fat_addrs,Re.ssz)),Re[Qt.start].name=Qt.name,Qt.content=Re[Qt.start].data.slice(0,Qt.size)):(Qt.storage="minifat",Qt.size<0?Qt.size=0:Ie!==U&&Qt.start!==U&&Re[Ie]&&(Qt.content=x(Qt,Re[Ie].data,(Re[Me]||{}).data))),Qt.content&&No(Qt.content,0),Ae[Ut]=Qt,_e.push(Qt)}}function O(xe,Re){return new Date((Mc(xe,Re+4)/1e7*Math.pow(2,32)+Mc(xe,Re)/1e7-11644473600)*1e3)}function j(xe,Re){return u(),d(c.readFileSync(xe),Re)}function B(xe,Re){var Be=Re&&Re.type;switch(Be||dn&&Buffer.isBuffer(xe)&&(Be="buffer"),Be||"base64"){case"file":return j(xe,Re);case"base64":return d(Hc(Jc(xe)),Re);case"binary":return d(Hc(xe),Re)}return d(xe,Re)}function C(xe,Re){var Be=Re||{},Fe=Be.root||"Root Entry";if(xe.FullPaths||(xe.FullPaths=[]),xe.FileIndex||(xe.FileIndex=[]),xe.FullPaths.length!==xe.FileIndex.length)throw new Error("inconsistent CFB structure");xe.FullPaths.length===0&&(xe.FullPaths[0]=Fe+"/",xe.FileIndex[0]={name:Fe,type:5}),Be.CLSID&&(xe.FileIndex[0].clsid=Be.CLSID),k(xe)}function k(xe){var Re="Sh33tJ5";if(!yr.find(xe,"/"+Re)){var Be=Nt(4);Be[0]=55,Be[1]=Be[3]=50,Be[2]=54,xe.FileIndex.push({name:Re,type:2,content:Be,size:4,L:69,R:69,C:69}),xe.FullPaths.push(xe.FullPaths[0]+Re),T(xe)}}function T(xe,Re){C(xe);for(var Be=!1,Fe=!1,me=xe.FullPaths.length-1;me>=0;--me){var Ae=xe.FileIndex[me];switch(Ae.type){case 0:Fe?Be=!0:(xe.FileIndex.pop(),xe.FullPaths.pop());break;case 1:case 2:case 5:Fe=!0,isNaN(Ae.R*Ae.L*Ae.C)&&(Be=!0),Ae.R>-1&&Ae.L>-1&&Ae.R==Ae.L&&(Be=!0);break;default:Be=!0;break}}if(!(!Be&&!Re)){var _e=new Date(1987,1,19),Me=0,Ie=Object.create?Object.create(null):{},ze=[];for(me=0;me<xe.FullPaths.length;++me)Ie[xe.FullPaths[me]]=!0,xe.FileIndex[me].type!==0&&ze.push([xe.FullPaths[me],xe.FileIndex[me]]);for(me=0;me<ze.length;++me){var qe=n(ze[me][0]);Fe=Ie[qe],Fe||(ze.push([qe,{name:a(qe).replace("/",""),type:1,clsid:z,ct:_e,mt:_e,content:null}]),Ie[qe]=!0)}for(ze.sort(function(Ut,kt){return r(Ut[0],kt[0])}),xe.FullPaths=[],xe.FileIndex=[],me=0;me<ze.length;++me)xe.FullPaths[me]=ze[me][0],xe.FileIndex[me]=ze[me][1];for(me=0;me<ze.length;++me){var vt=xe.FileIndex[me],yt=xe.FullPaths[me];if(vt.name=a(yt).replace("/",""),vt.L=vt.R=vt.C=-(vt.color=1),vt.size=vt.content?vt.content.length:0,vt.start=0,vt.clsid=vt.clsid||z,me===0)vt.C=ze.length>1?1:-1,vt.size=0,vt.type=5;else if(yt.slice(-1)=="/"){for(Me=me+1;Me<ze.length&&n(xe.FullPaths[Me])!=yt;++Me);for(vt.C=Me>=ze.length?-1:Me,Me=me+1;Me<ze.length&&n(xe.FullPaths[Me])!=n(yt);++Me);vt.R=Me>=ze.length?-1:Me,vt.type=1}else n(xe.FullPaths[me+1]||"")==n(yt)&&(vt.R=me+1),vt.type=2}}}function L(xe,Re){var Be=Re||{};if(Be.fileType=="mad")return Wt(xe,Be);switch(T(xe),Be.fileType){case"zip":return ja(xe,Be)}var Fe=function(Ut){for(var kt=0,Qt=0,Nr=0;Nr<Ut.FileIndex.length;++Nr){var Jr=Ut.FileIndex[Nr];if(Jr.content){var Zr=Jr.content.length;Zr>0&&(Zr<4096?kt+=Zr+63>>6:Qt+=Zr+511>>9)}}for(var an=Ut.FullPaths.length+3>>2,ps=kt+7>>3,ko=kt+127>>7,gs=ps+Qt+an+ko,ni=gs+127>>7,Ls=ni<=109?0:Math.ceil((ni-109)/127);gs+ni+Ls+127>>7>ni;)Ls=++ni<=109?0:Math.ceil((ni-109)/127);var wi=[1,Ls,ni,ko,an,Qt,kt,0];return Ut.FileIndex[0].size=kt<<6,wi[7]=(Ut.FileIndex[0].start=wi[0]+wi[1]+wi[2]+wi[3]+wi[4]+wi[5])+(wi[6]+7>>3),wi}(xe),me=Nt(Fe[7]<<9),Ae=0,_e=0;{for(Ae=0;Ae<8;++Ae)me.write_shift(1,X[Ae]);for(Ae=0;Ae<8;++Ae)me.write_shift(2,0);for(me.write_shift(2,62),me.write_shift(2,3),me.write_shift(2,65534),me.write_shift(2,9),me.write_shift(2,6),Ae=0;Ae<3;++Ae)me.write_shift(2,0);for(me.write_shift(4,0),me.write_shift(4,Fe[2]),me.write_shift(4,Fe[0]+Fe[1]+Fe[2]+Fe[3]-1),me.write_shift(4,0),me.write_shift(4,4096),me.write_shift(4,Fe[3]?Fe[0]+Fe[1]+Fe[2]-1:U),me.write_shift(4,Fe[3]),me.write_shift(-4,Fe[1]?Fe[0]-1:U),me.write_shift(4,Fe[1]),Ae=0;Ae<109;++Ae)me.write_shift(-4,Ae<Fe[2]?Fe[1]+Ae:-1)}if(Fe[1])for(_e=0;_e<Fe[1];++_e){for(;Ae<236+_e*127;++Ae)me.write_shift(-4,Ae<Fe[2]?Fe[1]+Ae:-1);me.write_shift(-4,_e===Fe[1]-1?U:_e+1)}var Me=function(Ut){for(_e+=Ut;Ae<_e-1;++Ae)me.write_shift(-4,Ae+1);Ut&&(++Ae,me.write_shift(-4,U))};for(_e=Ae=0,_e+=Fe[1];Ae<_e;++Ae)me.write_shift(-4,W.DIFSECT);for(_e+=Fe[2];Ae<_e;++Ae)me.write_shift(-4,W.FATSECT);Me(Fe[3]),Me(Fe[4]);for(var Ie=0,ze=0,qe=xe.FileIndex[0];Ie<xe.FileIndex.length;++Ie)qe=xe.FileIndex[Ie],qe.content&&(ze=qe.content.length,!(ze<4096)&&(qe.start=_e,Me(ze+511>>9)));for(Me(Fe[6]+7>>3);me.l&511;)me.write_shift(-4,W.ENDOFCHAIN);for(_e=Ae=0,Ie=0;Ie<xe.FileIndex.length;++Ie)qe=xe.FileIndex[Ie],qe.content&&(ze=qe.content.length,!(!ze||ze>=4096)&&(qe.start=_e,Me(ze+63>>6)));for(;me.l&511;)me.write_shift(-4,W.ENDOFCHAIN);for(Ae=0;Ae<Fe[4]<<2;++Ae){var vt=xe.FullPaths[Ae];if(!vt||vt.length===0){for(Ie=0;Ie<17;++Ie)me.write_shift(4,0);for(Ie=0;Ie<3;++Ie)me.write_shift(4,-1);for(Ie=0;Ie<12;++Ie)me.write_shift(4,0);continue}qe=xe.FileIndex[Ae],Ae===0&&(qe.start=qe.size?qe.start-1:U);var yt=Ae===0&&Be.root||qe.name;if(ze=2*(yt.length+1),me.write_shift(64,yt,"utf16le"),me.write_shift(2,ze),me.write_shift(1,qe.type),me.write_shift(1,qe.color),me.write_shift(-4,qe.L),me.write_shift(-4,qe.R),me.write_shift(-4,qe.C),qe.clsid)me.write_shift(16,qe.clsid,"hex");else for(Ie=0;Ie<4;++Ie)me.write_shift(4,0);me.write_shift(4,qe.state||0),me.write_shift(4,0),me.write_shift(4,0),me.write_shift(4,0),me.write_shift(4,0),me.write_shift(4,qe.start),me.write_shift(4,qe.size),me.write_shift(4,0)}for(Ae=1;Ae<xe.FileIndex.length;++Ae)if(qe=xe.FileIndex[Ae],qe.size>=4096)if(me.l=qe.start+1<<9,dn&&Buffer.isBuffer(qe.content))qe.content.copy(me,me.l,0,qe.size),me.l+=qe.size+511&-512;else{for(Ie=0;Ie<qe.size;++Ie)me.write_shift(1,qe.content[Ie]);for(;Ie&511;++Ie)me.write_shift(1,0)}for(Ae=1;Ae<xe.FileIndex.length;++Ae)if(qe=xe.FileIndex[Ae],qe.size>0&&qe.size<4096)if(dn&&Buffer.isBuffer(qe.content))qe.content.copy(me,me.l,0,qe.size),me.l+=qe.size+63&-64;else{for(Ie=0;Ie<qe.size;++Ie)me.write_shift(1,qe.content[Ie]);for(;Ie&63;++Ie)me.write_shift(1,0)}if(dn)me.l=me.length;else for(;me.l<me.length;)me.write_shift(1,0);return me}function R(xe,Re){var Be=xe.FullPaths.map(function(Ie){return Ie.toUpperCase()}),Fe=Be.map(function(Ie){var ze=Ie.split("/");return ze[ze.length-(Ie.slice(-1)=="/"?2:1)]}),me=!1;Re.charCodeAt(0)===47?(me=!0,Re=Be[0].slice(0,-1)+Re):me=Re.indexOf("/")!==-1;var Ae=Re.toUpperCase(),_e=me===!0?Be.indexOf(Ae):Fe.indexOf(Ae);if(_e!==-1)return xe.FileIndex[_e];var Me=!Ae.match(Yy);for(Ae=Ae.replace(jl,""),Me&&(Ae=Ae.replace(Yy,"!")),_e=0;_e<Be.length;++_e)if((Me?Be[_e].replace(Yy,"!"):Be[_e]).replace(jl,"")==Ae||(Me?Fe[_e].replace(Yy,"!"):Fe[_e]).replace(jl,"")==Ae)return xe.FileIndex[_e];return null}var S=64,U=-2,Q="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],z="00000000000000000000000000000000",W={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:Q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(xe,Re,Be){u();var Fe=L(xe,Be);c.writeFileSync(Re,Fe)}function Y(xe){for(var Re=new Array(xe.length),Be=0;Be<xe.length;++Be)Re[Be]=String.fromCharCode(xe[Be]);return Re.join("")}function K(xe,Re){var Be=L(xe,Re);switch(Re&&Re.type||"buffer"){case"file":return u(),c.writeFileSync(Re.filename,Be),Be;case"binary":return typeof Be=="string"?Be:Y(Be);case"base64":return ow(typeof Be=="string"?Be:Y(Be));case"buffer":if(dn)return Buffer.isBuffer(Be)?Be:zh(Be);case"array":return typeof Be=="string"?Hc(Be):Be}return Be}var H;function F(xe){try{var Re=xe.InflateRaw,Be=new Re;if(Be._processChunk(new Uint8Array([3,0]),Be._finishFlushFlag),Be.bytesRead)H=xe;else throw new Error("zlib does not expose bytesRead")}catch(Fe){console.error("cannot use native zlib: "+(Fe.message||Fe))}}function D(xe,Re){if(!H)return jr(xe,Re);var Be=H.InflateRaw,Fe=new Be,me=Fe._processChunk(xe.slice(xe.l),Fe._finishFlushFlag);return xe.l+=Fe.bytesRead,me}function q(xe){return H?H.deflateRawSync(xe):Bt(xe)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ne=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(xe){var Re=(xe<<1|xe<<11)&139536|(xe<<5|xe<<15)&558144;return(Re>>16|Re>>8|Re)&255}for(var oe=typeof Uint8Array<"u",de=oe?new Uint8Array(256):[],ke=0;ke<256;++ke)de[ke]=ie(ke);function ae(xe,Re){var Be=de[xe&255];return Re<=8?Be>>>8-Re:(Be=Be<<8|de[xe>>8&255],Re<=16?Be>>>16-Re:(Be=Be<<8|de[xe>>16&255],Be>>>24-Re))}function Oe(xe,Re){var Be=Re&7,Fe=Re>>>3;return(xe[Fe]|(Be<=6?0:xe[Fe+1]<<8))>>>Be&3}function Te(xe,Re){var Be=Re&7,Fe=Re>>>3;return(xe[Fe]|(Be<=5?0:xe[Fe+1]<<8))>>>Be&7}function Se(xe,Re){var Be=Re&7,Fe=Re>>>3;return(xe[Fe]|(Be<=4?0:xe[Fe+1]<<8))>>>Be&15}function fe(xe,Re){var Be=Re&7,Fe=Re>>>3;return(xe[Fe]|(Be<=3?0:xe[Fe+1]<<8))>>>Be&31}function ye(xe,Re){var Be=Re&7,Fe=Re>>>3;return(xe[Fe]|(Be<=1?0:xe[Fe+1]<<8))>>>Be&127}function Le(xe,Re,Be){var Fe=Re&7,me=Re>>>3,Ae=(1<<Be)-1,_e=xe[me]>>>Fe;return Be<8-Fe||(_e|=xe[me+1]<<8-Fe,Be<16-Fe)||(_e|=xe[me+2]<<16-Fe,Be<24-Fe)||(_e|=xe[me+3]<<24-Fe),_e&Ae}function Qe(xe,Re,Be){var Fe=Re&7,me=Re>>>3;return Fe<=5?xe[me]|=(Be&7)<<Fe:(xe[me]|=Be<<Fe&255,xe[me+1]=(Be&7)>>8-Fe),Re+3}function ue(xe,Re,Be){var Fe=Re&7,me=Re>>>3;return Be=(Be&1)<<Fe,xe[me]|=Be,Re+1}function we(xe,Re,Be){var Fe=Re&7,me=Re>>>3;return Be<<=Fe,xe[me]|=Be&255,Be>>>=8,xe[me+1]=Be,Re+8}function De(xe,Re,Be){var Fe=Re&7,me=Re>>>3;return Be<<=Fe,xe[me]|=Be&255,Be>>>=8,xe[me+1]=Be&255,xe[me+2]=Be>>>8,Re+16}function He(xe,Re){var Be=xe.length,Fe=2*Be>Re?2*Be:Re+5,me=0;if(Be>=Re)return xe;if(dn){var Ae=LH(Fe);if(xe.copy)xe.copy(Ae);else for(;me<xe.length;++me)Ae[me]=xe[me];return Ae}else if(oe){var _e=new Uint8Array(Fe);if(_e.set)_e.set(xe);else for(;me<Be;++me)_e[me]=xe[me];return _e}return xe.length=Fe,xe}function Ye(xe){for(var Re=new Array(xe),Be=0;Be<xe;++Be)Re[Be]=0;return Re}function tt(xe,Re,Be){var Fe=1,me=0,Ae=0,_e=0,Me=0,Ie=xe.length,ze=oe?new Uint16Array(32):Ye(32);for(Ae=0;Ae<32;++Ae)ze[Ae]=0;for(Ae=Ie;Ae<Be;++Ae)xe[Ae]=0;Ie=xe.length;var qe=oe?new Uint16Array(Ie):Ye(Ie);for(Ae=0;Ae<Ie;++Ae)ze[me=xe[Ae]]++,Fe<me&&(Fe=me),qe[Ae]=0;for(ze[0]=0,Ae=1;Ae<=Fe;++Ae)ze[Ae+16]=Me=Me+ze[Ae-1]<<1;for(Ae=0;Ae<Ie;++Ae)Me=xe[Ae],Me!=0&&(qe[Ae]=ze[Me+16]++);var vt=0;for(Ae=0;Ae<Ie;++Ae)if(vt=xe[Ae],vt!=0)for(Me=ae(qe[Ae],Fe)>>Fe-vt,_e=(1<<Fe+4-vt)-1;_e>=0;--_e)Re[Me|_e<<vt]=vt&15|Ae<<4;return Fe}var ft=oe?new Uint16Array(512):Ye(512),$e=oe?new Uint16Array(32):Ye(32);if(!oe){for(var nt=0;nt<512;++nt)ft[nt]=0;for(nt=0;nt<32;++nt)$e[nt]=0}(function(){for(var xe=[],Re=0;Re<32;Re++)xe.push(5);tt(xe,$e,32);var Be=[];for(Re=0;Re<=143;Re++)Be.push(8);for(;Re<=255;Re++)Be.push(9);for(;Re<=279;Re++)Be.push(7);for(;Re<=287;Re++)Be.push(8);tt(Be,ft,288)})();var bt=function(){for(var Re=oe?new Uint8Array(32768):[],Be=0,Fe=0;Be<ne.length-1;++Be)for(;Fe<ne[Be+1];++Fe)Re[Fe]=Be;for(;Fe<32768;++Fe)Re[Fe]=29;var me=oe?new Uint8Array(259):[];for(Be=0,Fe=0;Be<te.length-1;++Be)for(;Fe<te[Be+1];++Fe)me[Fe]=Be;function Ae(Me,Ie){for(var ze=0;ze<Me.length;){var qe=Math.min(65535,Me.length-ze),vt=ze+qe==Me.length;for(Ie.write_shift(1,+vt),Ie.write_shift(2,qe),Ie.write_shift(2,~qe&65535);qe-- >0;)Ie[Ie.l++]=Me[ze++]}return Ie.l}function _e(Me,Ie){for(var ze=0,qe=0,vt=oe?new Uint16Array(32768):[];qe<Me.length;){var yt=Math.min(65535,Me.length-qe);if(yt<10){for(ze=Qe(Ie,ze,+(qe+yt==Me.length)),ze&7&&(ze+=8-(ze&7)),Ie.l=ze/8|0,Ie.write_shift(2,yt),Ie.write_shift(2,~yt&65535);yt-- >0;)Ie[Ie.l++]=Me[qe++];ze=Ie.l*8;continue}ze=Qe(Ie,ze,+(qe+yt==Me.length)+2);for(var Ut=0;yt-- >0;){var kt=Me[qe];Ut=(Ut<<5^kt)&32767;var Qt=-1,Nr=0;if((Qt=vt[Ut])&&(Qt|=qe&-32768,Qt>qe&&(Qt-=32768),Qt<qe))for(;Me[Qt+Nr]==Me[qe+Nr]&&Nr<250;)++Nr;if(Nr>2){kt=me[Nr],kt<=22?ze=we(Ie,ze,de[kt+1]>>1)-1:(we(Ie,ze,3),ze+=5,we(Ie,ze,de[kt-23]>>5),ze+=3);var Jr=kt<8?0:kt-4>>2;Jr>0&&(De(Ie,ze,Nr-te[kt]),ze+=Jr),kt=Re[qe-Qt],ze=we(Ie,ze,de[kt]>>3),ze-=3;var Zr=kt<4?0:kt-2>>1;Zr>0&&(De(Ie,ze,qe-Qt-ne[kt]),ze+=Zr);for(var an=0;an<Nr;++an)vt[Ut]=qe&32767,Ut=(Ut<<5^Me[qe])&32767,++qe;yt-=Nr-1}else kt<=143?kt=kt+48:ze=ue(Ie,ze,1),ze=we(Ie,ze,de[kt]),vt[Ut]=qe&32767,++qe}ze=we(Ie,ze,0)-1}return Ie.l=(ze+7)/8|0,Ie.l}return function(Ie,ze){return Ie.length<8?Ae(Ie,ze):_e(Ie,ze)}}();function Bt(xe){var Re=Nt(50+Math.floor(xe.length*1.1)),Be=bt(xe,Re);return Re.slice(0,Be)}var xt=oe?new Uint16Array(32768):Ye(32768),xr=oe?new Uint16Array(32768):Ye(32768),Xt=oe?new Uint16Array(128):Ye(128),Gr=1,wr=1;function Ur(xe,Re){var Be=fe(xe,Re)+257;Re+=5;var Fe=fe(xe,Re)+1;Re+=5;var me=Se(xe,Re)+4;Re+=4;for(var Ae=0,_e=oe?new Uint8Array(19):Ye(19),Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ie=1,ze=oe?new Uint8Array(8):Ye(8),qe=oe?new Uint8Array(8):Ye(8),vt=_e.length,yt=0;yt<me;++yt)_e[J[yt]]=Ae=Te(xe,Re),Ie<Ae&&(Ie=Ae),ze[Ae]++,Re+=3;var Ut=0;for(ze[0]=0,yt=1;yt<=Ie;++yt)qe[yt]=Ut=Ut+ze[yt-1]<<1;for(yt=0;yt<vt;++yt)(Ut=_e[yt])!=0&&(Me[yt]=qe[Ut]++);var kt=0;for(yt=0;yt<vt;++yt)if(kt=_e[yt],kt!=0){Ut=de[Me[yt]]>>8-kt;for(var Qt=(1<<7-kt)-1;Qt>=0;--Qt)Xt[Ut|Qt<<kt]=kt&7|yt<<3}var Nr=[];for(Ie=1;Nr.length<Be+Fe;)switch(Ut=Xt[ye(xe,Re)],Re+=Ut&7,Ut>>>=3){case 16:for(Ae=3+Oe(xe,Re),Re+=2,Ut=Nr[Nr.length-1];Ae-- >0;)Nr.push(Ut);break;case 17:for(Ae=3+Te(xe,Re),Re+=3;Ae-- >0;)Nr.push(0);break;case 18:for(Ae=11+ye(xe,Re),Re+=7;Ae-- >0;)Nr.push(0);break;default:Nr.push(Ut),Ie<Ut&&(Ie=Ut);break}var Jr=Nr.slice(0,Be),Zr=Nr.slice(Be);for(yt=Be;yt<286;++yt)Jr[yt]=0;for(yt=Fe;yt<30;++yt)Zr[yt]=0;return Gr=tt(Jr,xt,286),wr=tt(Zr,xr,30),Re}function _n(xe,Re){if(xe[0]==3&&!(xe[1]&3))return[Om(Re),2];for(var Be=0,Fe=0,me=LH(Re||1<<18),Ae=0,_e=me.length>>>0,Me=0,Ie=0;(Fe&1)==0;){if(Fe=Te(xe,Be),Be+=3,Fe>>>1)Fe>>1==1?(Me=9,Ie=5):(Be=Ur(xe,Be),Me=Gr,Ie=wr);else{Be&7&&(Be+=8-(Be&7));var ze=xe[Be>>>3]|xe[(Be>>>3)+1]<<8;if(Be+=32,ze>0)for(!Re&&_e<Ae+ze&&(me=He(me,Ae+ze),_e=me.length);ze-- >0;)me[Ae++]=xe[Be>>>3],Be+=8;continue}for(;;){!Re&&_e<Ae+32767&&(me=He(me,Ae+32767),_e=me.length);var qe=Le(xe,Be,Me),vt=Fe>>>1==1?ft[qe]:xt[qe];if(Be+=vt&15,vt>>>=4,(vt>>>8&255)===0)me[Ae++]=vt;else{if(vt==256)break;vt-=257;var yt=vt<8?0:vt-4>>2;yt>5&&(yt=0);var Ut=Ae+te[vt];yt>0&&(Ut+=Le(xe,Be,yt),Be+=yt),qe=Le(xe,Be,Ie),vt=Fe>>>1==1?$e[qe]:xr[qe],Be+=vt&15,vt>>>=4;var kt=vt<4?0:vt-2>>1,Qt=ne[vt];for(kt>0&&(Qt+=Le(xe,Be,kt),Be+=kt),!Re&&_e<Ut&&(me=He(me,Ut+100),_e=me.length);Ae<Ut;)me[Ae]=me[Ae-Qt],++Ae}}}return Re?[me,Be+7>>>3]:[me.slice(0,Ae),Be+7>>>3]}function jr(xe,Re){var Be=xe.slice(xe.l||0),Fe=_n(Be,Re);return xe.l+=Fe[1],Fe[0]}function hs(xe,Re){if(xe)typeof console<"u"&&console.error(Re);else throw new Error(Re)}function qr(xe,Re){var Be=xe;No(Be,0);var Fe=[],me=[],Ae={FileIndex:Fe,FullPaths:me};C(Ae,{root:Re.root});for(var _e=Be.length-4;(Be[_e]!=80||Be[_e+1]!=75||Be[_e+2]!=5||Be[_e+3]!=6)&&_e>=0;)--_e;Be.l=_e+4,Be.l+=4;var Me=Be.read_shift(2);Be.l+=6;var Ie=Be.read_shift(4);for(Be.l=Ie,_e=0;_e<Me;++_e){Be.l+=20;var ze=Be.read_shift(4),qe=Be.read_shift(4),vt=Be.read_shift(2),yt=Be.read_shift(2),Ut=Be.read_shift(2);Be.l+=8;var kt=Be.read_shift(4),Qt=l(Be.slice(Be.l+vt,Be.l+vt+yt));Be.l+=vt+yt+Ut;var Nr=Be.l;Be.l=kt+4,Rn(Be,ze,qe,Ae,Qt),Be.l=Nr}return Ae}function Rn(xe,Re,Be,Fe,me){xe.l+=2;var Ae=xe.read_shift(2),_e=xe.read_shift(2),Me=o(xe);if(Ae&8257)throw new Error("Unsupported ZIP encryption");for(var Ie=xe.read_shift(4),ze=xe.read_shift(4),qe=xe.read_shift(4),vt=xe.read_shift(2),yt=xe.read_shift(2),Ut="",kt=0;kt<vt;++kt)Ut+=String.fromCharCode(xe[xe.l++]);if(yt){var Qt=l(xe.slice(xe.l,xe.l+yt));(Qt[21589]||{}).mt&&(Me=Qt[21589].mt),((me||{})[21589]||{}).mt&&(Me=me[21589].mt)}xe.l+=yt;var Nr=xe.slice(xe.l,xe.l+ze);switch(_e){case 8:Nr=D(xe,qe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+_e)}var Jr=!1;Ae&8&&(Ie=xe.read_shift(4),Ie==134695760&&(Ie=xe.read_shift(4),Jr=!0),ze=xe.read_shift(4),qe=xe.read_shift(4)),ze!=Re&&hs(Jr,"Bad compressed size: "+Re+" != "+ze),qe!=Be&&hs(Jr,"Bad uncompressed size: "+Be+" != "+qe),ln(Fe,Ut,Nr,{unsafe:!0,mt:Me})}function ja(xe,Re){var Be=Re||{},Fe=[],me=[],Ae=Nt(1),_e=Be.compression?8:0,Me=0,Ie=0,ze=0,qe=0,vt=0,yt=xe.FullPaths[0],Ut=yt,kt=xe.FileIndex[0],Qt=[],Nr=0;for(Ie=1;Ie<xe.FullPaths.length;++Ie)if(Ut=xe.FullPaths[Ie].slice(yt.length),kt=xe.FileIndex[Ie],!(!kt.size||!kt.content||Ut=="Sh33tJ5")){var Jr=qe,Zr=Nt(Ut.length);for(ze=0;ze<Ut.length;++ze)Zr.write_shift(1,Ut.charCodeAt(ze)&127);Zr=Zr.slice(0,Zr.l),Qt[vt]=aCe.buf(kt.content,0);var an=kt.content;_e==8&&(an=q(an)),Ae=Nt(30),Ae.write_shift(4,67324752),Ae.write_shift(2,20),Ae.write_shift(2,Me),Ae.write_shift(2,_e),kt.mt?s(Ae,kt.mt):Ae.write_shift(4,0),Ae.write_shift(-4,Qt[vt]),Ae.write_shift(4,an.length),Ae.write_shift(4,kt.content.length),Ae.write_shift(2,Zr.length),Ae.write_shift(2,0),qe+=Ae.length,Fe.push(Ae),qe+=Zr.length,Fe.push(Zr),qe+=an.length,Fe.push(an),Ae=Nt(46),Ae.write_shift(4,33639248),Ae.write_shift(2,0),Ae.write_shift(2,20),Ae.write_shift(2,Me),Ae.write_shift(2,_e),Ae.write_shift(4,0),Ae.write_shift(-4,Qt[vt]),Ae.write_shift(4,an.length),Ae.write_shift(4,kt.content.length),Ae.write_shift(2,Zr.length),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(4,0),Ae.write_shift(4,Jr),Nr+=Ae.l,me.push(Ae),Nr+=Zr.length,me.push(Zr),++vt}return Ae=Nt(22),Ae.write_shift(4,101010256),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,vt),Ae.write_shift(2,vt),Ae.write_shift(4,Nr),Ae.write_shift(4,qe),Ae.write_shift(2,0),Zi([Zi(Fe),Zi(me),Ae])}var Fr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function fr(xe,Re){if(xe.ctype)return xe.ctype;var Be=xe.name||"",Fe=Be.match(/\.([^\.]+)$/);return Fe&&Fr[Fe[1]]||Re&&(Fe=(Be=Re).match(/[\.\\]([^\.\\])+$/),Fe&&Fr[Fe[1]])?Fr[Fe[1]]:"application/octet-stream"}function Xr(xe){for(var Re=ow(xe),Be=[],Fe=0;Fe<Re.length;Fe+=76)Be.push(Re.slice(Fe,Fe+76));return Be.join(`\r
`)+`\r
`}function ms(xe){var Re=xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ze){var qe=ze.charCodeAt(0).toString(16).toUpperCase();return"="+(qe.length==1?"0"+qe:qe)});Re=Re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Re.charAt(0)==`
`&&(Re="=0D"+Re.slice(1)),Re=Re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Be=[],Fe=Re.split(`\r
`),me=0;me<Fe.length;++me){var Ae=Fe[me];if(Ae.length==0){Be.push("");continue}for(var _e=0;_e<Ae.length;){var Me=76,Ie=Ae.slice(_e,_e+Me);Ie.charAt(Me-1)=="="?Me--:Ie.charAt(Me-2)=="="?Me-=2:Ie.charAt(Me-3)=="="&&(Me-=3),Ie=Ae.slice(_e,_e+Me),_e+=Me,_e<Ae.length&&(Ie+="="),Be.push(Ie)}}return Be.join(`\r
`)}function Yn(xe){for(var Re=[],Be=0;Be<xe.length;++Be){for(var Fe=xe[Be];Be<=xe.length&&Fe.charAt(Fe.length-1)=="=";)Fe=Fe.slice(0,Fe.length-1)+xe[++Be];Re.push(Fe)}for(var me=0;me<Re.length;++me)Re[me]=Re[me].replace(/[=][0-9A-Fa-f]{2}/g,function(Ae){return String.fromCharCode(parseInt(Ae.slice(1),16))});return Hc(Re.join(`\r
`))}function Ba(xe,Re,Be){for(var Fe="",me="",Ae="",_e,Me=0;Me<10;++Me){var Ie=Re[Me];if(!Ie||Ie.match(/^\s*$/))break;var ze=Ie.match(/^(.*?):\s*([^\s].*)$/);if(ze)switch(ze[1].toLowerCase()){case"content-location":Fe=ze[2].trim();break;case"content-type":Ae=ze[2].trim();break;case"content-transfer-encoding":me=ze[2].trim();break}}switch(++Me,me.toLowerCase()){case"base64":_e=Hc(Jc(Re.slice(Me).join("")));break;case"quoted-printable":_e=Yn(Re.slice(Me));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+me)}var qe=ln(xe,Fe.slice(Be.length),_e,{unsafe:!0});Ae&&(qe.ctype=Ae)}function Rs(xe,Re){if(Y(xe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Be=Re&&Re.root||"",Fe=(dn&&Buffer.isBuffer(xe)?xe.toString("binary"):Y(xe)).split(`\r
`),me=0,Ae="";for(me=0;me<Fe.length;++me)if(Ae=Fe[me],!!/^Content-Location:/i.test(Ae)&&(Ae=Ae.slice(Ae.indexOf("file")),Be||(Be=Ae.slice(0,Ae.lastIndexOf("/")+1)),Ae.slice(0,Be.length)!=Be))for(;Be.length>0&&(Be=Be.slice(0,Be.length-1),Be=Be.slice(0,Be.lastIndexOf("/")+1),Ae.slice(0,Be.length)!=Be););var _e=(Fe[1]||"").match(/boundary="(.*?)"/);if(!_e)throw new Error("MAD cannot find boundary");var Me="--"+(_e[1]||""),Ie=[],ze=[],qe={FileIndex:Ie,FullPaths:ze};C(qe);var vt,yt=0;for(me=0;me<Fe.length;++me){var Ut=Fe[me];Ut!==Me&&Ut!==Me+"--"||(yt++&&Ba(qe,Fe.slice(vt,me),Be),vt=me)}return qe}function Wt(xe,Re){var Be=Re||{},Fe=Be.boundary||"SheetJS";Fe="------="+Fe;for(var me=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Fe.slice(2)+'"',"","",""],Ae=xe.FullPaths[0],_e=Ae,Me=xe.FileIndex[0],Ie=1;Ie<xe.FullPaths.length;++Ie)if(_e=xe.FullPaths[Ie].slice(Ae.length),Me=xe.FileIndex[Ie],!(!Me.size||!Me.content||_e=="Sh33tJ5")){_e=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Nr){return"_x"+Nr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Nr){return"_u"+Nr.charCodeAt(0).toString(16)+"_"});for(var ze=Me.content,qe=dn&&Buffer.isBuffer(ze)?ze.toString("binary"):Y(ze),vt=0,yt=Math.min(1024,qe.length),Ut=0,kt=0;kt<=yt;++kt)(Ut=qe.charCodeAt(kt))>=32&&Ut<128&&++vt;var Qt=vt>=yt*4/5;me.push(Fe),me.push("Content-Location: "+(Be.root||"file:///C:/SheetJS/")+_e),me.push("Content-Transfer-Encoding: "+(Qt?"quoted-printable":"base64")),me.push("Content-Type: "+fr(Me,_e)),me.push(""),me.push(Qt?ms(qe):Xr(qe))}return me.push(Fe+`--\r
`),me.join(`\r
`)}function xn(xe){var Re={};return C(Re,xe),Re}function ln(xe,Re,Be,Fe){var me=Fe&&Fe.unsafe;me||C(xe);var Ae=!me&&yr.find(xe,Re);if(!Ae){var _e=xe.FullPaths[0];Re.slice(0,_e.length)==_e?_e=Re:(_e.slice(-1)!="/"&&(_e+="/"),_e=(_e+Re).replace("//","/")),Ae={name:a(Re),type:2},xe.FileIndex.push(Ae),xe.FullPaths.push(_e),me||yr.utils.cfb_gc(xe)}return Ae.content=Be,Ae.size=Be?Be.length:0,Fe&&(Fe.CLSID&&(Ae.clsid=Fe.CLSID),Fe.mt&&(Ae.mt=Fe.mt),Fe.ct&&(Ae.ct=Fe.ct)),Ae}function Fn(xe,Re){C(xe);var Be=yr.find(xe,Re);if(Be){for(var Fe=0;Fe<xe.FileIndex.length;++Fe)if(xe.FileIndex[Fe]==Be)return xe.FileIndex.splice(Fe,1),xe.FullPaths.splice(Fe,1),!0}return!1}function Kn(xe,Re,Be){C(xe);var Fe=yr.find(xe,Re);if(Fe){for(var me=0;me<xe.FileIndex.length;++me)if(xe.FileIndex[me]==Fe)return xe.FileIndex[me].name=a(Be),xe.FullPaths[me]=Be,!0}return!1}function Jn(xe){T(xe,!0)}return t.find=R,t.read=B,t.parse=d,t.write=K,t.writeFile=G,t.utils={cfb_new:xn,cfb_add:ln,cfb_del:Fn,cfb_mov:Kn,cfb_gc:Jn,ReadShift:w2,CheckField:cre,prep_blob:No,bconcat:Zi,use_zlib:F,_deflateRaw:Bt,_inflateRaw:jr,consts:W},t}();function sCe(e){return typeof e=="string"?Jk(e):Array.isArray(e)?TEe(e):e}function iN(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Jk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Xf(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([sCe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Xm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function iCe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ds(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function GH(e,t){for(var r=[],n=Ds(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function e4(e){for(var t=[],r=Ds(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function t4(e){for(var t=[],r=Ds(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function oCe(e){for(var t=[],r=Ds(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var L_=new Date(1899,11,30,0,0,0);function Fi(e,t){var r=e.getTime(),n=L_.getTime()+(e.getTimezoneOffset()-L_.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Hte=new Date,lCe=L_.getTime()+(Hte.getTimezoneOffset()-L_.getTimezoneOffset())*6e4,qH=Hte.getTimezoneOffset();function r4(e){var t=new Date;return t.setTime(e*24*60*60*1e3+lCe),t.getTimezoneOffset()!==qH&&t.setTime(t.getTime()+(t.getTimezoneOffset()-qH)*6e4),t}function cCe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var KH=new Date("2017-02-19T19:06:09.000Z"),Vte=isNaN(KH.getFullYear())?new Date("2/19/17"):KH,uCe=Vte.getFullYear()==2017;function za(e,t){var r=new Date(e);if(uCe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Vte.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function _g(e,t){if(dn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Xf(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Xf(Bte(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Xf(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Xf(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function $a(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=$a(e[r]));return t}function js(e,t){for(var r="";r.length<t;)r+=e;return r}function $d(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var dCe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ab(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&dCe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var fCe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function zte(e){return e?e.content&&e.type?_g(e.content,!0):e.data?Xy(e.data):e.asNodeBuffer&&dn?Xy(e.asNodeBuffer().toString("binary")):e.asBinary?Xy(e.asBinary()):e._data&&e._data.getContent?Xy(_g(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function $te(e){if(!e)return null;if(e.data)return PH(e.data);if(e.asNodeBuffer&&dn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?PH(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function ACe(e){return e&&e.name.slice(-4)===".bin"?$te(e):zte(e)}function Ru(e,t){for(var r=e.FullPaths||Ds(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function NR(e,t){var r=Ru(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function fi(e,t,r){if(!r)return ACe(NR(e,t));if(!t)return null;try{return fi(e,t)}catch{return null}}function Vc(e,t,r){if(!r)return zte(NR(e,t));if(!t)return null;try{return Vc(e,t)}catch{return null}}function hCe(e,t,r){return $te(NR(e,t))}function WH(e){for(var t=e.FullPaths||Ds(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function rn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return dn?n=zh(r):n=IEe(r),yr.utils.cfb_add(e,t,n)}yr.utils.cfb_add(e,t,r)}else e.file(t,r)}function ER(){return yr.utils.cfb_new()}function Gte(e,t){switch(t.type){case"base64":return yr.read(e,{type:"base64"});case"binary":return yr.read(e,{type:"binary"});case"buffer":case"array":return yr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Jy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ti=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,mCe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,XH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,pCe=/<[^>]*>/g,fl=ti.match(XH)?XH:pCe,gCe=/<\w*:/,xCe=/<(\/?)\w+:/;function Hr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(mCe),l=0,c="",u=0,d="",f="",h=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[m]&&d.slice(l-3,l)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function AA(e){return e.replace(xCe,"<$1")}var qte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},CR=e4(qte),Dn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return qte[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),_R=/[&<>'"]/g,vCe=/[\u0000-\u0008\u000b-\u001f]/g;function Aa(e){var t=e+"";return t.replace(_R,function(r){return CR[r]}).replace(vCe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function YH(e){return Aa(e).replace(/ /g,"_x0020_")}var Kte=/[\u0000-\u001f]/g;function SR(e){var t=e+"";return t.replace(_R,function(r){return CR[r]}).replace(/\n/g,"<br/>").replace(Kte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function bCe(e){var t=e+"";return t.replace(_R,function(r){return CR[r]}).replace(Kte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var JH=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function yCe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function gB(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function ZH(e){var t=Om(2*e.length),r,n,a=1,s=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function eV(e){return zh(e,"binary").toString("utf8")}var rC="foo bar bazâð£",ba=dn&&(eV(rC)==gB(rC)&&eV||ZH(rC)==gB(rC)&&ZH)||gB,Xf=dn?function(e){return zh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},cw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Wte=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),wCe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),NCe=/<\/?(?:vt:)?variant>/g,ECe=/<(?:vt:)([^>]*)>([\s\S]*)</;function tV(e,t){var r=Hr(e),n=e.match(wCe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(NCe,"").match(ECe);o&&a.push({v:ba(o[2]),t:o[1]})}),a}var Xte=/(^\s|\s$|\n)/;function Eo(e,t){return"<"+e+(t.match(Xte)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function uw(e){return Ds(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Vt(e,t,r){return"<"+e+(r!=null?uw(r):"")+(t!=null?(t.match(Xte)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function EF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function CCe(e,t){switch(typeof e){case"string":var r=Vt("vt:lpwstr",Aa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Vt((e|0)==e?"vt:i4":"vt:r8",Aa(String(e)));case"boolean":return Vt("vt:bool",e?"true":"false")}if(e instanceof Date)return Vt("vt:filetime",EF(e));throw new Error("Unable to serialize "+e)}function kR(e){if(dn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ba(Xm(bR(e)));throw new Error("Bad input format: expected Buffer or string")}var dw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Bi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},qg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Lc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _Ce(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function SCe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var rV=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},nV=dn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:zh(t)})):rV(e)}:rV,aV=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(oh(e,a)));return n.join("").replace(jl,"")},jR=dn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(jl,""):aV(e,t,r)}:aV,sV=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Yte=dn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):sV(e,t,r)}:sV,iV=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(fv(e,a)));return n.join("")},oN=dn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):iV(t,r,n)}:iV,Jte=function(e,t){var r=Mc(e,t);return r>0?oN(e,t+4,t+4+r-1):""},Zte=Jte,ere=function(e,t){var r=Mc(e,t);return r>0?oN(e,t+4,t+4+r-1):""},tre=ere,rre=function(e,t){var r=2*Mc(e,t);return r>0?oN(e,t+4,t+4+r-1):""},nre=rre,are=function(t,r){var n=Mc(t,r);return n>0?jR(t,r+4,r+4+n):""},sre=are,ire=function(e,t){var r=Mc(e,t);return r>0?oN(e,t+4,t+4+r):""},ore=ire,lre=function(e,t){return _Ce(e,t)},M_=lre,BR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};dn&&(Zte=function(t,r){if(!Buffer.isBuffer(t))return Jte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},tre=function(t,r){if(!Buffer.isBuffer(t))return ere(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},nre=function(t,r){if(!Buffer.isBuffer(t))return rre(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},sre=function(t,r){if(!Buffer.isBuffer(t))return are(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},ore=function(t,r){if(!Buffer.isBuffer(t))return ire(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},M_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):lre(t,r)},BR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var fv=function(e,t){return e[t]},oh=function(e,t){return e[t+1]*256+e[t]},kCe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Mc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Qp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},jCe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function w2(e,t){var r="",n,a,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,dn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(oh(this,u)),u+=2;e*=2;break;case"utf8":r=oN(this,this.l,this.l+e);break;case"utf16le":e*=2,r=jR(this,this.l,this.l+e);break;case"wstr":return w2.call(this,e,"dbcs");case"lpstr-ansi":r=Zte(this,this.l),e=4+Mc(this,this.l);break;case"lpstr-cp":r=tre(this,this.l),e=4+Mc(this,this.l);break;case"lpwstr":r=nre(this,this.l),e=4+2*Mc(this,this.l);break;case"lpp4":e=4+Mc(this,this.l),r=sre(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Mc(this,this.l),r=ore(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=fv(this,this.l+e++))!==0;)s.push(tC(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=oh(this,this.l+e))!==0;)s.push(tC(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=fv(this,u),this.l=u+1,l=w2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(tC(oh(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=fv(this,u),this.l=u+1,l=w2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(tC(fv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=fv(this,this.l),this.l++,n;case 2:return n=(t==="i"?kCe:oh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Qp:jCe)(this,this.l),this.l+=4,n):(a=Mc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=M_(this,this.l):a=M_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Yte(this,this.l,e);break}}return this.l+=e,r}var BCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},TCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ICe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function FCe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)ICe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,BCe(this,t,this.l);break;case 8:if(n=8,r==="f"){SCe(this,t,this.l);break}case 16:break;case-4:n=4,TCe(this,t,this.l);break}return this.l+=n,this}function cre(e,t){var r=Yte(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function No(e,t){e.l=t,e.read_shift=w2,e.chk=cre,e.write_shift=FCe}function cl(e,t){e.l+=t}function Nt(e){var t=Om(e);return No(t,0),t}function $h(e,t,r){if(e){var n,a,s;No(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=gw[l]||gw[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function lc(){var e=[],t=dn?256:2048,r=function(u){var d=Nt(u);return No(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),Zi(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function Dt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=gw[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=e.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&BR(r)&&e.push(r)}}function N2(e,t,r){var n=$a(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function oV(e,t,r){var n=$a(e);return n.s=N2(n.s,t.s,r),n.e=N2(n.e,t.s,r),n}function E2(e,t){if(e.cRel&&e.c<0)for(e=$a(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=$a(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Pr(e);return!e.cRel&&e.cRel!=null&&(r=PCe(r)),!e.rRel&&e.rRel!=null&&(r=OCe(r)),r}function xB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ls(e.s.c)+":"+(e.e.cRel?"":"$")+ls(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Zs(e.s.r)+":"+(e.e.rRel?"":"$")+Zs(e.e.r):E2(e.s,t.biff)+":"+E2(e.e,t.biff)}function TR(e){return parseInt(DCe(e),10)-1}function Zs(e){return""+(e+1)}function OCe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function DCe(e){return e.replace(/\$(\d+)$/,"$1")}function IR(e){for(var t=RCe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function ls(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function PCe(e){return e.replace(/^([A-Z])/,"$$$1")}function RCe(e){return e.replace(/^\$([A-Z])/,"$1")}function LCe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function cs(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Pr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function uc(e){var t=e.indexOf(":");return t==-1?{s:cs(e),e:cs(e)}:{s:cs(e.slice(0,t)),e:cs(e.slice(t+1))}}function Yr(e,t){return typeof t>"u"||typeof t=="number"?Yr(e.s,e.e):(typeof e!="string"&&(e=Pr(e)),typeof t!="string"&&(t=Pr(t)),e==t?e:e+":"+t)}function Pn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function lV(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Yu(e.z,r?Fi(t):t)}catch{}try{return e.w=Yu((e.XF||{}).numFmtId||(r?14:0),r?Fi(t):t)}catch{return""+t}}function Bh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Gh[e.v]||e.v:t==null?lV(e,e.v):lV(e,t))}function Ym(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function ure(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?cs(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Pn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=o+f,x=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Ir[14],n.cellDates?(m.t="d",m.w=Yu(m.z,Fi(m.v))):(m.t="n",m.v=Fi(m.v),m.w=Yu(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=Pr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=Yr(u)),s}function s1(e,t){return ure(null,e,t)}function MCe(e){return e.read_shift(4,"i")}function Gd(e,t){return t||(t=Nt(4)),t.write_shift(4,e),t}function ol(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function eo(e,t){var r=!1;return t==null&&(r=!0,t=Nt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function UCe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function QCe(e,t){return t||(t=Nt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function FR(e,t){var r=e.l,n=e.read_shift(1),a=ol(e),s=[],o={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(UCe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function HCe(e,t){var r=!1;return t==null&&(r=!0,t=Nt(15+4*e.t.length)),t.write_shift(1,0),eo(e.t,t),r?t.slice(0,t.l):t}var VCe=FR;function zCe(e,t){var r=!1;return t==null&&(r=!0,t=Nt(23+4*e.t.length)),t.write_shift(1,1),eo(e.t,t),t.write_shift(4,1),QCe({},t),r?t.slice(0,t.l):t}function ed(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Kg(e,t){return t==null&&(t=Nt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Wg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Xg(e,t){return t==null&&(t=Nt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var $Ce=ol,dre=eo;function OR(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function U_(e,t){var r=!1;return t==null&&(r=!0,t=Nt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var GCe=ol,CF=OR,DR=U_;function PR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?M_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Qp(t,0)>>2;return r?a/100:a}function fre(e,t){t==null&&(t=Nt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Are(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function qCe(e,t){return t||(t=Nt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Yg=Are,i1=qCe;function nl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Sg(e,t){return(t||Nt(8)).write_shift(8,e,"f")}function KCe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=ag[a];u&&(t.rgb=Aw(u));break;case 2:t.rgb=Aw([o,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function Q_(e,t){if(t||(t=Nt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function WCe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function XCe(e,t){t||(t=Nt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function hre(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function YCe(e){return hre(e,1)}function JCe(e){return hre(e,2)}var RR=2,Wl=3,nC=11,cV=12,H_=19,aC=64,ZCe=65,e5e=71,t5e=4108,r5e=4126,Wi=80,mre=81,n5e=[Wi,mre],_F={1:{n:"CodePage",t:RR},2:{n:"Category",t:Wi},3:{n:"PresentationFormat",t:Wi},4:{n:"ByteCount",t:Wl},5:{n:"LineCount",t:Wl},6:{n:"ParagraphCount",t:Wl},7:{n:"SlideCount",t:Wl},8:{n:"NoteCount",t:Wl},9:{n:"HiddenCount",t:Wl},10:{n:"MultimediaClipCount",t:Wl},11:{n:"ScaleCrop",t:nC},12:{n:"HeadingPairs",t:t5e},13:{n:"TitlesOfParts",t:r5e},14:{n:"Manager",t:Wi},15:{n:"Company",t:Wi},16:{n:"LinksUpToDate",t:nC},17:{n:"CharacterCount",t:Wl},19:{n:"SharedDoc",t:nC},22:{n:"HyperlinksChanged",t:nC},23:{n:"AppVersion",t:Wl,p:"version"},24:{n:"DigSig",t:ZCe},26:{n:"ContentType",t:Wi},27:{n:"ContentStatus",t:Wi},28:{n:"Language",t:Wi},29:{n:"Version",t:Wi},255:{},2147483648:{n:"Locale",t:H_},2147483651:{n:"Behavior",t:H_},1919054434:{}},SF={1:{n:"CodePage",t:RR},2:{n:"Title",t:Wi},3:{n:"Subject",t:Wi},4:{n:"Author",t:Wi},5:{n:"Keywords",t:Wi},6:{n:"Comments",t:Wi},7:{n:"Template",t:Wi},8:{n:"LastAuthor",t:Wi},9:{n:"RevNumber",t:Wi},10:{n:"EditTime",t:aC},11:{n:"LastPrinted",t:aC},12:{n:"CreatedDate",t:aC},13:{n:"ModifiedDate",t:aC},14:{n:"PageCount",t:Wl},15:{n:"WordCount",t:Wl},16:{n:"CharCount",t:Wl},17:{n:"Thumbnail",t:e5e},18:{n:"Application",t:Wi},19:{n:"DocSecurity",t:Wl},255:{},2147483648:{n:"Locale",t:H_},2147483651:{n:"Behavior",t:H_},1919054434:{}},uV={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},a5e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function s5e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var i5e=s5e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ag=$a(i5e),Gh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},pre={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},kF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},sC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function LR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function o5e(e){var t=LR();if(!e||!e.match)return t;var r={};if((e.match(fl)||[]).forEach(function(n){var a=Hr(n);switch(a[0].replace(gCe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[kF[a.ContentType]]!==void 0&&t[kF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Bi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function gre(e,t){var r=oCe(kF),n=[],a;n[n.length]=ti,n[n.length]=Vt("Types",null,{xmlns:Bi.CT,"xmlns:xsd":Bi.xsd,"xmlns:xsi":Bi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Vt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Vt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:sC[c][t.bookType]||sC[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Vt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:sC[c][t.bookType]||sC[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Vt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var gn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function fw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function C2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(fl)||[]).forEach(function(a){var s=Hr(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Jy(s.Target,t);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function Mv(e){var t=[ti,Vt("Relationships",null,{xmlns:Bi.RELS})];return Ds(e["!id"]).forEach(function(r){t[t.length]=Vt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function da(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[gn.HLINK,gn.XPATH,gn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var l5e="application/vnd.oasis.opendocument.spreadsheet";function c5e(e,t){for(var r=kR(e),n,a;n=dw.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Hr(n[0],!1),a.path=="/"&&a.type!==l5e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function u5e(e){var t=[ti];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function dV(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function d5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function f5e(e){var t=[ti];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(dV(e[r][0],e[r][1])),t.push(d5e("",e[r][0]));return t.push(dV("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function xre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+O_.version+"</meta:generator></office:meta></office:document-meta>"}var Xu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],A5e=function(){for(var e=new Array(Xu.length),t=0;t<Xu.length;++t){var r=Xu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function vre(e){var t={};e=ba(e);for(var r=0;r<Xu.length;++r){var n=Xu[r],a=e.match(A5e[r]);a!=null&&a.length>0&&(t[n[1]]=Dn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=za(t[n[1]]))}return t}function vB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Aa(t),n[n.length]=r?Vt(e,t,r):Eo(e,t))}function bre(e,t){var r=t||{},n=[ti,Vt("cp:coreProperties",null,{"xmlns:cp":Bi.CORE_PROPS,"xmlns:dc":Bi.dc,"xmlns:dcterms":Bi.dcterms,"xmlns:dcmitype":Bi.dcmitype,"xmlns:xsi":Bi.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&vB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:EF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&vB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:EF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Xu.length;++s){var o=Xu[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&vB(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var sg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],yre=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function wre(e,t,r,n){var a=[];if(typeof e=="string")a=tV(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?tV(t,n).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function h5e(e,t,r){var n={};return t||(t={}),e=ba(e),sg.forEach(function(a){var s=(e.match(cw(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Dn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&wre(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Nre(e){var t=[],r=Vt;return e||(e={}),e.Application="SheetJS",t[t.length]=ti,t[t.length]=Vt("Properties",null,{xmlns:Bi.EXT_PROPS,"xmlns:vt":Bi.vt}),sg.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Aa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Aa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var m5e=/<[^>]+>[^<]*/g;function p5e(e,t){var r={},n="",a=e.match(m5e);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=Hr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Dn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Dn(d);break;case"bool":r[n]=Ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=za(d);break;case"cy":case"error":r[n]=Dn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function Ere(e){var t=[ti,Vt("Properties",null,{xmlns:Bi.CUST_PROPS,"xmlns:vt":Bi.vt})];if(!e)return t.join("");var r=1;return Ds(e).forEach(function(a){++r,t[t.length]=Vt("property",CCe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Aa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var jF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},bB;function g5e(e,t,r){bB||(bB=e4(jF)),t=bB[t]||t,e[t]=r}function x5e(e,t){var r=[];return Ds(jF).map(function(n){for(var a=0;a<Xu.length;++a)if(Xu[a][1]==n)return Xu[a];for(a=0;a<sg.length;++a)if(sg[a][1]==n)return sg[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Eo(jF[n[1]]||n[1],a))}}),Vt("DocumentProperties",r.join(""),{xmlns:Lc.o})}function v5e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ds(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var o=0;o<Xu.length;++o)if(s==Xu[o][1])return;for(o=0;o<sg.length;++o)if(s==sg[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Vt(YH(s),l,{"dt:dt":c}))}}),t&&Ds(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Vt(YH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Lc.o+'">'+a.join("")+"</"+n+">"}function MR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function b5e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Nt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function Cre(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function _re(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Sre(e,t,r){return t===31?_re(e):Cre(e,t,r)}function BF(e,t,r){return Sre(e,t,r===!1?0:4)}function y5e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Sre(e,t,0)}function w5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(jl,""),e.l-a&2&&(e.l+=2)}return r}function N5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(jl,"");return r}function E5e(e){var t=e.l,r=V_(e,mre);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=V_(e,Wl);return[r,n]}function C5e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(E5e(e));return r}function fV(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),o=e.read_shift(4);n[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(jl,"").replace(Yy,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function kre(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function _5e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function V_(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==cV&&n!==t&&n5e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===cV?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Cre(e,n,4).replace(jl,"");case 31:return _re(e);case 64:return MR(e);case 65:return kre(e);case 71:return _5e(e);case 80:return BF(e,n,!s.raw).replace(jl,"");case 81:return y5e(e,n).replace(jl,"");case 4108:return C5e(e);case 4126:case 4127:return n==4127?w5e(e):N5e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function AV(e,t){var r=Nt(4),n=Nt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Nt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=b5e(t);break;case 31:case 80:for(n=Nt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Zi([r,n])}function hV(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(o=0;o!=a;++o){if(e.l!==s[o][1]){var m=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(m=!1,e.l=s[o][1]),m)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[s[o][0]];if(h[g.n]=V_(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ld(l=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[o][0]===1){if(l=h.CodePage=V_(e,RR),Ld(l),c!==-1){var x=e.l;e.l=s[c][1],u=fV(e,l),e.l=x}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=fV(e,l)}else{var v=u[s[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=kre(e);break;case 30:e.l+=4,y=BF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=BF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Gs(e,4);break;case 64:e.l+=4,y=za(MR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+n,h}var jre=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function S5e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function mV(e,t,r){var n=Nt(8),a=[],s=[],o=8,l=0,c=Nt(8),u=Nt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!t){u=Nt(8),u.write_shift(4,0),a.unshift(u);var d=[Nt(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Nt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Zi(d),s.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(jre.indexOf(e[l][0])>-1||yre.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=AV(g.t,h)}else{var v=S5e(h);v==-1&&(v=31,h=String(h)),c=AV(v,h)}s.push(c),u=Nt(8),u.write_shift(4,t?m:2+l),a.push(u),o+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Zi([n].concat(a).concat(s))}function pV(e,t,r){var n=e.content;if(!n)return{};No(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==yr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=hV(n,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=hV(n,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[s,o],h}function gV(e,t,r,n,a,s){var o=Nt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,yr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=mV(e,r,n);if(l.push(c),a){var u=mV(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Zi(l)}function F0(e,t){return e.read_shift(t),null}function k5e(e,t){t||(t=Nt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function j5e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Gs(e,t){return e.read_shift(t)===1}function wl(e,t){return t||(t=Nt(2)),t.write_shift(2,+!!e),t}function Ai(e){return e.read_shift(2,"u")}function Mu(e,t){return t||(t=Nt(2)),t.write_shift(2,e),t}function Bre(e,t){return j5e(e,t,Ai)}function B5e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Tre(e,t,r){return r||(r=Nt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function lN(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function T5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function I5e(e){var t=e.t||"",r=Nt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Nt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Zi(a)}function kg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function cN(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):kg(e,n,r)}function Jg(e,t,r){if(r.biff>5)return cN(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Ire(e,t,r){return r||(r=Nt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function F5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function O5e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(jl,"");return n&&(e.l+=24),a}function D5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(jl,"");return r+o}function P5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return O5e(e);case"0303000000000000c000000000000046":return D5e(e);default:throw new Error("Unsupported Moniker "+r)}}function iC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(jl,""):"";return r}function xV(e,t){t||(t=Nt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function R5e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=iC(e,r-e.l)),a&128&&(o=iC(e,r-e.l)),(a&257)===257&&(l=iC(e,r-e.l)),(a&257)===1&&(c=P5e(e,r-e.l)),a&8&&(u=iC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=MR(e)),e.l=r;var h=o||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function L5e(e){var t=Nt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(s==28)n=n.slice(1),xV(n,t);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&xV(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Fre(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Ore(e,t){var r=Fre(e);return r[3]=0,r}function hA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function jg(e,t,r,n){return n||(n=Nt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function M5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function U5e(e,t,r){return t===0?"":Jg(e,t,r)}function Q5e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,s,o]}function Dre(e){var t=e.read_shift(2),r=PR(e);return[t,r]}function H5e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=lN(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function n4(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function Pre(e,t){return t||(t=Nt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Rre(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var V5e=Rre;function Lre(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function z5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function $5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Qo(e){e.l+=2,e.l+=e.read_shift(2)}var G5e={0:Qo,4:Qo,5:Qo,6:Qo,7:$5e,8:Qo,9:Qo,10:Qo,11:Qo,12:Qo,13:z5e,14:Qo,15:Qo,16:Qo,17:Qo,18:Qo,19:Qo,20:Qo,21:Lre};function q5e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(G5e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function oC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function UR(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Nt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function K5e(e,t){return t===0||e.read_shift(2),1200}function W5e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Jg(e,0,r);return e.read_shift(t+n-e.l),a}function X5e(e,t){var r=!t||t.biff==8,n=Nt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Y5e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function J5e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=lN(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function Z5e(e,t){var r=!t||t.biff>=8?2:1,n=Nt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function e_e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0;o!=a&&e.l<r;++o)s.push(T5e(e));return s.Count=n,s.Unique=a,s}function t_e(e,t){var r=Nt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=I5e(e[a]);var s=Zi([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function r_e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function n_e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function a_e(e){var t=M5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function s_e(e){return e.read_shift(2),e.read_shift(4)}function vV(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function i_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function o_e(){var e=Nt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function l_e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function c_e(e){var t=Nt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function u_e(){}function d_e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=lN(e,0,r),n}function f_e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Nt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function A_e(e){var t=hA(e);return t.isst=e.read_shift(4),t}function h_e(e,t,r,n){var a=Nt(10);return jg(e,t,n,a),a.write_shift(4,r),a}function m_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=hA(e);r.biff==2&&e.l++;var s=cN(e,n-e.l,r);return a.val=s,a}function p_e(e,t,r,n,a){var s=!a||a.biff==8,o=Nt(8+ +s+(1+s)*r.length);return jg(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function g_e(e,t,r){var n=e.read_shift(2),a=Jg(e,0,r);return[n,a]}function x_e(e,t,r,n){var a=r&&r.biff==5;n||(n=Nt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var v_e=Jg;function bV(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:o,c}}}function b_e(e,t){var r=t.biff==8||!t.biff?4:2,n=Nt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function y_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Dre(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function w_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(Dre(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function N_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function E_e(e,t,r,n){var a={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=a5e[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function C_e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=E_e(e,t,n.fStyle,r),n}function yV(e,t,r,n){var a=r&&r.biff==5;n||(n=Nt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function __e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function S_e(e){var t=Nt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function wV(e,t,r){var n=hA(e);(r.biff==2||t==9)&&++e.l;var a=B5e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function k_e(e,t,r,n,a,s){var o=Nt(8);return jg(e,t,n,o),Tre(r,s,o),o}function j_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=hA(e),a=nl(e);return n.val=a,n}function B_e(e,t,r,n){var a=Nt(14);return jg(e,t,n,a),Sg(r,a),a}var NV=U5e;function T_e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=kg(e,s),l=[];n>e.l;)l.push(cN(e));return[s,a,o,l]}function EV(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=H5e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var I_e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function CV(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=kg(e,o,r);a&32&&(u=I_e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||l===0||!(d>0)?[]:qje(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Mre(e,t,r){if(r.biff<8)return F_e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(Q5e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function F_e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=lN(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function O_e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=kg(e,n,r),o=kg(e,a,r);return[s,o]}function D_e(e,t,r){var n=Rre(e);e.l++;var a=e.read_shift(1);return t-=8,[Kje(e,t,r),a,n]}function _V(e,t,r){var n=V5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,$je(e,t,r)]}function P_e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function R_e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=Jg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,s]}}function L_e(e,t,r){return R_e(e,t,r)}function M_e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(n4(e));return r}function U_e(e){var t=Nt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Pre(e[r],t);return t}function Q_e(e,t,r){if(r&&r.biff<8)return V_e(e,t,r);var n=Lre(e),a=q5e(e,t-22,n[1]);return{cmo:n,ft:a}}var H_e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function V_e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((H_e[n]||cl)(e,t,r)),{cmo:[a,n,s],ft:o}}function z_e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=F5e(e,6,r);var l=e.read_shift(2);e.read_shift(2),Ai(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=kg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function $_e(e,t){var r=n4(e);e.l+=16;var n=R5e(e,t-24);return[r,n]}function G_e(e){var t=Nt(24),r=cs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Zi([t,L5e(e[1])])}function q_e(e,t){e.read_shift(2);var r=n4(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(jl,""),[r,n]}function K_e(e){var t=e[1].Tooltip,r=Nt(10+2*(t.length+1));r.write_shift(2,2048);var n=cs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function W_e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=uV[r]||r,r=e.read_shift(2),t[1]=uV[r]||r,t}function X_e(e){return e||(e=Nt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Y_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Ore(e));return r}function J_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Ore(e));return r}function Z_e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Ure(e,t,r){if(!r.cellStyles)return cl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function eSe(e,t){var r=Nt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function tSe(e,t){var r={};return t<32||(e.l+=16,r.header=nl(e),r.footer=nl(e),e.l+=2),r}function rSe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function nSe(e){for(var t=Nt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var aSe=hA,sSe=Bre,iSe=cN;function oSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function lSe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=hA(e);++e.l;var a=Jg(e,t-7,r);return n.t="str",n.val=a,n}function cSe(e){var t=hA(e);++e.l;var r=nl(e);return t.t="n",t.val=r,t}function uSe(e,t,r){var n=Nt(15);return AN(n,e,t),n.write_shift(8,r,"f"),n}function dSe(e){var t=hA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function fSe(e,t,r){var n=Nt(9);return AN(n,e,t),n.write_shift(2,r),n}function ASe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function hSe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function mSe(e,t,r){var n=e.l+t,a=hA(e),s=e.read_shift(2),o=kg(e,s,r);return e.l=n,a.t="str",a.val=o,a}var pSe=[2,3,48,49,131,139,140,245],TF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=e4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Om(1);switch(c.type){case"base64":d=Hc(Jc(l));break;case"binary":d=Hc(l);break;case"buffer":case"array":d=l;break}No(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],O={},j=Math.min(d.length,f==2?521:v-10-(m?264:0)),B=g?32:11;d.l<j&&d[d.l]!=13;)switch(O={},O.name=iw.utils.decode(w,d.slice(d.l,d.l+B)).replace(/[\u0000\r\n].*$/g,""),d.l+=B,O.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(O.offset=d.read_shift(4)),O.len=d.read_shift(1),f==2&&(O.offset=d.read_shift(2)),O.dec=d.read_shift(1),O.name.length&&_.push(O),f!=2&&(d.l+=g?13:14),O.type){case"B":(!m||O.len!=8)&&c.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+O.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var C=0,k=0;for(u[0]=[],k=0;k!=_.length;++k)u[0][k]=_[k].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++C]=[],k=0,k=0;k!=_.length;++k){var T=d.slice(d.l,d.l+_[k].len);d.l+=_[k].len,No(T,0);var L=iw.utils.decode(w,T);switch(_[k].type){case"C":L.trim().length&&(u[C][k]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[C][k]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[C][k]=L;break;case"F":u[C][k]=parseFloat(L.trim());break;case"+":case"I":u[C][k]=g?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[C][k]=!0;break;case"N":case"F":u[C][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[C][k]="##MEMO##"+(g?parseInt(L.trim(),10):T.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[C][k]=+L||0);break;case"@":u[C][k]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[C][k]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[C][k]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][k]=-T.read_shift(-8,"f");break;case"B":if(m&&_[k].len==8){u[C][k]=T.read_shift(8,"f");break}case"G":case"P":T.l+=_[k].len;break;case"0":if(_[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[k].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=s1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Ym(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Ld(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=lc(),f=G_(l,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var _=Pn(l["!ref"]),O=[],j=[],B=[];for(x=0;x<=_.e.c-_.s.c;++x){var C="",k="",T=0,L=[];for(v=0;v<m.length;++v)m[v][x]!=null&&L.push(m[v][x]);if(L.length==0||h[x]==null){O[x]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=L[v]instanceof Date?"D":"C";break;default:k="C"}T=Math.max(T,String(L[v]).length),C=C&&C!=k?"C":k}T>250&&(T=250),k=((g[x]||{}).DBF||{}).type,k=="C"&&g[x].DBF.len>T&&(T=g[x].DBF.len),C=="B"&&k=="N"&&(C="N",B[x]=g[x].DBF.dec,T=g[x].DBF.len),j[x]=C=="C"||k=="N"?T:s[C]||0,w+=j[x],O[x]=C}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,m.length),R.write_shift(2,296+32*y),R.write_shift(2,w),x=0;x<4;++x)R.write_shift(4,0);for(R.write_shift(4,0|(+t[jte]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var S=d.next(32),U=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,U,"sbcs"),S.write_shift(1,O[x]=="?"?"C":O[x],"sbcs"),S.write_shift(4,v),S.write_shift(1,j[x]||s[O[x]]||0),S.write_shift(1,B[x]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),v+=j[x]||s[O[x]]||0}var Q=d.next(264);for(Q.write_shift(4,13),x=0;x<65;++x)Q.write_shift(4,0);for(x=0;x<m.length;++x){var X=d.next(w);for(X.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(O[v]){case"L":X.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":X.write_shift(8,m[x][v]||0,"f");break;case"N":var z="0";for(typeof m[x][v]=="number"&&(z=m[x][v].toFixed(B[v]||0)),y=0;y<j[v]-z.length;++y)X.write_shift(1,32);X.write_shift(1,z,"sbcs");break;case"D":m[x][v]?(X.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var W=String(m[x][v]!=null?m[x][v]:"").slice(0,j[v]);for(X.write_shift(1,W,"sbcs"),y=0;y<j[v]-W.length;++y)X.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),Qre=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ds(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?RH(g):g},n=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:RH(x)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return s(Jc(h),m);case"binary":return s(h,m);case"buffer":return s(dn&&Buffer.isBuffer(h)?h.toString("binary"):Xm(h),m);case"array":return s(_g(h),m)}throw new Error("Unrecognized type "+m.type)}function s(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,w=0,_=[],O=[],j=null,B={},C=[],k=[],T=[],L=0,R;for(+m.codepage>=0&&Ld(+m.codepage);y!==g.length;++y){L=0;var S=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),U=S.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),Q=U[0],X;if(S.length>0)switch(Q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&O.push(S.slice(3).replace(/;;/g,";"));break;case"C":var z=!1,W=!1,G=!1,Y=!1,K=-1,H=-1;for(w=1;w<U.length;++w)switch(U[w].charAt(0)){case"A":break;case"X":v=parseInt(U[w].slice(1))-1,W=!0;break;case"Y":for(x=parseInt(U[w].slice(1))-1,W||(v=0),R=_.length;R<=x;++R)_[R]=[];break;case"K":X=U[w].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN($d(X))?isNaN(Ab(X).getDate())||(X=za(X)):(X=$d(X),j!==null&&n1(j)&&(X=r4(X))),z=!0;break;case"E":Y=!0;var F=Uv(U[w].slice(1),{r:x,c:v});_[x][v]=[_[x][v],F];break;case"S":G=!0,_[x][v]=[_[x][v],"S5S"];break;case"G":break;case"R":K=parseInt(U[w].slice(1))-1;break;case"C":H=parseInt(U[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}if(z&&(_[x][v]&&_[x][v].length==2?_[x][v][0]=X:_[x][v]=X,j=null),G){if(Y)throw new Error("SYLK shared formula cannot have own formula");var D=K>-1&&_[K][H];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");_[x][v][1]=sne(D[1],{r:x-K,c:v-H})}break;case"F":var q=0;for(w=1;w<U.length;++w)switch(U[w].charAt(0)){case"X":v=parseInt(U[w].slice(1))-1,++q;break;case"Y":for(x=parseInt(U[w].slice(1))-1,R=_.length;R<=x;++R)_[R]=[];break;case"M":L=parseInt(U[w].slice(1))/20;break;case"F":break;case"G":break;case"P":j=O[parseInt(U[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=U[w].slice(1).split(" "),R=parseInt(T[0],10);R<=parseInt(T[1],10);++R)L=parseInt(T[2],10),k[R-1]=L===0?{hidden:!0}:{wch:L},Dm(k[R-1]);break;case"C":v=parseInt(U[w].slice(1))-1,k[v]||(k[v]={});break;case"R":x=parseInt(U[w].slice(1))-1,C[x]||(C[x]={}),L>0?(C[x].hpt=L,C[x].hpx=mb(L)):L===0&&(C[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}q<1&&(j=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}}return C.length>0&&(B["!rows"]=C),k.length>0&&(B["!cols"]=k),m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),[_,B]}function o(h,m){var g=a(h,m),x=g[0],v=g[1],y=s1(x,m);return Ds(v).forEach(function(w){y[w]=v[w]}),y}function l(h,m){return Ym(o(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+GR(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=hw(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=mw(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*pw(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function f(h,m){var g=["ID;PWXL;N;E"],x=[],v=Pn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var O=v.s.r;O<=v.e.r;++O)for(var j=v.s.c;j<=v.e.c;++j){var B=Pr({r:O,c:j});y=w?(h[O]||[])[j]:h[B],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,O,j))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),Hre=function(){function e(s,o){switch(o.type){case"base64":return t(Jc(s),o);case"binary":return t(s,o);case"buffer":return t(dn&&Buffer.isBuffer(s)?s.toString("binary"):Xm(s),o);case"array":return t(_g(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN($d(g))?isNaN(Ab(g).getDate())?f[c][u]=g:f[c][u]=za(g):f[c][u]=$d(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return s1(e(s,o),o)}function n(s,o){return Ym(r(s,o),o)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Pn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Pr({r:m,c:g});if(f=h?(c[m]||[])[g]:c[x],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Yu(f.z||Ir[14],Fi(za(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Vre=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var w=m[v].trim().split(":");if(w[0]==="cell"){var _=cs(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var O=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],O])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return s1(r(f,h),h)}function a(f,h){return Ym(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,x="",v=uc(f["!ref"]),y=Array.isArray(f),w=v.s.r;w<=v.e.r;++w)for(var _=v.s.c;_<=v.e.c;++_)if(x=Pr({r:w,c:_}),g=y?(f[w]||[])[_]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var O=Fi(za(g.v));m[2]="vtc",m[3]="nd",m[4]=""+O,m[5]=g.w||Yu(g.z||Ir[14],O);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),hb=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN($d(d))?isNaN(Ab(d).getDate())?f[h][m]=d:f[h][m]=za(d):f[h][m]=$d(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,v=Math.max(v,y);for(w=0;w<=x;++w){m[w]=[];var _=0;for(e(g[w].slice(0,v).trim(),m,w,_,h),_=1;_<=(g[w].length-v)/10+1;++_)e(g[w].slice(v+(_-1)*10,v+_*10).trim(),m,w,_,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var v=0,y=0,w=0,_=0,O=0,j=m.charCodeAt(0),B=!1,C=0,k=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=h.dateNF!=null?rCe(h.dateNF):null;function L(){var R=d.slice(_,O),S={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)S.t="z";else if(h.raw)S.t="s",S.v=R;else if(R.trim().length===0)S.t="s",S.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(S.t="s",S.v=R.slice(2,-1).replace(/""/g,'"')):T4e(R)?(S.t="n",S.f=R.slice(1)):(S.t="s",S.v=R);else if(R=="TRUE")S.t="b",S.v=!0;else if(R=="FALSE")S.t="b",S.v=!1;else if(!isNaN(w=$d(R)))S.t="n",h.cellText!==!1&&(S.w=R),S.v=w;else if(!isNaN(Ab(R).getDate())||T&&R.match(T)){S.z=h.dateNF||Ir[14];var U=0;T&&R.match(T)&&(R=nCe(R,h.dateNF,R.match(T)||[]),U=1),h.cellDates?(S.t="d",S.v=za(R,U)):(S.t="n",S.v=Fi(za(R,U))),h.cellText!==!1&&(S.w=Yu(S.z,S.v instanceof Date?Fi(S.v):S.v)),h.cellNF||delete S.z}else S.t="s",S.v=R;if(S.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=S):g[Pr({c:y,r:v})]=S),_=O+1,k=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),C==j)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;O<d.length;++O)switch(C=d.charCodeAt(O)){case 34:k===34&&(B=!B);break;case j:case 10:case 13:if(!B&&L())break e;break}return O-_>0&&L(),g["!ref"]=Yr(x),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):s1(t(d,f),f)}function l(d,f){var h="",m=f.type=="string"?[0,0,0,0]:e8(d,f);switch(f.type){case"base64":h=Jc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof iw<"u"||(h=dn&&Buffer.isBuffer(d)?d.toString("binary"):Xm(d));break;case"array":h=_g(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=ba(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=ba(h):f.type=="binary"&&typeof iw<"u",h.slice(0,19)=="socialcalc:version:"?Vre.to_sheet(f.type=="string"?h:ba(h),f):o(h,f)}function c(d,f){return Ym(l(d,f),f)}function u(d){for(var f=[],h=Pn(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var w=Pr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[w],!m||m.v==null){v.push("          ");continue}for(var _=(m.w||(Bh(m),m.w)||"").slice(0,10);_.length<10;)_+=" ";v.push(_+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function gSe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Qre.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return hb.to_workbook(e,t)}}var ig=function(){function e(F,D,q){if(F){No(F,F.l||0);for(var J=q.Enum||K;F.l<F.length;){var te=F.read_shift(2),ne=J[te]||J[65535],ie=F.read_shift(2),oe=F.l+ie,de=ne.f&&ne.f(F,ie,q);if(F.l=oe,D(de,ne,te))return}}}function t(F,D){switch(D.type){case"base64":return r(Hc(Jc(F)),D);case"binary":return r(Hc(F),D);case"buffer":case"array":return r(F,D)}throw"Unsupported type "+D.type}function r(F,D){if(!F)return F;var q=D||{},J=q.dense?[]:{},te="Sheet1",ne="",ie=0,oe={},de=[],ke=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Oe=q.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)q.Enum=K,e(F,function(ye,Le,Qe){switch(Qe){case 0:q.vers=ye,ye>=4096&&(q.qpro=!0);break;case 6:ae=ye;break;case 204:ye&&(ne=ye);break;case 222:ne=ye;break;case 15:case 51:q.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:Qe==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=q.dateNF||Ir[14],q.cellDates&&(ye[1].t="d",ye[1].v=r4(ye[1].v))),q.qpro&&ye[3]>ie&&(J["!ref"]=Yr(ae),oe[te]=J,de.push(te),J=q.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ie=ye[3],te=ne||"Sheet"+(ie+1),ne="");var ue=q.dense?(J[ye[0].r]||[])[ye[0].c]:J[Pr(ye[0])];if(ue){ue.t=ye[1].t,ue.v=ye[1].v,ye[1].z!=null&&(ue.z=ye[1].z),ye[1].f!=null&&(ue.f=ye[1].f);break}q.dense?(J[ye[0].r]||(J[ye[0].r]=[]),J[ye[0].r][ye[0].c]=ye[1]):J[Pr(ye[0])]=ye[1];break}},q);else if(F[2]==26||F[2]==14)q.Enum=H,F[2]==14&&(q.qpro=!0,F.l=0),e(F,function(ye,Le,Qe){switch(Qe){case 204:te=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>ie&&(J["!ref"]=Yr(ae),oe[te]=J,de.push(te),J=q.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ie=ye[3],te="Sheet"+(ie+1)),Oe>0&&ye[0].r>=Oe)break;q.dense?(J[ye[0].r]||(J[ye[0].r]=[]),J[ye[0].r][ye[0].c]=ye[1]):J[Pr(ye[0])]=ye[1],ae.e.c<ye[0].c&&(ae.e.c=ye[0].c),ae.e.r<ye[0].r&&(ae.e.r=ye[0].r);break;case 27:ye[14e3]&&(ke[ye[14e3][0]]=ye[14e3][1]);break;case 1537:ke[ye[0]]=ye[1],ye[0]==ie&&(te=ye[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(J["!ref"]=Yr(ae),oe[ne||te]=J,de.push(ne||te),!ke.length)return{SheetNames:de,Sheets:oe};for(var Te={},Se=[],fe=0;fe<ke.length;++fe)oe[de[fe]]?(Se.push(ke[fe]||de[fe]),Te[ke[fe]]=oe[ke[fe]]||oe[de[fe]]):(Se.push(ke[fe]),Te[ke[fe]]={"!ref":"A1"});return{SheetNames:Se,Sheets:Te}}function n(F,D){var q=D||{};if(+q.codepage>=0&&Ld(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var J=lc(),te=Pn(F["!ref"]),ne=Array.isArray(F),ie=[];zt(J,0,s(1030)),zt(J,6,c(te));for(var oe=Math.min(te.e.r,8191),de=te.s.r;de<=oe;++de)for(var ke=Zs(de),ae=te.s.c;ae<=te.e.c;++ae){de===te.s.r&&(ie[ae]=ls(ae));var Oe=ie[ae]+ke,Te=ne?(F[de]||[])[ae]:F[Oe];if(!(!Te||Te.t=="z"))if(Te.t=="n")(Te.v|0)==Te.v&&Te.v>=-32768&&Te.v<=32767?zt(J,13,m(de,ae,Te.v)):zt(J,14,x(de,ae,Te.v));else{var Se=Bh(Te);zt(J,15,f(de,ae,Se.slice(0,239)))}}return zt(J,1),J.end()}function a(F,D){var q=D||{};if(+q.codepage>=0&&Ld(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var J=lc();zt(J,0,o(F));for(var te=0,ne=0;te<F.SheetNames.length;++te)(F.Sheets[F.SheetNames[te]]||{})["!ref"]&&zt(J,27,Y(F.SheetNames[te],ne++));var ie=0;for(te=0;te<F.SheetNames.length;++te){var oe=F.Sheets[F.SheetNames[te]];if(!(!oe||!oe["!ref"])){for(var de=Pn(oe["!ref"]),ke=Array.isArray(oe),ae=[],Oe=Math.min(de.e.r,8191),Te=de.s.r;Te<=Oe;++Te)for(var Se=Zs(Te),fe=de.s.c;fe<=de.e.c;++fe){Te===de.s.r&&(ae[fe]=ls(fe));var ye=ae[fe]+Se,Le=ke?(oe[Te]||[])[fe]:oe[ye];if(!(!Le||Le.t=="z"))if(Le.t=="n")zt(J,23,L(Te,fe,ie,Le.v));else{var Qe=Bh(Le);zt(J,22,C(Te,fe,ie,Qe.slice(0,239)))}}++ie}}return zt(J,1),J.end()}function s(F){var D=Nt(2);return D.write_shift(2,F),D}function o(F){var D=Nt(26);D.write_shift(2,4096),D.write_shift(2,4),D.write_shift(4,0);for(var q=0,J=0,te=0,ne=0;ne<F.SheetNames.length;++ne){var ie=F.SheetNames[ne],oe=F.Sheets[ie];if(!(!oe||!oe["!ref"])){++te;var de=uc(oe["!ref"]);q<de.e.r&&(q=de.e.r),J<de.e.c&&(J=de.e.c)}}return q>8191&&(q=8191),D.write_shift(2,q),D.write_shift(1,te),D.write_shift(1,J),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(1,1),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(4,0),D}function l(F,D,q){var J={s:{c:0,r:0},e:{c:0,r:0}};return D==8&&q.qpro?(J.s.c=F.read_shift(1),F.l++,J.s.r=F.read_shift(2),J.e.c=F.read_shift(1),F.l++,J.e.r=F.read_shift(2),J):(J.s.c=F.read_shift(2),J.s.r=F.read_shift(2),D==12&&q.qpro&&(F.l+=2),J.e.c=F.read_shift(2),J.e.r=F.read_shift(2),D==12&&q.qpro&&(F.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(F){var D=Nt(8);return D.write_shift(2,F.s.c),D.write_shift(2,F.s.r),D.write_shift(2,F.e.c),D.write_shift(2,F.e.r),D}function u(F,D,q){var J=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(J[0].c=F.read_shift(1),J[3]=F.read_shift(1),J[0].r=F.read_shift(2),F.l+=2):(J[2]=F.read_shift(1),J[0].c=F.read_shift(2),J[0].r=F.read_shift(2)),J}function d(F,D,q){var J=F.l+D,te=u(F,D,q);if(te[1].t="s",q.vers==20768){F.l++;var ne=F.read_shift(1);return te[1].v=F.read_shift(ne,"utf8"),te}return q.qpro&&F.l++,te[1].v=F.read_shift(J-F.l,"cstr"),te}function f(F,D,q){var J=Nt(7+q.length);J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,F),J.write_shift(1,39);for(var te=0;te<J.length;++te){var ne=q.charCodeAt(te);J.write_shift(1,ne>=128?95:ne)}return J.write_shift(1,0),J}function h(F,D,q){var J=u(F,D,q);return J[1].v=F.read_shift(2,"i"),J}function m(F,D,q){var J=Nt(7);return J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,F),J.write_shift(2,q,"i"),J}function g(F,D,q){var J=u(F,D,q);return J[1].v=F.read_shift(8,"f"),J}function x(F,D,q){var J=Nt(13);return J.write_shift(1,255),J.write_shift(2,D),J.write_shift(2,F),J.write_shift(8,q,"f"),J}function v(F,D,q){var J=F.l+D,te=u(F,D,q);if(te[1].v=F.read_shift(8,"f"),q.qpro)F.l=J;else{var ne=F.read_shift(2);O(F.slice(F.l,F.l+ne),te),F.l+=ne}return te}function y(F,D,q){var J=D&32768;return D&=-32769,D=(J?F:0)+(D>=8192?D-16384:D),(J?"":"$")+(q?ls(D):Zs(D))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function O(F,D){No(F,0);for(var q=[],J=0,te="",ne="",ie="",oe="";F.l<F.length;){var de=F[F.l++];switch(de){case 0:q.push(F.read_shift(8,"f"));break;case 1:ne=y(D[0].c,F.read_shift(2),!0),te=y(D[0].r,F.read_shift(2),!1),q.push(ne+te);break;case 2:{var ke=y(D[0].c,F.read_shift(2),!0),ae=y(D[0].r,F.read_shift(2),!1);ne=y(D[0].c,F.read_shift(2),!0),te=y(D[0].r,F.read_shift(2),!1),q.push(ke+ae+":"+ne+te)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(F.read_shift(2));break;case 6:{for(var Oe="";de=F[F.l++];)Oe+=String.fromCharCode(de);q.push('"'+Oe.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:oe=q.pop(),ie=q.pop(),q.push(["AND","OR"][de-20]+"("+ie+","+oe+")");break;default:if(de<32&&_[de])oe=q.pop(),ie=q.pop(),q.push(ie+_[de]+oe);else if(w[de]){if(J=w[de][1],J==69&&(J=F[F.l++]),J>q.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+q.join("|")+"|");return}var Te=q.slice(-J);q.length-=J,q.push(w[de][0]+"("+Te.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}q.length==1?D[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function j(F){var D=[{c:0,r:0},{t:"n",v:0},0];return D[0].r=F.read_shift(2),D[3]=F[F.l++],D[0].c=F[F.l++],D}function B(F,D){var q=j(F);return q[1].t="s",q[1].v=F.read_shift(D-4,"cstr"),q}function C(F,D,q,J){var te=Nt(6+J.length);te.write_shift(2,F),te.write_shift(1,q),te.write_shift(1,D),te.write_shift(1,39);for(var ne=0;ne<J.length;++ne){var ie=J.charCodeAt(ne);te.write_shift(1,ie>=128?95:ie)}return te.write_shift(1,0),te}function k(F,D){var q=j(F);q[1].v=F.read_shift(2);var J=q[1].v>>1;if(q[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return q[1].v=J,q}function T(F,D){var q=j(F),J=F.read_shift(4),te=F.read_shift(4),ne=F.read_shift(2);if(ne==65535)return J===0&&te===3221225472?(q[1].t="e",q[1].v=15):J===0&&te===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var ie=ne&32768;return ne=(ne&32767)-16446,q[1].v=(1-ie*2)*(te*Math.pow(2,ne+32)+J*Math.pow(2,ne)),q}function L(F,D,q,J){var te=Nt(14);if(te.write_shift(2,F),te.write_shift(1,q),te.write_shift(1,D),J==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var ne=0,ie=0,oe=0,de=0;return J<0&&(ne=1,J=-J),ie=Math.log2(J)|0,J/=Math.pow(2,ie-31),de=J>>>0,(de&2147483648)==0&&(J/=2,++ie,de=J>>>0),J-=de,de|=2147483648,de>>>=0,J*=Math.pow(2,32),oe=J>>>0,te.write_shift(4,oe),te.write_shift(4,de),ie+=16383+(ne?32768:0),te.write_shift(2,ie),te}function R(F,D){var q=T(F);return F.l+=D-14,q}function S(F,D){var q=j(F),J=F.read_shift(4);return q[1].v=J>>6,q}function U(F,D){var q=j(F),J=F.read_shift(8,"f");return q[1].v=J,q}function Q(F,D){var q=U(F);return F.l+=D-10,q}function X(F,D){return F[F.l+D-1]==0?F.read_shift(D,"cstr"):""}function z(F,D){var q=F[F.l++];q>D-1&&(q=D-1);for(var J="";J.length<q;)J+=String.fromCharCode(F[F.l++]);return J}function W(F,D,q){if(!(!q.qpro||D<21)){var J=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var te=F.read_shift(D-21,"cstr");return[J,te]}}function G(F,D){for(var q={},J=F.l+D;F.l<J;){var te=F.read_shift(2);if(te==14e3){for(q[te]=[0,""],q[te][0]=F.read_shift(2);F[F.l];)q[te][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return q}function Y(F,D){var q=Nt(5+F.length);q.write_shift(2,14e3),q.write_shift(2,D);for(var J=0;J<F.length;++J){var te=F.charCodeAt(J);q[q.l++]=te>127?95:te}return q[q.l++]=0,q}var K={0:{n:"BOF",f:Ai},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:z},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:B},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:Q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:W},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function xSe(e){var t={},r=e.match(fl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Hr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=gR[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var vSe=function(){var e=cw("t"),t=cw("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Dn(o[1])},c=s.match(t);return c&&(l.s=xSe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),bSe=function(){var t=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),ySe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,wSe=/<(?:\w+:)?r>/,NSe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function QR(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Dn(ba(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ba(e),r&&(n.h=SR(n.t))):e.match(wSe)&&(n.r=ba(e),n.t=Dn(ba((e.replace(NSe,"").match(ySe)||[]).join("").replace(fl,""))),r&&(n.h=bSe(vSe(n.r)))),n):{t:""}}var ESe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,CSe=/<(?:\w+:)?(?:si|sstItem)>/g,_Se=/<\/(?:\w+:)?(?:si|sstItem)>/;function SSe(e,t){var r=[],n="";if(!e)return r;var a=e.match(ESe);if(a){n=a[2].replace(CSe,"").split(_Se);for(var s=0;s!=n.length;++s){var o=QR(n[s].trim(),t);o!=null&&(r[r.length]=o)}a=Hr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var kSe=/^\s|\s$|[\t\n\r]/;function zre(e,t){if(!t.bookSST)return"";var r=[ti];r[r.length]=Vt("sst",null,{xmlns:qg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(kSe)&&(s+=' xml:space="preserve"'),s+=">"+Aa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function jSe(e){return[e.read_shift(4),e.read_shift(4)]}function BSe(e,t){var r=[],n=!1;return $h(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function TSe(e,t){return t||(t=Nt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var ISe=HCe;function FSe(e){var t=lc();Dt(t,159,TSe(e));for(var r=0;r<e.length;++r)Dt(t,19,ISe(e[r]));return Dt(t,160),t.end()}function $re(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function xh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function OSe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=xh(e,4),t.U=xh(e,4),t.W=xh(e,4),t}function DSe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function PSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(DSe(e));return t}function RSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function LSe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=xh(e,4),t.U=xh(e,4),t.W=xh(e,4),t}function MSe(e){var t=LSe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Gre(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function qre(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function USe(e){var t=xh(e);switch(t.Minor){case 2:return[t.Minor,QSe(e)];case 3:return[t.Minor,HSe()];case 4:return[t.Minor,VSe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function QSe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Gre(e,r),a=qre(e,e.length-e.l);return{t:"Std",h:n,v:a}}function HSe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function VSe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(fl,function(s){var o=Hr(s);switch(AA(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function zSe(e,t){var r={},n=r.EncryptionVersionInfo=xh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Gre(e,a),t-=a,r.EncryptionVerifier=qre(e,t),r}function $Se(e){var t={},r=t.EncryptionVersionInfo=xh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function HR(e){var t=0,r,n=$re(e),a=n.length+1,s,o,l,c,u;for(r=Om(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var Kre=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=$re(o),c=s(l),u=l.length,d=Om(16),f=0;f!=16;++f)d[f]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,m=l[l.length-1],d[u]=a(m,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,g=15-l.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(l[u],h),--u,--g;return d}}(),GSe=function(e,t,r,n,a){a||(a=t),n||(n=Kre(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},qSe=function(e){var t=0,r=Kre(e);return function(n){var a=GSe("",n,t,r);return t=a[1],a[0]}};function KSe(e,t,r,n){var a={key:Ai(e),verificationBytes:Ai(e)};return r.password&&(a.verifier=HR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=qSe(r.password)),a}function WSe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=$Se(e):n.Data=zSe(e,t),n}function XSe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?WSe(e,t-2,n):KSe(e,r.biff>=8?t:t-2,r,n),n}var Wre=function(){function e(a,s){switch(s.type){case"base64":return t(Jc(a),s);case"binary":return t(a,s);case"buffer":return t(dn&&Buffer.isBuffer(a)?a.toString("binary"):Xm(a),s);case"array":return t(_g(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[Pr({r:f,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=Yr(u),l}function r(a,s){return Ym(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=Pn(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Pr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Bh(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function YSe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Aw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function JSe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=a-s;if(o===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function ZSe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function z_(e,t){if(t===0)return e;var r=JSe(YSe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Aw(ZSe(r))}var Xre=6,eke=15,tke=1,el=Xre;function hw(e){return Math.floor((e+Math.round(128/el)/256)*el)}function mw(e){return Math.floor((e-5)/el*100+.5)/100}function $_(e){return Math.round((e*el+5)/el*256)/256}function yB(e){return $_(mw(hw(e)))}function VR(e){var t=Math.abs(e-yB(e)),r=el;if(t>.005)for(el=tke;el<eke;++el)Math.abs(e-yB(e))<=t&&(t=Math.abs(e-yB(e)),r=el);el=r}function Dm(e){e.width?(e.wpx=hw(e.width),e.wch=mw(e.wpx),e.MDW=el):e.wpx?(e.wch=mw(e.wpx),e.width=$_(e.wch),e.MDW=el):typeof e.wch=="number"&&(e.width=$_(e.wch),e.wpx=hw(e.width),e.MDW=el),e.customWidth&&delete e.customWidth}var rke=96,Yre=rke;function pw(e){return e*96/Yre}function mb(e){return e*Yre/96}var nke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ake(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(fl)||[]).forEach(function(o){var l=Hr(o);switch(AA(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Ma(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Ma(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function ske(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(fl)||[]).forEach(function(o){var l=Hr(o);switch(AA(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function ike(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(fl)||[]).forEach(function(o){var l=Hr(o);switch(AA(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=ba(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Ma(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Ma(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Ma(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Ma(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Ma(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Ma(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Ma(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=gR[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Ma(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=ag[a.color.index];a.color.index==81&&(c=ag[1]),c||(c=ag[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=z_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function oke(e,t,r){t.NumberFmt=[];for(var n=Ds(Ir),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Ir[n[a]];var s=e[0].match(fl);if(s)for(a=0;a<s.length;++a){var o=Hr(s[a]);switch(AA(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Dn(ba(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}gh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function lke(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Vt("numFmt",null,{numFmtId:n,formatCode:Aa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Vt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var lC=["numFmtId","fillId","fontId","borderId","xfId"],cC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function cke(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(fl)||[]).forEach(function(s){var o=Hr(s),l=0;switch(AA(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<lC.length;++l)n[lC[l]]&&(n[lC[l]]=parseInt(n[lC[l]],10));for(l=0;l<cC.length;++l)n[cC[l]]&&(n[cC[l]]=Ma(n[cC[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Ma(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function uke(e){var t=[];return t[t.length]=Vt("cellXfs",null),e.forEach(function(r){t[t.length]=Vt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Vt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var dke=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&oke(f,d,u),(f=l.match(a))&&ike(f,d,c,u),(f=l.match(n))&&ske(f,d,c,u),(f=l.match(s))&&ake(f,d,c,u),(f=l.match(r))&&cke(f,d,u),d}}();function Jre(e,t){var r=[ti,Vt("styleSheet",null,{xmlns:qg[0],"xmlns:vt":Bi.vt})],n;return e.SSF&&(n=lke(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=uke(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function fke(e,t){var r=e.read_shift(2),n=ol(e);return[r,n]}function Ake(e,t,r){r||(r=Nt(6+4*t.length)),r.write_shift(2,e),eo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function hke(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=WCe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=KCe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ol(e),n}function mke(e,t){t||(t=Nt(153)),t.write_shift(2,e.sz*20),XCe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Q_(e.color,t);var n=0;return n=2,t.write_shift(1,n),eo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var pke=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],wB,gke=cl;function SV(e,t){t||(t=Nt(84)),wB||(wB=e4(pke));var r=wB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Q_({auto:1},t),Q_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function xke(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Zre(e,t,r){r||(r=Nt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function hy(e,t){return t||(t=Nt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var vke=cl;function bke(e,t){return t||(t=Nt(51)),t.write_shift(1,0),hy(null,t),hy(null,t),hy(null,t),hy(null,t),hy(null,t),t.length>t.l?t.slice(0,t.l):t}function yke(e,t){return t||(t=Nt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),U_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function wke(e,t,r){var n=Nt(2052);return n.write_shift(4,e),U_(t,n),U_(r,n),n.length>n.l?n.slice(0,n.l):n}function Nke(e,t,r){var n={};n.NumberFmt=[];for(var a in Ir)n.NumberFmt[a]=Ir[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return $h(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],gh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=z_(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Eke(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Dt(e,615,Gd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Dt(e,44,Ake(a,t[a]))}),Dt(e,616))}}function Cke(e){var t=1;Dt(e,611,Gd(t)),Dt(e,43,mke({sz:12,color:{theme:1},name:"Calibri",family:2})),Dt(e,612)}function _ke(e){var t=2;Dt(e,603,Gd(t)),Dt(e,45,SV({patternType:"none"})),Dt(e,45,SV({patternType:"gray125"})),Dt(e,604)}function Ske(e){var t=1;Dt(e,613,Gd(t)),Dt(e,46,bke()),Dt(e,614)}function kke(e){var t=1;Dt(e,626,Gd(t)),Dt(e,47,Zre({numFmtId:0},65535)),Dt(e,627)}function jke(e,t){Dt(e,617,Gd(t.length)),t.forEach(function(r){Dt(e,47,Zre(r,0))}),Dt(e,618)}function Bke(e){var t=1;Dt(e,619,Gd(t)),Dt(e,48,yke({xfId:0,name:"Normal"})),Dt(e,620)}function Tke(e){var t=0;Dt(e,505,Gd(t)),Dt(e,506)}function Ike(e){var t=0;Dt(e,508,wke(t,"TableStyleMedium9","PivotStyleMedium4")),Dt(e,509)}function Fke(e,t){var r=lc();return Dt(r,278),Eke(r,e.SSF),Cke(r),_ke(r),Ske(r),kke(r),jke(r,t.cellXfs),Bke(r),Tke(r),Ike(r),Dt(r,279),r.end()}var Oke=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Dke(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(fl)||[]).forEach(function(a){var s=Hr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[Oke.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Pke(){}function Rke(){}var Lke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Mke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Uke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Qke(e,t,r){t.themeElements={};var n;[["clrScheme",Lke,Dke],["fontScheme",Mke,Pke],["fmtScheme",Uke,Rke]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var Hke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function ene(e,t){(!e||e.length===0)&&(e=zR());var r,n={};if(!(r=e.match(Hke)))throw new Error("themeElements not found in theme");return Qke(r[0],n,t),n.raw=e,n}function zR(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ti];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Vke(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var o;try{o=Gte(s,{type:"array"})}catch{return}var l=Vc(o,"theme/theme/theme1.xml",!0);if(l)return ene(l,r)}}function zke(e){return e.read_shift(4)}function $ke(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Gke(e,4);break;case 2:t.xclrValue=Fre(e);break;case 3:t.xclrValue=zke(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Gke(e,t){return cl(e,t)}function qke(e,t){return cl(e,t)}function Kke(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=$ke(e);break;case 6:n[1]=qke(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Wke(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(Kke(e,r-e.l));return{ixfe:n,ext:s}}function Xke(e,t){t.forEach(function(r){r[0]})}function Yke(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ol(e)}}function Jke(e){var t=Nt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),eo(e.name,t),t.slice(0,t.l)}function Zke(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function e4e(e){var t=Nt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function t4e(e,t){var r=Nt(8+2*t.length);return r.write_shift(4,e),eo(t,r),r.slice(0,r.l)}function r4e(e){return e.l+=4,e.read_shift(4)!=0}function n4e(e,t){var r=Nt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function a4e(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return $h(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function s4e(){var e=lc();return Dt(e,332),Dt(e,334,Gd(1)),Dt(e,335,Jke({name:"XLDAPR",version:12e4,flags:3496657072})),Dt(e,336),Dt(e,339,t4e(1,"XLDAPR")),Dt(e,52),Dt(e,35,Gd(514)),Dt(e,4096,Gd(0)),Dt(e,4097,Mu(1)),Dt(e,36),Dt(e,53),Dt(e,340),Dt(e,337,n4e(1)),Dt(e,51,e4e([[1,0]])),Dt(e,338),Dt(e,333),e.end()}function i4e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,o;return e.replace(fl,function(l){var c=Hr(l);switch(AA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function tne(){var e=[ti];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function o4e(e){var t=[];if(!e)return t;var r=1;return(e.match(fl)||[]).forEach(function(n){var a=Hr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function l4e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Pr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function c4e(e,t,r){var n=[];return $h(e,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function u4e(e,t,r,n){if(!e)return e;var a=n||{},s=!1;$h(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function d4e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var vv=1024;function rne(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Vt("xml",null,{"xmlns:v":Lc.v,"xmlns:o":Lc.o,"xmlns:x":Lc.x,"xmlns:mv":Lc.mv}).replace(/\/>/,">"),Vt("o:shapelayout",Vt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Vt("v:shapetype",[Vt("v:stroke",null,{joinstyle:"miter"}),Vt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];vv<e*1e3;)vv+=1e3;return t.forEach(function(s){var o=cs(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Vt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Vt("v:fill",c,l),d={on:"t",obscured:"t"};++vv,a=a.concat(["<v:shape"+uw({id:"_x0000_s"+vv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Vt("v:shadow",null,d),Vt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Eo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Eo("x:AutoFill","False"),Eo("x:Row",String(o.r)),Eo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function kV(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(o){var l=cs(o.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[o.ref]=s;var c=Pn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=Yr(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function f4e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Hr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=cs(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&QR(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function nne(e){var t=[ti,Vt("comments",null,{xmlns:qg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=Aa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Aa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(Eo("t",Aa(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;t.push(Eo("t",Aa(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function A4e(e,t){var r=[],n=!1,a={},s=0;return e.replace(fl,function(l,c){var u=Hr(l);switch(AA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function h4e(e,t,r){var n=[ti,Vt("ThreadedComments",null,{xmlns:Bi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Vt("threadedComment",Eo("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function m4e(e,t){var r=[],n=!1;return e.replace(fl,function(s){var o=Hr(s);switch(AA(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function p4e(e){var t=[ti,Vt("personList",null,{xmlns:Bi.TCMNT,"xmlns:x":qg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Vt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function g4e(e){var t={};t.iauthor=e.read_shift(4);var r=Yg(e);return t.rfx=r.s,t.ref=Pr(r.s),e.l+=16,t}function x4e(e,t){return t==null&&(t=Nt(36)),t.write_shift(4,e[1].iauthor),i1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var v4e=ol;function b4e(e){return eo(e.slice(0,54))}function y4e(e,t){var r=[],n=[],a={},s=!1;return $h(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function w4e(e){var t=lc(),r=[];return Dt(t,628),Dt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Dt(t,632,b4e(a.a)))})}),Dt(t,631),Dt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:cs(n[0]),e:cs(n[0])};Dt(t,635,x4e([s,a])),a.t&&a.t.length>0&&Dt(t,637,zCe(a)),Dt(t,636),delete a.iauthor})}),Dt(t,634),Dt(t,629),t.end()}var N4e="application/vnd.ms-office.vbaProject";function E4e(e){var t=yr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");yr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),yr.write(t)}function C4e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&yr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var ane=["xlsb","xlsm","xlam","biff8","xla"];function _4e(){return{"!type":"dialog"}}function S4e(){return{"!type":"dialog"}}function k4e(){return{"!type":"macro"}}function j4e(){return{"!type":"macro"}}var Uv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+ls(d)+(c?"":"$")+Zs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),$R=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,GR=function(){return function(t,r){return t.replace($R,function(n,a,s,o,l,c){var u=IR(o)-(s?0:r.c),d=TR(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function sne(e,t){return e.replace($R,function(r,n,a,s,o,l){return n+(a=="$"?a+s:ls(IR(s)+t.c))+(o=="$"?o+l:Zs(TR(l)+t.r))})}function B4e(e,t,r){var n=uc(t),a=n.s,s=cs(r),o={r:s.r-a.r,c:s.c-a.c};return sne(e,o)}function T4e(e){return e.length!=1}function jV(e){return e.replace(/_xlfn\./g,"")}function ci(e){e.l+=1}function Pm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function ine(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return one(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=Pm(e),l=Pm(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function one(e){var t=Pm(e),r=Pm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function I4e(e,t,r){if(r.biff<8)return one(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Pm(e),o=Pm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function lne(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return F4e(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Pm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function F4e(e){var t=Pm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function O4e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function D4e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return P4e(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function P4e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function R4e(e,t,r){var n=(e[e.l++]&96)>>5,a=ine(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function L4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=ine(e,s,r);return[n,a,o]}function M4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function U4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function Q4e(e,t,r){var n=(e[e.l++]&96)>>5,a=I4e(e,t-1,r);return[n,a]}function H4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function BV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function V4e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function z4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function $4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function G4e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function q4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function cne(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function K4e(e){return e.read_shift(2),cne(e)}function W4e(e){return e.read_shift(2),cne(e)}function X4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=lne(e,0,r);return[n,a]}function Y4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=D4e(e,0,r);return[n,a]}function J4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=lne(e,0,r);return[n,a,s]}function Z4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[r3e[a],fne[a],n]}function eje(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:tje(e);return[a,(s[0]===0?fne:t3e)[s[1]]]}function tje(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function rje(e,t,r){e.l+=r&&r.biff==2?3:4}function nje(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function aje(e){return e.l++,Gh[e.read_shift(1)]}function sje(e){return e.l++,e.read_shift(2)}function ije(e){return e.l++,e.read_shift(1)!==0}function oje(e){return e.l++,nl(e)}function lje(e,t,r){return e.l++,lN(e,t-1,r)}function cje(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Gs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Gh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=nl(e);break;case 2:r[1]=Jg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function uje(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Yg:n4)(e));return a}function dje(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=cje(e,r.biff);return o}function fje(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function Aje(e,t,r){if(r.biff==5)return hje(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function hje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function mje(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function pje(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function gje(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function xje(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var vje=cl,bje=cl,yje=cl;function uN(e,t,r){return e.l+=2,[O4e(e)]}function qR(e){return e.l+=6,[]}var wje=uN,Nje=qR,Eje=qR,Cje=uN;function une(e){return e.l+=2,[Ai(e),e.read_shift(2)&1]}var _je=uN,Sje=une,kje=qR,jje=uN,Bje=uN,Tje=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Ije(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),o=Tje[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:s}}function Fje(e){return e.l+=2,[e.read_shift(4)]}function Oje(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Dje(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Pje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Rje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Lje(e){return e.l+=4,[0,0]}var TV={1:{n:"PtgExp",f:nje},2:{n:"PtgTbl",f:yje},3:{n:"PtgAdd",f:ci},4:{n:"PtgSub",f:ci},5:{n:"PtgMul",f:ci},6:{n:"PtgDiv",f:ci},7:{n:"PtgPower",f:ci},8:{n:"PtgConcat",f:ci},9:{n:"PtgLt",f:ci},10:{n:"PtgLe",f:ci},11:{n:"PtgEq",f:ci},12:{n:"PtgGe",f:ci},13:{n:"PtgGt",f:ci},14:{n:"PtgNe",f:ci},15:{n:"PtgIsect",f:ci},16:{n:"PtgUnion",f:ci},17:{n:"PtgRange",f:ci},18:{n:"PtgUplus",f:ci},19:{n:"PtgUminus",f:ci},20:{n:"PtgPercent",f:ci},21:{n:"PtgParen",f:ci},22:{n:"PtgMissArg",f:ci},23:{n:"PtgStr",f:lje},26:{n:"PtgSheet",f:Oje},27:{n:"PtgEndSheet",f:Dje},28:{n:"PtgErr",f:aje},29:{n:"PtgBool",f:ije},30:{n:"PtgInt",f:sje},31:{n:"PtgNum",f:oje},32:{n:"PtgArray",f:H4e},33:{n:"PtgFunc",f:Z4e},34:{n:"PtgFuncVar",f:eje},35:{n:"PtgName",f:fje},36:{n:"PtgRef",f:X4e},37:{n:"PtgArea",f:R4e},38:{n:"PtgMemArea",f:mje},39:{n:"PtgMemErr",f:vje},40:{n:"PtgMemNoMem",f:bje},41:{n:"PtgMemFunc",f:pje},42:{n:"PtgRefErr",f:gje},43:{n:"PtgAreaErr",f:M4e},44:{n:"PtgRefN",f:Y4e},45:{n:"PtgAreaN",f:Q4e},46:{n:"PtgMemAreaN",f:Pje},47:{n:"PtgMemNoMemN",f:Rje},57:{n:"PtgNameX",f:Aje},58:{n:"PtgRef3d",f:J4e},59:{n:"PtgArea3d",f:L4e},60:{n:"PtgRefErr3d",f:xje},61:{n:"PtgAreaErr3d",f:U4e},255:{}},Mje={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Uje={1:{n:"PtgElfLel",f:une},2:{n:"PtgElfRw",f:jje},3:{n:"PtgElfCol",f:wje},6:{n:"PtgElfRwV",f:Bje},7:{n:"PtgElfColV",f:Cje},10:{n:"PtgElfRadical",f:_je},11:{n:"PtgElfRadicalS",f:kje},13:{n:"PtgElfColS",f:Nje},15:{n:"PtgElfColSV",f:Eje},16:{n:"PtgElfRadicalLel",f:Sje},25:{n:"PtgList",f:Ije},29:{n:"PtgSxName",f:Fje},255:{}},Qje={0:{n:"PtgAttrNoop",f:Lje},1:{n:"PtgAttrSemi",f:q4e},2:{n:"PtgAttrIf",f:$4e},4:{n:"PtgAttrChoose",f:V4e},8:{n:"PtgAttrGoto",f:z4e},16:{n:"PtgAttrSum",f:rje},32:{n:"PtgAttrBaxcel",f:BV},33:{n:"PtgAttrBaxcel",f:BV},64:{n:"PtgAttrSpace",f:K4e},65:{n:"PtgAttrSpaceSemi",f:W4e},128:{n:"PtgAttrIfError",f:G4e},255:{}};function dN(e,t,r,n){if(n.biff<8)return cl(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=dje(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=uje(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&s.push(cl(e,t)),s}function fN(e,t,r){for(var n=e.l+t,a,s,o=[];n!=e.l;)t=n-e.l,s=e[e.l],a=TV[s]||TV[Mje[s]],(s===24||s===25)&&(a=(s===24?Uje:Qje)[e[e.l+1]]),!a||!a.f?cl(e,t):o.push([a.n,a.f(e,t,r)]);return o}function Hje(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Vje={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function zje(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function dne(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function IV(e,t,r){var n=dne(e,t,r);return n=="#REF"?n:zje(n,r)}function Yo(e,t,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=js(" ",e[0][x][1][1]);break;case 1:v=js("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+Vje[_[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=N2(_[1][1],o,a),l.push(E2(d,s));break;case"PtgRefN":d=r?N2(_[1][1],r,a):_[1][1],l.push(E2(d,s));break;case"PtgRef3d":f=_[1][1],d=N2(_[1][2],o,a),g=IV(n,f,a),l.push(g+"!"+E2(d,s));break;case"PtgFunc":case"PtgFuncVar":var O=_[1][0],j=_[1][1];O||(O=0),O&=127;var B=O==0?[]:l.slice(-O);l.length-=O,j==="User"&&(j=B.shift()),l.push(j+"("+B.join(",")+")");break;case"PtgBool":l.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(_[1]);break;case"PtgNum":l.push(String(_[1]));break;case"PtgStr":l.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(_[1]);break;case"PtgAreaN":m=oV(_[1][1],r?{s:r}:o,a),l.push(xB(m,a));break;case"PtgArea":m=oV(_[1][1],o,a),l.push(xB(m,a));break;case"PtgArea3d":f=_[1][1],m=_[1][2],g=IV(n,f,a),l.push(g+"!"+xB(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var C=(n.names||[])[h-1]||(n[0]||[])[h],k=C?C.Name:"SH33TJSNAME"+String(h);k&&k.slice(0,6)=="_xlfn."&&!a.xlfn&&(k=k.slice(6)),l.push(k);break;case"PtgNameX":var T=_[1][1];h=_[1][2];var L;if(a.biff<=5)T<0&&(T=-T),n[T]&&(L=n[T][h]);else{var R="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][h]&&n[T][h].itab>0&&(R=n.SheetNames[n[T][h].itab-1]+"!"):R=n.SheetNames[h-1]+"!"),n[T]&&n[T][h])R+=n[T][h].Name;else if(n[0]&&n[0][h])R+=n[0][h].Name;else{var S=(dne(n,T,a)||"").split(";;");S[h-1]?R=S[h-1]:R+="SH33TJSERRX"}l.push(R);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var U="(",Q=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:U=js(" ",e[0][x][1][1])+U;break;case 3:U=js("\r",e[0][x][1][1])+U;break;case 4:Q=js(" ",e[0][x][1][1])+Q;break;case 5:Q=js("\r",e[0][x][1][1])+Q;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(U+l.pop()+Q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var X={c:r.c,r:r.r};if(n.sharedf[Pr(d)]){var z=n.sharedf[Pr(d)];l.push(Yo(z,o,X,n,a))}else{var W=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Yo(u[1],o,X,n,a)),W=!0;break}W||l.push(_[1])}break;case"PtgArray":l.push("{"+Hje(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&G.indexOf(e[0][y][0])==-1){_=e[0][x];var Y=!0;switch(_[1][0]){case 4:Y=!1;case 0:v=js(" ",_[1][1]);break;case 5:Y=!1;case 1:v=js("\r",_[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}l.push((Y?v:"")+l.pop()+(Y?"":v)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function $je(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],cl(e,t-2)];var l=fN(e,o,r);return t!==o+a&&(s=dN(e,t-o-a,l,r)),e.l=n,[l,s]}function Gje(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],cl(e,t-2)];var l=fN(e,o,r);return t!==o+a&&(s=dN(e,t-o-a,l,r)),e.l=n,[l,s]}function qje(e,t,r,n){var a=e.l+t,s=fN(e,n,r),o;return a!==e.l&&(o=dN(e,a-e.l,s,r)),[s,o]}function Kje(e,t,r){var n=e.l+t,a,s=e.read_shift(2),o=fN(e,s,r);return s==65535?[[],cl(e,t-2)]:(t!==s+2&&(a=dN(e,n-s-2,o,r)),[o,a])}function Wje(e){var t;if(oh(e,e.l+6)!==65535)return[nl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Xje(e){if(e==null){var t=Nt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Sg(e);return Sg(0)}function NB(e,t,r){var n=e.l+t,a=hA(e);r.biff==2&&++e.l;var s=Wje(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Gje(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function Yje(e,t,r,n,a){var s=jg(t,r,a),o=Xje(e.v),l=Nt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Nt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Zi([s,o,l,u]);return f}function a4(e,t,r){var n=e.read_shift(4),a=fN(e,n,r),s=e.read_shift(4),o=s>0?dN(e,s,a,r):null;return[a,o]}var Jje=a4,s4=a4,Zje=a4,e3e=a4,t3e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},fne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},r3e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function FV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function n3e(e){var t="of:="+e.replace($R,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function EB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function a3e(e){return e.replace(/\./,"!")}var _2={},Qv={},S2=typeof Map<"u";function KR(e,t,r){var n=0,a=e.length;if(r){if(S2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=S2?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(S2?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function i4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(el=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=mw(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=$_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function og(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Jm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){gh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Ane(e,t,r,n,a,s){try{n.cellNF&&(e.z=Ir[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=za(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Ir[t]==null&&gh(tCe[t]||"General",t),e.t==="e")e.w=e.w||Gh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lw(e.v);else if(e.t==="d"){var o=Fi(e.v);(o|0)===o?e.w=o.toString(10):e.w=lw(o)}else{if(e.v===void 0)return"";e.w=Cg(e.v,Qv)}else e.t==="d"?e.w=Yu(t,Fi(e.v),Qv):e.w=Yu(t,e.v,Qv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=z_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=z_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function s3e(e,t,r){if(e&&e["!ref"]){var n=Pn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function i3e(e,t){var r=Pn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Yr(r))}var o3e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,l3e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,c3e=/<(?:\w:)?hyperlink [^>]*>/mg,u3e=/"(\w*:\w*)"/,d3e=/<(?:\w:)?col\b[^>]*[\/]?>/g,f3e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,A3e=/<(?:\w:)?pageMargins[^>]*\/>/g,hne=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,h3e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,m3e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function p3e(e,t,r,n,a,s,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(l3e);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(hne);h?WR(h[0],l,a,r):(h=u.match(h3e))&&x3e(h[0],h[1]||"",l,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(u3e);g&&i3e(l,g[1])}var x=u.match(m3e);x&&x[1]&&T3e(x[1],a);var v=[];if(t.cellStyles){var y=u.match(d3e);y&&_3e(v,y)}f&&O3e(f[1],l,t,c,s,o);var w=d.match(f3e);w&&(l["!autofilter"]=k3e(w[0]));var _=[],O=d.match(o3e);if(O)for(m=0;m!=O.length;++m)_[m]=Pn(O[m].slice(O[m].indexOf('"')+1));var j=d.match(c3e);j&&N3e(l,j,n);var B=d.match(A3e);if(B&&(l["!margins"]=E3e(Hr(B[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Yr(c)),t.sheetRows>0&&l["!ref"]){var C=Pn(l["!ref"]);t.sheetRows<=+C.e.r&&(C.e.r=t.sheetRows-1,C.e.r>c.e.r&&(C.e.r=c.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>c.e.c&&(C.e.c=c.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Yr(C))}return v.length>0&&(l["!cols"]=v),_.length>0&&(l["!merges"]=_),l}function g3e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Yr(e[r])+'"/>';return t+"</mergeCells>"}function WR(e,t,r,n){var a=Hr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Dn(ba(a.codeName)))}function x3e(e,t,r,n,a){WR(e.slice(0,e.indexOf(">")),r,n,a)}function v3e(e,t,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Xf(Aa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Vt("outlinePr",null,u)}!s&&!l||(a[a.length]=Vt("sheetPr",l,o))}var b3e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],y3e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function w3e(e){var t={sheet:1};return b3e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),y3e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=HR(e.password).toString(16).toUpperCase()),Vt("sheetProtection",null,t)}function N3e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Hr(ba(t[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Dn(s.location))):(s.Target="#"+Dn(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Pn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Pr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function E3e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function C3e(e){return og(e),Vt("pageMargins",null,e)}function _3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Hr(t[n],!0);a.hidden&&(a.hidden=Ma(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,VR(a.width)),Dm(a);s<=o;)e[s++]=$a(a)}}function S3e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Vt("col",null,i4(a,n)));return r[r.length]="</cols>",r.join("")}function k3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function j3e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Yr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=uc(a);o.s.r==o.e.r&&(o.e.r=uc(t["!ref"]).e.r,a=Yr(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Vt("autoFilter",null,{ref:a})}var B3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function T3e(e,t){t.Views||(t.Views=[{}]),(e.match(B3e)||[]).forEach(function(r,n){var a=Hr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function I3e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Vt("sheetViews",Vt("sheetView",null,a),{})}function F3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Gh[e.v];break;case"d":n&&n.cellDates?a=za(e.v,-1).toISOString():(e=$a(e),e.t="n",a=""+(e.v=Fi(za(e.v)))),typeof e.z>"u"&&(e.z=Ir[14]);break;default:a=e.v;break}var l=Eo("v",Aa(a)),c={r:t},u=Jm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Eo("v",""+KR(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Vt("f",Aa(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Vt("c",l,c)}var O3e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=cw("v"),o=cw("f");return function(c,u,d,f,h,m){for(var g=0,x="",v=[],y=[],w=0,_=0,O=0,j="",B,C,k=0,T=0,L,R,S=0,U=0,Q=Array.isArray(m.CellXf),X,z=[],W=[],G=Array.isArray(u),Y=[],K={},H=!1,F=!!d.sheetStubs,D=c.split(t),q=0,J=D.length;q!=J;++q){x=D[q].trim();var te=x.length;if(te!==0){var ne=0;e:for(g=0;g<te;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(C=Hr(x.slice(ne,g),!0),k=C.r!=null?parseInt(C.r,10):k+1,T=-1,d.sheetRows&&d.sheetRows<k)continue;K={},H=!1,C.ht&&(H=!0,K.hpt=parseFloat(C.ht),K.hpx=mb(K.hpt)),C.hidden=="1"&&(H=!0,K.hidden=!0),C.outlineLevel!=null&&(H=!0,K.level=+C.outlineLevel),H&&(Y[k-1]=K)}break;case"<":ne=g;break}if(ne>=g)break;if(C=Hr(x.slice(ne,g),!0),k=C.r!=null?parseInt(C.r,10):k+1,T=-1,!(d.sheetRows&&d.sheetRows<k)){f.s.r>k-1&&(f.s.r=k-1),f.e.r<k-1&&(f.e.r=k-1),d&&d.cellStyles&&(K={},H=!1,C.ht&&(H=!0,K.hpt=parseFloat(C.ht),K.hpx=mb(K.hpt)),C.hidden=="1"&&(H=!0,K.hidden=!0),C.outlineLevel!=null&&(H=!0,K.level=+C.outlineLevel),H&&(Y[k-1]=K)),v=x.slice(g).split(e);for(var ie=0;ie!=v.length&&v[ie].trim().charAt(0)=="<";++ie);for(v=v.slice(ie),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,O=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,j=y[1],_=0;_!=j.length&&!((O=j.charCodeAt(_)-64)<1||O>26);++_)w=26*w+O;--w,T=w}else++T;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,C=Hr(x.slice(0,_),!0),C.r||(C.r=Pr({r:k-1,c:T})),j=x.slice(_),B={t:""},(y=j.match(s))!=null&&y[1]!==""&&(B.v=Dn(y[1])),d.cellFormula){if((y=j.match(o))!=null&&y[1]!==""){if(B.f=Dn(ba(y[1])).replace(/\r\n/g,`
`),d.xlfn||(B.f=jV(B.f)),y[0].indexOf('t="array"')>-1)B.F=(j.match(a)||[])[1],B.F.indexOf(":")>-1&&z.push([Pn(B.F),B.F]);else if(y[0].indexOf('t="shared"')>-1){R=Hr(y[0]);var oe=Dn(ba(y[1]));d.xlfn||(oe=jV(oe)),W[parseInt(R.si,10)]=[R,oe,C.r]}}else(y=j.match(/<f[^>]*\/>/))&&(R=Hr(y[0]),W[R.si]&&(B.f=B4e(W[R.si][1],W[R.si][2],C.r)));var de=cs(C.r);for(_=0;_<z.length;++_)de.r>=z[_][0].s.r&&de.r<=z[_][0].e.r&&de.c>=z[_][0].s.c&&de.c<=z[_][0].e.c&&(B.F=z[_][1])}if(C.t==null&&B.v===void 0)if(B.f||B.F)B.v=0,B.t="n";else if(F)B.t="z";else continue;else B.t=C.t||"n";switch(f.s.c>T&&(f.s.c=T),f.e.c<T&&(f.e.c=T),B.t){case"n":if(B.v==""||B.v==null){if(!F)continue;B.t="z"}else B.v=parseFloat(B.v);break;case"s":if(typeof B.v>"u"){if(!F)continue;B.t="z"}else L=_2[parseInt(B.v,10)],B.v=L.t,B.r=L.r,d.cellHTML&&(B.h=L.h);break;case"str":B.t="s",B.v=B.v!=null?ba(B.v):"",d.cellHTML&&(B.h=SR(B.v));break;case"inlineStr":y=j.match(n),B.t="s",y!=null&&(L=QR(y[1]))?(B.v=L.t,d.cellHTML&&(B.h=L.h)):B.v="";break;case"b":B.v=Ma(B.v);break;case"d":d.cellDates?B.v=za(B.v,1):(B.v=Fi(za(B.v,1)),B.t="n");break;case"e":(!d||d.cellText!==!1)&&(B.w=B.v),B.v=pre[B.v];break}if(S=U=0,X=null,Q&&C.s!==void 0&&(X=m.CellXf[C.s],X!=null&&(X.numFmtId!=null&&(S=X.numFmtId),d.cellStyles&&X.fillId!=null&&(U=X.fillId))),Ane(B,S,U,d,h,m),d.cellDates&&Q&&B.t=="n"&&n1(Ir[S])&&(B.t="d",B.v=r4(B.v)),C.cm&&d.xlmeta){var ke=(d.xlmeta.Cell||[])[+C.cm-1];ke&&ke.type=="XLDAPR"&&(B.D=!0)}if(G){var ae=cs(C.r);u[ae.r]||(u[ae.r]=[]),u[ae.r][ae.c]=B}else u[C.r]=B}}}}Y.length>0&&(u["!rows"]=Y)}}();function D3e(e,t,r,n){var a=[],s=[],o=Pn(e["!ref"]),l="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=ls(h);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=Zs(f),h=o.s.c;h<=o.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(l=F3e(w,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=pw(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=Vt("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=pw(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=Vt("row","",x));return a.join("")}function mne(e,t,r,n){var a=[ti,Vt("worksheet",null,{xmlns:qg[0],"xmlns:r":Bi.r})],s=r.SheetNames[e],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Pn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Yr(d)}n||(n={}),c["!comments"]=[];var f=[];v3e(c,r,e,t,a),a[a.length]=Vt("dimension",null,{ref:u}),a[a.length]=I3e(c,t,e,r),t.sheetFormat&&(a[a.length]=Vt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=S3e(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=D3e(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=w3e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=j3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=g3e(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=da(n,-1,Aa(x[1].Target).replace(/#.*$/,""),gn.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=Aa(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=Aa(x[1].Tooltip)),a[a.length]=Vt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=C3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Eo("ignoredErrors",Vt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=da(n,-1,"../drawings/drawing"+(e+1)+".xml",gn.DRAW),a[a.length]=Vt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=da(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",gn.VML),a[a.length]=Vt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function P3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function R3e(e,t,r){var n=Nt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=pw(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Pr(u)];g&&(f<0&&(f=m),h=m)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function L3e(e,t,r,n){var a=R3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Dt(e,0,a)}var M3e=Yg,U3e=i1;function Q3e(){}function H3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=$Ce(e),r}function V3e(e,t,r){r==null&&(r=Nt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Q_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),dre(e,r),r.slice(0,r.l)}function z3e(e){var t=ed(e);return[t]}function $3e(e,t,r){return r==null&&(r=Nt(8)),Kg(t,r)}function G3e(e){var t=Wg(e);return[t]}function q3e(e,t,r){return r==null&&(r=Nt(4)),Xg(t,r)}function K3e(e){var t=ed(e),r=e.read_shift(1);return[t,r,"b"]}function W3e(e,t,r){return r==null&&(r=Nt(9)),Kg(t,r),r.write_shift(1,e.v?1:0),r}function X3e(e){var t=Wg(e),r=e.read_shift(1);return[t,r,"b"]}function Y3e(e,t,r){return r==null&&(r=Nt(5)),Xg(t,r),r.write_shift(1,e.v?1:0),r}function J3e(e){var t=ed(e),r=e.read_shift(1);return[t,r,"e"]}function Z3e(e,t,r){return r==null&&(r=Nt(9)),Kg(t,r),r.write_shift(1,e.v),r}function eBe(e){var t=Wg(e),r=e.read_shift(1);return[t,r,"e"]}function tBe(e,t,r){return r==null&&(r=Nt(8)),Xg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function rBe(e){var t=ed(e),r=e.read_shift(4);return[t,r,"s"]}function nBe(e,t,r){return r==null&&(r=Nt(12)),Kg(t,r),r.write_shift(4,t.v),r}function aBe(e){var t=Wg(e),r=e.read_shift(4);return[t,r,"s"]}function sBe(e,t,r){return r==null&&(r=Nt(8)),Xg(t,r),r.write_shift(4,t.v),r}function iBe(e){var t=ed(e),r=nl(e);return[t,r,"n"]}function oBe(e,t,r){return r==null&&(r=Nt(16)),Kg(t,r),Sg(e.v,r),r}function pne(e){var t=Wg(e),r=nl(e);return[t,r,"n"]}function lBe(e,t,r){return r==null&&(r=Nt(12)),Xg(t,r),Sg(e.v,r),r}function cBe(e){var t=ed(e),r=PR(e);return[t,r,"n"]}function uBe(e,t,r){return r==null&&(r=Nt(12)),Kg(t,r),fre(e.v,r),r}function dBe(e){var t=Wg(e),r=PR(e);return[t,r,"n"]}function fBe(e,t,r){return r==null&&(r=Nt(8)),Xg(t,r),fre(e.v,r),r}function ABe(e){var t=ed(e),r=FR(e);return[t,r,"is"]}function hBe(e){var t=ed(e),r=ol(e);return[t,r,"str"]}function mBe(e,t,r){return r==null&&(r=Nt(12+4*e.v.length)),Kg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function pBe(e){var t=Wg(e),r=ol(e);return[t,r,"str"]}function gBe(e,t,r){return r==null&&(r=Nt(8+4*e.v.length)),Xg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function xBe(e,t,r){var n=e.l+t,a=ed(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=s4(e,n-e.l,r);o[3]=Yo(l,null,a,r.supbooks,r)}else e.l=n;return o}function vBe(e,t,r){var n=e.l+t,a=ed(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=s4(e,n-e.l,r);o[3]=Yo(l,null,a,r.supbooks,r)}else e.l=n;return o}function bBe(e,t,r){var n=e.l+t,a=ed(e);a.r=r["!row"];var s=nl(e),o=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=s4(e,n-e.l,r);o[3]=Yo(l,null,a,r.supbooks,r)}else e.l=n;return o}function yBe(e,t,r){var n=e.l+t,a=ed(e);a.r=r["!row"];var s=ol(e),o=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=s4(e,n-e.l,r);o[3]=Yo(l,null,a,r.supbooks,r)}else e.l=n;return o}var wBe=Yg,NBe=i1;function EBe(e,t){return t==null&&(t=Nt(4)),t.write_shift(4,e),t}function CBe(e,t){var r=e.l+t,n=Yg(e),a=OR(e),s=ol(e),o=ol(e),l=ol(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function _Be(e,t){var r=Nt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));i1({s:cs(e[0]),e:cs(e[0])},r),DR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return eo(a||"",r),eo(e[1].Tooltip||"",r),eo("",r),r.slice(0,r.l)}function SBe(){}function kBe(e,t,r){var n=e.l+t,a=Are(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=Jje(e,n-e.l,r);o[1]=l}else e.l=n;return o}function jBe(e,t,r){var n=e.l+t,a=Yg(e),s=[a];if(r.cellFormula){var o=e3e(e,n-e.l,r);s[1]=o,e.l=n}else e.l=n;return s}function BBe(e,t,r){r==null&&(r=Nt(18));var n=i4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var gne=["left","right","top","bottom","header","footer"];function TBe(e){var t={};return gne.forEach(function(r){t[r]=nl(e)}),t}function IBe(e,t){return t==null&&(t=Nt(48)),og(e),gne.forEach(function(r){Sg(e[r],t)}),t}function FBe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function OBe(e,t,r){r==null&&(r=Nt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function DBe(e){var t=Nt(24);return t.write_shift(4,4),t.write_shift(4,1),i1(e,t),t}function PBe(e,t){return t==null&&(t=Nt(66)),t.write_shift(2,e.password?HR(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function RBe(){}function LBe(){}function MBe(e,t,r,n,a,s,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,g,x,v,y,w,_,O,j,B=[];l.biff=12,l["!row"]=0;var C=0,k=!1,T=[],L={},R=l.supbooks||a.supbooks||[[]];if(R.sharedf=L,R.arrayf=T,R.SheetNames=a.SheetNames||a.Sheets.map(function(G){return G.name}),!l.supbooks&&(l.supbooks=R,a.Names))for(var S=0;S<a.Names.length;++S)R[0][S+1]=a.Names[S];var U=[],Q=[],X=!1;gw[16]={n:"BrtShortReal",f:pne};var z;if($h(e,function(Y,K,H){if(!h)switch(H){case 148:u=Y;break;case 0:m=Y,l.sheetRows&&l.sheetRows<=m.r&&(h=!0),O=Zs(v=m.r),l["!row"]=m.r,(Y.hidden||Y.hpt||Y.level!=null)&&(Y.hpt&&(Y.hpx=mb(Y.hpt)),Q[Y.r]=Y);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:Y[2]},Y[2]){case"n":g.v=Y[1];break;case"s":_=_2[Y[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!Y[1];break;case"e":g.v=Y[1],l.cellText!==!1&&(g.w=Gh[g.v]);break;case"str":g.t="s",g.v=Y[1];break;case"is":g.t="s",g.v=Y[1].t;break}if((x=o.CellXf[Y[0].iStyleRef])&&Ane(g,x.numFmtId,null,l,s,o),y=Y[0].c==-1?y+1:Y[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[ls(y)+O]=g,l.cellFormula){for(k=!1,C=0;C<T.length;++C){var F=T[C];m.r>=F[0].s.r&&m.r<=F[0].e.r&&y>=F[0].s.c&&y<=F[0].e.c&&(g.F=Yr(F[0]),k=!0)}!k&&Y.length>3&&(g.f=Y[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&n1(Ir[x.numFmtId])){var D=Gp(g.v);D&&(g.t="d",g.v=new Date(D.y,D.m-1,D.d,D.H,D.M,D.S,D.u))}z&&(z.type=="XLDAPR"&&(g.D=!0),z=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=Y[0].c==-1?y+1:Y[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[ls(y)+O]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),z&&(z.type=="XLDAPR"&&(g.D=!0),z=void 0);break;case 176:B.push(Y);break;case 49:z=((l.xlmeta||{}).Cell||[])[Y-1];break;case 494:var q=n["!id"][Y.relId];for(q?(Y.Target=q.Target,Y.loc&&(Y.Target+="#"+Y.loc),Y.Rel=q):Y.relId==""&&(Y.Target="#"+Y.loc),v=Y.rfx.s.r;v<=Y.rfx.e.r;++v)for(y=Y.rfx.s.c;y<=Y.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=Y):(w=Pr({c:y,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=Y);break;case 426:if(!l.cellFormula)break;T.push(Y),j=l.dense?c[v][y]:c[ls(y)+O],j.f=Yo(Y[1],d,{r:m.r,c:y},R,l),j.F=Yr(Y[0]);break;case 427:if(!l.cellFormula)break;L[Pr(Y[0].s)]=Y[1],j=l.dense?c[v][y]:c[ls(y)+O],j.f=Yo(Y[1],d,{r:m.r,c:y},R,l);break;case 60:if(!l.cellStyles)break;for(;Y.e>=Y.s;)U[Y.e--]={width:Y.w/256,hidden:!!(Y.flags&1),level:Y.level},X||(X=!0,VR(Y.w/256)),Dm(U[Y.e+1]);break;case 161:c["!autofilter"]={ref:Yr(Y)};break;case 476:c["!margins"]=Y;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),Y.name&&(a.Sheets[r].CodeName=Y.name),(Y.above||Y.left)&&(c["!outline"]={above:Y.above,left:Y.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),Y.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!K.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+H.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Yr(u||d)),l.sheetRows&&c["!ref"]){var W=Pn(c["!ref"]);l.sheetRows<=+W.e.r&&(W.e.r=l.sheetRows-1,W.e.r>d.e.r&&(W.e.r=d.e.r),W.e.r<W.s.r&&(W.s.r=W.e.r),W.e.c>d.e.c&&(W.e.c=d.e.c),W.e.c<W.s.c&&(W.s.c=W.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Yr(W))}return B.length>0&&(c["!merges"]=B),U.length>0&&(c["!cols"]=U),Q.length>0&&(c["!rows"]=Q),c}function UBe(e,t,r,n,a,s,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=$a(t),t.z=t.z||Ir[14],t.v=Fi(za(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Jm(a.cellXfs,t,a),t.l&&s["!links"].push([Pr(c),t.l]),t.c&&s["!comments"].push([Pr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=KR(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?Dt(e,18,sBe(t,c)):Dt(e,7,nBe(t,c))):(c.t="str",o?Dt(e,17,gBe(t,c)):Dt(e,6,mBe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Dt(e,13,fBe(t,c)):Dt(e,2,uBe(t,c)):o?Dt(e,16,lBe(t,c)):Dt(e,5,oBe(t,c)),!0;case"b":return c.t="b",o?Dt(e,15,Y3e(t,c)):Dt(e,4,W3e(t,c)),!0;case"e":return c.t="e",o?Dt(e,14,tBe(t,c)):Dt(e,3,Z3e(t,c)),!0}return o?Dt(e,12,q3e(t,c)):Dt(e,1,$3e(t,c)),!0}function QBe(e,t,r,n){var a=Pn(t["!ref"]||"A1"),s,o="",l=[];Dt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Zs(d),L3e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=ls(h)),s=l[h]+o;var m=c?(t[d]||[])[h]:t[s];if(!m){f=!1;continue}f=UBe(e,m,d,h,n,t,f)}}Dt(e,146)}function HBe(e,t){!t||!t["!merges"]||(Dt(e,177,EBe(t["!merges"].length)),t["!merges"].forEach(function(r){Dt(e,176,NBe(r))}),Dt(e,178))}function VBe(e,t){!t||!t["!cols"]||(Dt(e,390),t["!cols"].forEach(function(r,n){r&&Dt(e,60,BBe(n,r))}),Dt(e,391))}function zBe(e,t){!t||!t["!ref"]||(Dt(e,648),Dt(e,649,DBe(Pn(t["!ref"]))),Dt(e,650))}function $Be(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=da(r,-1,n[1].Target.replace(/#.*$/,""),gn.HLINK);Dt(e,494,_Be(n,a))}}),delete t["!links"]}function GBe(e,t,r,n){if(t["!comments"].length>0){var a=da(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",gn.VML);Dt(e,551,DR("rId"+a)),t["!legacy"]=a}}function qBe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:Yr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=uc(s);l.s.r==l.e.r&&(l.e.r=uc(t["!ref"]).e.r,s=Yr(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Dt(e,161,i1(Pn(s))),Dt(e,162)}}function KBe(e,t,r){Dt(e,133),Dt(e,137,OBe(t,r)),Dt(e,138),Dt(e,134)}function WBe(e,t){t["!protect"]&&Dt(e,535,PBe(t["!protect"]))}function XBe(e,t,r,n){var a=lc(),s=r.SheetNames[e],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Pn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Dt(a,129),(r.vbaraw||o["!outline"])&&Dt(a,147,V3e(l,o["!outline"])),Dt(a,148,U3e(c)),KBe(a,o,r.Workbook),VBe(a,o),QBe(a,o,e,t),WBe(a,o),qBe(a,o,r,e),HBe(a,o),$Be(a,o,n),o["!margins"]&&Dt(a,476,IBe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&zBe(a,o),GBe(a,o,e,n),Dt(a,130),a.end()}function YBe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Dn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function JBe(e,t,r,n,a,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=YBe(f);d.s.r=d.s.c=0,d.e.c=l,u=ls(l),h[0].forEach(function(m,g){o[u+Zs(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=Yr(d)),o}function ZBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(hne);return l&&WR(l[0],s,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function eTe(e,t){e.l+=10;var r=ol(e);return{name:r}}function tTe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return $h(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var XR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],rTe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],nTe=[],aTe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function OV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function DV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function xne(e){DV(e.WBProps,XR),DV(e.CalcPr,aTe),OV(e.WBView,rTe),OV(e.Sheets,nTe),Qv.date1904=Ma(e.WBProps.date1904)}function sTe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ma(e.Workbook.WBProps.date1904)?"true":"false"}var iTe="][*?/\\".split("");function vne(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return iTe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function oTe(e,t,r){e.forEach(function(n,a){vne(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function lTe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];oTe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)s3e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var cTe=/<\w+:workbook/;function uTe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(e.replace(fl,function(c,u){var d=Hr(c);switch(AA(d[0])){case"<?xml":break;case"<workbook":c.match(cTe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":XR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ma(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=ba(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Dn(ba(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ba(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ma(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=Dn(ba(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),qg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return xne(r),r}function bne(e){var t=[ti];t[t.length]=Vt("workbook",null,{xmlns:qg[0],"xmlns:r":Bi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(XR.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Vt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:Aa(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Vt("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Vt("definedName",Aa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function dTe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=CF(e),r.name=ol(e),r}function fTe(e,t){return t||(t=Nt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),DR(e.strRelID,t),eo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function ATe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?ol(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function hTe(e,t){t||(t=Nt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),dre(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function mTe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function pTe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=GCe(e),o=Zje(e,0,r),l=OR(e);e.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function gTe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],gw[16]={n:"BrtFRTArchID$",f:mTe},$h(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Yo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),xne(r),r.Names=s,r.supbooks=o,r}function xTe(e,t){Dt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Dt(e,156,fTe(a))}Dt(e,144)}function vTe(e,t){t||(t=Nt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return eo("SheetJS",t),eo(O_.version,t),eo(O_.version,t),eo("7262",t),t.length>t.l?t.slice(0,t.l):t}function bTe(e,t){t||(t=Nt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function yTe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Dt(e,135),Dt(e,158,bTe(a)),Dt(e,136))}}function wTe(e,t){var r=lc();return Dt(r,131),Dt(r,128,vTe()),Dt(r,153,hTe(e.Workbook&&e.Workbook.WBProps||null)),yTe(r,e),xTe(r,e),Dt(r,132),r.end()}function NTe(e,t,r){return t.slice(-4)===".bin"?gTe(e,r):uTe(e,r)}function ETe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?MBe(e,n,r,a,s,o,l):p3e(e,n,r,a,s,o,l)}function CTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?tTe(e,n,r,a,s):ZBe(e,n,r,a,s)}function _Te(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?k4e():j4e()}function STe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?_4e():S4e()}function kTe(e,t,r,n){return t.slice(-4)===".bin"?Nke(e,r,n):dke(e,r,n)}function jTe(e,t,r){return ene(e,r)}function BTe(e,t,r){return t.slice(-4)===".bin"?BSe(e,r):SSe(e,r)}function TTe(e,t,r){return t.slice(-4)===".bin"?y4e(e,r):f4e(e,r)}function ITe(e,t,r){return t.slice(-4)===".bin"?c4e(e):o4e(e)}function FTe(e,t,r,n){return r.slice(-4)===".bin"?u4e(e,t,r,n):void 0}function OTe(e,t,r){return t.slice(-4)===".bin"?a4e(e,t,r):i4e(e,t,r)}function DTe(e,t,r){return(t.slice(-4)===".bin"?wTe:bne)(e)}function PTe(e,t,r,n,a){return(t.slice(-4)===".bin"?XBe:mne)(e,r,n,a)}function RTe(e,t,r){return(t.slice(-4)===".bin"?Fke:Jre)(e,r)}function LTe(e,t,r){return(t.slice(-4)===".bin"?FSe:zre)(e,r)}function MTe(e,t,r){return(t.slice(-4)===".bin"?w4e:nne)(e)}function UTe(e){return(e.slice(-4)===".bin"?s4e:tne)()}var yne=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,wne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function _d(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(yne),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(wne),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function QTe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(yne),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(wne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var k2;function HTe(e,t){var r=k2[e]||Dn(e);return r==="General"?Cg(t):Yu(r,t)}function VTe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=za(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Dn(t)]=a}function zTe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Gh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lw(e.v):e.w=Cg(e.v):e.w=HTe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=k2[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&n1(n)){var a=Gp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function $Te(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=nke[n.Pattern]||n.Pattern)}e[t.ID]=t}function GTe(e,t,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ma(e);break;case"String":n.t="s",n.r=JH(Dn(e)),n.v=e.indexOf("<")>-1?Dn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(za(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Dn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=pre[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=JH(t||e));break}if(zTe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Dn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Uv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Uv("RC:RC",a):n.ArrayRange&&(n.F=Uv(n.ArrayRange,a),c.push([Pn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function qTe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function CB(e,t){var r=t||{};a1();var n=Xy(kR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ba(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=$a(r);return o.type="string",hb.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Le){a.indexOf("<"+Le)>=0&&(s=!0)}),s)return IIe(n,r);k2={"General Number":"General","General Date":Ir[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ir[15],"Short Date":Ir[14],"Long Time":Ir[19],"Medium Time":Ir[18],"Short Time":Ir[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ir[2],Standard:Ir[4],Percent:Ir[10],Scientific:Ir[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},m="",g={},x={},v=_d('<Data ss:Type="String">'),y=0,w=0,_=0,O={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},B={},C="",k=0,T=[],L={},R={},S=0,U=[],Q=[],X={},z=[],W,G=!1,Y=[],K=[],H={},F=0,D=0,q={Sheets:[],WBProps:{date1904:!1}},J={};dw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";l=dw.exec(n);)switch(l[3]=(te=l[3]).toLowerCase()){case"data":if(te=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?GTe(n.slice(y,l.index),C,v,c[c.length-1][0]=="comment"?X:g,{c:w,r:_},j,z[w],x,Y,r):(C="",v=_d(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Q.length>0&&(g.c=Q),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[ls(w)+Zs(_)]=g),g.HRef&&(g.l={Target:Dn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(F=w+(parseInt(g.MergeAcross,10)|0),D=_+(parseInt(g.MergeDown,10)|0),T.push({s:{c:w,r:_},e:{c:F,r:D}})),!r.sheetStubs)g.MergeAcross?w=F+1:++w;else if(g.MergeAcross||g.MergeDown){for(var ne=w;ne<=F;++ne)for(var ie=_;ie<=D;++ie)(ne>w||ie>_)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][ne]={t:"z"}):h[ls(ne)+Zs(ie)]={t:"z"});w=F+1}else++w;else g=QTe(l[0]),g.Index&&(w=+g.Index-1),w<O.s.c&&(O.s.c=w),w>O.e.c&&(O.e.c=w),l[0].slice(-2)==="/>"&&++w,Q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(_<O.s.r&&(O.s.r=_),_>O.e.r&&(O.e.r=_),l[0].slice(-2)==="/>"&&(x=_d(l[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=_d(l[0]),x.Index&&(_=+x.Index-1),H={},(x.AutoFitHeight=="0"||x.Height)&&(H.hpx=parseInt(x.Height,10),H.hpt=pw(H.hpx),K[_]=H),x.Hidden=="1"&&(H.hidden=!0,K[_]=H));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),O.s.r<=O.e.r&&O.s.c<=O.e.c&&(h["!ref"]=Yr(O),r.sheetRows&&r.sheetRows<=O.e.r&&(h["!fullref"]=h["!ref"],O.e.r=r.sheetRows-1,h["!ref"]=Yr(O))),T.length&&(h["!merges"]=T),z.length>0&&(h["!cols"]=z),K.length>0&&(h["!rows"]=K),d[m]=h}else O={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([l[3],!1]),u=_d(l[0]),m=Dn(u.Name),h=r.dense?[]:{},T=[],Y=[],K=[],J={name:m,Hidden:0},q.Sheets.push(J);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),z=[],G=!1}break;case"style":l[1]==="/"?$Te(j,B,r):B=_d(l[0]);break;case"numberformat":B.nf=Dn(_d(l[0]).Format||"General"),k2[B.nf]&&(B.nf=k2[B.nf]);for(var oe=0;oe!=392&&Ir[oe]!=B.nf;++oe);if(oe==392){for(oe=57;oe!=392;++oe)if(Ir[oe]==null){gh(B.nf,oe);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(W=_d(l[0]),W.Hidden&&(W.hidden=!0,delete W.Hidden),W.Width&&(W.wpx=parseInt(W.Width,10)),!G&&W.wpx>10){G=!0,el=Xre;for(var de=0;de<z.length;++de)z[de]&&Dm(z[de])}G&&Dm(W),z[W.Index-1||z.length]=W;for(var ke=0;ke<+W.Span;++ke)z[z.length]=$a(W);break;case"namedrange":if(l[1]==="/")break;q.Names||(q.Names=[]);var ae=Hr(l[0]),Oe={Name:ae.Name,Ref:Uv(ae.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(Oe.Sheet=q.Sheets.length-1),q.Names.push(Oe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?C+=n.slice(k,l.index):k=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;B.Interior=_d(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?g5e(L,te,n.slice(S,l.index)):S=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));qTe(X),Q.push(X)}else c.push([l[3],!1]),u=_d(l[0]),X={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Te=_d(l[0]);h["!autofilter"]={ref:Uv(Te.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return UV(n,r);var Se=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Se=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Se=!1}break;case"excelworkbook":switch(l[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Se=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:Se=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(S,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else S=l.index+l[0].length;break;case"header":h["!margins"]||og(h["!margins"]={},"xlml"),isNaN(+Hr(l[0]).Margin)||(h["!margins"].header=+Hr(l[0]).Margin);break;case"footer":h["!margins"]||og(h["!margins"]={},"xlml"),isNaN(+Hr(l[0]).Margin)||(h["!margins"].footer=+Hr(l[0]).Margin);break;case"pagemargins":var fe=Hr(l[0]);h["!margins"]||og(h["!margins"]={},"xlml"),isNaN(+fe.Top)||(h["!margins"].top=+fe.Top),isNaN(+fe.Left)||(h["!margins"].left=+fe.Left),isNaN(+fe.Right)||(h["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(h["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Se=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Se=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Se=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Se=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Se=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Se=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Se=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Se=!1}break;case"smarttags":break;default:Se=!1;break}if(Se||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?VTe(R,te,U,n.slice(S,l.index)):(U=l,S=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=d),ye.SheetNames=f,ye.Workbook=q,ye.SSF=$a(Ir),ye.Props=L,ye.Custprops=R,ye}function IF(e,t){switch(JR(t=t||{}),t.type||"base64"){case"base64":return CB(Jc(e),t);case"binary":case"buffer":case"file":return CB(e,t);case"array":return CB(Xm(e),t)}}function KTe(e,t){var r=[];return e.Props&&r.push(x5e(e.Props,t)),e.Custprops&&r.push(v5e(e.Props,e.Custprops)),r.join("")}function WTe(){return""}function XTe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Vt("NumberFormat",null,{"ss:Format":Aa(Ir[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Vt("Style",s.join(""),o))}),Vt("Styles",r.join(""))}function Nne(e){return Vt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+GR(e.Ref,{r:0,c:0})})}function YTe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Nne(a)))}return Vt("Names",r.join(""))}function JTe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(Nne(l)))}return s.join("")}function ZTe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Vt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Vt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Vt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Vt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Eo("ProtectContents","True")),e["!protect"].objects&&a.push(Eo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Eo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Eo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Eo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Vt("WorksheetOptions",a.join(""),{xmlns:Lc.x})}function eIe(e){return e.map(function(t){var r=yCe(t.t||""),n=Vt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Vt("Comment",n,{"ss:Author":t.a})}).join("")}function tIe(e,t,r,n,a,s,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Aa(GR(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=cs(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Aa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Aa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Gh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Ir[14]);break;case"s":f="String",h=bCe(e.v||"");break}var m=Jm(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=eIe(e.c)),Vt("Cell",x,l)}function rIe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=mb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function nIe(e,t,r,n){if(!e["!ref"])return"";var a=Pn(e["!ref"]),s=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){Dm(v);var w=!!v.width,_=i4(y,v),O={"ss:Index":y+1};w&&(O["ss:Width"]=hw(_.width)),v.hidden&&(O["ss:Hidden"]="1"),l.push(Vt("Column",null,O))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[rIe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=Pr(m),x=c?(e[u]||[])[f]:e[g];d.push(tIe(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function aIe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],o=s?JTe(s,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?nIe(s,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(ZTe(s,t,e,r)),n.join("")}function sIe(e,t){t||(t={}),e.SSF||(e.SSF=$a(Ir)),e.SSF&&(a1(),Zk(e.SSF),t.revssf=t4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Jm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(KTe(e,t)),r.push(WTe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Vt("Worksheet",aIe(n,t,e),{"ss:Name":Aa(e.SheetNames[n])}));return r[2]=XTe(e,t),r[3]=YTe(e),ti+Vt("Workbook",r.join(""),{xmlns:Lc.ss,"xmlns:o":Lc.o,"xmlns:x":Lc.x,"xmlns:ss":Lc.ss,"xmlns:dt":Lc.dt,"xmlns:html":Lc.html})}function iIe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=YCe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=JCe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var oIe=[60,1084,2066,2165,2175];function lIe(e,t,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=oh(r,r.l),u=FF[c],d=0;u!=null&&oIe.indexOf(c)>-1;)s=oh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=FF[c=oh(r,r.l)];var f=Zi(o);No(f,0);var h=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(h),h+=o[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function Df(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Ir[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Gh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lw(e.v):e.w=Cg(e.v):e.w=Yu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&n1(Ir[n]||String(n))){var a=Gp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function uC(e,t,r){return{v:e,ixfe:t,t:r}}function cIe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,h="",m,g,x,v,y={},w=[],_,O,j=[],B=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},k={},T=function(Bt){return Bt<8?ag[Bt]:Bt<64&&B[Bt-8]||ag[Bt]},L=function(Bt,xt,xr){var Xt=xt.XF.data;if(!(!Xt||!Xt.patternType||!xr||!xr.cellStyles)){xt.s={},xt.s.patternType=Xt.patternType;var Gr;(Gr=Aw(T(Xt.icvFore)))&&(xt.s.fgColor={rgb:Gr}),(Gr=Aw(T(Xt.icvBack)))&&(xt.s.bgColor={rgb:Gr})}},R=function(Bt,xt,xr){if(!(H>1)&&!(xr.sheetRows&&Bt.r>=xr.sheetRows)){if(xr.cellStyles&&xt.XF&&xt.XF.data&&L(Bt,xt,xr),delete xt.ixfe,delete xt.XF,f=Bt,h=Pr(Bt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Bt.r<o.s.r&&(o.s.r=Bt.r),Bt.c<o.s.c&&(o.s.c=Bt.c),Bt.r+1>o.e.r&&(o.e.r=Bt.r+1),Bt.c+1>o.e.c&&(o.e.c=Bt.c+1),xr.cellFormula&&xt.f){for(var Xt=0;Xt<w.length;++Xt)if(!(w[Xt][0].s.c>Bt.c||w[Xt][0].s.r>Bt.r)&&!(w[Xt][0].e.c<Bt.c||w[Xt][0].e.r<Bt.r)){xt.F=Yr(w[Xt][0]),(w[Xt][0].s.c!=Bt.c||w[Xt][0].s.r!=Bt.r)&&delete xt.f,xt.f&&(xt.f=""+Yo(w[Xt][1],o,Bt,Y,S));break}}xr.dense?(a[Bt.r]||(a[Bt.r]=[]),a[Bt.r][Bt.c]=xt):a[h]=xt}},S={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(S.password=t.password);var U,Q=[],X=[],z=[],W=[],G=!1,Y=[];Y.SheetNames=S.snames,Y.sharedf=S.sharedf,Y.arrayf=S.arrayf,Y.names=[],Y.XTI=[];var K=0,H=0,F=0,D=[],q=[],J;S.codepage=1200,Ld(1200);for(var te=!1;e.l<e.length-1;){var ne=e.l,ie=e.read_shift(2);if(ie===0&&K===10)break;var oe=e.l===e.length?0:e.read_shift(2),de=FF[ie];if(de&&de.f){if(t.bookSheets&&K===133&&ie!==133)break;if(K=ie,de.r===2||de.r==12){var ke=e.read_shift(2);if(oe-=2,!S.enc&&ke!==ie&&((ke&255)<<8|ke>>8)!==ie)throw new Error("rt mismatch: "+ke+"!="+ie);de.r==12&&(e.l+=10,oe-=10)}var ae={};if(ie===10?ae=de.f(e,oe,S):ae=lIe(ie,de,e,oe,S),H==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(ie){case 34:r.opts.Date1904=C.WBProps.date1904=ae;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(S.enc||(e.l=0),S.enc=ae,!t.password)throw new Error("File is password-protected");if(ae.valid==null)throw new Error("Encryption scheme unsupported");if(!ae.valid)throw new Error("Password is incorrect");break;case 92:S.lastuser=ae;break;case 66:var Oe=Number(ae);switch(Oe){case 21010:Oe=1200;break;case 32768:Oe=1e4;break;case 32769:Oe=1252;break}Ld(S.codepage=Oe),te=!0;break;case 317:S.rrtabid=ae;break;case 25:S.winlocked=ae;break;case 439:r.opts.RefreshAll=ae;break;case 12:r.opts.CalcCount=ae;break;case 16:r.opts.CalcDelta=ae;break;case 17:r.opts.CalcIter=ae;break;case 13:r.opts.CalcMode=ae;break;case 14:r.opts.CalcPrecision=ae;break;case 95:r.opts.CalcSaveRecalc=ae;break;case 15:S.CalcRefMode=ae;break;case 2211:r.opts.FullCalc=ae;break;case 129:ae.fDialog&&(a["!type"]="dialog"),ae.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ae.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(ae);break;case 430:Y.push([ae]),Y[Y.length-1].XTI=[];break;case 35:case 547:Y[Y.length-1].push(ae);break;case 24:case 536:J={Name:ae.Name,Ref:Yo(ae.rgce,o,null,Y,S)},ae.itab>0&&(J.Sheet=ae.itab-1),Y.names.push(J),Y[0]||(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].push(ae),ae.Name=="_xlnm._FilterDatabase"&&ae.itab>0&&ae.rgce&&ae.rgce[0]&&ae.rgce[0][0]&&ae.rgce[0][0][0]=="PtgArea3d"&&(q[ae.itab-1]={ref:Yr(ae.rgce[0][0][1][2])});break;case 22:S.ExternCount=ae;break;case 23:Y.length==0&&(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].XTI=Y[Y.length-1].XTI.concat(ae),Y.XTI=Y.XTI.concat(ae);break;case 2196:if(S.biff<8)break;J!=null&&(J.Comment=ae[1]);break;case 18:a["!protect"]=ae;break;case 19:ae!==0&&S.WTF&&console.error("Password verifier: "+ae);break;case 133:s[ae.pos]=ae,S.snames.push(ae.name);break;case 10:{if(--H)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=Yr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Te=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Yr(o),o.e.r=Te}o.e.r++,o.e.c++}Q.length>0&&(a["!merges"]=Q),X.length>0&&(a["!objects"]=X),z.length>0&&(a["!cols"]=z),W.length>0&&(a["!rows"]=W),C.Sheets.push(k)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(S.biff===8&&(S.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ae.BIFFVer]||8),S.biffguess=ae.BIFFVer==0,ae.BIFFVer==0&&ae.dt==4096&&(S.biff=5,te=!0,Ld(S.codepage=28591)),S.biff==8&&ae.BIFFVer==0&&ae.dt==16&&(S.biff=2),H++)break;if(a=t.dense?[]:{},S.biff<8&&!te&&(te=!0,Ld(S.codepage=t.codepage||1252)),S.biff<5||ae.BIFFVer==0&&ae.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Se={pos:e.l-oe,name:u};s[Se.pos]=Se,S.snames.push(u)}else u=(s[ne]||{name:""}).name;ae.dt==32&&(a["!type"]="chart"),ae.dt==64&&(a["!type"]="macro"),Q=[],X=[],S.arrayf=w=[],z=[],W=[],G=!1,k={Hidden:(s[ne]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ae.r]||[])[ae.c]:a[Pr({c:ae.c,r:ae.r})])&&++ae.c,_={ixfe:ae.ixfe,XF:j[ae.ixfe]||{},v:ae.val,t:"n"},F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 5:case 517:_={ixfe:ae.ixfe,XF:j[ae.ixfe],v:ae.val,t:ae.t},F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 638:_={ixfe:ae.ixfe,XF:j[ae.ixfe],v:ae.rknum,t:"n"},F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 189:for(var fe=ae.c;fe<=ae.C;++fe){var ye=ae.rkrec[fe-ae.c][0];_={ixfe:ye,XF:j[ye],v:ae.rkrec[fe-ae.c][1],t:"n"},F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:fe,r:ae.r},_,t)}break;case 6:case 518:case 1030:{if(ae.val=="String"){l=ae;break}if(_=uC(ae.val,ae.cell.ixfe,ae.tt),_.XF=j[_.ixfe],t.cellFormula){var Le=ae.formula;if(Le&&Le[0]&&Le[0][0]&&Le[0][0][0]=="PtgExp"){var Qe=Le[0][0][1][0],ue=Le[0][0][1][1],we=Pr({r:Qe,c:ue});y[we]?_.f=""+Yo(ae.formula,o,ae.cell,Y,S):_.F=((t.dense?(a[Qe]||[])[ue]:a[we])||{}).F}else _.f=""+Yo(ae.formula,o,ae.cell,Y,S)}F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R(ae.cell,_,t),l=ae}break;case 7:case 519:if(l)l.val=ae,_=uC(ae,l.cell.ixfe,"s"),_.XF=j[_.ixfe],t.cellFormula&&(_.f=""+Yo(l.formula,o,l.cell,Y,S)),F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R(l.cell,_,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ae);var De=Pr(ae[0].s);if(m=t.dense?(a[ae[0].s.r]||[])[ae[0].s.c]:a[De],t.cellFormula&&m){if(!l||!De||!m)break;m.f=""+Yo(ae[1],o,ae[0],Y,S),m.F=Yr(ae[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;y[Pr(l.cell)]=ae[0],m=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[Pr(l.cell)],(m||{}).f=""+Yo(ae[0],o,f,Y,S)}}break;case 253:_=uC(c[ae.isst].t,ae.ixfe,"s"),c[ae.isst].h&&(_.h=c[ae.isst].h),_.XF=j[_.ixfe],F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ae.ixfe,XF:j[ae.ixfe],t:"z"},F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t));break;case 190:if(t.sheetStubs)for(var He=ae.c;He<=ae.C;++He){var Ye=ae.ixfe[He-ae.c];_={ixfe:Ye,XF:j[Ye],t:"z"},F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:He,r:ae.r},_,t)}break;case 214:case 516:case 4:_=uC(ae.val,ae.ixfe,"s"),_.XF=j[_.ixfe],F>0&&(_.z=D[_.ixfe>>8&63]),Df(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 0:case 512:H===1&&(o=ae);break;case 252:c=ae;break;case 1054:if(S.biff==4){D[F++]=ae[1];for(var tt=0;tt<F+163&&Ir[tt]!=ae[1];++tt);tt>=163&&gh(ae[1],F+163)}else gh(ae[1],ae[0]);break;case 30:{D[F++]=ae;for(var ft=0;ft<F+163&&Ir[ft]!=ae;++ft);ft>=163&&gh(ae,F+163)}break;case 229:Q=Q.concat(ae);break;case 93:X[ae.cmo[0]]=S.lastobj=ae;break;case 438:S.lastobj.TxO=ae;break;case 127:S.lastobj.ImData=ae;break;case 440:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Pr({c:x,r:v})],m&&(m.l=ae[1]);break;case 2048:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Pr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=ae[1]);break;case 28:{if(S.biff<=5&&S.biff>=2)break;m=t.dense?(a[ae[0].r]||[])[ae[0].c]:a[Pr(ae[0])];var $e=X[ae[2]];m||(t.dense?(a[ae[0].r]||(a[ae[0].r]=[]),m=a[ae[0].r][ae[0].c]={t:"z"}):m=a[Pr(ae[0])]={t:"z"},o.e.r=Math.max(o.e.r,ae[0].r),o.s.r=Math.min(o.s.r,ae[0].r),o.e.c=Math.max(o.e.c,ae[0].c),o.s.c=Math.min(o.s.c,ae[0].c)),m.c||(m.c=[]),g={a:ae[1],t:$e.TxO.t},m.c.push(g)}break;case 2173:Xke(j[ae.ixfe],ae.ext);break;case 125:{if(!S.cellStyles)break;for(;ae.e>=ae.s;)z[ae.e--]={width:ae.w/256,level:ae.level||0,hidden:!!(ae.flags&1)},G||(G=!0,VR(ae.w/256)),Dm(z[ae.e+1])}break;case 520:{var nt={};ae.level!=null&&(W[ae.r]=nt,nt.level=ae.level),ae.hidden&&(W[ae.r]=nt,nt.hidden=!0),ae.hpt&&(W[ae.r]=nt,nt.hpt=ae.hpt,nt.hpx=mb(ae.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||og(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=ae;break;case 161:a["!margins"]||og(a["!margins"]={}),a["!margins"].header=ae.header,a["!margins"].footer=ae.footer;break;case 574:ae.RTL&&(C.Views[0].RTL=!0);break;case 146:B=ae;break;case 2198:U=ae;break;case 140:O=ae;break;case 442:u?k.CodeName=ae||k.name:C.WBProps.CodeName=ae||"ThisWorkbook";break}}else de||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=oe}return r.SheetNames=Ds(s).sort(function(bt,Bt){return Number(bt)-Number(Bt)}).map(function(bt){return s[bt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&q.forEach(function(bt,Bt){r.Sheets[r.SheetNames[Bt]]["!autofilter"]=bt}),r.Strings=c,r.SSF=$a(Ir),S.enc&&(r.Encryption=S.enc),U&&(r.Themes=U),r.Metadata={},O!==void 0&&(r.Metadata.Country=O),Y.names.length>0&&(C.Names=Y.names),r.Workbook=C,r}var j2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function uIe(e,t,r){var n=yr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=pV(n,_F,j2.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var o=yr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=pV(o,SF,j2.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(wre(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function dIe(e,t){var r=[],n=[],a=[],s=0,o,l=GH(_F,"n"),c=GH(SF,"n");if(e.Props)for(o=Ds(e.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Props[o[s]]]);if(e.Custprops)for(o=Ds(e.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)jre.indexOf(a[s][0])>-1||yre.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&yr.utils.cfb_add(t,"/SummaryInformation",gV(n,j2.SI,c,SF)),(r.length||u.length)&&yr.utils.cfb_add(t,"/DocumentSummaryInformation",gV(r,j2.DSI,l,_F,u.length?u:null,j2.UDI))}function Ene(e,t){t||(t={}),JR(t),vR(),t.codepage&&xR(t.codepage);var r,n;if(e.FullPaths){if(yr.find(e,"/encryption"))throw new Error("File is password-protected");r=yr.find(e,"!CompObj"),n=yr.find(e,"/Workbook")||yr.find(e,"/Book")}else{switch(t.type){case"base64":e=Hc(Jc(e));break;case"binary":e=Hc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}No(e,0),n={content:e}}var a,s;if(r&&iIe(r),t.bookProps&&!t.bookSheets)a={};else{var o=dn?"buffer":"array";if(n&&n.content)a=cIe(n.content,t);else if((s=yr.find(e,"PerfectOffice_MAIN"))&&s.content)a=ig.to_workbook(s.content,(t.type=o,t));else if((s=yr.find(e,"NativeContent_MAIN"))&&s.content)a=ig.to_workbook(s.content,(t.type=o,t));else throw(s=yr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&yr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=E4e(e))}var l={};return e.FullPaths&&uIe(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function fIe(e,t){var r=t||{},n=yr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return yr.utils.cfb_add(n,a,Cne(e,r)),r.biff==8&&(e.Props||e.Custprops)&&dIe(e,n),r.biff==8&&e.vbaraw&&C4e(n,yr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var gw={0:{f:P3e},1:{f:z3e},2:{f:cBe},3:{f:J3e},4:{f:K3e},5:{f:iBe},6:{f:hBe},7:{f:rBe},8:{f:yBe},9:{f:bBe},10:{f:xBe},11:{f:vBe},12:{f:G3e},13:{f:dBe},14:{f:eBe},15:{f:X3e},16:{f:pne},17:{f:pBe},18:{f:aBe},19:{f:FR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:pTe},40:{},42:{},43:{f:hke},44:{f:fke},45:{f:gke},46:{f:vke},47:{f:xke},48:{},49:{f:MCe},50:{},51:{f:Zke},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Ure},62:{f:ABe},63:{f:l4e},64:{f:RBe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:cl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:FBe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:H3e},148:{f:M3e,p:16},151:{f:SBe},152:{},153:{f:ATe},154:{},155:{},156:{f:dTe},157:{},158:{},159:{T:1,f:jSe},160:{T:-1},161:{T:1,f:Yg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:wBe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Yke},336:{T:-1},337:{f:r4e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:CF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Mre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:kBe},427:{f:jBe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:TBe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Q3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:CBe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:CF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:v4e},633:{T:1},634:{T:-1},635:{T:1,f:g4e},636:{T:-1},637:{f:VCe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:eTe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:LBe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},FF={6:{f:NB},10:{f:F0},12:{f:Ai},13:{f:Ai},14:{f:Gs},15:{f:Gs},16:{f:nl},17:{f:Gs},18:{f:Gs},19:{f:Ai},20:{f:NV},21:{f:NV},23:{f:Mre},24:{f:CV},25:{f:Gs},26:{},27:{},28:{f:L_e},29:{},34:{f:Gs},35:{f:EV},38:{f:nl},39:{f:nl},40:{f:nl},41:{f:nl},42:{f:Gs},43:{f:Gs},47:{f:XSe},49:{f:d_e},51:{f:Ai},60:{},61:{f:i_e},64:{f:Gs},65:{f:u_e},66:{f:Ai},77:{},80:{},81:{},82:{},85:{f:Ai},89:{},90:{},91:{},92:{f:W5e},93:{f:Q_e},94:{},95:{f:Gs},96:{},97:{},99:{f:Gs},125:{f:Ure},128:{f:__e},129:{f:Y5e},130:{f:Ai},131:{f:Gs},132:{f:Gs},133:{f:J5e},134:{},140:{f:W_e},141:{f:Ai},144:{},146:{f:J_e},151:{},152:{},153:{},154:{},155:{},156:{f:Ai},157:{},158:{},160:{f:sSe},161:{f:tSe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:w_e},190:{f:N_e},193:{f:F0},197:{},198:{},199:{},200:{},201:{},202:{f:Gs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ai},220:{},221:{f:Gs},222:{},224:{f:C_e},225:{f:K5e},226:{f:F0},227:{},229:{f:M_e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:e_e},253:{f:A_e},255:{f:r_e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Bre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Gs},353:{f:F0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:T_e},431:{f:Gs},432:{},433:{},434:{},437:{},438:{f:z_e},439:{f:Gs},440:{f:$_e},441:{},442:{f:cN},443:{},444:{f:Ai},445:{},446:{},448:{f:F0},449:{f:s_e,r:2},450:{f:F0},512:{f:bV},513:{f:aSe},515:{f:j_e},516:{f:m_e},517:{f:wV},519:{f:iSe},520:{f:n_e},523:{},545:{f:_V},549:{f:vV},566:{},574:{f:l_e},638:{f:y_e},659:{},1048:{},1054:{f:g_e},1084:{},1212:{f:D_e},2048:{f:q_e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:oC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:F0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Z_e,r:12},2173:{f:Wke,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Gs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:O_e,r:12},2197:{},2198:{f:Vke,r:12},2199:{},2200:{},2201:{},2202:{f:P_e,r:12},2203:{f:F0},2204:{},2205:{},2206:{},2207:{},2211:{f:a_e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ai},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:rSe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Y_e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:bV},1:{},2:{f:dSe},3:{f:cSe},4:{f:lSe},5:{f:wV},7:{f:ASe},8:{},9:{f:oC},11:{},22:{f:Ai},30:{f:v_e},31:{},32:{},33:{f:_V},36:{},37:{f:vV},50:{f:hSe},62:{},52:{},67:{},68:{f:Ai},69:{},86:{},126:{},127:{f:oSe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:mSe},223:{},234:{},354:{},421:{},518:{f:NB},521:{f:oC},536:{f:CV},547:{f:EV},561:{},579:{},1030:{f:NB},1033:{f:oC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function zt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&BR(r)&&e.push(r)}}function AIe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return zt(e,t,r,a);var s=t;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function AN(e,t,r){return e||(e=Nt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function hIe(e,t,r,n){var a=Nt(9);return AN(a,e,t),Tre(r,n||"b",a),a}function mIe(e,t,r){var n=Nt(8+2*r.length);return AN(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function pIe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Fi(za(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?zt(e,2,fSe(r,n,a)):zt(e,3,uSe(r,n,a));return;case"b":case"e":zt(e,5,hIe(r,n,t.v,t.t));return;case"s":case"str":zt(e,4,mIe(r,n,(t.v||"").slice(0,255)));return}zt(e,1,AN(null,r,n))}function gIe(e,t,r,n){var a=Array.isArray(t),s=Pn(t["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Yr(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Zs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=ls(d)),o=c[d]+l;var f=a?(t[u]||[])[d]:t[o];f&&pIe(e,f,u,d)}}}function xIe(e,t){for(var r=t||{},n=lc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return zt(n,r.biff==4?1033:r.biff==3?521:9,UR(e,16,r)),gIe(n,e.Sheets[e.SheetNames[a]],a,r),zt(n,10),n.end()}function vIe(e,t,r){zt(e,49,f_e({sz:12,name:"Arial"},r))}function bIe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&zt(e,1054,x_e(a,t[a],r))})}function yIe(e,t){var r=Nt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),zt(e,2151,r),r=Nt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Pre(Pn(t["!ref"]||"A1"),r),r.write_shift(4,4),zt(e,2152,r)}function wIe(e,t){for(var r=0;r<16;++r)zt(e,224,yV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){zt(e,224,yV(n,0,t))})}function NIe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];zt(e,440,G_e(n)),n[1].Tooltip&&zt(e,2048,K_e(n))}delete t["!links"]}function EIe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&zt(e,125,eSe(i4(a,n),a))})}}function CIe(e,t,r,n,a){var s=16+Jm(a.cellXfs,t,a);if(t.v==null&&!t.bf){zt(e,513,jg(r,n,s));return}if(t.bf)zt(e,6,Yje(t,r,n,a,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?Fi(za(t.v)):t.v;zt(e,515,B_e(r,n,o,s));break;case"b":case"e":zt(e,517,k_e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=KR(a.Strings,t.v,a.revStrings);zt(e,253,h_e(r,n,l,s))}else zt(e,516,p_e(r,n,(t.v||"").slice(0,255),s,a));break;default:zt(e,513,jg(r,n,s))}}function _Ie(e,t,r){var n=lc(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],m=Pn(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}zt(n,2057,UR(r,16,t)),zt(n,13,Mu(1)),zt(n,12,Mu(100)),zt(n,15,wl(!0)),zt(n,17,wl(!1)),zt(n,16,Sg(.001)),zt(n,95,wl(!0)),zt(n,42,wl(!1)),zt(n,43,wl(!1)),zt(n,130,Mu(1)),zt(n,128,S_e()),zt(n,131,wl(!1)),zt(n,132,wl(!1)),u&&EIe(n,s["!cols"]),zt(n,512,b_e(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=Zs(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=ls(v)),d=h[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(CIe(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=l.CodeName||l.name||a;return u&&zt(n,574,c_e((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&zt(n,229,U_e(s["!merges"])),u&&NIe(n,s),zt(n,442,Ire(w)),u&&yIe(n,s),zt(n,10),n.end()}function SIe(e,t,r){var n=lc(),a=(e||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(zt(n,2057,UR(e,5,r)),r.bookType=="xla"&&zt(n,135),zt(n,225,l?Mu(1200):null),zt(n,193,k5e(2)),c&&zt(n,191),c&&zt(n,192),zt(n,226),zt(n,92,X5e("SheetJS",r)),zt(n,66,Mu(l?1200:1252)),l&&zt(n,353,Mu(0)),l&&zt(n,448),zt(n,317,nSe(e.SheetNames.length)),l&&e.vbaraw&&zt(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";zt(n,442,Ire(u))}zt(n,156,Mu(17)),zt(n,25,wl(!1)),zt(n,18,wl(!1)),zt(n,19,Mu(0)),l&&zt(n,431,wl(!1)),l&&zt(n,444,Mu(0)),zt(n,61,o_e()),zt(n,64,wl(!1)),zt(n,141,Mu(0)),zt(n,34,wl(sTe(e)=="true")),zt(n,14,wl(!0)),l&&zt(n,439,wl(!1)),zt(n,218,Mu(0)),vIe(n,e,r),bIe(n,e.SSF,r),wIe(n,r),l&&zt(n,352,wl(!1));var d=n.end(),f=lc();l&&zt(f,140,X_e()),l&&r.Strings&&AIe(f,252,t_e(r.Strings)),zt(f,10);var h=f.end(),m=lc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};zt(m,133,Z5e({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var w=m.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),Zi(_)}function kIe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=$a(Ir)),e&&e.SSF&&(a1(),Zk(e.SSF),r.revssf=t4(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,ZR(r),r.cellXfs=[],Jm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=_Ie(a,r,e);return n.unshift(SIe(e,n,r)),Zi(n)}function Cne(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=uc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return kIe(e,t);case 4:case 3:case 2:return xIe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function PV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=a.index,l=s&&s.index||e.length,c=fCe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var w=y[l].trim();if(w.match(/<t[dh]/i)){for(var _=w,O=0;_.charAt(0)=="<"&&(O=_.indexOf(">"))>-1;)_=_.slice(O+1);for(var j=0;j<g.length;++j){var B=g[j];B.s.c==d&&B.s.r<u&&u<=B.e.r&&(d=B.e.c+1,j=-1)}var C=Hr(w.slice(0,w.indexOf(">")));h=C.colspan?+C.colspan:1,((f=+C.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var k=C.t||C["data-t"]||"";if(!_.length){d+=h;continue}if(_=Wte(_),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!_.length){d+=h;continue}var T={t:"s",v:_};r.raw||!_.trim().length||k=="s"||(_==="TRUE"?T={t:"b",v:!0}:_==="FALSE"?T={t:"b",v:!1}:isNaN($d(_))?isNaN(Ab(_).getDate())||(T={t:"d",v:za(_)},r.cellDates||(T={t:"n",v:Fi(T.v)}),T.z=r.dateNF||Ir[14]):T={t:"n",v:$d(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=T):n[Pr({r:u,c:d})]=T,d+=h}}}}return n["!ref"]=Yr(m),g.length&&(n["!merges"]=g),n}function jIe(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Pr({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||SR(f.w||(Bh(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Vt("td",h,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var BIe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',TIe="</body></html>";function IIe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ym(PV(r[0],t),t);var n=r8();return r.forEach(function(a,s){n8(n,PV(a,t),"Sheet"+(s+1))}),n}function FIe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function _ne(e,t){var r=t||{},n=r.header!=null?r.header:BIe,a=r.footer!=null?r.footer:TIe,s=[n],o=uc(e["!ref"]);r.dense=Array.isArray(e),s.push(FIe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(jIe(e,o,l,r));return s.push("</table>"+a),s.join("")}function Sne(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?cs(n.origin):n.origin;a=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=uc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var O=l[g];if(RV(O)){if(n.display)continue;m[x]={hidden:!0}}var j=O.children;for(v=y=0;v<j.length;++v){var B=j[v];if(!(n.display&&RV(B))){var C=B.hasAttribute("data-v")?B.getAttribute("data-v"):B.hasAttribute("v")?B.getAttribute("v"):Wte(B.innerHTML),k=B.getAttribute("data-z")||B.getAttribute("z");for(h=0;h<f.length;++h){var T=f[h];T.s.c==y+s&&T.s.r<x+a&&x+a<=T.e.r&&(y=T.e.c+1-s,h=-1)}_=+B.getAttribute("colspan")||1,((w=+B.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var L={t:"s",v:C},R=B.getAttribute("data-t")||B.getAttribute("t")||"";C!=null&&(C.length==0?L.t=R||"z":n.raw||C.trim().length==0||R=="s"||(C==="TRUE"?L={t:"b",v:!0}:C==="FALSE"?L={t:"b",v:!1}:isNaN($d(C))?isNaN(Ab(C).getDate())||(L={t:"d",v:za(C)},n.cellDates||(L={t:"n",v:Fi(L.v)}),L.z=n.dateNF||Ir[14]):L={t:"n",v:$d(C)})),L.z===void 0&&k!=null&&(L.z=k);var S="",U=B.getElementsByTagName("A");if(U&&U.length)for(var Q=0;Q<U.length&&!(U[Q].hasAttribute("href")&&(S=U[Q].getAttribute("href"),S.charAt(0)!="#"));++Q);S&&S.charAt(0)!="#"&&(L.l={Target:S}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=L):e[Pr({c:y+s,r:x+a})]=L,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=Yr(u),x>=c&&(e["!fullref"]=Yr((u.e.r=l.length-g+x-1+a,u))),e}function kne(e,t){var r=t||{},n=r.dense?[]:{};return Sne(n,e,t)}function OIe(e,t){return Ym(kne(e,t),t)}function RV(e){var t="",r=DIe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function DIe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function PIe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Dn(t.replace(/<[^>]*>/g,""));return[r]}var LV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function jne(e,t){var r=t||{},n=kR(e),a=[],s,o,l={name:""},c="",u=0,d,f,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},w="",_=0,O=[],j=-1,B=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},k=0,T={},L=[],R={},S=0,U=0,Q=[],X=1,z=1,W=[],G={Names:[]},Y={},K=["",""],H=[],F={},D="",q=0,J=!1,te=!1,ne=0;for(dw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=dw.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?g["!ref"]=Yr(C):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(g["!fullref"]=g["!ref"],C.e.r=r.sheetRows-1,g["!ref"]=Yr(C)),L.length&&(g["!merges"]=L),Q.length&&(g["!rows"]=Q),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,te=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Hr(x[0],!1),j=B=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,g=r.dense?[]:{},L=[],Q=[],te=!0);break;case"table-row-group":x[1]==="/"?--k:++k;break;case"table-row":case"行":if(x[1]==="/"){j+=X,X=1;break}if(f=Hr(x[0],!1),f.行号?j=f.行号-1:j==-1&&(j=0),X=+f["number-rows-repeated"]||1,X<10)for(ne=0;ne<X;++ne)k>0&&(Q[j+ne]={level:k});B=-1;break;case"covered-table-cell":x[1]!=="/"&&++B,r.sheetStubs&&(r.dense?(g[j]||(g[j]=[]),g[j][B]={t:"z"}):g[Pr({r:j,c:B})]={t:"z"}),w="",O=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++B,y=Hr(x[0],!1),z=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=FV(Dn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Dn(y["string-value"]||""),r.dense?(g[j]||(g[j]=[]),g[j][B]=v):g[Pr({r:j,c:B})]=v),B+=z-1;else if(x[1]!=="/"){++B,w="",_=0,O=[],z=1;var ie=X?j+X-1:j;if(B>C.e.c&&(C.e.c=B),B<C.s.c&&(C.s.c=B),j<C.s.r&&(C.s.r=j),ie>C.e.r&&(C.e.r=ie),y=Hr(x[0],!1),H=[],F={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Dn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(S=parseInt(y["number-matrix-rows-spanned"],10)||0,U=parseInt(y["number-matrix-columns-spanned"],10)||0,R={s:{r:j,c:B},e:{r:j+S-1,c:B+U-1}},v.F=Yr(R),W.push([R,v.F])),y.formula)v.f=FV(y.formula);else for(ne=0;ne<W.length;++ne)j>=W[ne][0].s.r&&j<=W[ne][0].e.r&&B>=W[ne][0].s.c&&B<=W[ne][0].e.c&&(v.F=W[ne][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(S=parseInt(y["number-rows-spanned"],10)||0,U=parseInt(y["number-columns-spanned"],10)||0,R={s:{r:j,c:B},e:{r:j+S-1,c:B+U-1}},L.push(R)),y["number-columns-repeated"]&&(z=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ma(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=za(y["date-value"]),r.cellDates||(v.t="n",v.v=Fi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=cCe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=r4(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(w=Dn(y["string-value"]),O=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=w||"",O.length&&(v.R=O),J=_==0),Y.Target&&(v.l=Y),H.length>0&&(v.c=H,H=[]),w&&r.cellText!==!1&&(v.w=w),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var oe=0;oe<X;++oe){if(z=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[j+oe]||(g[j+oe]=[]),g[j+oe][B]=oe==0?v:$a(v);--z>0;)g[j+oe][B+z]=$a(v);else for(g[Pr({r:j+oe,c:B})]=v;--z>0;)g[Pr({r:j+oe,c:B+z})]=$a(v);C.e.c<=B&&(C.e.c=B)}z=parseInt(y["number-columns-repeated"]||"1",10),B+=z-1,z=0,v={},w="",O=[]}Y={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;F.t=w,O.length&&(F.R=O),F.a=D,H.push(F)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);D="",q=0,w="",_=0,O=[];break;case"creator":x[1]==="/"?D=n.slice(q,x.index):q=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,O=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(T[l.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Hr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Hr(x[0],!1),c+=LV[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Hr(x[0],!1),c+=LV[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=Hr(x[0],!1),K=EB(o["cell-range-address"]);var de={Name:o.name,Ref:K[0]+"!"+K[1]};te&&(de.Sheet=m.length),G.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var ke=PIe(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+ke[0]}else Hr(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{K=EB(Hr(x[0])["target-range-address"]),h[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(Y=Hr(x[0],!1),!Y.href)break;Y.Target=Dn(Y.href),delete Y.href,Y.Target.charAt(0)=="#"&&Y.Target.indexOf(".")>-1?(K=EB(Y.Target.slice(1)),Y.Target="#"+K[0]+"!"+K[1]):Y.Target.match(/^\.\.[\\\/]/)&&(Y.Target=Y.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ae={Sheets:h,SheetNames:m,Workbook:G};return r.bookSheets&&delete ae.Sheets,ae}function MV(e,t){t=t||{},Ru(e,"META-INF/manifest.xml")&&c5e(fi(e,"META-INF/manifest.xml"),t);var r=Vc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=jne(ba(r),t);return Ru(e,"meta.xml")&&(n.Props=vre(fi(e,"meta.xml"))),n}function UV(e,t){return jne(e,t)}var RIe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+uw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ti+t}}(),QV=function(){var e=function(s){return Aa(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+Aa(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=uc(s["!ref"]||"A1"),h=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},_="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,w["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var O=Pr({r:u,c:d}),j=g?(s[u]||[])[d]:s[O];if(j&&j.f&&(w["table:formula"]=Aa(n3e(j.f)),j.F&&j.F.slice(0,O.length)==O)){var B=uc(j.F);w["table:number-matrix-columns-spanned"]=B.e.c-B.s.c+1,w["table:number-matrix-rows-spanned"]=B.e.r-B.s.r+1}if(!j){c.push(t);continue}switch(j.t){case"b":_=j.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=j.v?"true":"false";break;case"n":_=j.w||String(j.v||0),w["office:value-type"]="float",w["office:value"]=j.v||0;break;case"s":case"str":_=j.v==null?"":j.v,w["office:value-type"]="string";break;case"d":_=j.w||za(j.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=za(j.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var C=e(_);if(j.l&&j.l.Target){var k=j.l.Target;k=k.charAt(0)=="#"?"#"+a3e(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),C=Vt("text:a",C,{"xlink:href":k.replace(/&/g,"&amp;")})}c.push("          "+Vt("table:table-cell",Vt("text:p",C,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Dm(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[ti],u=uw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=uw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(xre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Bne(e,t){if(t.bookType=="fods")return QV(e,t);var r=ER(),n="",a=[],s=[];return n="mimetype",rn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",rn(r,n,QV(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",rn(r,n,RIe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",rn(r,n,ti+xre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",rn(r,n,f5e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",rn(r,n,u5e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Bg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function OF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ba(Xm(e))}function LIe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Hc(Xf(e))}function MIe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Rm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function HV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function UIe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function QIe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function xw(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ua(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Fs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function zn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=xw(e,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=xw(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function go(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ua(n*8+a.type)),a.type==2&&t.push(ua(a.data.length)),t.push(a.data))})}),Rm(t)}function YR(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Ou(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=xw(e,n),s=zn(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Fs(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=zn(l.data),u=Fs(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=Fs(s[3][0].data)>>>0>0),r.push(o)}return r}function Px(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ua(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ua(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:ua(o.data.length)}],n[2].push({data:go(o.meta),type:2})});var s=go(n);t.push(ua(s.length)),t.push(s),a.forEach(function(o){return t.push(o)})}),Rm(t)}function HIe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=xw(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Rm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Rm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Du(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(HIe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Rm(t)}function Rx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=ua(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return Rm(t)}function VIe(e,t,r,n){var a=Bg(e),s=a.getUint32(4,!0),o=(n>1?12:8)+HV(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=HV(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function zIe(e,t,r){var n=Bg(e),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=UIe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function _B(e,t){var r=new Uint8Array(32),n=Bg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,QIe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function SB(e,t){var r=new Uint8Array(32),n=Bg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function $Ie(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return VIe(e,t,r,e[0]);case 5:return zIe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Xo(e){var t=zn(e);return xw(t[1][0].data)}function VV(e,t){var r=zn(t.data),n=Fs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=zn(o.data),c=Fs(l[1][0].data)>>>0;switch(n){case 1:s[c]=OF(l[3][0].data);break;case 8:{var u=e[Xo(l[9][0].data)][0],d=zn(u.data),f=e[Xo(d[1][0].data)][0],h=Fs(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=zn(f.data);s[c]=m[3].map(function(g){return OF(g.data)}).join("")}break}}),s}function GIe(e,t){var r,n,a,s,o,l,c,u,d,f,h,m,g,x,v=zn(e),y=Fs(v[1][0].data)>>>0,w=Fs(v[2][0].data)>>>0,_=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Fs(v[8][0].data)>0||!1,O,j;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)O=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)O=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,j=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var B=_?4:1,C=Bg(O),k=[],T=0;T<O.length/2;++T){var L=C.getUint16(T*2,!0);L<65535&&k.push([T,L])}if(k.length!=w)throw"Expected ".concat(w," cells, found ").concat(k.length);var R=[];for(T=0;T<k.length-1;++T)R[k[T][0]]=j.subarray(k[T][1]*B,k[T+1][1]*B);return k.length>=1&&(R[k[k.length-1][0]]=j.subarray(k[k.length-1][1]*B)),{R:y,cells:R}}function qIe(e,t){var r,n=zn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Fs(n[7][0].data)>>>0>0?1:0:-1,s=YR(n[5],function(o){return GIe(o,a)});return{nrows:Fs(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function KIe(e,t,r){var n,a=zn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Fs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Fs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Yr(s);var o=zn(a[4][0].data),l=VV(e,e[Xo(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?VV(e,e[Xo(o[17][0].data)][0]):[],u=zn(o[3][0].data),d=0;u[1].forEach(function(f){var h=zn(f.data),m=e[Xo(h[2][0].data)][0],g=Fs(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=qIe(e,m);x.data.forEach(function(v,y){v.forEach(function(w,_){var O=Pr({r:d+y,c:_}),j=$Ie(w,l,c);j&&(r[O]=j)})}),d+=x.nrows})}function WIe(e,t){var r=zn(t.data),n={"!ref":"A1"},a=e[Xo(r[2][0].data)],s=Fs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return KIe(e,a[0],n),n}function XIe(e,t){var r,n=zn(t.data),a={name:(r=n[1])!=null&&r[0]?OF(n[1][0].data):"",sheets:[]},s=YR(n[2],Xo);return s.forEach(function(o){e[o].forEach(function(l){var c=Fs(l.meta[1][0].data);c==6e3&&a.sheets.push(WIe(e,l))})}),a}function YIe(e,t){var r=r8(),n=zn(t.data),a=YR(n[1],Xo);if(a.forEach(function(s){e[s].forEach(function(o){var l=Fs(o.meta[1][0].data);if(l==2){var c=XIe(e,o);c.sheets.forEach(function(u,d){n8(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function kB(e){var t,r,n,a,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Du(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Ou(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Fs(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=Fs(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return YIe(s,l)}function JIe(e,t,r){var n,a,s,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=e[8])==null?void 0:s[0])==null?void 0:o.data)&&Fs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Bg(e[7][0].data),d=0,f=[],h=Bg(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=_B({t:"s",v:t[x]},r),y=SB({t:"s",v:t[x]},r);break;case"number":v=_B({t:"n",v:t[x]},r),y=SB({t:"n",v:t[x]},r);break;case"boolean":v=_B({t:"b",v:t[x]},r),y=SB({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=ua(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Rm(f),e[3][0].data=Rm(g),c}function ZIe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=uc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Yr(n)));var s=G_(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(D){return D.forEach(function(q){typeof q=="string"&&o.push(q)})});var l={},c=[],u=yr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(D,q){return[D,u.FullPaths[q]]}).forEach(function(D){var q=D[0],J=D[1];if(q.type==2&&q.name.match(/\.iwa/)){var te=q.content,ne=Du(te),ie=Ou(ne);ie.forEach(function(oe){c.push(oe.id),l[oe.id]={deps:[],location:J,type:Fs(oe.messages[0].meta[1][0].data)}})}}),c.sort(function(D,q){return D-q});var d=c.filter(function(D){return D>1}).map(function(D){return[D,ua(D)]});u.FileIndex.map(function(D,q){return[D,u.FullPaths[q]]}).forEach(function(D){var q=D[0];if(D[1],!!q.name.match(/\.iwa/)){var J=Ou(Du(q.content));J.forEach(function(te){te.messages.forEach(function(ne){d.forEach(function(ie){te.messages.some(function(oe){return Fs(oe.meta[1][0].data)!=11006&&MIe(oe.data,ie[1])})&&l[ie[0]].deps.push(te.id)})})})}});for(var f=yr.find(u,l[1].location),h=Ou(Du(f.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=Xo(zn(m.messages[0].data)[1][0].data);for(f=yr.find(u,l[v].location),h=Ou(Du(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Xo(zn(m.messages[0].data)[2][0].data),f=yr.find(u,l[v].location),h=Ou(Du(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Xo(zn(m.messages[0].data)[2][0].data),f=yr.find(u,l[v].location),h=Ou(Du(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=zn(m.messages[0].data);{y[6][0].data=ua(n.e.r+1),y[7][0].data=ua(n.e.c+1);var w=Xo(y[46][0].data),_=yr.find(u,l[w].location),O=Ou(Du(_.content));{for(var j=0;j<O.length&&O[j].id!=w;++j);if(O[j].id!=w)throw"Bad ColumnRowUIDMapArchive";var B=zn(O[j].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var C=0;C<=n.e.c;++C){var k=[];k[1]=k[2]=[{type:0,data:ua(C+420690)}],B[1].push({type:2,data:go(k)}),B[2].push({type:0,data:ua(C)}),B[3].push({type:0,data:ua(C)})}B[4]=[],B[5]=[],B[6]=[];for(var T=0;T<=n.e.r;++T)k=[],k[1]=k[2]=[{type:0,data:ua(T+726270)}],B[4].push({type:2,data:go(k)}),B[5].push({type:0,data:ua(T)}),B[6].push({type:0,data:ua(T)});O[j].messages[0].data=go(B)}_.content=Rx(Px(O)),_.size=_.content.length,delete y[46];var L=zn(y[4][0].data);{L[7][0].data=ua(n.e.r+1);var R=zn(L[1][0].data),S=Xo(R[2][0].data);_=yr.find(u,l[S].location),O=Ou(Du(_.content));{if(O[0].id!=S)throw"Bad HeaderStorageBucket";var U=zn(O[0].messages[0].data);for(T=0;T<s.length;++T){var Q=zn(U[2][0].data);Q[1][0].data=ua(T),Q[4][0].data=ua(s[T].length),U[2][T]={type:U[2][0].type,data:go(Q)}}O[0].messages[0].data=go(U)}_.content=Rx(Px(O)),_.size=_.content.length;var X=Xo(L[2][0].data);_=yr.find(u,l[X].location),O=Ou(Du(_.content));{if(O[0].id!=X)throw"Bad HeaderStorageBucket";for(U=zn(O[0].messages[0].data),C=0;C<=n.e.c;++C)Q=zn(U[2][0].data),Q[1][0].data=ua(C),Q[4][0].data=ua(n.e.r+1),U[2][C]={type:U[2][0].type,data:go(Q)};O[0].messages[0].data=go(U)}_.content=Rx(Px(O)),_.size=_.content.length;var z=Xo(L[4][0].data);(function(){for(var D=yr.find(u,l[z].location),q=Ou(Du(D.content)),J,te=0;te<q.length;++te){var ne=q[te];ne.id==z&&(J=ne)}var ie=zn(J.messages[0].data);{ie[3]=[];var oe=[];o.forEach(function(ae,Oe){oe[1]=[{type:0,data:ua(Oe)}],oe[2]=[{type:0,data:ua(1)}],oe[3]=[{type:2,data:LIe(ae)}],ie[3].push({type:2,data:go(oe)})})}J.messages[0].data=go(ie);var de=Px(q),ke=Rx(de);D.content=ke,D.size=D.content.length})();var W=zn(L[3][0].data);{var G=W[1][0];delete W[2];var Y=zn(G.data);{var K=Xo(Y[2][0].data);(function(){for(var D=yr.find(u,l[K].location),q=Ou(Du(D.content)),J,te=0;te<q.length;++te){var ne=q[te];ne.id==K&&(J=ne)}var ie=zn(J.messages[0].data);{delete ie[6],delete W[7];var oe=new Uint8Array(ie[5][0].data);ie[5]=[];for(var de=0,ke=0;ke<=n.e.r;++ke){var ae=zn(oe);de+=JIe(ae,s[ke],o),ae[1][0].data=ua(ke),ie[5].push({data:go(ae),type:2})}ie[1]=[{type:0,data:ua(n.e.c+1)}],ie[2]=[{type:0,data:ua(n.e.r+1)}],ie[3]=[{type:0,data:ua(de)}],ie[4]=[{type:0,data:ua(n.e.r+1)}]}J.messages[0].data=go(ie);var Oe=Px(q),Te=Rx(Oe);D.content=Te,D.size=D.content.length})()}G.data=go(Y)}L[3][0].data=go(W)}y[4][0].data=go(L)}m.messages[0].data=go(y);var H=Px(h),F=Rx(H);return f.content=F,f.size=f.content.length,u}function Tne(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function JR(e){Tne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function ZR(e){Tne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function e6e(e){return gn.WS.indexOf(e)>-1?"sheet":e==gn.CS?"chart":e==gn.DS?"dialog":e==gn.MS?"macro":e&&e.length?e:"sheet"}function t6e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,e6e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function r6e(e,t,r,n,a,s,o,l,c,u,d,f){try{s[n]=C2(Vc(e,r,!0),t);var h=fi(e,t),m;switch(l){case"sheet":m=ETe(h,t,a,c,s[n],u,d,f);break;case"chart":if(m=CTe(h,t,a,c,s[n],u,d,f),!m||!m["!drawel"])break;var g=Jy(m["!drawel"].Target,t),x=fw(g),v=d4e(Vc(e,g,!0),C2(Vc(e,x,!0),g)),y=Jy(v,g),w=fw(y);m=JBe(Vc(e,y,!0),y,c,C2(Vc(e,w,!0),y),u,m);break;case"macro":m=_Te(h,t,a,c,s[n],u,d,f);break;case"dialog":m=STe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=m;var _=[];s&&s[n]&&Ds(s[n]).forEach(function(O){var j="";if(s[n][O].Type==gn.CMNT){j=Jy(s[n][O].Target,t);var B=TTe(fi(e,j,!0),j,c);if(!B||!B.length)return;kV(m,B,!1)}s[n][O].Type==gn.TCMNT&&(j=Jy(s[n][O].Target,t),_=_.concat(A4e(fi(e,j,!0),c)))}),_&&_.length&&kV(m,_,!0,c.people||[])}catch(O){if(c.WTF)throw O}}function ku(e){return e.charAt(0)=="/"?e.slice(1):e}function n6e(e,t){if(a1(),t=t||{},JR(t),Ru(e,"META-INF/manifest.xml")||Ru(e,"objectdata.xml"))return MV(e,t);if(Ru(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof kB<"u"){if(e.FileIndex)return kB(e);var r=yr.utils.cfb_new();return WH(e).forEach(function(Q){rn(r,Q,hCe(e,Q))}),kB(r)}throw new Error("Unsupported NUMBERS file")}if(!Ru(e,"[Content_Types].xml"))throw Ru(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ru(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=WH(e),a=o5e(Vc(e,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",fi(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!fi(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(_2=[],a.sst)try{_2=BTe(fi(e,ku(a.sst)),a.sst,t)}catch(Q){if(t.WTF)throw Q}t.cellStyles&&a.themes.length&&(c=jTe(Vc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=kTe(fi(e,ku(a.style)),a.style,c,t))}a.links.map(function(Q){try{var X=C2(Vc(e,fw(ku(Q))),Q);return FTe(fi(e,ku(Q)),X,Q,t)}catch{}});var d=NTe(fi(e,ku(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=fi(e,ku(a.coreprops[0]),!0),h&&(f=vre(h)),a.extprops.length!==0&&(h=fi(e,ku(a.extprops[0]),!0),h&&h5e(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Vc(e,ku(a.custprops[0]),!0),h&&(m=p5e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(X){return X.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&a.calcchain&&(x=ITe(fi(e,ku(a.calcchain)),a.calcchain));var v=0,y={},w,_;{var O=d.Sheets;f.Worksheets=O.length,f.SheetNames=[];for(var j=0;j!=O.length;++j)f.SheetNames[j]=O[j].name}var B=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),k=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Ru(e,k)||(k="xl/_rels/workbook."+B+".rels");var T=C2(Vc(e,k,!0),k.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=OTe(fi(e,ku(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=m4e(fi(e,ku(a.people[0])),t)),T&&(T=t6e(T,d.Sheets));var L=fi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var R="sheet";if(T&&T[v]?(w="xl/"+T[v][1].replace(/[\/]?xl\//,""),Ru(e,w)||(w=T[v][1]),Ru(e,w)||(w=k.replace(/_rels\/.*$/,"")+T[v][1]),R=T[v][2]):(w="xl/worksheets/sheet"+(v+1-L)+"."+B,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var S=!1,U=0;U!=t.sheets.length;++U)typeof t.sheets[U]=="number"&&t.sheets[U]==v&&(S=1),typeof t.sheets[U]=="string"&&t.sheets[U].toLowerCase()==f.SheetNames[v].toLowerCase()&&(S=1);if(!S)continue e}}r6e(e,w,_,f.SheetNames[v],v,y,o,R,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:_2,Styles:u,Themes:c,SSF:$a(Ir)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(Q,X){Q=Q.replace(/^Root Entry[\/]/,""),g.keys.push(Q),g.files[Q]=e.FileIndex[X]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=fi(e,ku(a.vba[0]),!0):a.defaults&&a.defaults.bin===N4e&&(g.vbaraw=fi(e,"xl/vbaProject.bin",!0))),g}function a6e(e,t){var r=t||{},n="Workbook",a=yr.find(e,n);try{if(n="/!DataSpaces/Version",a=yr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(OSe(a.content),n="/!DataSpaces/DataSpaceMap",a=yr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=PSe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=yr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=RSe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=yr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);MSe(a.content)}catch{}if(n="/EncryptionInfo",a=yr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=USe(a.content);if(n="/EncryptedPackage",a=yr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function s6e(e,t){return t.bookType=="ods"?Bne(e,t):t.bookType=="numbers"?ZIe(e,t):t.bookType=="xlsb"?i6e(e,t):o6e(e,t)}function i6e(e,t){vv=1024,e&&!e.SSF&&(e.SSF=$a(Ir)),e&&e.SSF&&(a1(),Zk(e.SSF),t.revssf=t4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,S2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=ane.indexOf(t.bookType)>-1,a=LR();ZR(t=t||{});var s=ER(),o="",l=0;if(t.cellXfs=[],Jm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",rn(s,o,bre(e.Props,t)),a.coreprops.push(o),da(t.rels,2,o,gn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,rn(s,o,Nre(e.Props)),a.extprops.push(o),da(t.rels,3,o,gn.EXT_PROPS),e.Custprops!==e.Props&&Ds(e.Custprops||{}).length>0&&(o="docProps/custom.xml",rn(s,o,Ere(e.Custprops)),a.custprops.push(o),da(t.rels,4,o,gn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,rn(s,o,PTe(l-1,o,t,e,d)),a.sheets.push(o),da(t.wbrels,-1,"worksheets/sheet"+l+"."+r,gn.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,rn(s,x,MTe(m,x)),a.comments.push(x),da(d,-1,"../comments"+l+"."+r,gn.CMNT),g=!0),f["!legacy"]&&g&&rn(s,"xl/drawings/vmlDrawing"+l+".vml",rne(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&rn(s,fw(o),Mv(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,rn(s,o,LTe(t.Strings,o,t)),a.strs.push(o),da(t.wbrels,-1,"sharedStrings."+r,gn.SST)),o="xl/workbook."+r,rn(s,o,DTe(e,o)),a.workbooks.push(o),da(t.rels,1,o,gn.WB),o="xl/theme/theme1.xml",rn(s,o,zR(e.Themes,t)),a.themes.push(o),da(t.wbrels,-1,"theme/theme1.xml",gn.THEME),o="xl/styles."+r,rn(s,o,RTe(e,o,t)),a.styles.push(o),da(t.wbrels,-1,"styles."+r,gn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",rn(s,o,e.vbaraw),a.vba.push(o),da(t.wbrels,-1,"vbaProject.bin",gn.VBA)),o="xl/metadata."+r,rn(s,o,UTe(o)),a.metadata.push(o),da(t.wbrels,-1,"metadata."+r,gn.XLMETA),rn(s,"[Content_Types].xml",gre(a,t)),rn(s,"_rels/.rels",Mv(t.rels)),rn(s,"xl/_rels/workbook."+r+".rels",Mv(t.wbrels)),delete t.revssf,delete t.ssf,s}function o6e(e,t){vv=1024,e&&!e.SSF&&(e.SSF=$a(Ir)),e&&e.SSF&&(a1(),Zk(e.SSF),t.revssf=t4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,S2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=ane.indexOf(t.bookType)>-1,a=LR();ZR(t=t||{});var s=ER(),o="",l=0;if(t.cellXfs=[],Jm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",rn(s,o,bre(e.Props,t)),a.coreprops.push(o),da(t.rels,2,o,gn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,rn(s,o,Nre(e.Props)),a.extprops.push(o),da(t.rels,3,o,gn.EXT_PROPS),e.Custprops!==e.Props&&Ds(e.Custprops||{}).length>0&&(o="docProps/custom.xml",rn(s,o,Ere(e.Custprops)),a.custprops.push(o),da(t.rels,4,o,gn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,rn(s,o,mne(l-1,t,e,f)),a.sheets.push(o),da(t.wbrels,-1,"worksheets/sheet"+l+"."+r,gn.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,rn(s,v,h4e(g,d,t)),a.threadedcomments.push(v),da(f,-1,"../threadedComments/threadedComment"+l+"."+r,gn.TCMNT)),v="xl/comments"+l+"."+r,rn(s,v,nne(g)),a.comments.push(v),da(f,-1,"../comments"+l+"."+r,gn.CMNT),x=!0}h["!legacy"]&&x&&rn(s,"xl/drawings/vmlDrawing"+l+".vml",rne(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&rn(s,fw(o),Mv(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,rn(s,o,zre(t.Strings,t)),a.strs.push(o),da(t.wbrels,-1,"sharedStrings."+r,gn.SST)),o="xl/workbook."+r,rn(s,o,bne(e)),a.workbooks.push(o),da(t.rels,1,o,gn.WB),o="xl/theme/theme1.xml",rn(s,o,zR(e.Themes,t)),a.themes.push(o),da(t.wbrels,-1,"theme/theme1.xml",gn.THEME),o="xl/styles."+r,rn(s,o,Jre(e,t)),a.styles.push(o),da(t.wbrels,-1,"styles."+r,gn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",rn(s,o,e.vbaraw),a.vba.push(o),da(t.wbrels,-1,"vbaProject.bin",gn.VBA)),o="xl/metadata."+r,rn(s,o,tne()),a.metadata.push(o),da(t.wbrels,-1,"metadata."+r,gn.XLMETA),d.length>1&&(o="xl/persons/person.xml",rn(s,o,p4e(d)),a.people.push(o),da(t.wbrels,-1,"persons/person.xml",gn.PEOPLE)),rn(s,"[Content_Types].xml",gre(a,t)),rn(s,"_rels/.rels",Mv(t.rels)),rn(s,"xl/_rels/workbook."+r+".rels",Mv(t.wbrels)),delete t.revssf,delete t.ssf,s}function e8(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Jc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function l6e(e,t){return yr.find(e,"EncryptedPackage")?a6e(e,t):Ene(e,t)}function c6e(e,t){var r,n=e,a=t||{};return a.type||(a.type=dn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Gte(n,a),n6e(r,a)}function Ine(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return IF(e.slice(r),t);default:break e}return hb.to_workbook(e,t)}function u6e(e,t){var r="",n=e8(e,t);switch(t.type){case"base64":r=Jc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=_g(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ba(r)),t.type="binary",Ine(r,t)}function d6e(e,t){var r=e;return t.type=="base64"&&(r=Jc(r)),r=iw.utils.decode(1200,r.slice(2),"str"),t.type="binary",Ine(r,t)}function f6e(e){return e.match(/[^\x00-\x7F]/)?Xf(e):e}function jB(e,t,r,n){return n?(r.type="string",hb.to_workbook(e,r)):hb.to_workbook(t,r)}function pb(e,t){vR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return pb(new Uint8Array(e),(r=$a(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Qv={},r.dateNF&&(Qv.dateNF=r.dateNF),r.type||(r.type=dn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=dn?"buffer":"binary",n=iCe(e),typeof Uint8Array<"u"&&!dn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=f6e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=$a(r),r.type="array",pb(bR(n),r)}switch((a=e8(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return l6e(yr.read(n,r),r);break;case 9:if(a[1]<=8)return Ene(n,r);break;case 60:return IF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return gSe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Hre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?c6e(n,r):jB(e,n,r,s);case 239:return a[3]===60?IF(n,r):jB(e,n,r,s);case 255:if(a[1]===254)return d6e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return ig.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return ig.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return TF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Wre.to_workbook(n,r);break;case 10:case 13:case 32:return u6e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return pSe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?TF.to_workbook(n,r):jB(e,n,r,s)}function Fne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return iN(t.file,yr.write(e,{type:dn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return yr.write(e,t)}function A6e(e,t){var r=$a(t||{}),n=s6e(e,r);return h6e(n,r)}function h6e(e,t){var r={},n=dn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?yr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Jk(a))}return t.password&&typeof encrypt_agile<"u"?Fne(encrypt_agile(a,t.password),t):t.type==="file"?iN(t.file,a):t.type=="string"?ba(a):a}function m6e(e,t){var r=t||{},n=fIe(e,r);return Fne(n,r)}function Mf(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return ow(Xf(n));case"binary":return Xf(n);case"string":return e;case"file":return iN(t.file,n,"utf8");case"buffer":return dn?zh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Mf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function p6e(e,t){switch(t.type){case"base64":return ow(e);case"binary":return e;case"string":return e;case"file":return iN(t.file,e,"binary");case"buffer":return dn?zh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function dC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?ow(r):t.type=="string"?ba(r):r;case"file":return iN(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function One(e,t){vR(),lTe(e);var r=$a(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=One(e,r);return r.type="array",Jk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Mf(sIe(e,r),r);case"slk":case"sylk":return Mf(Qre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Mf(_ne(e.Sheets[e.SheetNames[a]],r),r);case"txt":return p6e(Dne(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Mf(t8(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Mf(Hre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return dC(TF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Mf(hb.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Mf(Wre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Mf(Vre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Mf(Bne(e,r),r);case"wk1":return dC(ig.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return dC(ig.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),dC(Cne(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),m6e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return A6e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function g6e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function o1(e,t,r){var n={};return n.type="file",n.file=t,g6e(n),One(e,n)}function x6e(e,t,r,n,a,s,o,l){var c=Zs(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(h[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[m]]=null;else if(u!==void 0)h[s[m]]=u;else if(d&&x===null)h[s[m]]=null;else continue;else h[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:Bh(g,x,l);x!=null&&(f=!1)}}return{row:h,isempty:f}}function G_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Pn(d);break;case"number":c=Pn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Zs(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,w=0,_={};v&&!e[y]&&(e[y]=[]);var O=u.skipHidden&&e["!cols"]||[],j=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(O[w]||{}).hidden)switch(h[w]=ls(w),r=v?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Bh(r,null,u),x=_[o]||0,!x)_[o]=1;else{do l=o+"_"+x++;while(_[l]);_[o]=x,_[l]=1}s[w]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(j[y]||{}).hidden){var B=x6e(e,c,y,h,n,s,v,u);(B.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=B.row)}return m.length=g,m}var zV=/"/g;function v6e(e,t,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=Zs(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=l.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Bh(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(zV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(zV,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function t8(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Pn(e["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=ls(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=v6e(e,a,v,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete n.dense,r.join("")}function Dne(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=t8(e,t);return r}function b6e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Pn(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=ls(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Zs(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function Pne(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?cs(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var f=Pn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(x,v){Ds(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var w=x[y],_="z",O="",j=Pr({c:l+m,r:o+v+a});u=vw(s,j),w&&typeof w=="object"&&!(w instanceof Date)?s[j]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=Fi(w)),O=n.dateNF||Ir[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,O&&(u.z=O)):s[j]=u={t:_,v:w},O&&(u.z=O))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=Zs(o);if(a)for(m=0;m<h.length;++m)s[ls(m+l)+g]={t:"s",v:h[m]};return s["!ref"]=Yr(d),s}function y6e(e,t){return Pne(null,e,t)}function vw(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=cs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?vw(e,Pr(t)):vw(e,Pr({r:t,c:r||0}))}function w6e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function r8(){return{SheetNames:[],Sheets:{}}}function n8(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(vne(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function N6e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=w6e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function E6e(e,t){return e.z=t,e}function Rne(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function C6e(e,t,r){return Rne(e,"#"+t,r)}function _6e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function S6e(e,t,r,n){for(var a=typeof t!="string"?t:Pn(t),s=typeof t=="string"?t:Yr(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=vw(e,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Ts={encode_col:ls,encode_row:Zs,encode_cell:Pr,encode_range:Yr,decode_col:IR,decode_row:TR,split_cell:LCe,decode_cell:cs,decode_range:uc,format_cell:Bh,sheet_add_aoa:ure,sheet_add_json:Pne,sheet_add_dom:Sne,aoa_to_sheet:s1,json_to_sheet:y6e,table_to_sheet:kne,table_to_book:OIe,sheet_to_csv:t8,sheet_to_txt:Dne,sheet_to_json:G_,sheet_to_html:_ne,sheet_to_formulae:b6e,sheet_to_row_object_array:G_,sheet_get_cell:vw,book_new:r8,book_append_sheet:n8,book_set_sheet_visibility:N6e,cell_set_number_format:E6e,cell_set_hyperlink:Rne,cell_set_internal_link:C6e,cell_add_comment:_6e,sheet_set_array_formula:S6e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function k6e({data:e,fileName:t,sheetName:r="Sheet 1"}){try{const n=Ts.book_new(),a=Ts.json_to_sheet(e);Ts.book_append_sheet(n,a,r),o1(n,`${t}.xlsx`)}catch(n){console.error("Error exporting to Excel:",n),alert("Hubo un error al generar el archivo de Excel. Por favor, intente de nuevo.")}}const j6e=Array.from({length:12},(e,t)=>t+1),$V={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},B6e=e=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState(null);N.useEffect(()=>e?CEe(e,f=>{r(f),a(!1)}):void 0,[e]);const l=N.useCallback(async d=>{try{return o(null),await NEe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=N.useCallback(async d=>{try{o(null),await EEe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=N.useCallback(async d=>{try{return o(null),d.trim()?await SEe(e,d):t}catch(f){return o(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:l,remove:c,search:u}},T6e=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0);N.useEffect(()=>_Ee(o=>{t(o),n(!1)}),[]);const a=N.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Lx=({label:e,icon:t,children:r})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),i.jsxs("div",{className:"relative",children:[t&&i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),I6e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",F6e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",O6e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",O0=({title:e,value:t,icon:r})=>i.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),i.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),D6e=({data:e,title:t,period:r})=>{const n=Math.max(1,...e.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx(qc,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:t||`Reemplazos / Inasistencias por curso (${r==="month"?"mes":"total"})`})]}),e.length===0?i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["No hay registros ",r==="month"?"este mes":"en el período seleccionado","."]}):i.jsx("div",{className:"grid gap-3",children:e.map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},BB=({title:e,data:t,icon:r})=>{const n=Math.max(1,...t.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r,i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:e})]}),t.length===0?i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros para mostrar."}):i.jsx("div",{className:"grid gap-3",children:t.slice(0,5).map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},P6e=({reemplazos:e,period:t})=>{const r=N.useMemo(()=>{if(t==="month"){const a=new Date,s=a.getMonth(),o=a.getFullYear();return(e||[]).filter(l=>{if(!l.diaAusencia)return!1;const c=new Date(l.diaAusencia+"T00:00:00");return c.getMonth()===s&&c.getFullYear()===o})}return e},[e,t]),n=N.useMemo(()=>{const a=r.length,s=r.filter(u=>u.resultado==="Hora realizada").length,o=a-s,l=a>0?s/a*100:0,c=u=>Object.entries(r.reduce((d,f)=>{const h=f[u];return h&&(d[h]=(d[h]||0)+1),d},{})).map(([d,f])=>({label:d,value:f})).sort((d,f)=>f.value-d.value);return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:o,porcentajeRealizadas:l,setAusentes:new Set(r.map(u=>u.docenteAusente).filter(Boolean)),setReemplazan:new Set(r.map(u=>u.docenteReemplazante).filter(Boolean)),setCursos:new Set(r.map(u=>u.curso).filter(Boolean)),setAsigAusentes:new Set(r.map(u=>u.asignaturaAusente).filter(Boolean)),ausenciasPorProfesor:c("docenteAusente"),reemplazosPorProfesor:c("docenteReemplazante"),ausenciasPorAsignatura:c("asignaturaAusente")}},[r]);return n?i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(O0,{title:"Total Reemplazos",value:n.totalReemplazos,icon:i.jsx(U2e,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Horas Realizadas",value:n.horasRealizadas,icon:i.jsx(Ha,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Horas Cubiertas",value:n.horasCubiertas,icon:i.jsx(wwe,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Efectividad",value:`${n.porcentajeRealizadas.toFixed(1)}%`,icon:i.jsx(ENe,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(O0,{title:"Profesores ausentes (únicos)",value:n.setAusentes.size,icon:i.jsx(IH,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Reemplazantes (únicos)",value:n.setReemplazan.size,icon:i.jsx(I_,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Cursos (únicos)",value:n.setCursos.size,icon:i.jsx(ro,{className:"h-6 w-6"})}),i.jsx(O0,{title:"Asignaturas ausentes (únicas)",value:n.setAsigAusentes.size,icon:i.jsx(vi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(BB,{title:`Profesores con más ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorProfesor,icon:i.jsx(IH,{className:"h-5 w-5 text-slate-400"})}),i.jsx(BB,{title:`Profesores que más reemplazan (${t==="month"?"mes":"total"})`,data:n.reemplazosPorProfesor,icon:i.jsx(I_,{className:"h-5 w-5 text-slate-400"})})]}),i.jsx("div",{className:"grid gap-4",children:i.jsx(BB,{title:`Asignaturas con más ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorAsignatura,icon:i.jsx(vi,{className:"h-5 w-5 text-slate-400"})})})]}):i.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[i.jsx(El,{className:"h-5 w-5 animate-spin"}),"Calculando estadísticas…"]})})},R6e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:o,error:l}=B6e(t),{profesorNames:c,loading:u}=T6e(),[d,f]=N.useState($V),[h,m]=N.useState(""),[g,x]=N.useState([]),[v,y]=N.useState(null),[w,_]=N.useState(!1),[O,j]=N.useState(!1),[B,C]=N.useState("month"),[k,T]=N.useState(null);N.useEffect(()=>{(async()=>{if(!h.trim()){x(r);return}j(!0);try{const Y=await s(h);x(Y)}finally{j(!1)}})()},[r,h,s]);const L=N.useMemo(()=>{let G=[...g];return k!==null&&G.sort((Y,K)=>{const H=k.key,F=Y[H],D=K[H];if(F==null)return 1;if(D==null)return-1;let q=0;if(H==="bloquesAfectados"){const J=F,te=D;J.length<te.length?q=-1:J.length>te.length&&(q=1)}else{const J=String(F),te=String(D);q=J.localeCompare(te,"es",{numeric:!0})}return k.direction==="ascending"?q:-q}),G},[g,k]),R=G=>{let Y="ascending";k&&k.key===G&&k.direction==="ascending"&&(Y="descending"),T({key:G,direction:Y})},S=N.useCallback(G=>{const{name:Y,value:K}=G.target;f(H=>({...H,[Y]:K}))},[]),U=N.useCallback(G=>{f(Y=>{const H=Y.bloquesAfectados.includes(G)?Y.bloquesAfectados.filter(F=>F!==G):[...Y.bloquesAfectados,G].sort((F,D)=>F-D);return{...Y,bloquesAfectados:H}})},[]),Q=N.useCallback(async G=>{G.preventDefault(),y(null),_(!0);const{docenteAusente:Y,asignaturaAusente:K,curso:H,diaAusencia:F,bloquesAfectados:D,docenteReemplazante:q,asignaturaReemplazante:J}=d;if(!Y||!K||!H||!F||!q||!J||D.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(Y===q){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const te=K.trim().toLowerCase()===J.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ne={...d,resultado:te};await n(ne),f($V);const ie=document.createElement("div");ie.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",ie.textContent=te==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(ie),setTimeout(()=>{document.body.contains(ie)&&document.body.removeChild(ie)},2500)}catch(te){console.error(te),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),X=N.useCallback(async G=>{if(window.confirm("¿Eliminar este registro?"))try{await a(G)}catch(Y){console.error(Y),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),z=N.useMemo(()=>{const G=B==="month"?r.filter(K=>{if(!K.diaAusencia)return!1;const H=new Date(K.diaAusencia+"T00:00:00"),F=new Date;return H.getMonth()===F.getMonth()&&H.getFullYear()===F.getFullYear()}):r,Y={};for(const K of G){const H=K.curso||"Sin curso";Y[H]=(Y[H]||0)+1}return Object.entries(Y).sort(([K],[H])=>K.localeCompare(H,"es")).map(([K,H])=>({label:K,value:H}))},[r,B]),W="w-full rounded-lg border bg-white pl-10 pr-4 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!(e!=null&&e.id)&&!(e!=null&&e.email)?i.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando datos para: ",B==="month"?"Mes Actual":"Total"]})]}),i.jsxs("div",{className:"flex items-center rounded-lg bg-slate-100 p-1 dark:bg-slate-700",children:[i.jsx("button",{onClick:()=>C("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${B==="month"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Mes"}),i.jsx("button",{onClick:()=>C("total"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${B==="total"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Total"})]})]}),i.jsx(P6e,{reemplazos:r,period:B})]}),i.jsx(D6e,{data:z,title:`Reemplazos / Inasistencias por curso (${B==="month"?"mes":"total"})`,period:B}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[i.jsx(El,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):i.jsxs("form",{onSubmit:Q,className:"space-y-8",children:[i.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),i.jsx(Lx,{label:"Nombre",icon:i.jsx(Eg,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:S,className:W,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(G=>i.jsx("option",{value:G,children:G},G))]})}),i.jsx(Lx,{label:"Asignatura",icon:i.jsx(vi,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:S,className:W,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ua.map(G=>i.jsx("option",{value:G,children:G},G))]})}),i.jsx(Lx,{label:"Curso",icon:i.jsx(ro,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"curso",value:d.curso,onChange:S,className:W,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(G=>i.jsx("option",{value:G,children:G},G))]})}),i.jsx(Lx,{label:"Día de ausencia",icon:i.jsx(oc,{className:"h-5 w-5"}),children:i.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:S,className:W,required:!0,disabled:w})}),i.jsxs("div",{children:[i.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[i.jsx(Fd,{className:"h-5 w-5 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:j6e.map(G=>{const Y=d.bloquesAfectados.includes(G);return i.jsx("button",{type:"button",onClick:()=>U(G),disabled:w,className:`${I6e} ${Y?F6e:O6e}`,"aria-pressed":Y,children:G},G)})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),i.jsx(Lx,{label:"Nombre",icon:i.jsx(Eg,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:S,className:W,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(G=>i.jsx("option",{value:G,children:G},G))]})}),i.jsx(Lx,{label:"Asignatura",icon:i.jsx(vi,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:S,className:W,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ua.map(G=>i.jsx("option",{value:G,children:G},G))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&i.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[i.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(Ha,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&i.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?i.jsxs(i.Fragment,{children:[i.jsx(El,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):i.jsxs(i.Fragment,{children:[i.jsx(Yc,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando ",L.length," de ",r.length," registros."]})]}),i.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[i.jsxs("div",{className:"relative w-full max-w-md",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:O?i.jsx(El,{className:"h-5 w-5 animate-spin"}):i.jsx(t1,{className:"h-5 w-5"})}),i.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:G=>m(G.target.value),className:W+" pl-10",disabled:O})]}),i.jsxs("button",{onClick:()=>k6e({data:L.map(G=>({Fecha:G.diaAusencia,Curso:G.curso,"Docente Ausente":G.docenteAusente,"Asignatura Ausente":G.asignaturaAusente,"Docente Reemplazante":G.docenteReemplazante,"Asignatura Reemplazante":G.asignaturaReemplazante,"Bloques Afectados":G.bloquesAfectados.join(", "),Resultado:G.resultado})),fileName:`Historial_Reemplazos_${new Date().toISOString().split("T")[0]}`,sheetName:"Reemplazos"}),disabled:L.length===0,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-50",title:"Descargar datos filtrados a Excel",children:[i.jsx(Iwe,{className:"h-4 w-4"}),i.jsx("span",{children:"Excel"})]})]})]}),o?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[i.jsx(El,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[[{label:"Fecha",key:"diaAusencia"},{label:"Curso",key:"curso"},{label:"Docente Ausente",key:"docenteAusente"},{label:"Docente Reemplazante",key:"docenteReemplazante"},{label:"Bloques",key:"bloquesAfectados"},{label:"Resultado",key:"resultado"}].map(G=>i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:i.jsxs("button",{onClick:()=>R(G.key),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-200",children:[G.label,i.jsx(P2e,{className:"h-3 w-3"})]})},G.key)),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:L.length>0?L.map(G=>i.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(G.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:G.curso}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[G.docenteAusente,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:G.asignaturaAusente})]}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[G.docenteReemplazante,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:G.asignaturaReemplazante})]}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:G.bloquesAfectados.join(", ")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${G.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(Ha,{className:"h-4 w-4"}),G.resultado]})}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>X(G.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:i.jsx(Va,{className:"h-4 w-4"})})})]},G.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),L.length>0&&!h&&i.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",L.length," registros"]})]})]})]})},L6e=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=mt(pr,"reemplazos"),r=Lt(t,Jt("fecha","desc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},M6e=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=mt(pr,"acompanamientos"),r=Lt(t,Jt("fecha","desc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},U6e=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=mt(pr,"calendar_events"),r=Lt(t,Jt("date","asc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},Pf=({title:e,value:t,description:r,isLoading:n=!1})=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),kp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=N.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=N.useMemo(()=>Math.max(...s,1),[s]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):i.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(l.value)})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/o*100}%`}})})]},l.label+c)}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Q6e=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState([]),[o,l]=N.useState(!0),[c,u]=N.useState(null);return N.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(l(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=L6e(v=>{t(v),h()}),g=M6e(v=>{n(v),h()}),x=U6e(v=>{s(v),h()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:o,error:c}},H6e=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=Q6e(),[o,l]=N.useState(v2);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),N.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):v2)}catch(m){console.error("Error al leer rúbrica personalizada",m),l(v2)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),i.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[i.jsx("p",{children:i.jsx("strong",{children:"Debug Info:"})}),i.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),i.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),i.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),i.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=N.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(j=>j.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(j,B)=>j.reduce((C,k)=>{const T=k[B];return typeof T=="string"&&(C[T]=(C[T]||0)+1),C},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),O=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(w).map(([j,B])=>({label:j,value:B})),reemplazosPorDocente:Object.entries(_).map(([j,B])=>({label:j,value:B})),inasistenciasPorCurso:Object.entries(O).map(([j,B])=>({label:j,value:B})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=N.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(B=>{B.criteria.forEach(C=>{g.set(C.name,B.domain)})});let x=0,v=0;const y={},w={};r.forEach(B=>{y[B.docente]||(y[B.docente]={total:0,count:0}),Object.entries(B.rubricaResultados).forEach(([C,k])=>{x+=k,v++,y[B.docente].total+=k,y[B.docente].count++;const T=g.get(C);T&&(w[T]||(w[T]={total:0,count:0}),w[T].total+=k,w[T].count++)})});const _=v>0?(x/v).toFixed(2):"N/A",O=Object.entries(y).map(([B,C])=>({label:B,value:C.count>0?(C.total/C.count).toFixed(2):0})),j=Object.entries(w).map(([B,C])=>({label:B,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:_,desempenoPorDocente:O,desempenoPorDominio:j}},[r,o]),d=N.useMemo(()=>{const m={[nn.EVALUACION]:0,[nn.ACTO]:0,[nn.ACTIVIDAD_FOCALIZADA]:0,[nn.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:Pv[x].label,value:v}));return{totalEvaluaciones:m[nn.EVALUACION],totalActos:m[nn.ACTO],totalActividadesFocalizadas:m[nn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[nn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"📊"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),i.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[i.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),i.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),i.jsx("p",{children:"• Calendario Académico"})]})]}):i.jsxs("div",{className:"space-y-12 animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),i.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),i.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Pf,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),i.jsx(Pf,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),i.jsx(Pf,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),i.jsx(Pf,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(kp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),i.jsx(kp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),i.jsx(kp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),i.jsx(kp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Pf,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),i.jsx(Pf,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(kp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),i.jsx(kp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Pf,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),i.jsx(Pf,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),i.jsx(Pf,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),i.jsx(Pf,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(kp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return i.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&i.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Pv[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=Pv[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),i.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),i.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},DF="carga_horaria_asignaciones",Lne="usuarios",V6e=e=>{const t=e.data();return{id:e.id,...t}},z6e=e=>{const t=Lt(mt(st,Lne),dr("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),Jt("nombreCompleto","asc"));return lr(t,n=>{const a=n.docs.map(s=>{const o=s.data();return{id:s.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(a)},n=>{console.error("Error al suscribirse a los docentes:",n),e([])})},$6e=async e=>{try{return(await on(mt(st,Lne),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:ya()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},G6e=e=>{const t=Lt(mt(st,DF),Jt("docenteNombre","asc"));return lr(t,n=>{const a=n.docs.map(s=>V6e(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},q6e=async(e,t=!1)=>{try{if(t){const a=(await Mr(mt(st,DF))).docs.map(s=>wa(s.ref));await Promise.all(a),console.log(`Se eliminaron ${a.length} asignaciones existentes`)}const r=e.map(n=>on(mt(st,DF),{...n,createdAt:ya(),updatedAt:ya()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},q_=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},Zy=e=>{const t=q_(e);return e-t},S5=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),Mne=(e,t)=>{const r=q_(e.horasContrato),n=Zy(e.horasContrato),a=t.filter(m=>m.docenteId===e.id),s=a.reduce((m,g)=>m+S5(g.horasPorCurso),0),o=a.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+o,c=0,u=r-l,d=n-c,f=[],h=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>n&&f.push(`Excede horas no lectivas: ${c}/${n}`),l<r&&l>0&&h.push(`Faltan ${u} horas lectivas`),{HA:r,HB:n,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:h,errors:f}},K6e=(e,t)=>{const r=Mne(e,t),n=[];return r.errors.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${a}`})}),r.warnings.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${a}`})}),n},W6e=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}º${t[2].toUpperCase()}`:e},X6e=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,Y6e=()=>{N.useEffect(()=>{const H=document.createElement("style");return H.innerHTML=X6e,document.head.appendChild(H),()=>{document.head.removeChild(H)}},[]);const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=N.useState(!1),[c,u]=N.useState("docentes"),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[w,_]=N.useState("");N.useEffect(()=>z6e(F=>t(F)),[]),N.useEffect(()=>G6e(F=>{const D=F.map(q=>{let J=q.funcionesLectivas||[];!J.length&&q.funcionesNoLectivas&&q.funcionesNoLectivas.length?J=q.funcionesNoLectivas:!J.length&&q.otraFuncion&&(J=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:q.otraFuncion,horas:parseInt(q.otraFuncion)||0}]);const{funcionesNoLectivas:te,otraFuncion:ne,...ie}=q;return{...ie,funcionesLectivas:J}});n(D)}),[]);const O=N.useMemo(()=>{const H={};return e.forEach(F=>{const D=r.filter(q=>q.docenteId===F.id);H[F.id]=Mne(F,D)}),H},[e,r]);N.useEffect(()=>{const H=[];e.forEach(F=>H.push(...K6e(F,r))),f(H)},[e,r]);const j=N.useMemo(()=>w?e.filter(H=>{var F;return H.nombre.toLowerCase().includes(w.toLowerCase())||((F=H.email)==null?void 0:F.toLowerCase().includes(w.toLowerCase()))}):e,[e,w]),B=N.useMemo(()=>r.filter(F=>{const D=e.find(q=>q.id===F.docenteId);return!(!D||a.busqueda&&!D.nombre.toLowerCase().includes(a.busqueda.toLowerCase())||a.asignatura&&F.asignaturaOModulo!==a.asignatura||a.departamento&&D.departamento!==a.departamento||a.curso&&!Object.keys(F.horasPorCurso).includes(a.curso))}).sort((F,D)=>F.docenteId!==D.docenteId?F.docenteId.localeCompare(D.docenteId):(F.asignaturaOModulo||"").localeCompare(D.asignaturaOModulo||"")),[r,e,a]),C=async()=>{try{if(m(!0),!v.nombre||!v.email){alert("El nombre y email son obligatorios"),m(!1);return}await $6e(v),x(!1),y({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(H){console.error(H),alert("Error al crear docente")}finally{m(!1)}},k=N.useCallback(()=>{if(e.length===0)return;const H={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:Ua[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(F=>[...F,H])},[e]),T=N.useCallback((H,F)=>{const D=r.filter(te=>te.docenteId===H).map(te=>te.asignaturaOModulo);let q=Ua[0];for(const te of Ua)if(!D.includes(te)){q=te;break}const J={id:`asig_${Date.now()}`,docenteId:H,docenteNombre:F,asignaturaOModulo:q,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(te=>[...te,J])},[r]),L=N.useCallback(H=>n(F=>F.filter(D=>D.id!==H)),[]),R=N.useCallback(H=>{n(F=>F.map(D=>{if(D.id!==H)return D;const q={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...D,funcionesLectivas:[...D.funcionesLectivas||[],q]}}))},[]),S=N.useCallback((H,F,D,q)=>{n(J=>J.map(te=>{if(te.id!==H)return te;const ne=(te.funcionesLectivas||[]).map(ie=>ie.id===F?{...ie,[D]:q}:ie);return{...te,funcionesLectivas:ne}}))},[]),U=N.useCallback((H,F)=>{n(D=>D.map(q=>{if(q.id!==H)return q;const J=(q.funcionesLectivas||[]).filter(te=>te.id!==F);return{...q,funcionesLectivas:J}}))},[]),Q=N.useCallback((H,F,D)=>{n(q=>q.map(J=>{if(J.id!==H)return J;const te={...J,[F]:D};if(F==="docenteId"){const ne=e.find(ie=>ie.id===D);ne&&(te.docenteNombre=ne.nombre)}return F==="horasPorCurso"&&(te.horasXAsig=S5(D)),te}))},[e]),X=N.useCallback((H,F,D)=>{n(q=>q.map(J=>{if(J.id!==H)return J;const te={...J.horasPorCurso};return D===0?delete te[F]:te[F]=D,{...J,horasPorCurso:te,horasXAsig:S5(te)}}))},[]),z=N.useCallback(H=>{m(!0);const F=new FileReader;F.onload=D=>{var q;try{const J=new Uint8Array((q=D.target)==null?void 0:q.result),te=pb(J,{type:"array"}),ne=te.Sheets["Docentes 2025"]||te.Sheets[te.SheetNames[0]],ie=Ts.sheet_to_json(ne,{header:1});let oe=-1;for(let ae=0;ae<ie.length;ae++){const Oe=ie[ae];if(Oe&&Oe.some(Te=>typeof Te=="string"&&(Te.includes("Docente")||Te.includes("ASIGNATURA")||ks.some(Se=>Te.includes(Se.replace("º","")))))){oe=ae;break}}if(oe===-1){alert("No se encontró la fila de encabezado en el archivo");return}const de=ie[oe],ke=[];for(let ae=oe+1;ae<ie.length;ae++){const Oe=ie[ae];if(!Oe||Oe.length===0)continue;const Te=Oe[de.indexOf("Docente")]||"";if(!Te)continue;const Se=e.find(ue=>ue.nombre.toLowerCase().includes(Te.toLowerCase()));if(!Se)continue;const fe={};de.forEach((ue,we)=>{if(typeof ue=="string"){const De=W6e(ue.trim());if(ks.includes(De)){const He=parseInt(Oe[we])||0;He>0&&(fe[De]=He)}}});let ye=[];const Le=Oe[de.indexOf("FUNCIONES LECTIVAS")]||Oe[de.indexOf("FUNCIONES NO LECTIVAS")]||Oe[de.indexOf("OTRA FUNCIÓN")]||"";typeof Le=="string"&&Le.includes(":")?ye=Le.split(",").map(ue=>{const[we,De]=ue.split(":").map(He=>He.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:we,horas:parseInt(De)||0}}):Le&&(ye=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Le,horas:0}]);const Qe={id:`import_${Date.now()}_${ae}`,docenteId:Se.id,docenteNombre:Se.nombre,asignaturaOModulo:Oe[de.indexOf("ASIGNATURA O MÓDULO")]||"",funcionesLectivas:ye,horasPorCurso:fe,horasXAsig:S5(fe)};ke.push(Qe)}n(ke),alert(`Se importaron ${ke.length} asignaciones exitosamente`)}catch(J){console.error("Error al importar:",J),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},F.readAsArrayBuffer(H)},[e]),W=N.useCallback(()=>{const H=r.map(q=>{const J=e.find(oe=>oe.id===q.docenteId),te=O[q.docenteId];let ne="";q.funcionesLectivas&&q.funcionesLectivas.length>0?ne=q.funcionesLectivas.map(oe=>`${oe.nombre}: ${oe.horas}h`).join(", "):q.funcionesNoLectivas&&q.funcionesNoLectivas.length>0?ne=q.funcionesNoLectivas.map(oe=>`${oe.nombre}: ${oe.horas}h`).join(", "):q.otraFuncion&&(ne=q.otraFuncion);const ie={Docente:q.docenteNombre,"ASIGNATURA O MÓDULO":q.asignaturaOModulo||"","FUNCIONES LECTIVAS":ne,"HORAS X ASIG.":q.horasXAsig||0};return ks.forEach(oe=>ie[oe]=q.horasPorCurso[oe]||0),te&&(ie["HORAS LECTIVAS (HA)"]=te.HA,ie["HORAS NO LECTIVAS (HB)"]=te.HB,ie["HORAS CONTRATO"]=(J==null?void 0:J.horasContrato)||0),ie}),F=Ts.json_to_sheet(H),D=Ts.book_new();Ts.book_append_sheet(D,F,"Horarios"),o1(D,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,O]),G=N.useCallback(async()=>{if(d.filter(F=>F.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const F=[],D=[];r.forEach(J=>{let te=J.funcionesLectivas||[];J.funcionesNoLectivas&&J.funcionesNoLectivas.length>0&&te.length===0?te=J.funcionesNoLectivas.map(ke=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:ke.nombre,horas:ke.horas})):J.otraFuncion&&te.length===0&&(te=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:J.otraFuncion,horas:parseInt(J.otraFuncion)||0}]);const{funcionesNoLectivas:ne,otraFuncion:ie,...oe}=J,de={...oe,funcionesLectivas:te};if(J.id.startsWith("asig_")||J.id.startsWith("import_")){const{id:ke,...ae}=de;D.push(ae)}else F.push(de)});const q=[...F.map(({id:J,...te})=>te),...D];await q6e(q,!0),alert("Horarios guardados exitosamente")}catch(F){console.error("Error al guardar horarios:",F),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),Y=H=>{const F=O[H];return F?F.errors.length>0?"red":F.warnings.length>0?"yellow":"green":"gray"},K=()=>g?i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[i.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(I_,{className:"w-5 h-5"}),"Añadir Nuevo Docente"]}),i.jsx("button",{onClick:()=>x(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:h,children:i.jsx(uA,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:v.nombre,onChange:H=>y({...v,nombre:H.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",value:v.email,onChange:H=>y({...v,email:H.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:v.departamento,onChange:H=>y({...v,departamento:H.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemáticas, Lenguaje, etc."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:v.horasContrato,onChange:H=>y({...v,horasContrato:parseInt(H.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:v.perfil,onChange:H=>y({...v,perfil:H.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[i.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),i.jsx("option",{value:"SUBDIRECCION",children:"Subdirección"}),i.jsx("option",{value:"COORDINACION_TP",children:"Coordinación TP"})]}),i.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:h,children:"Cancelar"}),i.jsx("button",{onClick:C,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:h||!v.nombre||!v.email,children:h?i.jsxs(i.Fragment,{children:[i.jsx(El,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Guardando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(yte,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar"})]})})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(wte,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:["Los campos marcados con ",i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[i.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),i.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[i.jsx(oc,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),i.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestión de carga horaria docente con validación 65%/35% y visualización en tiempo real"})]}),i.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[i.jsx(y2,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver estadísticas"})]}),i.jsxs("button",{onClick:G,disabled:d.some(H=>H.tipo==="error")||h,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[i.jsx(Yc,{className:"w-4 h-4"}),i.jsx("span",{children:h?"Guardando...":"Guardar cambios"})]})]})]})})]}),i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[i.jsx(Xk,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 md:max-w-xs",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(t1,{className:"text-gray-400 w-4 h-4"})}),i.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:w,onChange:H=>_(H.target.value)})]})}),i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(am,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:a.curso,onChange:H=>s(F=>({...F,curso:H.target.value})),children:[i.jsx("option",{value:"",children:"Todos los cursos"}),ks.map(H=>i.jsx("option",{value:H,children:H},H))]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(vi,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:a.asignatura,onChange:H=>s(F=>({...F,asignatura:H.target.value})),children:[i.jsx("option",{value:"",children:"Todas las asignaturas"}),Ua.map(H=>i.jsx("option",{value:H,children:H},H))]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("button",{onClick:()=>x(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(I_,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),i.jsxs("button",{onClick:k,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(So,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[i.jsx(r1,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:H=>{var F;return((F=H.target.files)==null?void 0:F[0])&&z(H.target.files[0])}})]}),i.jsxs("button",{onClick:W,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(fR,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(qc,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),i.jsxs("button",{onClick:G,disabled:d.some(H=>H.tipo==="error")||h,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[h?i.jsx(El,{className:"w-5 h-5 animate-spin"}):i.jsx(Yc,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:h?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wu,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),i.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(nw,{className:"w-3 h-3"})," ",d.filter(H=>H.tipo==="error").length," Errores"]}),i.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(aw,{className:"w-3 h-3"})," ",d.filter(H=>H.tipo==="warning").length," Advertencias"]})]})]}),i.jsx("div",{className:"p-5",children:i.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((H,F)=>i.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${H.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[H.tipo==="error"?i.jsx(nw,{className:"w-5 h-5 shrink-0"}):i.jsx(aw,{className:"w-5 h-5 shrink-0"}),i.jsx("span",{className:"text-sm",children:H.mensaje})]},F))})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(tw,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[1000px]",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),i.jsx("span",{children:"Estado"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(ro,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Docente"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(vi,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Asignatura"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(TH,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Func. Lectivas"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(Fd,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Hrs"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:ks.length,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[i.jsx(am,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Cursos"}),i.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(y2,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"HA/HB"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsx("div",{className:"flex items-center justify-center gap-1.5",children:i.jsx("span",{children:"Acciones"})})})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:B.map((H,F)=>{const D=O[H.docenteId],q=Y(H.docenteId),J=F===0||B[F-1].docenteId!==H.docenteId,te=F===B.length-1||B[F+1].docenteId!==H.docenteId,ne=B.filter(de=>de.docenteId===H.docenteId),ie=ne.length>1;let oe="hover:bg-gray-50 dark:hover:bg-gray-750 ";return ie&&(J?oe+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":oe+="bg-blue-50 dark:bg-blue-900/10 ",te&&(oe+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),i.jsxs("tr",{className:oe,children:[i.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${q==="green"?"bg-green-500":q==="yellow"?"bg-yellow-500":q==="red"?"bg-red-500":"bg-gray-500"}`}),ie&&J&&i.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:ne.length})]})}),i.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!ie||J?i.jsxs("div",{children:[i.jsx("select",{value:H.docenteId,onChange:de=>Q(H.id,"docenteId",de.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${ie?"font-medium":""}`,children:(j.length>0?j:e).map(de=>i.jsx("option",{value:de.id,children:de.nombre},de.id))}),ie&&i.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[ne.length," asig."]})]}):i.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:"↳ Mismo"})}),i.jsxs("td",{className:"px-1 py-2",children:[i.jsxs("select",{value:H.asignaturaOModulo||"",onChange:de=>Q(H.id,"asignaturaOModulo",de.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${ie?"border-blue-300 dark:border-blue-700":""}`,children:[i.jsx("option",{value:"",children:"Seleccionar..."}),Ua.map(de=>i.jsx("option",{value:de,children:de},de))]}),ie&&!J&&i.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),i.jsx("td",{className:"px-1 py-2",children:i.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(H.funcionesLectivas||[]).map(de=>i.jsxs("div",{className:"flex gap-1 items-center",children:[i.jsx("input",{type:"text",value:de.nombre,onChange:ke=>S(H.id,de.id,"nombre",ke.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),i.jsx("input",{type:"number",value:de.horas,onChange:ke=>S(H.id,de.id,"horas",parseInt(ke.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),i.jsx("button",{onClick:()=>U(H.id,de.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar función",children:i.jsx(Va,{className:"w-3 h-3"})})]},de.id)),!H.funcionesLectivas&&i.jsx("div",{className:"flex gap-1 items-center",children:i.jsx("input",{type:"text",value:H.otraFuncion||"",onChange:de=>Q(H.id,"otraFuncion",de.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),i.jsxs("button",{onClick:()=>R(H.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[i.jsx(So,{className:"w-3 h-3"})," ",i.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),i.jsx("td",{className:"px-1 py-2 text-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:H.horasXAsig||0})}),i.jsx("td",{className:"px-1 py-2",children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:ks.map(de=>i.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:de}),i.jsx("input",{type:"number",min:0,value:H.horasPorCurso[de]||"",onChange:ke=>X(H.id,de,parseInt(ke.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},de))})}),i.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:D&&i.jsxs("div",{className:"space-y-0",children:[i.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",D.HA," (",D.restantesHA>=0?"+":"",D.restantesHA,")"]}),i.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",D.HB," (",D.restantesHB>=0?"+":"",D.restantesHB,")"]})]})}),i.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("button",{onClick:()=>T(H.docenteId,H.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:i.jsx(So,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>L(H.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignación",children:i.jsx(Va,{className:"w-3.5 h-3.5"})})]})})]},H.id)})})]})})]}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),i.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(uA,{})})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex -mb-px px-6",children:[i.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),i.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),i.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Función"}),i.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),i.jsx("div",{className:"grid gap-4",children:e.map(H=>{const F=O[H.id],D=r.filter(q=>q.docenteId===H.id);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:H.nombre}),i.jsx("div",{className:`w-3 h-3 rounded-full ${Y(H.id)==="green"?"bg-green-500":Y(H.id)==="yellow"?"bg-yellow-500":Y(H.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),F&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[H.horasContrato,"h"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),i.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[F.sumCursos,"/",F.HA]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),i.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[F.sumFunciones,"/",F.HB]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),i.jsx("span",{className:"ml-1 font-medium",children:D.length})]})]}),D.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:D.map(q=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:q.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[q.horasXAsig||0,"h"]})]},q.id))})]}),i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribución por curso:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ks.filter(q=>D.some(J=>J.horasPorCurso[q])).map(q=>{const J=D.reduce((te,ne)=>te+(ne.horasPorCurso[q]||0),0);return i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:q}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[J,"h"]})]},q)})})]})]}),D.some(q=>(q.funcionesLectivas||[]).length>0)&&i.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:D.flatMap(q=>(q.funcionesLectivas||[]).map(J=>({id:`${q.id}_${J.id}`,nombre:J.nombre,horas:J.horas}))).map(q=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:q.nombre||"Sin nombre"}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[q.horas,"h"]})]},q.id))})]})]})]},H.id)})})]}),c==="cursos"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),i.jsx("div",{className:"grid gap-4",children:ks.filter(H=>r.some(F=>F.horasPorCurso[H])).map(H=>{const F=r.filter(J=>J.horasPorCurso[H]),D=[];F.forEach(J=>{const te=D.findIndex(ne=>ne.id===J.docenteId);te===-1?D.push({id:J.docenteId,nombre:J.docenteNombre,asignaciones:[J]}):D[te].asignaciones.push(J)});const q=F.reduce((J,te)=>J+(te.horasPorCurso[H]||0),0);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:H}),i.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",q,"h"]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("div",{className:"grid gap-2",children:D.map(J=>i.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:J.nombre}),i.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[J.asignaciones.reduce((te,ne)=>te+(ne.horasPorCurso[H]||0),0),"h"]})]}),i.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:J.asignaciones.filter(te=>te.horasPorCurso[H]).map(te=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:te.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{children:[te.horasPorCurso[H],"h"]})]},te.id))})]},J.id))})]})]},H)})})]}),c==="funciones"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const H=[];return r.forEach(F=>{(F.funcionesLectivas||[]).forEach(D=>{if(!D.nombre)return;const q=H.find(J=>J.nombre===D.nombre);if(!q)H.push({nombre:D.nombre,docentes:[{id:F.docenteId,nombre:F.docenteNombre,horas:D.horas}],totalHoras:D.horas});else{const J=q.docentes.find(te=>te.id===F.docenteId);J?J.horas+=D.horas:q.docentes.push({id:F.docenteId,nombre:F.docenteNombre,horas:D.horas}),q.totalHoras+=D.horas}})}),H.sort((F,D)=>D.totalHoras-F.totalHoras),H.length===0?i.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):i.jsx("div",{className:"grid gap-4",children:H.map((F,D)=>i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:F.nombre}),i.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",F.totalHoras,"h"]})]}),i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:F.docentes.sort((q,J)=>J.horas-q.horas).map(q=>i.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("span",{children:q.nombre}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[q.horas,"h"]})]},q.id))})]},D))})})()]}),c==="totales"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let H=0;return r.forEach(F=>{F.horasPorCurso&&Object.values(F.horasPorCurso).forEach(D=>typeof D=="number"&&(H+=D)),(F.funcionesLectivas||[]).forEach(D=>typeof D.horas=="number"&&(H+=D.horas))}),H})()}),i.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let H=0;return e.forEach(F=>{const D=typeof F.horasContrato=="number"?F.horasContrato:0;H+=Zy(D)}),H})()}),i.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((F,D)=>{const q=typeof D.horasContrato=="number"?D.horasContrato:0;return F+q},0)}),i.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribución de Horas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribución Porcentual"}),(()=>{let H=0,F=0;r.forEach(te=>{te.horasPorCurso&&Object.values(te.horasPorCurso).forEach(ne=>typeof ne=="number"&&(H+=ne)),(te.funcionesLectivas||[]).forEach(ne=>typeof ne.horas=="number"&&(H+=ne.horas))}),e.forEach(te=>{const ne=typeof te.horasContrato=="number"?te.horasContrato:0;F+=Zy(ne)});const D=H+F,q=D>0?Math.round(H/D*100):0,J=D>0?Math.round(F/D*100):0;return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),i.jsxs("span",{className:"font-bold",children:[q,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${q}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),i.jsxs("span",{className:"font-bold",children:[J,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${J}%`}})})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[i.jsx("p",{children:i.jsx("strong",{children:"Distribución Objetivo:"})}),i.jsx("p",{children:"• Horas Lectivas (HA): 65% del contrato"}),i.jsx("p",{children:"• Horas No Lectivas (HB): 35% del contrato"}),i.jsx("p",{children:"• Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),i.jsx("div",{className:"mt-2",children:Math.abs(q-65)<=5?i.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"✓ La distribución está dentro de los parámetros recomendados"}):i.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"⚠️ La distribución difiere de los parámetros recomendados"})})]})]})})()]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadísticas Generales"}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),i.jsx("span",{className:"font-semibold",children:e.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),i.jsx("span",{className:"font-semibold",children:r.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),i.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((H,F)=>H+(typeof F.horasContrato=="number"?F.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),i.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((H,F)=>i.jsxs("li",{className:"flex items-center gap-1",children:[H.tipo==="error"?"❌":"⚠️",i.jsx("span",{children:H.mensaje})]},F)),d.length>5&&i.jsxs("li",{className:"italic",children:["Y ",d.length-5," más..."]})]})})]})]})]})]})]})]})]})}),i.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[i.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(y2,{className:"w-5 h-5"}),i.jsx("h4",{className:"font-medium",children:"Información sobre Distribución de Horas"})]})}),i.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:i.jsx(am,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Según tabla oficial (ej: 44h → ",q_(44),"h, 30h → ",q_(30),"h)"]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:i.jsx(tw,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:i.jsx(TH,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h → ",Zy(44),"h, 30h → ",Zy(30),"h)"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Fórmulas de cálculo"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Guía de semáforos"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede límites"})]})]})]})]})]})]}),i.jsx(K,{}),h&&i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),i.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),i.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},o4="acciones_pedagogicas",J6e=(e,t)=>{var a,s,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function Z6e(){const e=[];try{const t=Lt(mt(st,o4),Jt("creadoTs","desc"));(await Mr(t)).docs.forEach(n=>e.push(J6e(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function eFe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:nr.now()};await on(mt(st,o4),t)}async function tFe(e,t){const r=Yt(mt(st,o4),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await dl(r,n)}async function rFe(e){const t=Yt(mt(st,o4),e);await wa(t)}function Une(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Une(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function fn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Une(e))&&(n&&(n+=" "),n+=t);return n}var TB={},IB={},GV;function nFe(){return GV||(GV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(IB)),IB}var FB={},qV;function Qne(){return qV||(qV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(FB)),FB}var OB={},KV;function Hne(){return KV||(KV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(OB)),OB}var DB={},WV;function a8(){return WV||(WV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];l?u==="\\"&&s+1<a?(s++,o+=r[s]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,s++}return o&&n.push(o),n}e.toPath=t}(DB)),DB}var XV;function s8(){return XV||(XV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nFe(),r=Qne(),n=Hne(),a=a8();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(TB)),TB}var PB,YV;function aFe(){return YV||(YV=1,PB=s8().get),PB}var sFe=aFe();const Lm=Tl(sFe);var RB={exports:{}},ta={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JV;function iFe(){if(JV)return ta;JV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(j){if(typeof j=="object"&&j!==null){var B=j.$$typeof;switch(B){case t:switch(j=j.type,j){case c:case u:case n:case s:case a:case f:return j;default:switch(j=j&&j.$$typeof,j){case l:case d:case g:case m:case o:return j;default:return B}}case r:return B}}}function O(j){return _(j)===u}return ta.AsyncMode=c,ta.ConcurrentMode=u,ta.ContextConsumer=l,ta.ContextProvider=o,ta.Element=t,ta.ForwardRef=d,ta.Fragment=n,ta.Lazy=g,ta.Memo=m,ta.Portal=r,ta.Profiler=s,ta.StrictMode=a,ta.Suspense=f,ta.isAsyncMode=function(j){return O(j)||_(j)===c},ta.isConcurrentMode=O,ta.isContextConsumer=function(j){return _(j)===l},ta.isContextProvider=function(j){return _(j)===o},ta.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},ta.isForwardRef=function(j){return _(j)===d},ta.isFragment=function(j){return _(j)===n},ta.isLazy=function(j){return _(j)===g},ta.isMemo=function(j){return _(j)===m},ta.isPortal=function(j){return _(j)===r},ta.isProfiler=function(j){return _(j)===s},ta.isStrictMode=function(j){return _(j)===a},ta.isSuspense=function(j){return _(j)===f},ta.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===u||j===s||j===a||j===f||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===m||j.$$typeof===o||j.$$typeof===l||j.$$typeof===d||j.$$typeof===v||j.$$typeof===y||j.$$typeof===w||j.$$typeof===x)},ta.typeOf=_,ta}var ZV;function oFe(){return ZV||(ZV=1,RB.exports=iFe()),RB.exports}var lFe=oFe(),to=e=>e===0?0:e>0?1:-1,Zc=e=>typeof e=="number"&&e!=+e,qp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ir=e=>(typeof e=="number"||e instanceof Number)&&!Zc(e),dA=e=>ir(e)||typeof e=="string",cFe=0,bw=e=>{var t=++cFe;return"".concat(e||"").concat(t)},Bl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ir(t)&&typeof t!="string")return n;var s;if(qp(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Zc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Vne=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},bv=(e,t)=>ir(e)&&ir(t)?r=>e+r*(t-e):()=>t;function Mx(e,t,r){return ir(e)&&ir(t)?e+r*(t-e):t}function uFe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Lm(n,t))===r)}var Os=e=>e===null||typeof e>"u",hN=e=>Os(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),dFe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function i8(e){if(typeof e!="string")return!1;var t=dFe;return t.includes(e)}var fFe=["viewBox","children"],ez=["points","pathLength"],LB={svg:fFe,polygon:ez,polyline:ez},o8=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{i8(a)&&(n[a]=s=>r[a](r,s))}),n},AFe=(e,t,r)=>n=>(e(t,r,n),null),Zg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];i8(a)&&typeof s=="function"&&(n||(n={}),n[a]=AFe(s,t,r))}),n},hFe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function zne(e){if(typeof e!="string")return!1;var t=hFe;return t.includes(e)}function Al(e){var t=Object.entries(e).filter(r=>{var[n]=r;return zne(n)});return Object.fromEntries(t)}var tz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",rz=null,MB=null,$ne=e=>{if(e===rz&&Array.isArray(MB))return MB;var t=[];return N.Children.forEach(e,r=>{Os(r)||(lFe.isFragment(r)?t=t.concat($ne(r.props.children)):t.push(r))}),MB=t,rz=e,t};function mN(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>tz(a)):n=[tz(t)],$ne(e).forEach(a=>{var s=Lm(a,"type.displayName")||Lm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var mFe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(LB==null?void 0:LB[n]))!==null&&a!==void 0?a:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||zne(t)),c=!!r&&i8(t);return o||l||c},$n=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(N.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var o;mFe((o=n)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=n[s])}),a},pFe=["children","width","height","viewBox","className","style","title","desc"];function PF(){return PF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PF.apply(null,arguments)}function gFe(e,t){if(e==null)return{};var r,n,a=xFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var l8=N.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=gFe(e,pFe),f=s||{width:n,height:a,x:0,y:0},h=fn("recharts-surface",o);return N.createElement("svg",PF({},$n(d,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),N.createElement("title",null,c),N.createElement("desc",null,u),r)}),vFe=["children","className"];function RF(){return RF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RF.apply(null,arguments)}function bFe(e,t){if(e==null)return{};var r,n,a=yFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ds=N.forwardRef((e,t)=>{var{children:r,className:n}=e,a=bFe(e,vFe),s=fn("recharts-layer",n);return N.createElement("g",RF({className:s},$n(a,!0),{ref:t}),r)}),c8=vJ(),Gne=N.createContext(null),wFe=()=>N.useContext(Gne);function Oa(e){return function(){return e}}const qne=Math.cos,K_=Math.sin,Zd=Math.sqrt,W_=Math.PI,l4=2*W_,LF=Math.PI,MF=2*LF,Op=1e-6,NFe=MF-Op;function Kne(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function EFe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Kne;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class CFe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Kne:EFe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Op)if(!(Math.abs(f*c-u*d)>Op)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((LF-Math.acos((x+h-v)/(2*y*w)))/2),O=_/w,j=_/y;Math.abs(O-1)>Op&&this._append`L${t+O*d},${r+O*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Op||Math.abs(this._y1-d)>Op)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%MF+MF),h>NFe?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Op&&this._append`A${n},${n},0,${+(h>=LF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function u8(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new CFe(t)}function d8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wne(e){this._context=e}Wne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function c4(e){return new Wne(e)}function Xne(e){return e[0]}function Yne(e){return e[1]}function Jne(e,t){var r=Oa(!0),n=null,a=c4,s=null,o=u8(l);e=typeof e=="function"?e:e===void 0?Xne:Oa(e),t=typeof t=="function"?t:t===void 0?Yne:Oa(t);function l(c){var u,d=(c=d8(c)).length,f,h=!1,m;for(n==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function fC(e,t,r){var n=null,a=Oa(!0),s=null,o=c4,l=null,c=u8(u);e=typeof e=="function"?e:e===void 0?Xne:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Yne:Oa(+r);function u(f){var h,m,g,x=(f=d8(f)).length,v,y=!1,w,_=new Array(x),O=new Array(x);for(s==null&&(l=o(w=c())),h=0;h<=x;++h){if(!(h<x&&a(v=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(_[g],O[g]);l.lineEnd(),l.areaEnd()}y&&(_[h]=+e(v,h,f),O[h]=+t(v,h,f),l.point(n?+n(v,h,f):_[h],r?+r(v,h,f):O[h]))}if(w)return l=null,w+""||null}function d(){return Jne().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Oa(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class Zne{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function _Fe(e){return new Zne(e,!0)}function SFe(e){return new Zne(e,!1)}const f8={draw(e,t){const r=Zd(t/W_);e.moveTo(r,0),e.arc(0,0,r,0,l4)}},kFe={draw(e,t){const r=Zd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},eae=Zd(1/3),jFe=eae*2,BFe={draw(e,t){const r=Zd(t/jFe),n=r*eae;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},TFe={draw(e,t){const r=Zd(t),n=-r/2;e.rect(n,n,r,r)}},IFe=.8908130915292852,tae=K_(W_/10)/K_(7*W_/10),FFe=K_(l4/10)*tae,OFe=-qne(l4/10)*tae,DFe={draw(e,t){const r=Zd(t*IFe),n=FFe*r,a=OFe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=l4*s/5,l=qne(o),c=K_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},UB=Zd(3),PFe={draw(e,t){const r=-Zd(t/(UB*3));e.moveTo(0,r*2),e.lineTo(-UB*r,-r),e.lineTo(UB*r,-r),e.closePath()}},ju=-.5,Bu=Zd(3)/2,UF=1/Zd(12),RFe=(UF/2+1)*3,LFe={draw(e,t){const r=Zd(t/RFe),n=r/2,a=r*UF,s=n,o=r*UF+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(ju*n-Bu*a,Bu*n+ju*a),e.lineTo(ju*s-Bu*o,Bu*s+ju*o),e.lineTo(ju*l-Bu*c,Bu*l+ju*c),e.lineTo(ju*n+Bu*a,ju*a-Bu*n),e.lineTo(ju*s+Bu*o,ju*o-Bu*s),e.lineTo(ju*l+Bu*c,ju*c-Bu*l),e.closePath()}};function MFe(e,t){let r=null,n=u8(a);e=typeof e=="function"?e:Oa(e||f8),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function X_(){}function Y_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function rae(e){this._context=e}rae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Y_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Y_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function UFe(e){return new rae(e)}function nae(e){this._context=e}nae.prototype={areaStart:X_,areaEnd:X_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Y_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function QFe(e){return new nae(e)}function aae(e){this._context=e}aae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Y_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HFe(e){return new aae(e)}function sae(e){this._context=e}sae.prototype={areaStart:X_,areaEnd:X_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function VFe(e){return new sae(e)}function nz(e){return e<0?-1:1}function az(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(nz(s)+nz(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function sz(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function QB(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function J_(e){this._context=e}J_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:QB(this,this._t0,sz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,QB(this,sz(this,r=az(this,e,t)),r);break;default:QB(this,this._t0,r=az(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function iae(e){this._context=new oae(e)}(iae.prototype=Object.create(J_.prototype)).point=function(e,t){J_.prototype.point.call(this,t,e)};function oae(e){this._context=e}oae.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function zFe(e){return new J_(e)}function $Fe(e){return new iae(e)}function lae(e){this._context=e}lae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=iz(e),a=iz(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function iz(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function GFe(e){return new lae(e)}function u4(e,t){this._context=e,this._t=t}u4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function qFe(e){return new u4(e,.5)}function KFe(e){return new u4(e,0)}function WFe(e){return new u4(e,1)}function gb(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function QF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function XFe(e,t){return e[t]}function YFe(e){const t=[];return t.key=e,t}function JFe(){var e=Oa([]),t=QF,r=gb,n=XFe;function a(s){var o=Array.from(e.apply(this,arguments),YFe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=d8(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?QF:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??gb,a):r},a}function ZFe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}gb(e,t)}}function eOe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}gb(e,t)}}function tOe(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,gb(e,t)}}var rOe=["type","size","sizeType"];function HF(){return HF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HF.apply(null,arguments)}function oz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(r),!0).forEach(function(n){nOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nOe(e,t,r){return(t=aOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aOe(e){var t=sOe(e,"string");return typeof t=="symbol"?t:t+""}function sOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iOe(e,t){if(e==null)return{};var r,n,a=oOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cae={symbolCircle:f8,symbolCross:kFe,symbolDiamond:BFe,symbolSquare:TFe,symbolStar:DFe,symbolTriangle:PFe,symbolWye:LFe},lOe=Math.PI/180,cOe=e=>{var t="symbol".concat(hN(e));return cae[t]||f8},uOe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*lOe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},dOe=(e,t)=>{cae["symbol".concat(hN(e))]=t},A8=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=iOe(e,rOe),s=lz(lz({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=cOe(t),h=MFe().type(f).size(uOe(r,n,t));return h()},{className:l,cx:c,cy:u}=s,d=$n(s,!0);return c===+c&&u===+u&&r===+r?N.createElement("path",HF({},d,{className:fn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};A8.registerSymbol=dOe;function VF(){return VF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VF.apply(null,arguments)}function cz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cz(Object(r),!0).forEach(function(n){h8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h8(e,t,r){return(t=AOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AOe(e){var t=hOe(e,"string");return typeof t=="symbol"?t:t+""}function hOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tu=32;class m8 extends N.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Tu/2,s=Tu/6,o=Tu/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return N.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Tu,y2:a,className:"recharts-legend-icon"});if(c==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Tu,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return N.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Tu/8,"h").concat(Tu,"v").concat(Tu*3/4,"h").concat(-Tu,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var u=fOe({},t);return delete u.legendIcon,N.cloneElement(t.legendIcon,u)}return N.createElement(A8,{fill:l,cx:a,cy:a,size:Tu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:Tu,height:Tu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,m=fn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return N.createElement("li",VF({className:m,style:c,key:"legend-item-".concat(f)},Zg(this.props,d,f)),N.createElement(l8,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),N.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}h8(m8,"displayName","Legend");h8(m8,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var HB={},VB={},uz;function mOe(){return uz||(uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t}(VB)),VB}var zB={},dz;function d4(){return dz||(dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(zB)),zB}var $B={},GB={},qB={},fz;function pOe(){return fz||(fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(qB)),qB}var Az;function p8(){return Az||(Az=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pOe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(GB)),GB}var KB={},hz;function gOe(){return hz||(hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(KB)),KB}var mz;function xOe(){return mz||(mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p8(),r=gOe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}($B)),$B}var WB={},XB={},pz;function vOe(){return pz||(pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s8();function r(n){return function(a){return t.get(a,n)}}e.property=r}(XB)),XB}var YB={},JB={},ZB={},eT={},gz;function uae(){return gz||(gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(eT)),eT}var tT={},xz;function dae(){return xz||(xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(tT)),tT}var rT={},vz;function g8(){return vz||(vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(rT)),rT}var bz;function bOe(){return bz||(bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x8(),r=uae(),n=dae(),a=g8();function s(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function g(x,v,y,w,_,O){const j=m(x,v,y,w,_,O);return j!==void 0?!!j:o(x,v,g,O)},new Map)}function o(f,h,m,g){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,g);case"function":return Object.keys(h).length>0?o(f,{...h},m,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,g);if(h instanceof Map)return c(f,h,m,g);if(h instanceof Set)return d(f,h,m,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,m,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of h.entries()){const y=f.get(x);if(m(y,v,x,f,h,g)===!1)return!1}return!0}function u(f,h,m,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let _=0;_<f.length;_++){if(x.has(_))continue;const O=f[_];let j=!1;if(m(O,y,v,f,h,g)&&(j=!0),j){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,m,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(ZB)),ZB}var yz;function x8(){return yz||(yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bOe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(JB)),JB}var nT={},aT={},sT={},wz;function fae(){return wz||(wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(sT)),sT}var iT={},Nz;function v8(){return Nz||(Nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(iT)),iT}var oT={},Ez;function b8(){return Ez||(Ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",O="[object BigUint64Array]",j="[object Int8Array]",B="[object Int16Array]",C="[object Int32Array]",k="[object BigInt64Array]",T="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=O,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=T,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=B,e.int32ArrayTag=C,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(oT)),oT}var lT={},Cz;function yOe(){return Cz||(Cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(lT)),lT}var _z;function Aae(){return _z||(_z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fae(),r=v8(),n=b8(),a=dae(),s=yOe();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,w]of d)v.set(y,l(w,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=l(f[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(aT)),aT}var Sz;function wOe(){return Sz||(Sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Aae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(nT)),nT}var kz;function NOe(){return kz||(kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x8(),r=wOe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(YB)),YB}var cT={},uT={},dT={},jz;function EOe(){return jz||(jz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Aae(),r=b8();function n(a,s){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(dT)),dT}var Bz;function COe(){return Bz||(Bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EOe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(uT)),uT}var fT={},AT={},Tz;function hae(){return Tz||(Tz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(AT)),AT}var hT={},Iz;function _Oe(){return Iz||(Iz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v8();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(hT)),hT}var Fz;function SOe(){return Fz||(Fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qne(),r=hae(),n=_Oe(),a=a8();function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(fT)),fT}var Oz;function kOe(){return Oz||(Oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x8(),r=Hne(),n=COe(),a=s8(),s=SOe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o}(cT)),cT}var Dz;function y8(){return Dz||(Dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d4(),r=vOe(),n=NOe(),a=kOe();function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s}(WB)),WB}var Pz;function jOe(){return Pz||(Pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mOe(),r=d4(),n=xOe(),a=y8();function s(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=s}(HB)),HB}var mT,Rz;function BOe(){return Rz||(Rz=1,mT=jOe().uniqBy),mT}var TOe=BOe();const Lz=Tl(TOe);function mae(e,t,r){return t===!0?Lz(e,r):typeof t=="function"?Lz(e,t):e}var pT={exports:{}},gT={},xT={exports:{}},vT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mz;function IOe(){if(Mz)return vT;Mz=1;var e=Qb();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(f,h){var m=h(),g=n({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[f,m,h]),a(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return vT.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,vT}var Uz;function FOe(){return Uz||(Uz=1,xT.exports=IOe()),xT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qz;function OOe(){if(Qz)return gT;Qz=1;var e=Qb(),t=FOe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return gT.useSyncExternalStoreWithSelector=function(u,d,f,h,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(B){if(!w){if(w=!0,_=B,B=h(B),m!==void 0&&x.hasValue){var C=x.value;if(m(C,B))return O=C}return O=B}if(C=O,n(_,B))return C;var k=h(B);return m!==void 0&&m(C,k)?(_=B,C):(_=B,O=k)}var w=!1,_,O,j=f===void 0?null:f;return[function(){return y(d())},j===null?void 0:function(){return y(j())}]},[d,f,h,m]);var v=a(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},gT}var Hz;function DOe(){return Hz||(Hz=1,pT.exports=OOe()),pT.exports}var pae=DOe();const POe=Tl(pae);var w8=N.createContext(null),ROe=e=>e,qa=()=>{var e=N.useContext(w8);return e?e.store.dispatch:ROe},k5=()=>{},LOe=()=>k5,MOe=(e,t)=>e===t;function tr(e){var t=N.useContext(w8);return pae.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:LOe,t?t.store.getState:k5,t?t.store.getState:k5,t?e:k5,MOe)}function UOe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function QOe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function HOe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Vz=e=>Array.isArray(e)?e:[e];function VOe(e){const t=Array.isArray(e[0])?e[0]:e;return HOe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function zOe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var $Oe=class{constructor(e){this.value=e}deref(){return this.value}},GOe=typeof WeakRef<"u"?WeakRef:$Oe,qOe=0,zz=1;function AC(){return{s:qOe,v:void 0,o:null,p:null}}function gae(e,t={}){let r=AC();const{resultEqualityCheck:n}=t;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=AC(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=AC(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===zz)d=l.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new GOe(d):d}return u.s=zz,u.v=d,d}return o.clearCache=()=>{r=AC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function KOe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),UOe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=gae,argsMemoizeOptions:g=[]}=d,x=Vz(h),v=Vz(g),y=VOe(a),w=f(function(){return s++,u.apply(null,arguments)},...x),_=m(function(){o++;const j=zOe(y,arguments);return l=w.apply(null,j),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var At=KOe(gae),WOe=Object.assign((e,t=At)=>{QOe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>WOe}),bT={},yT={},wT={},$z;function XOe(){return $z||($z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r}(wT)),wT}var NT={},ET={},Gz;function xae(){return Gz||(Gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(ET)),ET}var qz;function YOe(){return qz||(qz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xae(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=a}(NT)),NT}var Kz;function JOe(){return Kz||(Kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XOe(),r=YOe(),n=a8();function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(yT)),yT}var CT={},Wz;function ZOe(){return Wz||(Wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t}(CT)),CT}var _T={},Xz;function vae(){return Xz||(Xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hae(),r=p8(),n=uae(),a=g8();function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=s}(_T)),_T}var Yz;function eDe(){return Yz||(Yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JOe(),r=ZOe(),n=vae();function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=a}(bT)),bT}var ST,Jz;function tDe(){return Jz||(Jz=1,ST=eDe().sortBy),ST}var rDe=tDe();const f4=Tl(rDe);var bae=e=>e.legend.settings,nDe=e=>e.legend.size,aDe=e=>e.legend.payload,sDe=At([aDe,bae],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?f4(n,r):n});function iDe(){return tr(sDe)}var hC=1;function yae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),n=N.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>hC||Math.abs(o.left-t.left)>hC||Math.abs(o.top-t.top)>hC||Math.abs(o.width-t.width)>hC)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function xo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oDe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Zz=oDe,kT=()=>Math.random().toString(36).substring(7).split("").join("."),lDe={INIT:`@@redux/INIT${kT()}`,REPLACE:`@@redux/REPLACE${kT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${kT()}`},Z_=lDe;function N8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wae(e,t,r){if(typeof e!="function")throw new Error(xo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(xo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(xo(1));return r(wae)(e,t)}let n=e,a=t,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((v,y)=>{o.set(y,v)}))}function d(){if(c)throw new Error(xo(3));return a}function f(v){if(typeof v!="function")throw new Error(xo(4));if(c)throw new Error(xo(5));let y=!0;u();const w=l++;return o.set(w,v),function(){if(y){if(c)throw new Error(xo(6));y=!1,u(),o.delete(w),s=null}}}function h(v){if(!N8(v))throw new Error(xo(7));if(typeof v.type>"u")throw new Error(xo(8));if(typeof v.type!="string")throw new Error(xo(17));if(c)throw new Error(xo(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=o).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(xo(10));n=v,h({type:Z_.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(xo(11));function w(){const O=y;O.next&&O.next(d())}return w(),{unsubscribe:v(w)}},[Zz](){return this}}}return h({type:Z_.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[Zz]:g}}function cDe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Z_.INIT})>"u")throw new Error(xo(12));if(typeof r(void 0,{type:Z_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xo(13))})}function Nae(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{cDe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=o[f],g=h(m,l);if(typeof g>"u")throw l&&l.type,new Error(xo(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function eS(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function uDe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(xo(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(o));return s=eS(...l)(a.dispatch),{...a,dispatch:s}}}function Eae(e){return N8(e)&&"type"in e&&typeof e.type=="string"}var Cae=Symbol.for("immer-nothing"),e$=Symbol.for("immer-draftable"),eu=Symbol.for("immer-state");function Od(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xb=Object.getPrototypeOf;function Tg(e){return!!e&&!!e[eu]}function Th(e){var t;return e?_ae(e)||Array.isArray(e)||!!e[e$]||!!((t=e.constructor)!=null&&t[e$])||h4(e)||m4(e):!1}var dDe=Object.prototype.constructor.toString();function _ae(e){if(!e||typeof e!="object")return!1;const t=xb(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===dDe}function tS(e,t){A4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function A4(e){const t=e[eu];return t?t.type_:Array.isArray(e)?1:h4(e)?2:m4(e)?3:0}function zF(e,t){return A4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Sae(e,t,r){const n=A4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function fDe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function h4(e){return e instanceof Map}function m4(e){return e instanceof Set}function Dp(e){return e.copy_||e.base_}function $F(e,t){if(h4(e))return new Map(e);if(m4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=_ae(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[eu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(xb(e),n)}else{const n=xb(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function E8(e,t=!1){return p4(e)||Tg(e)||!Th(e)||(A4(e)>1&&(e.set=e.add=e.clear=e.delete=ADe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>E8(n,!0))),e}function ADe(){Od(2)}function p4(e){return Object.isFrozen(e)}var hDe={};function Ig(e){const t=hDe[e];return t||Od(0,e),t}var yw;function kae(){return yw}function mDe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function t$(e,t){t&&(Ig("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function GF(e){qF(e),e.drafts_.forEach(pDe),e.drafts_=null}function qF(e){e===yw&&(yw=e.parent_)}function r$(e){return yw=mDe(yw,e)}function pDe(e){const t=e[eu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function n$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[eu].modified_&&(GF(t),Od(4)),Th(e)&&(e=rS(t,e),t.parent_||nS(t,e)),t.patches_&&Ig("Patches").generateReplacementPatches_(r[eu].base_,e,t.patches_,t.inversePatches_)):e=rS(t,r,[]),GF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Cae?e:void 0}function rS(e,t,r){if(p4(t))return t;const n=t[eu];if(!n)return tS(t,(a,s)=>a$(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return nS(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),tS(s,(l,c)=>a$(e,n,a,l,c,r,o)),nS(e,a,!1),r&&e.patches_&&Ig("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function a$(e,t,r,n,a,s,o){if(Tg(a)){const l=s&&t&&t.type_!==3&&!zF(t.assigned_,n)?s.concat(n):void 0,c=rS(e,a,l);if(Sae(r,n,c),Tg(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Th(a)&&!p4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;rS(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&nS(e,a)}}function nS(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&E8(t,r)}function gDe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:kae(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=C8;r&&(a=[n],s=ww);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var C8={get(e,t){if(t===eu)return e;const r=Dp(e);if(!zF(r,t))return xDe(e,r,t);const n=r[t];return e.finalized_||!Th(n)?n:n===jT(e.base_,t)?(BT(e),e.copy_[t]=WF(n,e)):n},has(e,t){return t in Dp(e)},ownKeys(e){return Reflect.ownKeys(Dp(e))},set(e,t,r){const n=jae(Dp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=jT(Dp(e),t),s=a==null?void 0:a[eu];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(fDe(r,a)&&(r!==void 0||zF(e.base_,t)))return!0;BT(e),KF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return jT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,BT(e),KF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Dp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Od(11)},getPrototypeOf(e){return xb(e.base_)},setPrototypeOf(){Od(12)}},ww={};tS(C8,(e,t)=>{ww[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ww.deleteProperty=function(e,t){return ww.set.call(this,e,t,void 0)};ww.set=function(e,t,r){return C8.set.call(this,e[0],t,r,e[0])};function jT(e,t){const r=e[eu];return(r?Dp(r):e)[t]}function xDe(e,t,r){var a;const n=jae(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function jae(e,t){if(!(t in e))return;let r=xb(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=xb(r)}}function KF(e){e.modified_||(e.modified_=!0,e.parent_&&KF(e.parent_))}function BT(e){e.copy_||(e.copy_=$F(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vDe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Od(6),n!==void 0&&typeof n!="function"&&Od(7);let a;if(Th(t)){const s=r$(this),o=WF(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?GF(s):qF(s)}return t$(s,n),n$(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Cae&&(a=void 0),this.autoFreeze_&&E8(a,!0),n){const s=[],o=[];Ig("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else Od(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Th(e)||Od(8),Tg(e)&&(e=vh(e));const t=r$(this),r=WF(e,void 0);return r[eu].isManual_=!0,qF(t),r}finishDraft(e,t){const r=e&&e[eu];(!r||!r.isManual_)&&Od(9);const{scope_:n}=r;return t$(n,t),n$(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Ig("Patches").applyPatches_;return Tg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function WF(e,t){const r=h4(e)?Ig("MapSet").proxyMap_(e,t):m4(e)?Ig("MapSet").proxySet_(e,t):gDe(e,t);return(t?t.scope_:kae()).drafts_.push(r),r}function vh(e){return Tg(e)||Od(10,e),Bae(e)}function Bae(e){if(!Th(e)||p4(e))return e;const t=e[eu];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=$F(e,t.scope_.immer_.useStrictShallowCopy_)}else r=$F(e,!0);return tS(r,(n,a)=>{Sae(r,n,Bae(a))}),t&&(t.finalized_=!1),r}var tu=new vDe,Tae=tu.produce;tu.produceWithPatches.bind(tu);tu.setAutoFreeze.bind(tu);tu.setUseStrictShallowCopy.bind(tu);tu.applyPatches.bind(tu);tu.createDraft.bind(tu);tu.finishDraft.bind(tu);function Iae(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var bDe=Iae(),yDe=Iae,wDe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?eS:eS.apply(null,arguments)};function Ju(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Wc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Eae(n)&&n.type===e,r}var Fae=class e2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e2.prototype)}static get[Symbol.species](){return e2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new e2(...t[0].concat(this)):new e2(...t.concat(this))}};function s$(e){return Th(e)?Tae(e,()=>{}):e}function mC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function NDe(e){return typeof e=="boolean"}var EDe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new Fae;return r&&(NDe(r)?o.push(bDe):o.push(yDe(r.extraArgument))),o},CDe="RTK_autoBatch",i$=e=>t=>{setTimeout(t,e)},_De=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i$(10):e.type==="callback"?e.queueNotification:i$(e.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[CDe]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},SDe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Fae(e);return n&&a.push(_De(typeof n=="object"?n:void 0)),a};function kDe(e){const t=EDe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(N8(r))l=Nae(r);else throw new Error(Wc(1));let c;typeof n=="function"?c=n(t):c=t();let u=eS;a&&(u=wDe({trace:!1,...typeof a=="object"&&a}));const d=uDe(...c),f=SDe(d);let h=typeof o=="function"?o(f):f();const m=u(...h);return wae(l,s,m)}function Oae(e){const t={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Wc(28));if(l in t)throw new Error(Wc(29));return t[l]=o,a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function jDe(e){return typeof e=="function"}function BDe(e,t){let[r,n,a]=Oae(t),s;if(jDe(e))s=()=>s$(e());else{const l=s$(e);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Tg(d)){const m=f(d,c);return m===void 0?d:m}else{if(Th(d))return Tae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=s,o}var TDe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",IDe=(e=21)=>{let t="",r=e;for(;r--;)t+=TDe[Math.random()*64|0];return t},FDe=Symbol.for("rtk-slice-createasyncthunk");function ODe(e,t){return`${e}/${t}`}function DDe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[FDe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(Wc(11));const l=(typeof a.reducers=="function"?a.reducers(RDe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(O,j){const B=typeof O=="string"?O:O.type;if(!B)throw new Error(Wc(12));if(B in u.sliceCaseReducersByType)throw new Error(Wc(13));return u.sliceCaseReducersByType[B]=j,d},addMatcher(O,j){return u.sliceMatchers.push({matcher:O,reducer:j}),d},exposeAction(O,j){return u.actionCreators[O]=j,d},exposeCaseReducer(O,j){return u.sliceCaseReducersByName[O]=j,d}};c.forEach(O=>{const j=l[O],B={reducerName:O,type:ODe(s,O),createNotation:typeof a.reducers=="function"};MDe(j)?QDe(B,j,d,t):LDe(B,j,d)});function f(){const[O={},j=[],B=void 0]=typeof a.extraReducers=="function"?Oae(a.extraReducers):[a.extraReducers],C={...O,...u.sliceCaseReducersByType};return BDe(a.initialState,k=>{for(let T in C)k.addCase(T,C[T]);for(let T of u.sliceMatchers)k.addMatcher(T.matcher,T.reducer);for(let T of j)k.addMatcher(T.matcher,T.reducer);B&&k.addDefaultCase(B)})}const h=O=>O,m=new Map,g=new WeakMap;let x;function v(O,j){return x||(x=f()),x(O,j)}function y(){return x||(x=f()),x.getInitialState()}function w(O,j=!1){function B(k){let T=k[O];return typeof T>"u"&&j&&(T=mC(g,B,y)),T}function C(k=h){const T=mC(m,j,()=>new WeakMap);return mC(T,k,()=>{const L={};for(const[R,S]of Object.entries(a.selectors??{}))L[R]=PDe(S,k,()=>mC(g,k,y),j);return L})}return{reducerPath:O,getSelectors:C,get selectors(){return C(B)},selectSlice:B}}const _={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(o),injectInto(O,{reducerPath:j,...B}={}){const C=j??o;return O.inject({reducerPath:C,reducer:v},B),{..._,...w(C,!0)}}};return _}}function PDe(e,t,r,n){function a(s,...o){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var au=DDe();function RDe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function LDe({type:e,reducerName:t,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!UDe(n))throw new Error(Wc(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Ju(e,o):Ju(e))}function MDe(e){return e._reducerDefinitionType==="asyncThunk"}function UDe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function QDe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Wc(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||pC,pending:l||pC,rejected:c||pC,settled:u||pC})}function pC(){}var HDe="task",Dae="listener",Pae="completed",_8="cancelled",VDe=`task-${_8}`,zDe=`task-${Pae}`,XF=`${Dae}-${_8}`,$De=`${Dae}-${Pae}`,g4=class{constructor(e){M3(this,"name","TaskAbortError");M3(this,"message");this.code=e,this.message=`${HDe} ${_8} (reason: ${e})`}},S8=(e,t)=>{if(typeof e!="function")throw new TypeError(Wc(32))},aS=()=>{},Rae=(e,t=aS)=>(e.catch(t),e),Lae=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),lg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},cg=e=>{if(e.aborted){const{reason:t}=e;throw new g4(t)}};function Mae(e,t){let r=aS;return new Promise((n,a)=>{const s=()=>a(new g4(e.reason));if(e.aborted){s();return}r=Lae(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=aS})}var GDe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof g4?"cancelled":"rejected",error:r}}finally{t==null||t()}},sS=e=>t=>Rae(Mae(e,t).then(r=>(cg(e),r))),Uae=e=>{const t=sS(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Hv}=Object,o$={},x4="listenerMiddleware",qDe=(e,t)=>{const r=n=>Lae(e,()=>lg(n,e.reason));return(n,a)=>{S8(n);const s=new AbortController;r(s);const o=GDe(async()=>{cg(e),cg(s.signal);const l=await n({pause:sS(s.signal),delay:Uae(s.signal),signal:s.signal});return cg(s.signal),l},()=>lg(s,zDe));return a!=null&&a.autoJoin&&t.push(o.catch(aS)),{result:sS(e)(o),cancel(){lg(s,VDe)}}}},KDe=(e,t)=>{const r=async(n,a)=>{cg(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Mae(t,Promise.race(l));return cg(t),c}finally{s()}};return(n,a)=>Rae(r(n,a))},Qae=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Ju(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Wc(21));return S8(s),{predicate:a,type:t,effect:s}},Hae=Hv(e=>{const{type:t,predicate:r,effect:n}=Qae(e);return{id:IDe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Wc(22))}}},{withTypes:()=>Hae}),l$=(e,t)=>{const{type:r,effect:n,predicate:a}=Qae(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},YF=e=>{e.pending.forEach(t=>{lg(t,XF)})},WDe=e=>()=>{e.forEach(YF),e.clear()},c$=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Vae=Hv(Ju(`${x4}/add`),{withTypes:()=>Vae}),XDe=Ju(`${x4}/removeAll`),zae=Hv(Ju(`${x4}/remove`),{withTypes:()=>zae}),YDe=(...e)=>{console.error(`${x4}/error`,...e)},pN=(e={})=>{const t=new Map,{extra:r,onError:n=YDe}=e;S8(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&YF(d)}),s=d=>{const f=l$(t,d)??Hae(d);return a(f)};Hv(s,{withTypes:()=>s});const o=d=>{const f=l$(t,d);return f&&(f.unsubscribe(),d.cancelActive&&YF(f)),!!f};Hv(o,{withTypes:()=>o});const l=async(d,f,h,m)=>{const g=new AbortController,x=KDe(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Hv({},h,{getOriginalState:m,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Uae(g.signal),pause:sS(g.signal),extra:r,signal:g.signal,fork:qDe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(lg(y,XF),_.delete(y))})},cancel:()=>{lg(g,XF),d.pending.delete(g)},throwIfCancelled:()=>{cg(g.signal)}})))}catch(y){y instanceof g4||c$(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),lg(g,$De),d.pending.delete(g)}},c=WDe(t);return{middleware:d=>f=>h=>{if(!Eae(h))return f(h);if(Vae.match(h))return s(h.payload);if(XDe.match(h)){c();return}if(zae.match(h))return o(h.payload);let m=d.getState();const g=()=>{if(m===o$)throw new Error(Wc(23));return m};let x;try{if(x=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,v,m)}catch(O){_=!1,c$(n,O,{raisedBy:"predicate"})}_&&l(w,h,d,g)}}}finally{m=o$}return x},startListening:s,stopListening:o,clearListeners:c}};function Wc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var JDe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},$ae=au({name:"chartLayout",initialState:JDe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:ZDe,setLayout:ePe,setChartSize:tPe,setScale:rPe}=$ae.actions,nPe=$ae.reducer;function u$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(r),!0).forEach(function(n){aPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aPe(e,t,r){return(t=sPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sPe(e){var t=iPe(e,"string");return typeof t=="symbol"?t:t+""}function iPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iS=Math.PI/180,oPe=e=>e*180/Math.PI,Xn=(e,t,r,n)=>({x:e+Math.cos(-iS*n)*r,y:t+Math.sin(-iS*n)*r}),Gae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},lPe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},cPe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,o=lPe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:oPe(c),angleInRadian:c}},uPe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},dPe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return e+o*360},fPe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=cPe({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=uPe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?d$(d$({},t),{},{radius:a,angle:dPe(d,t)}):null},qae=e=>!N.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Kae(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function f$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f$(Object(r),!0).forEach(function(n){APe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function APe(e,t,r){return(t=hPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hPe(e){var t=mPe(e,"string");return typeof t=="symbol"?t:t+""}function mPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(e,t,r){return Os(e)||Os(t)?r:dA(t)?Lm(e,t,r):typeof t=="function"?t(e):r}var pPe=(e,t,r,n,a)=>{var s,o=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(to(d-u)!==to(f-d)){var m=[];if(to(f-d)===to(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:o}=r[c]);break}}}else if(t){for(var _=0;_<l;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:o}=t[_]);break}}return o},gPe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&ir(e[s]))return Uu(Uu({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&ir(e[o]))return Uu(Uu({},e),{},{[o]:e[o]+(a||0)})}return e},Zm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Wae=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(t),s||o.push(r),o},Xae=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=a==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?to(s[0]-s[1])*2*x:x,f||h){var v=(f||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:o(_)+x,value:y,offset:x,index:w}});return v.filter(y=>!Zc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:o(y)+x,value:y,index:w,offset:x})):o.ticks&&d!=null?o.ticks(d).map((y,w)=>({coordinate:o(y)+x,value:y,offset:x,index:w})):o.domain().map((y,w)=>({coordinate:o(y)+x,value:n?n[y]:y,index:w,offset:x}))},A$=1e-4,xPe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-A$,s=Math.max(n[0],n[1])+A$,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},vPe=(e,t)=>{if(!t||t.length!==2||!ir(t[0])||!ir(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ir(e[0])||e[0]<r)&&(a[0]=r),(!ir(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},bPe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,o=0;o<t;++o){var l=Zc(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},yPe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var o=Zc(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},wPe={sign:bPe,expand:ZFe,none:gb,silhouette:eOe,wiggle:tOe,positive:yPe},NPe=(e,t,r)=>{var n=wPe[r],a=JFe().keys(t).value((s,o)=>+Pa(s,o,0)).order(QF).offset(n);return a(e)};function EPe(e){return e==null?void 0:String(e)}var h$=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Pa(s,t.dataKey,t.scale.domain()[o]);return Os(l)?null:t.scale(l)-a/2+n},CPe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},_Pe=e=>{var t=e.flat(2).filter(ir);return[Math.min(...t),Math.max(...t)]},SPe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],kPe=(e,t,r)=>{if(e!=null)return SPe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Kae(u,t,r),f=_Pe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},m$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Nw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=f4(t,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function g$(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Uu(Uu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function l1(e,t){if(e)return String(e);if(typeof t=="string")return t}function jPe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?fPe({x:e,y:t},n):null}var BPe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:o}=n;return Uu(Uu(Uu({},n),Xn(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return Uu(Uu(Uu({},n),Xn(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},TPe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,qh=e=>e.layout.width,Kh=e=>e.layout.height,IPe=e=>e.layout.scale,Yae=e=>e.layout.margin,k8=At(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),j8=At(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Jae="data-recharts-item-index",Zae="data-recharts-item-data-key",v4=60;function x$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x$(Object(r),!0).forEach(function(n){FPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FPe(e,t,r){return(t=OPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OPe(e){var t=DPe(e,"string");return typeof t=="symbol"?t:t+""}function DPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PPe=e=>e.brush.height,Oi=At([qh,Kh,Yae,PPe,k8,j8,bae,nDe],(e,t,r,n,a,s,o,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:v4;return D0(D0({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?D0(D0({},g),{},{[v]:Lm(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=D0(D0({},u),c),f=d.bottom;d.bottom+=n,d=gPe(d,o,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return D0(D0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),RPe=At(Oi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ese=At(qh,Kh,(e,t)=>({x:0,y:0,width:e,height:t})),LPe=N.createContext(null),fc=()=>N.useContext(LPe)!=null,b4=e=>e.brush,y4=At([b4,Oi,Yae],(e,t,r)=>({height:e.height,x:ir(e.x)?e.x:t.left,y:ir(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ir(e.width)?e.width:t.width})),B8=()=>{var e,t=fc(),r=tr(RPe),n=tr(y4),a=(e=tr(b4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},MPe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},tse=()=>{var e;return(e=tr(Oi))!==null&&e!==void 0?e:MPe},T8=()=>tr(qh),I8=()=>tr(Kh),UPe={top:0,right:0,bottom:0,left:0},QPe=()=>{var e;return(e=tr(t=>t.layout.margin))!==null&&e!==void 0?e:UPe},Cn=e=>e.layout.layoutType,F8=()=>tr(Cn),HPe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},rse=au({name:"legend",initialState:HPe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=vh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:v$,setLegendSettings:VPe,addLegendPayload:nse,removeLegendPayload:ase}=rse.actions,zPe=rse.reducer,$Pe=["contextPayload"];function JF(){return JF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JF.apply(null,arguments)}function b$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b$(Object(r),!0).forEach(function(n){O8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O8(e,t,r){return(t=GPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GPe(e){var t=qPe(e,"string");return typeof t=="symbol"?t:t+""}function qPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KPe(e,t){if(e==null)return{};var r,n,a=WPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XPe(e){return e.value}function YPe(e){var{contextPayload:t}=e,r=KPe(e,$Pe),n=mae(t,e.payloadUniqBy,XPe),a=vb(vb({},r),{},{payload:n});return N.isValidElement(e.content)?N.cloneElement(e.content,a):typeof e.content=="function"?N.createElement(e.content,a):N.createElement(m8,a)}function JPe(e,t,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),vb(vb({},u),d)}function ZPe(e){var t=qa();return N.useEffect(()=>{t(VPe(e))},[t,e]),null}function eRe(e){var t=qa();return N.useEffect(()=>(t(v$(e)),()=>{t(v$({width:0,height:0}))}),[t,e]),null}function tRe(e){var t=iDe(),r=wFe(),n=QPe(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,u]=yae([t]),d=T8(),f=I8(),h=d-(n.left||0)-(n.right||0),m=c1.getWidthOrHeight(e.layout,s,a,h),g=l?o:vb(vb({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},JPe(o,e,n,d,f,c)),o),x=l??r;if(x==null)return null;var v=N.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},N.createElement(ZPe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),N.createElement(eRe,{width:c.width,height:c.height}),N.createElement(YPe,JF({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return c8.createPortal(v,x)}class c1 extends N.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&ir(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return N.createElement(tRe,this.props)}}O8(c1,"displayName","Legend");O8(c1,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZF.apply(null,arguments)}function y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y$(Object(r),!0).forEach(function(n){rRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rRe(e,t,r){return(t=nRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nRe(e){var t=aRe(e,"string");return typeof t=="symbol"?t:t+""}function aRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sRe(e){return Array.isArray(e)&&dA(e[0])&&dA(e[1])?e.join(" ~ "):e}var iRe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var j={padding:0,margin:0},B=(l?f4(s,l):s).map((C,k)=>{if(C.type==="none")return null;var T=C.formatter||o||sRe,{value:L,name:R}=C,S=L,U=R;if(T){var Q=T(L,R,C,k,s);if(Array.isArray(Q))[S,U]=Q;else if(Q!=null)S=Q;else return null}var X=TT({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:X},dA(U)?N.createElement("span",{className:"recharts-tooltip-item-name"},U):null,dA(U)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},S),N.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:j},B)}return null},g=TT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=TT({margin:0},a),v=!Os(d),y=v?d:"",w=fn("recharts-default-tooltip",c),_=fn("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var O=h?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",ZF({className:w,style:g},O),N.createElement("p",{className:_,style:x},N.isValidElement(y)?y:"".concat(y)),m())},my="recharts-tooltip-wrapper",oRe={visibility:"hidden"};function lRe(e){var{coordinate:t,translateX:r,translateY:n}=e;return fn(my,{["".concat(my,"-right")]:ir(r)&&t&&ir(t.x)&&r>=t.x,["".concat(my,"-left")]:ir(r)&&t&&ir(t.x)&&r<t.x,["".concat(my,"-bottom")]:ir(n)&&t&&ir(t.y)&&n>=t.y,["".concat(my,"-top")]:ir(n)&&t&&ir(t.y)&&n<t.y})}function w$(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&ir(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var h=c[n];if(h==null)return 0;if(o[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,v=h+u;return x>v?Math.max(d,h):Math.max(f,h)}function cRe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function uRe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=w$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=w$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=cRe({translateX:d,translateY:f,useTranslate3d:l})):u=oRe,{cssProperties:u,cssClasses:lRe({translateX:d,translateY:f,coordinate:r})}}function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){eO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eO(e,t,r){return(t=dRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dRe(e){var t=fRe(e,"string");return typeof t=="symbol"?t:t+""}function fRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ARe extends N.PureComponent{constructor(){super(...arguments),eO(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),eO(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=uRe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),O=y?{}:gC(gC({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=gC(gC({},O),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:v},s)}}var hRe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ex={isSsr:hRe()},sse=()=>tr(e=>e.rootProps.accessibilityLayer);function ru(e){return Number.isFinite(e)}function bb(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tO.apply(null,arguments)}function E$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E$(Object(r),!0).forEach(function(n){mRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mRe(e,t,r){return(t=pRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pRe(e){var t=gRe(e,"string");return typeof t=="symbol"?t:t+""}function gRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _$={curveBasisClosed:QFe,curveBasisOpen:HFe,curveBasis:UFe,curveBumpX:_Fe,curveBumpY:SFe,curveLinearClosed:VFe,curveLinear:c4,curveMonotoneX:zFe,curveMonotoneY:$Fe,curveNatural:GFe,curveStep:qFe,curveStepAfter:WFe,curveStepBefore:KFe},xC=e=>ru(e.x)&&ru(e.y),py=e=>e.x,gy=e=>e.y,xRe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(hN(e));return(r==="curveMonotone"||r==="curveBump")&&t?_$["".concat(r).concat(t==="vertical"?"Y":"X")]:_$[r]||c4},vRe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,o=xRe(t,a),l=s?r.filter(xC):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>xC(f)):n,d=l.map((f,h)=>C$(C$({},f),{},{base:u[h]}));return a==="vertical"?c=fC().y(gy).x1(py).x0(f=>f.base.x):c=fC().x(py).y1(gy).y0(f=>f.base.y),c.defined(xC).curve(o),c(d)}return a==="vertical"&&ir(n)?c=fC().y(gy).x1(py).x0(n):ir(n)?c=fC().x(py).y1(gy).y0(n):c=Jne().x(py).y(gy),c.defined(xC).curve(o),c(l)},ise=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?vRe(e):n;return N.createElement("path",tO({},Al(e),o8(e),{className:fn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},bRe=["x","y","top","left","width","height","className"];function rO(){return rO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rO.apply(null,arguments)}function S$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S$(Object(r),!0).forEach(function(n){wRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wRe(e,t,r){return(t=NRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NRe(e){var t=ERe(e,"string");return typeof t=="symbol"?t:t+""}function ERe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CRe(e,t){if(e==null)return{};var r,n,a=_Re(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _Re(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SRe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),kRe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=CRe(e,bRe),u=yRe({x:t,y:r,top:n,left:a,width:s,height:o},c);return!ir(t)||!ir(r)||!ir(s)||!ir(o)||!ir(n)||!ir(a)?null:N.createElement("path",rO({},$n(u,!0),{className:fn("recharts-cross",l),d:SRe(t,r,s,o,n,a)}))};function jRe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function k$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k$(Object(r),!0).forEach(function(n){TRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TRe(e,t,r){return(t=IRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IRe(e){var t=FRe(e,"string");return typeof t=="symbol"?t:t+""}function FRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function td(e,t){var r=BRe({},e),n=t,a=Object.keys(t),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}var IT={},FT={},OT={},j$;function ORe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(OT)),OT}var B$;function DRe(){return B$||(B$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ORe(),r=fae(),n=v8(),a=b8(),s=g8();function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,g,x){const v=x(u,d,f,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!l(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const O=y[_],j=w.findIndex(B=>l(O,B,void 0,u,d,f,h));if(j===-1)return!1;w.splice(j,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let O=0;O<w.length;O++){const j=w[O],B=u[j];if(!Object.hasOwn(d,j))return!1;const C=d[j];if(!l(B,C,j,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o}(FT)),FT}var DT={},T$;function PRe(){return T$||(T$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(DT)),DT}var I$;function RRe(){return I$||(I$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DRe(),r=PRe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(IT)),IT}var PT,F$;function LRe(){return F$||(F$=1,PT=RRe().isEqual),PT}var MRe=LRe();const URe=Tl(MRe);var oS=1e-4,ose=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],lse=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),O$=(e,t)=>r=>{var n=ose(e,t);return lse(n,r)},QRe=(e,t)=>r=>{var n=ose(e,t),a=[...n.map((s,o)=>s*o).slice(1),0];return lse(a,r)},D$=function(){for(var t,r,n,a,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,n,r,a]=o);var u=O$(t,r),d=O$(n,a),f=QRe(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var w=u(v)-x,_=f(v);if(Math.abs(w-x)<oS||_<oS)return d(v);v=h(v-w/_)}return d(v)};return m.isStepper=!1,m},HRe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+o;return Math.abs(h-l)<oS&&Math.abs(f)<oS?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},cse=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return D$(e);case"spring":return HRe();default:if(e.split("(")[0]==="cubic-bezier")return D$(e)}return typeof e=="function"?e:null};function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){VRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VRe(e,t,r){return(t=zRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zRe(e){var t=$Re(e,"string");return typeof t=="symbol"?t:t+""}function $Re(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GRe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),qRe=(e,t,r)=>e.map(n=>"".concat(GRe(n)," ").concat(t,"ms ").concat(r)).join(","),KRe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ew=(e,t)=>Object.keys(t).reduce((r,n)=>R$(R$({},r),{},{[n]:e(n,t[n])}),{});function L$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(r),!0).forEach(function(n){WRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WRe(e,t,r){return(t=XRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XRe(e){var t=YRe(e,"string");return typeof t=="symbol"?t:t+""}function YRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lS=(e,t,r)=>e+(t-e)*r,nO=e=>{var{from:t,to:r}=e;return t!==r},use=(e,t,r)=>{var n=Ew((a,s)=>{if(nO(s)){var[o,l]=e(s.from,s.to,s.velocity);return wo(wo({},s),{},{from:o,velocity:l})}return s},t);return r<1?Ew((a,s)=>nO(s)?wo(wo({},s),{},{velocity:lS(s.velocity,n[a].velocity,r),from:lS(s.from,n[a].from,r)}):s,t):use(e,n,r-1)};function JRe(e,t,r,n,a,s){var o,l=n.reduce((h,m)=>wo(wo({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Ew((h,m)=>m.from,l),u=()=>!Object.values(l).filter(nO).length,d=null,f=h=>{o||(o=h);var m=h-o,g=m/r.dt;l=use(r,l,g),a(wo(wo(wo({},e),t),c())),o=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function ZRe(e,t,r,n,a,s,o){var l=null,c=a.reduce((f,h)=>wo(wo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=Ew((x,v)=>lS(...v,r(h)),c);if(s(wo(wo(wo({},e),t),m)),h<1)l=o.setTimeout(d);else{var g=Ew((x,v)=>lS(...v,r(1)),c);s(wo(wo(wo({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{l()})}const dse=(e,t,r,n,a,s)=>{var o=KRe(e,t);return r.isStepper===!0?JRe(e,t,r,o,a,s):ZRe(e,t,r,n,o,a,s)};function e8e(e){var t,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class t8e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function r8e(){return e8e(new t8e)}var n8e=N.createContext(r8e);function fse(e,t){var r=N.useContext(n8e);return N.useMemo(()=>t??r(e),[e,t,r])}var a8e=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aO.apply(null,arguments)}function s8e(e,t){if(e==null)return{};var r,n,a=i8e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function i8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){Kp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kp(e,t,r){return(t=o8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o8e(e){var t=l8e(e,"string");return typeof t=="symbol"?t:t+""}function l8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class D8 extends N.PureComponent{constructor(t,r){super(t,r),Kp(this,"mounted",!1),Kp(this,"manager",void 0),Kp(this,"stopJSAnimation",null),Kp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(URe(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?l:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(P0(P0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=dse(r,n,cse(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=qRe(Object.keys(d),n,o);this.manager.start([l,r,P0(P0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=s8e(t,a8e),v=N.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||a<=0)return r;var w=_=>{var{style:O={},className:j}=_.props,B=N.cloneElement(_,P0(P0({},x),{},{style:P0(P0({},O),y),className:j}));return B};return v===1?w(N.Children.only(r)):N.createElement("div",null,N.Children.map(r,_=>w(_)))}}Kp(D8,"displayName","Animate");Kp(D8,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function cS(e){var t,r=fse((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return N.createElement(D8,aO({},e,{animationManager:r}))}function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uS.apply(null,arguments)}var U$=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},c8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ase=e=>{var t=td(e,c8e),r=N.useRef(null),[n,a]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=fn("recharts-rectangle",d);return x?N.createElement(cS,{canBegin:n>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:_,x:O,y:j}=y;return N.createElement(cS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:f},N.createElement("path",uS({},$n(t,!0),{className:v,d:U$(O,j,w,_,u),ref:r})))}):N.createElement("path",uS({},$n(t,!0),{className:v,d:U$(s,o,l,c,u)}))};function hse(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,o=Xn(t,r,n,a),l=Xn(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function sO(){return sO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sO.apply(null,arguments)}var u8e=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},vC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/iS,f=c?a:a+s*d,h=Xn(t,r,u,f),m=Xn(t,r,n,f),g=c?a-s*d:a,x=Xn(t,r,u*Math.cos(d*iS),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},mse=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=e,l=u8e(s,o),c=s+l,u=Xn(t,r,a,s),d=Xn(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Xn(t,r,n,s),m=Xn(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},d8e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=to(u-c),{circleTangency:f,lineTangency:h,theta:m}=vC({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=vC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):mse({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:O,theta:j}=vC({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:B,lineTangency:C,theta:k}=vC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),T=l?Math.abs(c-u):Math.abs(c-u)-j-k;if(T<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},f8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},pse=e=>{var t=td(e,f8e),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=fn("recharts-sector",f),m=s-a,g=Bl(o,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=d8e({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=mse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),N.createElement("path",sO({},$n(t,!0),{className:h,d:x}))};function A8e(e,t,r){var n,a,s,o;if(e==="horizontal")n=t.x,s=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Xn(l,c,u,f),m=Xn(l,c,d,f);n=h.x,a=h.y,s=m.x,o=m.y}else return hse(t);return[{x:n,y:a},{x:s,y:o}]}var RT={},LT={},MT={},Q$;function h8e(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xae();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(MT)),MT}var H$;function m8e(){return H$||(H$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h8e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(LT)),LT}var V$;function p8e(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vae(),r=m8e();function n(a,s,o){o&&typeof o!="number"&&t.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n}(RT)),RT}var UT,z$;function g8e(){return z$||(z$=1,UT=p8e().range),UT}var x8e=g8e();const gse=Tl(x8e);function xm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function v8e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function P8(e){let t,r,n;e.length!==2?(t=xm,r=(l,c)=>xm(e(l),c),n=(l,c)=>e(l)-c):(t=e===xm||e===v8e?e:b8e,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function b8e(){return 0}function xse(e){return e===null?NaN:+e}function*y8e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const w8e=P8(xm),gN=w8e.right;P8(xse).center;class $$ extends Map{constructor(t,r=C8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(G$(this,t))}has(t){return super.has(G$(this,t))}set(t,r){return super.set(N8e(this,t),r)}delete(t){return super.delete(E8e(this,t))}}function G$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function N8e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function E8e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function C8e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _8e(e=xm){if(e===xm)return vse;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function vse(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const S8e=Math.sqrt(50),k8e=Math.sqrt(10),j8e=Math.sqrt(2);function dS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=S8e?10:s>=k8e?5:s>=j8e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?dS(e,t,r*2):[l,c,u]}function iO(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?dS(t,e,r):dS(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function oO(e,t,r){return t=+t,e=+e,r=+r,dS(e,t,r)[2]}function lO(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?oO(t,e,r):oO(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function q$(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function K$(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function bse(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?vse:_8e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));bse(e,t,m,g,a)}const s=e[t];let o=r,l=n;for(xy(e,r,t),a(e[n],s)>0&&xy(e,r,n);o<l;){for(xy(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?xy(e,r,l):(++l,xy(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function xy(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function B8e(e,t,r){if(e=Float64Array.from(y8e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return K$(e);if(t>=1)return q$(e);var n,a=(n-1)*t,s=Math.floor(a),o=q$(bse(e,s).subarray(0,s+1)),l=K$(e.subarray(s+1));return o+(l-o)*(a-s)}}function T8e(e,t,r=xse){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function I8e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function rd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cO=Symbol("implicit");function w4(){var e=new $$,t=[],r=[],n=cO;function a(s){let o=e.get(s);if(o===void 0){if(n!==cO)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new $$;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return w4(t,r).unknown(n)},rd.apply(a,arguments),a}function R8(){var e=w4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=I8e(h).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return R8(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},rd.apply(f(),arguments)}function yse(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yse(t())},e}function F8e(){return yse(R8.apply(null,arguments).paddingInner(1))}function L8(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function wse(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function xN(){}var Cw=.7,fS=1/Cw,Vv="\\s*([+-]?\\d+)\\s*",_w="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",iA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O8e=/^#([0-9a-f]{3,8})$/,D8e=new RegExp(`^rgb\\(${Vv},${Vv},${Vv}\\)$`),P8e=new RegExp(`^rgb\\(${iA},${iA},${iA}\\)$`),R8e=new RegExp(`^rgba\\(${Vv},${Vv},${Vv},${_w}\\)$`),L8e=new RegExp(`^rgba\\(${iA},${iA},${iA},${_w}\\)$`),M8e=new RegExp(`^hsl\\(${_w},${iA},${iA}\\)$`),U8e=new RegExp(`^hsla\\(${_w},${iA},${iA},${_w}\\)$`),W$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};L8(xN,Fg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:X$,formatHex:X$,formatHex8:Q8e,formatHsl:H8e,formatRgb:Y$,toString:Y$});function X$(){return this.rgb().formatHex()}function Q8e(){return this.rgb().formatHex8()}function H8e(){return Nse(this).formatHsl()}function Y$(){return this.rgb().formatRgb()}function Fg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=O8e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?J$(t):r===3?new sc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?bC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?bC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=D8e.exec(e))?new sc(t[1],t[2],t[3],1):(t=P8e.exec(e))?new sc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=R8e.exec(e))?bC(t[1],t[2],t[3],t[4]):(t=L8e.exec(e))?bC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=M8e.exec(e))?tG(t[1],t[2]/100,t[3]/100,1):(t=U8e.exec(e))?tG(t[1],t[2]/100,t[3]/100,t[4]):W$.hasOwnProperty(e)?J$(W$[e]):e==="transparent"?new sc(NaN,NaN,NaN,0):null}function J$(e){return new sc(e>>16&255,e>>8&255,e&255,1)}function bC(e,t,r,n){return n<=0&&(e=t=r=NaN),new sc(e,t,r,n)}function V8e(e){return e instanceof xN||(e=Fg(e)),e?(e=e.rgb(),new sc(e.r,e.g,e.b,e.opacity)):new sc}function uO(e,t,r,n){return arguments.length===1?V8e(e):new sc(e,t,r,n??1)}function sc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}L8(sc,uO,wse(xN,{brighter(e){return e=e==null?fS:Math.pow(fS,e),new sc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cw:Math.pow(Cw,e),new sc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sc(ug(this.r),ug(this.g),ug(this.b),AS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Z$,formatHex:Z$,formatHex8:z8e,formatRgb:eG,toString:eG}));function Z$(){return`#${Wp(this.r)}${Wp(this.g)}${Wp(this.b)}`}function z8e(){return`#${Wp(this.r)}${Wp(this.g)}${Wp(this.b)}${Wp((isNaN(this.opacity)?1:this.opacity)*255)}`}function eG(){const e=AS(this.opacity);return`${e===1?"rgb(":"rgba("}${ug(this.r)}, ${ug(this.g)}, ${ug(this.b)}${e===1?")":`, ${e})`}`}function AS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ug(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wp(e){return e=ug(e),(e<16?"0":"")+e.toString(16)}function tG(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Dd(e,t,r,n)}function Nse(e){if(e instanceof Dd)return new Dd(e.h,e.s,e.l,e.opacity);if(e instanceof xN||(e=Fg(e)),!e)return new Dd;if(e instanceof Dd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Dd(o,l,c,e.opacity)}function $8e(e,t,r,n){return arguments.length===1?Nse(e):new Dd(e,t,r,n??1)}function Dd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}L8(Dd,$8e,wse(xN,{brighter(e){return e=e==null?fS:Math.pow(fS,e),new Dd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cw:Math.pow(Cw,e),new Dd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new sc(QT(e>=240?e-240:e+120,a,n),QT(e,a,n),QT(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Dd(rG(this.h),yC(this.s),yC(this.l),AS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=AS(this.opacity);return`${e===1?"hsl(":"hsla("}${rG(this.h)}, ${yC(this.s)*100}%, ${yC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rG(e){return e=(e||0)%360,e<0?e+360:e}function yC(e){return Math.max(0,Math.min(1,e||0))}function QT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const M8=e=>()=>e;function G8e(e,t){return function(r){return e+r*t}}function q8e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function K8e(e){return(e=+e)==1?Ese:function(t,r){return r-t?q8e(t,r,e):M8(isNaN(t)?r:t)}}function Ese(e,t){var r=t-e;return r?G8e(e,r):M8(isNaN(e)?t:e)}const hS=function e(t){var r=K8e(t);function n(a,s){var o=r((a=uO(a)).r,(s=uO(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Ese(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function W8e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function X8e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Y8e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=u1(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function J8e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Id(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Z8e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=u1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var dO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HT=new RegExp(dO.source,"g");function eLe(e){return function(){return e}}function tLe(e){return function(t){return e(t)+""}}function Cse(e,t){var r=dO.lastIndex=HT.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=dO.exec(e))&&(a=HT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Id(n,a)})),r=HT.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?tLe(c[0].x):eLe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function u1(e,t){var r=typeof t,n;return t==null||r==="boolean"?M8(t):(r==="number"?Id:r==="string"?(n=Fg(t))?(t=n,hS):Cse:t instanceof Fg?hS:t instanceof Date?J8e:X8e(t)?W8e:Array.isArray(t)?Y8e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Z8e:Id)(e,t)}function U8(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var nG=180/Math.PI,fO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _se(e,t,r,n,a,s){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,c/=l),e*n<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*nG,skewX:Math.atan(c)*nG,scaleX:o,scaleY:l}}var wC;function rLe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fO:_se(t.a,t.b,t.c,t.d,t.e,t.f)}function nLe(e){return e==null||(wC||(wC=document.createElementNS("http://www.w3.org/2000/svg","g")),wC.setAttribute("transform",e),!(e=wC.transform.baseVal.consolidate()))?fO:(e=e.matrix,_se(e.a,e.b,e.c,e.d,e.e,e.f))}function Sse(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Id(u,f)},{i:x-2,x:Id(d,h)})}else(f||h)&&m.push("translate("+f+t+h+r)}function o(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:Id(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function l(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:Id(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Id(u,f)},{i:x-2,x:Id(d,h)})}else(f!==1||h!==1)&&m.push(a(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),o(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)f[(v=h[g]).i]=v.x(m);return f.join("")}}}var aLe=Sse(rLe,"px, ","px)","deg)"),sLe=Sse(nLe,", ",")",")"),iLe=1e-12;function aG(e){return((e=Math.exp(e))+1/e)/2}function oLe(e){return((e=Math.exp(e))-1/e)/2}function lLe(e){return((e=Math.exp(2*e))-1)/(e+1)}const cLe=function e(t,r,n){function a(s,o){var l=s[0],c=s[1],u=s[2],d=o[0],f=o[1],h=o[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<iLe)y=Math.log(h/u)/t,v=function(C){return[l+C*m,c+C*g,u*Math.exp(t*C*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),O=(h*h-u*u-n*x)/(2*h*r*w),j=Math.log(Math.sqrt(_*_+1)-_),B=Math.log(Math.sqrt(O*O+1)-O);y=(B-j)/t,v=function(C){var k=C*y,T=aG(j),L=u/(r*w)*(T*lLe(t*k+j)-oLe(j));return[l+L*m,c+L*g,u*T/aG(t*k+j)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return e(o,l,c)},a}(Math.SQRT2,2,4);function uLe(e,t){t===void 0&&(t=e,e=u1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function dLe(e){return function(){return e}}function mS(e){return+e}var sG=[0,1];function _l(e){return e}function AO(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:dLe(isNaN(t)?NaN:.5)}function fLe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function ALe(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=AO(a,n),s=r(o,s)):(n=AO(n,a),s=r(s,o)),function(l){return s(n(l))}}function hLe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=AO(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=gN(e,l,1,n)-1;return s[c](a[c](l))}}function vN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function N4(){var e=sG,t=sG,r=u1,n,a,s,o=_l,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==_l&&(o=fLe(e[0],e[h-1])),l=h>2?hLe:ALe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),Id)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,mS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=U8,d()},f.clamp=function(h){return arguments.length?(o=h?!0:_l,d()):o!==_l},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return n=h,a=m,d()}}function Q8(){return N4()(_l,_l)}function mLe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function yb(e){return e=pS(Math.abs(e)),e?e[1]:NaN}function pLe(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function gLe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var xLe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sw(e){if(!(t=xLe.exec(e)))throw new Error("invalid format: "+e);var t;return new H8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sw.prototype=H8.prototype;function H8(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}H8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vLe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var kse;function bLe(e,t){var r=pS(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(kse=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+pS(e,Math.max(0,t+s-1))[0]}function iG(e,t){var r=pS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const oG={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mLe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iG(e*100,t),r:iG,s:bLe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lG(e){return e}var cG=Array.prototype.map,uG=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function yLe(e){var t=e.grouping===void 0||e.thousands===void 0?lG:pLe(cG.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?lG:gLe(cG.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Sw(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,w=f.comma,_=f.precision,O=f.trim,j=f.type;j==="n"?(w=!0,j="g"):oG[j]||(_===void 0&&(_=12),O=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var B=x==="$"?r:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",C=x==="$"?n:/[%p]/.test(j)?o:"",k=oG[j],T=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(R){var S=B,U=C,Q,X,z;if(j==="c")U=k(R)+U,R="";else{R=+R;var W=R<0||1/R<0;if(R=isNaN(R)?c:k(Math.abs(R),_),O&&(R=vLe(R)),W&&+R==0&&g!=="+"&&(W=!1),S=(W?g==="("?g:l:g==="-"||g==="("?"":g)+S,U=(j==="s"?uG[8+kse/3]:"")+U+(W&&g==="("?")":""),T){for(Q=-1,X=R.length;++Q<X;)if(z=R.charCodeAt(Q),48>z||z>57){U=(z===46?a+R.slice(Q+1):R.slice(Q))+U,R=R.slice(0,Q);break}}}w&&!v&&(R=t(R,1/0));var G=S.length+R.length+U.length,Y=G<y?new Array(y-G+1).join(h):"";switch(w&&v&&(R=t(Y+R,Y.length?y-U.length:1/0),Y=""),m){case"<":R=S+R+U+Y;break;case"=":R=S+Y+R+U;break;case"^":R=Y.slice(0,G=Y.length>>1)+S+R+U+Y.slice(G);break;default:R=Y+S+R+U;break}return s(R)}return L.toString=function(){return f+""},L}function d(f,h){var m=u((f=Sw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(yb(h)/3)))*3,x=Math.pow(10,-g),v=uG[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var NC,V8,jse;wLe({thousands:",",grouping:[3],currency:["$",""]});function wLe(e){return NC=yLe(e),V8=NC.format,jse=NC.formatPrefix,NC}function NLe(e){return Math.max(0,-yb(Math.abs(e)))}function ELe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yb(t)/3)))*3-yb(Math.abs(e)))}function CLe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yb(t)-yb(e))+1}function Bse(e,t,r,n){var a=lO(e,t,r),s;switch(n=Sw(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=ELe(a,o))&&(n.precision=s),jse(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=CLe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=NLe(a))&&(n.precision=s-(n.type==="%")*2);break}}return V8(n)}function ep(e){var t=e.domain;return e.ticks=function(r){var n=t();return iO(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Bse(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=oO(o,l,r),u===c)return n[a]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Tse(){var e=Q8();return e.copy=function(){return vN(e,Tse())},rd.apply(e,arguments),ep(e)}function Ise(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,mS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Ise(e).unknown(t)},e=arguments.length?Array.from(e,mS):[0,1],ep(r)}function Fse(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function dG(e){return Math.log(e)}function fG(e){return Math.exp(e)}function _Le(e){return-Math.log(-e)}function SLe(e){return-Math.exp(-e)}function kLe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function jLe(e){return e===10?kLe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function BLe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function AG(e){return(t,r)=>-e(-t,r)}function z8(e){const t=e(dG,fG),r=t.domain;let n=10,a,s;function o(){return a=BLe(n),s=jLe(n),r()[0]<0?(a=AG(a),s=AG(s),e(_Le,SLe)):e(dG,fG),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,x;const v=l==null?10:+l;let y=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=iO(u,d,v))}else y=iO(h,m,Math.min(m-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Sw(c)).precision==null&&(c.trim=!0),c=V8(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Fse(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function Ose(){const e=z8(N4()).domain([1,10]);return e.copy=()=>vN(e,Ose()).base(e.base()),rd.apply(e,arguments),e}function hG(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function mG(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $8(e){var t=1,r=e(hG(t),mG(t));return r.constant=function(n){return arguments.length?e(hG(t=+n),mG(t)):t},ep(r)}function Dse(){var e=$8(N4());return e.copy=function(){return vN(e,Dse()).constant(e.constant())},rd.apply(e,arguments)}function pG(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function TLe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ILe(e){return e<0?-e*e:e*e}function G8(e){var t=e(_l,_l),r=1;function n(){return r===1?e(_l,_l):r===.5?e(TLe,ILe):e(pG(r),pG(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},ep(t)}function q8(){var e=G8(N4());return e.copy=function(){return vN(e,q8()).exponent(e.exponent())},rd.apply(e,arguments),e}function FLe(){return q8.apply(null,arguments).exponent(.5)}function gG(e){return Math.sign(e)*e*e}function OLe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Pse(){var e=Q8(),t=[0,1],r=!1,n;function a(s){var o=OLe(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(gG(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,mS)).map(gG)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Pse(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},rd.apply(a,arguments),ep(a)}function Rse(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=T8e(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[gN(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(xm),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Rse().domain(e).range(t).unknown(n)},rd.apply(s,arguments)}function Lse(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[gN(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Lse().domain([e,t]).range(a).unknown(s)},rd.apply(ep(o),arguments)}function Mse(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[gN(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Mse().domain(e).range(t).unknown(r)},rd.apply(a,arguments)}const VT=new Date,zT=new Date;function Di(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Di(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(VT.setTime(+s),zT.setTime(+o),e(VT),e(zT),Math.floor(r(VT,zT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const gS=Di(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Di(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):gS);gS.range;const lh=1e3,zu=lh*60,ch=zu*60,Ih=ch*24,K8=Ih*7,xG=Ih*30,$T=Ih*365,Xp=Di(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lh)},(e,t)=>(t-e)/lh,e=>e.getUTCSeconds());Xp.range;const W8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh)},(e,t)=>{e.setTime(+e+t*zu)},(e,t)=>(t-e)/zu,e=>e.getMinutes());W8.range;const X8=Di(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zu)},(e,t)=>(t-e)/zu,e=>e.getUTCMinutes());X8.range;const Y8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh-e.getMinutes()*zu)},(e,t)=>{e.setTime(+e+t*ch)},(e,t)=>(t-e)/ch,e=>e.getHours());Y8.range;const J8=Di(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ch)},(e,t)=>(t-e)/ch,e=>e.getUTCHours());J8.range;const bN=Di(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zu)/Ih,e=>e.getDate()-1);bN.range;const E4=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ih,e=>e.getUTCDate()-1);E4.range;const Use=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ih,e=>Math.floor(e/Ih));Use.range;function tx(e){return Di(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*zu)/K8)}const C4=tx(0),xS=tx(1),DLe=tx(2),PLe=tx(3),wb=tx(4),RLe=tx(5),LLe=tx(6);C4.range;xS.range;DLe.range;PLe.range;wb.range;RLe.range;LLe.range;function rx(e){return Di(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/K8)}const _4=rx(0),vS=rx(1),MLe=rx(2),ULe=rx(3),Nb=rx(4),QLe=rx(5),HLe=rx(6);_4.range;vS.range;MLe.range;ULe.range;Nb.range;QLe.range;HLe.range;const Z8=Di(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Z8.range;const eL=Di(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());eL.range;const Fh=Di(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Fh.range;const Oh=Di(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Oh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Oh.range;function Qse(e,t,r,n,a,s){const o=[[Xp,1,lh],[Xp,5,5*lh],[Xp,15,15*lh],[Xp,30,30*lh],[s,1,zu],[s,5,5*zu],[s,15,15*zu],[s,30,30*zu],[a,1,ch],[a,3,3*ch],[a,6,6*ch],[a,12,12*ch],[n,1,Ih],[n,2,2*Ih],[r,1,K8],[t,1,xG],[t,3,3*xG],[e,1,$T]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=P8(([,,v])=>v).right(o,h);if(m===o.length)return e.every(lO(u/$T,d/$T,f));if(m===0)return gS.every(Math.max(lO(u,d,f),1));const[g,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[VLe,zLe]=Qse(Oh,eL,_4,Use,J8,X8),[$Le,GLe]=Qse(Fh,Z8,C4,bN,Y8,W8);function GT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function qLe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=by(a),d=yy(a),f=by(s),h=yy(s),m=by(o),g=yy(o),x=by(l),v=yy(l),y=by(c),w=yy(c),_={a:W,A:G,b:Y,B:K,c:null,d:EG,e:EG,f:pMe,g:_Me,G:kMe,H:AMe,I:hMe,j:mMe,L:Hse,m:gMe,M:xMe,p:H,q:F,Q:SG,s:kG,S:vMe,u:bMe,U:yMe,V:wMe,w:NMe,W:EMe,x:null,X:null,y:CMe,Y:SMe,Z:jMe,"%":_G},O={a:D,A:q,b:J,B:te,c:null,d:CG,e:CG,f:FMe,g:VMe,G:$Me,H:BMe,I:TMe,j:IMe,L:zse,m:OMe,M:DMe,p:ne,q:ie,Q:SG,s:kG,S:PMe,u:RMe,U:LMe,V:MMe,w:UMe,W:QMe,x:null,X:null,y:HMe,Y:zMe,Z:GMe,"%":_G},j={a:L,A:R,b:S,B:U,c:Q,d:wG,e:wG,f:cMe,g:yG,G:bG,H:NG,I:NG,j:sMe,L:lMe,m:aMe,M:iMe,p:T,q:nMe,Q:dMe,s:fMe,S:oMe,u:JLe,U:ZLe,V:eMe,w:YLe,W:tMe,x:X,X:z,y:yG,Y:bG,Z:rMe,"%":uMe};_.x=B(r,_),_.X=B(n,_),_.c=B(t,_),O.x=B(r,O),O.X=B(n,O),O.c=B(t,O);function B(oe,de){return function(ke){var ae=[],Oe=-1,Te=0,Se=oe.length,fe,ye,Le;for(ke instanceof Date||(ke=new Date(+ke));++Oe<Se;)oe.charCodeAt(Oe)===37&&(ae.push(oe.slice(Te,Oe)),(ye=vG[fe=oe.charAt(++Oe)])!=null?fe=oe.charAt(++Oe):ye=fe==="e"?" ":"0",(Le=de[fe])&&(fe=Le(ke,ye)),ae.push(fe),Te=Oe+1);return ae.push(oe.slice(Te,Oe)),ae.join("")}}function C(oe,de){return function(ke){var ae=vy(1900,void 0,1),Oe=k(ae,oe,ke+="",0),Te,Se;if(Oe!=ke.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(de&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Te=qT(vy(ae.y,0,1)),Se=Te.getUTCDay(),Te=Se>4||Se===0?vS.ceil(Te):vS(Te),Te=E4.offset(Te,(ae.V-1)*7),ae.y=Te.getUTCFullYear(),ae.m=Te.getUTCMonth(),ae.d=Te.getUTCDate()+(ae.w+6)%7):(Te=GT(vy(ae.y,0,1)),Se=Te.getDay(),Te=Se>4||Se===0?xS.ceil(Te):xS(Te),Te=bN.offset(Te,(ae.V-1)*7),ae.y=Te.getFullYear(),ae.m=Te.getMonth(),ae.d=Te.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),Se="Z"in ae?qT(vy(ae.y,0,1)).getUTCDay():GT(vy(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(Se+5)%7:ae.w+ae.U*7-(Se+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,qT(ae)):GT(ae)}}function k(oe,de,ke,ae){for(var Oe=0,Te=de.length,Se=ke.length,fe,ye;Oe<Te;){if(ae>=Se)return-1;if(fe=de.charCodeAt(Oe++),fe===37){if(fe=de.charAt(Oe++),ye=j[fe in vG?de.charAt(Oe++):fe],!ye||(ae=ye(oe,ke,ae))<0)return-1}else if(fe!=ke.charCodeAt(ae++))return-1}return ae}function T(oe,de,ke){var ae=u.exec(de.slice(ke));return ae?(oe.p=d.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function L(oe,de,ke){var ae=m.exec(de.slice(ke));return ae?(oe.w=g.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function R(oe,de,ke){var ae=f.exec(de.slice(ke));return ae?(oe.w=h.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function S(oe,de,ke){var ae=y.exec(de.slice(ke));return ae?(oe.m=w.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function U(oe,de,ke){var ae=x.exec(de.slice(ke));return ae?(oe.m=v.get(ae[0].toLowerCase()),ke+ae[0].length):-1}function Q(oe,de,ke){return k(oe,t,de,ke)}function X(oe,de,ke){return k(oe,r,de,ke)}function z(oe,de,ke){return k(oe,n,de,ke)}function W(oe){return o[oe.getDay()]}function G(oe){return s[oe.getDay()]}function Y(oe){return c[oe.getMonth()]}function K(oe){return l[oe.getMonth()]}function H(oe){return a[+(oe.getHours()>=12)]}function F(oe){return 1+~~(oe.getMonth()/3)}function D(oe){return o[oe.getUTCDay()]}function q(oe){return s[oe.getUTCDay()]}function J(oe){return c[oe.getUTCMonth()]}function te(oe){return l[oe.getUTCMonth()]}function ne(oe){return a[+(oe.getUTCHours()>=12)]}function ie(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var de=B(oe+="",_);return de.toString=function(){return oe},de},parse:function(oe){var de=C(oe+="",!1);return de.toString=function(){return oe},de},utcFormat:function(oe){var de=B(oe+="",O);return de.toString=function(){return oe},de},utcParse:function(oe){var de=C(oe+="",!0);return de.toString=function(){return oe},de}}}var vG={"-":"",_:" ",0:"0"},so=/^\s*\d+/,KLe=/^%/,WLe=/[\\^$*+?|[\]().{}]/g;function qn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function XLe(e){return e.replace(WLe,"\\$&")}function by(e){return new RegExp("^(?:"+e.map(XLe).join("|")+")","i")}function yy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function YLe(e,t,r){var n=so.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function JLe(e,t,r){var n=so.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ZLe(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function eMe(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function tMe(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function bG(e,t,r){var n=so.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function yG(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function rMe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function nMe(e,t,r){var n=so.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function aMe(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function wG(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function sMe(e,t,r){var n=so.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function NG(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function iMe(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function oMe(e,t,r){var n=so.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function lMe(e,t,r){var n=so.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function cMe(e,t,r){var n=so.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function uMe(e,t,r){var n=KLe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function dMe(e,t,r){var n=so.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function fMe(e,t,r){var n=so.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function EG(e,t){return qn(e.getDate(),t,2)}function AMe(e,t){return qn(e.getHours(),t,2)}function hMe(e,t){return qn(e.getHours()%12||12,t,2)}function mMe(e,t){return qn(1+bN.count(Fh(e),e),t,3)}function Hse(e,t){return qn(e.getMilliseconds(),t,3)}function pMe(e,t){return Hse(e,t)+"000"}function gMe(e,t){return qn(e.getMonth()+1,t,2)}function xMe(e,t){return qn(e.getMinutes(),t,2)}function vMe(e,t){return qn(e.getSeconds(),t,2)}function bMe(e){var t=e.getDay();return t===0?7:t}function yMe(e,t){return qn(C4.count(Fh(e)-1,e),t,2)}function Vse(e){var t=e.getDay();return t>=4||t===0?wb(e):wb.ceil(e)}function wMe(e,t){return e=Vse(e),qn(wb.count(Fh(e),e)+(Fh(e).getDay()===4),t,2)}function NMe(e){return e.getDay()}function EMe(e,t){return qn(xS.count(Fh(e)-1,e),t,2)}function CMe(e,t){return qn(e.getFullYear()%100,t,2)}function _Me(e,t){return e=Vse(e),qn(e.getFullYear()%100,t,2)}function SMe(e,t){return qn(e.getFullYear()%1e4,t,4)}function kMe(e,t){var r=e.getDay();return e=r>=4||r===0?wb(e):wb.ceil(e),qn(e.getFullYear()%1e4,t,4)}function jMe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qn(t/60|0,"0",2)+qn(t%60,"0",2)}function CG(e,t){return qn(e.getUTCDate(),t,2)}function BMe(e,t){return qn(e.getUTCHours(),t,2)}function TMe(e,t){return qn(e.getUTCHours()%12||12,t,2)}function IMe(e,t){return qn(1+E4.count(Oh(e),e),t,3)}function zse(e,t){return qn(e.getUTCMilliseconds(),t,3)}function FMe(e,t){return zse(e,t)+"000"}function OMe(e,t){return qn(e.getUTCMonth()+1,t,2)}function DMe(e,t){return qn(e.getUTCMinutes(),t,2)}function PMe(e,t){return qn(e.getUTCSeconds(),t,2)}function RMe(e){var t=e.getUTCDay();return t===0?7:t}function LMe(e,t){return qn(_4.count(Oh(e)-1,e),t,2)}function $se(e){var t=e.getUTCDay();return t>=4||t===0?Nb(e):Nb.ceil(e)}function MMe(e,t){return e=$se(e),qn(Nb.count(Oh(e),e)+(Oh(e).getUTCDay()===4),t,2)}function UMe(e){return e.getUTCDay()}function QMe(e,t){return qn(vS.count(Oh(e)-1,e),t,2)}function HMe(e,t){return qn(e.getUTCFullYear()%100,t,2)}function VMe(e,t){return e=$se(e),qn(e.getUTCFullYear()%100,t,2)}function zMe(e,t){return qn(e.getUTCFullYear()%1e4,t,4)}function $Me(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Nb(e):Nb.ceil(e),qn(e.getUTCFullYear()%1e4,t,4)}function GMe(){return"+0000"}function _G(){return"%"}function SG(e){return+e}function kG(e){return Math.floor(+e/1e3)}var Ux,Gse,qse;qMe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qMe(e){return Ux=qLe(e),Gse=Ux.format,Ux.parse,qse=Ux.utcFormat,Ux.utcParse,Ux}function KMe(e){return new Date(e)}function WMe(e){return e instanceof Date?+e:+new Date(+e)}function tL(e,t,r,n,a,s,o,l,c,u){var d=Q8(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),O=u("%Y");function j(B){return(c(B)<B?m:l(B)<B?g:o(B)<B?x:s(B)<B?v:n(B)<B?a(B)<B?y:w:r(B)<B?_:O)(B)}return d.invert=function(B){return new Date(f(B))},d.domain=function(B){return arguments.length?h(Array.from(B,WMe)):h().map(KMe)},d.ticks=function(B){var C=h();return e(C[0],C[C.length-1],B??10)},d.tickFormat=function(B,C){return C==null?j:u(C)},d.nice=function(B){var C=h();return(!B||typeof B.range!="function")&&(B=t(C[0],C[C.length-1],B??10)),B?h(Fse(C,B)):d},d.copy=function(){return vN(d,tL(e,t,r,n,a,s,o,l,c,u))},d}function XMe(){return rd.apply(tL($Le,GLe,Fh,Z8,C4,bN,Y8,W8,Xp,Gse).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function YMe(){return rd.apply(tL(VLe,zLe,Oh,eL,_4,E4,J8,X8,Xp,qse).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function S4(){var e=0,t=1,r,n,a,s,o=_l,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(u1),u.rangeRound=d(U8),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function tp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Kse(){var e=ep(S4()(_l));return e.copy=function(){return tp(e,Kse())},Wh.apply(e,arguments)}function Wse(){var e=z8(S4()).domain([1,10]);return e.copy=function(){return tp(e,Wse()).base(e.base())},Wh.apply(e,arguments)}function Xse(){var e=$8(S4());return e.copy=function(){return tp(e,Xse()).constant(e.constant())},Wh.apply(e,arguments)}function rL(){var e=G8(S4());return e.copy=function(){return tp(e,rL()).exponent(e.exponent())},Wh.apply(e,arguments)}function JMe(){return rL.apply(null,arguments).exponent(.5)}function Yse(){var e=[],t=_l;function r(n){if(n!=null&&!isNaN(n=+n))return t((gN(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(xm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>B8e(e,s/n))},r.copy=function(){return Yse(t).domain(e)},Wh.apply(r,arguments)}function k4(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,u=_l,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,w,_;return arguments.length?([y,w,_]=v,u=uLe(x,[y,w,_]),m):[u(0),u(.5),u(1)]}}return m.range=g(u1),m.rangeRound=g(U8),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,a=x(e),s=x(t),o=x(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function Jse(){var e=ep(k4()(_l));return e.copy=function(){return tp(e,Jse())},Wh.apply(e,arguments)}function Zse(){var e=z8(k4()).domain([.1,1,10]);return e.copy=function(){return tp(e,Zse()).base(e.base())},Wh.apply(e,arguments)}function eie(){var e=$8(k4());return e.copy=function(){return tp(e,eie()).constant(e.constant())},Wh.apply(e,arguments)}function nL(){var e=G8(k4());return e.copy=function(){return tp(e,nL()).exponent(e.exponent())},Wh.apply(e,arguments)}function ZMe(){return nL.apply(null,arguments).exponent(.5)}const t2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:R8,scaleDiverging:Jse,scaleDivergingLog:Zse,scaleDivergingPow:nL,scaleDivergingSqrt:ZMe,scaleDivergingSymlog:eie,scaleIdentity:Ise,scaleImplicit:cO,scaleLinear:Tse,scaleLog:Ose,scaleOrdinal:w4,scalePoint:F8e,scalePow:q8,scaleQuantile:Rse,scaleQuantize:Lse,scaleRadial:Pse,scaleSequential:Kse,scaleSequentialLog:Wse,scaleSequentialPow:rL,scaleSequentialQuantile:Yse,scaleSequentialSqrt:JMe,scaleSequentialSymlog:Xse,scaleSqrt:FLe,scaleSymlog:Dse,scaleThreshold:Mse,scaleTime:XMe,scaleUtc:YMe,tickFormat:Bse},Symbol.toStringTag,{value:"Module"}));var rp=e=>e.chartData,j4=At([rp],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),aL=(e,t,r,n)=>n?j4(e):rp(e);function Eb(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(ru(t)&&ru(r))return!0}return!1}function jG(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function eUe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(ru(r))a=r;else if(typeof r=="function")return;if(ru(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(Eb(o))return o}}function tUe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Eb(n))return jG(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(ir(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&m$.test(a)){var c=m$.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(ir(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&p$.test(s)){var d=p$.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(Eb(h))return t==null?h:jG(h,t,r)}}}var d1=1e9,rUe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},iL,ts=!0,Zu="[DecimalError] ",dg=Zu+"Invalid argument: ",sL=Zu+"Exponent out of range: ",f1=Math.floor,Pp=Math.pow,nUe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zc,Xi=1e7,La=7,tie=9007199254740991,bS=f1(tie/La),or={};or.absoluteValue=or.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};or.comparedTo=or.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};or.decimalPlaces=or.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*La;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};or.dividedBy=or.div=function(e){return bh(this,new this.constructor(e))};or.dividedToIntegerBy=or.idiv=function(e){var t=this,r=t.constructor;return Sa(bh(t,new r(e),0,1),r.precision)};or.equals=or.eq=function(e){return!this.cmp(e)};or.exponent=function(){return bi(this)};or.greaterThan=or.gt=function(e){return this.cmp(e)>0};or.greaterThanOrEqualTo=or.gte=function(e){return this.cmp(e)>=0};or.isInteger=or.isint=function(){return this.e>this.d.length-2};or.isNegative=or.isneg=function(){return this.s<0};or.isPositive=or.ispos=function(){return this.s>0};or.isZero=function(){return this.s===0};or.lessThan=or.lt=function(e){return this.cmp(e)<0};or.lessThanOrEqualTo=or.lte=function(e){return this.cmp(e)<1};or.logarithm=or.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(zc))throw Error(Zu+"NaN");if(r.s<1)throw Error(Zu+(r.s?"NaN":"-Infinity"));return r.eq(zc)?new n(0):(ts=!1,t=bh(kw(r,s),kw(e,s),s),ts=!0,Sa(t,a))};or.minus=or.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aie(t,e):rie(t,(e.s=-e.s,e))};or.modulo=or.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Zu+"NaN");return r.s?(ts=!1,t=bh(r,e,0,1).times(e),ts=!0,r.minus(t)):Sa(new n(r),a)};or.naturalExponential=or.exp=function(){return nie(this)};or.naturalLogarithm=or.ln=function(){return kw(this)};or.negated=or.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};or.plus=or.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rie(t,e):aie(t,(e.s=-e.s,e))};or.precision=or.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(dg+e);if(t=bi(a)+1,n=a.d.length-1,r=n*La+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};or.squareRoot=or.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Zu+"NaN")}for(e=bi(l),ts=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Yf(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=f1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(bh(l,s,o+2)).times(.5),Yf(s.d).slice(0,o)===(t=Yf(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Sa(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return ts=!0,Sa(n,r)};or.times=or.mul=function(e){var t,r,n,a,s,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*h[a-n-1]+t,s[a--]=l%Xi|0,t=l/Xi|0;s[a]=(s[a]+t)%Xi|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,ts?Sa(e,f.precision):e};or.toDecimalPlaces=or.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(fA(e,0,d1),t===void 0?t=n.rounding:fA(t,0,8),Sa(r,e+bi(r)+1,t))};or.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Og(n,!0):(fA(e,0,d1),t===void 0?t=a.rounding:fA(t,0,8),n=Sa(new a(n),e+1,t),r=Og(n,!0,e+1)),r};or.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Og(a):(fA(e,0,d1),t===void 0?t=s.rounding:fA(t,0,8),n=Sa(new s(a),e+bi(a)+1,t),r=Og(n.abs(),!1,e+bi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};or.toInteger=or.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),bi(e)+1,t.rounding)};or.toNumber=function(){return+this};or.toPower=or.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(zc);if(l=new c(l),!l.s){if(e.s<1)throw Error(Zu+"Infinity");return l}if(l.eq(zc))return l;if(n=c.precision,e.eq(zc))return Sa(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=tie){for(a=new c(zc),t=Math.ceil(n/La+4),ts=!1;r%2&&(a=a.times(l),TG(a.d,t)),r=f1(r/2),r!==0;)l=l.times(l),TG(l.d,t);return ts=!0,e.s<0?new c(zc).div(a):Sa(a,n)}}else if(s<0)throw Error(Zu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ts=!1,a=e.times(kw(l,n+u)),ts=!0,a=nie(a),a.s=s,a};or.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=bi(a),n=Og(a,r<=s.toExpNeg||r>=s.toExpPos)):(fA(e,1,d1),t===void 0?t=s.rounding:fA(t,0,8),a=Sa(new s(a),e,t),r=bi(a),n=Og(a,e<=r||r<=s.toExpNeg,e)),n};or.toSignificantDigits=or.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(fA(e,1,d1),t===void 0?t=n.rounding:fA(t,0,8)),Sa(new n(r),e,t)};or.toString=or.valueOf=or.val=or.toJSON=or[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=bi(e),r=e.constructor;return Og(e,t<=r.toExpNeg||t>=r.toExpPos)};function rie(e,t){var r,n,a,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ts?Sa(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/La),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Xi|0,c[s]%=Xi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,ts?Sa(t,f):t}function fA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(dg+e)}function Yf(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=La-n.length,r&&(s+=$0(r)),s+=n;o=e[t],n=o+"",r=La-n.length,r&&(s+=$0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var bh=function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Xi|0,o=s/Xi|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Xi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,h,m,g,x,v,y,w,_,O,j,B,C,k,T=n.constructor,L=n.s==a.s?1:-1,R=n.d,S=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(Zu+"Division by zero");for(c=n.e-a.e,C=S.length,j=R.length,m=new T(L),g=m.d=[],u=0;S[u]==(R[u]||0);)++u;if(S[u]>(R[u]||0)&&--c,s==null?w=s=T.precision:o?w=s+(bi(n)-bi(a))+1:w=s,w<0)return new T(0);if(w=w/La+2|0,u=0,C==1)for(d=0,S=S[0],w++;(u<j||d)&&w--;u++)_=d*Xi+(R[u]||0),g[u]=_/S|0,d=_%S|0;else{for(d=Xi/(S[0]+1)|0,d>1&&(S=e(S,d),R=e(R,d),C=S.length,j=R.length),O=C,x=R.slice(0,C),v=x.length;v<C;)x[v++]=0;k=S.slice(),k.unshift(0),B=S[0],S[1]>=Xi/2&&++B;do d=0,l=t(S,x,C,v),l<0?(y=x[0],C!=v&&(y=y*Xi+(x[1]||0)),d=y/B|0,d>1?(d>=Xi&&(d=Xi-1),f=e(S,d),h=f.length,v=x.length,l=t(f,x,h,v),l==1&&(d--,r(f,C<h?k:S,h))):(d==0&&(l=d=1),f=S.slice()),h=f.length,h<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(S,x,C,v),l<1&&(d++,r(x,C<v?k:S,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=R[O]||0:(x=[R[O]],v=1);while((O++<j||x[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Sa(m,o?s+bi(m)+1:s)}}();function nie(e,t){var r,n,a,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(bi(e)>16)throw Error(sL+bi(e));if(!e.s)return new d(zc);for(ts=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Pp(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(zc),d.precision=l;;){if(a=Sa(a.times(e),l),r=r.times(++c),o=s.plus(bh(a,r,l)),Yf(o.d).slice(0,l)===Yf(s.d).slice(0,l)){for(;u--;)s=Sa(s.times(s),l);return d.precision=f,t==null?(ts=!0,Sa(s,f)):s}s=o}}function bi(e){for(var t=e.e*La,r=e.d[0];r>=10;r/=10)t++;return t}function KT(e,t,r){if(t>e.LN10.sd())throw ts=!0,r&&(e.precision=r),Error(Zu+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function $0(e){for(var t="";e--;)t+="0";return t}function kw(e,t){var r,n,a,s,o,l,c,u,d,f=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(Zu+(m.s?"NaN":"-Infinity"));if(m.eq(zc))return new x(0);if(t==null?(ts=!1,u=v):u=t,m.eq(10))return t==null&&(ts=!0),KT(x,u);if(u+=h,x.precision=u,r=Yf(g),n=r.charAt(0),s=bi(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Yf(m.d),n=r.charAt(0),f++;s=bi(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=KT(x,u+2,v).times(s+""),m=kw(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(ts=!0,Sa(m,v)):m;for(l=o=m=bh(m.minus(zc),m.plus(zc),u),d=Sa(m.times(m),u),a=3;;){if(o=Sa(o.times(d),u),c=l.plus(bh(o,new x(a),u)),Yf(c.d).slice(0,u)===Yf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(KT(x,u+2,v).times(s+""))),l=bh(l,new x(f),u),x.precision=v,t==null?(ts=!0,Sa(l,v)):l;l=c,a+=2}}function BG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=f1(r/La),e.d=[],n=(r+1)%La,r<0&&(n+=La),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=La;n<a;)e.d.push(+t.slice(n,n+=La));t=t.slice(n),n=La-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ts&&(e.e>bS||e.e<-bS))throw Error(sL+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=La,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/La),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=La,a=n-La+o}if(r!==void 0&&(s=Pp(10,o-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Pp(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=bi(e),f.length=1,t=t-s-1,f[0]=Pp(10,(La-t%La)%La),e.e=f1(-t/La)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Pp(10,La-n),f[d]=a>0?(u/Pp(10,o-a)%Pp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Xi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Xi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(ts&&(e.e>bS||e.e<-bS))throw Error(sL+bi(e));return e}function aie(e,t){var r,n,a,s,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ts?Sa(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/La),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Xi-1;--c[s],c[a]+=Xi}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ts?Sa(t,m):t):new h(0)}function Og(e,t,r){var n,a=bi(e),s=Yf(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+$0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+$0(-a-1)+s,r&&(n=r-o)>0&&(s+=$0(n))):a>=o?(s+=$0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+$0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=$0(n))),e.s<0?"-"+s:s}function TG(e,t){if(e.length>t)return e.length=t,!0}function sie(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(dg+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return BG(o,s.toString())}else if(typeof s!="string")throw Error(dg+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,nUe.test(s))BG(o,s);else throw Error(dg+s)}if(a.prototype=or,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=sie,a.config=a.set=aUe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function aUe(e){if(!e||typeof e!="object")throw Error(Zu+"Object expected");var t,r,n,a=["precision",1,d1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(f1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(dg+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(dg+r+": "+n);return this}var iL=sie(rUe);zc=new iL(1);const fa=iL;var sUe=e=>e,iie={},oie=e=>e===iie,IG=e=>function t(){return arguments.length===0||arguments.length===1&&oie(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},lie=(e,t)=>e===1?t:IG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==iie).length;return s>=e?t(...n):lie(e-s,IG(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>oie(d)?l.shift():d);return t(...u,...l)}))}),B4=e=>lie(e.length,e),hO=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},iUe=B4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),oUe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return sUe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},mO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),cie=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function uie(e){var t;return e===0?t=1:t=Math.floor(new fa(e).abs().log(10).toNumber())+1,t}function die(e,t,r){for(var n=new fa(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}B4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});B4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});B4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var fie=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Aie=(e,t,r)=>{if(e.lte(0))return new fa(0);var n=uie(e.toNumber()),a=new fa(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new fa(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new fa(c.toNumber()):new fa(Math.ceil(c.toNumber()))},lUe=(e,t,r)=>{var n=new fa(1),a=new fa(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new fa(10).pow(uie(e)-1),a=new fa(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new fa(Math.floor(e)))}else e===0?a=new fa(Math.floor((t-1)/2)):r||(a=new fa(Math.floor(e)));var o=Math.floor((t-1)/2),l=oUe(iUe(c=>a.add(new fa(c-o).mul(n)).toNumber()),hO);return l(0,t)},hie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new fa(0),tickMin:new fa(0),tickMax:new fa(0)};var o=Aie(new fa(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new fa(0):(l=new fa(t).add(r).div(2),l=l.sub(new fa(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new fa(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?hie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new fa(c).mul(o)),tickMax:l.add(new fa(u).mul(o))})};function cUe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[o,l]=fie([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...hO(0,n-1).map(()=>1/0)]:[...hO(0,n-1).map(()=>-1/0),l];return t>r?mO(c):c}if(o===l)return lUe(o,n,a);var{step:u,tickMin:d,tickMax:f}=hie(o,l,s,a,0),h=die(d,f.add(new fa(.1).mul(u)),u);return t>r?mO(h):h}function uUe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=fie([r,n]);if(s===-1/0||o===1/0)return[r,n];if(s===o)return[s];var l=Math.max(t,2),c=Aie(new fa(o).sub(s).div(l-1),a,0),u=[...die(new fa(s),new fa(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?mO(u):u}var dUe=cie(cUe),fUe=cie(uUe),mie=e=>e.rootProps.maxBarSize,AUe=e=>e.rootProps.barGap,pie=e=>e.rootProps.barCategoryGap,hUe=e=>e.rootProps.barSize,yN=e=>e.rootProps.stackOffset,oL=e=>e.options.chartName,lL=e=>e.rootProps.syncId,gie=e=>e.rootProps.syncMethod,cL=e=>e.options.eventEmitter,Gf={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},ec={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},T4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},mUe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Gf.angleAxisId,includeHidden:!1,name:void 0,reversed:Gf.reversed,scale:Gf.scale,tick:Gf.tick,tickCount:void 0,ticks:void 0,type:Gf.type,unit:void 0},pUe={allowDataOverflow:ec.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ec.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ec.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ec.scale,tick:ec.tick,tickCount:ec.tickCount,ticks:void 0,type:ec.type,unit:void 0},gUe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Gf.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gf.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gf.scale,tick:Gf.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xUe={allowDataOverflow:ec.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ec.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ec.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ec.scale,tick:ec.tick,tickCount:ec.tickCount,ticks:void 0,type:"category",unit:void 0},A1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?gUe:mUe,wN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?xUe:pUe,I4=e=>e.polarOptions,uL=At([qh,Kh,Oi],Gae),xie=At([I4,uL],(e,t)=>{if(e!=null)return Bl(e.innerRadius,t,0)}),vie=At([I4,uL],(e,t)=>{if(e!=null)return Bl(e.outerRadius,t,t*.8)}),vUe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},bie=At([I4],vUe),bUe=At([A1,bie],T4),yie=At([uL,xie,vie],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),yUe=At([wN,yie],T4),h1=At([Cn,I4,xie,vie,qh,Kh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Bl(o,a,a/2),cy:Bl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ka=(e,t)=>t,NN=(e,t,r)=>r;function dL(e){return e==null?void 0:e.id}var Pi=e=>{var t=Cn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},m1=e=>e.tooltip.settings.axisId,Ri=e=>{var t=Pi(e),r=m1(e);return p1(e,t,r)};function wie(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=dL(o);c.forEach((d,f)=>{var h=a==null?f:String(Pa(d,a,null)),m=Pa(d,o.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:m}),s.set(h,g)})}}),Array.from(s.values())}function F4(e){return e.stackId!=null&&e.dataKey!=null}function FG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FG(Object(r),!0).forEach(function(n){wUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wUe(e,t,r){return(t=NUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NUe(e){var t=EUe(e,"string");return typeof t=="symbol"?t:t+""}function EUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pO=[0,"auto"],Dc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Xh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Dc},Pc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:v4},np=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Pc},CUe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},fL=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??CUe},ri=(e,t,r)=>{switch(t){case"xAxis":return Xh(e,r);case"yAxis":return np(e,r);case"zAxis":return fL(e,r);case"angleAxis":return A1(e,r);case"radiusAxis":return wN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_Ue=(e,t,r)=>{switch(t){case"xAxis":return Xh(e,r);case"yAxis":return np(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},p1=(e,t,r)=>{switch(t){case"xAxis":return Xh(e,r);case"yAxis":return np(e,r);case"angleAxis":return A1(e,r);case"radiusAxis":return wN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Nie=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function AL(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var hL=e=>e.graphicalItems.cartesianItems,SUe=At([ka,NN],AL),mL=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),EN=At([hL,ri,SUe],mL),Eie=At([EN],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(F4)),Cie=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),_ie=At([EN],Cie),pL=e=>e.map(t=>t.data).filter(Boolean).flat(1),kUe=At([EN],pL),gL=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},xL=At([kUe,aL],gL),vL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pa(a,n)}))):e.map(n=>({value:n})),O4=At([xL,ri,EN],vL);function Sie(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function nx(e){return e.filter(t=>dA(t)||t instanceof Date).map(Number).filter(t=>Zc(t)===!1)}function jUe(e,t,r){return!r||typeof t!="number"||Zc(t)?[]:r.length?nx(r.flatMap(n=>{var a=Pa(e,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!ru(s)||!ru(o)))return[t-s,t+o]})):[]}var BUe=At([Eie,aL,Ri],wie),kie=(e,t,r)=>{var n={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=l.map(dL);return[o,{stackedData:NPe(e,c,r),graphicalItems:l}]}))},gO=At([BUe,Eie,yN],kie),jie=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=kPe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},TUe=At([gO,rp,ka],jie),Bie=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(o=>{var l,c,u=(l=n[o.id])===null||l===void 0?void 0:l.filter(f=>Sie(a,f)),d=Pa(s,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:jUe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Pa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),D4=e=>e.errorBars,Tie=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Sie(r,n));At([_ie,D4,ka],Tie);var IUe=At([xL,ri,_ie,D4,ka],Bie);function FUe(e){var{value:t}=e;if(dA(t)||t instanceof Date)return t}var OG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=nx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},OUe=(e,t,r)=>{var n=e.map(FUe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Vne(n))?gse(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},bL=e=>{var t;if(e==null||!("domain"in e))return pO;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=nx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:pO},wS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},Iie=e=>e.referenceElements.dots,g1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),DUe=At([Iie,ka,NN],g1),Fie=e=>e.referenceElements.areas,PUe=At([Fie,ka,NN],g1),Oie=e=>e.referenceElements.lines,RUe=At([Oie,ka,NN],g1),Die=(e,t)=>{var r=nx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},LUe=At(DUe,ka,Die),Pie=(e,t)=>{var r=nx(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},MUe=At([PUe,ka],Pie),Rie=(e,t)=>{var r=nx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},UUe=At(RUe,ka,Rie),QUe=At(LUe,UUe,MUe,(e,t,r)=>wS(e,r,t)),Lie=At([ri],bL),yL=(e,t,r,n,a,s,o)=>{var l=eUe(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?wS(r,a,OG(n)):wS(a,OG(n));return tUe(t,u,e.allowDataOverflow)},HUe=At([ri,Lie,TUe,IUe,QUe,Cn,ka],yL),VUe=[0,1],wL=(e,t,r,n,a,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=Zm(t,s);return u&&l==null?gse(0,r.length):c==="category"?OUe(n,e,u):a==="expand"?VUe:o}},NL=At([ri,Cn,xL,O4,yN,ka,HUe],wL),Mie=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(hN(s));return l in t2?l:"point"}}},ap=At([ri,Cn,Nie,oL,ka],Mie);function zUe(e){if(e!=null){if(e in t2)return t2[e]();var t="scale".concat(hN(e));if(t in t2)return t2[t]()}}function P4(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=zUe(t);if(a!=null){var s=a.domain(r).range(n);return xPe(s),s}}}var EL=(e,t,r)=>{var n=bL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Eb(e))return dUe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Eb(e))return fUe(e,t.tickCount,t.allowDecimals)}},CL=At([NL,p1,ap],EL),_L=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Eb(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return t},$Ue=At([ri,NL,CL,ka],_L),GUe=At(O4,ri,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(nx(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),Uie=At(GUe,Cn,pie,Oi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!ru(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var o=Bl(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),qUe=(e,t)=>{var r=Xh(e,t);return r==null||typeof r.padding!="string"?0:Uie(e,"xAxis",t,r.padding)},KUe=(e,t)=>{var r=np(e,t);return r==null||typeof r.padding!="string"?0:Uie(e,"yAxis",t,r.padding)},WUe=At(Xh,qUe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),XUe=At(np,KUe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),YUe=At([Oi,WUe,y4,b4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),JUe=At([Oi,Cn,XUe,y4,b4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),CN=(e,t,r,n)=>{var a;switch(t){case"xAxis":return YUe(e,r,n);case"yAxis":return JUe(e,r,n);case"zAxis":return(a=fL(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return bie(e);case"radiusAxis":return yie(e,r);default:return}},Qie=At([ri,CN],T4),x1=At([ri,ap,$Ue,Qie],P4);At([EN,D4,ka],Tie);function Hie(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var R4=(e,t)=>t,L4=(e,t,r)=>r,ZUe=At(k8,R4,L4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Hie)),e7e=At(j8,R4,L4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Hie)),Vie=(e,t)=>({width:e.width,height:t.height}),t7e=(e,t)=>{var r=typeof t.width=="number"?t.width:v4;return{width:r,height:e.height}},zie=At(Oi,Xh,Vie),r7e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},n7e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},a7e=At(Kh,Oi,ZUe,R4,L4,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Vie(t,l);o==null&&(o=r7e(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),s7e=At(qh,Oi,e7e,R4,L4,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=t7e(t,l);o==null&&(o=n7e(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),i7e=(e,t)=>{var r=Oi(e),n=Xh(e,t);if(n!=null){var a=a7e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},o7e=(e,t)=>{var r=Oi(e),n=np(e,t);if(n!=null){var a=s7e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},$ie=At(Oi,np,(e,t)=>{var r=typeof t.width=="number"?t.width:v4;return{width:r,height:e.height}}),DG=(e,t,r)=>{switch(t){case"xAxis":return zie(e,r).width;case"yAxis":return $ie(e,r).height;default:return}},Gie=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=Zm(e,n),c=t.map(u=>u.value);if(o&&l&&s==="category"&&a&&Vne(c))return c}},_N=At([Cn,O4,ri,ka],Gie),SL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=Zm(e,n);if(o&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},kL=At([Cn,O4,p1,ka],SL),PG=At([Cn,_Ue,ap,x1,_N,kL,CN,CL,ka],(e,t,r,n,a,s,o,l,c)=>{if(t==null)return null;var u=Zm(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),qie=(e,t,r,n,a,s,o,l,c)=>{if(!(t==null||n==null)){var u=Zm(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?to(s[0]-s[1])*2*g:g;var x=f||a;if(x){var v=x.map((y,w)=>{var _=o?o.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return v.filter(y=>!Zc(y.coordinate))}return u&&l?l.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:o?o[y]:y,index:w,offset:g}))}},Kie=At([Cn,p1,ap,x1,CL,CN,_N,kL,ka],qie),Wie=(e,t,r,n,a,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Zm(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?to(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Cb=At([Cn,p1,x1,CN,_N,kL,ka],Wie),_b=At(ri,x1,(e,t)=>{if(!(e==null||t==null))return yS(yS({},e),{},{scale:t})}),l7e=At([ri,ap,NL,Qie],P4);At((e,t,r)=>fL(e,r),l7e,(e,t)=>{if(!(e==null||t==null))return yS(yS({},e),{},{scale:t})});var c7e=At([Cn,k8,j8],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Xie=e=>e.options.defaultTooltipEventType,Yie=e=>e.options.validateTooltipEventTypes;function Jie(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function jL(e,t){var r=Xie(e),n=Yie(e);return Jie(t,r,n)}function u7e(e){return tr(t=>jL(t,e))}var Zie=(e,t)=>{var r,n=Number(t);if(!(Zc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},d7e=e=>e.tooltip.settings,em={active:!1,index:null,dataKey:void 0,coordinate:void 0},f7e={itemInteraction:{click:em,hover:em},axisInteraction:{click:em,hover:em},keyboardInteraction:em,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},eoe=au({name:"tooltip",initialState:f7e,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=vh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:A7e,removeTooltipEntrySettings:h7e,setTooltipSettingsState:m7e,setActiveMouseOverItemIndex:toe,mouseLeaveItem:p7e,mouseLeaveChart:roe,setActiveClickItemIndex:g7e,setMouseOverAxisIndex:noe,setMouseClickAxisIndex:x7e,setSyncInteraction:xO,setKeyboardInteraction:vO}=eoe.actions,v7e=eoe.reducer;function RG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RG(Object(r),!0).forEach(function(n){b7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b7e(e,t,r){return(t=y7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y7e(e){var t=w7e(e,"string");return typeof t=="symbol"?t:t+""}function w7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N7e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function E7e(e){return e.index!=null}var aoe=(e,t,r,n)=>{if(t==null)return em;var a=N7e(e,t,r);if(a==null)return em;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(E7e(a)){if(s)return EC(EC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return EC(EC({},em),{},{coordinate:a.coordinate})},BL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!ru(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},soe=(e,t,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},ioe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},SN=e=>e.options.tooltipPayloadSearcher,v1=e=>e.tooltip;function LG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LG(Object(r),!0).forEach(function(n){C7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C7e(e,t,r){return(t=_7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _7e(e){var t=S7e(e,"string");return typeof t=="symbol"?t:t+""}function S7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k7e(e,t){return e??t}var ooe=(e,t,r,n,a,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=k7e(x,l),w=Array.isArray(y)?Kae(y,u,d):y,_=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,O=v==null?void 0:v.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?j=uFe(w,n.dataKey,a):j=s(w,t,c,O),Array.isArray(j))j.forEach(C=>{var k=MG(MG({},v),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});h.push(g$({tooltipEntrySettings:k,dataKey:C.dataKey,payload:C.payload,value:Pa(C.payload,C.dataKey),name:C.name}))});else{var B;h.push(g$({tooltipEntrySettings:v,dataKey:_,payload:j,value:Pa(j,_),name:(B=Pa(j,O))!==null&&B!==void 0?B:v==null?void 0:v.name}))}return h},f)}},TL=At([Ri,Cn,Nie,oL,Pi],Mie),j7e=At([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),B7e=At([Pi,m1],AL),kN=At([j7e,Ri,B7e],mL),T7e=At([kN],e=>e.filter(F4)),I7e=At([kN],pL),b1=At([I7e,rp],gL),F7e=At([T7e,rp,Ri],wie),IL=At([b1,Ri,kN],vL),O7e=At([Ri],bL),D7e=At([kN],e=>e.filter(F4)),P7e=At([F7e,D7e,yN],kie),R7e=At([P7e,rp,Pi],jie),L7e=At([kN],Cie),M7e=At([b1,Ri,L7e,D4,Pi],Bie),U7e=At([Iie,Pi,m1],g1),Q7e=At([U7e,Pi],Die),H7e=At([Fie,Pi,m1],g1),V7e=At([H7e,Pi],Pie),z7e=At([Oie,Pi,m1],g1),$7e=At([z7e,Pi],Rie),G7e=At([Q7e,$7e,V7e],wS),q7e=At([Ri,O7e,R7e,M7e,G7e,Cn,Pi],yL),loe=At([Ri,Cn,b1,IL,yN,Pi,q7e],wL),K7e=At([loe,Ri,TL],EL),W7e=At([Ri,loe,K7e,Pi],_L),coe=e=>{var t=Pi(e),r=m1(e),n=!1;return CN(e,t,r,n)},uoe=At([Ri,coe],T4),doe=At([Ri,TL,W7e,uoe],P4),X7e=At([Cn,IL,Ri,Pi],Gie),Y7e=At([Cn,IL,Ri,Pi],SL),J7e=(e,t,r,n,a,s,o,l)=>{if(t){var{type:c}=t,u=Zm(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?to(a[0]-a[1])*2*f:f,u&&o?o.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:s?s[h]:h,index:m,offset:f}))}}},Yh=At([Cn,Ri,TL,doe,coe,X7e,Y7e,Pi],J7e),FL=At([Xie,Yie,d7e],(e,t,r)=>Jie(r.shared,e,t)),foe=e=>e.tooltip.settings.trigger,OL=e=>e.tooltip.settings.defaultIndex,M4=At([v1,FL,foe,OL],aoe),Mm=At([M4,b1],BL),Aoe=At([Yh,Mm],Zie),hoe=At([M4],e=>{if(e)return e.dataKey}),moe=At([v1,FL,foe,OL],ioe),Z7e=At([qh,Kh,Cn,Oi,Yh,OL,moe,SN],soe),e9e=At([M4,Z7e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),t9e=At([M4],e=>e.active),r9e=At([moe,Mm,rp,Ri,Aoe,SN,FL],ooe),n9e=At([r9e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function UG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UG(Object(r),!0).forEach(function(n){a9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a9e(e,t,r){return(t=s9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s9e(e){var t=i9e(e,"string");return typeof t=="symbol"?t:t+""}function i9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o9e=()=>tr(Ri),l9e=()=>{var e=o9e(),t=tr(Yh),r=tr(doe);return Nw(QG(QG({},e),{},{scale:r}),t)},c9e=()=>tr(oL),DL=(e,t)=>t,poe=(e,t,r)=>r,PL=(e,t,r,n)=>n,u9e=At(Yh,e=>f4(e,t=>t.coordinate)),RL=At([v1,DL,poe,PL],aoe),goe=At([RL,b1],BL),d9e=(e,t,r)=>{if(t!=null){var n=v1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},xoe=At([v1,DL,poe,PL],ioe),NS=At([qh,Kh,Cn,Oi,Yh,PL,xoe,SN],soe),f9e=At([RL,NS],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),voe=At(Yh,goe,Zie),A9e=At([xoe,goe,rp,Ri,voe,SN,DL],ooe),h9e=At([RL],e=>({isActive:e.active,activeIndex:e.index})),m9e=(e,t,r,n,a,s,o,l)=>{if(!(!e||!t||!n||!a||!s)){var c=jPe(e.chartX,e.chartY,t,r,l);if(c){var u=TPe(c,t),d=pPe(u,o,s,n,a),f=BPe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function bO(){return bO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bO.apply(null,arguments)}function HG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HG(Object(r),!0).forEach(function(n){p9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p9e(e,t,r){return(t=g9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g9e(e){var t=x9e(e,"string");return typeof t=="symbol"?t:t+""}function x9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v9e(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=kRe;else if(u==="BarChart")m=jRe(o,d,a,s),g=Ase;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:w,endAngle:_}=hse(d);m={cx:x,cy:v,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=pse}else m={points:A8e(o,d,a)},g=ise;var O=typeof l=="object"&&"className"in l?l.className:void 0,j=CC(CC(CC(CC({stroke:"#ccc",pointerEvents:"none"},a),m),$n(l,!1)),{},{payload:f,payloadIndex:h,className:fn("recharts-tooltip-cursor",O)});return N.isValidElement(l)?N.cloneElement(l,j):N.createElement(g,j)}function b9e(e){var t=l9e(),r=tse(),n=F8(),a=c9e();return N.createElement(v9e,bO({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var boe=N.createContext(null),y9e=()=>N.useContext(boe),WT={exports:{}},VG;function w9e(){return VG||(VG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var O=v.length,j;for(_=0;_<O;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),y){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,d);break;case 3:v[_].fn.call(v[_].context,d,f);break;case 4:v[_].fn.call(v[_].context,d,f,h);break;default:if(!w)for(j=1,w=new Array(y-1);j<y;j++)w[j-1]=arguments[j];v[_].fn.apply(v[_].context,w)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(WT)),WT.exports}var N9e=w9e();const E9e=Tl(N9e);var jw=new E9e,yO="recharts.syncEvent.tooltip",zG="recharts.syncEvent.brush";function LL(e,t){if(t){var r=Number.parseInt(t,10);if(!Zc(r))return e==null?void 0:e[r]}}var C9e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},yoe=au({name:"options",initialState:C9e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),_9e=yoe.reducer,{createEventEmitter:S9e}=yoe.actions;function k9e(e){return e.tooltip.syncInteraction}var j9e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},woe=au({name:"chartData",initialState:j9e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:$G,setDataStartEndIndexes:B9e,setComputedData:ypt}=woe.actions,T9e=woe.reducer,Noe=()=>{};function I9e(){var e=tr(lL),t=tr(cL),r=qa(),n=tr(gie),a=tr(Yh),s=F8(),o=B8(),l=tr(c=>c.rootProps.className);N.useEffect(()=>{if(e==null)return Noe;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);h=a[g]}else n==="value"&&(h=a.find(B=>String(B.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||o==null){r(xO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,w=Math.min(v,o.x+o.width),_=Math.min(y,o.y+o.height),O={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},j=xO({active:d.payload.active,coordinate:O,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(j)}}};return jw.on(yO,c),()=>{jw.off(yO,c)}},[l,r,t,e,n,a,s,o])}function F9e(){var e=tr(lL),t=tr(cL),r=qa();N.useEffect(()=>{if(e==null)return Noe;var n=(a,s,o)=>{t!==o&&e===a&&r(B9e(s))};return jw.on(zG,n),()=>{jw.off(zG,n)}},[r,t,e])}function O9e(){var e=qa();N.useEffect(()=>{e(S9e())},[e]),I9e(),F9e()}function D9e(e,t,r,n,a,s){var o=tr(h=>d9e(h,e,t)),l=tr(cL),c=tr(lL),u=tr(gie),d=tr(k9e),f=d==null?void 0:d.active;N.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=xO({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});jw.emit(yO,c,h,l)}},[f,r,o,a,n,l,c,u,s])}function GG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GG(Object(r),!0).forEach(function(n){P9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P9e(e,t,r){return(t=R9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R9e(e){var t=L9e(e,"string");return typeof t=="symbol"?t:t+""}function L9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M9e(e){return e.dataKey}function U9e(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(iRe,t)}var KG=[],Q9e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ex.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function uh(e){var t=td(e,Q9e),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:w,portal:_,axisId:O}=t,j=qa(),B=typeof w=="number"?String(w):w;N.useEffect(()=>{j(m7e({shared:v,trigger:y,axisId:O,active:r,defaultIndex:B}))},[j,v,y,O,r,B]);var C=B8(),k=sse(),T=u7e(v),{activeIndex:L,isActive:R}=tr(J=>h9e(J,T,y,B)),S=tr(J=>A9e(J,T,y,B)),U=tr(J=>voe(J,T,y,B)),Q=tr(J=>f9e(J,T,y,B)),X=S,z=y9e(),W=r??R,[G,Y]=yae([X,W]),K=T==="axis"?U:void 0;D9e(T,y,Q,K,L,W);var H=_??z;if(H==null)return null;var F=X??KG;W||(F=KG),l&&F.length&&(F=mae(X.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),d,M9e));var D=F.length>0,q=N.createElement(ARe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:W,coordinate:Q,hasPayload:D,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:C,wrapperStyle:g,lastBoundingBox:G,innerRef:Y,hasPortalFromProps:!!_},U9e(o,qG(qG({},t),{},{payload:F,label:K,active:W,coordinate:Q,accessibilityLayer:k})));return N.createElement(N.Fragment,null,c8.createPortal(q,H),W&&N.createElement(b9e,{cursor:x,tooltipEventType:T,coordinate:Q,payload:X,index:L}))}var XT={},YT={},JT={},WG;function H9e(){return WG||(WG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),o=void 0,l=null},v=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;o=this,l=w;const _=h==null;m(),c&&_&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(JT)),JT}var XG;function V9e(){return XG||(XG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H9e();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(YT)),YT}var YG;function z9e(){return YG||(YG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V9e();function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r}(XT)),XT}var ZT,JG;function $9e(){return JG||(JG=1,ZT=z9e().throttle),ZT}var G9e=$9e();const q9e=Tl(G9e);var B2=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function ZG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZG(Object(r),!0).forEach(function(n){K9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K9e(e,t,r){return(t=W9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W9e(e){var t=X9e(e,"string");return typeof t=="symbol"?t:t+""}function X9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dh=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,x=N.useRef(null),v=N.useRef();v.current=m,N.useImperativeHandle(t,()=>x.current);var[y,w]=N.useState({containerWidth:n.width,containerHeight:n.height}),_=N.useCallback((j,B)=>{w(C=>{var k=Math.round(j),T=Math.round(B);return C.containerWidth===k&&C.containerHeight===T?C:{containerWidth:k,containerHeight:T}})},[]);N.useEffect(()=>{var j=T=>{var L,{width:R,height:S}=T[0].contentRect;_(R,S),(L=v.current)===null||L===void 0||L.call(v,R,S)};d>0&&(j=q9e(j,d,{trailing:!0,leading:!1}));var B=new ResizeObserver(j),{width:C,height:k}=x.current.getBoundingClientRect();return _(C,k),B.observe(x.current),()=>{B.disconnect()}},[_,d]);var O=N.useMemo(()=>{var{containerWidth:j,containerHeight:B}=y;if(j<0||B<0)return null;B2(qp(a)||qp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),B2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=qp(a)?j:a,k=qp(s)?B:s;return r&&r>0&&(C?k=C/r:k&&(C=k*r),c&&k>c&&(k=c)),B2(C>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,k,a,s,o,l,r),N.Children.map(u,T=>N.cloneElement(T,{width:C,height:k,style:eI({width:C,height:k},T.props.style)}))},[r,u,s,c,l,o,y,a]);return N.createElement("div",{id:f?"".concat(f):void 0,className:fn("recharts-responsive-container",h),style:eI(eI({},g),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:x},N.createElement("div",{style:{width:0,height:0,overflow:"visible"}},O))}),Um=e=>null;Um.displayName="Cell";function Y9e(e,t,r){return(t=J9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J9e(e){var t=Z9e(e,"string");return typeof t=="symbol"?t:t+""}function Z9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class eQe{constructor(t){Y9e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tQe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(n){rQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rQe(e,t,r){return(t=nQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nQe(e){var t=aQe(e,"string");return typeof t=="symbol"?t:t+""}function aQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sQe={cacheSize:2e3,enableCache:!0},Eoe=tQe({},sQe),tq=new eQe(Eoe.cacheSize),iQe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rq="recharts_measurement_span";function oQe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var nq=(e,t)=>{try{var r=document.getElementById(rq);r||(r=document.createElement("span"),r.setAttribute("id",rq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,iQe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},T2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ex.isSsr)return{width:0,height:0};if(!Eoe.enableCache)return nq(t,r);var n=oQe(t,r),a=tq.get(n);if(a)return a;var s=nq(t,r);return tq.set(n,s),s},aq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lQe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cQe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Coe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},uQe=Object.keys(Coe),yv="NaN";function dQe(e,t){return e*Coe[t]}class Xl{static parse(t){var r,[,n,a]=(r=cQe.exec(t))!==null&&r!==void 0?r:[];return new Xl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Zc(t)&&(this.unit=""),r!==""&&!lQe.test(r)&&(this.num=NaN,this.unit=""),uQe.includes(r)&&(this.num=dQe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xl(NaN,""):new Xl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zc(this.num)}}function _oe(e){if(e.includes(yv))return yv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=aq.exec(t))!==null&&r!==void 0?r:[],o=Xl.parse(n??""),l=Xl.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return yv;t=t.replace(aq,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=sq.exec(t))!==null&&u!==void 0?u:[],m=Xl.parse(d??""),g=Xl.parse(h??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return yv;t=t.replace(sq,x.toString())}return t}var iq=/\(([^()]*)\)/;function fQe(e){for(var t=e,r;(r=iq.exec(t))!=null;){var[,n]=r;t=t.replace(iq,_oe(n))}return t}function AQe(e){var t=e.replace(/\s+/g,"");return t=fQe(t),t=_oe(t),t}function hQe(e){try{return AQe(e)}catch{return yv}}function tI(e){var t=hQe(e.slice(5,-1));return t===yv?"":t}var mQe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],pQe=["dx","dy","angle","className","breakAll"];function wO(){return wO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wO.apply(null,arguments)}function oq(e,t){if(e==null)return{};var r,n,a=gQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Soe=/[ \f\n\r\t\v\u2028\u2029]+/,koe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Os(t)||(r?a=t.toString().split(""):a=t.toString().split(Soe));var s=a.map(l=>({word:l,width:T2(l,n).width})),o=r?0:T2(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},xQe=(e,t,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,u=ir(s),d=o,f=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((S,U)=>{var{word:Q,width:X}=U,z=S[S.length-1];if(z&&(n==null||a||z.width+X+r<Number(n)))z.words.push(Q),z.width+=X+r;else{var W={words:[Q],width:X};S.push(W)}return S},[])},h=f(t),m=L=>L.reduce((R,S)=>R.width>S.width?R:S);if(!u||a)return h;var g=h.length>s||m(h).width>Number(n);if(!g)return h;for(var x="…",v=L=>{var R=d.slice(0,L),S=koe({breakAll:c,style:l,children:R+x}).wordsWithComputedWidth,U=f(S),Q=U.length>s||m(U).width>Number(n);return[Q,U]},y=0,w=d.length-1,_=0,O;y<=w&&_<=d.length-1;){var j=Math.floor((y+w)/2),B=j-1,[C,k]=v(B),[T]=v(j);if(!C&&!T&&(y=j+1),C&&T&&(w=j-1),!C&&T){O=k;break}_++}return O||h},lq=e=>{var t=Os(e)?[]:e.toString().split(Soe);return[{words:t}]},vQe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=e;if((t||r)&&!ex.isSsr){var l,c,u=koe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return lq(n);return xQe({breakAll:s,children:n,maxLines:o,style:a},l,c,t,r)}return lq(n)},cq="#808080",y1=N.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=cq}=e,d=oq(e,mQe),f=N.useMemo(()=>vQe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=oq(d,pQe);if(!dA(r)||!dA(n))return null;var w=r+(ir(h)?h:0),_=n+(ir(m)?m:0),O;switch(c){case"start":O=tI("calc(".concat(s,")"));break;case"middle":O=tI("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:O=tI("calc(".concat(f.length-1," * -").concat(a,")"));break}var j=[];if(o){var B=f[0].width,{width:C}=d;j.push("scale(".concat(ir(C)?C/B:1,")"))}return g&&j.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),j.length&&(y.transform=j.join(" ")),N.createElement("text",wO({},$n(y,!0),{ref:t,x:w,y:_,className:fn("recharts-text",x),textAnchor:l,fill:u.includes("url")?cq:u}),f.map((k,T)=>{var L=k.words.join(v?"":" ");return N.createElement("tspan",{x:w,dy:T===0?O:a,key:"".concat(L,"-").concat(T)},L)}))});y1.displayName="Text";var bQe=["offset"],yQe=["labelRef"];function uq(e,t){if(e==null)return{};var r,n,a=wQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dq(Object(r),!0).forEach(function(n){NQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NQe(e,t,r){return(t=EQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EQe(e){var t=CQe(e,"string");return typeof t=="symbol"?t:t+""}function CQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nh.apply(null,arguments)}var _Qe=e=>{var{value:t,formatter:r}=e,n=Os(e.children)?t:e.children;return typeof r=="function"?r(n):n},ML=e=>e!=null&&typeof e=="function",SQe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},kQe=(e,t,r,n)=>{var{position:a,offset:s,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=n,g=(u+d)/2,x=SQe(f,h),v=x>=0?1:-1,y,w;a==="insideStart"?(y=f+v*s,w=m):a==="insideEnd"?(y=h-v*s,w=!m):a==="end"&&(y=h+v*s,w=m),w=x<=0?w:!w;var _=Xn(l,c,g,y),O=Xn(l,c,g,y+(w?1:-1)*359),j="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(O.x,",").concat(O.y),B=Os(e.id)?bw("recharts-radial-line-"):e.id;return N.createElement("text",nh({},r,{dominantBaseline:"central",className:fn("recharts-radial-bar-label",o)}),N.createElement("defs",null,N.createElement("path",{id:B,d:j})),N.createElement("textPath",{xlinkHref:"#".concat(B)},t))},jQe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=Xn(n,a,o+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+o)/2,{x:m,y:g}=Xn(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},BQe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Es(Es({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var w={x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return Es(Es({},w),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(a==="left"){var _={x:s-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return Es(Es({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var O={x:s+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Es(Es({},O),r?{width:Math.max(r.x+r.width-O.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return a==="insideLeft"?Es({x:s+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},j):a==="insideRight"?Es({x:s+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):a==="insideTop"?Es({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},j):a==="insideBottom"?Es({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):a==="insideTopLeft"?Es({x:s+g,y:o+d,textAnchor:v,verticalAnchor:h},j):a==="insideTopRight"?Es({x:s+l-g,y:o+d,textAnchor:x,verticalAnchor:h},j):a==="insideBottomLeft"?Es({x:s+g,y:o+c-d,textAnchor:v,verticalAnchor:f},j):a==="insideBottomRight"?Es({x:s+l-g,y:o+c-d,textAnchor:x,verticalAnchor:f},j):a&&typeof a=="object"&&(ir(a.x)||qp(a.x))&&(ir(a.y)||qp(a.y))?Es({x:s+Bl(a.x,l),y:o+Bl(a.y,c),textAnchor:"end",verticalAnchor:"end"},j):Es({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},TQe=e=>"cx"in e&&ir(e.cx);function rc(e){var{offset:t=5}=e,r=uq(e,bQe),n=Es({offset:t},r),{viewBox:a,position:s,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=tr(h1),m=B8(),g=s==="center"?m:h??m,x=a||g;if(!x||Os(o)&&Os(l)&&!N.isValidElement(c)&&typeof c!="function")return null;var v=Es(Es({},n),{},{viewBox:x});if(N.isValidElement(c)){var{labelRef:y}=v,w=uq(v,yQe);return N.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=N.createElement(c,v),N.isValidElement(_))return _}else _=_Qe(n);var O=TQe(x),j=$n(n,!0);if(O&&(s==="insideStart"||s==="insideEnd"||s==="end"))return kQe(n,_,j,x);var B=O?jQe(x,n.offset,n.position):BQe(n,x);return N.createElement(y1,nh({ref:f,className:fn("recharts-label",u)},j,B,{breakAll:d}),_)}rc.displayName="Label";var joe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(ir(g)&&ir(x)){if(ir(d)&&ir(f))return{x:d,y:f,width:g,height:x};if(ir(h)&&ir(m))return{x:h,y:m,width:g,height:x}}if(ir(d)&&ir(f))return{x:d,y:f,width:0,height:0};if(ir(t)&&ir(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},IQe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?N.createElement(rc,nh({key:"label-implicit"},n)):dA(e)?N.createElement(rc,nh({key:"label-implicit",value:e},n)):N.isValidElement(e)?e.type===rc?N.cloneElement(e,Es({key:"label-implicit"},n)):N.createElement(rc,nh({key:"label-implicit",content:e},n)):ML(e)?N.createElement(rc,nh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?N.createElement(rc,nh({},e,{key:"label-implicit"},n)):null},FQe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,o=joe(t),l=mN(a,rc).map((u,d)=>N.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=IQe(t.label,r||o,s);return[c,...l]};rc.parseViewBox=joe;rc.renderCallByParent=FQe;var rI={},nI={},fq;function OQe(){return fq||(fq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(nI)),nI}var aI={},Aq;function DQe(){return Aq||(Aq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(aI)),aI}var hq;function PQe(){return hq||(hq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OQe(),r=DQe(),n=p8();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(rI)),rI}var sI,mq;function RQe(){return mq||(mq=1,sI=PQe().last),sI}var LQe=RQe();const Boe=Tl(LQe);var MQe=["valueAccessor"],UQe=["data","dataKey","clockWise","id","textBreakAll"];function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ES.apply(null,arguments)}function pq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pq(Object(r),!0).forEach(function(n){QQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QQe(e,t,r){return(t=HQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HQe(e){var t=VQe(e,"string");return typeof t=="symbol"?t:t+""}function VQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xq(e,t){if(e==null)return{};var r,n,a=zQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $Qe=e=>Array.isArray(e.value)?Boe(e.value):e.value;function vm(e){var{valueAccessor:t=$Qe}=e,r=xq(e,MQe),{data:n,dataKey:a,clockWise:s,id:o,textBreakAll:l}=r,c=xq(r,UQe);return!n||!n.length?null:N.createElement(ds,{className:"recharts-label-list"},n.map((u,d)=>{var f=Os(a)?t(u,d):Pa(u&&u.payload,a),h=Os(o)?{}:{id:"".concat(o,"-").concat(d)};return N.createElement(rc,ES({},$n(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:rc.parseViewBox(Os(s)?u:gq(gq({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}vm.displayName="LabelList";function GQe(e,t){return e?e===!0?N.createElement(vm,{key:"labelList-implicit",data:t}):N.isValidElement(e)||ML(e)?N.createElement(vm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?N.createElement(vm,ES({data:t},e,{key:"labelList-implicit"})):null:null}function qQe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=mN(n,vm).map((o,l)=>N.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=GQe(e.label,t);return[s,...a]}vm.renderCallByParent=qQe;var KQe=["points","className","baseLinePoints","connectNulls"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}function WQe(e,t){if(e==null)return{};var r,n,a=XQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function XQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vq=e=>e&&e.x===+e.x&&e.y===+e.y,YQe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{vq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),vq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},I2=(e,t)=>{var r=YQe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,o,l)=>"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},JQe=(e,t,r)=>{var n=I2(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(I2(t.reverse(),r).slice(1))},Toe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=WQe(e,KQe);if(!t||!t.length)return null;var o=fn("recharts-polygon",r);if(n&&n.length){var l=s.stroke&&s.stroke!=="none",c=JQe(t,n,a);return N.createElement("g",{className:o},N.createElement("path",wv({},$n(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?N.createElement("path",wv({},$n(s,!0),{fill:"none",d:I2(t,a)})):null,l?N.createElement("path",wv({},$n(s,!0),{fill:"none",d:I2(n,a)})):null)}var u=I2(t,a);return N.createElement("path",wv({},$n(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function NO(){return NO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NO.apply(null,arguments)}var UL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=fn("recharts-dot",a);return t===+t&&r===+r&&n===+n?N.createElement("circle",NO({},Al(e),o8(e),{className:s,cx:t,cy:r,r:n})):null},QL=e=>e.graphicalItems.polarItems,ZQe=At([ka,NN],AL),HL=At([QL,ri,ZQe],mL),eHe=At([HL],pL),VL=At([eHe,j4],gL),Ioe=At([VL,ri,HL],vL),tHe=At([VL,ri,HL],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,o=Pa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),bq=()=>{},rHe=At([ri,Lie,bq,tHe,bq,Cn,ka],yL),Foe=At([ri,Cn,VL,Ioe,yN,ka,rHe],wL),Ooe=At([Foe,ri,ap],EL),nHe=At([ri,Foe,Ooe,ka],_L),zL=(e,t,r)=>{switch(t){case"angleAxis":return A1(e,r);case"radiusAxis":return wN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},$L=(e,t,r)=>{switch(t){case"angleAxis":return bUe(e,r);case"radiusAxis":return yUe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},w1=At([zL,ap,nHe,$L],P4),Doe=At([Cn,Ioe,p1,ka],SL),N1=At([Cn,zL,ap,w1,Ooe,$L,_N,Doe,ka],qie);At([Cn,zL,w1,$L,_N,Doe,ka],Wie);var aHe=(e,t)=>N1(e,"angleAxis",t,!1),sHe=At([aHe],e=>{if(e)return e.map(t=>t.coordinate)}),iHe=(e,t)=>N1(e,"radiusAxis",t,!1),oHe=At([iHe],e=>{if(e)return e.map(t=>t.coordinate)}),lHe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function cHe(e,t){if(e==null)return{};var r,n,a=uHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dh.apply(null,arguments)}function yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yq(Object(r),!0).forEach(function(n){dHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dHe(e,t,r){return(t=fHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fHe(e){var t=AHe(e,"string");return typeof t=="symbol"?t:t+""}function AHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hHe=(e,t,r,n)=>{var a="";return n.forEach((s,o)=>{var l=Xn(t,r,e,s);o?a+="L ".concat(l.x,",").concat(l.y):a+="M ".concat(l.x,",").concat(l.y)}),a+="Z",a},mHe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:o}=e;if(!s||!s.length||!o)return null;var l=Sb({stroke:"#ccc"},Al(e));return N.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=Xn(t,r,n,c),d=Xn(t,r,a,c);return N.createElement("line",Dh({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},pHe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=Sb(Sb({stroke:"#ccc"},Al(e)),{},{fill:"none"});return N.createElement("circle",Dh({},s,{className:fn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},gHe=e=>{var{radius:t,index:r}=e,n=Sb(Sb({stroke:"#ccc"},Al(e)),{},{fill:"none"});return N.createElement("path",Dh({},n,{className:fn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:hHe(t,e.cx,e.cy,e.polarAngles)}))},xHe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:N.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?N.createElement(pHe,Dh({key:s},e,{radius:n,index:a})):N.createElement(gHe,Dh({key:s},e,{radius:n,index:a}))}))},Poe=e=>{var t,r,n,a,s,o,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=cHe(e,lHe),w=tr(h1),_=Sb({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(o=w==null?void 0:w.innerRadius)!==null&&o!==void 0?o:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:O,polarRadius:j,cx:B,cy:C,innerRadius:k,outerRadius:T}=_,L=tr(Q=>sHe(Q,f)),R=tr(Q=>oHe(Q,h)),S=Array.isArray(O)?O:L,U=Array.isArray(j)?j:R;return T<=0||S==null||U==null?null:N.createElement("g",{className:"recharts-polar-grid"},N.createElement(mHe,Dh({cx:B,cy:C,innerRadius:k,outerRadius:T,gridType:u,radialLines:d},_,{polarAngles:S,polarRadius:U})),N.createElement(xHe,Dh({cx:B,cy:C,innerRadius:k,outerRadius:T,gridType:u,radialLines:d},_,{polarAngles:S,polarRadius:U})))};Poe.displayName="PolarGrid";var iI={},oI={},wq;function vHe(){return wq||(wq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c>s&&(s=c,a=l)}return a}e.maxBy=t}(oI)),oI}var Nq;function bHe(){return Nq||(Nq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vHe(),r=d4(),n=y8();function a(s,o){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(o??r.identity))}e.maxBy=a}(iI)),iI}var lI,Eq;function yHe(){return Eq||(Eq=1,lI=bHe().maxBy),lI}var wHe=yHe();const NHe=Tl(wHe);var cI={},uI={},Cq;function EHe(){return Cq||(Cq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c<s&&(s=c,a=l)}return a}e.minBy=t}(uI)),uI}var _q;function CHe(){return _q||(_q=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EHe(),r=d4(),n=y8();function a(s,o){if(s!=null)return t.minBy(Array.from(s),n.iteratee(o??r.identity))}e.minBy=a}(cI)),cI}var dI,Sq;function _He(){return Sq||(Sq=1,dI=CHe().minBy),dI}var SHe=_He();const kHe=Tl(SHe);var jHe={radiusAxis:{},angleAxis:{}},Roe=au({name:"polarAxis",initialState:jHe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:BHe,removeRadiusAxis:THe,addAngleAxis:IHe,removeAngleAxis:FHe}=Roe.actions,OHe=Roe.reducer,DHe=["cx","cy","angle","axisLine"],PHe=["angle","tickFormatter","stroke","tick"];function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bw.apply(null,arguments)}function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(n){U4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U4(e,t,r){return(t=RHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RHe(e){var t=LHe(e,"string");return typeof t=="symbol"?t:t+""}function LHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Loe(e,t){if(e==null)return{};var r,n,a=MHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function MHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Moe="radiusAxis";function UHe(e){var t=qa();return N.useEffect(()=>(t(BHe(e)),()=>{t(THe(e))})),null}var QHe=(e,t,r,n)=>{var{coordinate:a}=e;return Xn(r,n,a,t)},HHe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},VHe=(e,t,r,n)=>{var a=NHe(n,o=>o.coordinate||0),s=kHe(n,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},zHe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,o=Loe(e,DHe),l=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=Xn(r,n,l[0],a),u=Xn(r,n,l[1],a),d=Jf(Jf(Jf({},Al(o)),{},{fill:"none"},$n(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return N.createElement("line",Bw({className:"recharts-polar-radius-axis-line"},d))},$He=(e,t,r)=>{var n;return N.isValidElement(e)?n=N.cloneElement(e,t):typeof e=="function"?n=e(t):n=N.createElement(y1,Bw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},GHe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,o=Loe(e,PHe),l=HHe(e.orientation),c=Al(o),u=$n(s,!1),d=t.map((f,h)=>{var m=QHe(f,e.angle,e.cx,e.cy),g=Jf(Jf(Jf(Jf({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},m),{},{payload:f});return N.createElement(ds,Bw({className:fn("recharts-polar-radius-axis-tick",qae(s)),key:"tick-".concat(f.coordinate)},Zg(e,f,h)),$He(s,g,n?n(f.value,h):f.value))});return N.createElement(ds,{className:"recharts-polar-radius-axis-ticks"},d)},qHe=e=>{var{radiusAxisId:t}=e,r=tr(h1),n=tr(c=>w1(c,"radiusAxis",t)),a=tr(c=>N1(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=Jf(Jf(Jf({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=s;return N.createElement(ds,{className:fn("recharts-polar-radius-axis",Moe,s.className)},l&&zHe(s,a),o&&GHe(s,a),rc.renderCallByParent(s,VHe(s.angle,s.cx,s.cy,a)))};class Q4 extends N.PureComponent{render(){return N.createElement(N.Fragment,null,N.createElement(UHe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),N.createElement(qHe,this.props))}}U4(Q4,"displayName","PolarRadiusAxis");U4(Q4,"axisType",Moe);U4(Q4,"defaultProps",ec);var KHe=["children"];function Ph(){return Ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ph.apply(null,arguments)}function jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jq(Object(r),!0).forEach(function(n){H4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H4(e,t,r){return(t=WHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WHe(e){var t=XHe(e,"string");return typeof t=="symbol"?t:t+""}function XHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YHe(e,t){if(e==null)return{};var r,n,a=JHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZHe=Math.PI/180,Bq=1e-5,Uoe="angleAxis";function eVe(e){var t=qa(),r=N.useMemo(()=>{var{children:s}=e,o=YHe(e,KHe);return o},[e]),n=tr(s=>A1(s,r.id)),a=r===n;return N.useEffect(()=>(t(IHe(r)),()=>{t(FHe(r))}),[t,r]),a?e.children:null}var tVe=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:o}=t,l=o||8,c=Xn(r,n,a,e.coordinate),u=Xn(r,n,a+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},rVe=(e,t)=>{var r=Math.cos(-e.coordinate*ZHe);return r>Bq?t==="outer"?"start":"end":r<-Bq?t==="outer"?"end":"start":"middle"},nVe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:o}=e;if(!s)return null;var l=qf(qf({},Al(e)),{},{fill:"none"},$n(s,!1));if(a==="circle")return N.createElement(UL,Ph({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var c=o.map(u=>Xn(t,r,n,u.coordinate));return N.createElement(Toe,Ph({className:"recharts-polar-angle-axis-line"},l,{points:c}))},aVe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?N.isValidElement(t)?N.cloneElement(t,r):typeof t=="function"?t(r):N.createElement(y1,Ph({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},sVe=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,o=Al(e),l=$n(t,!1),c=qf(qf({},o),{},{fill:"none"},$n(r,!1)),u=s.map((d,f)=>{var h=tVe(d,e),m=rVe(d,e.orientation),g=qf(qf(qf({},o),{},{textAnchor:m,stroke:"none",fill:a},l),{},{index:f,payload:d,x:h.x2,y:h.y2});return N.createElement(ds,Ph({className:fn("recharts-polar-angle-axis-tick",qae(t)),key:"tick-".concat(d.coordinate)},Zg(e,d,f)),r&&N.createElement("line",Ph({className:"recharts-polar-angle-axis-tick-line"},c,h)),N.createElement(aVe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return N.createElement(ds,{className:"recharts-polar-angle-axis-ticks"},u)},iVe=e=>{var{angleAxisId:t}=e,r=tr(h1),n=tr(l=>w1(l,"angleAxis",t)),a=fc(),s=tr(l=>N1(l,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var o=qf(qf(qf({},e),{},{scale:n},r),{},{radius:r.outerRadius});return N.createElement(ds,{className:fn("recharts-polar-angle-axis",Uoe,o.className)},N.createElement(nVe,Ph({},o,{ticks:s})),N.createElement(sVe,Ph({},o,{ticks:s})))};class V4 extends N.PureComponent{render(){return this.props.radius<=0?null:N.createElement(eVe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},N.createElement(iVe,this.props))}}H4(V4,"displayName","PolarAngleAxis");H4(V4,"axisType",Uoe);H4(V4,"defaultProps",Gf);function Tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Iq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tq(Object(r),!0).forEach(function(n){oVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oVe(e,t,r){return(t=lVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lVe(e){var t=cVe(e,"string");return typeof t=="symbol"?t:t+""}function cVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uVe=(e,t)=>t,GL=At([QL,uVe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),dVe=[],qL=(e,t,r)=>(r==null?void 0:r.length)===0?dVe:r,Qoe=At([j4,GL,qL],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>Iq(Iq({},t.presentationProps),s.props))),a!=null)return a}}),fVe=At([Qoe,GL,qL],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,o=Pa(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:l1(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),AVe=At([Qoe,GL,qL,Oi],(e,t,r,n)=>{if(!(t==null||e==null))return ize({offset:n,pieSettings:t,displayedData:e,cells:r})}),fI={},Fq;function hVe(){return Fq||(Fq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(fI)),fI}var AI,Oq;function mVe(){return Oq||(Oq=1,AI=hVe().isPlainObject),AI}var pVe=mVe();const gVe=Tl(pVe);function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CS.apply(null,arguments)}var Dq=(e,t,r,n,a)=>{var s=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},xVe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vVe=e=>{var t=td(e,xVe),r=N.useRef(),[n,a]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=fn("recharts-trapezoid",d);return g?N.createElement(cS,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:h,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:w,height:_,x:O,y:j}=v;return N.createElement(cS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},N.createElement("path",CS({},$n(t,!0),{className:x,d:Dq(O,j,y,w,_),ref:r})))}):N.createElement("g",null,N.createElement("path",CS({},$n(t,!0),{className:x,d:Dq(s,o,l,c,u)})))},bVe=["option","shapeType","propTransformer","activeClassName","isActive"];function yVe(e,t){if(e==null)return{};var r,n,a=wVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pq(Object(r),!0).forEach(function(n){NVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NVe(e,t,r){return(t=EVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EVe(e){var t=CVe(e,"string");return typeof t=="symbol"?t:t+""}function CVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Ve(e,t){return _S(_S({},t),e)}function SVe(e,t){return e==="symbols"}function Rq(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return N.createElement(Ase,r);case"trapezoid":return N.createElement(vVe,r);case"sector":return N.createElement(pse,r);case"symbols":if(SVe(t))return N.createElement(A8,r);break;default:return null}}function kVe(e){return N.isValidElement(e)?e.props:e}function Hoe(e){var{option:t,shapeType:r,propTransformer:n=_Ve,activeClassName:a="recharts-active-shape",isActive:s}=e,o=yVe(e,bVe),l;if(N.isValidElement(t))l=N.cloneElement(t,_S(_S({},o),kVe(t)));else if(typeof t=="function")l=t(o);else if(gVe(t)&&typeof t!="boolean"){var c=n(t,o);l=N.createElement(Rq,{shapeType:r,elementProps:c})}else{var u=o;l=N.createElement(Rq,{shapeType:r,elementProps:u})}return s?N.createElement(ds,{className:a},l):l}var KL=(e,t)=>{var r=qa();return(n,a)=>s=>{e==null||e(n,a,s),r(toe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},WL=e=>{var t=qa();return(r,n)=>a=>{e==null||e(r,n,a),t(p7e())}},XL=(e,t)=>{var r=qa();return(n,a)=>s=>{e==null||e(n,a,s),r(g7e({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function YL(e){var{fn:t,args:r}=e,n=qa(),a=fc();return N.useEffect(()=>{if(!a){var s=t(r);return n(A7e(s)),()=>{n(h7e(s))}}},[t,r,n,a]),null}var Voe=()=>{};function jVe(e){var{legendPayload:t}=e,r=qa(),n=fc();return N.useEffect(()=>n?Voe:(r(nse(t)),()=>{r(ase(t))}),[r,n,t]),null}function zoe(e){var{legendPayload:t}=e,r=qa(),n=tr(Cn);return N.useEffect(()=>n!=="centric"&&n!=="radial"?Voe:(r(nse(t)),()=>{r(ase(t))}),[r,n,t]),null}function JL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef(bw(t)),n=N.useRef(e);return n.current!==e&&(r.current=bw(t),n.current=e),r.current}var hI,BVe=()=>{var[e]=N.useState(()=>bw("uid-"));return e},TVe=(hI=Yhe.useId)!==null&&hI!==void 0?hI:BVe;function IVe(e,t){var r=TVe();return t||(e?"".concat(e,"-").concat(r):r)}var FVe=N.createContext(void 0),ZL=e=>{var{id:t,type:r,children:n}=e,a=IVe("recharts-".concat(r),t);return N.createElement(FVe.Provider,{value:a},n(a))},OVe={cartesianItems:[],polarItems:[]},$oe=au({name:"graphicalItems",initialState:OVe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=vh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=vh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=vh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:DVe,replaceCartesianGraphicalItem:PVe,removeCartesianGraphicalItem:RVe,addPolarGraphicalItem:LVe,removePolarGraphicalItem:MVe}=$oe.actions,UVe=$oe.reducer;function QVe(e){var t=qa(),r=N.useRef(null);return N.useEffect(()=>{r.current===null?t(DVe(e)):r.current!==e&&t(PVe({prev:r.current,next:e})),r.current=e},[t,e]),N.useEffect(()=>()=>{r.current&&(t(RVe(r.current)),r.current=null)},[t]),null}function Goe(e){var t=qa();return N.useEffect(()=>(t(LVe(e)),()=>{t(MVe(e))}),[t,e]),null}function HVe(){}var VVe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Lq={t:0},mI={t:1};function eM(e){var t=td(e,VVe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=fse("JavascriptAnimate",t.animationManager),[f,h]=N.useState(r?Lq:mI),m=N.useRef(null);return N.useEffect(()=>{r||h(mI)},[r]),N.useEffect(()=>{if(!r||!n)return HVe;var g=dse(Lq,mI,cse(s),a,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,o,x,a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,a,s,o,c,l,d]),u(f.t)}var zVe=["onMouseEnter","onClick","onMouseLeave"],$Ve=["id"],GVe=["id"];function tM(e,t){if(e==null)return{};var r,n,a=qVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mq(Object(r),!0).forEach(function(n){KVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KVe(e,t,r){return(t=WVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WVe(e){var t=XVe(e,"string");return typeof t=="symbol"?t:t+""}function XVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rh.apply(null,arguments)}function YVe(e){var t=N.useMemo(()=>mN(e.children,Um),[e.children]),r=tr(n=>fVe(n,e.id,t));return r==null?null:N.createElement(zoe,{legendPayload:r})}function JVe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:l1(l,t),hide:c,type:u,color:o,unit:""}}}var ZVe=(e,t)=>e>t?"start":e<t?"end":"middle",eze=(e,t,r)=>typeof t=="function"?t(e):Bl(t,r,r*.8),tze=(e,t,r)=>{var{top:n,left:a,width:s,height:o}=t,l=Gae(s,o),c=a+Bl(e.cx,s,s/2),u=n+Bl(e.cy,o,o/2),d=Bl(e.innerRadius,l,0),f=eze(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},rze=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},nze=(e,t)=>{if(N.isValidElement(e))return N.cloneElement(e,t);if(typeof e=="function")return e(t);var r=fn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return N.createElement(ise,Rh({},t,{type:"linear",className:r}))},aze=(e,t,r)=>{if(N.isValidElement(e))return N.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),N.isValidElement(n)))return n;var a=fn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return N.createElement(y1,Rh({},t,{alignmentBaseline:"middle",className:a}),n)};function sze(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!t)return null;var l=Al(r),c=$n(a,!1),u=$n(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=Xn(h.cx,h.cy,h.outerRadius+d,g),v=Bs(Bs(Bs(Bs({},l),h),{},{stroke:"none"},c),{},{index:m,textAnchor:ZVe(x.x,h.cx)},x),y=Bs(Bs(Bs(Bs({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[Xn(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return N.createElement(ds,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},s&&nze(s,y),aze(a,v,Pa(h,o)))});return N.createElement(ds,{className:"recharts-pie-labels"},f)}function qoe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,o=tr(Mm),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=tM(a,zVe),f=KL(l,a.dataKey),h=WL(u),m=XL(c,a.dataKey);return t==null?null:N.createElement(N.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?n:null,w=v?r:y,_=Bs(Bs({},g),{},{stroke:g.stroke,tabIndex:-1,[Jae]:x,[Zae]:a.dataKey});return N.createElement(ds,Rh({tabIndex:-1,className:"recharts-pie-sector"},Zg(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),N.createElement(Hoe,Rh({option:w,isActive:v,shapeType:"sector"},_)))}),N.createElement(sze,{sectors:t,props:a,showLabels:s}))}function ize(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),m=rze(l,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(B=>Pa(B,u,0)!==0).length,y=(g>=360?v:v-1)*x,w=g-v*h-y,_=n.reduce((B,C)=>{var k=Pa(C,u,0);return B+(ir(k)?k:0)},0),O;if(_>0){var j;O=n.map((B,C)=>{var k=Pa(B,u,0),T=Pa(B,d,C),L=tze(r,s,B),R=(ir(k)?k:0)/_,S,U=Bs(Bs({},B),a&&a[C]&&a[C].props);C?S=j.endAngle+to(m)*x*(k!==0?1:0):S=l;var Q=S+to(m)*((k!==0?h:0)+R*w),X=(S+Q)/2,z=(L.innerRadius+L.outerRadius)/2,W=[{name:T,value:k,payload:U,dataKey:u,type:f}],G=Xn(L.cx,L.cy,z,X);return j=Bs(Bs(Bs(Bs({},r.presentationProps),{},{percent:R,cornerRadius:o,name:T,tooltipPayload:W,midAngle:X,middleRadius:z,tooltipPosition:G},U),L),{},{value:Pa(B,u),startAngle:S,endAngle:Q,payload:U,paddingAngle:to(m)*x}),j})}return O}function oze(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=JL(t,"recharts-pie-"),m=r.current,[g,x]=N.useState(!0),v=N.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=N.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return N.createElement(eM,{begin:s,duration:o,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:h},w=>{var _=[],O=n&&n[0],j=O.startAngle;return n.forEach((B,C)=>{var k=m&&m[C],T=C>0?Lm(B,"paddingAngle",0):0;if(k){var L=bv(k.endAngle-k.startAngle,B.endAngle-B.startAngle),R=Bs(Bs({},B),{},{startAngle:j+T,endAngle:j+L(w)+T});_.push(R),j=R.endAngle}else{var{endAngle:S,startAngle:U}=B,Q=bv(0,S-U),X=Q(w),z=Bs(Bs({},B),{},{startAngle:j+T,endAngle:j+X+T});_.push(z),j=z.endAngle}}),r.current=_,N.createElement(ds,null,N.createElement(qoe,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function lze(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=N.useRef(null),o=s.current;return r&&t&&t.length&&(!o||o!==t)?N.createElement(oze,{props:e,previousSectorsRef:s}):N.createElement(qoe,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function cze(e){var{hide:t,className:r,rootTabIndex:n}=e,a=fn("recharts-pie",r);return t?null:N.createElement(ds,{tabIndex:n,className:a},N.createElement(lze,e))}var uze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!ex.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function dze(e){var{id:t}=e,r=tM(e,$Ve),n=N.useMemo(()=>mN(e.children,Um),[e.children]),a=tr(s=>AVe(s,t,n));return N.createElement(N.Fragment,null,N.createElement(YL,{fn:JVe,args:Bs(Bs({},e),{},{sectors:a})}),N.createElement(cze,Rh({},r,{sectors:a})))}function z4(e){var t=td(e,uze),{id:r}=t,n=tM(t,GVe),a=Al(n);return N.createElement(ZL,{id:r,type:"pie"},s=>N.createElement(N.Fragment,null,N.createElement(Goe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),N.createElement(YVe,Rh({},n,{id:s})),N.createElement(dze,Rh({},n,{id:s})),n.children))}z4.displayName="Pie";var fze=At([Oi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Aze=At([fze,qh,Kh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Koe=()=>tr(Aze),hze=()=>tr(n9e);function Uq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uq(Object(r),!0).forEach(function(n){mze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mze(e,t,r){return(t=pze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pze(e){var t=gze(e,"string");return typeof t=="symbol"?t:t+""}function gze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xze=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var o=Qq(Qq({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},$n(a,!1)),o8(a)),l;return N.isValidElement(a)?l=N.cloneElement(a,o):typeof a=="function"?l=a(o):l=N.createElement(UL,o),N.createElement(ds,{className:"recharts-active-dot"},l)};function vze(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=tr(Mm),o=hze();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Os(l)?null:xze({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function Hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hq(Object(r),!0).forEach(function(n){bze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bze(e,t,r){return(t=yze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yze(e){var t=wze(e,"string");return typeof t=="symbol"?t:t+""}function wze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Woe=(e,t)=>w1(e,"radiusAxis",t),Nze=At([Woe],e=>{if(e!=null)return{scale:e}}),Eze=At([wN,Woe],(e,t)=>{if(!(e==null||t==null))return SS(SS({},e),{},{scale:t})}),Cze=(e,t,r,n)=>N1(e,"radiusAxis",t,n),Xoe=(e,t,r)=>A1(e,r),Yoe=(e,t,r)=>w1(e,"angleAxis",r),_ze=At([Xoe,Yoe],(e,t)=>{if(!(e==null||t==null))return SS(SS({},e),{},{scale:t})}),Sze=(e,t,r,n)=>N1(e,"angleAxis",r,n),kze=At([Xoe,Yoe,h1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),jze=(e,t,r,n,a)=>a,Bze=At([Cn,Eze,Cze,_ze,Sze],(e,t,r,n,a)=>Zm(e,"radiusAxis")?Nw(t,r,!1):Nw(n,a,!1)),Tze=At([QL,jze],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),Ize=At([Nze,kze,j4,Tze,Bze],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(o,l+1);return Qze({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),Fze=["id"];function Oze(e,t){if(e==null)return{};var r,n,a=Dze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vq(Object(r),!0).forEach(function(n){rM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rM(e,t,r){return(t=Pze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pze(e){var t=Rze(e,"string");return typeof t=="symbol"?t:t+""}function Rze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kb(){return kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kb.apply(null,arguments)}function nM(e,t){return e&&e!=="none"?e:t}var Lze=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:nM(n,a),value:l1(r,t),payload:e}]};function Mze(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:l1(s,t),hide:o,type:l,color:nM(r,a),unit:""}}}function Uze(e,t){var r;return N.isValidElement(e)?r=N.cloneElement(e,t):typeof e=="function"?r=e(t):r=N.createElement(UL,kb({},t,{className:fn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function Qze(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:o,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,m)=>{var g=Pa(h,r.dataKey,m),x=Pa(h,a),v=r.scale(g)+d,y=Array.isArray(x)?Boe(x):x,w=Os(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(Sl(Sl({},Xn(o,l,w,v)),{},{name:g,value:x,cx:o,cy:l,radius:w,angle:v,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Os(m)?void 0:t.scale(m);f.push(Sl(Sl({},h),{},{radius:g},Xn(o,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function Hze(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,o=Oze(r,Fze),l=Al(o),c=$n(n,!0),u=t.map((d,f)=>{var h=Sl(Sl(Sl({key:"dot-".concat(f),r:3},l),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return Uze(n,h)});return N.createElement(ds,{className:"recharts-radar-dots"},u)}function Joe(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return N.isValidElement(a)?d=N.cloneElement(a,Sl(Sl({},r),{},{points:t})):typeof a=="function"?d=a(Sl(Sl({},r),{},{points:t})):d=N.createElement(Toe,kb({},$n(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?o:null,connectNulls:l})),N.createElement(ds,{className:"recharts-radar-polygon"},d,N.createElement(Hze,{props:r,points:t}),n&&vm.renderCallByParent(r,t))}function Vze(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=JL(t,"recharts-radar-"),[h,m]=N.useState(!0),g=N.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=N.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return N.createElement(eM,{begin:s,duration:o,isActive:a,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,w=v===1?n:n.map((_,O)=>{var j=d&&d[Math.floor(O*y)];if(j){var B=bv(j.x,_.x),C=bv(j.y,_.y);return Sl(Sl({},_),{},{x:B(v),y:C(v)})}var k=bv(_.cx,_.x),T=bv(_.cy,_.y);return Sl(Sl({},_),{},{x:k(v),y:T(v)})});return v>0&&(r.current=w),N.createElement(Joe,{points:w,props:t,showLabels:!h})})}function zze(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=N.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?N.createElement(Vze,{props:e,previousPointsRef:a}):N.createElement(Joe,{points:t,props:e,showLabels:!0})}var $ze={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!ex.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class Gze extends N.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=fn("recharts-radar",r);return N.createElement(N.Fragment,null,N.createElement(ds,{className:a},N.createElement(zze,this.props)),N.createElement(vze,{points:n,mainColor:nM(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function qze(e){var t=fc(),r=tr(n=>Ize(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return N.createElement(Gze,kb({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class aM extends N.PureComponent{render(){return N.createElement(ZL,{id:this.props.id,type:"radar"},t=>N.createElement(N.Fragment,null,N.createElement(Goe,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),N.createElement(zoe,{legendPayload:Lze(this.props)}),N.createElement(YL,{fn:Mze,args:this.props}),N.createElement(qze,kb({},this.props,{id:t}))))}}rM(aM,"displayName","Radar");rM(aM,"defaultProps",$ze);var Kze="Invariant failed";function Wze(e,t){throw new Error(Kze)}var Xze=["x","y"];function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EO.apply(null,arguments)}function zq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zq(Object(r),!0).forEach(function(n){Yze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yze(e,t,r){return(t=Jze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jze(e){var t=Zze(e,"string");return typeof t=="symbol"?t:t+""}function Zze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e$e(e,t){if(e==null)return{};var r,n,a=t$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function t$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function r$e(e,t){var{x:r,y:n}=e,a=e$e(e,Xze),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return wy(wy(wy(wy(wy({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Zoe(e){return N.createElement(Hoe,EO({shapeType:"rectangle",propTransformer:r$e,activeClassName:"recharts-active-bar"},e))}var n$e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ir(t))return t;var s=ir(n)||Os(n);return s?t(n,a):(s||Wze(),r)}},a$e={},ele=au({name:"errorBars",initialState:a$e,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:wpt,removeErrorBar:Npt}=ele.actions,s$e=ele.reducer,i$e=["children"];function o$e(e,t){if(e==null)return{};var r,n,a=l$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function l$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var c$e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},u$e=N.createContext(c$e);function d$e(e){var{children:t}=e,r=o$e(e,i$e);return N.createElement(u$e.Provider,{value:r},t)}function tle(e,t){var r,n,a=tr(u=>Xh(u,e)),s=tr(u=>np(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Dc.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Pc.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function f$e(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Koe(),{needClipX:s,needClipY:o,needClip:l}=tle(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=a;return N.createElement("clipPath",{id:"clipPath-".concat(n)},N.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var A$e=["onMouseEnter","onMouseLeave","onClick"],h$e=["value","background","tooltipPosition"],m$e=["id"],p$e=["onMouseEnter","onClick","onMouseLeave"];function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jb.apply(null,arguments)}function $q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$q(Object(r),!0).forEach(function(n){g$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g$e(e,t,r){return(t=x$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x$e(e){var t=v$e(e,"string");return typeof t=="symbol"?t:t+""}function v$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kS(e,t){if(e==null)return{};var r,n,a=b$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function b$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var y$e=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:l1(r,t),payload:e}]};function w$e(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:l1(s,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function N$e(e){var t=tr(Mm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=kS(s,A$e),d=KL(o,n),f=WL(l),h=XL(c,n);if(!a||r==null)return null;var m=$n(a,!1);return N.createElement(N.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:w}=g,_=kS(g,h$e);if(!y)return null;var O=d(g,x),j=f(g,x),B=h(g,x),C=tl(tl(tl(tl(tl({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),m),Zg(u,g,x)),{},{onMouseEnter:O,onMouseLeave:j,onClick:B,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return N.createElement(Zoe,jb({key:"background-bar-".concat(x)},C))}))}function rle(e){var{data:t,props:r,showLabels:n}=e,a=Al(r),{id:s}=a,o=kS(a,m$e),{shape:l,dataKey:c,activeBar:u}=r,d=tr(Mm),f=tr(hoe),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=kS(r,p$e),v=KL(h,c),y=WL(g),w=XL(m,c);return t?N.createElement(N.Fragment,null,t.map((_,O)=>{var j=u&&String(O)===d&&(f==null||c===f),B=j?u:l,C=tl(tl(tl({},o),_),{},{isActive:j,option:B,index:O,dataKey:c});return N.createElement(ds,jb({className:"recharts-bar-rectangle"},Zg(x,_,O),{onMouseEnter:v(_,O),onMouseLeave:y(_,O),onClick:w(_,O),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(O)}),N.createElement(Zoe,C))}),n&&vm.renderCallByParent(r,t)):null}function E$e(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=JL(t,"recharts-bar-"),[m,g]=N.useState(!1),x=N.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=N.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return N.createElement(eM,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,O)=>{var j=f&&f[O];if(j)return tl(tl({},_),{},{x:Mx(j.x,_.x,y),y:Mx(j.y,_.y,y),width:Mx(j.width,_.width,y),height:Mx(j.height,_.height,y)});if(a==="horizontal"){var B=Mx(0,_.height,y);return tl(tl({},_),{},{y:_.y+_.height-B,height:B})}var C=Mx(0,_.width,y);return tl(tl({},_),{},{width:C})});return y>0&&(r.current=w??null),w==null?null:N.createElement(ds,null,N.createElement(rle,{props:t,data:w,showLabels:!m}))})}function C$e(e){var{data:t,isAnimationActive:r}=e,n=N.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?N.createElement(E$e,{previousRectanglesRef:n,props:e}):N.createElement(rle,{props:e,data:t,showLabels:!0})}var nle=0,_$e=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Pa(e,t)}};class S$e extends N.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=fn("recharts-bar",a),f=u;return N.createElement(ds,{className:d,id:u},l&&N.createElement("defs",null,N.createElement(f$e,{clipPathId:f,xAxisId:s,yAxisId:o})),N.createElement(ds,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},N.createElement(N$e,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),N.createElement(C$e,this.props)),this.props.children)}}var k$e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!ex.isSsr,legendType:"rect",minPointSize:nle,xAxisId:0,yAxisId:0};function j$e(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=tle(t,r),h=F8(),m=fc(),g=mN(e.children,Um),x=tr(w=>rGe(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,N.createElement(d$e,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:_$e,errorBarOffset:v},N.createElement(S$e,jb({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function B$e(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,v=CPe({numericAxis:g});return f.map((y,w)=>{var _,O,j,B,C,k;d?_=vPe(d[w],x):(_=Pa(y,r),Array.isArray(_)||(_=[v,_]));var T=n$e(n,nle)(_[1],w);if(t==="horizontal"){var L,[R,S]=[l.scale(_[0]),l.scale(_[1])];O=h$({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),j=(L=S??R)!==null&&L!==void 0?L:void 0,B=a.size;var U=R-S;if(C=Zc(U)?0:U,k={x:O,y:h.top,width:B,height:h.height},Math.abs(T)>0&&Math.abs(C)<Math.abs(T)){var Q=to(C||T)*(Math.abs(T)-Math.abs(C));j-=Q,C+=Q}}else{var[X,z]=[o.scale(_[0]),o.scale(_[1])];if(O=X,j=h$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),B=z-X,C=a.size,k={x:h.left,y:j,width:h.width,height:C},Math.abs(T)>0&&Math.abs(B)<Math.abs(T)){var W=to(B||T)*(Math.abs(T)-Math.abs(B));B+=W}}if(O==null||j==null||B==null||C==null)return null;var G=tl(tl({},y),{},{x:O,y:j,width:B,height:C,value:d?_:_[1],payload:y,background:k,tooltipPosition:{x:O+B/2,y:j+C/2}},m&&m[w]&&m[w].props);return G}).filter(Boolean)}function Bb(e){var t=td(e,k$e),r=fc();return N.createElement(ZL,{id:t.id,type:"bar"},n=>N.createElement(N.Fragment,null,N.createElement(jVe,{legendPayload:y$e(t)}),N.createElement(YL,{fn:w$e,args:t}),N.createElement(QVe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:EPe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),N.createElement(j$e,jb({},t,{id:n}))))}Bb.displayName="Bar";function Gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gq(Object(r),!0).forEach(function(n){T$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T$e(e,t,r){return(t=I$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I$e(e){var t=F$e(e,"string");return typeof t=="symbol"?t:t+""}function F$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O$e=(e,t)=>t,D$e=(e,t,r)=>r,P$e=(e,t,r,n)=>n,R$e=(e,t,r,n,a)=>a,jN=At([hL,R$e],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),L$e=At([jN],e=>e==null?void 0:e.maxBarSize),M$e=(e,t,r,n,a,s)=>s,qq=(e,t,r)=>{var n=r??e;if(!Os(n))return Bl(n,t,0)},U$e=At([Cn,hL,O$e,D$e,P$e],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Q$e=(e,t,r,n)=>{var a=Cn(e);return a==="horizontal"?gO(e,"yAxis",r,n):gO(e,"xAxis",t,n)},H$e=(e,t,r)=>{var n=Cn(e);return n==="horizontal"?DG(e,"xAxis",t):DG(e,"yAxis",r)},V$e=(e,t,r)=>{var n={},a=e.filter(F4),s=e.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=qq(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=qq(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},z$e=At([U$e,hUe,H$e],V$e),$$e=(e,t,r,n,a)=>{var s,o,l=jN(e,t,r,n,a);if(l!=null){var c=Cn(e),u=mie(e),{maxBarSize:d}=l,f=Os(d)?u:d,h,m;return c==="horizontal"?(h=_b(e,"xAxis",t,n),m=Cb(e,"xAxis",t,n)):(h=_b(e,"yAxis",r,n),m=Cb(e,"yAxis",r,n)),(s=(o=Nw(h,m,!0))!==null&&o!==void 0?o:f)!==null&&s!==void 0?s:0}},ale=(e,t,r,n)=>{var a=Cn(e),s,o;return a==="horizontal"?(s=_b(e,"xAxis",t,n),o=Cb(e,"xAxis",t,n)):(s=_b(e,"yAxis",r,n),o=Cb(e,"yAxis",r,n)),Nw(s,o)};function G$e(e,t,r,n,a){var s=n.length;if(!(s<1)){var o=Bl(e,r,0,!0),l,c=[];if(ru(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,m={offset:h-o,size:0};l=n.reduce((y,w)=>{var _,O={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},j=[...y,O];return m=j[j.length-1].position,j},c)}else{var g=Bl(t,r,0,!0);r-2*g-(s-1)*o<=0&&(o=0);var x=(r-2*g-(s-1)*o)/s;x>1&&(x>>=0);var v=ru(a)?Math.min(x,a):x;l=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+o)*_+(x-v)/2,size:v}}],c)}return l}}var q$e=(e,t,r,n,a,s,o)=>{var l=Os(o)?t:o,c=G$e(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>_C(_C({},u),{},{position:_C(_C({},u.position),{},{offset:u.position.offset-a/2})}))),c},K$e=At([z$e,mie,AUe,pie,$$e,ale,L$e],q$e),W$e=(e,t,r,n)=>_b(e,"xAxis",t,n),X$e=(e,t,r,n)=>_b(e,"yAxis",r,n),Y$e=(e,t,r,n)=>Cb(e,"xAxis",t,n),J$e=(e,t,r,n)=>Cb(e,"yAxis",r,n),Z$e=At([K$e,jN],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),eGe=(e,t)=>{var r=dL(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},tGe=At([Q$e,jN],eGe),rGe=At([Oi,W$e,X$e,Y$e,J$e,Z$e,Cn,aL,ale,tGe,jN,M$e],(e,t,r,n,a,s,o,l,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return B$e({layout:o,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:f})}}),sle=e=>{var{chartData:t}=e,r=qa(),n=fc();return N.useEffect(()=>n?()=>{}:(r($G(t)),()=>{r($G(void 0))}),[t,r,n]),null},Kq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ile=au({name:"brush",initialState:Kq,reducers:{setBrushSettings(e,t){return t.payload==null?Kq:t.payload}}}),{setBrushSettings:Ept}=ile.actions,nGe=ile.reducer;function aGe(e,t,r){return(t=sGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sGe(e){var t=iGe(e,"string");return typeof t=="symbol"?t:t+""}function iGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sM{static create(t){return new sM(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}aGe(sM,"EPS",1e-4);function oGe(e){return(e%180+180)%180}var lGe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=oGe(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},cGe={dots:[],areas:[],lines:[]},ole=au({name:"referenceElements",initialState:cGe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=vh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=vh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=vh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Cpt,removeDot:_pt,addArea:Spt,removeArea:kpt,addLine:jpt,removeLine:Bpt}=ole.actions,uGe=ole.reducer,dGe=N.createContext(void 0),fGe=e=>{var{children:t}=e,[r]=N.useState("".concat(bw("recharts"),"-clip")),n=Koe();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return N.createElement(dGe.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:a,y:s,height:l,width:o}))),t)};function pI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function lle(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function AGe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return lGe(n,r)}function hGe(e,t,r){var n=r==="width",{x:a,y:s,width:o,height:l}=e;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function jS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function mGe(e,t){return lle(e,t+1)}function pGe(e,t,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:lle(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),w=g.coordinate,_=c===0||jS(e,w,y,d,l);_||(c=0,d=o,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wq(Object(r),!0).forEach(function(n){gGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gGe(e,t,r){return(t=xGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xGe(e){var t=vGe(e,"string");return typeof t=="symbol"?t:t+""}function vGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bGe(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,u=function(h){var m=s[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===o-1){var v=e*(m.coordinate+e*x()/2-c);s[h]=m=Ko(Ko({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[h]=m=Ko(Ko({},m),{},{tickCoord:m.coordinate});var y=jS(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+a),s[h]=Ko(Ko({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function yGe(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(s){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Ko(Ko({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=jS(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Ko(Ko({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(w){var _=o[w],O,j=()=>(O===void 0&&(O=r(_,w)),O);if(w===0){var B=e*(_.coordinate-e*j()/2-c);o[w]=_=Ko(Ko({},_),{},{tickCoord:B<0?_.coordinate-B*e:_.coordinate})}else o[w]=_=Ko(Ko({},_),{},{tickCoord:_.coordinate});var C=jS(e,_.tickCoord,j,c,u);C&&(c=_.tickCoord+e*(j()/2+a),o[w]=Ko(Ko({},_),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function iM(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ir(c)||ex.isSsr){var h;return(h=mGe(a,ir(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?T2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(_,O)=>{var j=typeof u=="function"?u(_.value,O):_.value;return g==="width"?AGe(T2(j,{fontSize:t,letterSpacing:r}),x,f):T2(j,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?to(a[1].coordinate-a[0].coordinate):1,w=hGe(s,y,g);return c==="equidistantPreserveStart"?pGe(y,w,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=yGe(y,w,v,a,o,c==="preserveStartEnd"):m=bGe(y,w,v,a,o),m.filter(_=>_.isShow))}var wGe=["viewBox"],NGe=["viewBox"];function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(null,arguments)}function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(n){oM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yq(e,t){if(e==null)return{};var r,n,a=EGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oM(e,t,r){return(t=CGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CGe(e){var t=_Ge(e,"string");return typeof t=="symbol"?t:t+""}function _Ge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sp extends N.Component{constructor(t){super(t),this.tickRefs=N.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=Yq(t,wGe),s=this.props,{viewBox:o}=s,l=Yq(s,NGe);return!pI(n,o)||!pI(a,l)||!pI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,g,x,v=c?-1:1,y=t.tickSize||l,w=ir(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=n+ +!c*s,h=m-v*y,x=h-v*u,g=w;break;case"left":h=m=t.coordinate,f=r+ +!c*a,d=f-v*y,g=d-v*u,x=w;break;case"right":h=m=t.coordinate,f=r+ +c*a,d=f+v*y,g=d+v*u,x=w;break;default:d=f=t.coordinate,m=n+ +c*s,h=m+v*y,x=h+v*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l}=this.props,c=ki(ki(ki({},$n(this.props,!1)),$n(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=ki(ki({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=ki(ki({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return N.createElement("line",Nv({},c,{className:fn("recharts-cartesian-axis-line",Lm(l,"className"))}))}static renderTickItem(t,r,n){var a,s=fn(r.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(t))a=N.cloneElement(t,ki(ki({},r),{},{className:s}));else if(typeof t=="function")a=t(ki(ki({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fn(o,t.className)),a=N.createElement(y1,Nv({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=iM(ki(ki({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=Al(this.props),g=$n(o,!1),x=ki(ki({},m),{},{fill:"none"},$n(a,!1)),v=d.map((y,w)=>{var{line:_,tick:O}=this.getTickLineCoord(y),j=ki(ki(ki(ki({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:s},g),O),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return N.createElement(ds,Nv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Zg(this.props,y,w)),a&&N.createElement("line",Nv({},x,_,{className:fn("recharts-cartesian-axis-tick-line",Lm(a,"className"))})),o&&sp.renderTickItem(o,j,"".concat(typeof l=="function"?l(y.value,w):y.value).concat(c||"")))});return v.length>0?N.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:N.createElement(ds,{className:fn("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),rc.renderCallByParent(this.props))}}oM(sp,"displayName","CartesianAxis");oM(sp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var SGe=["x1","y1","x2","y2","key"],kGe=["offset"],jGe=["xAxisId","yAxisId"],BGe=["xAxisId","yAxisId"];function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(n){TGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TGe(e,t,r){return(t=IGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IGe(e){var t=FGe(e,"string");return typeof t=="symbol"?t:t+""}function FGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yp.apply(null,arguments)}function BS(e,t){if(e==null)return{};var r,n,a=OGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DGe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=e;return N.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function cle(e,t){var r;if(N.isValidElement(e))r=N.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:o,key:l}=t,c=BS(t,SGe),u=Al(c),{offset:d}=u,f=BS(u,kGe);r=N.createElement("line",Yp({},f,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function PGe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=BS(e,jGe),c=a.map((u,d)=>{var f=rl(rl({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return cle(n,f)});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function RGe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=BS(e,BGe),c=a.map((u,d)=>{var f=rl(rl({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return cle(n,f)});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function LGe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return N.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function MGe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return N.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var UGe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Wae(iM(rl(rl(rl({},sp.defaultProps),r),{},{ticks:Xae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},QGe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Wae(iM(rl(rl(rl({},sp.defaultProps),r),{},{ticks:Xae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},HGe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Tw(e){var t=T8(),r=I8(),n=tse(),a=rl(rl({},td(e,HGe)),{},{x:ir(e.x)?e.x:n.left,y:ir(e.y)?e.y:n.top,width:ir(e.width)?e.width:n.width,height:ir(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=fc(),x=tr(T=>PG(T,"xAxis",s,g)),v=tr(T=>PG(T,"yAxis",o,g));if(!ir(u)||u<=0||!ir(d)||d<=0||!ir(l)||l!==+l||!ir(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||UGe,w=a.horizontalCoordinatesGenerator||QGe,{horizontalPoints:_,verticalPoints:O}=a;if((!_||!_.length)&&typeof w=="function"){var j=h&&h.length,B=w({yAxis:v?rl(rl({},v),{},{ticks:j?h:v.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);B2(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(_=B)}if((!O||!O.length)&&typeof y=="function"){var C=m&&m.length,k=y({xAxis:x?rl(rl({},x),{},{ticks:C?m:x.ticks}):void 0,width:t,height:r,offset:n},C?!0:f);B2(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(O=k)}return N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(DGe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),N.createElement(LGe,Yp({},a,{horizontalPoints:_})),N.createElement(MGe,Yp({},a,{verticalPoints:O})),N.createElement(PGe,Yp({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:v})),N.createElement(RGe,Yp({},a,{offset:n,verticalPoints:O,xAxis:x,yAxis:v})))}Tw.displayName="CartesianGrid";function Zq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zq(Object(r),!0).forEach(function(n){VGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VGe(e,t,r){return(t=zGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zGe(e){var t=$Ge(e,"string");return typeof t=="symbol"?t:t+""}function $Ge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GGe={xAxis:{},yAxis:{},zAxis:{}},ule=au({name:"cartesianAxis",initialState:GGe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=eK(eK({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:qGe,removeXAxis:KGe,addYAxis:WGe,removeYAxis:XGe,addZAxis:Tpt,removeZAxis:Ipt,updateYAxisWidth:YGe}=ule.actions,JGe=ule.reducer,ZGe=["children"],eqe=["dangerouslySetInnerHTML","ticks"];function dle(e,t,r){return(t=tqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tqe(e){var t=rqe(e,"string");return typeof t=="symbol"?t:t+""}function rqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CO(){return CO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CO.apply(null,arguments)}function fle(e,t){if(e==null)return{};var r,n,a=nqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function aqe(e){var t=qa(),r=N.useMemo(()=>{var{children:s}=e,o=fle(e,ZGe);return o},[e]),n=tr(s=>Xh(s,r.id)),a=r===n;return N.useEffect(()=>(t(qGe(r)),()=>{t(KGe(r))}),[r,t]),a?e.children:null}var sqe=e=>{var{xAxisId:t,className:r}=e,n=tr(ese),a=fc(),s="xAxis",o=tr(m=>x1(m,s,t,a)),l=tr(m=>Kie(m,s,t,a)),c=tr(m=>zie(m,t)),u=tr(m=>i7e(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=fle(e,eqe);return N.createElement(sp,CO({},h,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:fn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},iqe=e=>{var t,r,n,a,s;return N.createElement(aqe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},N.createElement(sqe,e))};class Dg extends N.Component{render(){return N.createElement(iqe,this.props)}}dle(Dg,"displayName","XAxis");dle(Dg,"defaultProps",{allowDataOverflow:Dc.allowDataOverflow,allowDecimals:Dc.allowDecimals,allowDuplicatedCategory:Dc.allowDuplicatedCategory,height:Dc.height,hide:!1,mirror:Dc.mirror,orientation:Dc.orientation,padding:Dc.padding,reversed:Dc.reversed,scale:Dc.scale,tickCount:Dc.tickCount,type:Dc.type,xAxisId:0});var oqe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},lqe=["dangerouslySetInnerHTML","ticks"];function Ale(e,t,r){return(t=cqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cqe(e){var t=uqe(e,"string");return typeof t=="symbol"?t:t+""}function uqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _O(){return _O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_O.apply(null,arguments)}function dqe(e,t){if(e==null)return{};var r,n,a=fqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Aqe(e){var t=qa();return N.useEffect(()=>(t(WGe(e)),()=>{t(XGe(e))}),[e,t]),null}var hqe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,o=N.useRef(null),l=N.useRef(null),c=tr(ese),u=fc(),d=qa(),f="yAxis",h=tr(_=>x1(_,f,r,u)),m=tr(_=>$ie(_,r)),g=tr(_=>o7e(_,r)),x=tr(_=>Kie(_,f,r,u));if(N.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!m||ML(s)||N.isValidElement(s))){var O=o.current,j=O==null||(_=O.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:B,tickMargin:C}=O.props,k=oqe({ticks:j,label:l.current,labelGapWithTick:5,tickSize:B,tickMargin:C});Math.round(m.width)!==Math.round(k)&&d(YGe({id:r,width:k}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,w=dqe(e,lqe);return N.createElement(sp,_O({},w,{ref:o,labelRef:l,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:fn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},mqe=e=>{var t,r,n,a,s;return N.createElement(N.Fragment,null,N.createElement(Aqe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),N.createElement(hqe,e))},pqe={allowDataOverflow:Pc.allowDataOverflow,allowDecimals:Pc.allowDecimals,allowDuplicatedCategory:Pc.allowDuplicatedCategory,hide:!1,mirror:Pc.mirror,orientation:Pc.orientation,padding:Pc.padding,reversed:Pc.reversed,scale:Pc.scale,tickCount:Pc.tickCount,type:Pc.type,width:Pc.width,yAxisId:0};class Pg extends N.Component{render(){return N.createElement(mqe,this.props)}}Ale(Pg,"displayName","YAxis");Ale(Pg,"defaultProps",pqe);var gI={exports:{}},xI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tK;function gqe(){if(tK)return xI;tK=1;var e=Qb();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return xI.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(j){if(!y){if(y=!0,w=j,j=f(j),h!==void 0&&g.hasValue){var B=g.value;if(h(B,j))return _=B}return _=j}if(B=_,r(w,j))return B;var C=f(j);return h!==void 0&&h(B,C)?(w=j,B):(w=j,_=C)}var y=!1,w,_,O=d===void 0?null:d;return[function(){return v(u())},O===null?void 0:function(){return v(O())}]},[u,d,f,h]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},xI}var rK;function xqe(){return rK||(rK=1,gI.exports=gqe()),gI.exports}xqe();function vqe(e){e()}function bqe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){vqe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var nK={notify(){},get:()=>[]};function yqe(e,t){let r,n=nK,a=0,s=!1;function o(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=bqe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=nK)}function h(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var wqe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nqe=wqe(),Eqe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Cqe=Eqe(),_qe=()=>Nqe||Cqe?N.useLayoutEffect:N.useEffect,Sqe=_qe(),vI=Symbol.for("react-redux-context"),bI=typeof globalThis<"u"?globalThis:{};function kqe(){if(!N.createContext)return{};const e=bI[vI]??(bI[vI]=new Map);let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var jqe=kqe();function Bqe(e){const{children:t,context:r,serverState:n,store:a}=e,s=N.useMemo(()=>{const c=yqe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=N.useMemo(()=>a.getState(),[a]);Sqe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||jqe;return N.createElement(l.Provider,{value:s},t)}var Tqe=Bqe,Iqe=(e,t)=>t,lM=At([Iqe,Cn,h1,Pi,uoe,Yh,u9e,Oi],m9e),cM=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},hle=Ju("mouseClick"),mle=pN();mle.startListening({actionCreator:hle,effect:(e,t)=>{var r=e.payload,n=lM(t.getState(),cM(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(x7e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var SO=Ju("mouseMove"),ple=pN();ple.startListening({actionCreator:SO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=jL(n,n.tooltip.settings.shared),s=lM(n,cM(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(noe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(roe()))}});function Fqe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var aK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},gle=au({name:"rootProps",initialState:aK,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:aK.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Oqe=gle.reducer,{updateOptions:Dqe}=gle.actions,xle=au({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Pqe}=xle.actions,Rqe=xle.reducer,vle=Ju("keyDown"),ble=Ju("focus"),uM=pN();uM.startListening({actionCreator:vle,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(BL(a,b1(r))),l=Yh(r);if(s==="Enter"){var c=NS(r,"axis","hover",String(a.index));t.dispatch(vO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=c7e(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=o+f*d;if(!(l==null||h>=l.length||h<0)){var m=NS(r,"axis","hover",String(h));t.dispatch(vO({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});uM.startListening({actionCreator:ble,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=NS(r,"axis","hover",String(s));t.dispatch(vO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Pu=Ju("externalEvent"),yle=pN();yle.startListening({actionCreator:Pu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:e9e(r),activeDataKey:hoe(r),activeIndex:Mm(r),activeLabel:Aoe(r),activeTooltipIndex:Mm(r),isTooltipActive:t9e(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Lqe=At([v1],e=>e.tooltipItemPayloads),Mqe=At([Lqe,SN,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=t(s,r);return o}}}),wle=Ju("touchMove"),Nle=pN();Nle.startListening({actionCreator:wle,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=jL(n,n.tooltip.settings.shared);if(a==="axis"){var s=lM(n,cM({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(noe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Jae),d=(o=c.getAttribute(Zae))!==null&&o!==void 0?o:void 0,f=Mqe(t.getState(),u,d);t.dispatch(toe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var Uqe=Nae({brush:nGe,cartesianAxis:JGe,chartData:T9e,errorBars:s$e,graphicalItems:UVe,layout:nPe,legend:zPe,options:_9e,polarAxis:OHe,polarOptions:Rqe,referenceElements:uGe,rootProps:Oqe,tooltip:v7e}),Qqe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return kDe({reducer:Uqe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([mle.middleware,ple.middleware,uM.middleware,yle.middleware,Nle.middleware]),devTools:{serialize:{replacer:Fqe},name:"recharts-".concat(r)}})};function Ele(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=fc(),s=N.useRef(null);if(a)return r;s.current==null&&(s.current=Qqe(t,n));var o=w8;return N.createElement(Tqe,{context:o,store:s.current},r)}function Cle(e){var{layout:t,width:r,height:n,margin:a}=e,s=qa(),o=fc();return N.useEffect(()=>{o||(s(ePe(t)),s(tPe({width:r,height:n})),s(ZDe(a)))},[s,o,t,r,n,a]),null}function _le(e){var t=qa();return N.useEffect(()=>{t(Dqe(e))},[t,e]),null}var Hqe=["children"];function Vqe(e,t){if(e==null)return{};var r,n,a=zqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TS.apply(null,arguments)}var $qe={width:"100%",height:"100%"},Gqe=N.forwardRef((e,t)=>{var r=T8(),n=I8(),a=sse();if(!bb(r)||!bb(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,N.createElement(l8,TS({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:$qe,ref:t}),s)}),qqe=e=>{var{children:t}=e,r=tr(y4);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return N.createElement(l8,{width:n,height:a,x:o,y:s},t)},sK=N.forwardRef((e,t)=>{var{children:r}=e,n=Vqe(e,Hqe),a=fc();return a?N.createElement(qqe,null,r):N.createElement(Gqe,TS({ref:t},n),r)});function Kqe(){var e=qa(),[t,r]=N.useState(null),n=tr(IPe);return N.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;ru(s)&&s!==n&&e(rPe(s))}},[t,e,n]),r}function iK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iK(Object(r),!0).forEach(function(n){Xqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xqe(e,t,r){return(t=Yqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yqe(e){var t=Jqe(e,"string");return typeof t=="symbol"?t:t+""}function Jqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zqe=N.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,w=qa(),[_,O]=N.useState(null),[j,B]=N.useState(null);O9e();var C=Kqe(),k=N.useCallback(F=>{C(F),typeof t=="function"&&t(F),O(F),B(F)},[C,t,O,B]),T=N.useCallback(F=>{w(hle(F)),w(Pu({handler:s,reactEvent:F}))},[w,s]),L=N.useCallback(F=>{w(SO(F)),w(Pu({handler:u,reactEvent:F}))},[w,u]),R=N.useCallback(F=>{w(roe()),w(Pu({handler:d,reactEvent:F}))},[w,d]),S=N.useCallback(F=>{w(SO(F)),w(Pu({handler:f,reactEvent:F}))},[w,f]),U=N.useCallback(()=>{w(ble())},[w]),Q=N.useCallback(F=>{w(vle(F.key))},[w]),X=N.useCallback(F=>{w(Pu({handler:o,reactEvent:F}))},[w,o]),z=N.useCallback(F=>{w(Pu({handler:l,reactEvent:F}))},[w,l]),W=N.useCallback(F=>{w(Pu({handler:c,reactEvent:F}))},[w,c]),G=N.useCallback(F=>{w(Pu({handler:h,reactEvent:F}))},[w,h]),Y=N.useCallback(F=>{w(Pu({handler:x,reactEvent:F}))},[w,x]),K=N.useCallback(F=>{w(wle(F)),w(Pu({handler:g,reactEvent:F}))},[w,g]),H=N.useCallback(F=>{w(Pu({handler:m,reactEvent:F}))},[w,m]);return N.createElement(boe.Provider,{value:_},N.createElement(Gne.Provider,{value:j},N.createElement("div",{className:fn("recharts-wrapper",n),style:Wqe({position:"relative",cursor:"default",width:y,height:a},v),onClick:T,onContextMenu:X,onDoubleClick:z,onFocus:U,onKeyDown:Q,onMouseDown:W,onMouseEnter:L,onMouseLeave:R,onMouseMove:S,onMouseUp:G,onTouchEnd:H,onTouchMove:K,onTouchStart:Y,ref:k},r)))}),eKe=["children","className","width","height","style","compact","title","desc"];function tKe(e,t){if(e==null)return{};var r,n,a=rKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Sle=N.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:o,compact:l,title:c,desc:u}=e,d=tKe(e,eKe),f=Al(d);return l?N.createElement(sK,{otherAttributes:f,title:c,desc:u},r):N.createElement(Zqe,{className:n,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(sK,{otherAttributes:f,title:c,desc:u,ref:t},N.createElement(fGe,null,r)))}),nKe=["width","height"];function kO(){return kO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kO.apply(null,arguments)}function aKe(e,t){if(e==null)return{};var r,n,a=sKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iKe={top:5,right:5,bottom:5,left:5},oKe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:iKe,reverseStackOrder:!1,syncMethod:"index"},lKe=N.forwardRef(function(t,r){var n,a=td(t.categoricalChartProps,oKe),{width:s,height:o}=a,l=aKe(a,nKe);if(!bb(s)||!bb(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return N.createElement(Ele,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},N.createElement(sle,{chartData:h.data}),N.createElement(Cle,{width:s,height:o,layout:a.layout,margin:a.margin}),N.createElement(_le,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),N.createElement(Sle,kO({},l,{width:s,height:o,ref:r})))}),cKe=["axis","item"],Iw=N.forwardRef((e,t)=>N.createElement(lKe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cKe,tooltipPayloadSearcher:LL,categoricalChartProps:e,ref:t}));function uKe(e){var t=qa();return N.useEffect(()=>{t(Pqe(e))},[t,e]),null}var dKe=["width","height","layout"];function jO(){return jO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jO.apply(null,arguments)}function fKe(e,t){if(e==null)return{};var r,n,a=AKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hKe={top:5,right:5,bottom:5,left:5},mKe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:hKe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},kle=N.forwardRef(function(t,r){var n,a=td(t.categoricalChartProps,mKe),{width:s,height:o,layout:l}=a,c=fKe(a,dKe);if(!bb(s)||!bb(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return N.createElement(Ele,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},N.createElement(sle,{chartData:a.data}),N.createElement(Cle,{width:s,height:o,layout:l,margin:a.margin}),N.createElement(_le,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),N.createElement(uKe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),N.createElement(Sle,jO({width:s,height:o},c,{ref:r})))}),pKe=["item"],gKe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},dM=N.forwardRef((e,t)=>{var r=td(e,gKe);return N.createElement(kle,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:pKe,tooltipPayloadSearcher:LL,categoricalChartProps:r,ref:t})}),xKe=["axis"],vKe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},bKe=N.forwardRef((e,t)=>{var r=td(e,vKe);return N.createElement(kle,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xKe,tooltipPayloadSearcher:LL,categoricalChartProps:r,ref:t})});const R0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],oK={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},Ny="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",po="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Tc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",yI="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",wI="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",NI="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",SC="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",yKe="from-sky-500 to-indigo-500",wKe="from-emerald-500 to-lime-500",NKe="from-amber-500 to-rose-500",EKe="from-fuchsia-500 to-purple-600",EI={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Wu,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:Ete,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:Ha,dot:"bg-emerald-500"}},CKe=e=>{const t=EI[e].icon;return i.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${EI[e].badge}`,children:[i.jsx("span",{className:`h-2 w-2 rounded-full ${EI[e].dot}`}),i.jsx(t,{className:"h-4 w-4"})," ",e]})},_Ke=()=>{var Y,K;const[e,t]=N.useState("registro"),[r,n]=N.useState([]),[a,s]=N.useState(oK),[o,l]=N.useState(null),[c,u]=N.useState(null),[d,f]=N.useState(!1),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState(""),[w,_]=N.useState(""),O=N.useMemo(()=>rh[a.dimension]??[],[a.dimension]),j=N.useCallback(async()=>{f(!0);try{const H=await Z6e();n(H)}catch(H){console.error(H),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);N.useEffect(()=>{j()},[j]);const B=H=>{const{name:F,value:D}=H.target;s(q=>({...q,[F]:D}))},C=H=>{const F=H.split(",").map(D=>D.trim()).filter(Boolean);s(D=>({...D,indicadores:F}))},k=H=>{const F=H.split(",").map(D=>D.trim()).filter(Boolean);s(D=>({...D,enlaces:F}))},T=()=>{s(oK),l(null),u(null)},L=async H=>{if(H.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{o?await tFe(o,a):await eFe(a),await j(),T(),t("seguimiento")}catch(F){console.error(F),u("Error al guardar la acción.")}},R=H=>{l(H.id),s({...H,enlaces:H.enlaces??[],indicadores:H.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},S=async H=>{confirm("¿Eliminar esta acción?")&&(await rFe(H),await j())},U=N.useMemo(()=>r.filter(H=>{const F=!h||H.responsable.toLowerCase().includes(h.toLowerCase())||H.descripcion.toLowerCase().includes(h.toLowerCase())||H.subdimension.toLowerCase().includes(h.toLowerCase()),D=!g||H.dimension===g,q=!v||H.subdimension===v,J=!w||H.estado===w;return F&&D&&q&&J}),[r,h,g,v,w]),Q=N.useMemo(()=>{const H=new Map;return r.forEach(F=>H.set(F.dimension,(H.get(F.dimension)??0)+1)),Array.from(H.entries()).map(([F,D])=>({name:F,value:D}))},[r]),X=N.useMemo(()=>{const H=new Map;return r.forEach(F=>H.set(F.estado,(H.get(F.estado)??0)+1)),Array.from(H.entries()).map(([F,D])=>({name:F,value:D}))},[r]),z=N.useMemo(()=>{const H=r.map(F=>F.avance??0);return H.length?Math.round(H.reduce((F,D)=>F+D,0)/H.length):0},[r]),W=N.useMemo(()=>{const H=new Map;return r.forEach(F=>H.set(F.subdimension,(H.get(F.subdimension)??0)+1)),Array.from(H.entries()).map(([F,D])=>({name:F,value:D})).sort((F,D)=>D.value-F.value).slice(0,6)},[r]),G=()=>{const H=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],F=r.map(ne=>[ne.id,ne.fechaRegistro,ne.responsable,ne.dimension,ne.subdimension,ne.descripcion.replace(/\n/g," "),ne.objetivos??"",(ne.indicadores??[]).join("|"),ne.cobertura??"",ne.fechaInicio??"",ne.fechaCumplimiento,ne.estado,ne.avance??0,(ne.enlaces??[]).join("|")]),D=[H.join(","),...F.map(ne=>ne.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),q=new Blob([D],{type:"text/csv;charset=utf-8"}),J=URL.createObjectURL(q),te=document.createElement("a");te.href=J,te.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,te.click(),URL.revokeObjectURL(J)};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),i.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx(ng,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(bNe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[i.jsx(wF,{className:"h-4 w-4"})," Refrescar"]}),i.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[i.jsx(jh,{className:"h-4 w-4"})," CSV"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>t("registro"),className:`${yI} ${e==="registro"?wI:NI}`,children:[i.jsx(Ng,{className:"h-4 w-4"})," Registro"]}),i.jsxs("button",{onClick:()=>t("seguimiento"),className:`${yI} ${e==="seguimiento"?wI:NI}`,children:[i.jsx(Rv,{className:"h-4 w-4"})," Seguimiento"]}),i.jsxs("button",{onClick:()=>t("dashboard"),className:`${yI} ${e==="dashboard"?wI:NI}`,children:[i.jsx(iwe,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&i.jsx("div",{className:Ny,children:i.jsxs("form",{onSubmit:L,className:"p-6 md:p-8 space-y-6",children:[c&&i.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[i.jsx(Wu,{className:"h-5 w-5"}),i.jsx("span",{children:c})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Fecha de Registro"}),i.jsxs("div",{className:"relative",children:[i.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),i.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:B,className:po+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Responsable"}),i.jsxs("div",{className:"relative",children:[i.jsx(sw,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),i.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:B,className:po+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Cobertura (niveles/cursos)"}),i.jsxs("div",{className:"relative",children:[i.jsx(fb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),i.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:B,className:po+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Dimensión PME"}),i.jsxs("div",{className:"relative",children:[i.jsx(rNe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsxs("select",{name:"dimension",value:a.dimension,onChange:B,className:po+" pl-10",children:[i.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(rh).map(H=>i.jsx("option",{value:H,children:H},H))]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Tc,children:"Subdimensión"}),i.jsxs("div",{className:"relative",children:[i.jsx(Xk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),i.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:B,className:po+" pl-10",disabled:!a.dimension,children:[i.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),O.map(H=>i.jsx("option",{value:H,children:H},H))]})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Tc,children:"Descripción de la Acción"}),i.jsxs("div",{className:"relative",children:[i.jsx(zd,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),i.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:B,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:po+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Tc,children:"Objetivos (opcional)"}),i.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:B,rows:2,placeholder:"Propósitos pedagógicos",className:po})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Indicadores (separados por coma)"}),i.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:H=>C(H.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:po})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Fecha de Inicio"}),i.jsxs("div",{className:"relative",children:[i.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),i.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:B,className:po+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Fecha de Cumplimiento"}),i.jsxs("div",{className:"relative",children:[i.jsx(oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:B,className:po+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Estado"}),i.jsx("select",{name:"estado",value:a.estado,onChange:B,className:po,children:bH.map(H=>i.jsx("option",{value:H,children:H},H))})]}),i.jsxs("div",{children:[i.jsx("label",{className:Tc,children:"Avance (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx(k_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:B,className:po+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Tc,children:"Enlaces de evidencia (separados por coma)"}),i.jsxs("div",{className:"relative",children:[i.jsx(kH,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:H=>k(H.target.value),placeholder:"https://..., https://...",className:po+" pl-10"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&i.jsx("button",{type:"button",onClick:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?i.jsx(Yc,{className:"h-4 w-4"}):i.jsx(So,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&i.jsx("div",{className:Ny,children:i.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"relative md:col-span-2",children:[i.jsx(t1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),i.jsx("input",{className:po+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:H=>m(H.target.value)})]}),i.jsxs("select",{value:g,onChange:H=>{x(H.target.value),y("")},className:po,children:[i.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(rh).map(H=>i.jsx("option",{value:H,children:H},H))]}),i.jsxs("select",{value:v,onChange:H=>y(H.target.value),className:po,children:[i.jsx("option",{value:"",children:"Todas las subdimensiones"}),(rh[g]??Object.values(rh).flat()).map(H=>i.jsx("option",{value:H,children:H},H))]}),i.jsxs("select",{value:w,onChange:H=>_(H.target.value),className:po,children:[i.jsx("option",{value:"",children:"Todos los estados"}),bH.map(H=>i.jsx("option",{value:H,children:H},H))]})]}),i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[U.map(H=>{var F,D;return i.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[i.jsx("td",{className:"px-4 py-4 align-top text-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((D=(F=H.responsable)==null?void 0:F.slice(0,1))==null?void 0:D.toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:H.responsable}),i.jsx("div",{className:"text-xs text-slate-500",children:H.cobertura})]})]})}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[i.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:H.dimension}),i.jsx("div",{className:"text-xs text-slate-500",children:H.subdimension})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[i.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:H.descripcion}),H.enlaces&&H.enlaces.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:H.enlaces.map((q,J)=>i.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[i.jsx(kH,{className:"h-3.5 w-3.5"})," Evidencia ",J+1]},J))})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",H.fechaRegistro||"-"]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",H.fechaInicio||"-"]}),i.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",H.fechaCumplimiento]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:CKe(H.estado)}),i.jsxs("td",{className:"px-4 py-4 align-top",children:[i.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(H.avance??0,0),100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1",children:[H.avance??0,"%"]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("button",{onClick:()=>R(H),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:i.jsx(hR,{className:"h-5 w-5 text-amber-600"})}),i.jsx("button",{onClick:()=>S(H.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:i.jsx(Va,{className:"h-5 w-5 text-rose-600"})})]})})]},H.id)}),U.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:`${SC} ${yKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(qc,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),i.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),i.jsx("div",{className:`${SC} ${wKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Ha,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),i.jsx("div",{className:"text-2xl font-black",children:((Y=X.find(H=>H.name==="Cumplida"))==null?void 0:Y.value)??0})]})]})}),i.jsx("div",{className:`${SC} ${NKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Ete,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),i.jsx("div",{className:"text-2xl font-black",children:((K=X.find(H=>H.name==="En Proceso"))==null?void 0:K.value)??0})]})]})}),i.jsx("div",{className:`${SC} ${EKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(k_,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),i.jsxs("div",{className:"text-2xl font-black",children:[z,"%"]})]})]})})]}),i.jsxs("div",{className:Ny+" p-5",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),i.jsx("div",{className:"h-64",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(Iw,{data:Q,children:[i.jsx(Tw,{strokeDasharray:"3 3"}),i.jsx(Dg,{dataKey:"name",hide:!0}),i.jsx(Pg,{allowDecimals:!1}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"value",children:Q.map((H,F)=>i.jsx(Um,{fill:R0[F%R0.length]},F))})]})})}),i.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:Q.map((H,F)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:R0[F%R0.length]}}),i.jsx("span",{className:"flex-1",children:H.name}),i.jsx("span",{className:"font-semibold",children:H.value})]},F))})]}),i.jsxs("div",{className:Ny+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),i.jsx("div",{className:"h-64",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(dM,{children:[i.jsx(z4,{data:X,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:X.map((H,F)=>i.jsx(Um,{fill:R0[F%R0.length]},F))}),i.jsx(c1,{}),i.jsx(uh,{})]})})})]}),i.jsxs("div",{className:Ny+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),i.jsxs("ul",{className:"space-y-2",children:[W.map((H,F)=>i.jsxs("li",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:R0[F%R0.length]}}),H.name]}),i.jsx("span",{className:"font-semibold",children:H.value})]},F)),W.length===0&&i.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},SKe="modulepreload",kKe=function(e){return"/"+e},lK={},Ti=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(u=>{if(u=kKe(u),u in lK)return;lK[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":SKe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},$4="presentacionesDidacticas",jKe=async(e,t)=>{const r=Yt(mt(pr,$4)),n={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await yi(r,n),r.id},cK=async(e,t)=>{const r=Yt(pr,$4,e);await dl(r,t)},BKe=async e=>{await wa(Yt(pr,$4,e))},TKe=(e,t)=>{const r=Lt(mt(pr,$4),dr("userId","==",e),Jt("fechaCreacion","desc"));return lr(r,n=>{const a=n.docs.map(s=>s.data());t(a)})},IKe=async e=>{let t=null;try{const r=ao.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesión para generar presentaciones.");console.log("Estado de autenticación:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const n=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",n.length);const a=Td(oR,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await jKe({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentación guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const o=await a(s);console.log("Respuesta de función:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versión de demostración. La presentación no existe realmente."),await cK(t,c)}catch(c){console.warn("Error al actualizar la presentación en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentación:",r),console.error("Código:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await cK(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentación"}),console.warn(`Presentación ${t} marcada como fallida`)}catch(n){console.error("Error al actualizar el estado de la presentación:",n)}throw r}},CI=async()=>{var t,r,n,a;const e=ao.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesión para verificar la autorización.");try{const s=await e.getIdToken(),o=await fetch("https://us-central1-plania-clase.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorización desconocido"}}catch(s){if(console.error("Error al verificar autorización de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(n=s.message)!=null&&n.includes("CORS")||(a=s.message)!=null&&a.includes("fetch")){console.warn("Error de red detectado, usando método alternativo para verificar autorización");try{const o=Lt(mt(pr,"userTokens"),dr("userId","==",e.uid)),l=await Mr(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificación directa)":"Usuario autorizado para Google Slides (verificación directa)"}}catch(o){return console.error("Error en verificación alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorización"}}}return{isAuthorized:!1,message:`Error al verificar autorización: ${s.message||"Error desconocido"}`}}},FKe=()=>{const[e,t]=N.useState(!1),[r,n]=N.useState(null),a=async()=>{t(!0);try{const o=await Td(oR,"testGemini")();n(o.data)}catch(s){console.error("Error calling testGemini:",s),n({success:!1,error:s.message||"Error desconocido",type:"client_error"})}t(!1)};return i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🧪 Prueba de Gemini AI"}),i.jsx("button",{onClick:a,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&i.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),i.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?i.jsx("div",{className:"mt-2 text-green-600",children:"✅ Gemini AI está funcionando correctamente"}):i.jsxs("div",{className:"mt-2 text-red-600",children:["❌ Problema detectado: ",r.error]})]})]})},OKe=({estilo:e,tema:t="Ejemplo de Presentación"})=>{const n=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🎨",descripcion:"Dinámico y colorido, con énfasis en elementos gráficos e infografías",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones gráficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"📚",descripcion:"Formal y riguroso, con énfasis en conceptos teóricos",ejemplo:["Estructura académica formal","Referencias y citas bibliográficas","Énfasis en conceptos teóricos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🤝",descripcion:"Participativo y colaborativo, con múltiples actividades",ejemplo:["Preguntas y actividades prácticas","Espacios para participación","Dinámicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💼",descripcion:"Corporativo y práctico, enfocado en aplicaciones reales",ejemplo:["Diseño corporativo y estructurado","Casos de estudio prácticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💡",descripcion:"Innovador y atractivo, estimula la imaginación",ejemplo:["Diseño creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"⚪",descripcion:"Simple y esencial, centrado en lo más importante",ejemplo:["Diseño muy simplificado","Amplio espacio en blanco","Solo información esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return i.jsxs("div",{className:`p-4 rounded-lg ${n.colores.fondo} transition-all`,children:[i.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n.descripcion}),i.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo} border-b border-gray-200`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-lg font-bold mb-2`,children:t}),i.jsxs("div",{className:`${n.fuentes.texto} ${n.colores.texto} text-sm space-y-2`,children:[i.jsx("p",{children:"Diapositiva de título con subtítulo"}),i.jsx("div",{className:`w-2/3 h-2 ${n.colores.acento} rounded mt-2`})]})]}),i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo}`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-md font-bold mb-2`,children:"Características principales"}),i.jsx("ul",{className:`${n.fuentes.texto} ${n.colores.texto} text-xs space-y-1 list-disc pl-4`,children:n.ejemplo.map((a,s)=>i.jsx("li",{children:a},s))}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("span",{className:"text-lg",children:n.iconos})})]})]})]})},DKe=({userId:e,planificaciones:t})=>{const[r,n]=N.useState("presentaciones"),[a,s]=N.useState(null),[o,l]=N.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=N.useState(!1),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(null),[w,_]=N.useState({isAuthorized:!1,message:"Verificando autorización...",checking:!0});N.useEffect(()=>e?TKe(e,U=>{f(U)}):void 0,[e]),N.useEffect(()=>{const S=async()=>{if(e)try{_(W=>({...W,checking:!0}));const z=await CI();_({isAuthorized:z.isAuthorized,message:z.message,checking:!1})}catch(z){_({isAuthorized:!1,message:`Error: ${z.message||"No se pudo verificar la autorización"}`,checking:!1})}};S();const U=setTimeout(()=>{_(z=>z.checking?{isAuthorized:!1,message:"Timeout al verificar autorización",checking:!1}:z)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const z=setTimeout(()=>{S()},2e3);return()=>{clearTimeout(z),clearTimeout(U)}}return()=>clearTimeout(U)},[e]),N.useEffect(()=>{const S=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!w.isAuthorized)try{_(z=>({...z,checking:!0}));const X=await CI();_({isAuthorized:X.isAuthorized,message:X.message,checking:!1})}catch(X){_({isAuthorized:!1,message:`Error: ${X.message||"No se pudo verificar la autorización"}`,checking:!1})}};return window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S)},[w.isAuthorized]),N.useEffect(()=>{a&&("nombreUnidad"in a?l(S=>({...S,tema:a.nombreUnidad})):"nombreClase"in a&&l(S=>({...S,tema:a.nombreClase})))},[a]);const O=()=>{var S;if(!a)return[];if("lecciones"in a){const U=[];return(S=a.lecciones)==null||S.forEach(Q=>{Q.objetivosAprendizaje&&!U.includes(Q.objetivosAprendizaje)&&U.push(Q.objetivosAprendizaje)}),U}else if(a.detalleLeccionOrigen)return[a.detalleLeccionOrigen.objetivosAprendizaje];return[]},j=S=>{const{name:U,value:Q,type:X}=S.target;if(X==="checkbox"){const z=S.target.checked;l(W=>({...W,[U]:z}))}else l(z=>({...z,[U]:Q}))},B=S=>{const U=Array.from(S.target.selectedOptions,Q=>Q.value);l(Q=>({...Q,objetivosAprendizaje:U}))},C=async S=>{if(S.preventDefault(),!a){y("Debes seleccionar una planificación");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const U={planificacionId:a.id,tema:o.tema,curso:a.nivel,asignatura:a.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentación:",U);const Q=await IKe({...U,userId:e});console.log("Resultado de la función:",Q),Q&&Q.url&&console.log("Presentación generada:",Q.url)}catch(U){console.error("Error al generar presentación:",U);const Q=(U==null?void 0:U.message)||"Error desconocido",X=(U==null?void 0:U.code)||"unknown";y(`Error (${X}): ${Q}`)}finally{x(!1)}},k=async S=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta presentación?"))try{m(!0),await BKe(S)}catch(U){console.error("Error al eliminar presentación:",U),y("Error al eliminar la presentación")}finally{m(!1)}},T=()=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentación con IA"}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificación"}),i.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(a==null?void 0:a.id)||"",onChange:S=>{const U=t.find(Q=>Q.id===S.target.value);s(U||null)},required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una planificación"}),i.jsx("optgroup",{label:"Unidades",children:t.filter(S=>S.tipo==="Unidad").map(S=>i.jsxs("option",{value:S.id,children:[S.tipo==="Unidad"?S.nombreUnidad:""," - ",S.asignatura," (",S.nivel,")"]},S.id))}),i.jsx("optgroup",{label:"Clases",children:t.filter(S=>S.tipo==="Clase").map(S=>i.jsxs("option",{value:S.id,children:[S.tipo==="Clase"?S.nombreClase:""," - ",S.asignatura," (",S.nivel,")"]},S.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),i.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),i.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:B,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:O().map((S,U)=>i.jsx("option",{value:S,children:S},U))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantén presionado Ctrl (o Cmd) para seleccionar múltiples opciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nº de diapositivas"}),i.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:j,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentación"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"sobrio"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🎭"})}),i.jsx("span",{className:"font-medium",children:"Sobrio"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"visual"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🎨"})}),i.jsx("span",{className:"font-medium",children:"Visual"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y gráfico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"academico"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"📚"})}),i.jsx("span",{className:"font-medium",children:"Académico"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"interactivo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🤝"})}),i.jsx("span",{className:"font-medium",children:"Interactivo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinámico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"profesional"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"💼"})}),i.jsx("span",{className:"font-medium",children:"Profesional"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y práctico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"creativo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"💡"})}),i.jsx("span",{className:"font-medium",children:"Creativo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"minimalista"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"⚪"})}),i.jsx("span",{className:"font-medium",children:"Minimalista"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),i.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[i.jsx(Nte,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),i.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(uA,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5",children:[i.jsx(OKe,{estilo:o.estilo,tema:o.tema||"Tema de la presentación"}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-medium mb-2",children:["Características del estilo ",o.estilo]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño elegante y profesional"}),i.jsx("li",{children:"Colores neutros y tipografía clásica"}),i.jsx("li",{children:"Énfasis en la claridad y simplicidad"}),i.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño colorido y dinámico"}),i.jsx("li",{children:"Mayor uso de gráficos e imágenes"}),i.jsx("li",{children:"Énfasis en elementos visuales e infografías"}),i.jsx("li",{children:"Ideal para mantener la atención visual"})]}),o.estilo==="academico"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño formal y riguroso"}),i.jsx("li",{children:"Espacio para citas y referencias"}),i.jsx("li",{children:"Énfasis en conceptos teóricos"}),i.jsx("li",{children:"Ideal para contenido académico complejo"})]}),o.estilo==="interactivo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño participativo"}),i.jsx("li",{children:"Incluye actividades y preguntas"}),i.jsx("li",{children:"Énfasis en la participación activa"}),i.jsx("li",{children:"Ideal para clases dinámicas"})]}),o.estilo==="profesional"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño corporativo"}),i.jsx("li",{children:"Elementos de casos prácticos"}),i.jsx("li",{children:"Énfasis en aplicaciones reales"}),i.jsx("li",{children:"Ideal para formación profesional"})]}),o.estilo==="creativo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño no convencional y llamativo"}),i.jsx("li",{children:"Elementos visuales originales"}),i.jsx("li",{children:"Énfasis en despertar la imaginación"}),i.jsx("li",{children:"Ideal para temas creativos o artísticos"})]}),o.estilo==="minimalista"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño extremadamente simplificado"}),i.jsx("li",{children:"Amplio espacio en blanco"}),i.jsx("li",{children:"Énfasis en lo esencial"}),i.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),i.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:S=>l(U=>({...U,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:"🖼️ Incluir sugerencias para imágenes educativas"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:S=>l(U=>({...U,incluirActividades:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:"✏️ Incluir actividades y ejercicios prácticos"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:S=>l(U=>({...U,incluirEvaluacion:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:"📝 Incluir diapositiva de evaluación/reflexión"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:S=>l(U=>({...U,formatoPedagogico:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:"📚 Aplicar estructura pedagógica avanzada"})]})]}),i.jsxs("div",{className:"hidden",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:S=>l(U=>({...U,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imágenes libres de derechos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),i.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:j,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aquí cualquier contenido de referencia para la presentación..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),i.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&i.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:g||!a,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?i.jsxs(i.Fragment,{children:[i.jsx(El,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(yF,{className:"w-4 h-4"}),"Generar Presentación"]})})})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),i.jsx("div",{className:"space-y-4",children:h?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(El,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?i.jsxs("div",{className:"text-center py-8 space-y-4",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todavía"}),i.jsx("div",{className:"text-sm",children:w.checking?i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[i.jsx(El,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Verificando autorización..."})]}):i.jsxs("div",{className:`flex items-center justify-center gap-2 ${w.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[i.jsx("span",{children:w.isAuthorized?"✅":"⚠️"}),i.jsx("span",{children:w.message})]})}),!w.checking&&!w.isAuthorized&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:()=>{const S=`https://us-central1-plania-clase.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=S},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(hB,{className:"w-4 h-4"}),i.jsx("span",{children:"Autorizar Google Slides"})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:async()=>{try{_(U=>({...U,checking:!0}));const S=await CI();_({isAuthorized:S.isAuthorized,message:S.message,checking:!1})}catch(S){_({isAuthorized:!1,message:`Error: ${S.message||"No se pudo verificar la autorización"}`,checking:!1})}},disabled:w.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${w.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[w.checking?i.jsx(El,{className:"w-3 h-3 animate-spin"}):i.jsx("span",{children:"🔄"}),i.jsx("span",{children:"Verificar estado"})]})})]}):d.map(S=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:S.tema}),S.estado==="generando"?i.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[i.jsx(El,{className:"w-3 h-3 animate-spin"}),"Generando"]}):S.estado==="error"?i.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[i.jsx(uA,{className:"w-3 h-3"}),"Error"]}):i.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[i.jsx(Ha,{className:"w-3 h-3"}),"Lista"]})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[S.asignatura," - ",S.curso]}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(oc,{className:"w-3 h-3"}),new Date(S.fechaCreacion).toLocaleDateString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(mB,{className:"w-3 h-3"}),S.numDiapositivas," diapositivas"]}),i.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${S.estilo==="sobrio"?"bg-slate-100 text-slate-700":S.estilo==="visual"?"bg-blue-100 text-blue-700":S.estilo==="academico"?"bg-amber-100 text-amber-700":S.estilo==="interactivo"?"bg-green-100 text-green-700":S.estilo==="profesional"?"bg-indigo-100 text-indigo-700":S.estilo==="creativo"?"bg-purple-100 text-purple-700":(S.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[S.estilo==="sobrio"&&"🎭",S.estilo==="visual"&&"🎨",S.estilo==="academico"&&"📚",S.estilo==="interactivo"&&"🤝",S.estilo==="profesional"&&"💼",S.estilo==="creativo"&&"💡",S.estilo==="minimalista"&&"⚪",S.estilo]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),i.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:S.objetivosAprendizaje.map((U,Q)=>i.jsx("li",{className:"truncate",children:U.length>60?U.substring(0,57)+"...":U},Q))})]}),S.mensajeError&&i.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:S.mensajeError}),i.jsxs("div",{className:"mt-3 flex justify-between",children:[S.estado==="completada"?i.jsxs(i.Fragment,{children:[i.jsxs("a",{href:S.esDemoMode||S.urlPresentacion.includes("example.com")?"#":S.urlPresentacion,onClick:U=>{(S.esDemoMode||S.urlPresentacion.includes("example.com"))&&(U.preventDefault(),alert("Esta es una versión de demostración. En la versión final, aquí verás una presentación real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${S.esDemoMode||S.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[i.jsx(hB,{className:"w-3 h-3"}),S.esDemoMode||S.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),S.esDemoMode&&S.urlAutorizacion&&i.jsxs("a",{href:S.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[i.jsx(hB,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):i.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),i.jsx("button",{onClick:()=>k(S.id),className:"text-red-500 hover:text-red-700",children:i.jsx(Va,{className:"w-4 h-4"})})]})]},S.id))})]})})]}),L=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(CH,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Sección de Guías Didácticas"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]}),R=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(mB,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>n("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(yF,{className:"w-4 h-4"}),i.jsx("span",{children:"Presentaciones"})]}),i.jsxs("button",{onClick:()=>n("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(CH,{className:"w-4 h-4"}),i.jsx("span",{children:"Guías"})]}),i.jsxs("button",{onClick:()=>n("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(mB,{className:"w-4 h-4"}),i.jsx("span",{children:"Recursos"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx(FKe,{})}),i.jsxs("div",{children:[r==="presentaciones"&&T(),r==="guias"&&L(),r==="recursos"&&R()]})]})},BN="planificaciones",jle="actividades_calendario",fM=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},Ble=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:nr.fromDate(new Date),fechaActualizacion:nr.fromDate(new Date)};return(await on(mt(st,BN),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},Tle=async(e,t,r)=>{try{const n=Yt(st,BN,e),a=await kh(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await dl(n,{...t,fechaActualizacion:nr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},Ile=async(e,t)=>{try{const r=Yt(st,BN,e),n=await kh(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await wa(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},PKe=async e=>{try{const t=Lt(mt(st,BN),dr("userId","==",e),Jt("fechaCreacion","desc"));return(await Mr(t)).docs.map(fM)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},Fle=(e,t)=>{const r=Lt(mt(st,BN),dr("userId","==",e),Jt("fechaCreacion","desc"));return lr(r,n=>{try{const a=n.docs.map(fM);console.log(`Recibiendo ${a.length} planificaciones del usuario ${e}`);const s=a.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificación ${o.id} tiene detallesLeccion inválidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(s)}catch(a){console.error("Error procesando datos de planificaciones:",a),t([])}},n=>{console.error("Error en suscripción a planificaciones:",n)})},Ole=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:nr.fromDate(new Date),fechaActualizacion:nr.fromDate(new Date)};return(await on(mt(st,jle),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Dle=(e,t)=>{const r=Lt(mt(st,jle),dr("userId","==",e),Jt("fecha","desc"));return lr(r,n=>{const a=n.docs.map(fM);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},BO=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:Ile,getPlanificacionesByUser:PKe,saveActividad:Ole,savePlanificacion:Ble,subscribeToActividades:Dle,subscribeToPlanificaciones:Fle,updatePlanificacion:Tle},Symbol.toStringTag,{value:"Module"})),RKe=(e,t)=>{const[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState(null),c=N.useCallback(async()=>{if(!e){console.warn("🛠️ cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),s(!1),l("No se pudo determinar la identidad del usuario"),n([]);return}try{console.log(`🛠️ Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await Ti(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>BO);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(`🛠️ Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${v.id}`),{...v,detallesLeccion:[]}):v);n(x),s(!1)}catch(m){console.error("🛠️ Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),s(!1)}},[e]);N.useEffect(()=>{if(!e){console.log("🛠️ usePlanificaciones: userId nulo o vacío, no se cargarán planificaciones"),s(!1),l("ID de usuario no disponible"),n([]);return}console.log(`🛠️ usePlanificaciones: Cargando planificaciones para usuario ${e}`),s(!0),l(null);let m=null;try{m=Fle(e,x=>{if(console.log(`🛠️ usePlanificaciones: Recibidos ${x.length} documentos por suscripción`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${y.id}`),{...y,detallesLeccion:[]}):y);n(v),s(!1)})}catch(x){console.error("🛠️ Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{a&&r.length===0&&(console.log("🛠️ Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await Ble(m,e)}catch(g){throw l(g.message||"Error al guardar planificación"),g}},d=async(m,g)=>{try{l(null),await Tle(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificación"),x}},f=async m=>{try{l(null),await Ile(m,e)}catch(g){throw l(g.message||"Error al eliminar planificación"),g}},h=N.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log("📊 Diagnóstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await Ti(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>BO);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(`📊 Diagnóstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Inválidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:w}=await Ti(async()=>{const{updateDoc:O,doc:j}=await Promise.resolve().then(()=>ub);return{updateDoc:O,doc:j}},void 0),{db:_}=await Ti(async()=>{const{db:O}=await Promise.resolve().then(()=>pR);return{db:O}},void 0);for(const O of v)await y(w(_,"planificaciones",O.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificación.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error("📊 Error en diagnóstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:a,error:o,save:u,update:d,remove:f,diagnosticarYReparar:h}},TO=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},LKe=e=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState(null);N.useEffect(()=>{if(!e){a(!1);return}a(!0);try{return Dle(e,u=>{r(u),a(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),a(!1)}},[e]);const l=N.useCallback(async c=>{try{return o(null),await Ole(c,e)}catch(u){throw o(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:l}},MKe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=N.useState(e),o=c=>{s({...a,[c.target.name]:c.target.value})},l=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),i.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),i.jsx("textarea",{name:c,value:u,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),i.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},UKe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,o]=N.useState(e.progreso??0),[l,c]=N.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);o(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),o(e.progreso??0)}finally{c(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:l||n}),i.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&i.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),i.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),i.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Actividades sugeridas:"})," ",d.actividades]})}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),i.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},QKe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,o]=N.useState(e),[l,c]=N.useState(!1);N.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const h=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON válido:",y)}return String(v)},m=h(e.momentosClase.inicio),g=h(e.momentosClase.desarrollo),x=h(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=h=>{const{name:m,value:g}=h.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...s};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualización")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}},f=h=>{if(console.log("Formateando contenido:",typeof h,h!=null&&h.substring?h.substring(0,50):h),typeof h=="string")try{h.trim().startsWith("{")&&(h=JSON.parse(h),console.log("Contenido parseado a objeto:",h))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof h=="object"&&h!==null)try{let m="";if(h.actividades&&Array.isArray(h.actividades)){m=`${h.tiempo?"TIEMPO: "+h.tiempo+`

`:""}`,m+=`${h.objetivo?`OBJETIVO:
`+h.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,h.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripción"}

`;let y="";x.tipo&&(y+=`• Tipo: ${x.tipo}
`),x.recursos&&(y+=`• Recursos: ${x.recursos}
`),x.evaluacion&&(y+=`• Evaluación: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(h).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=`• ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof h[x]=="object"?JSON.stringify(h[x]):h[x]}
`)}),g&&(m+=`
INFORMACIÓN ADICIONAL:
${g}`),m}else{if(typeof h=="string")try{const y=JSON.parse(h);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(h,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+="• "+y.trim().substring(1)+`
`;else if(y.includes(":")){const w=y.split(":");if(w.length>=2){const _=w[0].trim(),O=w.slice(1).join(":").trim();["tiempo","duración","objetivo","actividad","tipo","recursos","evaluación"].includes(_.toLowerCase())?v+=`${_.toUpperCase()}: ${O}
`:v+=`${_}: ${O}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(h)}return String(h)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),i.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||l,children:"← Volver"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.inicio",value:f(s.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activación de conocimientos previos, motivación y presentación del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.desarrollo",value:f(s.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didáctica, estrategias de enseñanza, actividades prácticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.cierre",value:f(s.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, síntesis, metacognición, evaluación formativa y retroalimentación...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:a||l})]})]}),i.jsx("div",{className:"text-right mt-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:"🗑️ Eliminar Plan"}),i.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:[l&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},HKe=({userId:e})=>{const{actividades:t,save:r}=LKe(e),[n,a]=N.useState("list"),[s,o]=N.useState(null),[l,c]=N.useState(!1),[u,d]=N.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=N.useState(f);N.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(B){console.error("Error al verificar evento en calendario:",B)}},x=B=>{const{name:C,value:k}=B.target;m(T=>({...T,[C]:k}))},v=(B,C,k)=>{m(T=>({...T,tareas:T.tareas.map(L=>L.id===B?{...L,[C]:k}:L)}))},y=()=>{m(B=>({...B,tareas:[...B.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=B=>{m(C=>({...C,tareas:C.tareas.filter(k=>k.id!==B)}))},_=async B=>{B.preventDefault(),c(!0);const C=`Eres un especialista en objetivos educacionales según el currículum nacional chileno. Basado en la siguiente información de una actividad pedagógica, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(k=>k.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (máximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propósito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currículum nacional
    - Ser medible y observable`;try{TO("Planificación - Actividad Calendario");const k=ao.currentUser,T=k?await k.getIdToken():null;if(!T)throw new Error("No se pudo obtener el token de autenticación");const L=await fetch("/api/generarObjetivoActividad",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({prompt:C,formData:h})});let R="No generado";L.ok?R=(await L.json()).objetivo||R:(console.error("Error al generar objetivo con IA:",await L.text()),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él."));const S={...h,objetivo:R},U=await r(S),Q={...S,id:U};o(Q),a("summary")}catch(k){console.error("Error al guardar actividad:",k),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}finally{c(!1)}},O=B=>{console.log("Agregando al calendario:",B),d(!0)},j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return n==="form"?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detalles de la Actividad"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:j,required:!0,disabled:l}),i.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:j,required:!0,disabled:l}),i.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:j,disabled:l})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),i.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),i.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((B,C)=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[i.jsx("button",{type:"button",onClick:()=>w(B.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:"×"}),i.jsx("textarea",{value:B.descripcion,onChange:k=>v(B.id,"descripcion",k.target.value),placeholder:`Descripción de la Tarea ${C+1}`,rows:2,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsx("input",{value:B.responsable,onChange:k=>v(B.id,"responsable",k.target.value),placeholder:"Responsable",className:j,required:!0,disabled:l}),i.jsx("input",{value:B.recursos,onChange:k=>v(B.id,"recursos",k.target.value),placeholder:"Recursos Necesarios",className:j,disabled:l})]})]},B.id))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[i.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),i.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[i.jsx("span",{className:"text-2xl",children:"✓"}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),i.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),i.jsx("span",{children:s.nombre})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),i.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),i.jsx("p",{children:s.descripcion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),i.jsx("span",{children:s.ubicacion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),i.jsx("span",{children:s.participantes})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),i.jsx("p",{children:s.recursosGenerales})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),i.jsx("p",{children:s.objetivo})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[i.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),i.jsx("button",{onClick:()=>O(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),i.jsx("button",{onClick:()=>{a("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),i.jsx("button",{onClick:()=>{a("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),i.jsx("div",{className:"space-y-3",children:t.length>0?t.map(B=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",B.ubicacion]})]},B.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},VKe=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log("🔑 PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log("🔑 ID de usuario válido:",r);const{planificaciones:n,save:a,update:s,remove:o,loading:l,diagnosticarYReparar:c}=RKe(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=N.useState(u),[h,m]=N.useState(null),[g,x]=N.useState(!1),[v,y]=N.useState(null),[w,_]=N.useState("unidad"),[O,j]=N.useState(null),[B,C]=N.useState(null),k=(te,ne)=>{h&&C({planId:h.id,lessonIndex:te,lessonData:ne})},T=te=>{m(te),f({asignatura:te.asignatura,nivel:te.nivel,nombreUnidad:te.nombreUnidad,contenidos:te.contenidos,cantidadClases:te.cantidadClases,observaciones:te.observaciones,ideasParaUnidad:te.ideasParaUnidad})},L=async te=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta planificación?"))try{await o(te),(h==null?void 0:h.id)===te&&m(null)}catch(ne){console.error("Error al eliminar planificación:",ne),alert("No se pudo eliminar la planificación.")}},R=async te=>{if(window.confirm("¿Estás seguro de que quieres eliminar este plan de clase?"))try{await o(te),j(null)}catch(ne){console.error("Error al eliminar plan de clase:",ne),alert("No se pudo eliminar el plan de clase.")}},S=N.useMemo(()=>e.asignaturas||[],[e.asignaturas]),U=N.useMemo(()=>{const te=e.cursos||[],ne=new Set;return te.forEach(ie=>{ie.startsWith("1º")?ne.add("1º Medio"):ie.startsWith("2º")?ne.add("2º Medio"):ie.startsWith("3º")?ne.add("3º Medio"):ie.startsWith("4º")&&ne.add("4º Medio")}),Array.from(ne)},[e.cursos]);N.useEffect(()=>{f(te=>({...te,asignatura:S[0]||"",nivel:U[0]||""}))},[S,U]);const Q=te=>{const{name:ne,value:ie}=te.target;f(oe=>({...oe,[ne]:ne==="cantidadClases"?parseInt(ie,10):ie}))},X=()=>{const{asignatura:te,nivel:ne,nombreUnidad:ie,contenidos:oe,cantidadClases:de,observaciones:ke,ideasParaUnidad:ae}=d;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currículum Nacional Chileno (MINEDUC) para ${te} en ${ne}. La planificación debe presentarse en formato JSON estructurado.

    **Información Base:**
    - Asignatura: ${te}
    - Nivel: ${ne}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${oe}"
    - Cantidad de clases para la unidad: ${de}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${ke||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegúrate que los objetivos estén alineados con las Bases Curriculares del MINEDUC para ${te} en ${ne}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currículum en línea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles técnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${de} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},z=async te=>{te.preventDefault(),x(!0),y(null);try{TO("Planificación - Unidad");const ne=X(),ie=ao.currentUser,oe=ie?await ie.getIdToken():null;if(!oe)throw new Error("No se pudo obtener el token de autenticación");const de=await fetch("/api/generarUnidadPlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe}`},body:JSON.stringify({prompt:ne,unidadFormData:d})});if(!de.ok){const Oe=await de.text();throw console.error("Error response from backend:",Oe),new Error(`Error al generar la unidad con IA: ${de.statusText}`)}const ke=await de.json(),ae={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:ke.objetivosAprendizaje,indicadoresEvaluacion:ke.indicadoresEvaluacion,detallesLeccion:ke.detallesLeccion};if(h)await s(h.id,ae),m({...ae,id:h.id});else{const Oe=await a(ae);m({...ae,id:Oe})}}catch(ne){console.error("Error al generar planificación con IA",ne),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{x(!1)}},W=async(te,ne)=>{x(!0),y(null);const ie=()=>`Eres un experto pedagogo chileno especialista en diseño de planes de clase alineados con el currículum nacional. A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ne.asignatura}
    - Nivel: ${ne.nivel}
    - Objetivo de la clase: ${te.objetivosAprendizaje}
    - Contenidos: ${te.contenidosConceptuales}
    - Actividades sugeridas: ${te.actividades}
    
    **Orientaciones didácticas**:
    - El plan debe seguir el modelo de diseño instruccional del Ministerio de Educación de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologías que desarrollen habilidades del siglo XXI según el currículum chileno.
    - Considerar momentos para activación de conocimientos previos, desarrollo de aprendizajes y metacognición/evaluación.
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{TO("Planificación - Utilizar Clase");const oe=ie(),de=ao.currentUser,ke=de?await de.getIdToken():null;if(!ke)throw new Error("No se pudo obtener el token de autenticación");const ae=await fetch("/api/generarClasePlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ke}`},body:JSON.stringify({prompt:oe,unitPlan:ne,lessonDetail:te,currentUser:e})});if(!ae.ok){const Se=await ae.text();throw console.error("Error response from backend:",Se),new Error(`Error al generar el plan de clase con IA: ${ae.statusText}`)}const Oe=await ae.json(),Te={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ne.asignatura,nivel:ne.nivel,contenidos:te.contenidosConceptuales,observaciones:"",nombreClase:te.actividades,duracionClase:80,momentosClase:Oe,detalleLeccionOrigen:te};await a(Te),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),_("clase")}catch(oe){console.error("Error al generar plan de clase con IA",oe),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{x(!1)}},G=async te=>{if(B)try{const{planId:ne,lessonIndex:ie}=B,oe=n.find(ae=>ae.id===ne&&ae.tipo==="Unidad");if(!oe)return;const de=[...oe.detallesLeccion];de[ie]=te;const ke={...oe,detallesLeccion:de};await s(ne,ke),m(ke),C(null)}catch(ne){console.error("Error al actualizar lección:",ne),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=async()=>{try{console.log("🔄 Recargando planificaciones manualmente...");const{getPlanificacionesByUser:te}=await Ti(async()=>{const{getPlanificacionesByUser:ie}=await Promise.resolve().then(()=>BO);return{getPlanificacionesByUser:ie}},void 0);if(!t){console.warn("🔄 No hay userId para recargar planificaciones");return}const ne=await te(t);console.log(`🔄 Obtenidas ${ne.length} planificaciones frescas`),alert(`Se han encontrado ${ne.length} planificaciones en la base de datos. Recargue la página para ver los cambios.`),window.location.reload()}catch(te){console.error("🔄 Error recargando planificaciones:",te),alert("Hubo un error al recargar las planificaciones. Intente recargar la página manualmente.")}},[H,F]=N.useState({visible:!1,ejecutando:!1,resultado:null}),D=async()=>{F(ne=>({...ne,ejecutando:!0,resultado:null}));const te=await c();F(ne=>({...ne,ejecutando:!1,resultado:te}))},q=()=>{var te;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>F(ne=>({...ne,visible:!ne.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnóstico"}),i.jsxs("button",{onClick:K,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[i.jsx(wF,{className:"w-4 h-4"}),i.jsx("span",{children:"Recargar"})]})]})]}),H.visible&&i.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnóstico"}),i.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentará resolver problemas con las planificaciones que no aparecen en el historial."}),H.resultado&&i.jsx("div",{className:`p-3 mb-3 rounded-md ${H.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":H.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:H.resultado.message}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:D,disabled:H.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:H.ejecutando?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx("span",{children:"Ejecutar diagnóstico"})}),((te=H.resultado)==null?void 0:te.status)==="repaired"&&i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar página"})]})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("form",{onSubmit:z,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:d.asignatura,onChange:Q,className:Y,required:!0,disabled:g,children:S.map(ne=>i.jsx("option",{value:ne,children:ne},ne))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsx("select",{name:"nivel",value:d.nivel,onChange:Q,className:Y,required:!0,disabled:g,children:U.map(ne=>i.jsx("option",{value:ne,children:ne},ne))})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[i.jsx("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre de la Unidad"}),i.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:Q,className:Y,placeholder:"Ej: Introducción a la Programación",required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos Clave"}),i.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:Q,rows:3,placeholder:"Describe los temas, conceptos y habilidades principales que se deben abordar en la unidad. Sé lo más específico posible.",className:Y,required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),i.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:Q,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:Y,disabled:g})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),i.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:Q,className:Y,min:"1",max:"20",disabled:g})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),i.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:Q,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:Y,disabled:g})]})]}),i.jsx("div",{className:"pt-4 text-right",children:i.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?i.jsx(wF,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(ng,{className:"w-5 h-5"}),i.jsx("span",{children:h?"Regenerar Plan":"Generar con IA"})]})})}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),h&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),i.jsx(UKe,{plan:h,onEditLesson:k,onUseLesson:W,onUpdatePlan:s,isLoading:g})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-4",children:[console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",n.length),console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de unidades:",n.filter(ne=>ne.tipo==="Unidad").length),n.length>0?n.filter(ne=>ne.tipo==="Unidad").map(ne=>i.jsx("div",{className:`p-5 border rounded-xl transition-all ${(h==null?void 0:h.id)===ne.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ne.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ne.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ne.contenidos]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>T(ne),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(Owe,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>L(ne.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(Va,{className:"w-4 h-4"}),i.jsx("span",{children:"Eliminar"})]})]})]})},ne.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},J=()=>{const te=n.filter(ne=>ne.tipo==="Clase").sort((ne,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(ne.fechaCreacion).getTime());return O?i.jsx(QKe,{plan:O,onBack:()=>j(null),onDelete:R,onSave:async ne=>{try{await s(ne.id,ne),j(ne)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(H2e,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"space-y-4",children:te.length>0?te.map(ne=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ne.nombreClase}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ne.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ne.contenidos]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>j(ne),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ne.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return N.useEffect(()=>{if((async()=>{try{if(console.log("📊 Diagnóstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn("📊 Sin userId, no se pueden obtener planificaciones");return}const{collection:ne,query:ie,where:oe,getDocs:de}=await Ti(async()=>{const{collection:Te,query:Se,where:fe,getDocs:ye}=await Promise.resolve().then(()=>ub);return{collection:Te,query:Se,where:fe,getDocs:ye}},void 0),{db:ke}=await Ti(async()=>{const{db:Te}=await Promise.resolve().then(()=>pR);return{db:Te}},void 0),ae=ie(ne(ke,"planificaciones"),oe("userId","==",t)),Oe=await de(ae);if(console.log(`📊 Documentos en Firestore: ${Oe.docs.length}`),Oe.docs.length>0){console.log("📊 Primer documento:",Oe.docs[0].data());const Te=Oe.docs.filter(fe=>fe.data().tipo==="Unidad");console.log(`📊 Documentos de tipo Unidad: ${Te.length}`);const Se=Te.filter(fe=>Array.isArray(fe.data().detallesLeccion)&&fe.data().detallesLeccion!==void 0);if(console.log(`📊 Unidades con detallesLeccion válidos: ${Se.length}`),Te.length>Se.length){console.log(`📊 Intentando corregir ${Te.length-Se.length} unidades inválidas...`);for(const fe of Te){const ye=fe.data();if(!Array.isArray(ye.detallesLeccion)||ye.detallesLeccion===void 0)try{console.log(`📊 Corrigiendo documento ${fe.id}...`);const{doc:Le,updateDoc:Qe}=await Ti(async()=>{const{doc:ue,updateDoc:we}=await Promise.resolve().then(()=>ub);return{doc:ue,updateDoc:we}},void 0);await Qe(Le(ke,"planificaciones",fe.id),{detallesLeccion:[]}),console.log(`📊 Documento ${fe.id} corregido con éxito`)}catch(Le){console.error(`📊 Error al corregir documento ${fe.id}:`,Le)}}}}console.log("📊 Diagnóstico de planificaciones - Finalizado")}catch(ne){console.error("📊 Error en diagnóstico de planificaciones:",ne)}})(),!l){console.log(`🔍 Verificando ${n.length} planificaciones recibidas...`),console.log("🔍 Tipos de planificaciones:",n.map(ie=>ie.tipo));const ne=n.filter(ie=>ie.tipo==="Unidad"&&(!Array.isArray(ie.detallesLeccion)||ie.detallesLeccion===void 0));ne.length>0&&(console.warn(`🔍 Encontradas ${ne.length} unidades con formato inválido`),ne.forEach(async ie=>{try{await s(ie.id,{...ie,detallesLeccion:[]}),console.log(`🔍 Reparada planificación ${ie.id}`)}catch(oe){console.error(`🔍 Error al reparar planificación ${ie.id}:`,oe)}}))}},[t,n,l,s]),e?r?i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx(Cte,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>_("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(vi,{className:"w-4 h-4"}),i.jsx("span",{children:"Unidad"})]}),i.jsxs("button",{onClick:()=>_("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(tEe,{className:"w-4 h-4"}),i.jsx("span",{children:"Clase"})]}),i.jsxs("button",{onClick:()=>_("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(oc,{className:"w-4 h-4"}),i.jsx("span",{children:"Actividades Calendario"})]}),i.jsxs("button",{onClick:()=>_("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(yF,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Materiales"})]})]})}),w==="unidad"&&q(),w==="clase"&&J(),w==="calendario"&&i.jsx(HKe,{userId:t}),w==="materiales"&&i.jsx(DKe,{userId:t,planificaciones:n}),B&&i.jsx(MKe,{lesson:B.lessonData,onClose:()=>C(null),onSave:G,isLoading:g})]}):i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificación de usuario"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:i.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),i.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),i.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[i.jsx("li",{children:"La sesión no se ha inicializado correctamente"}),i.jsx("li",{children:"Su cuenta no tiene asignado un ID válido"}),i.jsx("li",{children:"Hay un problema en la sincronización con la base de datos"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicación"})})]}):i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},G4="events",zKe=async()=>{try{const e=Lt(mt(pr,G4),Jt("date","asc"));return(await Mr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},$Ke=async e=>{try{return{id:(await on(mt(pr,G4),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},GKe=async(e,t)=>{try{const r=Yt(pr,G4,e);await dl(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},qKe=async e=>{try{const t=Yt(pr,G4,e);await wa(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},KKe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],uK={[nn.EVALUACION]:i.jsx(vi,{className:"h-4 w-4"}),[nn.ACTO]:i.jsx(hNe,{className:"h-4 w-4"}),[nn.ACTIVIDAD_FOCALIZADA]:i.jsx(fb,{className:"h-4 w-4"}),[nn.SALIDA_PEDAGOGICA]:i.jsx(INe,{className:"h-4 w-4"})},WKe=e=>{switch(e.type){case nn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case nn.ACTO:return`Acto: ${e.ubicacion}`;case nn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case nn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},XKe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:o})=>{const[l,c]=N.useState({});N.useEffect(()=>{c(a||{type:nn.EVALUACION,subtype:Mp.PRUEBA_PARCIAL,asignatura:Ua[0],curso:ks[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(w=>({...w,[v]:y}))},f=x=>{c(v=>{if(v.type===nn.SALIDA_PEDAGOGICA){const y=v.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...v,cursos:w.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(l.type){case nn.EVALUACION:{const w={date:s,type:nn.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Mp.RUBRICA||l.subtype===Mp.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(w.enlace=l.enlace.trim()),v=w;break}case nn.ACTO:v={date:s,type:nn.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case nn.ACTIVIDAD_FOCALIZADA:v={date:s,type:nn.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case nn.SALIDA_PEDAGOGICA:v={date:s,type:nn.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case nn.EVALUACION:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),i.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:p2e.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:Ua.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:ks.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),i.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Mp.RUBRICA||l.subtype===Mp.PAUTA_COTEJO)&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),i.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case nn.ACTO:case nn.ACTIVIDAD_FOCALIZADA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),i.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),i.jsxs("div",{className:"relative",children:[i.jsx(j_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fd,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case nn.SALIDA_PEDAGOGICA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),i.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),i.jsxs("div",{className:"relative",children:[i.jsx(j_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("fieldset",{children:[i.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),i.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:ks.map(x=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),i.jsx("span",{children:x})]},x))})]})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:i.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:i.jsxs("form",{onSubmit:h,children:[i.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),i.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:i.jsx(uA,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),i.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(nn).map(x=>i.jsx("option",{value:x,children:x},x))})]}),g()]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[i.jsx("div",{children:a&&n&&i.jsxs("button",{type:"button",onClick:n,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[i.jsx(Va,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[i.jsx(uA,{className:"h-4 w-4"}),"Cancelar"]}),i.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[i.jsx(Yc,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},YKe=({profile:e})=>{const[t,r]=N.useState(new Date),[n,a]=N.useState([]),[s,o]=N.useState(!1),[l,c]=N.useState(null),[u,d]=N.useState(!1),[f,h]=N.useState(Object.values(nn)),[m,g]=N.useState(!1),[x,v]=N.useState(null),[y,w]=N.useState(null),_=N.useCallback(async()=>{o(!0);try{const R=await zKe();a(R),c(null)}catch(R){console.error("Error al cargar eventos desde Firestore",R),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);N.useEffect(()=>{_()},[_]);const O=N.useMemo(()=>{const R=t.getFullYear(),S=t.getMonth(),U=new Date(R,S,1).getDay(),Q=new Date(R,S+1,0).getDate(),X=[];let z=1;for(let W=0;W<6;W++){const G=[];for(let Y=0;Y<7;Y++)W===0&&Y<U||z>Q?G.push(null):(G.push(new Date(R,S,z)),z++);if(X.push(G),z>Q)break}return X},[t]),j=R=>{h(S=>S.includes(R)?S.filter(U=>U!==R):[...S,R])},B=()=>{f.length===Object.values(nn).length?h([]):h(Object.values(nn))},C=R=>{e!==Ht.ESTUDIANTE&&(v(R.toISOString().split("T")[0]),w(null),g(!0))},k=(R,S)=>{S.stopPropagation(),e!==Ht.ESTUDIANTE&&(v(R.date),w(R),g(!0))},T=async R=>{d(!0);try{y?await GKe(y.id,R):await $Ke(R),await _(),g(!1)}catch(S){console.error("Error al guardar evento:",S);const U=S instanceof Error?S.message:"Error desconocido";c(`Error al guardar el evento: ${U}`)}finally{d(!1)}},L=async()=>{if(y){d(!0);try{await qKe(y.id),await _(),g(!1)}catch(R){console.error("Error al eliminar evento:",R);const S=R instanceof Error?R.message:"Error desconocido";c(`No se pudo eliminar el evento: ${S}`)}finally{d(!1)}}};return i.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),i.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),i.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&i.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),l&&i.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&n.length===0&&i.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[i.jsx(Jwe,{className:"h-5 w-5 mt-0.5"}),i.jsx("p",{children:"No hay eventos registrados en la nube."})]}),i.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[i.jsx(Xk,{className:"h-4 w-4"}),i.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx("button",{onClick:B,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(nn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(nn).map(R=>i.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(R)?`shadow-sm ${Pv[R].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[i.jsx("input",{type:"checkbox",checked:f.includes(R),onChange:()=>j(R),className:"hidden"}),i.jsx("span",{className:"shrink-0",children:uK[R]}),i.jsx("span",{children:Pv[R].label})]},R))]})]}),i.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[i.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(rw,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(uR,{className:"h-5 w-5"})})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),i.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:KKe.map(R=>i.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:R},R))}),i.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:O.flat().map((R,S)=>{const U=R&&R.toDateString()===new Date().toDateString(),Q=R==null?void 0:R.toISOString().split("T")[0],X=Q?n.filter(z=>z.date===Q&&f.includes(z.type)):[];return i.jsx("div",{onClick:()=>R&&C(R),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${R?e!==Ht.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:R&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`self-end text-sm font-semibold ${U?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:R.getDate()}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:X.map(z=>i.jsxs("div",{onClick:W=>k(z,W),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Pv[z.type].color}`,children:[i.jsx("span",{className:"shrink-0",children:uK[z.type]}),i.jsx("span",{className:"truncate",children:WKe(z)})]},z.id))}),e!==Ht.ESTUDIANTE&&i.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:i.jsx(So,{className:"h-4 w-4"})})]})},S)})})]}),m&&i.jsx(XKe,{isOpen:m,onClose:()=>g(!1),onSave:T,onDelete:L,event:y,date:x,isLoading:u})]})},q4="anuncios",JKe=async()=>{try{const e=Lt(mt(pr,q4),Jt("fechaPublicacion","desc"));return(await Mr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},ZKe=async e=>{try{return{id:(await on(mt(pr,q4),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},eWe=async(e,t)=>{try{const r=Yt(pr,q4,e);await dl(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},tWe=async e=>{try{const t=Yt(pr,q4,e);await wa(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},dK=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],rWe=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=N.useState({tipo:"Todos",cursos:[]}),f=N.useCallback(async()=>{a(!0);try{const C=await JKe();r(C),o(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),o("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);N.useEffect(()=>{f()},[f]);const h=C=>{const{name:k,value:T}=C.target;c(L=>({...L,[k]:T}))},m=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},g=C=>{d(k=>{var L;if(k.tipo!=="Cursos")return k;const T=(L=k.cursos)!=null&&L.includes(C)?k.cursos.filter(R=>R!==C):[...k.cursos||[],C];return{...k,cursos:T}})},x=async C=>{if(C.preventDefault(),!l.titulo||!l.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const k={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...l};await ZKe(k),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(k){console.error("Error al crear anuncio:",k),o("Error al publicar el anuncio en la nube.")}},v=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await tWe(C),await f()}catch(k){console.error("Error al eliminar anuncio:",k),o("No se pudo eliminar el anuncio en la nube.")}},y=async C=>{try{const k=t.find(T=>T.id===C);k&&(await eWe(C,{destacado:!k.destacado}),await f())}catch(k){console.error("Error al actualizar anuncio:",k),o("No se pudo actualizar el estado del anuncio en la nube.")}},w=N.useMemo(()=>[...t].sort((C,k)=>C.destacado&&!k.destacado?-1:!C.destacado&&k.destacado?1:new Date(k.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[t]),_=N.useMemo(()=>{const C=e.profile,k=e.curso;return w.filter(T=>{if(C===Ht.SUBDIRECCION)return!0;if(!T.destinatarios)return C!==Ht.ESTUDIANTE;const{tipo:L,cursos:R}=T.destinatarios;return L==="Todos"||L==="Profesores"&&C===Ht.PROFESORADO||L==="Coordinación TP"&&C===Ht.COORDINACION_TP?!0:L==="Cursos"?C===Ht.ESTUDIANTE?R==null?void 0:R.includes(k||""):!0:!1})},[w,e]),O=C=>e.profile===Ht.ESTUDIANTE?!1:e.profile===Ht.SUBDIRECCION||e.profile===C.profileCreador,j=()=>e.profile===Ht.SUBDIRECCION||e.profile===Ht.PROFESORADO,B="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Ht.ESTUDIANTE?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),i.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:h,required:!0,className:B})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),i.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:h,required:!0,rows:4,className:B})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),i.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(C=>i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:u.tipo===C,onChange:()=>m(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinación TP","Coord. TP")})]},C))})]}),u.tipo==="Cursos"&&i.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:ks.map(C=>{var k;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(k=u.cursos)==null?void 0:k.includes(C),onChange:()=>g(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),i.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:B})]}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&_.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((C,k)=>{const T=dK[k%dK.length];return i.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${T.bg} ${T.rotate}`,children:[C.destacado&&i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:i.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),i.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),i.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&i.jsx("div",{className:"font-sans text-sm mb-4",children:i.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),i.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:C.autor}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"flex items-center",children:[j()&&i.jsx("button",{onClick:()=>y(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),O(C)&&i.jsx("button",{onClick:()=>v(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},Ple="api_logs",nWe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:nr.fromDate(new Date)};await on(mt(st,Ple),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},aWe=e=>{const t=Lt(mt(st,Ple),Jt("timestamp","desc"));return lr(t,n=>{const a=n.docs.map(s=>{var l,c;const o=s.data();return{id:s.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},K4=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}nWe(e,t)},AM="actas_de_reunion",sWe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},iWe=e=>{const t=Lt(mt(st,AM),Jt("fechaCreacion","desc"));return lr(t,n=>{const a=n.docs.map(s=>sWe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},oWe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:nr.fromDate(new Date(e.fechaCreacion))};return(await on(mt(st,AM),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},lWe=async e=>{try{const t=Yt(st,AM,e);await wa(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},Rle=window.SpeechRecognition||window.webkitSpeechRecognition,fK=!!Rle,cWe=({isListening:e})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),uWe=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState({tipoReunion:fB[0],asistentes:"",textoReunion:""}),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[f,h]=N.useState(!0),[m,g]=N.useState(null),x=N.useRef(null);N.useEffect(()=>{h(!0);const C=iWe(k=>{r(k),!n&&k.length>0&&a(k[0]),h(!1)});return()=>C()},[n]);const v=C=>{const{name:k,value:T}=C.target;o(L=>({...L,[k]:T}))},y=N.useCallback(()=>{var C;if(!fK){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(C=x.current)==null||C.stop():(x.current=new Rle,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=k=>{let T="";for(let L=k.resultIndex;L<k.results.length;++L)k.results[L].isFinal&&(T+=k.results[L][0].transcript+". ");o(L=>({...L,textoReunion:L.textoReunion+T}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=k=>{console.error("Speech recognition error",k.error),g(`Error de reconocimiento: ${k.error}`),c(!1)},x.current.start())},[l]),w=async C=>{C.preventDefault();const{tipoReunion:k,asistentes:T,textoReunion:L}=s;if(!k||!T.trim()||!L.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{K4("Generador de Actas");const R="",U=new globalThis.GoogleGenerativeAI(R).getGenerativeModel({model:"gemini-pro-latest"}),Q=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${L}"
                
                Asistentes a la reunión para referencia de nombres: ${T}
            `,G=(await(await U.generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(G),K={fechaCreacion:new Date().toISOString(),...s,...Y},H=await oWe(K,e);o({tipoReunion:fB[0],asistentes:"",textoReunion:""})}catch(R){console.error("Error al analizar acta con IA:",R),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},_=async C=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await lWe(C),(n==null?void 0:n.id)===C&&a(t.length>1?t[1]:null)}catch(k){console.error("Error deleting acta:",k),alert("No se pudo eliminar el acta.")}},O=C=>{a(C)},j=C=>C.temas||C.acuerdos||C.plazos||C.responsables?i.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),C.temas&&C.temas.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.temas.map((T,L)=>i.jsx("li",{children:T},L))})]}),C.acuerdos&&C.acuerdos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.acuerdos.map((T,L)=>i.jsx("li",{children:T},L))})]}),C.plazos&&C.plazos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.plazos.map((T,L)=>i.jsx("li",{children:T},L))})]}),C.responsables&&C.responsables.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.responsables.map((T,L)=>i.jsx("li",{children:T},L))})]})]}):null,B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?i.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[i.jsxs("div",{className:"md:col-span-1 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),i.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",i.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),i.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:v,required:!0,className:B,children:fB.map(C=>i.jsx("option",{value:C,children:C},C))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),i.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:B})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:B}),fK&&i.jsx("button",{type:"button",onClick:y,title:l?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:i.jsx(cWe,{isListening:l})})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(C=>i.jsxs("button",{onClick:()=>O(C),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===C.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.tipoReunion}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(C.fechaCreacion).toLocaleDateString("es-CL")})]},C.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),i.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),i.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),i.jsx("h2",{children:"Asistentes"}),i.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((C,k)=>C.trim()&&i.jsx("li",{children:C.trim()},k))}),j(n),i.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:i.jsx("p",{children:n.textoReunion})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},hM="evaluaciones_pruebas",mM="rubricas_estaticas",pM="rubricas_interactivas",dWe="usuarios",W4=e=>{var a,s,o;const t=e.data()||{},r=t.fechaCreacion,n=((o=(s=(a=r==null?void 0:r.toDate)==null?void 0:a.call(r))==null?void 0:s.toISOString)==null?void 0:o.call(s))??(typeof r=="string"?r:void 0);return{id:e.id,...t,fechaCreacion:n}},fWe=e=>{const t=Lt(mt(st,hM),Jt("fechaCreacion","desc"));return lr(t,n=>e(n.docs.map(a=>W4(a))),n=>{console.error("[subscribeToPruebas]",n),e([])})},AWe=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=Yt(st,hM,t),s={...n,fechaCreacion:r?nr.fromDate(new Date(r)):ya()};await yi(a,s,{merge:!0})},hWe=async e=>{await wa(Yt(st,hM,e))},mWe=e=>{const t=Lt(mt(st,mM),Jt("fechaCreacion","desc"));return lr(t,r=>e(r.docs.map(n=>W4(n))),r=>{console.error("[subscribeToRubricasEstaticas]",r),e([])})},IO=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=Yt(st,mM,t),s={...n,fechaCreacion:r?nr.fromDate(new Date(r)):ya()};await yi(a,s,{merge:!0})},pWe=async e=>{await wa(Yt(st,mM,e))},gWe=e=>{const t=Lt(mt(st,pM),Jt("curso","asc"));return lr(t,r=>e(r.docs.map(n=>W4(n))),r=>{console.error("[subscribeToRubricasInteractivas]",r),e([])})},xWe=async e=>{const t={...e,fechaCreacion:ya()};return(await on(mt(st,pM),t)).id},vWe=async(e,t)=>{const r=Yt(st,pM,e);await yi(r,t,{merge:!0})},bWe=e=>{const t=Lt(mt(st,dWe),Jt("nombreCompleto","asc"));return lr(t,r=>e(r.docs.map(n=>W4(n))),r=>{console.error("[subscribeToAllUsers]",r),e([])})},gM=()=>{const[e,t]=N.useState(null),[r,n]=N.useState(!0);return N.useEffect(()=>{const a=eZ(F_,async s=>{if(console.log("[useAuth] FirebaseUser:",s),s&&s.email)try{const o=await pte(s.email);console.log("[useAuth] Perfil Firestore:",o),t(o?{...o,uid:s.uid}:null)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}};function ha(e){"@babel/helpers - typeof";return ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(e)}var al=Uint8Array,Kc=Uint16Array,xM=Int32Array,X4=new al([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Y4=new al([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),FO=new al([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lle=function(e,t){for(var r=new Kc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new xM(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Mle=Lle(X4,2),Ule=Mle.b,OO=Mle.r;Ule[28]=258,OO[258]=28;var Qle=Lle(Y4,0),yWe=Qle.b,AK=Qle.r,DO=new Kc(32768);for(var Qa=0;Qa<32768;++Qa){var L0=(Qa&43690)>>1|(Qa&21845)<<1;L0=(L0&52428)>>2|(L0&13107)<<2,L0=(L0&61680)>>4|(L0&3855)<<4,DO[Qa]=((L0&65280)>>8|(L0&255)<<8)>>1}var oA=function(e,t,r){for(var n=e.length,a=0,s=new Kc(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new Kc(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Kc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[DO[f]>>c]=u}else for(l=new Kc(n),a=0;a<n;++a)e[a]&&(l[a]=DO[o[e[a]-1]++]>>15-e[a]);return l},Qm=new al(288);for(var Qa=0;Qa<144;++Qa)Qm[Qa]=8;for(var Qa=144;Qa<256;++Qa)Qm[Qa]=9;for(var Qa=256;Qa<280;++Qa)Qm[Qa]=7;for(var Qa=280;Qa<288;++Qa)Qm[Qa]=8;var Fw=new al(32);for(var Qa=0;Qa<32;++Qa)Fw[Qa]=5;var wWe=oA(Qm,9,0),NWe=oA(Qm,9,1),EWe=oA(Fw,5,0),CWe=oA(Fw,5,1),_I=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Sd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},SI=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},vM=function(e){return(e+7)/8|0},Hle=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new al(e.subarray(t,r))},_We=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Bd=function(e,t,r){var n=new Error(t||_We[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Bd),!r)throw n;return n},SWe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new al(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new al(a*3));var u=function(ke){var ae=r.length;if(ke>ae){var Oe=new al(Math.max(ae*2,ke));Oe.set(r),r=Oe}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=Sd(e,f,1);var w=Sd(e,f+1,3);if(f+=3,w)if(w==1)m=NWe,g=CWe,x=9,v=5;else if(w==2){var B=Sd(e,f,31)+257,C=Sd(e,f+10,15)+4,k=B+Sd(e,f+5,31)+1;f+=14;for(var T=new al(k),L=new al(19),R=0;R<C;++R)L[FO[R]]=Sd(e,f+R*3,7);f+=C*3;for(var S=_I(L),U=(1<<S)-1,Q=oA(L,S,1),R=0;R<k;){var X=Q[Sd(e,f,U)];f+=X&15;var _=X>>4;if(_<16)T[R++]=_;else{var z=0,W=0;for(_==16?(W=3+Sd(e,f,3),f+=2,z=T[R-1]):_==17?(W=3+Sd(e,f,7),f+=3):_==18&&(W=11+Sd(e,f,127),f+=7);W--;)T[R++]=z}}var G=T.subarray(0,B),Y=T.subarray(B);x=_I(G),v=_I(Y),m=oA(G,x,1),g=oA(Y,v,1)}else Bd(1);else{var _=vM(f)+4,O=e[_-4]|e[_-3]<<8,j=_+O;if(j>a){c&&Bd(0);break}l&&u(h+O),r.set(e.subarray(_,j),h),t.b=h+=O,t.p=f=j*8,t.f=d;continue}if(f>y){c&&Bd(0);break}}l&&u(h+131072);for(var K=(1<<x)-1,H=(1<<v)-1,F=f;;F=f){var z=m[SI(e,f)&K],D=z>>4;if(f+=z&15,f>y){c&&Bd(0);break}if(z||Bd(2),D<256)r[h++]=D;else if(D==256){F=f,m=null;break}else{var q=D-254;if(D>264){var R=D-257,J=X4[R];q=Sd(e,f,(1<<J)-1)+Ule[R],f+=J}var te=g[SI(e,f)&H],ne=te>>4;te||Bd(3),f+=te&15;var Y=yWe[ne];if(ne>3){var J=Y4[ne];Y+=SI(e,f)&(1<<J)-1,f+=J}if(f>y){c&&Bd(0);break}l&&u(h+131072);var ie=h+q;if(h<Y){var oe=s-Y,de=Math.min(Y,ie);for(oe+h<0&&Bd(3);h<de;++h)r[h]=n[oe+h]}for(;h<ie;++h)r[h]=r[h-Y]}}t.l=m,t.p=F,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&o?Hle(r,0,h):r.subarray(0,h)},KA=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Ey=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},kI=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:zle,l:0};if(a==1){var o=new al(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,B){return j.f-B.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var m=new Kc(h+1),g=PO(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(B,C){return m[C.s]-m[B.s]||B.f-C.f});n<a;++n){var w=s[n].s;if(m[w]>t)x+=y-(1<<g-m[w]),m[w]=t;else break}for(x>>=v;x>0;){var _=s[n].s;m[_]<t?x-=1<<t-m[_]++-1:++n}for(;n>=0&&x;--n){var O=s[n].s;m[O]==t&&(--m[O],++x)}g=t}return{t:new al(m),l:g}},PO=function(e,t,r){return e.s==-1?Math.max(PO(e.l,t,r+1),PO(e.r,t,r+1)):t[e.s]=r},hK=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Kc(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Cy=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Vle=function(e,t,r){var n=r.length,a=vM(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},mK=function(e,t,r,n,a,s,o,l,c,u,d){KA(t,d++,r),++a[256];for(var f=kI(a,15),h=f.t,m=f.l,g=kI(s,15),x=g.t,v=g.l,y=hK(h),w=y.c,_=y.n,O=hK(x),j=O.c,B=O.n,C=new Kc(19),k=0;k<w.length;++k)++C[w[k]&31];for(var k=0;k<j.length;++k)++C[j[k]&31];for(var T=kI(C,7),L=T.t,R=T.l,S=19;S>4&&!L[FO[S-1]];--S);var U=u+5<<3,Q=Cy(a,Qm)+Cy(s,Fw)+o,X=Cy(a,h)+Cy(s,x)+o+14+3*S+Cy(C,L)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&U<=Q&&U<=X)return Vle(t,d,e.subarray(c,c+u));var z,W,G,Y;if(KA(t,d,1+(X<Q)),d+=2,X<Q){z=oA(h,m,0),W=h,G=oA(x,v,0),Y=x;var K=oA(L,R,0);KA(t,d,_-257),KA(t,d+5,B-1),KA(t,d+10,S-4),d+=14;for(var k=0;k<S;++k)KA(t,d+3*k,L[FO[k]]);d+=3*S;for(var H=[w,j],F=0;F<2;++F)for(var D=H[F],k=0;k<D.length;++k){var q=D[k]&31;KA(t,d,K[q]),d+=L[q],q>15&&(KA(t,d,D[k]>>5&127),d+=D[k]>>12)}}else z=wWe,W=Qm,G=EWe,Y=Fw;for(var k=0;k<l;++k){var J=n[k];if(J>255){var q=J>>18&31;Ey(t,d,z[q+257]),d+=W[q+257],q>7&&(KA(t,d,J>>23&31),d+=X4[q]);var te=J&31;Ey(t,d,G[te]),d+=Y[te],te>3&&(Ey(t,d,J>>5&8191),d+=Y4[te])}else Ey(t,d,z[J]),d+=W[J]}return Ey(t,d,z[256]),d+W[256]},kWe=new xM([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),zle=new al(0),jWe=function(e,t,r,n,a,s){var o=s.z||e.length,l=new al(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=kWe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new Kc(32768),v=s.h||new Kc(g+1),y=Math.ceil(r/3),w=2*y,_=function(Te){return(e[Te]^e[Te+1]<<y^e[Te+2]<<w)&g},O=new xM(25e3),j=new Kc(288),B=new Kc(32),C=0,k=0,T=s.i||0,L=0,R=s.w||0,S=0;T+2<o;++T){var U=_(T),Q=T&32767,X=v[U];if(x[Q]=X,v[U]=Q,R<=T){var z=o-T;if((C>7e3||L>24576)&&(z>423||!u)){d=mK(e,c,0,O,j,B,k,L,S,T-S,d),L=C=k=0,S=T;for(var W=0;W<286;++W)j[W]=0;for(var W=0;W<30;++W)B[W]=0}var G=2,Y=0,K=m,H=Q-X&32767;if(z>2&&U==_(T-H))for(var F=Math.min(h,z)-1,D=Math.min(32767,T),q=Math.min(258,z);H<=D&&--K&&Q!=X;){if(e[T+G]==e[T+G-H]){for(var J=0;J<q&&e[T+J]==e[T+J-H];++J);if(J>G){if(G=J,Y=H,J>F)break;for(var te=Math.min(H,J-2),ne=0,W=0;W<te;++W){var ie=T-H+W&32767,oe=x[ie],de=ie-oe&32767;de>ne&&(ne=de,X=ie)}}}Q=X,X=x[Q],H+=Q-X&32767}if(Y){O[L++]=268435456|OO[G]<<18|AK[Y];var ke=OO[G]&31,ae=AK[Y]&31;k+=X4[ke]+Y4[ae],++j[257+ke],++B[ae],R=T+G,++C}else O[L++]=e[T],++j[e[T]]}}for(T=Math.max(T,R);T<o;++T)O[L++]=e[T],++j[e[T]];d=mK(e,c,u,O,j,B,k,L,S,T-S,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=T,s.w=R)}else{for(var T=s.w||0;T<o+u;T+=65535){var Oe=T+65535;Oe>=o&&(c[d/8|0]=u,Oe=o),d=Vle(c,d+1,e.subarray(T,Oe))}s.i=o}return Hle(l,0,n+vM(d)+a)},$le=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},BWe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new al(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return jWe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Gle=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},TWe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=$le();a.p(t.dictionary),Gle(e,2,a.d())}},IWe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Bd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Bd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function RO(e,t){t||(t={});var r=$le();r.p(e);var n=BWe(e,t,t.dictionary?6:2,4);return TWe(n,t),Gle(n,n.length-4,r.d()),n}function FWe(e,t){return SWe(e.subarray(IWe(e),-4),{i:2},t,t)}var OWe=typeof TextDecoder<"u"&&new TextDecoder,DWe=0;try{OWe.decode(zle,{stream:!0}),DWe=1}catch{}var Dr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function jI(){Dr.console&&typeof Dr.console.log=="function"&&Dr.console.log.apply(Dr.console,arguments)}var Ca={log:jI,warn:function(e){Dr.console&&(typeof Dr.console.warn=="function"?Dr.console.warn.apply(Dr.console,arguments):jI.call(null,arguments))},error:function(e){Dr.console&&(typeof Dr.console.error=="function"?Dr.console.error.apply(Dr.console,arguments):jI(e))}};function BI(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Rp(n.response,t,r)},n.onerror=function(){Ca.error("could not download file")},n.send()}function pK(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function kC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var F2,LO,Rp=Dr.saveAs||((typeof window>"u"?"undefined":ha(window))!=="object"||window!==Dr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Dr.URL||Dr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?pK(a.href)?BI(e,t,r):kC(a,a.target="_blank"):kC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){kC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(pK(e))BI(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){kC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ha(s)!=="object"&&(Ca.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return BI(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Dr.HTMLElement)||Dr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":ha(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Dr.URL||Dr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qle(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function TI(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Ho(r,n,a,s,t[0],7,-680876936),s=Ho(s,r,n,a,t[1],12,-389564586),a=Ho(a,s,r,n,t[2],17,606105819),n=Ho(n,a,s,r,t[3],22,-1044525330),r=Ho(r,n,a,s,t[4],7,-176418897),s=Ho(s,r,n,a,t[5],12,1200080426),a=Ho(a,s,r,n,t[6],17,-1473231341),n=Ho(n,a,s,r,t[7],22,-45705983),r=Ho(r,n,a,s,t[8],7,1770035416),s=Ho(s,r,n,a,t[9],12,-1958414417),a=Ho(a,s,r,n,t[10],17,-42063),n=Ho(n,a,s,r,t[11],22,-1990404162),r=Ho(r,n,a,s,t[12],7,1804603682),s=Ho(s,r,n,a,t[13],12,-40341101),a=Ho(a,s,r,n,t[14],17,-1502002290),r=Vo(r,n=Ho(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Vo(s,r,n,a,t[6],9,-1069501632),a=Vo(a,s,r,n,t[11],14,643717713),n=Vo(n,a,s,r,t[0],20,-373897302),r=Vo(r,n,a,s,t[5],5,-701558691),s=Vo(s,r,n,a,t[10],9,38016083),a=Vo(a,s,r,n,t[15],14,-660478335),n=Vo(n,a,s,r,t[4],20,-405537848),r=Vo(r,n,a,s,t[9],5,568446438),s=Vo(s,r,n,a,t[14],9,-1019803690),a=Vo(a,s,r,n,t[3],14,-187363961),n=Vo(n,a,s,r,t[8],20,1163531501),r=Vo(r,n,a,s,t[13],5,-1444681467),s=Vo(s,r,n,a,t[2],9,-51403784),a=Vo(a,s,r,n,t[7],14,1735328473),r=zo(r,n=Vo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=zo(s,r,n,a,t[8],11,-2022574463),a=zo(a,s,r,n,t[11],16,1839030562),n=zo(n,a,s,r,t[14],23,-35309556),r=zo(r,n,a,s,t[1],4,-1530992060),s=zo(s,r,n,a,t[4],11,1272893353),a=zo(a,s,r,n,t[7],16,-155497632),n=zo(n,a,s,r,t[10],23,-1094730640),r=zo(r,n,a,s,t[13],4,681279174),s=zo(s,r,n,a,t[0],11,-358537222),a=zo(a,s,r,n,t[3],16,-722521979),n=zo(n,a,s,r,t[6],23,76029189),r=zo(r,n,a,s,t[9],4,-640364487),s=zo(s,r,n,a,t[12],11,-421815835),a=zo(a,s,r,n,t[15],16,530742520),r=$o(r,n=zo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=$o(s,r,n,a,t[7],10,1126891415),a=$o(a,s,r,n,t[14],15,-1416354905),n=$o(n,a,s,r,t[5],21,-57434055),r=$o(r,n,a,s,t[12],6,1700485571),s=$o(s,r,n,a,t[3],10,-1894986606),a=$o(a,s,r,n,t[10],15,-1051523),n=$o(n,a,s,r,t[1],21,-2054922799),r=$o(r,n,a,s,t[8],6,1873313359),s=$o(s,r,n,a,t[15],10,-30611744),a=$o(a,s,r,n,t[6],15,-1560198380),n=$o(n,a,s,r,t[13],21,1309151649),r=$o(r,n,a,s,t[4],6,-145523070),s=$o(s,r,n,a,t[11],10,-1120210379),a=$o(a,s,r,n,t[2],15,718787259),n=$o(n,a,s,r,t[9],21,-343485551),e[0]=om(r,e[0]),e[1]=om(n,e[1]),e[2]=om(a,e[2]),e[3]=om(s,e[3])}function J4(e,t,r,n,a,s){return t=om(om(t,e),om(n,s)),om(t<<a|t>>>32-a,r)}function Ho(e,t,r,n,a,s,o){return J4(t&r|~t&n,e,t,a,s,o)}function Vo(e,t,r,n,a,s,o){return J4(t&n|r&~n,e,t,a,s,o)}function zo(e,t,r,n,a,s,o){return J4(t^r^n,e,t,a,s,o)}function $o(e,t,r,n,a,s,o){return J4(r^(t|~n),e,t,a,s,o)}function Kle(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)TI(n,PWe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(TI(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,TI(n,a),n}function PWe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}F2=Dr.atob.bind(Dr),LO=Dr.btoa.bind(Dr);var gK="0123456789abcdef".split("");function RWe(e){for(var t="",r=0;r<4;r++)t+=gK[e>>8*r+4&15]+gK[e>>8*r&15];return t}function LWe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function MO(e){return Kle(e).map(LWe).join("")}var MWe=function(e){for(var t=0;t<e.length;t++)e[t]=RWe(e[t]);return e.join("")}(Kle("hello"))!="5d41402abc4b2a76b9719d911017c592";function om(e,t){if(MWe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function UO(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,o=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var xK={print:4,modify:8,copy:16,"annot-forms":32};function Av(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(xK.perm!==void 0)throw new Error("Invalid permission: "+l);a+=xK[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=MO(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=UO(this.encryptionKey,this.padding)}function hv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function vK(e){if(ha(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Dr.console&&Ca.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function IS(e){if(!(this instanceof IS))return new IS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Wle(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Hp(e,t,r,n,a){if(!(this instanceof Hp))return new Hp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Wle.call(this,n,a)}function Ev(e,t,r,n,a){if(!(this instanceof Ev))return new Ev(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Wle.call(this,n,a)}function Ar(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;ha(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=vK;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(ee){g=ee};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(ee){return v[ee]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function O(){this.saveGraphicsState(),fe(new Wt(xt,0,0,-xt,0,Qi()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",_=w.ADVANCED}function j(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var B=m.__private__.combineFontStyleAndFontWeight=function(ee,ge){if(ee=="bold"&&ge=="normal"||ee=="bold"&&ge==400||ee=="normal"&&ge=="italic"||ee=="bold"&&ge=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ge&&(ee=ge==400||ge==="normal"?ee==="italic"?"italic":"normal":ge!=700&&ge!=="bold"||ee!=="normal"?(ge==700?"bold":ge)+""+ee:"bold"),ee};m.advancedAPI=function(ee){var ge=_===w.COMPAT;return ge&&O.call(this),typeof ee!="function"||(ee(this),ge&&j.call(this)),this},m.compatAPI=function(ee){var ge=_===w.ADVANCED;return ge&&j.call(this),typeof ee!="function"||(ee(this),ge&&O.call(this)),this},m.isAdvancedAPI=function(){return _===w.ADVANCED};var C,k=function(ee){if(_!==w.ADVANCED)throw new Error(ee+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=m.roundToPrecision=m.__private__.roundToPrecision=function(ee,ge){var Ue=t||ge;if(isNaN(ee)||isNaN(Ue))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ee.toFixed(Ue).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return T(ee,c)}:c==="smart"?function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return T(ee,ee>-1&&ee<1?16:5)}:function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.hpf");return T(ee,16)};var L=m.f2=m.__private__.f2=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f2");return T(ee,2)},R=m.__private__.f3=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.f3");return T(ee,3)},S=m.scale=m.__private__.scale=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?ee*xt:_===w.ADVANCED?ee:void 0},U=function(ee){return _===w.COMPAT?Qi()-ee:_===w.ADVANCED?ee:void 0},Q=function(ee){return S(U(ee))};m.__private__.setPrecision=m.setPrecision=function(ee){typeof parseInt(ee,10)=="number"&&(t=parseInt(ee,10))};var X,z="00000000000000000000000000000000",W=m.__private__.getFileId=function(){return z},G=m.__private__.setFileId=function(ee){return z=ee!==void 0&&/^[a-fA-F0-9]{32}$/.test(ee)?ee.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ia=new Av(d.userPermissions,d.userPassword,d.ownerPassword,z)),z};m.setFileId=function(ee){return G(ee),this},m.getFileId=function(){return W()};var Y=m.__private__.convertDateToPDFDate=function(ee){var ge=ee.getTimezoneOffset(),Ue=ge<0?"+":"-",Ge=Math.floor(Math.abs(ge/60)),et=Math.abs(ge%60),wt=[Ue,q(Ge),"'",q(et),"'"].join("");return["D:",ee.getFullYear(),q(ee.getMonth()+1),q(ee.getDate()),q(ee.getHours()),q(ee.getMinutes()),q(ee.getSeconds()),wt].join("")},K=m.__private__.convertPDFDateToDate=function(ee){var ge=parseInt(ee.substr(2,4),10),Ue=parseInt(ee.substr(6,2),10)-1,Ge=parseInt(ee.substr(8,2),10),et=parseInt(ee.substr(10,2),10),wt=parseInt(ee.substr(12,2),10),Rt=parseInt(ee.substr(14,2),10);return new Date(ge,Ue,Ge,et,wt,Rt,0)},H=m.__private__.setCreationDate=function(ee){var ge;if(ee===void 0&&(ee=new Date),ee instanceof Date)ge=Y(ee);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ee))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ge=ee}return X=ge},F=m.__private__.getCreationDate=function(ee){var ge=X;return ee==="jsDate"&&(ge=K(X)),ge};m.setCreationDate=function(ee){return H(ee),this},m.getCreationDate=function(ee){return F(ee)};var D,q=m.__private__.padd2=function(ee){return("0"+parseInt(ee)).slice(-2)},J=m.__private__.padd2Hex=function(ee){return("00"+(ee=ee.toString())).substr(ee.length)},te=0,ne=[],ie=[],oe=0,de=[],ke=[],ae=!1,Oe=ie,Te=function(){te=0,oe=0,ie=[],ne=[],de=[],Be=Jn(),Fe=Jn()};m.__private__.setCustomOutputDestination=function(ee){ae=!0,Oe=ee};var Se=function(ee){ae||(Oe=ee)};m.__private__.resetCustomOutputDestination=function(){ae=!1,Oe=ie};var fe=m.__private__.out=function(ee){return ee=ee.toString(),oe+=ee.length+1,Oe.push(ee),Oe},ye=m.__private__.write=function(ee){return fe(arguments.length===1?ee.toString():Array.prototype.join.call(arguments," "))},Le=m.__private__.getArrayBuffer=function(ee){for(var ge=ee.length,Ue=new ArrayBuffer(ge),Ge=new Uint8Array(Ue);ge--;)Ge[ge]=ee.charCodeAt(ge);return Ue},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Qe};var ue=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(ee){return ue=_===w.ADVANCED?ee/xt:ee,this};var we,De=m.__private__.getFontSize=m.getFontSize=function(){return _===w.COMPAT?ue:ue*xt},He=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(ee){return He=ee,this},m.__private__.getR2L=m.getR2L=function(){return He};var Ye,tt=m.__private__.setZoomMode=function(ee){var ge=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ee))we=ee;else if(isNaN(ee)){if(ge.indexOf(ee)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ee+'" is not recognized.');we=ee}else we=parseInt(ee,10)};m.__private__.getZoomMode=function(){return we};var ft,$e=m.__private__.setPageMode=function(ee){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ee)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ee+'" is not recognized.');Ye=ee};m.__private__.getPageMode=function(){return Ye};var nt=m.__private__.setLayoutMode=function(ee){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ee)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ee+'" is not recognized.');ft=ee};m.__private__.getLayoutMode=function(){return ft},m.__private__.setDisplayMode=m.setDisplayMode=function(ee,ge,Ue){return tt(ee),nt(ge),$e(Ue),this};var bt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(ee){if(Object.keys(bt).indexOf(ee)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return bt[ee]},m.__private__.getDocumentProperties=function(){return bt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(ee){for(var ge in bt)bt.hasOwnProperty(ge)&&ee[ge]&&(bt[ge]=ee[ge]);return this},m.__private__.setDocumentProperty=function(ee,ge){if(Object.keys(bt).indexOf(ee)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return bt[ee]=ge};var Bt,xt,xr,Xt,Gr,wr={},Ur={},_n=[],jr={},hs={},qr={},Rn={},ja=null,Fr=0,fr=[],Xr=new vK(m),ms=e.hotfixes||[],Yn={},Ba={},Rs=[],Wt=function ee(ge,Ue,Ge,et,wt,Rt){if(!(this instanceof ee))return new ee(ge,Ue,Ge,et,wt,Rt);isNaN(ge)&&(ge=1),isNaN(Ue)&&(Ue=0),isNaN(Ge)&&(Ge=0),isNaN(et)&&(et=1),isNaN(wt)&&(wt=0),isNaN(Rt)&&(Rt=0),this._matrix=[ge,Ue,Ge,et,wt,Rt]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(ee){this._matrix[0]=ee}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(ee){this._matrix[1]=ee}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(ee){this._matrix[2]=ee}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(ee){this._matrix[3]=ee}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(ee){this._matrix[4]=ee}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(ee){this._matrix[5]=ee}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Wt.prototype.join=function(ee){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(ee)},Wt.prototype.multiply=function(ee){var ge=ee.sx*this.sx+ee.shy*this.shx,Ue=ee.sx*this.shy+ee.shy*this.sy,Ge=ee.shx*this.sx+ee.sy*this.shx,et=ee.shx*this.shy+ee.sy*this.sy,wt=ee.tx*this.sx+ee.ty*this.shx+this.tx,Rt=ee.tx*this.shy+ee.ty*this.sy+this.ty;return new Wt(ge,Ue,Ge,et,wt,Rt)},Wt.prototype.decompose=function(){var ee=this.sx,ge=this.shy,Ue=this.shx,Ge=this.sy,et=this.tx,wt=this.ty,Rt=Math.sqrt(ee*ee+ge*ge),qt=(ee/=Rt)*Ue+(ge/=Rt)*Ge;Ue-=ee*qt,Ge-=ge*qt;var P=Math.sqrt(Ue*Ue+Ge*Ge);return qt/=P,ee*(Ge/=P)<ge*(Ue/=P)&&(ee=-ee,ge=-ge,qt=-qt,Rt=-Rt),{scale:new Wt(Rt,0,0,P,0,0),translate:new Wt(1,0,0,1,et,wt),rotate:new Wt(ee,ge,-ge,ee,0,0),skew:new Wt(1,0,qt,1,0,0)}},Wt.prototype.toString=function(ee){return this.join(" ")},Wt.prototype.inversed=function(){var ee=this.sx,ge=this.shy,Ue=this.shx,Ge=this.sy,et=this.tx,wt=this.ty,Rt=1/(ee*Ge-ge*Ue),qt=Ge*Rt,P=-ge*Rt,se=-Ue*Rt,ce=ee*Rt;return new Wt(qt,P,se,ce,-qt*et-se*wt,-P*et-ce*wt)},Wt.prototype.applyToPoint=function(ee){var ge=ee.x*this.sx+ee.y*this.shx+this.tx,Ue=ee.x*this.shy+ee.y*this.sy+this.ty;return new od(ge,Ue)},Wt.prototype.applyToRectangle=function(ee){var ge=this.applyToPoint(ee),Ue=this.applyToPoint(new od(ee.x+ee.w,ee.y+ee.h));return new uf(ge.x,ge.y,Ue.x-ge.x,Ue.y-ge.y)},Wt.prototype.clone=function(){var ee=this.sx,ge=this.shy,Ue=this.shx,Ge=this.sy,et=this.tx,wt=this.ty;return new Wt(ee,ge,Ue,Ge,et,wt)},m.Matrix=Wt;var xn=m.matrixMult=function(ee,ge){return ge.multiply(ee)},ln=new Wt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ln;var Fn=function(ee,ge){if(!hs[ee]){var Ue=(ge instanceof Hp?"Sh":"P")+(Object.keys(jr).length+1).toString(10);ge.id=Ue,hs[ee]=Ue,jr[Ue]=ge,Xr.publish("addPattern",ge)}};m.ShadingPattern=Hp,m.TilingPattern=Ev,m.addShadingPattern=function(ee,ge){return k("addShadingPattern()"),Fn(ee,ge),this},m.beginTilingPattern=function(ee){k("beginTilingPattern()"),hu(ee.boundingBox[0],ee.boundingBox[1],ee.boundingBox[2]-ee.boundingBox[0],ee.boundingBox[3]-ee.boundingBox[1],ee.matrix)},m.endTilingPattern=function(ee,ge){k("endTilingPattern()"),ge.stream=ke[D].join(`
`),Fn(ee,ge),Xr.publish("endTilingPattern",ge),Rs.pop().restore()};var Kn=m.__private__.newObject=function(){var ee=Jn();return xe(ee,!0),ee},Jn=m.__private__.newObjectDeferred=function(){return te++,ne[te]=function(){return oe},te},xe=function(ee,ge){return ge=typeof ge=="boolean"&&ge,ne[ee]=oe,ge&&fe(ee+" 0 obj"),ee},Re=m.__private__.newAdditionalObject=function(){var ee={objId:Jn(),content:""};return de.push(ee),ee},Be=Jn(),Fe=Jn(),me=m.__private__.decodeColorString=function(ee){var ge=ee.split(" ");if(ge.length!==2||ge[1]!=="g"&&ge[1]!=="G")ge.length===5&&(ge[4]==="k"||ge[4]==="K")&&(ge=[(1-ge[0])*(1-ge[3]),(1-ge[1])*(1-ge[3]),(1-ge[2])*(1-ge[3]),"r"]);else{var Ue=parseFloat(ge[0]);ge=[Ue,Ue,Ue,"r"]}for(var Ge="#",et=0;et<3;et++)Ge+=("0"+Math.floor(255*parseFloat(ge[et])).toString(16)).slice(-2);return Ge},Ae=m.__private__.encodeColorString=function(ee){var ge;typeof ee=="string"&&(ee={ch1:ee});var Ue=ee.ch1,Ge=ee.ch2,et=ee.ch3,wt=ee.ch4,Rt=ee.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ue=="string"&&Ue.charAt(0)!=="#"){var qt=new qle(Ue);if(qt.ok)Ue=qt.toHex();else if(!/^\d*\.?\d*$/.test(Ue))throw new Error('Invalid color "'+Ue+'" passed to jsPDF.encodeColorString.')}if(typeof Ue=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ue)&&(Ue="#"+Ue[1]+Ue[1]+Ue[2]+Ue[2]+Ue[3]+Ue[3]),typeof Ue=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ue)){var P=parseInt(Ue.substr(1),16);Ue=P>>16&255,Ge=P>>8&255,et=255&P}if(Ge===void 0||wt===void 0&&Ue===Ge&&Ge===et)if(typeof Ue=="string")ge=Ue+" "+Rt[0];else switch(ee.precision){case 2:ge=L(Ue/255)+" "+Rt[0];break;case 3:default:ge=R(Ue/255)+" "+Rt[0]}else if(wt===void 0||ha(wt)==="object"){if(wt&&!isNaN(wt.a)&&wt.a===0)return ge=["1.","1.","1.",Rt[1]].join(" ");if(typeof Ue=="string")ge=[Ue,Ge,et,Rt[1]].join(" ");else switch(ee.precision){case 2:ge=[L(Ue/255),L(Ge/255),L(et/255),Rt[1]].join(" ");break;default:case 3:ge=[R(Ue/255),R(Ge/255),R(et/255),Rt[1]].join(" ")}}else if(typeof Ue=="string")ge=[Ue,Ge,et,wt,Rt[2]].join(" ");else switch(ee.precision){case 2:ge=[L(Ue),L(Ge),L(et),L(wt),Rt[2]].join(" ");break;case 3:default:ge=[R(Ue),R(Ge),R(et),R(wt),Rt[2]].join(" ")}return ge},_e=m.__private__.getFilters=function(){return o},Me=m.__private__.putStream=function(ee){var ge=(ee=ee||{}).data||"",Ue=ee.filters||_e(),Ge=ee.alreadyAppliedFilters||[],et=ee.addLength1||!1,wt=ge.length,Rt=ee.objectId,qt=function(Sr){return Sr};if(d!==null&&Rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(qt=ia.encryptor(Rt,0));var P={};Ue===!0&&(Ue=["FlateEncode"]);var se=ee.additionalKeyValues||[],ce=(P=Ar.API.processDataByFilters!==void 0?Ar.API.processDataByFilters(ge,Ue):{data:ge,reverseChain:[]}).reverseChain+(Array.isArray(Ge)?Ge.join(" "):Ge.toString());if(P.data.length!==0&&(se.push({key:"Length",value:P.data.length}),et===!0&&se.push({key:"Length1",value:wt})),ce.length!=0)if(ce.split("/").length-1==1)se.push({key:"Filter",value:ce});else{se.push({key:"Filter",value:"["+ce+"]"});for(var Ee=0;Ee<se.length;Ee+=1)if(se[Ee].key==="DecodeParms"){for(var Ze=[],ut=0;ut<P.reverseChain.split("/").length-1;ut+=1)Ze.push("null");Ze.push(se[Ee].value),se[Ee].value="["+Ze.join(" ")+"]"}}fe("<<");for(var Mt=0;Mt<se.length;Mt++)fe("/"+se[Mt].key+" "+se[Mt].value);fe(">>"),P.data.length!==0&&(fe("stream"),fe(qt(P.data)),fe("endstream"))},Ie=m.__private__.putPage=function(ee){var ge=ee.number,Ue=ee.data,Ge=ee.objId,et=ee.contentsObjId;xe(Ge,!0),fe("<</Type /Page"),fe("/Parent "+ee.rootDictionaryObjId+" 0 R"),fe("/Resources "+ee.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(C(ee.mediaBox.bottomLeftX))+" "+parseFloat(C(ee.mediaBox.bottomLeftY))+" "+C(ee.mediaBox.topRightX)+" "+C(ee.mediaBox.topRightY)+"]"),ee.cropBox!==null&&fe("/CropBox ["+C(ee.cropBox.bottomLeftX)+" "+C(ee.cropBox.bottomLeftY)+" "+C(ee.cropBox.topRightX)+" "+C(ee.cropBox.topRightY)+"]"),ee.bleedBox!==null&&fe("/BleedBox ["+C(ee.bleedBox.bottomLeftX)+" "+C(ee.bleedBox.bottomLeftY)+" "+C(ee.bleedBox.topRightX)+" "+C(ee.bleedBox.topRightY)+"]"),ee.trimBox!==null&&fe("/TrimBox ["+C(ee.trimBox.bottomLeftX)+" "+C(ee.trimBox.bottomLeftY)+" "+C(ee.trimBox.topRightX)+" "+C(ee.trimBox.topRightY)+"]"),ee.artBox!==null&&fe("/ArtBox ["+C(ee.artBox.bottomLeftX)+" "+C(ee.artBox.bottomLeftY)+" "+C(ee.artBox.topRightX)+" "+C(ee.artBox.topRightY)+"]"),typeof ee.userUnit=="number"&&ee.userUnit!==1&&fe("/UserUnit "+ee.userUnit),Xr.publish("putPage",{objId:Ge,pageContext:fr[ge],pageNumber:ge,page:Ue}),fe("/Contents "+et+" 0 R"),fe(">>"),fe("endobj");var wt=Ue.join(`
`);return _===w.ADVANCED&&(wt+=`
Q`),xe(et,!0),Me({data:wt,filters:_e(),objectId:et}),fe("endobj"),Ge},ze=m.__private__.putPages=function(){var ee,ge,Ue=[];for(ee=1;ee<=Fr;ee++)fr[ee].objId=Jn(),fr[ee].contentsObjId=Jn();for(ee=1;ee<=Fr;ee++)Ue.push(Ie({number:ee,data:ke[ee],objId:fr[ee].objId,contentsObjId:fr[ee].contentsObjId,mediaBox:fr[ee].mediaBox,cropBox:fr[ee].cropBox,bleedBox:fr[ee].bleedBox,trimBox:fr[ee].trimBox,artBox:fr[ee].artBox,userUnit:fr[ee].userUnit,rootDictionaryObjId:Be,resourceDictionaryObjId:Fe}));xe(Be,!0),fe("<</Type /Pages");var Ge="/Kids [";for(ge=0;ge<Fr;ge++)Ge+=Ue[ge]+" 0 R ";fe(Ge+"]"),fe("/Count "+Fr),fe(">>"),fe("endobj"),Xr.publish("postPutPages")},qe=function(ee){Xr.publish("putFont",{font:ee,out:fe,newObject:Kn,putStream:Me}),ee.isAlreadyPutted!==!0&&(ee.objectNumber=Kn(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+hv(ee.postScriptName)),fe("/Subtype /Type1"),typeof ee.encoding=="string"&&fe("/Encoding /"+ee.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},vt=function(){for(var ee in wr)wr.hasOwnProperty(ee)&&(f===!1||f===!0&&h.hasOwnProperty(ee))&&qe(wr[ee])},yt=function(ee){ee.objectNumber=Kn();var ge=[];ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Form"}),ge.push({key:"BBox",value:"["+[C(ee.x),C(ee.y),C(ee.x+ee.width),C(ee.y+ee.height)].join(" ")+"]"}),ge.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"});var Ue=ee.pages[1].join(`
`);Me({data:Ue,additionalKeyValues:ge,objectId:ee.objectNumber}),fe("endobj")},Ut=function(){for(var ee in Yn)Yn.hasOwnProperty(ee)&&yt(Yn[ee])},kt=function(ee,ge){var Ue,Ge=[],et=1/(ge-1);for(Ue=0;Ue<1;Ue+=et)Ge.push(Ue);if(Ge.push(1),ee[0].offset!=0){var wt={offset:0,color:ee[0].color};ee.unshift(wt)}if(ee[ee.length-1].offset!=1){var Rt={offset:1,color:ee[ee.length-1].color};ee.push(Rt)}for(var qt="",P=0,se=0;se<Ge.length;se++){for(Ue=Ge[se];Ue>ee[P+1].offset;)P++;var ce=ee[P].offset,Ee=(Ue-ce)/(ee[P+1].offset-ce),Ze=ee[P].color,ut=ee[P+1].color;qt+=J(Math.round((1-Ee)*Ze[0]+Ee*ut[0]).toString(16))+J(Math.round((1-Ee)*Ze[1]+Ee*ut[1]).toString(16))+J(Math.round((1-Ee)*Ze[2]+Ee*ut[2]).toString(16))}return qt.trim()},Qt=function(ee,ge){ge||(ge=21);var Ue=Kn(),Ge=kt(ee.colors,ge),et=[];et.push({key:"FunctionType",value:"0"}),et.push({key:"Domain",value:"[0.0 1.0]"}),et.push({key:"Size",value:"["+ge+"]"}),et.push({key:"BitsPerSample",value:"8"}),et.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),et.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me({data:Ge,additionalKeyValues:et,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ue}),fe("endobj"),ee.objectNumber=Kn(),fe("<< /ShadingType "+ee.type),fe("/ColorSpace /DeviceRGB");var wt="/Coords ["+C(parseFloat(ee.coords[0]))+" "+C(parseFloat(ee.coords[1]))+" ";ee.type===2?wt+=C(parseFloat(ee.coords[2]))+" "+C(parseFloat(ee.coords[3])):wt+=C(parseFloat(ee.coords[2]))+" "+C(parseFloat(ee.coords[3]))+" "+C(parseFloat(ee.coords[4]))+" "+C(parseFloat(ee.coords[5])),fe(wt+="]"),ee.matrix&&fe("/Matrix ["+ee.matrix.toString()+"]"),fe("/Function "+Ue+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},Nr=function(ee,ge){var Ue=Jn(),Ge=Kn();ge.push({resourcesOid:Ue,objectOid:Ge}),ee.objectNumber=Ge;var et=[];et.push({key:"Type",value:"/Pattern"}),et.push({key:"PatternType",value:"1"}),et.push({key:"PaintType",value:"1"}),et.push({key:"TilingType",value:"1"}),et.push({key:"BBox",value:"["+ee.boundingBox.map(C).join(" ")+"]"}),et.push({key:"XStep",value:C(ee.xStep)}),et.push({key:"YStep",value:C(ee.yStep)}),et.push({key:"Resources",value:Ue+" 0 R"}),ee.matrix&&et.push({key:"Matrix",value:"["+ee.matrix.toString()+"]"}),Me({data:ee.stream,additionalKeyValues:et,objectId:ee.objectNumber}),fe("endobj")},Jr=function(ee){var ge;for(ge in jr)jr.hasOwnProperty(ge)&&(jr[ge]instanceof Hp?Qt(jr[ge]):jr[ge]instanceof Ev&&Nr(jr[ge],ee))},Zr=function(ee){for(var ge in ee.objectNumber=Kn(),fe("<<"),ee)switch(ge){case"opacity":fe("/ca "+L(ee[ge]));break;case"stroke-opacity":fe("/CA "+L(ee[ge]))}fe(">>"),fe("endobj")},an=function(){var ee;for(ee in qr)qr.hasOwnProperty(ee)&&Zr(qr[ee])},ps=function(){for(var ee in fe("/XObject <<"),Yn)Yn.hasOwnProperty(ee)&&Yn[ee].objectNumber>=0&&fe("/"+ee+" "+Yn[ee].objectNumber+" 0 R");Xr.publish("putXobjectDict"),fe(">>")},ko=function(){ia.oid=Kn(),fe("<<"),fe("/Filter /Standard"),fe("/V "+ia.v),fe("/R "+ia.r),fe("/U <"+ia.toHexString(ia.U)+">"),fe("/O <"+ia.toHexString(ia.O)+">"),fe("/P "+ia.P),fe(">>"),fe("endobj")},gs=function(){for(var ee in fe("/Font <<"),wr)wr.hasOwnProperty(ee)&&(f===!1||f===!0&&h.hasOwnProperty(ee))&&fe("/"+ee+" "+wr[ee].objectNumber+" 0 R");fe(">>")},ni=function(){if(Object.keys(jr).length>0){for(var ee in fe("/Shading <<"),jr)jr.hasOwnProperty(ee)&&jr[ee]instanceof Hp&&jr[ee].objectNumber>=0&&fe("/"+ee+" "+jr[ee].objectNumber+" 0 R");Xr.publish("putShadingPatternDict"),fe(">>")}},Ls=function(ee){if(Object.keys(jr).length>0){for(var ge in fe("/Pattern <<"),jr)jr.hasOwnProperty(ge)&&jr[ge]instanceof m.TilingPattern&&jr[ge].objectNumber>=0&&jr[ge].objectNumber<ee&&fe("/"+ge+" "+jr[ge].objectNumber+" 0 R");Xr.publish("putTilingPatternDict"),fe(">>")}},wi=function(){if(Object.keys(qr).length>0){var ee;for(ee in fe("/ExtGState <<"),qr)qr.hasOwnProperty(ee)&&qr[ee].objectNumber>=0&&fe("/"+ee+" "+qr[ee].objectNumber+" 0 R");Xr.publish("putGStateDict"),fe(">>")}},ma=function(ee){xe(ee.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),gs(),ni(),Ls(ee.objectOid),wi(),ps(),fe(">>"),fe("endobj")},ai=function(){var ee=[];vt(),an(),Ut(),Jr(ee),Xr.publish("putResources"),ee.forEach(ma),ma({resourcesOid:Fe,objectOid:Number.MAX_SAFE_INTEGER}),Xr.publish("postPutResources")},af=function(){Xr.publish("putAdditionalObjects");for(var ee=0;ee<de.length;ee++){var ge=de[ee];xe(ge.objId,!0),fe(ge.content),fe("endobj")}Xr.publish("postPutAdditionalObjects")},Jh=function(ee){Ur[ee.fontName]=Ur[ee.fontName]||{},Ur[ee.fontName][ee.fontStyle]=ee.id},su=function(ee,ge,Ue,Ge,et){var wt={id:"F"+(Object.keys(wr).length+1).toString(10),postScriptName:ee,fontName:ge,fontStyle:Ue,encoding:Ge,isStandardFont:et||!1,metadata:{}};return Xr.publish("addFont",{font:wt,instance:this}),wr[wt.id]=wt,Jh(wt),wt.id},vA=function(ee){for(var ge=0,Ue=Qe.length;ge<Ue;ge++){var Ge=su.call(this,ee[ge][0],ee[ge][1],ee[ge][2],Qe[ge][3],!0);f===!1&&(h[Ge]=!0);var et=ee[ge][0].split("-");Jh({id:Ge,fontName:et[0],fontStyle:et[1]||""})}Xr.publish("addFonts",{fonts:wr,dictionary:Ur})},Ni=function(ee){return ee.foo=function(){try{return ee.apply(this,arguments)}catch(Ge){var ge=Ge.stack||"";~ge.indexOf(" at ")&&(ge=ge.split(" at ")[1]);var Ue="Error in function "+ge.split(`
`)[0].split("<")[0]+": "+Ge.message;if(!Dr.console)throw new Error(Ue);Dr.console.error(Ue,Ge),Dr.alert&&alert(Ue)}},ee.foo.bar=ee,ee.foo},sf=function(ee,ge){var Ue,Ge,et,wt,Rt,qt,P,se,ce;if(et=(ge=ge||{}).sourceEncoding||"Unicode",Rt=ge.outputEncoding,(ge.autoencode||Rt)&&wr[Bt].metadata&&wr[Bt].metadata[et]&&wr[Bt].metadata[et].encoding&&(wt=wr[Bt].metadata[et].encoding,!Rt&&wr[Bt].encoding&&(Rt=wr[Bt].encoding),!Rt&&wt.codePages&&(Rt=wt.codePages[0]),typeof Rt=="string"&&(Rt=wt[Rt]),Rt)){for(P=!1,qt=[],Ue=0,Ge=ee.length;Ue<Ge;Ue++)(se=Rt[ee.charCodeAt(Ue)])?qt.push(String.fromCharCode(se)):qt.push(ee[Ue]),qt[Ue].charCodeAt(0)>>8&&(P=!0);ee=qt.join("")}for(Ue=ee.length;P===void 0&&Ue!==0;)ee.charCodeAt(Ue-1)>>8&&(P=!0),Ue--;if(!P)return ee;for(qt=ge.noBOM?[]:[254,255],Ue=0,Ge=ee.length;Ue<Ge;Ue++){if((ce=(se=ee.charCodeAt(Ue))>>8)>>8)throw new Error("Character at position "+Ue+" of string '"+ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(ce),qt.push(se-(ce<<8))}return String.fromCharCode.apply(void 0,qt)},Sn=m.__private__.pdfEscape=m.pdfEscape=function(ee,ge){return sf(ee,ge).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ei=m.__private__.beginPage=function(ee){ke[++Fr]=[],fr[Fr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ee[0]),topRightY:Number(ee[1])}},Fl(Fr),Se(ke[D])},iu=function(ee,ge){var Ue,Ge,et;switch(r=ge||r,typeof ee=="string"&&(Ue=y(ee.toLowerCase()),Array.isArray(Ue)&&(Ge=Ue[0],et=Ue[1])),Array.isArray(ee)&&(Ge=ee[0]*xt,et=ee[1]*xt),isNaN(Ge)&&(Ge=a[0],et=a[1]),(Ge>14400||et>14400)&&(Ca.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ge=Math.min(14400,Ge),et=Math.min(14400,et)),a=[Ge,et],r.substr(0,1)){case"l":et>Ge&&(a=[et,Ge]);break;case"p":Ge>et&&(a=[et,Ge])}Ei(a),NA(uu),fe(Ci),EA!==0&&fe(EA+" J"),id!==0&&fe(id+" j"),Xr.publish("addPage",{pageNumber:Fr})},ou=function(ee){ee>0&&ee<=Fr&&(ke.splice(ee,1),fr.splice(ee,1),Fr--,D>Fr&&(D=Fr),this.setPage(D))},Fl=function(ee){ee>0&&ee<=Fr&&(D=ee)},Ln=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ke.length-1},lu=function(ee,ge,Ue){var Ge,et=void 0;return Ue=Ue||{},ee=ee!==void 0?ee:wr[Bt].fontName,ge=ge!==void 0?ge:wr[Bt].fontStyle,Ge=ee.toLowerCase(),Ur[Ge]!==void 0&&Ur[Ge][ge]!==void 0?et=Ur[Ge][ge]:Ur[ee]!==void 0&&Ur[ee][ge]!==void 0?et=Ur[ee][ge]:Ue.disableWarning===!1&&Ca.warn("Unable to look up font label for font '"+ee+"', '"+ge+"'. Refer to getFontList() for available fonts."),et||Ue.noFallback||(et=Ur.times[ge])==null&&(et=Ur.times.normal),et},jo=m.__private__.putInfo=function(){var ee=Kn(),ge=function(Ge){return Ge};for(var Ue in d!==null&&(ge=ia.encryptor(ee,0)),fe("<<"),fe("/Producer ("+Sn(ge("jsPDF "+Ar.version))+")"),bt)bt.hasOwnProperty(Ue)&&bt[Ue]&&fe("/"+Ue.substr(0,1).toUpperCase()+Ue.substr(1)+" ("+Sn(ge(bt[Ue]))+")");fe("/CreationDate ("+Sn(ge(X))+")"),fe(">>"),fe("endobj")},hc=m.__private__.putCatalog=function(ee){var ge=(ee=ee||{}).rootDictionaryObjId||Be;switch(Kn(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+ge+" 0 R"),we||(we="fullwidth"),we){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ue=""+we;Ue.substr(Ue.length-1)==="%"&&(we=parseInt(we)/100),typeof we=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+L(we)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Ye&&fe("/PageMode /"+Ye),Xr.publish("putCatalog"),fe(">>"),fe("endobj")},Zh=m.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(te+1)),fe("/Root "+te+" 0 R"),fe("/Info "+(te-1)+" 0 R"),d!==null&&fe("/Encrypt "+ia.oid+" 0 R"),fe("/ID [ <"+z+"> <"+z+"> ]"),fe(">>")},bA=m.__private__.putHeader=function(){fe("%PDF-"+g),fe("%ºß¬à")},yA=m.__private__.putXRef=function(){var ee="0000000000";fe("xref"),fe("0 "+(te+1)),fe("0000000000 65535 f ");for(var ge=1;ge<=te;ge++)typeof ne[ge]=="function"?fe((ee+ne[ge]()).slice(-10)+" 00000 n "):ne[ge]!==void 0?fe((ee+ne[ge]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},mc=m.__private__.buildDocument=function(){Te(),Se(ie),Xr.publish("buildDocument"),bA(),ze(),af(),ai(),d!==null&&ko(),jo(),hc();var ee=oe;return yA(),Zh(),fe("startxref"),fe(""+ee),fe("%%EOF"),Se(ke[D]),ie.join(`
`)},of=m.__private__.getBlob=function(ee){return new Blob([Le(ee)],{type:"application/pdf"})},pc=m.output=m.__private__.output=Ni(function(ee,ge){switch(typeof(ge=ge||{})=="string"?ge={filename:ge}:ge.filename=ge.filename||"generated.pdf",ee){case void 0:return mc();case"save":m.save(ge.filename);break;case"arraybuffer":return Le(mc());case"blob":return of(mc());case"bloburi":case"bloburl":if(Dr.URL!==void 0&&typeof Dr.URL.createObjectURL=="function")return Dr.URL&&Dr.URL.createObjectURL(of(mc()))||void 0;Ca.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ue="",Ge=mc();try{Ue=LO(Ge)}catch{Ue=LO(unescape(encodeURIComponent(Ge)))}return"data:application/pdf;filename="+ge.filename+";base64,"+Ue;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var et="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",wt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ge.pdfObjectUrl&&(et=ge.pdfObjectUrl,wt="");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+et+'"'+wt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ge)+");<\/script></body></html>",qt=Dr.open();return qt!==null&&qt.document.write(Rt),qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var P='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ge.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ge.filename+'" width="500px" height="400px" /></body></html>',se=Dr.open();if(se!==null){se.document.write(P);var ce=this;se.document.documentElement.querySelector("#pdfViewer").onload=function(){se.document.title=ge.filename,se.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ce.output("bloburl"))}}return se}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ee='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ge)+'"></iframe></body></html>',Ze=Dr.open();if(Ze!==null&&(Ze.document.write(Ee),Ze.document.title=ge.filename),Ze||typeof safari>"u")return Ze;break;case"datauri":case"dataurl":return Dr.document.location.href=this.output("datauristring",ge);default:return null}}),Ol=function(ee){return Array.isArray(ms)===!0&&ms.indexOf(ee)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Ol("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var ia=null;H(),G();var gc=function(ee){return d!==null?ia.encryptor(ee,0):function(ge){return ge}},Dl=m.__private__.getPageInfo=m.getPageInfo=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:fr[ee].objId,pageNumber:ee,pageContext:fr[ee]}},_r=m.__private__.getPageInfoByObjId=function(ee){if(isNaN(ee)||ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ge in fr)if(fr[ge].objId===ee)break;return Dl(ge)},Pl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:fr[D].objId,pageNumber:D,pageContext:fr[D]}};m.addPage=function(){return iu.apply(this,arguments),this},m.setPage=function(){return Fl.apply(this,arguments),Se.call(this,ke[D]),this},m.insertPage=function(ee){return this.addPage(),this.movePage(D,ee),this},m.movePage=function(ee,ge){var Ue,Ge;if(ee>ge){Ue=ke[ee],Ge=fr[ee];for(var et=ee;et>ge;et--)ke[et]=ke[et-1],fr[et]=fr[et-1];ke[ge]=Ue,fr[ge]=Ge,this.setPage(ge)}else if(ee<ge){Ue=ke[ee],Ge=fr[ee];for(var wt=ee;wt<ge;wt++)ke[wt]=ke[wt+1],fr[wt]=fr[wt+1];ke[ge]=Ue,fr[ge]=Ge,this.setPage(ge)}return this},m.deletePage=function(){return ou.apply(this,arguments),this},m.__private__.text=m.text=function(ee,ge,Ue,Ge,et){var wt,Rt,qt,P,se,ce,Ee,Ze,ut,Mt=(Ge=Ge||{}).scope||this;if(typeof ee=="number"&&typeof ge=="number"&&(typeof Ue=="string"||Array.isArray(Ue))){var Sr=Ue;Ue=ge,ge=ee,ee=Sr}if(arguments[3]instanceof Wt?(k("The transform parameter of text() with a Matrix value"),ut=et):(qt=arguments[4],P=arguments[5],ha(Ee=arguments[3])==="object"&&Ee!==null||(typeof qt=="string"&&(P=qt,qt=null),typeof Ee=="string"&&(P=Ee,Ee=null),typeof Ee=="number"&&(qt=Ee,Ee=null),Ge={flags:Ee,angle:qt,align:P})),isNaN(ge)||isNaN(Ue)||ee==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ee.length===0)return Mt;var hn="",Vr=!1,Mn=typeof Ge.lineHeightFactor=="number"?Ge.lineHeightFactor:An,Zn=Mt.internal.scaleFactor;function Ul(cn){return cn=cn.split("	").join(Array(Ge.TabLen||9).join(" ")),Sn(cn,Ee)}function rs(cn){for(var un,pa=cn.concat(),ns=[],Hl=pa.length;Hl--;)typeof(un=pa.shift())=="string"?ns.push(un):Array.isArray(cn)&&(un.length===1||un[1]===void 0&&un[2]===void 0)?ns.push(un[0]):ns.push([un[0],un[1],un[2]]);return ns}function Fo(cn,un){var pa;if(typeof cn=="string")pa=un(cn)[0];else if(Array.isArray(cn)){for(var ns,Hl,yf=cn.concat(),wf=[],fd=yf.length;fd--;)typeof(ns=yf.shift())=="string"?wf.push(un(ns)[0]):Array.isArray(ns)&&typeof ns[0]=="string"&&(Hl=un(ns[0],ns[1],ns[2]),wf.push([Hl[0],Hl[1],Hl[2]]));pa=wf}return pa}var pu=!1,ff=!0;if(typeof ee=="string")pu=!0;else if(Array.isArray(ee)){var n0=ee.concat();Rt=[];for(var CA,Ms=n0.length;Ms--;)(typeof(CA=n0.shift())!="string"||Array.isArray(CA)&&typeof CA[0]!="string")&&(ff=!1);pu=ff}if(pu===!1)throw new Error('Type of text must be string or Array. "'+ee+'" is not recognized.');typeof ee=="string"&&(ee=ee.match(/[\r?\n]/)?ee.split(/\r\n|\r|\n/g):[ee]);var Af=ue/Mt.internal.scaleFactor,_A=Af*(Mn-1);switch(Ge.baseline){case"bottom":Ue-=_A;break;case"top":Ue+=Af-_A;break;case"hanging":Ue+=Af-2*_A;break;case"middle":Ue+=Af/2-_A}if((ce=Ge.maxWidth||0)>0&&(typeof ee=="string"?ee=Mt.splitTextToSize(ee,ce):Object.prototype.toString.call(ee)==="[object Array]"&&(ee=ee.reduce(function(cn,un){return cn.concat(Mt.splitTextToSize(un,ce))},[]))),wt={text:ee,x:ge,y:Ue,options:Ge,mutex:{pdfEscape:Sn,activeFontKey:Bt,fonts:wr,activeFontSize:ue}},Xr.publish("preProcessText",wt),ee=wt.text,qt=(Ge=wt.options).angle,!(ut instanceof Wt)&&qt&&typeof qt=="number"){qt*=Math.PI/180,Ge.rotationDirection===0&&(qt=-qt),_===w.ADVANCED&&(qt=-qt);var SA=Math.cos(qt),a0=Math.sin(qt);ut=new Wt(SA,a0,-a0,SA,0,0)}else qt&&qt instanceof Wt&&(ut=qt);_!==w.ADVANCED||ut||(ut=ln),(se=Ge.charSpace||sd)!==void 0&&(hn+=C(S(se))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ze=Ge.horizontalScale)!==void 0&&(hn+=C(100*Ze)+` Tz
`),Ge.lang;var Oo=-1,_1=Ge.renderingMode!==void 0?Ge.renderingMode:Ge.stroke,ip=Mt.internal.getCurrentPageInfo().pageContext;switch(_1){case 0:case!1:case"fill":Oo=0;break;case 1:case!0:case"stroke":Oo=1;break;case 2:case"fillThenStroke":Oo=2;break;case 3:case"invisible":Oo=3;break;case 4:case"fillAndAddForClipping":Oo=4;break;case 5:case"strokeAndAddPathForClipping":Oo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Oo=6;break;case 7:case"addToPathForClipping":Oo=7}var sx=ip.usedRenderingMode!==void 0?ip.usedRenderingMode:-1;Oo!==-1?hn+=Oo+` Tr
`:sx!==-1&&(hn+=`0 Tr
`),Oo!==-1&&(ip.usedRenderingMode=Oo),P=Ge.align||"left";var Ql,si=ue*Mn,hf=Mt.internal.pageSize.getWidth(),op=wr[Bt];se=Ge.charSpace||sd,ce=Ge.maxWidth||0,Ee=Object.assign({autoencode:!0,noBOM:!0},Ge.flags);var ud=[],mf=function(cn){return Mt.getStringUnitWidth(cn,{font:op,charSpace:se,fontSize:ue,doKerning:!1})*ue/Zn};if(Object.prototype.toString.call(ee)==="[object Array]"){var co;Rt=rs(ee),P!=="left"&&(Ql=Rt.map(mf));var _i,pf=0;if(P==="right"){ge-=Ql[0],ee=[],Ms=Rt.length;for(var Do=0;Do<Ms;Do++)Do===0?(_i=Ui(ge),co=vs(Ue)):(_i=S(pf-Ql[Do]),co=-si),ee.push([Rt[Do],_i,co]),pf=Ql[Do]}else if(P==="center"){ge-=Ql[0]/2,ee=[],Ms=Rt.length;for(var yc=0;yc<Ms;yc++)yc===0?(_i=Ui(ge),co=vs(Ue)):(_i=S((pf-Ql[yc])/2),co=-si),ee.push([Rt[yc],_i,co]),pf=Ql[yc]}else if(P==="left"){ee=[],Ms=Rt.length;for(var gu=0;gu<Ms;gu++)ee.push(Rt[gu])}else if(P==="justify"&&op.encoding==="Identity-H"){ee=[],Ms=Rt.length,ce=ce!==0?ce:hf;for(var wc=0,Ka=0;Ka<Ms;Ka++)if(co=Ka===0?vs(Ue):-si,_i=Ka===0?Ui(ge):wc,Ka<Ms-1){var Nc=S((ce-Ql[Ka])/(Rt[Ka].split(" ").length-1)),bs=Rt[Ka].split(" ");ee.push([bs[0]+" ",_i,co]),wc=0;for(var Po=1;Po<bs.length;Po++){var kA=(mf(bs[Po-1]+" "+bs[Po])-mf(bs[Po]))*Zn+Nc;Po==bs.length-1?ee.push([bs[Po],kA,0]):ee.push([bs[Po]+" ",kA,0]),wc-=kA}}else ee.push([Rt[Ka],_i,co]);ee.push(["",wc,0])}else{if(P!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ee=[],Ms=Rt.length,ce=ce!==0?ce:hf,Ka=0;Ka<Ms;Ka++)co=Ka===0?vs(Ue):-si,_i=Ka===0?Ui(ge):0,Ka<Ms-1?ud.push(C(S((ce-Ql[Ka])/(Rt[Ka].split(" ").length-1)))):ud.push(0),ee.push([Rt[Ka],_i,co])}}var xu=typeof Ge.R2L=="boolean"?Ge.R2L:He;xu===!0&&(ee=Fo(ee,function(cn,un,pa){return[cn.split("").reverse().join(""),un,pa]})),wt={text:ee,x:ge,y:Ue,options:Ge,mutex:{pdfEscape:Sn,activeFontKey:Bt,fonts:wr,activeFontSize:ue}},Xr.publish("postProcessText",wt),ee=wt.text,Vr=wt.mutex.isHex||!1;var s0=wr[Bt].encoding;s0!=="WinAnsiEncoding"&&s0!=="StandardEncoding"||(ee=Fo(ee,function(cn,un,pa){return[Ul(cn),un,pa]})),Rt=rs(ee),ee=[];for(var gf,xf,vf,jA=0,i0=1,bf=Array.isArray(Rt[0])?i0:jA,dd="",BA=function(cn,un,pa){var ns="";return pa instanceof Wt?(pa=typeof Ge.angle=="number"?xn(pa,new Wt(1,0,0,1,cn,un)):xn(new Wt(1,0,0,1,cn,un),pa),_===w.ADVANCED&&(pa=xn(new Wt(1,0,0,-1,0,0),pa)),ns=pa.join(" ")+` Tm
`):ns=C(cn)+" "+C(un)+` Td
`,ns},Wa=0;Wa<Rt.length;Wa++){switch(dd="",bf){case i0:vf=(Vr?"<":"(")+Rt[Wa][0]+(Vr?">":")"),gf=parseFloat(Rt[Wa][1]),xf=parseFloat(Rt[Wa][2]);break;case jA:vf=(Vr?"<":"(")+Rt[Wa]+(Vr?">":")"),gf=Ui(ge),xf=vs(Ue)}ud!==void 0&&ud[Wa]!==void 0&&(dd=ud[Wa]+` Tw
`),Wa===0?ee.push(dd+BA(gf,xf,ut)+vf):bf===jA?ee.push(dd+vf):bf===i0&&ee.push(dd+BA(gf,xf,ut)+vf)}ee=bf===jA?ee.join(` Tj
T* `):ee.join(` Tj
`),ee+=` Tj
`;var ml=`BT
/`;return ml+=Bt+" "+ue+` Tf
`,ml+=C(ue*Mn)+` TL
`,ml+=vc+`
`,ml+=hn,ml+=ee,fe(ml+="ET"),h[Bt]=!0,Mt};var e0=m.__private__.clip=m.clip=function(ee){return fe(ee==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return e0("evenodd")},m.__private__.discardPath=m.discardPath=function(){return fe("n"),this};var Li=m.__private__.isValidStyle=function(ee){var ge=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ee)!==-1&&(ge=!0),ge};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(ee){return Li(ee)&&(u=ee),this};var Bo=m.__private__.getStyle=m.getStyle=function(ee){var ge=u;switch(ee){case"D":case"S":ge="S";break;case"F":ge="f";break;case"FD":case"DF":ge="B";break;case"f":case"f*":case"B":case"B*":ge=ee}return ge},lo=m.close=function(){return fe("h"),this};m.stroke=function(){return fe("S"),this},m.fill=function(ee){return Rl("f",ee),this},m.fillEvenOdd=function(ee){return Rl("f*",ee),this},m.fillStroke=function(ee){return Rl("B",ee),this},m.fillStrokeEvenOdd=function(ee){return Rl("B*",ee),this};var Rl=function(ee,ge){ha(ge)==="object"?xc(ge,ee):fe(ee)},To=function(ee){ee===null||_===w.ADVANCED&&ee===void 0||(ee=Bo(ee),fe(ee))};function cu(ee,ge,Ue,Ge,et){var wt=new Ev(ge||this.boundingBox,Ue||this.xStep,Ge||this.yStep,this.gState,et||this.matrix);wt.stream=this.stream;var Rt=ee+"$$"+this.cloneIndex+++"$$";return Fn(Rt,wt),wt}var xc=function(ee,ge){var Ue=hs[ee.key],Ge=jr[Ue];if(Ge instanceof Hp)fe("q"),fe(wA(ge)),Ge.gState&&m.setGState(Ge.gState),fe(ee.matrix.toString()+" cm"),fe("/"+Ue+" sh"),fe("Q");else if(Ge instanceof Ev){var et=new Wt(1,0,0,-1,0,Qi());ee.matrix&&(et=et.multiply(ee.matrix||ln),Ue=cu.call(Ge,ee.key,ee.boundingBox,ee.xStep,ee.yStep,et).id),fe("q"),fe("/Pattern cs"),fe("/"+Ue+" scn"),Ge.gState&&m.setGState(Ge.gState),fe(ge),fe("Q")}},wA=function(ee){switch(ee){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Io=m.moveTo=function(ee,ge){return fe(C(S(ee))+" "+C(Q(ge))+" m"),this},Mi=m.lineTo=function(ee,ge){return fe(C(S(ee))+" "+C(Q(ge))+" l"),this},Ll=m.curveTo=function(ee,ge,Ue,Ge,et,wt){return fe([C(S(ee)),C(Q(ge)),C(S(Ue)),C(Q(Ge)),C(S(et)),C(Q(wt)),"c"].join(" ")),this};m.__private__.line=m.line=function(ee,ge,Ue,Ge,et){if(isNaN(ee)||isNaN(ge)||isNaN(Ue)||isNaN(Ge)||!Li(et))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[Ue-ee,Ge-ge]],ee,ge,[1,1],et||"S"):this.lines([[Ue-ee,Ge-ge]],ee,ge,[1,1]).stroke()},m.__private__.lines=m.lines=function(ee,ge,Ue,Ge,et,wt){var Rt,qt,P,se,ce,Ee,Ze,ut,Mt,Sr,hn,Vr;if(typeof ee=="number"&&(Vr=Ue,Ue=ge,ge=ee,ee=Vr),Ge=Ge||[1,1],wt=wt||!1,isNaN(ge)||isNaN(Ue)||!Array.isArray(ee)||!Array.isArray(Ge)||!Li(et)||typeof wt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Io(ge,Ue),Rt=Ge[0],qt=Ge[1],se=ee.length,Sr=ge,hn=Ue,P=0;P<se;P++)(ce=ee[P]).length===2?(Sr=ce[0]*Rt+Sr,hn=ce[1]*qt+hn,Mi(Sr,hn)):(Ee=ce[0]*Rt+Sr,Ze=ce[1]*qt+hn,ut=ce[2]*Rt+Sr,Mt=ce[3]*qt+hn,Sr=ce[4]*Rt+Sr,hn=ce[5]*qt+hn,Ll(Ee,Ze,ut,Mt,Sr,hn));return wt&&lo(),To(et),this},m.path=function(ee){for(var ge=0;ge<ee.length;ge++){var Ue=ee[ge],Ge=Ue.c;switch(Ue.op){case"m":Io(Ge[0],Ge[1]);break;case"l":Mi(Ge[0],Ge[1]);break;case"c":Ll.apply(this,Ge);break;case"h":lo()}}return this},m.__private__.rect=m.rect=function(ee,ge,Ue,Ge,et){if(isNaN(ee)||isNaN(ge)||isNaN(Ue)||isNaN(Ge)||!Li(et))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Ge=-Ge),fe([C(S(ee)),C(Q(ge)),C(S(Ue)),C(S(Ge)),"re"].join(" ")),To(et),this},m.__private__.triangle=m.triangle=function(ee,ge,Ue,Ge,et,wt,Rt){if(isNaN(ee)||isNaN(ge)||isNaN(Ue)||isNaN(Ge)||isNaN(et)||isNaN(wt)||!Li(Rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ue-ee,Ge-ge],[et-Ue,wt-Ge],[ee-et,ge-wt]],ee,ge,[1,1],Rt,!0),this},m.__private__.roundedRect=m.roundedRect=function(ee,ge,Ue,Ge,et,wt,Rt){if(isNaN(ee)||isNaN(ge)||isNaN(Ue)||isNaN(Ge)||isNaN(et)||isNaN(wt)||!Li(Rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qt=4/3*(Math.SQRT2-1);return et=Math.min(et,.5*Ue),wt=Math.min(wt,.5*Ge),this.lines([[Ue-2*et,0],[et*qt,0,et,wt-wt*qt,et,wt],[0,Ge-2*wt],[0,wt*qt,-et*qt,wt,-et,wt],[2*et-Ue,0],[-et*qt,0,-et,-wt*qt,-et,-wt],[0,2*wt-Ge],[0,-wt*qt,et*qt,-wt,et,-wt]],ee+et,ge,[1,1],Rt,!0),this},m.__private__.ellipse=m.ellipse=function(ee,ge,Ue,Ge,et){if(isNaN(ee)||isNaN(ge)||isNaN(Ue)||isNaN(Ge)||!Li(et))throw new Error("Invalid arguments passed to jsPDF.ellipse");var wt=4/3*(Math.SQRT2-1)*Ue,Rt=4/3*(Math.SQRT2-1)*Ge;return Io(ee+Ue,ge),Ll(ee+Ue,ge-Rt,ee+wt,ge-Ge,ee,ge-Ge),Ll(ee-wt,ge-Ge,ee-Ue,ge-Rt,ee-Ue,ge),Ll(ee-Ue,ge+Rt,ee-wt,ge+Ge,ee,ge+Ge),Ll(ee+wt,ge+Ge,ee+Ue,ge+Rt,ee+Ue,ge),To(et),this},m.__private__.circle=m.circle=function(ee,ge,Ue,Ge){if(isNaN(ee)||isNaN(ge)||isNaN(Ue)||!Li(Ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ee,ge,Ue,Ue,Ge)},m.setFont=function(ee,ge,Ue){return Ue&&(ge=B(ge,Ue)),Bt=lu(ee,ge,{disableWarning:!1}),this};var xs=m.__private__.getFont=m.getFont=function(){return wr[lu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var ee,ge,Ue={};for(ee in Ur)if(Ur.hasOwnProperty(ee))for(ge in Ue[ee]=[],Ur[ee])Ur[ee].hasOwnProperty(ge)&&Ue[ee].push(ge);return Ue},m.addFont=function(ee,ge,Ue,Ge,et){var wt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&wt.indexOf(arguments[3])!==-1?et=arguments[3]:arguments[3]&&wt.indexOf(arguments[3])==-1&&(Ue=B(Ue,Ge)),et=et||"Identity-H",su.call(this,ee,ge,Ue,et)};var An,uu=e.lineWidth||.200025,Ml=m.__private__.getLineWidth=m.getLineWidth=function(){return uu},NA=m.__private__.setLineWidth=m.setLineWidth=function(ee){return uu=ee,fe(C(S(ee))+" w"),this};m.__private__.setLineDash=Ar.API.setLineDash=Ar.API.setLineDashPattern=function(ee,ge){if(ee=ee||[],ge=ge||0,isNaN(ge)||!Array.isArray(ee))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ee=ee.map(function(Ue){return C(S(Ue))}).join(" "),ge=C(S(ge)),fe("["+ee+"] "+ge+" d"),this};var nd=m.__private__.getLineHeight=m.getLineHeight=function(){return ue*An};m.__private__.getLineHeight=m.getLineHeight=function(){return ue*An};var ad=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(ee){return typeof(ee=ee||1.15)=="number"&&(An=ee),this},hl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return An};ad(e.lineHeight);var Ui=m.__private__.getHorizontalCoordinate=function(ee){return S(ee)},vs=m.__private__.getVerticalCoordinate=function(ee){return _===w.ADVANCED?ee:fr[D].mediaBox.topRightY-fr[D].mediaBox.bottomLeftY-S(ee)},t0=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(ee){return C(Ui(ee))},du=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(ee){return C(vs(ee))},Ci=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return me(Ci)},m.__private__.setStrokeColor=m.setDrawColor=function(ee,ge,Ue,Ge){return Ci=Ae({ch1:ee,ch2:ge,ch3:Ue,ch4:Ge,pdfColorType:"draw",precision:2}),fe(Ci),this};var fu=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return me(fu)},m.__private__.setFillColor=m.setFillColor=function(ee,ge,Ue,Ge){return fu=Ae({ch1:ee,ch2:ge,ch3:Ue,ch4:Ge,pdfColorType:"fill",precision:2}),fe(fu),this};var vc=e.textColor||"0 g",lf=m.__private__.getTextColor=m.getTextColor=function(){return me(vc)};m.__private__.setTextColor=m.setTextColor=function(ee,ge,Ue,Ge){return vc=Ae({ch1:ee,ch2:ge,ch3:Ue,ch4:Ge,pdfColorType:"text",precision:3}),this};var sd=e.charSpace,cf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(sd||0)};m.__private__.setCharSpace=m.setCharSpace=function(ee){if(isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return sd=ee,this};var EA=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(ee){var ge=m.CapJoinStyles[ee];if(ge===void 0)throw new Error("Line cap style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return EA=ge,fe(ge+" J"),this};var id=0;m.__private__.setLineJoin=m.setLineJoin=function(ee){var ge=m.CapJoinStyles[ee];if(ge===void 0)throw new Error("Line join style of '"+ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return id=ge,fe(ge+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(ee){if(ee=ee||0,isNaN(ee))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(C(S(ee))+" M"),this},m.GState=IS,m.setGState=function(ee){(ee=typeof ee=="string"?qr[Rn[ee]]:Au(null,ee)).equals(ja)||(fe("/"+ee.id+" gs"),ja=ee)};var Au=function(ee,ge){if(!ee||!Rn[ee]){var Ue=!1;for(var Ge in qr)if(qr.hasOwnProperty(Ge)&&qr[Ge].equals(ge)){Ue=!0;break}if(Ue)ge=qr[Ge];else{var et="GS"+(Object.keys(qr).length+1).toString(10);qr[et]=ge,ge.id=et}return ee&&(Rn[ee]=ge.id),Xr.publish("addGState",ge),ge}};m.addGState=function(ee,ge){return Au(ee,ge),this},m.saveGraphicsState=function(){return fe("q"),_n.push({key:Bt,size:ue,color:vc}),this},m.restoreGraphicsState=function(){fe("Q");var ee=_n.pop();return Bt=ee.key,ue=ee.size,vc=ee.color,ja=null,this},m.setCurrentTransformationMatrix=function(ee){return fe(ee.toString()+" cm"),this},m.comment=function(ee){return fe("#"+ee),this};var od=function(ee,ge){var Ue=ee||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ue},set:function(wt){isNaN(wt)||(Ue=parseFloat(wt))}});var Ge=ge||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ge},set:function(wt){isNaN(wt)||(Ge=parseFloat(wt))}});var et="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return et},set:function(wt){et=wt.toString()}}),this},uf=function(ee,ge,Ue,Ge){od.call(this,ee,ge),this.type="rect";var et=Ue||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return et},set:function(Rt){isNaN(Rt)||(et=parseFloat(Rt))}});var wt=Ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return wt},set:function(Rt){isNaN(Rt)||(wt=parseFloat(Rt))}}),this},ld=function(){this.page=Fr,this.currentPage=D,this.pages=ke.slice(0),this.pagesContext=fr.slice(0),this.x=xr,this.y=Xt,this.matrix=Gr,this.width=mu(D),this.height=Qi(D),this.outputDestination=Oe,this.id="",this.objectNumber=-1};ld.prototype.restore=function(){Fr=this.page,D=this.currentPage,fr=this.pagesContext,ke=this.pages,xr=this.x,Xt=this.y,Gr=this.matrix,cd(D,this.width),df(D,this.height),Oe=this.outputDestination};var hu=function(ee,ge,Ue,Ge,et){Rs.push(new ld),Fr=D=0,ke=[],xr=ee,Xt=ge,Gr=et,Ei([Ue,Ge])},r0=function(ee){if(Ba[ee])Rs.pop().restore();else{var ge=new ld,Ue="Xo"+(Object.keys(Yn).length+1).toString(10);ge.id=Ue,Ba[ee]=Ue,Yn[Ue]=ge,Xr.publish("addFormObject",ge),Rs.pop().restore()}};for(var bc in m.beginFormObject=function(ee,ge,Ue,Ge,et){return hu(ee,ge,Ue,Ge,et),this},m.endFormObject=function(ee){return r0(ee),this},m.doFormObject=function(ee,ge){var Ue=Yn[Ba[ee]];return fe("q"),fe(ge.toString()+" cm"),fe("/"+Ue.id+" Do"),fe("Q"),this},m.getFormObject=function(ee){var ge=Yn[Ba[ee]];return{x:ge.x,y:ge.y,width:ge.width,height:ge.height,matrix:ge.matrix}},m.save=function(ee,ge){return ee=ee||"generated.pdf",(ge=ge||{}).returnPromise=ge.returnPromise||!1,ge.returnPromise===!1?(Rp(of(mc()),ee),typeof Rp.unload=="function"&&Dr.setTimeout&&setTimeout(Rp.unload,911),this):new Promise(function(Ue,Ge){try{var et=Rp(of(mc()),ee);typeof Rp.unload=="function"&&Dr.setTimeout&&setTimeout(Rp.unload,911),Ue(et)}catch(wt){Ge(wt.message)}})},Ar.API)Ar.API.hasOwnProperty(bc)&&(bc==="events"&&Ar.API.events.length?function(ee,ge){var Ue,Ge,et;for(et=ge.length-1;et!==-1;et--)Ue=ge[et][0],Ge=ge[et][1],ee.subscribe.apply(ee,[Ue].concat(typeof Ge=="function"?[Ge]:Ge))}(Xr,Ar.API.events):m[bc]=Ar.API[bc]);var mu=m.getPageWidth=function(ee){return(fr[ee=ee||D].mediaBox.topRightX-fr[ee].mediaBox.bottomLeftX)/xt},cd=m.setPageWidth=function(ee,ge){fr[ee].mediaBox.topRightX=ge*xt+fr[ee].mediaBox.bottomLeftX},Qi=m.getPageHeight=function(ee){return(fr[ee=ee||D].mediaBox.topRightY-fr[ee].mediaBox.bottomLeftY)/xt},df=m.setPageHeight=function(ee,ge){fr[ee].mediaBox.topRightY=ge*xt+fr[ee].mediaBox.bottomLeftY};return m.internal={pdfEscape:Sn,getStyle:Bo,getFont:xs,getFontSize:De,getCharSpace:cf,getTextColor:lf,getLineHeight:nd,getLineHeightFactor:hl,getLineWidth:Ml,write:ye,getHorizontalCoordinate:Ui,getVerticalCoordinate:vs,getCoordinateString:t0,getVerticalCoordinateString:du,collections:{},newObject:Kn,newAdditionalObject:Re,newObjectDeferred:Jn,newObjectDeferredBegin:xe,getFilters:_e,putStream:Me,events:Xr,scaleFactor:xt,pageSize:{getWidth:function(){return mu(D)},setWidth:function(ee){cd(D,ee)},getHeight:function(){return Qi(D)},setHeight:function(ee){df(D,ee)}},encryptionOptions:d,encryption:ia,getEncryptor:gc,output:pc,getNumberOfPages:Ln,pages:ke,out:fe,f2:L,f3:R,getPageInfo:Dl,getPageInfoByObjId:_r,getCurrentPageInfo:Pl,getPDFVersion:x,Point:od,Rectangle:uf,Matrix:Wt,hasHotfix:Ol},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return mu(D)},set:function(ee){cd(D,ee)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Qi(D)},set:function(ee){df(D,ee)},enumerable:!0,configurable:!0}),vA.call(m,Qe),Bt="F1",iu(a,r),Xr.publish("initialized"),m}Av.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Av.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Av.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Av.prototype.processOwnerPassword=function(e,t){return UO(MO(t).substr(0,5),e)},Av.prototype.encryptor=function(e,t){var r=MO(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return UO(r,n)}},IS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ha(e)!==ha(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Ar.API={events:[]},Ar.version="2.5.2";var _s=Ar.API,bM=1,ax=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kr=function(e){return e.toFixed(2)},M0=function(e){return e.toFixed(5)};_s.__acroform__={};var Ac=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},bK=function(e){return e*bM},Uf=function(e){var t=new Yle,r=ur.internal.getHeight(e)||0,n=ur.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Kr(n)),Number(Kr(r))],t},UWe=_s.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},QWe=_s.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},HWe=_s.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Xs=_s.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HWe(e,t-1)},Ys=_s.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return UWe(e,t-1)},Js=_s.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return QWe(e,t-1)},VWe=_s.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(Kr(c.lowerLeft_X)),Number(Kr(c.lowerLeft_Y)),Number(Kr(c.upperRight_X)),Number(Kr(c.upperRight_Y))]},zWe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=QO(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Kr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Uf(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},QO=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(R){return R.split(`
`)}):a.map(function(R){return[R]});var s=r,o=ur.internal.getHeight(e)||0;o=o<0?-o:o;var l=ur.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(R,S,U){if(R+1<a.length){var Q=S+" "+a[R+1][0];return jC(Q,e,U).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=jC("3",e,s).height,h=e.multiline?o-s:(o-f)/2,m=h+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+jC(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var O=!1;if(a[_].length!==1&&v!==a[_].length-1){if((f+2)*(w+2)+2>o)continue e;y+=a[_][v],O=!0,x=_,_--}else{y=(y+=a[_][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var j=parseInt(_),B=c(j,y,s),C=_>=a.length-1;if(B&&!C){y+=" ",v=0;continue}if(B||C){if(C)x=j;else if(e.multiline&&(f+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>o)continue e;x=j}}for(var k="",T=g;T<=x;T++){var L=a[T];if(e.multiline){if(T===x){k+=L[v]+" ",v=(v+1)%L.length;continue}if(T===g){k+=L[L.length-1]+" ";continue}}k+=L[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,d=jC(k,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=Kr(u)+" "+Kr(m)+` Td
`,t+="("+ax(k)+`) Tj
`,t+=-Kr(u)+` 0 Td
`,m=-(s+2),d=0,g=O?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},jC=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},$We={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},GWe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},qWe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ha(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},KWe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ef.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify($We)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bM=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Jle,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&GWe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=VWe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=ur.createDefaultAppearanceStream(l),ha(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=zWe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&qWe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Xle=_s.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ha(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+ax(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},II=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ax(n(e))+")"},Zf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Zf.prototype.toString=function(){return this.objId+" 0 R"},Zf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Zf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Xle(a,this.objId,this.scope)}):a instanceof Zf?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Yle=function(){Zf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ac(Yle,Zf);var Jle=function(){Zf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ax(r(e))+")"}},set:function(r){e=r}})};Ac(Jle,Zf);var ef=function e(){Zf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xs(t,3)},set:function(y){y?this.F=Ys(t,3):this.F=Js(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof FS)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+ax(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/bM:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof FS||this instanceof fg))return II(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Yi?h:II(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Yi?y:y.substr(0,1)==="("?Qx(y.substr(1,y.length-2)):Qx(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Qx(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Yi?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yi?m:II(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Yi?y:y.substr(0,1)==="("?Qx(y.substr(1,y.length-2)):Qx(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Qx(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Yi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,1)},set:function(y){y?this.Ff=Ys(this.Ff,1):this.Ff=Js(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,2)},set:function(y){y?this.Ff=Ys(this.Ff,2):this.Ff=Js(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,3)},set:function(y){y?this.Ff=Ys(this.Ff,3):this.Ff=Js(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Ac(ef,Zf);var zv=function(){ef.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Xle(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,18)},set:function(r){r?this.Ff=Ys(this.Ff,18):this.Ff=Js(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ys(this.Ff,19):this.Ff=Js(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,20)},set:function(r){r?(this.Ff=Ys(this.Ff,20),t.sort()):this.Ff=Js(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,22)},set:function(r){r?this.Ff=Ys(this.Ff,22):this.Ff=Js(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(r){r?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,27)},set:function(r){r?this.Ff=Ys(this.Ff,27):this.Ff=Js(this.Ff,27)}}),this.hasAppearanceStream=!1};Ac(zv,ef);var $v=function(){zv.call(this),this.fontName="helvetica",this.combo=!1};Ac($v,zv);var Gv=function(){$v.call(this),this.combo=!0};Ac(Gv,$v);var j5=function(){Gv.call(this),this.edit=!0};Ac(j5,Gv);var Yi=function(){ef.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,15)},set:function(r){r?this.Ff=Ys(this.Ff,15):this.Ff=Js(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,16)},set:function(r){r?this.Ff=Ys(this.Ff,16):this.Ff=Js(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,17)},set:function(r){r?this.Ff=Ys(this.Ff,17):this.Ff=Js(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(r){r?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+ax(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ha(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ac(Yi,ef);var B5=function(){Yi.call(this),this.pushButton=!0};Ac(B5,Yi);var qv=function(){Yi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ac(qv,Yi);var FS=function(){var e,t;ef.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+ax(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){ha(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ur.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ac(FS,ef),qv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},qv.prototype.createOption=function(e){var t=new FS;return t.Parent=this,t.optionName=e,this.Kids.push(t),WWe.call(this.scope,t),t};var T5=function(){Yi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ur.CheckBox.createAppearanceStream()};Ac(T5,Yi);var fg=function(){ef.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,13)},set:function(t){t?this.Ff=Ys(this.Ff,13):this.Ff=Js(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,21)},set:function(t){t?this.Ff=Ys(this.Ff,21):this.Ff=Js(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(t){t?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,24)},set:function(t){t?this.Ff=Ys(this.Ff,24):this.Ff=Js(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,25)},set:function(t){t?this.Ff=Ys(this.Ff,25):this.Ff=Js(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(t){t?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ac(fg,ef);var I5=function(){fg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,14)},set:function(e){e?this.Ff=Ys(this.Ff,14):this.Ff=Js(this.Ff,14)}}),this.password=!0};Ac(I5,fg);var ur={CheckBox:{createAppearanceStream:function(){return{N:{On:ur.CheckBox.YesNormal},D:{On:ur.CheckBox.YesPushDown,Off:ur.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Uf(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=QO(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Kr(ur.internal.getWidth(e))+" "+Kr(ur.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Kr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Uf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=ur.internal.getHeight(e),o=ur.internal.getWidth(e),l=QO(e,e.caption);return a.push("1 g"),a.push("0 0 "+Kr(o)+" "+Kr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Kr(o-1)+" "+Kr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Kr(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Uf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Kr(ur.internal.getWidth(e))+" "+Kr(ur.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ur.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ur.RadioButton.Circle.YesNormal,t.D[e]=ur.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Uf(e);t.scope=e.scope;var r=[],n=ur.internal.getWidth(e)<=ur.internal.getHeight(e)?ur.internal.getWidth(e)/4:ur.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=ur.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+M0(ur.internal.getWidth(e)/2)+" "+M0(ur.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Uf(e);t.scope=e.scope;var r=[],n=ur.internal.getWidth(e)<=ur.internal.getHeight(e)?ur.internal.getWidth(e)/4:ur.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*ur.internal.Bezier_C).toFixed(5)),o=Number((n*ur.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+M0(ur.internal.getWidth(e)/2)+" "+M0(ur.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+M0(ur.internal.getWidth(e)/2)+" "+M0(ur.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Uf(e);t.scope=e.scope;var r=[],n=ur.internal.getWidth(e)<=ur.internal.getHeight(e)?ur.internal.getWidth(e)/4:ur.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*ur.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+M0(ur.internal.getWidth(e)/2)+" "+M0(ur.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ur.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ur.RadioButton.Cross.YesNormal,t.D[e]=ur.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Uf(e);t.scope=e.scope;var r=[],n=ur.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Kr(ur.internal.getWidth(e)-2)+" "+Kr(ur.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Kr(n.x1.x)+" "+Kr(n.x1.y)+" m"),r.push(Kr(n.x2.x)+" "+Kr(n.x2.y)+" l"),r.push(Kr(n.x4.x)+" "+Kr(n.x4.y)+" m"),r.push(Kr(n.x3.x)+" "+Kr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Uf(e);t.scope=e.scope;var r=ur.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Kr(ur.internal.getWidth(e))+" "+Kr(ur.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Kr(ur.internal.getWidth(e)-2)+" "+Kr(ur.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Kr(r.x1.x)+" "+Kr(r.x1.y)+" m"),n.push(Kr(r.x2.x)+" "+Kr(r.x2.y)+" l"),n.push(Kr(r.x4.x)+" "+Kr(r.x4.y)+" m"),n.push(Kr(r.x3.x)+" "+Kr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Uf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Kr(ur.internal.getWidth(e))+" "+Kr(ur.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};ur.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ur.internal.getWidth(e),r=ur.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},ur.internal.getWidth=function(e){var t=0;return ha(e)==="object"&&(t=bK(e.Rect[2])),t},ur.internal.getHeight=function(e){var t=0;return ha(e)==="object"&&(t=bK(e.Rect[3])),t};var WWe=_s.addField=function(e){if(KWe(this,e),!(e instanceof ef))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};_s.AcroFormChoiceField=zv,_s.AcroFormListBox=$v,_s.AcroFormComboBox=Gv,_s.AcroFormEditBox=j5,_s.AcroFormButton=Yi,_s.AcroFormPushButton=B5,_s.AcroFormRadioButton=qv,_s.AcroFormCheckBox=T5,_s.AcroFormTextField=fg,_s.AcroFormPasswordField=I5,_s.AcroFormAppearance=ur,_s.AcroForm={ChoiceField:zv,ListBox:$v,ComboBox:Gv,EditBox:j5,Button:Yi,PushButton:B5,RadioButton:qv,CheckBox:T5,TextField:fg,PasswordField:I5,Appearance:ur},Ar.AcroForm={ChoiceField:zv,ListBox:$v,ComboBox:Gv,EditBox:j5,Button:Yi,PushButton:B5,RadioButton:qv,CheckBox:T5,TextField:fg,PasswordField:I5,Appearance:ur};Ar.AcroForm;function Zle(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(R,S){var U,Q,X,z,W,G=t;if((S=S||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(B(R))for(W in r)for(X=r[W],U=0;U<X.length;U+=1){for(z=!0,Q=0;Q<X[U].length;Q+=1)if(X[U][Q]!==void 0&&X[U][Q]!==R[Q]){z=!1;break}if(z===!0){G=W;break}}else for(W in r)for(X=r[W],U=0;U<X.length;U+=1){for(z=!0,Q=0;Q<X[U].length;Q+=1)if(X[U][Q]!==void 0&&X[U][Q]!==R.charCodeAt(Q)){z=!1;break}if(z===!0){G=W;break}}return G===t&&S!==t&&(G=S),G},a=function R(S){for(var U=this.internal.write,Q=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:S.width}),z.push({key:"Height",value:S.height}),S.colorSpace===v.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===v.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var W="",G=0,Y=S.transparency.length;G<Y;G++)W+=S.transparency[G]+" "+S.transparency[G]+" ";z.push({key:"Mask",value:"["+W+"]"})}S.sMask!==void 0&&z.push({key:"SMask",value:S.objectId+1+" 0 R"});var K=S.filter!==void 0?["/"+S.filter]:void 0;if(Q({data:S.data,additionalKeyValues:z,alreadyAppliedFilters:K,objectId:S.objectId}),U("endobj"),"sMask"in S&&S.sMask!==void 0){var H="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,F={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:H,data:S.sMask};"filter"in S&&(F.filter=S.filter),R.call(this,F)}if(S.colorSpace===v.INDEXED){var D=this.internal.newObject();Q({data:k(new Uint8Array(S.palette)),objectId:D}),U("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var S in R)a.call(this,R[S])},o=function(){var R,S=this.internal.collections.addImage_images,U=this.internal.write;for(var Q in S)U("/I"+(R=S[Q]).index,R.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var R=this.internal.collections.addImage_images;return l.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof e["process"+R.toUpperCase()]=="function"},f=function(R){return ha(R)==="object"&&R.nodeType===1},h=function(R,S){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var U=""+R.getAttribute("src");if(U.indexOf("data:image/")===0)return F2(unescape(U).split("base64,").pop());var Q=e.loadFile(U,!0);if(Q!==void 0)return Q}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var X;switch(S){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return F2(R.toDataURL(X,1).split("base64,").pop())}},m=function(R){var S=this.internal.collections.addImage_images;if(S){for(var U in S)if(R===S[U].alias)return S[U]}},g=function(R,S,U){return R||S||(R=-96,S=-96),R<0&&(R=-1*U.width*72/R/this.internal.scaleFactor),S<0&&(S=-1*U.height*72/S/this.internal.scaleFactor),R===0&&(R=S*U.width/U.height),S===0&&(S=R*U.height/U.width),[R,S]},x=function(R,S,U,Q,X,z){var W=g.call(this,U,Q,X),G=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,K=c.call(this);if(U=W[0],Q=W[1],K[X.index]=X,z){z*=Math.PI/180;var H=Math.cos(z),F=Math.sin(z),D=function(J){return J.toFixed(4)},q=[D(H),D(F),D(-1*F),D(H),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,G(R),Y(S+Q),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([G(U),"0","0",G(Q),"0","0","cm"].join(" "))):this.internal.write([G(U),"0","0",G(Q),G(R),Y(S+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(R){var S,U,Q=0;if(typeof R=="string")for(U=R.length,S=0;S<U;S++)Q=(Q<<5)-Q+R.charCodeAt(S),Q|=0;else if(B(R))for(U=R.byteLength/2,S=0;S<U;S++)Q=(Q<<5)-Q+R[S],Q|=0;return Q},_=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var S=!0;return R.length===0&&(S=!1),R.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(S=!1),S},O=e.__addimage__.extractImageFromDataUrl=function(R){var S=(R=R||"").split("base64,"),U=null;if(S.length===2){var Q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(Q)&&(U={mimeType:Q[1],charset:Q[2],data:S[1]})}return U},j=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return j()&&R instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(R){return j()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(R){for(var S=R.length,U=new Uint8Array(S),Q=0;Q<S;Q++)U[Q]=R.charCodeAt(Q);return U},k=e.__addimage__.arrayBufferToBinaryString=function(R){for(var S="",U=B(R)?R:new Uint8Array(R),Q=0;Q<U.length;Q+=8192)S+=String.fromCharCode.apply(null,U.subarray(Q,Q+8192));return S};e.addImage=function(){var R,S,U,Q,X,z,W,G,Y;if(typeof arguments[1]=="number"?(S=t,U=arguments[1],Q=arguments[2],X=arguments[3],z=arguments[4],W=arguments[5],G=arguments[6],Y=arguments[7]):(S=arguments[1],U=arguments[2],Q=arguments[3],X=arguments[4],z=arguments[5],W=arguments[6],G=arguments[7],Y=arguments[8]),ha(R=arguments[0])==="object"&&!f(R)&&"imageData"in R){var K=R;R=K.imageData,S=K.format||S||t,U=K.x||U||0,Q=K.y||Q||0,X=K.w||K.width||X,z=K.h||K.height||z,W=K.alias||W,G=K.compression||G,Y=K.rotation||K.angle||Y}var H=this.internal.getFilters();if(G===void 0&&H.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(U)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var F=T.call(this,R,S,W,G);return x.call(this,U,Q,X,z,F,Y),this};var T=function(R,S,U,Q){var X,z,W;if(typeof R=="string"&&n(R)===t){R=unescape(R);var G=L(R,!1);(G!==""||(G=e.loadFile(R,!0))!==void 0)&&(R=G)}if(f(R)&&(R=h(R,S)),S=n(R,S),!d(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((W=U)==null||W.length===0)&&(U=function(Y){return typeof Y=="string"||B(Y)?w(Y):B(Y.data)?w(Y.data):null}(R)),(X=m.call(this,U))||(j()&&(R instanceof Uint8Array||S==="RGBA"||(z=R,R=C(R))),X=this["process"+S.toUpperCase()](R,u.call(this),U,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:y.NONE}(Q),z)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},L=e.__addimage__.convertBase64ToBinaryString=function(R,S){var U;S=typeof S!="boolean"||S;var Q,X="";if(typeof R=="string"){Q=(U=O(R))!==null?U.data:R;try{X=F2(Q)}catch(z){if(S)throw _(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};e.getImageProperties=function(R){var S,U,Q="";if(f(R)&&(R=h(R)),typeof R=="string"&&n(R)===t&&((Q=L(R,!1))===""&&(Q=e.loadFile(R)||""),R=Q),U=n(R),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!j()||R instanceof Uint8Array||(R=C(R)),!(S=this["process"+U.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=U,S}})(Ar.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ar.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var O=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var B=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ar.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,w="",_=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(_++,typeof(y=y[x.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),v===x.length-1&&(y=r,w+=x.charAt(v-(_-1)),v-=_-1,_=0)):(y=r,w+=x.charAt(v-_),v-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?s(x)===!1?-1:!u(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,w=0,_="",O="",j="",B=(x=x||"").split("\\s+"),C=[];for(v=0;v<B.length;v+=1){for(C.push(""),y=0;y<B[v].length;y+=1)_=B[v][y],O=B[v][y-1],j=B[v][y+1],o(_)?(w=h(_,O,j),C[v]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):C[v]+=_;C[v]=f(C[v])}return C.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(Ar.API),Ar.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ar.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,O){return _.concat(v.splitTextToSize(O,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],w=[],_=[],O={},j={},B=[],C=[],k=(h=h||{}).autoSize||!1,T=h.printHeaders!==!1,L=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,R=h.margins||Object.assign({width:this.getPageWidth()},t),S=typeof h.padding=="number"?h.padding:3,U=h.headerBackgroundColor||"#c8c8c8",Q=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=Q,this.setFontSize(L),f==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(f)&&ha(f[0])==="object")for(y=f.map(function(K){return K.name}),w=f.map(function(K){return K.prompt||K.name||""}),_=f.map(function(K){return K.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,_=y.map(function(){return"left"}));if(k||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(O[v=y[m]]=d.map(function(K){return K[v]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=O[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)B.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[v]=Math.max.apply(null,B)+S+S,B=[]}if(T){var X={};for(m=0;m<y.length;m+=1)X[y[m]]={},X[y[m]].text=w[m],X[y[m]].align=_[m];var z=l.call(this,X,j);C=y.map(function(K){return new s(c,u,j[K],z,X[K].text,void 0,X[K].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var W=f.reduce(function(K,H){return K[H.name]=H.align,K},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var G=l.call(this,d[m],j);for(x=0;x<y.length;x+=1){var Y=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:Y},this),o.call(this,new s(c,u,j[y[x]],G,Y,m+2,W[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Ar.API);var ece={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tce=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],HO=Zle(tce),rce=[100,200,300,400,500,600,700,800,900],XWe=Zle(rce);function VO(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return ece[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof HO[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function yK(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var YWe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wK={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function NK(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function JWe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},YWe,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(a[(s=VO(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+NK(s)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var d=HO[c],f=d<=HO.normal?-1:1,h=yK(u,tce,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=ece[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=XWe[c],f=yK(u,rce,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+NK(s)+"'.");return o}function EK(e){return e.trimLeft()}function ZWe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function eXe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var BC,CK,_K,FI=["times"];(function(e){var t,r,n,a,s,o,l,c,u,d=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=F;Object.defineProperty(this,"pdf",{get:function(){return D}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(Se){q=!!Se}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Se){J=!!Se}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Se){isNaN(Se)||(te=Se)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(Se){isNaN(Se)||(ne=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var fe;typeof Se=="number"?fe=[Se,Se,Se,Se]:((fe=new Array(4))[0]=Se[0],fe[1]=Se.length>=2?Se[1]:fe[0],fe[2]=Se.length>=3?Se[2]:fe[0],fe[3]=Se.length>=4?Se[3]:fe[1]),u.margin=fe}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Se){ie=Se}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(Se){oe=Se}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(Se){de=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof d&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Se){ke=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var fe;fe=h(Se),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var fe=h(Se);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var ae=null;function Oe(Se,fe){if(ae===null){var ye=function(Le){var Qe=[];return Object.keys(Le).forEach(function(ue){Le[ue].forEach(function(we){var De=null;switch(we){case"bold":De={family:ue,weight:"bold"};break;case"italic":De={family:ue,style:"italic"};break;case"bolditalic":De={family:ue,weight:"bold",style:"italic"};break;case"":case"normal":De={family:ue}}De!==null&&(De.ref={name:ue,style:we},Qe.push(De))})}),Qe}(Se.getFontList());ae=function(Le){for(var Qe={},ue=0;ue<Le.length;++ue){var we=VO(Le[ue]),De=we.family,He=we.stretch,Ye=we.style,tt=we.weight;Qe[De]=Qe[De]||{},Qe[De][He]=Qe[De][He]||{},Qe[De][He][Ye]=Qe[De][He][Ye]||{},Qe[De][He][Ye][tt]=we}return Qe}(ye.concat(fe))}return ae}var Te=null;Object.defineProperty(this,"fontFaces",{get:function(){return Te},set:function(Se){ae=null,Te=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var fe;if(this.ctx.font=Se,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var ye=fe[1],Le=(fe[2],fe[3]),Qe=fe[4],ue=(fe[5],fe[6]),we=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(we==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:we==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var De=function(bt){var Bt,xt,xr=[],Xt=bt.trim();if(Xt==="")return FI;if(Xt in wK)return[wK[Xt]];for(;Xt!=="";){switch(xt=null,Bt=(Xt=EK(Xt)).charAt(0)){case'"':case"'":xt=ZWe(Xt.substring(1),Bt);break;default:xt=eXe(Xt)}if(xt===null||(xr.push(xt[0]),(Xt=EK(xt[1]))!==""&&Xt.charAt(0)!==","))return FI;Xt=Xt.replace(/^,/,"")}return xr}(ue);if(this.fontFaces){var He=JWe(Oe(this.pdf,this.fontFaces),De.map(function(bt){return{family:bt,stretch:"normal",weight:Le,style:ye}}));this.pdf.setFont(He.ref.name,He.ref.style)}else{var Ye="";(Le==="bold"||parseInt(Le,10)>=700||ye==="bold")&&(Ye="bold"),ye==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var tt="",ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$e=0;$e<De.length;$e++){if(this.pdf.internal.getFont(De[$e],Ye,{noFallback:!0,disableWarning:!0})!==void 0){tt=De[$e];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(De[$e],"bold",{noFallback:!0,disableWarning:!0})!==void 0)tt=De[$e],Ye="bold";else if(this.pdf.internal.getFont(De[$e],"normal",{noFallback:!0,disableWarning:!0})!==void 0){tt=De[$e],Ye="normal";break}}if(tt===""){for(var nt=0;nt<De.length;nt++)if(ft[De[nt]]){tt=ft[De[nt]];break}}tt=tt===""?"Times":tt,this.pdf.setFont(tt,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};f.prototype.setLineDash=function(F){this.lineDash=F},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){O.call(this,"fill",!1)},f.prototype.stroke=function(){O.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(F,D){if(isNaN(F)||isNaN(D))throw Ca.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(F,D));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(F,D)},f.prototype.closePath=function(){var F=new o(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&ha(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){F=new o(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},f.prototype.lineTo=function(F,D){if(isNaN(F)||isNaN(D))throw Ca.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(F,D));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},f.prototype.quadraticCurveTo=function(F,D,q,J){if(isNaN(q)||isNaN(J)||isNaN(F)||isNaN(D))throw Ca.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(q,J)),ne=this.ctx.transform.applyToPoint(new o(F,D));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},f.prototype.bezierCurveTo=function(F,D,q,J,te,ne){if(isNaN(te)||isNaN(ne)||isNaN(F)||isNaN(D)||isNaN(q)||isNaN(J))throw Ca.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(te,ne)),oe=this.ctx.transform.applyToPoint(new o(F,D)),de=this.ctx.transform.applyToPoint(new o(q,J));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:de.x,y2:de.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},f.prototype.arc=function(F,D,q,J,te,ne){if(isNaN(F)||isNaN(D)||isNaN(q)||isNaN(J)||isNaN(te))throw Ca.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(F,D));F=ie.x,D=ie.y;var oe=this.ctx.transform.applyToPoint(new o(0,q)),de=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(oe.x-de.x,2)+Math.pow(oe.y-de.y,2))}Math.abs(te-J)>=2*Math.PI&&(J=0,te=2*Math.PI),this.path.push({type:"arc",x:F,y:D,radius:q,startAngle:J,endAngle:te,counterclockwise:ne})},f.prototype.arcTo=function(F,D,q,J,te){throw new Error("arcTo not implemented.")},f.prototype.rect=function(F,D,q,J){if(isNaN(F)||isNaN(D)||isNaN(q)||isNaN(J))throw Ca.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,D),this.lineTo(F+q,D),this.lineTo(F+q,D+J),this.lineTo(F,D+J),this.lineTo(F,D),this.lineTo(F+q,D),this.lineTo(F,D)},f.prototype.fillRect=function(F,D,q,J){if(isNaN(F)||isNaN(D)||isNaN(q)||isNaN(J))throw Ca.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,D,q,J),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},f.prototype.strokeRect=function(F,D,q,J){if(isNaN(F)||isNaN(D)||isNaN(q)||isNaN(J))throw Ca.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(F,D,q,J),this.stroke())},f.prototype.clearRect=function(F,D,q,J){if(isNaN(F)||isNaN(D)||isNaN(q)||isNaN(J))throw Ca.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,D,q,J))},f.prototype.save=function(F){F=typeof F!="boolean"||F;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},f.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(D),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(F){var D,q,J,te;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))D=0,q=0,J=0,te=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ne!==null)D=parseInt(ne[1]),q=parseInt(ne[2]),J=parseInt(ne[3]),te=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)D=parseInt(ne[1]),q=parseInt(ne[2]),J=parseInt(ne[3]),te=parseFloat(ne[4]);else{if(te=1,typeof F=="string"&&F.charAt(0)!=="#"){var ie=new qle(F);F=ie.ok?ie.toHex():"#000000"}F.length===4?(D=F.substring(1,2),D+=D,q=F.substring(2,3),q+=q,J=F.substring(3,4),J+=J):(D=F.substring(1,3),q=F.substring(3,5),J=F.substring(5,7)),D=parseInt(D,16),q=parseInt(q,16),J=parseInt(J,16)}}return{r:D,g:q,b:J,a:te,style:F}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(F,D,q,J){if(isNaN(D)||isNaN(q)||typeof F!="string")throw Ca.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var te=G(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;S.call(this,{text:F,x:D,y:q,scale:ne,angle:te,align:this.textAlign,maxWidth:J})}},f.prototype.strokeText=function(F,D,q,J){if(isNaN(D)||isNaN(q)||typeof F!="string")throw Ca.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){J=isNaN(J)?void 0:J;var te=G(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;S.call(this,{text:F,x:D,y:q,scale:ne,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:J})}},f.prototype.measureText=function(F){if(typeof F!="string")throw Ca.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,q=this.pdf.internal.scaleFactor,J=D.internal.getFontSize(),te=D.getStringUnitWidth(F)*J/D.internal.scaleFactor,ne=function(ie){var oe=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new ne({width:te*=Math.round(96*q/72*1e4)/1e4})},f.prototype.scale=function(F,D){if(isNaN(F)||isNaN(D))throw Ca.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new c(F,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.rotate=function(F){if(isNaN(F))throw Ca.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},f.prototype.translate=function(F,D){if(isNaN(F)||isNaN(D))throw Ca.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new c(1,0,0,1,F,D);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.transform=function(F,D,q,J,te,ne){if(isNaN(F)||isNaN(D)||isNaN(q)||isNaN(J)||isNaN(te)||isNaN(ne))throw Ca.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(F,D,q,J,te,ne);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(F,D,q,J,te,ne){F=isNaN(F)?1:F,D=isNaN(D)?0:D,q=isNaN(q)?0:q,J=isNaN(J)?1:J,te=isNaN(te)?0:te,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(F,D,q,J,te,ne)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(F,D,q,J,te,ne,ie,oe,de){var ke=this.pdf.getImageProperties(F),ae=1,Oe=1,Te=1,Se=1;J!==void 0&&oe!==void 0&&(Te=oe/J,Se=de/te,ae=ke.width/J*oe/J,Oe=ke.height/te*de/te),ne===void 0&&(ne=D,ie=q,D=0,q=0),J!==void 0&&oe===void 0&&(oe=J,de=te),J===void 0&&oe===void 0&&(oe=ke.width,de=ke.height);for(var fe,ye=this.ctx.transform.decompose(),Le=G(ye.rotate.shx),Qe=new c,ue=(Qe=(Qe=(Qe=Qe.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new l(ne-D*Te,ie-q*Se,J*ae,te*Oe)),we=v.call(this,ue),De=[],He=0;He<we.length;He+=1)De.indexOf(we[He])===-1&&De.push(we[He]);if(_(De),this.autoPaging)for(var Ye=De[0],tt=De[De.length-1],ft=Ye;ft<tt+1;ft++){this.pdf.setPage(ft);var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=ft===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=ft===1?0:bt+(ft-2)*Bt;if(this.ctx.clip_path.length!==0){var xr=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(fe,this.posX+this.margin[3],-xt+nt+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=xr}var Xt=JSON.parse(JSON.stringify(ue));Xt=w([Xt],this.posX+this.margin[3],-xt+nt+this.ctx.prevPageLastElemOffset)[0];var Gr=(ft>Ye||ft<tt)&&x.call(this);Gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,Bt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,Le),Gr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",ue.x,ue.y,ue.w,ue.h,null,null,Le)};var v=function(F,D,q){var J=[];D=D||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":J.push(Math.floor((F.y+te)/q)+1);break;case"arc":J.push(Math.floor((F.y+te-F.radius)/q)+1),J.push(Math.floor((F.y+te+F.radius)/q)+1);break;case"qct":var ne=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);J.push(Math.floor((ne.y+te)/q)+1),J.push(Math.floor((ne.y+ne.h+te)/q)+1);break;case"bct":var ie=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);J.push(Math.floor((ie.y+te)/q)+1),J.push(Math.floor((ie.y+ie.h+te)/q)+1);break;case"rect":J.push(Math.floor((F.y+te)/q)+1),J.push(Math.floor((F.y+F.h+te)/q)+1)}for(var oe=0;oe<J.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<J[oe];)y.call(this);return J},y=function(){var F=this.fillStyle,D=this.strokeStyle,q=this.font,J=this.lineCap,te=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=D,this.font=q,this.lineCap=J,this.lineWidth=te,this.lineJoin=ne},w=function(F,D,q){for(var J=0;J<F.length;J++)switch(F[J].type){case"bct":F[J].x2+=D,F[J].y2+=q;case"qct":F[J].x1+=D,F[J].y1+=q;case"mt":case"lt":case"arc":default:F[J].x+=D,F[J].y+=q}return F},_=function(F){return F.sort(function(D,q){return D-q})},O=function(F,D){for(var q,J,te=this.fillStyle,ne=this.strokeStyle,ie=this.lineCap,oe=this.lineWidth,de=Math.abs(oe*this.ctx.transform.scaleX),ke=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),Te=[],Se=0;Se<Oe.length;Se++)if(Oe[Se].x!==void 0)for(var fe=v.call(this,Oe[Se]),ye=0;ye<fe.length;ye+=1)Te.indexOf(fe[ye])===-1&&Te.push(fe[ye]);for(var Le=0;Le<Te.length;Le++)for(;this.pdf.internal.getNumberOfPages()<Te[Le];)y.call(this);if(_(Te),this.autoPaging)for(var Qe=Te[0],ue=Te[Te.length-1],we=Qe;we<ue+1;we++){this.pdf.setPage(we),this.fillStyle=te,this.strokeStyle=ne,this.lineCap=ie,this.lineWidth=de,this.lineJoin=ke;var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=we===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=we===1?0:Ye+(we-2)*tt;if(this.ctx.clip_path.length!==0){var $e=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(q,this.posX+this.margin[3],-ft+He+this.ctx.prevPageLastElemOffset),j.call(this,F,!0),this.path=$e}if(J=JSON.parse(JSON.stringify(ae)),this.path=w(J,this.posX+this.margin[3],-ft+He+this.ctx.prevPageLastElemOffset),D===!1||we===0){var nt=(we>Qe||we<ue)&&x.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,tt,null).clip().discardPath()),j.call(this,F,D),nt&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=de,j.call(this,F,D),this.lineWidth=oe;this.path=ae},j=function(F,D){if((F!=="stroke"||D||!g.call(this))&&(F==="stroke"||D||!m.call(this))){for(var q,J,te=[],ne=this.path,ie=0;ie<ne.length;ie++){var oe=ne[ie];switch(oe.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:oe,deltas:[],abs:[]});break;case"lt":var de=te.length;if(ne[ie-1]&&!isNaN(ne[ie-1].x)&&(q=[oe.x-ne[ie-1].x,oe.y-ne[ie-1].y],de>0)){for(;de>=0;de--)if(te[de-1].close!==!0&&te[de-1].begin!==!0){te[de-1].deltas.push(q),te[de-1].abs.push(oe);break}}break;case"bct":q=[oe.x1-ne[ie-1].x,oe.y1-ne[ie-1].y,oe.x2-ne[ie-1].x,oe.y2-ne[ie-1].y,oe.x-ne[ie-1].x,oe.y-ne[ie-1].y],te[te.length-1].deltas.push(q);break;case"qct":var ke=ne[ie-1].x+2/3*(oe.x1-ne[ie-1].x),ae=ne[ie-1].y+2/3*(oe.y1-ne[ie-1].y),Oe=oe.x+2/3*(oe.x1-oe.x),Te=oe.y+2/3*(oe.y1-oe.y),Se=oe.x,fe=oe.y;q=[ke-ne[ie-1].x,ae-ne[ie-1].y,Oe-ne[ie-1].x,Te-ne[ie-1].y,Se-ne[ie-1].x,fe-ne[ie-1].y],te[te.length-1].deltas.push(q);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(oe)}}J=D?null:F==="stroke"?"stroke":"fill";for(var ye=!1,Le=0;Le<te.length;Le++)if(te[Le].arc)for(var Qe=te[Le].abs,ue=0;ue<Qe.length;ue++){var we=Qe[ue];we.type==="arc"?k.call(this,we.x,we.y,we.radius,we.startAngle,we.endAngle,we.counterclockwise,void 0,D,!ye):U.call(this,we.x,we.y),ye=!0}else if(te[Le].close===!0)this.pdf.internal.out("h"),ye=!1;else if(te[Le].begin!==!0){var De=te[Le].start.x,He=te[Le].start.y;Q.call(this,te[Le].deltas,De,He),ye=!0}J&&T.call(this,J),D&&L.call(this)}},B=function(F){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-q;case"top":return F+D-q;case"hanging":return F+D-2*q;case"middle":return F+D/2-q;case"ideographic":return F;case"alphabetic":default:return F}},C=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(D,q){this.colorStops.push([D,q])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(F,D,q,J,te,ne,ie,oe,de){for(var ke=z.call(this,q,J,te,ne),ae=0;ae<ke.length;ae++){var Oe=ke[ae];ae===0&&(de?R.call(this,Oe.x1+F,Oe.y1+D):U.call(this,Oe.x1+F,Oe.y1+D)),X.call(this,F,D,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}oe?L.call(this):T.call(this,ie)},T=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(F,D){this.pdf.internal.out(r(F)+" "+n(D)+" m")},S=function(F){var D;switch(F.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var q=this.pdf.getTextDimensions(F.text),J=B.call(this,F.y),te=C.call(this,J)-q.h,ne=this.ctx.transform.applyToPoint(new o(F.x,J)),ie=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var de,ke,ae,Oe=this.ctx.transform.applyToRectangle(new l(F.x,J,q.w,q.h)),Te=oe.applyToRectangle(new l(F.x,te,q.w,q.h)),Se=v.call(this,Te),fe=[],ye=0;ye<Se.length;ye+=1)fe.indexOf(Se[ye])===-1&&fe.push(Se[ye]);if(_(fe),this.autoPaging)for(var Le=fe[0],Qe=fe[fe.length-1],ue=Le;ue<Qe+1;ue++){this.pdf.setPage(ue);var we=ue===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],Ye=He-this.margin[0],tt=this.pdf.internal.pageSize.width-this.margin[1],ft=tt-this.margin[3],$e=ue===1?0:De+(ue-2)*Ye;if(this.ctx.clip_path.length!==0){var nt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(de,this.posX+this.margin[3],-1*$e+we),j.call(this,"fill",!0),this.path=nt}var bt=w([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-$e+we+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*F.scale),ae=this.lineWidth,this.lineWidth=ae*F.scale);var Bt=this.autoPaging!=="text";if(Bt||bt.y+bt.h<=He){if(Bt||bt.y>=we&&bt.x<=tt){var xt=Bt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||tt-bt.x)[0],xr=w([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-$e+we+this.ctx.prevPageLastElemOffset)[0],Xt=Bt&&(ue>Le||ue<Qe)&&x.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Ye,null).clip().discardPath()),this.pdf.text(xt,xr.x,xr.y,{angle:F.angle,align:D,renderingMode:F.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else bt.y<He&&(this.ctx.prevPageLastElemOffset+=He-bt.y);F.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ae)}else F.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*F.scale),ae=this.lineWidth,this.lineWidth=ae*F.scale),this.pdf.text(F.text,ne.x+this.posX,ne.y+this.posY,{angle:F.angle,align:D,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=ae)},U=function(F,D,q,J){q=q||0,J=J||0,this.pdf.internal.out(r(F+q)+" "+n(D+J)+" l")},Q=function(F,D,q){return this.pdf.lines(F,D,q,null,null)},X=function(F,D,q,J,te,ne,ie,oe){this.pdf.internal.out([t(a(q+F)),t(s(J+D)),t(a(te+F)),t(s(ne+D)),t(a(ie+F)),t(s(oe+D)),"c"].join(" "))},z=function(F,D,q,J){for(var te=2*Math.PI,ne=Math.PI/2;D>q;)D-=te;var ie=Math.abs(q-D);ie<te&&J&&(ie=te-ie);for(var oe=[],de=J?-1:1,ke=D;ie>1e-5;){var ae=ke+de*Math.min(ie,ne);oe.push(W.call(this,F,ke,ae)),ie-=Math.abs(ae-ke),ke=ae}return oe},W=function(F,D,q){var J=(q-D)/2,te=F*Math.cos(J),ne=F*Math.sin(J),ie=te,oe=-ne,de=ie*ie+oe*oe,ke=de+ie*te+oe*ne,ae=4/3*(Math.sqrt(2*de*ke)-ke)/(ie*ne-oe*te),Oe=ie-ae*oe,Te=oe+ae*ie,Se=Oe,fe=-Te,ye=J+D,Le=Math.cos(ye),Qe=Math.sin(ye);return{x1:F*Math.cos(D),y1:F*Math.sin(D),x2:Oe*Le-Te*Qe,y2:Oe*Qe+Te*Le,x3:Se*Le-fe*Qe,y3:Se*Qe+fe*Le,x4:F*Math.cos(q),y4:F*Math.sin(q)}},G=function(F){return 180*F/Math.PI},Y=function(F,D,q,J,te,ne){var ie=F+.5*(q-F),oe=D+.5*(J-D),de=te+.5*(q-te),ke=ne+.5*(J-ne),ae=Math.min(F,te,ie,de),Oe=Math.max(F,te,ie,de),Te=Math.min(D,ne,oe,ke),Se=Math.max(D,ne,oe,ke);return new l(ae,Te,Oe-ae,Se-Te)},K=function(F,D,q,J,te,ne,ie,oe){var de,ke,ae,Oe,Te,Se,fe,ye,Le,Qe,ue,we,De,He,Ye=q-F,tt=J-D,ft=te-q,$e=ne-J,nt=ie-te,bt=oe-ne;for(ke=0;ke<41;ke++)Le=(fe=(ae=F+(de=ke/40)*Ye)+de*((Te=q+de*ft)-ae))+de*(Te+de*(te+de*nt-Te)-fe),Qe=(ye=(Oe=D+de*tt)+de*((Se=J+de*$e)-Oe))+de*(Se+de*(ne+de*bt-Se)-ye),ke==0?(ue=Le,we=Qe,De=Le,He=Qe):(ue=Math.min(ue,Le),we=Math.min(we,Qe),De=Math.max(De,Le),He=Math.max(He,Qe));return new l(Math.round(ue),Math.round(we),Math.round(De-ue),Math.round(He-we))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,D,q=(F=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:D}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Ar.API),function(e){var t=function(s){var o,l,c,u,d,f,h,m,g,x;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,l.push(f+33,h+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var w=y;w>0;w--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,u,d,f=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=o="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,o[h]),f.fromCharCode.apply(f,c)},n=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=RO(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Ar.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Ar.API),function(e){function t(){return(Dr.html2canvas?Promise.resolve(Dr.html2canvas):Ti(()=>Promise.resolve().then(()=>O0t),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Dr.DOMPurify?Promise.resolve(Dr.DOMPurify):Ti(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=ha(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Ar.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ar.getPageSize=function(o,l,c){if(ha(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(VO):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(Ar.API),Ar.API.addJS=function(e){return _K=e,this.internal.events.subscribe("postPutResources",function(){BC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(BC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),CK=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_K+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){BC!==void 0&&CK!==void 0&&this.internal.out("/Names <</JavaScript "+BC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Ar.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Ar.API);var Hx,TC,SK,kK,jK,tXe=function(){var e,t,r;function n(s){var o,l,c,u,d,f,h,m,g,x,v,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var O,j;for(j=[],O=0;O<4;++O)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,m,g){var x,v,y,w,_,O,j,B,C,k,T,L,R,S,U,Q,X,z,W,G,Y,K=Math.ceil((u.width-f)/m),H=Math.ceil((u.height-h)/g),F=u.width==K&&u.height==H;for(S=o*K,L=F?l:new Uint8Array(S*H),O=s.length,R=0,v=0;R<H&&c<O;){switch(s[c++]){case 0:for(w=X=0;X<S;w=X+=1)L[v++]=s[c++];break;case 1:for(w=z=0;z<S;w=z+=1)x=s[c++],_=w<o?0:L[v-o],L[v++]=(x+_)%256;break;case 2:for(w=W=0;W<S;w=W+=1)x=s[c++],y=(w-w%o)/o,U=R&&L[(R-1)*S+y*o+w%o],L[v++]=(U+x)%256;break;case 3:for(w=G=0;G<S;w=G+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:L[v-o],U=R&&L[(R-1)*S+y*o+w%o],L[v++]=(x+Math.floor((_+U)/2))%256;break;case 4:for(w=Y=0;Y<S;w=Y+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:L[v-o],R===0?U=Q=0:(U=L[(R-1)*S+y*o+w%o],Q=y&&L[(R-1)*S+(y-1)*o+w%o]),j=_+U-Q,B=Math.abs(j-_),k=Math.abs(j-U),T=Math.abs(j-Q),C=B<=k&&B<=T?_:k<=T?U:Q,L[v++]=(x+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!F){var D=((h+R*g)*u.width+f)*o,q=R*S;for(w=0;w<K;w+=1){for(var J=0;J<o;J+=1)l[D++]=L[q++];D+=(m-1)*o}}R++}}return s=FWe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var s,o,l,c,u,d,f,h,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,o=f=0,h=l.length;f<h;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,o){var l,c,u,d,f,h,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,f=x||o,d=h=0,c===1)for(;d<g;)m=x?4*o[d/4]:h,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,h=m;else for(;d<g;)m=x?4*o[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,h=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Dr)==="[object Window]"){try{t=Dr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var o;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var o,l,c,u,d,f,h,m;if(this.animation){for(m=[],l=d=0,f=(h=this.animation.frames).length;d<f;l=++d)o=h[l],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},n.prototype.renderFrame=function(s,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var o,l,c,u,d,f,h=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var m,g;if(m=l++%u,g=c[m],h.renderFrame(s,m),u>1&&l/u<d)return h.animation._timeout=setTimeout(o,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function rXe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,O=e[t++],j=O>>6&1,B=1<<(7&O)+1,C=l,k=c,T=!1;O>>7&&(T=!0,C=t,k=B,t+=3*B);var L=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}d.push({x:v,y,width:w,height:_,has_local_palette:T,palette_offset:C,palette_size:k,data_offset:L,data_length:t-L,transparent_index:h,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(S){if(S<0||S>=d.length)throw new Error("Frame index out of range.");return d[S]},this.decodeAndBlitFrameBGRA=function(S,U){var Q=this.frameInfo(S),X=Q.width*Q.height,z=new Uint8Array(X);BK(e,Q.data_offset,z,X);var W=Q.palette_offset,G=Q.transparent_index;G===null&&(G=256);var Y=Q.width,K=r-Y,H=Y,F=4*(Q.y*r+Q.x),D=4*((Q.y+Q.height)*r+Q.x),q=F,J=4*K;Q.interlaced===!0&&(J+=4*r*7);for(var te=8,ne=0,ie=z.length;ne<ie;++ne){var oe=z[ne];if(H===0&&(H=Y,(q+=J)>=D&&(J=4*K+4*r*(te-1),q=F+(Y+K)*(te<<1),te>>=1)),oe===G)q+=4;else{var de=e[W+3*oe],ke=e[W+3*oe+1],ae=e[W+3*oe+2];U[q++]=ae,U[q++]=ke,U[q++]=de,U[q++]=255}--H}},this.decodeAndBlitFrameRGBA=function(S,U){var Q=this.frameInfo(S),X=Q.width*Q.height,z=new Uint8Array(X);BK(e,Q.data_offset,z,X);var W=Q.palette_offset,G=Q.transparent_index;G===null&&(G=256);var Y=Q.width,K=r-Y,H=Y,F=4*(Q.y*r+Q.x),D=4*((Q.y+Q.height)*r+Q.x),q=F,J=4*K;Q.interlaced===!0&&(J+=4*r*7);for(var te=8,ne=0,ie=z.length;ne<ie;++ne){var oe=z[ne];if(H===0&&(H=Y,(q+=J)>=D&&(J=4*K+4*r*(te-1),q=F+(Y+K)*(te<<1),te>>=1)),oe===G)q+=4;else{var de=e[W+3*oe],ke=e[W+3*oe+1],ae=e[W+3*oe+2];U[q++]=de,U[q++]=ke,U[q++]=ae,U[q++]=255}--H}}}function BK(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===o)break;for(var y=v<l?v:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var O=_;if(h+w+(y!==v?1:0)>n)return void Ca.log("Warning, gif stream longer than expected.");r[h++]=O;var j=h+=w;for(y!==v&&(r[h++]=O),_=y;w--;)_=g[_],r[--j]=255&_,_>>=8;x!==null&&l<4096&&(g[l++]=x<<8|O,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=o+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&Ca.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function OI(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,w=new Array(64),_=new Array(64),O=new Array(64),j=new Array(256),B=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(F,D){for(var q=0,J=0,te=new Array,ne=1;ne<=16;ne++){for(var ie=1;ie<=F[ne];ie++)te[D[J]]=[],te[D[J]][0]=q,te[D[J]][1]=ne,J++,q++;q*=2}return te}function W(F){for(var D=F[0],q=F[1]-1;q>=0;)D&1<<q&&(v|=1<<y),q--,--y<0&&(v==255?(G(255),G(0)):G(v),y=7,v=0)}function G(F){x.push(F)}function Y(F){G(F>>8&255),G(255&F)}function K(F,D,q,J,te){for(var ne,ie=te[0],oe=te[240],de=function(Qe,ue){var we,De,He,Ye,tt,ft,$e,nt,bt,Bt,xt=0;for(bt=0;bt<8;++bt){we=Qe[xt],De=Qe[xt+1],He=Qe[xt+2],Ye=Qe[xt+3],tt=Qe[xt+4],ft=Qe[xt+5],$e=Qe[xt+6];var xr=we+(nt=Qe[xt+7]),Xt=we-nt,Gr=De+$e,wr=De-$e,Ur=He+ft,_n=He-ft,jr=Ye+tt,hs=Ye-tt,qr=xr+jr,Rn=xr-jr,ja=Gr+Ur,Fr=Gr-Ur;Qe[xt]=qr+ja,Qe[xt+4]=qr-ja;var fr=.707106781*(Fr+Rn);Qe[xt+2]=Rn+fr,Qe[xt+6]=Rn-fr;var Xr=.382683433*((qr=hs+_n)-(Fr=wr+Xt)),ms=.5411961*qr+Xr,Yn=1.306562965*Fr+Xr,Ba=.707106781*(ja=_n+wr),Rs=Xt+Ba,Wt=Xt-Ba;Qe[xt+5]=Wt+ms,Qe[xt+3]=Wt-ms,Qe[xt+1]=Rs+Yn,Qe[xt+7]=Rs-Yn,xt+=8}for(xt=0,bt=0;bt<8;++bt){we=Qe[xt],De=Qe[xt+8],He=Qe[xt+16],Ye=Qe[xt+24],tt=Qe[xt+32],ft=Qe[xt+40],$e=Qe[xt+48];var xn=we+(nt=Qe[xt+56]),ln=we-nt,Fn=De+$e,Kn=De-$e,Jn=He+ft,xe=He-ft,Re=Ye+tt,Be=Ye-tt,Fe=xn+Re,me=xn-Re,Ae=Fn+Jn,_e=Fn-Jn;Qe[xt]=Fe+Ae,Qe[xt+32]=Fe-Ae;var Me=.707106781*(_e+me);Qe[xt+16]=me+Me,Qe[xt+48]=me-Me;var Ie=.382683433*((Fe=Be+xe)-(_e=Kn+ln)),ze=.5411961*Fe+Ie,qe=1.306562965*_e+Ie,vt=.707106781*(Ae=xe+Kn),yt=ln+vt,Ut=ln-vt;Qe[xt+40]=Ut+ze,Qe[xt+24]=Ut-ze,Qe[xt+8]=yt+qe,Qe[xt+56]=yt-qe,xt++}for(bt=0;bt<64;++bt)Bt=Qe[bt]*ue[bt],m[bt]=Bt>0?Bt+.5|0:Bt-.5|0;return m}(F,D),ke=0;ke<64;++ke)g[C[ke]]=de[ke];var ae=g[0]-q;q=g[0],ae==0?W(J[0]):(W(J[h[ne=32767+ae]]),W(f[ne]));for(var Oe=63;Oe>0&&g[Oe]==0;)Oe--;if(Oe==0)return W(ie),q;for(var Te,Se=1;Se<=Oe;){for(var fe=Se;g[Se]==0&&Se<=Oe;)++Se;var ye=Se-fe;if(ye>=16){Te=ye>>4;for(var Le=1;Le<=Te;++Le)W(oe);ye&=15}ne=32767+g[Se],W(te[(ye<<4)+h[ne]]),W(f[ne]),Se++}return Oe!=63&&W(ie),q}function H(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(D){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var te=o((q[J]*D+50)/100);te=Math.min(Math.max(te,1),255),l[C[J]]=te}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var oe=o((ne[ie]*D+50)/100);oe=Math.min(Math.max(oe,1),255),c[C[ie]]=oe}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,ae=0;ae<8;ae++)for(var Oe=0;Oe<8;Oe++)u[ke]=1/(l[C[ke]]*de[ae]*de[Oe]*8),d[ke]=1/(c[C[ke]]*de[ae]*de[Oe]*8),ke++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,D){D&&H(D),x=new Array,v=0,y=7,Y(65496),Y(65504),Y(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),Y(1),Y(1),G(0),G(0),function(){Y(65499),Y(132),G(0);for(var De=0;De<64;De++)G(l[De]);G(1);for(var He=0;He<64;He++)G(c[He])}(),function(De,He){Y(65472),Y(17),G(8),Y(He),Y(De),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(F.width,F.height),function(){Y(65476),Y(418),G(0);for(var De=0;De<16;De++)G(k[De+1]);for(var He=0;He<=11;He++)G(T[He]);G(16);for(var Ye=0;Ye<16;Ye++)G(L[Ye+1]);for(var tt=0;tt<=161;tt++)G(R[tt]);G(1);for(var ft=0;ft<16;ft++)G(S[ft+1]);for(var $e=0;$e<=11;$e++)G(U[$e]);G(17);for(var nt=0;nt<16;nt++)G(Q[nt+1]);for(var bt=0;bt<=161;bt++)G(X[bt])}(),Y(65498),Y(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var q=0,J=0,te=0;v=0,y=7,this.encode.displayName="_encode_";for(var ne,ie,oe,de,ke,ae,Oe,Te,Se,fe=F.data,ye=F.width,Le=F.height,Qe=4*ye,ue=0;ue<Le;){for(ne=0;ne<Qe;){for(ke=Qe*ue+ne,Oe=-1,Te=0,Se=0;Se<64;Se++)ae=ke+(Te=Se>>3)*Qe+(Oe=4*(7&Se)),ue+Te>=Le&&(ae-=Qe*(ue+1+Te-Le)),ne+Oe>=Qe&&(ae-=ne+Oe-Qe+4),ie=fe[ae++],oe=fe[ae++],de=fe[ae++],w[Se]=(B[ie]+B[oe+256>>0]+B[de+512>>0]>>16)-128,_[Se]=(B[ie+768>>0]+B[oe+1024>>0]+B[de+1280>>0]>>16)-128,O[Se]=(B[ie+1280>>0]+B[oe+1536>>0]+B[de+1792>>0]>>16)-128;q=K(w,u,q,t,n),J=K(_,d,J,r,a),te=K(O,d,te,r,a),ne+=32}ue+=8}if(y>=0){var we=[];we[1]=y+1,we[0]=(1<<y+1)-1,W(we)}return Y(65497),new Uint8Array(x)},e=e||50,function(){for(var F=String.fromCharCode,D=0;D<256;D++)j[D]=F(D)}(),t=z(k,T),r=z(S,U),n=z(L,R),a=z(Q,X),function(){for(var F=1,D=2,q=1;q<=15;q++){for(var J=F;J<D;J++)h[32767+J]=q,f[32767+J]=[],f[32767+J][1]=q,f[32767+J][0]=J;for(var te=-(D-1);te<=-F;te++)h[32767+te]=q,f[32767+te]=[],f[32767+te][1]=q,f[32767+te][0]=D-1+te;F<<=1,D<<=1}}(),function(){for(var F=0;F<256;F++)B[F]=19595*F,B[F+256>>0]=38470*F,B[F+512>>0]=7471*F+32768,B[F+768>>0]=-11059*F,B[F+1024>>0]=-21709*F,B[F+1280>>0]=32768*F+8421375,B[F+1536>>0]=-27439*F,B[F+1792>>0]=-5329*F}(),H(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function kd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function TK(e){function t(k){if(!k)throw Error("assert :P")}function r(k,T,L){for(var R=0;4>R;R++)if(k[T+R]!=L.charCodeAt(R))return!0;return!1}function n(k,T,L,R,S){for(var U=0;U<S;U++)k[T+U]=L[R+U]}function a(k,T,L,R){for(var S=0;S<R;S++)k[T+S]=L}function s(k){return new Int32Array(k)}function o(k,T){for(var L=[],R=0;R<k;R++)L.push(new T);return L}function l(k,T){var L=[];return function R(S,U,Q){for(var X=Q[U],z=0;z<X&&(S.push(Q.length>U+1?[]:new T),!(Q.length<U+1));z++)R(S[z],U+1,Q)}(L,0,k),L}var c=function(){var k=this;function T(I,V){for(var re=1<<V-1>>>0;I&re;)re>>>=1;return re?(I&re-1)+re:I}function L(I,V,re,le,pe){t(!(le%re));do I[V+(le-=re)]=pe;while(0<le)}function R(I,V,re,le,pe){if(t(2328>=pe),512>=pe)var ve=s(512);else if((ve=s(pe))==null)return 0;return function(be,Ne,je,Pe,Ke,ct){var it,rt,Tt=Ne,gt=1<<je,We=s(16),Je=s(16);for(t(Ke!=0),t(Pe!=null),t(be!=null),t(0<je),rt=0;rt<Ke;++rt){if(15<Pe[rt])return 0;++We[Pe[rt]]}if(We[0]==Ke)return 0;for(Je[1]=0,it=1;15>it;++it){if(We[it]>1<<it)return 0;Je[it+1]=Je[it]+We[it]}for(rt=0;rt<Ke;++rt)it=Pe[rt],0<Pe[rt]&&(ct[Je[it]++]=rt);if(Je[15]==1)return(Pe=new S).g=0,Pe.value=ct[0],L(be,Tt,1,gt,Pe),gt;var Ct,It=-1,St=gt-1,Zt=0,Gt=1,hr=1,Kt=1<<je;for(rt=0,it=1,Ke=2;it<=je;++it,Ke<<=1){if(Gt+=hr<<=1,0>(hr-=We[it]))return 0;for(;0<We[it];--We[it])(Pe=new S).g=it,Pe.value=ct[rt++],L(be,Tt+Zt,Ke,Kt,Pe),Zt=T(Zt,it)}for(it=je+1,Ke=2;15>=it;++it,Ke<<=1){if(Gt+=hr<<=1,0>(hr-=We[it]))return 0;for(;0<We[it];--We[it]){if(Pe=new S,(Zt&St)!=It){for(Tt+=Kt,Ct=1<<(It=it)-je;15>It&&!(0>=(Ct-=We[It]));)++It,Ct<<=1;gt+=Kt=1<<(Ct=It-je),be[Ne+(It=Zt&St)].g=Ct+je,be[Ne+It].value=Tt-Ne-It}Pe.g=it-je,Pe.value=ct[rt++],L(be,Tt+(Zt>>je),Ke,Kt,Pe),Zt=T(Zt,it)}}return Gt!=2*Je[15]-1?0:gt}(I,V,re,le,pe,ve)}function S(){this.value=this.g=0}function U(){this.value=this.g=0}function Q(){this.G=o(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ms,U)}function X(I,V,re,le){t(I!=null),t(V!=null),t(2147483648>le),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=V,I.pa=re,I.Jd=V,I.Yc=re+le,I.Zc=4<=le?re+le-4+1:re,ne(I)}function z(I,V){for(var re=0;0<V--;)re|=oe(I,128)<<V;return re}function W(I,V){var re=z(I,V);return ie(I)?-re:re}function G(I,V,re,le){var pe,ve=0;for(t(I!=null),t(V!=null),t(4294967288>le),I.Sb=le,I.Ra=0,I.u=0,I.h=0,4<le&&(le=4),pe=0;pe<le;++pe)ve+=V[re+pe]<<8*pe;I.Ra=ve,I.bb=le,I.oa=V,I.pa=re}function Y(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<SA-8>>>0,++I.bb,I.u-=8;q(I)&&(I.h=1,I.u=0)}function K(I,V){if(t(0<=V),!I.h&&V<=_A){var re=D(I)&Af[V];return I.u+=V,Y(I),re}return I.h=1,I.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(I){return I.Ra>>>(I.u&SA-1)>>>0}function q(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>SA}function J(I,V){I.u=V,I.h=q(I)}function te(I){I.u>=a0&&(t(I.u>=a0),Y(I))}function ne(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function ie(I){return z(I,1)}function oe(I,V){var re=I.Ca;0>I.b&&ne(I);var le=I.b,pe=re*V>>>8,ve=(I.I>>>le>pe)+0;for(ve?(re-=pe,I.I-=pe+1<<le>>>0):re=pe+1,le=re,pe=0;256<=le;)pe+=8,le>>=8;return le=7^pe+Oo[le],I.b-=le,I.Ca=(re<<le)-1,ve}function de(I,V,re){I[V+0]=re>>24&255,I[V+1]=re>>16&255,I[V+2]=re>>8&255,I[V+3]=re>>0&255}function ke(I,V){return I[V+0]<<0|I[V+1]<<8}function ae(I,V){return ke(I,V)|I[V+2]<<16}function Oe(I,V){return ke(I,V)|ke(I,V+2)<<16}function Te(I,V){var re=1<<V;return t(I!=null),t(0<V),I.X=s(re),I.X==null?0:(I.Mb=32-V,I.Xa=V,1)}function Se(I,V){t(I!=null),t(V!=null),t(I.Xa==V.Xa),n(V.X,0,I.X,0,1<<V.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function ye(I,V,re,le){t(re!=null),t(le!=null);var pe=re[0],ve=le[0];return pe==0&&(pe=(I*ve+V/2)/V),ve==0&&(ve=(V*pe+I/2)/I),0>=pe||0>=ve?0:(re[0]=pe,le[0]=ve,1)}function Le(I,V){return I+(1<<V)-1>>>V}function Qe(I,V){return((4278255360&I)+(4278255360&V)>>>0&4278255360)+((16711935&I)+(16711935&V)>>>0&16711935)>>>0}function ue(I,V){k[V]=function(re,le,pe,ve,be,Ne,je){var Pe;for(Pe=0;Pe<be;++Pe){var Ke=k[I](Ne[je+Pe-1],pe,ve+Pe);Ne[je+Pe]=Qe(re[le+Pe],Ke)}}}function we(){this.ud=this.hd=this.jd=0}function De(I,V){return((4278124286&(I^V))>>>1)+(I&V)>>>0}function He(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function Ye(I,V){return He(I+(I-V+.5>>1))}function tt(I,V,re){return Math.abs(V-re)-Math.abs(I-re)}function ft(I,V,re,le,pe,ve,be){for(le=ve[be-1],re=0;re<pe;++re)ve[be+re]=le=Qe(I[V+re],le)}function $e(I,V,re,le,pe){var ve;for(ve=0;ve<re;++ve){var be=I[V+ve],Ne=be>>8&255,je=16711935&(je=(je=16711935&be)+((Ne<<16)+Ne));le[pe+ve]=(4278255360&be)+je>>>0}}function nt(I,V){V.jd=I>>0&255,V.hd=I>>8&255,V.ud=I>>16&255}function bt(I,V,re,le,pe,ve){var be;for(be=0;be<le;++be){var Ne=V[re+be],je=Ne>>>8,Pe=Ne,Ke=255&(Ke=(Ke=Ne>>>16)+((I.jd<<24>>24)*(je<<24>>24)>>>5));Pe=255&(Pe=(Pe=Pe+((I.hd<<24>>24)*(je<<24>>24)>>>5))+((I.ud<<24>>24)*(Ke<<24>>24)>>>5)),pe[ve+be]=(4278255360&Ne)+(Ke<<16)+Pe}}function Bt(I,V,re,le,pe){k[V]=function(ve,be,Ne,je,Pe,Ke,ct,it,rt){for(je=ct;je<it;++je)for(ct=0;ct<rt;++ct)Pe[Ke++]=pe(Ne[le(ve[be++])])},k[I]=function(ve,be,Ne,je,Pe,Ke,ct){var it=8>>ve.b,rt=ve.Ea,Tt=ve.K[0],gt=ve.w;if(8>it)for(ve=(1<<ve.b)-1,gt=(1<<it)-1;be<Ne;++be){var We,Je=0;for(We=0;We<rt;++We)We&ve||(Je=le(je[Pe++])),Ke[ct++]=pe(Tt[Je&gt]),Je>>=it}else k["VP8LMapColor"+re](je,Pe,Tt,gt,Ke,ct,be,Ne,rt)}}function xt(I,V,re,le,pe){for(re=V+re;V<re;){var ve=I[V++];le[pe++]=ve>>16&255,le[pe++]=ve>>8&255,le[pe++]=ve>>0&255}}function xr(I,V,re,le,pe){for(re=V+re;V<re;){var ve=I[V++];le[pe++]=ve>>16&255,le[pe++]=ve>>8&255,le[pe++]=ve>>0&255,le[pe++]=ve>>24&255}}function Xt(I,V,re,le,pe){for(re=V+re;V<re;){var ve=(be=I[V++])>>16&240|be>>12&15,be=be>>0&240|be>>28&15;le[pe++]=ve,le[pe++]=be}}function Gr(I,V,re,le,pe){for(re=V+re;V<re;){var ve=(be=I[V++])>>16&248|be>>13&7,be=be>>5&224|be>>3&31;le[pe++]=ve,le[pe++]=be}}function wr(I,V,re,le,pe){for(re=V+re;V<re;){var ve=I[V++];le[pe++]=ve>>0&255,le[pe++]=ve>>8&255,le[pe++]=ve>>16&255}}function Ur(I,V,re,le,pe,ve){if(ve==0)for(re=V+re;V<re;)de(le,((ve=I[V++])[0]>>24|ve[1]>>8&65280|ve[2]<<8&16711680|ve[3]<<24)>>>0),pe+=32;else n(le,pe,I,V,re)}function _n(I,V){k[V][0]=k[I+"0"],k[V][1]=k[I+"1"],k[V][2]=k[I+"2"],k[V][3]=k[I+"3"],k[V][4]=k[I+"4"],k[V][5]=k[I+"5"],k[V][6]=k[I+"6"],k[V][7]=k[I+"7"],k[V][8]=k[I+"8"],k[V][9]=k[I+"9"],k[V][10]=k[I+"10"],k[V][11]=k[I+"11"],k[V][12]=k[I+"12"],k[V][13]=k[I+"13"],k[V][14]=k[I+"0"],k[V][15]=k[I+"0"]}function jr(I){return I==cp||I==Nf||I==hd||I==l0}function hs(){this.eb=[],this.size=this.A=this.fb=0}function qr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Rn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new hs,this.f.kb=new qr,this.sd=null}function ja(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Fr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function fr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Xr(I,V){var re=I.T,le=V.ba.f.RGBA,pe=le.eb,ve=le.fb+I.ka*le.A,be=oi[V.ba.S],Ne=I.y,je=I.O,Pe=I.f,Ke=I.N,ct=I.ea,it=I.W,rt=V.cc,Tt=V.dc,gt=V.Mc,We=V.Nc,Je=I.ka,Ct=I.ka+I.T,It=I.U,St=It+1>>1;for(Je==0?be(Ne,je,null,null,Pe,Ke,ct,it,Pe,Ke,ct,it,pe,ve,null,null,It):(be(V.ec,V.fc,Ne,je,rt,Tt,gt,We,Pe,Ke,ct,it,pe,ve-le.A,pe,ve,It),++re);Je+2<Ct;Je+=2)rt=Pe,Tt=Ke,gt=ct,We=it,Ke+=I.Rc,it+=I.Rc,ve+=2*le.A,be(Ne,(je+=2*I.fa)-I.fa,Ne,je,rt,Tt,gt,We,Pe,Ke,ct,it,pe,ve-le.A,pe,ve,It);return je+=I.fa,I.j+Ct<I.o?(n(V.ec,V.fc,Ne,je,It),n(V.cc,V.dc,Pe,Ke,St),n(V.Mc,V.Nc,ct,it,St),re--):1&Ct||be(Ne,je,null,null,Pe,Ke,ct,it,Pe,Ke,ct,it,pe,ve+le.A,null,null,It),re}function ms(I,V,re){var le=I.F,pe=[I.J];if(le!=null){var ve=I.U,be=V.ba.S,Ne=be==IA||be==hd;V=V.ba.f.RGBA;var je=[0],Pe=I.ka;je[0]=I.T,I.Kb&&(Pe==0?--je[0]:(--Pe,pe[0]-=I.width),I.j+I.ka+I.T==I.o&&(je[0]=I.o-I.j-Pe));var Ke=V.eb;Pe=V.fb+Pe*V.A,I=un(le,pe[0],I.width,ve,je,Ke,Pe+(Ne?0:3),V.A),t(re==je),I&&jr(be)&&ml(Ke,Pe,Ne,ve,je,V.A)}return 0}function Yn(I){var V=I.ma,re=V.ba.S,le=11>re,pe=re==o0||re==lp||re==IA||re==Ad||re==12||jr(re);if(V.memory=null,V.Ib=null,V.Jb=null,V.Nd=null,!ff(V.Oa,I,pe?11:12))return 0;if(pe&&jr(re)&&Rt(),I.da)alert("todo:use_scaling");else{if(le){if(V.Ib=fr,I.Kb){if(re=I.U+1>>1,V.memory=s(I.U+2*re),V.memory==null)return 0;V.ec=V.memory,V.fc=0,V.cc=V.ec,V.dc=V.fc+I.U,V.Mc=V.cc,V.Nc=V.dc+re,V.Ib=Xr,Rt()}}else alert("todo:EmitYUV");pe&&(V.Jb=ms,le&&et())}if(le&&!zN){for(I=0;256>I;++I)Dj[I]=89858*(I-128)+Qs>>Nu,fp[I]=-22014*(I-128)+Qs,k1[I]=-45773*(I-128),Hs[I]=113618*(I-128)+Qs>>Nu;for(I=_f;I<fx;++I)V=76283*(I-16)+Qs>>Nu,Ap[I-_f]=Mn(V,255),j1[I-_f]=Mn(V+8>>4,15);zN=1}return 1}function Ba(I){var V=I.ma,re=I.U,le=I.T;return t(!(1&I.ka)),0>=re||0>=le?0:(re=V.Ib(I,V),V.Jb!=null&&V.Jb(I,V,re),V.Dc+=re,1)}function Rs(I){I.ma.memory=null}function Wt(I,V,re,le){return K(I,8)!=47?0:(V[0]=K(I,14)+1,re[0]=K(I,14)+1,le[0]=K(I,1),K(I,3)!=0?0:!I.h)}function xn(I,V){if(4>I)return I+1;var re=I-2>>1;return(2+(1&I)<<re)+K(V,re)+1}function ln(I,V){return 120<V?V-120:1<=(re=((re=pd[V-1])>>4)*I+(8-(15&re)))?re:1;var re}function Fn(I,V,re){var le=D(re),pe=I[V+=255&le].g-8;return 0<pe&&(J(re,re.u+8),le=D(re),V+=I[V].value,V+=le&(1<<pe)-1),J(re,re.u+I[V].g),I[V].value}function Kn(I,V,re){return re.g+=I.g,re.value+=I.value<<V>>>0,t(8>=re.g),I.g}function Jn(I,V,re){var le=I.xc;return t((V=le==0?0:I.vc[I.md*(re>>le)+(V>>le)])<I.Wb),I.Ya[V]}function xe(I,V,re,le){var pe=I.ab,ve=I.c*V,be=I.C;V=be+V;var Ne=re,je=le;for(le=I.Ta,re=I.Ua;0<pe--;){var Pe=I.gc[pe],Ke=be,ct=V,it=Ne,rt=je,Tt=(je=le,Ne=re,Pe.Ea);switch(t(Ke<ct),t(ct<=Pe.nc),Pe.hc){case 2:sx(it,rt,(ct-Ke)*Tt,je,Ne);break;case 0:var gt=Ke,We=ct,Je=je,Ct=Ne,It=(Kt=Pe).Ea;gt==0&&(_1(it,rt,null,null,1,Je,Ct),ft(it,rt+1,0,0,It-1,Je,Ct+1),rt+=It,Ct+=It,++gt);for(var St=1<<Kt.b,Zt=St-1,Gt=Le(It,Kt.b),hr=Kt.K,Kt=Kt.w+(gt>>Kt.b)*Gt;gt<We;){var jn=hr,Un=Kt,sn=1;for(ip(it,rt,Je,Ct-It,1,Je,Ct);sn<It;){var en=(sn&~Zt)+St;en>It&&(en=It),(0,ud[jn[Un++]>>8&15])(it,rt+ +sn,Je,Ct+sn-It,en-sn,Je,Ct+sn),sn=en}rt+=It,Ct+=It,++gt&Zt||(Kt+=Gt)}ct!=Pe.nc&&n(je,Ne-Tt,je,Ne+(ct-Ke-1)*Tt,Tt);break;case 1:for(Tt=it,We=rt,It=(it=Pe.Ea)-(Ct=it&~(Je=(rt=1<<Pe.b)-1)),gt=Le(it,Pe.b),St=Pe.K,Pe=Pe.w+(Ke>>Pe.b)*gt;Ke<ct;){for(Zt=St,Gt=Pe,hr=new we,Kt=We+Ct,jn=We+it;We<Kt;)nt(Zt[Gt++],hr),mf(hr,Tt,We,rt,je,Ne),We+=rt,Ne+=rt;We<jn&&(nt(Zt[Gt++],hr),mf(hr,Tt,We,It,je,Ne),We+=It,Ne+=It),++Ke&Je||(Pe+=gt)}break;case 3:if(it==je&&rt==Ne&&0<Pe.b){for(We=je,it=Tt=Ne+(ct-Ke)*Tt-(Ct=(ct-Ke)*Le(Pe.Ea,Pe.b)),rt=je,Je=Ne,gt=[],Ct=(It=Ct)-1;0<=Ct;--Ct)gt[Ct]=rt[Je+Ct];for(Ct=It-1;0<=Ct;--Ct)We[it+Ct]=gt[Ct];Ql(Pe,Ke,ct,je,Tt,je,Ne)}else Ql(Pe,Ke,ct,it,rt,je,Ne)}Ne=le,je=re}je!=re&&n(le,re,Ne,je,ve)}function Re(I,V){var re=I.V,le=I.Ba+I.c*I.C,pe=V-I.C;if(t(V<=I.l.o),t(16>=pe),0<pe){var ve=I.l,be=I.Ta,Ne=I.Ua,je=ve.width;if(xe(I,pe,re,le),pe=Ne=[Ne],t((re=I.C)<(le=V)),t(ve.v<ve.va),le>ve.o&&(le=ve.o),re<ve.j){var Pe=ve.j-re;re=ve.j,pe[0]+=Pe*je}if(re>=le?re=0:(pe[0]+=4*ve.v,ve.ka=re-ve.j,ve.U=ve.va-ve.v,ve.T=le-re,re=1),re){if(Ne=Ne[0],11>(re=I.ca).S){var Ke=re.f.RGBA,ct=(le=re.S,pe=ve.U,ve=ve.T,Pe=Ke.eb,Ke.A),it=ve;for(Ke=Ke.fb+I.Ma*Ke.A;0<it--;){var rt=be,Tt=Ne,gt=pe,We=Pe,Je=Ke;switch(le){case Hi:co(rt,Tt,gt,We,Je);break;case o0:_i(rt,Tt,gt,We,Je);break;case cp:_i(rt,Tt,gt,We,Je),ml(We,Je,0,gt,1,0);break;case vu:yc(rt,Tt,gt,We,Je);break;case lp:Ur(rt,Tt,gt,We,Je,1);break;case Nf:Ur(rt,Tt,gt,We,Je,1),ml(We,Je,0,gt,1,0);break;case IA:Ur(rt,Tt,gt,We,Je,0);break;case hd:Ur(rt,Tt,gt,We,Je,0),ml(We,Je,1,gt,1,0);break;case Ad:pf(rt,Tt,gt,We,Je);break;case l0:pf(rt,Tt,gt,We,Je),cn(We,Je,gt,1,0);break;case ox:Do(rt,Tt,gt,We,Je);break;default:t(0)}Ne+=je,Ke+=ct}I.Ma+=ve}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=re.height)}}I.C=V,t(I.C<=I.i)}function Be(I){var V;if(0<I.ua)return 0;for(V=0;V<I.Wb;++V){var re=I.Ya[V].G,le=I.Ya[V].H;if(0<re[1][le[1]+0].g||0<re[2][le[2]+0].g||0<re[3][le[3]+0].g)return 0}return 1}function Fe(I,V,re,le,pe,ve){if(I.Z!=0){var be=I.qd,Ne=I.rd;for(t(yu[I.Z]!=null);V<re;++V)yu[I.Z](be,Ne,le,pe,le,pe,ve),be=le,Ne=pe,pe+=ve;I.qd=be,I.rd=Ne}}function me(I,V){var re=I.l.ma,le=re.Z==0||re.Z==1?I.l.j:I.C;if(le=I.C<le?le:I.C,t(V<=I.l.o),V>le){var pe=I.l.width,ve=re.ca,be=re.tb+pe*le,Ne=I.V,je=I.Ba+I.c*le,Pe=I.gc;t(I.ab==1),t(Pe[0].hc==3),hf(Pe[0],le,V,Ne,je,ve,be),Fe(re,le,V,ve,be,pe)}I.C=I.Ma=V}function Ae(I,V,re,le,pe,ve,be){var Ne=I.$/le,je=I.$%le,Pe=I.m,Ke=I.s,ct=re+I.$,it=ct;pe=re+le*pe;var rt=re+le*ve,Tt=280+Ke.ua,gt=I.Pb?Ne:16777216,We=0<Ke.ua?Ke.Wa:null,Je=Ke.wc,Ct=ct<rt?Jn(Ke,je,Ne):null;t(I.C<ve),t(rt<=pe);var It=!1;e:for(;;){for(;It||ct<rt;){var St=0;if(Ne>=gt){var Zt=ct-re;t((gt=I).Pb),gt.wd=gt.m,gt.xd=Zt,0<gt.s.ua&&Se(gt.s.Wa,gt.s.vb),gt=Ne+QN}if(je&Je||(Ct=Jn(Ke,je,Ne)),t(Ct!=null),Ct.Qb&&(V[ct]=Ct.qb,It=!0),!It)if(te(Pe),Ct.jc){St=Pe,Zt=V;var Gt=ct,hr=Ct.pd[D(St)&Ms-1];t(Ct.jc),256>hr.g?(J(St,St.u+hr.g),Zt[Gt]=hr.value,St=0):(J(St,St.u+hr.g-256),t(256<=hr.value),St=hr.value),St==0&&(It=!0)}else St=Fn(Ct.G[0],Ct.H[0],Pe);if(Pe.h)break;if(It||256>St){if(!It)if(Ct.nd)V[ct]=(Ct.qb|St<<8)>>>0;else{if(te(Pe),It=Fn(Ct.G[1],Ct.H[1],Pe),te(Pe),Zt=Fn(Ct.G[2],Ct.H[2],Pe),Gt=Fn(Ct.G[3],Ct.H[3],Pe),Pe.h)break;V[ct]=(Gt<<24|It<<16|St<<8|Zt)>>>0}if(It=!1,++ct,++je>=le&&(je=0,++Ne,be!=null&&Ne<=ve&&!(Ne%16)&&be(I,Ne),We!=null))for(;it<ct;)St=V[it++],We.X[(506832829*St&4294967295)>>>We.Mb]=St}else if(280>St){if(St=xn(St-256,Pe),Zt=Fn(Ct.G[4],Ct.H[4],Pe),te(Pe),Zt=ln(le,Zt=xn(Zt,Pe)),Pe.h)break;if(ct-re<Zt||pe-ct<St)break e;for(Gt=0;Gt<St;++Gt)V[ct+Gt]=V[ct+Gt-Zt];for(ct+=St,je+=St;je>=le;)je-=le,++Ne,be!=null&&Ne<=ve&&!(Ne%16)&&be(I,Ne);if(t(ct<=pe),je&Je&&(Ct=Jn(Ke,je,Ne)),We!=null)for(;it<ct;)St=V[it++],We.X[(506832829*St&4294967295)>>>We.Mb]=St}else{if(!(St<Tt))break e;for(It=St-280,t(We!=null);it<ct;)St=V[it++],We.X[(506832829*St&4294967295)>>>We.Mb]=St;St=ct,t(!(It>>>(Zt=We).Xa)),V[St]=Zt.X[It],It=!0}It||t(Pe.h==q(Pe))}if(I.Pb&&Pe.h&&ct<pe)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&Se(I.s.vb,I.s.Wa);else{if(Pe.h)break e;be!=null&&be(I,Ne>ve?ve:Ne),I.a=0,I.$=ct-re}return 1}return I.a=3,0}function _e(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var V=I.Wa;V!=null&&(V.X=null),I.vb=null,t(I!=null)}function Me(){var I=new r0;return I==null?null:(I.a=0,I.xb=c0,_n("Predictor","VP8LPredictors"),_n("Predictor","VP8LPredictors_C"),_n("PredictorAdd","VP8LPredictorsAdd"),_n("PredictorAdd","VP8LPredictorsAdd_C"),sx=$e,mf=bt,co=xt,_i=xr,pf=Xt,Do=Gr,yc=wr,k.VP8LMapColor32b=si,k.VP8LMapColor8b=op,I)}function Ie(I,V,re,le,pe){var ve=1,be=[I],Ne=[V],je=le.m,Pe=le.s,Ke=null,ct=0;e:for(;;){if(re)for(;ve&&K(je,1);){var it=be,rt=Ne,Tt=le,gt=1,We=Tt.m,Je=Tt.gc[Tt.ab],Ct=K(We,2);if(Tt.Oc&1<<Ct)ve=0;else{switch(Tt.Oc|=1<<Ct,Je.hc=Ct,Je.Ea=it[0],Je.nc=rt[0],Je.K=[null],++Tt.ab,t(4>=Tt.ab),Ct){case 0:case 1:Je.b=K(We,3)+2,gt=Ie(Le(Je.Ea,Je.b),Le(Je.nc,Je.b),0,Tt,Je.K),Je.K=Je.K[0];break;case 3:var It,St=K(We,8)+1,Zt=16<St?0:4<St?1:2<St?2:3;if(it[0]=Le(Je.Ea,Zt),Je.b=Zt,It=gt=Ie(St,1,0,Tt,Je.K)){var Gt,hr=St,Kt=Je,jn=1<<(8>>Kt.b),Un=s(jn);if(Un==null)It=0;else{var sn=Kt.K[0],en=Kt.w;for(Un[0]=Kt.K[0][0],Gt=1;Gt<1*hr;++Gt)Un[Gt]=Qe(sn[en+Gt],Un[Gt-1]);for(;Gt<4*jn;++Gt)Un[Gt]=0;Kt.K[0]=null,Kt.K[0]=Un,It=1}}gt=It;break;case 2:break;default:t(0)}ve=gt}}if(be=be[0],Ne=Ne[0],ve&&K(je,1)&&!(ve=1<=(ct=K(je,4))&&11>=ct)){le.a=3;break e}var ea;if(ea=ve)t:{var Qn,zr,oa,Er=le,Or=be,kn=Ne,Bn=ct,li=re,Vs=Er.m,as=Er.s,ss=[null],ys=1,$l=0,Hn=OA[Bn];r:for(;;){if(li&&K(Vs,1)){var ws=K(Vs,3)+2,Ec=Le(Or,ws),Sf=Le(kn,ws),RA=Ec*Sf;if(!Ie(Ec,Sf,0,Er,ss))break r;for(ss=ss[0],as.xc=ws,Qn=0;Qn<RA;++Qn){var kf=ss[Qn]>>8&65535;ss[Qn]=kf,kf>=ys&&(ys=kf+1)}}if(Vs.h)break r;for(zr=0;5>zr;++zr){var Ta=pl[zr];!zr&&0<Bn&&(Ta+=1<<Bn),$l<Ta&&($l=Ta)}var hp=o(ys*Hn,S),Ax=ys,fo=o(Ax,Q);if(fo==null)var Ra=null;else t(65536>=Ax),Ra=fo;var LA=s($l);if(Ra==null||LA==null||hp==null){Er.a=1;break r}var jf=hp;for(Qn=oa=0;Qn<ys;++Qn){var Ro=Ra[Qn],Bf=Ro.G,Lo=Ro.H,mp=0,d0=1,hx=0;for(zr=0;5>zr;++zr){Ta=pl[zr],Bf[zr]=jf,Lo[zr]=oa,!zr&&0<Bn&&(Ta+=1<<Bn);a:{var pp,mx=Ta,gp=Er,f0=LA,qN=jf,KN=oa,xp=0,bd=gp.m,Rj=K(bd,1);if(a(f0,0,0,mx),Rj){var WN=K(bd,1)+1,XN=K(bd,1),B1=K(bd,XN==0?1:8);f0[B1]=1,WN==2&&(f0[B1=K(bd,8)]=1);var A0=1}else{var T1=s(19),I1=K(bd,4)+4;if(19<I1){gp.a=3;var vp=0;break a}for(pp=0;pp<I1;++pp)T1[md[pp]]=K(bd,3);var px=void 0,h0=void 0,YN=gp,JN=T1,yd=mx,bp=f0,gx=0,Cc=YN.m,m0=8,F1=o(128,S);n:for(;R(F1,0,7,JN,19);){if(K(Cc,1)){var ZN=2+2*K(Cc,3);if((px=2+K(Cc,ZN))>yd)break n}else px=yd;for(h0=0;h0<yd&&px--;){te(Cc);var O1=F1[0+(127&D(Cc))];J(Cc,Cc.u+O1.g);var MA=O1.value;if(16>MA)bp[h0++]=MA,MA!=0&&(m0=MA);else{var eE=MA==16,D1=MA-16,P1=zl[D1],R1=K(Cc,lx[D1])+P1;if(h0+R1>yd)break n;for(var tE=eE?m0:0;0<R1--;)bp[h0++]=tE}}gx=1;break n}gx||(YN.a=3),A0=gx}(A0=A0&&!bd.h)&&(xp=R(qN,KN,8,f0,mx)),A0&&xp!=0?vp=xp:(gp.a=3,vp=0)}if(vp==0)break r;if(d0&&FA[zr]==1&&(d0=jf[oa].g==0),mp+=jf[oa].g,oa+=vp,3>=zr){var UA,xx=LA[0];for(UA=1;UA<Ta;++UA)LA[UA]>xx&&(xx=LA[UA]);hx+=xx}}if(Ro.nd=d0,Ro.Qb=0,d0&&(Ro.qb=(Bf[3][Lo[3]+0].value<<24|Bf[1][Lo[1]+0].value<<16|Bf[2][Lo[2]+0].value)>>>0,mp==0&&256>Bf[0][Lo[0]+0].value&&(Ro.Qb=1,Ro.qb+=Bf[0][Lo[0]+0].value<<8)),Ro.jc=!Ro.Qb&&6>hx,Ro.jc){var yp,wd=Ro;for(yp=0;yp<Ms;++yp){var Eu=yp,Nd=wd.pd[Eu],wp=wd.G[0][wd.H[0]+Eu];256<=wp.value?(Nd.g=wp.g+256,Nd.value=wp.value):(Nd.g=0,Nd.value=0,Eu>>=Kn(wp,8,Nd),Eu>>=Kn(wd.G[1][wd.H[1]+Eu],16,Nd),Eu>>=Kn(wd.G[2][wd.H[2]+Eu],0,Nd),Kn(wd.G[3][wd.H[3]+Eu],24,Nd))}}}as.vc=ss,as.Wb=ys,as.Ya=Ra,as.yc=hp,ea=1;break t}ea=0}if(!(ve=ea)){le.a=3;break e}if(0<ct){if(Pe.ua=1<<ct,!Te(Pe.Wa,ct)){le.a=1,ve=0;break e}}else Pe.ua=0;var Np=le,L1=be,rE=Ne,M1=Np.s,U1=M1.xc;if(Np.c=L1,Np.i=rE,M1.md=Le(L1,U1),M1.wc=U1==0?-1:(1<<U1)-1,re){le.xb=VN;break e}if((Ke=s(be*Ne))==null){le.a=1,ve=0;break e}ve=(ve=Ae(le,Ke,0,be,Ne,Ne,null))&&!je.h;break e}return ve?(pe!=null?pe[0]=Ke:(t(Ke==null),t(re)),le.$=0,re||_e(Pe)):_e(Pe),ve}function ze(I,V){var re=I.c*I.i,le=re+V+16*V;return t(I.c<=V),I.V=s(le),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+re+V,1)}function qe(I,V){var re=I.C,le=V-re,pe=I.V,ve=I.Ba+I.c*re;for(t(V<=I.l.o);0<le;){var be=16<le?16:le,Ne=I.l.ma,je=I.l.width,Pe=je*be,Ke=Ne.ca,ct=Ne.tb+je*re,it=I.Ta,rt=I.Ua;xe(I,be,pe,ve),pa(it,rt,Ke,ct,Pe),Fe(Ne,re,re+be,Ke,ct,je),le-=be,pe+=be*I.c,re+=be}t(re==V),I.C=I.Ma=V}function vt(){this.ub=this.yd=this.td=this.Rb=0}function yt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ut(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function kt(){this.Yb=function(){var I=[];return function V(re,le,pe){for(var ve=pe[le],be=0;be<ve&&(re.push(pe.length>le+1?[]:0),!(pe.length<le+1));be++)V(re[be],le+1,pe)}(I,0,[3,11]),I}()}function Qt(){this.jb=s(3),this.Wc=l([4,8],kt),this.Xc=l([4,17],kt)}function Nr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Jr(){this.ld=this.La=this.dd=this.tc=0}function Zr(){this.Na=this.la=0}function an(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ps(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ko(){this.uc=this.M=this.Nb=0,this.wa=Array(new Jr),this.Y=0,this.ya=Array(new ps),this.aa=0,this.l=new Ls}function gs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ni(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new vt,this.Kc=new yt,this.ed=new Nr,this.Qa=new Ut,this.Ic=this.$c=this.Aa=0,this.D=new ko,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,H),this.ia=0,this.pb=o(4,an),this.Pa=new Qt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gs),this.Hd=0,this.rb=Array(new Zr),this.sb=0,this.wa=Array(new Jr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ps),this.L=this.aa=0,this.gd=l([4,2],Jr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ls(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wi(){var I=new ni;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,Us||(Us=Jh)),I}function ma(I,V,re){return I.a==0&&(I.a=V,I.sc=re,I.cb=0),0}function ai(I,V,re){return 3<=re&&I[V+0]==157&&I[V+1]==1&&I[V+2]==42}function af(I,V){if(I==null)return 0;if(I.a=0,I.sc="OK",V==null)return ma(I,2,"null VP8Io passed to VP8GetHeaders()");var re=V.data,le=V.w,pe=V.ha;if(4>pe)return ma(I,7,"Truncated header.");var ve=re[le+0]|re[le+1]<<8|re[le+2]<<16,be=I.Od;if(be.Rb=!(1&ve),be.td=ve>>1&7,be.yd=ve>>4&1,be.ub=ve>>5,3<be.td)return ma(I,3,"Incorrect keyframe parameters.");if(!be.yd)return ma(I,4,"Frame not displayable.");le+=3,pe-=3;var Ne=I.Kc;if(be.Rb){if(7>pe)return ma(I,7,"cannot parse picture header");if(!ai(re,le,pe))return ma(I,3,"Bad code word");Ne.c=16383&(re[le+4]<<8|re[le+3]),Ne.Td=re[le+4]>>6,Ne.i=16383&(re[le+6]<<8|re[le+5]),Ne.Ud=re[le+6]>>6,le+=7,pe-=7,I.za=Ne.c+15>>4,I.Ub=Ne.i+15>>4,V.width=Ne.c,V.height=Ne.i,V.Da=0,V.j=0,V.v=0,V.va=V.width,V.o=V.height,V.da=0,V.ib=V.width,V.hb=V.height,V.U=V.width,V.T=V.height,a((ve=I.Pa).jb,0,255,ve.jb.length),t((ve=I.Qa)!=null),ve.Cb=0,ve.Bb=0,ve.Fb=1,a(ve.Zb,0,0,ve.Zb.length),a(ve.Lb,0,0,ve.Lb)}if(be.ub>pe)return ma(I,7,"bad partition length");X(ve=I.m,re,le,be.ub),le+=be.ub,pe-=be.ub,be.Rb&&(Ne.Ld=ie(ve),Ne.Kd=ie(ve)),Ne=I.Qa;var je,Pe=I.Pa;if(t(ve!=null),t(Ne!=null),Ne.Cb=ie(ve),Ne.Cb){if(Ne.Bb=ie(ve),ie(ve)){for(Ne.Fb=ie(ve),je=0;4>je;++je)Ne.Zb[je]=ie(ve)?W(ve,7):0;for(je=0;4>je;++je)Ne.Lb[je]=ie(ve)?W(ve,6):0}if(Ne.Bb)for(je=0;3>je;++je)Pe.jb[je]=ie(ve)?z(ve,8):255}else Ne.Bb=0;if(ve.Ka)return ma(I,3,"cannot parse segment header");if((Ne=I.ed).zd=ie(ve),Ne.Tb=z(ve,6),Ne.wb=z(ve,3),Ne.Pc=ie(ve),Ne.Pc&&ie(ve)){for(Pe=0;4>Pe;++Pe)ie(ve)&&(Ne.vd[Pe]=W(ve,6));for(Pe=0;4>Pe;++Pe)ie(ve)&&(Ne.od[Pe]=W(ve,6))}if(I.L=Ne.Tb==0?0:Ne.zd?1:2,ve.Ka)return ma(I,3,"cannot parse filter header");var Ke=pe;if(pe=je=le,le=je+Ke,Ne=Ke,I.Xb=(1<<z(I.m,2))-1,Ke<3*(Pe=I.Xb))re=7;else{for(je+=3*Pe,Ne-=3*Pe,Ke=0;Ke<Pe;++Ke){var ct=re[pe+0]|re[pe+1]<<8|re[pe+2]<<16;ct>Ne&&(ct=Ne),X(I.Jc[+Ke],re,je,ct),je+=ct,Ne-=ct,pe+=3}X(I.Jc[+Pe],re,je,Ne),re=je<le?0:5}if(re!=0)return ma(I,re,"cannot parse partitions");for(re=z(je=I.m,7),pe=ie(je)?W(je,4):0,le=ie(je)?W(je,4):0,Ne=ie(je)?W(je,4):0,Pe=ie(je)?W(je,4):0,je=ie(je)?W(je,4):0,Ke=I.Qa,ct=0;4>ct;++ct){if(Ke.Cb){var it=Ke.Zb[ct];Ke.Fb||(it+=re)}else{if(0<ct){I.pb[ct]=I.pb[0];continue}it=re}var rt=I.pb[ct];rt.Sc[0]=up[Mn(it+pe,127)],rt.Sc[1]=dp[Mn(it+0,127)],rt.Eb[0]=2*up[Mn(it+le,127)],rt.Eb[1]=101581*dp[Mn(it+Ne,127)]>>16,8>rt.Eb[1]&&(rt.Eb[1]=8),rt.Qc[0]=up[Mn(it+Pe,117)],rt.Qc[1]=dp[Mn(it+je,127)],rt.lc=it+je}if(!be.Rb)return ma(I,4,"Not a key frame.");for(ie(ve),be=I.Pa,re=0;4>re;++re){for(pe=0;8>pe;++pe)for(le=0;3>le;++le)for(Ne=0;11>Ne;++Ne)Pe=oe(ve,DA[re][pe][le][Ne])?z(ve,8):bu[re][pe][le][Ne],be.Wc[re][pe].Yb[le][Ne]=Pe;for(pe=0;17>pe;++pe)be.Xc[re][pe]=be.Wc[re][HN[pe]]}return I.kc=ie(ve),I.kc&&(I.Bd=z(ve,8)),I.cb=1}function Jh(I,V,re,le,pe,ve,be){var Ne=V[pe].Yb[re];for(re=0;16>pe;++pe){if(!oe(I,Ne[re+0]))return pe;for(;!oe(I,Ne[re+1]);)if(Ne=V[++pe].Yb[0],re=0,pe==16)return 16;var je=V[pe+1].Yb;if(oe(I,Ne[re+2])){var Pe=I,Ke=0;if(oe(Pe,(it=Ne)[(ct=re)+3]))if(oe(Pe,it[ct+6])){for(Ne=0,ct=2*(Ke=oe(Pe,it[ct+8]))+(it=oe(Pe,it[ct+9+Ke])),Ke=0,it=Xa[ct];it[Ne];++Ne)Ke+=Ke+oe(Pe,it[Ne]);Ke+=3+(8<<ct)}else oe(Pe,it[ct+7])?(Ke=7+2*oe(Pe,165),Ke+=oe(Pe,145)):Ke=5+oe(Pe,159);else Ke=oe(Pe,it[ct+4])?3+oe(Pe,it[ct+5]):2;Ne=je[2]}else Ke=1,Ne=je[1];je=be+On[pe],0>(Pe=I).b&&ne(Pe);var ct,it=Pe.b,rt=(ct=Pe.Ca>>1)-(Pe.I>>it)>>31;--Pe.b,Pe.Ca+=rt,Pe.Ca|=1,Pe.I-=(ct+1&rt)<<it,ve[je]=((Ke^rt)-rt)*le[(0<pe)+0]}return 16}function su(I){var V=I.rb[I.sb-1];V.la=0,V.Na=0,a(I.zc,0,0,I.zc.length),I.ja=0}function vA(I,V){if(I==null)return 0;if(V==null)return ma(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!af(I,V))return 0;if(t(I.cb),V.ac==null||V.ac(V)){V.ob&&(I.L=0);var re=vd[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=V.v-re>>4,I.zb=V.j-re>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=V.o+15+re>>4,I.Hb=V.va+15+re>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var le=I.ed;for(re=0;4>re;++re){var pe;if(I.Qa.Cb){var ve=I.Qa.Lb[re];I.Qa.Fb||(ve+=le.Tb)}else ve=le.Tb;for(pe=0;1>=pe;++pe){var be=I.gd[re][pe],Ne=ve;if(le.Pc&&(Ne+=le.vd[0],pe&&(Ne+=le.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var je=Ne;0<le.wb&&(je=4<le.wb?je>>2:je>>1)>9-le.wb&&(je=9-le.wb),1>je&&(je=1),be.dd=je,be.tc=2*Ne+je,be.ld=40<=Ne?2:15<=Ne?1:0}else be.tc=0;be.La=pe}}}re=0}else ma(I,6,"Frame setup failed"),re=I.a;if(re=re==0){if(re){I.$c=0,0<I.Aa||(I.Ic=$N);e:{re=I.Ic,le=4*(je=I.za);var Pe=32*je,Ke=je+1,ct=0<I.L?je*(0<I.Aa?2:1):0,it=(I.Aa==2?2:1)*je;if((be=le+832+(pe=3*(16*re+vd[I.L])/2*Pe)+(ve=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=be)re=0;else{if(be>I.Vb){if(I.Vb=0,I.Ec=s(be),I.Fc=0,I.Ec==null){re=ma(I,1,"no memory during frame initialization.");break e}I.Vb=be}be=I.Ec,Ne=I.Fc,I.Ac=be,I.Bc=Ne,Ne+=le,I.Gd=o(Pe,gs),I.Hd=0,I.rb=o(Ke+1,Zr),I.sb=1,I.wa=ct?o(ct,Jr):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=je),t(!0),I.oc=be,I.pc=Ne,Ne+=832,I.ya=o(it,ps),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=je),I.R=16*je,I.B=8*je,je=(Pe=vd[I.L])*I.R,Pe=Pe/2*I.B,I.sa=be,I.ta=Ne+je,I.qa=I.sa,I.ra=I.ta+16*re*I.R+Pe,I.Ha=I.qa,I.Ia=I.ra+8*re*I.B+Pe,I.$c=0,Ne+=pe,I.mb=ve?be:null,I.nb=ve?Ne:null,t(Ne+ve<=I.Fc+I.Vb),su(I),a(I.Ac,I.Bc,0,le),re=1}}if(re){if(V.ka=0,V.y=I.sa,V.O=I.ta,V.f=I.qa,V.N=I.ra,V.ea=I.Ha,V.Vd=I.Ia,V.fa=I.R,V.Rc=I.B,V.F=null,V.J=0,!fd){for(re=-255;255>=re;++re)ns[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)Hl[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)yf[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)wf[255+re]=0>re?0:255<re?255:re;fd=1}gu=jo,wc=ou,Nc=Fl,bs=Ln,Po=lu,Ka=iu,kA=fu,xu=vc,s0=cf,gf=EA,xf=lf,vf=sd,jA=id,i0=Au,bf=hl,dd=Ui,BA=vs,Wa=t0,uo[0]=Li,uo[1]=Zh,uo[2]=Pl,uo[3]=e0,uo[4]=Bo,uo[5]=Rl,uo[6]=lo,uo[7]=To,uo[8]=xc,uo[9]=cu,gd[0]=Ol,gd[1]=yA,gd[2]=mc,gd[3]=of,gd[4]=ia,gd[5]=gc,gd[6]=Dl,gl[0]=Ll,gl[1]=bA,gl[2]=wA,gl[3]=Io,gl[4]=An,gl[5]=xs,gl[6]=uu,re=1}else re=0}re&&(re=function(rt,Tt){for(rt.M=0;rt.M<rt.Va;++rt.M){var gt,We=rt.Jc[rt.M&rt.Xb],Je=rt.m,Ct=rt;for(gt=0;gt<Ct.za;++gt){var It=Je,St=Ct,Zt=St.Ac,Gt=St.Bc+4*gt,hr=St.zc,Kt=St.ya[St.aa+gt];if(St.Qa.Bb?Kt.$b=oe(It,St.Pa.jb[0])?2+oe(It,St.Pa.jb[2]):oe(It,St.Pa.jb[1]):Kt.$b=0,St.kc&&(Kt.Ad=oe(It,St.Bd)),Kt.Za=!oe(It,145)+0,Kt.Za){var jn=Kt.Ob,Un=0;for(St=0;4>St;++St){var sn,en=hr[0+St];for(sn=0;4>sn;++sn){en=S1[Zt[Gt+sn]][en];for(var ea=Ef[oe(It,en[0])];0<ea;)ea=Ef[2*ea+oe(It,en[ea])];en=-ea,Zt[Gt+sn]=en}n(jn,Un,Zt,Gt,4),Un+=4,hr[0+St]=en}}else en=oe(It,156)?oe(It,128)?1:3:oe(It,163)?2:0,Kt.Ob[0]=en,a(Zt,Gt,en,4),a(hr,0,en,4);Kt.Dd=oe(It,142)?oe(It,114)?oe(It,183)?1:3:2:0}if(Ct.m.Ka)return ma(rt,7,"Premature end-of-partition0 encountered.");for(;rt.ja<rt.za;++rt.ja){if(Ct=We,It=(Je=rt).rb[Je.sb-1],Zt=Je.rb[Je.sb+Je.ja],gt=Je.ya[Je.aa+Je.ja],Gt=Je.kc?gt.Ad:0)It.la=Zt.la=0,gt.Za||(It.Na=Zt.Na=0),gt.Hc=0,gt.Gc=0,gt.ia=0;else{var Qn,zr;if(It=Zt,Zt=Ct,Gt=Je.Pa.Xc,hr=Je.ya[Je.aa+Je.ja],Kt=Je.pb[hr.$b],St=hr.ad,jn=0,Un=Je.rb[Je.sb-1],en=sn=0,a(St,jn,0,384),hr.Za)var oa=0,Er=Gt[3];else{ea=s(16);var Or=It.Na+Un.Na;if(Or=Us(Zt,Gt[1],Or,Kt.Eb,0,ea,0),It.Na=Un.Na=(0<Or)+0,1<Or)gu(ea,0,St,jn);else{var kn=ea[0]+3>>3;for(ea=0;256>ea;ea+=16)St[jn+ea]=kn}oa=1,Er=Gt[0]}var Bn=15&It.la,li=15&Un.la;for(ea=0;4>ea;++ea){var Vs=1&li;for(kn=zr=0;4>kn;++kn)Bn=Bn>>1|(Vs=(Or=Us(Zt,Er,Or=Vs+(1&Bn),Kt.Sc,oa,St,jn))>oa)<<7,zr=zr<<2|(3<Or?3:1<Or?2:St[jn+0]!=0),jn+=16;Bn>>=4,li=li>>1|Vs<<7,sn=(sn<<8|zr)>>>0}for(Er=Bn,oa=li>>4,Qn=0;4>Qn;Qn+=2){for(zr=0,Bn=It.la>>4+Qn,li=Un.la>>4+Qn,ea=0;2>ea;++ea){for(Vs=1&li,kn=0;2>kn;++kn)Or=Vs+(1&Bn),Bn=Bn>>1|(Vs=0<(Or=Us(Zt,Gt[2],Or,Kt.Qc,0,St,jn)))<<3,zr=zr<<2|(3<Or?3:1<Or?2:St[jn+0]!=0),jn+=16;Bn>>=2,li=li>>1|Vs<<5}en|=zr<<4*Qn,Er|=Bn<<4<<Qn,oa|=(240&li)<<Qn}It.la=Er,Un.la=oa,hr.Hc=sn,hr.Gc=en,hr.ia=43690&en?0:Kt.ia,Gt=!(sn|en)}if(0<Je.L&&(Je.wa[Je.Y+Je.ja]=Je.gd[gt.$b][gt.Za],Je.wa[Je.Y+Je.ja].La|=!Gt),Ct.Ka)return ma(rt,7,"Premature end-of-file encountered.")}if(su(rt),Je=Tt,Ct=1,gt=(We=rt).D,It=0<We.L&&We.M>=We.zb&&We.M<=We.Va,We.Aa==0)e:{if(gt.M=We.M,gt.uc=It,Fo(We,gt),Ct=1,gt=(zr=We.D).Nb,It=(en=vd[We.L])*We.R,Zt=en/2*We.B,ea=16*gt*We.R,kn=8*gt*We.B,Gt=We.sa,hr=We.ta-It+ea,Kt=We.qa,St=We.ra-Zt+kn,jn=We.Ha,Un=We.Ia-Zt+kn,li=(Bn=zr.M)==0,sn=Bn>=We.Va-1,We.Aa==2&&Fo(We,zr),zr.uc)for(Vs=(Or=We).D.M,t(Or.D.uc),zr=Or.yb;zr<Or.Hb;++zr){oa=zr,Er=Vs;var as=(ss=(Ta=Or).D).Nb;Qn=Ta.R;var ss=ss.wa[ss.Y+oa],ys=Ta.sa,$l=Ta.ta+16*as*Qn+16*oa,Hn=ss.dd,ws=ss.tc;if(ws!=0)if(t(3<=ws),Ta.L==1)0<oa&&dd(ys,$l,Qn,ws+4),ss.La&&Wa(ys,$l,Qn,ws),0<Er&&bf(ys,$l,Qn,ws+4),ss.La&&BA(ys,$l,Qn,ws);else{var Ec=Ta.B,Sf=Ta.qa,RA=Ta.ra+8*as*Ec+8*oa,kf=Ta.Ha,Ta=Ta.Ia+8*as*Ec+8*oa;as=ss.ld,0<oa&&(xu(ys,$l,Qn,ws+4,Hn,as),gf(Sf,RA,kf,Ta,Ec,ws+4,Hn,as)),ss.La&&(vf(ys,$l,Qn,ws,Hn,as),i0(Sf,RA,kf,Ta,Ec,ws,Hn,as)),0<Er&&(kA(ys,$l,Qn,ws+4,Hn,as),s0(Sf,RA,kf,Ta,Ec,ws+4,Hn,as)),ss.La&&(xf(ys,$l,Qn,ws,Hn,as),jA(Sf,RA,kf,Ta,Ec,ws,Hn,as))}}if(We.ia&&alert("todo:DitherRow"),Je.put!=null){if(zr=16*Bn,Bn=16*(Bn+1),li?(Je.y=We.sa,Je.O=We.ta+ea,Je.f=We.qa,Je.N=We.ra+kn,Je.ea=We.Ha,Je.W=We.Ia+kn):(zr-=en,Je.y=Gt,Je.O=hr,Je.f=Kt,Je.N=St,Je.ea=jn,Je.W=Un),sn||(Bn-=en),Bn>Je.o&&(Bn=Je.o),Je.F=null,Je.J=null,We.Fa!=null&&0<We.Fa.length&&zr<Bn&&(Je.J=df(We,Je,zr,Bn-zr),Je.F=We.mb,Je.F==null&&Je.F.length==0)){Ct=ma(We,3,"Could not decode alpha data.");break e}zr<Je.j&&(en=Je.j-zr,zr=Je.j,t(!(1&en)),Je.O+=We.R*en,Je.N+=We.B*(en>>1),Je.W+=We.B*(en>>1),Je.F!=null&&(Je.J+=Je.width*en)),zr<Bn&&(Je.O+=Je.v,Je.N+=Je.v>>1,Je.W+=Je.v>>1,Je.F!=null&&(Je.J+=Je.v),Je.ka=zr-Je.j,Je.U=Je.va-Je.v,Je.T=Bn-zr,Ct=Je.put(Je))}gt+1!=We.Ic||sn||(n(We.sa,We.ta-It,Gt,hr+16*We.R,It),n(We.qa,We.ra-Zt,Kt,St+8*We.B,Zt),n(We.Ha,We.Ia-Zt,jn,Un+8*We.B,Zt))}if(!Ct)return ma(rt,6,"Output aborted.")}return 1}(I,V)),V.bc!=null&&V.bc(V),re&=1}return re?(I.cb=0,re):0}function Ni(I,V,re,le,pe){pe=I[V+re+32*le]+(pe>>3),I[V+re+32*le]=-256&pe?0>pe?0:255:pe}function sf(I,V,re,le,pe,ve){Ni(I,V,0,re,le+pe),Ni(I,V,1,re,le+ve),Ni(I,V,2,re,le-ve),Ni(I,V,3,re,le-pe)}function Sn(I){return(20091*I>>16)+I}function Ei(I,V,re,le){var pe,ve=0,be=s(16);for(pe=0;4>pe;++pe){var Ne=I[V+0]+I[V+8],je=I[V+0]-I[V+8],Pe=(35468*I[V+4]>>16)-Sn(I[V+12]),Ke=Sn(I[V+4])+(35468*I[V+12]>>16);be[ve+0]=Ne+Ke,be[ve+1]=je+Pe,be[ve+2]=je-Pe,be[ve+3]=Ne-Ke,ve+=4,V++}for(pe=ve=0;4>pe;++pe)Ne=(I=be[ve+0]+4)+be[ve+8],je=I-be[ve+8],Pe=(35468*be[ve+4]>>16)-Sn(be[ve+12]),Ni(re,le,0,0,Ne+(Ke=Sn(be[ve+4])+(35468*be[ve+12]>>16))),Ni(re,le,1,0,je+Pe),Ni(re,le,2,0,je-Pe),Ni(re,le,3,0,Ne-Ke),ve++,le+=32}function iu(I,V,re,le){var pe=I[V+0]+4,ve=35468*I[V+4]>>16,be=Sn(I[V+4]),Ne=35468*I[V+1]>>16;sf(re,le,0,pe+be,I=Sn(I[V+1]),Ne),sf(re,le,1,pe+ve,I,Ne),sf(re,le,2,pe-ve,I,Ne),sf(re,le,3,pe-be,I,Ne)}function ou(I,V,re,le,pe){Ei(I,V,re,le),pe&&Ei(I,V+16,re,le+4)}function Fl(I,V,re,le){wc(I,V+0,re,le,1),wc(I,V+32,re,le+128,1)}function Ln(I,V,re,le){var pe;for(I=I[V+0]+4,pe=0;4>pe;++pe)for(V=0;4>V;++V)Ni(re,le,V,pe,I)}function lu(I,V,re,le){I[V+0]&&bs(I,V+0,re,le),I[V+16]&&bs(I,V+16,re,le+4),I[V+32]&&bs(I,V+32,re,le+128),I[V+48]&&bs(I,V+48,re,le+128+4)}function jo(I,V,re,le){var pe,ve=s(16);for(pe=0;4>pe;++pe){var be=I[V+0+pe]+I[V+12+pe],Ne=I[V+4+pe]+I[V+8+pe],je=I[V+4+pe]-I[V+8+pe],Pe=I[V+0+pe]-I[V+12+pe];ve[0+pe]=be+Ne,ve[8+pe]=be-Ne,ve[4+pe]=Pe+je,ve[12+pe]=Pe-je}for(pe=0;4>pe;++pe)be=(I=ve[0+4*pe]+3)+ve[3+4*pe],Ne=ve[1+4*pe]+ve[2+4*pe],je=ve[1+4*pe]-ve[2+4*pe],Pe=I-ve[3+4*pe],re[le+0]=be+Ne>>3,re[le+16]=Pe+je>>3,re[le+32]=be-Ne>>3,re[le+48]=Pe-je>>3,le+=64}function hc(I,V,re){var le,pe=V-32,ve=ii,be=255-I[pe-1];for(le=0;le<re;++le){var Ne,je=ve,Pe=be+I[V-1];for(Ne=0;Ne<re;++Ne)I[V+Ne]=je[Pe+I[pe+Ne]];V+=32}}function Zh(I,V){hc(I,V,4)}function bA(I,V){hc(I,V,8)}function yA(I,V){hc(I,V,16)}function mc(I,V){var re;for(re=0;16>re;++re)n(I,V+32*re,I,V-32,16)}function of(I,V){var re;for(re=16;0<re;--re)a(I,V,I[V-1],16),V+=32}function pc(I,V,re){var le;for(le=0;16>le;++le)a(V,re+32*le,I,16)}function Ol(I,V){var re,le=16;for(re=0;16>re;++re)le+=I[V-1+32*re]+I[V+re-32];pc(le>>5,I,V)}function ia(I,V){var re,le=8;for(re=0;16>re;++re)le+=I[V-1+32*re];pc(le>>4,I,V)}function gc(I,V){var re,le=8;for(re=0;16>re;++re)le+=I[V+re-32];pc(le>>4,I,V)}function Dl(I,V){pc(128,I,V)}function _r(I,V,re){return I+2*V+re+2>>2}function Pl(I,V){var re,le=V-32;for(le=new Uint8Array([_r(I[le-1],I[le+0],I[le+1]),_r(I[le+0],I[le+1],I[le+2]),_r(I[le+1],I[le+2],I[le+3]),_r(I[le+2],I[le+3],I[le+4])]),re=0;4>re;++re)n(I,V+32*re,le,0,le.length)}function e0(I,V){var re=I[V-1],le=I[V-1+32],pe=I[V-1+64],ve=I[V-1+96];de(I,V+0,16843009*_r(I[V-1-32],re,le)),de(I,V+32,16843009*_r(re,le,pe)),de(I,V+64,16843009*_r(le,pe,ve)),de(I,V+96,16843009*_r(pe,ve,ve))}function Li(I,V){var re,le=4;for(re=0;4>re;++re)le+=I[V+re-32]+I[V-1+32*re];for(le>>=3,re=0;4>re;++re)a(I,V+32*re,le,4)}function Bo(I,V){var re=I[V-1+0],le=I[V-1+32],pe=I[V-1+64],ve=I[V-1-32],be=I[V+0-32],Ne=I[V+1-32],je=I[V+2-32],Pe=I[V+3-32];I[V+0+96]=_r(le,pe,I[V-1+96]),I[V+1+96]=I[V+0+64]=_r(re,le,pe),I[V+2+96]=I[V+1+64]=I[V+0+32]=_r(ve,re,le),I[V+3+96]=I[V+2+64]=I[V+1+32]=I[V+0+0]=_r(be,ve,re),I[V+3+64]=I[V+2+32]=I[V+1+0]=_r(Ne,be,ve),I[V+3+32]=I[V+2+0]=_r(je,Ne,be),I[V+3+0]=_r(Pe,je,Ne)}function lo(I,V){var re=I[V+1-32],le=I[V+2-32],pe=I[V+3-32],ve=I[V+4-32],be=I[V+5-32],Ne=I[V+6-32],je=I[V+7-32];I[V+0+0]=_r(I[V+0-32],re,le),I[V+1+0]=I[V+0+32]=_r(re,le,pe),I[V+2+0]=I[V+1+32]=I[V+0+64]=_r(le,pe,ve),I[V+3+0]=I[V+2+32]=I[V+1+64]=I[V+0+96]=_r(pe,ve,be),I[V+3+32]=I[V+2+64]=I[V+1+96]=_r(ve,be,Ne),I[V+3+64]=I[V+2+96]=_r(be,Ne,je),I[V+3+96]=_r(Ne,je,je)}function Rl(I,V){var re=I[V-1+0],le=I[V-1+32],pe=I[V-1+64],ve=I[V-1-32],be=I[V+0-32],Ne=I[V+1-32],je=I[V+2-32],Pe=I[V+3-32];I[V+0+0]=I[V+1+64]=ve+be+1>>1,I[V+1+0]=I[V+2+64]=be+Ne+1>>1,I[V+2+0]=I[V+3+64]=Ne+je+1>>1,I[V+3+0]=je+Pe+1>>1,I[V+0+96]=_r(pe,le,re),I[V+0+64]=_r(le,re,ve),I[V+0+32]=I[V+1+96]=_r(re,ve,be),I[V+1+32]=I[V+2+96]=_r(ve,be,Ne),I[V+2+32]=I[V+3+96]=_r(be,Ne,je),I[V+3+32]=_r(Ne,je,Pe)}function To(I,V){var re=I[V+0-32],le=I[V+1-32],pe=I[V+2-32],ve=I[V+3-32],be=I[V+4-32],Ne=I[V+5-32],je=I[V+6-32],Pe=I[V+7-32];I[V+0+0]=re+le+1>>1,I[V+1+0]=I[V+0+64]=le+pe+1>>1,I[V+2+0]=I[V+1+64]=pe+ve+1>>1,I[V+3+0]=I[V+2+64]=ve+be+1>>1,I[V+0+32]=_r(re,le,pe),I[V+1+32]=I[V+0+96]=_r(le,pe,ve),I[V+2+32]=I[V+1+96]=_r(pe,ve,be),I[V+3+32]=I[V+2+96]=_r(ve,be,Ne),I[V+3+64]=_r(be,Ne,je),I[V+3+96]=_r(Ne,je,Pe)}function cu(I,V){var re=I[V-1+0],le=I[V-1+32],pe=I[V-1+64],ve=I[V-1+96];I[V+0+0]=re+le+1>>1,I[V+2+0]=I[V+0+32]=le+pe+1>>1,I[V+2+32]=I[V+0+64]=pe+ve+1>>1,I[V+1+0]=_r(re,le,pe),I[V+3+0]=I[V+1+32]=_r(le,pe,ve),I[V+3+32]=I[V+1+64]=_r(pe,ve,ve),I[V+3+64]=I[V+2+64]=I[V+0+96]=I[V+1+96]=I[V+2+96]=I[V+3+96]=ve}function xc(I,V){var re=I[V-1+0],le=I[V-1+32],pe=I[V-1+64],ve=I[V-1+96],be=I[V-1-32],Ne=I[V+0-32],je=I[V+1-32],Pe=I[V+2-32];I[V+0+0]=I[V+2+32]=re+be+1>>1,I[V+0+32]=I[V+2+64]=le+re+1>>1,I[V+0+64]=I[V+2+96]=pe+le+1>>1,I[V+0+96]=ve+pe+1>>1,I[V+3+0]=_r(Ne,je,Pe),I[V+2+0]=_r(be,Ne,je),I[V+1+0]=I[V+3+32]=_r(re,be,Ne),I[V+1+32]=I[V+3+64]=_r(le,re,be),I[V+1+64]=I[V+3+96]=_r(pe,le,re),I[V+1+96]=_r(ve,pe,le)}function wA(I,V){var re;for(re=0;8>re;++re)n(I,V+32*re,I,V-32,8)}function Io(I,V){var re;for(re=0;8>re;++re)a(I,V,I[V-1],8),V+=32}function Mi(I,V,re){var le;for(le=0;8>le;++le)a(V,re+32*le,I,8)}function Ll(I,V){var re,le=8;for(re=0;8>re;++re)le+=I[V+re-32]+I[V-1+32*re];Mi(le>>4,I,V)}function xs(I,V){var re,le=4;for(re=0;8>re;++re)le+=I[V+re-32];Mi(le>>3,I,V)}function An(I,V){var re,le=4;for(re=0;8>re;++re)le+=I[V-1+32*re];Mi(le>>3,I,V)}function uu(I,V){Mi(128,I,V)}function Ml(I,V,re){var le=I[V-re],pe=I[V+0],ve=3*(pe-le)+ix[1020+I[V-2*re]-I[V+re]],be=TA[112+(ve+4>>3)];I[V-re]=ii[255+le+TA[112+(ve+3>>3)]],I[V+0]=ii[255+pe-be]}function NA(I,V,re,le){var pe=I[V+0],ve=I[V+re];return Vl[255+I[V-2*re]-I[V-re]]>le||Vl[255+ve-pe]>le}function nd(I,V,re,le){return 4*Vl[255+I[V-re]-I[V+0]]+Vl[255+I[V-2*re]-I[V+re]]<=le}function ad(I,V,re,le,pe){var ve=I[V-3*re],be=I[V-2*re],Ne=I[V-re],je=I[V+0],Pe=I[V+re],Ke=I[V+2*re],ct=I[V+3*re];return 4*Vl[255+Ne-je]+Vl[255+be-Pe]>le?0:Vl[255+I[V-4*re]-ve]<=pe&&Vl[255+ve-be]<=pe&&Vl[255+be-Ne]<=pe&&Vl[255+ct-Ke]<=pe&&Vl[255+Ke-Pe]<=pe&&Vl[255+Pe-je]<=pe}function hl(I,V,re,le){var pe=2*le+1;for(le=0;16>le;++le)nd(I,V+le,re,pe)&&Ml(I,V+le,re)}function Ui(I,V,re,le){var pe=2*le+1;for(le=0;16>le;++le)nd(I,V+le*re,1,pe)&&Ml(I,V+le*re,1)}function vs(I,V,re,le){var pe;for(pe=3;0<pe;--pe)hl(I,V+=4*re,re,le)}function t0(I,V,re,le){var pe;for(pe=3;0<pe;--pe)Ui(I,V+=4,re,le)}function du(I,V,re,le,pe,ve,be,Ne){for(ve=2*ve+1;0<pe--;){if(ad(I,V,re,ve,be))if(NA(I,V,re,Ne))Ml(I,V,re);else{var je=I,Pe=V,Ke=re,ct=je[Pe-2*Ke],it=je[Pe-Ke],rt=je[Pe+0],Tt=je[Pe+Ke],gt=je[Pe+2*Ke],We=27*(Ct=ix[1020+3*(rt-it)+ix[1020+ct-Tt]])+63>>7,Je=18*Ct+63>>7,Ct=9*Ct+63>>7;je[Pe-3*Ke]=ii[255+je[Pe-3*Ke]+Ct],je[Pe-2*Ke]=ii[255+ct+Je],je[Pe-Ke]=ii[255+it+We],je[Pe+0]=ii[255+rt-We],je[Pe+Ke]=ii[255+Tt-Je],je[Pe+2*Ke]=ii[255+gt-Ct]}V+=le}}function Ci(I,V,re,le,pe,ve,be,Ne){for(ve=2*ve+1;0<pe--;){if(ad(I,V,re,ve,be))if(NA(I,V,re,Ne))Ml(I,V,re);else{var je=I,Pe=V,Ke=re,ct=je[Pe-Ke],it=je[Pe+0],rt=je[Pe+Ke],Tt=TA[112+((gt=3*(it-ct))+4>>3)],gt=TA[112+(gt+3>>3)],We=Tt+1>>1;je[Pe-2*Ke]=ii[255+je[Pe-2*Ke]+We],je[Pe-Ke]=ii[255+ct+gt],je[Pe+0]=ii[255+it-Tt],je[Pe+Ke]=ii[255+rt-We]}V+=le}}function fu(I,V,re,le,pe,ve){du(I,V,re,1,16,le,pe,ve)}function vc(I,V,re,le,pe,ve){du(I,V,1,re,16,le,pe,ve)}function lf(I,V,re,le,pe,ve){var be;for(be=3;0<be;--be)Ci(I,V+=4*re,re,1,16,le,pe,ve)}function sd(I,V,re,le,pe,ve){var be;for(be=3;0<be;--be)Ci(I,V+=4,1,re,16,le,pe,ve)}function cf(I,V,re,le,pe,ve,be,Ne){du(I,V,pe,1,8,ve,be,Ne),du(re,le,pe,1,8,ve,be,Ne)}function EA(I,V,re,le,pe,ve,be,Ne){du(I,V,1,pe,8,ve,be,Ne),du(re,le,1,pe,8,ve,be,Ne)}function id(I,V,re,le,pe,ve,be,Ne){Ci(I,V+4*pe,pe,1,8,ve,be,Ne),Ci(re,le+4*pe,pe,1,8,ve,be,Ne)}function Au(I,V,re,le,pe,ve,be,Ne){Ci(I,V+4,1,pe,8,ve,be,Ne),Ci(re,le+4,1,pe,8,ve,be,Ne)}function od(){this.ba=new Rn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Fr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function uf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ld(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function hu(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new S}function r0(){this.xb=this.a=0,this.l=new Ls,this.ca=new Rn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new hu,this.ab=0,this.gc=o(4,ld),this.Oc=0}function bc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ls,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mu(I,V,re,le,pe,ve,be){for(I=I==null?0:I[V+0],V=0;V<be;++V)pe[ve+V]=I+re[le+V]&255,I=pe[ve+V]}function cd(I,V,re,le,pe,ve,be){var Ne;if(I==null)mu(null,null,re,le,pe,ve,be);else for(Ne=0;Ne<be;++Ne)pe[ve+Ne]=I[V+Ne]+re[le+Ne]&255}function Qi(I,V,re,le,pe,ve,be){if(I==null)mu(null,null,re,le,pe,ve,be);else{var Ne,je=I[V+0],Pe=je,Ke=je;for(Ne=0;Ne<be;++Ne)Pe=Ke+(je=I[V+Ne])-Pe,Ke=re[le+Ne]+(-256&Pe?0>Pe?0:255:Pe)&255,Pe=je,pe[ve+Ne]=Ke}}function df(I,V,re,le){var pe=V.width,ve=V.o;if(t(I!=null&&V!=null),0>re||0>=le||re+le>ve)return null;if(!I.Cc){if(I.ga==null){var be;if(I.ga=new bc,(be=I.ga==null)||(be=V.width*V.o,t(I.Gb.length==0),I.Gb=s(be),I.Uc=0,I.Gb==null?be=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,be=1),be=!be),!be){be=I.ga;var Ne=I.Fa,je=I.P,Pe=I.qc,Ke=I.mb,ct=I.nb,it=je+1,rt=Pe-1,Tt=be.l;if(t(Ne!=null&&Ke!=null&&V!=null),yu[0]=null,yu[1]=mu,yu[2]=cd,yu[3]=Qi,be.ca=Ke,be.tb=ct,be.c=V.width,be.i=V.height,t(0<be.c&&0<be.i),1>=Pe)V=0;else if(be.$a=Ne[je+0]>>0&3,be.Z=Ne[je+0]>>2&3,be.Lc=Ne[je+0]>>4&3,je=Ne[je+0]>>6&3,0>be.$a||1<be.$a||4<=be.Z||1<be.Lc||je)V=0;else if(Tt.put=Ba,Tt.ac=Yn,Tt.bc=Rs,Tt.ma=be,Tt.width=V.width,Tt.height=V.height,Tt.Da=V.Da,Tt.v=V.v,Tt.va=V.va,Tt.j=V.j,Tt.o=V.o,be.$a)e:{t(be.$a==1),V=Me();t:for(;;){if(V==null){V=0;break e}if(t(be!=null),be.mc=V,V.c=be.c,V.i=be.i,V.l=be.l,V.l.ma=be,V.l.width=be.c,V.l.height=be.i,V.a=0,G(V.m,Ne,it,rt),!Ie(be.c,be.i,1,V,null)||(V.ab==1&&V.gc[0].hc==3&&Be(V.s)?(be.ic=1,Ne=V.c*V.i,V.Ta=null,V.Ua=0,V.V=s(Ne),V.Ba=0,V.V==null?(V.a=1,V=0):V=1):(be.ic=0,V=ze(V,be.c)),!V))break t;V=1;break e}be.mc=null,V=0}else V=rt>=be.c*be.i;be=!V}if(be)return null;I.ga.Lc!=1?I.Ga=0:le=ve-re}t(I.ga!=null),t(re+le<=ve);e:{if(V=(Ne=I.ga).c,ve=Ne.l.o,Ne.$a==0){if(it=I.rc,rt=I.Vc,Tt=I.Fa,je=I.P+1+re*V,Pe=I.mb,Ke=I.nb+re*V,t(je<=I.P+I.qc),Ne.Z!=0)for(t(yu[Ne.Z]!=null),be=0;be<le;++be)yu[Ne.Z](it,rt,Tt,je,Pe,Ke,V),it=Pe,rt=Ke,Ke+=V,je+=V;else for(be=0;be<le;++be)n(Pe,Ke,Tt,je,V),it=Pe,rt=Ke,Ke+=V,je+=V;I.rc=it,I.Vc=rt}else{if(t(Ne.mc!=null),V=re+le,t((be=Ne.mc)!=null),t(V<=be.i),be.C>=V)V=1;else if(Ne.ic||et(),Ne.ic){Ne=be.V,it=be.Ba,rt=be.c;var gt=be.i,We=(Tt=1,je=be.$/rt,Pe=be.$%rt,Ke=be.m,ct=be.s,be.$),Je=rt*gt,Ct=rt*V,It=ct.wc,St=We<Ct?Jn(ct,Pe,je):null;t(We<=Je),t(V<=gt),t(Be(ct));t:for(;;){for(;!Ke.h&&We<Ct;){if(Pe&It||(St=Jn(ct,Pe,je)),t(St!=null),te(Ke),256>(gt=Fn(St.G[0],St.H[0],Ke)))Ne[it+We]=gt,++We,++Pe>=rt&&(Pe=0,++je<=V&&!(je%16)&&me(be,je));else{if(!(280>gt)){Tt=0;break t}gt=xn(gt-256,Ke);var Zt,Gt=Fn(St.G[4],St.H[4],Ke);if(te(Ke),!(We>=(Gt=ln(rt,Gt=xn(Gt,Ke)))&&Je-We>=gt)){Tt=0;break t}for(Zt=0;Zt<gt;++Zt)Ne[it+We+Zt]=Ne[it+We+Zt-Gt];for(We+=gt,Pe+=gt;Pe>=rt;)Pe-=rt,++je<=V&&!(je%16)&&me(be,je);We<Ct&&Pe&It&&(St=Jn(ct,Pe,je))}t(Ke.h==q(Ke))}me(be,je>V?V:je);break t}!Tt||Ke.h&&We<Je?(Tt=0,be.a=Ke.h?5:3):be.$=We,V=Tt}else V=Ae(be,be.V,be.Ba,be.c,be.i,V,qe);if(!V){le=0;break e}}re+le>=ve&&(I.Cc=1),le=1}if(!le)return null;if(I.Cc&&((le=I.ga)!=null&&(le.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+re*pe}function ee(I,V,re,le,pe,ve){for(;0<pe--;){var be,Ne=I,je=V+(re?1:0),Pe=I,Ke=V+(re?0:3);for(be=0;be<le;++be){var ct=Pe[Ke+4*be];ct!=255&&(ct*=32897,Ne[je+4*be+0]=Ne[je+4*be+0]*ct>>23,Ne[je+4*be+1]=Ne[je+4*be+1]*ct>>23,Ne[je+4*be+2]=Ne[je+4*be+2]*ct>>23)}V+=ve}}function ge(I,V,re,le,pe){for(;0<le--;){var ve;for(ve=0;ve<re;++ve){var be=I[V+2*ve+0],Ne=15&(Pe=I[V+2*ve+1]),je=4369*Ne,Pe=(240&Pe|Pe>>4)*je>>16;I[V+2*ve+0]=(240&be|be>>4)*je>>16&240|(15&be|be<<4)*je>>16>>4&15,I[V+2*ve+1]=240&Pe|Ne}V+=pe}}function Ue(I,V,re,le,pe,ve,be,Ne){var je,Pe,Ke=255;for(Pe=0;Pe<pe;++Pe){for(je=0;je<le;++je){var ct=I[V+je];ve[be+4*je]=ct,Ke&=ct}V+=re,be+=Ne}return Ke!=255}function Ge(I,V,re,le,pe){var ve;for(ve=0;ve<pe;++ve)re[le+ve]=I[V+ve]>>8}function et(){ml=ee,cn=ge,un=Ue,pa=Ge}function wt(I,V,re){k[I]=function(le,pe,ve,be,Ne,je,Pe,Ke,ct,it,rt,Tt,gt,We,Je,Ct,It){var St,Zt=It-1>>1,Gt=Ne[je+0]|Pe[Ke+0]<<16,hr=ct[it+0]|rt[Tt+0]<<16;t(le!=null);var Kt=3*Gt+hr+131074>>2;for(V(le[pe+0],255&Kt,Kt>>16,gt,We),ve!=null&&(Kt=3*hr+Gt+131074>>2,V(ve[be+0],255&Kt,Kt>>16,Je,Ct)),St=1;St<=Zt;++St){var jn=Ne[je+St]|Pe[Ke+St]<<16,Un=ct[it+St]|rt[Tt+St]<<16,sn=Gt+jn+hr+Un+524296,en=sn+2*(jn+hr)>>3;Kt=en+Gt>>1,Gt=(sn=sn+2*(Gt+Un)>>3)+jn>>1,V(le[pe+2*St-1],255&Kt,Kt>>16,gt,We+(2*St-1)*re),V(le[pe+2*St-0],255&Gt,Gt>>16,gt,We+(2*St-0)*re),ve!=null&&(Kt=sn+hr>>1,Gt=en+Un>>1,V(ve[be+2*St-1],255&Kt,Kt>>16,Je,Ct+(2*St-1)*re),V(ve[be+2*St+0],255&Gt,Gt>>16,Je,Ct+(2*St+0)*re)),Gt=jn,hr=Un}1&It||(Kt=3*Gt+hr+131074>>2,V(le[pe+It-1],255&Kt,Kt>>16,gt,We+(It-1)*re),ve!=null&&(Kt=3*hr+Gt+131074>>2,V(ve[be+It-1],255&Kt,Kt>>16,Je,Ct+(It-1)*re)))}}function Rt(){oi[Hi]=xd,oi[o0]=wu,oi[vu]=Cf,oi[lp]=cx,oi[IA]=ux,oi[Ad]=u0,oi[ox]=dx,oi[cp]=wu,oi[Nf]=cx,oi[hd]=ux,oi[l0]=u0}function qt(I){return I&-16384?0>I?0:255:I>>Oj}function P(I,V){return qt((19077*I>>8)+(26149*V>>8)-14234)}function se(I,V,re){return qt((19077*I>>8)-(6419*V>>8)-(13320*re>>8)+8708)}function ce(I,V){return qt((19077*I>>8)+(33050*V>>8)-17685)}function Ee(I,V,re,le,pe){le[pe+0]=P(I,re),le[pe+1]=se(I,V,re),le[pe+2]=ce(I,V)}function Ze(I,V,re,le,pe){le[pe+0]=ce(I,V),le[pe+1]=se(I,V,re),le[pe+2]=P(I,re)}function ut(I,V,re,le,pe){var ve=se(I,V,re);V=ve<<3&224|ce(I,V)>>3,le[pe+0]=248&P(I,re)|ve>>5,le[pe+1]=V}function Mt(I,V,re,le,pe){var ve=240&ce(I,V)|15;le[pe+0]=240&P(I,re)|se(I,V,re)>>4,le[pe+1]=ve}function Sr(I,V,re,le,pe){le[pe+0]=255,Ee(I,V,re,le,pe+1)}function hn(I,V,re,le,pe){Ze(I,V,re,le,pe),le[pe+3]=255}function Vr(I,V,re,le,pe){Ee(I,V,re,le,pe),le[pe+3]=255}function Mn(I,V){return 0>I?0:I>V?V:I}function Zn(I,V,re){k[I]=function(le,pe,ve,be,Ne,je,Pe,Ke,ct){for(var it=Ke+(-2&ct)*re;Ke!=it;)V(le[pe+0],ve[be+0],Ne[je+0],Pe,Ke),V(le[pe+1],ve[be+0],Ne[je+0],Pe,Ke+re),pe+=2,++be,++je,Ke+=2*re;1&ct&&V(le[pe+0],ve[be+0],Ne[je+0],Pe,Ke)}}function Ul(I,V,re){return re==0?I==0?V==0?6:5:V==0?4:0:re}function rs(I,V,re,le,pe){switch(I>>>30){case 3:wc(V,re,le,pe,0);break;case 2:Ka(V,re,le,pe);break;case 1:bs(V,re,le,pe)}}function Fo(I,V){var re,le,pe=V.M,ve=V.Nb,be=I.oc,Ne=I.pc+40,je=I.oc,Pe=I.pc+584,Ke=I.oc,ct=I.pc+600;for(re=0;16>re;++re)be[Ne+32*re-1]=129;for(re=0;8>re;++re)je[Pe+32*re-1]=129,Ke[ct+32*re-1]=129;for(0<pe?be[Ne-1-32]=je[Pe-1-32]=Ke[ct-1-32]=129:(a(be,Ne-32-1,127,21),a(je,Pe-32-1,127,9),a(Ke,ct-32-1,127,9)),le=0;le<I.za;++le){var it=V.ya[V.aa+le];if(0<le){for(re=-1;16>re;++re)n(be,Ne+32*re-4,be,Ne+32*re+12,4);for(re=-1;8>re;++re)n(je,Pe+32*re-4,je,Pe+32*re+4,4),n(Ke,ct+32*re-4,Ke,ct+32*re+4,4)}var rt=I.Gd,Tt=I.Hd+le,gt=it.ad,We=it.Hc;if(0<pe&&(n(be,Ne-32,rt[Tt].y,0,16),n(je,Pe-32,rt[Tt].f,0,8),n(Ke,ct-32,rt[Tt].ea,0,8)),it.Za){var Je=be,Ct=Ne-32+16;for(0<pe&&(le>=I.za-1?a(Je,Ct,rt[Tt].y[15],4):n(Je,Ct,rt[Tt+1].y,0,4)),re=0;4>re;re++)Je[Ct+128+re]=Je[Ct+256+re]=Je[Ct+384+re]=Je[Ct+0+re];for(re=0;16>re;++re,We<<=2)Je=be,Ct=Ne+PA[re],uo[it.Ob[re]](Je,Ct),rs(We,gt,16*+re,Je,Ct)}else if(Je=Ul(le,pe,it.Ob[0]),gd[Je](be,Ne),We!=0)for(re=0;16>re;++re,We<<=2)rs(We,gt,16*+re,be,Ne+PA[re]);for(re=it.Gc,Je=Ul(le,pe,it.Dd),gl[Je](je,Pe),gl[Je](Ke,ct),We=gt,Je=je,Ct=Pe,255&(it=re>>0)&&(170&it?Nc(We,256,Je,Ct):Po(We,256,Je,Ct)),it=Ke,We=ct,255&(re>>=8)&&(170&re?Nc(gt,320,it,We):Po(gt,320,it,We)),pe<I.Ub-1&&(n(rt[Tt].y,0,be,Ne+480,16),n(rt[Tt].f,0,je,Pe+224,8),n(rt[Tt].ea,0,Ke,ct+224,8)),re=8*ve*I.B,rt=I.sa,Tt=I.ta+16*le+16*ve*I.R,gt=I.qa,it=I.ra+8*le+re,We=I.Ha,Je=I.Ia+8*le+re,re=0;16>re;++re)n(rt,Tt+re*I.R,be,Ne+32*re,16);for(re=0;8>re;++re)n(gt,it+re*I.B,je,Pe+32*re,8),n(We,Je+re*I.B,Ke,ct+32*re,8)}}function pu(I,V,re,le,pe,ve,be,Ne,je){var Pe=[0],Ke=[0],ct=0,it=je!=null?je.kd:0,rt=je??new uf;if(I==null||12>re)return 7;rt.data=I,rt.w=V,rt.ha=re,V=[V],re=[re],rt.gb=[rt.gb];e:{var Tt=V,gt=re,We=rt.gb;if(t(I!=null),t(gt!=null),t(We!=null),We[0]=0,12<=gt[0]&&!r(I,Tt[0],"RIFF")){if(r(I,Tt[0]+8,"WEBP")){We=3;break e}var Je=Oe(I,Tt[0]+4);if(12>Je||4294967286<Je){We=3;break e}if(it&&Je>gt[0]-8){We=7;break e}We[0]=Je,Tt[0]+=12,gt[0]-=12}We=0}if(We!=0)return We;for(Je=0<rt.gb[0],re=re[0];;){e:{var Ct=I;gt=V,We=re;var It=Pe,St=Ke,Zt=Tt=[0];if((Kt=ct=[ct])[0]=0,8>We[0])We=7;else{if(!r(Ct,gt[0],"VP8X")){if(Oe(Ct,gt[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var Gt=Oe(Ct,gt[0]+8),hr=1+ae(Ct,gt[0]+12);if(2147483648<=hr*(Ct=1+ae(Ct,gt[0]+15))){We=3;break e}Zt!=null&&(Zt[0]=Gt),It!=null&&(It[0]=hr),St!=null&&(St[0]=Ct),gt[0]+=18,We[0]-=18,Kt[0]=1}We=0}}if(ct=ct[0],Tt=Tt[0],We!=0)return We;if(gt=!!(2&Tt),!Je&&ct)return 3;if(ve!=null&&(ve[0]=!!(16&Tt)),be!=null&&(be[0]=gt),Ne!=null&&(Ne[0]=0),be=Pe[0],Tt=Ke[0],ct&&gt&&je==null){We=0;break}if(4>re){We=7;break}if(Je&&ct||!Je&&!ct&&!r(I,V[0],"ALPH")){re=[re],rt.na=[rt.na],rt.P=[rt.P],rt.Sa=[rt.Sa];e:{Gt=I,We=V,Je=re;var Kt=rt.gb;It=rt.na,St=rt.P,Zt=rt.Sa,hr=22,t(Gt!=null),t(Je!=null),Ct=We[0];var jn=Je[0];for(t(It!=null),t(Zt!=null),It[0]=null,St[0]=null,Zt[0]=0;;){if(We[0]=Ct,Je[0]=jn,8>jn){We=7;break e}var Un=Oe(Gt,Ct+4);if(4294967286<Un){We=3;break e}var sn=8+Un+1&-2;if(hr+=sn,0<Kt&&hr>Kt){We=3;break e}if(!r(Gt,Ct,"VP8 ")||!r(Gt,Ct,"VP8L")){We=0;break e}if(jn[0]<sn){We=7;break e}r(Gt,Ct,"ALPH")||(It[0]=Gt,St[0]=Ct+8,Zt[0]=Un),Ct+=sn,jn-=sn}}if(re=re[0],rt.na=rt.na[0],rt.P=rt.P[0],rt.Sa=rt.Sa[0],We!=0)break}re=[re],rt.Ja=[rt.Ja],rt.xa=[rt.xa];e:if(Kt=I,We=V,Je=re,It=rt.gb[0],St=rt.Ja,Zt=rt.xa,Gt=We[0],Ct=!r(Kt,Gt,"VP8 "),hr=!r(Kt,Gt,"VP8L"),t(Kt!=null),t(Je!=null),t(St!=null),t(Zt!=null),8>Je[0])We=7;else{if(Ct||hr){if(Kt=Oe(Kt,Gt+4),12<=It&&Kt>It-12){We=3;break e}if(it&&Kt>Je[0]-8){We=7;break e}St[0]=Kt,We[0]+=8,Je[0]-=8,Zt[0]=hr}else Zt[0]=5<=Je[0]&&Kt[Gt+0]==47&&!(Kt[Gt+4]>>5),St[0]=Je[0];We=0}if(re=re[0],rt.Ja=rt.Ja[0],rt.xa=rt.xa[0],V=V[0],We!=0)break;if(4294967286<rt.Ja)return 3;if(Ne==null||gt||(Ne[0]=rt.xa?2:1),be=[be],Tt=[Tt],rt.xa){if(5>re){We=7;break}Ne=be,it=Tt,gt=ve,I==null||5>re?I=0:5<=re&&I[V+0]==47&&!(I[V+4]>>5)?(Je=[0],Kt=[0],It=[0],G(St=new F,I,V,re),Wt(St,Je,Kt,It)?(Ne!=null&&(Ne[0]=Je[0]),it!=null&&(it[0]=Kt[0]),gt!=null&&(gt[0]=It[0]),I=1):I=0):I=0}else{if(10>re){We=7;break}Ne=Tt,I==null||10>re||!ai(I,V+3,re-3)?I=0:(it=I[V+0]|I[V+1]<<8|I[V+2]<<16,gt=16383&(I[V+7]<<8|I[V+6]),I=16383&(I[V+9]<<8|I[V+8]),1&it||3<(it>>1&7)||!(it>>4&1)||it>>5>=rt.Ja||!gt||!I?I=0:(be&&(be[0]=gt),Ne&&(Ne[0]=I),I=1))}if(!I||(be=be[0],Tt=Tt[0],ct&&(Pe[0]!=be||Ke[0]!=Tt)))return 3;je!=null&&(je[0]=rt,je.offset=V-je.w,t(4294967286>V-je.w),t(je.offset==je.ha-re));break}return We==0||We==7&&ct&&je==null?(ve!=null&&(ve[0]|=rt.na!=null&&0<rt.na.length),le!=null&&(le[0]=be),pe!=null&&(pe[0]=Tt),0):We}function ff(I,V,re){var le=V.width,pe=V.height,ve=0,be=0,Ne=le,je=pe;if(V.Da=I!=null&&0<I.Da,V.Da&&(Ne=I.cd,je=I.bd,ve=I.v,be=I.j,11>re||(ve&=-2,be&=-2),0>ve||0>be||0>=Ne||0>=je||ve+Ne>le||be+je>pe))return 0;if(V.v=ve,V.j=be,V.va=ve+Ne,V.o=be+je,V.U=Ne,V.T=je,V.da=I!=null&&0<I.da,V.da){if(!ye(Ne,je,re=[I.ib],ve=[I.hb]))return 0;V.ib=re[0],V.hb=ve[0]}return V.ob=I!=null&&I.ob,V.Kb=I==null||!I.Sd,V.da&&(V.ob=V.ib<3*le/4&&V.hb<3*pe/4,V.Kb=0),1}function n0(I){if(I==null)return 2;if(11>I.S){var V=I.f.RGBA;V.fb+=(I.height-1)*V.A,V.A=-V.A}else V=I.f.kb,I=I.height,V.O+=(I-1)*V.fa,V.fa=-V.fa,V.N+=(I-1>>1)*V.Ab,V.Ab=-V.Ab,V.W+=(I-1>>1)*V.Db,V.Db=-V.Db,V.F!=null&&(V.J+=(I-1)*V.lb,V.lb=-V.lb);return 0}function CA(I,V,re,le){if(le==null||0>=I||0>=V)return 2;if(re!=null){if(re.Da){var pe=re.cd,ve=re.bd,be=-2&re.v,Ne=-2&re.j;if(0>be||0>Ne||0>=pe||0>=ve||be+pe>I||Ne+ve>V)return 2;I=pe,V=ve}if(re.da){if(!ye(I,V,pe=[re.ib],ve=[re.hb]))return 2;I=pe[0],V=ve[0]}}le.width=I,le.height=V;e:{var je=le.width,Pe=le.height;if(I=le.S,0>=je||0>=Pe||!(I>=Hi&&13>I))I=2;else{if(0>=le.Rd&&le.sd==null){be=ve=pe=V=0;var Ke=(Ne=je*GN[I])*Pe;if(11>I||(ve=(Pe+1)/2*(V=(je+1)/2),I==12&&(be=(pe=je)*Pe)),(Pe=s(Ke+2*ve+be))==null){I=1;break e}le.sd=Pe,11>I?((je=le.f.RGBA).eb=Pe,je.fb=0,je.A=Ne,je.size=Ke):((je=le.f.kb).y=Pe,je.O=0,je.fa=Ne,je.Fd=Ke,je.f=Pe,je.N=0+Ke,je.Ab=V,je.Cd=ve,je.ea=Pe,je.W=0+Ke+ve,je.Db=V,je.Ed=ve,I==12&&(je.F=Pe,je.J=0+Ke+2*ve),je.Tc=be,je.lb=pe)}if(V=1,pe=le.S,ve=le.width,be=le.height,pe>=Hi&&13>pe)if(11>pe)I=le.f.RGBA,V&=(Ne=Math.abs(I.A))*(be-1)+ve<=I.size,V&=Ne>=ve*GN[pe],V&=I.eb!=null;else{I=le.f.kb,Ne=(ve+1)/2,Ke=(be+1)/2,je=Math.abs(I.fa),Pe=Math.abs(I.Ab);var ct=Math.abs(I.Db),it=Math.abs(I.lb),rt=it*(be-1)+ve;V&=je*(be-1)+ve<=I.Fd,V&=Pe*(Ke-1)+Ne<=I.Cd,V=(V&=ct*(Ke-1)+Ne<=I.Ed)&je>=ve&Pe>=Ne&ct>=Ne,V&=I.y!=null,V&=I.f!=null,V&=I.ea!=null,pe==12&&(V&=it>=ve,V&=rt<=I.Tc,V&=I.F!=null)}else V=0;I=V?0:2}}return I!=0||re!=null&&re.fd&&(I=n0(le)),I}var Ms=64,Af=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_A=24,SA=32,a0=8,Oo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ue("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(I){return I},k.Predictor2=function(I,V,re){return V[re+0]},k.Predictor3=function(I,V,re){return V[re+1]},k.Predictor4=function(I,V,re){return V[re-1]},k.Predictor5=function(I,V,re){return De(De(I,V[re+1]),V[re+0])},k.Predictor6=function(I,V,re){return De(I,V[re-1])},k.Predictor7=function(I,V,re){return De(I,V[re+0])},k.Predictor8=function(I,V,re){return De(V[re-1],V[re+0])},k.Predictor9=function(I,V,re){return De(V[re+0],V[re+1])},k.Predictor10=function(I,V,re){return De(De(I,V[re-1]),De(V[re+0],V[re+1]))},k.Predictor11=function(I,V,re){var le=V[re+0];return 0>=tt(le>>24&255,I>>24&255,(V=V[re-1])>>24&255)+tt(le>>16&255,I>>16&255,V>>16&255)+tt(le>>8&255,I>>8&255,V>>8&255)+tt(255&le,255&I,255&V)?le:I},k.Predictor12=function(I,V,re){var le=V[re+0];return(He((I>>24&255)+(le>>24&255)-((V=V[re-1])>>24&255))<<24|He((I>>16&255)+(le>>16&255)-(V>>16&255))<<16|He((I>>8&255)+(le>>8&255)-(V>>8&255))<<8|He((255&I)+(255&le)-(255&V)))>>>0},k.Predictor13=function(I,V,re){var le=V[re-1];return(Ye((I=De(I,V[re+0]))>>24&255,le>>24&255)<<24|Ye(I>>16&255,le>>16&255)<<16|Ye(I>>8&255,le>>8&255)<<8|Ye(I>>0&255,le>>0&255))>>>0};var _1=k.PredictorAdd0;k.PredictorAdd1=ft,ue("Predictor2","PredictorAdd2"),ue("Predictor3","PredictorAdd3"),ue("Predictor4","PredictorAdd4"),ue("Predictor5","PredictorAdd5"),ue("Predictor6","PredictorAdd6"),ue("Predictor7","PredictorAdd7"),ue("Predictor8","PredictorAdd8"),ue("Predictor9","PredictorAdd9"),ue("Predictor10","PredictorAdd10"),ue("Predictor11","PredictorAdd11"),ue("Predictor12","PredictorAdd12"),ue("Predictor13","PredictorAdd13");var ip=k.PredictorAdd2;Bt("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),Bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var sx,Ql=k.ColorIndexInverseTransform,si=k.MapARGB,hf=k.VP8LColorIndexInverseTransformAlpha,op=k.MapAlpha,ud=k.VP8LPredictorsAdd=[];ud.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var mf,co,_i,pf,Do,yc,gu,wc,Ka,Nc,bs,Po,kA,xu,s0,gf,xf,vf,jA,i0,bf,dd,BA,Wa,ml,cn,un,pa,ns=s(511),Hl=s(2041),yf=s(225),wf=s(767),fd=0,ix=Hl,TA=yf,ii=wf,Vl=ns,Hi=0,o0=1,vu=2,lp=3,IA=4,Ad=5,ox=6,cp=7,Nf=8,hd=9,l0=10,lx=[2,3,7],zl=[3,3,11],pl=[280,256,256,256,40],FA=[0,1,1,1,0],md=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],pd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],OA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],QN=8,up=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],dp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Us=null,Xa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],On=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ef=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],S1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],DA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],HN=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],gd=[],uo=[],gl=[],VN=1,c0=2,yu=[],oi=[];wt("UpsampleRgbLinePair",Ee,3),wt("UpsampleBgrLinePair",Ze,3),wt("UpsampleRgbaLinePair",Vr,4),wt("UpsampleBgraLinePair",hn,4),wt("UpsampleArgbLinePair",Sr,4),wt("UpsampleRgba4444LinePair",Mt,2),wt("UpsampleRgb565LinePair",ut,2);var xd=k.UpsampleRgbLinePair,Cf=k.UpsampleBgrLinePair,wu=k.UpsampleRgbaLinePair,cx=k.UpsampleBgraLinePair,ux=k.UpsampleArgbLinePair,u0=k.UpsampleRgba4444LinePair,dx=k.UpsampleRgb565LinePair,Nu=16,Qs=1<<Nu-1,_f=-227,fx=482,Oj=6,zN=0,Dj=s(256),Hs=s(256),k1=s(256),fp=s(256),Ap=s(fx-_f),j1=s(fx-_f);Zn("YuvToRgbRow",Ee,3),Zn("YuvToBgrRow",Ze,3),Zn("YuvToRgbaRow",Vr,4),Zn("YuvToBgraRow",hn,4),Zn("YuvToArgbRow",Sr,4),Zn("YuvToRgba4444Row",Mt,2),Zn("YuvToRgb565Row",ut,2);var PA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vd=[0,2,8],Pj=[8,7,6,4,4,2,2,2,1,1,1,1],$N=1;this.WebPDecodeRGBA=function(I,V,re,le,pe){var ve=o0,be=new od,Ne=new Rn;be.ba=Ne,Ne.S=ve,Ne.width=[Ne.width],Ne.height=[Ne.height];var je=Ne.width,Pe=Ne.height,Ke=new ja;if(Ke==null||I==null)var ct=2;else t(Ke!=null),ct=pu(I,V,re,Ke.width,Ke.height,Ke.Pd,Ke.Qd,Ke.format,null);if(ct!=0?je=0:(je!=null&&(je[0]=Ke.width[0]),Pe!=null&&(Pe[0]=Ke.height[0]),je=1),je){Ne.width=Ne.width[0],Ne.height=Ne.height[0],le!=null&&(le[0]=Ne.width),pe!=null&&(pe[0]=Ne.height);e:{if(le=new Ls,(pe=new uf).data=I,pe.w=V,pe.ha=re,pe.kd=1,V=[0],t(pe!=null),((I=pu(pe.data,pe.w,pe.ha,null,null,null,V,null,pe))==0||I==7)&&V[0]&&(I=4),(V=I)==0){if(t(be!=null),le.data=pe.data,le.w=pe.w+pe.offset,le.ha=pe.ha-pe.offset,le.put=Ba,le.ac=Yn,le.bc=Rs,le.ma=be,pe.xa){if((I=Me())==null){be=1;break e}if(function(it,rt){var Tt=[0],gt=[0],We=[0];t:for(;;){if(it==null)return 0;if(rt==null)return it.a=2,0;if(it.l=rt,it.a=0,G(it.m,rt.data,rt.w,rt.ha),!Wt(it.m,Tt,gt,We)){it.a=3;break t}if(it.xb=c0,rt.width=Tt[0],rt.height=gt[0],!Ie(Tt[0],gt[0],1,it,null))break t;return 1}return t(it.a!=0),0}(I,le)){if(le=(V=CA(le.width,le.height,be.Oa,be.ba))==0){t:{le=I;r:for(;;){if(le==null){le=0;break t}if(t(le.s.yc!=null),t(le.s.Ya!=null),t(0<le.s.Wb),t((re=le.l)!=null),t((pe=re.ma)!=null),le.xb!=0){if(le.ca=pe.ba,le.tb=pe.tb,t(le.ca!=null),!ff(pe.Oa,re,lp)){le.a=2;break r}if(!ze(le,re.width)||re.da)break r;if((re.da||jr(le.ca.S))&&et(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&et()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!Te(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!Ae(le,le.V,le.Ba,le.c,le.i,re.o,Re))break r;pe.Dc=le.Ma,le=1;break t}t(le.a!=0),le=0}le=!le}le&&(V=I.a)}else V=I.a}else{if((I=new wi)==null){be=1;break e}if(I.Fa=pe.na,I.P=pe.P,I.qc=pe.Sa,af(I,le)){if((V=CA(le.width,le.height,be.Oa,be.ba))==0){if(I.Aa=0,re=be.Oa,t((pe=I)!=null),re!=null){if(0<(je=0>(je=re.Md)?0:100<je?255:255*je/100)){for(Pe=Ke=0;4>Pe;++Pe)12>(ct=pe.pb[Pe]).lc&&(ct.ia=je*Pj[0>ct.lc?0:ct.lc]>>3),Ke|=ct.ia;Ke&&(alert("todo:VP8InitRandom"),pe.ia=1)}pe.Ga=re.Id,100<pe.Ga?pe.Ga=100:0>pe.Ga&&(pe.Ga=0)}vA(I,le)||(V=I.a)}}else V=I.a}V==0&&be.Oa!=null&&be.Oa.fd&&(V=n0(be.ba))}be=V}ve=be!=0?null:11>ve?Ne.f.RGBA.eb:Ne.f.kb.y}else ve=null;return ve};var GN=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,T){for(var L="",R=0;R<4;R++)L+=String.fromCharCode(k[T++]);return L}function d(k,T){return(k[T+0]<<0|k[T+1]<<8|k[T+2]<<16)>>>0}function f(k,T){return(k[T+0]<<0|k[T+1]<<8|k[T+2]<<16|k[T+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(k,T){var L={},R=0,S=!1,U=0,Q=0;if(L.frames=[],!function(D,q,J,te){for(var ne=0;ne<te;ne++)if(D[q+ne]!=J.charCodeAt(ne))return!0;return!1}(k,T,"RIFF",4)){var X,z;for(f(k,T+=4),T+=8;T<k.length;){var W=u(k,T),G=f(k,T+=4);T+=4;var Y=G+(1&G);switch(W){case"VP8 ":case"VP8L":L.frames[R]===void 0&&(L.frames[R]={}),(F=L.frames[R]).src_off=S?Q:T-8,F.src_size=U+G+8,R++,S&&(S=!1,U=0,Q=0);break;case"VP8X":(F=L.header={}).feature_flags=k[T];var K=T+4;F.canvas_width=1+d(k,K),K+=3,F.canvas_height=1+d(k,K),K+=3;break;case"ALPH":S=!0,U=Y+8,Q=T-8;break;case"ANIM":(F=L.header).bgcolor=f(k,T),K=T+4,F.loop_count=(X=k)[(z=K)+0]<<0|X[z+1]<<8,K+=2;break;case"ANMF":var H,F;(F=L.frames[R]={}).offset_x=2*d(k,T),T+=3,F.offset_y=2*d(k,T),T+=3,F.width=1+d(k,T),T+=3,F.height=1+d(k,T),T+=3,F.duration=d(k,T),T+=3,H=k[T++],F.dispose=1&H,F.blend=H>>1&1}W!="ANMF"&&(T+=Y)}return L}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],m=[w.canvas_width];for(var O=0;O<_.length&&_[O].blend!=0;O++);}var j=_[0],B=x.WebPDecodeRGBA(v,j.src_off,j.src_size,m,h);j.rgba=B,j.imgwidth=m[0],j.imgheight=h[0];for(var C=0;C<m[0]*h[0]*4;C++)g[C]=B[C];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof RO=="function"},r=function(h,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}h=n(h,m,g,y);var w=RO(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,m,g,x){for(var v,y,w,_=h.length/m,O=new Uint8Array(h.length+_),j=d(),B=0;B<_;B+=1){if(w=B*m,v=h.subarray(w,w+m),x)O.set(x(v,g,y),w+B);else{for(var C,k=j.length,T=[];C<k;C+=1)T[C]=j[C](v,g,y);var L=f(T.concat());O.set(T[L],w+B)}y=v}return O},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},s=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},o=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,v[w+1]=h[w]-x+256&255;return v},l=function(h,m,g){var x,v,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-m]||0,v=g&&g[_]||0,y[_+1]=h[_]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,w,_=[],O=h.length;_[0]=4;for(var j=0;j<O;j+=1)x=h[j-m]||0,v=g&&g[j]||0,y=g&&g[j-m]||0,w=u(x,v,y),_[j+1]=h[j]-w+256&255;return _},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[a,s,o,l,c]},f=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,w,_,O,j,B,C,k,T,L,R,S,U,Q,X=this.decode.FLATE_DECODE,z="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new tXe(h)).imgData,y=w.bits,v=w.colorSpace,O=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){k=(C=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,L=new Uint8Array(k*w.colors),T=new Uint8Array(k);var W,G=w.pixelBitlength-w.bits;for(U=0,Q=0;U<k;U++){for(S=C[U],W=0;W<G;)L[Q++]=S>>>W&255,W+=w.bits;T[U]=S>>>W&255}}if(w.bits===16){k=(C=new Uint32Array(w.decodePixels().buffer)).length,L=new Uint8Array(k*(32/w.pixelBitlength)*w.colors),T=new Uint8Array(k*(32/w.pixelBitlength)),R=w.colors>1,U=0,Q=0;for(var Y=0;U<k;)S=C[U++],L[Q++]=S>>>0&255,R&&(L[Q++]=S>>>16&255,S=C[U++],L[Q++]=S>>>0&255),T[Y++]=S>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(L,w.width*w.colors,w.colors,x),B=r(T,w.width,1,x)):(h=L,B=T,X=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,j=w.palette,w.transparency.indexed)){var K=w.transparency.indexed,H=0;for(U=0,k=K.length;U<k;++U)H+=K[U];if((H/=255)===k-1&&K.indexOf(0)!==-1)_=[K.indexOf(0)];else if(H!==k){for(C=w.decodePixels(),T=new Uint8Array(C.length),U=0,k=C.length;U<k;U++)T[U]=K[C[U]];B=r(T,w.width,1)}}var F=function(D){var q;switch(D){case e.image_compression.FAST:q=11;break;case e.image_compression.MEDIUM:q=13;break;case e.image_compression.SLOW:q=14;break;default:q=12}return q}(x);return X===this.decode.FLATE_DECODE&&(z="/Predictor "+F+" "),z+="/Colors "+O+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:g,data:h,index:m,filter:X,decodeParameters:z,transparency:_,palette:j,sMask:B,predictor:F,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:v}}}})(Ar.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new rXe(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new OI(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Ar.API),kd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},kd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ca.log("bit decode error:"+r)}},kd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},kd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},kd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},kd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},kd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},kd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},kd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},kd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new kd(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new OI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Ar.API),TK.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new TK(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new OI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Ar.API),Ar.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ar.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hx=Ar.API,TC=Hx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(h=f&&ha(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||x)/c+h)),g=n;return v},SK=Hx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Hx.processArabic&&(e=Hx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:TC.apply(this,arguments).reduce(function(s,o){return s+o},0)},kK=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},jK=function(e,t,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=TC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(O){(O=O.split(/\s*\n/)).length>1?w=w.concat(O.map(function(j,B){return(B&&j.length?`
`:"")+j})):w.push(O[0])}),x=w,c=SK.apply(this,[y,r])}for(s=0,o=x.length;s<o;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+m+(g=(a=TC.apply(this,[n,r])).reduce(function(O,j){return O+j},0))>t||_){if(g>t){for(l=kK.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(O,j){return O+j},0)}else d=[n];f.push(d),h=g+c,m=v}else d.push(n),h+=m+g,m=v}return u=c?function(O,j){return(j?y:"")+O.join(" ")}:function(O){return O.join(" ")},f.map(u)},Hx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(jK.apply(this,[n[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var h,m,g,x,v=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ha(h)!=="object")throw new Error("Don't know what to do with value type "+ha(h)+".");g=o(h)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,w=v,_=[],O="",j="",B=f.length-1,C=1;C<B;C+=1)(x=f[C])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((m=_.pop())[0][m[1]]=w,g=void 0,w=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(O+=r[x],g=parseInt(O,16)*y,y=1,O=""):O+=x:r.hasOwnProperty(x)?(j+=r[x],w[g]=parseInt(j,16)*y,y=1,g=void 0,j=""):j+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(Ar.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(F2(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Ar),function(e){function t(){return(Dr.canvg?Promise.resolve(Dr.canvg):Ti(()=>import("./index.es-DOFxwGlM.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ar.API.addSvgAsImage=function(r,n,a,s,o,l,c,u){if(isNaN(n)||isNaN(a))throw Ca.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ca.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,o,c,u)})}}(),Ar.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Ar.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(ha(e)==="object"){for(a in e)if(s=e[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ar.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(m,g){return m-g})).length;f<h;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+hv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+hv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+hv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+hv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+hv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(w=l,x=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),o||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var O="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?O=h(v,x).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(O=r(v,g[x])),f.isHex=!0,{text:O,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(Ar),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ar.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var O=function(R){var S=R.charCodeAt(),U=S>>8,Q=x[U];return Q!==void 0?f[256*Q+(255&S)]:U===252||U===253?"AL":y.test(U)?"L":U===8?"R":"N"},j=function(R){for(var S,U=0;U<R.length;U++){if((S=O(R.charAt(U)))==="L")return!1;if(S==="R")return!0}return!1},B=function(R,S,U,Q){var X,z,W,G,Y=S[Q];switch(Y){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Y="AN");break;case"AL":w=!0,Y="R";break;case"WS":Y="N";break;case"CS":Q<1||Q+1>=S.length||(X=U[Q-1])!=="EN"&&X!=="AN"||(z=S[Q+1])!=="EN"&&z!=="AN"?Y="N":w&&(z="AN"),Y=z===X?z:"N";break;case"ES":Y=(X=Q>0?U[Q-1]:"B")==="EN"&&Q+1<S.length&&S[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&U[Q-1]==="EN"){Y="EN";break}if(w){Y="N";break}for(W=Q+1,G=S.length;W<G&&S[W]==="ET";)W++;Y=W<G&&S[W]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(G=S.length,W=Q+1;W<G&&S[W]==="NSM";)W++;if(W<G){var K=R[Q],H=K>=1425&&K<=2303||K===64286;if(X=S[W],H&&(X==="R"||X==="AL")){Y="R";break}}}Y=Q<1||(X=S[Q-1])==="B"?"N":U[Q-1];break;case"B":w=!1,a=!0,Y=_;break;case"S":s=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Y="N"}return Y},C=function(R,S,U){var Q=R.split("");return U&&k(Q,U,{hiLevel:_}),Q.reverse(),S&&S.reverse(),Q.join("")},k=function(R,S,U){var Q,X,z,W,G,Y=-1,K=R.length,H=0,F=[],D=_?m:h,q=[];for(w=!1,a=!1,s=!1,X=0;X<K;X++)q[X]=O(R[X]);for(z=0;z<K;z++){if(G=H,F[z]=B(R,q,F,z),Q=240&(H=D[G][g[F[z]]]),H&=15,S[z]=W=D[H][5],Q>0)if(Q===16){for(X=Y;X<z;X++)S[X]=1;Y=-1}else Y=-1;if(D[H][6])Y===-1&&(Y=z);else if(Y>-1){for(X=Y;X<z;X++)S[X]=W;Y=-1}q[z]==="B"&&(S[z]=0),U.hiLevel|=W}s&&function(J,te,ne){for(var ie=0;ie<ne;ie++)if(J[ie]==="S"){te[ie]=_;for(var oe=ie-1;oe>=0&&J[oe]==="WS";oe--)te[oe]=_}}(q,S,K)},T=function(R,S,U,Q,X){if(!(X.hiLevel<R)){if(R===1&&_===1&&!a)return S.reverse(),void(U&&U.reverse());for(var z,W,G,Y,K=S.length,H=0;H<K;){if(Q[H]>=R){for(G=H+1;G<K&&Q[G]>=R;)G++;for(Y=H,W=G-1;Y<W;Y++,W--)z=S[Y],S[Y]=S[W],S[W]=z,U&&(z=U[Y],U[Y]=U[W],U[W]=z);H=G}H++}}},L=function(R,S,U){var Q=R.split(""),X={hiLevel:_};return U||(U=[]),k(Q,U,X),function(z,W,G){if(G.hiLevel!==0&&d)for(var Y,K=0;K<z.length;K++)W[K]===1&&(Y=v.indexOf(z[K]))>=0&&(z[K]=v[Y+1])}(Q,U,X),T(2,Q,S,U,X),T(1,Q,S,U,X),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(R,S,U){if(function(X,z){if(z)for(var W=0;W<X.length;W++)z[W]=W;l===void 0&&(l=j(X)),u===void 0&&(u=j(X))}(R,S),o||!c||u)if(o&&c&&l^u)_=l?1:0,R=C(R,S,U);else if(!o&&c&&u)_=l?1:0,R=L(R,S,U),R=C(R,S);else if(!o||l||c||u){if(o&&!c&&l^u)R=C(R,S),l?(_=0,R=L(R,S,U)):(_=1,R=L(R,S,U),R=C(R,S));else if(o&&l&&!c&&u)_=1,R=L(R,S,U),R=C(R,S);else if(!o&&!c&&l^u){var Q=d;l?(_=1,R=L(R,S,U),_=0,d=!1,R=L(R,S,U),d=Q):(_=0,R=L(R,S,U),R=C(R,S),_=1,d=!1,R=L(R,S,U),d=Q,R=C(R,S))}}else _=0,R=L(R,S,U);else _=l?1:0,R=L(R,S,U);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),o=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Ar),Ar.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Hm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new gXe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new nXe(this.contents),this.head=new sXe(this),this.name=new uXe(this),this.cmap=new nce(this),this.toUnicode={},this.hhea=new iXe(this),this.maxp=new dXe(this),this.hmtx=new fXe(this),this.post=new lXe(this),this.os2=new oXe(this),this.loca=new pXe(this),this.glyf=new AXe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var tf,Hm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),nXe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(a=new Hm).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*m,u=a.pos+s,l=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=ace.call(r);r.length%4;)r.push(0);for(s=new Hm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),aXe={}.hasOwnProperty,mA=function(e,t){for(var r in t)aXe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};tf=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var sXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Hm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),IK=function(){function e(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,s=function(){var O,j;for(j=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)j.push(t.readUInt16());return j}(),t.pos+=2,x=function(){var O,j;for(j=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)j.push(t.readUInt16());return j}(),u=function(){var O,j;for(j=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)j.push(t.readUInt16());return j}(),d=function(){var O,j;for(j=[],c=O=0;0<=h?O<h:O>h;c=0<=h?++O:--O)j.push(t.readUInt16());return j}(),a=(this.length-t.pos+this.offset)/2,l=function(){var O,j;for(j=[],c=O=0;0<=a?O<a:O>a;c=0<=a?++O:--O)j.push(t.readUInt16());return j}(),c=y=0,_=s.length;y<_;c=++y)for(v=s[c],n=w=g=x[c];g<=v?w<=v:w>=v;n=g<=v?++w:--w)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_,O,j,B,C,k,T,L,R,S,U,Q,X,z,W,G,Y,K,H,F,D,q,J,te,ne,ie,oe,de,ke,ae;switch(Q=new Hm,o=Object.keys(t).sort(function(Oe,Te){return Oe-Te}),r){case"macroman":for(x=0,v=function(){var Oe=[];for(g=0;g<256;++g)Oe.push(0);return Oe}(),w={0:0},s={},X=0,Y=o.length;X<Y;X++)w[oe=t[a=o[X]]]==null&&(w[oe]=++x),s[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(v),{charMap:s,subtable:Q.data,maxGlyphID:x+1};case"unicode":for(S=[],f=[],_=0,w={},n={},y=u=null,z=0,K=o.length;z<K;z++)w[j=t[a=o[z]]]==null&&(w[j]=++_),n[a]={old:j,new:w[j]},l=w[j]-a,y!=null&&l===u||(y&&f.push(y),S.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),S.push(65535),L=2*(T=S.length),k=2*Math.pow(Math.log(T)/Math.LN2,2),h=Math.log(k/2)/Math.LN2,C=2*T-k,c=[],B=[],m=[],g=W=0,H=S.length;W<H;g=++W){if(R=S[g],d=f[g],R===65535){c.push(0),B.push(0);break}if(R-(U=n[R].new)>=32768)for(c.push(0),B.push(2*(m.length+T-g)),a=G=R;R<=d?G<=d:G>=d;a=R<=d?++G:--G)m.push(n[a].new);else c.push(U-R),B.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*T+2*m.length),Q.writeUInt16(0),Q.writeUInt16(L),Q.writeUInt16(k),Q.writeUInt16(h),Q.writeUInt16(C),ne=0,F=f.length;ne<F;ne++)a=f[ne],Q.writeUInt16(a);for(Q.writeUInt16(0),ie=0,D=S.length;ie<D;ie++)a=S[ie],Q.writeUInt16(a);for(de=0,q=c.length;de<q;de++)l=c[de],Q.writeUInt16(l);for(ke=0,J=B.length;ke<J;ke++)O=B[ke],Q.writeUInt16(O);for(ae=0,te=m.length;ae<te;ae++)x=m[ae],Q.writeUInt16(x);return{charMap:n,subtable:Q.data,maxGlyphID:_+1}}},e}(),nce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new IK(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=IK.encode(r,n),(s=new Hm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),iXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),oXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),lXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),cXe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},uXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,o,l,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,h=a.length;f<h;o=++f)s=a[o],r.pos=s.offset,d=r.readString(s.length),l=new cXe(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),dXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),fXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)o=h[d],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),ace=[].slice,AXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,o,l,c,u,d,f,h;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Hm(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new mXe(c,d,h,u,f):new hXe(c,l,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)s=r[n[c]],o.push(l.length),s&&(l=l.concat(s.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),hXe=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),mXe=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Hm(ace.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),pXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,tf),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<a.length;++l)if(a[l]=s,o<n.length&&n[o]==l){++o,a[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),gXe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y;for(a in n=nce.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,o)g in m||(m[g]=h++);return d=function(w){var _,O;for(_ in O={},w)O[w[_]]=_;return O}(m),f=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,O;for(O=[],w=0,_=f.length;w<_;w++)l=f[w],O.push(d[l]);return O}(),s=this.font.glyf.encode(o,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();Ar.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function sce(e,t,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var FK={},Kv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:FK=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return FK||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),zO=function(e,t){return zO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},zO(e,t)};function ice(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var oce=function(e){ice(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function xXe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function vXe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function OS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function lce(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var o=cce(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function cce(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Z4(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function uce(e,t){var r=Z4(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function bXe(e,t,r,n,a){var s={},o=1.3333333333333333,l=DI(t,function(_){return a.getComputedStyle(_).backgroundColor});l!=null&&(s.fillColor=l);var c=DI(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=wXe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=DI(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/o);var y=yXe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function yXe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function DI(e,t){var r=dce(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function dce(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:dce(e.parentElement,t):r}function wXe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=Z4(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function fce(e,t,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=NXe(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function NXe(e,t,r,n,a,s){for(var o=new oce(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=bXe(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:EXe(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function EXe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function CXe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function fh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Ace(e,t){var r=new Kv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();CXe(a,n,t);var s=fh({},a,n,t),o;typeof window<"u"&&(o=window);var l=_Xe(a,n,t),c=SXe(a,n,t),u=kXe(r,s),d=BXe(r,s,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function _Xe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=fh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=fh({},m[0],m[1],m[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function SXe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function kXe(e,t){var r,n,a,s,o,l,c,u,d,f,h,m,g=Z4(t.margin,40/e.scaleFactor()),x=(r=jXe(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),O=!!t.horizontalPageBreak,j=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:O,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function jXe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function BXe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=fce(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||TXe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function TXe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var $O=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),IXe=function(e){ice(t,e);function t(r,n,a,s,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return t}($O),FXe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new IXe(t,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new $O(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new $O(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),hce=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof oce&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),mce=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Z4(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),OXe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function DXe(e,t){PXe(e,t);var r=[],n=0;t.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(t);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=GO(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=GO(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),LXe(t),MXe(t,e),RXe(t)}function PXe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=uce(e,t);t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=OS(u.text,u.styles,e)+f;var h=OS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function GO(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var o=e[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=GO(h,t,r))}return t}function RXe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function LXe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function MXe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=OK(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=OK(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function OK(e,t,r,n,a){return e.map(function(s){return UXe(s,t,r,n,a)})}function UXe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=OS(e,r,n))return e;for(;t<OS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function pce(e,t){var r=new Kv(e),n=QXe(t,r.scaleFactor()),a=new FXe(t,n);return DXe(r,a),r.applyStyles(r.userStyles),a}function QXe(e,t){var r=e.content,n=VXe(r.columns);if(r.head.length===0){var a=DK(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=DK(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,o=e.styles;return{columns:n,head:PI("head",r.head,n,o,s,t),body:PI("body",r.body,n,o,s,t),foot:PI("foot",r.foot,n,o,s,t)}}function PI(e,t,r,n,a,s){var o={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=zXe(e,v,u,a,n,s,w),O=new mce(y,_,e);f[v.dataKey]=O,f[v.index]=O,m=O.colSpan-1,o[v.index]={left:O.rowSpan-1,times:m}}else m--,h++;else o[v.index].left--,m=o[v.index].times,d++}return new hce(c,u,e,f)});return l}function DK(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=HXe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function HXe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function VXe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new OXe(a,t,r)})}function zXe(e,t,r,n,a,s,o){var l=vXe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=fh({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?fh({},l.alternateRow,a.alternateRowStyles):{},m=xXe(s),g=fh({},m,u,h,f);return fh(g,o)}function $Xe(e,t,r){var n;r===void 0&&(r={});var a=uce(e,t),s=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function GXe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=$Xe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function gce(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new Kv(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(vce(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=fh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?qXe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Lh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;DS(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Lh(d,t,h,s,t.columns)})),lce(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function qXe(e,t,r,n){var a=GXe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?O2(e,t,r,n,u.columns,!0):PK(e,t,n,u.columns),KXe(e,t,r,n,u.columns),RI(e,t,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?O2(e,t,r,n,d,!0):PK(e,t,n,d),u=RK(e,t,o+1,n,d),RI(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),O2(e,t,r,n,h.columns,!0),RK(e,t,o+1,n,h.columns,f),RI(e,t,n,h.columns)}),o=u};o<t.body.length-1;)c()}function PK(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Lh(e,t,s,r,n)})}function KXe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,o){var l=o===t.body.length-1;DS(e,t,s,l,r,n,a)})}function RK(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var o=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=xce(e,t,d,n);c.canEntireRowFit(f,a)&&(Lh(e,t,c,n,a),l=r+u)}),l}function RI(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Lh(e,t,s,r,n)})}function WXe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function XXe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new mce(u.raw,u.styles,u.section);d=fh(d,u),d.text=[];var f=WXe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new hce(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function YXe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function DS(e,t,r,n,a,s,o){var l=xce(e,t,n,s);if(r.canEntireRowFit(l,o))Lh(e,t,r,s,o);else if(YXe(e,r,l,t)){var c=XXe(r,l,t,e);Lh(e,t,r,s,o),O2(e,t,a,s,o),DS(e,t,c,n,a,s,o)}else O2(e,t,a,s,o),DS(e,t,r,n,a,s,o)}function Lh(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}JXe(e,c,n);var d=c.getTextPos();sce(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function JXe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=cce(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),ZXe(e,t,r,n.lineWidth))}function ZXe(e,t,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+t.width,s=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function xce(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function O2(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return Lh(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;lce(e,t,r,n),vce(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Lh(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function vce(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function eYe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Ace(this,n),s=pce(this,a);return gce(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){sce(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Kv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Kv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Kv(this),s=fce(a,t,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var LI;function gi(e,t){var r=Ace(e,t),n=pce(e,r);gce(e,n)}try{if(typeof window<"u"&&window){var LK=window,MK=LK.jsPDF||((LI=LK.jspdf)===null||LI===void 0?void 0:LI.jsPDF);MK&&eYe(MK)}}catch(e){console.error("Could not apply autoTable plugin",e)}const tYe=["Localizar información explícita","Realizar inferencias a partir del texto","Interpretar y relacionar información del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto según su propósito comunicativo","Comprender vocabulario en contexto"],rYe=["Números y operaciones","Álgebra y funciones","Geometría","Probabilidad y estadística","Resolución de problemas","Modelamiento matemático","Argumentación y comunicación matemática"],UK=mt(st,"usuarios");async function ej(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",UK);const e=await Mr(UK);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(n=>{const a=n.data();return!a.curso||typeof a.curso!="string"||!a.curso.trim()?console.warn("⚠️ [ASIGNACION] Usuario sin curso asignado o curso inválido:",{id:n.id,...a}):console.log("✅ [ASIGNACION] Usuario con curso:",{id:n.id,curso:a.curso,nombre:a.nombreCompleto}),{id:n.id,...a}}),r=Array.from(new Set(t.map(n=>n.curso).filter(Boolean)));return console.log("📚 [ASIGNACION] Cursos únicos encontrados en usuarios:",r),console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const $c="simce_sets",TN="simce_resultados";async function nYe(e){try{return(await on(mt(st,$c),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function aYe(e,t){try{await dl(Yt(st,$c,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function bce(e){var t;try{console.log(`[DEBUG] obtenerSetPreguntas - Buscando set con ID: ${e}`);let r=await kh(Yt(st,$c,e));if(r.exists()||(console.log(`[DEBUG] obtenerSetPreguntas - No encontrado en ${$c}, buscando en simce_evaluaciones`),r=await kh(Yt(st,"simce_evaluaciones",e))),r.exists()){const n=r.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Set encontrado: ${n.titulo||"Sin título"}`),console.log(`[DEBUG] obtenerSetPreguntas - Cantidad de preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`),n.preguntas&&n.preguntas.length>0)for(let a=0;a<n.preguntas.length;a++){const s=n.preguntas[a];if(s.textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base encontrado en pregunta ${a+1}`),console.log(`[DEBUG] obtenerSetPreguntas - Extracto del texto base: ${s.textoBase.substring(0,50)}...`);break}}return{id:r.id,...n}}else throw console.log(`[DEBUG] obtenerSetPreguntas - No se encontró set con ID: ${e} en ninguna colección`),new Error("El set de preguntas no existe")}catch(r){throw console.error("Error al obtener set de preguntas:",r),new Error("No se pudo obtener el set de preguntas")}}async function yM(e){try{const t=Lt(mt(st,$c),dr("creadorId","==",e),Jt("fechaCreacion","desc")),n=(await Mr(t)).docs.map(l=>({id:l.id,...l.data()})),a=Lt(mt(st,"simce_evaluaciones"),dr("creadorId","==",e),Jt("fechaCreacion","desc")),o=(await Mr(a)).docs.map(l=>({id:l.id,...l.data(),preguntas:l.data().preguntas||[]}));return[...n,...o]}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function yce(e){try{if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Buscando sets para curso ${e}`),!e)return console.error("[DEBUG] obtenerSetsPreguntasPorCurso - Error: cursoId es undefined o vacío"),[];const t=Lt(mt(st,$c),dr("cursosAsignados","array-contains",e),Jt("fechaCreacion","desc"));console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en ${$c}:`,t);const r=await Mr(t);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en ${$c}: ${r.docs.length}`);const n=Lt(mt(st,"simce_evaluaciones"),dr("cursosAsignados","array-contains",e),Jt("fechaCreacion","desc"));console.log("[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en simce_evaluaciones:",n);const a=await Mr(n);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en simce_evaluaciones: ${a.docs.length}`);let s=[...r.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en ${$c}: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l}}),...a.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en simce_evaluaciones: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l,preguntas:l.preguntas||[]}})];if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Total sets combinados: ${s.length}`),!s.length){console.warn("[DEBUG] obtenerSetsPreguntasPorCurso - Sin resultados por query; aplicando fallback (getDocs + filtro cliente)");const[o,l]=await Promise.all([Mr(mt(st,$c)),Mr(mt(st,"simce_evaluaciones"))]),c=e;s=[...o.docs.map(u=>({id:u.id,...u.data()})).filter(u=>Array.isArray(u.cursosAsignados)&&u.cursosAsignados.includes(c)),...l.docs.map(u=>({id:u.id,...u.data(),preguntas:u.data().preguntas||[]})).filter(u=>Array.isArray(u.cursosAsignados)&&u.cursosAsignados.includes(c))],console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Fallback aplicó ${s.length} sets`)}return s}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function wce(e){try{if(!e)return[];const t=Lt(mt(st,$c),dr("estudiantesAsignados","array-contains",e),Jt("fechaCreacion","desc")),r=await Mr(t),n=Lt(mt(st,"simce_evaluaciones"),dr("estudiantesAsignados","array-contains",e),Jt("fechaCreacion","desc")),a=await Mr(n);return[...r.docs.map(s=>({id:s.id,...s.data()})),...a.docs.map(s=>({id:s.id,...s.data(),preguntas:s.data().preguntas||[]}))]}catch(t){return console.error("Error al obtener sets por estudiante:",t),[]}}async function Nce(e){try{await wa(Yt(st,$c,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function Ece(e){try{return(await on(mt(st,TN),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function Cce(e){try{const t=Lt(mt(st,TN),dr("setId","==",e),Jt("fechaEnvio","desc"));return(await Mr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function _ce(e,t){try{if(!t||t.length===0)return[];const r=10,n=[];for(let o=0;o<t.length;o+=r)n.push(t.slice(o,o+r));const a=[];for(const o of n){const l=Lt(mt(st,TN),dr("setId","==",e),dr("estudianteId","in",o)),c=await Mr(l);a.push(...c.docs.map(u=>({id:u.id,...u.data()})))}const s=new Map;for(const o of a)s.set(o.id,o);return Array.from(s.values())}catch(r){throw console.error("Error al obtener resultados por curso:",r),new Error("No se pudieron obtener los resultados del curso")}}async function Sce(e){try{const t=Lt(mt(st,TN),dr("estudianteId","==",e),Jt("fechaEnvio","desc"));return(await Mr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function sYe(e){try{await wa(Yt(st,TN,e))}catch(t){throw console.error("Error al eliminar resultado:",t),new Error("No se pudo eliminar el resultado")}}async function iYe(e,t){try{console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Buscando evaluaciones para estudiante ${e} en curso ${t}`);const n=(u=>{if(!u)return"";let d=u.trim().toLowerCase();return d=d.replace(/°/g,"º"),d=d.replace(/\s+(medio|básico|basico)/g,""),d=d.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),d=d.replace(/^(\d)(?![º])/,"$1º"),d=d.replace(/\s+/g,"").toUpperCase(),d})(t),[a,s]=await Promise.all([yce(n),wce(e)]),o=new Map;[...a,...s].forEach(u=>o.set(u.id,u));const l=Array.from(o.values());console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Encontradas ${l.length} evaluaciones asignadas al curso ${t}`);const c=l.map(u=>{const d={id:u.id,titulo:u.titulo,descripcion:u.descripcion||"",asignatura:u.asignatura,preguntas:[...u.preguntas],fechaAsignacion:u.fechaCreacion||new Date().toISOString(),textoBase:""},f=String(u.asignatura||"");if(f==="Competencia Lectora"||f==="Lectura"){let h="";for(const m of u.preguntas)if(m.textoBase&&m.textoBase.trim()){h=m.textoBase.trim(),console.log(`[DEBUG] Texto base encontrado en pregunta ${m.id}:`,h.substring(0,50)+"...");break}h&&d.preguntas.length>0&&(console.log(`[DEBUG] Asignando texto base a la evaluación y primera pregunta: ${u.id}`),d.textoBase=h,d.preguntas[0].textoBase=h)}return d});return console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Evaluaciones mapeadas: ${c.length}`),c}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function D2(e){var t,r;try{console.log(`[DEBUG] obtenerEvaluacionPorId - Buscando evaluación con ID: ${e}`);const n=await bce(e);if(n){console.log(`[DEBUG] obtenerEvaluacionPorId - Evaluación encontrada: ${n.titulo}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Asignatura: ${n.asignatura}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Cantidad de preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`);const a=n.preguntas.some(s=>s.textoBase);if(console.log(`[DEBUG] obtenerEvaluacionPorId - ¿Tiene texto base?: ${a}`),a){const s=n.preguntas.find(o=>o.textoBase);console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base encontrado en pregunta: ${s==null?void 0:s.id}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base (primeros 50 caracteres): ${(r=s==null?void 0:s.textoBase)==null?void 0:r.substring(0,50)}...`)}}else console.log(`[DEBUG] obtenerEvaluacionPorId - No se encontró evaluación con ID: ${e}`);return n||null}catch(n){return console.error("Error en obtenerEvaluacionPorId:",n),null}}async function kce(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeLogro||e.porcentajeAciertos||0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString()};return await Ece(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function jce(e,t){try{return(await Sce(e)).filter(a=>a.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function Bce(e){try{let t=[];try{t=await yM(e)}catch(r){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Falla query directa, intento fallback:",r)}if(!t.length){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Sin resultados, aplicando fallback (getDocs + filtro por creadorId)");const[r,n]=await Promise.all([Mr(mt(st,$c)),Mr(mt(st,"simce_evaluaciones"))]);t=[...r.docs.map(a=>({id:a.id,...a.data()})),...n.docs.map(a=>({id:a.id,...a.data(),preguntas:a.data().preguntas||[]}))].filter(a=>a.creadorId===e),console.log(`[DEBUG] obtenerEvaluacionesPorProfesor - Fallback encontró ${t.length} sets`)}return t.map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:r.preguntas,fechaCreacion:r.fechaCreacion||new Date().toISOString(),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function Tce(e){try{return await Cce(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function Ice(e,t){try{const r=v=>{if(!v)return"";let y=v.trim().toLowerCase();return y=y.replace(/°/g,"º"),y=y.replace(/\s+(medio|básico|basico)/g,""),y=y.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),y=y.replace(/^(\d)(?![º])/,"$1º"),y=y.replace(/\s+/g,"").toUpperCase(),y},n=r(t),s=(await ej()).filter(v=>v.profile==="ESTUDIANTE"&&r(v.curso||"")===n).map(v=>v.id);if(s.length===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const o=await _ce(e,s),l=o.length;if(l===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const c=o.map(v=>v.porcentajeAciertos||v.porcentajeLogro||0),u=c.reduce((v,y)=>v+y,0)/l;let d=0,f=0,h=0;c.forEach(v=>{v>=80?d++:v>=50?f++:h++});const m=d/l*100,g=f/l*100,x=h/l*100;return{totalEstudiantes:l,promedioLogro:u,nivelPredominante:m>=Math.max(g,x)?"Adecuado":g>=x?"Elemental":"Insuficiente",porcentajeAdecuado:m,porcentajeElemental:g,porcentajeInsuficiente:x,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}const QK=Object.freeze(Object.defineProperty({__proto__:null,actualizarSetPreguntas:aYe,crearSetPreguntas:nYe,eliminarResultado:sYe,eliminarSetPreguntas:Nce,guardarIntentoEvaluacion:kce,guardarResultadoIntento:Ece,obtenerEstadisticasPorCurso:Ice,obtenerEvaluacionPorId:D2,obtenerEvaluacionesEstudiante:iYe,obtenerEvaluacionesPorProfesor:Bce,obtenerIntentosPorEvaluacion:Tce,obtenerResultadosPorCurso:_ce,obtenerResultadosPorEstudiante:Sce,obtenerResultadosPorSet:Cce,obtenerSetPreguntas:bce,obtenerSetsPreguntasPorCurso:yce,obtenerSetsPreguntasPorEstudiante:wce,obtenerSetsPreguntasPorProfesor:yM,verificarIntentoExistente:jce},Symbol.toStringTag,{value:"Module"}));var HK;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(HK||(HK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VK;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(VK||(VK={}));var zK;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(zK||(zK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K=["user","model","function","system"];var GK;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(GK||(GK={}));var qK;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(qK||(qK={}));var KK;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(KK||(KK={}));var WK;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(WK||(WK={}));var P2;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(P2||(P2={}));var XK;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(XK||(XK={}));var YK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(YK||(YK={}));var JK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(JK||(JK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Vx extends sl{constructor(t,r){super(t),this.response=r}}class Fce extends sl{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class bm extends sl{}class Oce extends sl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oYe="https://generativelanguage.googleapis.com",lYe="v1beta",cYe="0.24.1",uYe="genai-js";var Rg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Rg||(Rg={}));class dYe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||lYe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||oYe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function fYe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${uYe}/${cYe}`),t.join(" ")}async function AYe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",fYe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new bm(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new bm(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new bm(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function hYe(e,t,r,n,a,s){const o=new dYe(e,t,r,n,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},xYe(s)),{method:"POST",headers:await AYe(o),body:a})}}async function IN(e,t,r,n,a,s={},o=fetch){const{url:l,fetchOptions:c}=await hYe(e,t,r,n,a,s);return mYe(l,c,o)}async function mYe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){pYe(a,e)}return n.ok||await gYe(n,e),n}function pYe(e,t){let r=e;throw r.name==="AbortError"?(r=new Oce(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Fce||e instanceof bm||(r=new sl(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function gYe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new Fce(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function xYe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),F5(e.candidates[0]))throw new Vx(`${G0(e)}`,e);return vYe(e)}else if(e.promptFeedback)throw new Vx(`Text not available. ${G0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),F5(e.candidates[0]))throw new Vx(`${G0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ZK(e)[0]}else if(e.promptFeedback)throw new Vx(`Function call not available. ${G0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),F5(e.candidates[0]))throw new Vx(`${G0(e)}`,e);return ZK(e)}else if(e.promptFeedback)throw new Vx(`Function call not available. ${G0(e)}`,e)},e}function vYe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function ZK(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const bYe=[P2.RECITATION,P2.SAFETY,P2.LANGUAGE];function F5(e){return!!e.finishReason&&bYe.includes(e.finishReason)}function G0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];F5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function Ow(e){return this instanceof Ow?(this.v=e,this):new Ow(e)}function yYe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(h){n[h]&&(a[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||l(h,m)})})}function l(h,m){try{c(n[h](m))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof Ow?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function wYe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=CYe(t),[n,a]=r.tee();return{stream:EYe(n),response:NYe(a)}}async function NYe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return wM(_Ye(t));t.push(a)}}function EYe(e){return yYe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Ow(r.read());if(a)break;yield yield Ow(wM(n))}})}function CYe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:o,done:l})=>{if(l){if(a.trim()){n.error(new sl("Failed to parse stream"));return}n.close();return}a+=o;let c=a.match(eW),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new sl(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(eW)}return s()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new Oce("Request aborted when reading from the stream"):l=new sl("Error reading from the stream"),l})}}})}function _Ye(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const o={};for(const l of s.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[a].content.parts.push(o)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dce(e,t,r,n){const a=await IN(t,Rg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return wYe(a)}async function Pce(e,t,r,n){const s=await(await IN(t,Rg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:wM(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rce(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Dw(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return SYe(t)}function SYe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new sl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new sl("No content is provided for sending chat message.");return n?t:r}function kYe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new bm("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Dw(e);n.contents=[s]}return{generateContentRequest:n}}function tW(e){let t;return e.contents?t=e:t={contents:[Dw(e)]},e.systemInstruction&&(t.systemInstruction=Rce(e.systemInstruction)),t}function jYe(e){return typeof e=="string"||Array.isArray(e)?{content:Dw(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],BYe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function TYe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new sl(`First content should be with role 'user', got ${n}`);if(!$K.includes(n))throw new sl(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify($K)}`);if(!Array.isArray(a))throw new sl("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new sl("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of rW)c in l&&(s[c]+=1);const o=BYe[n];for(const l of rW)if(!o.includes(l)&&s[l]>0)throw new sl(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function nW(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW="SILENT_ERROR";class IYe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(TYe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=Dw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>Pce(this._apiKey,this.model,d,f)).then(m=>{var g;if(nW(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=G0(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=Dw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=Dce(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(aW)}).then(m=>m.response).then(m=>{if(nW(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=G0(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==aW&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FYe(e,t,r,n){return(await IN(t,Rg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OYe(e,t,r,n){return(await IN(t,Rg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function DYe(e,t,r,n){const a=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await IN(t,Rg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Rce(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=tW(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Pce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=tW(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Dce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new IYe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=kYe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return FYe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=jYe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return OYe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return DYe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new sl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new sW(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new bm("Cached content must contain a `name` field.");if(!t.model)throw new bm("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const o of a)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new bm(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new sW(this.apiKey,s,n)}}const PYe=[{model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],Lce=()=>(console.warn("No se encontró la API key de Gemini"),null);async function RYe(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function Pw(){const e=Lce();if(!e)return null;for(const t of PYe){const r=await RYe(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function Mce(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function LYe(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function MYe(e,t=3){var n;const r=await Pw();if(!r)return MI(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,o=(await r.generateContent(a)).response.text(),l=Mce(o);return(n=l==null?void 0:l.preguntas)!=null&&n.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),MI(e,t))}catch(a){return console.error("Error al generar preguntas:",a),MI(e,t)}}async function UYe(e,t=30){var n;const r=await Pw();if(!r)return UI(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,l=(await r.generateContent(s)).response.text(),c=Mce(l);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),UI(e))}catch(a){return console.error("Error al analizar respuestas:",a),UI(e)}}function MI(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:LYe(r).slice(0,4)}))}function UI(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}async function QYe(){const e=Lce();if(!e)return null;const t={model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),Pw()}}async function HYe(e,t=2,r=!0){const n=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generación con IA. Prompt: "${n}"`),console.log(`Configuración: maxRetries=${t}, useProModel=${r}`);let a;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),a=await QYe(),a||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),a=await Pw())):a=await Pw(),!a)throw console.error("No se pudo inicializar ningún modelo de Gemini"),new Error("No se encontró un modelo de Gemini disponible. Verifique su conexión a internet y la API key.")}catch(u){throw console.error("Error al inicializar modelo de Gemini:",u),new Error(`Error al inicializar el modelo de IA: ${u.message}`)}let s=0,o,l="",c=0;for(;s<=t;){try{console.log(`Intento ${s+1}/${t+1} de generación con IA`);const u=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser válido y parseable.`,d=await a.generateContent(u);if(d!=null&&d.response&&typeof d.response.text=="function"){const f=d.response.text();if(f&&f.length>100){if(console.log(`Respuesta generada exitosamente (${f.length} caracteres)`),f.includes("{")&&f.includes("}")||f.includes("[")&&f.includes("]"))return console.log("La respuesta contiene estructuras JSON"),f;if(console.warn("La respuesta no parece contener JSON válido"),f.length>c&&(l=f,c=f.length),s===t)return console.log("Usando la mejor respuesta disponible en el último intento"),l}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(d){const f=typeof d=="string"?d:JSON.stringify(d);return console.warn("Formato de respuesta inesperado, usando fallback a string"),f}else console.warn("No se recibió respuesta válida del modelo")}catch(u){console.error(`Error en intento ${s+1}:`,u),o=u,u.message&&(u.message.includes("token")||u.message.includes("length")||u.message.includes("limit"))&&(console.log("Error relacionado con límites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(s++,s<=t){const u=Math.min(1e3*Math.pow(2,s),8e3);console.log(`Esperando ${u}ms antes de reintentar...`),await new Promise(d=>setTimeout(d,u))}}if(l)return console.log("Devolviendo la mejor respuesta disponible después de agotar reintentos"),l;throw console.error(`Todos los intentos de generación fallaron después de ${t+1} intentos`),o||new Error("No se pudo generar contenido después de múltiples intentos. Por favor, intente nuevamente.")}function VYe(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por límite de tamaño]`),t}async function zYe(e,t){try{let r;typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=VYe(r.textoProporcionado)));const n=r.cantidad??4,a=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${n} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const s=$Ye(r,n,a);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await HYe(s,2,!0);if(!o)throw console.error("La IA no devolvió respuesta"),new Error("No se recibió respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),qYe(o,n,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurrió un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function $Ye(e,t,r){const n=e.asignatura,s=(e.nivel||"1M")==="1M"?"1º medio":"2º medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedagógico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${n}" para nivel ${s} (Chile).`),n==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const u=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const d=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;d?(c.push(`
- IMPORTANTE: Utilizarás EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa únicamente el texto que se proporciona más adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizarás el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensión: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+s),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer ítem solamente'))}else if(n==="Matemática"){c.push(`
ESPECIFICACIONES PARA MATEMÁTICA:`);const u=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Números","Álgebra y Funciones","Geometría","Probabilidad y Estadística"];c.push(`- Ejes temáticos a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemáticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizarás el texto proporcionado por el usuario como contexto o referencia para generar problemas matemáticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN ÚNICO bloque JSON (sin texto adicional antes o después)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificación detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),n==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aquí (solo en el primer ítem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estándar curricular específico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigüedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedagógica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores típicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currículum chileno para "+s+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y español chileno estándar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECÍFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus ítems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&n==="Lectura"){const u=!!e.textoProporcionado,d=u?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(d);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas ÚNICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),u&&(c.push("- Este es un texto proporcionado por el usuario, asegúrate de formular preguntas relevantes y precisas."),n==="Matemática"&&(c.push("- Para matemáticas, extrae datos numéricos y situaciones del texto para formular problemas matemáticos relacionados."),c.push("- Cuando sea relevante, inventa datos numéricos coherentes con la situación para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function iW(e){if(!e)return e;try{const t=["como","así","también","según","véase","ejemplo"];let r=e;return t.forEach(n=>{const a=new RegExp(`"([^"]*)"${n}"([^"]*)"`,"g");r=r.replace(a,`"$1\\"${n}\\"$2"`)}),r=r.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),r=r.replace(/,(\s*[\]}])/g,"$1"),r}catch(t){return console.log("Error al corregir problemas comunes:",t),e}}function GYe(e){if(!e||typeof e!="string")return console.error("Texto de entrada inválido:",e),null;console.log("Iniciando extracción JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{e=iW(e)}catch(t){console.log("Error durante pre-procesamiento de palabras problemáticas:",t)}try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de código potenciales`);for(const r of t){const n=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de código: ${n.substring(0,50)}...`);const a=iW(n),s=zx(a);try{return JSON.parse(s),console.log("JSON válido extraído del bloque de código"),s}catch{console.log("JSON en este bloque de código es inválido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de código:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=zx(t[1].trim());try{return JSON.parse(r),console.log("JSON completo válido encontrado directamente"),r}catch{console.log("JSON completo parece inválido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const n=e.lastIndexOf("]");let a;if(n>t)a=e.substring(t,n+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,u="";for(;(l=o.exec(e))!==null;)c=l.index,u=l[0];if(console.log(`Última pregunta encontrada: ${u} en posición ${c}`),c>0){let d=e.indexOf('"id":',c+u.length);d===-1?d=e.length:(d=e.lastIndexOf("}",d),d===-1?d=e.length:d+=1),a=e.substring(t,d)+"]"}else a=e.substring(t)+"]"}const s=zx(a);try{return JSON.parse(s),console.log("JSON reconstruido desde inicio del array"),s}catch{console.log("JSON reconstruido inválido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstrucción desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let n=r[0];if(n.includes('"alternativas"')&&n.includes('"id": "A"')){const a=["A","B","C","D"],s=[];for(const o of a)n.includes(`"id": "${o}"`)&&s.push(o);if(console.log(`Alternativas encontradas en p1: ${s.join(", ")}`),s.length>0){const o=n.indexOf('"alternativas"');if(!n.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let d=-1,f="";for(const h of s){const m=n.lastIndexOf(`"id": "${h}"`);m>d&&(d=m,f=h)}if(d!==-1){console.log(`Última alternativa completa: ${f}`);const h=n.indexOf("}",d);h!==-1&&(n=n.substring(0,h+1),n.includes("]}")||(n+="]}"))}}let c=`[${n}]`;const u=zx(c);try{return JSON.parse(u),console.log("Primera pregunta reconstruida con éxito"),u}catch(d){console.log("Error al parsear primera pregunta reconstruida:",d)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extracción quirúrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let n="A";const a=e.match(/"respuesta"\s*:\s*"([A-D])"/);a&&a[1]&&(n=a[1]);let s="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(s=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="A"}, "explicacion": "${n==="A"?s:""}"},
          {"id": "B", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="B"}, "explicacion": "${n==="B"?s:""}"},
          {"id": "C", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="C"}, "explicacion": "${n==="C"?s:""}"},
          {"id": "D", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="D"}, "explicacion": "${n==="D"?s:""}"}
        ],
        "respuesta": "${n}",
        "explicacion": "${s}",
        "habilidad": "Recuperación parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=zx(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extracción quirúrgica:",t)}try{return console.log("Construyendo JSON mínimo de respaldo..."),zx(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opción no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parámetros."
    }]`)}catch(t){console.error("Error final en construcción de JSON de respaldo:",t)}return console.error("Todos los métodos de extracción JSON fallaron"),null}function zx(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const h=e.lastIndexOf("{"),m=e.lastIndexOf("}");if(h>m)return console.log("JSON truncado con objeto incompleto al final"),!0;const g=(_,O)=>(_.match(new RegExp("\\"+O,"g"))||[]).length,x=g(e,"{"),v=g(e,"}"),y=g(e,"["),w=g(e,"]");return x!==v||y!==w?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:x,llaveCerradas:v,corcheteAbiertos:y,corcheteCerrados:w}),!0):!1},n=[];for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m<32&&m!==9&&m!==10&&m!==13&&n.push({posicion:h,codigo:m,contexto:e.substring(Math.max(0,h-15),h)+"|PROBLEMA|"+e.substring(h+1,h+15)})}n.length>0&&(console.log(`Detectados ${n.length} caracteres de control problemáticos`),n.slice(0,3).forEach(h=>{console.log(`Carácter de control en posición ${h.posicion}, código U+${h.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${h.contexto}`)})),e=e.replace(/^\uFEFF/,"");let a="";for(let h=0;h<e.length;h++){const m=e.charCodeAt(h);m>=32&&m<=126||m>=128&&m<=255||m===9||m===10||m===13?a+=e[h]:a+=" "}if(e=a,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const h=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(h){let m=h[0];if(m.includes('"enunciado"')&&m.includes('"alternativas"')&&!m.includes('"}]}')&&(m.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let x=-1,v=-1,y=0;for(;(v=m.indexOf(`"id": "${String.fromCharCode(65+y)}"`,v+1))!==-1&&(x=v,y++,!(y>=4)););if(x!==-1){const w=m.indexOf("}",x);if(w!==-1){let _=m.substring(0,w+1);_+=" ] }",e=`[ ${_} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let s="",o=!1,l=!1;for(let h=0;h<e.length;h++){const m=e[h],g=e.charCodeAt(h);o?l?(s+=m,l=!1):m==="\\"?(s+=m,l=!0):m==='"'?(s+=m,o=!1):g<32?(s+="\\u"+("0000"+g.toString(16)).slice(-4),console.log(`Escapado carácter de control en posición ${h}: U+${g.toString(16).padStart(4,"0")}`)):m==='"'&&e[h-1]!=="\\"?(s+='\\"',console.log(`Escapada comilla sin escapar en posición ${h}`)):s+=m:(m==='"'&&!o&&(o=!0),s+=m)}e=s,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(h,m,g,x)=>": "+g+x),["explicacion","explanation","texto","textoBase","enunciado","habilidad","eje","estandarAprendizaje"].forEach(h=>{const m=new RegExp(`"${h}"\\s*:\\s*"([^"]*)"`,"g");e=e.replace(m,(g,x)=>{const v=x.replace(/"/g,'\\"');return`"${h}": "${v}"`})}),e=e.replace(/"([^"]*)"([^"]*)"([^"]*)"/g,(h,m,g,x)=>g.trim().length<15&&(g.includes("como")||g.includes("así")||g.includes("también")||g.includes("según"))?`"${m}\\"${g}\\"${x}"`:h),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const d=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(d){const h=e.indexOf(d[0])+d[0].length;e=e.substring(0,h)+" }"+e.substring(h),console.log("Reparado cierre de alternativa")}const f=h=>{if(e.length>=h+10){const m=e.substring(Math.max(0,h-20),Math.min(e.length,h+20));console.log(`Verificando contexto alrededor de posición ${h}: "${m}"`);const g=[];for(let x=Math.max(0,h-5);x<Math.min(e.length,h+5);x++)g.push({pos:x,char:e[x],code:e.charCodeAt(x),hex:e.charCodeAt(x).toString(16).padStart(4,"0")});console.log("Análisis de caracteres alrededor de posición específica:"),g.forEach(x=>{console.log(`Pos ${x.pos}: "${x.char}" (U+${x.hex})`)})}};f(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(h,m)=>`"textoBase": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(h,m)=>`"explicacion": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio válido")}catch(h){console.log("JSON sigue siendo inválido después de limpieza, intentando reparación más agresiva"),console.error("Error específico:",h.message);try{if(h.message&&h.message.includes("position")){const x=h.message.match(/position (\d+)/);if(x){const v=parseInt(x[1]);console.log(`Error en posición específica: ${v}`);const y=e.substring(Math.max(0,v-30),Math.min(e.length,v+30));if(console.log(`Contexto del error: "${y}"`),v===392||v>380&&v<400){console.log("¡Detectado el error típico en posición ~392! Aplicando corrección específica..."),f(v);try{const w=e.lastIndexOf('"',v),_=e.indexOf('"',v);if(w!==-1&&_!==-1){const O=e.substring(0,w+1),j=e.substring(_);e=O+"Contenido reemplazado debido a caracteres de control"+j,console.log("Aplicada corrección específica para error en posición 392");try{return JSON.parse(e),console.log("Corrección específica exitosa"),e}catch{console.log("La corrección específica falló, continuando...")}}}catch(w){console.log("Error durante corrección específica:",w)}}if(y.includes('"textoBase"')||y.includes('"explicacion"')){const w=e.lastIndexOf('"',v)+1,_=e.indexOf('"',v);if(w>=0&&_>=0){const O=e.substring(w,_),j=O.substring(0,Math.min(100,O.length));e=e.substring(0,w)+j+e.substring(_),console.log("Aplicada reparación de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparación exitosa por truncado de contenido"),e}catch{console.log("Reparación por truncado falló, continuando con reconstrucción completa")}}}}}const m=e.match(/"id"\s*:\s*"([^"]*)"/),g=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(m&&g){const x=m[1],v=g[1],y=v.length>150?v.substring(0,150)+"...":v;console.log(`Reconstruyendo con id="${x}" y enunciado="${y.substring(0,30)}..."`);const w=`[{
          "id": "${x}",
          "enunciado": "${y}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automáticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(w),console.log("Generada versión de emergencia del JSON"),e=w}catch{console.log("Error al parsear JSON de emergencia, creando versión básica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generación."},
              {"id": "B", "texto": "Opción B", "esCorrecta": false},
              {"id": "C", "texto": "Opción C", "esCorrecta": false},
              {"id": "D", "texto": "Opción D", "esCorrecta": false}
            ],
            "habilidad": "Diagnóstico",
            "estandarAprendizaje": "Error en generación"
          }]`}}else console.log("No se encontraron datos mínimos para reconstrucción, usando JSON de fallback mínimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parámetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnóstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(m){console.log("Error durante la reconstrucción manual:",m),e=`[{
        "id": "p1",
        "enunciado": "Error crítico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error técnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opción B", "esCorrecta": false},
          {"id": "C", "texto": "Opción C", "esCorrecta": false},
          {"id": "D", "texto": "Opción D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(h){console.error("JSON final sigue siendo inválido:",h),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function qYe(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA inválida:",e),new Error("No se recibió una respuesta válida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const n=GYe(e);if(!n)return console.error("No se pudo extraer JSON de la respuesta después de múltiples intentos"),_y(1,"La IA generó una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extraído correctamente, intentando parsear...");let a;try{a=JSON.parse(n),console.log("JSON parseado correctamente:",typeof a,Array.isArray(a)?a.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",n.substring(0,200)),console.log("Intentando reparación de emergencia del JSON...");try{const c=n.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const u=c[0].endsWith("]")?c[0]:c[0]+"]";a=JSON.parse(u),console.log("Reparación parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo después de error de parseo final"),_y(1,"La IA generó una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parámetros.")}}if(!Array.isArray(a))if(console.log("La respuesta no es un array, encapsulándola"),typeof a=="object"&&a!==null)a=[a];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof a),_y(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(a=a.filter(l=>l&&typeof l=="object"),a.length===0)return console.error("No se encontraron preguntas válidas después de filtrar"),_y(1,"No se pudieron extraer preguntas válidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${a.length} preguntas para procesar`),a.length<t&&(console.warn(`⚠️ Solo se generaron ${a.length} preguntas de ${t} solicitadas. Intentando re-generación automática.`),a.length===1&&t>1&&r&&r.asignatura&&console.log("Detectado problema de generación parcial. Intentando recuperar más preguntas..."));let s;r!=null&&r.textoProporcionado?(s=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):a.length>0&&a[0].textoBase?(s=a[0].textoBase,console.log("Se encontró textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(s=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=a.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto válido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontró enunciado para la pregunta ${c+1}`)}let u=Array.isArray(l.alternativas)?l.alternativas:[];u.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?u=l.opciones:l.options&&Array.isArray(l.options)?u=l.options:u=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),u.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),u=[{id:"A",texto:"Opción A (generada automáticamente)",esCorrecta:!0},{id:"B",texto:"Opción B (generada automáticamente)",esCorrecta:!1},{id:"C",texto:"Opción C (generada automáticamente)",esCorrecta:!1},{id:"D",texto:"Opción D (generada automáticamente)",esCorrecta:!1}]);const d=u.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let w=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(w=!0);const _=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return _&&(_===y||_===x||_===x+1||_===(x+1).toString())&&(w=!0),{id:y,texto:v,esCorrecta:w,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(d.length===0&&(console.warn("No hay alternativas válidas después de filtrar, creando por defecto"),d.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));d.length<4;){const g=String.fromCharCode(65+d.length);console.log(`Agregando alternativa ${g} faltante`),d.push({id:g,texto:`Alternativa ${g} (agregada automáticamente)`,esCorrecta:!1})}d.length>4&&(console.log(`Demasiadas alternativas (${d.length}), conservando solo 4`),d.splice(4)),d.some(g=>g.esCorrecta)||(console.log("No se encontró alternativa marcada como correcta, marcando la primera"),d[0].esCorrecta=!0);const f=d.find(g=>g.esCorrecta),h=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return h&&f&&!f.explicacion&&(f.explicacion=h),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:d,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?s:void 0,createdAt:ya(),dificultad:l.dificultad||l.difficulty||"media"}}catch(u){return console.error(`Error procesando pregunta ${c+1}:`,u),KYe(c+1)}});return console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o}catch(n){return console.error("Error general en procesarRespuestaIA:",n),_y(t,"Ocurrió un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function KYe(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación con el modelo Pro."},{id:"B",texto:"Modificar parámetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:ya(),dificultad:"media"}}function _y(e,t){const r=[];for(let n=0;n<e;n++)r.push({id:`p${n+1}`,enunciado:n===0?t:`Pregunta ${n+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación."},{id:"B",texto:"Modificar parámetros de generación",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnóstico",estandarAprendizaje:"Error en generación",createdAt:ya(),dificultad:"media"});return r}async function WYe(e){try{const t=Z0(),r=Td(t,"generarPreguntasSimce");console.log("Llamando a Cloud Function para generar preguntas SIMCE...");const n=await r({options:e}),{preguntas:a,textoBase:s}=n.data;if(!a||!Array.isArray(a)||a.length===0)throw new Error("La respuesta no contiene preguntas válidas");return console.log(`Se generaron ${a.length} preguntas correctamente mediante Cloud Function`),s&&a.length>0&&(a[0].textoBase=s),a}catch(t){throw console.error("Error al generar preguntas SIMCE mediante Cloud Function:",t),t}}const Uce=({content:e,context:t="unknown"})=>{if(typeof e=="string")return/<[a-z][\s\S]*>/i.test(e)?i.jsx("span",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}}):i.jsx("span",{className:"whitespace-pre-wrap",children:e});if(ot.isValidElement(e))return e;try{return i.jsx("span",{children:JSON.stringify(e)})}catch{return i.jsx("span",{children:"[Sin contenido disponible]"})}},Rc=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},XYe=e=>{for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null},YYe=(e,t)=>t.trim()?e.map((r,n)=>n===0?{...r,textoBase:t.trim()}:r):e,JYe=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState("lista"),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState("todas"),[m,g]=N.useState(!1),[x,v]=N.useState({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,w]=N.useState(!1),[_,O]=N.useState(null),[j,B]=N.useState([]),[C,k]=N.useState([]),[T,L]=N.useState(""),[R,S]=N.useState(!1),[U,Q]=N.useState(null),[X,z]=N.useState(null),[W,G]=N.useState([]);N.useEffect(()=>{(async()=>{try{a(!0);const ye=await yM(e.id||"");r(ye);const Le=await ej();G(Le);const Qe=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(we=>Qe.add(Rc(we))):ks.forEach(we=>Qe.add(Rc(we))),Le.filter(we=>we.profile==="ESTUDIANTE"&&we.curso).forEach(we=>{we.curso&&(we.curso=Rc(we.curso),Qe.add(we.curso))});const ue=Array.from(Qe).sort().map(we=>({id:we,nombre:Y(we)}));B(ue)}catch(ye){console.error("Error al cargar datos iniciales:",ye),O("No se pudieron cargar los datos necesarios")}finally{a(!1)}})()},[e]);const Y=fe=>{const ye=fe.match(/^(\d+)º?([A-E])$/i);if(ye){const Le=ye[1],Qe=ye[2].toUpperCase();return`${Le}º Medio ${Qe}`}return fe};N.useEffect(()=>{k(T?j.filter(fe=>fe.nombre.toLowerCase().includes(T.toLowerCase())):[])},[T,j]);const K=()=>t.filter(fe=>{const ye=fe.titulo.toLowerCase().includes(u.toLowerCase()),Le=f==="todas"||fe.asignatura===f;return ye&&Le}),H=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),Q(null),z(null),te(fe=>({...fe,textoProporcionado:""})),o("detalle")},F=fe=>{g(!0),c(fe),v({...fe}),o("detalle")},D=async fe=>{if(window.confirm(`¿Estás seguro de eliminar el set "${fe.titulo}"? Esta acción no se puede deshacer.`))try{await Nce(fe.id),r(ye=>ye.filter(Le=>Le.id!==fe.id))}catch(ye){console.error("Error al eliminar set:",ye),O("No se pudo eliminar el set de preguntas")}},q=async()=>{try{if(!x.titulo){O("El título de la evaluación es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){O("Debes agregar al menos una pregunta");return}const fe=(x.cursosAsignados||[]).map(Rc),ye=fe.length>0;a(!0);let Le=[];ye&&(Le=W.filter(nt=>nt.profile==="ESTUDIANTE"&&nt.curso&&fe.includes(Rc(nt.curso))).map(nt=>nt.id));const Qe={...x,cursosAsignados:fe,estudiantesAsignados:Le};let ue="";const{collection:we,addDoc:De,updateDoc:He,doc:Ye}=await Ti(async()=>{const{collection:nt,addDoc:bt,updateDoc:Bt,doc:xt}=await Promise.resolve().then(()=>ub);return{collection:nt,addDoc:bt,updateDoc:Bt,doc:xt}},void 0),{db:tt}=await Ti(async()=>{const{db:nt}=await Promise.resolve().then(()=>pR);return{db:nt}},void 0),ft="simce_evaluaciones";console.log("[DEBUG] Guardando evaluación:",Qe);try{if(l&&l.id){const nt=Ye(tt,ft,l.id),{getDoc:bt,deleteDoc:Bt}=await Ti(async()=>{const{getDoc:xr,deleteDoc:Xt}=await Promise.resolve().then(()=>ub);return{getDoc:xr,deleteDoc:Xt}},void 0),xt=await bt(nt);if(console.log("[DEBUG] Documento a editar existe en simce_evaluaciones:",xt.exists()),xt.exists())await He(nt,Qe),ue=l.id,console.log("[DEBUG] Evaluación actualizada en simce_evaluaciones:",ue);else{ue=(await De(we(tt,ft),Qe)).id,console.log("[DEBUG] Evaluación migrada a simce_evaluaciones:",ue);const Xt=Ye(tt,"simce_sets",l.id),Gr=await bt(Xt);console.log("[DEBUG] Documento antiguo existe en simce_sets:",Gr.exists()),Gr.exists()&&(await Bt(Xt),console.log("[DEBUG] Documento antiguo eliminado de simce_sets:",l.id))}}else ue=(await De(we(tt,ft),Qe)).id,console.log("[DEBUG] Evaluación nueva creada en simce_evaluaciones:",ue)}catch(nt){throw console.error("[ERROR] Guardando evaluación:",nt),nt}const $e={id:ue,...Qe};r(nt=>[$e,...nt]),ie({tipo:"success",mensaje:ye?`Evaluación guardada y asignada a ${fe.length} curso${fe.length!==1?"s":""} correctamente`:"Evaluación guardada correctamente"}),setTimeout(()=>{ie({tipo:"",mensaje:""})},3e3),g(!1),o("lista"),O(null)}catch(fe){console.error("Error al guardar evaluación:",fe),O("No se pudo guardar la evaluación"),ie({tipo:"error",mensaje:"Ocurrió un error al guardar la evaluación"}),setTimeout(()=>{ie({tipo:"",mensaje:""})},3e3)}finally{a(!1)}},[J,te]=N.useState({cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar información":!0,"Relacionar información":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Números:!0,"Álgebra y Funciones":!0,Geometría:!0,"Probabilidad y Estadística":!0}}),[ne,ie]=N.useState({tipo:"",mensaje:""}),oe=async()=>{var fe,ye,Le,Qe,ue;try{if(!x.asignatura){O("Seleccione una asignatura para generar preguntas");return}w(!0),O(null),ie({tipo:"",mensaje:""});let we,De;x.asignatura==="Competencia Lectora"?(we=Object.entries(J.habilidadesLectura).filter(([$e,nt])=>nt).map(([$e])=>$e),we.length===0&&(we=["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Pensamiento Lógico"&&(De=Object.entries(J.ejesMatematica).filter(([$e,nt])=>nt).map(([$e])=>$e),De.length===0&&(De=["Números","Álgebra y Funciones","Geometría","Probabilidad y Estadística"])),ie({tipo:"warning",mensaje:`Generando ${J.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const Ye={asignatura:x.asignatura.toLowerCase().replace(/á/g,"a").replace(/é/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n").replace(/\s+/g," ").trim(),cantidad:parseInt(J.cantidadPreguntas),opcionesPorPregunta:4,habilidadesLectura:we,ejesMatematica:De,dificultad:J.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((fe=J.textoProporcionado)==null?void 0:fe.trim())||void 0};let tt,ft=[];try{if(console.log("Intentando generar preguntas usando Cloud Function..."),ft.push("Cloud Function"),tt=await WYe(Ye),!Array.isArray(tt)||tt.length===0)throw new Error("La respuesta de Cloud Function no es válida");tt.forEach(($e,nt)=>{if(!$e.enunciado||!Array.isArray($e.alternativas)||$e.alternativas.length!==4)throw new Error(`Pregunta ${nt+1} tiene estructura inválida`)})}catch($e){console.error("Error con Cloud Function:",$e);try{if(console.log("Usando generación local como respaldo..."),ft.push("Local"),ie({tipo:"warning",mensaje:"Usando generación local como respaldo. Procesando..."}),tt=await zYe(Ye),!Array.isArray(tt)||tt.length===0)throw new Error("La generación local no produjo resultados válidos");tt.forEach((nt,bt)=>{if(!nt.enunciado||!Array.isArray(nt.alternativas)||nt.alternativas.length!==4)throw new Error(`Pregunta ${bt+1} generada localmente tiene estructura inválida`)})}catch(nt){console.error("Error con generación local:",nt);const bt=[];throw(ye=$e.message)!=null&&ye.includes("JSON")&&bt.push("Problema de formato en servidor remoto"),(Le=nt.message)!=null&&Le.includes("JSON")&&bt.push("Problema de formato en generación local"),new Error(`No se pudieron generar preguntas con ningún método (intentos: ${ft.join(", ")}). Errores: ${bt.join(", ")||"Problemas de conexión o formato"}. Por favor, intente nuevamente o genere preguntas manualmente.`)}}if(!tt||tt.length===0)throw new Error("No se generaron preguntas válidas después de todos los intentos");if(x.asignatura==="Competencia Lectora"){let $e=(Qe=J.textoProporcionado)==null?void 0:Qe.trim();$e||($e=(ue=tt[0].textoBase)==null?void 0:ue.trim()),$e||($e="Texto de comprensión generado automáticamente."),tt[0].textoBase=$e,console.log("[DEBUG] Texto base final asignado a la primera pregunta:",$e.substring(0,50)+"...")}v($e=>({...$e,preguntas:[...$e.preguntas||[],...tt]})),ie({tipo:"success",mensaje:`¡Se generaron ${tt.length} preguntas correctamente usando ${ft[ft.length-1]}!`}),setTimeout(()=>{ie({tipo:"",mensaje:""})},5e3)}catch(we){console.error("Error general al generar preguntas:",we);let De="No se pudieron generar las preguntas.";we instanceof Error&&(we.message.includes("JSON")?De="Hubo un problema con el formato de las respuestas del servidor. Esto puede deberse a sobrecarga del sistema de IA. Intente nuevamente en unos minutos.":we.message.includes("red")||we.message.includes("network")?De="Problema de conexión. Verifique su conexión a internet e intente nuevamente.":we.message.length>10&&(De=we.message)),O(De),ie({tipo:"error",mensaje:De+" Puede agregar preguntas manualmente como alternativa."}),setTimeout(()=>{ie({tipo:"",mensaje:""})},8e3)}finally{w(!1)}},de=fe=>{z({...fe})},ke=()=>{var Qe,ue;if(!X)return;if(!X.enunciado){O("El enunciado de la pregunta es obligatorio");return}if(!X.alternativas.find(we=>we.esCorrecta)){O("Debe marcar una alternativa como correcta");return}if(X.alternativas.filter(we=>!we.texto).length>0){O("Todas las alternativas deben tener texto");return}const Le=X.textoBase&&x.asignatura==="Competencia Lectora";if(X.id.startsWith("p"))if(Le){console.log("Nueva pregunta con texto base detectado:",X.textoBase);const we=[...x.preguntas||[]];v(De=>({...De,preguntas:[X,...we]}))}else v(we=>({...we,preguntas:[...we.preguntas||[],X]}));else if(Le){console.log("Actualizando pregunta con texto base:",X.textoBase);const we=((Qe=x.preguntas)==null?void 0:Qe.map(De=>De.id===X.id?X:De))||[];if(X===((ue=x.preguntas)==null?void 0:ue[0])){const De=X.textoBase||"",He=YYe(we,De);v(Ye=>({...Ye,preguntas:He}))}else v(De=>({...De,preguntas:we}))}else v(we=>{var De;return{...we,preguntas:((De=we.preguntas)==null?void 0:De.map(He=>He.id===X.id?X:He))||[]}});z(null),O(null)},ae=fe=>{v(ye=>{var Le;return{...ye,preguntas:((Le=ye.preguntas)==null?void 0:Le.filter(Qe=>Qe.id!==fe))||[]}})},Oe=fe=>{const ye=Rc(fe);v(Le=>{const Qe=(Le.cursosAsignados||[]).map(Rc);return Qe.includes(ye)?{...Le,cursosAsignados:Qe.filter(ue=>ue!==ye)}:{...Le,cursosAsignados:[...Qe,ye]}})},Te=()=>{const fe=K();return n?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gm,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(t1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:ye=>d(ye.target.value)})]}),i.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:ye=>h(ye.target.value),children:[i.jsx("option",{value:"todas",children:"Todas las asignaturas"}),i.jsx("option",{value:"Competencia Lectora",children:"Competencia Lectora"}),i.jsx("option",{value:"Pensamiento Lógico",children:"Pensamiento Lógico"})]})]}),i.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[i.jsx(So,{className:"w-4 h-4"}),"Nueva evaluación"]})]}),i.jsx("div",{className:"space-y-4",children:fe.length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(fR,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas aún. Crea tu primera evaluación SIMCE."}),(u||f!=="todas")&&i.jsx("button",{onClick:()=>{d(""),h("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):fe.map(ye=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-3 ${ye.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:ye.asignatura==="Competencia Lectora"?i.jsx(vi,{className:"w-5 h-5"}):i.jsx(cR,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:ye.titulo}),ye.descripcion&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:ye.descripcion}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[ye.preguntas.length," preguntas"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:ye.asignatura}),ye.cursosAsignados&&ye.cursosAsignados.length>0&&i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[i.jsx(ro,{className:"w-3 h-3"}),ye.cursosAsignados.length," ",ye.cursosAsignados.length===1?"curso":"cursos"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:new Date(ye.fechaCreacion).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(ye),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:i.jsx(Nte,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>F(ye),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluación",children:i.jsx(ih,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>D(ye),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluación",children:i.jsx(Va,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===ye.id&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[ye.asignatura==="Competencia Lectora"&&(()=>{const Le=XYe(ye.preguntas);return Le?i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx(Uce,{content:Le,context:"simce-texto-base"})})]}):null})(),i.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[i.jsx("span",{className:"mr-2",children:"❓"}),"Preguntas (",ye.preguntas.length,")"]}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:ye.preguntas.map((Le,Qe)=>{var ue,we;return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("p",{className:"font-medium",children:[i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2 rounded-md text-sm mr-2 font-semibold",children:Qe+1}),Le.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:Le.alternativas.map(De=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${De.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[De.id,")"]}),i.jsx("span",{className:"flex-1",children:De.texto}),De.esCorrecta&&i.jsx(Ha,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"})]},De.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"📚 Estándar:"})," ",Le.estandarAprendizaje]}),Le.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"🎯 Habilidad:"})," ",Le.habilidad]}),((ue=Le.alternativas.find(De=>De.esCorrecta))==null?void 0:ue.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"💡 Explicación:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(we=Le.alternativas.find(De=>De.esCorrecta))==null?void 0:we.explicacion})]})]})]},Le.id)})}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 px-3 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:"✕ Cerrar vista detallada"})})]})]},ye.id))})]})},Se=()=>{var fe,ye,Le,Qe;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluación":"Nueva evaluación"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{g(!1),o("lista"),O(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:q,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:n,children:[i.jsx(Yc,{className:"w-4 h-4"}),(x.cursosAsignados||[]).length>0?"Guardar y asignar":"Guardar evaluación"]})]})]}),_&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[i.jsx(aw,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:_})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la evaluación *"}),i.jsx("input",{type:"text",value:x.titulo,onChange:ue=>v({...x,titulo:ue.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluación SIMCE 4° Básico - Competencia Lectora"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción (opcional)"}),i.jsx("textarea",{value:x.descripcion,onChange:ue=>v({...x,descripcion:ue.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripción de la evaluación",rows:3})]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsxs("label",{className:"flex items-center mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[i.jsx(ro,{className:"w-4 h-4 mr-1.5"}),"Asignar a cursos",(x.cursosAsignados||[]).length>0&&i.jsxs("span",{className:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-1.5 rounded-full",children:[(x.cursosAsignados||[]).length," seleccionado",(x.cursosAsignados||[]).length!==1?"s":""]})]}),i.jsx("p",{className:"mb-2 text-xs text-slate-500 dark:text-slate-400",children:"Seleccione los cursos a los que estará asignada esta evaluación. Estará disponible para los estudiantes en cuanto guarde."}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:T,onChange:ue=>{L(ue.target.value),S(!0)},onFocus:()=>S(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),R&&(C.length>0||T)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:C.length===0&&T?i.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):C.map(ue=>i.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{Oe(ue.id),L("")},children:[i.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(ue.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(ue.id)&&i.jsx(yte,{className:"w-3 h-3 text-white"})}),i.jsx("span",{children:ue.nombre})]},ue.id))})]}),(x.cursosAsignados||[]).length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(ue=>{const we=j.find(De=>De.id===ue);return i.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[i.jsx("span",{children:(we==null?void 0:we.nombre)||ue}),i.jsx("button",{onClick:()=>Oe(ue),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:i.jsx(uA,{className:"w-3 h-3"})})]},ue)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estudiantes asignados"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto text-sm",children:(()=>{const ue=W.filter(we=>{if(we.profile!=="ESTUDIANTE"||!we.curso)return!1;const De=Rc(we.curso);return(x.cursosAsignados||[]).includes(De)});return ue.length===0?i.jsx("span",{className:"text-slate-500",children:"No hay estudiantes asignados a los cursos seleccionados."}):i.jsx("ul",{className:"list-disc pl-4",children:ue.map(we=>i.jsxs("li",{className:"mb-1",children:[we.nombreCompleto||we.nombre||we.id," ",i.jsxs("span",{className:"text-xs text-slate-400",children:["(",Y(Rc(we.curso)),")"]})]},we.id))})})()})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuración de presentación"})}),i.jsx("div",{className:"flex space-x-6",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:ue=>v({...x,barajarAlternativas:ue.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})})]})]}),i.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generación con IA"}),ne.mensaje&&i.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${ne.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":ne.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[ne.tipo==="error"&&i.jsx(aw,{className:"w-5 h-5 flex-shrink-0"}),ne.tipo==="warning"&&i.jsx(gm,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),ne.tipo==="success"&&i.jsx(Ha,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:ne.mensaje})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarán basadas en él. Si lo deja vacío, la IA generará automáticamente un texto adecuado."}),i.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:J.textoProporcionado||"",onChange:ue=>te({...J,textoProporcionado:ue.target.value}),placeholder:x.asignatura==="Competencia Lectora"?"Ingrese aquí un texto para generar preguntas de comprensión lectora...":"Ingrese aquí un texto para crear problemas de pensamiento lógico relacionados...",rows:6})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.cantidadPreguntas,onChange:ue=>te({...J,cantidadPreguntas:ue.target.value}),children:[i.jsx("option",{value:"2",children:"2 preguntas"}),i.jsx("option",{value:"4",children:"4 preguntas"}),i.jsx("option",{value:"6",children:"6 preguntas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.dificultad,onChange:ue=>te({...J,dificultad:ue.target.value}),children:[i.jsx("option",{value:"baja",children:"Baja"}),i.jsx("option",{value:"media",children:"Media"}),i.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Competencia Lectora"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Competencia Lectora"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.habilidadesLectura).map(([ue,we])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:we,onChange:()=>{te({...J,habilidadesLectura:{...J.habilidadesLectura,[ue]:!we}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:ue})]},ue))})]}),x.asignatura==="Pensamiento Lógico"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Pensamiento Lógico"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.ejesMatematica).map(([ue,we])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:we,onChange:()=>{te({...J,ejesMatematica:{...J.ejesMatematica,[ue]:!we}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:ue})]},ue))})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:oe,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(gm,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):i.jsxs(i.Fragment,{children:[i.jsx(So,{className:"w-4 h-4"}),"Generar preguntas automáticamente"]})})}),X?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[x.asignatura==="Competencia Lectora"&&((fe=x.preguntas[0])==null?void 0:fe.id)===X.id&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Texto base para preguntas de comprensión"}),i.jsx("textarea",{value:X.textoBase||"",onChange:ue=>z({...X,textoBase:ue.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Texto de lectura para las preguntas...",rows:5})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),i.jsx("textarea",{value:X.enunciado,onChange:ue=>z({...X,enunciado:ue.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estándar de aprendizaje *"}),i.jsx("select",{value:X.estandarAprendizaje,onChange:ue=>z({...X,estandarAprendizaje:ue.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Lectura"?tYe.map((ue,we)=>i.jsx("option",{value:ue,children:ue},we)):rYe.map((ue,we)=>i.jsx("option",{value:ue,children:ue},we))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),i.jsx("input",{value:X.habilidad||"",onChange:ue=>z({...X,habilidad:ue.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),i.jsx("div",{className:"space-y-3",children:X.alternativas.map((ue,we)=>i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[i.jsx("input",{type:"radio",checked:ue.esCorrecta,onChange:()=>{z({...X,alternativas:X.alternativas.map(De=>({...De,esCorrecta:De.id===ue.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[ue.id,")"]})]}),i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:ue.texto,onChange:De=>{z({...X,alternativas:X.alternativas.map(He=>He.id===ue.id?{...He,texto:De.target.value}:He)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${ue.id}...`,rows:2})})]},ue.id))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicación para alternativa correcta (recomendado)"}),i.jsx("textarea",{value:((ye=X.alternativas.find(ue=>ue.esCorrecta))==null?void 0:ye.explicacion)||"",onChange:ue=>{z({...X,alternativas:X.alternativas.map(we=>we.esCorrecta?{...we,explicacion:ue.target.value}:we)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qué esta es la respuesta correcta...",rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{z(null),O(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:ke,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[i.jsx(Yc,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):i.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(wte,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas aún. Puedes generar preguntas automáticamente o agregarlas manualmente."})]}):i.jsxs(i.Fragment,{children:[x.asignatura==="Lectura"&&((Qe=(Le=x.preguntas)==null?void 0:Le[0])==null?void 0:Qe.textoBase)&&i.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"Texto Base de Comprensión Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Este texto acompañará a todas las preguntas de lectura"})]})]}),i.jsx("button",{onClick:()=>{var we;const ue=(we=x.preguntas)==null?void 0:we[0];ue&&de(ue)},className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-200 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Editar texto base",children:i.jsx(ih,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800 shadow-inner",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:x.preguntas[0].textoBase})})})]}),(x.preguntas||[]).map((ue,we)=>{var De,He;return i.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-medium",children:[i.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2.5 rounded-md mr-2 text-sm font-semibold",children:["Pregunta ",we+1]}),ue.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:ue.alternativas.map(Ye=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${Ye.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[Ye.id,")"]}),i.jsx("span",{className:"flex-1",children:Ye.texto}),Ye.esCorrecta&&i.jsx(Ha,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400"})]},Ye.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estándar:"})," ",ue.estandarAprendizaje]}),ue.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",ue.habilidad]}),((De=ue.alternativas.find(Ye=>Ye.esCorrecta))==null?void 0:De.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Explicación:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(He=ue.alternativas.find(Ye=>Ye.esCorrecta))==null?void 0:He.explicacion})]})]})]}),i.jsxs("div",{className:"flex gap-1 ml-3",children:[i.jsx("button",{onClick:()=>de(ue),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:i.jsx(ih,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>ae(ue.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:i.jsx(Va,{className:"w-4 h-4"})})]})]})},ue.id)})]})})]})]})};return i.jsxs(i.Fragment,{children:[s==="lista"&&!m&&Te(),(s==="detalle"||m)&&Se()]})},ZYe=e=>(console.log("Google Sans Code font would be added here"),e);var oW={};const eJe=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),lW=["Selección múltiple","Verdadero o Falso","Términos pareados","Desarrollo","Comprensión de lectura"],Qce=Z0(e1),tJe=Td(Qce,"generarRubricaConGemini"),rJe=Td(Qce,"generarDescriptorDimensionConGemini"),QI={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},nJe=({item:e,showAnswers:t=!1,shuffledDefinitions:r=[]})=>{var o;const n=e.puntaje??1,a=l=>{const c=Array.isArray(l)?l.slice(0,4):[];for(;c.length<4;)c.push("");return c},s=l=>l.length<=1?l:[...l.slice(1),l[0]];return i.jsxs("div",{className:"p-3 border rounded-lg bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-2 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:e.tipo}),i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:e.pregunta||(e.tipo==="Comprensión de lectura"?"Comprensión de lectura":"")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in e&&e.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",e.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[n," pts"]})]})]}),e.tipo==="Selección múltiple"&&i.jsxs("div",{className:"ml-1 mt-2 space-y-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-1",children:"Marca la alternativa correcta."}),a(e.opciones).map((l,c)=>{const u=t&&c===e.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-5 h-5 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})]}),e.tipo==="Verdadero o Falso"&&i.jsxs("div",{className:"ml-1 mt-2 flex items-center gap-6",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Indica si la afirmación es verdadera (V) o falsa (F)."}),i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!0?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"V"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!1?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"F"})]}),e.tipo==="Desarrollo"&&i.jsx("div",{className:"mt-3 border rounded-md h-24 bg-slate-50 dark:bg-slate-700/40"}),e.tipo==="Términos pareados"&&(()=>{const l=e.pares||[],c=l.map(f=>f.concepto),u=s(l.map(f=>f.definicion)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-2",children:"Une cada concepto (columna izquierda) con su definición (columna derecha)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna A: Conceptos"}),i.jsx("div",{className:"space-y-1",children:c.map((f,h)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[h+1,"."]}),i.jsx("span",{children:f})]},h))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna B: Definiciones"}),i.jsx("div",{className:"space-y-1",children:u.map((f,h)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[d[h]||"?","."]}),i.jsx("span",{children:f})]},h))})]})]})]})})(),e.tipo==="Comprensión de lectura"&&i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/40 rounded-md whitespace-pre-wrap",children:e.texto}),i.jsx("div",{className:"space-y-3",children:(o=e.preguntas)==null?void 0:o.map((l,c)=>{var u;return i.jsxs("div",{className:"p-3 border rounded-md bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-1 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:["CL-",c+1]}),i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:l.tipo}),i.jsx("div",{className:"font-medium",children:l.pregunta})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in l&&l.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",l.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l.puntaje??1," pts"]})]})]}),l.tipo==="Selección múltiple"?i.jsx("div",{className:"ml-1 mt-1 space-y-1",children:(u=l.opciones)==null?void 0:u.map((d,f)=>{const h=t&&f===l.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${h?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-4 h-4 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+f),") ",d]})]},f)})}):i.jsx("div",{className:"mt-2 border rounded-md h-16 bg-slate-50 dark:bg-slate-700/40"})]},c)})})]})]})},aJe=()=>{const e=N.useMemo(()=>lW.reduce((K,H)=>(K[H]=0,K),{}),[]),t=N.useMemo(()=>({nombre:"",asignatura:(Ua==null?void 0:Ua[0])||"",nivel:(XE==null?void 0:XE[0])||"",contenido:"",tiposActividad:e,dificultad:"Intermedio",isNee:!1,selectedNee:[]}),[e]),[r,n]=N.useState(t),[a,s]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState(null),[d,f]=N.useState([]),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),{currentUser:w}=gM();N.useEffect(()=>{if(w){const K=fWe(f);return()=>K()}},[w]);const _=K=>{const{name:H,value:F}=K.target;n(D=>({...D,[H]:F}))},O=K=>{n(H=>{var D;const F={...H.tiposActividad};return F[K]>0?F[K]=0:F[K]=((D=QI[K])==null?void 0:D[0])||1,{...H,tiposActividad:F}})},j=(K,H)=>{n(F=>({...F,tiposActividad:{...F.tiposActividad,[K]:H}}))},B=K=>{n(H=>{const F=H.selectedNee.includes(K)?H.selectedNee.filter(D=>D!==K):[...H.selectedNee,K];return{...H,selectedNee:F}})},C=K=>{const H=String(K||"").trim().toLowerCase();if(H){if(H.includes("record"))return"Recordar";if(H.includes("comprend")||H.includes("entend"))return"Comprender";if(H.includes("aplic"))return"Aplicar";if(H.includes("analiz"))return"Analizar";if(H.includes("evalu"))return"Evaluar";if(H.includes("crea")||H.includes("sintet"))return"Crear"}},k=K=>{switch(K){case"Selección múltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Términos pareados":return"Comprender";case"Comprensión de lectura":return"Comprender";default:return"Comprender"}},T=K=>{const F=(Array.isArray(K)?K.map(D=>typeof D=="string"?D:(D==null?void 0:D.texto)??""):[]).slice(0,4);for(;F.length<4;)F.push("");return F},L=K=>{if(typeof(K==null?void 0:K.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,K.respuestaCorrecta));if(Array.isArray(K==null?void 0:K.alternativas)){const D=K.alternativas.findIndex(q=>q&&(q.esCorrecta===!0||q.correcta===!0));if(D>=0&&D<4)return D}const H=String((K==null?void 0:K.correcta)||(K==null?void 0:K.respuesta)||(K==null?void 0:K.respuestaCorrecta)||"").trim().toUpperCase(),F={A:0,B:1,C:2,D:3};return H in F?F[H]:0},R=K=>{const H=T(K.opciones??K.alternativas),F=L(K),D=C(K.habilidadBloom)||k("Selección múltiple");return{id:K.id||crypto.randomUUID(),tipo:"Selección múltiple",pregunta:K.pregunta||K.enunciado||"Pregunta",puntaje:K.puntaje??1,opciones:H,respuestaCorrecta:F,habilidadBloom:D}},S=K=>{let H=!1;typeof(K==null?void 0:K.respuestaCorrecta)=="boolean"?H=K.respuestaCorrecta:typeof(K==null?void 0:K.esVerdadero)=="boolean"?H=K.esVerdadero:K!=null&&K.correcta&&(H=String(K.correcta).toUpperCase().startsWith("V"));const F=C(K.habilidadBloom)||k("Verdadero o Falso");return{id:K.id||crypto.randomUUID(),tipo:"Verdadero o Falso",pregunta:K.pregunta||K.enunciado||"Afirmación",puntaje:K.puntaje??1,respuestaCorrecta:H,habilidadBloom:F}},U=K=>{const H=C(K.habilidadBloom)||k("Desarrollo");return{id:K.id||crypto.randomUUID(),tipo:"Desarrollo",pregunta:K.pregunta||K.enunciado||"Pregunta abierta",puntaje:K.puntaje??1,habilidadBloom:H}},Q=K=>{let H=Array.isArray(K==null?void 0:K.pares)?K.pares:[];if((!H||H.length===0)&&Array.isArray(K==null?void 0:K.conceptos)&&Array.isArray(K==null?void 0:K.definiciones)){const D=Math.min(K.conceptos.length,K.definiciones.length);H=Array.from({length:D},(q,J)=>({concepto:K.conceptos[J],definicion:K.definiciones[J]}))}H=(H||[]).map(D=>({concepto:(D==null?void 0:D.concepto)??"",definicion:(D==null?void 0:D.definicion)??""}));const F=C(K.habilidadBloom)||k("Términos pareados");return{id:K.id||crypto.randomUUID(),tipo:"Términos pareados",pregunta:K.pregunta||K.enunciado||"Relaciona los términos",puntaje:K.puntaje??1,pares:H,habilidadBloom:F}},X=K=>{const H=typeof(K==null?void 0:K.texto)=="string"?K.texto:Array.isArray(K==null?void 0:K.texto)?K.texto.join(`
`):(K==null?void 0:K.lectura)||"",D=(Array.isArray(K==null?void 0:K.preguntas)?K.preguntas:[]).map(J=>{const te=C(J==null?void 0:J.habilidadBloom),ne=((J==null?void 0:J.tipo)||"").toLowerCase();if(ne.includes("multiple")||ne.includes("seleccion")){const ie=R(J);return ie.habilidadBloom||(ie.habilidadBloom=te||k("Selección múltiple")),ie}if(ne.includes("desarrollo")||ne.includes("abierta")){const ie=U(J);return ie.habilidadBloom||(ie.habilidadBloom=te||k("Desarrollo")),ie}if(J!=null&&J.alternativas||J!=null&&J.opciones){const ie=R(J);return ie.habilidadBloom||(ie.habilidadBloom=te||k("Selección múltiple")),ie}return null}).filter(Boolean),q=C(K.habilidadBloom)||k("Comprensión de lectura");return{id:K.id||crypto.randomUUID(),tipo:"Comprensión de lectura",pregunta:K.pregunta||K.enunciado||"Comprensión de lectura",puntaje:K.puntaje??Math.max(1,D.reduce((J,te)=>J+(te.puntaje??1),0)),texto:H,preguntas:D,habilidadBloom:q}},z=async K=>{var H;if(K.preventDefault(),!w||!w.uid||!w.email||!w.id){l("Debes iniciar sesión para generar una evaluación.");return}if(!r.nombre.trim()||!r.contenido.trim()||Object.keys(r.tiposActividad).length===0){l("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),l(null);try{K4("Evaluación - Pruebas",w);const F={...r.tiposActividad},D={objetivo:`Evaluar el siguiente contenido: "${r.contenido}" para el nivel ${r.nivel}.`,cantidadesPorTipo:F,contextoAdicional:`
          Nombre de la prueba: ${r.nombre}
          Asignatura: ${r.asignatura}
          Nivel de Dificultad General: ${r.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
          ${r.isNee&&r.selectedNee.length>0?`**Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):** Adapta esta prueba para estudiantes con las siguientes características: ${r.selectedNee.join(", ")}. Esto implica usar un lenguaje claro, simple y directo, evitar preguntas complejas, usar textos más cortos y distractores claros.`:""}
          Directrices Generales: El vocabulario, la complejidad y el contexto de toda la prueba deben ser apropiados para el nivel educativo 'Educación Media' en Chile.
          Formato de Salida: Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.
        `},J=`${oW.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,te=await((H=ao.currentUser)==null?void 0:H.getIdToken());if(!te)throw new Error("No se pudo obtener token de autenticación.");const ne=await fetch(J,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${te}`},body:JSON.stringify(D)});if(!ne.ok){const $e=await ne.text();throw new Error(`Error en función: ${ne.status} ${$e}`)}const ie=await ne.json(),oe=ie.prueba||ie.data&&ie.data.prueba,de=$e=>$e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),ke=$e=>de(($e||"").toLowerCase()),ae=$e=>{const nt=ke(String($e||""));return nt?nt.includes("comprension")||nt.includes("lectura")||nt.includes("reading")?"Comprensión de lectura":nt.includes("multiple")||nt.includes("seleccion")||nt.includes("mcq")?"Selección múltiple":nt.includes("verdadero")||nt.includes("falso")||nt==="vf"||nt.includes("true")||nt.includes("false")?"Verdadero o Falso":nt.includes("paread")||nt.includes("matching")||nt.includes("emparejar")?"Términos pareados":nt.includes("desarrollo")||nt.includes("respuesta corta")||nt.includes("abierta")?"Desarrollo":null:null},Oe=$e=>{const bt=(Array.isArray($e)?$e.map(Bt=>typeof Bt=="string"?Bt:(Bt==null?void 0:Bt.texto)??""):[]).slice(0,4);for(;bt.length<4;)bt.push("");return bt},Te=$e=>{if(typeof($e==null?void 0:$e.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,$e.respuestaCorrecta));if(Array.isArray($e==null?void 0:$e.alternativas)){const Bt=$e.alternativas.findIndex(xt=>xt&&(xt.esCorrecta===!0||xt.correcta===!0));if(Bt>=0&&Bt<4)return Bt}const nt=String(($e==null?void 0:$e.correcta)||($e==null?void 0:$e.respuesta)||"").trim().toUpperCase(),bt={A:0,B:1,C:2,D:3};return nt in bt?bt[nt]:0},Se=$e=>{const nt=String($e||"").trim().toLowerCase();if(nt){if(nt.includes("record"))return"Recordar";if(nt.includes("comprend")||nt.includes("entend"))return"Comprender";if(nt.includes("aplic"))return"Aplicar";if(nt.includes("analiz"))return"Analizar";if(nt.includes("evalu"))return"Evaluar";if(nt.includes("crea")||nt.includes("sintet"))return"Crear"}},fe=$e=>{switch($e){case"Selección múltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Términos pareados":return"Comprender";case"Comprensión de lectura":return"Comprender";default:return"Comprender"}},ye=R,Le=S,Qe=U,ue=Q,we=X,De=$e=>{switch(ae($e.tipo)||($e!=null&&$e.alternativas||$e!=null&&$e.opciones?"Selección múltiple":null)){case"Selección múltiple":return ye($e);case"Verdadero o Falso":return Le($e);case"Desarrollo":return Qe($e);case"Términos pareados":return ue($e);case"Comprensión de lectura":return we($e);default:return $e!=null&&$e.alternativas||$e!=null&&$e.opciones?ye($e):$e!=null&&$e.pares||$e!=null&&$e.conceptos&&($e!=null&&$e.definiciones)?ue($e):($e!=null&&$e.texto||$e!=null&&$e.lectura)&&Array.isArray($e==null?void 0:$e.preguntas)?we($e):typeof($e==null?void 0:$e.respuestaCorrecta)=="boolean"||typeof($e==null?void 0:$e.esVerdadero)=="boolean"||/^(v|f)$/i.test(String(($e==null?void 0:$e.correcta)||""))?Le($e):Qe($e)}},He=(Array.isArray(oe==null?void 0:oe.preguntas)?oe.preguntas:[]).map(($e,nt)=>{const bt=De($e);return bt?{...bt,id:bt.id||crypto.randomUUID(),pregunta:bt.pregunta||`Ítem ${nt+1}`,puntaje:bt.puntaje??1}:null}).filter(Boolean),Ye=oe.instruccionesGenerales&&oe.instruccionesGenerales.trim().length>0?oe.instruccionesGenerales:"Lee atentamente y responde cada ítem según se indique. Marca solo una alternativa cuando corresponda. Justifica tus respuestas en los ítems de desarrollo.",tt=(He||[]).reduce(($e,nt)=>{if(nt.tipo==="Comprensión de lectura"&&Array.isArray(nt.preguntas)){const bt=nt.preguntas.reduce((Bt,xt)=>Bt+(xt.puntaje??1),0);return $e+bt}return $e+(nt.puntaje??1)},0),ft={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenidoOriginal:r.contenido,tiposActividadOriginal:r.tiposActividad,objetivo:oe.objetivo||"",instruccionesGenerales:Ye,puntajeIdeal:tt,actividades:[{id:crypto.randomUUID(),titulo:r.nombre,instrucciones:Ye,items:He}],dificultad:r.dificultad,...r.isNee&&{adaptacionNEE:r.selectedNee}};u(ft),m(!1)}catch(F){console.error(F),l("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},W=async()=>{if(c)try{await AWe(c),alert("Prueba guardada con éxito.")}catch(K){console.error(K),alert("No se pudo guardar la prueba.")}},G=async K=>{if(window.confirm("¿Eliminar esta prueba?"))try{await hWe(K),(c==null?void 0:c.id)===K&&u(null)}catch(H){console.error(H),alert("No se pudo eliminar la prueba.")}},Y=async K=>{try{x(!0);const H=new Ar({unit:"pt",format:"letter"});try{ZYe(H),H.setFont("GoogleSansCode","normal")}catch{}const F=40;let D=F;H.setFontSize(12),H.text("LICEO INDUSTRIAL DE RECOLETA",F,D),H.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",H.internal.pageSize.getWidth()-F,D,{align:"right"}),D+=24,H.setFont(void 0,"bold"),H.setFontSize(18),H.text(K.nombre,H.internal.pageSize.getWidth()/2,D,{align:"center"}),H.setFont(void 0,"normal"),D+=18,gi(H,{startY:D+6,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Campo","Valor"]],body:[["Fecha",new Date(K.fechaCreacion).toLocaleDateString()],["Asignatura",K.asignatura],["Nivel",K.nivel],["Puntaje Ideal",String(K.puntajeIdeal)],["Objetivo",K.objetivo],["Instrucciones Generales",K.instruccionesGenerales]]}),D=H.lastAutoTable.finalY+16,K.actividades.forEach((te,ne)=>{D>H.internal.pageSize.getHeight()-120&&(H.addPage(),D=F),H.setFontSize(13),H.setFont(void 0,"bold"),H.text(`Actividad ${ne+1}: ${te.titulo}`,F,D),D+=14,H.setFont(void 0,"normal"),H.setFontSize(10);const ie=H.splitTextToSize(te.instrucciones,H.internal.pageSize.getWidth()-F*2);H.text(ie,F,D),D+=ie.length*12+6,te.items.forEach((oe,de)=>{const ke=oe.habilidadBloom?` [Bloom: ${oe.habilidadBloom}]`:"",ae=`${de+1}. ${oe.pregunta} (${oe.puntaje} pts)${ke}`,Oe=H.splitTextToSize(ae,H.internal.pageSize.getWidth()-F*2);switch(D>H.internal.pageSize.getHeight()-100&&(H.addPage(),D=F),H.setFont(void 0,"bold"),H.text(Oe,F,D),D+=Oe.length*12+4,H.setFont(void 0,"normal"),oe.tipo){case"Selección múltiple":{oe.opciones.forEach((Te,Se)=>{const fe=`${String.fromCharCode(65+Se)}) ${Te}`,ye=H.splitTextToSize(fe,H.internal.pageSize.getWidth()-F*2-16);H.text(ye,F+16,D),D+=ye.length*12}),D+=8;break}case"Verdadero o Falso":{H.text("V ____    F ____",F+16,D),D+=18;break}case"Desarrollo":{H.rect(F,D-10,H.internal.pageSize.getWidth()-F*2,60),D+=70;break}case"Términos pareados":{const Te=oe.pares;gi(H,{startY:D,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Columna A: Concepto","Columna B: Definición"]],body:Te.map((Se,fe)=>[`${fe+1}. ${Se.concepto}`,Se.definicion])}),D=H.lastAutoTable.finalY+8;break}case"Comprensión de lectura":{const Te=oe,Se=H.splitTextToSize(Te.texto,H.internal.pageSize.getWidth()-F*2);H.text(Se,F,D),D+=Se.length*12+8,Te.preguntas.forEach((fe,ye)=>{const Le=fe.habilidadBloom?` [Bloom: ${fe.habilidadBloom}]`:"",Qe=`CL-${ye+1}. ${fe.pregunta} (${fe.puntaje} pts)${Le}`,ue=H.splitTextToSize(Qe,H.internal.pageSize.getWidth()-F*2);D>H.internal.pageSize.getHeight()-100&&(H.addPage(),D=F),H.setFont(void 0,"bold"),H.text(ue,F+8,D),D+=ue.length*12+4,H.setFont(void 0,"normal"),fe.tipo==="Selección múltiple"?(fe.opciones.forEach((we,De)=>{const He=`${String.fromCharCode(65+De)}) ${we}`,Ye=H.splitTextToSize(He,H.internal.pageSize.getWidth()-F*2-24);H.text(Ye,F+24,D),D+=Ye.length*12}),D+=6):(H.rect(F+8,D-10,H.internal.pageSize.getWidth()-F*2-16,50),D+=58)});break}}})});const q=new Date().toISOString().split("T")[0],J=`${K.nombre.replace(/\s/g,"_")}_${K.asignatura.replace(/\s/g,"_")}_${q}.pdf`;H.save(J),x(!1),alert(`PDF generado y descargado como "${J}"`)}catch(H){console.error(H),x(!1),alert("No se pudo generar el PDF.")}};if(c){const K=async(H,F)=>{var D,q;try{const J=c.actividades.findIndex(He=>He.id===H);if(J<0)return;const te=c.actividades[J],ne=te.items.findIndex(He=>He.id===F);if(ne<0)return;const ie=te.items[ne],oe=He=>He,de=c.objetivo&&c.objetivo.trim().length>0?c.objetivo:`Evaluar el siguiente contenido: "${c.contenidoOriginal}" para el nivel ${c.nivel}.`,ke={[oe(ie.tipo)]:1},ae={objetivo:de,cantidadesPorTipo:ke,contextoAdicional:`Regenerar un ítem del tipo ${ie.tipo} manteniendo el mismo nivel (${c.nivel}) y asignatura (${c.asignatura}).`},Te=`${oW.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,Se=await((D=ao.currentUser)==null?void 0:D.getIdToken());if(!Se)throw new Error("No se pudo obtener token de autenticación.");const fe=await fetch(Te,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Se}`},body:JSON.stringify(ae)});if(!fe.ok)throw new Error(await fe.text());const ye=await fe.json(),Le=Array.isArray((q=ye==null?void 0:ye.prueba)==null?void 0:q.preguntas)?ye.prueba.preguntas:[];if(Le.length===0)throw new Error("La IA no devolvió ítems nuevos.");const Qe=Le[0],ue=(()=>{const He=((Qe==null?void 0:Qe.tipo)||"").toLowerCase();return He.includes("múltiple")||He.includes("multiple")||He.includes("seleccion")?"Selección múltiple":He.includes("verdadero")||He.includes("falso")||He==="vf"?"Verdadero o Falso":He.includes("paread")||He.includes("matching")||He.includes("emparejar")?"Términos pareados":He.includes("comprension")||He.includes("lectura")?"Comprensión de lectura":He.includes("desarrollo")||He.includes("respuesta corta")||He.includes("abierta")?"Desarrollo":null})();let we=null;if(ue==="Selección múltiple"?we=R(Qe):ue==="Verdadero o Falso"?we=S(Qe):ue==="Desarrollo"?we=U(Qe):ue==="Términos pareados"?we=Q(Qe):ue==="Comprensión de lectura"?we=X(Qe):(Qe!=null&&Qe.opciones||Qe!=null&&Qe.alternativas)&&(we=R(Qe)),!we)throw new Error("No se pudo normalizar el ítem generado.");const De={...c};De.actividades=c.actividades.map((He,Ye)=>Ye!==J?He:{...He,items:He.items.map((tt,ft)=>ft===ne?{...we,id:tt.id}:tt)}),u(De)}catch(J){console.error("No se pudo regenerar el ítem:",J),alert("No se pudo regenerar el ítem. Intenta de nuevo.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>u(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>m(!h),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[i.jsx(eJe,{open:!h})," ",i.jsxs("span",{children:[h?"Ocultar":"Mostrar"," Respuestas"]})]}),i.jsx("button",{onClick:()=>y(H=>!H),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:v?"Orden original":"Ordenar por tipo"}),i.jsx("button",{onClick:W,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),i.jsxs("button",{onClick:()=>c&&Y(c),disabled:g,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[g?"...":i.jsx(gte,{})," PDF"]})]})]}),i.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),i.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),i.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:c.nombre}),i.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Asignatura:"})," ",c.asignatura]}),i.jsxs("p",{className:"text-right",children:[i.jsx("strong",{children:"Puntaje Ideal:"})," ",c.puntajeIdeal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nivel:"})," ",c.nivel]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[i.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",c.dificultad||"Intermedio"]}),c.adaptacionNEE&&c.adaptacionNEE.length>0&&i.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",c.adaptacionNEE.join(", ")]})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",c.objetivo]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instrucciones Generales:"})," ",c.instruccionesGenerales]})]}),c.actividades.map(H=>i.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:H.titulo}),i.jsx("p",{className:"italic text-sm mb-4",children:H.instrucciones}),i.jsx("div",{className:"space-y-6",children:(()=>{const F={"Comprensión de lectura":0,"Selección múltiple":1,"Verdadero o Falso":2,"Términos pareados":3,Desarrollo:4};return(v?[...H.items||[]].sort((q,J)=>(F[q.tipo]??99)-(F[J.tipo]??99)):H.items||[]).map(q=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>K(H.id,q.id),className:"text-xs bg-sky-600 text-white px-3 py-1 rounded hover:bg-sky-700",children:"Regenerar ítem"})}),i.jsx(nJe,{item:q,showAnswers:h})]},q.id))})()})]},H.id))]})]})}return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),i.jsxs("form",{onSubmit:z,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:r.nombre,onChange:_,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:r.asignatura,onChange:_,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Ua.map(K=>i.jsx("option",{children:K},K))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Nivel"}),i.jsx("select",{name:"nivel",value:r.nivel,onChange:_,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:XE.map(K=>i.jsx("option",{children:K},K))})]}),i.jsx("div",{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),i.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((K,H)=>i.jsx("button",{type:"button",onClick:()=>n(F=>({...F,dificultad:K})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 ${H===0?"rounded-l-lg":""} ${H===2?"rounded-r-lg":""} ${r.dificultad===K?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:K},K))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.isNee,onChange:K=>n(H=>({...H,isNee:K.target.checked,selectedNee:K.target.checked?H.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),r.isNee&&i.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:S_.map(K=>i.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.selectedNee.includes(K),onChange:()=>B(K),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:K})]},K))})]})]})]}),i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Contenido a evaluar"}),i.jsx("textarea",{name:"contenido",value:r.contenido,onChange:_,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"space-y-3",children:lW.map(K=>{var H;return i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:!!r.tiposActividad[K],onChange:()=>O(K),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:K})]}),r.tiposActividad[K]&&QI[K]&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),(H=QI[K])==null?void 0:H.map(F=>i.jsx("button",{type:"button",onClick:()=>j(K,F),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${r.tiposActividad[K]===F?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:F},F))]})]},K)})}),o&&i.jsx("p",{className:"text-red-500 text-sm",children:o}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),i.jsx("div",{className:"space-y-2",children:d.length>0?d.map(K=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:K.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.asignatura," - ",K.nivel," (",new Date(K.fechaCreacion).toLocaleDateString(),")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>u(K),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),i.jsx("button",{onClick:()=>G(K.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},K.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},sJe=({rubricas:e,onSave:t,onDelete:r,onCreate:n,allUsers:a,onCreatedInteractiva:s})=>{const[o,l]=N.useState(null),[c,u]=N.useState("list"),[d,f]=N.useState(!1),[h,m]=N.useState(""),{currentUser:g}=gM(),[x,v]=N.useState(!1),[y,w]=N.useState(""),[_,O]=N.useState(""),j=N.useMemo(()=>Array.from(new Set(a.filter(X=>X.profile===Ht.ESTUDIANTE&&X.curso).map(X=>Rc(X.curso)))).sort(),[a]),B=async(X,z,W)=>{try{X.id||(X.id=crypto.randomUUID()),await IO(X);const G=a.filter(F=>F.profile===Ht.ESTUDIANTE&&Rc(F.curso||"")===z),Y={};G.forEach(F=>{Y[F.id]={puntajes:{},feedback:""}});const K={nombre:X.titulo,curso:z,asignatura:W,rubricaEstaticaId:X.id,resultados:Y},H=await xWe(K);v(!1),alert("Rúbrica interactiva creada."),s==null||s(H)}catch(G){console.error(G),alert("No se pudo crear la rúbrica interactiva.")}},C=async(X,z)=>{if(!X.trim()||!z.trim()){alert("El título y la descripción son obligatorios.");return}f(!0);try{K4("Evaluación - Rúbricas",g);const G=(await tJe({objetivo:X,niveles:["Insuficiente","Suficiente","Competente","Avanzado"],dimensiones:[],contextoAdicional:`El propósito de la rúbrica es: "${z}". Por favor, genera entre 3 y 5 dimensiones de evaluación relevantes.`})).data.rubrica,Y={id:crypto.randomUUID(),titulo:G.nombre,descripcion:G.descripcion,fechaCreacion:new Date().toISOString(),dimensiones:G.dimensiones.map(K=>({id:crypto.randomUUID(),nombre:K.nombre,niveles:K.descriptores.reduce((H,F)=>{const q={Insuficiente:"insuficiente",Suficiente:"suficiente",Competente:"competente",Avanzado:"avanzado"}[F.nivel]||F.nivel.toLowerCase().replace(/\s/g,"");return q&&(H[q]=F.descripcion),H},{insuficiente:"",suficiente:"",competente:"",avanzado:""})}))};await n(Y),l(Y),u("form"),v(!0)}catch(W){console.error(W),alert("Error al generar la rúbrica con IA.")}finally{f(!1)}},k=()=>{l({id:"",titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),u("form")},T=X=>{l(X),u("form")},L=async()=>{if(!o||!h.trim())return;const X=h;m("");const z=`temp-${crypto.randomUUID()}`;l(W=>W?{...W,dimensiones:[...W.dimensiones,{id:z,nombre:X,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0}]}:null);try{const G=(await rJe({objetivo:o.titulo,dimension:X,nivel:"todos",contextoAdicional:'Genera descriptores para los 4 niveles: Insuficiente, Suficiente, Competente y Avanzado. La respuesta debe ser un objeto JSON con claves "insuficiente", "suficiente", "competente", "avanzado".'})).data.descriptores;l(Y=>Y?{...Y,dimensiones:Y.dimensiones.map(K=>K.id===z?{...K,niveles:G,isLoading:!1}:K)}:null)}catch(W){console.error(W),alert("No se pudo generar la dimensión con IA."),l(G=>G?{...G,dimensiones:G.dimensiones.filter(Y=>Y.id!==z)}:null)}},R=(X,z,W)=>{o&&l(G=>G?{...G,dimensiones:G.dimensiones.map(Y=>Y.id!==X?Y:z==="nombre"?{...Y,nombre:W}:{...Y,niveles:{...Y.niveles,[z]:W}})}:null)},S=(X,z)=>{l(W=>W?{...W,[X]:z}:null)},U=X=>{o&&l(z=>z?{...z,dimensiones:z.dimensiones.filter(W=>W.id!==X)}:null)},Q=()=>{if(!o)return null;const X="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",z=`${X} resize-none text-sm`;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),i.jsx("button",{onClick:()=>u("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),i.jsx("input",{value:o.titulo,onChange:W=>S("titulo",W.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${X} mt-1`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),i.jsx("textarea",{value:o.descripcion,onChange:W=>S("descripcion",W.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${X} mt-1`})]})]}),o.dimensiones.length===0&&i.jsx("div",{className:"text-center py-4",children:i.jsx("button",{onClick:()=>C(o.titulo,o.descripcion),disabled:d||!o.titulo||!o.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:d?"Generando...":"✨ Generar Rúbrica con IA"})}),o.dimensiones.length>0&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),i.jsx("button",{type:"button",onClick:()=>v(!0),className:"bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Usar como Rúbrica Interactiva"})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(W=>i.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:W},W))})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.dimensiones.map(W=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 w-1/5",children:i.jsx("textarea",{value:W.nombre,onChange:G=>R(W.id,"nombre",G.target.value),rows:4,className:z})}),Object.keys(W.niveles).map(G=>i.jsx("td",{className:"p-2 w-1/5",children:"isLoading"in W&&W.isLoading?i.jsx("div",{className:"flex justify-center items-center h-full",children:i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):i.jsx("textarea",{value:W.niveles[G],onChange:Y=>R(W.id,G,Y.target.value),rows:4,className:z})},G)),i.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:i.jsx("button",{onClick:()=>U(W.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},W.id))})]})}),i.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),i.jsx("input",{value:h,onChange:W=>m(W.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${X} mt-1`})]}),i.jsx("button",{onClick:L,disabled:!h.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Asignar a Curso"}),i.jsx("label",{className:"text-sm font-medium",children:"Curso"}),i.jsxs("select",{value:y,onChange:W=>w(W.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona un curso..."}),j.map(W=>i.jsx("option",{value:W,children:W},W))]}),i.jsx("label",{className:"text-sm font-medium",children:"Asignatura"}),i.jsxs("select",{value:_,onChange:W=>O(W.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona una asignatura..."}),Ua.map(W=>i.jsx("option",{value:W,children:W},W))]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2",children:"Cancelar"}),i.jsx("button",{disabled:!y||!o||!_,onClick:()=>o&&B(o,y,_),className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Crear Interactiva"})]})]})})]})};return c==="list"?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),i.jsx("button",{onClick:k,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(X=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:X.titulo}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:X.descripcion})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>T(X),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>r(X.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},X.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):Q()},iJe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=N.useState([]),[a,s]=N.useState(null);N.useEffect(()=>{const f=gWe(n);return()=>f()},[]);const o=N.useMemo(()=>r.find(f=>f.id===a)||null,[r,a]),l=N.useMemo(()=>o&&t.find(f=>f.id===o.rubricaEstaticaId)||null,[o,t]),c=N.useMemo(()=>o?e.filter(f=>f.profile===Ht.ESTUDIANTE&&Rc(f.curso||"")===Rc(o.curso)):[],[o,e]),u=async(f,h,m)=>{if(!o)return;const g=o.resultados[f]||{puntajes:{},feedback:""},x={...o.resultados,[f]:{...g,puntajes:{...g.puntajes,[h]:m}}};await vWe(o.id,{resultados:x})},d=f=>{if(!l)return 1;const h=l.dimensiones.map(w=>w.nombre),m=o==null?void 0:o.resultados[f];if(!m)return 1;const g=h.reduce((w,_)=>w+(m.puntajes[_]||0),0),x=h.length*4,y=1+6*(x>0?g/x:0);return Math.round(y*10)/10};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rúbricas Interactivas"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-1/3 space-y-2",children:[r.map(f=>i.jsxs("button",{onClick:()=>s(f.id),className:`w-full text-left p-3 rounded border ${a===f.id?"bg-amber-100 dark:bg-amber-900/30":"bg-slate-50 dark:bg-slate-700/50"}`,children:[i.jsx("div",{className:"font-semibold",children:f.nombre}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Curso: ",f.curso," · Asignatura: ",f.asignatura]})]},f.id)),r.length===0&&i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay rúbricas interactivas."})]}),i.jsx("div",{className:"flex-1",children:o&&l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:[o.nombre," — ",o.curso]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Estudiante"}),l.dimensiones.map(f=>i.jsx("th",{className:"p-2 text-left",children:f.nombre},f.id)),i.jsx("th",{className:"p-2 text-left",children:"Nota"})]})}),i.jsx("tbody",{children:c.map(f=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:f.nombreCompleto}),l.dimensiones.map(h=>{var g,x;const m=((x=(g=o.resultados[f.id])==null?void 0:g.puntajes)==null?void 0:x[h.nombre])||0;return i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:m,onChange:v=>u(f.id,h.nombre,Number(v.target.value)),className:"border rounded p-1 dark:bg-slate-700",children:[i.jsx("option",{value:0,children:"—"}),i.jsx("option",{value:1,children:"1 - Insuficiente"}),i.jsx("option",{value:2,children:"2 - Suficiente"}),i.jsx("option",{value:3,children:"3 - Competente"}),i.jsx("option",{value:4,children:"4 - Avanzado"})]})},h.id)}),i.jsx("td",{className:"p-2 font-semibold",children:d(f.id).toFixed(1)})]},f.id))})]})})]}):i.jsx("p",{className:"text-slate-500",children:"Selecciona una rúbrica interactiva para calificar."})})]})]})},oJe=()=>{const[e,t]=N.useState("pruebas"),[r,n]=N.useState([]),[a,s]=N.useState([]),[o,l]=N.useState(!0);return N.useEffect(()=>{l(!0);const c=bWe(n),u=mWe(d=>{s(d),l(!1)});return()=>{c(),u()}},[]),o?i.jsx("div",{className:"text-center py-10 text-lg",children:"Cargando datos..."}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("pruebas"),children:"Pruebas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricas"),children:"Rúbricas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricasInteractivas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricasInteractivas"),children:"Rúbricas Interactivas"})]}),e==="pruebas"&&i.jsx(aJe,{}),e==="rubricas"&&i.jsx(sJe,{rubricas:a,onSave:IO,onDelete:pWe,onCreate:IO,allUsers:r,onCreatedInteractiva:()=>t("rubricasInteractivas")}),e==="rubricasInteractivas"&&i.jsx(iJe,{allUsers:r,rubricasEstaticas:a})]})},lJe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=mt(pr,c),d=await Mr(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=mt(pr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=Lt(c,dr("timestamp",">=",u.toISOString()),Jt("timestamp","desc")),f=await Mr(d),h={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:l,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},cW=500,$x=({title:e,value:t,description:r,alert:n})=>i.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),i.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),HI=({title:e,data:t,colorClass:r})=>{const n=N.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),i.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},cJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0),[a,s]=N.useState(null),[o,l]=N.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});N.useEffect(()=>{n(!0);const f=aWe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await lJe();l(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=N.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(O=>{const j=new Date(O.timestamp).getTime();j>=h&&x.today++,j>=m&&x.week++,j>=g&&x.month++;const B=O.userEmail||"Desconocido";v[B]||(v[B]={email:B,today:0,month:0,total:0}),v[B].total++,j>=h&&v[B].today++,j>=g&&v[B].month++,y[O.module]=(y[O.module]||0)+1});const w=Object.values(v).sort((O,j)=>j.total-O.total),_=Object.entries(y).map(([O,j])=>({label:O,value:j})).sort((O,j)=>j.value-O.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return i.jsxs("div",{className:"space-y-8",children:[a&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx($x,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${cW}`,alert:c.today>cW}),i.jsx($x,{title:"Llamadas esta Semana",value:r?"--":c.week}),i.jsx($x,{title:"Llamadas este Mes",value:r?"--":c.month})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(HI,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),i.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx($x,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),i.jsx($x,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),i.jsx($x,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(HI,{title:"Actividad por Colección",data:o.collectionsActivity,colorClass:"bg-green-500"}),i.jsx(HI,{title:"Actividad Diaria (Últimos 7 días)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},uW=Object.values(Ht),VI=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",uJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[a,s]=N.useState("Usuarios"),[o,l]=N.useState({nombreCompleto:"",email:"",rut:"",profile:Ht.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=N.useState(null),[d,f]=N.useState(""),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState(null),[w,_]=N.useState(null),[O,j]=N.useState(null),B=N.useCallback(async()=>{n(!0);try{const G=await ej();t(G)}catch(G){console.error("Error al cargar usuarios",G),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);N.useEffect(()=>{B()},[B]);const C=N.useCallback(G=>{const{name:Y,value:K}=G.target;l(H=>({...H,[Y]:K,curso:Y==="profile"&&K!==Ht.ESTUDIANTE?"":H.curso,cursos:Y==="profile"&&K!==Ht.PROFESORADO?[]:H.cursos,asignaturas:Y==="profile"&&K!==Ht.PROFESORADO?[]:H.asignaturas}))},[]),k=N.useCallback((G,Y)=>{l(K=>{const H=K[G]||[],F=H.includes(Y)?H.filter(D=>D!==Y):[...H,Y];return{...K,[G]:F}})},[]),T=N.useCallback(()=>{l({nombreCompleto:"",email:"",rut:"",profile:Ht.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),L=N.useCallback(async G=>{G.preventDefault(),y(null);const{nombreCompleto:Y,email:K,profile:H,curso:F,password:D}=o;if(!Y.trim()||!K.trim()){y("Nombre Completo y Email son obligatorios.");return}if(H===Ht.ESTUDIANTE&&!F){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(D!=null&&D.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const q=Z0();try{if(c){const J=Td(q,"updateUser"),te={...o,password:(D==null?void 0:D.trim())||void 0,curso:H===Ht.ESTUDIANTE?VI(F||""):void 0};await J(te)}else{const J=Td(q,"createUser"),te={...o,curso:H===Ht.ESTUDIANTE?VI(F||""):void 0};await J(te)}await B(),T()}catch(J){console.error("Error al guardar usuario:",J),y(J.message||"Error al guardar el usuario.")}},[o,c,B,T]),R=N.useCallback(G=>{u(G.email),l({nombreCompleto:G.nombreCompleto,email:G.email,rut:G.rut||"",profile:G.profile,password:"",curso:G.curso||"",cursos:G.cursos||[],asignaturas:G.asignaturas||[]}),setTimeout(()=>{const Y=document.querySelector("form");Y&&Y.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),S=N.useCallback(async G=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${G}? Esta acción es irreversible.`))try{const Y=Z0();await Td(Y,"deleteUser")({email:G}),await B()}catch(Y){console.error("Error al eliminar usuario:",Y),y(Y.message||"No se pudo borrar el usuario.")}},[B]),U=async G=>{var D;const Y=(D=G.target.files)==null?void 0:D[0];if(!Y)return;_({message:"Procesando archivo...",isError:!1});const K=Z0(),H=Td(K,"createUser"),F=new FileReader;F.onload=async q=>{var J;try{const te=new Uint8Array((J=q.target)==null?void 0:J.result),ne=pb(te,{type:"array"}),ie=ne.Sheets[ne.SheetNames[0]],oe=Ts.sheet_to_json(ie);if(oe.length===0){_({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const de=oe.map(Se=>{const fe=Se.Nombre||Se.nombre,ye=Se.Correo||Se.correo||Se.Email||Se.email,Le=Se.Curso||Se.curso,Qe=Se.RUT||Se.rut;return!fe||!ye||!Le?Promise.resolve({email:ye||"Sin email",error:"Datos incompletos"}):H({nombreCompleto:String(fe).trim(),email:String(ye).trim(),profile:Ht.ESTUDIANTE,curso:VI(String(Le).trim()),rut:Qe?String(Qe).trim():"",password:"recoleta"}).catch(ue=>({email:ye,error:ue.message}))}),ke=await Promise.all(de),ae=ke.filter(Se=>!Se.error).length,Oe=ke.filter(Se=>Se.error);let Te=`Carga completada. ${ae} estudiantes agregados.`;Oe.length>0&&(Te+=` ${Oe.length} fallaron.`,console.error("Errores en carga masiva:",Oe)),_({message:Te,isError:Oe.length>0}),await B()}catch(te){_({message:`Error: ${te.message}`,isError:!0})}},F.readAsArrayBuffer(Y),G.target.value=""},Q=async G=>{var D;const Y=(D=G.target.files)==null?void 0:D[0];if(!Y)return;j({message:"Procesando archivo...",isError:!1});const K=Z0(),H=Td(K,"createUser"),F=new FileReader;F.onload=async q=>{var J;try{const te=new Uint8Array((J=q.target)==null?void 0:J.result),ne=pb(te,{type:"array"}),ie=ne.Sheets[ne.SheetNames[0]],oe=Ts.sheet_to_json(ie);if(oe.length===0){j({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const de=oe.map(Se=>{const fe=Se.Nombre||Se.nombre,ye=Se.Correo||Se.correo||Se.Email||Se.email,Le=Se.Perfil||Se.perfil||Se.Profile||Se.profile,Qe=Se.RUT||Se.rut;return!fe||!ye||!Le?Promise.resolve({email:ye||"Sin email",error:"Datos incompletos"}):H({nombreCompleto:String(fe).trim(),email:String(ye).trim(),profile:Le,rut:Qe?String(Qe).trim():"",password:"recoleta"}).catch(ue=>({email:ye,error:ue.message}))}),ke=await Promise.all(de),ae=ke.filter(Se=>!Se.error).length,Oe=ke.filter(Se=>Se.error);let Te=`Carga completada. ${ae} usuarios agregados.`;Oe.length>0&&(Te+=` ${Oe.length} fallaron.`,console.error("Errores en carga masiva:",Oe)),j({message:Te,isError:Oe.length>0}),await B()}catch(te){j({message:`Error: ${te.message}`,isError:!0})}},F.readAsArrayBuffer(Y),G.target.value=""},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=N.useMemo(()=>Array.from(new Set(e.filter(G=>G.profile===Ht.ESTUDIANTE&&G.curso).map(G=>G.curso))).sort(),[e]),W=N.useMemo(()=>e.filter(G=>(d===""||G.nombreCompleto.toLowerCase().includes(d.toLowerCase())||G.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||G.profile===h)&&(g===""||G.curso===g)),[e,d,h,g]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),i.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&i.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),O&&i.jsx("p",{className:`text-sm mt-2 ${O.isError?"text-red-600":"text-green-600"}`,children:O.message})]})]})]}),i.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),i.jsxs("form",{onSubmit:L,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",name:"nombreCompleto",value:o.nombreCompleto,onChange:C,className:X,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:o.email,onChange:C,className:X,required:!0,readOnly:!!c})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),i.jsx("input",{type:"password",name:"password",value:o.password||"",onChange:C,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:X})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),i.jsx("input",{type:"text",name:"rut",value:o.rut||"",onChange:C,placeholder:"12.345.678-9",className:X})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),i.jsx("select",{name:"profile",value:o.profile,onChange:C,className:X,required:!0,children:uW.map(G=>i.jsx("option",{value:G,children:G},G))})]}),o.profile===Ht.ESTUDIANTE&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{name:"curso",value:o.curso,onChange:C,className:X,required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(G=>i.jsx("option",{value:G,children:G},G))]})]})]}),o.profile===Ht.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ks.map(G=>{var Y;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[i.jsx("input",{type:"checkbox",checked:((Y=o.cursos)==null?void 0:Y.includes(G))||!1,onChange:()=>k("cursos",G),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),o.profile===Ht.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ua.map(G=>{var Y;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[i.jsx("input",{type:"checkbox",checked:((Y=o.asignaturas)==null?void 0:Y.includes(G))||!1,onChange:()=>k("asignaturas",G),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),i.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&i.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const G=Z0(),K=await Td(G,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",K),y("✅ Custom claim agregado exitosamente")}catch(G){console.error("❌ Error al agregar custom claim:",G),y(`Error: ${G.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),i.jsx("button",{type:"button",onClick:async()=>{var G,Y,K,H,F;try{const{auth:D}=await Ti(async()=>{const{auth:te}=await Promise.resolve().then(()=>mte);return{auth:te}},void 0);console.log("🔍 Usuario actual:",(G=D.currentUser)==null?void 0:G.email);const q=await((Y=D.currentUser)==null?void 0:Y.getIdToken(!0));console.log("🔑 Token refreshed:",!!q);const J=await((K=D.currentUser)==null?void 0:K.getIdTokenResult());console.log("📋 Claims completos:",J==null?void 0:J.claims),console.log("👤 Profile claim:",(H=J==null?void 0:J.claims)==null?void 0:H.profile),((F=J==null?void 0:J.claims)==null?void 0:F.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(J==null?void 0:J.claims)}`)}catch(D){console.error("❌ Error verificando token:",D),y(`Error verificando token: ${D.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{children:i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:G=>f(G.target.value),className:X})}),i.jsx("div",{children:i.jsxs("select",{value:h,onChange:G=>m(G.target.value),className:X,children:[i.jsx("option",{value:"",children:"Todos los perfiles"}),uW.map(G=>i.jsx("option",{value:G,children:G},G))]})}),i.jsx("div",{children:i.jsxs("select",{value:g,onChange:G=>x(G.target.value),className:X,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),z.map(G=>i.jsx("option",{value:G,children:G},G))]})})]}),r?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:W.map(G=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:G.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:G.email}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G.profile===Ht.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":G.profile===Ht.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:G.profile})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[G.profile===Ht.ESTUDIANTE&&i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:G.curso||"Sin curso"}),G.profile===Ht.PROFESORADO&&i.jsxs("div",{className:"space-y-1",children:[G.cursos&&G.cursos.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.cursos.slice(0,3).map(Y=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:Y},Y)),G.cursos.length>3&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.cursos.length-3]})]})]}),G.asignaturas&&G.asignaturas.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.asignaturas.slice(0,2).map(Y=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:Y},Y)),G.asignaturas.length>2&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.asignaturas.length-2]})]})]}),(!G.cursos||G.cursos.length===0)&&(!G.asignaturas||G.asignaturas.length===0)&&i.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),G.profile!==Ht.ESTUDIANTE&&G.profile!==Ht.PROFESORADO&&i.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[i.jsx("button",{onClick:()=>R(G),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),i.jsx("button",{onClick:()=>S(G.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},G.email))})]}),W.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&i.jsx(cJe,{})]})},Tb="seguimiento_dual_records",dJe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},fJe=e=>{const t=Lt(mt(st,Tb),Jt("nombreEstudiante","asc"));return lr(t,n=>{const a=n.docs.map(s=>dJe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},RS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=nr.fromDate(new Date(t[n]+"T00:00:00")))}),t},AJe=async e=>{try{const t=RS(e);return(await on(mt(st,Tb),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},dW=async(e,t)=>{try{const r=Yt(st,Tb,e),n=RS(t);await yi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},hJe=async e=>{try{const t=Yt(st,Tb,e);await wa(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},mJe=async e=>{const t=$g(st),r=mt(st,Tb);let n=0,a=0;for(const s of e){const o=Lt(r,dr("rutEstudiante","==",s.rutEstudiante)),l=await Mr(o);if(l.empty){const c=Yt(r);t.set(c,RS(s)),a++}else{const c=l.docs[0].id,u=Yt(st,Tb,c);t.set(u,RS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},pJe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},gJe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},xJe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},vJe=({record:e,onSave:t,onClose:r})=>{const[n,a]=N.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(m=>({...m,[u]:f==="checkbox"?h:d}))},l=()=>{t(n)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),i.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),i.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),i.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),i.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),i.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),i.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),i.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:o,className:s+" mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),i.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:o,className:s+" mt-1"})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),i.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},bJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0),a=N.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:rg[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:AB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,o]=N.useState(a),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(!1),[_,O]=N.useState(null);N.useEffect(()=>{n(!0);const G=fJe(Y=>{t(Y),n(!1)});return()=>G()},[]);const j=N.useCallback(G=>{const{name:Y,value:K}=G.target;o(H=>({...H,[Y]:K}))},[]),B=N.useCallback(G=>{const{name:Y,value:K}=G.target;h(H=>({...H,[Y]:K}))},[]),C=N.useCallback(()=>{o(a),c(null),g(null)},[a]),k=async G=>{G.preventDefault(),g(null);const K=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(H=>{var F;return!((F=s[H])!=null&&F.trim())});if(K){g(`El campo '${K}' es obligatorio.`);return}try{l?await dW(l,s):await AJe(s),C()}catch(H){console.error(H),g("No se pudo guardar el registro.")}},T=N.useCallback(G=>{window.scrollTo({top:0,behavior:"smooth"}),c(G.id),o(G)},[]),L=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await hJe(G)}catch(Y){console.error(Y),g("No se pudo eliminar el registro.")}},R=G=>{O(G),w(!0)},S=()=>{O(null),w(!1)},U=async G=>{try{await dW(G.id,G),S()}catch(Y){console.error(Y),alert("No se pudieron guardar los cambios de supervisión.")}},Q=()=>{const G=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],Y=Ts.aoa_to_sheet([G]),K=Ts.book_new();Ts.book_append_sheet(K,Y,"Plantilla"),o1(K,"Plantilla_Seguimiento_Dual.xlsx")},X=G=>{var H;const Y=(H=G.target.files)==null?void 0:H[0];if(!Y)return;v({message:"Procesando archivo...",isError:!1});const K=new FileReader;K.onload=async F=>{var D;try{const q=new Uint8Array((D=F.target)==null?void 0:D.result),J=pb(q,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),te=J.SheetNames[0],ne=J.Sheets[te],ie=Ts.sheet_to_json(ne,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo está vacío.");const oe={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},de=Object.keys(ie[0]).map(Te=>Te.trim().toLowerCase()),ae=["nombre","rut","curso 2025","empresa","estado"].find(Te=>!de.includes(Te));if(ae)throw new Error(`Falta la columna requerida: '${ae}'`);const Oe=ie.map((Te,Se)=>{try{const fe={};for(const ye in Te){const Le=oe[ye.trim().toLowerCase()];if(Le){let Qe=Te[ye];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Le)?(Qe=gJe(Qe),Qe&&(fe[Le]=Qe)):Le.includes("realizada")?fe[Le]=xJe(Qe):Qe!=null&&Qe!==""&&(fe[Le]=String(Qe).trim())}}return!fe.nombreEstudiante||!fe.rutEstudiante?(console.warn(`Fila ${Se+2}: Faltan campos requeridos`),null):fe}catch(fe){return console.error(`Error procesando fila ${Se+2}:`,fe),null}}).filter(Te=>Te!==null);if(console.log("Registros procesados:",Oe),Oe.length>0){const{updated:Te,created:Se}=await mJe(Oe);v({message:`Carga exitosa. ${Se} registros creados, ${Te} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(q){console.error("Error completo:",q),v({message:`Error al procesar el archivo: ${q.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},K.readAsArrayBuffer(Y)},z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=N.useMemo(()=>e.filter(G=>(u===""||G.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||G.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||G.rutEstudiante.includes(u))&&(f.curso===""||G.curso===f.curso)&&(f.empresa===""||G.nombreEmpresa===f.empresa)&&(f.estado===""||G.estado===f.estado)&&(f.comuna===""||G.comuna===f.comuna)&&(f.profesor===""||G.profesorTutorEmpresa===f.profesor)).sort((G,Y)=>G.nombreEstudiante.localeCompare(Y.nombreEstudiante)),[e,u,f]);return N.useMemo(()=>{const G=new Set,Y=new Set;return e.forEach(K=>{K.nombreEmpresa&&G.add(K.nombreEmpresa),K.comuna&&Y.add(K.comuna)}),{empresas:Array.from(G).sort(),comunas:Array.from(Y).sort()}},[e]),r?i.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),i.jsxs("form",{onSubmit:k,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),i.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:j,className:z,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),i.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:j,className:z,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{name:"curso",value:s.curso,onChange:j,className:z,required:!0,children:rg.map(G=>i.jsx("option",{value:G,children:G},G))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),i.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:j,className:z,children:[i.jsx("option",{value:"",children:"Seleccione un profesor"}),vF.map(G=>i.jsx("option",{value:G,children:G},G))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),i.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:j,className:z,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),i.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:j,className:z})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),i.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:j,className:z})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),i.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:j,className:z})]}),i.jsxs("div",{className:"lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),i.jsx("select",{name:"estado",value:s.estado,onChange:j,className:z,children:AB.map(G=>i.jsx("option",{value:G,children:G},G))})]})]}),s.estado==="Desvinculado"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),i.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:j,className:`${z} border-red-300`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),i.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:j,className:`${z} border-red-300`})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),i.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&i.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[i.jsx("button",{onClick:Q,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),i.jsx("input",{type:"file",onChange:X,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&i.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:G=>d(G.target.value),className:`${z} md:col-span-2 lg:col-span-1`}),i.jsxs("select",{name:"curso",value:f.curso,onChange:B,className:z,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),rg.map(G=>i.jsx("option",{children:G},G))]}),i.jsxs("select",{name:"estado",value:f.estado,onChange:B,className:z,children:[i.jsx("option",{value:"",children:"Todos los Estados"}),AB.map(G=>i.jsx("option",{children:G},G))]}),i.jsxs("select",{name:"profesor",value:f.profesor,onChange:B,className:z,children:[i.jsx("option",{value:"",children:"Todos los Profesores"}),vF.map(G=>i.jsx("option",{children:G},G))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:W.map(G=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombreEstudiante}),i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:G.curso})]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.nombreEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.profesorTutorEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${pJe[G.estado]}`,children:G.estado})}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[i.jsx("button",{onClick:()=>R(G),className:"text-blue-600 hover:underline",children:"Supervisión"}),i.jsx("button",{onClick:()=>T(G),className:"text-yellow-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>L(G.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},G.id))})]})})]}),y&&_&&i.jsx(vJe,{record:_,onClose:S,onSave:U})]})},NM="actividades_remotas",Hce="respuestas_actividades",Vce="pruebas_estandarizadas",yJe="usuarios",zce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},EM=e=>{const t=zce(e);return t?t.toISOString():void 0},LS=e=>{const t=zce(e);return t?t.toISOString().split("T")[0]:void 0},CM=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:nr.fromDate(t)},_M=e=>nr.fromDate(new Date(e||new Date().toISOString())),wJe=e=>!!e&&/^data:/.test(e),Ib=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(Ib);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=Ib(n))}),t},NJe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const l=typeof Buffer<"u"?Buffer:null;if(l)a=l.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,o=new Uint8Array(s);for(let l=0;l<s;l++)o[l]=a.charCodeAt(l);return{bytes:o,contentType:r}},EJe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:EM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:LS(t.plazoEntrega)||LS(new Date)}},CJe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:EM(t.fechaCompletado)||new Date().toISOString()}},_Je=e=>{const t=e.data()||{};return{id:e.id,...t}},SJe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:EM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:LS(t.plazoEntrega)||LS(new Date)}},kJe=e=>{const t=Lt(mt(st,NM),Jt("fechaCreacion","desc"));return lr(t,r=>e(r.docs.map(EJe)),r=>{console.error("subscribeToActividades error:",r),e([])})},jJe=(e,t)=>{const r=mt(st,Hce),n=Lt(r,Jt("fechaCompletado","desc"));return lr(n,a=>e(a.docs.map(CJe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},BJe=e=>{const t=Lt(mt(st,yJe),Jt("nombreCompleto","asc"));return lr(t,r=>e(r.docs.map(_Je)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},TJe=e=>{const t=Lt(mt(st,Vce),Jt("fechaCreacion","desc"));return lr(t,r=>e(r.docs.map(SJe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},IJe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Ib({...a,fechaCreacion:_M(r),plazoEntrega:CM(n)});return(await on(mt(st,NM),s)).id},FJe=async(e,t)=>{const{fechaCreacion:r,plazoEntrega:n,...a}=t||{},s=Ib({...a});r!==void 0&&(s.fechaCreacion=_M(r)),n!==void 0&&(s.plazoEntrega=CM(n)),await dl(Yt(st,NM,e),s)},OJe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Ib({...a,fechaCreacion:_M(r),plazoEntrega:CM(n)});return(await on(mt(st,Vce),s)).id},DJe=async(e,t)=>{const r=Ib(t);await dl(Yt(st,Hce,e),r)},PJe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},RJe=async(e,t,r)=>{const{bytes:n,contentType:a}=NJe(e),s=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${o}`,u=sN(Ste,c);await nR(u,n,{contentType:a});const d=await Kk(u);return{nombre:t,url:d}},LJe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(o,l)=>{if(wJe(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return RJe(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return IJe(a)},Sy=e=>e?new Date(e).toLocaleDateString("es-CL"):"",fW=e=>e?new Date(e).toLocaleString("es-CL"):"",MJe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),$ce=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},di=(e,t)=>{if(t&&$ce(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>di(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Kl=(e,t,...r)=>{if($ce(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=di(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Ea=({content:e,context:t="unknown"})=>{try{const r=di(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}},zI={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},$I=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],UJe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(null),[d,f]=N.useState(null),[h,m]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[w,_]=N.useState(!1),[O,j]=N.useState(!1),[B,C]=N.useState(!0),[k,T]=N.useState(null),[L,R]=N.useState(""),[S,U]=N.useState(null),[Q,X]=N.useState(null),[z,W]=N.useState([]),[G,Y]=N.useState("carpetas"),[K,H]=N.useState("Todas"),[F,D]=N.useState("Todos"),[q,J]=N.useState(null),[te,ne]=N.useState([]),[ie,oe]=N.useState(!1),[de,ke]=N.useState(null),[ae,Oe]=N.useState(null),[Te,Se]=N.useState([]),[fe,ye]=N.useState(""),Le={asignatura:Ua[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[Qe,ue]=N.useState(Le),we={asignatura:Ua[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[De,He]=N.useState(we);N.useEffect(()=>{C(!0);const me=kJe(t),Ae=TJe(n),_e=jJe(s),Me=BJe(Ie=>{l(Ie),C(!1)});return()=>{me(),Ae(),_e(),Me()}},[]);const Ye=me=>{ue(Ae=>({...Ae,[me.target.name]:me.target.value}))},tt=me=>{He(Ae=>({...Ae,[me.target.name]:me.target.value}))},ft=me=>{ue(Ae=>({...Ae,recursos:{...Ae.recursos,[me.target.name]:me.target.value}}))},$e=me=>{me.target.files&&W(Array.from(me.target.files))},nt=me=>{ue(Ae=>{const _e=Ae.tipos.includes(me)?Ae.tipos.filter(Ie=>Ie!==me):[...Ae.tipos,me],Me={...Ae.cantidadPreguntas};return _e.includes(me)?Me[me]||(Me[me]=zI[me][0]):delete Me[me],{...Ae,tipos:_e,cantidadPreguntas:Me}})},bt=(me,Ae)=>{ue(_e=>({..._e,cantidadPreguntas:{..._e.cantidadPreguntas,[me]:Ae}}))},Bt=(me,Ae=!1)=>{(Ae?He:ue)(Me=>{const Ie=Me.estudiantesDestino||[],ze=Ie.includes(me)?Ie.filter(qe=>qe!==me):[...Ie,me];return{...Me,estudiantesDestino:ze}})},xt=()=>{const{tipos:me,contenido:Ae,asignatura:_e,nivel:Me,cantidadPreguntas:Ie}=Qe;let ze=`Eres un experto diseñador de actividades pedagógicas con énfasis en la Taxonomía de Bloom y metodologías activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${Ae}"
Asignatura: ${_e}
Nivel educativo: ${Me}

REQUISITOS PEDAGÓGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigüedades
2. Distribuye las preguntas según Taxonomía de Bloom: 20% conocimiento, 30% comprensión, 30% aplicación, 20% análisis/evaluación 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prácticas cuando sea posible
5. Para múltiple opción, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rúbricas de desarrollo deben incluir criterios específicos y niveles de desempeño claros
7. En comprensión lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Título descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subtítulo (opcional)",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definición",
      "Concepto 2: breve definición",
      "Concepto 3: breve definición"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return me.forEach(qe=>{const vt=Ie[qe]||zI[qe][0];switch(qe){case"Quiz":ze+=`- "Quiz": Array de ${vt} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opción correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensión de Lectura":ze+=`- "Comprensión de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con información relevante,
  preguntas: Array de ${vt} objetos {
    pregunta: enfocadas en distintos niveles de comprensión (literal, inferencial y crítica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opción correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Términos Pareados":ze+=`- "Términos Pareados": Array de ${vt} objetos {
  concepto: término clave del contenido, claro y específico,
  definicion: explicación precisa y única que no sea ambigua
}
`;break;case"Desarrollo":ze+=`- "Desarrollo": Array de ${vt} objetos {
  pregunta: pregunta que fomente el pensamiento crítico y la aplicación de conocimientos,
  rubrica: criterios de evaluación detallados con niveles de desempeño específicos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),ze+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,me.includes("Quiz")&&(ze+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la función fotosintética de las plantas, ¿qué ocurriría si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentaría su tasa fotosintética debido a la mayor disponibilidad de luz",
    "La planta moriría inmediatamente por exceso de radiación",
    "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habría cambios en la fotosíntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),me.includes("Comprensión de Lectura")&&(ze+=`
Comprensión de Lectura de ejemplo: {
  "texto": "La revolución industrial transformó profundamente las estructuras sociales y económicas de Europa durante el siglo XIX. El paso de una economía agraria y artesanal a una dominada por la industria y la manufactura mecanizada significó cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros años de industrialización. No obstante, este periodo también representó un aumento en la producción de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Según el texto, ¿cuál fue una consecuencia negativa inmediata de la revolución industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminución en la producción de bienes manufacturados",
        "La eliminación de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),ze},xr=()=>{const{contenido:me,objetivosAprendizaje:Ae,asignatura:_e,nivel:Me}=De;return`Eres un experto pedagogo especializado en evaluación educativa y diseño de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON válido según la estructura solicitada.

INFORMACIÓN CURRICULAR:
- Asignatura: ${_e}
- Nivel educativo: ${Me}
- Contenido principal: ${me}
- Objetivos de Aprendizaje: ${Ae}

REQUISITOS PEDAGÓGICOS:
1. Genera preguntas equilibradas en dificultad: 25% básicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada según taxonomía SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorización de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones erróneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensión y aplicación

FORMATO REQUERIDO:
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Título representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evalúe una habilidad específica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE específica que evalúa",
      "justificacion": "Explicación pedagógica de por qué es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECÍFICOS:
- ${_e==="Lenguaje y Comunicación"||_e==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o poético) con temáticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una única respuesta correcta
- Habilidades a evaluar según SIMCE: ${$I.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluación de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function Xt(me,Ae){if(me==="Desarrollo"&&Array.isArray(Ae))return Ae.map((_e,Me)=>{if(typeof _e=="string"){const Ie=_e.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Ie?{pregunta:Kl(Ie[1],`desarrollo-pregunta-${Me}`),rubrica:Kl(Ie[2],`desarrollo-rubrica-${Me}`)}:{pregunta:Kl(_e,`desarrollo-pregunta-simple-${Me}`),rubrica:""}}if(_e&&typeof _e=="object"){const Ie=Kl(_e,`desarrollo-obj-pregunta-${Me}`,"pregunta","Pregunta","texto");let ze="";if(_e.rubrica||_e.Rubrica||_e.rúbrica||_e.Rúbrica){const qe=_e.rubrica||_e.Rubrica||_e.rúbrica||_e.Rúbrica;ze=di(qe,`desarrollo-rubrica-${Me}`)}return{pregunta:Ie,rubrica:ze}}return{pregunta:di(_e,`desarrollo-fallback-${Me}`),rubrica:""}});if(me==="Términos Pareados"&&Array.isArray(Ae))return Ae.map((_e,Me)=>{if(typeof _e=="string"){const Ie=_e.match(/^(.+?)[\s:-–]+(.+)$/);return Ie?{id:Me,concepto:Kl(Ie[1],`pareados-concepto-${Me}`),definicion:Kl(Ie[2],`pareados-definicion-${Me}`)}:{id:Me,concepto:Kl(_e,`pareados-concepto-simple-${Me}`),definicion:""}}return _e&&typeof _e=="object"?{id:Me,concepto:Kl(_e,`pareados-obj-concepto-${Me}`,"concepto","termino"),definicion:Kl(_e,`pareados-obj-definicion-${Me}`,"definicion","significado")}:{id:Me,concepto:di(_e,`pareados-fallback-${Me}`),definicion:""}});if(me==="Comprensión de Lectura"){if(Ae&&typeof Ae=="object"&&!Array.isArray(Ae)&&Array.isArray(Ae.preguntas))return{texto:Kl(Ae,"comprension-texto","texto"),preguntas:Ae.preguntas.map((_e,Me)=>({pregunta:Kl(_e,`comprension-pregunta-${Me}`,"pregunta"),opciones:Array.isArray(_e.opciones)?_e.opciones.map(Ie=>di(Ie,`comprension-opcion-${Me}`)):[],respuestaCorrecta:di(_e.respuestaCorrecta,`comprension-respuesta-${Me}`),puntaje:typeof _e.puntaje=="number"?_e.puntaje:1}))};if(Array.isArray(Ae)){const _e=Ae.map((Ie,ze)=>Kl(Ie,`comprension-bloque-${ze}`,"texto")).join(`

---

`),Me=Ae.flatMap(Ie=>Array.isArray(Ie.preguntas)?Ie.preguntas:[]);return{texto:_e,preguntas:Me.map((Ie,ze)=>({pregunta:Kl(Ie,`comprension-combined-pregunta-${ze}`,"pregunta"),opciones:Array.isArray(Ie.opciones)?Ie.opciones.map(qe=>di(qe,`comprension-combined-opcion-${ze}`)):[],respuestaCorrecta:di(Ie.respuestaCorrecta,`comprension-combined-respuesta-${ze}`),puntaje:typeof Ie.puntaje=="number"?Ie.puntaje:1}))}}}return me==="Quiz"&&Array.isArray(Ae)?Ae.map((_e,Me)=>({pregunta:Kl(_e,`quiz-pregunta-${Me}`,"pregunta"),opciones:Array.isArray(_e.opciones)?_e.opciones.map(Ie=>di(Ie,`quiz-opcion-${Me}`)):[],respuestaCorrecta:di(_e.respuestaCorrecta,`quiz-respuesta-${Me}`),puntaje:typeof _e.puntaje=="number"?_e.puntaje:1})):Ae}const Gr=async me=>{var Ae;if(me.preventDefault(),!Qe.contenido.trim()||Qe.tipos.length===0){T("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),T(null);try{const _e=await Promise.all(z.map(async kt=>({nombre:kt.name,url:await MJe(kt)}))),Me=xt(),Ie=await ao.currentUser.getIdToken(),ze=await fetch("/api/generarActividadRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify({prompt:Me,formData:Qe,selectedFiles:z})});if(!ze.ok)throw new Error("Error al generar la actividad con IA");const qe=await ze.json(),vt={};for(const kt of Qe.tipos){const Qt=(Ae=qe.actividades)==null?void 0:Ae[kt];vt[kt]=Xt(kt,Qt)}let yt="";qe.panelDidactico&&(yt=typeof qe.panelDidactico=="string"?qe.panelDidactico:JSON.stringify(qe.panelDidactico));const Ut={id:"",fechaCreacion:new Date().toISOString(),...Qe,recursos:{...Qe.recursos,archivos:_e},introduccion:di(qe.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:yt,generatedContent:vt};U(Ut)}catch(_e){T(`Error al generar la actividad: ${(_e==null?void 0:_e.message)||_e}`)}finally{y(!1)}},wr=async me=>{if(me.preventDefault(),!De.contenido.trim()||!De.objetivosAprendizaje.trim()){T("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),T(null);try{const Ae=xr(),_e=await ao.currentUser.getIdToken(),Me=await fetch("/api/generarPruebaRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e}`},body:JSON.stringify({prompt:Ae,pruebaFormData:De})});if(!Me.ok)throw new Error("Error al generar la prueba con IA");const Ie=await Me.json();if(!Ie.preguntas||!Array.isArray(Ie.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const ze=(Ie.textos||[]).map((yt,Ut)=>({id:yt.id||Ut+1,titulo:di(yt.titulo,`texto-titulo-${Ut}`)||`Texto ${Ut+1}`,contenido:di(yt.contenido,`texto-contenido-${Ut}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(yt.tipo)?yt.tipo:"informativo",palabras:yt.palabras||(yt.contenido?String(yt.contenido).split(" ").length:0)})),qe=Ie.preguntas.slice(0,30).map((yt,Ut)=>({numero:yt.numero||Ut+1,pregunta:di(yt.pregunta,`pregunta-${Ut}`)||`Pregunta ${Ut+1}`,opciones:Array.isArray(yt.opciones)&&yt.opciones.length>=4?yt.opciones.slice(0,4).map((kt,Qt)=>di(kt,`pregunta-opcion-${Ut}-${Qt}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(yt.respuestaCorrecta)?yt.respuestaCorrecta:"A",habilidad:$I.includes(yt.habilidad)?yt.habilidad:$I[0],justificacion:di(yt.justificacion,`justificacion-${Ut}`)||"Justificación no disponible",...yt.textoId&&typeof yt.textoId=="number"?{textoId:yt.textoId}:{}})),vt={id:"",fechaCreacion:new Date().toISOString(),...De,titulo:di(Ie.titulo,"prueba-titulo")||`Prueba ${De.asignatura}`,instrucciones:di(Ie.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:ze,preguntas:qe};X(vt)}catch(Ae){T(`Error al generar la prueba: ${(Ae==null?void 0:Ae.message)||Ae}`)}finally{y(!1)}},Ur=async()=>{if(S)try{_(!0),await LJe(S),ue(Le),W([]),m(!1),U(null)}catch(me){console.error("Error al guardar la actividad con archivos:",me),T("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},_n=async()=>{if(Q)try{_(!0);const me={...Q,cursosDestino:Q.cursosDestino||[],estudiantesDestino:Q.estudiantesDestino||[],textos:Q.textos||[],preguntas:Q.preguntas.map(Ae=>({...Ae,textoId:Ae.textoId||null}))};await OJe(me),He(we),x(!1),X(null)}catch(me){console.error("Error al guardar la prueba:",me),T("No se pudo guardar la prueba.")}finally{_(!1)}},jr=N.useMemo(()=>{var _e,Me,Ie;const me=c||d;if(!me||!o.length)return[];const Ae=new Map;return!((_e=me.cursosDestino)!=null&&_e.length)&&!((Me=me.estudiantesDestino)!=null&&Me.length)?[]:((Ie=me.estudiantesDestino)!=null&&Ie.length&&o.filter(ze=>ze.profile===Ht.ESTUDIANTE&&me.estudiantesDestino.includes(ze.nombreCompleto)).forEach(ze=>Ae.set(ze.id,ze)),Array.from(Ae.values()).sort((ze,qe)=>ze.nombreCompleto.localeCompare(qe.nombreCompleto)))},[c,d,o]),hs=N.useMemo(()=>{const me=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(Ae=>Ae.actividadId===me)},[a,c,d]),qr=N.useMemo(()=>o.filter(me=>me.profile===Ht.ESTUDIANTE).sort((me,Ae)=>me.nombreCompleto.localeCompare(Ae.nombreCompleto)),[o]),Rn=N.useMemo(()=>L.trim()?qr.filter(me=>me.nombreCompleto.toLowerCase().includes(L.toLowerCase())):qr,[qr,L]),ja=N.useMemo(()=>{const me=new Set;return e.forEach(Ae=>{(Ae.estudiantesDestino||[]).forEach(_e=>{const Me=o.find(Ie=>Ie.profile===Ht.ESTUDIANTE&&Ie.nombreCompleto===_e);Me&&me.add(Me.id)})}),r.forEach(Ae=>{(Ae.estudiantesDestino||[]).forEach(_e=>{const Me=o.find(Ie=>Ie.profile===Ht.ESTUDIANTE&&Ie.nombreCompleto===_e);Me&&me.add(Me.id)})}),a.forEach(Ae=>me.add(Ae.estudianteId)),o.filter(Ae=>Ae.profile===Ht.ESTUDIANTE&&me.has(Ae.id)).sort((Ae,_e)=>Ae.nombreCompleto.localeCompare(_e.nombreCompleto))},[e,r,a,o]),Fr=N.useMemo(()=>o.find(me=>me.id===de)||null,[o,de]),fr=N.useMemo(()=>{if(!Fr)return{asignadas:[],respuestas:[]};const me=[...e.filter(_e=>(_e.estudiantesDestino||[]).includes(Fr.nombreCompleto)).map(_e=>({tipo:"Actividad",item:_e})),...r.filter(_e=>(_e.estudiantesDestino||[]).includes(Fr.nombreCompleto)).map(_e=>({tipo:"Prueba",item:_e}))],Ae=a.filter(_e=>_e.estudianteId===Fr.id);return{asignadas:me,respuestas:Ae}},[Fr,e,r,a]),Xr=()=>i.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas","gestion"].map(me=>i.jsxs("button",{onClick:()=>{Y(me),u(null),f(null),ke(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${G===me?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[me==="carpetas"&&i.jsx(SH,{size:18}),me==="actividades"&&i.jsx(zd,{size:18}),me==="pruebas"&&i.jsx(bte,{size:18}),me==="carpetas"?"Carpetas de Estudiantes":me==="actividades"?"Actividades Remotas":me==="pruebas"?"Pruebas Estandarizadas":"Gestión de Trabajos"]},me)),i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(t1,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:me=>R(me.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),G==="actividades"&&!S&&!c&&i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(eC,{size:18})," Nueva"]}),G==="pruebas"&&!Q&&!d&&i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(eC,{size:18})," Nueva"]})]})]}),ms=N.useMemo(()=>{const me=new Set;return e.forEach(Ae=>(Ae==null?void 0:Ae.asignatura)&&me.add(Ae.asignatura)),["Todas",...Array.from(me).sort()]},[e]),Yn=N.useMemo(()=>{const me=new Set;return e.forEach(_e=>(_e==null?void 0:_e.nivel)&&me.add(_e.nivel)),["Todos","—",...Array.from(me).filter(_e=>!!_e&&_e!=="—").sort()]},[e]),Ba=N.useMemo(()=>{const me=[];for(const Ae of e){const _e=Ae.estudiantesDestino||[];for(const Me of _e){const Ie=o.find(qe=>qe.profile===Ht.ESTUDIANTE&&qe.nombreCompleto===Me)||null,ze=Ie?a.find(qe=>qe.estudianteId===Ie.id&&qe.actividadId===Ae.id):void 0;me.push({actividad:Ae,estudiante:Ie,estado:ze?"Completado":"Pendiente",respuesta:ze})}}return me},[e,o,a]),Rs=N.useMemo(()=>Ba.filter(me=>{const Ae=K==="Todas"||me.actividad.asignatura===K,_e=F==="Todos"||me.actividad.nivel===F;return Ae&&_e}),[Ba,K,F]),Wt=()=>{var me;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Gestión de Trabajos"}),i.jsx("p",{className:"text-slate-500",children:"Organiza envíos y realizados por asignatura y nivel. Reasigna actividades ya creadas sin consumir tokens."})]}),i.jsxs("div",{className:"md:ml-auto flex flex-wrap gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),i.jsx("select",{value:K,onChange:Ae=>H(Ae.target.value),className:"border-slate-300 rounded-md",children:ms.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),i.jsx("select",{value:F,onChange:Ae=>D(Ae.target.value),className:"border-slate-300 rounded-md",children:Yn.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipos"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Rs.map((Ae,_e)=>{var Me,Ie,ze;return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Ea,{content:Ae.actividad.asignatura,context:"gestion-asig"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ae.actividad.nivel||"—"}),i.jsx("td",{className:"px-4 py-3 text-sm",children:((Me=Ae.estudiante)==null?void 0:Me.nombreCompleto)||"—"}),i.jsx("td",{className:"px-4 py-3 text-sm",children:(Ie=Ae.actividad.tipos)==null?void 0:Ie.join(", ")}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ae.estado==="Completado"?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(Ha,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Fd,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ae.respuesta?`${Ae.respuesta.puntaje}/${Ae.respuesta.puntajeMaximo}`:"—"}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Ae.respuesta?Ae.respuesta.nota:"—"}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ae.respuesta?fW(Ae.respuesta.fechaCompletado):"—"}),i.jsx("td",{className:"px-4 py-3 text-sm text-right",children:i.jsx("button",{onClick:()=>{J(Ae.actividad),ne([])},className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Reasignar a nuevos estudiantes",children:"Reasignar"})})]},`${Ae.actividad.id}-${((ze=Ae.estudiante)==null?void 0:ze.id)||_e}`)})})]})}),q&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reasignar Actividad"}),i.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Selecciona estudiantes adicionales para la actividad de ",i.jsx("strong",{children:q.asignatura})," — ",(me=q.tipos)==null?void 0:me.join(", "),"."]}),i.jsx("div",{className:"mb-3",children:i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Ae=>R(Ae.target.value),className:"w-full border-slate-300 rounded-md shadow-sm"})}),i.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2 bg-slate-50",children:(L?Rn:qr).map(Ae=>{const _e=(q.estudiantesDestino||[]).includes(Ae.nombreCompleto);return i.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer ${_e?"opacity-50":"hover:bg-slate-100"}`,children:[i.jsx("input",{type:"checkbox",disabled:_e,checked:te.includes(Ae.nombreCompleto),onChange:()=>{ne(Me=>Me.includes(Ae.nombreCompleto)?Me.filter(Ie=>Ie!==Ae.nombreCompleto):[...Me,Ae.nombreCompleto])},className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ae.nombreCompleto,children:Ae.nombreCompleto}),_e&&i.jsx("span",{className:"ml-auto text-xs text-slate-400",children:"Ya asignado"})]},Ae.id)})}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{J(null),ne([])},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{disabled:ie||te.length===0,onClick:async()=>{if(q)try{oe(!0);const Ae=q.estudiantesDestino||[],_e=Array.from(new Set([...Ae,...te]));await FJe(q.id,{estudiantesDestino:_e}),J(null),ne([])}catch(Ae){console.error("Error reasignando actividad:",Ae),T("No se pudo reasignar la actividad.")}finally{oe(!1)}},className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:ie?"Guardando...":"Confirmar reasignación"})]})]})})]})},xn=()=>{const me=L?Rn:ja;return me.length?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:me.map(Ae=>{const _e=a.filter(ze=>ze.estudianteId===Ae.id),Me=_e.length,Ie=e.filter(ze=>(ze.estudiantesDestino||[]).includes(Ae.nombreCompleto)).length+r.filter(ze=>(ze.estudiantesDestino||[]).includes(Ae.nombreCompleto)).length;return i.jsxs("button",{onClick:()=>ke(Ae.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[i.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:i.jsx(SH,{})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-semibold text-slate-800 truncate",children:Ae.nombreCompleto}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(sw,{size:14})," ",Ae.curso||"—"]})]})]}),i.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Ie}),i.jsx("p",{className:"text-xs",children:"Asignadas"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Me}),i.jsx("p",{className:"text-xs",children:"Entregas"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Fd,{size:16,className:"opacity-70"}),i.jsx("span",{className:"text-xs mt-1",children:_e.length?Sy(_e.sort((ze,qe)=>(ze.fechaCompletado||"").localeCompare(qe.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},Ae.id)})}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},ln=()=>{if(!Fr)return null;const{asignadas:me,respuestas:Ae}=fr;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>ke(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[i.jsx(ZE,{size:18})," Volver"]}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",Fr.nombreCompleto]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:me.map(({tipo:_e,item:Me})=>{var vt;const Ie=Ae.find(yt=>yt.actividadId===Me.id),ze=_e==="Actividad"?`${Me.asignatura} — ${(vt=Me.tipos)==null?void 0:vt.join(", ")}`:Me.titulo,qe=Me.plazoEntrega?Sy(Me.plazoEntrega):"—";return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:_e}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Ea,{content:ze,context:"hist-titulo"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:qe}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ie?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(Ha,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Fd,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ie?`${Ie.puntaje}/${Ie.puntajeMaximo}`:"—"}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Ie?Ie.nota:"—"})]},Me.id)})})]})})]})},Fn=()=>{var me,Ae,_e;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ea,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):i.jsx(Ea,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",Sy((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),i.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(ZE,{size:18})," Volver al listado"]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((me=c==null?void 0:c.tipos)==null?void 0:me.includes("Desarrollo"))&&i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:jr.map(Me=>{var ze;const Ie=hs.find(qe=>qe.estudianteId===Me.id);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:Me.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Ie?i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Ie?`${Ie.puntaje}/${Ie.puntajeMaximo}`:"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Ie?i.jsx("span",{className:parseFloat(Ie.nota)>=4?"text-green-600":"text-red-600",children:Ie.nota}):"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Ie?fW(Ie.fechaCompletado):"-"}),((ze=c==null?void 0:c.tipos)==null?void 0:ze.includes("Desarrollo"))&&i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Ie?i.jsx("button",{onClick:()=>{var vt,yt,Ut;Oe(Ie);const qe=Array.from({length:((yt=(vt=c.generatedContent)==null?void 0:vt.Desarrollo)==null?void 0:yt.length)||0},(kt,Qt)=>({index:Qt,puntaje:0,observacion:""}));Se(qe),ye(((Ut=Ie==null?void 0:Ie.revisionDocente)==null?void 0:Ut.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):i.jsx("span",{className:"text-slate-400",children:"-"})})]},Me.id)})})]})})]}),ae&&((Ae=c==null?void 0:c.tipos)==null?void 0:Ae.includes("Desarrollo"))&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(ae==null?void 0:ae.estudianteNombre)||""]}),i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((_e=c.generatedContent)==null?void 0:_e.Desarrollo)||[]).map((Me,Ie)=>{var ze,qe;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("p",{className:"font-semibold",children:[Ie+1,". ",i.jsx(Ea,{content:Me.pregunta,context:`revision-pregunta-${Ie}`})]}),Me.rubrica&&i.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[i.jsx("strong",{children:"Rúbrica:"})," ",i.jsx(Ea,{content:Me.rubrica,context:`revision-rubrica-${Ie}`})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),i.jsx("input",{type:"number",min:0,step:.5,value:((ze=Te[Ie])==null?void 0:ze.puntaje)??0,onChange:vt=>{const yt=Number(vt.target.value)||0;Se(Ut=>{const kt=[...Ut];return kt[Ie]={...kt[Ie]||{index:Ie,puntaje:0},puntaje:yt},kt})},className:"w-24 border-slate-300 rounded-md"}),i.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((qe=Te[Ie])==null?void 0:qe.observacion)||"",onChange:vt=>{const yt=vt.target.value;Se(Ut=>{const kt=[...Ut];return kt[Ie]={...kt[Ie]||{index:Ie,puntaje:0},observacion:yt},kt})},className:"flex-1 border-slate-300 rounded-md"})]})]},Ie)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),i.jsx("textarea",{rows:3,value:fe,onChange:Me=>ye(Me.target.value),className:"w-full border-slate-300 rounded-md"})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{Oe(null),Se([]),ye("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(ae)try{j(!0);const Me=Number(ae.puntaje)||0,Ie=Number(ae.puntajeMaximo)||0,ze=(Te||[]).reduce((yt,Ut)=>yt+(Number(Ut.puntaje)||0),0),qe=Me+ze,vt=PJe(qe,Ie);await DJe(ae.id,{puntaje:qe,puntajeMaximo:Ie,nota:vt,revisionDocente:{completada:!0,observacionesGenerales:fe||"",detalle:Te||[],puntajeDocente:ze}}),Oe(null),Se([]),ye("")}catch(Me){console.error("Error guardando revisión:",Me),T("No se pudo guardar la revisión del docente.")}finally{j(!1)}},disabled:O,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:O?"Guardando...":"Guardar Revisión"})]})]})})]})},Kn=()=>{var me,Ae;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),i.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(ZE,{size:18})," Volver"]})]}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),i.jsxs("form",{onSubmit:Gr,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:Qe.asignatura,onChange:Ye,className:"w-full border-slate-300 rounded-md shadow-sm",children:Ua.map(_e=>i.jsx("option",{value:_e,children:_e},_e))})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),i.jsx("textarea",{name:"instrucciones",value:(me=Qe.recursos)==null?void 0:me.instrucciones,onChange:ft,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),i.jsx("textarea",{name:"enlaces",value:(Ae=Qe.recursos)==null?void 0:Ae.enlaces,onChange:ft,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),i.jsx("input",{type:"file",multiple:!0,onChange:$e,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:_e=>R(_e.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Rn:qr).map(_e=>{var Me;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Me=Qe.estudiantesDestino)==null?void 0:Me.includes(_e.nombreCompleto),onChange:()=>Bt(_e.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:_e.nombreCompleto,children:_e.nombreCompleto})]},_e.id)})})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"contenido",value:Qe.contenido,onChange:Ye,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:Qe.plazoEntrega,onChange:Ye,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),i.jsx("div",{className:"space-y-3",children:g2e.map(_e=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Qe.tipos.includes(_e),onChange:()=>nt(_e),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:_e})]}),Qe.tipos.includes(_e)&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),zI[_e].map(Me=>i.jsx("button",{type:"button",onClick:()=>bt(_e,Me),className:`px-3 py-1 rounded-full font-semibold text-xs ${Qe.cantidadPreguntas[_e]===Me?"bg-amber-500 text-white":"bg-slate-200"}`,children:Me},Me))]})]},_e))})]})]}),k&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:k}),i.jsx("div",{className:"pt-2 text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?i.jsx(Fd,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},Jn=()=>{var me;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),i.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ea,{content:S==null?void 0:S.introduccion,context:"preview-introduccion"})})]}),(S==null?void 0:S.panelDidactico)&&i.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didáctico - Material de Apoyo"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof S.panelDidactico=="string"&&S.panelDidactico.trim().startsWith("{")){const Ae=JSON.parse(S.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[Ae.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:Ae.titulo}),Array.isArray(Ae.subtitulos)&&Ae.subtitulos.map((_e,Me)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:_e.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:_e.texto})]},Me)),Array.isArray(Ae.conceptosClave)&&Ae.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:Ae.conceptosClave.map((_e,Me)=>i.jsx("li",{className:"text-emerald-800",children:_e},Me))})]}),!Ae.subtitulos&&!Ae.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(Ae,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}})()})]}),(S==null?void 0:S.recursos)&&(S.recursos.instrucciones||S.recursos.enlaces||((me=S.recursos.archivos)==null?void 0:me.length))&&i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),i.jsxs("div",{className:"space-y-3",children:[S.recursos.instrucciones&&i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ea,{content:S.recursos.instrucciones,context:"preview-instrucciones"})}),S.recursos.enlaces&&i.jsx("div",{children:S.recursos.enlaces.split(`
`).map((Ae,_e)=>Ae.trim()&&i.jsx("a",{href:Ae,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:Ae},_e))}),S.recursos.archivos&&S.recursos.archivos.length>0&&i.jsx("ul",{className:"list-disc list-inside",children:S.recursos.archivos.map(Ae=>i.jsx("li",{className:"text-slate-700",children:Ae.nombre},Ae.nombre))})]})]}),S==null?void 0:S.tipos.map(Ae=>{const _e=S.generatedContent[Ae];return _e?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:Ae}),i.jsxs("div",{className:"space-y-4 text-sm",children:[Ae==="Quiz"&&Array.isArray(_e)&&_e.map((Me,Ie)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Ie+1,". ",i.jsx(Ea,{content:Me.pregunta,context:`preview-quiz-pregunta-${Ie}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Me.opciones.map((ze,qe)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+qe),"."]})," ",i.jsx(Ea,{content:ze,context:`preview-quiz-opcion-${Ie}-${qe}`})]},qe))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Ea,{content:Me.respuestaCorrecta,context:`preview-quiz-respuesta-${Ie}`})]})]},Ie)),Ae==="Comprensión de Lectura"&&_e&&typeof _e=="object"&&"preguntas"in _e&&Array.isArray(_e.preguntas)&&i.jsxs("div",{children:[i.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:i.jsx(Ea,{content:_e.texto,context:"preview-lectura-texto"})}),_e.preguntas.map((Me,Ie)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Ie+1,". ",i.jsx(Ea,{content:Me.pregunta,context:`preview-lectura-pregunta-${Ie}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Me.opciones.map((ze,qe)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+qe),"."]})," ",i.jsx(Ea,{content:ze,context:`preview-lectura-opcion-${Ie}-${qe}`})]},qe))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Ea,{content:Me.respuestaCorrecta,context:`preview-lectura-respuesta-${Ie}`})]})]},Ie))]}),Ae==="Términos Pareados"&&Array.isArray(_e)&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-slate-200",children:[i.jsx("thead",{className:"bg-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),i.jsx("tbody",{children:_e.map((Me,Ie)=>i.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[i.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:i.jsx(Ea,{content:Me.concepto,context:`preview-pareado-concepto-${Ie}`})}),i.jsx("td",{className:"p-2 align-top text-slate-700",children:i.jsx(Ea,{content:Me.definicion,context:`preview-pareado-definicion-${Ie}`})})]},Me.id))})]})}),Ae==="Desarrollo"&&Array.isArray(_e)&&_e.map((Me,Ie)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Ie+1,". ",i.jsx(Ea,{content:Me.pregunta,context:`preview-desarrollo-pregunta-${Ie}`})]}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[i.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",i.jsx(Ea,{content:Me.rubrica,context:`preview-desarrollo-rubrica-${Ie}`})]})]},Ie))]})]},Ae):null})]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>U(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:Ur,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},xe=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify_between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),i.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(ZE,{size:18})," Volver"]})]}),i.jsxs("form",{onSubmit:wr,className:"space-y-6 mt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:De.asignatura,onChange:tt,className:"w-full border-slate-300 rounded-md shadow-sm",children:Ua.map(me=>i.jsx("option",{value:me,children:me},me))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),i.jsx("textarea",{name:"objetivosAprendizaje",value:De.objetivosAprendizaje,onChange:tt,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),i.jsx("textarea",{name:"contenido",value:De.contenido,onChange:tt,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:De.plazoEntrega,onChange:tt,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:me=>R(me.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?Rn:qr).map(me=>{var Ae;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ae=De.estudiantesDestino)==null?void 0:Ae.includes(me.nombreCompleto),onChange:()=>Bt(me.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:me.nombreCompleto,children:me.nombreCompleto})]},me.id)})})]})]})]}),k&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:k}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?i.jsx(Fd,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Re=()=>{var me,Ae;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),i.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:i.jsx(Ea,{content:Q==null?void 0:Q.titulo,context:"preview-prueba-titulo"})}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ea,{content:Q==null?void 0:Q.instrucciones,context:"preview-prueba-instrucciones"})})]}),(me=Q==null?void 0:Q.textos)!=null&&me.length?i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),i.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:Q.textos.map((_e,Me)=>i.jsxs("li",{children:[i.jsxs("p",{className:"font-semibold",children:[i.jsx(Ea,{content:_e.titulo,context:`preview-texto-titulo-${Me}`}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",_e.tipo,")"]})]}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:i.jsx(Ea,{content:_e.contenido,context:`preview-texto-contenido-${Me}`})})]},_e.id))})]}):null,(Ae=Q==null?void 0:Q.preguntas)!=null&&Ae.length?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),Q.preguntas.slice(0,10).map((_e,Me)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[_e.numero,". ",i.jsx(Ea,{content:_e.pregunta,context:`preview-pregunta-texto-${Me}`})]}),i.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:_e.opciones.map((Ie,ze)=>i.jsx("li",{children:i.jsx(Ea,{content:Ie,context:`preview-pregunta-opcion-${Me}-${ze}`})},ze))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",_e.respuestaCorrecta]})]},_e.numero))]}):null]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>X(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:_n,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},Be=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(eC,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:e.length>0?e.map(me=>{var Me;const Ae=[];(Me=me.estudiantesDestino)!=null&&Me.length&&Ae.push(`Estudiantes: ${me.estudiantesDestino.length}`);const _e=Ae.length?Ae.join(" | "):"Estudiantes seleccionados";return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Ea,{content:me.asignatura,context:`lista-asignatura-${me.id}`})," — ",me.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",_e," | Creado: ",Sy(me.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>u(me),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},me.id)}):i.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),Fe=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(eC,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:r.length>0?r.map(me=>i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:i.jsx(Ea,{content:me.titulo,context:`lista-prueba-titulo-${me.id}`})}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",Sy(me.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>f(me),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},me.id)):i.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return B?i.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):i.jsxs("div",{className:"animate-fade-in",children:[Xr(),de?ln():Q?Re():S?Jn():c||d?Fn():G==="gestion"?Wt():G==="pruebas"?g?xe():Fe():G==="actividades"?h?Kn():Be():xn()]})},QJe="actividades_remotas",SM="respuestas_actividades",Gce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},AW=e=>{const t=Gce(e);return t?t.toISOString():void 0},HJe=e=>{const t=Gce(e);return t?t.toISOString().split("T")[0]:void 0},kM=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:AW(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:HJe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:AW(t.fechaCompletado)||t.fechaCompletado}},Fb=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},VJe=e=>new Promise(t=>setTimeout(t,e)),zJe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await VJe(s)}else throw a}throw new Error("Max retries exceeded")},$Je=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=Lt(mt(st,QJe),Jt("fechaCreacion","desc"));return lr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const l=s.docs.map(c=>kM(c)).filter(c=>{var u,d,f,h,m;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(m=c.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",l.length),t(l)}catch(o){console.error("❌ Error procesando datos de actividades:",o);const l=Fb(o,"procesamiento de actividades");r==null||r(l)}},error:s=>{const o=Fb(s,"suscripción a actividades");r==null||r(o)}})},GJe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=Lt(mt(st,SM),dr("estudianteId","==",e),Jt("fechaCompletado","desc"));return lr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const o=s.docs.map(l=>{var u;const c=kM(l);return console.log(`📄 Respuesta ${l.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",o.length),t(o)}catch(o){console.error("❌ Error procesando respuestas:",o);const l=Fb(o,"procesamiento de respuestas");r==null||r(l)}},error:s=>{var l;const o=Fb(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((l=s.message)!=null&&l.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),qJe(e,t,r);r==null||r(o)}})},qJe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=Lt(mt(st,SM),dr("estudianteId","==",e));return lr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const o=s.docs.map(l=>kM(l)).sort((l,c)=>new Date(c.fechaCompletado).getTime()-new Date(l.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",o.length),t(o)}catch(o){console.error("❌ Error procesando respuestas (alternativa):",o);const l=Fb(o,"procesamiento de respuestas alternativo");r==null||r(l)}},error:s=>{const o=Fb(s,"suscripción alternativa a respuestas");r==null||r(o)}})},KJe=async e=>zJe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:nr.fromDate(new Date(e.fechaCompletado))},r=await on(mt(st,SM),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),WJe=.6,qO=(e,t,r=WJe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},KO=({className:e="w-5 h-5"})=>i.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),XJe=async(e,t,r,n=3)=>{try{for(let a=1;a<=n;a++)try{const s=ao.currentUser;if(!s)throw new Error("Usuario no autenticado.");const o=await s.getIdToken(),l=await fetch("/api/generarFeedbackAutoaprendizaje",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({actividad:e,respuestas:t,estudianteId:r||s.uid})});if(!l.ok){const d=await l.json();throw new Error(d.error||`Error del servidor: ${l.status}`)}const u=(await l.json()).feedback;if(u)return u;throw new Error("La respuesta de la IA no tiene el formato esperado.")}catch(s){if(console.error(`Error en intento ${a} de generar feedback:`,s),a===n)return null}}catch(a){return console.error("Error al generar feedback con IA:",a),null}},YJe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await KJe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await XJe(t,r);if(s){const{updateDoc:o,doc:l}=await Ti(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>ub);return{updateDoc:u,doc:d}},void 0),{db:c}=await Ti(async()=>{const{db:u}=await Promise.resolve().then(()=>mte);return{db:u}},void 0);return await o(l(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},Co=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Zl=(e,t)=>{if(t&&Co(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didáctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Zl(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Ud=(e,t,...r)=>{if(Co(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Zl(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Zl(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},Ss=({content:e,context:t="unknown"})=>{try{const r=Zl(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}};function hW(e){if(console.log("🔍 Normalizando lectura:",e),Co(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{Co(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,o)=>Zl(s,`opcion-${n}-${o}`)).filter(Boolean):[];return{pregunta:Ud(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Zl(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Ud(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Ud(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(Co(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function mW(e){return console.log("🔍 Normalizando pareados:",e),Co(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Co(t,`pareado-${r}`),{izquierda:Ud(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Ud(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Co(t,`pareado-array-${r}`),{izquierda:Ud(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Ud(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function pW(e){return console.log("🔍 Normalizando desarrollo:",e),Co(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Co(t,`desarrollo-pregunta-${r}`),{enunciado:Ud(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Co(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Ud(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const JJe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=N.useState({}),[s,o]=N.useState(!1),l=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{o(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),Co(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,w)=>(Co(y,`quiz-question-${w}`),{pregunta:Ud(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,O)=>Zl(_,`quiz-opcion-${w}-${O}`)):[],respuestaCorrecta:Zl(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:hW(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],O=_===y.respuestaCorrecta,j=y.puntaje??1;O&&(u+=j),d+=j,f.items.push({pregunta:y.pregunta,respuestaUsuario:Zl(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:O,puntajeObtenido:O?j:0,tipo:m})}),m==="Términos Pareados"){const v=mW(g),y=x||{};v.forEach((w,_)=>{const O=y[_],j=O===w.derecha,B=w.puntaje??1;j&&(u+=B),d+=B,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:Zl(O,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:j,puntajeObtenido:j?B:0,tipo:m})})}if(m==="Desarrollo"){const v=pW(g),y=x||{};v.forEach((w,_)=>{const O=Zl(y[_],`desarrollo-feedback-${_}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:O||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:qO(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:i.jsx(Ss,{content:e.asignatura,context:"actividad-asignatura"})}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ss,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&i.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atención"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[u.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>i.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ss,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),i.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),i.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),Co(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,m)=>(Co(h,`render-quiz-question-${m}`),{pregunta:Ud(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Zl(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:Zl(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),i.jsx("div",{className:"space-y-6",children:f.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(Ss,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(Ss,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensión de Lectura":{const f=hW(d);return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),i.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:i.jsx(Ss,{content:f.texto,context:"lectura-texto"})}),i.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(Ss,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(Ss,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Términos Pareados":{const f=mW(d),h=n[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>i.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[i.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",i.jsx(Ss,{content:g.izquierda,context:`pareado-izq-${x}`})]}),i.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>l(u,{...h,[x]:v.target.value}),children:[i.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>i.jsx("option",{value:v,children:Zl(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=pW(d),h=n[u]||{};return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),i.jsx("div",{className:"space-y-6",children:f.map((m,g)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",i.jsx(Ss,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),i.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>l(u,{...h,[g]:x.target.value})})]},g))}),i.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),i.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:i.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?i.jsx(KO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},ZJe=({currentUser:e})=>{var S,U,Q;const[t,r]=N.useState(!0),[n,a]=N.useState("list"),[s,o]=N.useState("actividades"),[l,c]=N.useState(!1),[u,d]=N.useState([]),[f,h]=N.useState([]),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(null),[_,O]=N.useState("connecting");N.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let X=!1,z=!1,W=!1,G=!1;const Y=()=>{(X||W)&&(z||G)&&(W&&G?(O("error"),w("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):O("connected"),r(!1),console.log("✅ Carga completada - Actividades:",X,"Respuestas:",z))},K=$Je(e,F=>{console.log("📋 Actividades recibidas:",F.length),F.forEach((D,q)=>{console.log(`  ${q+1}. ${D.asignatura} (ID: ${D.id})`),Co(D,`actividad-${q}`)}),d(F),X=!0,Y()},F=>{console.error("❌ Error en suscripción de actividades:",F),W=!0,Y()}),H=GJe(e.id,F=>{console.log("📝 Respuestas del estudiante recibidas:",F.length),F.forEach((D,q)=>{var J;console.log(`  ${q+1}. Actividad ${D.actividadId} - Fecha: ${D.fechaCompletado}`),D.nota&&console.log(`    Nota: ${D.nota}`),(J=D.revisionDocente)!=null&&J.completada&&console.log("    ✅ Con revisión docente completada"),Co(D,`respuesta-${q}`)}),h(F),z=!0,Y()},F=>{var D;console.error("❌ Error en suscripción de respuestas:",F),(D=F.message)!=null&&D.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),w("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),G=!0,Y()});return()=>{console.log("🧹 Limpiando subscripciones"),K==null||K(),H==null||H()}},[e]),N.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:u.length,respuestas:f.length,vista:n,conexion:_})},[u.length,f.length,n,_,t]);const j=X=>{if(console.log("🔍 Iniciando actividad:",X.asignatura),k.has(X.id)){w("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}g(X),a("activity"),w(null)},B=X=>{console.log("🔍 Viendo resultado:",X.actividadId);const z=u.find(W=>W.id===X.actividadId);z?(g(z),v(X),a("result"),w(null)):w("No se pudieron cargar los detalles de esta actividad completada.")},C=N.useCallback(async(X,z)=>{if(!m)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:m.id,estudianteId:e.id,puntaje:X.puntaje,nota:X.nota}),a("result"),c(!0),w(null);const W={actividadId:m.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...X,retroalimentacionDetallada:z};console.log("💾 Guardando respuesta...");try{const G=await YJe(W,m,z);console.log("✅ Respuesta completada con ID:",G.id),v(G),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(G){console.error("❌ Error crítico al completar actividad:",G),w("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),v({id:"error-temp",...W,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{c(!1)}},[m,e.id]),k=N.useMemo(()=>{if(f.length===0)return new Set;const X=new Set(f.map(z=>z.actividadId));return console.log("🎯 IDs completados calculados:",X.size),X},[f]),T=N.useMemo(()=>{if(u.length===0)return[];const X=u.filter(z=>!k.has(z.id));return console.log("⏳ Actividades pendientes:",X.length),X},[u,k]),L=N.useMemo(()=>{if(f.length===0)return[];const X=f.map(z=>{const W=u.find(G=>G.id===z.actividadId);return{...z,asignatura:(W==null?void 0:W.asignatura)||"Actividad no disponible",tipos:(W==null?void 0:W.tipos)||[]}}).sort((z,W)=>new Date(W.fechaCompletado).getTime()-new Date(z.fechaCompletado).getTime());return console.log("📖 Historial preparado:",X.length),X},[f,u]),R=N.useMemo(()=>{if(L.length===0)return[];const X=new Map;for(const W of L){const G=W.asignatura||"Sin asignatura";let Y;if(W.nota!=null){const H=parseFloat(W.nota);isNaN(H)||(Y=H)}if(Y==null&&typeof W.puntaje=="number"&&typeof W.puntajeMaximo=="number"&&W.puntajeMaximo>0){const H=qO(W.puntaje,W.puntajeMaximo),F=parseFloat(H);isNaN(F)||(Y=F)}if(Y==null||isNaN(Y))continue;const K=X.get(G)||{suma:0,cantidad:0};X.set(G,{suma:K.suma+Y,cantidad:K.cantidad+1})}const z=Array.from(X.entries()).map(([W,G])=>({asignatura:W,promedio:Math.round(G.suma/G.cantidad*100)/100,cantidad:G.cantidad}));return z.sort((W,G)=>G.promedio-W.promedio),z},[L]);return t?i.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[i.jsx(KO,{className:"w-8 h-8 text-slate-500"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),i.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",_==="connecting"?"Conectando...":_==="connected"?"Conectado":"Error de conexión"]})]})]}):_==="error"&&u.length===0&&f.length===0?i.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[i.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),i.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),i.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&m?i.jsx(JJe,{actividad:m,onComplete:C,currentUser:e}):n==="result"&&x?(console.log("🔍 Renderizando resultado:",x),i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),i.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",i.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[x.puntaje," / ",x.puntajeMaximo]})]}),i.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",i.jsx("span",{className:`font-bold text-2xl ${parseFloat(x.nota)>=4?"text-green-600":"text-red-600"}`,children:x.nota})]})]}),(m==null?void 0:m.recursos)&&i.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),m.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ss,{content:m.recursos.instrucciones,context:"resultado-instrucciones"})})]}),m.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.enlaces.split(`
`).filter(Boolean).map((X,z)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),i.jsx("a",{href:X.startsWith("http")?X:`https://${X}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:X})]},z))})]}),m.recursos.archivos&&m.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.archivos.map((X,z)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),i.jsx("a",{href:X.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:X.nombre||`Archivo ${z+1}`})]},z))})]})]}),y&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",y]})}),l&&i.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[i.jsx(KO,{className:"w-8 h-8 text-blue-500"}),i.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),i.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),x.retroalimentacionAI&&!l&&i.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),i.jsx("p",{className:"text-slate-700 mt-1",children:i.jsx(Ss,{content:x.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((S=x.retroalimentacionAI.desafios)==null?void 0:S.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.desafios.map((X,z)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(Ss,{content:X.pregunta,context:`feedback-desafio-pregunta-${z}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(Ss,{content:X.explicacionDelError,context:`feedback-desafio-explicacion-${z}`})})]},z))})]}),((Q=(U=x.retroalimentacionAI)==null?void 0:U.comentariosDesarrollo)==null?void 0:Q.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.comentariosDesarrollo.map((X,z)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(Ss,{content:X.pregunta,context:`feedback-desarrollo-pregunta-${z}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(Ss,{content:X.retroalimentacionBreve,context:`feedback-desarrollo-retro-${z}`})})]},z))})]})]}),x.retroalimentacionDetallada&&i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),x.retroalimentacionDetallada.items.map((X,z)=>{const W=X.esCorrecta===null,G=W?"border-slate-400 bg-slate-50":X.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",Y=W?"🕓":X.esCorrecta?"✅":"❌";return i.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${G}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[z+1,". ",i.jsx(Ss,{content:X.pregunta,context:`feedback-item-pregunta-${z}`})]}),i.jsx("span",{className:"font-bold text-lg",children:Y})]}),i.jsxs("div",{className:"mt-2 text-sm pl-4",children:[i.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",i.jsx("span",{className:"font-medium",children:i.jsx(Ss,{content:X.respuestaUsuario,context:`feedback-item-respuesta-${z}`})})]}),!W&&!X.esCorrecta&&i.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",i.jsx("span",{className:"font-medium text-green-700",children:i.jsx(Ss,{content:X.respuestaCorrecta,context:`feedback-item-correcta-${z}`})})]}),W&&i.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},z)})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{onClick:()=>{a("list"),g(null),v(null),w(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[y&&i.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:i.jsxs("p",{className:"text-amber-800",children:["⚠️ ",y]})}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"actividades",label:"Actividades Pendientes"},{key:"historial",label:"Historial"},{key:"promedios",label:"Promedios Remotos"}].map(X=>i.jsx("button",{onClick:()=>o(X.key),className:`px-4 py-2 rounded-lg border transition-colors ${s===X.key?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-700 hover:bg-slate-50 border-slate-200"}`,children:X.label},X.key))}),s==="actividades"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),i.jsx("p",{className:"text-slate-500 mb-2",children:"Completa las actividades asignadas por tus profesores."}),i.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:i.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),i.jsx("div",{className:"space-y-4",children:T.length>0?T.map(X=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Ss,{content:X.asignatura,context:`actividad-asignatura-${X.id}`})," - ",X.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",i.jsx(Ss,{content:typeof X.plazoEntrega=="string"?X.plazoEntrega:"",context:`actividad-plazo-${X.id}`})]})]}),i.jsx("button",{onClick:()=>j(X),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},X.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]})}),s==="historial"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),i.jsx("div",{className:"space-y-4",children:L.length>0?L.map(X=>i.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Ss,{content:X.asignatura,context:`completada-asignatura-${X.id}`})," - ",X.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(X.fechaCompletado).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",i.jsx("span",{className:`font-bold text-lg ${(parseFloat(X.nota)||0)>=4?"text-green-600":"text-red-600"}`,children:X.nota??qO(X.puntaje,X.puntajeMaximo)})]}),i.jsx("button",{onClick:()=>B(X),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},X.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📚"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]}),s==="promedios"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Promedios Remotos"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Promedio de tus calificaciones por asignatura en actividades remotas."}),R.length>0?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:R.map(X=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 shadow-sm",children:[i.jsx("p",{className:"font-bold text-slate-800 mb-1",children:X.asignatura}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-2xl font-extrabold ${X.promedio>=4?"text-green-600":"text-red-600"}`,children:X.promedio.toFixed(2)}),i.jsx("p",{className:"text-xs text-slate-500",children:"Promedio (1-7)"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-slate-700 font-semibold",children:X.cantidad}),i.jsx("p",{className:"text-xs text-slate-500",children:"actividades"})]})]})]},X.asignatura))}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📊"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Sin datos aún"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Completa actividades para ver tus promedios por asignatura."})]})]})]})},tj="estudiantes_inclusion",eZe="usuarios",qce=e=>{const t=e.data();return{id:e.id,...t}},tZe=e=>{const t=Lt(mt(st,tj));return lr(t,n=>{const a=n.docs.map(s=>qce(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},rZe=e=>{const t=Lt(mt(st,eZe));return lr(t,n=>{const a=n.docs.map(s=>qce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},nZe=async e=>{try{return(await on(mt(st,tj),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},aZe=async(e,t)=>{try{const{id:r,...n}=t,a=Yt(st,tj,e);await yi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},sZe=async e=>{try{const t=Yt(st,tj,e);await wa(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},iZe=({estudiantes:e})=>{const t=N.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=N.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=N.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=N.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=N.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...n.map(l=>l.cantidad));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),i.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),i.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),i.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),i.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),i.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,"°"]}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),i.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},gW=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=N.useState(""),[a,s]=N.useState(""),[o,l]=N.useState(!1),c=N.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||f.curso===a;return h&&m}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=N.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),l(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),i.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),l(f.target.value.length>0||a!=="")},onFocus:()=>l(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),i.jsxs("select",{value:a,onChange:f=>{s(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>i.jsx("option",{value:f,children:f},f))]})]})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),i.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),i.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&i.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?i.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):i.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>i.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),i.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),i.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},oZe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=N.useState(S_[0]),s=()=>r(e,n);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),i.jsx("select",{id:"dificultad",value:n,onChange:o=>a(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:S_.map(o=>i.jsx("option",{value:o,children:o},o))})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},lZe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,o]=N.useState("intervenciones"),[l,c]=N.useState(e);N.useEffect(()=>c(e),[e]);const[u,d]=N.useState(null),f={responsable:"",accion:"",observaciones:""},[h,m]=N.useState(f),[g,x]=N.useState({trimestre:"T1",meta:""}),[v,y]=N.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=N.useState(null),[O,j]=N.useState(!1),B={motivo:"",acuerdos:"",asistentes:""},[C,k]=N.useState(B),T=()=>{r(l),t()},L=async()=>{var Se;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ae,Oe=!1;u?ae=(l.intervenciones||[]).map(fe=>fe.id===u.id?{...fe,...h}:fe):(Oe=!0,ae=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...l.intervenciones||[]]);const Te=ae.sort((fe,ye)=>new Date(ye.fecha).getTime()-new Date(fe.fecha).getTime());if(c(fe=>({...fe,intervenciones:Te})),Oe)try{await hEe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(Se=a?a(h.responsable):void 0)==null?void 0:Se.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${l.nombre}. Acción: ${h.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(fe){console.error("Error al crear notificación:",fe),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(f),d(null)},R=ae=>{d(ae),m({responsable:ae.responsable,accion:ae.accion,observaciones:ae.observaciones})},S=ae=>{window.confirm("¿Eliminar esta intervención?")&&c(Oe=>({...Oe,intervenciones:(Oe.intervenciones||[]).filter(Te=>Te.id!==ae)}))},U=ae=>{const{name:Oe,value:Te}=ae.target;c(Se=>({...Se,[Oe]:Te,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!g.meta.trim())return;const ae={...g,id:crypto.randomUUID(),cumplida:!1};c(Oe=>({...Oe,metasProgreso:[...Oe.metasProgreso||[],ae]})),x({trimestre:"T1",meta:""})},X=ae=>{c(Oe=>({...Oe,metasProgreso:(Oe.metasProgreso||[]).map(Te=>Te.id===ae?{...Te,cumplida:!Te.cumplida}:Te)}))},z=ae=>{c(Oe=>({...Oe,metasProgreso:(Oe.metasProgreso||[]).filter(Te=>Te.id!==ae)}))},W=N.useMemo(()=>{const ae=l.metasProgreso||[];if(ae.length===0)return{percent:0,color:"bg-slate-300"};const Oe=ae.filter(fe=>fe.cumplida).length,Te=Math.round(Oe/ae.length*100),Se=Te<40?"bg-red-500":Te<75?"bg-yellow-500":"bg-green-500";return{percent:Te,color:Se}},[l.metasProgreso]),G=N.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const ae=new Date(l.fechaActualizacionApoyos),Oe=new Date;return Oe.setMonth(Oe.getMonth()-3),ae<Oe},[l.fechaActualizacionApoyos]),Y=()=>{if(!v.titulo.trim()||!v.fecha)return;const ae={...v,id:crypto.randomUUID(),resuelta:!1};c(Oe=>({...Oe,alertas:[...Oe.alertas||[],ae].sort((Te,Se)=>new Date(Te.fecha).getTime()-new Date(Se.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},K=ae=>{c(Oe=>({...Oe,alertas:(Oe.alertas||[]).map(Te=>Te.id===ae?{...Te,resuelta:!Te.resuelta}:Te)}))},H=ae=>{c(Oe=>({...Oe,alertas:(Oe.alertas||[]).filter(Te=>Te.id!==ae)}))},F=ae=>{ae.target.files&&ae.target.files[0]&&_(ae.target.files[0])},D=()=>{if(!w)return;j(!0);const ae=new FileReader;ae.readAsDataURL(w),ae.onloadend=()=>{const Oe={id:crypto.randomUUID(),nombre:w.name,url:ae.result,fechaSubida:new Date().toISOString()};c(Te=>({...Te,archivos:[Oe,...Te.archivos||[]]})),_(null),j(!1)},ae.onerror=()=>{alert("Error al leer el archivo."),j(!1)}},q=ae=>{window.confirm("¿Eliminar este archivo?")&&c(Oe=>({...Oe,archivos:(Oe.archivos||[]).filter(Te=>Te.id!==ae)}))},J=()=>{if(!C.motivo.trim()||!C.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ae={...C,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Oe=>({...Oe,reuniones:[ae,...Oe.reuniones||[]].sort((Te,Se)=>new Date(Se.fecha).getTime()-new Date(Te.fecha).getTime())})),k(B)},te=ae=>{window.confirm("¿Eliminar este registro de reunión?")&&c(Oe=>({...Oe,reuniones:(Oe.reuniones||[]).filter(Te=>Te.id!==ae)}))},ne=()=>{var ue,we,De;const ae=new Ar("p","mm","a4"),Oe=20,Te=ae.internal.pageSize.getWidth(),Se=ae.internal.pageSize.getHeight();let fe=Oe;const ye=He=>{He.setFontSize(10),He.setTextColor(100),He.text("Ficha de Seguimiento - Módulo Inclusión",Oe,15)};ye(ae),ae.setFontSize(18),ae.setFont("helvetica","bold"),ae.setTextColor(40),ae.text(l.nombre,Oe,fe+10),fe+=15,ae.setFontSize(11),ae.setFont("helvetica","normal"),ae.setTextColor(80),ae.text(`Curso: ${l.curso}`,Oe,fe),ae.text(`Dificultad: ${l.dificultad}`,Oe,fe+6),fe+=15;const Le=He=>{fe+He>Se-Oe&&(ae.addPage(),ye(ae),fe=Oe)},Qe=He=>{Le(15),ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text(He,Oe,fe),fe+=10};if((ue=l.intervenciones)!=null&&ue.length&&(Qe("Historial de Intervenciones"),gi(ae,{startY:fe,head:[["Fecha","Responsable","Acción","Observaciones"]],body:l.intervenciones.map(He=>[new Date(He.fecha).toLocaleDateString("es-CL"),He.responsable,He.accion,He.observaciones||""]),theme:"grid",didDrawPage:()=>ye(ae)}),fe=ae.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){Le(30),Qe("Seguimiento y Apoyos"),ae.setFontSize(11),ae.setFont("helvetica","normal");const He=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,Ye=ae.splitTextToSize(He,Te-Oe*2);ae.text(Ye,Oe,fe),fe+=Ye.length*5+10}(we=l.metasProgreso)!=null&&we.length&&(Le(30),Qe("Metas de Progreso"),gi(ae,{startY:fe,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(He=>[He.trimestre,He.meta,He.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>ye(ae)}),fe=ae.lastAutoTable.finalY+10),(De=l.reuniones)!=null&&De.length&&(Qe("Reuniones con Apoderados"),gi(ae,{startY:fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(He=>[new Date(He.fecha).toLocaleDateString("es-CL"),He.motivo,He.acuerdos||"",He.asistentes]),theme:"grid",didDrawPage:()=>ye(ae)})),ae.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),i.jsxs("select",{value:h.responsable,onChange:ae=>m(Oe=>({...Oe,responsable:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ae=>i.jsx("option",{value:ae,children:ae},ae))]}),h.responsable&&!u&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),i.jsx("textarea",{value:h.accion,onChange:ae=>m(Oe=>({...Oe,accion:ae.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:h.observaciones,onChange:ae=>m(Oe=>({...Oe,observaciones:ae.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[u&&i.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),i.jsx("button",{onClick:L,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(ae=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.accion}),ae.observaciones&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ae.observaciones}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ae.fecha).toLocaleString("es-CL")," - ",ae.responsable]}),i.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[i.jsx("button",{onClick:()=>R(ae),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),i.jsx("button",{onClick:()=>S(ae.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ae.id)),(!l.intervenciones||l.intervenciones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:"📋"}),i.jsx("p",{children:"No hay intervenciones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),oe=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),G&&i.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),i.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),i.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",W.percent,"%"]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:i.jsx("div",{className:`${W.color} h-4 rounded-full transition-all duration-500`,style:{width:`${W.percent}%`}})})]}),i.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[i.jsxs("select",{value:g.trimestre,onChange:ae=>x(Oe=>({...Oe,trimestre:ae.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"T1",children:"T1"}),i.jsx("option",{value:"T2",children:"T2"}),i.jsx("option",{value:"T3",children:"T3"})]}),i.jsx("input",{value:g.meta,onChange:ae=>x(Oe=>({...Oe,meta:ae.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),i.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(ae=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsx("input",{type:"checkbox",checked:ae.cumplida,onChange:()=>X(ae.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${ae.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[i.jsxs("strong",{children:[ae.trimestre,":"]})," ",ae.meta]}),i.jsx("button",{onClick:()=>z(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ae.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),i.jsx("p",{children:"No hay metas definidas"}),i.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),de=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),i.jsx("input",{type:"text",value:v.titulo,onChange:ae=>y(Oe=>({...Oe,titulo:ae.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:ae=>y(Oe=>({...Oe,fecha:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("button",{onClick:Y,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(ae=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsx("input",{type:"checkbox",checked:ae.resuelta,onChange:()=>K(ae.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${ae.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ae.titulo," (",new Date(ae.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),i.jsx("button",{onClick:()=>H(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ae.id)),(!l.alertas||l.alertas.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),i.jsx("p",{children:"No hay alertas programadas"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),i.jsx("input",{type:"file",onChange:F,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),i.jsx("button",{onClick:D,disabled:!w||O,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:O?"Subiendo...":"Subir"}),w&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(ae=>i.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsxs("a",{href:ae.url,download:ae.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ae.nombre,children:["📎 ",ae.nombre]}),i.jsx("button",{onClick:()=>q(ae.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ae.id)),(!l.archivos||l.archivos.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"📁"}),i.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),ke=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),i.jsx("input",{value:C.motivo,onChange:ae=>k(Oe=>({...Oe,motivo:ae.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:C.acuerdos,onChange:ae=>k(Oe=>({...Oe,acuerdos:ae.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{value:C.asistentes,onChange:ae=>k(Oe=>({...Oe,asistentes:ae.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"text-right",children:i.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!C.motivo.trim()||!C.asistentes.trim(),children:"Guardar Reunión"})})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(ae=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.motivo}),ae.acuerdos&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[i.jsx("strong",{children:"Acuerdos:"})," ",ae.acuerdos]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ae.fecha).toLocaleString("es-CL")," - Asistentes: ",ae.asistentes]})]}),i.jsx("button",{onClick:()=>te(ae.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ae.id)),(!l.reuniones||l.reuniones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:"👥"}),i.jsx("p",{children:"No hay reuniones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ae=>ae.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:ne,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),i.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),i.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:i.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ae=>i.jsx("button",{onClick:()=>o(ae),className:`${s===ae?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ae==="alertas"?"Alertas y Archivos":ae==="seguimiento"?"Seguimiento y Metas":ae},ae))})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ie(),s==="seguimiento"&&oe(),s==="reuniones"&&ke(),s==="alertas"&&de()]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),i.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},xW=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState([]),[s,o]=N.useState(!0),[l,c]=N.useState(null),[u,d]=N.useState(null),[f,h]=N.useState(""),[m,g]=N.useState(""),[x,v]=N.useState(""),[y,w]=N.useState("dashboard");N.useEffect(()=>{o(!0);const L=tZe(S=>{r(S),o(!1)}),R=rZe(S=>a(S));return()=>{L(),R()}},[]);const _=async(L,R)=>{if(t.some(U=>U.nombre===L.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const S={nombre:L.nombreCompleto,curso:L.curso||"",dificultad:R,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await nZe(S),alert(`✅ ${L.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(U){console.error("Error al agregar estudiante:",U),alert("Hubo un error al agregar al estudiante al programa.")}},O=async L=>{try{await aZe(L.id,L)}catch(R){console.error("Error al actualizar la ficha:",R),alert("Hubo un error al guardar los cambios en la ficha.")}},j=async L=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await sZe(L),(l==null?void 0:l.id)===L&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(R){console.error("Error al eliminar estudiante:",R),alert("Hubo un error al eliminar al estudiante.")}},B=L=>{const R=k;if(R.length===0){alert("No hay datos para exportar.");return}const S=R.map(U=>{var Q;return{Nombre:U.nombre,Curso:U.curso,Dificultad:U.dificultad,"N° Intervenciones":((Q=U.intervenciones)==null?void 0:Q.length)||0,"Alertas Pendientes":(U.alertas||[]).filter(X=>!X.resuelta).length,"Metas Cumplidas":(U.metasProgreso||[]).filter(X=>X.cumplida).length,"Total Metas":(U.metasProgreso||[]).length,"Última Actualización":U.fechaActualizacionApoyos?new Date(U.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(L==="xlsx"){const U=Ts.json_to_sheet(S),Q=Ts.book_new();Ts.book_append_sheet(Q,U,"Estudiantes_Inclusion"),o1(Q,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const U=new Ar;U.text("Listado de Estudiantes - Programa de Inclusión",14,15),gi(U,{startY:20,head:[Object.keys(S[0])],body:S.map(Object.values)}),U.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},C=N.useMemo(()=>n.filter(L=>{var R;return L.profile===Ht.ESTUDIANTE&&(((R=e.cursos)==null?void 0:R.includes(L.curso||""))||e.profile===Ht.SUBDIRECCION)}).filter(L=>!t.some(R=>R.nombre===L.nombreCompleto)),[n,t,e]),k=N.useMemo(()=>t.filter(L=>L.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||L.curso===m)&&(x===""||L.dificultad===x)).sort((L,R)=>L.nombre.localeCompare(R.nombre)),[t,f,m,x]),T=N.useMemo(()=>n.filter(L=>L.profile===Ht.PROFESORADO).map(L=>L.nombreCompleto).sort(),[n]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),i.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),i.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):i.jsxs(i.Fragment,{children:[y==="dashboard"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx(iZe,{estudiantes:t}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),i.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),i.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(L=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:L.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L.curso," - ",L.dificultad]})]}),i.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},L.id)),t.length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📚"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),i.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),i.jsx(gW,{estudiantesDisponibles:C,onSelect:L=>d(L)})]})]}),y==="lista"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",k.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>B("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),i.jsx("button",{onClick:()=>B("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),i.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:L=>h(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),i.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),ks.map(L=>i.jsx("option",{value:L,children:L},L))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),i.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas las Dificultades"}),S_.map(L=>i.jsx("option",{value:L,children:L},L))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-blue-600",children:k.length}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-green-600",children:t.length}),i.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((L,R)=>L+(R.alertas||[]).filter(S=>!S.resuelta).length,0)}),i.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(L=>L.curso)).size}),i.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[k.map(L=>{var R;return i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),(L.alertas||[]).filter(S=>!S.resuelta).length>0&&i.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(L.alertas||[]).filter(S=>!S.resuelta).length," alertas"]})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[L.curso," - ",L.dificultad]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{children:[((R=L.intervenciones)==null?void 0:R.length)||0," intervenciones"]}),i.jsxs("span",{children:[(L.metasProgreso||[]).filter(S=>S.cumplida).length," metas cumplidas"]}),L.fechaActualizacionApoyos&&i.jsxs("span",{children:["Últ. actualización: ",new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),i.jsx("button",{onClick:()=>j(L.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},L.id)}),k.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),i.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&i.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),i.jsx(gW,{estudiantesDisponibles:C,onSelect:L=>d(L)})]})]}),u&&i.jsx(oZe,{student:u,onClose:()=>d(null),onConfirm:(L,R)=>{_(L,R),d(null)}}),l&&i.jsx(lZe,{student:l,onClose:()=>c(null),onSave:O,profesores:T})]})},Kce="asistencia_dual",cZe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},uZe=(e,t)=>{const r=Lt(mt(st,Kce),dr("emailEstudiante","==",e),Jt("fechaHora","desc"));return lr(r,a=>{const s=a.docs.map(o=>cZe(o));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},dZe=async e=>{try{const t={...e,fechaHora:nr.fromDate(new Date(e.fechaHora))};await on(mt(st,Kce),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},fZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),AZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),hZe=({currentUser:e})=>{const[t,r]=N.useState(e.curso||""),[n,a]=N.useState([]),[s,o]=N.useState(!1),[l,c]=N.useState(!0),[u,d]=N.useState(null);N.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=uZe(e.email,m=>{a(m),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}o(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await dZe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},m=>{console.error("Geolocation error:",m);let g="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}d({text:g,type:"error"}),o(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),i.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),i.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Mi curso --"}),rg.map(h=>i.jsx("option",{value:h,children:h},h))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),i.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&i.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&i.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?i.jsx(fZe,{}):i.jsx(AZe,{}),h.tipo]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},mZe=async()=>{try{console.log("🔍 Debugging users collection...");const e=mt(pr,"users"),t=Lt(e,Vd(10)),r=await Mr(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,o)=>{const l=s.data(),c={id:s.id,data:l,fields:Object.keys(l)};n.sampleDocs.push(c),Object.keys(l).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(l=>s in l.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},pZe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=nr.fromDate(r),s=nr.fromDate(n),o=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const h=mt(pr,f);try{const m=Lt(h,dr("fechaHora",">=",a),dr("fechaHora","<=",s)),g=await Mr(m);l[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=Lt(h,dr(v,">=",a),dr(v,"<=",s)),w=await Mr(y);l[f]={exists:!0,hasDateField:v,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=Lt(h,Jt("__name__"),Vd(5)),y=await Mr(v);l[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){l[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},gZe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const o=nr.fromDate(a),l=nr.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((m,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const v=x.getDate();return m[v]=(m[v]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const m=mt(pr,h),g=Lt(m,dr("fechaHora",">=",o),dr("fechaHora","<=",l),Jt("fechaHora","desc")),x=lr(g,v=>{console.log(`📋 ${h}: ${v.size} documentos encontrados con filtro`),v.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),v.docs.forEach((w,_)=>{var O;if(_<5){const j=w.data();let B;(O=j.fechaHora)!=null&&O.toDate?B=j.fechaHora.toDate():typeof j.fechaHora=="string"?B=new Date(j.fechaHora):B=new Date,console.log(`   ${_+1}. ${j.emailEstudiante} - ${B.toLocaleString()} - ${j.tipo}`),console.log(`      📅 Fecha original: ${j.fechaHora} (tipo: ${typeof j.fechaHora})`)}}),v.forEach(w=>{var C;const _=w.data();let O;(C=_.fechaHora)!=null&&C.toDate?O=_.fechaHora.toDate():typeof _.fechaHora=="string"?O=new Date(_.fechaHora):_.fechaHora instanceof Date?O=_.fechaHora:_.fechaHora?O=new Date(_.fechaHora):O=new Date;const j={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:O,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},B=`${h}_${w.id}`;u.set(B,j)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},v=>{console.warn(`⚠️ Error con filtro en ${h}:`,v),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=Lt(m,Vd(200)),w=lr(y,O=>{if(console.log(`📋 ${h} (sin filtro): ${O.size} documentos`),O.size>0){const B=O.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(B)),console.log("📄 Primer documento:",B)}const j=O.docs.filter(B=>{var T;const C=B.data();if(!C.fechaHora)return!1;let k;return(T=C.fechaHora)!=null&&T.toDate?k=C.fechaHora.toDate():typeof C.fechaHora=="string"?k=new Date(C.fechaHora):C.fechaHora instanceof Date?k=C.fechaHora:k=new Date(C.fechaHora),k>=a&&k<=s});console.log(`📅 ${h}: ${j.length} registros después de filtro manual`),j.length>0&&(Array.from(u.keys()).filter(C=>C.startsWith(`${h}_`)).forEach(C=>u.delete(C)),j.forEach(C=>{var S;const k=C.data();let T;(S=k.fechaHora)!=null&&S.toDate?T=k.fechaHora.toDate():typeof k.fechaHora=="string"?T=new Date(k.fechaHora):k.fechaHora instanceof Date?T=k.fechaHora:T=new Date(k.fechaHora);const L={id:C.id,emailEstudiante:k.emailEstudiante||k.email||"",nombreEstudiante:k.nombreEstudiante||k.nombre||"",curso:k.curso||"",fechaHora:T,tipo:k.tipo,ubicacion:k.ubicacion||null,observaciones:k.observaciones||"",...k},R=`${h}_${C.id}`;u.set(R,L)}),d())}),_=c.findIndex(O=>O===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(m){console.warn(`❌ Error configurando ${h}:`,m)}}),()=>{c.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},xZe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const l=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=l.filter(d=>d.profile===Ht.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=mt(pr,l),u=Lt(c),d=lr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${l}`),o=!0,Array.from(a.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>a.delete(m)),f.forEach(m=>{var g,x,v,y;try{const w=m.data(),_=w.email||w.userEmail||w.mail||w.correo||"",O=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",j=w.curso||w.course||w.class||w.grade||"";let B=w.profile||w.role||w.tipo||w.userType||Ht.ESTUDIANTE;if(typeof B=="string"){const T=B.toLowerCase();T.includes("estudiante")||T.includes("student")||T.includes("alumno")?B=Ht.ESTUDIANTE:T.includes("coordinador")||T.includes("coordinator")?B=Ht.COORDINADOR_TP:T.includes("profesor")||T.includes("teacher")||T.includes("docente")?B=Ht.PROFESOR:(T.includes("subdireccion")||T.includes("subdir"))&&(B=Ht.COORDINADOR_TP)}const C={id:m.id,email:_,nombreCompleto:O,curso:j,profile:B,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(v=w.ultimaActividad)==null?void 0:v.toDate)==null?void 0:y.call(v))||new Date(w.ultimaActividad)||new Date,...w},k=`${l}_${m.id}`;a.set(k,C)}catch(w){console.warn(`Error procesando documento ${m.id} en ${l}:`,w)}}),s()):console.log(`⚪ Colección ${l}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${l}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},vZe=(e,t)=>{try{console.log("Setting up users subscription...");const r=mt(pr,"users"),n=Lt(r);return lr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const o=[];s.forEach(d=>{var f,h,m,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const v=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||Ht.ESTUDIANTE;if(typeof _=="string"){const j=_.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?_=Ht.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?_=Ht.COORDINADOR_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?_=Ht.PROFESOR:(j.includes("subdireccion")||j.includes("subdir"))&&(_=Ht.COORDINADOR_TP)}const O={id:d.id,email:v,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:g.call(m))||new Date(x.ultimaActividad)||new Date,...x};o.push(O)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),o.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=o.filter(d=>d.profile===Ht.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(o)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},IC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},bZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),yZe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),wZe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(new Date),[d,f]=N.useState("todos"),[h,m]=N.useState("");N.useEffect(()=>{s(!0),l(null);const B=c.getFullYear(),C=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",B,"Mes:",C);let k=!1,T=!1;const L=()=>{k&&T&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const S=mt(pr,"asistencia_dual"),U=Lt(S,Vd(5)),Q=await Mr(U);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${Q.size}`),Q.size>0)Q.docs.forEach((X,z)=>{const W=X.data();console.log(`   ${z+1}. ${X.id.slice(0,8)} - ${W.emailEstudiante} - ${W.tipo}`),console.log("      Fecha original:",W.fechaHora),console.log("      Todos los campos:",Object.keys(W))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const X=["asistenciaEmpresa","asistencia_empresa"];for(const z of X)try{const W=mt(pr,z),G=Lt(W,Vd(3)),Y=await Mr(G);if(console.log(`📋 ${z}: ${Y.size} documentos`),Y.size>0){const K=Y.docs[0].data();console.log("   Estructura:",Object.keys(K)),console.log("   Email:",K.emailEstudiante||K.email),console.log("   Fecha:",K.fechaHora||K.fecha)}}catch(W){console.log(`❌ ${z}: ${W instanceof Error?W.message:"Error"}`)}}}catch(S){console.error("❌ Error en prueba directa:",S),S.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):S.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),pZe(B,C).then(S=>{console.log("🔍 Debug info for collections:",S),Object.entries(S).forEach(([U,Q])=>{if(Q.exists&&Q.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${U.toUpperCase()}:`),console.log(`   📊 Total documentos: ${Q.totalDocs}`),console.log(`   📅 Documentos del período: ${Q.count}`),console.log(`   🔑 Campo de fecha: ${Q.hasDateField}`),Q.sampleDoc){console.log("   📄 Documento ejemplo:",Q.sampleDoc);const X=Q.sampleDoc,z=X.emailEstudiante||X.email||X.userEmail||X.correo||"NO ENCONTRADO",W=X.tipo||X.type||X.action||X.tipoRegistro||"NO ENCONTRADO",G=X.fechaHora||X.fecha||X.timestamp||X.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${z}`),console.log(`   📝 Tipo registro: ${W}`),console.log(`   📅 Fecha: ${G}`),console.log("   🗂️ Todos los campos:",Object.keys(X))}Q.filteredDocs&&Q.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",Q.filteredDocs.length),Q.filteredDocs.forEach((X,z)=>{z<3&&console.log(`      ${z+1}. ID: ${X.id}`,X.data)}))}else Q.exists?console.log(`⚪ Colección ${U}: vacía`):console.log(`❌ Colección ${U}: no existe`)})}).catch(S=>{console.error("Debug error:",S)}),mZe().then(S=>{console.log("🔍 Debug info for users:",S),(!S.exists||S.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async Q=>{var X;try{const z=mt(pr,Q),W=Lt(z,Vd(5)),G=await Mr(W);G.size>0?(console.log(`✅ Encontrada colección alternativa: ${Q} con ${G.size} documentos`),console.log("Documento muestra:",(X=G.docs[0])==null?void 0:X.data())):console.log(`❌ Colección ${Q}: vacía`)}catch{console.log(`❌ Colección ${Q}: no existe`)}}))}).catch(S=>{console.error("Users debug error:",S)});try{console.log("Configurando suscripción a asistencia...");const S=gZe(B,C,Q=>{if(console.log("✅ Received registros:",Q.length),Q.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",Q[0]);const X=[...new Set(Q.map(H=>H.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",X);const z=[...new Set(Q.map(H=>H.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",z);const W=Q.reduce((H,F)=>{const D=new Date(F.fechaHora).getDate();return H[D]||(H[D]=[]),H[D].push(F),H},{});console.log("📅 Registros por día del mes:",Object.keys(W).map(H=>({dia:parseInt(H),cantidad:W[parseInt(H)].length})));const G=r.map(H=>H.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",G);const Y=X.filter(H=>G.includes(H)),K=X.filter(H=>!G.includes(H));console.log("✅ Emails que coinciden:",Y),console.log("❌ Emails que NO coinciden:",K)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(Q),k=!0,L()},Q=>{console.error("❌ Error fetching asistencia:",Q),l("Error al cargar datos de asistencia: "+Q.message),k=!0,L()});console.log("Configurando suscripción a usuarios...");const U=xZe(Q=>{if(console.log("✅ Received users (multi-collection):",Q.length),Q.length>0){console.log("Sample user:",Q[0]);const X=Q.filter(z=>z.profile===Ht.ESTUDIANTE&&z.curso);console.log("Dual students found:",X.length),X.forEach(z=>{console.log(`- ${z.nombreCompleto} (${z.curso}) - ${z.email}`)})}n(Q),T=!0,L()},Q=>{console.error("❌ Error fetching users (multi-collection):",Q),console.log("🔄 Intentando con función original de usuarios...");const X=vZe(z=>{console.log("✅ Received users (fallback):",z.length),n(z),T=!0,L()},z=>{console.error("❌ Error en fallback también:",z),l("Error al cargar estudiantes: "+Q.message),T=!0,L()})});return()=>{console.log("Limpiando suscripciones..."),S&&S(),U&&U()}}catch(S){console.error("❌ Error setting up subscriptions:",S),l("Error al inicializar conexiones: "+(S instanceof Error?S.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:v}=N.useMemo(()=>{const B=c.getFullYear(),C=c.getMonth();return{monthDays:new Date(B,C+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:B}},[c]),y=N.useMemo(()=>{let B=r.filter(C=>C.profile===Ht.ESTUDIANTE&&C.curso&&rg.includes(IC(C.curso)));if(d!=="todos"&&(B=B.filter(C=>IC(C.curso||"")===d)),h&&(B=B.filter(C=>C.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const C=[...new Set(e.map(L=>L.emailEstudiante).filter(Boolean))],k=B.map(L=>L.email),T=C.filter(L=>!k.includes(L));if(T.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",T);const R=T.map(S=>{const U=e.find(Q=>Q.emailEstudiante===S);return{id:S,email:S,nombreCompleto:(U==null?void 0:U.nombreEstudiante)||S.split("@")[0],curso:(U==null?void 0:U.curso)||"3ºC",profile:Ht.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(S=>{const U=d==="todos"||IC(S.curso)===d,Q=!h||S.nombreCompleto.toLowerCase().includes(h.toLowerCase());return U&&Q&&rg.includes(IC(S.curso))});B=[...B,...R]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${B.length}`),B.forEach(C=>{console.log(`   - ${C.nombreCompleto} (${C.curso}) - ${C.email}`)}),B.sort((C,k)=>C.nombreCompleto.localeCompare(k.nombreCompleto))},[r,d,h,e]),w=N.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const B=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),B):(e.forEach((C,k)=>{const T=C.emailEstudiante;if(!T)return;let L;if(C.fechaHora instanceof Date)L=C.fechaHora;else if(C.fechaHora&&typeof C.fechaHora=="object"&&"toDate"in C.fechaHora)L=C.fechaHora.toDate();else if(typeof C.fechaHora=="string")L=new Date(C.fechaHora);else{console.warn("Fecha no válida en registro:",C);return}const R=L.getDate(),S=L.getMonth(),U=L.getFullYear();k<3&&console.log(`📅 Registro ${k+1}:`,{email:T,tipo:C.tipo,fechaOriginal:C.fechaHora,fechaProcesada:L.toLocaleString(),año:U,mes:S,día:R}),B.has(T)||B.set(T,new Map);const Q=B.get(T);Q.has(R)||Q.set(R,{});const X=Q.get(R);C.tipo==="Entrada"?(!X.entrada||L<new Date(X.entrada.fechaHora))&&(X.entrada=C):C.tipo==="Salida"&&(!X.salida||L>new Date(X.salida.fechaHora))&&(X.salida=C)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:B.size,estudiantes:Array.from(B.keys()),registrosPorEstudiante:Array.from(B.entries()).map(([C,k])=>({email:C,dias:Array.from(k.keys()),totalRegistros:Array.from(k.values()).reduce((T,L)=>T+(L.entrada?1:0)+(L.salida?1:0),0)}))}),B)},[e]),_=B=>{u(C=>{const k=new Date(C);return k.setMonth(k.getMonth()+B),k})},O=B=>{B!=null&&B.latitud&&(B!=null&&B.longitud)&&window.open(`https://www.google.com/maps?q=${B.latitud},${B.longitud}`,"_blank")},j=["D","L","M","M","J","V","S"];return o?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:o})}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[i.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${v}`}),i.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),i.jsxs("select",{value:d,onChange:B=>f(B.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos los Cursos"}),rg.map(B=>i.jsx("option",{value:B,children:B},B))]}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:B=>m(B.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?i.jsxs("div",{className:"text-center text-amber-600 py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),i.jsx("div",{children:"Cargando datos de asistencia..."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(B,C)=>{const T=new Date(v,c.getMonth(),C+1).getDay(),L=T===0||T===6;return i.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[i.jsx("div",{className:"font-semibold",children:j[T]}),i.jsx("div",{children:C+1})]},C)})]})}),i.jsx("tbody",{children:y.length>0?y.map(B=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:B.nombreCompleto}),Array.from({length:g},(C,k)=>{var U;const T=k+1,L=(U=w.get(B.email))==null?void 0:U.get(T),R=new Date(v,c.getMonth(),k+1),S=R.getDay()===0||R.getDay()===6;return B.email==="alexis.robles@industrialderecoleta.cl"&&T===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:B.email,day:T,hasDataForStudent:w.has(B.email),studentDayRecords:L,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(B.email)?Array.from(w.get(B.email).keys()):[]}),i.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${S?"bg-slate-100 dark:bg-slate-700/50":""}`,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(L==null?void 0:L.entrada)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var Q;return O((Q=L.entrada)==null?void 0:Q.ubicacion)},children:[i.jsx(bZe,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(L==null?void 0:L.salida)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var Q;return O((Q=L.salida)==null?void 0:Q.ubicacion)},children:[i.jsx(yZe,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},T)})]},B.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},rj="evaluaciones_formativas",nj="calificaciones_formativas",jM="trabajos_grupales_formativos",NZe="usuarios",BM=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},EZe=(e,t,r)=>{const n=Lt(mt(st,rj),dr("curso","==",e),dr("asignatura","==",t),Jt("fecha","asc"));return lr(n,a=>{r(a.docs.map(s=>BM(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},CZe=async(e,t)=>{const r=$g(st),n=Yt(mt(st,rj));r.set(n,{...e,fecha:nr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=Yt(st,nj,n.id);return r.set(a,t),await r.commit(),n.id},_Ze=async(e,t)=>{const r=Yt(st,rj,e);await yi(r,t,{merge:!0})},SZe=async e=>{const t=$g(st);t.delete(Yt(st,rj,e)),t.delete(Yt(st,nj,e)),await t.commit()},kZe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=Yt(st,nj,n);return lr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},jZe=async(e,t)=>{const r=Yt(st,nj,e);await yi(r,t,{merge:!0})},BZe=(e,t,r)=>{const n=Lt(mt(st,jM),dr("curso","==",e),dr("asignatura","==",t),Jt("fechaPresentacion","desc"));return lr(n,a=>{r(a.docs.map(s=>BM(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},TZe=async e=>{const t={...e,fechaPresentacion:nr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await on(mt(st,jM),t)},IZe=async(e,t)=>{const r=Yt(st,jM,e);await yi(r,t,{merge:!0})},FZe=e=>{const t=Lt(mt(st,NZe));return lr(t,r=>{e(r.docs.map(n=>BM(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},Wce=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Cv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Xce=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},OZe=({cursos:e,onSelect:t})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Xce(r);return i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[i.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),i.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[i.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),i.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),DZe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Xce(e);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),i.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>i.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[i.jsx("span",{className:"text-2xl",children:Cv[s]||Cv.Default}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},PZe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=N.useState([]),[o,l]=N.useState({}),[c,u]=N.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState(!0),v=N.useMemo(()=>r.filter(k=>k.profile===Ht.ESTUDIANTE&&Wce(k.curso||"")===e).map(k=>k.nombreCompleto).sort((k,T)=>k.localeCompare(T)),[r,e]);N.useEffect(()=>{x(!0);const k=EZe(e,t,T=>{s(T);const L=T.map(S=>S.id),R=kZe(L,S=>{l(U=>({...U,...S}))});return x(!1),()=>R()});return()=>k()},[e,t]);const y=k=>{const{name:T,value:L}=k.target;d?f(R=>R?{...R,[T]:L}:null):u(R=>({...R,[T]:L}))},w=async k=>{if(k.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const T={asignatura:t,curso:e,...c},L=v.reduce((R,S)=>(R[S]="trabajado",R),{});try{await CZe(T,L),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(R){console.error(R),m("No se pudo crear la evaluación.")}},_=(k,T)=>{var U;const L=((U=o[k])==null?void 0:U[T])||"trabajado";let R;L==="trabajado"?R="no trabajado":L==="no trabajado"?R="ausente":R="trabajado";const S={...o,[k]:{...o[k]||{},[T]:R}};l(S),jZe(k,{[T]:R}).catch(Q=>{console.error("Error updating grade:",Q)})},O=k=>f(k),j=async()=>{if(d)try{await _Ze(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(k){console.error(k),m("No se pudo guardar la edición.")}},B=async k=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await SZe(k)}catch(T){console.error(T),m("No se pudo eliminar la evaluación.")}},C=N.useCallback(k=>{if(a.length===0)return"-";let T=0,L=0;return a.forEach(R=>{var U;const S=(U=o[R.id])==null?void 0:U[k];S==="trabajado"?(T+=7,L++):S==="no trabajado"&&(T+=2,L++)}),L===0?"-":(T/L).toFixed(1)},[o,a]);return g?i.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),i.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),i.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"w-full",children:i.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&i.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(k=>i.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===k.id?i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("button",{onClick:j,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"font-semibold",children:k.nombreActividad}),i.jsx("span",{className:"font-normal text-slate-500",children:k.fecha}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx("button",{onClick:()=>O(k),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),i.jsx("button",{onClick:()=>B(k.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},k.id)),i.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(k=>i.jsxs("tr",{children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:k}),a.map(T=>{var S;const L=(S=o[T.id])==null?void 0:S[k];let R;return L==="trabajado"?R=Cv[t]||Cv.Default:L==="no trabajado"?R="❌":L==="ausente"?R="A":R=Cv[t]||Cv.Default,i.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:i.jsx("button",{onClick:()=>_(T.id,k),className:`text-3xl transition-opacity duration-200 ${L==="trabajado"?"opacity-100":L==="no trabajado"?"opacity-40":L==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:R})},T.id)}),i.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(k)})]},k))})]})})]})},RZe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=N.useState({}),[h,m]=N.useState(2),g=N.useMemo(()=>r.filter(O=>O.profile===Ht.ESTUDIANTE&&Wce(O.curso||"")===e).sort((O,j)=>O.nombreCompleto.localeCompare(j.nombreCompleto)),[r,e]);N.useEffect(()=>{const O=BZe(e,t,s);return()=>O()},[e,t]),N.useEffect(()=>{if(o){const O={};o.grupos.forEach(j=>{j.integrantes.forEach(B=>{O[B.nombre]={groupNumber:String(j.numero),role:B.rol||""}})}),f(O)}else f({})},[o]);const x=async O=>{if(O.preventDefault(),!c.nombre.trim())return;const j={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await TZe(j),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(B){console.error(B),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const O=new Map;for(const B of g){const C=d[B.nombreCompleto];if(C&&C.groupNumber){const k=parseInt(C.groupNumber,10);isNaN(k)||(O.has(k)||O.set(k,[]),O.get(k).push({nombre:B.nombreCompleto,rol:C.role||""}))}}const j=Array.from(O.entries()).map(([B,C])=>({numero:B,integrantes:C})).sort((B,C)=>B.numero-C.numero);try{await IZe(o.id,{grupos:j}),alert("Grupos guardados con éxito.")}catch(B){console.error(B),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const O=[...g].sort(()=>Math.random()-.5),j={};O.forEach((B,C)=>{var k;j[B.nombreCompleto]={groupNumber:String(C%h+1),role:((k=d[B.nombreCompleto])==null?void 0:k.role)||""}}),f(j)},w=(O,j,B)=>{f(C=>({...C,[O]:{...C[O]||{groupNumber:"",role:""},[j]:B}}))},_=N.useMemo(()=>{const O=new Map;return Object.entries(d).forEach(([j,B])=>{B.groupNumber&&(O.has(B.groupNumber)||O.set(B.groupNumber,[]),O.get(B.groupNumber).push({nombre:j,rol:B.role}))}),Array.from(O.entries()).sort((j,B)=>parseInt(j[0])-parseInt(B[0]))},[d]);return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),i.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),i.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 space-y-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:h,onChange:O=>m(parseInt(O.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),i.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),i.jsx("table",{className:"w-full text-sm",children:i.jsx("tbody",{children:g.map(O=>{var j;return i.jsxs("tr",{children:[i.jsx("td",{className:"py-1 pr-2",children:O.nombreCompleto}),i.jsx("td",{className:"py-1",children:i.jsx("input",{type:"number",value:((j=d[O.nombreCompleto])==null?void 0:j.groupNumber)||"",onChange:B=>w(O.nombreCompleto,"groupNumber",B.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},O.id)})})})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([O,j])=>i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[i.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",O]}),i.jsx("ul",{className:"space-y-2",children:j.map(B=>i.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"flex-1 truncate",children:B.nombre}),i.jsxs("select",{value:B.rol||"",onChange:C=>w(B.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[i.jsx("option",{value:"",children:"-- Asignar Rol --"}),xte.map(C=>i.jsx("option",{value:C,children:C},C))]})]},B.nombre))})]},O))})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),i.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsx("input",{value:c.nombre,onChange:O=>u({...c,nombre:O.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("input",{type:"date",value:c.fecha,onChange:O=>u({...c,fecha:O.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(O=>i.jsxs("button",{onClick:()=>l(O),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[i.jsx("p",{className:"font-bold",children:O.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",O.fechaPresentacion]})]},O.id))]})]})},LZe=({currentUser:e})=>{const[t,r]=N.useState("calificaciones"),[n,a]=N.useState(null),[s,o]=N.useState(null),[l,c]=N.useState([]),[u,d]=N.useState(!0);N.useEffect(()=>{d(!0);const x=FZe(v=>{c(v),d(!1)});return()=>x()},[]);const f=N.useMemo(()=>e.cursos||[],[e.cursos]),h=N.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>i.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return i.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return i.jsx(OZe,{cursos:f,onSelect:a});if(!s)return i.jsx(DZe,{curso:n,asignaturas:h,onSelect:o,onBack:()=>a(null)});if(t==="calificaciones")return i.jsx(PZe,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return i.jsx(RZe,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),i.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),i.jsx("div",{className:"mt-6",children:g()})]})};function MZe(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function UZe(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function QZe(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=MZe(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=h:c+=h}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const n=new Map;let a=0;(o=e.detallesObservacion)==null||o.forEach(l=>{UZe(l.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=l.accionesDocente.length}),n.forEach((l,c)=>{const u=a>0?l/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const HZe=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=N.useState(null),[s,o]=N.useState(null),[l,c]=N.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,w)=>{const _=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[_]=(y[_]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const _=new Date("2000/01/01 "+w.horaInicio),j=(new Date("2000/01/01 "+w.horaTermino).getTime()-_.getTime())/(1e3*60);return y+j},0)/f.length;const v=f.filter(y=>{var w,_,O;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((_=y.retroalimentacion)==null?void 0:_.modelo)&&((O=y.retroalimentacion)==null?void 0:O.foco)}).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(zd,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(Up,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(ro,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(Ha,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(oc,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ew,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),i.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(_=>_.id===y.target.value);o(w||null)},children:[i.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>i.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&i.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(_=>_.docenteInfo===s.docenteInfo&&_.id!==s.id),w=await QZe(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ew,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),i.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[i.jsx(Ha,{className:"w-4 h-4"})," Fortalezas"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[i.jsx(fb,{className:"w-4 h-4"})," Áreas de Mejora"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[i.jsx(Wu,{className:"w-4 h-4"})," Alertas"]}),i.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>i.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[i.jsx(T_,{className:"w-4 h-4"})," Recomendaciones"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(vi,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),i.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(T_,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(Ha,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(fb,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Yce=aR(),FN="acompanamientos",Vm="ciclos_opr",zm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Jce=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},VZe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Jce(r);return`videos_opr/${n}/${a}/${s}`},zZe=async(e,t,r)=>{try{if(!F_.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const d=o[1],f=o[2],h=o.slice(3).join("/");s=VZe(d,f,h)}else{const d=Date.now(),f=Jce(e.name);s=`videos_opr/general/${d}_${f}`}const l=sN(Yce,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:F_.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=wye(l,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await Kk(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},TM=async e=>{try{const t=sN(Yce,e),{items:r,prefixes:n}=await Nye(t);await Promise.all(r.map(a=>Eye(a))),await Promise.all(n.map(a=>TM(a.fullPath)))}catch{}},$Ze=async()=>{try{const e=Lt(mt(st,FN),Jt("fecha","desc"));return(await Mr(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:zm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},GZe=async e=>{try{const t={...e,fecha:nr.fromDate(new Date(e.fecha)),fechaCreacion:nr.now()},r=await on(mt(st,FN),t);return{...e,id:r.id,fecha:zm(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},qZe=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:nr.fromDate(new Date(t.fecha))}:{},fechaModificacion:nr.now()};await dl(Yt(st,FN,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},KZe=async e=>{try{const t=Lt(mt(st,Vm),dr("acompanamientoId","==",e)),r=await Mr(t),n=$g(st);r.forEach(a=>n.delete(Yt(st,Vm,a.id))),await n.commit(),await TM(`videos_opr/${e}`),await wa(Yt(st,FN,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},vW=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:nr.fromDate(new Date(e.fecha)),fechaCreacion:nr.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:nr.fromDate(new Date(e.seguimiento.fecha))});const n=await on(mt(st,Vm),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:zm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},WZe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=nr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:nr.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=nr.now(),await dl(Yt(st,Vm,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},XZe=async e=>{try{const t=Lt(mt(st,Vm),dr("acompanamientoId","==",e),Jt("fecha","desc"));return(await Mr(t)).docs.map(a=>{var l;const s=a.data(),o={id:a.id,...s,fecha:zm(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(o.seguimiento={...s.seguimiento,fecha:zm(s.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},YZe=async()=>{try{const e=Lt(mt(st,Vm),dr("acompanamientoId","==",""),Jt("fecha","desc"));return(await Mr(e)).docs.map(n=>{var o;const a=n.data(),s={id:n.id,...a,fecha:zm(a==null?void 0:a.fecha)};return(o=a==null?void 0:a.seguimiento)!=null&&o.fecha&&(s.seguimiento={...a.seguimiento,fecha:zm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},bW=async e=>{try{const t=await kh(Yt(st,Vm,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await TM(`videos_opr/${n}/${e}`),await wa(Yt(st,Vm,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},JZe=async e=>{try{const t=Lt(mt(st,FN),dr("docente","==",e),Jt("fecha","desc"));return(await Mr(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:zm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},ZZe=async e=>{try{const t=Lt(mt(st,"rubricas_personalizadas"),dr("docente","==",e)),r=await Mr(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},eet=async()=>await ej(),tet=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=N.useState(!1),[h,m]=N.useState(!1),[g,x]=N.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?f(!0):C.type==="dragleave"&&f(!1)},w=C=>{if(C.preventDefault(),C.stopPropagation(),f(!1),C.dataTransfer.files&&C.dataTransfer.files[0]&&!s){const k=C.dataTransfer.files[0];O(k)}},_=C=>{if(C.target.files&&C.target.files[0]&&!s){const k=C.target.files[0];O(k)}},O=C=>{if(C.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(C.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(C)},j=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",B=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&i.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"url",value:g,onChange:C=>x(C.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[i.jsx(Ha,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),i.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:i.jsx(Va,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var C;return!s&&((C=document.getElementById(v))==null?void 0:C.click())},children:[i.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?i.jsxs("div",{className:"text-center",children:[i.jsx(Wu,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):i.jsxs("div",{className:"text-center",children:[i.jsx(r1,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),i.jsx("input",{id:v,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:o,style:{display:"none"}})]}),s&&i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:`${j()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[i.jsx(Wu,{className:"w-4 h-4 text-red-500"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},ret=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,o]=N.useState(!1),[l,c]=N.useState({}),[u,d]=N.useState({}),[f,h]=N.useState({}),[m,g]=N.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=N.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=N.useState(t||x);N.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=S=>{const{name:U,value:Q}=S.target,X=U.split(".");X.length>1?y(z=>{const W=JSON.parse(JSON.stringify(z));let G=W;for(let Y=0;Y<X.length-1;Y++)G=G[X[Y]];return G[X[X.length-1]]=Q,W}):y(z=>({...z,[U]:Q}))},_=(S,U,Q)=>{y(X=>({...X,detallesObservacion:X.detallesObservacion.map(z=>z.id===S?{...z,[U]:Q}:z)}))},O=()=>{const S=v.detallesObservacion[v.detallesObservacion.length-1],U=S&&parseInt(S.minuto.split("-")[1],10)||0,Q=`${U+1}-${U+5}`;y(X=>({...X,detallesObservacion:[...X.detallesObservacion,{id:`row_${Date.now()}`,minuto:Q,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},j=S=>{y(U=>({...U,detallesObservacion:U.detallesObservacion.filter(Q=>Q.id!==S)}))},B=async(S,U)=>{h(Q=>({...Q,[S]:null})),c(Q=>({...Q,[S]:!0})),d(Q=>({...Q,[S]:0}));try{const Q=Date.now(),X=U.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),z=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",W=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",G=`videos_opr/${z}/${W}/${Q}_${X}`,Y=await zZe(U,G,K=>{d(H=>({...H,[S]:K}))});C(S,Y),d(K=>({...K,[S]:100}))}catch(Q){const X=(Q==null?void 0:Q.message)||"Error desconocido al subir el archivo";h(z=>({...z,[S]:X})),alert(`Error al subir el video: ${X}`)}finally{c(Q=>({...Q,[S]:!1})),setTimeout(()=>{d(Q=>({...Q,[S]:0}))},2e3)}},C=(S,U)=>{const Q=S.split(".");Q.length>1?y(X=>{const z=JSON.parse(JSON.stringify(X));let W=z;for(let G=0;G<Q.length-1;G++)W=W[Q[G]];return W[Q[Q.length-1]]=U,z}):y(X=>({...X,[S]:U}))},k=S=>{const U=S.split(".");U.length>1?y(Q=>{const X=JSON.parse(JSON.stringify(Q));let z=X;for(let W=0;W<U.length-1;W++)z=z[U[W]];return z[U[U.length-1]]="",X}):y(Q=>({...Q,[S]:""})),h(Q=>({...Q,[S]:null})),d(Q=>({...Q,[S]:0}))},T=async()=>{o(!0);try{const S=ao.currentUser;if(!S){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),o(!1);return}const U=await S.getIdToken(),Q=await fetch("/api/mejorarTextoOPR",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U}`},body:JSON.stringify({formData:v})});if(!Q.ok){const z=await Q.json();throw new Error(z.error||"Error al mejorar el texto con IA")}const{retroalimentacion:X}=await Q.json();y(z=>({...z,retroalimentacion:{...z.retroalimentacion,...X}})),alert("Textos mejorados exitosamente con IA")}catch(S){console.error(S),alert(S.message||"No se pudo mejorar la redacción. Intenta nuevamente.")}finally{o(!1)}},L=()=>{const S=new Ar,U=S.internal.pageSize.getWidth(),Q=S.internal.pageSize.getHeight(),X=15,z="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",W=15,G=15;let Y=25;const K=()=>{const ie="Liceo Industrial de Recoleta";S.setFontSize(8),S.setFont("helvetica","normal"),S.text(ie,U/2,Q-10,{align:"center"}),S.setFontSize(10),S.setFont("helvetica","normal");const oe=Q-25;S.line(X,oe,X+70,oe),S.text("Firma Docente",X+15,oe+5),S.line(U-X-70,oe,U-X,oe),S.text("Firma Observador",U-X-55,oe+5)},H=()=>{try{S.addImage(z,"PNG",U-G-10,10,G,W)}catch(ie){console.error("Error al cargar el logo:",ie)}};H();const F=S.addPage;S.addPage=function(){return F.apply(this,arguments),H(),K(),this};const D=ie=>{Y>240&&(S.addPage(),Y=25),S.setFontSize(14),S.setFont("helvetica","bold"),S.text(ie,X,Y),Y+=12};S.setFontSize(18),S.setFont("helvetica","bold"),S.text("Informe de Ciclo OPR",U/2,Y,{align:"center"}),Y+=18,D("1. Datos Generales");const q=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];gi(S,{body:q,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:X,right:X}}),Y=S.lastAutoTable.finalY+15,D("2. Registro Detallado de Observación");const J=v.detallesObservacion.map(ie=>[ie.minuto,ie.accionesDocente,ie.accionesEstudiantes,ie.actividades]);gi(S,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:J,startY:Y,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:X,right:X},didDrawPage:ie=>{var oe;Y=((oe=ie.cursor)==null?void 0:oe.y)||25}}),Y=S.lastAutoTable.finalY+15,D("3. Retroalimentación Docente");const te=[];if(v.retroalimentacion.exito&&te.push(["Éxito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&te.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&te.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&te.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),te.length>0&&(gi(S,{body:te,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:X,right:X}}),Y=S.lastAutoTable.finalY+10),v.retroalimentacion.brecha){Y>240&&(S.addPage(),Y=40),S.setFontSize(12),S.setFont("helvetica","bold"),S.text("Análisis de Brecha",X,Y),Y+=8;const ie=[],oe=v.retroalimentacion.brecha.minutoInicial,de=v.retroalimentacion.brecha.minutoFinal;oe&&de&&ie.push(["Minutos:",`${oe} a ${de}`]),v.retroalimentacion.brecha.preguntas&&ie.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&ie.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),ie.length>0&&(gi(S,{body:ie,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:X+5,right:X}}),Y=S.lastAutoTable.finalY+10)}D("4. Planificación de Práctica");const ne=[];v.planificacion.preparacion&&ne.push(["Preparación:",v.planificacion.preparacion]),v.planificacion.objetivo&&ne.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&ne.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&ne.push(["Tiempo:",v.planificacion.tiempo]),ne.length>0&&(gi(S,{body:ne,startY:Y,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:X,right:X}}),Y=S.lastAutoTable.finalY+10),K(),S.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},R=async S=>{if(S.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const U={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(U)}catch(Q){console.error("Error al guardar ciclo OPR:",Q),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),i.jsxs("select",{value:m.docente,onChange:S=>g(U=>({...U,docente:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{value:m.curso,onChange:S=>g(U=>({...U,curso:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:m.asignatura,onChange:S=>g(U=>({...U,asignatura:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ua.map(S=>i.jsx("option",{value:S,children:S},S))]})]})]})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:T,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[i.jsx(hR,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),i.jsxs("button",{type:"button",onClick:L,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(jh,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),i.jsxs("form",{onSubmit:R,className:"space-y-8",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Up,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),i.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx(tet,{label:"Video de observación de clase",onFileChange:S=>B("videoObservacionUrl",S),onLinkChange:S=>C("videoObservacionUrl",S),uploadedUrl:v.videoObservacionUrl,onRemove:()=>k("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Ng,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-slate-600",children:[i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),i.jsx("th",{className:"p-2"})]})}),i.jsx("tbody",{children:v.detallesObservacion.map(S=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:S.minuto,onChange:U=>_(S.id,"minuto",U.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.accionesDocente,onChange:U=>_(S.id,"accionesDocente",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.accionesEstudiantes,onChange:U=>_(S.id,"accionesEstudiantes",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.actividades,onChange:U=>_(S.id,"actividades",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),i.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&i.jsx("button",{type:"button",onClick:()=>j(S.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:i.jsx(Va,{className:"w-4 h-4"})})})]},S.id))})]})}),i.jsxs("button",{type:"button",onClick:O,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[i.jsx(NF,{className:"w-4 h-4"})," Agregar Fila"]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(_te,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),i.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),i.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),i.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),i.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(rwe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),i.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),i.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),i.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),i.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(ro,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),i.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),i.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},net=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState(!0),[c,u]=N.useState(null),[d,f]=N.useState("list"),[h,m]=N.useState(null),[g,x]=N.useState(null),[v,y]=N.useState("general"),[w,_]=N.useState(!1),[O,j]=N.useState({}),[B,C]=N.useState([]),k=v2,T=N.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[L,R]=N.useState(T),S=N.useCallback(async()=>{s(!0),u(null);try{const te=await $Ze();t(te)}catch(te){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",te)}finally{s(!1)}},[]),U=N.useCallback(async()=>{l(!0);try{const ne=(await eet()).filter(ie=>ie.profile==="PROFESORADO").map(ie=>ie.nombreCompleto).sort();n(ne)}catch(te){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",te)}finally{l(!1)}},[]),Q=N.useCallback(async()=>{try{const te={};for(const ne of e)if(ne.id)try{const ie=await XZe(ne.id);ie.length>0&&(te[ne.id]=ie)}catch(ie){console.error(`Error loading OPR cycles for ${ne.id}:`,ie)}try{const ne=await YZe();C(ne)}catch(ne){console.error("Error loading standalone OPR cycles:",ne),C([])}j(te)}catch(te){console.error("Error fetching OPR cycles:",te)}},[e]);N.useEffect(()=>{S(),U()},[S,U]),N.useEffect(()=>{e.length>0&&Q()},[e,Q]);const X=(te,ne)=>{if(x(te),ne)R(ne),m(ne.id);else{const ie={id:"temp-"+Date.now(),fecha:te.fecha,docente:te.docenteInfo||"",curso:te.cursoInfo||"",asignatura:te.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};R(ie),m(null)}f("form"),y("opr"),u(null)},z=async()=>{if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),u(null);try{const te=ao.currentUser;if(!te){alert("No se pudo obtener el token de autenticación. Inicia sesión nuevamente."),_(!1);return}const ne=await te.getIdToken(),ie=await fetch("/api/generarFeedbackAcompanamientoDocente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({formData:L})});if(!ie.ok)throw new Error("Error al generar la retroalimentación con IA");const{feedback:oe}=await ie.json();R(de=>({...de,retroalimentacionConsolidada:oe})),alert("Retroalimentación generada exitosamente con IA.")}catch{u("No se pudo generar la retroalimentación automática."),alert("Error: No se pudo generar la retroalimentación automática.")}finally{_(!1)}},W=async te=>{if(te.preventDefault(),!("docente"in L)||!L.docente||!L.curso||!L.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await qZe(h,L),alert("¡Acompañamiento actualizado correctamente!");else{const ne=await GZe(L);m(ne.id),R(ne),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await S()}catch(ne){const ie=(ne==null?void 0:ne.message)??"Error al guardar el registro de acompañamiento.";u(ie),console.error("❌ Error al guardar:",ne),alert(`Error: ${ie}`)}},G=()=>{R(T),m(null),x(null),f("form"),y("general"),u(null)},Y=te=>{R(te),m(te.id),x(null),f("form"),y("general"),u(null)},K=async te=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await KZe(te),await S(),alert("Registro eliminado exitosamente.")}catch(ne){const ie="No se pudo eliminar el registro.";u(ie),console.error("❌ Error al eliminar:",ne),alert(`Error: ${ie}`)}},H=(te,ne)=>{R(ie=>({...ie,rubricaResultados:{...ie.rubricaResultados||{},[te]:ne}}))},F=()=>{var te;if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const ne=new Ar,ie=ne.internal.pageSize.getWidth(),oe=ne.internal.pageSize.getHeight(),de=20,ke=ie-de*2,ae=(ye,Le)=>Le+ye>oe-de,Oe=()=>{const ye=ne.getNumberOfPages();for(let Le=1;Le<=ye;Le++)ne.setPage(Le),ne.setFontSize(9),ne.setTextColor(128),ne.text(`pág. ${Le} de ${ye}`,ie-de,oe-10,{align:"right"})};let Te=de;ne.setFontSize(16),ne.setFont("helvetica","bold"),ne.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",ie/2,Te,{align:"center"}),Te+=15;const Se=40;if(gi(ne,{startY:Te,head:[],body:[["Docente:",L.docente],["Curso:",L.curso],["Asignatura:",L.asignatura],["Fecha:",new Date(L.fecha).toLocaleDateString("es-CL")],["Bloques:",L.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:de,right:de}}),Te=ne.lastAutoTable.finalY+10,Object.keys(L.rubricaResultados||{}).length>0){ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text("Evaluación por Indicadores",de,Te),Te+=10;const ye=Object.entries(L.rubricaResultados).map(([Le,Qe])=>{let ue;switch(Qe){case 1:ue="Débil";break;case 2:ue="Incipiente";break;case 3:ue="Satisfactorio";break;case 4:ue="Avanzado";break;default:ue="No evaluado"}return[Le,ue,Qe]});gi(ne,{startY:Te,head:[["Indicador","Nivel de Logro","Puntuación"]],body:ye,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:de,right:de}})}ne.addPage(),Te=de,ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text("Observaciones Generales y Sugerencias de Mejora",de,Te),Te+=15,L.observacionesGenerales&&(ne.setFontSize(12),ne.setFont("helvetica","bold"),ne.text("Fortalezas:",de,Te),Te+=10,ne.setFont("helvetica","normal"),ne.setFontSize(11),ne.splitTextToSize(L.observacionesGenerales,ke).forEach(Le=>{ae(7,Te)&&(ne.addPage(),Te=de),ne.text(Le,de,Te,{align:"justify"}),Te+=7}),Te+=10),L.retroalimentacionConsolidada&&(ae(50,Te)&&(ne.addPage(),Te=de),ne.setFontSize(12),ne.setFont("helvetica","bold"),ne.text("Sugerencias de mejora:",de,Te),Te+=10,ne.setFont("helvetica","normal"),ne.setFontSize(11),ne.splitTextToSize(L.retroalimentacionConsolidada,ke).forEach(Le=>{ae(7,Te)&&(ne.addPage(),Te=de),ne.text(Le,de,Te,{align:"justify"}),Te+=7})),Oe();const fe=`Informe_Acompanamiento_${(te=L.docente)==null?void 0:te.replace(/\s+/g,"_")}_${L.curso}_${new Date().toISOString().split("T")[0]}.pdf`;ne.save(fe)}catch(ne){console.error("❌ Error al generar PDF:",ne),alert("Error al generar el PDF. Intenta nuevamente.")}},D=te=>{R(ne=>({...ne,[te.target.name]:te.target.value}))},q=()=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{G(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[i.jsx(NF,{className:"w-5 h-5"})," Acompañamiento General"]}),i.jsxs("button",{onClick:()=>{R(T),m(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[i.jsx(NF,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wu,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(qc,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),i.jsxs("div",{className:"space-y-3",children:[a&&i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),i.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(te=>te.id).length>0?i.jsx("div",{className:"grid gap-3",children:e.filter(te=>te.id).map(te=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ro,{className:"w-4 h-4 text-amber-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.docente})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.curso," •"," ",i.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",te.asignatura]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL")]}),te.bloques&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Bloques:"})," ",te.bloques]}),te.retroalimentacionConsolidada&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(Ha,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),O[te.id]&&O[te.id].length>0&&i.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[i.jsx(Up,{className:"w-3 h-3"}),O[te.id].length," Ciclo",O[te.id].length>1?"s":""," OPR"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{Y(te),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:()=>{Y(te),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),i.jsx("button",{onClick:()=>K(te.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Va,{className:"w-4 h-4"})})]})]}),O[te.id]&&O[te.id].length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[i.jsx(Up,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),i.jsx("div",{className:"space-y-2",children:O[te.id].map(ne=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:ne.nombreCiclo||`Registro N° ${ne.registroN}`}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(ne.fecha).toLocaleDateString("es-CL"),ne.horaInicio&&ne.horaTermino&&i.jsxs("span",{children:[" • ",ne.horaInicio," - ",ne.horaTermino]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>{const ie=e.find(oe=>oe.id===te.id);X(ne,ie)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await bW(ne.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(ie){console.error("Error deleting OPR cycle:",ie),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},ne.id))})]})]},te.id))}):!a&&i.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsx(zd,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),B.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(Up,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),i.jsx("div",{className:"space-y-3",children:B.map(te=>i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Up,{className:"w-4 h-4 text-blue-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.nombreCiclo||`Registro N° ${te.registroN}`})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Docente:"})," ",te.docenteInfo||"No especificado"," •"," ",i.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.cursoInfo||"No especificado"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL"),te.horaInicio&&te.horaTermino&&i.jsxs("span",{children:[" • ",te.horaInicio," - ",te.horaTermino]})]}),te.videoObservacionUrl&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(Ha,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{X(te)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await bW(te.id),await Q(),alert("Ciclo OPR eliminado exitosamente")}catch(ne){console.error("Error deleting standalone OPR cycle:",ne),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Va,{className:"w-4 h-4"})})]})]})},te.id))})]})]}),J=()=>{const te=h?e.find(ie=>ie.id===h):null,ne={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in L&&L.docente||"",curso:"curso"in L&&L.curso||"",asignatura:"asignatura"in L&&L.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:v==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),i.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(zd,{className:"w-4 h-4"}),"Acompañamiento General"]})}),i.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Up,{className:"w-4 h-4"}),"Ciclos OPR"]})}),i.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(qc,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wu,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),v==="dashboard"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(HZe,{acompanamientos:e,ciclosOPR:O,standaloneCiclos:B})}),v==="general"&&i.jsxs("form",{onSubmit:W,className:"space-y-8",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[i.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(_5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:z,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[i.jsx(hR,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),i.jsxs("button",{type:"button",onClick:F,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(jh,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in L&&L.retroalimentacionConsolidada&&i.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[i.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(Ha,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:i.jsx("textarea",{readOnly:!0,rows:8,value:L.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),i.jsxs("select",{name:"docente",value:"docente"in L?L.docente:"",onChange:D,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:o,children:[i.jsx("option",{value:"",children:o?"Cargando profesores...":"Seleccione un docente"}),r.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),i.jsxs("select",{name:"curso",value:"curso"in L?L.curso:"",onChange:D,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),i.jsxs("select",{name:"asignatura",value:"asignatura"in L?L.asignatura:"",onChange:D,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Ua.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),i.jsx("input",{type:"text",name:"bloques",value:"bloques"in L?L.bloques:"",onChange:D,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),i.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in L?L.observacionesGenerales:"",onChange:D,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(qc,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(ie=>i.jsx(ot.Fragment,{children:ie.criteria.map((oe,de)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[de===0&&i.jsx("td",{rowSpan:ie.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:ie.domain}),i.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:oe.name}),oe.levels.map((ke,ae)=>{const Oe=ae+1,Te="rubricaResultados"in L&&L.rubricaResultados[oe.name]===Oe,Se=Te?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return i.jsx("td",{onClick:()=>H(oe.name,Oe),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Se} ${Te?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Oe} para ${oe.name}`,children:i.jsxs("div",{className:"text-xs leading-relaxed",children:[Te&&i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(Ha,{className:"w-3 h-3 text-amber-600"}),i.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),ke]})},Oe)})]},oe.name))},ie.domain))})]})}),Object.keys(L.rubricaResultados||{}).length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[i.jsx(qc,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(L.rubricaResultados).length," criterios evaluados)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(L.rubricaResultados).map(([ie,oe])=>i.jsxs("div",{className:"flex justify-between items-center py-1",children:[i.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[ie,":"]}),i.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${oe===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":oe===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":oe===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",oe]})]},ie))})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),v==="opr"&&i.jsx(ret,{acompanamiento:te||ne,cicloToEdit:g,profesores:r,onSave:async ie=>{try{const oe=(te==null?void 0:te.id)||typeof ie.acompanamientoId=="string"&&ie.acompanamientoId||void 0;if(g&&g.id)await WZe(g.id,ie),alert("Ciclo OPR actualizado exitosamente");else{if(!oe||String(oe).startsWith("temp-")){const de={...ie,acompanamientoId:""};await vW(de)}else{const de={...ie,acompanamientoId:String(oe)};await vW(de)}alert("Ciclo OPR guardado exitosamente")}x(null),await S(),await Q(),f("list")}catch(oe){console.error("❌ Error al guardar ciclo OPR:",oe);const de=oe.message||"Error desconocido al guardar el ciclo OPR";u(de),alert(`Error al guardar el ciclo OPR: ${de}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||o?i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",o&&" Cargando profesores..."]})]})})}):i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?q():J()})})},IM="mensajes_internos",aet="usuarios",Zce="mensajes_read_status",eue=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},set=(e,t)=>{const r=Lt(mt(st,IM),dr("participants","array-contains",e),Jt("fecha","desc"));return lr(r,a=>{const s=a.docs.map(o=>eue(o));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},iet=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:nr.fromDate(new Date)};await on(mt(st,IM),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},oet=async e=>{try{const t=Yt(st,IM,e);await wa(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},cet=(e,t)=>{const r=Yt(st,Zce,e);return lr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},uet=async(e,t)=>{try{const r=Yt(st,Zce,e);await yi(r,{messages:qee(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},det=e=>{const t=Lt(mt(st,aet),Jt("nombreCompleto","asc"));return lr(t,n=>{const a=n.docs.map(s=>eue(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},fet=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=N.useState("inbox"),[a,s]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(null),[d,f]=N.useState({announcements:[],messages:[]}),[h,m]=N.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=N.useState(g);N.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const C=set(e.email,L=>{s(L),m(!1)}),k=det(l),T=cet(e.id,L=>{f(L),t()});return()=>{C(),k(),T()}},[e.id,e.email,t]);const y=C=>{u(C),r==="inbox"&&!d.messages.includes(C.id)&&uet(e.id,C.id).catch(k=>{console.error("Failed to mark message as read:",k)})},w=async C=>{if(C.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const k={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await iet(k),v(g),n("sent")}catch(T){console.error("Error sending message:",T),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},_=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await oet(C),u(null)}catch(k){console.error("Error deleting message:",k),alert("No se pudo eliminar el mensaje.")}},O=C=>{v({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},j=N.useMemo(()=>a.filter(C=>C.para===e.email),[a,e.email]),B=N.useMemo(()=>a.filter(C=>C.de===e.email),[a,e.email]);return h?i.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[i.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[i.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:i.jsx("button",{onClick:()=>{n("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),i.jsxs("nav",{className:"p-2 space-y-1",children:[i.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),i.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&i.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?j:B).map(C=>{const k=r==="inbox"&&!d.messages.includes(C.id);return i.jsxs("div",{onClick:()=>y(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("p",{className:`font-bold truncate ${k?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),k&&i.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),i.jsx("p",{className:`truncate text-sm ${k?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),i.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),i.jsxs("select",{id:"para",value:x.para,onChange:C=>v({...x,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un destinatario..."}),o.filter(C=>C.email!==e.email).map(C=>i.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),i.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:C=>v({...x,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),i.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:C=>v({...x,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?i.jsxs("div",{children:[i.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[i.jsx("strong",{children:"De:"})," ",c.de," ",i.jsx("br",{}),i.jsx("strong",{children:"Para:"})," ",c.para," ",i.jsx("br",{}),i.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),i.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),i.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&i.jsx("button",{onClick:()=>O(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),i.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:i.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},aj="proyectos_interdisciplinarios",FM="entregas_interdisciplinarias",Aet="usuarios",OM=e=>{const t=e.data();return{id:e.id,...t}},het=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),met=e=>{const t=Lt(mt(st,aj),Jt("nombreProyecto","asc"));return lr(t,n=>{try{const a=n.docs.map(s=>het(OM(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},pet=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:nr.now(),updatedAt:nr.now()};return(await on(mt(st,aj),t)).id},yW=async(e,t)=>{const{id:r,...n}=t,a=Yt(st,aj,e);await yi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:nr.now()},{merge:!0})},get=async e=>{const t=Yt(st,aj,e),r=Lt(mt(st,FM),dr("planificacionId","==",e)),n=await Mr(r),a=$g(st);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},xet=(e,t)=>{const r=Lt(mt(st,FM),dr("planificacionId","==",e));return lr(r,a=>{const s=a.docs.map(o=>OM(o));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},vet=async(e,t)=>{const r=Yt(st,FM,e);await yi(r,{feedbackProfesor:t,fechaFeedback:nr.fromDate(new Date)},{merge:!0})},tue=e=>{const t=Lt(mt(st,Aet));return lr(t,n=>{const a=n.docs.map(s=>OM(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},GI={},WO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},R2=({href:e})=>{if(!e)return i.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return i.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(oNe,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},jp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>i.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),bet=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=N.useState(null),a=N.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=N.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,h]=N.useState(c.activity),m=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(ih,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),i.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),i.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),i.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),i.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),i.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Wu,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):i.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:i.jsx(Fd,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return i.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[i.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),i.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),i.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(R2,{href:d.recursoUrl})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(o,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&i.jsx(l,{data:r,onClose:()=>n(null),onSave:t})]})},yet=({planificaciones:e,onBack:t})=>{const r=N.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(WO).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=N.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=N.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...f.map(([,m])=>m));return h?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),i.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return i.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:i.jsx(ew,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),i.jsx("div",{className:"space-y-4",children:Object.keys(WO).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=f[h]||"bg-slate-400";return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},l=({icon:c,title:u,value:d,description:f,color:h})=>i.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold",children:d}),i.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),i.jsx("p",{className:"text-white/90 text-sm",children:f})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:i.jsx(T_,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(rw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(l,{icon:i.jsx(Eg,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),i.jsx(l,{icon:i.jsx(F2e,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),i.jsx(l,{icon:i.jsx(zd,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),i.jsx(l,{icon:i.jsx(vi,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(o,{data:r.categoriaCount}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(y2,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),i.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),i.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},wet=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=N.useState([]),[s,o]=N.useState([]),[l,c]=N.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=N.useState(null);N.useEffect(()=>{const v=tue(a),y=xet(e.id,o);return()=>{v(),y()}},[e.id]);const f=N.useMemo(()=>n.filter(v=>v.profile===Ht.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async v=>{d(v.id);{alert("La API Key de Gemini no está configurada."),d(null);return}},m=v=>v.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(rw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),i.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>i.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),i.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(w=>w.tareaId===l.id&&w.estudianteId===v.id);return i.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[i.jsx(dR,{className:"w-4 h-4"})," Entregado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[i.jsx(Wu,{className:"w-4 h-4"})," Pendiente"]})})]}),y?i.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),i.jsx(R2,{href:y.enlaceUrl})]}),y.archivoAdjunto&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),i.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[i.jsx(jh,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>vet(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),i.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(ng,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(Wu,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Wu,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),i.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[i.jsx(rw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},Net=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:o})=>{const[l,c]=N.useState(null),u=GI==null?void 0:GI.VITE_GEMINI_API_KEY,d=h=>h.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async h=>{var m,g,x;if(!u){alert("La API Key de Gemini no está configurada.");return}if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new PS(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,O=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),j=JSON.parse(O);s({actividades:(m=j.actividades)==null?void 0:m.map(B=>({...B,id:crypto.randomUUID()})),fechasClave:(g=j.fechasClave)==null?void 0:g.map(B=>({id:crypto.randomUUID(),nombre:B.nombre,fecha:B.fecha,recursoUrl:B.recursoUrl})),tareas:(x=j.tareas)==null?void 0:x.map((B,C)=>({...B,id:crypto.randomUUID(),numero:C+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(ng,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(ng,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",i.jsx("span",{children:"Generando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(ng,{className:"w-4 h-4"})," ",i.jsx("span",{children:"Estructura IA"})]})})]})},Eet=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=N.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=N.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=N.useState(null),[d,f]=N.useState({nombre:"",fecha:"",recursoUrl:""}),[h,m]=N.useState(null),[g,x]=N.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[v,y]=N.useState(null);N.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const w=W=>s(G=>({...G,[W.target.name]:W.target.value})),_=W=>{s(G=>{const Y=G.asignaturas,K=Y.includes(W)?Y.filter(F=>F!==W):[...Y,W];let H=G.contenidosPorAsignatura;return K.includes(W)&&!Y.includes(W)&&(H=[...H,{asignatura:W,contenidos:"",habilidades:[]}]),!K.includes(W)&&Y.includes(W)&&(H=H.filter(F=>F.asignatura!==W)),{...G,asignaturas:K,contenidosPorAsignatura:H}})},O=W=>s(G=>({...G,cursos:G.cursos.includes(W)?G.cursos.filter(Y=>Y!==W):[...G.cursos,W]})),j=W=>s(G=>({...G,docentesResponsables:G.docentesResponsables.includes(W)?G.docentesResponsables.filter(Y=>Y!==W):[...G.docentesResponsables,W]})),B=(W,G,Y)=>s(K=>({...K,contenidosPorAsignatura:K.contenidosPorAsignatura.map(H=>H.asignatura===W?{...H,[G]:Y}:H)})),C=(W,G)=>s(Y=>({...Y,contenidosPorAsignatura:Y.contenidosPorAsignatura.map(K=>K.asignatura===W?{...K,habilidades:K.habilidades.includes(G)?K.habilidades.filter(H=>H!==G):[...K.habilidades,G]}:K)})),k=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}c?(s(W=>({...W,actividades:W.actividades.map(G=>G.id===c?{...o,id:c}:G)})),u(null)):s(W=>({...W,actividades:[...W.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},T=W=>{u(W.id),l(W)},L=W=>{window.confirm("¿Eliminar esta actividad?")&&s(G=>({...G,actividades:G.actividades.filter(Y=>Y.id!==W)}))},R=()=>{if(!d.nombre||!d.fecha){alert("Nombre y fecha son obligatorios para el hito.");return}h?(s(W=>({...W,fechasClave:W.fechasClave.map(G=>G.id===h?{...d,id:h}:G)})),m(null)):s(W=>({...W,fechasClave:[...W.fechasClave||[],{...d,id:crypto.randomUUID()}]})),f({nombre:"",fecha:"",recursoUrl:""})},S=W=>{m(W.id),f(W)},U=W=>{window.confirm("¿Eliminar este hito?")&&s(G=>({...G,fechasClave:G.fechasClave.filter(Y=>Y.id!==W)}))},Q=()=>{var W,G;if(!g.instrucciones||!g.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}if(v){const Y={...g,id:v,numero:((W=a.tareas.find(K=>K.id===v))==null?void 0:W.numero)||0};s(K=>({...K,tareas:K.tareas.map(H=>H.id===v?Y:H)})),y(null)}else{const Y={id:crypto.randomUUID(),numero:(((G=a.tareas)==null?void 0:G.length)||0)+1,...g};s(K=>({...K,tareas:[...K.tareas||[],Y]}))}x({instrucciones:"",fechaEntrega:"",recursoUrl:""})},X=W=>{y(W.id),x({instrucciones:W.instrucciones,fechaEntrega:W.fechaEntrega,recursoUrl:W.recursoUrl||""})},z=W=>{window.confirm("¿Eliminar esta tarea?")&&s(G=>({...G,tareas:G.tareas.filter(Y=>Y.id!==W)}))};return i.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:i.jsx(Eg,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx(jp,{icon:i.jsx(zd,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:i.jsx(Net,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:W=>s(G=>({...G,objetivos:W})),onIndicadores:W=>s(G=>({...G,indicadoresLogro:W})),onEstructura:W=>s(G=>{var Y,K,H;return{...G,actividades:(Y=W.actividades)!=null&&Y.length?W.actividades:G.actividades,fechasClave:(K=W.fechasClave)!=null&&K.length?W.fechasClave:G.fechasClave,tareas:(H=W.tareas)!=null&&H.length?W.tareas:G.tareas}})}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),i.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:w,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),i.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:w,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),i.jsx(jp,{icon:i.jsx(ro,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:i.jsx("div",{className:"space-y-3",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(W=>i.jsx("button",{type:"button",onClick:()=>j(W.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(W.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(W.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:i.jsx(sw,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:W.nombreCompleto}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:W.email})]})]})},W.id))})})}),i.jsx(jp,{icon:i.jsx(b2,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:ks.map(W=>i.jsx("button",{type:"button",onClick:()=>O(W),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(W)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:W},W))})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(jp,{icon:i.jsx(vi,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Ua.map(W=>i.jsx("button",{type:"button",onClick:()=>_(W),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(W)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:W},W))})]}),a.contenidosPorAsignatura.length>0&&i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(W=>i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[i.jsx(vi,{className:"w-4 h-4"})," ",W.asignatura]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),i.jsx("textarea",{value:W.contenidos,onChange:G=>B(W.asignatura,"contenidos",G.target.value),placeholder:`Detalle los contenidos específicos de ${W.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),i.jsx("div",{className:"space-y-2",children:Object.entries(WO).map(([G,Y])=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[i.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[G,":"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:Y.map(K=>i.jsx("button",{type:"button",onClick:()=>C(W.asignatura,K),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${W.habilidades.includes(K)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:K},K))})]},G))}),W.habilidades.length>0&&i.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:W.habilidades.map(G=>i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:G},G))})]})]})]})]},W.asignatura))]})]})}),i.jsx(jp,{icon:i.jsx(fb,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:i.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:w,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsx(jp,{icon:i.jsx(qc,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:i.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:w,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsxs(jp,{icon:i.jsx(oc,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Fd,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),i.jsx("input",{value:o.nombre,onChange:W=>l({...o,nombre:W.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),i.jsx("input",{type:"date",value:o.fechaInicio,onChange:W=>l({...o,fechaInicio:W.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),i.jsx("input",{type:"date",value:o.fechaFin,onChange:W=>l({...o,fechaFin:W.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:o.recursoUrl||"",onChange:W=>l({...o,recursoUrl:W.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("button",{type:"button",onClick:k,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:c?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(So,{className:"w-4 h-4"})," Agregar"]})})})]}),!!a.actividades.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.actividades.map(W=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:W.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",W.fechaInicio," - ",W.fechaFin,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(R2,{href:W.recursoUrl}),i.jsx("button",{onClick:()=>T(W),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(ih,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>L(W.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},W.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(dR,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),i.jsx("input",{value:d.nombre,onChange:W=>f({...d,nombre:W.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:d.fecha,onChange:W=>f({...d,fecha:W.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"sm:col-span-1",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:d.recursoUrl||"",onChange:W=>f({...d,recursoUrl:W.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("button",{type:"button",onClick:R,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:h?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(So,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.fechasClave.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.fechasClave.map(W=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:W.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",W.fecha,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(R2,{href:W.recursoUrl}),i.jsx("button",{onClick:()=>S(W),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(ih,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>U(W.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},W.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ew,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-5",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones"}),i.jsx("input",{value:g.instrucciones,onChange:W=>x({...g,instrucciones:W.target.value}),placeholder:"Descripción de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),i.jsx("input",{type:"date",value:g.fechaEntrega,onChange:W=>x({...g,fechaEntrega:W.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:g.recursoUrl||"",onChange:W=>x({...g,recursoUrl:W.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx("button",{type:"button",onClick:Q,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:v?i.jsx(ih,{className:"w-4 h-4"}):i.jsx(So,{className:"w-4 h-4"})})})]}),!!a.tareas.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.tareas.map(W=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",W.numero]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:W.instrucciones})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:W.fechaEntrega}),"recursoUrl"in W?i.jsx(R2,{href:W.recursoUrl}):i.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2 pl-2 border-l ml-2",children:[i.jsx("button",{onClick:()=>X(W),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(ih,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>z(W.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Va,{className:"w-3 h-3"})})]})]},W.id))})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),i.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},wW=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState(!0),[o,l]=N.useState("list"),[c,u]=N.useState(null),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState("all"),v=N.useMemo(()=>g==="all"?e:e.filter(k=>k.id===g),[e,g]);N.useEffect(()=>{s(!0);const k=tue(L=>{const R=L.filter(S=>S.profile===Ht.PROFESORADO);n(R)}),T=met(L=>{const R=L.map(S=>({...S,docentesResponsables:Array.isArray(S.docentesResponsables)?S.docentesResponsables:[S.docentesResponsables].filter(Boolean),contenidosPorAsignatura:S.contenidosPorAsignatura||[],actividades:S.actividades||[],fechasClave:S.fechasClave||[]}));t(R),s(!1)});return()=>{k(),T()}},[]);const y=N.useCallback(async(k,T)=>{const L=e.find(S=>S.id===k);if(!L)return;const R={...L,actividades:(L.actividades||[]).map(S=>S.id===T.id?T:S)};await yW(k,R)},[e]),w=async k=>{try{const T=k.id&&String(k.id).length>0,L={...k};if(T){const{id:R,...S}=L;await yW(k.id,S)}else delete L.id,await pet(L);l("list"),u(null)}catch(T){console.error("Error al guardar la planificación:",T),alert("No se pudo guardar la planificación.")}},_=k=>{u(k),l("form")},O=async k=>{if(!k){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await get(k)}catch(T){console.error(T),alert("No se pudo eliminar la planificación.")}},j=()=>{u(null),l("form")},B=async k=>{f(k.id);try{const T=new Ar("p","mm","a4"),L=T.internal.pageSize.getHeight(),R=T.internal.pageSize.getWidth(),S=15,U=R-S*2;let Q=S,X=1;const G=await(await fetch("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png")).blob(),Y=await new Promise((ie,oe)=>{const de=new FileReader;de.onloadend=()=>ie(de.result),de.onerror=oe,de.readAsDataURL(G)}),K=()=>{T.addImage(Y,"PNG",S,Q,U,20),Q+=25},H=()=>{T.setFont("helvetica","normal"),T.setFontSize(9),T.setTextColor(149,165,166);const ie=`Página ${X}`,oe=T.getStringUnitWidth(ie)*T.getFontSize()/T.internal.scaleFactor;T.text(ie,(R-oe)/2,L-10)},F=ie=>Q+ie>L-S?(H(),T.addPage(),X++,Q=S,K(),!0):!1,D=ie=>{F(15),T.setFont("helvetica","bold"),T.setFontSize(14),T.setTextColor(44,62,80),T.text(ie,S,Q),Q+=8},q=ie=>{if(!ie||!ie.trim())return;T.setFont("helvetica","normal"),T.setFontSize(11),T.setTextColor(86,101,115);const oe=T.splitTextToSize(ie,U);F(oe.length*5+5),T.text(oe,S,Q),Q+=oe.length*5+8};K(),T.setFont("helvetica","bold"),T.setFontSize(22),T.setTextColor(41,128,185);const J=T.splitTextToSize(k.nombreProyecto,U);F(J.length*10+10),T.text(J,S,Q),Q+=J.length*9+10,gi(T,{startY:Q,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(ie=>ie.map(oe=>{var de;return((de=r.find(ke=>ke.id===oe))==null?void 0:de.nombreCompleto)||oe}).join(", "))(k.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},k.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},k.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold",fillColor:[245,245,245]}},didDrawPage:ie=>{ie.pageNumber>1&&(Q=S,K())}}),Q=T.lastAutoTable.finalY+10,D("Descripción del Proyecto"),q(k.descripcionProyecto),D("Objetivos de Aprendizaje"),q(k.objetivos),D("Indicadores de Logro"),q(k.indicadoresLogro),k.contenidosPorAsignatura&&k.contenidosPorAsignatura.length>0&&(D("Contenidos y Habilidades por Asignatura"),k.contenidosPorAsignatura.forEach(ie=>{var oe;F(15),T.setFont("helvetica","bold"),T.setFontSize(12),T.setTextColor(52,73,94),T.text(`${ie.asignatura}:`,S,Q),Q+=7,ie.contenidos&&q(`Contenidos: ${ie.contenidos}`),(oe=ie.habilidades)!=null&&oe.length&&q(`Habilidades: ${ie.habilidades.join(", ")}`)}));const ne={theme:"striped",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:2.5,halign:"left"},didDrawPage:ie=>{ie.pageNumber>X&&(X=ie.pageNumber,H()),ie.pageNumber>1&&(Q=S,K())}};if(k.actividades&&k.actividades.length>0&&(D("Cronograma de Actividades"),gi(T,{...ne,startY:Q,head:[["Actividad","Inicio","Fin","Recurso"]],body:k.actividades.map(ie=>[ie.nombre,ie.fechaInicio,ie.fechaFin,ie.recursoUrl||"—"])}),Q=T.lastAutoTable.finalY+10),k.fechasClave&&k.fechasClave.length>0&&(D("Hitos y Fechas Clave"),gi(T,{...ne,startY:Q,head:[["Hito","Fecha","Recurso"]],body:k.fechasClave.map(ie=>[ie.nombre,ie.fecha,ie.recursoUrl||"—"])}),Q=T.lastAutoTable.finalY+10),k.tareas&&k.tareas.length>0){D("Tareas para Estudiantes");const ie=k.tareas.map(oe=>[String(oe.numero||""),oe.instrucciones,oe.fechaEntrega,oe.recursoUrl||"—"]);gi(T,{...ne,startY:Q,head:[["#","Instrucciones","Entrega","Recurso"]],body:ie}),Q=T.lastAutoTable.finalY+10}H(),T.save(`Proyecto_${k.nombreProyecto.replace(/\s/g,"_")}.pdf`)}catch(T){console.error("Error al generar PDF:",T),alert("No se pudo generar el PDF. Verifique la consola para más detalles.")}finally{f(null)}},C=k=>k.map(T=>{var L;return((L=r.find(R=>R.id===T))==null?void 0:L.nombreCompleto)||T}).join(", ");return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?i.jsx(wet,{plan:h,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),i.jsx(yet,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsx(Eet,{initialPlan:c,onSave:w,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:i.jsx(Eg,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[i.jsx(T_,{className:"w-5 h-5"})," Ver Dashboard"]}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[i.jsx(So,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:i.jsx(Eg,{className:"w-12 h-12 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(So,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(k=>i.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:k.nombreProyecto}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(b2,{className:"w-4 h-4"}),i.jsxs("span",{children:["Cursos: ",k.cursos.join(", ")]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(ro,{className:"w-4 h-4"}),i.jsxs("span",{children:["Profesores: ",C(k.docentesResponsables)]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(vi,{className:"w-4 h-4"}),i.jsxs("span",{children:["Asignaturas: ",k.asignaturas.length]})]})]})]})}),!!k.descripcionProyecto&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:k.descripcionProyecto}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>m(k),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[i.jsx(dR,{className:"w-4 h-4"})," Entregas"]}),i.jsxs("button",{type:"button",onClick:()=>B(k),disabled:d===k.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===k.id?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):i.jsx(jh,{className:"w-4 h-4"}),"PDF"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>_(k),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:i.jsx(ih,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>O(k.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:i.jsx(Va,{className:"w-4 h-4"})})]})]})]},k.id))})]}),e.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(aNe,{className:"w-5 h-5 text-slate-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),i.jsxs("select",{value:g,onChange:k=>x(k.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[i.jsx("option",{value:"all",children:"Todos"}),e.map(k=>i.jsx("option",{value:k.id,children:k.nombreProyecto},k.id))]})]})]}),i.jsx("div",{id:"gantt-container-vertical",children:i.jsx(bet,{planificaciones:v,onActivityUpdate:y})})]})]})},Ob="panol_maquinas",ON="panol_registros",Cet=e=>{const t=Lt(mt(st,Ob),Jt("nombre","asc"));return lr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},_et=e=>{const t=Lt(mt(st,ON),Jt("fecha","desc"));return lr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},ket=async e=>(await on(mt(st,Ob),{...e,createdAt:ya(),updatedAt:ya()})).id,jet=async(e,t)=>{await dl(Yt(st,Ob,e),{...t,updatedAt:ya()})},Bet=async e=>{const t=Lt(mt(st,ON),dr("maquinaId","==",e));if(!(await Mr(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await wa(Yt(st,Ob,e))},Tet=async e=>(await on(mt(st,ON),{...e,createdAt:ya(),updatedAt:ya()})).id,Iet=async(e,t)=>{await dl(Yt(st,ON,e),{...t,updatedAt:ya()})},Fet=async e=>{await wa(Yt(st,ON,e))},Oet=async()=>{if(!(await Mr(mt(st,Ob))).empty)return;const t=$g(st);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=Yt(mt(st,Ob));t.set(a,{...n,createdAt:ya(),updatedAt:ya()})}),await t.commit()},Det=()=>{var X;const[e,t]=N.useState([]),[r,n]=N.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,o]=N.useState(a),[l,c]=N.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=N.useState(u),[h,m]=N.useState(null),[g,x]=N.useState({maquinaId:"",curso:"",profesor:"",fecha:""});N.useEffect(()=>{Oet().catch(console.error);const z=Cet(t),W=_et(n);return()=>{z&&z(),W&&W()}},[]);const v=async z=>{if(z.preventDefault(),!!d.nombre.trim())try{h?await jet(h.id,{...d}):await ket({...d}),f(u),m(null)}catch(W){alert(W.message||"Error al guardar máquina")}},y=N.useCallback(async z=>{try{await Bet(z)}catch(W){alert(W.message||"Error al eliminar máquina")}},[]),w=async z=>{z.preventDefault();const W=l||s;if(!W.curso||!W.profesorResponsable.trim()||!W.maquinaId||Number(W.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:G,...Y}=l;await Iet(G,Y)}else await Tet({...s});o(a),c(null)}catch(G){alert(G.message||"Error al guardar registro")}},_=N.useCallback(async z=>{try{await Fet(z)}catch(W){alert(W.message||"Error al eliminar registro")}},[]),O=N.useMemo(()=>r.filter(z=>(g.maquinaId===""||z.maquinaId===g.maquinaId)&&(g.curso===""||z.curso===g.curso)&&(g.profesor===""||z.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||z.fecha===g.fecha)).sort((z,W)=>new Date(W.fecha).getTime()-new Date(z.fecha).getTime()),[r,g]),j=N.useMemo(()=>new Map(e.map(z=>[z.id,z])),[e]),B=N.useMemo(()=>O.reduce((z,W)=>z+(Number(W.totalHoras)||0),0),[O]),C=N.useMemo(()=>{const z=new Map;O.forEach(G=>{var K;const Y=((K=j.get(G.maquinaId))==null?void 0:K.nombre)||"N/A";z.set(Y,(z.get(Y)||0)+(Number(G.totalHoras)||0))});const W=Array.from(z.entries()).map(([G,Y])=>({maquina:G,horas:Number(Y.toFixed(2))}));return W.sort((G,Y)=>Y.horas-G.horas),W},[O,j]),k=()=>{const z=O.map(Y=>{var K,H;return{Fecha:Y.fecha,Curso:Y.curso,Profesor:Y.profesorResponsable,Máquina:((K=j.get(Y.maquinaId))==null?void 0:K.nombre)||"N/A",Especialidad:((H=j.get(Y.maquinaId))==null?void 0:H.especialidad)||"N/A","Total Horas":Y.totalHoras,Observaciones:Y.observaciones}}),W=Ts.json_to_sheet(z),G=Ts.book_new();Ts.book_append_sheet(G,W,"RegistrosPañol"),o1(G,"Registros_Pañol.xlsx")},T=()=>{const z=new Ar;gi(z,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:O.map(W=>{var G,Y;return[W.fecha,W.curso,W.profesorResponsable,((G=j.get(W.maquinaId))==null?void 0:G.nombre)||"N/A",((Y=j.get(W.maquinaId))==null?void 0:Y.especialidad)||"N/A",W.totalHoras,W.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:W=>{z.setFontSize(12),z.setFont("helvetica","bold"),z.text("LICEO INDUSTRIAL DE RECOLETA",W.settings.margin.left,14),z.setFontSize(10),z.setFont("helvetica","normal"),z.text("Informe de Registros de Pañol",W.settings.margin.left,20)}}),z.save("Registros_Pañol.pdf")},L="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",R=(z,W)=>i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W}`,children:z}),S=({icon:z,label:W,value:G,accent:Y="from-indigo-500 to-sky-500"})=>i.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${Y} opacity-10`}),i.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:z}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:W}),i.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:G})]})]})]}),U=({title:z,icon:W,children:G,right:Y,accent:K="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>i.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${K}`}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[W," ",i.jsx("span",{children:z})]}),Y]}),G]})]}),Q=()=>{const z=l||s,W=l?c:o;return i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(oc,{size:16})," Fecha"]}),i.jsx("input",{name:"fecha",type:"date",value:z.fecha,onChange:G=>W({...z,fecha:G.target.value}),className:L,required:!0})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ro,{size:16})," Curso"]}),i.jsxs("select",{name:"curso",value:z.curso,onChange:G=>W({...z,curso:G.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Curso"}),ks.map(G=>i.jsx("option",{children:G},G))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(vi,{size:16})," Profesor"]}),i.jsxs("select",{name:"profesorResponsable",value:z.profesorResponsable,onChange:G=>W({...z,profesorResponsable:G.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Profesor Responsable"}),vF.map(G=>i.jsx("option",{value:G,children:G},G))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(_5,{size:16})," Máquina"]}),i.jsxs("select",{name:"maquinaId",value:z.maquinaId,onChange:G=>W({...z,maquinaId:G.target.value}),className:L,required:!0,children:[i.jsx("option",{value:"",children:"Máquina"}),e.map(G=>i.jsx("option",{value:G.id,children:G.nombre},G.id))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(k_,{size:16})," Total de Horas"]}),i.jsx("input",{name:"totalHoras",type:"number",value:z.totalHoras,onChange:G=>W({...z,totalHoras:Number(G.target.value)}),className:L,required:!0,min:.5,step:.5})]}),i.jsxs("div",{className:"lg:col-span-6",children:[i.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),i.jsx("textarea",{name:"observaciones",value:z.observaciones,onChange:G=>W({...z,observaciones:G.target.value}),placeholder:"Observaciones...",className:L+" min-h-[40px]",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&i.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[i.jsx(uA,{size:16})," Cancelar"]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?i.jsx(Yc,{size:16}):i.jsx(So,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[i.jsx(fR,{size:18})," Excel"]}),i.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[i.jsx(zd,{size:18})," PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(S,{icon:i.jsx(_5,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),i.jsx(S,{icon:i.jsx(zd,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:O.length,accent:"from-sky-500 to-cyan-500"}),i.jsx(S,{icon:i.jsx(k_,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:B.toFixed(1),accent:"from-emerald-500 to-lime-500"}),i.jsx(S,{icon:i.jsx(oc,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(X=r[0])!=null&&X.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[i.jsx("div",{className:"xl:col-span-3",children:i.jsx(U,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:i.jsx(jwe,{size:18}),children:i.jsx(Q,{})})}),i.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:i.jsx(U,{title:"Uso por máquina (horas)",icon:i.jsx(qc,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:i.jsx("div",{className:"flex gap-2 items-center",children:R(`${C.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:i.jsx("div",{className:"h-[320px] w-full",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(Iw,{data:C,margin:{top:8,right:16,bottom:8,left:0},children:[i.jsx(Tw,{strokeDasharray:"3 3"}),i.jsx(Dg,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),i.jsx(Pg,{}),i.jsx(uh,{}),i.jsx(c1,{}),i.jsx(Bb,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),i.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:i.jsxs(U,{title:"Administrar máquinas",icon:i.jsx(_5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[i.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[i.jsx("input",{value:d.nombre,onChange:z=>f({...d,nombre:z.target.value}),placeholder:"Nombre máquina",className:L+" md:col-span-2"}),i.jsxs("select",{value:d.especialidad,onChange:z=>f({...d,especialidad:z.target.value}),className:L+" md:col-span-2",children:[i.jsx("option",{value:"Industrial",children:"Industrial"}),i.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?i.jsx(Yc,{size:16}):i.jsx(So,{size:16}),h?"Guardar":"Agregar"]})]}),i.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(z=>i.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:z.nombre}),i.jsx("div",{className:"text-xs",children:z.especialidad==="Industrial"?R("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):R("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{m(z),f(z)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:i.jsx(B_,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>y(z.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:i.jsx(Va,{size:16,className:"text-red-600"})})]})]},z.id))})]})}),i.jsx("div",{className:"xl:col-span-2 order-3",children:i.jsxs(U,{title:"Historial de uso",icon:i.jsx(zd,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Xk,{size:16,className:"text-slate-600"})}),children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[i.jsx("input",{type:"date",value:g.fecha,onChange:z=>x({...g,fecha:z.target.value}),className:L,placeholder:"Fecha"}),i.jsxs("select",{value:g.curso,onChange:z=>x({...g,curso:z.target.value}),className:L,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),ks.map(z=>i.jsx("option",{children:z},z))]}),i.jsxs("select",{value:g.maquinaId,onChange:z=>x({...g,maquinaId:z.target.value}),className:L,children:[i.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(z=>i.jsx("option",{value:z.id,children:z.nombre},z.id))]}),i.jsxs("div",{className:"relative",children:[i.jsx(t1,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),i.jsx("input",{value:g.profesor,onChange:z=>x({...g,profesor:z.target.value}),placeholder:"Buscar profesor...",className:L+" pl-9"})]})]}),i.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[O.map(z=>{var W;return i.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:z.fecha}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((W=j.get(z.maquinaId))==null?void 0:W.nombre)||"N/A"}),i.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[z.profesorResponsable," ",i.jsxs("span",{className:"text-slate-400",children:["(",z.curso,")"]})]}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:z.totalHoras}),i.jsxs("td",{className:"px-3 py-2 text-center",children:[i.jsx("button",{onClick:()=>c(z),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:i.jsx(B_,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>_(z.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:i.jsx(Va,{size:16,className:"text-red-600"})})]})]},z.id)}),O.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Il(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Il(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const Pet={},NW=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Pet?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},Ret=e=>e?NW(e):NW,{useDebugValue:Let}=ot,{useSyncExternalStoreWithSelector:Met}=POe,Uet=e=>e;function rue(e,t=Uet,r){const n=Met(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Let(n),n}const EW=(e,t)=>{const r=Ret(e),n=(a,s=t)=>rue(r,a,s);return Object.assign(n,r),n},Qet=(e,t)=>e?EW(e,t):EW;function ul(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var Het={value:()=>{}};function sj(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new O5(r)}function O5(e){this._=e}function Vet(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}O5.prototype=sj.prototype={constructor:O5,on:function(e,t){var r=this._,n=Vet(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=zet(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=CW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=CW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new O5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function zet(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function CW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Het,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var XO="http://www.w3.org/1999/xhtml";const _W={svg:"http://www.w3.org/2000/svg",xhtml:XO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ij(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),_W.hasOwnProperty(t)?{space:_W[t],local:e}:e}function $et(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===XO&&t.documentElement.namespaceURI===XO?t.createElement(e):t.createElementNS(r,e)}}function Get(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function nue(e){var t=ij(e);return(t.local?Get:$et)(t)}function qet(){}function DM(e){return e==null?qet:function(){return this.querySelector(e)}}function Ket(e){typeof e!="function"&&(e=DM(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new nu(n,this._parents)}function Wet(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xet(){return[]}function aue(e){return e==null?Xet:function(){return this.querySelectorAll(e)}}function Yet(e){return function(){return Wet(e.apply(this,arguments))}}function Jet(e){typeof e=="function"?e=Yet(e):e=aue(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var o=t[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(n.push(e.call(c,c.__data__,u,o)),a.push(c));return new nu(n,a)}function sue(e){return function(){return this.matches(e)}}function iue(e){return function(t){return t.matches(e)}}var Zet=Array.prototype.find;function ett(e){return function(){return Zet.call(this.children,e)}}function ttt(){return this.firstElementChild}function rtt(e){return this.select(e==null?ttt:ett(typeof e=="function"?e:iue(e)))}var ntt=Array.prototype.filter;function att(){return Array.from(this.children)}function stt(e){return function(){return ntt.call(this.children,e)}}function itt(e){return this.selectAll(e==null?att:stt(typeof e=="function"?e:iue(e)))}function ott(e){typeof e!="function"&&(e=sue(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new nu(n,this._parents)}function oue(e){return new Array(e.length)}function ltt(){return new nu(this._enter||this._groups.map(oue),this._parents)}function MS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}MS.prototype={constructor:MS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ctt(e){return function(){return e}}function utt(e,t,r,n,a,s){for(var o=0,l,c=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],n[o]=l):r[o]=new MS(e,s[o]);for(;o<c;++o)(l=t[o])&&(a[o]=l)}function dtt(e,t,r,n,a,s,o){var l,c,u=new Map,d=t.length,f=s.length,h=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(h[l]=m=o.call(c,c.__data__,l,t)+"",u.has(m)?a[l]=c:u.set(m,c));for(l=0;l<f;++l)m=o.call(e,s[l],l,s)+"",(c=u.get(m))?(n[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new MS(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(h[l])===c&&(a[l]=c)}function ftt(e){return e.__data__}function Att(e,t){if(!arguments.length)return Array.from(this,ftt);var r=t?dtt:utt,n=this._parents,a=this._groups;typeof e!="function"&&(e=ctt(e));for(var s=a.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,m=htt(e.call(d,d&&d.__data__,u,n)),g=m.length,x=l[u]=new Array(g),v=o[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,v,y,m,t);for(var w=0,_=0,O,j;w<g;++w)if(O=x[w]){for(w>=_&&(_=w+1);!(j=v[_])&&++_<g;);O._next=j||null}}return o=new nu(o,n),o._enter=l,o._exit=c,o}function htt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mtt(){return new nu(this._exit||this._groups.map(oue),this._parents)}function ptt(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function gtt(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,o=Math.min(a,s),l=new Array(a),c=0;c<o;++c)for(var u=r[c],d=n[c],f=u.length,h=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<a;++c)l[c]=r[c];return new nu(l,this._parents)}function xtt(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],o;--a>=0;)(o=n[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function vtt(e){e||(e=btt);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var o=r[s],l=o.length,c=a[s]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new nu(a,this._parents).order()}function btt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ytt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wtt(){return Array.from(this)}function Ntt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var o=n[a];if(o)return o}return null}function Ett(){let e=0;for(const t of this)++e;return e}function Ctt(){return!this.node()}function _tt(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,o=a.length,l;s<o;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function Stt(e){return function(){this.removeAttribute(e)}}function ktt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jtt(e,t){return function(){this.setAttribute(e,t)}}function Btt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ttt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Itt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Ftt(e,t){var r=ij(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?ktt:Stt:typeof t=="function"?r.local?Itt:Ttt:r.local?Btt:jtt)(r,t))}function lue(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ott(e){return function(){this.style.removeProperty(e)}}function Dtt(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Ptt(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Rtt(e,t,r){return arguments.length>1?this.each((t==null?Ott:typeof t=="function"?Ptt:Dtt)(e,t,r??"")):Db(this.node(),e)}function Db(e,t){return e.style.getPropertyValue(t)||lue(e).getComputedStyle(e,null).getPropertyValue(t)}function Ltt(e){return function(){delete this[e]}}function Mtt(e,t){return function(){this[e]=t}}function Utt(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Qtt(e,t){return arguments.length>1?this.each((t==null?Ltt:typeof t=="function"?Utt:Mtt)(e,t)):this.node()[e]}function cue(e){return e.trim().split(/^|\s+/)}function PM(e){return e.classList||new uue(e)}function uue(e){this._node=e,this._names=cue(e.getAttribute("class")||"")}uue.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function due(e,t){for(var r=PM(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function fue(e,t){for(var r=PM(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Htt(e){return function(){due(this,e)}}function Vtt(e){return function(){fue(this,e)}}function ztt(e,t){return function(){(t.apply(this,arguments)?due:fue)(this,e)}}function $tt(e,t){var r=cue(e+"");if(arguments.length<2){for(var n=PM(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?ztt:t?Htt:Vtt)(r,t))}function Gtt(){this.textContent=""}function qtt(e){return function(){this.textContent=e}}function Ktt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Wtt(e){return arguments.length?this.each(e==null?Gtt:(typeof e=="function"?Ktt:qtt)(e)):this.node().textContent}function Xtt(){this.innerHTML=""}function Ytt(e){return function(){this.innerHTML=e}}function Jtt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ztt(e){return arguments.length?this.each(e==null?Xtt:(typeof e=="function"?Jtt:Ytt)(e)):this.node().innerHTML}function ert(){this.nextSibling&&this.parentNode.appendChild(this)}function trt(){return this.each(ert)}function rrt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nrt(){return this.each(rrt)}function art(e){var t=typeof e=="function"?e:nue(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function srt(){return null}function irt(e,t){var r=typeof e=="function"?e:nue(e),n=t==null?srt:typeof t=="function"?t:DM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function ort(){var e=this.parentNode;e&&e.removeChild(this)}function lrt(){return this.each(ort)}function crt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function urt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function drt(e){return this.select(e?urt:crt)}function frt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Art(e){return function(t){e.call(this,t,this.__data__)}}function hrt(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function mrt(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function prt(e,t,r){return function(){var n=this.__on,a,s=Art(t);if(n){for(var o=0,l=n.length;o<l;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function grt(e,t,r){var n=hrt(e+""),a,s=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<s;++a)if((o=n[a]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?prt:mrt,a=0;a<s;++a)this.each(l(n[a],t,r));return this}function Aue(e,t,r){var n=lue(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function xrt(e,t){return function(){return Aue(this,e,t)}}function vrt(e,t){return function(){return Aue(this,e,t.apply(this,arguments))}}function brt(e,t){return this.each((typeof t=="function"?vrt:xrt)(e,t))}function*yrt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,o;a<s;++a)(o=n[a])&&(yield o)}var hue=[null];function nu(e,t){this._groups=e,this._parents=t}function DN(){return new nu([[document.documentElement]],hue)}function wrt(){return this}nu.prototype=DN.prototype={constructor:nu,select:Ket,selectAll:Jet,selectChild:rtt,selectChildren:itt,filter:ott,data:Att,enter:ltt,exit:mtt,join:ptt,merge:gtt,selection:wrt,order:xtt,sort:vtt,call:ytt,nodes:wtt,node:Ntt,size:Ett,empty:Ctt,each:_tt,attr:Ftt,style:Rtt,property:Qtt,classed:$tt,text:Wtt,html:Ztt,raise:trt,lower:nrt,append:art,insert:irt,remove:lrt,clone:drt,datum:frt,on:grt,dispatch:brt,[Symbol.iterator]:yrt};function Hu(e){return typeof e=="string"?new nu([[document.querySelector(e)]],[document.documentElement]):new nu([[e]],hue)}function Nrt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Hf(e,t){if(e=Nrt(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ert={passive:!1},Rw={capture:!0,passive:!1};function qI(e){e.stopImmediatePropagation()}function Wv(e){e.preventDefault(),e.stopImmediatePropagation()}function mue(e){var t=e.document.documentElement,r=Hu(e).on("dragstart.drag",Wv,Rw);"onselectstart"in t?r.on("selectstart.drag",Wv,Rw):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function pue(e,t){var r=e.document.documentElement,n=Hu(e).on("dragstart.drag",null);t&&(n.on("click.drag",Wv,Rw),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const FC=e=>()=>e;function YO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}YO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Crt(e){return!e.ctrlKey&&!e.button}function _rt(){return this.parentNode}function Srt(e,t){return t??{x:e.x,y:e.y}}function krt(){return navigator.maxTouchPoints||"ontouchstart"in this}function jrt(){var e=Crt,t=_rt,r=Srt,n=krt,a={},s=sj("start","drag","end"),o=0,l,c,u,d,f=0;function h(O){O.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,Ert).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(O,j){if(!(d||!e.call(this,O,j))){var B=_(this,t.call(this,O,j),O,j,"mouse");B&&(Hu(O.view).on("mousemove.drag",g,Rw).on("mouseup.drag",x,Rw),mue(O.view),qI(O),u=!1,l=O.clientX,c=O.clientY,B("start",O))}}function g(O){if(Wv(O),!u){var j=O.clientX-l,B=O.clientY-c;u=j*j+B*B>f}a.mouse("drag",O)}function x(O){Hu(O.view).on("mousemove.drag mouseup.drag",null),pue(O.view,u),Wv(O),a.mouse("end",O)}function v(O,j){if(e.call(this,O,j)){var B=O.changedTouches,C=t.call(this,O,j),k=B.length,T,L;for(T=0;T<k;++T)(L=_(this,C,O,j,B[T].identifier,B[T]))&&(qI(O),L("start",O,B[T]))}}function y(O){var j=O.changedTouches,B=j.length,C,k;for(C=0;C<B;++C)(k=a[j[C].identifier])&&(Wv(O),k("drag",O,j[C]))}function w(O){var j=O.changedTouches,B=j.length,C,k;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<B;++C)(k=a[j[C].identifier])&&(qI(O),k("end",O,j[C]))}function _(O,j,B,C,k,T){var L=s.copy(),R=Hf(T||B,j),S,U,Q;if((Q=r.call(O,new YO("beforestart",{sourceEvent:B,target:h,identifier:k,active:o,x:R[0],y:R[1],dx:0,dy:0,dispatch:L}),C))!=null)return S=Q.x-R[0]||0,U=Q.y-R[1]||0,function X(z,W,G){var Y=R,K;switch(z){case"start":a[k]=X,K=o++;break;case"end":delete a[k],--o;case"drag":R=Hf(G||W,j),K=o;break}L.call(z,O,new YO(z,{sourceEvent:W,subject:Q,target:h,identifier:k,active:K,x:R[0]+S,y:R[1]+U,dx:R[0]-Y[0],dy:R[1]-Y[1],dispatch:L}),C)}}return h.filter=function(O){return arguments.length?(e=typeof O=="function"?O:FC(!!O),h):e},h.container=function(O){return arguments.length?(t=typeof O=="function"?O:FC(O),h):t},h.subject=function(O){return arguments.length?(r=typeof O=="function"?O:FC(O),h):r},h.touchable=function(O){return arguments.length?(n=typeof O=="function"?O:FC(!!O),h):n},h.on=function(){var O=s.on.apply(s,arguments);return O===s?h:O},h.clickDistance=function(O){return arguments.length?(f=(O=+O)*O,h):Math.sqrt(f)},h}var Pb=0,r2=0,ky=0,gue=1e3,US,n2,QS=0,Lg=0,oj=0,Lw=typeof performance=="object"&&performance.now?performance:Date,xue=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function RM(){return Lg||(xue(Brt),Lg=Lw.now()+oj)}function Brt(){Lg=0}function HS(){this._call=this._time=this._next=null}HS.prototype=vue.prototype={constructor:HS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?RM():+r)+(t==null?0:+t),!this._next&&n2!==this&&(n2?n2._next=this:US=this,n2=this),this._call=e,this._time=r,JO()},stop:function(){this._call&&(this._call=null,this._time=1/0,JO())}};function vue(e,t,r){var n=new HS;return n.restart(e,t,r),n}function Trt(){RM(),++Pb;for(var e=US,t;e;)(t=Lg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pb}function SW(){Lg=(QS=Lw.now())+oj,Pb=r2=0;try{Trt()}finally{Pb=0,Frt(),Lg=0}}function Irt(){var e=Lw.now(),t=e-QS;t>gue&&(oj-=t,QS=e)}function Frt(){for(var e,t=US,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:US=r);n2=e,JO(n)}function JO(e){if(!Pb){r2&&(r2=clearTimeout(r2));var t=e-Lg;t>24?(e<1/0&&(r2=setTimeout(SW,e-Lw.now()-oj)),ky&&(ky=clearInterval(ky))):(ky||(QS=Lw.now(),ky=setInterval(Irt,gue)),Pb=1,xue(SW))}}function kW(e,t,r){var n=new HS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var Ort=sj("start","end","cancel","interrupt"),Drt=[],bue=0,jW=1,ZO=2,D5=3,BW=4,eD=5,P5=6;function lj(e,t,r,n,a,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;Prt(e,r,{name:t,index:n,group:a,on:Ort,tween:Drt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:bue})}function LM(e,t){var r=rf(e,t);if(r.state>bue)throw new Error("too late; already scheduled");return r}function pA(e,t){var r=rf(e,t);if(r.state>D5)throw new Error("too late; already running");return r}function rf(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Prt(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=vue(s,0,r.time);function s(u){r.state=jW,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,h,m;if(r.state!==jW)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===D5)return kW(o);m.state===BW?(m.state=P5,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=P5,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(kW(function(){r.state===D5&&(r.state=BW,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=ZO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===ZO){for(r.state=D5,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=m);a.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=eD,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===eD&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=P5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function R5(e,t){var r=e.__transition,n,a,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}a=n.state>ZO&&n.state<eD,n.state=P5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function Rrt(e){return this.each(function(){R5(this,e)})}function Lrt(e,t){var r,n;return function(){var a=pA(this,e),s=a.tween;if(s!==r){n=r=s;for(var o=0,l=n.length;o<l;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function Mrt(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=pA(this,e),o=s.tween;if(o!==n){a=(n=o).slice();for(var l={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}s.tween=a}}function Urt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=rf(this.node(),r).tween,a=0,s=n.length,o;a<s;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?Lrt:Mrt)(r,e,t))}function MM(e,t,r){var n=e._id;return e.each(function(){var a=pA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return rf(a,n).value[t]}}function yue(e,t){var r;return(typeof t=="number"?Id:t instanceof Fg?hS:(r=Fg(t))?(t=r,hS):Cse)(e,t)}function Qrt(e){return function(){this.removeAttribute(e)}}function Hrt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vrt(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===n?s:s=t(n=o,r)}}function zrt(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?s:s=t(n=o,r)}}function $rt(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function Grt(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function qrt(e,t){var r=ij(e),n=r==="transform"?sLe:yue;return this.attrTween(e,typeof t=="function"?(r.local?Grt:$rt)(r,n,MM(this,"attr."+e,t)):t==null?(r.local?Hrt:Qrt)(r):(r.local?zrt:Vrt)(r,n,t))}function Krt(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Wrt(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Xrt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Wrt(e,s)),r}return a._value=t,a}function Yrt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Krt(e,s)),r}return a._value=t,a}function Jrt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=ij(e);return this.tween(r,(n.local?Xrt:Yrt)(n,t))}function Zrt(e,t){return function(){LM(this,e).delay=+t.apply(this,arguments)}}function ent(e,t){return t=+t,function(){LM(this,e).delay=t}}function tnt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zrt:ent)(t,e)):rf(this.node(),t).delay}function rnt(e,t){return function(){pA(this,e).duration=+t.apply(this,arguments)}}function nnt(e,t){return t=+t,function(){pA(this,e).duration=t}}function ant(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rnt:nnt)(t,e)):rf(this.node(),t).duration}function snt(e,t){if(typeof t!="function")throw new Error;return function(){pA(this,e).ease=t}}function int(e){var t=this._id;return arguments.length?this.each(snt(t,e)):rf(this.node(),t).ease}function ont(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;pA(this,e).ease=r}}function lnt(e){if(typeof e!="function")throw new Error;return this.each(ont(this._id,e))}function cnt(e){typeof e!="function"&&(e=sue(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Mh(n,this._parents,this._name,this._id)}function unt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),o=new Array(n),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,f=o[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;l<n;++l)o[l]=t[l];return new Mh(o,this._parents,this._name,this._id)}function dnt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function fnt(e,t,r){var n,a,s=dnt(t)?LM:pA;return function(){var o=s(this,e),l=o.on;l!==n&&(a=(n=l).copy()).on(t,r),o.on=a}}function Ant(e,t){var r=this._id;return arguments.length<2?rf(this.node(),r).on.on(e):this.each(fnt(r,e,t))}function hnt(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function mnt(){return this.on("end.remove",hnt(this._id))}function pnt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=DM(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var l=n[o],c=l.length,u=s[o]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=e.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,lj(u[h],t,r,h,u,rf(d,r)));return new Mh(s,this._parents,t,r)}function gnt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=aue(e));for(var n=this._groups,a=n.length,s=[],o=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),m,g=rf(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&lj(m,t,r,x,h,g);s.push(h),o.push(d)}return new Mh(s,o,t,r)}var xnt=DN.prototype.constructor;function vnt(){return new xnt(this._groups,this._parents)}function bnt(e,t){var r,n,a;return function(){var s=Db(this,e),o=(this.style.removeProperty(e),Db(this,e));return s===o?null:s===r&&o===n?a:a=t(r=s,n=o)}}function wue(e){return function(){this.style.removeProperty(e)}}function ynt(e,t,r){var n,a=r+"",s;return function(){var o=Db(this,e);return o===a?null:o===n?s:s=t(n=o,r)}}function wnt(e,t,r){var n,a,s;return function(){var o=Db(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Db(this,e))),o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l))}}function Nnt(e,t){var r,n,a,s="style."+t,o="end."+s,l;return function(){var c=pA(this,e),u=c.on,d=c.value[s]==null?l||(l=wue(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(o,a=d),c.on=n}}function Ent(e,t,r){var n=(e+="")=="transform"?aLe:yue;return t==null?this.styleTween(e,bnt(e,n)).on("end.style."+e,wue(e)):typeof t=="function"?this.styleTween(e,wnt(e,n,MM(this,"style."+e,t))).each(Nnt(this._id,e)):this.styleTween(e,ynt(e,n,t),r).on("end.style."+e,null)}function Cnt(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function _nt(e,t,r){var n,a;function s(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&Cnt(e,o,r)),n}return s._value=t,s}function Snt(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,_nt(e,t,r??""))}function knt(e){return function(){this.textContent=e}}function jnt(e){return function(){var t=e(this);this.textContent=t??""}}function Bnt(e){return this.tween("text",typeof e=="function"?jnt(MM(this,"text",e)):knt(e==null?"":e+""))}function Tnt(e){return function(t){this.textContent=e.call(this,t)}}function Int(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Tnt(a)),t}return n._value=e,n}function Fnt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Int(e))}function Ont(){for(var e=this._name,t=this._id,r=Nue(),n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=rf(c,t);lj(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Mh(n,this._parents,e,r)}function Dnt(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--a===0&&s()}};r.each(function(){var u=pA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&s()})}var Pnt=0;function Mh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Nue(){return++Pnt}var WA=DN.prototype;Mh.prototype={constructor:Mh,select:pnt,selectAll:gnt,selectChild:WA.selectChild,selectChildren:WA.selectChildren,filter:cnt,merge:unt,selection:vnt,transition:Ont,call:WA.call,nodes:WA.nodes,node:WA.node,size:WA.size,empty:WA.empty,each:WA.each,on:Ant,attr:qrt,attrTween:Jrt,style:Ent,styleTween:Snt,text:Bnt,textTween:Fnt,remove:mnt,tween:Urt,delay:tnt,duration:ant,ease:int,easeVarying:lnt,end:Dnt,[Symbol.iterator]:WA[Symbol.iterator]};function Rnt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Lnt={time:null,delay:0,duration:250,ease:Rnt};function Mnt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Unt(e){var t,r;e instanceof Mh?(t=e._id,e=e._name):(t=Nue(),(r=Lnt).time=RM(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&lj(c,e,t,u,o,r||Mnt(c,t));return new Mh(n,this._parents,e,t)}DN.prototype.interrupt=Rrt;DN.prototype.transition=Unt;const OC=e=>()=>e;function Qnt(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Ah(e,t,r){this.k=e,this.x=t,this.y=r}Ah.prototype={constructor:Ah,scale:function(e){return e===1?this:new Ah(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ah(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ym=new Ah(1,0,0);Ah.prototype;function KI(e){e.stopImmediatePropagation()}function jy(e){e.preventDefault(),e.stopImmediatePropagation()}function Hnt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Vnt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function TW(){return this.__zoom||ym}function znt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function $nt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gnt(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function qnt(){var e=Hnt,t=Vnt,r=Gnt,n=znt,a=$nt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=cLe,u=sj("start","zoom","end"),d,f,h,m=500,g=150,x=0,v=10;function y(Q){Q.property("__zoom",TW).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",L).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(Q,X,z,W){var G=Q.selection?Q.selection():Q;G.property("__zoom",TW),Q!==G?j(Q,X,z,W):G.interrupt().each(function(){B(this,arguments).event(W).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},y.scaleBy=function(Q,X,z,W){y.scaleTo(Q,function(){var G=this.__zoom.k,Y=typeof X=="function"?X.apply(this,arguments):X;return G*Y},z,W)},y.scaleTo=function(Q,X,z,W){y.transform(Q,function(){var G=t.apply(this,arguments),Y=this.__zoom,K=z==null?O(G):typeof z=="function"?z.apply(this,arguments):z,H=Y.invert(K),F=typeof X=="function"?X.apply(this,arguments):X;return r(_(w(Y,F),K,H),G,o)},z,W)},y.translateBy=function(Q,X,z,W){y.transform(Q,function(){return r(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof z=="function"?z.apply(this,arguments):z),t.apply(this,arguments),o)},null,W)},y.translateTo=function(Q,X,z,W,G){y.transform(Q,function(){var Y=t.apply(this,arguments),K=this.__zoom,H=W==null?O(Y):typeof W=="function"?W.apply(this,arguments):W;return r(ym.translate(H[0],H[1]).scale(K.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof z=="function"?-z.apply(this,arguments):-z),Y,o)},W,G)};function w(Q,X){return X=Math.max(s[0],Math.min(s[1],X)),X===Q.k?Q:new Ah(X,Q.x,Q.y)}function _(Q,X,z){var W=X[0]-z[0]*Q.k,G=X[1]-z[1]*Q.k;return W===Q.x&&G===Q.y?Q:new Ah(Q.k,W,G)}function O(Q){return[(+Q[0][0]+ +Q[1][0])/2,(+Q[0][1]+ +Q[1][1])/2]}function j(Q,X,z,W){Q.on("start.zoom",function(){B(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(W).end()}).tween("zoom",function(){var G=this,Y=arguments,K=B(G,Y).event(W),H=t.apply(G,Y),F=z==null?O(H):typeof z=="function"?z.apply(G,Y):z,D=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),q=G.__zoom,J=typeof X=="function"?X.apply(G,Y):X,te=c(q.invert(F).concat(D/q.k),J.invert(F).concat(D/J.k));return function(ne){if(ne===1)ne=J;else{var ie=te(ne),oe=D/ie[2];ne=new Ah(oe,F[0]-ie[0]*oe,F[1]-ie[1]*oe)}K.zoom(null,ne)}})}function B(Q,X,z){return!z&&Q.__zooming||new C(Q,X)}function C(Q,X){this.that=Q,this.args=X,this.active=0,this.sourceEvent=null,this.extent=t.apply(Q,X),this.taps=0}C.prototype={event:function(Q){return Q&&(this.sourceEvent=Q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Q,X){return this.mouse&&Q!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&Q!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&Q!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Q){var X=Hu(this.that).datum();u.call(Q,this.that,new Qnt(Q,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),X)}};function k(Q,...X){if(!e.apply(this,arguments))return;var z=B(this,X).event(Q),W=this.__zoom,G=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,n.apply(this,arguments)))),Y=Hf(Q);if(z.wheel)(z.mouse[0][0]!==Y[0]||z.mouse[0][1]!==Y[1])&&(z.mouse[1]=W.invert(z.mouse[0]=Y)),clearTimeout(z.wheel);else{if(W.k===G)return;z.mouse=[Y,W.invert(Y)],R5(this),z.start()}jy(Q),z.wheel=setTimeout(K,g),z.zoom("mouse",r(_(w(W,G),z.mouse[0],z.mouse[1]),z.extent,o));function K(){z.wheel=null,z.end()}}function T(Q,...X){if(h||!e.apply(this,arguments))return;var z=Q.currentTarget,W=B(this,X,!0).event(Q),G=Hu(Q.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",D,!0),Y=Hf(Q,z),K=Q.clientX,H=Q.clientY;mue(Q.view),KI(Q),W.mouse=[Y,this.__zoom.invert(Y)],R5(this),W.start();function F(q){if(jy(q),!W.moved){var J=q.clientX-K,te=q.clientY-H;W.moved=J*J+te*te>x}W.event(q).zoom("mouse",r(_(W.that.__zoom,W.mouse[0]=Hf(q,z),W.mouse[1]),W.extent,o))}function D(q){G.on("mousemove.zoom mouseup.zoom",null),pue(q.view,W.moved),jy(q),W.event(q).end()}}function L(Q,...X){if(e.apply(this,arguments)){var z=this.__zoom,W=Hf(Q.changedTouches?Q.changedTouches[0]:Q,this),G=z.invert(W),Y=z.k*(Q.shiftKey?.5:2),K=r(_(w(z,Y),W,G),t.apply(this,X),o);jy(Q),l>0?Hu(this).transition().duration(l).call(j,K,W,Q):Hu(this).call(y.transform,K,W,Q)}}function R(Q,...X){if(e.apply(this,arguments)){var z=Q.touches,W=z.length,G=B(this,X,Q.changedTouches.length===W).event(Q),Y,K,H,F;for(KI(Q),K=0;K<W;++K)H=z[K],F=Hf(H,this),F=[F,this.__zoom.invert(F),H.identifier],G.touch0?!G.touch1&&G.touch0[2]!==F[2]&&(G.touch1=F,G.taps=0):(G.touch0=F,Y=!0,G.taps=1+!!d);d&&(d=clearTimeout(d)),Y&&(G.taps<2&&(f=F[0],d=setTimeout(function(){d=null},m)),R5(this),G.start())}}function S(Q,...X){if(this.__zooming){var z=B(this,X).event(Q),W=Q.changedTouches,G=W.length,Y,K,H,F;for(jy(Q),Y=0;Y<G;++Y)K=W[Y],H=Hf(K,this),z.touch0&&z.touch0[2]===K.identifier?z.touch0[0]=H:z.touch1&&z.touch1[2]===K.identifier&&(z.touch1[0]=H);if(K=z.that.__zoom,z.touch1){var D=z.touch0[0],q=z.touch0[1],J=z.touch1[0],te=z.touch1[1],ne=(ne=J[0]-D[0])*ne+(ne=J[1]-D[1])*ne,ie=(ie=te[0]-q[0])*ie+(ie=te[1]-q[1])*ie;K=w(K,Math.sqrt(ne/ie)),H=[(D[0]+J[0])/2,(D[1]+J[1])/2],F=[(q[0]+te[0])/2,(q[1]+te[1])/2]}else if(z.touch0)H=z.touch0[0],F=z.touch0[1];else return;z.zoom("touch",r(_(K,H,F),z.extent,o))}}function U(Q,...X){if(this.__zooming){var z=B(this,X).event(Q),W=Q.changedTouches,G=W.length,Y,K;for(KI(Q),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),Y=0;Y<G;++Y)K=W[Y],z.touch0&&z.touch0[2]===K.identifier?delete z.touch0:z.touch1&&z.touch1[2]===K.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(K=Hf(K,this),Math.hypot(f[0]-K[0],f[1]-K[1])<v)){var H=Hu(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return y.wheelDelta=function(Q){return arguments.length?(n=typeof Q=="function"?Q:OC(+Q),y):n},y.filter=function(Q){return arguments.length?(e=typeof Q=="function"?Q:OC(!!Q),y):e},y.touchable=function(Q){return arguments.length?(a=typeof Q=="function"?Q:OC(!!Q),y):a},y.extent=function(Q){return arguments.length?(t=typeof Q=="function"?Q:OC([[+Q[0][0],+Q[0][1]],[+Q[1][0],+Q[1][1]]]),y):t},y.scaleExtent=function(Q){return arguments.length?(s[0]=+Q[0],s[1]=+Q[1],y):[s[0],s[1]]},y.translateExtent=function(Q){return arguments.length?(o[0][0]=+Q[0][0],o[1][0]=+Q[1][0],o[0][1]=+Q[0][1],o[1][1]=+Q[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(Q){return arguments.length?(r=Q,y):r},y.duration=function(Q){return arguments.length?(l=+Q,y):l},y.interpolate=function(Q){return arguments.length?(c=Q,y):c},y.on=function(){var Q=u.on.apply(u,arguments);return Q===u?y:Q},y.clickDistance=function(Q){return arguments.length?(x=(Q=+Q)*Q,y):Math.sqrt(x)},y.tapDistance=function(Q){return arguments.length?(v=+Q,y):v},y}const cj=N.createContext(null),Knt=cj.Provider,Uh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Eue=Uh.error001();function fs(e,t){const r=N.useContext(cj);if(r===null)throw new Error(Eue);return rue(r,e,t)}const io=()=>{const e=N.useContext(cj);if(e===null)throw new Error(Eue);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Wnt=e=>e.userSelectionActive?"none":"all";function Cue({position:e,children:t,className:r,style:n,...a}){const s=fs(Wnt),o=`${e}`.split("-");return ot.createElement("div",{className:Il(["react-flow__panel",r,...o]),style:{...n,pointerEvents:s},...a},t)}function Xnt({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ot.createElement(Cue,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ot.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Ynt=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=N.useRef(null),[h,m]=N.useState({x:0,y:0,width:0,height:0}),g=Il(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:ot.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&ot.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),ot.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var Jnt=N.memo(Ynt);const UM=e=>({width:e.offsetWidth,height:e.offsetHeight}),Rb=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),QM=(e={x:0,y:0},t)=>({x:Rb(e.x,t[0][0],t[1][0]),y:Rb(e.y,t[0][1],t[1][1])}),IW=(e,t,r)=>e<t?Rb(Math.abs(e-t),1,50)/50:e>r?-Rb(Math.abs(e-r),1,50)/50:0,_ue=(e,t)=>{const r=IW(e.x,35,t.width-35)*20,n=IW(e.y,35,t.height-35)*20;return[r,n]},Sue=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Znt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),HM=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),eat=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),FW=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),tD=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},tat=e=>$u(e.width)&&$u(e.height)&&$u(e.x)&&$u(e.y),$u=e=>!isNaN(e)&&isFinite(e),Is=Symbol.for("internals"),kue=["Enter"," ","Escape"],rat=(e,t)=>{},nat=e=>"nativeEvent"in e;function rD(e){var a,s;const t=nat(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const jue=e=>"clientX"in e,wm=(e,t)=>{var s,o;const r=jue(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},VS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},PN=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m=20})=>ot.createElement(ot.Fragment,null,ot.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),m&&ot.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&$u(r)&&$u(n)?ot.createElement(Jnt,{x:r,y:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);PN.displayName="BaseEdge";function By(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function Bue({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,o=Math.abs(n-t)/2,l=n<t?n+o:n-o;return[s,l,a,o]}function Tue({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=e*.125+a*.375+o*.375+r*.125,u=t*.125+s*.375+l*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Mg;(function(e){e.Strict="strict",e.Loose="loose"})(Mg||(Mg={}));var Jp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Jp||(Jp={}));var Mw;(function(e){e.Partial="partial",e.Full="full"})(Mw||(Mw={}));var tm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(tm||(tm={}));var zS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(zS||(zS={}));var br;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(br||(br={}));function OW({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===br.Left||e===br.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Iue({sourceX:e,sourceY:t,sourcePosition:r=br.Bottom,targetX:n,targetY:a,targetPosition:s=br.Top}){const[o,l]=OW({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=OW({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,m]=Tue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${n},${a}`,d,f,h,m]}const VM=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=br.Bottom,targetPosition:s=br.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,w]=Iue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return ot.createElement(PN,{path:v,labelX:y,labelY:w,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});VM.displayName="SimpleBezierEdge";const DW={[br.Left]:{x:-1,y:0},[br.Right]:{x:1,y:0},[br.Top]:{x:0,y:-1},[br.Bottom]:{x:0,y:1}},aat=({source:e,sourcePosition:t=br.Bottom,target:r})=>t===br.Left||t===br.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},PW=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function sat({source:e,sourcePosition:t=br.Bottom,target:r,targetPosition:n=br.Top,center:a,offset:s}){const o=DW[t],l=DW[n],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=aat({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[w,_,O,j]=Bue({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=a.x??w,x=a.y??_;const C=[{x:g,y:c.y},{x:g,y:u.y}],k=[{x:c.x,y:x},{x:u.x,y:x}];o[f]===h?m=f==="x"?C:k:m=f==="x"?k:C}else{const C=[{x:c.x,y:u.y}],k=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===h?k:C:m=o.y===h?C:k,t===n){const U=Math.abs(e[f]-r[f]);if(U<=s){const Q=Math.min(s-1,s-U);o[f]===h?v[f]=(c[f]>e[f]?-1:1)*Q:y[f]=(u[f]>r[f]?-1:1)*Q}}if(t!==n){const U=f==="x"?"y":"x",Q=o[f]===l[U],X=c[U]>u[U],z=c[U]<u[U];(o[f]===1&&(!Q&&X||Q&&z)||o[f]!==1&&(!Q&&z||Q&&X))&&(m=f==="x"?C:k)}const T={x:c.x+v.x,y:c.y+v.y},L={x:u.x+y.x,y:u.y+y.y},R=Math.max(Math.abs(T.x-m[0].x),Math.abs(L.x-m[0].x)),S=Math.max(Math.abs(T.y-m[0].y),Math.abs(L.y-m[0].y));R>=S?(g=(T.x+L.x)/2,x=m[0].y):(g=m[0].x,x=(T.y+L.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,O,j]}function iat(e,t,r,n){const a=Math.min(PW(e,t)/2,PW(t,r)/2,n),{x:s,y:o}=t;if(e.x===s&&s===r.x||e.y===o&&o===r.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${o}Q ${s},${o} ${s},${o+a*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${o+a*c}Q ${s},${o} ${s+a*l},${o}`}function nD({sourceX:e,sourceY:t,sourcePosition:r=br.Bottom,targetX:n,targetY:a,targetPosition:s=br.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,h,m,g]=sat({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,w)=>{let _="";return w>0&&w<d.length-1?_=iat(d[w-1],y,d[w+1],o):_=`${w===0?"M":"L"}${y.x} ${y.y}`,v+=_,v},""),f,h,m,g]}const uj=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=br.Bottom,targetPosition:h=br.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=nD({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return ot.createElement(PN,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});uj.displayName="SmoothStepEdge";const zM=N.memo(e=>{var t;return ot.createElement(uj,{...e,pathOptions:N.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});zM.displayName="StepEdge";function oat({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,o,l]=Bue({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,o,l]}const $M=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})=>{const[g,x,v]=oat({sourceX:e,sourceY:t,targetX:r,targetY:n});return ot.createElement(PN,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})});$M.displayName="StraightEdge";function DC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function RW({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case br.Left:return[t-DC(t-n,s),r];case br.Right:return[t+DC(n-t,s),r];case br.Top:return[t,r-DC(r-a,s)];case br.Bottom:return[t,r+DC(a-r,s)]}}function Fue({sourceX:e,sourceY:t,sourcePosition:r=br.Bottom,targetX:n,targetY:a,targetPosition:s=br.Top,curvature:o=.25}){const[l,c]=RW({pos:r,x1:e,y1:t,x2:n,y2:a,c:o}),[u,d]=RW({pos:s,x1:n,y1:a,x2:e,y2:t,c:o}),[f,h,m,g]=Tue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,f,h,m,g]}const $S=N.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=br.Bottom,targetPosition:s=br.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=Fue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return ot.createElement(PN,{path:y,labelX:w,labelY:_,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});$S.displayName="BezierEdge";const GM=N.createContext(null),lat=GM.Provider;GM.Consumer;const cat=()=>N.useContext(GM),uat=e=>"id"in e&&"source"in e&&"target"in e,dat=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,aD=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,fat=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Aat=(e,t)=>{if(!e.source||!e.target)return t;let r;return uat(e)?r={...e}:r={...e,id:dat(e)},fat(r,t)?t:t.concat(r)},sD=({x:e,y:t},[r,n,a],s,[o,l])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},Oue=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Xv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},qM=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:o}=Xv(a,t).positionAbsolute;return Znt(n,HM({x:s,y:o,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return eat(r)},Due=(e,t,[r,n,a]=[0,0,1],s=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:m=!0,hidden:g=!1}=d;if(o&&!m||g)return!1;const{positionAbsolute:x}=Xv(d,l),v={x:x.x,y:x.y,width:f||0,height:h||0},y=tD(c,v),w=typeof f>"u"||typeof h>"u"||f===null||h===null,_=s&&y>0,O=(f||0)*(h||0);(w||_||y>=O||d.dragging)&&u.push(d)}),u},Pue=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Rue=(e,t,r,n,a,s=.1)=>{const o=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(o,l),u=Rb(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,m=r/2-f*u;return{x:h,y:m,zoom:u}},Lp=(e,t=0)=>e.transition().duration(t);function LW(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var o,l;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),a},[])}function hat(e,t,r,n,a,s){const{x:o,y:l}=wm(e),u=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=KM(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===v);return{handle:{id:v,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:Lue()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const mat={source:null,target:null,sourceHandle:null,targetHandle:null},Lue=()=>({handleDomNode:null,isValid:!1,connection:mat,endHandle:null});function Mue(e,t,r,n,a,s,o){const l=a==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Lue(),handleDomNode:c};if(c){const d=KM(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?h:n,target:l?r:f,targetHandle:l?n:h};u.connection=x,m&&g&&(t===Mg.Strict?l&&d==="source"||!l&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function pat({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Is]){const{handleBounds:o}=s[Is];let l=[],c=[];o&&(l=LW(s,o,"source",`${t}-${r}-${n}`),c=LW(s,o,"target",`${t}-${r}-${n}`)),a.push(...l,...c)}return a},[])}function KM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function WI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function gat(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Uue({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=Sue(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:w}=s();let _=0,O;const{x:j,y:B}=wm(e),C=d==null?void 0:d.elementFromPoint(j,B),k=KM(c,C),T=h==null?void 0:h.getBoundingClientRect();if(!T||!k)return;let L,R=wm(e,T),S=!1,U=null,Q=!1,X=null;const z=pat({nodes:y(),nodeId:r,handleId:t,handleType:k}),W=()=>{if(!m)return;const[K,H]=_ue(R,T);v({x:K,y:H}),_=requestAnimationFrame(W)};o({connectionPosition:R,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:r,handleId:t,type:k},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:k});function G(K){const{transform:H}=s();R=wm(K,T);const{handle:F,validHandleResult:D}=hat(K,d,sD(R,H,!1,[1,1]),g,z,q=>Mue(q,f,r,t,a?"target":"source",l,d));if(O=F,S||(W(),S=!0),X=D.handleDomNode,U=D.connection,Q=D.isValid,o({connectionPosition:O&&Q?Oue({x:O.x,y:O.y},H):R,connectionStatus:gat(!!O,Q),connectionEndHandle:D.endHandle}),!O&&!Q&&!X)return WI(L);U.source!==U.target&&X&&(WI(L),L=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",Q),X.classList.toggle("react-flow__handle-valid",Q))}function Y(K){var H,F;(O||X)&&U&&Q&&(n==null||n(U)),(F=(H=s()).onConnectEnd)==null||F.call(H,K),c&&(u==null||u(K)),WI(L),w(),cancelAnimationFrame(_),S=!1,Q=!1,U=null,X=null,d.removeEventListener("mousemove",G),d.removeEventListener("mouseup",Y),d.removeEventListener("touchmove",G),d.removeEventListener("touchend",Y)}d.addEventListener("mousemove",G),d.addEventListener("mouseup",Y),d.addEventListener("touchmove",G),d.addEventListener("touchend",Y)}const MW=()=>!0,xat=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),vat=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:o}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},Que=N.forwardRef(({type:e="source",position:t=br.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},m)=>{var T,L;const g=o||null,x=e==="target",v=io(),y=cat(),{connectOnClick:w,noPanClassName:_}=fs(xat,ul),{connecting:O,clickConnecting:j}=fs(vat(y,g,e),ul);y||(L=(T=v.getState()).onError)==null||L.call(T,"010",Uh.error010());const B=R=>{const{defaultEdgeOptions:S,onConnect:U,hasDefaultEdges:Q}=v.getState(),X={...S,...R};if(Q){const{edges:z,setEdges:W}=v.getState();W(Aat(X,z))}U==null||U(X),l==null||l(X)},C=R=>{if(!y)return;const S=jue(R);a&&(S&&R.button===0||!S)&&Uue({event:R,handleId:g,nodeId:y,onConnect:B,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||MW}),S?d==null||d(R):f==null||f(R)},k=R=>{const{onClickConnectStart:S,onClickConnectEnd:U,connectionClickStartHandle:Q,connectionMode:X,isValidConnection:z}=v.getState();if(!y||!Q&&!a)return;if(!Q){S==null||S(R,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const W=Sue(R.target),G=r||z||MW,{connection:Y,isValid:K}=Mue({nodeId:y,id:g,type:e},X,Q.nodeId,Q.handleId||null,Q.type,G,W);K&&B(Y),U==null||U(R),v.setState({connectionClickStartHandle:null})};return ot.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Il(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:j,connectionindicator:n&&(a&&!O||s&&O)}]),onMouseDown:C,onTouchStart:C,onClick:w?k:void 0,ref:m,...h},c)});Que.displayName="Handle";var Lb=N.memo(Que);const Hue=({data:e,isConnectable:t,targetPosition:r=br.Top,sourcePosition:n=br.Bottom})=>ot.createElement(ot.Fragment,null,ot.createElement(Lb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ot.createElement(Lb,{type:"source",position:n,isConnectable:t}));Hue.displayName="DefaultNode";var iD=N.memo(Hue);const Vue=({data:e,isConnectable:t,sourcePosition:r=br.Bottom})=>ot.createElement(ot.Fragment,null,e==null?void 0:e.label,ot.createElement(Lb,{type:"source",position:r,isConnectable:t}));Vue.displayName="InputNode";var zue=N.memo(Vue);const $ue=({data:e,isConnectable:t,targetPosition:r=br.Top})=>ot.createElement(ot.Fragment,null,ot.createElement(Lb,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);$ue.displayName="OutputNode";var Gue=N.memo($ue);const WM=()=>null;WM.displayName="GroupNode";const bat=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),PC=e=>e.id;function yat(e,t){return ul(e.selectedNodes.map(PC),t.selectedNodes.map(PC))&&ul(e.selectedEdges.map(PC),t.selectedEdges.map(PC))}const que=N.memo(({onSelectionChange:e})=>{const t=io(),{selectedNodes:r,selectedEdges:n}=fs(bat,yat);return N.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});que.displayName="SelectionListener";const wat=e=>!!e.onSelectionChange;function Nat({onSelectionChange:e}){const t=fs(wat);return e||t?ot.createElement(que,{onSelectionChange:e}):null}const Eat=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Gx(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function pn(e,t,r){N.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const Cat=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:O,connectionMode:j,snapGrid:B,snapToGrid:C,translateExtent:k,connectOnClick:T,defaultEdgeOptions:L,fitView:R,fitViewOptions:S,onNodesDelete:U,onEdgesDelete:Q,onNodeDrag:X,onNodeDragStart:z,onNodeDragStop:W,onSelectionDrag:G,onSelectionDragStart:Y,onSelectionDragStop:K,noPanClassName:H,nodeOrigin:F,rfId:D,autoPanOnConnect:q,autoPanOnNodeDrag:J,onError:te,connectionRadius:ne,isValidConnection:ie,nodeDragThreshold:oe})=>{const{setNodes:de,setEdges:ke,setDefaultNodesAndEdges:ae,setMinZoom:Oe,setMaxZoom:Te,setTranslateExtent:Se,setNodeExtent:fe,reset:ye}=fs(Eat,ul),Le=io();return N.useEffect(()=>{const Qe=n==null?void 0:n.map(ue=>({...ue,...L}));return ae(r,Qe),()=>{ye()}},[]),pn("defaultEdgeOptions",L,Le.setState),pn("connectionMode",j,Le.setState),pn("onConnect",a,Le.setState),pn("onConnectStart",s,Le.setState),pn("onConnectEnd",o,Le.setState),pn("onClickConnectStart",l,Le.setState),pn("onClickConnectEnd",c,Le.setState),pn("nodesDraggable",u,Le.setState),pn("nodesConnectable",d,Le.setState),pn("nodesFocusable",f,Le.setState),pn("edgesFocusable",h,Le.setState),pn("edgesUpdatable",m,Le.setState),pn("elementsSelectable",O,Le.setState),pn("elevateNodesOnSelect",g,Le.setState),pn("snapToGrid",C,Le.setState),pn("snapGrid",B,Le.setState),pn("onNodesChange",w,Le.setState),pn("onEdgesChange",_,Le.setState),pn("connectOnClick",T,Le.setState),pn("fitViewOnInit",R,Le.setState),pn("fitViewOnInitOptions",S,Le.setState),pn("onNodesDelete",U,Le.setState),pn("onEdgesDelete",Q,Le.setState),pn("onNodeDrag",X,Le.setState),pn("onNodeDragStart",z,Le.setState),pn("onNodeDragStop",W,Le.setState),pn("onSelectionDrag",G,Le.setState),pn("onSelectionDragStart",Y,Le.setState),pn("onSelectionDragStop",K,Le.setState),pn("noPanClassName",H,Le.setState),pn("nodeOrigin",F,Le.setState),pn("rfId",D,Le.setState),pn("autoPanOnConnect",q,Le.setState),pn("autoPanOnNodeDrag",J,Le.setState),pn("onError",te,Le.setState),pn("connectionRadius",ne,Le.setState),pn("isValidConnection",ie,Le.setState),pn("nodeDragThreshold",oe,Le.setState),Gx(e,de),Gx(t,ke),Gx(x,Oe),Gx(v,Te),Gx(k,Se),Gx(y,fe),null},UW={display:"none"},_at={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Kue="react-flow__node-desc",Wue="react-flow__edge-desc",Sat="react-flow__aria-live",kat=e=>e.ariaLiveMessage;function jat({rfId:e}){const t=fs(kat);return ot.createElement("div",{id:`${Sat}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:_at},t)}function Bat({rfId:e,disableKeyboardA11y:t}){return ot.createElement(ot.Fragment,null,ot.createElement("div",{id:`${Kue}-${e}`,style:UW},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ot.createElement("div",{id:`${Wue}-${e}`,style:UW},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ot.createElement(jat,{rfId:e}))}var Uw=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=N.useState(!1),a=N.useRef(!1),s=N.useRef(new Set([])),[o,l]=N.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return N.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&rD(m))return!1;const x=HW(m.code,l);s.current.add(m[x]),QW(o,s.current,!1)&&(m.preventDefault(),n(!0))},f=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&rD(m))return!1;const x=HW(m.code,l);QW(o,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function QW(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function HW(e,t){return t.includes(e)?"code":"key"}function Xue(e,t,r,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),o=Xv(s,n);return Xue(s,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=s[Is])==null?void 0:l.z)??0)>(r.z??0)?((c=s[Is])==null?void 0:c.z)??0:r.z??0},n)}function Yue(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:o,y:l,z:c}=Xue(n,e,{...n.position,z:((s=n[Is])==null?void 0:s.z)??0},t);n.positionAbsolute={x:o,y:l},n[Is].z=c,r!=null&&r[n.id]&&(n[Is].isParent=!0)}})}function XI(e,t,r,n){const a=new Map,s={},o=n?1e3:0;return e.forEach(l=>{var m;const c=($u(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Is,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[Is])==null?void 0:m.handleBounds,z:c}}),a.set(l.id,d)}),Yue(a,r,s),a}function Jue(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(l&&c&&(h||!t.initial)){const g=r().filter(v=>{var w;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=qM(g,f),{x:y,y:w,zoom:_}=Rue(v,n,a,t.minZoom??s,t.maxZoom??o,t.padding??.1),O=ym.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?l.transform(Lp(c,t.duration),O):l.transform(c,O),!0}}return!1}function Tat(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Is]:n[Is],selected:r.selected})}),new Map(t)}function Iat(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function RC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:Tat(e,a)}),o==null||o(e)),t!=null&&t.length&&(u&&n({edges:Iat(t,s)}),l==null||l(t))}const qx=()=>{},Fat={zoomIn:qx,zoomOut:qx,zoomTo:qx,getZoom:()=>1,setViewport:qx,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:qx,fitBounds:qx,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Oat=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Dat=()=>{const e=io(),{d3Zoom:t,d3Selection:r}=fs(Oat,ul);return N.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Lp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Lp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Lp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[o,l,c]=e.getState().transform,u=ym.translate(a.x??o,a.y??l).scale(a.zoom??c);t.transform(Lp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,o]=e.getState().transform;return{x:a,y:s,zoom:o}},fitView:a=>Jue(e.getState,a),setCenter:(a,s,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-a*d,h=c/2-s*d,m=ym.translate(f,h).scale(d);t.transform(Lp(r,o==null?void 0:o.duration),m)},fitBounds:(a,s)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Rue(a,o,l,c,u,(s==null?void 0:s.padding)??.1),m=ym.translate(d,f).scale(h);t.transform(Lp(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),sD(a,s,o,l)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return sD(f,s,o,l)},flowToScreenPosition:a=>{const{transform:s,domNode:o}=e.getState();if(!o)return a;const{x:l,y:c}=o.getBoundingClientRect(),u=Oue(a,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:Fat,[t,r])};function dj(){const e=Dat(),t=io(),r=N.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=N.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=N.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=N.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=N.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),O=v(),j=typeof x=="function"?x(O):x;if(w)y(j);else if(_){const B=j.length===0?O.map(C=>({type:"remove",id:C.id})):j.map(C=>({item:C,type:"reset"}));_(B)}},[]),l=N.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),O=typeof x=="function"?x(v):x;if(w)y(O);else if(_){const j=O.length===0?v.map(B=>({type:"remove",id:B.id})):O.map(B=>({item:B,type:"reset"}));_(j)}},[]),c=N.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:O}=t.getState();if(_){const B=[...y(),...v];w(B)}else if(O){const j=v.map(B=>({item:B,type:"add"}));O(j)}},[]),u=N.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:O}=t.getState();if(_)w([...y,...v]);else if(O){const j=v.map(B=>({item:B,type:"add"}));O(j)}},[]),d=N.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[w,_,O]=y;return{nodes:x().map(j=>({...j})),edges:v.map(j=>({...j})),viewport:{x:w,y:_,zoom:O}}},[]),f=N.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:O,hasDefaultEdges:j,onNodesDelete:B,onEdgesDelete:C,onNodesChange:k,onEdgesChange:T}=t.getState(),L=(x||[]).map(X=>X.id),R=(v||[]).map(X=>X.id),S=w().reduce((X,z)=>{const W=z.parentNode||z.parentId,G=!L.includes(z.id)&&W&&X.find(K=>K.id===W);return(typeof z.deletable=="boolean"?z.deletable:!0)&&(L.includes(z.id)||G)&&X.push(z),X},[]),U=_.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),Q=U.filter(X=>R.includes(X.id));if(S||Q){const X=Pue(S,U),z=[...Q,...X],W=z.reduce((G,Y)=>(G.includes(Y.id)||G.push(Y.id),G),[]);if((j||O)&&(j&&t.setState({edges:_.filter(G=>!W.includes(G.id))}),O&&(S.forEach(G=>{y.delete(G.id)}),t.setState({nodeInternals:new Map(y)}))),W.length>0&&(C==null||C(z),T&&T(W.map(G=>({id:G,type:"remove"})))),S.length>0&&(B==null||B(S),k)){const G=S.map(Y=>({id:Y.id,type:"remove"}));k(G)}}},[]),h=N.useCallback(x=>{const v=tat(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:FW(y),y,v]},[]),m=N.useCallback((x,v=!0,y)=>{const[w,_,O]=h(x);return w?(y||t.getState().getNodes()).filter(j=>{if(!O&&(j.id===_.id||!j.positionAbsolute))return!1;const B=FW(j),C=tD(B,w);return v&&C>0||C>=w.width*w.height}):[]},[]),g=N.useCallback((x,v,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=tD(w,v);return y&&_>0||_>=w.width*w.height},[]);return N.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,o,l,c,u,d,f,m,g])}const Pat={actInsideInputWithModifier:!1};var Rat=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=io(),{deleteElements:n}=dj(),a=Uw(e,Pat),s=Uw(t);N.useEffect(()=>{if(a){const{edges:o,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),N.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Lat(e){const t=io();N.useEffect(()=>{let r;const n=()=>{var s,o;if(!e.current)return;const a=UM(e.current);(a.height===0||a.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Uh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const XM={position:"absolute",width:"100%",height:"100%",top:0,left:0},Mat=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,LC=e=>({x:e.x,y:e.y,zoom:e.k}),Kx=(e,t)=>e.target.closest(`.${t}`),VW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),zW=e=>{const t=e.ctrlKey&&VS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Uat=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Qat=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Jp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:O})=>{const j=N.useRef(),B=io(),C=N.useRef(!1),k=N.useRef(!1),T=N.useRef(null),L=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:S,d3ZoomHandler:U,userSelectionActive:Q}=fs(Uat,ul),X=Uw(v),z=N.useRef(0),W=N.useRef(!1),G=N.useRef();return Lat(T),N.useEffect(()=>{if(T.current){const Y=T.current.getBoundingClientRect(),K=qnt().scaleExtent([g,x]).translateExtent(m),H=Hu(T.current).call(K),F=ym.translate(h.x,h.y).scale(Rb(h.zoom,g,x)),D=[[0,0],[Y.width,Y.height]],q=K.constrain()(F,D,m);K.transform(H,q),K.wheelDelta(zW),B.setState({d3Zoom:K,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[q.x,q.y,q.k],domNode:T.current.closest(".react-flow")})}},[]),N.useEffect(()=>{S&&R&&(o&&!X&&!Q?S.on("wheel.zoom",Y=>{if(Kx(Y,_))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const K=S.property("__zoom").k||1;if(Y.ctrlKey&&s){const ie=Hf(Y),oe=zW(Y),de=K*Math.pow(2,oe);R.scaleTo(S,de,ie,Y);return}const H=Y.deltaMode===1?20:1;let F=c===Jp.Vertical?0:Y.deltaX*H,D=c===Jp.Horizontal?0:Y.deltaY*H;!VS()&&Y.shiftKey&&c!==Jp.Vertical&&(F=Y.deltaY*H,D=0),R.translateBy(S,-(F/K)*l,-(D/K)*l,{internal:!0});const q=LC(S.property("__zoom")),{onViewportChangeStart:J,onViewportChange:te,onViewportChangeEnd:ne}=B.getState();clearTimeout(G.current),W.current||(W.current=!0,t==null||t(Y,q),J==null||J(q)),W.current&&(e==null||e(Y,q),te==null||te(q),G.current=setTimeout(()=>{r==null||r(Y,q),ne==null||ne(q),W.current=!1},150))},{passive:!1}):typeof U<"u"&&S.on("wheel.zoom",function(Y,K){if(!y&&Y.type==="wheel"&&!Y.ctrlKey||Kx(Y,_))return null;Y.preventDefault(),U.call(this,Y,K)},{passive:!1}))},[Q,o,c,S,R,U,X,s,y,_,t,e,r]),N.useEffect(()=>{R&&R.on("start",Y=>{var F,D;if(!Y.sourceEvent||Y.sourceEvent.internal)return null;z.current=(F=Y.sourceEvent)==null?void 0:F.button;const{onViewportChangeStart:K}=B.getState(),H=LC(Y.transform);C.current=!0,L.current=H,((D=Y.sourceEvent)==null?void 0:D.type)==="mousedown"&&B.setState({paneDragging:!0}),K==null||K(H),t==null||t(Y.sourceEvent,H)})},[R,t]),N.useEffect(()=>{R&&(Q&&!C.current?R.on("zoom",null):Q||R.on("zoom",Y=>{var H;const{onViewportChange:K}=B.getState();if(B.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),k.current=!!(n&&VW(f,z.current??0)),(e||K)&&!((H=Y.sourceEvent)!=null&&H.internal)){const F=LC(Y.transform);K==null||K(F),e==null||e(Y.sourceEvent,F)}}))},[Q,R,e,f,n]),N.useEffect(()=>{R&&R.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=B.getState();if(C.current=!1,B.setState({paneDragging:!1}),n&&VW(f,z.current??0)&&!k.current&&n(Y.sourceEvent),k.current=!1,(r||K)&&Mat(L.current,Y.transform)){const H=LC(Y.transform);L.current=H,clearTimeout(j.current),j.current=setTimeout(()=>{K==null||K(H),r==null||r(Y.sourceEvent,H)},o?150:0)}})},[R,o,f,r,n]),N.useEffect(()=>{R&&R.filter(Y=>{const K=X||a,H=s&&Y.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(Kx(Y,"react-flow__node")||Kx(Y,"react-flow__edge")))return!0;if(!f&&!K&&!o&&!u&&!s||Q||!u&&Y.type==="dblclick"||Kx(Y,_)&&Y.type==="wheel"||Kx(Y,O)&&(Y.type!=="wheel"||o&&Y.type==="wheel"&&!X)||!s&&Y.ctrlKey&&Y.type==="wheel"||!K&&!o&&!H&&Y.type==="wheel"||!f&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(f)&&!f.includes(Y.button)&&Y.type==="mousedown")return!1;const F=Array.isArray(f)&&f.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&F})},[Q,R,a,s,o,u,f,d,X]),ot.createElement("div",{className:"react-flow__renderer",ref:T,style:XM},w)},Hat=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Vat(){const{userSelectionActive:e,userSelectionRect:t}=fs(Hat,ul);return e&&t?ot.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function $W(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Zue(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(l=>l.id===a.id);if(s.length===0)return n.push(a),n;const o={...a};for(const l of s)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&$W(n,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&$W(n,o);break}case"remove":return n}return n.push(o),n},r)}function ede(e,t){return Zue(e,t)}function zat(e,t){return Zue(e,t)}const q0=(e,t)=>({id:e,type:"select",selected:t});function _v(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(q0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(q0(n.id,!1))),r},[])}const YI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},$at=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),tde=N.memo(({isSelecting:e,selectionMode:t=Mw.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=N.useRef(null),m=io(),g=N.useRef(0),x=N.useRef(0),v=N.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=fs($at,ul),O=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},j=U=>{s==null||s(U),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},B=U=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){U.preventDefault();return}o==null||o(U)},C=l?U=>l(U):void 0,k=U=>{const{resetSelectedElements:Q,domNode:X}=m.getState();if(v.current=X==null?void 0:X.getBoundingClientRect(),!w||!e||U.button!==0||U.target!==h.current||!v.current)return;const{x:z,y:W}=wm(U,v.current);Q(),m.setState({userSelectionRect:{width:0,height:0,startX:z,startY:W,x:z,y:W}}),n==null||n(U)},T=U=>{const{userSelectionRect:Q,nodeInternals:X,edges:z,transform:W,onNodesChange:G,onEdgesChange:Y,nodeOrigin:K,getNodes:H}=m.getState();if(!e||!v.current||!Q)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=wm(U,v.current),D=Q.startX??0,q=Q.startY??0,J={...Q,x:F.x<D?F.x:D,y:F.y<q?F.y:q,width:Math.abs(F.x-D),height:Math.abs(F.y-q)},te=H(),ne=Due(X,J,W,t===Mw.Partial,!0,K),ie=Pue(ne,z).map(de=>de.id),oe=ne.map(de=>de.id);if(g.current!==oe.length){g.current=oe.length;const de=_v(te,oe);de.length&&(G==null||G(de))}if(x.current!==ie.length){x.current=ie.length;const de=_v(z,ie);de.length&&(Y==null||Y(de))}m.setState({userSelectionRect:J})},L=U=>{if(U.button!==0)return;const{userSelectionRect:Q}=m.getState();!y&&Q&&U.target===h.current&&(j==null||j(U)),m.setState({nodesSelectionActive:g.current>0}),O(),a==null||a(U)},R=U=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(U)),O()},S=w&&(e||y);return ot.createElement("div",{className:Il(["react-flow__pane",{dragging:_,selection:e}]),onClick:S?void 0:YI(j,h),onContextMenu:YI(B,h),onWheel:YI(C,h),onMouseEnter:S?void 0:c,onMouseDown:S?k:void 0,onMouseMove:S?T:u,onMouseUp:S?L:void 0,onMouseLeave:S?R:d,ref:h,style:XM},f,ot.createElement(Vat,null))});tde.displayName="Pane";function rde(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:rde(n,t):!1}function GW(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function Gat(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!rde(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,o;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((o=a.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function qat(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function nde(e,t,r,n,a=[0,0],s){const o=qat(e,e.extent||n);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:m}=Xv(f,a).positionAbsolute;l=f&&$u(h)&&$u(m)&&$u(f.width)&&$u(f.height)?[[h+e.width*a[0],m+e.height*a[1]],[h+f.width-e.width+e.width*a[0],m+f.height-e.height+e.height*a[1]]]:l}else s==null||s("005",Uh.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:m}=Xv(f,a).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=Xv(f,a).positionAbsolute}const d=l&&l!=="parent"?QM(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function JI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const qW=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),o=t.getBoundingClientRect(),l={x:o.width*n[0],y:o.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/r,y:(u.top-o.top-l.y)/r,...UM(c)}})};function Ty(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function oD({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Uh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Kat(){const e=io();return N.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function ZI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function ade({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:o}){const l=io(),[c,u]=N.useState(!1),d=N.useRef([]),f=N.useRef({x:null,y:null}),h=N.useRef(0),m=N.useRef(null),g=N.useRef({x:0,y:0}),x=N.useRef(null),v=N.useRef(!1),y=N.useRef(!1),w=N.useRef(!1),_=Kat();return N.useEffect(()=>{if(e!=null&&e.current){const O=Hu(e.current),j=({x:k,y:T})=>{const{nodeInternals:L,onNodeDrag:R,onSelectionDrag:S,updateNodePositions:U,nodeExtent:Q,snapGrid:X,snapToGrid:z,nodeOrigin:W,onError:G}=l.getState();f.current={x:k,y:T};let Y=!1,K={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&Q){const F=qM(d.current,W);K=HM(F)}if(d.current=d.current.map(F=>{const D={x:k-F.distance.x,y:T-F.distance.y};z&&(D.x=X[0]*Math.round(D.x/X[0]),D.y=X[1]*Math.round(D.y/X[1]));const q=[[Q[0][0],Q[0][1]],[Q[1][0],Q[1][1]]];d.current.length>1&&Q&&!F.extent&&(q[0][0]=F.positionAbsolute.x-K.x+Q[0][0],q[1][0]=F.positionAbsolute.x+(F.width??0)-K.x2+Q[1][0],q[0][1]=F.positionAbsolute.y-K.y+Q[0][1],q[1][1]=F.positionAbsolute.y+(F.height??0)-K.y2+Q[1][1]);const J=nde(F,D,L,q,W,G);return Y=Y||F.position.x!==J.position.x||F.position.y!==J.position.y,F.position=J.position,F.positionAbsolute=J.positionAbsolute,F}),!Y)return;U(d.current,!0,!0),u(!0);const H=a?R:ZI(S);if(H&&x.current){const[F,D]=JI({nodeId:a,dragItems:d.current,nodeInternals:L});H(x.current,F,D)}},B=()=>{if(!m.current)return;const[k,T]=_ue(g.current,m.current);if(k!==0||T!==0){const{transform:L,panBy:R}=l.getState();f.current.x=(f.current.x??0)-k/L[2],f.current.y=(f.current.y??0)-T/L[2],R({x:k,y:T})&&j(f.current)}h.current=requestAnimationFrame(B)},C=k=>{var W;const{nodeInternals:T,multiSelectionActive:L,nodesDraggable:R,unselectNodesAndEdges:S,onNodeDragStart:U,onSelectionDragStart:Q}=l.getState();y.current=!0;const X=a?U:ZI(Q);(!o||!s)&&!L&&a&&((W=T.get(a))!=null&&W.selected||S()),a&&s&&o&&oD({id:a,store:l,nodeRef:e});const z=_(k);if(f.current=z,d.current=Gat(T,R,z,a),X&&d.current){const[G,Y]=JI({nodeId:a,dragItems:d.current,nodeInternals:T});X(k.sourceEvent,G,Y)}};if(t)O.on(".drag",null);else{const k=jrt().on("start",T=>{const{domNode:L,nodeDragThreshold:R}=l.getState();R===0&&C(T),w.current=!1;const S=_(T);f.current=S,m.current=(L==null?void 0:L.getBoundingClientRect())||null,g.current=wm(T.sourceEvent,m.current)}).on("drag",T=>{var U,Q;const L=_(T),{autoPanOnNodeDrag:R,nodeDragThreshold:S}=l.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&y.current&&R&&(v.current=!0,B()),!y.current){const X=L.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),z=L.ySnapped-(((Q=f==null?void 0:f.current)==null?void 0:Q.y)??0);Math.sqrt(X*X+z*z)>S&&C(T)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&d.current&&y.current&&(x.current=T.sourceEvent,g.current=wm(T.sourceEvent,m.current),j(L))}}).on("end",T=>{if(!(!y.current||w.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:L,nodeInternals:R,onNodeDragStop:S,onSelectionDragStop:U}=l.getState(),Q=a?S:ZI(U);if(L(d.current,!1,!1),Q){const[X,z]=JI({nodeId:a,dragItems:d.current,nodeInternals:R});Q(T.sourceEvent,X,z)}}}).filter(T=>{const L=T.target;return!T.button&&(!r||!GW(L,`.${r}`,e))&&(!n||GW(L,n,e))});return O.call(k),()=>{O.on(".drag",null)}}}},[e,t,r,n,s,l,a,o,_]),c}function sde(){const e=io();return N.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=f.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+v};l&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:O,position:j}=nde(w,_,n,a,void 0,u);w.position=j,w.positionAbsolute=O}return w});s(y,!0,!1)},[])}const Yv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Iy=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:w,isSelectable:_,isConnectable:O,isFocusable:j,selectNodesOnDrag:B,sourcePosition:C,targetPosition:k,hidden:T,resizeObserver:L,dragHandle:R,zIndex:S,isParent:U,noDragClassName:Q,noPanClassName:X,initialized:z,disableKeyboardA11y:W,ariaLabel:G,rfId:Y,hasHandleBounds:K})=>{const H=io(),F=N.useRef(null),D=N.useRef(null),q=N.useRef(C),J=N.useRef(k),te=N.useRef(n),ne=_||w||d||f||h||m,ie=sde(),oe=Ty(r,H.getState,f),de=Ty(r,H.getState,h),ke=Ty(r,H.getState,m),ae=Ty(r,H.getState,g),Oe=Ty(r,H.getState,x),Te=ye=>{const{nodeDragThreshold:Le}=H.getState();if(_&&(!B||!w||Le>0)&&oD({id:r,store:H,nodeRef:F}),d){const Qe=H.getState().nodeInternals.get(r);Qe&&d(ye,{...Qe})}},Se=ye=>{if(!rD(ye)&&!W)if(kue.includes(ye.key)&&_){const Le=ye.key==="Escape";oD({id:r,store:H,unselect:Le,nodeRef:F})}else w&&u&&Object.prototype.hasOwnProperty.call(Yv,ye.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${ye.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),ie({x:Yv[ye.key].x,y:Yv[ye.key].y,isShiftPressed:ye.shiftKey}))};N.useEffect(()=>()=>{D.current&&(L==null||L.unobserve(D.current),D.current=null)},[]),N.useEffect(()=>{if(F.current&&!T){const ye=F.current;(!z||!K||D.current!==ye)&&(D.current&&(L==null||L.unobserve(D.current)),L==null||L.observe(ye),D.current=ye)}},[T,z,K]),N.useEffect(()=>{const ye=te.current!==n,Le=q.current!==C,Qe=J.current!==k;F.current&&(ye||Le||Qe)&&(ye&&(te.current=n),Le&&(q.current=C),Qe&&(J.current=k),H.getState().updateNodeDimensions([{id:r,nodeElement:F.current,forceUpdate:!0}]))},[r,n,C,k]);const fe=ade({nodeRef:F,disabled:T||!w,noDragClassName:Q,handleSelector:R,nodeId:r,isSelectable:_,selectNodesOnDrag:B});return T?null:ot.createElement("div",{className:Il(["react-flow__node",`react-flow__node-${n}`,{[X]:w},y,{selected:u,selectable:_,parent:U,dragging:fe}]),ref:F,style:{zIndex:S,transform:`translate(${l}px,${c}px)`,pointerEvents:ne?"all":"none",visibility:z?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:oe,onMouseMove:de,onMouseLeave:ke,onContextMenu:ae,onClick:Te,onDoubleClick:Oe,onKeyDown:j?Se:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":W?void 0:`${Kue}-${Y}`,"aria-label":G},ot.createElement(lat,{value:r},ot.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:o,selected:u,isConnectable:O,sourcePosition:C,targetPosition:k,dragging:fe,dragHandle:R,zIndex:S})))};return t.displayName="NodeWrapper",N.memo(t)};const Wat=e=>{const t=e.getNodes().filter(r=>r.selected);return{...qM(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Xat({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=io(),{width:a,height:s,x:o,y:l,transformString:c,userSelectionActive:u}=fs(Wat,ul),d=sde(),f=N.useRef(null);if(N.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),ade({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(Yv,g.key)&&d({x:Yv[g.key].x,y:Yv[g.key].y,isShiftPressed:g.shiftKey})};return ot.createElement("div",{className:Il(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},ot.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:l,left:o}}))}var Yat=N.memo(Xat);const Jat=e=>e.nodesSelectionActive,ide=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:O,zoomOnPinch:j,panOnScroll:B,panOnScrollSpeed:C,panOnScrollMode:k,zoomOnDoubleClick:T,panOnDrag:L,defaultViewport:R,translateExtent:S,minZoom:U,maxZoom:Q,preventScrolling:X,onSelectionContextMenu:z,noWheelClassName:W,noPanClassName:G,disableKeyboardA11y:Y})=>{const K=fs(Jat),H=Uw(f),F=Uw(y),D=F||L,q=F||B,J=H||h&&D!==!0;return Rat({deleteKeyCode:l,multiSelectionKeyCode:v}),ot.createElement(Qat,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:O,zoomOnPinch:j,panOnScroll:q,panOnScrollSpeed:C,panOnScrollMode:k,zoomOnDoubleClick:T,panOnDrag:!H&&D,defaultViewport:R,translateExtent:S,minZoom:U,maxZoom:Q,zoomActivationKeyCode:w,preventScrolling:X,noWheelClassName:W,noPanClassName:G},ot.createElement(tde,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:D,isSelecting:!!J,selectionMode:m},e,K&&ot.createElement(Yat,{onSelectionContextMenu:z,noPanClassName:G,disableKeyboardA11y:Y})))};ide.displayName="FlowRenderer";var Zat=N.memo(ide);function est(e){return fs(N.useCallback(r=>e?Due(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function tst(e){const t={input:Iy(e.input||zue),default:Iy(e.default||iD),output:Iy(e.output||Gue),group:Iy(e.group||WM)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=Iy(e[s]||iD),a),r);return{...t,...n}}const rst=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},nst=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ode=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:o}=fs(nst,ul),l=est(e.onlyRenderVisibleElements),c=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return N.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),ot.createElement("div",{className:"react-flow__nodes",style:XM},l.map(d=>{var j,B,C;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",Uh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?QM(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,O=rst({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return ot.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||br.Bottom,targetPosition:d.targetPosition||br.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:O.x,yPosOrigin:O.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[Is])==null?void 0:j.z)??0,isParent:!!((B=d[Is])!=null&&B.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Is])!=null&&C.handleBounds)})}))};ode.displayName="NodeRenderer";var ast=N.memo(ode);const sst=(e,t,r)=>r===br.Left?e-t:r===br.Right?e+t:e,ist=(e,t,r)=>r===br.Top?e-t:r===br.Bottom?e+t:e,KW="react-flow__edgeupdater",WW=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:o,type:l})=>ot.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:o,className:Il([KW,`${KW}-${l}`]),cx:sst(t,n,e),cy:ist(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),ost=()=>!0;var Wx=e=>{const t=({id:r,className:n,type:a,data:s,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:w,sourceX:_,sourceY:O,targetX:j,targetY:B,sourcePosition:C,targetPosition:k,elementsSelectable:T,hidden:L,sourceHandleId:R,targetHandleId:S,onContextMenu:U,onMouseEnter:Q,onMouseMove:X,onMouseLeave:z,reconnectRadius:W,onReconnect:G,onReconnectStart:Y,onReconnectEnd:K,markerEnd:H,markerStart:F,rfId:D,ariaLabel:q,isFocusable:J,isReconnectable:te,pathOptions:ne,interactionWidth:ie,disableKeyboardA11y:oe})=>{const de=N.useRef(null),[ke,ae]=N.useState(!1),[Oe,Te]=N.useState(!1),Se=io(),fe=N.useMemo(()=>`url('#${aD(F,D)}')`,[F,D]),ye=N.useMemo(()=>`url('#${aD(H,D)}')`,[H,D]);if(L)return null;const Le=xt=>{var _n;const{edges:xr,addSelectedEdges:Xt,unselectNodesAndEdges:Gr,multiSelectionActive:wr}=Se.getState(),Ur=xr.find(jr=>jr.id===r);Ur&&(T&&(Se.setState({nodesSelectionActive:!1}),Ur.selected&&wr?(Gr({nodes:[],edges:[Ur]}),(_n=de.current)==null||_n.blur()):Xt([r])),o&&o(xt,Ur))},Qe=By(r,Se.getState,l),ue=By(r,Se.getState,U),we=By(r,Se.getState,Q),De=By(r,Se.getState,X),He=By(r,Se.getState,z),Ye=(xt,xr)=>{if(xt.button!==0)return;const{edges:Xt,isValidConnection:Gr}=Se.getState(),wr=xr?w:y,Ur=(xr?S:R)||null,_n=xr?"target":"source",jr=Gr||ost,hs=xr,qr=Xt.find(Fr=>Fr.id===r);Te(!0),Y==null||Y(xt,qr,_n);const Rn=Fr=>{Te(!1),K==null||K(Fr,qr,_n)};Uue({event:xt,handleId:Ur,nodeId:wr,onConnect:Fr=>G==null?void 0:G(qr,Fr),isTarget:hs,getState:Se.getState,setState:Se.setState,isValidConnection:jr,edgeUpdaterType:_n,onReconnectEnd:Rn})},tt=xt=>Ye(xt,!0),ft=xt=>Ye(xt,!1),$e=()=>ae(!0),nt=()=>ae(!1),bt=!T&&!o,Bt=xt=>{var xr;if(!oe&&kue.includes(xt.key)&&T){const{unselectNodesAndEdges:Xt,addSelectedEdges:Gr,edges:wr}=Se.getState();xt.key==="Escape"?((xr=de.current)==null||xr.blur(),Xt({edges:[wr.find(_n=>_n.id===r)]})):Gr([r])}};return ot.createElement("g",{className:Il(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:bt,updating:ke}]),onClick:Le,onDoubleClick:Qe,onContextMenu:ue,onMouseEnter:we,onMouseMove:De,onMouseLeave:He,onKeyDown:J?Bt:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":q===null?void 0:q||`Edge from ${y} to ${w}`,"aria-describedby":J?`${Wue}-${D}`:void 0,ref:de},!Oe&&ot.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:_,sourceY:O,targetX:j,targetY:B,sourcePosition:C,targetPosition:k,sourceHandleId:R,targetHandleId:S,markerStart:fe,markerEnd:ye,pathOptions:ne,interactionWidth:ie}),te&&ot.createElement(ot.Fragment,null,(te==="source"||te===!0)&&ot.createElement(WW,{position:C,centerX:_,centerY:O,radius:W,onMouseDown:tt,onMouseEnter:$e,onMouseOut:nt,type:"source"}),(te==="target"||te===!0)&&ot.createElement(WW,{position:k,centerX:j,centerY:B,radius:W,onMouseDown:ft,onMouseEnter:$e,onMouseOut:nt,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function lst(e){const t={default:Wx(e.default||$S),straight:Wx(e.bezier||$M),step:Wx(e.step||zM),smoothstep:Wx(e.step||uj),simplebezier:Wx(e.simplebezier||VM)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Wx(e[s]||$S),a),r);return{...t,...n}}function XW(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case br.Top:return{x:n+s/2,y:a};case br.Right:return{x:n+s,y:a+o/2};case br.Bottom:return{x:n+s/2,y:a+o};case br.Left:return{x:n,y:a+o/2}}}function YW(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const cst=(e,t,r,n,a,s)=>{const o=XW(r,e,t),l=XW(s,n,a);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function ust({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=HM({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function JW(e){var n,a,s,o,l;const t=((n=e==null?void 0:e[Is])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const dst=[{level:0,isMaxLevel:!0,edges:[]}];function fst(e,t,r=!1){let n=-1;const a=e.reduce((o,l)=>{var d,f;const c=$u(l.zIndex);let u=c?l.zIndex:0;if(r){const h=t.get(l.target),m=t.get(l.source),g=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Is])==null?void 0:d.z)||0,((f=h==null?void 0:h[Is])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return o[u]?o[u].push(l):o[u]=[l],n=u>n?u:n,o},{}),s=Object.entries(a).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===n}});return s.length===0?dst:s}function Ast(e,t,r){const n=fs(N.useCallback(a=>e?a.edges.filter(s=>{const o=t.get(s.source),l=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&ust({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return fst(n,t,r)}const hst=({color:e="none",strokeWidth:t=1})=>ot.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),mst=({color:e="none",strokeWidth:t=1})=>ot.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ZW={[zS.Arrow]:hst,[zS.ArrowClosed]:mst};function pst(e){const t=io();return N.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(ZW,e)?ZW[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Uh.error009(e)),null)},[e])}const gst=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=pst(t);return c?ot.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},ot.createElement(c,{color:r,strokeWidth:o})):null},xst=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=aD(o,t);n.includes(l)||(a.push({id:l,color:o.color||e,...o}),n.push(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},lde=({defaultColor:e,rfId:t})=>{const r=fs(N.useCallback(xst({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,o)=>s.id!==a[o].id)));return ot.createElement("defs",null,r.map(n=>ot.createElement(gst,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};lde.displayName="MarkerDefinitions";var vst=N.memo(lde);const bst=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),cde=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:O,width:j,height:B,connectionMode:C,nodeInternals:k,onError:T}=fs(bst,ul),L=Ast(t,k,r);return j?ot.createElement(ot.Fragment,null,L.map(({level:R,edges:S,isMaxLevel:U})=>ot.createElement("svg",{key:R,style:{zIndex:R},width:j,height:B,className:"react-flow__edges react-flow__container"},U&&ot.createElement(vst,{defaultColor:e,rfId:n}),ot.createElement("g",null,S.map(Q=>{const[X,z,W]=JW(k.get(Q.source)),[G,Y,K]=JW(k.get(Q.target));if(!W||!K)return null;let H=Q.type||"default";a[H]||(T==null||T("011",Uh.error011(H)),H="default");const F=a[H]||a.default,D=C===Mg.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),q=YW(z.source,Q.sourceHandle),J=YW(D,Q.targetHandle),te=(q==null?void 0:q.position)||br.Bottom,ne=(J==null?void 0:J.position)||br.Top,ie=!!(Q.focusable||w&&typeof Q.focusable>"u"),oe=Q.reconnectable||Q.updatable,de=typeof h<"u"&&(oe||_&&typeof oe>"u");if(!q||!J)return T==null||T("008",Uh.error008(q,Q)),null;const{sourceX:ke,sourceY:ae,targetX:Oe,targetY:Te}=cst(X,q,te,G,J,ne);return ot.createElement(F,{key:Q.id,id:Q.id,className:Il([Q.className,s]),type:H,data:Q.data,selected:!!Q.selected,animated:!!Q.animated,hidden:!!Q.hidden,label:Q.label,labelStyle:Q.labelStyle,labelShowBg:Q.labelShowBg,labelBgStyle:Q.labelBgStyle,labelBgPadding:Q.labelBgPadding,labelBgBorderRadius:Q.labelBgBorderRadius,style:Q.style,source:Q.source,target:Q.target,sourceHandleId:Q.sourceHandle,targetHandleId:Q.targetHandle,markerEnd:Q.markerEnd,markerStart:Q.markerStart,sourceX:ke,sourceY:ae,targetX:Oe,targetY:Te,sourcePosition:te,targetPosition:ne,elementsSelectable:O,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:Q.ariaLabel,isFocusable:ie,isReconnectable:de,pathOptions:"pathOptions"in Q?Q.pathOptions:void 0,interactionWidth:Q.interactionWidth,disableKeyboardA11y:y})})))),v):null};cde.displayName="EdgeRenderer";var yst=N.memo(cde);const wst=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Nst({children:e}){const t=fs(wst);return ot.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Est(e){const t=dj(),r=N.useRef(!1);N.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const Cst={[br.Left]:br.Right,[br.Right]:br.Left,[br.Top]:br.Bottom,[br.Bottom]:br.Top},ude=({nodeId:e,handleType:t,style:r,type:n=tm.Bezier,CustomComponent:a,connectionStatus:s})=>{var B,C,k;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=fs(N.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),ul),f=(B=o==null?void 0:o[Is])==null?void 0:B.handleBounds;let h=f==null?void 0:f[t];if(d===Mg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!h)return null;const m=l?h.find(T=>T.id===l):h[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+g,y=(((k=o.positionAbsolute)==null?void 0:k.y)??0)+x,w=m==null?void 0:m.position,_=w?Cst[w]:null;if(!w||!_)return null;if(a)return ot.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let O="";const j={sourceX:v,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===tm.Bezier?[O]=Fue(j):n===tm.Step?[O]=nD({...j,borderRadius:0}):n===tm.SmoothStep?[O]=nD(j):n===tm.SimpleBezier?[O]=Iue(j):O=`M${v},${y} ${c},${u}`,ot.createElement("path",{d:O,fill:"none",className:"react-flow__connection-path",style:r})};ude.displayName="ConnectionLine";const _st=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Sst({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:o,width:l,height:c,connectionStatus:u}=fs(_st,ul);return!(a&&s&&l&&o)?null:ot.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},ot.createElement("g",{className:Il(["react-flow__connection",u])},ot.createElement(ude,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function eX(e,t){return N.useRef(null),io(),N.useMemo(()=>t(e),[e])}const dde=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:O,selectionKeyCode:j,selectionOnDrag:B,selectionMode:C,multiSelectionKeyCode:k,panActivationKeyCode:T,zoomActivationKeyCode:L,deleteKeyCode:R,onlyRenderVisibleElements:S,elementsSelectable:U,selectNodesOnDrag:Q,defaultViewport:X,translateExtent:z,minZoom:W,maxZoom:G,preventScrolling:Y,defaultMarkerColor:K,zoomOnScroll:H,zoomOnPinch:F,panOnScroll:D,panOnScrollSpeed:q,panOnScrollMode:J,zoomOnDoubleClick:te,panOnDrag:ne,onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:de,onPaneMouseLeave:ke,onPaneScroll:ae,onPaneContextMenu:Oe,onEdgeContextMenu:Te,onEdgeMouseEnter:Se,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,onReconnect:Le,onReconnectStart:Qe,onReconnectEnd:ue,reconnectRadius:we,noDragClassName:De,noWheelClassName:He,noPanClassName:Ye,elevateEdgesOnSelect:tt,disableKeyboardA11y:ft,nodeOrigin:$e,nodeExtent:nt,rfId:bt})=>{const Bt=eX(e,tst),xt=eX(t,lst);return Est(s),ot.createElement(Zat,{onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:de,onPaneMouseLeave:ke,onPaneContextMenu:Oe,onPaneScroll:ae,deleteKeyCode:R,selectionKeyCode:j,selectionOnDrag:B,selectionMode:C,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:k,panActivationKeyCode:T,zoomActivationKeyCode:L,elementsSelectable:U,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:H,zoomOnPinch:F,zoomOnDoubleClick:te,panOnScroll:D,panOnScrollSpeed:q,panOnScrollMode:J,panOnDrag:ne,defaultViewport:X,translateExtent:z,minZoom:W,maxZoom:G,onSelectionContextMenu:g,preventScrolling:Y,noDragClassName:De,noWheelClassName:He,noPanClassName:Ye,disableKeyboardA11y:ft},ot.createElement(Nst,null,ot.createElement(yst,{edgeTypes:xt,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:S,onEdgeContextMenu:Te,onEdgeMouseEnter:Se,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,onReconnect:Le,onReconnectStart:Qe,onReconnectEnd:ue,reconnectRadius:we,defaultMarkerColor:K,noPanClassName:Ye,elevateEdgesOnSelect:!!tt,disableKeyboardA11y:ft,rfId:bt},ot.createElement(Sst,{style:w,type:y,component:_,containerStyle:O})),ot.createElement("div",{className:"react-flow__edgelabel-renderer"}),ot.createElement(ast,{nodeTypes:Bt,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:Q,onlyRenderVisibleElements:S,noPanClassName:Ye,noDragClassName:De,disableKeyboardA11y:ft,nodeOrigin:$e,nodeExtent:nt,rfId:bt})))};dde.displayName="GraphView";var kst=N.memo(dde);const lD=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],U0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:lD,nodeExtent:lD,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Mg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:rat,isValidConnection:void 0},jst=()=>Qet((e,t)=>({...U0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:XI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",o=a?XI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Is]:{...y[Is],handleBounds:void 0}});else if(y){const w=UM(v.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||v.forceUpdate))&&(a.set(y.id,{...y,[Is]:{...y[Is],handleBounds:{source:qW(".source",v.nodeElement,h,u),target:qW(".target",v.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Yue(a,u);const g=o||s&&!o&&Jue(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(o)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=ede(r,l()),d=XI(u,a,o,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>q0(c,!0)):(o=_v(s(),r),l=_v(a,[])),RC({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>q0(c,!0)):(o=_v(a,r),l=_v(s(),[])),RC({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),o=r||s(),l=n||a,c=o.map(d=>(d.selected=!1,q0(d.id,!1))),u=l.map(d=>q0(d.id,!1));RC({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>q0(l.id,!1)),o=r.filter(l=>l.selected).map(l=>q0(l.id,!1));RC({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=QM(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const u=ym.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:U0.connectionNodeId,connectionHandleId:U0.connectionHandleId,connectionHandleType:U0.connectionHandleType,connectionStatus:U0.connectionStatus,connectionStartHandle:U0.connectionStartHandle,connectionEndHandle:U0.connectionEndHandle}),reset:()=>e({...U0})}),Object.is),YM=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=jst()),ot.createElement(Knt,{value:t.current},e)};YM.displayName="ReactFlowProvider";const fde=({children:e})=>N.useContext(cj)?ot.createElement(ot.Fragment,null,e):ot.createElement(YM,null,e);fde.displayName="ReactFlowWrapper";const Bst={input:zue,default:iD,output:Gue,group:WM},Tst={default:$S,straight:$M,step:zM,smoothstep:uj,simplebezier:VM},Ist=[0,0],Fst=[15,15],Ost={x:0,y:0,zoom:1},Dst={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ade=N.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=Bst,edgeTypes:o=Tst,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:O,onNodeContextMenu:j,onNodeDoubleClick:B,onNodeDragStart:C,onNodeDrag:k,onNodeDragStop:T,onNodesDelete:L,onEdgesDelete:R,onSelectionChange:S,onSelectionDragStart:U,onSelectionDrag:Q,onSelectionDragStop:X,onSelectionContextMenu:z,onSelectionStart:W,onSelectionEnd:G,connectionMode:Y=Mg.Strict,connectionLineType:K=tm.Bezier,connectionLineStyle:H,connectionLineComponent:F,connectionLineContainerStyle:D,deleteKeyCode:q="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:te=!1,selectionMode:ne=Mw.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:oe=VS()?"Meta":"Control",zoomActivationKeyCode:de=VS()?"Meta":"Control",snapToGrid:ke=!1,snapGrid:ae=Fst,onlyRenderVisibleElements:Oe=!1,selectNodesOnDrag:Te=!0,nodesDraggable:Se,nodesConnectable:fe,nodesFocusable:ye,nodeOrigin:Le=Ist,edgesFocusable:Qe,edgesUpdatable:ue,elementsSelectable:we,defaultViewport:De=Ost,minZoom:He=.5,maxZoom:Ye=2,translateExtent:tt=lD,preventScrolling:ft=!0,nodeExtent:$e,defaultMarkerColor:nt="#b1b1b7",zoomOnScroll:bt=!0,zoomOnPinch:Bt=!0,panOnScroll:xt=!1,panOnScrollSpeed:xr=.5,panOnScrollMode:Xt=Jp.Free,zoomOnDoubleClick:Gr=!0,panOnDrag:wr=!0,onPaneClick:Ur,onPaneMouseEnter:_n,onPaneMouseMove:jr,onPaneMouseLeave:hs,onPaneScroll:qr,onPaneContextMenu:Rn,children:ja,onEdgeContextMenu:Fr,onEdgeDoubleClick:fr,onEdgeMouseEnter:Xr,onEdgeMouseMove:ms,onEdgeMouseLeave:Yn,onEdgeUpdate:Ba,onEdgeUpdateStart:Rs,onEdgeUpdateEnd:Wt,onReconnect:xn,onReconnectStart:ln,onReconnectEnd:Fn,reconnectRadius:Kn=10,edgeUpdaterRadius:Jn=10,onNodesChange:xe,onEdgesChange:Re,noDragClassName:Be="nodrag",noWheelClassName:Fe="nowheel",noPanClassName:me="nopan",fitView:Ae=!1,fitViewOptions:_e,connectOnClick:Me=!0,attributionPosition:Ie,proOptions:ze,defaultEdgeOptions:qe,elevateNodesOnSelect:vt=!0,elevateEdgesOnSelect:yt=!1,disableKeyboardA11y:Ut=!1,autoPanOnConnect:kt=!0,autoPanOnNodeDrag:Qt=!0,connectionRadius:Nr=20,isValidConnection:Jr,onError:Zr,style:an,id:ps,nodeDragThreshold:ko,...gs},ni)=>{const Ls=ps||"1";return ot.createElement("div",{...gs,style:{...an,...Dst},ref:ni,className:Il(["react-flow",a]),"data-testid":"rf__wrapper",id:ps},ot.createElement(fde,null,ot.createElement(kst,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:O,onNodeContextMenu:j,onNodeDoubleClick:B,nodeTypes:s,edgeTypes:o,connectionLineType:K,connectionLineStyle:H,connectionLineComponent:F,connectionLineContainerStyle:D,selectionKeyCode:J,selectionOnDrag:te,selectionMode:ne,deleteKeyCode:q,multiSelectionKeyCode:oe,panActivationKeyCode:ie,zoomActivationKeyCode:de,onlyRenderVisibleElements:Oe,selectNodesOnDrag:Te,defaultViewport:De,translateExtent:tt,minZoom:He,maxZoom:Ye,preventScrolling:ft,zoomOnScroll:bt,zoomOnPinch:Bt,zoomOnDoubleClick:Gr,panOnScroll:xt,panOnScrollSpeed:xr,panOnScrollMode:Xt,panOnDrag:wr,onPaneClick:Ur,onPaneMouseEnter:_n,onPaneMouseMove:jr,onPaneMouseLeave:hs,onPaneScroll:qr,onPaneContextMenu:Rn,onSelectionContextMenu:z,onSelectionStart:W,onSelectionEnd:G,onEdgeContextMenu:Fr,onEdgeDoubleClick:fr,onEdgeMouseEnter:Xr,onEdgeMouseMove:ms,onEdgeMouseLeave:Yn,onReconnect:xn??Ba,onReconnectStart:ln??Rs,onReconnectEnd:Fn??Wt,reconnectRadius:Kn??Jn,defaultMarkerColor:nt,noDragClassName:Be,noWheelClassName:Fe,noPanClassName:me,elevateEdgesOnSelect:yt,rfId:Ls,disableKeyboardA11y:Ut,nodeOrigin:Le,nodeExtent:$e}),ot.createElement(Cat,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:Se,nodesConnectable:fe,nodesFocusable:ye,edgesFocusable:Qe,edgesUpdatable:ue,elementsSelectable:we,elevateNodesOnSelect:vt,minZoom:He,maxZoom:Ye,nodeExtent:$e,onNodesChange:xe,onEdgesChange:Re,snapToGrid:ke,snapGrid:ae,connectionMode:Y,translateExtent:tt,connectOnClick:Me,defaultEdgeOptions:qe,fitView:Ae,fitViewOptions:_e,onNodesDelete:L,onEdgesDelete:R,onNodeDragStart:C,onNodeDrag:k,onNodeDragStop:T,onSelectionDrag:Q,onSelectionDragStart:U,onSelectionDragStop:X,noPanClassName:me,nodeOrigin:Le,rfId:Ls,autoPanOnConnect:kt,autoPanOnNodeDrag:Qt,onError:Zr,connectionRadius:Nr,isValidConnection:Jr,nodeDragThreshold:ko}),ot.createElement(Nat,{onSelectionChange:S}),ja,ot.createElement(Xnt,{proOptions:ze,position:Ie}),ot.createElement(Bat,{rfId:Ls,disableKeyboardA11y:Ut})))});Ade.displayName="ReactFlow";function hde(e){return t=>{const[r,n]=N.useState(t),a=N.useCallback(s=>n(o=>e(s,o)),[]);return[r,n,a]}}const Pst=hde(ede),Rst=hde(zat);function Lst(){return ot.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ot.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Mst(){return ot.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ot.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Ust(){return ot.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ot.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Qst(){return ot.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ot.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Hst(){return ot.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ot.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const a2=({children:e,className:t,...r})=>ot.createElement("button",{type:"button",className:Il(["react-flow__controls-button",t]),...r},e);a2.displayName="ControlButton";const Vst=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),mde=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=io(),[m,g]=N.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=fs(Vst,ul),{zoomIn:w,zoomOut:_,fitView:O}=dj();if(N.useEffect(()=>{g(!0)},[]),!m)return null;const j=()=>{w(),s==null||s()},B=()=>{_(),o==null||o()},C=()=>{O(a),l==null||l()},k=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return ot.createElement(Cue,{className:Il(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&ot.createElement(ot.Fragment,null,ot.createElement(a2,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},ot.createElement(Lst,null)),ot.createElement(a2,{onClick:B,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},ot.createElement(Mst,null))),r&&ot.createElement(a2,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},ot.createElement(Ust,null)),n&&ot.createElement(a2,{className:"react-flow__controls-interactive",onClick:k,title:"toggle interactivity","aria-label":"toggle interactivity"},x?ot.createElement(Hst,null):ot.createElement(Qst,null)),d)};mde.displayName="Controls";var zst=N.memo(mde),qd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(qd||(qd={}));function $st({color:e,dimensions:t,lineWidth:r}){return ot.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Gst({color:e,radius:t}){return ot.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const qst={[qd.Dots]:"#91919a",[qd.Lines]:"#eee",[qd.Cross]:"#e2e2e2"},Kst={[qd.Dots]:1,[qd.Lines]:1,[qd.Cross]:6},Wst=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function pde({id:e,variant:t=qd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:o,style:l,className:c}){const u=N.useRef(null),{transform:d,patternId:f}=fs(Wst,ul),h=o||qst[t],m=n||Kst[t],g=t===qd.Dots,x=t===qd.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],w=m*d[2],_=x?[w,w]:y,O=g?[w/s,w/s]:[_[0]/s,_[1]/s];return ot.createElement("svg",{className:Il(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ot.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`},g?ot.createElement(Gst,{color:h,radius:w/s}):ot.createElement($st,{dimensions:_,color:h,lineWidth:a})),ot.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}pde.displayName="Background";var Xst=N.memo(pde);function Yst(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const Jst=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Nm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Xx=null;function gde(e={}){return Xx||(e.includeStyleProperties?(Xx=e.includeStyleProperties,Xx):(Xx=Nm(window.getComputedStyle(document.documentElement)),Xx))}function GS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Zst(e){const t=GS(e,"border-left-width"),r=GS(e,"border-right-width");return e.clientWidth+t+r}function eit(e){const t=GS(e,"border-top-width"),r=GS(e,"border-bottom-width");return e.clientHeight+t+r}function xde(e,t={}){const r=t.width||Zst(e),n=t.height||eit(e);return{width:r,height:n}}function tit(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Ic=16384;function rit(e){(e.width>Ic||e.height>Ic)&&(e.width>Ic&&e.height>Ic?e.width>e.height?(e.height*=Ic/e.width,e.width=Ic):(e.width*=Ic/e.height,e.height=Ic):e.width>Ic?(e.height*=Ic/e.width,e.width=Ic):(e.width*=Ic/e.height,e.height=Ic))}function qS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function nit(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ait(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),nit(a)}const cc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||cc(r,t)};function sit(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function iit(e,t){return gde(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function oit(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?sit(r):iit(r,n);return document.createTextNode(`${a}{${s}}`)}function tX(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const o=Jst();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(oit(o,r,a,n)),t.appendChild(l)}function lit(e,t,r){tX(e,t,":before",r),tX(e,t,":after",r)}const rX="application/font-woff",nX="image/jpeg",cit={woff:rX,woff2:rX,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:nX,jpeg:nX,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function uit(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function JM(e){const t=uit(e).toLowerCase();return cit[t]||""}function dit(e){return e.split(/,/)[1]}function cD(e){return e.search(/^(data:)/)!==-1}function fit(e,t){return`data:${t};base64,${e}`}async function vde(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(r({res:n,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(a)})}const e6={};function Ait(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function ZM(e,t,r){const n=Ait(e,t,r.includeQueryParams);if(e6[n]!=null)return e6[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await vde(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),dit(l)));a=fit(s,t)}catch(s){a=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return e6[n]=a,a}async function hit(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):qS(t)}async function mit(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o==null||o.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return qS(l)}const r=e.poster,n=JM(r),a=await ZM(r,n,t);return qS(a)}async function pit(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await fj(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function git(e,t){return cc(e,HTMLCanvasElement)?hit(e):cc(e,HTMLVideoElement)?mit(e,t):cc(e,HTMLIFrameElement)?pit(e,t):e.cloneNode(bde(e))}const xit=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",bde=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function vit(e,t,r){var n,a;if(bde(t))return t;let s=[];return xit(e)&&e.assignedNodes?s=Nm(e.assignedNodes()):cc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=Nm(e.contentDocument.body.childNodes):s=Nm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||cc(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>fj(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function bit(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):gde(r).forEach(s=>{let o=a.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),cc(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),n.setProperty(s,o,a.getPropertyPriority(s))})}function yit(e,t){cc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),cc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function wit(e,t){if(cc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function Nit(e,t,r){return cc(t,Element)&&(bit(e,t,r),lit(e,t,r),yit(e,t),wit(e,t)),t}async function Eit(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await fj(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(o)}return e}async function fj(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>git(n,t)).then(n=>vit(e,n,t)).then(n=>Nit(e,n,t)).then(n=>Eit(n,t))}const yde=/url\((['"]?)([^'"]+?)\1\)/g,Cit=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,_it=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Sit(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function kit(e){const t=[];return e.replace(yde,(r,n,a)=>(t.push(a),r)),t.filter(r=>!cD(r))}async function jit(e,t,r,n,a){try{const s=r?Yst(t,r):t,o=JM(t);let l;return a||(l=await ZM(s,o,n)),e.replace(Sit(t),`$1${l}$3`)}catch{}return e}function Bit(e,{preferredFontFormat:t}){return t?e.replace(_it,r=>{for(;;){const[n,,a]=Cit.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function wde(e){return e.search(yde)!==-1}async function Nde(e,t,r){if(!wde(e))return e;const n=Bit(e,r);return kit(n).reduce((s,o)=>s.then(l=>jit(l,o,t,r)),Promise.resolve(n))}async function Yx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Nde(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Tit(e,t){await Yx("background",e,t)||await Yx("background-image",e,t),await Yx("mask",e,t)||await Yx("-webkit-mask",e,t)||await Yx("mask-image",e,t)||await Yx("-webkit-mask-image",e,t)}async function Iit(e,t){const r=cc(e,HTMLImageElement);if(!(r&&!cD(e.src))&&!(cc(e,SVGImageElement)&&!cD(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await ZM(n,JM(n),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Fit(e,t){const n=Nm(e.childNodes).map(a=>Ede(a,t));await Promise.all(n).then(()=>e)}async function Ede(e,t){cc(e,Element)&&(await Tit(e,t),await Iit(e,t),await Fit(e,t))}function Oit(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const aX={};async function sX(e){let t=aX[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},aX[e]=t,t}async function iX(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),vde(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>r)}function oX(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=l.exec(n),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Dit(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{Nm(a.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const c=s.href,u=sX(c).then(d=>iX(d,t)).then(d=>oX(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(sX(a.href).then(l=>iX(l,t)).then(l=>oX(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{Nm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Pit(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>wde(t.style.getPropertyValue("src")))}async function Rit(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Nm(e.ownerDocument.styleSheets),n=await Dit(r,t);return Pit(n)}function Cde(e){return e.trim().replace(/["']/g,"")}function Lit(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Cde(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Mit(e,t){const r=await Rit(e,t),n=Lit(e);return(await Promise.all(r.filter(s=>n.has(Cde(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Nde(s.cssText,o,t)}))).join(`
`)}async function Uit(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Mit(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Qit(e,t={}){const{width:r,height:n}=xde(e,t),a=await fj(e,t,!0);return await Uit(a,t),await Ede(a,t),Oit(a,t),await ait(a,r,n)}async function Hit(e,t={}){const{width:r,height:n}=xde(e,t),a=await Qit(e,t),s=await qS(a),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||tit(),u=t.canvasWidth||r,d=t.canvasHeight||n;return o.width=u*c,o.height=d*c,t.skipAutoScale||rit(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Aj(e,t={}){return(await Hit(e,t)).toDataURL()}const _de="recursos_crucigramas",eU="recursos_lineas_de_tiempo",tU="recursos_mapas_mentales",Sde="recursos_sopas_de_letras",hj=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Vit=e=>{const t=Lt(mt(st,_de),Jt("fechaCreacion","desc"));return lr(t,r=>{const n=r.docs.map(a=>hj(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},zit=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:nr.fromDate(new Date)};return(await on(mt(st,_de),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},$it=e=>{const t=Lt(mt(st,eU),Jt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>hj(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},Git=async(e,t)=>{try{const{id:r,...n}=e,a=Yt(st,eU,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:nr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},qit=async e=>{try{const t=Yt(st,eU,e);await wa(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Kit=e=>{const t=Lt(mt(st,tU),Jt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>hj(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Wit=async(e,t)=>{try{const{id:r,...n}=e,a=Yt(st,tU,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:nr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Xit=async e=>{try{const t=Yt(st,tU,e);await wa(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Yit=e=>{const t=Lt(mt(st,Sde),Jt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>hj(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Jit=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:nr.fromDate(new Date)};return(await on(mt(st,Sde),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Zit=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),eot=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),tot=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),rot=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return i.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[i.jsx(Lb,{type:"target",position:br.Left,className:"w-2 h-2 !bg-slate-400"}),i.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),i.jsx(Lb,{type:"source",position:br.Right,className:"w-2 h-2 !bg-slate-400"})]})},uD=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+uD(n,t),0),lX=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const o=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=uD(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(h=>{const m=uD(h,100),g=f+m/2-100/2;n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep",animated:!0}),o(h,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(d),y:o*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},kde=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return i.jsxs("div",{className:`pl-4 ${a>0?"border-l "+o[a-1%o.length]:""}`,children:[i.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),i.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&i.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(l=>i.jsx(kde,{node:l,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},l.id))]})},not={custom:rot},aot=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=N.useState(e.treeData),[s,o]=N.useState("tree"),[l,c]=N.useState(!1),[u,d,f]=Pst([]),[h,m,g]=Rst([]),{fitView:x}=dj();N.useEffect(()=>{const{nodes:j,edges:B}=lX(n,s);d(j),m(B),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(j,B)=>{const C=JSON.parse(JSON.stringify(n)),k=T=>T.id===j?(T.label=B,!0):(T.children||[]).some(k);k(C),a(C)},y=j=>{const B=JSON.parse(JSON.stringify(n)),C=k=>k.id===j?(k.children||(k.children=[]),k.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(k.children||[]).some(C);C(B),a(B)},w=j=>{const B=JSON.parse(JSON.stringify(n)),C=k=>{const T=(k.children||[]).findIndex(L=>L.id===j);return T!==-1?(k.children.splice(T,1),!0):(k.children||[]).some(C)};C(B),a(B)},_=()=>{c(!0);const{nodes:j,edges:B}=lX(n,s);r({...e,treeData:n,nodes:j,edges:B}),setTimeout(()=>c(!1),1e3)},O=async j=>{const B=document.querySelector(".react-flow");B&&Aj(B,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const k=document.createElement("a");k.download=`${e.tema}.png`,k.href=C,k.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),i.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:i.jsxs(Ade,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:not,children:[i.jsx(zst,{}),i.jsx(Xst,{})]})}),i.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[i.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(eot,{})," Vista en árbol"]}),i.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(tot,{})," Vista central"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:i.jsx(kde,{node:n,onUpdate:v,onAddChild:y,onDelete:w})}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>O(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),i.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},sot=({onBack:e,currentUser:t})=>{const[r,n]=N.useState("list"),[a,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(!0),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState("");N.useEffect(()=>{f(!0);const C=Kit(k=>{s(k),f(!1)});return()=>C()},[]);const w=async C=>{if(C.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no está configurada."),u(!1);return}},_=async C=>{try{await Wit(C,t)}catch(k){console.error("Error saving mind map:",k),alert("No se pudo guardar el mapa mental.")}},O=C=>{l(C),n("editor")},j=async C=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Xit(C)}catch(k){console.error("Error deleting mind map:",k),alert("No se pudo eliminar el mapa mental.")}},B=()=>{switch(r){case"editor":return o?i.jsx(YM,{children:i.jsx(aot,{mapData:o,onBack:()=>n("list"),onSave:_})}):null;case"config":return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),i.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:C=>m(C.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),i.jsx("textarea",{id:"contenido",value:v,onChange:C=>y(C.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?i.jsx(Zit,{}):"Generar Mapa con IA"})})]})]});case"list":default:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),i.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(C=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[i.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:C.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(C.createdAt).toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:()=>O(C),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>j(C.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},C.id)):i.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?i.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"text-4xl",children:"🧠"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),B()]})},iot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),oot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),lot=({onBack:e,currentUser:t})=>{const[r,n]=N.useState([]),[a,s]=N.useState("Media"),[o,l]=N.useState(10),[c,u]=N.useState(!1),[d,f]=N.useState(Array(10).fill("")),[h,m]=N.useState(""),[g,x]=N.useState(null),[v,y]=N.useState({ai:!1,puzzle:!1,data:!0}),w=N.useRef(null);N.useEffect(()=>{y(R=>({...R,data:!0}));const L=Yit(R=>{n(R),y(S=>({...S,data:!1}))});return()=>L()},[]),N.useEffect(()=>{f(L=>{const R=Array(o).fill("");for(let S=0;S<Math.min(L.length,o);S++)R[S]=L[S];return R})},[o]);const _=(L,R)=>{const S=[...d];S[L]=R,f(S)},O=async()=>{if(h.trim()){y(L=>({...L,ai:!0}));try{alert("La API Key de Gemini no está configurada."),y(H=>({...H,ai:!1}));return}catch(L){console.error("Error generating words with AI:",L),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(L=>({...L,ai:!1}))}}},j=(L,R,S,U,Q,X)=>{for(let z=0;z<L.length;z++){const W=S+z*Q.y,G=U+z*Q.x;if(W<0||W>=X||G<0||G>=X||R[W][G]&&R[W][G]!==L[z])return!1}return!0},B=(L,R,S,U,Q)=>{for(let X=0;X<L.length;X++)R[S+X*Q.y][U+X*Q.x]=L[X]},C=async()=>{y(W=>({...W,puzzle:!0})),x(null),await new Promise(W=>setTimeout(W,100));const L=d.map(W=>W.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(L.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(W=>({...W,puzzle:!1}));return}const R=Math.max(...L.map(W=>W.length));let S=Math.max(R,L.length)+2;a==="Media"&&(S+=3),a==="Difícil"&&(S+=5),S=Math.min(Math.max(S,10),25);const U=Array(S).fill(null).map(()=>Array(S).fill(null)),Q=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&Q.push({x:1,y:-1}),a==="Difícil"&&Q.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const W of L.sort((G,Y)=>Y.length-G.length)){let G=!1;for(let Y=0;Y<100;Y++){const K=Q[Math.floor(Math.random()*Q.length)],H=Math.floor(Math.random()*S),F=Math.floor(Math.random()*S);if(j(W,U,H,F,K,S)){B(W,U,H,F,K),G=!0;break}}G||console.warn(`No se pudo colocar la palabra: ${W}`)}const X=U.map(W=>W.map(G=>G||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),z={tema:h||"Personalizado",grid:X.map(W=>W.join("")),words:L.sort()};try{const W=await Jit(z,t);x({...z,id:W,createdAt:new Date().toISOString()})}catch(W){console.error("Error saving puzzle:",W),alert("No se pudo guardar la sopa de letras.")}finally{y(W=>({...W,puzzle:!1}))}},k=()=>{w.current&&Aj(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(L=>{const R=document.createElement("a");R.download="sopa-de-letras.png",R.href=L,R.click()}).catch(L=>{console.error("oops, something went wrong!",L),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},T=()=>{var S;if(!g)return null;const L=((S=g.grid[0])==null?void 0:S.length)||1,R=g.grid.join("").split("");return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:w,className:"p-6 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${L}, minmax(0, 1fr))`},children:R.map((U,Q)=>i.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:U},Q))})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),i.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(U=>i.jsx("li",{children:U},U))})]})]})}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),i.jsx("button",{onClick:k,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?i.jsx("div",{className:"text-center py-10",children:"Cargando..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"🅰️"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),i.jsxs("select",{value:a,onChange:L=>s(L.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{children:"Fácil"}),i.jsx("option",{children:"Media"}),i.jsx("option",{children:"Difícil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>i.jsx("button",{onClick:()=>{l(L),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),i.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&i.jsx("input",{type:"number",value:o,onChange:L=>l(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:O,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?i.jsx(iot,{}):i.jsxs(i.Fragment,{children:[i.jsx(oot,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((L,R)=>i.jsx("input",{type:"text",value:L,onChange:S=>_(R,S.target.value),placeholder:`Palabra ${R+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},R))})]}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:C,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&T()]})},cot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),dot=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=N.useState(e),[s,o]=N.useState(null),l=N.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}o(m.id);{alert("La API Key de Gemini no está configurada."),o(null);return}},h=()=>{l.current&&Aj(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),i.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:i.jsxs("div",{ref:l,className:"relative p-10",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),i.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return i.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[i.jsx("div",{className:"w-1/2",children:x&&i.jsx("div",{className:"text-right pr-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),i.jsx("div",{className:"z-10 flex-shrink-0",children:i.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),i.jsx("div",{className:"w-1/2",children:!x&&i.jsx("div",{className:"text-left pl-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[i.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),i.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):i.jsx(uot,{})})]}),i.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[i.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),i.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},fot=({onBack:e,currentUser:t})=>{const[r,n]=N.useState("list"),[a,s]=N.useState([]),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(!0),[h,m]=N.useState(""),[g,x]=N.useState(""),[v,y]=N.useState("");N.useEffect(()=>{f(!0);const j=$it(B=>{s(B),f(!1)});return()=>j()},[]);const w=async j=>{if(j.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no está configurada."),u(!1);return}},_=async j=>{try{await Git(j,t),n("list"),l(null)}catch(B){console.error("Error saving timeline:",B),alert("No se pudo guardar la línea de tiempo.")}},O=async j=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await qit(j)}catch(B){console.error("Error deleting timeline:",B),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&o?i.jsx(dot,{timeline:o,onSave:_,onBack:()=>n("list")}):d?i.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"🕒"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:j=>m(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),i.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:j=>x(j.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),i.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:j=>y(j.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?i.jsx(cot,{}):"Generar con IA"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(j=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(j.createdAt).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{l(j),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),i.jsx("button",{onClick:()=>O(j.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},j.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},Aot=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),cX=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),hot=({onBack:e,currentUser:t})=>{const[r,n]=N.useState([]),[a,s]=N.useState(10),[o,l]=N.useState(!1),[c,u]=N.useState(Array(10).fill("")),[d,f]=N.useState(Array(10).fill("")),[h,m]=N.useState(""),[g,x]=N.useState(null),[v,y]=N.useState(!1),[w,_]=N.useState({ai:!1,puzzle:!1,data:!0}),[O,j]=N.useState(null),B=N.useRef(null);N.useEffect(()=>{_(X=>({...X,data:!0}));const Q=Vit(X=>{const z=X.map(W=>{const{grid_flat:G,grid_width:Y,...K}=W,H=[];if(G&&Y>0)for(let F=0;F<G.length;F+=Y)H.push(G.slice(F,F+Y));return{...K,grid:H}});n(z),_(W=>({...W,data:!1}))});return()=>Q()},[]),N.useEffect(()=>{const Q=a;u(X=>Array.from({length:Q},(z,W)=>X[W]||"")),f(X=>Array.from({length:Q},(z,W)=>X[W]||""))},[a]);const C=(Q,X)=>{const z=[...c];z[Q]=X,u(z)},k=(Q,X)=>{const z=[...d];z[Q]=X,f(z)},T=async()=>{if(h.trim()){_(Q=>({...Q,ai:!0}));try{alert("La API Key de Gemini no está configurada."),_(ne=>({...ne,ai:!1}));return}catch(Q){console.error("Error generating words/clues with AI:",Q),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(Q=>({...Q,ai:!1}))}}},L=async Q=>{const X=c[Q];if(!X||!X.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}j(Q);try{alert("La API Key de Gemini no está configurada."),j(null);return}catch(z){console.error("Error generating clue with AI:",z),alert("No se pudo generar la pista.")}finally{j(null)}},R=N.useCallback(()=>{try{const Q=c.map((ye,Le)=>({word:ye.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Le]})).filter(ye=>ye.word.length>0);if(Q.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;Q.sort((ye,Le)=>Le.word.length-ye.word.length);const X=Q[0].word.length,z=Math.max(X,Q.length)*2;let W=Array.from({length:z},()=>Array(z).fill(null));const G=[],Y=Q.shift(),K=Math.floor(z/2),H=Math.floor((z-Y.word.length)/2);for(let ye=0;ye<Y.word.length;ye++)W[K][H+ye]=Y.word[ye];G.push({word:Y.word,clue:Y.clue,direction:"across",row:K,col:H});for(const ye of Q){let Le={score:-1,row:-1,col:-1,direction:"across"};for(const Qe of G)for(let ue=0;ue<Qe.word.length;ue++)for(let we=0;we<ye.word.length;we++)if(Qe.word[ue]===ye.word[we]){let De=0,He,Ye,tt;Qe.direction==="across"?(tt="down",He=Qe.row-we,Ye=Qe.col+ue):(tt="across",He=Qe.row+ue,Ye=Qe.col-we);let ft=!0;for(let $e=0;$e<ye.word.length;$e++){const nt=He+(tt==="down"?$e:0),bt=Ye+(tt==="across"?$e:0);if(nt<0||nt>=z||bt<0||bt>=z){ft=!1;break}const Bt=W[nt][bt],xt=nt===Qe.row+(Qe.direction==="down"?ue:0)&&bt===Qe.col+(Qe.direction==="across"?ue:0);if(Bt&&!xt){ft=!1;break}if(Bt&&xt&&Bt!==ye.word[we]){ft=!1;break}if(!xt){if(tt==="across"&&(nt>0&&W[nt-1][bt]||nt<z-1&&W[nt+1][bt])){ft=!1;break}if(tt==="down"&&(bt>0&&W[nt][bt-1]||bt<z-1&&W[nt][bt+1])){ft=!1;break}}Bt&&De++}ft&&De>Le.score&&(Le={score:De,row:He,col:Ye,direction:tt})}if(Le.score>-1){for(let Qe=0;Qe<ye.word.length;Qe++){const ue=Le.row+(Le.direction==="down"?Qe:0),we=Le.col+(Le.direction==="across"?Qe:0);W[ue][we]=ye.word[Qe]}G.push({word:ye.word,clue:ye.clue,direction:Le.direction,row:Le.row,col:Le.col})}}let F=z,D=-1,q=z,J=-1;G.forEach(ye=>{F=Math.min(F,ye.row),D=Math.max(D,ye.row+(ye.direction==="down"?ye.word.length-1:0)),q=Math.min(q,ye.col),J=Math.max(J,ye.col+(ye.direction==="across"?ye.word.length-1:0))}),D===-1&&(F=G[0].row,D=G[0].row,q=G[0].col,J=G[0].col+G[0].word.length-1);const te=1,ne=Math.max(0,F-te),ie=Math.min(z,D+1+te),oe=Math.max(0,q-te),de=Math.min(z,J+1+te),ke=W.slice(ne,ie).map(ye=>ye.slice(oe,de)),ae=G.map(ye=>({...ye,row:ye.row-ne,col:ye.col-oe})).sort((ye,Le)=>ye.row-Le.row||ye.col-Le.col);let Oe=1;const Te=[],Se=new Map;ae.forEach(ye=>{const Le=`${ye.row},${ye.col}`;Se.has(Le)||Se.set(Le,Oe++),Te.push({...ye,number:Se.get(Le)})});const fe=ke.map(ye=>ye.map(Le=>({char:Le,number:null})));return Te.forEach(ye=>{const Le=`${ye.row},${ye.col}`;fe[ye.row]&&fe[ye.row][ye.col]!==void 0&&(fe[ye.row][ye.col].number=Se.get(Le))}),{grid:fe,clues:{across:Te.filter(ye=>ye.direction==="across").sort((ye,Le)=>ye.number-Le.number),down:Te.filter(ye=>ye.direction==="down").sort((ye,Le)=>ye.number-Le.number)}}}catch(Q){return console.error("Error generating crossword grid:",Q),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),S=async()=>{var X;_(z=>({...z,puzzle:!0})),x(null),await new Promise(z=>setTimeout(z,100));const Q=R();if(Q){const z={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:Q.grid,clues:Q.clues},{grid:W,...G}=z,Y={...G,grid_flat:W.flat().map(K=>K.char||""),grid_width:((X=W[0])==null?void 0:X.length)||0};try{const K=await zit(Y,t);x({...z,id:K,fechaCreacion:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(z=>({...z,puzzle:!1}))},U=()=>{B.current&&(y(!1),setTimeout(()=>{Aj(B.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(Q=>{const X=document.createElement("a");X.download="crucigrama.png",X.href=Q,X.click()}).catch(Q=>console.error("Error generating image",Q))},100))};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"✏️"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:B,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((Q,X)=>i.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:Q.char?"white":"black"},children:[Q.number&&i.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:Q.number}),v&&Q.char&&i.jsx("span",{children:Q.char})]},X))})}),i.jsxs("div",{className:"text-sm",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.across.map(Q=>i.jsxs("li",{children:[i.jsxs("strong",{children:[Q.number,"."]})," ",Q.clue]},`${Q.word}-${Q.clue}`))}),i.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.down.map(Q=>i.jsxs("li",{children:[i.jsxs("strong",{children:[Q.number,"."]})," ",Q.clue]},`${Q.word}-${Q.clue}`))})]})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),i.jsx("span",{children:"Mostrar Solución"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),i.jsx("button",{onClick:U,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(Q=>i.jsx("button",{onClick:()=>{s(Q),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&a===Q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:Q},Q)),i.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&i.jsx("input",{type:"number",value:a,onChange:Q=>s(parseInt(Q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:Q=>m(Q.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:T,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?i.jsx(Aot,{}):i.jsxs(i.Fragment,{children:[i.jsx(cX,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((Q,X)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("input",{type:"text",value:c[X],onChange:z=>C(X,z.target.value),placeholder:`Palabra ${X+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[i.jsx("textarea",{value:d[X],onChange:z=>k(X,z.target.value),placeholder:`Pista ${X+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:()=>L(X),disabled:O===X,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:O===X?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):i.jsx(cX,{})})]})]},X))}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:S,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},mot=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],pot=({recurso:e,onClick:t})=>i.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[i.jsx("div",{className:"text-6xl mb-4",children:e.icon}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),got=()=>{const[e,t]=N.useState("menu"),{currentUser:r}=gM(),n=()=>e!=="menu"&&!r?i.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?i.jsx(sot,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?i.jsx(lot,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?i.jsx(fot,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?i.jsx(hot,{onBack:()=>t("menu"),currentUser:r}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:mot.map(a=>i.jsx(pot,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return i.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},xot="evaluaciones_formativas",vot="calificaciones_formativas",jde="trabajos_grupales_formativos",Bde=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},bot=(e,t)=>{const r=Lt(mt(st,xot),dr("curso","==",e));return lr(r,n=>{t(n.docs.map(a=>Bde(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},yot=e=>{const t=Lt(mt(st,vot));return lr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},wot=(e,t)=>{const r=Lt(mt(st,jde),dr("curso","==",e));return lr(r,n=>{t(n.docs.map(a=>Bde(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},Not=async e=>{try{const{id:t,...r}=e,n=Yt(st,jde,t);await yi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Eot=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState({}),[s,o]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState(null),[f,h]=N.useState(!1),[m,g]=N.useState(null),x=N.useRef(null);N.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const O=bot(e.curso,r),j=yot(a),B=wot(e.curso,C=>{o(C),c(!1)});return()=>{O(),j(),B()}},[e.curso]);const v=N.useMemo(()=>{if(!e.curso)return[];const j=t.filter(B=>B.curso===e.curso).reduce((B,C)=>((B[C.asignatura]=B[C.asignatura]||[]).push(C),B),{});return Object.entries(j).map(([B,C])=>{let k=0,T=0;const L=C.map(S=>{var X;const U=(X=n[S.id])==null?void 0:X[e.nombreCompleto];let Q="No Trabajado";return U==="trabajado"?(k+=7,T++,Q="Trabajado"):U==="no trabajado"&&(k+=2,T++,Q="No Trabajado"),{id:S.id,nombreActividad:S.nombreActividad,fecha:S.fecha,estado:Q}}).filter(S=>{var U;return(U=n[S.id])==null?void 0:U[e.nombreCompleto]}),R=T>0?(k/T).toFixed(1):"N/A";return{asignatura:B,promedio:R,actividades:L.sort((S,U)=>new Date(U.fecha).getTime()-new Date(S.fecha).getTime())}}).filter(B=>B.actividades.length>0).sort((B,C)=>B.asignatura.localeCompare(C.asignatura))},[t,n,e]);N.useEffect(()=>{if(v.reduce((T,L)=>T+L.actividades.length,0)===0){d(null);return}const j=v.reduce((T,L)=>{const R=parseFloat(L.promedio);return isNaN(R)?T:T+R},0),B=v.length>0?j/v.length:0,C=YE.find(T=>B>=T.promedioMin&&B<=T.promedioMax)||null,k=YE.filter(T=>B>=T.promedioMin);if(d({puntajeTotal:0,promedio:B,rangoActual:C,insigniasGanadas:k}),x.current!==null){const T=YE.find(L=>x.current>=L.promedioMin&&x.current<=L.promedioMax)||null;C&&(!T||C.nombre!==T.nombre)&&g(C)}x.current=B},[v]);const y=N.useMemo(()=>e.curso?s.filter(O=>O.curso===e.curso).map(O=>{const j=O.grupos.find(B=>B.integrantes.some(C=>C.nombre===e.nombreCompleto));return j?{...O,miGrupo:j}:null}).filter(O=>O!==null).sort((O,j)=>new Date(j.fechaPresentacion).getTime()-new Date(O.fechaPresentacion).getTime()):[],[s,e]),w=async(O,j)=>{const B=s.find(k=>k.id===O);if(!B)return;const C={...B,grupos:B.grupos.map(k=>k.integrantes.some(L=>L.nombre===e.nombreCompleto)?{...k,integrantes:k.integrantes.map(L=>L.nombre===e.nombreCompleto?{...L,rol:j||void 0}:L)}:k)};try{await Not(C)}catch(k){console.error("Error updating role:",k),alert("No se pudo actualizar el rol.")}},_=O=>{const j=parseFloat(O);return isNaN(j)?"bg-slate-400":j<4?"bg-red-500":j<5.5?"bg-yellow-500":"bg-green-500"};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:O=>O.stopPropagation(),children:[i.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),i.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),i.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),i.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),i.jsx("div",{className:"overflow-y-auto space-y-3",children:YE.map(O=>{const j=u==null?void 0:u.insigniasGanadas.some(B=>B.nombre===O.nombre);return i.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${j?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[i.jsx("div",{className:"text-5xl",children:O.emoji}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${j?"text-amber-700":"text-slate-600"}`,children:O.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",O.promedioMin," y ",O.promedioMax]})]})]},O.nombre)})})]})}),i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&i.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),i.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),i.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),i.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),i.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(O=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:O.asignatura}),i.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(O.promedio)}`,children:O.promedio})]}),i.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),O.actividades.map(j=>i.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-700",children:j.nombreActividad}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),i.jsx("span",{className:`font-semibold ${j.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:j.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},j.id))]})]},O.asignatura))}):i.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:"📊"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),i.jsx("div",{className:"space-y-4",children:y.map(O=>{const j=O.miGrupo.integrantes.filter(C=>C.nombre!==e.nombreCompleto&&C.rol).map(C=>C.rol),B=xte.filter(C=>!j.includes(C));return i.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-bold text-slate-800",children:O.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:[O.asignatura," - Presentación: ",new Date(O.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",O.miGrupo.numero]}),i.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:O.miGrupo.integrantes.map(C=>i.jsxs("li",{className:"grid grid-cols-2 items-center",children:[i.jsx("span",{className:C.nombre===e.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===e.nombreCompleto?i.jsxs("select",{value:C.rol||"",onChange:k=>w(O.id,k.target.value),className:"text-sm p-1 border rounded w-full",children:[i.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!B.includes(C.rol)&&i.jsx("option",{value:C.rol,children:C.rol}),B.map(k=>i.jsx("option",{value:k,children:k},k))]}):i.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},O.id)})})]})]})},Cot="proyectos_interdisciplinarios",Tde="entregas_interdisciplinarias",Ide=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},_ot=(e,t)=>{const r=Lt(mt(st,Cot),dr("cursos","array-contains",e));return lr(r,n=>{const a=n.docs.map(s=>Ide(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},Sot=(e,t)=>{const r=Lt(mt(st,Tde),dr("estudianteId","==",e));return lr(r,n=>{const a=n.docs.map(s=>Ide(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},kot=async e=>{try{const{id:t,...r}=e,n=Yt(st,Tde,t),a={...r,fechaCompletado:nr.fromDate(new Date(r.fechaCompletado||Date.now()))};await yi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},jot=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState([]),[s,o]=N.useState(null),[l,c]=N.useState(!0);N.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=_ot(e.curso,r),h=Sot(e.id,m=>{a(m),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await kot(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const m=N.useMemo(()=>{const j=n.find(B=>B.planificacionId===f.id&&B.tareaId===h.id);return j||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=N.useState(!1),[v,y]=N.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),w=j=>{var C;const B=(C=j.target.files)==null?void 0:C[0];B&&(alert(`Simulación: Archivo "${B.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:B.name,url:`simulated/path/${B.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},O=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:m.completada,onChange:O,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&i.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),i.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[i.jsx("textarea",{value:v.observaciones,onChange:j=>y({...v,observaciones:j.target.value}),onBlur:_,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"url",value:v.enlace,onChange:j=>y({...v,enlace:j.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"file",onChange:w,className:"text-sm"}),m.archivoAdjunto&&i.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[i.jsxs("button",{onClick:()=>o(s===f.id?null:f.id),className:"w-full text-left",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[Math.round(x),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&i.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>i.jsx(d,{plan:f,tarea:v},v.id)):i.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):i.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[i.jsx("span",{className:"text-5xl",children:"🎉"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Bot=({data:e})=>i.jsx("div",{className:"space-y-4",children:e.map((r,n)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Tot=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState(v2),f=N.useCallback(async()=>{a(!0);try{const v=(await JZe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(v),o(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),o("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=N.useCallback(async()=>{try{const x=await ZZe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);N.useEffect(()=>{f(),h()},[f,h]);const m=N.useMemo(()=>{if(!l)return[];const x={};return u.forEach(v=>{x[v.domain]={total:0,count:0},v.criteria.forEach(y=>{const w=l.rubricaResultados[y.name];w&&(x[v.domain].total+=w,x[v.domain].count++)})}),Object.entries(x).map(([v,y])=>({label:v,value:y.count>0?y.total/y.count:0}))},[l,u]),g=x=>{const v=new Ar;v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),v.setFont("helvetica","bold"),v.setFontSize(16),v.setTextColor(40),v.text("Informe de Acompañamiento Docente",v.internal.pageSize.getWidth()/2,25,{align:"center"}),v.setFontSize(12),v.setFont("helvetica","normal"),gi(v,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=v.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const O=[],j=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(B=>{O.push([{content:B.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),B.criteria.forEach(C=>{const k=x.rubricaResultados[C.name],T=k?j[k-1]:"No evaluado";O.push([C.name,T])})}),gi(v,{startY:y,head:[["Indicador","Nivel de Logro"]],body:O,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=v.lastAutoTable.finalY+15}const w=(O,j)=>{if(!j)return;y>250&&(v.addPage(),y=20,v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),v.setFont("helvetica","bold"),v.setFontSize(14),v.setTextColor(40),v.text(O,14,y),y+=8,v.setFont("helvetica","normal"),v.setFontSize(11),v.setTextColor(60);const B=v.splitTextToSize(j.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);v.text(B,14,y),y+=B.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const _=v.getNumberOfPages();for(let O=1;O<=_;O++)v.setPage(O),v.setFontSize(8),v.setTextColor(128),v.text(`Página ${O} de ${_}`,v.internal.pageSize.getWidth()/2,v.internal.pageSize.getHeight()-10,{align:"center"});v.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),i.jsxs("button",{onClick:()=>g(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[i.jsx(gte,{})," Exportar PDF"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),i.jsx("h3",{children:"Observaciones Generales"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx(Bot,{data:m})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),i.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>i.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),i.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&i.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:"👍"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Iot=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=mt(pr,"planificaciones"),r=Lt(t,Jt("fechaCreacion","desc"));return lr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},Fot=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=mt(pr,"planificaciones"),n=Lt(r,dr("userId","==",e),Jt("fechaCreacion","desc"));return lr(n,s=>{const o=[];s.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",o.length),t(o)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function Oot(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Dot=Oot("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Pot={value:function(){}};function Fde(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new L5(r)}function L5(e){this._=e}function Rot(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}L5.prototype=Fde.prototype={constructor:L5,on:function(e,t){var r=this._,n=Rot(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=Lot(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=uX(r[a],e.name,t);else if(t==null)for(a in r)r[a]=uX(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new L5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Lot(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function uX(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Pot,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const Mot=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Fde},Symbol.toStringTag,{value:"Module"})),Uot=qhe(Mot);var t6,dX;function Qot(){if(dX)return t6;dX=1;const e=Uot.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;t6=function(){var O=[256,256],j=s,B=o,C=c,k=l,T=l,L=u,R=d,S=x,U=[],Q=1/0,X=e("word","end"),z=null,W=Math.random,G={},Y=w;G.canvas=function(F){return arguments.length?(Y=_(F),G):Y},G.start=function(){var F=K(Y()),D=y((O[0]>>5)*O[1]),q=null,J=U.length,te=-1,ne=[],ie=U.map(function(de,ke){return de.text=j.call(this,de,ke),de.font=B.call(this,de,ke),de.style=k.call(this,de,ke),de.weight=T.call(this,de,ke),de.rotate=L.call(this,de,ke),de.size=~~C.call(this,de,ke),de.padding=R.call(this,de,ke),de}).sort(function(de,ke){return ke.size-de.size});return z&&clearInterval(z),z=setInterval(oe,0),oe(),G;function oe(){for(var de=Date.now();Date.now()-de<Q&&++te<J&&z;){var ke=ie[te];ke.x=O[0]*(W()+.5)>>1,ke.y=O[1]*(W()+.5)>>1,f(F,ke,ie,te),ke.hasText&&H(D,ke,q)&&(ne.push(ke),X.call("word",G,ke),q?m(q,ke):q=[{x:ke.x+ke.x0,y:ke.y+ke.y0},{x:ke.x+ke.x1,y:ke.y+ke.y1}],ke.x-=O[0]>>1,ke.y-=O[1]>>1)}te>=J&&(G.stop(),X.call("end",G,ne,q))}},G.stop=function(){z&&(clearInterval(z),z=null);for(const F of U)delete F.sprite;return G};function K(F){const D=F.getContext("2d",{willReadFrequently:!0});F.width=F.height=1;const q=Math.sqrt(D.getImageData(0,0,1,1).data.length>>2);return F.width=(n<<5)/q,F.height=a/q,D.fillStyle=D.strokeStyle="red",{context:D,ratio:q}}function H(F,D,q){O[0],O[1];for(var J=D.x,te=D.y,ne=Math.sqrt(O[0]*O[0]+O[1]*O[1]),ie=S(O),oe=W()<.5?1:-1,de=-oe,ke,ae,Oe;(ke=ie(de+=oe))&&(ae=~~ke[0],Oe=~~ke[1],!(Math.min(Math.abs(ae),Math.abs(Oe))>=ne));)if(D.x=J+ae,D.y=te+Oe,!(D.x+D.x0<0||D.y+D.y0<0||D.x+D.x1>O[0]||D.y+D.y1>O[1])&&(!q||g(D,q))&&!h(D,F,O[0])){for(var Te=D.sprite,Se=D.width>>5,fe=O[0]>>5,ye=D.x-(Se<<4),Le=ye&127,Qe=32-Le,ue=D.y1-D.y0,we=(D.y+D.y0)*fe+(ye>>5),De,He=0;He<ue;He++){De=0;for(var Ye=0;Ye<=Se;Ye++)F[we+Ye]|=De<<Qe|(Ye<Se?(De=Te[He*Se+Ye])>>>Le:0);we+=fe}return!0}return!1}return G.timeInterval=function(F){return arguments.length?(Q=F??1/0,G):Q},G.words=function(F){return arguments.length?(U=F,G):U},G.size=function(F){return arguments.length?(O=[+F[0],+F[1]],G):O},G.font=function(F){return arguments.length?(B=_(F),G):B},G.fontStyle=function(F){return arguments.length?(k=_(F),G):k},G.fontWeight=function(F){return arguments.length?(T=_(F),G):T},G.rotate=function(F){return arguments.length?(L=_(F),G):L},G.text=function(F){return arguments.length?(j=_(F),G):j},G.spiral=function(F){return arguments.length?(S=r[F]||F,G):S},G.fontSize=function(F){return arguments.length?(C=_(F),G):C},G.padding=function(F){return arguments.length?(R=_(F),G):R},G.random=function(F){return arguments.length?(W=F,G):W},G.on=function(){var F=X.on.apply(X,arguments);return F===X?G:F},G};function s(O){return O.text}function o(){return"serif"}function l(){return"normal"}function c(O){return Math.sqrt(O.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(O,j,B,C){if(!j.sprite){var k=O.context,T=O.ratio;k.clearRect(0,0,(n<<5)/T,a/T);var L=0,R=0,S=0,U=B.length;for(--C;++C<U;){j=B[C],k.save(),k.font=j.style+" "+j.weight+" "+~~((j.size+1)/T)+"px "+j.font;const ke=k.measureText(j.text),ae=-Math.floor(ke.width/2);let Oe=(ke.width+1)*T,Te=j.size<<1;if(j.rotate){var Q=Math.sin(j.rotate*t),X=Math.cos(j.rotate*t),z=Oe*X,W=Oe*Q,G=Te*X,Y=Te*Q;Oe=Math.max(Math.abs(z+Y),Math.abs(z-Y))+31>>5<<5,Te=~~Math.max(Math.abs(W+G),Math.abs(W-G))}else Oe=Oe+31>>5<<5;if(Te>S&&(S=Te),L+Oe>=n<<5&&(L=0,R+=S,S=0),R+Te>=a)break;k.translate((L+(Oe>>1))/T,(R+(Te>>1))/T),j.rotate&&k.rotate(j.rotate*t),k.fillText(j.text,ae,0),j.padding&&(k.lineWidth=2*j.padding,k.strokeText(j.text,ae,0)),k.restore(),j.width=Oe,j.height=Te,j.xoff=L,j.yoff=R,j.x1=Oe>>1,j.y1=Te>>1,j.x0=-j.x1,j.y0=-j.y1,j.hasText=!0,L+=Oe}for(var K=k.getImageData(0,0,(n<<5)/T,a/T).data,H=[];--C>=0;)if(j=B[C],!!j.hasText){for(var F=j.width,D=F>>5,q=j.y1-j.y0,J=0;J<q*D;J++)H[J]=0;if(L=j.xoff,L==null)return;R=j.yoff;for(var te=0,ne=-1,ie=0;ie<q;ie++){for(var J=0;J<F;J++){var oe=D*ie+(J>>5),de=K[(R+ie)*(n<<5)+(L+J)<<2]?1<<31-J%32:0;H[oe]|=de,te|=de}te?ne=ie:(j.y0++,q--,ie--,R++)}j.y1=j.y0+ne,j.sprite=H.slice(0,(j.y1-j.y0)*D)}}}function h(O,j,B){B>>=5;for(var C=O.sprite,k=O.width>>5,T=O.x-(k<<4),L=T&127,R=32-L,S=O.y1-O.y0,U=(O.y+O.y0)*B+(T>>5),Q,X=0;X<S;X++){Q=0;for(var z=0;z<=k;z++)if((Q<<R|(z<k?(Q=C[X*k+z])>>>L:0))&j[U+z])return!0;U+=B}return!1}function m(O,j){var B=O[0],C=O[1];j.x+j.x0<B.x&&(B.x=j.x+j.x0),j.y+j.y0<B.y&&(B.y=j.y+j.y0),j.x+j.x1>C.x&&(C.x=j.x+j.x1),j.y+j.y1>C.y&&(C.y=j.y+j.y1)}function g(O,j){return O.x+O.x1>j[0].x&&O.x+O.x0<j[1].x&&O.y+O.y1>j[0].y&&O.y+O.y0<j[1].y}function x(O){var j=O[0]/O[1];return function(B){return[j*(B*=.1)*Math.cos(B),B*Math.sin(B)]}}function v(O){var j=4,B=j*O[0]/O[1],C=0,k=0;return function(T){var L=T<0?-1:1;switch(Math.sqrt(1+4*L*T)-L&3){case 0:C+=B;break;case 1:k+=j;break;case 2:C-=B;break;default:k-=j;break}return[C,k]}}function y(O){for(var j=[],B=-1;++B<O;)j[B]=0;return j}function w(){return document.createElement("canvas")}function _(O){return typeof O=="function"?O:function(){return O}}return t6}var Hot=Qot();const Vot=Tl(Hot),zot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),$ot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Got=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qot=e=>{const[t,r]=N.useState([]),[n,a]=N.useState(!0),[s,o]=N.useState(null),l=N.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return N.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),o(null)};if(l)c=Iot(u);else{const d=e.email||e.id||"";c=Fot(u,d)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,l]),{planificaciones:t,loading:n,error:s,canViewAllPlans:l}},Kot=({plan:e,onClose:t})=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[i.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:i.jsx($ot,{})})]}),i.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{className:"mt-2",children:[i.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),i.jsx("div",{className:"mt-3",children:i.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),i.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>i.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?i.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>i.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[i.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),fX=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Wot=["1º Medio","2º Medio","3º Medio","4º Medio"],Xot=({words:e})=>{const t=N.useRef(null);return N.useEffect(()=>{if(!e.length||!t.current)return;const r=Hu(t.current);r.selectAll("*").remove();const n=Vot().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>w4(Dot)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),i.jsx("svg",{ref:t})},Yot=({planificaciones:e})=>{const[t,r]=N.useState("todos"),[n,a]=N.useState("todos"),s=N.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),o=N.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),l=N.useMemo(()=>{const d=fX.reduce((f,h)=>({...f,[h]:0}),{});return o.forEach(f=>{var h,m;return(m=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=fX.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[o]),c=N.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[i.jsx("option",{value:"todos",children:"Todos los Niveles"}),Wot.map(d=>i.jsx("option",{value:d,children:d},d))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>i.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):i.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>i.jsxs("li",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?i.jsx(Xot,{words:c}):i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Jot=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=qot(e),[s,o]=N.useState("seguimiento"),[l,c]=N.useState("1º"),[u,d]=N.useState(null),[f,h]=N.useState(null),m=N.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{children:"Usuario no autenticado."})});if(r)return i.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[i.jsx(Got,{}),i.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>i.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):i.jsx("div",{className:"space-y-4",children:Ua.map(v=>{const y=m.filter(_=>_.asignatura===v);if(y.length===0)return null;const w=u===v;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>d(w?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),i.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),i.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:i.jsx(zot,{})})]}),w&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("ul",{className:"space-y-3",children:y.map(_=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},v)})})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>o("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),i.jsx("button",{onClick:()=>o("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&i.jsx(Yot,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&i.jsx(Kot,{plan:f,onClose:()=>h(null)})]})},mj="analisisTaxonomicos",Zot=async()=>{try{const e=Lt(mt(pr,mj),Jt("uploadDate","desc"));return(await Mr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},elt=async e=>{if(!e)return[];try{const t=Lt(mt(pr,mj),dr("userId","==",e),Jt("uploadDate","desc"));return(await Mr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},tlt=async e=>{try{return{id:(await on(mt(pr,mj),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},rlt=async e=>{try{const t=Yt(pr,mj,e);await wa(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},AX=["1º Medio","2º Medio","3º Medio","4º Medio"],Q0=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Jx={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},nlt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hX=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState(""),[f,h]=N.useState(!1),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(""),[_,O]=N.useState(""),[j,B]=N.useState(""),[C,k]=N.useState(""),[T,L]=N.useState("resumen"),R=N.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const Y=e.profile==="SUBDIRECCION"?await Zot():await elt(e.id);r(Y),o(null)}catch(Y){console.error("Error al cargar análisis:",Y),o("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);N.useEffect(()=>{R()},[R]);const S=async Y=>{var H;const K=(H=Y.target.files)==null?void 0:H[0];if(K){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(K.type)){o("Por favor, suba un archivo PDF o DOCX válido.");return}g(K),d(K.name),o(null);const D=new FileReader;D.onloadend=()=>{var J;const q=(J=D.result)==null?void 0:J.split(",")[1];if(!q){o("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:K.type,data:q})},D.onerror=()=>o("Error al leer el archivo."),D.readAsDataURL(K)}},U=async()=>{if(!u.trim()||!x){o("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){o("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),o(null);const Y=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido y tener la siguiente estructura:
               {
                 "analysisResults": [
                   { "question": "...", "habilidadBloom": "..." }
                 ],
                 "summary": {
                   "Recordar": 0,
                   "Comprender": 0,
                   "Aplicar": 0,
                   "Analizar": 0,
                   "Evaluar": 0,
                   "Crear": 0
                 }
               }
            Donde "summary" contiene el conteo total de preguntas por cada nivel de Bloom.
        `;Q0.reduce((K,H)=>({...K,[H]:{type:"number"}}),{});try{K4("Análisis Taxonómico",e);const K=ao.currentUser;if(!K)throw new Error("Usuario no autenticado.");const H=await K.getIdToken(),F=await fetch("/api/analisisTaxonomico",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`},body:JSON.stringify({prompt:Y,fileData:x,documentName:u,nivelForm:y,asignaturaForm:_,userId:e.id})});if(!F.ok){const te=await F.text();throw console.error("Error response from backend:",te),new Error(`Error al analizar el documento con IA: ${F.statusText}`)}const D=await F.json(),q={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:D.analysisResults,summary:D.summary,nivel:y,asignatura:_},J=await tlt(q);await R(),c(J),d(""),g(null),v(null),w(""),O("")}catch(K){console.error(K);const H=K instanceof Error?K.message:"Hubo un error al analizar el documento.";o(H)}finally{h(!1)}},Q=async Y=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await rlt(Y),await R(),(l==null?void 0:l.id)===Y&&c(null)}catch{o("No se pudo eliminar el análisis.")}},X=N.useMemo(()=>t.filter(Y=>{const K=j?Y.nivel===j:!0,H=C?Y.asignatura===C:!0;return K&&H}),[t,j,C]),z=N.useMemo(()=>{const Y={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};X.forEach(H=>{Q0.forEach(F=>{var q;const D=((q=H.summary)==null?void 0:q[F])||0;Y[F]+=D})});const K=Object.values(Y).reduce((H,F)=>H+F,0);return{acc:Y,total:K}},[X]),W=N.useMemo(()=>{const Y=new Map;X.forEach(H=>{const F=H.asignatura||"Sin asignatura";Y.has(F)||Y.set(F,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const D=Y.get(F);Q0.forEach(q=>{var J;D[q]+=((J=H.summary)==null?void 0:J[q])||0})});const K=Array.from(Y.entries()).map(([H,F])=>({asignatura:H,counts:F,total:Object.values(F).reduce((D,q)=>D+q,0)}));return K.sort((H,F)=>F.total-H.total),K},[X]),G=N.useMemo(()=>l?Object.values(l.summary).reduce((Y,K)=>Y+(K||0),0):0,[l]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),i.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:S,accept:".pdf,.doc,.docx"}),i.jsx("span",{children:"Cargue un archivo"})]}),i.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:y,onChange:Y=>w(Y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),AX.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:_,onChange:Y=>O(Y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),Ua.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),i.jsx("input",{type:"text",id:"documentName",value:u,onChange:Y=>d(Y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("button",{onClick:U,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?i.jsx(nlt,{}):"Analizar con IA"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?i.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(Y=>i.jsxs("button",{onClick:()=>c(Y),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===Y.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[i.jsx("p",{className:"font-semibold truncate",children:Y.documentName}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(Y.uploadDate).toLocaleString("es-CL")}),(Y.nivel||Y.asignatura)&&i.jsxs("p",{className:"text-xs text-slate-500",children:[Y.nivel||"Nivel s/i"," • ",Y.asignatura||"Asignatura s/i"]})]},Y.id))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),i.jsxs("select",{value:j,onChange:Y=>B(Y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos"}),AX.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),i.jsxs("select",{value:C,onChange:Y=>k(Y.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas"}),Ua.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsx("button",{type:"button",onClick:()=>{B(""),k("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>L("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${T==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),i.jsx("button",{onClick:()=>L("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${T==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),T==="resumen"?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[X.length," análisis considerados"]})]}),i.jsx("div",{className:"space-y-3",children:Q0.map(Y=>{const K=z.acc[Y],H=z.total>0?K/z.total*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:Y}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[K," (",H.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${Jx[Y]} h-4 rounded-full`,style:{width:`${H}%`}})})]},Y)})}),i.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Q0.map(Y=>i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[i.jsx("span",{className:"text-sm",children:Y}),i.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Jx[Y]}`,children:z.acc[Y]})]},Y))})]}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[W.length," asignaturas comparadas"]})]}),W.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):i.jsx("div",{className:"space-y-5",children:W.map(Y=>{const K=Y.total||1;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:Y.asignatura}),i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[Y.total," ítems"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Q0.map(H=>{const F=Y.counts[H]||0,D=F/K*100;return i.jsx("div",{className:`${Jx[H]} h-5`,style:{width:`${D}%`},title:`${H}: ${F} (${D.toFixed(0)}%)`},H)})}),i.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Q0.map(H=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:`inline-block w-3 h-3 rounded ${Jx[H]}`}),i.jsx("span",{children:H})]},H))})]},Y.asignatura)})})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&i.jsxs(i.Fragment,{children:[" ","• ",l.nivel||"Nivel s/i"," • ",l.asignatura||"Asignatura s/i"]})]})]}),i.jsx("button",{onClick:()=>Q(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",G," preguntas)"]}),i.jsx("div",{className:"space-y-3",children:Q0.map(Y=>{const K=l.summary[Y]||0,H=G>0?K/G*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:Y}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[K," (",H.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${Jx[Y]} h-4 rounded-full`,style:{width:`${H}%`}})})]},Y)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),i.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((Y,K)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:Y.question}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Jx[Y.habilidadBloom]}`,children:Y.habilidadBloom})})]},K))})]})})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},KS="empresas_practicas",alt="usuarios",rU="rutas_supervision",nU=e=>{const t=e.data();return{id:e.id,...t}};async function slt(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const ilt=e=>{const t=Lt(mt(st,KS),Jt("nombre","asc"));return lr(t,r=>{const n=r.docs.map(a=>nU(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},olt=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await slt(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=Yt(st,KS,n);return await yi(s,a,{merge:!0}),n}else return(await on(mt(st,KS),{...r,createdAt:ya()})).id},llt=async e=>{const t=Yt(st,KS,e);await wa(t)},clt=e=>{const t=Lt(mt(st,alt),dr("profile","==","PROFESORADO"),Jt("nombreCompleto","asc"));return lr(t,r=>{const n=r.docs.map(a=>nU(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},ult=async e=>(await on(mt(st,rU),{...e,createdAt:ya()})).id,dlt=e=>{const t=Lt(mt(st,rU),Jt("createdAt","desc"));return lr(t,r=>{const n=r.docs.map(a=>nU(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},flt=async e=>{const t=Yt(st,rU,e);await wa(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ag=function(){return Ag=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ag.apply(this,arguments)};function Alt(e,t,r,n){return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(o,l)}c((n=n.apply(e,[])).next())})}function hlt(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,n=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Tr(){return Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tr.apply(this,arguments)}function hg(e){return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function Ode(e){var t=function(r,n){if(hg(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(hg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return hg(t)==="symbol"?t:String(t)}function Sv(e,t,r){return(t=Ode(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mX(Object(r),!0).forEach(function(n){Sv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ode(n.key),n)}}function dD(e,t){return dD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},dD(e,t)}function WS(e){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WS(e)}function mlt(e,t){if(t&&(hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function plt(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=WS(e);if(t){var a=WS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return mlt(this,r)}}function fD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dde(e,t){if(e){if(typeof e=="string")return fD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fD(e,t):void 0}}function aU(e){return function(t){if(Array.isArray(t))return fD(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Dde(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var glt=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var o=document.createElement("style");return o.setAttribute("data-emotion",s.key),s.nonce!==void 0&&o.setAttribute("nonce",s.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===s)return document.styleSheets[o]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Iu="-ms-",gX="-moz-",Wn="-webkit-",sU="decl",Pde="@keyframes",xlt=Math.abs,pj=String.fromCharCode,vlt=Object.assign;function Rde(e){return e.trim()}function na(e,t,r){return e.replace(t,r)}function AD(e,t){return e.indexOf(t)}function vo(e,t){return 0|e.charCodeAt(t)}function Qw(e,t,r){return e.slice(t,r)}function zf(e){return e.length}function iU(e){return e.length}function MC(e,t){return t.push(e),e}var gj=1,Mb=1,Lde=0,dc=0,hi=0,E1="";function xj(e,t,r,n,a,s,o){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:gj,column:Mb,length:o,return:""}}function Fy(e,t){return vlt(xj("",null,null,"",null,null,0),e,{length:-e.length},t)}function Xc(){return hi=dc<Lde?vo(E1,dc++):0,Mb++,hi===10&&(Mb=1,gj++),hi}function lA(){return vo(E1,dc)}function M5(){return dc}function RN(e,t){return Qw(E1,e,t)}function Hw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Mde(e){return gj=Mb=1,Lde=zf(E1=e),dc=0,[]}function Ude(e){return E1="",e}function U5(e){return Rde(RN(dc-1,hD(e===91?e+2:e===40?e+1:e)))}function blt(e){for(;(hi=lA())&&hi<33;)Xc();return Hw(e)>2||Hw(hi)>3?"":" "}function ylt(e,t){for(;--t&&Xc()&&!(hi<48||hi>102||hi>57&&hi<65||hi>70&&hi<97););return RN(e,M5()+(t<6&&lA()==32&&Xc()==32))}function hD(e){for(;Xc();)switch(hi){case e:return dc;case 34:case 39:e!==34&&e!==39&&hD(hi);break;case 40:e===41&&hD(e);break;case 92:Xc()}return dc}function wlt(e,t){for(;Xc()&&e+hi!==57&&(e+hi!==84||lA()!==47););return"/*"+RN(t,dc-1)+"*"+pj(e===47?e:Xc())}function Nlt(e){for(;!Hw(lA());)Xc();return RN(e,dc)}function xX(e){return Ude(Q5("",null,null,null,[""],e=Mde(e),0,[0],e))}function Q5(e,t,r,n,a,s,o,l,c){for(var u=0,d=0,f=o,h=0,m=0,g=0,x=1,v=1,y=1,w=0,_="",O=a,j=s,B=n,C=_;v;)switch(g=w,w=Xc()){case 40:if(g!=108&&vo(C,f-1)==58){AD(C+=na(U5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:C+=U5(w);break;case 9:case 10:case 13:case 32:C+=blt(g);break;case 92:C+=ylt(M5()-1,7);continue;case 47:switch(lA()){case 42:case 47:MC(Elt(wlt(Xc(),M5()),t,r),c);break;default:C+="/"}break;case 123*x:l[u++]=zf(C)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:m>0&&zf(C)-f&&MC(m>32?bX(C+";",n,r,f-1):bX(na(C," ","")+";",n,r,f-2),c);break;case 59:C+=";";default:if(MC(B=vX(C,t,r,u,d,a,l,_,O=[],j=[],f),s),w===123)if(d===0)Q5(C,t,B,B,O,s,f,l,j);else switch(h===99&&vo(C,3)===110?100:h){case 100:case 109:case 115:Q5(e,B,B,n&&MC(vX(e,B,B,0,0,a,l,_,a,O=[],f),j),a,j,f,l,n?O:j);break;default:Q5(C,B,B,B,[""],j,0,l,j)}}u=d=m=0,x=y=1,_=C="",f=o;break;case 58:f=1+zf(C),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(hi=dc>0?vo(E1,--dc):0,Mb--,hi===10&&(Mb=1,gj--),hi==125))continue}switch(C+=pj(w),w*x){case 38:y=d>0?1:(C+="\f",-1);break;case 44:l[u++]=(zf(C)-1)*y,y=1;break;case 64:lA()===45&&(C+=U5(Xc())),h=lA(),d=f=zf(_=C+=Nlt(M5())),w++;break;case 45:g===45&&zf(C)==2&&(x=0)}}return s}function vX(e,t,r,n,a,s,o,l,c,u,d){for(var f=a-1,h=a===0?s:[""],m=iU(h),g=0,x=0,v=0;g<n;++g)for(var y=0,w=Qw(e,f+1,f=xlt(x=o[g])),_=e;y<m;++y)(_=Rde(x>0?h[y]+" "+w:na(w,/&\f/g,h[y])))&&(c[v++]=_);return xj(e,t,r,a===0?"rule":l,c,u,d)}function Elt(e,t,r){return xj(e,t,r,"comm",pj(hi),Qw(e,2,-2),0)}function bX(e,t,r,n){return xj(e,t,r,sU,Qw(e,0,n),Qw(e,n+1,-1),n)}function mg(e,t){for(var r="",n=iU(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function yX(e,t,r,n){switch(e.type){case"@import":case sU:return e.return=e.return||e.value;case"comm":return"";case Pde:return e.return=e.value+"{"+mg(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return zf(r=mg(e.children,n))?e.return=e.value+"{"+r+"}":""}function wX(e){var t=iU(e);return function(r,n,a,s){for(var o="",l=0;l<t;l++)o+=e[l](r,n,a,s)||"";return o}}function Clt(e){return function(t){t.root||(t=t.return)&&e(t)}}function Qde(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var _lt=function(e,t,r){for(var n=0,a=0;n=a,a=lA(),n===38&&a===12&&(t[r]=1),!Hw(a);)Xc();return RN(e,dc)},Slt=function(e,t){return Ude(function(r,n){var a=-1,s=44;do switch(Hw(s)){case 0:s===38&&lA()===12&&(n[a]=1),r[a]+=_lt(dc-1,n,a);break;case 2:r[a]+=U5(s);break;case 4:if(s===44){r[++a]=lA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=pj(s)}while(s=Xc());return r}(Mde(e),t))},NX=new WeakMap,klt=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||NX.get(r))&&!n){NX.set(e,!0);for(var a=[],s=Slt(t,a),o=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=a[l]?s[l].replace(/&\f/g,o[u]):o[u]+" "+s[l]}}},jlt=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Hde(e,t){switch(function(r,n){return 45^vo(r,0)?(((n<<2^vo(r,0))<<2^vo(r,1))<<2^vo(r,2))<<2^vo(r,3):0}(e,t)){case 5103:return Wn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Wn+e+gX+e+Iu+e+e;case 6828:case 4268:return Wn+e+Iu+e+e;case 6165:return Wn+e+Iu+"flex-"+e+e;case 5187:return Wn+e+na(e,/(\w+).+(:[^]+)/,Wn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Wn+e+Iu+"flex-item-"+na(e,/flex-|-self/,"")+e;case 4675:return Wn+e+Iu+"flex-line-pack"+na(e,/align-content|flex-|-self/,"")+e;case 5548:return Wn+e+Iu+na(e,"shrink","negative")+e;case 5292:return Wn+e+Iu+na(e,"basis","preferred-size")+e;case 6060:return Wn+"box-"+na(e,"-grow","")+Wn+e+Iu+na(e,"grow","positive")+e;case 4554:return Wn+na(e,/([^-])(transform)/g,"$1"+Wn+"$2")+e;case 6187:return na(na(na(e,/(zoom-|grab)/,Wn+"$1"),/(image-set)/,Wn+"$1"),e,"")+e;case 5495:case 3959:return na(e,/(image-set\([^]*)/,Wn+"$1$`$1");case 4968:return na(na(e,/(.+:)(flex-)?(.*)/,Wn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wn+e+e;case 4095:case 3583:case 4068:case 2532:return na(e,/(.+)-inline(.+)/,Wn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zf(e)-1-t>6)switch(vo(e,t+1)){case 109:if(vo(e,t+4)!==45)break;case 102:return na(e,/(.+:)(.+)-([^]+)/,"$1"+Wn+"$2-$3$1"+gX+(vo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~AD(e,"stretch")?Hde(na(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(vo(e,t+1)!==115)break;case 6444:switch(vo(e,zf(e)-3-(~AD(e,"!important")&&10))){case 107:return na(e,":",":"+Wn)+e;case 101:return na(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wn+(vo(e,14)===45?"inline-":"")+"box$3$1"+Wn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(vo(e,t+11)){case 114:return Wn+e+Iu+na(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Wn+e+Iu+na(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Wn+e+Iu+na(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Wn+e+Iu+e+e}return e}var EX,UC,H5=typeof document<"u",Blt=H5?void 0:(EX=function(){return Qde(function(){var e={};return function(t){return e[t]}})},UC=new WeakMap,function(e){if(UC.has(e))return UC.get(e);var t=EX(e);return UC.set(e,t),t}),Tlt=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case sU:e.return=Hde(e.value,e.length);break;case Pde:return mg([Fy(e,{value:na(e.value,"@","@"+Wn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,o){return(s=o.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return mg([Fy(e,{props:[na(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return mg([Fy(e,{props:[na(a,/:(plac\w+)/,":"+Wn+"input-$1")]}),Fy(e,{props:[na(a,/:(plac\w+)/,":-moz-$1")]}),Fy(e,{props:[na(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],Vde=function(e){var t=e.key;if(H5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Tlt,a,s,o={},l=[];H5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)o[w[_]]=!0;l.push(y)}));var c=[klt,jlt];if(H5){var u,d=[yX,Clt(function(y){u.insert(y)})],f=wX(c.concat(n,d));s=function(y,w,_,O){u=_,mg(xX(y?y+"{"+w.styles+"}":w.styles),f),O&&(v.inserted[w.name]=!0)}}else{var h=[yX],m=wX(c.concat(n,h)),g=Blt(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=mg(xX(y?y+"{"+w.styles+"}":w.styles),m)),g[_]};s=function(y,w,_,O){var j=w.name,B=x(y,w);return v.compat===void 0?(O&&(v.inserted[j]=!0),B):O?void(v.inserted[j]=B):B}}var v={key:t,sheet:new glt({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return v.sheet.hydrate(l),v};function sa(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var oo=typeof Symbol=="function"&&Symbol.for,mD=oo?Symbol.for("react.element"):60103,pD=oo?Symbol.for("react.portal"):60106,V5=oo?Symbol.for("react.fragment"):60107,z5=oo?Symbol.for("react.strict_mode"):60108,$5=oo?Symbol.for("react.profiler"):60114,G5=oo?Symbol.for("react.provider"):60109,q5=oo?Symbol.for("react.context"):60110,gD=oo?Symbol.for("react.async_mode"):60111,XS=oo?Symbol.for("react.concurrent_mode"):60111,K5=oo?Symbol.for("react.forward_ref"):60112,W5=oo?Symbol.for("react.suspense"):60113,Ilt=oo?Symbol.for("react.suspense_list"):60120,X5=oo?Symbol.for("react.memo"):60115,Y5=oo?Symbol.for("react.lazy"):60116,Flt=oo?Symbol.for("react.block"):60121,Olt=oo?Symbol.for("react.fundamental"):60117,Dlt=oo?Symbol.for("react.responder"):60118,Plt=oo?Symbol.for("react.scope"):60119;function Fc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case mD:switch(e=e.type){case gD:case XS:case V5:case $5:case z5:case W5:return e;default:switch(e=e&&e.$$typeof){case q5:case K5:case Y5:case X5:case G5:return e;default:return t}}case pD:return t}}}function CX(e){return Fc(e)===XS}var Rlt={AsyncMode:gD,ConcurrentMode:XS,ContextConsumer:q5,ContextProvider:G5,Element:mD,ForwardRef:K5,Fragment:V5,Lazy:Y5,Memo:X5,Portal:pD,Profiler:$5,StrictMode:z5,Suspense:W5,isAsyncMode:function(e){return CX(e)||Fc(e)===gD},isConcurrentMode:CX,isContextConsumer:function(e){return Fc(e)===q5},isContextProvider:function(e){return Fc(e)===G5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mD},isForwardRef:function(e){return Fc(e)===K5},isFragment:function(e){return Fc(e)===V5},isLazy:function(e){return Fc(e)===Y5},isMemo:function(e){return Fc(e)===X5},isPortal:function(e){return Fc(e)===pD},isProfiler:function(e){return Fc(e)===$5},isStrictMode:function(e){return Fc(e)===z5},isSuspense:function(e){return Fc(e)===W5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===V5||e===XS||e===$5||e===z5||e===W5||e===Ilt||typeof e=="object"&&e!==null&&(e.$$typeof===Y5||e.$$typeof===X5||e.$$typeof===G5||e.$$typeof===q5||e.$$typeof===K5||e.$$typeof===Olt||e.$$typeof===Dlt||e.$$typeof===Plt||e.$$typeof===Flt)},typeOf:Fc};sa(function(e,t){});var _X=sa(function(e){e.exports=Rlt}),SX={};SX[_X.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SX[_X.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var xD=typeof document<"u";function zde(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var oU=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||xD===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},lU=function(e,t,r){oU(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var o=e.insert(t===s?"."+n:"",s,e.sheet,!0);xD||o===void 0||(a+=o),s=s.next}while(s!==void 0);if(!xD&&a.length!==0)return a}},Llt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Mlt=/[A-Z]|^ms/g,Ult=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$de=function(e){return e.charCodeAt(1)===45},kX=function(e){return e!=null&&typeof e!="boolean"},r6=Qde(function(e){return $de(e)?e:e.replace(Mlt,"-$&").toLowerCase()}),jX=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Ult,function(r,n,a){return $f={name:n,styles:a,next:$f},n})}return Llt[e]===1||$de(e)||typeof t!="number"||t===0?t:t+"px"};function L2(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return $f={name:r.name,styles:r.styles,next:$f},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)$f={name:n.name,styles:n.styles,next:$f},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=L2(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":kX(g)&&(f+=r6(m)+":"+jX(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=L2(c,u,g);switch(m){case"animation":case"animationName":f+=r6(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)kX(g[v])&&(f+=r6(m)+":"+jX(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=$f,o=r(e);return $f=s,L2(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var $f,BX=/label:\s*([^\s;\n{]+)\s*(;|$)/g,vj=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";$f=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=L2(r,t,s)):a+=s[0];for(var o=1;o<e.length;o++)a+=L2(r,t,e[o]),n&&(a+=s[o]);BX.lastIndex=0;for(var l,c="";(l=BX.exec(a))!==null;)c+="-"+l[1];var u=function(d){for(var f,h=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:$f}},Qlt=typeof document<"u",Hlt=function(e){return e()},Gde=!!N.useInsertionEffect&&N.useInsertionEffect,qde=Qlt&&Gde||Hlt,TX=Gde||N.useLayoutEffect,Jv=typeof document<"u",cU={}.hasOwnProperty,YS=N.createContext(typeof HTMLElement<"u"?Vde({key:"css"}):null);YS.Provider;var bj=function(e){return N.forwardRef(function(t,r){var n=N.useContext(YS);return e(t,n,r)})};Jv||(bj=function(e){return function(t){var r=N.useContext(YS);return r===null?(r=Vde({key:"css"}),N.createElement(YS.Provider,{value:r},e(t,r))):e(t,r)}});var uU=N.createContext({}),vD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Vlt=function(e,t){var r={};for(var n in t)cU.call(t,n)&&(r[n]=t[n]);return r[vD]=e,r},zlt=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;oU(t,r,n);var a=qde(function(){return lU(t,r,n)});if(!Jv&&a!==void 0){for(var s,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return N.createElement("style",((s={})["data-emotion"]=t.key+" "+o,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},$lt=bj(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[vD],s=[n],o="";typeof e.className=="string"?o=zde(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=vj(s,void 0,N.useContext(uU));o+=t.key+"-"+l.name;var c={};for(var u in e)!cU.call(e,u)||u==="css"||u===vD||(c[u]=e[u]);return c.ref=r,c.className=o,N.createElement(N.Fragment,null,N.createElement(zlt,{cache:t,serialized:l,isStringTag:typeof a=="string"}),N.createElement(a,c))});sa(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Cr=function(e,t){var r=arguments;if(t==null||!cU.call(t,"css"))return N.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=$lt,a[1]=Vlt(e,t);for(var s=2;s<n;s++)a[s]=r[s];return N.createElement.apply(null,a)};bj(function(e,t){var r=e.styles,n=vj([r],void 0,N.useContext(uU));if(!Jv){for(var a,s=n.name,o=n.styles,l=n.next;l!==void 0;)s+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:o},t.sheet,c);return c?null:N.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=N.useRef();return TX(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),TX(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&lU(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function dU(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return vj(t)}var Glt=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var l in o="",s)s[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=s}o&&(a&&(a+=" "),a+=o)}}return a};function qlt(e,t,r){var n=[],a=zde(e,n,r);return n.length<2?r:a+t(n)}var Klt=function(e){var t,r=e.cache,n=e.serializedArr,a=qde(function(){for(var s="",o=0;o<n.length;o++){var l=lU(r,n[o],!1);Jv||l===void 0||(s+=l)}if(!Jv)return s});return Jv||a.length===0?null:N.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};bj(function(e,t){var r=[],n=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=vj(l,t.registered);return r.push(u),oU(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return qlt(t.registered,n,Glt(l))},theme:N.useContext(uU)},s=e.children(a);return N.createElement(N.Fragment,null,N.createElement(Klt,{cache:t,serializedArr:r}),s)});function qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,o,l,c,u=[],d=!0,f=!1;try{if(l=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=l.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,o=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(e,t)||Dde(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kf(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c,u,d={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Kde(e){return yh(e).getComputedStyle(e)}const QC=Math.round;function Wde(e){return Yde(e)?(e.nodeName||"").toLowerCase():""}let HC;function Xde(e){return e instanceof yh(e).HTMLElement}function J5(e){return e instanceof yh(e).Element}function Yde(e){return e instanceof yh(e).Node}function IX(e){return typeof ShadowRoot>"u"?!1:e instanceof yh(e).ShadowRoot||e instanceof ShadowRoot}function Jde(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Kde(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Wlt(){return/^((?!chrome|android).)*safari/i.test(function(){if(HC)return HC;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(HC=e.brands.map(t=>t.brand+"/"+t.version).join(" "),HC):navigator.userAgent}())}function Zde(e){return J5(e)?e:e.contextElement}const efe={x:1,y:1};function FX(e){const t=Zde(e);if(!Xde(t))return efe;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=Kde(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=QC(d)!==h||QC(f)!==m;return g&&(d=h,f=m),{width:d,height:f,fallback:g}}(t);let o=(s?QC(r.width):r.width)/n,l=(s?QC(r.height):r.height)/a;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function OX(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=Zde(e);let c=efe;t&&(c=FX(e));const u=l?yh(l):window,d=Wlt()&&r;let f=(o.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(o.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=yh(l),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const w=FX(y),_=y.getBoundingClientRect(),O=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(O.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(O.paddingTop))*w.y,f*=w.x,h*=w.y,m*=w.x,g*=w.y,f+=_.x,h+=_.y,y=yh(y).frameElement}}return{width:m,height:g,top:h,right:f+m,bottom:h+g,left:f,x:f,y:h}}function Xlt(e){if(Wde(e)==="html")return e;const t=e.assignedSlot||e.parentNode||IX(e)&&e.host||function(r){return((Yde(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return IX(t)?t.host:t}function tfe(e){const t=Xlt(e);return function(r){return["html","body","#document"].includes(Wde(r))}(t)?t.ownerDocument.body:Xde(t)&&Jde(t)?t:tfe(t)}function Z5(e,t){var r;t===void 0&&(t=[]);const n=tfe(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=yh(n);return a?t.concat(s,s.visualViewport||[],Jde(n)?n:[]):t.concat(n,Z5(n))}var bD=typeof document<"u"?N.useLayoutEffect:N.useEffect,Ylt=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],JS=function(){};function Jlt(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Zlt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(Jlt(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var DX=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):hg(e)==="object"&&e!==null?[e]:[];var t},PX=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,vr({},Kf(e,Ylt))},Cs=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,o=e.className;return{css:a(t,e),className:n(r??{},s(t,e),o)}};function yj(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function rfe(e){return yj(e)?window.pageYOffset:e.scrollTop}function ZS(e,t){yj(e)?window.scrollTo(0,t):e.scrollTop=t}function ect(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function VC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:JS,a=rfe(e),s=t-a,o=10,l=0;function c(){var u=ect(l+=o,a,s,r);ZS(e,u),l<r?window.requestAnimationFrame(c):n(e)}c()}function RX(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?ZS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&ZS(e,Math.max(t.offsetTop-a,0))}function LX(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var nfe=!1,tct={get passive(){return nfe=!0}},zC=typeof window<"u"?window:{};zC.addEventListener&&zC.removeEventListener&&(zC.addEventListener("p",JS,tct),zC.removeEventListener("p",JS,!1));var rct=nfe;function nct(e){return e!=null}function $C(e,t,r){return e?t:r}var act=["children","innerProps"],sct=["children","innerProps"];function ict(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(X){var z=getComputedStyle(X),W=z.position==="absolute",G=/(auto|scroll)/;if(z.position==="fixed")return document.documentElement;for(var Y=X;Y=Y.parentElement;)if(z=getComputedStyle(Y),(!W||z.position!=="static")&&G.test(z.overflow+z.overflowY+z.overflowX))return Y;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=o||yj(d=c)?window.innerHeight:d.clientHeight,w=rfe(c),_=parseInt(getComputedStyle(r).marginBottom,10),O=parseInt(getComputedStyle(r).marginTop,10),j=v-O,B=y-x,C=j+w,k=f-w-x,T=m-y+w+_,L=w+x-O,R=160;switch(a){case"auto":case"bottom":if(B>=g)return{placement:"bottom",maxHeight:t};if(k>=g&&!o)return s&&VC(c,T,R),{placement:"bottom",maxHeight:t};if(!o&&k>=n||o&&B>=n)return s&&VC(c,T,R),{placement:"bottom",maxHeight:o?B-_:k-_};if(a==="auto"||o){var S=t,U=o?j:C;return U>=n&&(S=Math.min(U-_-l,t)),{placement:"top",maxHeight:S}}if(a==="bottom")return s&&ZS(c,T),{placement:"bottom",maxHeight:t};break;case"top":if(j>=g)return{placement:"top",maxHeight:t};if(C>=g&&!o)return s&&VC(c,L,R),{placement:"top",maxHeight:t};if(!o&&C>=n||o&&j>=n){var Q=t;return(!o&&C>=n||o&&j>=n)&&(Q=o?j-O:C-O),s&&VC(c,L,R),{placement:"top",maxHeight:Q}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var MX,afe=function(e){return e==="auto"?"bottom":e},sfe=N.createContext(null),oct=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(N.useContext(sfe)||{}).setPortalPlacement,u=N.useRef(null),d=qi(N.useState(n),2),f=d[0],h=d[1],m=qi(N.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return bD(function(){var y=u.current;if(y){var w=s==="fixed",_=ict({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:o&&!w,isFixedPosition:w,controlHeight:v});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,o,r,c,v]),t({ref:u,placerProps:vr(vr({},e),{},{placement:g||afe(a),maxHeight:f})})},lct=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Cr("div",Tr({},Cs(e,"menu",{menu:!0}),{ref:r},n),t)},ife=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return vr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},cct=ife,uct=ife,dct=["size"],fct=["innerProps","isRtl","size"],n6,a6,Act={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ofe=function(e){var t=e.size,r=Kf(e,dct);return Cr("svg",Tr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Act},r))},s6=function(e){return Cr(ofe,Tr({size:20},e),Cr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},UX=function(e){return Cr(ofe,Tr({size:20},e),Cr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},lfe=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return vr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},hct=lfe,mct=lfe,pct=function(){var e=dU.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(MX||(n6=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],a6||(a6=n6.slice(0)),MX=Object.freeze(Object.defineProperties(n6,{raw:{value:Object.freeze(a6)}})))),i6=function(e){var t=e.delay,r=e.offset;return Cr("span",{css:dU({animation:"".concat(pct," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},gct=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return Cr("div",Tr({ref:a},Cs(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":o}),s,{"aria-disabled":r||void 0}),t)},xct=["data"],vct=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Cr("div",Tr({},Cs(e,"group",{group:!0}),l),Cr(s,Tr({},o,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Cr("div",null,t))},bct=["innerRef","isDisabled","isHidden","inputClassName"],cfe={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},yct={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":vr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},cfe)},wct=function(e){return vr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},cfe)},QX=function(e){var t=e.children,r=e.innerProps;return Cr("div",r,t)},Nct=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Cr(c,{data:n,innerProps:vr(vr({},Cs(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},Cr(u,{data:n,innerProps:vr({},Cs(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Cr(d,{data:n,innerProps:vr(vr({},Cs(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},Ect={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Cr("div",Tr({},Cs(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Cr(s6,null))},Control:gct,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Cr("div",Tr({},Cs(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Cr(UX,null))},DownChevron:UX,CrossIcon:s6,Group:vct,GroupHeading:function(e){var t=PX(e);t.data;var r=Kf(t,xct);return Cr("div",Tr({},Cs(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Cr("div",Tr({},Cs(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Cr("span",Tr({},t,Cs(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=PX(e),a=n.innerRef,s=n.isDisabled,o=n.isHidden,l=n.inputClassName,c=Kf(n,bct);return Cr("div",Tr({},Cs(e,"input",{"input-container":!0}),{"data-value":r||""}),Cr("input",Tr({className:t({input:!0},l),ref:a,style:wct(o),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=Kf(e,fct);return Cr("div",Tr({},Cs(vr(vr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Cr(i6,{delay:0,offset:r}),Cr(i6,{delay:160,offset:!0}),Cr(i6,{delay:320,offset:!r}))},Menu:lct,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Cr("div",Tr({},Cs(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,o=e.menuPosition,l=N.useRef(null),c=N.useRef(null),u=qi(N.useState(afe(s)),2),d=u[0],f=u[1],h=N.useMemo(function(){return{setPortalPlacement:f}},[]),m=qi(N.useState(null),2),g=m[0],x=m[1],v=N.useCallback(function(){if(n){var O=function(C){var k=C.getBoundingClientRect();return{bottom:k.bottom,height:k.height,left:k.left,right:k.right,top:k.top,width:k.width}}(n),j=o==="fixed"?0:window.pageYOffset,B=O[d]+j;B===(g==null?void 0:g.offset)&&O.left===(g==null?void 0:g.rect.left)&&O.width===(g==null?void 0:g.rect.width)||x({offset:B,rect:O})}},[n,o,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);bD(function(){v()},[v]);var y=N.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=function(O,j,B,C){C===void 0&&(C={});const{ancestorScroll:k=!0,ancestorResize:T=!0,elementResize:L=!0,animationFrame:R=!1}=C,S=k&&!R,U=S||T?[...J5(O)?Z5(O):O.contextElement?Z5(O.contextElement):[],...Z5(j)]:[];U.forEach(W=>{S&&W.addEventListener("scroll",B,{passive:!0}),T&&W.addEventListener("resize",B)});let Q,X=null;if(L){let W=!0;X=new ResizeObserver(()=>{W||B(),W=!1}),J5(O)&&!R&&X.observe(O),J5(O)||!O.contextElement||R||X.observe(O.contextElement),X.observe(j)}let z=R?OX(O):null;return R&&function W(){const G=OX(O);!z||G.x===z.x&&G.y===z.y&&G.width===z.width&&G.height===z.height||B(),z=G,Q=requestAnimationFrame(W)}(),B(),()=>{var W;U.forEach(G=>{S&&G.removeEventListener("scroll",B),T&&G.removeEventListener("resize",B)}),(W=X)==null||W.disconnect(),X=null,R&&cancelAnimationFrame(Q)}}(n,l.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);bD(function(){y()},[y]);var w=N.useCallback(function(O){l.current=O,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var _=Cr("div",Tr({ref:w},Cs(vr(vr({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Cr(sfe.Provider,{value:h},t?c8.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=Kf(e,sct);return Cr("div",Tr({},Cs(vr(vr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=Kf(e,act);return Cr("div",Tr({},Cs(vr(vr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:Nct,MultiValueContainer:QX,MultiValueLabel:QX,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Cr("div",Tr({role:"button"},r),t||Cr(s6,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,o=e.innerProps;return Cr("div",Tr({},Cs(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Cr("div",Tr({},Cs(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Cr("div",Tr({},Cs(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Cr("div",Tr({},Cs(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Cr("div",Tr({},Cs(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},HX=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Cct(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||HX(n)&&HX(a)))return!1;var n,a;return!0}for(var _ct={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},VX=function(e){return Cr("span",Tr({css:_ct},e))},Sct={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(s," focused, ").concat(d(o,r),".");if(t==="menu"&&u){var f=l?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},kct=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,_=l.tabSelectsValue,O=l.isLoading,j=l["aria-label"],B=l["aria-live"],C=N.useMemo(function(){return vr(vr({},Sct),d||{})},[d]),k=N.useMemo(function(){var Q,X="";if(t&&C.onChange){var z=t.option,W=t.options,G=t.removedValue,Y=t.removedValues,K=t.value,H=G||z||(Q=K,Array.isArray(Q)?null:Q),F=H?f(H):"",D=W||Y||void 0,q=D?D.map(f):[],J=vr({isDisabled:H&&g(H,o),label:F,labels:q},t);X=C.onChange(J)}return X},[t,C,g,o,f]),T=N.useMemo(function(){var Q="",X=r||n,z=!!(r&&o&&o.includes(r));if(X&&C.onFocus){var W={focused:X,label:f(X),isDisabled:g(X,o),isSelected:z,options:a,context:X===r?"menu":"value",selectValue:o,isAppleDevice:u};Q=C.onFocus(W)}return Q},[r,n,f,g,C,a,o,u]),L=N.useMemo(function(){var Q="";if(v&&y.length&&!O&&C.onFilter){var X=w({count:a.length});Q=C.onFilter({inputValue:h,resultsMessage:X})}return Q},[a,h,v,C,y,w,O]),R=(t==null?void 0:t.action)==="initial-input-focus",S=N.useMemo(function(){var Q="";if(C.guidance){var X=n?"value":v?"menu":"input";Q=C.guidance({"aria-label":j,context:X,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:_,isInitialFocus:R})}return Q},[j,r,n,m,g,x,v,C,o,_,R]),U=Cr(N.Fragment,null,Cr("span",{id:"aria-selection"},k),Cr("span",{id:"aria-focused"},T),Cr("span",{id:"aria-results"},L),Cr("span",{id:"aria-guidance"},S));return Cr(N.Fragment,null,Cr(VX,{id:c},R&&U),Cr(VX,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!R&&U))},o6=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],jct=new RegExp("["+o6.map(function(e){return e.letters}).join("")+"]","g"),ufe={},l6=0;l6<o6.length;l6++)for(var c6=o6[l6],u6=0;u6<c6.letters.length;u6++)ufe[c6.letters[u6]]=c6.base;var dfe=function(e){return e.replace(jct,function(t){return ufe[t]})},Bct=function(e,t){t===void 0&&(t=Cct);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}(dfe),zX=function(e){return e.replace(/^\s+|\s+$/g,"")},Tct=function(e){return"".concat(e.label," ").concat(e.value)},Ict=["innerRef"];function Fct(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l=Object.entries(n).filter(function(c){var u=qi(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=qi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(Kf(e,Ict),"onExited","in","enter","exit","appear");return Cr("input",Tr({ref:t},r,{css:dU({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var $X=["boxSizing","height","overflow","paddingRight","position"],GX={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function qX(e){e.preventDefault()}function KX(e){e.stopPropagation()}function WX(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function XX(){return"ontouchstart"in window||navigator.maxTouchPoints}var YX=!(typeof window>"u"||!window.document||!window.document.createElement),Oy=0,Zx={capture:!1,passive:!1},Oct=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Dct={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Pct(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(o){var l=o.isEnabled,c=o.onBottomArrive,u=o.onBottomLeave,d=o.onTopArrive,f=o.onTopLeave,h=N.useRef(!1),m=N.useRef(!1),g=N.useRef(0),x=N.useRef(null),v=N.useCallback(function(B,C){if(x.current!==null){var k=x.current,T=k.scrollTop,L=k.scrollHeight,R=k.clientHeight,S=x.current,U=C>0,Q=L-R-T,X=!1;Q>C&&h.current&&(u&&u(B),h.current=!1),U&&m.current&&(f&&f(B),m.current=!1),U&&C>Q?(c&&!h.current&&c(B),S.scrollTop=L,X=!0,h.current=!0):!U&&-C>T&&(d&&!m.current&&d(B),S.scrollTop=0,X=!0,m.current=!0),X&&function(z){z.cancelable&&z.preventDefault(),z.stopPropagation()}(B)}},[c,u,d,f]),y=N.useCallback(function(B){v(B,B.deltaY)},[v]),w=N.useCallback(function(B){g.current=B.changedTouches[0].clientY},[]),_=N.useCallback(function(B){var C=g.current-B.changedTouches[0].clientY;v(B,C)},[v]),O=N.useCallback(function(B){if(B){var C=!!rct&&{passive:!1};B.addEventListener("wheel",y,C),B.addEventListener("touchstart",w,C),B.addEventListener("touchmove",_,C)}},[_,w,y]),j=N.useCallback(function(B){B&&(B.removeEventListener("wheel",y,!1),B.removeEventListener("touchstart",w,!1),B.removeEventListener("touchmove",_,!1))},[_,w,y]);return N.useEffect(function(){if(l){var B=x.current;return O(B),function(){j(B)}}},[l,O,j]),function(B){x.current=B}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(o){var l=o.isEnabled,c=o.accountForScrollbars,u=c===void 0||c,d=N.useRef({}),f=N.useRef(null),h=N.useCallback(function(g){if(YX){var x=document.body,v=x&&x.style;if(u&&$X.forEach(function(O){var j=v&&v[O];d.current[O]=j}),u&&Oy<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(GX).forEach(function(O){var j=GX[O];v&&(v[O]=j)}),v&&(v.paddingRight="".concat(_,"px"))}x&&XX()&&(x.addEventListener("touchmove",qX,Zx),g&&(g.addEventListener("touchstart",WX,Zx),g.addEventListener("touchmove",KX,Zx))),Oy+=1}},[u]),m=N.useCallback(function(g){if(YX){var x=document.body,v=x&&x.style;Oy=Math.max(Oy-1,0),u&&Oy<1&&$X.forEach(function(y){var w=d.current[y];v&&(v[y]=w)}),x&&XX()&&(x.removeEventListener("touchmove",qX,Zx),g&&(g.removeEventListener("touchstart",WX,Zx),g.removeEventListener("touchmove",KX,Zx)))}},[u]);return N.useEffect(function(){if(l){var g=f.current;return h(g),function(){m(g)}}},[l,h,m]),function(g){f.current=g}}({isEnabled:r});return Cr(N.Fragment,null,r&&Cr("div",{onClick:Oct,css:Dct}),t(function(o){a(o),s(o)}))}var Rct={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Lct=function(e){var t=e.name,r=e.onFocus;return Cr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Rct,value:"",onChange:function(){}})};function yD(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function ffe(){return yD(/^Mac/i)}function Mct(){return yD(/^iPhone/i)||yD(/^iPad/i)||ffe()&&navigator.maxTouchPoints>1}var Uct,Qct={clearIndicator:mct,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,o=a.borderRadius;return vr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:hct,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return vr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return vr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,o=a.colors;return vr(vr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},yct),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,o=a.spacing.baseUnit;return vr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:uct,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return vr((Sv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),Sv(r,"position","absolute"),Sv(r,"width","100%"),Sv(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return vr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return vr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return vr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,o=e.isFocused;return vr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:cct,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,o=s.spacing,l=s.colors;return vr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return vr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return vr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return vr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},d6={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Hct={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:LX(),captureMenuScroll:!LX(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=vr({ignoreCase:!0,ignoreAccents:!0,stringify:Tct,trim:!0,matchFrom:"any"},Uct),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,o=r.trim,l=r.matchFrom,c=o?zX(t):t,u=o?zX(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Bct(c),u=dfe(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function JX(e,t,r,n){return{type:"option",data:t,isDisabled:hfe(e,t,r),isSelected:mfe(e,t,r),label:Afe(e,t),value:ek(e,t),index:n}}function GC(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(o,l){return JX(e,o,t,l)}).filter(function(o){return tY(e,o)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=JX(e,r,t,n);return tY(e,s)?s:void 0}).filter(nct)}function ZX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,aU(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function eY(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,aU(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function tY(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!gfe(e)||!s)&&pfe(e,{label:o,value:l,data:a},n)}var f6=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Afe=function(e,t){return e.getOptionLabel(t)},ek=function(e,t){return e.getOptionValue(t)};function hfe(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function mfe(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=ek(e,t);return r.some(function(a){return ek(e,a)===n})}function pfe(e,t,r){return!e.filterOption||e.filterOption(t,r)}var gfe=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Vct=1,xfe=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&dD(o,l)})(s,N.Component);var t,r,n,a=plt(s);function s(o){var l;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(l=a.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=ffe()||Mct(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,h){var m=l.props,g=m.onChange,x=m.name;h.name=x,l.ariaOnChange(f,h),g(f,h)},l.setValue=function(f,h,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:h,option:m})},l.selectOption=function(f){var h=l.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),w=l.isOptionDisabled(f,v);if(y){var _=l.getOptionValue(f);l.setValue(v.filter(function(O){return l.getOptionValue(O)!==_}),"deselect-option",f)}else{if(w)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(aU(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var h=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=$C(h,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange($C(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,h=l.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=$C(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return f6(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return eY(GC(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return Zlt.apply(void 0,[l.props.classNamePrefix].concat(h))},l.getOptionLabel=function(f){return Afe(l.props,f)},l.getOptionValue=function(f){return ek(l.props,f)},l.getStyles=function(f,h){var m=l.props.unstyled,g=Qct[f](h,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,h):g},l.getClassNames=function(f,h){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,h)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,vr(vr({},Ect),f.components);var f},l.buildCategorizedOptions=function(){return GC(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return ZX(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,h){l.setState({ariaSelection:vr({value:f},h)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():h&&l.openMenu("first"):(h&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var h=l.props,m=h.isMulti,g=h.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&yj(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var h=f.touches,m=h&&h.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var h=f.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var h=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:h}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var h=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:h}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var h=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:h>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return gfe(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var h=l.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,O=h.onKeyDown,j=h.tabSelectsValue,B=h.openMenuOnFocus,C=l.state,k=C.focusedOption,T=C.focusedValue,L=C.selectValue;if(!(w||typeof O=="function"&&(O(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(T)l.removeValue(T);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!_||!j||!k||B&&l.isOptionSelected(k,L))return;l.selectOption(k);break;case"Enter":if(f.keyCode===229)break;if(_){if(!k||l.isComposing)return;l.selectOption(k);break}return;case"Escape":_?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!_){l.openMenu("first");break}if(!k)return;l.selectOption(k);break;case"ArrowUp":_?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":_?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!_)return;l.focusOption("pageup");break;case"PageDown":if(!_)return;l.focusOption("pagedown");break;case"Home":if(!_)return;l.focusOption("first");break;case"End":if(!_)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++Vct),l.state.selectValue=DX(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=f6(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&RX(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&o.isDisabled||d&&u&&!o.menuIsOpen)&&this.focusInput(),d&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(RX(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(o){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),o==="up"?d=f>0?f-1:u.length-1:o==="down"?d=(f+1)%u.length:o==="pageup"?(d=f-l)<0&&(d=0):o==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):o==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(d6):vr(vr({},d6),this.props.theme):d6}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return hfe(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return mfe(this.props,o,l)}},{key:"filterOption",value:function(o,l){return pfe(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,u=o.inputId,d=o.inputValue,f=o.tabIndex,h=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,w=v.ariaSelection,_=this.commonProps,O=u||this.getElementId("input"),j=vr(vr(vr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?N.createElement(x,Tr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:O,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},j)):N.createElement(Fct,Tr({id:O,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:JS,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:h,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,h=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,O=x.placeholder,j=this.state,B=j.selectValue,C=j.focusedValue,k=j.isFocused;if(!this.hasValue()||!v)return _?null:N.createElement(m,Tr({},g,{key:"placeholder",isDisabled:y,isFocused:k,innerProps:{id:this.getElementId("placeholder")}}),O);if(w)return B.map(function(L,R){var S=L===C,U="".concat(o.getOptionLabel(L),"-").concat(o.getOptionValue(L));return N.createElement(c,Tr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:S,isDisabled:y,key:U,index:R,removeProps:{onClick:function(){return o.removeValue(L)},onTouchEnd:function(){return o.removeValue(L)},onMouseDown:function(Q){Q.preventDefault()}},data:L}),o.formatOptionLabel(L,"value"))});if(_)return null;var T=B[0];return N.createElement(h,Tr({},g,{data:T,isDisabled:y}),this.formatOptionLabel(T,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(o,Tr({},l,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return o&&d?N.createElement(o,Tr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return N.createElement(c,Tr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(o,Tr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,h=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,O=w.inputValue,j=w.isLoading,B=w.loadingMessage,C=w.minMenuHeight,k=w.maxMenuHeight,T=w.menuIsOpen,L=w.menuPlacement,R=w.menuPosition,S=w.menuPortalTarget,U=w.menuShouldBlockScroll,Q=w.menuShouldScrollIntoView,X=w.noOptionsMessage,z=w.onMenuScrollToTop,W=w.onMenuScrollToBottom;if(!T)return null;var G,Y=function(q,J){var te=q.type,ne=q.data,ie=q.isDisabled,oe=q.isSelected,de=q.label,ke=q.value,ae=y===ne,Oe=ie?void 0:function(){return o.onOptionHover(ne)},Te=ie?void 0:function(){return o.selectOption(ne)},Se="".concat(o.getElementId("option"),"-").concat(J),fe={id:Se,onClick:Te,onMouseMove:Oe,onMouseOver:Oe,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:oe};return N.createElement(x,Tr({},v,{innerProps:fe,data:ne,isDisabled:ie,isSelected:oe,key:Se,label:de,type:te,value:ke,isFocused:ae,innerRef:ae?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(q.data,"menu"))};if(this.hasOptions())G=this.getCategorizedOptions().map(function(q){if(q.type==="group"){var J=q.data,te=q.options,ne=q.index,ie="".concat(o.getElementId("group"),"-").concat(ne),oe="".concat(ie,"-heading");return N.createElement(c,Tr({},v,{key:ie,data:J,options:te,Heading:u,headingProps:{id:oe,data:q.data},label:o.formatGroupLabel(q.data)}),q.options.map(function(de){return Y(de,"".concat(ne,"-").concat(de.index))}))}if(q.type==="option")return Y(q,"".concat(q.index))});else if(j){var K=B({inputValue:O});if(K===null)return null;G=N.createElement(m,v,K)}else{var H=X({inputValue:O});if(H===null)return null;G=N.createElement(g,v,H)}var F={minMenuHeight:C,maxMenuHeight:k,menuPlacement:L,menuPosition:R,menuShouldScrollIntoView:Q},D=N.createElement(oct,Tr({},v,F),function(q){var J=q.ref,te=q.placerProps,ne=te.placement,ie=te.maxHeight;return N.createElement(d,Tr({},v,F,{innerRef:J,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:j,placement:ne}),N.createElement(Pct,{captureEnabled:_,onTopArrive:z,onBottomArrive:W,lockEnabled:U},function(oe){return N.createElement(f,Tr({},v,{innerRef:function(de){o.getMenuListRef(de),oe(de)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:j,maxHeight:ie,focusedOption:y}),G)}))});return S||R==="fixed"?N.createElement(h,Tr({},v,{appendTo:S,controlElement:this.controlRef,menuPlacement:L,menuPosition:R}),D):D}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,h=l.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return N.createElement(Lct,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return N.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,w){return N.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:o.getOptionValue(y)})}):N.createElement("input",{name:f,type:"hidden",value:""});return N.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return N.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,h=l.selectValue,m=this.getFocusableOptions();return N.createElement(kct,Tr({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,u=o.SelectContainer,d=o.ValueContainer,f=this.props,h=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return N.createElement(u,Tr({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),N.createElement(l,Tr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),N.createElement(d,Tr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),N.createElement(c,Tr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,h=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,w=o.inputValue,_=o.isMulti,O=DX(v),j={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var B=y?function(U,Q){return ZX(GC(U,Q))}(o,O):[],C=y?eY(GC(o,O),"".concat(g,"-option")):[],k=u?function(U,Q){var X=U.focusedValue,z=U.selectValue.indexOf(X);if(z>-1){if(Q.indexOf(X)>-1)return X;if(z<Q.length)return Q[z]}return null}(l,O):null,T=function(U,Q){var X=U.focusedOption;return X&&Q.indexOf(X)>-1?X:Q[0]}(l,B);j={selectValue:O,focusedOption:T,focusedOptionId:f6(C,T),focusableOptionsWithIds:C,focusedValue:k,clearFocusValueOnUpdate:!1}}var L=d!=null&&o!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},R=f,S=h&&m;return h&&!S&&(R={value:$C(_,O,O[0]||null),options:O,action:"initial-input-focus"},S=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(R=null),vr(vr(vr({},j),L),{},{prevProps:o,ariaSelection:R,prevWasFocused:S})}}],r&&pX(t.prototype,r),n&&pX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();xfe.defaultProps=Hct;var zct=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],$ct=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],fU=sa(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Gct=sa(function(e){var t=fU.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),vfe=sa(function(e){var t=fU.default;e.exports=function(r){var n=Gct(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),qct=sa(function(e){e.exports=function(t,r,n){return(r=vfe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});sa(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){qct(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),sa(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),sa(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,vfe(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Kct=sa(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});sa(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Kct(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var rY=sa(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Wct=sa(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Xct=sa(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Yct=sa(function(e){var t=fU.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xct(r)},e.exports.__esModule=!0,e.exports.default=e.exports});sa(function(e){e.exports=function(t){var r=Wct();return function(){var n,a=rY(t);if(r){var s=rY(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Yct(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var wD=sa(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),Jct=sa(function(e){e.exports=function(t){if(Array.isArray(t))return wD(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Zct=sa(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),bfe=sa(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return wD(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wD(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),eut=sa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});sa(function(e){e.exports=function(t){return Jct(t)||Zct(t)||bfe(t)||eut()},e.exports.__esModule=!0,e.exports.default=e.exports});var tut=sa(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),rut=sa(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),nut=sa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});sa(function(e){e.exports=function(t,r){return tut(t)||rut(t,r)||bfe(t,r)||nut()},e.exports.__esModule=!0,e.exports.default=e.exports});var aut=sa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});sa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=aut(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),sa(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var sut=N.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,o=s!==void 0&&s,l=a.cacheOptions,c=l!==void 0&&l,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=Kf(a,$ct),v=x.inputValue,y=N.useRef(void 0),w=N.useRef(!1),_=qi(N.useState(Array.isArray(o)?o:void 0),2),O=_[0],j=_[1],B=qi(N.useState(v!==void 0?v:""),2),C=B[0],k=B[1],T=qi(N.useState(o===!0),2),L=T[0],R=T[1],S=qi(N.useState(void 0),2),U=S[0],Q=S[1],X=qi(N.useState([]),2),z=X[0],W=X[1],G=qi(N.useState(!1),2),Y=G[0],K=G[1],H=qi(N.useState({}),2),F=H[0],D=H[1],q=qi(N.useState(void 0),2),J=q[0],te=q[1],ne=qi(N.useState(void 0),2),ie=ne[0],oe=ne[1];c!==ie&&(D({}),oe(c)),o!==J&&(j(Array.isArray(o)?o:void 0),te(o)),N.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var de=N.useCallback(function(Oe,Te){if(!u)return Te();var Se=u(Oe,Te);Se&&typeof Se.then=="function"&&Se.then(Te,function(){return Te()})},[u]);N.useEffect(function(){o===!0&&de(C,function(Oe){w.current&&(j(Oe||[]),R(!!y.current))})},[]);var ke=N.useCallback(function(Oe,Te){var Se=function(ye,Le,Qe){if(Qe){var ue=Qe(ye,Le);if(typeof ue=="string")return ue}return ye}(Oe,Te,h);if(!Se)return y.current=void 0,k(""),Q(""),W([]),R(!1),void K(!1);if(c&&F[Se])k(Se),Q(Se),W(F[Se]),R(!1),K(!1);else{var fe=y.current={};k(Se),R(!0),K(!U),de(Se,function(ye){w&&fe===y.current&&(y.current=void 0,R(!1),Q(Se),W(ye||[]),K(!1),D(ye?vr(vr({},F),{},Sv({},Se,ye)):F))})}},[c,de,U,F,h]),ae=Y?[]:C&&U?z:O||[];return vr(vr({},x),{},{options:ae,isLoading:L||f,onInputChange:ke,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,o=s===void 0?"":s,l=a.defaultMenuIsOpen,c=l!==void 0&&l,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,w=Kf(a,zct),_=qi(N.useState(f!==void 0?f:o),2),O=_[0],j=_[1],B=qi(N.useState(h!==void 0?h:c),2),C=B[0],k=B[1],T=qi(N.useState(y!==void 0?y:d),2),L=T[0],R=T[1],S=N.useCallback(function(Y,K){typeof m=="function"&&m(Y,K),R(Y)},[m]),U=N.useCallback(function(Y,K){var H;typeof g=="function"&&(H=g(Y,K)),j(H!==void 0?H:Y)},[g]),Q=N.useCallback(function(){typeof v=="function"&&v(),k(!0)},[v]),X=N.useCallback(function(){typeof x=="function"&&x(),k(!1)},[x]),z=f!==void 0?f:O,W=h!==void 0?h:C,G=y!==void 0?y:L;return vr(vr({},w),{},{inputValue:z,menuIsOpen:W,onChange:S,onInputChange:U,onMenuClose:X,onMenuOpen:Q,value:G})}(r);return N.createElement(xfe,Tr({ref:t},n))}),iut=sut,out=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},kv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(kv||(kv={}));class Vp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=m,Vp.instance){if(!out(this.options,Vp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Vp.instance.options)}`);return Vp.instance}Vp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?kv.FAILURE:this.done?kv.SUCCESS:this.loading?kv.LOADING:kv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var lut=function(e,t,r){var n,a=e.bounds,s=e.location,o=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),l=Ag({input:t},o);return r&&(l.sessionToken=r),a&&(l.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)f[h]=m[g];return f}([void 0],a)))),s&&(l.location=new google.maps.LatLng(s)),l},cut=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,o=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=N.useRef(null),m=N.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=N.useRef(!1),y=N.useRef(null),w=N.useRef(!1),_=N.useRef(c);_.current=c;var O=N.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);N.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var j=N.useCallback(function(){for(var C=[],k=0;k<arguments.length;k++)C[k]=arguments[k];m.current=C,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(_.current.apply(_,C),v.current=!0),y.current=setTimeout(function(){var T=!0;g&&v.current&&(T=!1),O(),!w.current&&x&&T&&_.current.apply(_,C)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var T=m.current;O(),w.current||_.current.apply(null,T)},f))},[f,u,O,g,x]),B=N.useCallback(function(){y.current&&(_.current.apply(null,m.current),O())},[O]);return[j,O,B]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Ag({},t);a.getPlacePredictions(lut(d,c,o&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return l},nY=N.forwardRef(function(e,t){var r,n,a,s,o,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=N.useState(void 0),O=_[0],j=_[1],B=N.useState(void 0),C=B[0],k=B[1],T=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");j(new window.google.maps.places.AutocompleteService),k(new google.maps.places.AutocompleteSessionToken)};return N.useEffect(function(){v?Alt(void 0,void 0,void 0,function(){var L;return hlt(this,function(R){switch(R.label){case 0:if(!v)return[2];R.label=1;case 1:return R.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Vp(Ag({apiKey:v},Ag({libraries:["places"]},y))).load()];case 2:R.sent(),R.label=3;case 3:return T(),[3,5];case 4:return L=R.sent(),typeof w=="function"&&w(L),[3,5];case 5:return[2]}})}):T()},[]),{placesService:O,sessionToken:C,setSessionToken:k}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=cut({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return N.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),ot.createElement(iut,Ag({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ND=function(e,t){return ND=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},ND(e,t)};function nf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ND(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ED=function(){return ED=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ED.apply(this,arguments)};function vl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function qo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function qC(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var Qh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),wj=function(e,t){return Qh.fromClientRect(e,t.getBoundingClientRect())},uut=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Qh(0,0,n,a)},Nj=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Ks=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},aY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dut=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var KC=0;KC<aY.length;KC++)dut[aY.charCodeAt(KC)]=KC;var sY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var WC=0;WC<sY.length;WC++)s2[sY.charCodeAt(WC)]=WC;var fut=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=s2[e.charCodeAt(n)],o=s2[e.charCodeAt(n+1)],l=s2[e.charCodeAt(n+2)],c=s2[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Aut=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},hut=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},pg=5,AU=11,A6=2,mut=AU-pg,yfe=65536>>pg,put=1<<pg,h6=put-1,gut=1024>>pg,xut=yfe+gut,vut=xut,but=32,yut=vut+but,wut=65536>>AU,Nut=1<<mut,Eut=Nut-1,iY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Cut=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},_ut=function(e,t){var r=fut(e),n=Array.isArray(r)?hut(r):new Uint32Array(r),a=Array.isArray(r)?Aut(r):new Uint16Array(r),s=24,o=iY(a,s/2,n[4]/2),l=n[5]===2?iY(a,(s+n[4])/2):Cut(n,Math.ceil((s+n[4])/4));return new Sut(n[0],n[1],n[2],n[3],o,l)},Sut=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>pg],r=(r<<A6)+(t&h6),this.data[r];if(t<=65535)return r=this.index[yfe+(t-55296>>pg)],r=(r<<A6)+(t&h6),this.data[r];if(t<this.highStart)return r=yut-wut+(t>>AU),r=this.index[r],r+=t>>pg&Eut,r=this.index[r],r=(r<<A6)+(t&h6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),oY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kut=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var XC=0;XC<oY.length;XC++)kut[oY.charCodeAt(XC)]=XC;var jut="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",lY=50,But=1,wfe=2,Nfe=3,Tut=4,Iut=5,cY=7,Efe=8,uY=9,lm=10,CD=11,dY=12,_D=13,Fut=14,i2=15,SD=16,YC=17,Dy=18,Out=19,fY=20,kD=21,Py=22,m6=23,ev=24,Oc=25,o2=26,l2=27,tv=28,Dut=29,zp=30,Put=31,JC=32,ZC=33,jD=34,BD=35,TD=36,Vw=37,ID=38,e_=39,t_=40,p6=41,Cfe=42,Rut=43,Lut=[9001,65288],_fe="!",yn="×",e5="÷",FD=_ut(jut),XA=[zp,TD],OD=[But,wfe,Nfe,Iut],Sfe=[lm,Efe],AY=[l2,o2],Mut=OD.concat(Sfe),hY=[ID,e_,t_,jD,BD],Uut=[i2,_D],Qut=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,o){var l=FD.get(s);if(l>lY?(a.push(!0),l-=lY):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(SD);if(l===Tut||l===CD){if(o===0)return n.push(o),r.push(zp);var c=r[o-1];return Mut.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(zp))}if(n.push(o),l===Put)return r.push(t==="strict"?kD:Vw);if(l===Cfe||l===Dut)return r.push(zp);if(l===Rut)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Vw):r.push(zp);r.push(l)}),[n,r,a]},g6=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===t)return!0;if(o!==lm)break}if(a===lm)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===t)return!0;if(o!==lm)break}if(l!==lm)break}return!1},mY=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===lm)r--;else return n}return 0},Hut=function(e,t,r,n,a){if(r[n]===0)return yn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return yn;var o=s-1,l=s+1,c=t[s],u=o>=0?t[o]:0,d=t[l];if(c===wfe&&d===Nfe)return yn;if(OD.indexOf(c)!==-1)return _fe;if(OD.indexOf(d)!==-1||Sfe.indexOf(d)!==-1)return yn;if(mY(s,t)===Efe)return e5;if(FD.get(e[s])===CD||(c===JC||c===ZC)&&FD.get(e[l])===CD||c===cY||d===cY||c===uY||[lm,_D,i2].indexOf(c)===-1&&d===uY||[YC,Dy,Out,ev,tv].indexOf(d)!==-1||mY(s,t)===Py||g6(m6,Py,s,t)||g6([YC,Dy],kD,s,t)||g6(dY,dY,s,t))return yn;if(c===lm)return e5;if(c===m6||d===m6)return yn;if(d===SD||c===SD)return e5;if([_D,i2,kD].indexOf(d)!==-1||c===Fut||u===TD&&Uut.indexOf(c)!==-1||c===tv&&d===TD||d===fY||XA.indexOf(d)!==-1&&c===Oc||XA.indexOf(c)!==-1&&d===Oc||c===l2&&[Vw,JC,ZC].indexOf(d)!==-1||[Vw,JC,ZC].indexOf(c)!==-1&&d===o2||XA.indexOf(c)!==-1&&AY.indexOf(d)!==-1||AY.indexOf(c)!==-1&&XA.indexOf(d)!==-1||[l2,o2].indexOf(c)!==-1&&(d===Oc||[Py,i2].indexOf(d)!==-1&&t[l+1]===Oc)||[Py,i2].indexOf(c)!==-1&&d===Oc||c===Oc&&[Oc,tv,ev].indexOf(d)!==-1)return yn;if([Oc,tv,ev,YC,Dy].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Oc)return yn;if([tv,ev].indexOf(h)!==-1)f--;else break}if([l2,o2].indexOf(d)!==-1)for(var f=[YC,Dy].indexOf(c)!==-1?o:s;f>=0;){var h=t[f];if(h===Oc)return yn;if([tv,ev].indexOf(h)!==-1)f--;else break}if(ID===c&&[ID,e_,jD,BD].indexOf(d)!==-1||[e_,jD].indexOf(c)!==-1&&[e_,t_].indexOf(d)!==-1||[t_,BD].indexOf(c)!==-1&&d===t_||hY.indexOf(c)!==-1&&[fY,o2].indexOf(d)!==-1||hY.indexOf(d)!==-1&&c===l2||XA.indexOf(c)!==-1&&XA.indexOf(d)!==-1||c===ev&&XA.indexOf(d)!==-1||XA.concat(Oc).indexOf(c)!==-1&&d===Py&&Lut.indexOf(e[l])===-1||XA.concat(Oc).indexOf(d)!==-1&&c===Dy)return yn;if(c===p6&&d===p6){for(var m=r[s],g=1;m>0&&(m--,t[m]===p6);)g++;if(g%2!==0)return yn}return c===JC&&d===ZC?yn:e5},Vut=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Qut(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[Oc,zp,Cfe].indexOf(l)!==-1?Vw:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,o]},zut=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===_fe,this.start=n,this.end=a}return e.prototype.slice=function(){return Ks.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),$ut=function(e,t){var r=Nj(e),n=Vut(r,t),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=yn;u<l&&(d=Hut(r,s,a,++u,o))===yn;);if(d!==yn||u===l){var f=new zut(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Gut=1,qut=2,LN=4,pY=8,tk=10,gY=47,M2=92,Kut=9,Wut=32,t5=34,Ry=61,Xut=35,Yut=36,Jut=37,r5=39,n5=40,Ly=41,Zut=95,tc=45,edt=33,tdt=60,rdt=62,ndt=64,adt=91,sdt=93,idt=61,odt=123,a5=63,ldt=125,xY=124,cdt=126,udt=128,vY=65533,x6=42,Zp=43,ddt=44,fdt=58,Adt=59,zw=46,hdt=0,mdt=8,pdt=11,gdt=14,xdt=31,vdt=127,Rf=-1,kfe=48,jfe=97,Bfe=101,bdt=102,ydt=117,wdt=122,Tfe=65,Ife=69,Ffe=70,Ndt=85,Edt=90,Jo=function(e){return e>=kfe&&e<=57},Cdt=function(e){return e>=55296&&e<=57343},rv=function(e){return Jo(e)||e>=Tfe&&e<=Ffe||e>=jfe&&e<=bdt},_dt=function(e){return e>=jfe&&e<=wdt},Sdt=function(e){return e>=Tfe&&e<=Edt},kdt=function(e){return _dt(e)||Sdt(e)},jdt=function(e){return e>=udt},s5=function(e){return e===tk||e===Kut||e===Wut},rk=function(e){return kdt(e)||jdt(e)||e===Zut},bY=function(e){return rk(e)||Jo(e)||e===tc},Bdt=function(e){return e>=hdt&&e<=mdt||e===pdt||e>=gdt&&e<=xdt||e===vdt},K0=function(e,t){return e!==M2?!1:t!==tk},i5=function(e,t,r){return e===tc?rk(t)||K0(t,r):rk(e)?!0:!!(e===M2&&K0(e,t))},v6=function(e,t,r){return e===Zp||e===tc?Jo(t)?!0:t===zw&&Jo(r):Jo(e===zw?t:e)},Tdt=function(e){var t=0,r=1;(e[t]===Zp||e[t]===tc)&&(e[t]===tc&&(r=-1),t++);for(var n=[];Jo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Ks.apply(void 0,n),10):0;e[t]===zw&&t++;for(var s=[];Jo(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(Ks.apply(void 0,s),10):0;(e[t]===Ife||e[t]===Bfe)&&t++;var c=1;(e[t]===Zp||e[t]===tc)&&(e[t]===tc&&(c=-1),t++);for(var u=[];Jo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Ks.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},Idt={type:2},Fdt={type:3},Odt={type:4},Ddt={type:13},Pdt={type:8},Rdt={type:21},Ldt={type:9},Mdt={type:10},Udt={type:11},Qdt={type:12},Hdt={type:14},o5={type:23},Vdt={type:1},zdt={type:25},$dt={type:24},Gdt={type:26},qdt={type:27},Kdt={type:28},Wdt={type:29},Xdt={type:31},DD={type:32},Ofe=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Nj(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==DD;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case t5:return this.consumeStringToken(t5);case Xut:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(bY(r)||K0(n,a)){var s=i5(r,n,a)?qut:Gut,o=this.consumeName();return{type:5,value:o,flags:s}}break;case Yut:if(this.peekCodePoint(0)===Ry)return this.consumeCodePoint(),Ddt;break;case r5:return this.consumeStringToken(r5);case n5:return Idt;case Ly:return Fdt;case x6:if(this.peekCodePoint(0)===Ry)return this.consumeCodePoint(),Hdt;break;case Zp:if(v6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case ddt:return Odt;case tc:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(v6(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(i5(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===tc&&u===rdt)return this.consumeCodePoint(),this.consumeCodePoint(),$dt;break;case zw:if(v6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case gY:if(this.peekCodePoint(0)===x6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===x6&&(d=this.consumeCodePoint(),d===gY))return this.consumeToken();if(d===Rf)return this.consumeToken()}break;case fdt:return Gdt;case Adt:return qdt;case tdt:if(this.peekCodePoint(0)===edt&&this.peekCodePoint(1)===tc&&this.peekCodePoint(2)===tc)return this.consumeCodePoint(),this.consumeCodePoint(),zdt;break;case ndt:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(i5(f,h,m)){var o=this.consumeName();return{type:7,value:o}}break;case adt:return Kdt;case M2:if(K0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case sdt:return Wdt;case idt:if(this.peekCodePoint(0)===Ry)return this.consumeCodePoint(),Pdt;break;case odt:return Udt;case ldt:return Qdt;case ydt:case Ndt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Zp&&(rv(x)||x===a5)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case xY:if(this.peekCodePoint(0)===Ry)return this.consumeCodePoint(),Ldt;if(this.peekCodePoint(0)===xY)return this.consumeCodePoint(),Rdt;break;case cdt:if(this.peekCodePoint(0)===Ry)return this.consumeCodePoint(),Mdt;break;case Rf:return DD}return s5(t)?(this.consumeWhiteSpace(),Xdt):Jo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):rk(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Ks(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();rv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===a5&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Ks.apply(void 0,t.map(function(c){return c===a5?kfe:c})),16),s=parseInt(Ks.apply(void 0,t.map(function(c){return c===a5?Ffe:c})),16);return{type:30,start:a,end:s}}var o=parseInt(Ks.apply(void 0,t),16);if(this.peekCodePoint(0)===tc&&rv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];rv(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Ks.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===n5?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===n5?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===r5||r===t5){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rf||this.peekCodePoint(0)===Ly)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),o5)}for(;;){var a=this.consumeCodePoint();if(a===Rf||a===Ly)return{type:22,value:Ks.apply(void 0,t)};if(s5(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Rf||this.peekCodePoint(0)===Ly?(this.consumeCodePoint(),{type:22,value:Ks.apply(void 0,t)}):(this.consumeBadUrlRemnants(),o5);if(a===t5||a===r5||a===n5||Bdt(a))return this.consumeBadUrlRemnants(),o5;if(a===M2)if(K0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),o5;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;s5(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ly||t===Rf)return;K0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Ks.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===Rf||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===tk)return this._value.splice(0,n),Vdt;if(a===M2){var s=this._value[n+1];s!==Rf&&s!==void 0&&(s===tk?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):K0(a,s)&&(r+=this.consumeStringSlice(n),r+=Ks(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=LN,n=this.peekCodePoint(0);for((n===Zp||n===tc)&&t.push(this.consumeCodePoint());Jo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===zw&&Jo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=pY;Jo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Ife||n===Bfe)&&((a===Zp||a===tc)&&Jo(s)||Jo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=pY;Jo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Tdt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(i5(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===Jut?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(rv(t)){for(var r=Ks(t);rv(this.peekCodePoint(0))&&r.length<6;)r+=Ks(this.consumeCodePoint());s5(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Cdt(n)||n>1114111?vY:n}return t===Rf?vY:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(bY(r))t+=Ks(r);else if(K0(r,this.peekCodePoint(0)))t+=Ks(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),Dfe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Ofe;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||Jdt(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?DD:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),MN=function(e){return e.type===15},C1=function(e){return e.type===17},va=function(e){return e.type===20},Ydt=function(e){return e.type===0},PD=function(e,t){return va(e)&&e.value===t},Pfe=function(e){return e.type!==31},Ub=function(e){return e.type!==31&&e.type!==4},gA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},Jdt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},$m=function(e){return e.type===17||e.type===15},mi=function(e){return e.type===16||$m(e)},Rfe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},_o={type:17,number:0,flags:LN},hU={type:16,number:50,flags:LN},cm={type:16,number:100,flags:LN},c2=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(MN(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Lfe="deg",Mfe="grad",Ufe="rad",Qfe="turn",Ej={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Lfe:return Math.PI*t.number/180;case Mfe:return Math.PI/200*t.number;case Ufe:return t.number;case Qfe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Hfe=function(e){return e.type===15&&(e.unit===Lfe||e.unit===Mfe||e.unit===Ufe||e.unit===Qfe)},Vfe=function(e){var t=e.filter(va).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_o,_o];case"to top":case"bottom":return Gu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_o,cm];case"to right":case"left":return Gu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[cm,cm];case"to bottom":case"top":return Gu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[cm,_o];case"to left":case"right":return Gu(270)}return 0},Gu=function(e){return Math.PI*e/180},Em={name:"color",parse:function(e,t){if(t.type===18){var r=Zdt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return um(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return um(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return um(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return um(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=wh[t.value.toUpperCase()];if(typeof l<"u")return l}return wh.TRANSPARENT}},Cm=function(e){return(255&e)===0},Gi=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},um=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},yY=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},wY=function(e,t){var r=t.filter(Ub);if(r.length===3){var n=r.map(yY),a=n[0],s=n[1],o=n[2];return um(a,s,o,1)}if(r.length===4){var l=r.map(yY),a=l[0],s=l[1],o=l[2],c=l[3];return um(a,s,o,c)}return 0};function b6(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var NY=function(e,t){var r=t.filter(Ub),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?Gu(n.number):Ej.parse(e,n))/(Math.PI*2),c=mi(a)?a.number/100:0,u=mi(s)?s.number/100:0,d=typeof o<"u"&&mi(o)?Da(o,1):1;if(c===0)return um(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,m=b6(h,f,l+1/3),g=b6(h,f,l),x=b6(h,f,l-1/3);return um(m*255,g*255,x*255,d)},Zdt={hsl:NY,hsla:NY,rgb:wY,rgba:wY},U2=function(e,t){return Em.parse(e,Dfe.create(t).parseComponentValue())},wh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},eft={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(va(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tft={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Cj=function(e,t){var r=Em.parse(e,t[0]),n=t[1];return n&&mi(n)?{color:r,stop:n}:{color:r,stop:null}},EY=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=_o),n.stop===null&&(n.stop=cm);for(var a=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=Da(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,h=a[u-1],m=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},rft=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,o=a-Da(e[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},nft=function(e,t,r){var n=typeof e=="number"?e:rft(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},jd=function(e,t){return Math.sqrt(e*e+t*t)},CY=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=jd(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},aft=function(e,t,r,n,a){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=o=Math.min(jd(t,r),jd(t,r-a),jd(t-n,r),jd(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=CY(n,a,t,r,!0),u=c[0],d=c[1];s=jd(u-t,(d-r)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=o=Math.max(jd(t,r),jd(t,r-a),jd(t-n,r),jd(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=CY(n,a,t,r,!1),u=f[0],d=f[1];s=jd(u-t,(d-r)/l),o=l*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),o=e.size.length===2?Da(e.size[1],a):s),[s,o]},sft=function(e,t){var r=Gu(180),n=[];return gA(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=Vfe(a);return}else if(Hfe(o)){r=Ej.parse(e,o);return}}var l=Cj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},l5=function(e,t){var r=Gu(180),n=[];return gA(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=Vfe(a);return}else if(Hfe(o)){r=(Ej.parse(e,o)+Gu(270))%Gu(360);return}}var l=Cj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},ift=function(e,t){var r=Gu(180),n=[],a=1,s=0,o=3,l=[];return gA(t).forEach(function(c,u){var d=c[0];if(u===0){if(va(d)&&d.value==="linear"){a=1;return}else if(va(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=Em.parse(e,d.values[0]);n.push({stop:_o,color:f})}else if(d.name==="to"){var f=Em.parse(e,d.values[0]);n.push({stop:cm,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(Ub);if(h.length===2){var f=Em.parse(e,h[1]),m=h[0];C1(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(r+Gu(180))%Gu(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},zfe="closest-side",$fe="farthest-side",Gfe="closest-corner",qfe="farthest-corner",Kfe="circle",Wfe="ellipse",Xfe="cover",Yfe="contain",oft=function(e,t){var r=0,n=3,a=[],s=[];return gA(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,h){if(u)if(va(h))switch(h.value){case"center":return s.push(hU),f;case"top":case"left":return s.push(_o),f;case"right":case"bottom":return s.push(cm),f}else(mi(h)||$m(h))&&s.push(h);else if(va(h))switch(h.value){case Kfe:return r=0,!1;case Wfe:return r=1,!1;case"at":return u=!0,!1;case zfe:return n=0,!1;case Xfe:case $fe:return n=1,!1;case Yfe:case Gfe:return n=2,!1;case qfe:return n=3,!1}else if($m(h)||mi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=Cj(e,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},c5=function(e,t){var r=0,n=3,a=[],s=[];return gA(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(va(f))switch(f.value){case"center":return s.push(hU),!1;case"top":case"left":return s.push(_o),!1;case"right":case"bottom":return s.push(cm),!1}else if(mi(f)||$m(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(va(f))switch(f.value){case Kfe:return r=0,!1;case Wfe:return r=1,!1;case Yfe:case zfe:return n=0,!1;case $fe:return n=1,!1;case Gfe:return n=2,!1;case Xfe:case qfe:return n=3,!1}else if($m(f)||mi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Cj(e,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},lft=function(e){return e.type===1},cft=function(e){return e.type===2},mU={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=Jfe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function uft(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Jfe[e.name])}var Jfe={"linear-gradient":sft,"-moz-linear-gradient":l5,"-ms-linear-gradient":l5,"-o-linear-gradient":l5,"-webkit-linear-gradient":l5,"radial-gradient":oft,"-moz-radial-gradient":c5,"-ms-radial-gradient":c5,"-o-radial-gradient":c5,"-webkit-radial-gradient":c5,"-webkit-gradient":ift},dft={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Ub(n)&&uft(n)}).map(function(n){return mU.parse(e,n)})}},fft={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(va(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Aft={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return gA(t).map(function(r){return r.filter(mi)}).map(Rfe)}},hft={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return gA(t).map(function(r){return r.filter(va).map(function(n){return n.value}).join(" ")}).map(mft)}},mft=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Zv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Zv||(Zv={}));var pft={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return gA(t).map(function(r){return r.filter(gft)})}},gft=function(e){return va(e)||mi(e)},_j=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},xft=_j("top"),vft=_j("right"),bft=_j("bottom"),yft=_j("left"),Sj=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Rfe(r.filter(mi))}}},wft=Sj("top-left"),Nft=Sj("top-right"),Eft=Sj("bottom-right"),Cft=Sj("bottom-left"),kj=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},_ft=kj("top"),Sft=kj("right"),kft=kj("bottom"),jft=kj("left"),jj=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return MN(r)?r.number:0}}},Bft=jj("top"),Tft=jj("right"),Ift=jj("bottom"),Fft=jj("left"),Oft={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dft={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Pft={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(va).reduce(function(r,n){return r|Rft(n.value)},0)}},Rft=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Lft={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Mft={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},nk;(function(e){e.NORMAL="normal",e.STRICT="strict"})(nk||(nk={}));var Uft={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return nk.STRICT;case"normal":default:return nk.NORMAL}}},Qft={name:"line-height",initialValue:"normal",prefix:!1,type:4},_Y=function(e,t){return va(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:mi(e)?Da(e,t):t},Hft={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:mU.parse(e,t)}},Vft={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},RD={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Bj=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},zft=Bj("top"),$ft=Bj("right"),Gft=Bj("bottom"),qft=Bj("left"),Kft={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(va).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Wft={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Tj=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Xft=Tj("top"),Yft=Tj("right"),Jft=Tj("bottom"),Zft=Tj("left"),eAt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},tAt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},rAt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&PD(t[0],"none")?[]:gA(t).map(function(r){for(var n={color:wh.TRANSPARENT,offsetX:_o,offsetY:_o,blur:_o},a=0,s=0;s<r.length;s++){var o=r[s];$m(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=Em.parse(e,o)}return n})}},nAt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},aAt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=oAt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},sAt=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},iAt=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,o,l]:null},oAt={matrix:sAt,matrix3d:iAt},SY={type:16,number:50,flags:LN},lAt=[SY,SY],cAt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(mi);return r.length!==2?lAt:[r[0],r[1]]}},uAt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Q2;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Q2||(Q2={}));var dAt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Q2.BREAK_ALL;case"keep-all":return Q2.KEEP_ALL;case"normal":default:return Q2.NORMAL}}},fAt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(C1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Zfe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},AAt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return C1(t)?t.number:1}},hAt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mAt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(va).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},pAt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},gAt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},xAt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(C1(t))return t.number;if(va(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},vAt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(va).map(function(r){return r.value})}},bAt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ji=function(e,t){return(e&t)!==0},yAt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},wAt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Pfe),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&C1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},NAt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Pfe),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(va(s)&&s.value!=="none"){var l=o&&C1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},EAt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(MN).map(function(r){return Zfe.parse(e,r)})}},CAt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Ydt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},kY=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},_At={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&PD(t[0],"none")?[]:gA(t).map(function(r){for(var n={color:255,offsetX:_o,offsetY:_o,blur:_o,spread:_o,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];PD(o,"inset")?n.inset=!0:$m(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=Em.parse(e,o)}return n})}},SAt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(va).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},kAt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},jAt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return MN(t)?t.number:0}},BAt=function(){function e(t,r){var n,a;this.animationDuration=rr(t,EAt,r.animationDuration),this.backgroundClip=rr(t,eft,r.backgroundClip),this.backgroundColor=rr(t,tft,r.backgroundColor),this.backgroundImage=rr(t,dft,r.backgroundImage),this.backgroundOrigin=rr(t,fft,r.backgroundOrigin),this.backgroundPosition=rr(t,Aft,r.backgroundPosition),this.backgroundRepeat=rr(t,hft,r.backgroundRepeat),this.backgroundSize=rr(t,pft,r.backgroundSize),this.borderTopColor=rr(t,xft,r.borderTopColor),this.borderRightColor=rr(t,vft,r.borderRightColor),this.borderBottomColor=rr(t,bft,r.borderBottomColor),this.borderLeftColor=rr(t,yft,r.borderLeftColor),this.borderTopLeftRadius=rr(t,wft,r.borderTopLeftRadius),this.borderTopRightRadius=rr(t,Nft,r.borderTopRightRadius),this.borderBottomRightRadius=rr(t,Eft,r.borderBottomRightRadius),this.borderBottomLeftRadius=rr(t,Cft,r.borderBottomLeftRadius),this.borderTopStyle=rr(t,_ft,r.borderTopStyle),this.borderRightStyle=rr(t,Sft,r.borderRightStyle),this.borderBottomStyle=rr(t,kft,r.borderBottomStyle),this.borderLeftStyle=rr(t,jft,r.borderLeftStyle),this.borderTopWidth=rr(t,Bft,r.borderTopWidth),this.borderRightWidth=rr(t,Tft,r.borderRightWidth),this.borderBottomWidth=rr(t,Ift,r.borderBottomWidth),this.borderLeftWidth=rr(t,Fft,r.borderLeftWidth),this.boxShadow=rr(t,_At,r.boxShadow),this.color=rr(t,Oft,r.color),this.direction=rr(t,Dft,r.direction),this.display=rr(t,Pft,r.display),this.float=rr(t,Lft,r.cssFloat),this.fontFamily=rr(t,pAt,r.fontFamily),this.fontSize=rr(t,gAt,r.fontSize),this.fontStyle=rr(t,bAt,r.fontStyle),this.fontVariant=rr(t,vAt,r.fontVariant),this.fontWeight=rr(t,xAt,r.fontWeight),this.letterSpacing=rr(t,Mft,r.letterSpacing),this.lineBreak=rr(t,Uft,r.lineBreak),this.lineHeight=rr(t,Qft,r.lineHeight),this.listStyleImage=rr(t,Hft,r.listStyleImage),this.listStylePosition=rr(t,Vft,r.listStylePosition),this.listStyleType=rr(t,RD,r.listStyleType),this.marginTop=rr(t,zft,r.marginTop),this.marginRight=rr(t,$ft,r.marginRight),this.marginBottom=rr(t,Gft,r.marginBottom),this.marginLeft=rr(t,qft,r.marginLeft),this.opacity=rr(t,AAt,r.opacity);var s=rr(t,Kft,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=rr(t,Wft,r.overflowWrap),this.paddingTop=rr(t,Xft,r.paddingTop),this.paddingRight=rr(t,Yft,r.paddingRight),this.paddingBottom=rr(t,Jft,r.paddingBottom),this.paddingLeft=rr(t,Zft,r.paddingLeft),this.paintOrder=rr(t,SAt,r.paintOrder),this.position=rr(t,tAt,r.position),this.textAlign=rr(t,eAt,r.textAlign),this.textDecorationColor=rr(t,hAt,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=rr(t,mAt,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=rr(t,rAt,r.textShadow),this.textTransform=rr(t,nAt,r.textTransform),this.transform=rr(t,aAt,r.transform),this.transformOrigin=rr(t,cAt,r.transformOrigin),this.visibility=rr(t,uAt,r.visibility),this.webkitTextStrokeColor=rr(t,kAt,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=rr(t,jAt,r.webkitTextStrokeWidth),this.wordBreak=rr(t,dAt,r.wordBreak),this.zIndex=rr(t,fAt,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Cm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ji(this.display,4)||ji(this.display,33554432)||ji(this.display,268435456)||ji(this.display,536870912)||ji(this.display,67108864)||ji(this.display,134217728)},e}(),TAt=function(){function e(t,r){this.content=rr(t,yAt,r.content),this.quotes=rr(t,CAt,r.quotes)}return e}(),jY=function(){function e(t,r){this.counterIncrement=rr(t,wAt,r.counterIncrement),this.counterReset=rr(t,NAt,r.counterReset)}return e}(),rr=function(e,t,r){var n=new Ofe,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new Dfe(n.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,va(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return Ej.parse(e,s.parseComponentValue());case"color":return Em.parse(e,s.parseComponentValue());case"image":return mU.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return $m(l)?l:_o;case"length-percentage":var c=s.parseComponentValue();return mi(c)?c:_o;case"time":return Zfe.parse(e,s.parseComponentValue())}break}},IAt="data-html2canvas-debug",FAt=function(e){var t=e.getAttribute(IAt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},LD=function(e,t){var r=FAt(e);return r===1||t===r},xA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,LD(r,3))debugger;this.styles=new BAt(t,window.getComputedStyle(r,null)),QD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=wj(this.context,r),LD(r,4)&&(this.flags|=16)}return e}(),OAt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",BY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var u5=0;u5<BY.length;u5++)u2[BY.charCodeAt(u5)]=u5;var DAt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=u2[e.charCodeAt(n)],o=u2[e.charCodeAt(n+1)],l=u2[e.charCodeAt(n+2)],c=u2[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},PAt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},RAt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},gg=5,pU=11,y6=2,LAt=pU-gg,eAe=65536>>gg,MAt=1<<gg,w6=MAt-1,UAt=1024>>gg,QAt=eAe+UAt,HAt=QAt,VAt=32,zAt=HAt+VAt,$At=65536>>pU,GAt=1<<LAt,qAt=GAt-1,TY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},KAt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},WAt=function(e,t){var r=DAt(e),n=Array.isArray(r)?RAt(r):new Uint32Array(r),a=Array.isArray(r)?PAt(r):new Uint16Array(r),s=24,o=TY(a,s/2,n[4]/2),l=n[5]===2?TY(a,(s+n[4])/2):KAt(n,Math.ceil((s+n[4])/4));return new XAt(n[0],n[1],n[2],n[3],o,l)},XAt=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>gg],r=(r<<y6)+(t&w6),this.data[r];if(t<=65535)return r=this.index[eAe+(t-55296>>gg)],r=(r<<y6)+(t&w6),this.data[r];if(t<this.highStart)return r=zAt-$At+(t>>pU),r=this.index[r],r+=t>>gg&qAt,r=this.index[r],r=(r<<y6)+(t&w6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),IY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",YAt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var d5=0;d5<IY.length;d5++)YAt[IY.charCodeAt(d5)]=d5;var JAt=1,N6=2,E6=3,FY=4,OY=5,ZAt=7,DY=8,C6=9,_6=10,PY=11,RY=12,LY=13,MY=14,S6=15,eht=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},tht=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},rht=WAt(OAt),Lu="×",k6="÷",nht=function(e){return rht.get(e)},aht=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],o=t[r];if(s===N6&&o===E6)return Lu;if(s===N6||s===E6||s===FY||o===N6||o===E6||o===FY)return k6;if(s===DY&&[DY,C6,PY,RY].indexOf(o)!==-1||(s===PY||s===C6)&&(o===C6||o===_6)||(s===RY||s===_6)&&o===_6||o===LY||o===OY||o===ZAt||s===JAt)return Lu;if(s===LY&&o===MY){for(;a===OY;)a=t[--n];if(a===MY)return Lu}if(s===S6&&o===S6){for(var l=0;a===S6;)l++,a=t[--n];if(l%2===0)return Lu}return k6},sht=function(e){var t=eht(e),r=t.length,n=0,a=0,s=t.map(nht);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=Lu;n<r&&(o=aht(t,s,++n))===Lu;);if(o!==Lu||n===r){var l=tht.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},iht=function(e){for(var t=sht(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},oht=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},lht=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=Nj(n.data).map(function(c){return Ks(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return e.body.removeChild(t),l},cht=function(){return typeof new Image().crossOrigin<"u"},uht=function(){return typeof new XMLHttpRequest().responseType=="string"},dht=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},UY=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},fht=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var o=MD(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),QY(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",UY(c)?QY(MD(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),UY(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},MD=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},QY=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},bo={get SUPPORT_RANGE_BOUNDS(){var e=oht(document);return Object.defineProperty(bo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=bo.SUPPORT_RANGE_BOUNDS&&lht(document);return Object.defineProperty(bo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=dht(document);return Object.defineProperty(bo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?fht(document):Promise.resolve(!1);return Object.defineProperty(bo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=cht();return Object.defineProperty(bo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=uht();return Object.defineProperty(bo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(bo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(bo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},H2=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),Aht=function(e,t,r,n){var a=pht(t,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(bo.SUPPORT_RANGE_BOUNDS){var c=HY(n,o,l.length).getClientRects();if(c.length>1){var u=gU(l),d=0;u.forEach(function(h){s.push(new H2(h,Qh.fromDOMRectList(e,HY(n,d+o,h.length).getClientRects()))),d+=h.length})}else s.push(new H2(l,Qh.fromDOMRectList(e,c)))}else{var f=n.splitText(l.length);s.push(new H2(l,hht(e,n))),n=f}else bo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},hht=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=wj(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Qh.EMPTY},HY=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},gU=function(e){if(bo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return iht(e)},mht=function(e,t){if(bo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return xht(e,t)},pht=function(e,t){return t.letterSpacing!==0?gU(e):mht(e,t)},ght=[32,160,4961,65792,65793,4153,4241],xht=function(e,t){for(var r=$ut(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=Nj(o),c="";l.forEach(function(u){ght.indexOf(u)===-1?c+=Ks(u):(c.length&&n.push(c),n.push(Ks(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},vht=function(){function e(t,r,n){this.text=bht(r.data,n.textTransform),this.textBounds=Aht(t,this.text,n,r)}return e}(),bht=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(yht,wht);case 2:return e.toUpperCase();default:return e}},yht=/(^|\s|:|-|\(|\))([a-z])/g,wht=function(e,t,r){return e.length>0?t+r.toUpperCase():e},tAe=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(xA),rAe=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(xA),nAe=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,o=wj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(xA),aAe=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(xA),UD=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(xA),Nht=[{type:15,flags:0,unit:"px",number:3}],Eht=[{type:16,flags:0,number:50}],Cht=function(e){return e.width>e.height?new Qh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Qh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},_ht=function(e){var t=e.type===Sht?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},ak="checkbox",sk="radio",Sht="password",VY=707406591,xU=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=_ht(n),(a.type===ak||a.type===sk)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=Cht(a.bounds)),a.type){case ak:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Nht;break;case sk:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Eht;break}return a}return t}(xA),sAe=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(xA),iAe=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(xA),oAe=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=cAe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?U2(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):wh.TRANSPARENT,o=n.contentWindow.document.body?U2(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):wh.TRANSPARENT;a.backgroundColor=Cm(s)?Cm(o)?a.styles.backgroundColor:o:s}}catch{}return a}return t}(xA),kht=["OL","UL","MENU"],r_=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,uAe(a)&&a.data.trim().length>0)r.textNodes.push(new vht(e,a,r.styles));else if(jv(a))if(hAe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return r_(e,l,r,n)});else{var o=lAe(e,a);o.styles.isVisible()&&(jht(a,o,n)?o.flags|=4:Bht(o.styles)&&(o.flags|=2),kht.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?r_(e,a.shadowRoot,o,n):!ik(a)&&!dAe(a)&&!ok(a)&&r_(e,a,o,n))}},lAe=function(e,t){return HD(t)?new tAe(e,t):fAe(t)?new rAe(e,t):dAe(t)?new nAe(e,t):Tht(t)?new aAe(e,t):Iht(t)?new UD(e,t):Fht(t)?new xU(e,t):ok(t)?new sAe(e,t):ik(t)?new iAe(e,t):AAe(t)?new oAe(e,t):new xA(e,t)},cAe=function(e,t){var r=lAe(e,t);return r.flags|=4,r_(e,t,r,r),r},jht=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||vU(e)&&r.styles.isTransparent()},Bht=function(e){return e.isPositioned()||e.isFloating()},uAe=function(e){return e.nodeType===Node.TEXT_NODE},jv=function(e){return e.nodeType===Node.ELEMENT_NODE},QD=function(e){return jv(e)&&typeof e.style<"u"&&!n_(e)},n_=function(e){return typeof e.className=="object"},Tht=function(e){return e.tagName==="LI"},Iht=function(e){return e.tagName==="OL"},Fht=function(e){return e.tagName==="INPUT"},Oht=function(e){return e.tagName==="HTML"},dAe=function(e){return e.tagName==="svg"},vU=function(e){return e.tagName==="BODY"},fAe=function(e){return e.tagName==="CANVAS"},zY=function(e){return e.tagName==="VIDEO"},HD=function(e){return e.tagName==="IMG"},AAe=function(e){return e.tagName==="IFRAME"},$Y=function(e){return e.tagName==="STYLE"},Dht=function(e){return e.tagName==="SCRIPT"},ik=function(e){return e.tagName==="TEXTAREA"},ok=function(e){return e.tagName==="SELECT"},hAe=function(e){return e.tagName==="SLOT"},GY=function(e){return e.tagName.indexOf("-")>0},Pht=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),qY={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},KY={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Rht={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Lht={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},nv=function(e,t,r,n,a,s){return e<t||e>r?$w(e,a,s.length>0):n.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=n.values[c];return o},"")+s},mAe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},$s=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(mAe(Math.abs(e),s,n,function(o){return Ks(Math.floor(o%s)+t)})+a)},Bp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return mAe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},mv=1,V0=2,z0=4,d2=8,YA=function(e,t,r,n,a,s){if(e<-9999||e>9999)return $w(e,4,a.length>0);var o=Math.abs(e),l=a;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&ji(s,mv)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ji(s,V0)||u===1&&c===1&&ji(s,z0)&&e>100||u===1&&c>1&&ji(s,d2)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?n:"")+l},WY="十百千萬",XY="拾佰仟萬",YY="マイナス",j6="마이너스",$w=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",o=r?" ":"";switch(t){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var l=$s(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Bp(e,"〇一二三四五六七八九",a);case 6:return nv(e,1,3999,qY,3,n).toLowerCase();case 7:return nv(e,1,3999,qY,3,n);case 8:return $s(e,945,969,!1,n);case 9:return $s(e,97,122,!1,n);case 10:return $s(e,65,90,!1,n);case 11:return $s(e,1632,1641,!0,n);case 12:case 49:return nv(e,1,9999,KY,3,n);case 35:return nv(e,1,9999,KY,3,n).toLowerCase();case 13:return $s(e,2534,2543,!0,n);case 14:case 30:return $s(e,6112,6121,!0,n);case 15:return Bp(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Bp(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return YA(e,"零一二三四五六七八九",WY,"負",a,V0|z0|d2);case 47:return YA(e,"零壹貳參肆伍陸柒捌玖",XY,"負",a,mv|V0|z0|d2);case 42:return YA(e,"零一二三四五六七八九",WY,"负",a,V0|z0|d2);case 41:return YA(e,"零壹贰叁肆伍陆柒捌玖",XY,"负",a,mv|V0|z0|d2);case 26:return YA(e,"〇一二三四五六七八九","十百千万",YY,a,0);case 25:return YA(e,"零壱弐参四伍六七八九","拾百千万",YY,a,mv|V0|z0);case 31:return YA(e,"영일이삼사오육칠팔구","십백천만",j6,s,mv|V0|z0);case 33:return YA(e,"零一二三四五六七八九","十百千萬",j6,s,0);case 32:return YA(e,"零壹貳參四五六七八九","拾百千",j6,s,mv|V0|z0);case 18:return $s(e,2406,2415,!0,n);case 20:return nv(e,1,19999,Lht,3,n);case 21:return $s(e,2790,2799,!0,n);case 22:return $s(e,2662,2671,!0,n);case 22:return nv(e,1,10999,Rht,3,n);case 23:return Bp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Bp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return $s(e,3302,3311,!0,n);case 28:return Bp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Bp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return $s(e,3792,3801,!0,n);case 37:return $s(e,6160,6169,!0,n);case 38:return $s(e,4160,4169,!0,n);case 39:return $s(e,2918,2927,!0,n);case 40:return $s(e,1776,1785,!0,n);case 43:return $s(e,3046,3055,!0,n);case 44:return $s(e,3174,3183,!0,n);case 45:return $s(e,3664,3673,!0,n);case 46:return $s(e,3872,3881,!0,n);case 3:default:return $s(e,48,57,!0,n)}},pAe="data-html2canvas-ignore",JY=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Pht,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Mht(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=Hht(a).then(function(){return vl(n,void 0,void 0,function(){var d,f;return qo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Ght),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Qht(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(zht(document.doctype)+"<html></html>"),$ht(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(LD(t,2))debugger;if(fAe(t))return this.createCanvasClone(t);if(zY(t))return this.createVideoClone(t);if($Y(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return HD(r)&&(HD(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),GY(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return B6(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!jv(r)||!Dht(r)&&!r.hasAttribute(pAe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!jv(r)||!$Y(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(jv(s)&&hAe(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(uAe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&jv(t)&&(QD(t)||n_(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&QD(a)&&(this.clonedReferenceElement=a),vU(a)&&Wht(a);var c=this.counters.parse(new jY(this.context,s)),u=this.resolvePseudoContent(t,a,o,V2.BEFORE);GY(t)&&(r=!0),zY(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,V2.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||n_(t))&&!AAe(t)||r)&&B6(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(ik(t)||ok(t))&&(ik(a)||ok(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new jY(this.context,n));var c=new TAt(this.context,n),u=l.createElement("html2canvaspseudoelement");B6(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(va);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(Ub),x=g[0],v=g[1];if(x&&va(x)){var y=s.counters.getCounterValue(x.value),w=v&&va(v)?RD.parse(s.context,v.value):3;u.appendChild(l.createTextNode($w(y,w,!1)))}}else if(f.name==="counters"){var _=f.values.filter(Ub),x=_[0],O=_[1],v=_[2];if(x&&va(x)){var j=s.counters.getCounterValues(x.value),B=v&&va(v)?RD.parse(s.context,v.value):3,C=O&&O.type===0?O.value:"",k=j.map(function(R){return $w(R,B,!1)}).join(C);u.appendChild(l.createTextNode(k))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(kY(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(kY(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=VD+" "+zD;var d=a===V2.BEFORE?" "+VD:" "+zD;return n_(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),V2;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(V2||(V2={}));var Mht=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(pAe,"true"),e.body.appendChild(r),r},Uht=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Qht=function(e){return Promise.all([].slice.call(e.images,0).map(Uht))},Hht=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},Vht=["all","d","content"],B6=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);Vht.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},zht=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},$ht=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Ght=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},qht=":before",Kht=":after",VD="___html2canvas___pseudoelement_before",zD="___html2canvas___pseudoelement_after",ZY=`{
    content: "" !important;
    display: none !important;
}`,Wht=function(e){Xht(e,"."+VD+qht+ZY+`
         .`+zD+Kht+ZY)},Xht=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},gAe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Yht=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(I6(t)||t0t(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return vl(this,void 0,void 0,function(){var r,n,a,s,o=this;return qo(this,function(l){switch(l.label){case 0:return r=gAe.isSameOrigin(t),n=!T6(t)&&this._options.useCORS===!0&&bo.SUPPORT_CORS_IMAGES&&!r,a=!T6(t)&&!r&&!I6(t)&&typeof this._options.proxy=="string"&&bo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!T6(t)&&!I6(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(r0t(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,o){var l=bo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return o(h)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),Jht=/^data:image\/svg\+xml/i,Zht=/^data:image\/.*;base64,/i,e0t=/^data:image\/.*/i,t0t=function(e){return bo.SUPPORT_SVG_DRAWING||!n0t(e)},T6=function(e){return e0t.test(e)},r0t=function(e){return Zht.test(e)},I6=function(e){return e.substr(0,4)==="blob"},n0t=function(e){return e.substr(-3).toLowerCase()==="svg"||Jht.test(e)},er=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),av=function(e,t,r){return new er(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},f5=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=av(this.start,this.startControl,t),a=av(this.startControl,this.endControl,t),s=av(this.endControl,this.end,t),o=av(n,a,t),l=av(a,s,t),c=av(o,l,t);return r?new e(this.start,n,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Qu=function(e){return e.type===1},a0t=function(){function e(t){var r=t.styles,n=t.bounds,a=c2(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=c2(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=c2(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],m=c2(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+f)/n.width),v.push((o+x)/n.height),v.push((u+h)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,o/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,O=n.width-f,j=n.height-x,B=r.borderTopWidth,C=r.borderRightWidth,k=r.borderBottomWidth,T=r.borderLeftWidth,L=Da(r.paddingTop,t.bounds.width),R=Da(r.paddingRight,t.bounds.width),S=Da(r.paddingBottom,t.bounds.width),U=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Ja(n.left+T/3,n.top+B/3,s-T/3,o-B/3,ra.TOP_LEFT):new er(n.left+T/3,n.top+B/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Ja(n.left+w,n.top+B/3,c-C/3,u-B/3,ra.TOP_RIGHT):new er(n.left+n.width-C/3,n.top+B/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Ja(n.left+O,n.top+_,f-C/3,h-k/3,ra.BOTTOM_RIGHT):new er(n.left+n.width-C/3,n.top+n.height-k/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Ja(n.left+T/3,n.top+j,g-T/3,x-k/3,ra.BOTTOM_LEFT):new er(n.left+T/3,n.top+n.height-k/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Ja(n.left+T*2/3,n.top+B*2/3,s-T*2/3,o-B*2/3,ra.TOP_LEFT):new er(n.left+T*2/3,n.top+B*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Ja(n.left+w,n.top+B*2/3,c-C*2/3,u-B*2/3,ra.TOP_RIGHT):new er(n.left+n.width-C*2/3,n.top+B*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Ja(n.left+O,n.top+_,f-C*2/3,h-k*2/3,ra.BOTTOM_RIGHT):new er(n.left+n.width-C*2/3,n.top+n.height-k*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Ja(n.left+T*2/3,n.top+j,g-T*2/3,x-k*2/3,ra.BOTTOM_LEFT):new er(n.left+T*2/3,n.top+n.height-k*2/3),this.topLeftBorderStroke=s>0||o>0?Ja(n.left+T/2,n.top+B/2,s-T/2,o-B/2,ra.TOP_LEFT):new er(n.left+T/2,n.top+B/2),this.topRightBorderStroke=s>0||o>0?Ja(n.left+w,n.top+B/2,c-C/2,u-B/2,ra.TOP_RIGHT):new er(n.left+n.width-C/2,n.top+B/2),this.bottomRightBorderStroke=f>0||h>0?Ja(n.left+O,n.top+_,f-C/2,h-k/2,ra.BOTTOM_RIGHT):new er(n.left+n.width-C/2,n.top+n.height-k/2),this.bottomLeftBorderStroke=g>0||x>0?Ja(n.left+T/2,n.top+j,g-T/2,x-k/2,ra.BOTTOM_LEFT):new er(n.left+T/2,n.top+n.height-k/2),this.topLeftBorderBox=s>0||o>0?Ja(n.left,n.top,s,o,ra.TOP_LEFT):new er(n.left,n.top),this.topRightBorderBox=c>0||u>0?Ja(n.left+w,n.top,c,u,ra.TOP_RIGHT):new er(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Ja(n.left+O,n.top+_,f,h,ra.BOTTOM_RIGHT):new er(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Ja(n.left,n.top+j,g,x,ra.BOTTOM_LEFT):new er(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?Ja(n.left+T,n.top+B,Math.max(0,s-T),Math.max(0,o-B),ra.TOP_LEFT):new er(n.left+T,n.top+B),this.topRightPaddingBox=c>0||u>0?Ja(n.left+Math.min(w,n.width-C),n.top+B,w>n.width+C?0:Math.max(0,c-C),Math.max(0,u-B),ra.TOP_RIGHT):new er(n.left+n.width-C,n.top+B),this.bottomRightPaddingBox=f>0||h>0?Ja(n.left+Math.min(O,n.width-T),n.top+Math.min(_,n.height-k),Math.max(0,f-C),Math.max(0,h-k),ra.BOTTOM_RIGHT):new er(n.left+n.width-C,n.top+n.height-k),this.bottomLeftPaddingBox=g>0||x>0?Ja(n.left+T,n.top+Math.min(j,n.height-k),Math.max(0,g-T),Math.max(0,x-k),ra.BOTTOM_LEFT):new er(n.left+T,n.top+n.height-k),this.topLeftContentBox=s>0||o>0?Ja(n.left+T+U,n.top+B+L,Math.max(0,s-(T+U)),Math.max(0,o-(B+L)),ra.TOP_LEFT):new er(n.left+T+U,n.top+B+L),this.topRightContentBox=c>0||u>0?Ja(n.left+Math.min(w,n.width+T+U),n.top+B+L,w>n.width+T+U?0:c-T+U,u-(B+L),ra.TOP_RIGHT):new er(n.left+n.width-(C+R),n.top+B+L),this.bottomRightContentBox=f>0||h>0?Ja(n.left+Math.min(O,n.width-(T+U)),n.top+Math.min(_,n.height+B+L),Math.max(0,f-(C+R)),h-(k+S),ra.BOTTOM_RIGHT):new er(n.left+n.width-(C+R),n.top+n.height-(k+S)),this.bottomLeftContentBox=g>0||x>0?Ja(n.left+T+U,n.top+j,Math.max(0,g-(T+U)),x-(k+S),ra.BOTTOM_LEFT):new er(n.left+T+U,n.top+n.height-(k+S))}return e}(),ra;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ra||(ra={}));var Ja=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=e+r,u=t+n;switch(a){case ra.TOP_LEFT:return new f5(new er(e,u),new er(e,u-l),new er(c-o,t),new er(c,t));case ra.TOP_RIGHT:return new f5(new er(e,t),new er(e+o,t),new er(c,u-l),new er(c,u));case ra.BOTTOM_RIGHT:return new f5(new er(c,t),new er(c,t+l),new er(e+o,u),new er(e,u));case ra.BOTTOM_LEFT:default:return new f5(new er(c,u),new er(c-o,u),new er(e,t+l),new er(e,t))}},lk=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},s0t=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},ck=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},i0t=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),A5=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),o0t=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),l0t=function(e){return e.type===0},xAe=function(e){return e.type===1},c0t=function(e){return e.type===2},eJ=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},u0t=function(e,t,r,n,a){return e.map(function(s,o){switch(o){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},vAe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),bAe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new a0t(this.container),this.container.styles.opacity<1&&this.effects.push(new o0t(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new i0t(n,a,s))}if(this.container.styles.overflowX!==0){var o=lk(this.curves),l=ck(this.curves);eJ(o,l)?this.effects.push(new A5(o,6)):(this.effects.push(new A5(o,2)),this.effects.push(new A5(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!xAe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=lk(n.curves),l=ck(n.curves);eJ(o,l)||a.unshift(new A5(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ji(c.target,t)})},e}(),$D=function(e,t,r,n){e.container.elements.forEach(function(a){var s=ji(a.flags,4),o=ji(a.flags,2),l=new bAe(a,e);ji(a.styles.display,2048)&&n.push(l);var c=ji(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:t,d=new vAe(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);$D(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),$D(l,t,r,c);ji(a.flags,8)&&yAe(a,c)})},yAe=function(e,t){for(var r=e instanceof UD?e.start:1,n=e instanceof UD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof aAe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=$w(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},d0t=function(e){var t=new bAe(e,null),r=new vAe(t),n=[];return $D(t,r,r,n),yAe(t.container,n),r},tJ=function(e,t){switch(t){case 0:return qu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return qu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return qu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return qu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},f0t=function(e,t){switch(t){case 0:return qu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return qu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return qu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return qu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},A0t=function(e,t){switch(t){case 0:return qu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return qu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return qu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return qu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},h0t=function(e,t){switch(t){case 0:return h5(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return h5(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return h5(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return h5(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},h5=function(e,t){var r=[];return Qu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Qu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},qu=function(e,t,r,n){var a=[];return Qu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Qu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Qu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Qu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},wAe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},uk=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),o=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+o))},m0t=function(e,t){return e===0?t.bounds:e===2?uk(t):wAe(t)},p0t=function(e,t){return e===0?t.bounds:e===2?uk(t):wAe(t)},F6=function(e,t,r){var n=m0t(pv(e.styles.backgroundOrigin,t),e),a=p0t(pv(e.styles.backgroundClip,t),e),s=g0t(pv(e.styles.backgroundSize,t),r,n),o=s[0],l=s[1],c=c2(pv(e.styles.backgroundPosition,t),n.width-o,n.height-l),u=x0t(pv(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},sv=function(e){return va(e)&&e.value===Zv.AUTO},m5=function(e){return typeof e=="number"},g0t=function(e,t,r){var n=t[0],a=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(mi(o)&&l&&mi(l))return[Da(o,r.width),Da(l,r.height)];var c=m5(s);if(va(o)&&(o.value===Zv.CONTAIN||o.value===Zv.COVER)){if(m5(s)){var u=r.width/r.height;return u<s!=(o.value===Zv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=m5(n),f=m5(a),h=d||f;if(sv(o)&&(!l||sv(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?n:a*s,g=f?a:n/s;return[m,g]}var x=d?n:r.width,v=f?a:r.height;return[x,v]}if(c){var y=0,w=0;return mi(o)?y=Da(o,r.width):mi(l)&&(w=Da(l,r.height)),sv(o)?y=w*s:(!l||sv(l))&&(w=y/s),[y,w]}var _=null,O=null;if(mi(o)?_=Da(o,r.width):l&&mi(l)&&(O=Da(l,r.height)),_!==null&&(!l||sv(l))&&(O=d&&f?_/n*a:r.height),O!==null&&sv(o)&&(_=d&&f?O/a*n:r.width),_!==null&&O!==null)return[_,O];throw new Error("Unable to calculate background-size for element")},pv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},x0t=function(e,t,r,n,a){var s=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new er(Math.round(n.left),Math.round(n.top+o)),new er(Math.round(n.left+n.width),Math.round(n.top+o)),new er(Math.round(n.left+n.width),Math.round(c+n.top+o)),new er(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new er(Math.round(n.left+s),Math.round(n.top)),new er(Math.round(n.left+s+l),Math.round(n.top)),new er(Math.round(n.left+s+l),Math.round(n.height+n.top)),new er(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new er(Math.round(n.left+s),Math.round(n.top+o)),new er(Math.round(n.left+s+l),Math.round(n.top+o)),new er(Math.round(n.left+s+l),Math.round(n.top+o+c)),new er(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new er(Math.round(a.left),Math.round(a.top)),new er(Math.round(a.left+a.width),Math.round(a.top)),new er(Math.round(a.left+a.width),Math.round(a.height+a.top)),new er(Math.round(a.left),Math.round(a.height+a.top))]}},v0t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",rJ="Hidden Text",b0t=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=v0t,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(rJ)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(rJ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),NAe=function(){function e(t,r){this.context=t,this.options=r}return e}(),y0t=1e4,w0t=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new b0t(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),c0t(r)&&(this.ctx.globalAlpha=r.opacity),l0t(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),xAe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return vl(this,void 0,void 0,function(){var n;return qo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return vl(this,void 0,void 0,function(){return qo(this,function(n){switch(n.label){case 0:if(ji(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=gU(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=S0t(r.fontFamily).join(", "),s=MN(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return vl(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,h=this;return qo(this,function(m){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Gi(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Gi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Gi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Gi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=uk(r),o=ck(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return vl(this,void 0,void 0,function(){var n,a,s,o,l,c,w,w,u,d,f,h,O,m,g,j,x,v,y,w,_,O,j;return qo(this,function(B){switch(B.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,B.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:B.sent(),B.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof tAe))return[3,8];B.label=5;case 5:return B.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=B.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return B.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof rAe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof nAe))return[3,12];B.label=9;case 9:return B.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=B.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return B.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof oAe&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=B.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),B.label=14;case 14:if(n instanceof xU&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===ak?n.checked&&(this.ctx.save(),this.path([new er(n.bounds.left+f*.39363,n.bounds.top+f*.79),new er(n.bounds.left+f*.16,n.bounds.top+f*.5549),new er(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new er(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new er(n.bounds.left+f*.72983,n.bounds.top+f*.23),new er(n.bounds.left+f*.84,n.bounds.top+f*.34085),new er(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Gi(VY),this.ctx.fill(),this.ctx.restore()):n.type===sk&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Gi(VY),this.ctx.fill(),this.ctx.restore())),N0t(n)&&n.value.length){switch(h=this.createFontStyle(s),O=h[0],m=h[1],g=this.fontMetrics.getMetrics(O,m).baseline,this.ctx.font=O,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=C0t(n.styles.textAlign),j=uk(n),x=0,n.styles.textAlign){case 1:x+=j.width/2;break;case 2:x+=j.width;break}v=j.add(x,0,0,-j.height/2+1),this.ctx.save(),this.path([new er(j.left,j.top),new er(j.left+j.width,j.top),new er(j.left+j.width,j.top+j.height),new er(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new H2(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ji(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,B.label=15;case 15:return B.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=B.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return B.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(O=this.createFontStyle(s)[0],this.ctx.font=O,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new Qh(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,_Y(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new H2(r.listValue,j),s.letterSpacing,_Y(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),B.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return vl(this,void 0,void 0,function(){var n,a,y,s,o,y,l,c,y,u,d,y,f,h,y,m,g,y,x,v,y;return qo(this,function(w){switch(w.label){case 0:if(ji(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,o=r.nonInlineLevel,w.label=7;case 7:return s<o.length?(y=o[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,w.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,w.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=Qu(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),Qu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return vl(this,void 0,void 0,function(){var n,a,s,o,l,c;return qo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,m,L,z,W,U,Q,k,g,L,z,W,U,Q,x,v,y,w,_,O,j,B,C,k,T,L,R,S,U,Q,X,z,W,G,Y,K,H,F,D,q,J;return qo(this,function(te){switch(te.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=te.sent(),[3,4];case 3:return te.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(m=F6(r,n,[f.width,f.height,f.width/f.height]),L=m[0],z=m[1],W=m[2],U=m[3],Q=m[4],k=s.ctx.createPattern(s.resizeImage(f,U,Q),"repeat"),s.renderRepeat(L,k,z,W)),[3,6];case 5:lft(d)?(g=F6(r,n,[null,null,null]),L=g[0],z=g[1],W=g[2],U=g[3],Q=g[4],x=nft(d.angle,U,Q),v=x[0],y=x[1],w=x[2],_=x[3],O=x[4],j=document.createElement("canvas"),j.width=U,j.height=Q,B=j.getContext("2d"),C=B.createLinearGradient(y,_,w,O),EY(d.stops,v).forEach(function(ne){return C.addColorStop(ne.stop,Gi(ne.color))}),B.fillStyle=C,B.fillRect(0,0,U,Q),U>0&&Q>0&&(k=s.ctx.createPattern(j,"repeat"),s.renderRepeat(L,k,z,W))):cft(d)&&(T=F6(r,n,[null,null,null]),L=T[0],R=T[1],S=T[2],U=T[3],Q=T[4],X=d.position.length===0?[hU]:d.position,z=Da(X[0],U),W=Da(X[X.length-1],Q),G=aft(d,z,W,U,Q),Y=G[0],K=G[1],Y>0&&K>0&&(H=s.ctx.createRadialGradient(R+z,S+W,0,R+z,S+W,Y),EY(d.stops,Y*2).forEach(function(ne){return H.addColorStop(ne.stop,Gi(ne.color))}),s.path(L),s.ctx.fillStyle=H,Y!==K?(F=r.bounds.left+.5*r.bounds.width,D=r.bounds.top+.5*r.bounds.height,q=K/Y,J=1/q,s.ctx.save(),s.ctx.translate(F,D),s.ctx.transform(1,0,0,q,0,0),s.ctx.translate(-F,-D),s.ctx.fillRect(R,J*(S-D)+D,U,Q*J),s.ctx.restore()):s.ctx.fill())),te.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return vl(this,void 0,void 0,function(){return qo(this,function(s){return this.path(tJ(a,n)),this.ctx.fillStyle=Gi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return vl(this,void 0,void 0,function(){var o,l;return qo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=f0t(s,a),this.path(o),this.ctx.fillStyle=Gi(r),this.ctx.fill(),l=A0t(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return vl(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return qo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!Cm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=E0t(pv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Cm(n.backgroundColor)||(this.ctx.fillStyle=Gi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=lk(r.curves),x=m.inset?0:y0t,v=u0t(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Gi(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Gi(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!Cm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return vl(this,void 0,void 0,function(){var l,c,u,d,f,h,m,g,x,v,y,w,_,O,j,B,j,B;return qo(this,function(C){return this.ctx.save(),l=h0t(s,a),c=tJ(s,a),o===2&&(this.path(c),this.ctx.clip()),Qu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Qu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?m=Math.abs(u-f):m=Math.abs(d-h),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,o===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(w=Math.floor((m+x)/(g+x)),_=(m-w*g)/(w-1),O=(m-(w+1)*g)/w,x=O<=0||Math.abs(x-_)<Math.abs(x-O)?_:O),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Gi(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Qu(c[0])&&(j=c[3],B=c[0],this.ctx.beginPath(),this.formatPath([new er(j.end.x,j.end.y),new er(B.start.x,B.start.y)]),this.ctx.stroke()),Qu(c[1])&&(j=c[1],B=c[2],this.ctx.beginPath(),this.formatPath([new er(j.end.x,j.end.y),new er(B.start.x,B.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return vl(this,void 0,void 0,function(){var n;return qo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=d0t(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(NAe),N0t=function(e){return e instanceof iAe||e instanceof sAe?!0:e instanceof xU&&e.type!==sk&&e.type!==ak},E0t=function(e,t){switch(e){case 0:return lk(t);case 2:return s0t(t);case 1:default:return ck(t)}},C0t=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},_0t=["-apple-system","system-ui"],S0t=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return _0t.indexOf(t)===-1}):e},k0t=function(e){nf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return vl(this,void 0,void 0,function(){var n,a;return qo(this,function(s){switch(s.label){case 0:return n=MD(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,j0t(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(NAe),j0t=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},B0t=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,qC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,qC([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,qC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,qC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),T0t=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new B0t({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Yht(this,t)}return e.instanceCount=1,e}(),GD=function(e,t){return t===void 0&&(t={}),I0t(e,t)};typeof window<"u"&&gAe.setContext(window);var I0t=function(e,t){return vl(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_,O,j,C,B,C,k,T,L,R,S,U,Q,X,z,W,G,Y,K,H,F,D,q;return qo(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(k=t.allowTaint)!==null&&k!==void 0?k:!1,imageTimeout:(T=t.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},s=ED({logging:(R=t.logging)!==null&&R!==void 0?R:!0,cache:t.cache},a),o={windowWidth:(S=t.windowWidth)!==null&&S!==void 0?S:n.innerWidth,windowHeight:(U=t.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(Q=t.scrollX)!==null&&Q!==void 0?Q:n.pageXOffset,scrollY:(X=t.scrollY)!==null&&X!==void 0?X:n.pageYOffset},l=new Qh(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new T0t(s,l),u=(z=t.foreignObjectRendering)!==null&&z!==void 0?z:!1,d={allowTaint:(W=t.allowTaint)!==null&&W!==void 0?W:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new JY(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=J.sent(),g=vU(h)||Oht(h)?uut(h.ownerDocument):wj(c,h),x=g.width,v=g.height,y=g.left,w=g.top,_=F0t(c,h,t.backgroundColor),O={canvas:t.canvas,backgroundColor:_,scale:(Y=(G=t.scale)!==null&&G!==void 0?G:n.devicePixelRatio)!==null&&Y!==void 0?Y:1,x:((K=t.x)!==null&&K!==void 0?K:0)+y,y:((H=t.y)!==null&&H!==void 0?H:0)+w,width:(F=t.width)!==null&&F!==void 0?F:Math.ceil(x),height:(D=t.height)!==null&&D!==void 0?D:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),C=new k0t(c,O),[4,C.render(h)]):[3,3];case 2:return j=J.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),B=cAe(c,h),_===B.styles.backgroundColor&&(B.styles.backgroundColor=wh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),C=new w0t(c,O),[4,C.render(B)];case 4:j=J.sent(),J.label=5;case 5:return(!((q=t.removeContainer)!==null&&q!==void 0)||q)&&(JY.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},F0t=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?U2(e,getComputedStyle(n.documentElement).backgroundColor):wh.TRANSPARENT,s=n.body?U2(e,getComputedStyle(n.body).backgroundColor):wh.TRANSPARENT,o=typeof r=="string"?U2(e,r):r===null?wh.TRANSPARENT:4294967295;return t===n.documentElement?Cm(a)?Cm(s)?o:s:a:o};const O0t=Object.freeze(Object.defineProperty({__proto__:null,default:GD},Symbol.toStringTag,{value:"Module"})),D0t=e=>{const[t,r]=N.useState(!1),[n,a]=N.useState(null);return N.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const o=document.createElement("script");o.id=s,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:n}},EAe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],P0t=["Mecánica Industrial","Mecánica Automotriz"],R0t=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:EAe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),nJ=({empresas:e,isLoaded:t,route:r})=>{const n=N.useRef(null),a=N.useRef(null),s=N.useRef([]),o=N.useRef(null),l=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return N.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),o.current||(o.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],o.current.setMap(null),r?(o.current.setMap(a.current),o.current.setDirections(r)):l.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[l,t,r]),i.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[i.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:i.jsx("div",{className:"text-center p-6",children:i.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},L0t=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+l,u=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return i.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[i.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),i.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var m,g,x;return i.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&i.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&i.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[i.jsx("span",{className:"text-lg",children:"🚌"}),i.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),i.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[i.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),i.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),i.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),i.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&i.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},aJ=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,M0t=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(dM,{children:[i.jsx(z4,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>i.jsx(Um,{fill:t[n%t.length]},`cell-${n}`))}),i.jsx(uh,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(Iw,{data:e.porSupervisor,layout:"vertical",children:[i.jsx(Tw,{strokeDasharray:"3 3"}),i.jsx(Dg,{type:"number"}),i.jsx(Pg,{type:"category",dataKey:"name",width:150}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(Iw,{data:e.porComuna,children:[i.jsx(Tw,{strokeDasharray:"3 3"}),i.jsx(Dg,{dataKey:"name"}),i.jsx(Pg,{}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),i.jsx(dh,{width:"100%",height:300,children:i.jsxs(bKe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[i.jsx(Poe,{}),i.jsx(V4,{dataKey:"subject"}),i.jsx(Q4,{angle:30,domain:[0,5]}),i.jsx(aM,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),i.jsx(uh,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),i.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:i.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>i.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[i.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),i.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},U0t=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[a,s]=N.useState("list"),[o,l]=N.useState(null),[c,u]=N.useState(!0),[d,f]=N.useState(null),[h,m]=N.useState(null),[g,x]=N.useState(null),[v,y]=N.useState([]),[w,_]=N.useState(null),[O,j]=N.useState(!1),[B,C]=N.useState("DRIVING"),[k,T]=N.useState(""),[L,R]=N.useState([]),S="AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg",{isLoaded:U,error:Q}=D0t(S);N.useEffect(()=>{u(!0);const oe=ilt(t),de=clt(n),ke=dlt(R);return u(!1),()=>{oe(),de(),ke()}},[]);const X=N.useMemo(()=>{const oe=e.reduce((Te,Se)=>{const fe=Se.area||"Sin especificar";return Te[fe]=(Te[fe]||0)+1,Te},{}),de=e.reduce((Te,Se)=>{var ye;const fe=((ye=Se.docenteSupervisor)==null?void 0:ye.nombreCompleto)||"Sin asignar";return Te[fe]=(Te[fe]||0)+1,Te},{}),ke=e.reduce((Te,Se)=>{const fe=Se.direccion.split(",").map(Le=>Le.trim()),ye=fe.length>1?fe[1]:"Desconocida";return Te[ye]=(Te[ye]||0)+1,Te},{}),ae=EAe.map(Te=>{const Se=e.flatMap(ye=>{var Le;return(Le=ye.calificaciones.find(Qe=>Qe.elemento===Te.elemento))==null?void 0:Le.score}).filter(ye=>ye!=null),fe=Se.length>0?Se.reduce((ye,Le)=>ye+Le,0)/Se.length:0;return{subject:Te.elemento.split(" ")[0],A:fe,fullMark:5}}),Oe=e.map(Te=>{const Se=Te.calificaciones.map(ye=>ye.score).filter(ye=>ye!=null),fe=Se.length>0?Se.reduce((ye,Le)=>ye+Le,0)/Se.length:0;return{...Te,promedio:fe}}).filter(Te=>Te.promedio>0).sort((Te,Se)=>Se.promedio-Te.promedio);return{porEspecialidad:Object.entries(oe).map(([Te,Se])=>({name:Te,value:Se})),porSupervisor:Object.entries(de).map(([Te,Se])=>({name:Te,value:Se})),porComuna:Object.entries(ke).map(([Te,Se])=>({name:Te,value:Se})),calificacionPorAmbito:ae,ranking:Oe}},[e]),z=async()=>{if(o)try{await olt(o),s("list"),l(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},W=async oe=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await llt(oe)},G=(oe,de)=>{l(ke=>ke?{...ke,[oe]:de}:null)},Y=async oe=>{var de;if(f(oe),(de=oe==null?void 0:oe.value)!=null&&de.place_id&&U){const ke=await aJ(oe.value.place_id);G("direccion",oe.label||""),G("coordenadas",ke)}else G("direccion",(oe==null?void 0:oe.label)||"")},K=oe=>{l(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},H=async oe=>{var de;if(m(oe),(de=oe==null?void 0:oe.value)!=null&&de.place_id&&U){const ke=await aJ(oe.value.place_id);x(ke)}},F=oe=>{y(de=>de.some(ke=>ke.id===oe.id)?de.filter(ke=>ke.id!==oe.id):[...de,oe])},D=()=>{if(!g||v.length===0||!U)return;j(!0);const oe=new window.google.maps.DirectionsService,de=v.filter(ke=>ke.coordenadas).map(ke=>({location:ke.coordenadas,stopover:!0}));oe.route({origin:g,destination:g,waypoints:de,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[B]},(ke,ae)=>{j(!1),ae===window.google.maps.DirectionsStatus.OK&&ke?_(ke):alert("No se pudo calcular la ruta: "+ae)})},q=()=>{_(null),m(null),x(null),y([]),T("")},J=async()=>{if(!k||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:k,startPoint:{label:h.label,coords:g},empresas:v.map(de=>({id:de.id,nombre:de.nombre,coordenadas:de.coordenadas})),travelMode:B};try{await ult(oe),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const oe=document.getElementById("map-container-for-pdf"),de=document.getElementById("route-details-for-pdf");if(!oe||!de)return;const ke=new Ar("p","mm","a4"),ae=ke.internal.pageSize.getWidth();ke.text(`Ruta de Supervisión: ${k||"Sin nombre"}`,10,15),ke.setFontSize(10),ke.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Te=(await GD(oe,{useCORS:!0})).toDataURL("image/png");ke.addImage(Te,"PNG",10,30,ae-20,100);const fe=(await GD(de)).toDataURL("image/png"),ye=ke.getImageProperties(fe),Le=ye.height*(ae-20)/ye.width;ke.addImage(fe,"PNG",10,135,ae-20,Le),ke.save(`ruta-${k||"supervision"}.pdf`)},ne=oe=>{m({label:oe.startPoint.label,value:null}),x(oe.startPoint.coords),y(oe.empresas),C(oe.travelMode),T(oe.nombre),s("route")},ie=async oe=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await flt(oe),alert("Ruta eliminada."))};return c?i.jsx("div",{className:"text-center p-8",children:"Cargando..."}):Q?i.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-xl shadow-md",role:"alert",children:[i.jsx("p",{className:"font-bold text-lg",children:"Error de Configuración de Google Maps"}),i.jsx("p",{className:"mt-2",children:Q.message}),i.jsxs("p",{className:"mt-4 text-sm",children:["Para solucionar este problema, por favor crea un archivo llamado ",i.jsx("code",{children:".env.local"})," en la raíz del proyecto y añade la siguiente línea:"]}),i.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded-md mt-2 text-sm",children:"VITE_GOOGLE_MAPS_API_KEY=TU_API_KEY_DE_GOOGLE_MAPS"}),i.jsxs("p",{className:"mt-2 text-sm",children:["Reemplaza ",i.jsx("code",{children:"TU_API_KEY_DE_GOOGLE_MAPS"}),' con tu clave real. Asegúrate de que la clave tenga habilitada la "Maps JavaScript API" y la "Places API" en tu consola de Google Cloud.']})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),i.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&i.jsx("button",{onClick:()=>{s("list"),f(null),l(null),q()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(Cte,{size:18})," Dashboard"]}),i.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),i.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),i.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),i.jsx("button",{onClick:()=>{l(R0t()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&i.jsx(M0t,{data:X}),a==="saved-routes"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),i.jsx("div",{className:"space-y-3",children:L.length===0?i.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):L.map(oe=>i.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:oe.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ne(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),i.jsx("button",{onClick:()=>ie(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),i.jsx("input",{type:"text",value:k,onChange:oe=>T(oe.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),i.jsx(nY,{apiKey:S,selectProps:{value:h,onChange:H,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),i.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[i.jsx("button",{onClick:()=>C("DRIVING"),className:`w-full py-2 rounded-md transition ${B==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),i.jsx("button",{onClick:()=>C("TRANSIT"),className:`w-full py-2 rounded-md transition ${B==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),i.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:v.some(de=>de.id===oe.id),onChange:()=>F(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:D,disabled:!g||v.length===0||O,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:O?"Calculando...":"Visualizar Ruta"}),i.jsx("button",{onClick:J,disabled:!k||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),i.jsx("button",{onClick:te,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),i.jsx("button",{onClick:q,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),i.jsx("div",{children:i.jsx(nJ,{empresas:v,isLoaded:U,route:w})})]}),w&&i.jsx(L0t,{route:w,travelMode:B})]}),a==="map"&&i.jsx(nJ,{empresas:e,isLoaded:U}),a==="list"&&i.jsx("div",{className:"space-y-3",children:e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var de;return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((de=oe.docenteSupervisor)==null?void 0:de.nombreCompleto)||"Ninguno"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>K(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),i.jsx("button",{onClick:()=>W(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&o&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"id"in o?"Editando Empresa":"Nueva Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Z2e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.nombre,onChange:oe=>G("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(qwe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.rut,onChange:oe=>G("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(j_,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),i.jsx("div",{className:"w-full pl-10",children:i.jsx(nY,{apiKey:S,selectProps:{value:d,onChange:Y,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(sw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.contacto,onChange:oe=>G("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(dNe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",value:o.email||"",onChange:oe=>G("email",oe.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(ro,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"number",value:o.cupos,onChange:oe=>G("cupos",parseInt(oe.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(tw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.area||"",onChange:oe=>G("area",oe.target.value),className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),P0t.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(sw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.docenteSupervisor?JSON.stringify(o.docenteSupervisor):"",onChange:oe=>{const de=oe.target.value;G("docenteSupervisor",de?JSON.parse(de):void 0)},className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>i.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),o.calificaciones.map((oe,de)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[i.jsx(WNe,{className:"w-5 h-5 text-slate-400"}),i.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),i.jsxs("select",{value:oe.score||"",onChange:ke=>{const ae=[...o.calificaciones];ae[de].score=ke.target.value?parseInt(ke.target.value):null,G("calificaciones",ae)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(ke=>i.jsx("option",{value:ke,children:ke},ke))]})]},de))]}),i.jsx("div",{className:"pt-6",children:i.jsx("button",{onClick:z,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!o.nombre||!o.rut,children:"Guardar Empresa"})})]})]})},bU="dpd_actividades",CAe="dpd_respuestas",Q0t="usuarios";function H0t(e,{includeArchived:t=!1}={}){const r=mt(st,bU),n=t?Lt(r,Jt("createdAt","desc")):Lt(r,dr("isArchived","==",!1),Jt("createdAt","desc"));return lr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));e(s)})}async function V0t(e){const t=mt(st,bU);return(await on(t,{...e,isArchived:!1,createdAt:ya(),updatedAt:ya()})).id}async function z0t(e){const t=Yt(st,bU,e);await wa(t)}function $0t(e,t){const r=mt(st,CAe),n=Lt(r,dr("activityId","==",e),Jt("createdAt","desc"));return lr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));t(s)})}async function G0t(e){const t=mt(st,CAe);return(await on(t,{...e,createdAt:ya()})).id}function q0t(e,t){const r=mt(st,Q0t),n=Lt(r,dr("profile","in",e));return lr(n,a=>{const s=a.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function _Ae(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const dk=500,sJ=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),My=ot.memo(({title:e,icon:t,right:r,children:n})=>i.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[i.jsxs("header",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),K0t=ot.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>i.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return i.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),W0t=ot.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?i.jsx("ul",{className:"space-y-2",children:e.map(s=>{const o=s.id===t;return i.jsxs("li",{children:[i.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ng,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:s.titulo})]}),i.jsx(uR,{className:"w-4 h-4 opacity-70"})]}),n(s)&&i.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):i.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(Qwe,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),O6=ot.memo(({label:e,value:t,pill:r})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):i.jsx("span",{className:"font-medium",children:t})]})),X0t=ot.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),i.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),i.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:i.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),Y0t=ot.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=N.useCallback(o=>r(e.id,o.target.value),[e.id,r]),s=N.useCallback(()=>n(e.id),[e.id,n]);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(o=>o.id===e.id)+1}`}),i.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:i.jsx(Va,{className:"w-4 h-4"})})]})}),J0t=ot.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=N.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=N.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),o=N.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),l=N.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=N.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:h}:m)})},[e.id,e.opciones,n]),u=N.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=N.useCallback(()=>r(e.id),[e.id,r]);return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),i.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:i.jsx(Va,{className:"w-4 h-4"})})]}),i.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"text-sm",children:"Máx. palabras"}),i.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||dk,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir selección múltiple"]}),e.opciones.map(f=>i.jsx(Y0t,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),i.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),Z0t=ot.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const n=N.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||dk} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[_Ae(c)," / ",e.maxPalabras||dk," palabras"]})]})}const a=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return i.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),i.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),emt=({currentUser:e})=>{var F;const[t,r]=N.useState("responder"),[n,a]=N.useState([]),[s,o]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState(sJ()),f=N.useCallback(D=>d(q=>({...q,...D})),[]),[h,m]=N.useState([]),[g,x]=N.useState({}),[v,y]=N.useState([]),w=yH.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);N.useEffect(()=>{const D=H0t(q=>{a(q),o(J=>{var te;return J||(((te=q[0])==null?void 0:te.id)??"")})});return()=>D()},[]),N.useEffect(()=>{const D=q0t(["PROFESORADO","SUBDIRECCION"],q=>{m(q),d(J=>{if(J.creadorId)return J;const te=q.find(ne=>ne.id===(e==null?void 0:e.uid));return te?{...J,creadorId:te.id,creadorNombre:te.nombre,creadorPerfil:te.profile||J.creadorPerfil}:J})});return()=>D()},[e]),N.useEffect(()=>{if(!s)return;const D=$0t(s,y);return()=>D()},[s]);const _=N.useMemo(()=>n.find(D=>D.id===s),[n,s]);N.useMemo(()=>rh[u.dimension]||[],[u.dimension]),N.useEffect(()=>{d(D=>{const q=rh[D.dimension]||[],J=q.includes(D.subdimension)?D.subdimension:q[0]||"";return J===D.subdimension?D:{...D,subdimension:J}})},[u.dimension]);const O=N.useCallback(()=>{const D={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:dk};d(q=>({...q,preguntas:[...q.preguntas,D]}))},[]),j=N.useCallback(()=>{const D={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(q=>({...q,preguntas:[...q.preguntas,D]}))},[]),B=N.useCallback((D,q)=>{d(J=>({...J,preguntas:J.preguntas.map(te=>te.id===D?{...te,...q}:te)}))},[]),C=N.useCallback(D=>{d(q=>({...q,preguntas:q.preguntas.filter(J=>J.id!==D)}))},[]),[k,T]=N.useState(!1),L=N.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){T(!0);try{const q=(await MYe(u.aiTema,u.aiCantidad)).map(J=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:J.enunciado,opciones:J.opciones.slice(0,5).map(te=>({id:crypto.randomUUID(),text:te})),multiple:!0}));d(J=>({...J,preguntas:[...J.preguntas,...q]}))}finally{T(!1)}}},[u.aiTema,u.aiCantidad]),[R,S]=N.useState([]);N.useEffect(()=>{(async()=>{var J;if(!_)return;const q=[];for(const te of v)if(te.respuestas)for(const[ne,ie]of Object.entries(te.respuestas)){const oe=_.preguntas.find(ke=>ke.id===ne);if(!oe||oe.tipo!=="abierta")continue;const de=ie;de.tipo==="abierta"&&((J=de.valorTexto)!=null&&J.trim())&&q.push(de.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",q.length),q.length>0)try{const te=await UYe(q,30);console.log("Keywords generadas:",te),S(te)}catch(te){console.error("Error al extraer keywords:",te),S([])}else S([])})()},[_,v]);const U=N.useMemo(()=>{if(!_)return{};const D={};for(const q of _.preguntas)q.tipo==="seleccion_multiple"&&(D[q.id]={},(q.opciones||[]).forEach(J=>D[q.id][J]=0));for(const q of v)for(const[J,te]of Object.entries(q.respuestas||{})){const ne=te;if((ne==null?void 0:ne.tipo)==="seleccion_multiple")for(const ie of ne.seleccionados||[])D[J]||(D[J]={}),D[J][ie]=(D[J][ie]||0)+1}return D},[_,v]),Q=N.useCallback(D=>D.map(q=>q.tipo==="abierta"?q:{...q,opciones:q.opciones.map(J=>J.text)}),[]),X=N.useCallback(()=>d(sJ()),[]),z=N.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const D={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:Q(u.preguntas)},q=await V0t(D);X(),o(q),r("responder")},[u,Q,X]),W=N.useCallback(async(D,q)=>{var te;if(window.confirm(`¿Eliminar "${q}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await z0t(D),s===D){const ne=n.filter(ie=>ie.id!==D);o(((te=ne[0])==null?void 0:te.id)||""),ne.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),G=N.useCallback(async()=>{if(!_||!v.length)return;const D=new Ar("p","mm","a4"),q=20;let J=q;D.setFontSize(20),D.text(`Informe: ${_.titulo}`,q,J),J+=10,D.setFontSize(12),D.text(`Dimensión: ${_.dimension}`,q,J+=10),D.text(`Subdimensión: ${_.subdimension}`,q,J+=7),D.text(`Creador: ${_.creadorNombre} (${_.creadorPerfil})`,q,J+=7),D.text(`Total de respuestas: ${v.length}`,q,J+=7),J+=10;for(const te of _.preguntas){if(J>250&&(D.addPage(),J=q),D.setFontSize(14),D.text(`Pregunta: ${te.enunciado}`,q,J+=10),J+=5,D.setFontSize(12),te.tipo==="seleccion_multiple"){const ne=U[te.id]||{},ie=v.length;Object.entries(ne).forEach(([oe,de])=>{const ke=ie>0?Math.round(de/ie*100):0;D.text(`${oe}: ${de} respuestas (${ke}%)`,q+5,J+=7)})}else{D.text("Respuestas:",q,J+=7);for(const ne of v){const ie=ne.respuestas[te.id];if((ie==null?void 0:ie.tipo)==="abierta"&&ie.valorTexto){J>250&&(D.addPage(),J=q),D.text(`${ne.userNombre}:`,q+5,J+=7);const oe=D.splitTextToSize(ie.valorTexto,170);D.text(oe,q+10,J+=7),J+=oe.length*7}}}J+=10}if(R.length>0){J>250&&(D.addPage(),J=q),D.setFontSize(14),D.text("Conceptos clave detectados:",q,J+=10),D.setFontSize(12);const te=R.map(ie=>`${ie.keyword} (${Math.round(ie.score*100)}%)`).join(", "),ne=D.splitTextToSize(te,170);D.text(ne,q,J+=7)}D.save(`informe_${_.titulo.replace(/\s+/g,"_")}.pdf`)},[_,v,U,R]),Y=N.useCallback(D=>{const q=e==null?void 0:e.isAdmin,J=D.creadorId===(e==null?void 0:e.uid);return w&&(q||J)},[e,w]),K=N.useCallback((D,q)=>{x(J=>({...J,[D.id]:D.tipo==="abierta"?{tipo:"abierta",valorTexto:q}:{tipo:"seleccion_multiple",seleccionados:q}}))},[]),H=N.useCallback(async()=>{if(_){for(const D of _.preguntas){const q=g[D.id];if(q&&D.tipo==="abierta"&&D.maxPalabras){const J=_Ae(q.valorTexto||"");if(J>D.maxPalabras)return alert(`La respuesta a "${D.enunciado}" supera el máximo de ${D.maxPalabras} palabras (${J}).`)}}await G0t({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[_,g,e]);return i.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(AR,{className:"w-7 h-7 text-indigo-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),i.jsx(K0t,{value:t,onChange:r,canCreate:w})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:i.jsx(My,{title:"Actividades",icon:i.jsx(Ng,{className:"w-5 h-5 text-indigo-600"}),children:i.jsx(W0t,{items:n,selectedId:s,onSelect:D=>{o(D),r("responder")},canDelete:Y,onDelete:W})})}),i.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&i.jsxs(My,{title:"Nueva actividad / sesión",icon:i.jsx(jH,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:z,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Yc,{className:"w-4 h-4"}),"Guardar"]}),children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Título"}),i.jsx("input",{value:u.titulo,onChange:D=>f({titulo:D.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),i.jsx("select",{value:u.dimension,onChange:D=>f({dimension:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(rh).map(D=>i.jsx("option",{value:D,children:D},D))}),i.jsx("select",{value:u.subdimension,onChange:D=>f({subdimension:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(rh[u.dimension]||[]).map(D=>i.jsx("option",{value:D,children:D},D))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),i.jsx("select",{value:u.creadorPerfil,onChange:D=>f({creadorPerfil:D.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:yH.map(D=>i.jsx("option",{value:D,children:D},D))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),i.jsxs("select",{value:u.creadorId,onChange:D=>{const q=D.target.value,J=h.find(te=>te.id===q);f({creadorId:q,creadorNombre:(J==null?void 0:J.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[i.jsx("option",{value:"",children:"Seleccione…"}),h.filter(D=>D.profile===u.creadorPerfil).map(D=>i.jsx("option",{value:D.id,children:D.nombre},D.id))]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[i.jsx(_te,{className:"w-4 h-4"})," Preguntas"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsxs("button",{onClick:O,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(So,{className:"w-4 h-4"})," Abierta"]}),i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(So,{className:"w-4 h-4"})," Selección múltiple"]}),i.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[i.jsx(dEe,{className:"w-4 h-4"})," IA"]}),i.jsx("input",{value:u.aiTema,onChange:D=>f({aiTema:D.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),i.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:D=>f({aiCantidad:parseInt(D.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),i.jsxs("button",{onClick:L,disabled:k||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[i.jsx(ng,{className:"w-4 h-4"}),k?"Generando…":"Generar con IA"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((D,q)=>i.jsx(J0t,{q:D,index:q,onRemove:C,onPatch:B},D.id)),u.preguntas.length===0&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(Ha,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&i.jsx(My,{title:`Responder: ${_.titulo}`,icon:i.jsx(ro,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:H,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Yc,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[i.jsx(O6,{pill:!0,label:"Dimensión",value:_.dimension}),i.jsx(O6,{pill:!0,label:"Subdimensión",value:_.subdimension}),i.jsx(O6,{pill:!0,label:"Creador",value:`${_.creadorNombre} • ${_.creadorPerfil}`})]}),_.preguntas.map(D=>i.jsx(Z0t,{q:D,respuestas:g,onChange:K},D.id))]})}),t==="respuestas_individuales"&&_&&i.jsx(My,{title:`Respuestas individuales: ${_.titulo}`,icon:i.jsx(ro,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:G,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(jh,{className:"w-4 h-4"}),"Descargar informe"]}),i.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(qc,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:i.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[i.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[i.jsx(Ay,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(D=>{var q;return i.jsxs("button",{onClick:()=>c(D.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===D.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:i.jsx(Ay,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("span",{className:"font-medium",children:D.userNombre})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[i.jsx(oc,{className:"w-3.5 h-3.5"}),new Date(((q=D.createdAt)==null?void 0:q.seconds)*1e3).toLocaleDateString()]})]},D.userId)}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Ay,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),i.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[i.jsx(jH,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",i.jsx("span",{className:"text-indigo-600",children:(F=v.find(D=>D.userId===l))==null?void 0:F.userNombre})]}),i.jsx("div",{className:"space-y-6",children:_.preguntas.map(D=>{var te;const q=v.find(ne=>ne.userId===l),J=(te=q==null?void 0:q.respuestas)==null?void 0:te[D.id];return console.log("Respuesta encontrada:",{preguntaId:D.id,tipo:D.tipo,respuesta:J}),i.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:D.tipo==="abierta"?i.jsx(BH,{className:"w-5 h-5 text-indigo-600"}):i.jsx(Rv,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900",children:D.enunciado}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:D.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),D.tipo==="abierta"?(J==null?void 0:J.tipo)==="abierta"&&J.valorTexto?i.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:J.valorTexto})}):i.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):i.jsxs("div",{className:"space-y-2 mt-3",children:[(D.opciones||[]).map(ne=>{const oe=((J==null?void 0:J.tipo)==="seleccion_multiple"?J.seleccionados||[]:[]).includes(ne.text);return i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${oe?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[i.jsx("div",{className:"flex-shrink-0",children:oe?i.jsx(Ha,{className:"w-4 h-4 text-indigo-600"}):i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),i.jsx("span",{className:"text-sm",children:typeof ne=="string"?ne:ne.text})]},typeof ne=="string"?ne:ne.id)}),!J&&i.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},D.id)})})]}):i.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&i.jsxs(My,{title:`Dashboard: ${_.titulo}`,icon:i.jsx(ew,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(Ay,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),Y(_)&&i.jsxs("button",{onClick:()=>W(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[i.jsx(Va,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:G,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(jh,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(Ay,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),i.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(Rv,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),i.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(Eg,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),i.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:i.jsx(oc,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),i.jsx("p",{className:"text-sm font-medium",children:(()=>{const D=_.createdAt,q=D!=null&&D.toDate?D.toDate():D!=null&&D.seconds?new Date(D.seconds*1e3):D?new Date(D):null;return q?q.toLocaleDateString():"No disponible"})()})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(y2,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),i.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(D=>D.tipo==="seleccion_multiple").map(D=>i.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[i.jsx("p",{className:"font-medium mb-3 text-slate-700",children:D.enunciado}),Object.entries(U[D.id]||{}).map(([q,J])=>i.jsx(X0t,{label:q,value:J},q)),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[i.jsx(fb,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},D.id)),_.preguntas.filter(D=>D.tipo==="seleccion_multiple").length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Rv,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(K2e,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),R.length?i.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(D=>i.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(D.score*18)}px`},children:D.keyword},D.keyword))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(BH,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var UN=e=>e.type==="checkbox",eg=e=>e instanceof Date,Nl=e=>e==null;const SAe=e=>typeof e=="object";var ei=e=>!Nl(e)&&!Array.isArray(e)&&SAe(e)&&!eg(e),tmt=e=>ei(e)&&e.target?UN(e.target)?e.target.checked:e.target.value:e,rmt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,nmt=(e,t)=>e.has(rmt(t)),amt=e=>{const t=e.constructor&&e.constructor.prototype;return ei(t)&&t.hasOwnProperty("isPrototypeOf")},yU=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Za(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(yU&&(e instanceof Blob||n))&&(r||ei(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!amt(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Za(e[a]));else return e;return t}var Ij=e=>/^\w*$/.test(e),es=e=>e===void 0,Fj=e=>Array.isArray(e)?e.filter(Boolean):[],wU=e=>Fj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ar=(e,t,r)=>{if(!t||!ei(e))return r;const n=(Ij(t)?[t]:wU(t)).reduce((a,s)=>Nl(a)?a:a[s],e);return es(n)||n===e?es(e[t])?r:e[t]:n},Vf=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=Ij(t)?[t]:wU(t),s=a.length,o=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=ei(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const iJ={BLUR:"blur",FOCUS_OUT:"focusout"},Vu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},JA={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},kAe=ot.createContext(null);kAe.displayName="HookFormContext";const smt=()=>ot.useContext(kAe);var imt=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Vu.all&&(t._proxyFormState[o]=!n||Vu.all),e[o]}});return a};const jAe=typeof window<"u"?ot.useLayoutEffect:ot.useEffect;var eA=e=>typeof e=="string",omt=(e,t,r,n,a)=>eA(e)?(n&&t.watch.add(e),ar(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),ar(r,s))):(n&&(t.watchAll=!0),r),qD=e=>Nl(e)||!SAe(e);function rm(e,t,r=new WeakSet){if(qD(e)||qD(t))return e===t;if(eg(e)&&eg(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const o=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(eg(o)&&eg(l)||ei(o)&&ei(l)||Array.isArray(o)&&Array.isArray(l)?!rm(o,l,r):o!==l)return!1}}return!0}var lmt=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},ic=e=>Array.isArray(e)?e:[e],oJ=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},bl=e=>ei(e)&&!Object.keys(e).length,NU=e=>e.type==="file",Pd=e=>typeof e=="function",fk=e=>{if(!yU)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},BAe=e=>e.type==="select-multiple",EU=e=>e.type==="radio",cmt=e=>EU(e)||UN(e),D6=e=>fk(e)&&e.isConnected;function umt(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=es(e)?n++:e[t[n++]];return e}function dmt(e){for(const t in e)if(e.hasOwnProperty(t)&&!es(e[t]))return!1;return!0}function qs(e,t){const r=Array.isArray(t)?t:Ij(t)?[t]:wU(t),n=r.length===1?e:umt(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(ei(n)&&bl(n)||Array.isArray(n)&&dmt(n))&&qs(e,r.slice(0,-1)),e}var TAe=e=>{for(const t in e)if(Pd(e[t]))return!0;return!1};function Ak(e,t={}){const r=Array.isArray(e);if(ei(e)||r)for(const n in e)Array.isArray(e[n])||ei(e[n])&&!TAe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ak(e[n],t[n])):Nl(e[n])||(t[n]=!0);return t}function IAe(e,t,r){const n=Array.isArray(e);if(ei(e)||n)for(const a in e)Array.isArray(e[a])||ei(e[a])&&!TAe(e[a])?es(t)||qD(r[a])?r[a]=Array.isArray(e[a])?Ak(e[a],[]):{...Ak(e[a])}:IAe(e[a],Nl(t)?{}:t[a],r[a]):r[a]=!rm(e[a],t[a]);return r}var Uy=(e,t)=>IAe(e,t,Ak(t));const lJ={value:!1,isValid:!1},cJ={value:!0,isValid:!0};var FAe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!es(e[0].attributes.value)?es(e[0].value)||e[0].value===""?cJ:{value:e[0].value,isValid:!0}:cJ:lJ}return lJ},OAe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>es(e)?e:t?e===""?NaN:e&&+e:r&&eA(e)?new Date(e):n?n(e):e;const uJ={isValid:!1,value:null};var DAe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,uJ):uJ;function dJ(e){const t=e.ref;return NU(t)?t.files:EU(t)?DAe(e.refs).value:BAe(t)?[...t.selectedOptions].map(({value:r})=>r):UN(t)?FAe(e.refs).value:OAe(es(t.value)?e.ref.value:t.value,e)}var fmt=(e,t,r,n)=>{const a={};for(const s of e){const o=ar(t,s);o&&Fa(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},hk=e=>e instanceof RegExp,Qy=e=>es(e)?e:hk(e)?e.source:ei(e)?hk(e.value)?e.value.source:e.value:e,Bv=e=>({isOnSubmit:!e||e===Vu.onSubmit,isOnBlur:e===Vu.onBlur,isOnChange:e===Vu.onChange,isOnAll:e===Vu.all,isOnTouch:e===Vu.onTouched});const fJ="AsyncFunction";var Amt=e=>!!e&&!!e.validate&&!!(Pd(e.validate)&&e.validate.constructor.name===fJ||ei(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===fJ)),hmt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),KD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const eb=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=ar(e,a);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(eb(l,t))break}else if(ei(l)&&eb(l,t))break}}};function AJ(e,t,r){const n=ar(e,r);if(n||Ij(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=ar(t,s),l=ar(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var mmt=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return bl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!n||Vu.all))},pmt=(e,t,r)=>!e||!t||e===t||ic(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),gmt=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,xmt=(e,t)=>!Fj(ar(e,t)).length&&qs(e,t),PAe=(e,t,r)=>{const n=ic(ar(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},a_=e=>eA(e);function hJ(e,t,r="validate"){if(a_(e)||Array.isArray(e)&&e.every(a_)||Vf(e)&&!e)return{type:r,message:a_(e)?e:"",ref:t}}var iv=e=>ei(e)&&!hk(e)?e:{value:e,message:""},WD=async(e,t,r,n,a,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,w=ar(r,x);if(!y||t.has(x))return{};const _=l?l[0]:o,O=S=>{a&&_.reportValidity&&(_.setCustomValidity(Vf(S)?"":S||""),_.reportValidity())},j={},B=EU(o),C=UN(o),k=B||C,T=(v||NU(o))&&es(o.value)&&es(w)||fk(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,L=lmt.bind(null,x,n,j),R=(S,U,Q,X=JA.maxLength,z=JA.minLength)=>{const W=S?U:Q;j[x]={type:S?X:z,message:W,ref:o,...L(S?X:z,W)}};if(s?!Array.isArray(w)||!w.length:c&&(!k&&(T||Nl(w))||Vf(w)&&!w||C&&!FAe(l).isValid||B&&!DAe(l).isValid)){const{value:S,message:U}=a_(c)?{value:!!c,message:c}:iv(c);if(S&&(j[x]={type:JA.required,message:U,ref:_,...L(JA.required,U)},!n))return O(U),j}if(!T&&(!Nl(f)||!Nl(h))){let S,U;const Q=iv(h),X=iv(f);if(!Nl(w)&&!isNaN(w)){const z=o.valueAsNumber||w&&+w;Nl(Q.value)||(S=z>Q.value),Nl(X.value)||(U=z<X.value)}else{const z=o.valueAsDate||new Date(w),W=K=>new Date(new Date().toDateString()+" "+K),G=o.type=="time",Y=o.type=="week";eA(Q.value)&&w&&(S=G?W(w)>W(Q.value):Y?w>Q.value:z>new Date(Q.value)),eA(X.value)&&w&&(U=G?W(w)<W(X.value):Y?w<X.value:z<new Date(X.value))}if((S||U)&&(R(!!S,Q.message,X.message,JA.max,JA.min),!n))return O(j[x].message),j}if((u||d)&&!T&&(eA(w)||s&&Array.isArray(w))){const S=iv(u),U=iv(d),Q=!Nl(S.value)&&w.length>+S.value,X=!Nl(U.value)&&w.length<+U.value;if((Q||X)&&(R(Q,S.message,U.message),!n))return O(j[x].message),j}if(m&&!T&&eA(w)){const{value:S,message:U}=iv(m);if(hk(S)&&!w.match(S)&&(j[x]={type:JA.pattern,message:U,ref:o,...L(JA.pattern,U)},!n))return O(U),j}if(g){if(Pd(g)){const S=await g(w,r),U=hJ(S,_);if(U&&(j[x]={...U,...L(JA.validate,U.message)},!n))return O(U.message),j}else if(ei(g)){let S={};for(const U in g){if(!bl(S)&&!n)break;const Q=hJ(await g[U](w,r),_,U);Q&&(S={...Q,...L(U,Q.message)},O(Q.message),n&&(j[x]=S))}if(!bl(S)&&(j[x]={ref:_,...S},!n))return j}}return O(!0),j};const vmt={mode:Vu.onSubmit,reValidateMode:Vu.onChange,shouldFocusError:!0};function bmt(e={}){let t={...vmt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Pd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=ei(t.defaultValues)||ei(t.values)?Za(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Za(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:oJ(),state:oJ()},m=t.criteriaMode===Vu.all,g=ue=>we=>{clearTimeout(u),u=setTimeout(ue,we)},x=async ue=>{if(!t.disabled&&(d.isValid||f.isValid||ue)){const we=t.resolver?bl((await C()).errors):await T(n,!0);we!==r.isValid&&h.state.next({isValid:we})}},v=(ue,we)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ue||Array.from(l.mount)).forEach(De=>{De&&(we?Fa(r.validatingFields,De,we):qs(r.validatingFields,De))}),h.state.next({validatingFields:r.validatingFields,isValidating:!bl(r.validatingFields)}))},y=(ue,we=[],De,He,Ye=!0,tt=!0)=>{if(He&&De&&!t.disabled){if(o.action=!0,tt&&Array.isArray(ar(n,ue))){const ft=De(ar(n,ue),He.argA,He.argB);Ye&&Fa(n,ue,ft)}if(tt&&Array.isArray(ar(r.errors,ue))){const ft=De(ar(r.errors,ue),He.argA,He.argB);Ye&&Fa(r.errors,ue,ft),xmt(r.errors,ue)}if((d.touchedFields||f.touchedFields)&&tt&&Array.isArray(ar(r.touchedFields,ue))){const ft=De(ar(r.touchedFields,ue),He.argA,He.argB);Ye&&Fa(r.touchedFields,ue,ft)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Uy(a,s)),h.state.next({name:ue,isDirty:R(ue,we),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,ue,we)},w=(ue,we)=>{Fa(r.errors,ue,we),h.state.next({errors:r.errors})},_=ue=>{r.errors=ue,h.state.next({errors:r.errors,isValid:!1})},O=(ue,we,De,He)=>{const Ye=ar(n,ue);if(Ye){const tt=ar(s,ue,es(De)?ar(a,ue):De);es(tt)||He&&He.defaultChecked||we?Fa(s,ue,we?tt:dJ(Ye._f)):Q(ue,tt),o.mount&&x()}},j=(ue,we,De,He,Ye)=>{let tt=!1,ft=!1;const $e={name:ue};if(!t.disabled){if(!De||He){(d.isDirty||f.isDirty)&&(ft=r.isDirty,r.isDirty=$e.isDirty=R(),tt=ft!==$e.isDirty);const nt=rm(ar(a,ue),we);ft=!!ar(r.dirtyFields,ue),nt?qs(r.dirtyFields,ue):Fa(r.dirtyFields,ue,!0),$e.dirtyFields=r.dirtyFields,tt=tt||(d.dirtyFields||f.dirtyFields)&&ft!==!nt}if(De){const nt=ar(r.touchedFields,ue);nt||(Fa(r.touchedFields,ue,De),$e.touchedFields=r.touchedFields,tt=tt||(d.touchedFields||f.touchedFields)&&nt!==De)}tt&&Ye&&h.state.next($e)}return tt?$e:{}},B=(ue,we,De,He)=>{const Ye=ar(r.errors,ue),tt=(d.isValid||f.isValid)&&Vf(we)&&r.isValid!==we;if(t.delayError&&De?(c=g(()=>w(ue,De)),c(t.delayError)):(clearTimeout(u),c=null,De?Fa(r.errors,ue,De):qs(r.errors,ue)),(De?!rm(Ye,De):Ye)||!bl(He)||tt){const ft={...He,...tt&&Vf(we)?{isValid:we}:{},errors:r.errors,name:ue};r={...r,...ft},h.state.next(ft)}},C=async ue=>{v(ue,!0);const we=await t.resolver(s,t.context,fmt(ue||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(ue),we},k=async ue=>{const{errors:we}=await C(ue);if(ue)for(const De of ue){const He=ar(we,De);He?Fa(r.errors,De,He):qs(r.errors,De)}else r.errors=we;return we},T=async(ue,we,De={valid:!0})=>{for(const He in ue){const Ye=ue[He];if(Ye){const{_f:tt,...ft}=Ye;if(tt){const $e=l.array.has(tt.name),nt=Ye._f&&Amt(Ye._f);nt&&d.validatingFields&&v([He],!0);const bt=await WD(Ye,l.disabled,s,m,t.shouldUseNativeValidation&&!we,$e);if(nt&&d.validatingFields&&v([He]),bt[tt.name]&&(De.valid=!1,we))break;!we&&(ar(bt,tt.name)?$e?PAe(r.errors,bt,tt.name):Fa(r.errors,tt.name,bt[tt.name]):qs(r.errors,tt.name))}!bl(ft)&&await T(ft,we,De)}}return De.valid},L=()=>{for(const ue of l.unMount){const we=ar(n,ue);we&&(we._f.refs?we._f.refs.every(De=>!D6(De)):!D6(we._f.ref))&&ne(ue)}l.unMount=new Set},R=(ue,we)=>!t.disabled&&(ue&&we&&Fa(s,ue,we),!rm(K(),a)),S=(ue,we,De)=>omt(ue,l,{...o.mount?s:es(we)?a:eA(ue)?{[ue]:we}:we},De,we),U=ue=>Fj(ar(o.mount?s:a,ue,t.shouldUnregister?ar(a,ue,[]):[])),Q=(ue,we,De={})=>{const He=ar(n,ue);let Ye=we;if(He){const tt=He._f;tt&&(!tt.disabled&&Fa(s,ue,OAe(we,tt)),Ye=fk(tt.ref)&&Nl(we)?"":we,BAe(tt.ref)?[...tt.ref.options].forEach(ft=>ft.selected=Ye.includes(ft.value)):tt.refs?UN(tt.ref)?tt.refs.forEach(ft=>{(!ft.defaultChecked||!ft.disabled)&&(Array.isArray(Ye)?ft.checked=!!Ye.find($e=>$e===ft.value):ft.checked=Ye===ft.value||!!Ye)}):tt.refs.forEach(ft=>ft.checked=ft.value===Ye):NU(tt.ref)?tt.ref.value="":(tt.ref.value=Ye,tt.ref.type||h.state.next({name:ue,values:Za(s)})))}(De.shouldDirty||De.shouldTouch)&&j(ue,Ye,De.shouldTouch,De.shouldDirty,!0),De.shouldValidate&&Y(ue)},X=(ue,we,De)=>{for(const He in we){if(!we.hasOwnProperty(He))return;const Ye=we[He],tt=ue+"."+He,ft=ar(n,tt);(l.array.has(ue)||ei(Ye)||ft&&!ft._f)&&!eg(Ye)?X(tt,Ye,De):Q(tt,Ye,De)}},z=(ue,we,De={})=>{const He=ar(n,ue),Ye=l.array.has(ue),tt=Za(we);Fa(s,ue,tt),Ye?(h.array.next({name:ue,values:Za(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&De.shouldDirty&&h.state.next({name:ue,dirtyFields:Uy(a,s),isDirty:R(ue,tt)})):He&&!He._f&&!Nl(tt)?X(ue,tt,De):Q(ue,tt,De),KD(ue,l)&&h.state.next({...r,name:ue}),h.state.next({name:o.mount?ue:void 0,values:Za(s)})},W=async ue=>{o.mount=!0;const we=ue.target;let De=we.name,He=!0;const Ye=ar(n,De),tt=nt=>{He=Number.isNaN(nt)||eg(nt)&&isNaN(nt.getTime())||rm(nt,ar(s,De,nt))},ft=Bv(t.mode),$e=Bv(t.reValidateMode);if(Ye){let nt,bt;const Bt=we.type?dJ(Ye._f):tmt(ue),xt=ue.type===iJ.BLUR||ue.type===iJ.FOCUS_OUT,xr=!hmt(Ye._f)&&!t.resolver&&!ar(r.errors,De)&&!Ye._f.deps||gmt(xt,ar(r.touchedFields,De),r.isSubmitted,$e,ft),Xt=KD(De,l,xt);Fa(s,De,Bt),xt?(!we||!we.readOnly)&&(Ye._f.onBlur&&Ye._f.onBlur(ue),c&&c(0)):Ye._f.onChange&&Ye._f.onChange(ue);const Gr=j(De,Bt,xt),wr=!bl(Gr)||Xt;if(!xt&&h.state.next({name:De,type:ue.type,values:Za(s)}),xr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?xt&&x():xt||x()),wr&&h.state.next({name:De,...Xt?{}:Gr});if(!xt&&Xt&&h.state.next({...r}),t.resolver){const{errors:Ur}=await C([De]);if(tt(Bt),He){const _n=AJ(r.errors,n,De),jr=AJ(Ur,n,_n.name||De);nt=jr.error,De=jr.name,bt=bl(Ur)}}else v([De],!0),nt=(await WD(Ye,l.disabled,s,m,t.shouldUseNativeValidation))[De],v([De]),tt(Bt),He&&(nt?bt=!1:(d.isValid||f.isValid)&&(bt=await T(n,!0)));He&&(Ye._f.deps&&Y(Ye._f.deps),B(De,bt,nt,Gr))}},G=(ue,we)=>{if(ar(r.errors,we)&&ue.focus)return ue.focus(),1},Y=async(ue,we={})=>{let De,He;const Ye=ic(ue);if(t.resolver){const tt=await k(es(ue)?ue:Ye);De=bl(tt),He=ue?!Ye.some(ft=>ar(tt,ft)):De}else ue?(He=(await Promise.all(Ye.map(async tt=>{const ft=ar(n,tt);return await T(ft&&ft._f?{[tt]:ft}:ft)}))).every(Boolean),!(!He&&!r.isValid)&&x()):He=De=await T(n);return h.state.next({...!eA(ue)||(d.isValid||f.isValid)&&De!==r.isValid?{}:{name:ue},...t.resolver||!ue?{isValid:De}:{},errors:r.errors}),we.shouldFocus&&!He&&eb(n,G,ue?Ye:l.mount),He},K=ue=>{const we={...o.mount?s:a};return es(ue)?we:eA(ue)?ar(we,ue):ue.map(De=>ar(we,De))},H=(ue,we)=>({invalid:!!ar((we||r).errors,ue),isDirty:!!ar((we||r).dirtyFields,ue),error:ar((we||r).errors,ue),isValidating:!!ar(r.validatingFields,ue),isTouched:!!ar((we||r).touchedFields,ue)}),F=ue=>{ue&&ic(ue).forEach(we=>qs(r.errors,we)),h.state.next({errors:ue?r.errors:{}})},D=(ue,we,De)=>{const He=(ar(n,ue,{_f:{}})._f||{}).ref,Ye=ar(r.errors,ue)||{},{ref:tt,message:ft,type:$e,...nt}=Ye;Fa(r.errors,ue,{...nt,...we,ref:He}),h.state.next({name:ue,errors:r.errors,isValid:!1}),De&&De.shouldFocus&&He&&He.focus&&He.focus()},q=(ue,we)=>Pd(ue)?h.state.subscribe({next:De=>"values"in De&&ue(S(void 0,we),De)}):S(ue,we,!0),J=ue=>h.state.subscribe({next:we=>{pmt(ue.name,we.name,ue.exact)&&mmt(we,ue.formState||d,ye,ue.reRenderRoot)&&ue.callback({values:{...s},...r,...we,defaultValues:a})}}).unsubscribe,te=ue=>(o.mount=!0,f={...f,...ue.formState},J({...ue,formState:f})),ne=(ue,we={})=>{for(const De of ue?ic(ue):l.mount)l.mount.delete(De),l.array.delete(De),we.keepValue||(qs(n,De),qs(s,De)),!we.keepError&&qs(r.errors,De),!we.keepDirty&&qs(r.dirtyFields,De),!we.keepTouched&&qs(r.touchedFields,De),!we.keepIsValidating&&qs(r.validatingFields,De),!t.shouldUnregister&&!we.keepDefaultValue&&qs(a,De);h.state.next({values:Za(s)}),h.state.next({...r,...we.keepDirty?{isDirty:R()}:{}}),!we.keepIsValid&&x()},ie=({disabled:ue,name:we})=>{(Vf(ue)&&o.mount||ue||l.disabled.has(we))&&(ue?l.disabled.add(we):l.disabled.delete(we))},oe=(ue,we={})=>{let De=ar(n,ue);const He=Vf(we.disabled)||Vf(t.disabled);return Fa(n,ue,{...De||{},_f:{...De&&De._f?De._f:{ref:{name:ue}},name:ue,mount:!0,...we}}),l.mount.add(ue),De?ie({disabled:Vf(we.disabled)?we.disabled:t.disabled,name:ue}):O(ue,!0,we.value),{...He?{disabled:we.disabled||t.disabled}:{},...t.progressive?{required:!!we.required,min:Qy(we.min),max:Qy(we.max),minLength:Qy(we.minLength),maxLength:Qy(we.maxLength),pattern:Qy(we.pattern)}:{},name:ue,onChange:W,onBlur:W,ref:Ye=>{if(Ye){oe(ue,we),De=ar(n,ue);const tt=es(Ye.value)&&Ye.querySelectorAll&&Ye.querySelectorAll("input,select,textarea")[0]||Ye,ft=cmt(tt),$e=De._f.refs||[];if(ft?$e.find(nt=>nt===tt):tt===De._f.ref)return;Fa(n,ue,{_f:{...De._f,...ft?{refs:[...$e.filter(D6),tt,...Array.isArray(ar(a,ue))?[{}]:[]],ref:{type:tt.type,name:ue}}:{ref:tt}}}),O(ue,!1,void 0,tt)}else De=ar(n,ue,{}),De._f&&(De._f.mount=!1),(t.shouldUnregister||we.shouldUnregister)&&!(nmt(l.array,ue)&&o.action)&&l.unMount.add(ue)}}},de=()=>t.shouldFocusError&&eb(n,G,l.mount),ke=ue=>{Vf(ue)&&(h.state.next({disabled:ue}),eb(n,(we,De)=>{const He=ar(n,De);He&&(we.disabled=He._f.disabled||ue,Array.isArray(He._f.refs)&&He._f.refs.forEach(Ye=>{Ye.disabled=He._f.disabled||ue}))},0,!1))},ae=(ue,we)=>async De=>{let He;De&&(De.preventDefault&&De.preventDefault(),De.persist&&De.persist());let Ye=Za(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:tt,values:ft}=await C();r.errors=tt,Ye=Za(ft)}else await T(n);if(l.disabled.size)for(const tt of l.disabled)qs(Ye,tt);if(qs(r.errors,"root"),bl(r.errors)){h.state.next({errors:{}});try{await ue(Ye,De)}catch(tt){He=tt}}else we&&await we({...r.errors},De),de(),setTimeout(de);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bl(r.errors)&&!He,submitCount:r.submitCount+1,errors:r.errors}),He)throw He},Oe=(ue,we={})=>{ar(n,ue)&&(es(we.defaultValue)?z(ue,Za(ar(a,ue))):(z(ue,we.defaultValue),Fa(a,ue,Za(we.defaultValue))),we.keepTouched||qs(r.touchedFields,ue),we.keepDirty||(qs(r.dirtyFields,ue),r.isDirty=we.defaultValue?R(ue,Za(ar(a,ue))):R()),we.keepError||(qs(r.errors,ue),d.isValid&&x()),h.state.next({...r}))},Te=(ue,we={})=>{const De=ue?Za(ue):a,He=Za(De),Ye=bl(ue),tt=Ye?a:He;if(we.keepDefaultValues||(a=De),!we.keepValues){if(we.keepDirtyValues){const ft=new Set([...l.mount,...Object.keys(Uy(a,s))]);for(const $e of Array.from(ft))ar(r.dirtyFields,$e)?Fa(tt,$e,ar(s,$e)):z($e,ar(tt,$e))}else{if(yU&&es(ue))for(const ft of l.mount){const $e=ar(n,ft);if($e&&$e._f){const nt=Array.isArray($e._f.refs)?$e._f.refs[0]:$e._f.ref;if(fk(nt)){const bt=nt.closest("form");if(bt){bt.reset();break}}}}if(we.keepFieldsRef)for(const ft of l.mount)z(ft,ar(tt,ft));else n={}}s=t.shouldUnregister?we.keepDefaultValues?Za(a):{}:Za(tt),h.array.next({values:{...tt}}),h.state.next({values:{...tt}})}l={mount:we.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!we.keepIsValid||!!we.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:we.keepSubmitCount?r.submitCount:0,isDirty:Ye?!1:we.keepDirty?r.isDirty:!!(we.keepDefaultValues&&!rm(ue,a)),isSubmitted:we.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ye?{}:we.keepDirtyValues?we.keepDefaultValues&&s?Uy(a,s):r.dirtyFields:we.keepDefaultValues&&ue?Uy(a,ue):we.keepDirty?r.dirtyFields:{},touchedFields:we.keepTouched?r.touchedFields:{},errors:we.keepErrors?r.errors:{},isSubmitSuccessful:we.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Se=(ue,we)=>Te(Pd(ue)?ue(s):ue,we),fe=(ue,we={})=>{const De=ar(n,ue),He=De&&De._f;if(He){const Ye=He.refs?He.refs[0]:He.ref;Ye.focus&&(Ye.focus(),we.shouldSelect&&Pd(Ye.select)&&Ye.select())}},ye=ue=>{r={...r,...ue}},Qe={control:{register:oe,unregister:ne,getFieldState:H,handleSubmit:ae,setError:D,_subscribe:J,_runSchema:C,_focusError:de,_getWatch:S,_getDirty:R,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:_,_getFieldArray:U,_reset:Te,_resetDefaultValues:()=>Pd(t.defaultValues)&&t.defaultValues().then(ue=>{Se(ue,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:ke,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(ue){o=ue},get _defaultValues(){return a},get _names(){return l},set _names(ue){l=ue},get _formState(){return r},get _options(){return t},set _options(ue){t={...t,...ue}}},subscribe:te,trigger:Y,register:oe,handleSubmit:ae,watch:q,setValue:z,getValues:K,reset:Se,resetField:Oe,clearErrors:F,unregister:ne,setError:D,setFocus:fe,getFieldState:H};return{...Qe,formControl:Qe}}var H0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},P6=(e,t,r={})=>r.shouldFocus||es(r.shouldFocus)?r.focusName||`${e}.${es(r.focusIndex)?t:r.focusIndex}.`:"",R6=(e,t)=>[...e,...ic(t)],L6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function M6(e,t,r){return[...e.slice(0,t),...ic(r),...e.slice(t)]}var U6=(e,t,r)=>Array.isArray(e)?(es(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],Q6=(e,t)=>[...ic(t),...ic(e)];function ymt(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return Fj(n).length?n:[]}var H6=(e,t)=>es(t)?[]:ymt(e,ic(t).sort((r,n)=>r-n)),V6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},mJ=(e,t,r)=>(e[t]=r,e);function wmt(e){const t=smt(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:o}=e,[l,c]=ot.useState(r._getFieldArray(n)),u=ot.useRef(r._getFieldArray(n).map(H0)),d=ot.useRef(l),f=ot.useRef(!1);d.current=l,r._names.array.add(n),ot.useMemo(()=>o&&r.register(n,o),[r,o,n]),jAe(()=>r._subjects.array.subscribe({next:({values:j,name:B})=>{if(B===n||!B){const C=ar(j,n);Array.isArray(C)&&(c(C),u.current=C.map(H0))}}}).unsubscribe,[r,n]);const h=ot.useCallback(j=>{f.current=!0,r._setFieldArray(n,j)},[r,n]),m=(j,B)=>{const C=ic(Za(j)),k=R6(r._getFieldArray(n),C);r._names.focus=P6(n,k.length-1,B),u.current=R6(u.current,C.map(H0)),h(k),c(k),r._setFieldArray(n,k,R6,{argA:L6(j)})},g=(j,B)=>{const C=ic(Za(j)),k=Q6(r._getFieldArray(n),C);r._names.focus=P6(n,0,B),u.current=Q6(u.current,C.map(H0)),h(k),c(k),r._setFieldArray(n,k,Q6,{argA:L6(j)})},x=j=>{const B=H6(r._getFieldArray(n),j);u.current=H6(u.current,j),h(B),c(B),!Array.isArray(ar(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,B,H6,{argA:j})},v=(j,B,C)=>{const k=ic(Za(B)),T=M6(r._getFieldArray(n),j,k);r._names.focus=P6(n,j,C),u.current=M6(u.current,j,k.map(H0)),h(T),c(T),r._setFieldArray(n,T,M6,{argA:j,argB:L6(B)})},y=(j,B)=>{const C=r._getFieldArray(n);V6(C,j,B),V6(u.current,j,B),h(C),c(C),r._setFieldArray(n,C,V6,{argA:j,argB:B},!1)},w=(j,B)=>{const C=r._getFieldArray(n);U6(C,j,B),U6(u.current,j,B),h(C),c(C),r._setFieldArray(n,C,U6,{argA:j,argB:B},!1)},_=(j,B)=>{const C=Za(B),k=mJ(r._getFieldArray(n),j,C);u.current=[...k].map((T,L)=>!T||L===j?H0():u.current[L]),h(k),c([...k]),r._setFieldArray(n,k,mJ,{argA:j,argB:C},!0,!1)},O=j=>{const B=ic(Za(j));u.current=B.map(H0),h([...B]),c([...B]),r._setFieldArray(n,[...B],C=>C,{},!0,!1)};return ot.useEffect(()=>{if(r._state.action=!1,KD(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Bv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Bv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(j=>{const B=ar(j.errors,n),C=ar(r._formState.errors,n);(C?!B&&C.type||B&&(C.type!==B.type||C.message!==B.message):B&&B.type)&&(B?Fa(r._formState.errors,n,B):qs(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const j=ar(r._fields,n);j&&j._f&&!(Bv(r._options.reValidateMode).isOnSubmit&&Bv(r._options.mode).isOnSubmit)&&WD(j,r._names.disabled,r._formValues,r._options.criteriaMode===Vu.all,r._options.shouldUseNativeValidation,!0).then(B=>!bl(B)&&r._subjects.state.next({errors:PAe(r._formState.errors,B,n)}))}r._subjects.state.next({name:n,values:Za(r._formValues)}),r._names.focus&&eb(r._fields,(j,B)=>{if(r._names.focus&&B.startsWith(r._names.focus)&&j.focus)return j.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,n,r]),ot.useEffect(()=>(!ar(r._formValues,n)&&r._setFieldArray(n),()=>{const j=(B,C)=>{const k=ar(r._fields,B);k&&k._f&&(k._f.mount=C)};r._options.shouldUnregister||s?r.unregister(n):j(n,!1)}),[n,r,a,s]),{swap:ot.useCallback(y,[h,n,r]),move:ot.useCallback(w,[h,n,r]),prepend:ot.useCallback(g,[h,n,r]),append:ot.useCallback(m,[h,n,r]),remove:ot.useCallback(x,[h,n,r]),insert:ot.useCallback(v,[h,n,r]),update:ot.useCallback(_,[h,n,r]),replace:ot.useCallback(O,[h,n,r]),fields:ot.useMemo(()=>l.map((j,B)=>({...j,[a]:u.current[B]||H0()})),[l,a])}}function Nmt(e={}){const t=ot.useRef(void 0),r=ot.useRef(void 0),[n,a]=ot.useState({isDirty:!1,isValidating:!1,isLoading:Pd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Pd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Pd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=bmt(e);t.current={...l,formState:n}}const s=t.current.control;return s._options=e,jAe(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),ot.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),ot.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),ot.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),ot.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),ot.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),ot.useEffect(()=>{e.values&&!rm(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),ot.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=imt(n,s),t.current}const XD=mt(pr,"alternancias");async function Emt(e){return(await on(XD,{...e,createdAt:ya(),updatedAt:ya()})).id}async function Cmt({especialidad:e,pageSize:t=10,lastDoc:r}){let n=Lt(XD,Jt("createdAt","desc"),Vd(t));e&&(n=Lt(XD,dr("especialidad","==",e),Jt("createdAt","desc"),Vd(t))),r&&(n=Lt(n,Hee(r)));const a=await Mr(n);return{items:a.docs.map(o=>({id:o.id,...o.data()})),lastDoc:a.docs[a.docs.length-1]}}async function _mt(e,t){const r=Yt(pr,"alternancias",e);await dl(r,{...t,updatedAt:ya()})}async function Smt(e){const t=Yt(pr,"alternancias",e);await wa(t)}async function kmt(e,t,r){const n=mt(pr,"alternancias",e,t);await on(n,{...r,createdAt:ya()})}async function jmt(e,t){const r=mt(pr,"alternancias",e,t);return(await Mr(r)).docs.map(a=>({id:a.id,...a.data()}))}async function Bmt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=sN(iR,r);await nR(n,t);const a=await Kk(n);return await kmt(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Tp=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return i.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),i.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},Go=({children:e,hint:t})=>i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&i.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),Ip=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},ZA=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return i.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:n})},Tmt=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Imt=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[f,h]=N.useState([]),[m,g]=N.useState(!1),{register:x,control:v,handleSubmit:y,reset:w,watch:_,setValue:O,formState:{isSubmitting:j}}=Nmt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),B=wmt({control:v,name:"actividades"}),C=["COORDINACION_TP","SUBDIRECCION"],k=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!k||C.some(D=>k.includes(D))))return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[i.jsx(zNe,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const L=D=>(D||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),R=(D,q)=>{var J;return!D||!q?[]:((J=N2e[D])==null?void 0:J[q])??[]},S=_("especialidad"),U=_("modulos")||[],Q=N.useMemo(()=>S?b2e[S]??[]:[],[S]),X=N.useMemo(()=>S?w2e[S]??[]:[],[S]);N.useEffect(()=>{O("curso",[]),O("modulos",[]);const D=[..._("actividades")||[]].map(q=>({...q,modulo:"",oa:""}));O("actividades",D)},[S]),N.useEffect(()=>{const D=[..._("actividades")||[]].map(q=>q.modulo&&!U.includes(q.modulo)?{...q,modulo:"",oa:""}:q);O("actividades",D)},[U]);const z=async()=>{o(!0);const{items:D}=await Cmt({});r(D),o(!1)};N.useEffect(()=>{z()},[]);const W=async D=>{n?await _mt(n,{...D}):await Emt({...D,createdBy:(e==null?void 0:e.email)||"desconocido"}),w(),a(null),await z()},G=D=>{const q=Array.isArray(D.curso)?D.curso:D.curso?[D.curso]:[],J=Array.isArray(D.modulos)?D.modulos.map(ne=>L(ne)):[],te=Array.isArray(D.actividades)?D.actividades.map(ne=>({...ne,modulo:ne!=null&&ne.modulo?L(ne.modulo):"",oa:(ne==null?void 0:ne.oa)||""})):[];w({...D,curso:q,modulos:J,actividades:te}),a(D.id),window.scrollTo({top:0,behavior:"smooth"})},Y=async D=>{confirm("¿Eliminar esta alternancia?")&&(await Smt(D),await z())},K=async(D,q)=>{await Bmt(D,q),alert("Evidencia subida correctamente")},H=async D=>{g(!0);const q=Array.isArray(D.curso)?D.curso:D.curso?[D.curso]:[],J=Array.isArray(D.modulos)?D.modulos:[],te=Array.isArray(D.actividades)?D.actividades.map(ie=>({fecha:(ie==null?void 0:ie.fecha)||"",tipo:(ie==null?void 0:ie.tipo)||"",actividad:(ie==null?void 0:ie.actividad)||"",lugar:(ie==null?void 0:ie.lugar)||"",evidencias:(ie==null?void 0:ie.evidencias)||"",modulo:(ie==null?void 0:ie.modulo)||"",oa:(ie==null?void 0:ie.oa)||""})):[],ne={...D,curso:q,modulos:J,actividades:te};d(ne);try{const ie=await jmt(D.id,"evidencias");h(ie)}catch{h([])}c(!0),g(!1)},F=D=>{const q=Array.from(D.currentTarget.selectedOptions).map(J=>J.value);O("curso",q,{shouldDirty:!0})};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:i.jsx(tw,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),i.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ZA,{title:"Nuevo plan",onClick:()=>{w(),a(null)},tone:"neutral",children:[i.jsx(uA,{className:"w-4 h-4"}),"Limpiar"]}),i.jsxs(ZA,{title:"Guardar",type:"submit",tone:"success",disabled:j,children:[j?i.jsx(El,{className:"w-4 h-4 animate-spin"}):i.jsx(Yc,{className:"w-4 h-4"}),"Guardar"]})]})]})}),i.jsx(Tp,{title:"Planes guardados",icon:i.jsx(Ng,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(El,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(D=>i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[i.jsx(am,{className:"w-4 h-4 text-indigo-600"}),D.especialidad]}),i.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[i.jsx(Ip,{tone:"indigo",children:Array.isArray(D.curso)?D.curso.join(", "):D.curso}),i.jsx(Ip,{tone:"sky",children:D.institucion}),(Array.isArray(D.tipoAlternancia)?D.tipoAlternancia:[]).slice(0,2).map(q=>i.jsx(Ip,{tone:"emerald",children:q},q))]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ZA,{title:"Ver",onClick:()=>H(D),children:[i.jsx(Tmt,{className:"w-4 h-4"})," Ver"]}),i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[i.jsx(r1,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",onChange:q=>q.target.files&&K(D.id,q.target.files[0])}),"Evidencia"]}),i.jsxs(ZA,{title:"Editar",onClick:()=>G(D),children:[i.jsx(B_,{className:"w-4 h-4"})," Editar"]}),i.jsxs(ZA,{title:"Eliminar",onClick:()=>Y(D.id),tone:"danger",children:[i.jsx(Va,{className:"w-4 h-4"})," Eliminar"]})]})]})},D.id))})}),l&&u&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>c(!1)}),i.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b bg-white/90 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center",children:i.jsx(tw,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Plan de Alternancia"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Visualización detallada"})]})]}),i.jsxs(ZA,{title:"Cerrar",onClick:()=>c(!1),children:[i.jsx(uA,{className:"w-4 h-4"})," Cerrar"]})]}),i.jsxs("div",{className:"p-5 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Go,{children:"Especialidad"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(am,{className:"w-4 h-4 text-indigo-600"})," ",u.especialidad||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Go,{children:"Institución"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(b2,{className:"w-4 h-4 text-sky-600"})," ",u.institucion||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Go,{children:"Cursos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.curso||[]).map(D=>i.jsx(Ip,{tone:"sky",children:D},D))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Go,{children:"Tipos de Alternancia"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.tipoAlternancia||[]).map(D=>i.jsx(Ip,{tone:"emerald",children:D},D))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Go,{children:"Módulos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.modulos||[]).map(D=>i.jsx(Ip,{tone:"indigo",children:D},D))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(Go,{children:"Creado por"}),i.jsx("div",{className:"text-slate-700 text-sm",children:u.createdBy||"-"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Fundamentación técnico‑pedagógica"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.fundamentacion||"—"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsx("div",{className:"px-4 py-3 border-b bg-slate-50/50",children:i.jsx("h4",{className:"font-semibold text-slate-800",children:"Plan de actividades"})}),u.actividades&&u.actividades.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 text-left",children:"Actividad"}),i.jsx("th",{className:"p-2 text-left",children:"Lugar"}),i.jsx("th",{className:"p-2 text-left",children:"Módulo"}),i.jsx("th",{className:"p-2 text-left",children:"OA"}),i.jsx("th",{className:"p-2 text-left",children:"Evidencias"})]})}),i.jsx("tbody",{className:"divide-y",children:u.actividades.map((D,q)=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 text-slate-700",children:D.fecha||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:D.tipo||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:D.actividad||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:D.lugar||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:D.modulo||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:D.oa||"—"}),i.jsx("td",{className:"p-2 text-slate-700",children:D.evidencias||"—"})]},q))})]})}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Sin actividades registradas"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Equipo"}),(u.equipo||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.equipo.map((D,q)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:D.nombre||"—"}),i.jsx("span",{className:"text-slate-500",children:D.rol||""})]},q))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin equipo registrado"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Contrapartes"}),(u.contrapartes||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.contrapartes.map((D,q)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:D.nombre||"—"}),i.jsx("span",{className:"text-slate-500",children:D.rol||""})]},q))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin contrapartes"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Tutores"}),(u.tutores||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.tutores.map((D,q)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:D.nombre||"—"}),i.jsx("span",{className:"text-slate-500",children:D.rol||""})]},q))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin tutores"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Análisis Curricular"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.analisisCurricular||"—"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsxs("div",{className:"px-4 py-3 border-b bg-slate-50/50 flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Evidencias subidas"}),m&&i.jsx("span",{className:"text-sm text-slate-500",children:"Cargando…"})]}),(f||[]).length>0?i.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:f.map(D=>i.jsxs("a",{href:D.url,target:"_blank",rel:"noreferrer",className:"group rounded-xl border border-slate-200 p-3 hover:shadow-sm transition bg-white flex items-center gap-3",children:[i.jsx(bF,{className:"w-5 h-5 text-emerald-600"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm text-slate-800 truncate group-hover:underline",children:D.nombre||"archivo"}),i.jsx("div",{className:"text-xs text-slate-500 truncate",children:D.path||""})]})]},D.id))}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"No hay evidencias adjuntas"})]})]})]})]}),i.jsxs("form",{onSubmit:y(W),className:"mt-6 space-y-5",children:[i.jsx(Tp,{title:"Contexto de la Alternancia",icon:i.jsx(b2,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(Go,{children:"Especialidad"}),i.jsxs("div",{className:"relative",children:[i.jsx(am,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[i.jsx("option",{value:"",children:"Selecciona…"}),x2e.map(D=>i.jsx("option",{value:D,children:D},D))]})]})]}),i.jsxs("div",{children:[i.jsx(Go,{children:"Institución"}),i.jsxs("div",{className:"relative",children:[i.jsx(b2,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:"Selecciona…"}),v2e.map(D=>i.jsx("option",{value:D,children:D},D))]})]})]}),i.jsxs("div",{children:[i.jsx(Go,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(ro,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsx("select",{multiple:!0,size:4,...x("curso"),onChange:F,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!S,children:S?Q.map(D=>i.jsx("option",{value:D,children:D},D)):i.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(_("curso")||[]).map(D=>i.jsx(Ip,{tone:"sky",children:D},D))})]})]})}),i.jsx(Tp,{title:"Módulos implicados",icon:i.jsx(AR,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:S?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:X.map(D=>i.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:D,className:"mt-1 accent-emerald-600",...x("modulos")}),i.jsx("span",{className:"text-sm text-slate-700",children:D})]},D))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),i.jsx(Tp,{title:"Tipo de Alternancia",icon:i.jsx(Rv,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:i.jsx("div",{className:"flex gap-3 flex-wrap",children:y2e.map(D=>i.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:D,className:"accent-amber-600",...x("tipoAlternancia")}),i.jsx("span",{className:"text-slate-700",children:D})]},D))})}),i.jsx(Tp,{title:"Fundamentación técnico‑pedagógica",icon:i.jsx(z2e,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),i.jsx(Tp,{title:"Plan de actividades",icon:i.jsx(Ng,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"space-y-3",children:[B.fields.map((D,q)=>{const J=_(`actividades.${q}.modulo`)||"",te=R(S,J);return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Go,{children:"Fecha"}),i.jsx(oc,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{type:"date",placeholder:"Fecha",...x(`actividades.${q}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(Go,{children:"Tipo"}),i.jsx("input",{placeholder:"Pasantía, visita, taller...",...x(`actividades.${q}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(Go,{children:"Actividad"}),i.jsx("input",{placeholder:"Descripción breve",...x(`actividades.${q}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Go,{children:"Lugar"}),i.jsx(j_,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...x(`actividades.${q}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Go,{children:"Evidencias"}),i.jsx(bF,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...x(`actividades.${q}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx(Go,{children:"Módulo"}),i.jsxs("select",{...x(`actividades.${q}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!S||U.length===0,children:[i.jsx("option",{value:"",children:!S&&"Elige especialidad arriba"||U.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),U.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]})]}),i.jsxs("div",{children:[i.jsx(Go,{children:"Objetivo de Aprendizaje (OA)"}),i.jsxs("select",{...x(`actividades.${q}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!J||te.length===0,children:[i.jsx("option",{value:"",children:J?te.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),te.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]})]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsxs(ZA,{title:"Eliminar fila",onClick:()=>B.remove(q),tone:"danger",children:[i.jsx(Va,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},D.id)}),i.jsxs(ZA,{title:"Agregar actividad",onClick:()=>B.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[i.jsx(So,{className:"w-4 h-4"})," Agregar actividad"]})]})}),i.jsx(Tp,{title:"Análisis Curricular",icon:i.jsx(am,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs(ZA,{title:"Guardar",type:"submit",tone:"success",disabled:j,children:[j?i.jsx(El,{className:"w-4 h-4 animate-spin"}):i.jsx(Ha,{className:"w-4 h-4"}),"Guardar"]})})]})]})},YD=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],Fmt={INCIPIENTE:25},Omt=["AULA","TALLER","EMPRESA"],pJ={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Dmt="tp_especialidades",Pmt="tp_modulos",Rmt="tp_resultados_aprendizaje",Lmt="tp_criterios_evaluacion",JD="tp_rubricas",RAe="tp_evidencias",LAe="tp_evaluaciones_comp",ZD="config_evaluacion/competencias",gJ=()=>Date.now(),MAe=async()=>{const e=await kh(Yt(pr,ZD));return e.exists()?e.data():(await yi(Yt(pr,ZD),pJ),pJ)},Mmt=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const o=(s-r)/(a-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(n-s)/(100-a||1);return Number((s+o*(e-a)).toFixed(1))}},Umt=async(e,t)=>{const r=await MAe();let n=0,a=0;Object.entries(t).forEach(([l,c])=>{a+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??Fmt.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,o=Mmt(s,r);return{puntajeTotal:n,porcentaje:s,nota:o}},Qmt=e=>{const t=Lt(mt(pr,Dmt),Jt("nombre"));return lr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))})},Hmt=async e=>{const t=Lt(mt(pr,Pmt),dr("especialidadId","==",e),Jt("nombre"));return(await Mr(t)).docs.map(n=>({id:n.id,...n.data()}))},Vmt=async e=>{const t=Lt(mt(pr,Rmt),dr("moduloId","==",e),Jt("codigo"));return(await Mr(t)).docs.map(n=>({id:n.id,...n.data()}))},zmt=async e=>{const t=Lt(mt(pr,Lmt),dr("raId","==",e),Jt("codigo"));return(await Mr(t)).docs.map(n=>({id:n.id,...n.data()}))},$mt=async e=>e.id?(await dl(Yt(pr,JD,e.id),{...e,updatedAt:gJ()}),e.id):(await on(mt(pr,JD),{...e,updatedAt:gJ()})).id,UAe=async e=>{const t=Lt(mt(pr,JD),dr("raId","==",e)),n=(await Mr(t)).docs[0];return n?{id:n.id,...n.data()}:null},Gmt=async(e,t)=>{const r=sN(iR,t),n=await nR(r,e);return{url:await Kk(n.ref),path:n.ref.fullPath}},qmt=e=>on(mt(pr,RAe),e),Kmt=(e,t)=>{const r=Lt(mt(pr,RAe),dr("raId","==",e),Jt("fecha","desc"));return lr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},Wmt=async e=>{const t=await UAe(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await Umt(e.ceIdScores,r);return on(mt(pr,LAe),{...e,puntajeTotal:n,porcentaje:a,nota:s})},Xmt=(e,t)=>{const r=Lt(mt(pr,LAe),dr("raId","==",e),Jt("fecha","desc"));return lr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},Ymt=async e=>{const t=await MAe();await yi(Yt(pr,ZD),{...t,...e},{merge:!0})},Jmt=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,o]=N.useState(null);if(N.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:YD,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return i.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!s)return null;const l=(f,h)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:h}})},c=(f,h,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=N.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const f=await $mt(s);n==null||n(f)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),i.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:h=>l(f.id,Number(h.target.value))}),i.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:YD.map(h=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return i.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),i.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},f.id))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[i.jsx(Yc,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar rúbrica"})]})})]})},Zmt=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState("AULA"),[u,d]=N.useState(null),[f,h]=N.useState(""),[m,g]=N.useState(!1);if(!e)return i.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:w,path:_}=await Gmt(u,y);await qmt({estudianteId:n,raId:e,ceId:s||void 0,url:w,tipo:ept(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:_}),d(null),h(""),a(""),o("")}finally{g(!1)}}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>o(v.target.value)}),i.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[i.jsx("option",{value:"AULA",children:"AULA"}),i.jsx("option",{value:"TALLER",children:"TALLER"}),i.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),i.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),i.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:v=>h(v.target.value)}),i.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[i.jsx(r1,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir evidencia"})]}),i.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>i.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[tpt(v.tipo),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),i.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&i.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},ept=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},tpt=e=>{switch(e){case"imagen":return i.jsx(Xwe,{className:"w-5 h-5 text-rose-600"});case"video":return i.jsx(Pwe,{className:"w-5 h-5 text-indigo-600"});case"documento":return i.jsx(zd,{className:"w-5 h-5 text-emerald-600"});default:return i.jsx(r1,{className:"w-5 h-5 text-slate-500"})}},xJ=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],rpt=({raId:e})=>{const[t,r]=N.useState([]);if(N.useEffect(()=>{if(!e){r([]);return}const o=Xmt(e,r);return()=>o()},[e]),!e)return i.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=N.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"—";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),a=N.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const o=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Ts.book_new(),c=Ts.json_to_sheet(o);Ts.book_append_sheet(l,c,"Evaluaciones_RA"),o1(l,`evaluaciones_${e}.xlsx`)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(qc,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),i.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsx("span",{children:"Descargar CSV"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(Iw,{data:n,children:[i.jsx(Dg,{dataKey:"curso"}),i.jsx(Pg,{domain:[1,7]}),i.jsx(uh,{}),i.jsx(Bb,{dataKey:"promedio"})]})})}),i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(dh,{width:"100%",height:"100%",children:i.jsxs(dM,{children:[i.jsx(z4,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((o,l)=>i.jsx(Um,{fill:xJ[l%xJ.length]},`c-${l}`))}),i.jsx(uh,{}),i.jsx(c1,{})]})})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Hy=({active:e,onClick:t,icon:r,label:n})=>i.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,i.jsx("span",{className:"font-medium",children:n})]}),ov=({children:e,className:t})=>i.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),npt=({currentUser:e})=>{const[t,r]=N.useState("planificacion"),[n,a]=N.useState([]),[s,o]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState([]),[f,h]=N.useState({}),[m,g]=N.useState(null),[x,v]=N.useState([]);N.useEffect(()=>{const w=Qmt(a);return()=>w()},[]),N.useEffect(()=>{f.especialidadId?Hmt(f.especialidadId).then(o):o([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),N.useEffect(()=>{f.moduloId?Vmt(f.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[f.moduloId]),N.useEffect(()=>{if(f.raId){zmt(f.raId).then(d),UAe(f.raId).then(g);const w=Kmt(f.raId,v);return()=>w()}else d([]),g(null),v([])},[f.raId]);const y=f.raId&&u.length>0;return i.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(AR,{className:"w-6 h-6 text-indigo-600"}),i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hy,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:i.jsx(Ng,{className:"w-4 h-4"}),label:"Planificar"}),i.jsx(Hy,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:i.jsx(ONe,{className:"w-4 h-4"}),label:"Evaluar"}),i.jsx(Hy,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:i.jsx(r1,{className:"w-4 h-4"}),label:"Evidencias"}),i.jsx(Hy,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:i.jsx(qc,{className:"w-4 h-4"}),label:"Dashboard"}),i.jsx(Hy,{active:t==="config",onClick:()=>r("config"),icon:i.jsx(HNe,{className:"w-4 h-4"}),label:"Config"})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i.jsx(ov,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),n.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:w=>h(_=>({..._,moduloId:w.target.value})),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),s.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:w=>h(_=>({..._,raId:w.target.value})),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),l.map(w=>i.jsxs("option",{value:w.id,children:[w.codigo," — ",w.enunciado.slice(0,60),w.enunciado.length>60?"…":""]},w.id))]})]})]})}),t==="planificacion"&&i.jsx(ov,{children:i.jsx(Jmt,{raId:f.raId,ces:u,rubrica:m,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&i.jsxs(ov,{children:[!y&&i.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&i.jsx(apt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&i.jsx(ov,{children:i.jsx(Zmt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&i.jsx(ov,{children:i.jsx(rpt,{raId:f.raId})}),t==="config"&&i.jsx(ov,{children:i.jsx(spt,{})})]})]})},apt=({raId:e,ces:t,currentUser:r})=>{const[n,a]=N.useState(""),[s,o]=N.useState(r.curso||""),[l,c]=N.useState("AULA"),[u,d]=N.useState(""),[f,h]=N.useState({}),m=(v,y,w)=>{h(_=>({..._,[v]:{nivel:y,puntaje:w}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await Wmt(v),d(""),h({}),a("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>o(v.target.value),placeholder:"p.ej. 3ºB"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),i.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:Omt.map(v=>i.jsx("option",{value:v,children:v},v))})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(Ha,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar evaluación"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),i.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:YD.map(y=>{var w;return i.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=f[v.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),i.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},spt=()=>{const[e,t]=N.useState(60),[r,n]=N.useState(4),a=async()=>{await Ymt({porcentajeAprobacion:e,notaAprobacion:r})};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),i.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),i.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),i.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})};function ipt(e){for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null}function opt(e){if(e.asignatura!=="Lectura")return e;const t={...e};let r=ipt(t.preguntas||[]);return!r&&t.descripcion&&t.descripcion.length>100&&(r=t.descripcion,t.preguntas&&t.preguntas.length>0&&(t.preguntas[0]={...t.preguntas[0],textoBase:r})),r&&(t.textoBase=r),t}const lpt=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState({}),[l,c]=N.useState(!0),[u,d]=N.useState(!1),[f,h]=N.useState(!1),[m,g]=N.useState(null),[x,v]=N.useState(null),[y,w]=N.useState(null),[_,O]=N.useState([]),[j,B]=N.useState(null),C=X=>{if(!X)return"";let z=X.trim().toLowerCase();return z=z.replace(/°/g,"º"),z=z.replace(/\s+(medio|básico|basico)/g,""),z=z.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),z=z.replace(/^(\d)(?![º])/,"$1º"),z=z.replace(/\s+/g,"").toUpperCase(),z};N.useEffect(()=>{(async()=>{if(e.id)try{c(!0);const z=C(e.curso||"");console.log(`[DEBUG] SimceEvaluacionEstudiante - Cargando evaluaciones para estudiante: ${e.id}, curso: ${e.curso} (normalizado: ${z})`);const[W,G]=await Promise.all([Ti(()=>Promise.resolve().then(()=>QK),void 0).then(H=>H.obtenerSetsPreguntasPorCurso(z)),Ti(()=>Promise.resolve().then(()=>QK),void 0).then(H=>H.obtenerSetsPreguntasPorEstudiante(e.id))]),Y=new Map;[...W,...G].forEach(H=>Y.set(H.id,H));const K=Array.from(Y.values());r(K),T({porCurso:W.length,porEstudiante:G.length,total:K.length}),console.log(`[DEBUG] SimceEvaluacionEstudiante - Evaluaciones por curso: ${W.length}, por estudiante: ${G.length}, total: ${K.length}`)}catch(z){console.error("Error al cargar evaluaciones:",z),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const[k,T]=N.useState(null),L=async X=>{var z,W;try{c(!0),o({}),v(null),g(null),h(!1),console.log(`[DEBUG] Seleccionando evaluación con ID: ${X}`);let G=await D2(X);if(console.log("[DEBUG] Evaluación completa obtenida:",G),console.log("[DEBUG] Preguntas en la evaluación:",((z=G==null?void 0:G.preguntas)==null?void 0:z.length)||0),G&&(G=opt(G),console.log("[DEBUG] Evaluación procesada con texto base asegurado"),a(G)),G!=null&&G.preguntas){const K=G.preguntas.some(H=>H.textoBase)||G.textoBase;if(console.log("[DEBUG] ¿La evaluación tiene texto base?",K),K){const H=G.textoBase||((W=G.preguntas.find(F=>F.textoBase))==null?void 0:W.textoBase);console.log("[DEBUG] Texto base encontrado:",(H==null?void 0:H.substring(0,50))+"...")}}const Y=await jce(e.id||"",X);if(console.log(`[DEBUG] Intentos existentes para esta evaluación: ${Y.length}`),O(Y),Y.length>0){B(Y[0]),h(!0);const K=await D2(X);if(K){a(K);const H=Y[0],F=K.preguntas.map(D=>{var J;const q=((J=H.respuestas.find(te=>te.preguntaId===D.id))==null?void 0:J.alternativaSeleccionada)||"";return{preguntaId:D.id,pregunta:D,respuestaSeleccionada:q,esCorrecta:q===D.respuestaCorrecta}});g({porcentajeLogro:H.porcentajeLogro,nivelLogro:H.nivelLogro,respuestasCorrectas:F.filter(D=>D.esCorrecta).length,totalPreguntas:K.preguntas.length,detalle:F})}}else{const K=await D2(X);if(K){const H=[...K.preguntas].sort(()=>Math.random()-.5);H.forEach(F=>{F.alternativas=[...F.alternativas].sort(()=>Math.random()-.5)}),a({...K,preguntas:H}),w(Date.now())}}}catch(G){console.error("Error al seleccionar evaluación:",G),v("No se pudo cargar la evaluación seleccionada")}finally{c(!1)}},R=(X,z)=>{o({...s,[X]:z})},S=async()=>{if(n)try{const X=n.preguntas.map(J=>J.id),z=Object.keys(s);if(z.length<X.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${X.length-z.length})`);return}d(!0);let W=0;const G=n.preguntas.map(J=>{const te=s[J.id],ne=te===J.respuestaCorrecta;return ne&&W++,{preguntaId:J.id,pregunta:J,respuestaSeleccionada:te,esCorrecta:ne}}),Y=n.preguntas.length,K=W/Y*100;let H;K>=80?H="Adecuado":K>=50?H="Elemental":H="Insuficiente";const F=Date.now(),D=y?Math.floor((F-y)/1e3):0,q={setId:n.id,estudianteId:e.id||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(s).map(([J,te])=>{const ne=n.preguntas.find(oe=>oe.id===J),ie=ne==null?void 0:ne.respuestaCorrecta;return{preguntaId:J,alternativaSeleccionadaId:String(te),esCorrecta:String(te)===ie}}),porcentajeAciertos:K,nivelLogro:H,fechaEnvio:new Date().toISOString()};await kce(q),g({porcentajeLogro:K,nivelLogro:H,respuestasCorrectas:W,totalPreguntas:Y,detalle:G}),h(!0)}catch(X){console.error("Error al enviar respuestas:",X),v("Ocurrió un error al enviar sus respuestas. Intente nuevamente.")}finally{d(!1)}},U=X=>{const z=Math.floor(X/60),W=X%60;return`${z}:${W<10?"0":""}${W}`},Q=X=>{switch(X){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gm,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsx("div",{className:"space-y-6",children:n?f?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",n.titulo]}),i.jsx("button",{onClick:()=>{a(null),g(null),h(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),i.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${Q((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),i.jsxs("div",{className:"mt-4",children:[i.jsx(lwe,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),i.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),i.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),i.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:i.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),i.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),i.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((X,z)=>i.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",z+1]}),X.pregunta.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:X.pregunta.alternativas.map(W=>i.jsxs("div",{className:`flex items-start ${W.id===X.respuestaSeleccionada?W.id===X.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":W.id===X.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[i.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[W.id,")"]}),i.jsx("div",{children:W.texto}),W.id===X.respuestaSeleccionada&&W.id===X.pregunta.respuestaCorrecta&&i.jsx(Ha,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),W.id===X.respuestaSeleccionada&&W.id!==X.pregunta.respuestaCorrecta&&i.jsx(nw,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),W.id!==X.respuestaSeleccionada&&W.id===X.pregunta.respuestaCorrecta&&i.jsx(Ha,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},W.id))}),i.jsx("div",{className:"mt-4 text-sm",children:i.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[i.jsx("span",{className:"font-semibold",children:"Explicación:"})," ",X.pregunta.explicacion]})})]},X.preguntaId))}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsx("button",{onClick:()=>{a(null),g(null),h(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," - ",n.preguntas.length," preguntas"]})]}),i.jsx("button",{onClick:()=>{window.confirm("¿Está seguro que desea salir? Se perderán todas las respuestas.")&&a(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[i.jsx(aw,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),i.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[i.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),i.jsx("li",{children:"Solo tienes un intento para responder."}),i.jsx("li",{children:"Una vez enviado, podrás ver tu resultado y las respuestas correctas."}),i.jsx("li",{children:"No refresques ni cierres la página durante la evaluación."})]})]})]}),x&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(nw,{className:"w-4 h-4 mr-2"}),x]}),(n.asignatura==="Lectura"||n.asignatura==="Competencia Lectora")&&(()=>{var z,W;console.log("[DEBUG] Asignatura de Lectura detectada, buscando texto base");let X=n.textoBase||((z=n.preguntas.find(G=>G.textoBase))==null?void 0:z.textoBase)||((W=n.preguntas[0])==null?void 0:W.textoBase);return console.log("[DEBUG] Texto base encontrado:",X?"SÍ":"NO"),X||(console.log("[WARNING] Es una evaluación de Lectura pero no tiene texto base"),n.descripcion&&n.descripcion.length>50&&(X=`⚠️ NOTA: El texto de comprensión no está disponible. La evaluación podría estar incompleta. Comunícate con tu profesor.

`+n.descripcion,console.log("[DEBUG] Usando descripción como texto base alternativo"))),X?i.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"📖 Texto de Comprensión Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx(Uce,{content:X,context:"simce-texto-base"})})})]}):null})(),i.jsx("div",{className:"space-y-6",children:n.preguntas.map((X,z)=>i.jsxs("div",{className:`p-4 rounded-lg border ${s[X.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",z+1]}),X.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:X.alternativas.map(W=>i.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${s[X.id]===W.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>R(X.id,W.id),children:[i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${s[X.id]===W.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:s[X.id]===W.id&&i.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),i.jsxs("div",{className:"font-bold mr-2",children:[W.id,")"]}),i.jsx("div",{children:W.texto})]},W.id))}),!s[X.id]&&i.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},X.id))}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[i.jsx(Fd,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-sm",children:y&&i.jsxs(i.Fragment,{children:["Tiempo transcurrido: ",U(Math.floor((Date.now()-y)/1e3))]})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(s).length," de ",n.preguntas.length," respondidas"]}),i.jsx("button",{onClick:S,disabled:u||Object.keys(s).length!==n.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(gm,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(UNe,{className:"w-4 h-4"}),i.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),k&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-slate-50 dark:bg-slate-900/20 border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("strong",{children:"Debug:"})," Detectadas ",i.jsx("b",{children:k.porCurso})," por curso, ",i.jsx("b",{children:k.porEstudiante})," por asignación directa, ",i.jsx("b",{children:k.total})," total."]}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(bF,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):i.jsx("div",{className:"space-y-4",children:t.map(X=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>L(X.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${X.asignatura==="Lectura"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:X.asignatura==="Lectura"?i.jsx(vi,{className:"w-6 h-6"}):i.jsx(cR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:X.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:X.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:X.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[X.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(X.fechaAsignacion).toLocaleDateString()})]})]})]})},X.id))})]})})},cpt=({currentUser:e})=>{const[t,r]=N.useState([]),[n,a]=N.useState(null),[s,o]=N.useState([]),[l,c]=N.useState(null),[u,d]=N.useState(!0),[f,h]=N.useState(null),[m,g]=N.useState("general"),[x,v]=N.useState("todos");N.useEffect(()=>{(async()=>{try{d(!0);const L=await Bce(e.id||"");r(L)}catch(L){console.error("Error al cargar evaluaciones:",L),h("No se pudieron cargar las evaluaciones")}finally{d(!1)}})()},[e]);const y=async T=>{try{d(!0),h(null);const L=await D2(T);if(L){a(L);const R=await Tce(T);o(R);const S=Array.isArray(L.cursosAsignados)?L.cursosAsignados:[];if(S.length>0){const U=await Ice(T,S[0]);U&&c(U)}else c(null)}}catch(L){console.error("Error al seleccionar evaluación:",L),h("No se pudo cargar la información de la evaluación seleccionada")}finally{d(!1)}},w=async()=>{console.log("Generando Excel...")},_=T=>{switch(T){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},O=T=>{switch(T){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},j=()=>{if(!l)return null;const{porcentajeAdecuado:T,porcentajeElemental:L,porcentajeInsuficiente:R}=l;return i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribución por niveles de logro"}),i.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${T}%`}}),i.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${L}%`}}),i.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${R}%`}})]}),i.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Adecuado: ",T.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Elemental: ",L.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Insuficiente: ",R.toFixed(1),"%"]})]})]})]})},B=()=>l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:i.jsx(ro,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),i.jsx("div",{className:"text-2xl font-bold",children:l.totalEstudiantes})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:i.jsx(bte,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),i.jsxs("div",{className:"text-2xl font-bold",children:[l.promedioLogro.toFixed(1),"%"]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:i.jsx(L2e,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),i.jsx("div",{className:`text-2xl font-bold ${_(l.nivelPredominante)}`,children:l.nivelPredominante})]})]})})]}),j(),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadísticas por eje temático"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"space-y-4",children:l.porEjeTematico.map((T,L)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:T.eje}),i.jsxs("span",{className:"text-sm",children:[T.promedio.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:i.jsx("div",{className:`h-full rounded-full ${T.promedio>=80?"bg-green-500":T.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${T.promedio}%`}})})]},L))})})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gm,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),C=()=>{const T=s.filter(L=>x==="todos"?!0:L.nivelLogro.toLowerCase()===x);return i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),i.jsx("div",{className:"flex space-x-2",children:i.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:x,onChange:L=>v(L.target.value),children:[i.jsx("option",{value:"todos",children:"Todos los niveles"}),i.jsx("option",{value:"adecuado",children:"Adecuado"}),i.jsx("option",{value:"elemental",children:"Elemental"}),i.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),i.jsx("tbody",{children:T.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:"No hay datos para mostrar con los filtros seleccionados"})}):T.map(L=>{var R;return i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3",children:L.estudianteNombre||"Desconocido"}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:((R=L.estudiante)==null?void 0:R.curso)||"-"}),i.jsxs("td",{className:"px-4 py-3 font-semibold",children:[L.porcentajeLogro.toFixed(1),"%"]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${O(L.nivelLogro)}`,children:L.nivelLogro})}),i.jsxs("td",{className:"px-4 py-3",children:[L.respuestasCorrectas||"-","/",(n==null?void 0:n.preguntas.length)||"-"]}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:L.tiempoRealizacion?`${Math.floor(L.tiempoRealizacion/60)}:${(L.tiempoRealizacion%60).toString().padStart(2,"0")}`:"-"}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:new Date(L.fechaRealizacion).toLocaleDateString()})]},L.id)})})]})})})]})},k=()=>!n||!(l!=null&&l.porPregunta)||!l.porPregunta.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gm,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Análisis por pregunta"}),i.jsx("div",{className:"space-y-6",children:l.porPregunta.map((T,L)=>{var S;const R=n.preguntas.find(U=>U.id===T.preguntaId);return R?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",L+1]}),R.enunciado]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Eje temático:"})," ",R.ejeTematico||"No especificado"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),i.jsxs("div",{className:`text-xl font-bold ${T.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":T.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[T.porcentajeAcierto.toFixed(1),"%"]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:i.jsx("div",{className:`h-full rounded-full ${T.porcentajeAcierto>=80?"bg-green-500":T.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${T.porcentajeAcierto}%`}})})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribución de respuestas"}),i.jsx("div",{className:"space-y-2",children:T.distribucionRespuestas.map(U=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${U.alternativaId===R.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:U.alternativaId}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:i.jsx("div",{className:`h-full ${U.alternativaId===R.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${U.porcentaje}%`}})})}),i.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[U.porcentaje.toFixed(0),"%"]})]},U.alternativaId))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"font-bold mr-2",children:[R.respuestaCorrecta,")"]}),i.jsx("div",{children:(S=R.alternativas.find(U=>U.id===R.respuestaCorrecta))==null?void 0:S.texto})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),i.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${T.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":T.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:T.porcentajeAcierto>=80?"Baja":T.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},T.preguntaId):null})})]});return u?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(gm,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando información..."})]}):i.jsx("div",{className:"space-y-6",children:n?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," • ",s.length," estudiantes evaluados"]}),Array.isArray(n.cursosAsignados)&&n.cursosAsignados.length>0&&i.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[i.jsx("span",{className:"font-semibold text-xs text-indigo-700 dark:text-indigo-300",children:"Cursos asignados:"}),n.cursosAsignados.map((T,L)=>i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs",children:T},T+L))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:w,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsx("span",{children:"Exportar"})]}),i.jsx("button",{onClick:()=>a(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),f&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(nw,{className:"w-4 h-4 mr-2"}),f]}),i.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("general"),children:"Vista general"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("porEstudiante"),children:"Por estudiante"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("porPregunta"),children:"Por pregunta"})]}),m==="general"&&B(),m==="porEstudiante"&&C(),m==="porPregunta"&&k()]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(am,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas aún."})]}):i.jsx("div",{className:"space-y-4",children:t.map(T=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>y(T.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${T.asignatura==="Lectura"||T.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:T.asignatura==="Lectura"||T.asignatura==="Competencia Lectora"?i.jsx(vi,{className:"w-6 h-6"}):i.jsx(cR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:T.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:T.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:T.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[T.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(T.fechaCreacion).toLocaleDateString()})]})]})]})},T.id))})]})})},p5=({currentUser:e})=>{const[t,r]=N.useState("generador"),n=(e==null?void 0:e.profile)===Ht.PROFESORADO||(e==null?void 0:e.profile)===Ht.SUBDIRECCION||(e==null?void 0:e.profile)===Ht.COORDINACION_TP,a=(e==null?void 0:e.profile)===Ht.ESTUDIANTE;return N.useEffect(()=>{a&&r("evaluacion")},[a]),i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación SIMCE"})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex",children:[n&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(B_,{className:"w-4 h-4"}),i.jsx("span",{children:"Generador de Preguntas"})]}),i.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(qc,{className:"w-4 h-4"}),i.jsx("span",{children:"Resultados"})]})]}),a&&i.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(Rv,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Evaluaciones"})]})]})}),i.jsxs("div",{className:"p-6",children:[n&&t==="generador"&&i.jsx(JYe,{currentUser:e}),n&&t==="resultados"&&i.jsx(cpt,{currentUser:e}),a&&t==="evaluacion"&&i.jsx(lpt,{currentUser:e}),!n&&!a&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este módulo."})})]})]})]})},upt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},dpt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:o})=>{const l=e.profile,c=N.useMemo(()=>{const B=m2e[l]||[];return l!==Ht.ESTUDIANTE?B:B.filter(C=>{if(C.name==="Asistencia a Empresa"){const k=upt(e.curso||"");return k.startsWith("3º")||k.startsWith("4º")}return!0})},[l,e.curso]),[u,d]=N.useState(null),[f,h]=N.useState(!1),[m,g]=N.useState(!1),[x,v]=N.useState({planificacion:!0,evaluacion:!0,reflexion:!0,herramientas:!0,sd_gestion:!0,sd_planificacion:!0,sd_reflexion:!0,sd_herramientas:!0}),y=N.useRef([]);N.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const w=N.useCallback(B=>{d(B),window.innerWidth<768&&h(!1)},[]),_=N.useCallback(B=>{const C=c.find(k=>k.name===B);C&&w(C)},[c,w]),O=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:i.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:i.jsx(Zye,{className:"w-5 h-5"})})}),!m&&i.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),i.jsx("button",{type:"button",onClick:()=>g(B=>!B),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?i.jsx(uR,{className:"w-5 h-5 text-slate-200"}):i.jsx(rw,{className:"w-5 h-5 text-slate-200"})})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",children:l===Ht.PROFESORADO&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"planificacion",title:"Planificación",items:["Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión"]},{id:"evaluacion",title:"Evaluación",items:["Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE"]},{id:"reflexion",title:"Reflexión",items:["Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional"]},{id:"herramientas",title:"Herramientas",items:["Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(B=>{const C=!!x[B.id],k=B.items.map(T=>c.find(L=>L.name===T)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(T=>({...T,[B.id]:!T[B.id]})),"aria-expanded":C,children:[i.jsx("span",{className:"text-sm font-semibold text-white/90",children:B.title}),i.jsx(_H,{className:`w-4 h-4 text-white/70 transition-transform ${C?"rotate-180":""}`})]}),C&&i.jsx("div",{className:"px-2 pb-2",children:k.map(T=>{const L=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{onClick:()=>w(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[i.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]},B.id)}),c.filter(B=>!["Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(B.name)).length>0&&i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(B=>!["Planificación","Recursos de Aprendizaje","Interdisciplinario","Inclusión","Evaluación de Aprendizajes","Evaluaciones Formativas","Evaluación de Competencias","Actividades Remotas","SIMCE","Análisis Taxonómico","Mis Acompañamientos","Desarrollo Profesional","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(B.name)).map(B=>{const C=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>w(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${C?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${C?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]})]}):l===Ht.SUBDIRECCION&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"sd_gestion",title:"Gestión",items:["Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas"]},{id:"sd_planificacion",title:"Planificación",items:["Seguimiento Curricular","Interdisciplinario","Inclusión"]},{id:"sd_reflexion",title:"Reflexión",items:["Acompañamiento docente","Análisis Taxonómico","Dashboard"]},{id:"sd_herramientas",title:"Herramientas",items:["Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"]}].map(B=>{const C=!!x[B.id],k=B.items.map(T=>c.find(L=>L.name===T)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/10 transition",onClick:()=>v(T=>({...T,[B.id]:!T[B.id]})),"aria-expanded":C,children:[i.jsx("span",{className:"text-sm font-semibold text-white/90",children:B.title}),i.jsx(_H,{className:`w-4 h-4 text-white/70 transition-transform ${C?"rotate-180":""}`})]}),C&&i.jsx("div",{className:"px-2 pb-2",children:k.map(T=>{const L=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{onClick:()=>w(T),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                              ${L?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:T.name,children:[i.jsx("span",{className:`shrink-0 ${L?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:T.name})]},T.name)})})]},B.id)}),c.filter(B=>!["Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(B.name)).length>0&&i.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-white/90",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(B=>!["Administración","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedagógicas","Seguimiento Curricular","Interdisciplinario","Inclusión","Acompañamiento docente","Análisis Taxonómico","Dashboard","Calendario Académico","Muro de Anuncios","Mensajería Interna","Generador de Actas"].includes(B.name)).map(B=>{const C=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>w(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-xl transition-all mt-1
                            ${C?"bg-amber-400 text-slate-900 font-bold shadow":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${C?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]})]}):i.jsx("div",{className:"space-y-1",onKeyDown:B=>{var k,T,L;const C=y.current.findIndex(R=>R===document.activeElement);if(B.key==="ArrowDown"){B.preventDefault();const R=Math.min(C===-1?0:C+1,y.current.length-1);(k=y.current[R])==null||k.focus()}else if(B.key==="ArrowUp"){B.preventDefault();const R=Math.max(C===-1?0:C-1,0);(T=y.current[R])==null||T.focus()}else B.key==="Enter"&&C>=0&&((L=y.current[C])==null||L.click())},children:c.map((B,C)=>{const k=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{ref:T=>y.current[C]=T,onClick:()=>w(B),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                    ${k?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?B.name:void 0,children:[i.jsx("span",{className:`shrink-0 ${k?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:B.icon}),!m&&i.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:B.name})]},B.name)})})})]}),j=()=>{if(!u)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return i.jsx(YKe,{profile:l});if(u.name==="Muro de Anuncios")return i.jsx(rWe,{currentUser:e});if(u.name==="Mensajería Interna")return i.jsx(fet,{currentUser:e,refreshUnreadCount:o});if(u.name==="Generador de Actas")return i.jsx(uWe,{});if(u.name==="Desarrollo Profesional")return i.jsx(emt,{currentUser:e});if(l===Ht.SUBDIRECCION){if(u.name==="Dashboard")return i.jsx(H6e,{currentUser:e});if(u.name==="Administración")return i.jsx(uJe,{});if(u.name==="Seguimiento Curricular")return i.jsx(Jot,{currentUser:e});if(u.name==="Acompañamiento docente")return i.jsx(net,{currentUser:e});if(u.name==="Análisis Taxonómico")return i.jsx(hX,{currentUser:e});if(u.name==="SIMCE")return i.jsx(p5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(wW,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return i.jsx(R6e,{currentUser:e});if(u.name==="Crear horarios")return i.jsx(Y6e,{});if(u.name==="Seguimiento de acciones pedagógicas")return i.jsx(_Ke,{});if(u.name==="Inclusión")return i.jsx(xW,{currentUser:e})}if(l===Ht.PROFESORADO){if(u.name==="Planificación")return i.jsx(VKe,{currentUser:e});if(u.name==="Mis Acompañamientos")return i.jsx(Tot,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return i.jsx(got,{});if(u.name==="Análisis Taxonómico")return i.jsx(hX,{currentUser:e});if(u.name==="SIMCE")return i.jsx(p5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(wW,{});if(u.name==="Inclusión")return i.jsx(xW,{currentUser:e});if(u.name==="Actividades Remotas")return i.jsx(UJe,{});if(u.name==="Evaluación de Aprendizajes")return i.jsx(oJe,{});if(u.name==="Evaluaciones Formativas")return i.jsx(LZe,{currentUser:e});if(u.name==="Evaluación de Competencias")return i.jsx(npt,{currentUser:e})}if(l===Ht.COORDINACION_TP){if(u.name==="Seguimiento Dual")return i.jsx(bJe,{});if(u.name==="Asistencia Dual")return i.jsx(wZe,{});if(u.name==="Pañol")return i.jsx(Det,{});if(u.name==="SIMCE")return i.jsx(p5,{currentUser:e});if(u.name==="Gestión de Empresas")return i.jsx(U0t,{});if(u.name==="Alternancia TP")return i.jsx(Imt,{})}if(l===Ht.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return i.jsx(ZJe,{currentUser:e});if(u.name==="Evaluación Formativa")return i.jsx(Eot,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return i.jsx(jot,{currentUser:e});if(u.name==="SIMCE")return i.jsx(p5,{currentUser:e});if(u.name==="Asistencia a Empresa")return i.jsx(hZe,{currentUser:e})}return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),i.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",i.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return i.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[i.jsx(vEe,{currentUser:e,onLogout:t,onNavigate:_,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(B=>!B),unreadMessagesCount:s,refreshUnreadCount:o}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&i.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),i.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:i.jsx(O,{})}),i.jsx("main",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:i.jsx(pNe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&i.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),i.jsx("div",{className:"min-h-[60vh]",children:j()})]})})]})]})},fpt=({onSelectProfile:e,isAdminView:t=!1})=>i.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),i.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),i.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(lR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),i.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:h2e.map(r=>i.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[i.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),i.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),Apt=()=>{const[e,t]=N.useState(null),[r,n]=N.useState(null),[a,s]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(null),[h,m]=N.useState(null);N.useEffect(()=>{const O=new URLSearchParams(window.location.search),j=O.get("auth"),B=O.get("userId");O.get("module"),j==="success"&&B&&(m("¡Autorización de Google Slides completada exitosamente!"),setTimeout(()=>{const C=window.location.pathname;window.history.replaceState({},document.title,C),m(null)},3e3))},[]),N.useEffect(()=>{const O=eZ(ao,async j=>{if(t(j),j)try{const B=await pte(j.email);B?(n(B),B.profile===Ht.SUBDIRECCION&&u(!0)):(l("Usuario no encontrado en la base de datos. Contacte al administrador."),await lB())}catch{l("Error al conectar con la base de datos."),await lB()}else n(null),f(null),u(!1),l(null);s(!1)});return()=>O()},[]);const g=async(O,j)=>{if(l(null),!O.trim()||!j.trim()){l("Por favor ingrese email y contraseña");return}try{await Wye(O.trim(),j)}catch(B){switch(B.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":l("Error de conexión. Verifique su internet.");break;default:l("Ocurrió un error al intentar iniciar sesión.")}}},x=async O=>{try{await Xye(O)}catch(j){console.error("Error al enviar email de recuperación:",j)}},v=O=>{f(O),u(!1)},y=()=>{u(!0),f(null)},w=async()=>{try{await lB()}catch(O){console.error("Error al cerrar sesión:",O)}};if(a)return i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(lR,{})}),i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return i.jsx(E2e,{onLoginAttempt:g,onForgotPasswordRequest:x,error:o});if(c&&r.profile===Ht.SUBDIRECCION)return i.jsx(fpt,{onSelectProfile:v,isAdminView:!0});const _=d||r.profile;return i.jsxs(i.Fragment,{children:[h&&i.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:"✅"}),i.jsx("span",{children:h})]}),i.jsx(dpt,{currentUser:{...r,profile:_},onLogout:w,onChangeProfile:r.profile===Ht.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Ht.SUBDIRECCION})]})},QAe=document.getElementById("root");if(!QAe)throw new Error("Could not find root element to mount to");const hpt=a0e.createRoot(QAe);hpt.render(i.jsx(ot.StrictMode,{children:i.jsx(Apt,{})}));export{ha as _,ppt as c,Tl as g};
