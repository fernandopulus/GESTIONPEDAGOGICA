var _de=Object.defineProperty;var Sde=(e,t,r)=>t in e?_de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var nB=(e,t,r)=>Sde(e,typeof t!="symbol"?t+"":t,r);function Nde(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Cut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kde(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var aB={exports:{}},sb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WM;function Bde(){if(WM)return sb;WM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return sb.Fragment=t,sb.jsx=r,sb.jsxs=r,sb}var XM;function Tde(){return XM||(XM=1,aB.exports=Bde()),aB.exports}var c=Tde(),sB={exports:{}},ln={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YM;function Ide(){if(YM)return ln;YM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(K){return K===null||typeof K!="object"?null:(K=f&&K[f]||K["@@iterator"],typeof K=="function"?K:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function b(K,ne,L){this.props=K,this.context=ne,this.refs=v,this.updater=L||p}b.prototype.isReactComponent={},b.prototype.setState=function(K,ne){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ne,"setState")},b.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function y(){}y.prototype=b.prototype;function _(K,ne,L){this.props=K,this.context=ne,this.refs=v,this.updater=L||p}var S=_.prototype=new y;S.constructor=_,g(S,b.prototype),S.isPureReactComponent=!0;var k=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function w(K,ne,L,W,J,te){return L=te.ref,{$$typeof:e,type:K,key:ne,ref:L!==void 0?L:null,props:te}}function C(K,ne){return w(K.type,ne,void 0,void 0,void 0,K.props)}function N(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function P(K){var ne={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(L){return ne[L]})}var D=/\/+/g;function T(K,ne){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):ne.toString(36)}function U(){}function R(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(U,U):(K.status="pending",K.then(function(ne){K.status==="pending"&&(K.status="fulfilled",K.value=ne)},function(ne){K.status==="pending"&&(K.status="rejected",K.reason=ne)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function X(K,ne,L,W,J){var te=typeof K;(te==="undefined"||te==="boolean")&&(K=null);var ie=!1;if(K===null)ie=!0;else switch(te){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(K.$$typeof){case e:case t:ie=!0;break;case d:return ie=K._init,X(ie(K._payload),ne,L,W,J)}}if(ie)return J=J(K),ie=W===""?"."+T(K,0):W,k(J)?(L="",ie!=null&&(L=ie.replace(D,"$&/")+"/"),X(J,ne,L,"",function(ce){return ce})):J!=null&&(N(J)&&(J=C(J,L+(J.key==null||K&&K.key===J.key?"":(""+J.key).replace(D,"$&/")+"/")+ie)),ne.push(J)),1;ie=0;var Ae=W===""?".":W+":";if(k(K))for(var oe=0;oe<K.length;oe++)W=K[oe],te=Ae+T(W,oe),ie+=X(W,ne,L,te,J);else if(oe=h(K),typeof oe=="function")for(K=oe.call(K),oe=0;!(W=K.next()).done;)W=W.value,te=Ae+T(W,oe++),ie+=X(W,ne,L,te,J);else if(te==="object"){if(typeof K.then=="function")return X(R(K),ne,L,W,J);throw ne=String(K),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ie}function q(K,ne,L){if(K==null)return K;var W=[],J=0;return X(K,W,"","",function(te){return ne.call(L,te,J++)}),W}function Z(K){if(K._status===-1){var ne=K._result;ne=ne(),ne.then(function(L){(K._status===0||K._status===-1)&&(K._status=1,K._result=L)},function(L){(K._status===0||K._status===-1)&&(K._status=2,K._result=L)}),K._status===-1&&(K._status=0,K._result=ne)}if(K._status===1)return K._result.default;throw K._result}var H=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function V(){}return ln.Children={map:q,forEach:function(K,ne,L){q(K,function(){ne.apply(this,arguments)},L)},count:function(K){var ne=0;return q(K,function(){ne++}),ne},toArray:function(K){return q(K,function(ne){return ne})||[]},only:function(K){if(!N(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},ln.Component=b,ln.Fragment=r,ln.Profiler=a,ln.PureComponent=_,ln.StrictMode=n,ln.Suspense=l,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ln.__COMPILER_RUNTIME={__proto__:null,c:function(K){return B.H.useMemoCache(K)}},ln.cache=function(K){return function(){return K.apply(null,arguments)}},ln.cloneElement=function(K,ne,L){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var W=g({},K.props),J=K.key,te=void 0;if(ne!=null)for(ie in ne.ref!==void 0&&(te=void 0),ne.key!==void 0&&(J=""+ne.key),ne)!F.call(ne,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&ne.ref===void 0||(W[ie]=ne[ie]);var ie=arguments.length-2;if(ie===1)W.children=L;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];W.children=Ae}return w(K.type,J,void 0,void 0,te,W)},ln.createContext=function(K){return K={$$typeof:i,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:s,_context:K},K},ln.createElement=function(K,ne,L){var W,J={},te=null;if(ne!=null)for(W in ne.key!==void 0&&(te=""+ne.key),ne)F.call(ne,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(J[W]=ne[W]);var ie=arguments.length-2;if(ie===1)J.children=L;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];J.children=Ae}if(K&&K.defaultProps)for(W in ie=K.defaultProps,ie)J[W]===void 0&&(J[W]=ie[W]);return w(K,te,void 0,void 0,null,J)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(K){return{$$typeof:o,render:K}},ln.isValidElement=N,ln.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:Z}},ln.memo=function(K,ne){return{$$typeof:u,type:K,compare:ne===void 0?null:ne}},ln.startTransition=function(K){var ne=B.T,L={};B.T=L;try{var W=K(),J=B.S;J!==null&&J(L,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(V,H)}catch(te){H(te)}finally{B.T=ne}},ln.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ln.use=function(K){return B.H.use(K)},ln.useActionState=function(K,ne,L){return B.H.useActionState(K,ne,L)},ln.useCallback=function(K,ne){return B.H.useCallback(K,ne)},ln.useContext=function(K){return B.H.useContext(K)},ln.useDebugValue=function(){},ln.useDeferredValue=function(K,ne){return B.H.useDeferredValue(K,ne)},ln.useEffect=function(K,ne,L){var W=B.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(K,ne)},ln.useId=function(){return B.H.useId()},ln.useImperativeHandle=function(K,ne,L){return B.H.useImperativeHandle(K,ne,L)},ln.useInsertionEffect=function(K,ne){return B.H.useInsertionEffect(K,ne)},ln.useLayoutEffect=function(K,ne){return B.H.useLayoutEffect(K,ne)},ln.useMemo=function(K,ne){return B.H.useMemo(K,ne)},ln.useOptimistic=function(K,ne){return B.H.useOptimistic(K,ne)},ln.useReducer=function(K,ne,L){return B.H.useReducer(K,ne,L)},ln.useRef=function(K){return B.H.useRef(K)},ln.useState=function(K){return B.H.useState(K)},ln.useSyncExternalStore=function(K,ne,L){return B.H.useSyncExternalStore(K,ne,L)},ln.useTransition=function(){return B.H.useTransition()},ln.version="19.1.1",ln}var JM;function Lx(){return JM||(JM=1,sB.exports=Ide()),sB.exports}var j=Lx();const lt=bl(j),jde=Nde({__proto__:null,default:lt},[j]);var iB={exports:{}},ib={},oB={exports:{}},lB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZM;function Fde(){return ZM||(ZM=1,function(e){function t(q,Z){var H=q.length;q.push(Z);e:for(;0<H;){var V=H-1>>>1,K=q[V];if(0<a(K,Z))q[V]=Z,q[H]=K,H=V;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var Z=q[0],H=q.pop();if(H!==Z){q[0]=H;e:for(var V=0,K=q.length,ne=K>>>1;V<ne;){var L=2*(V+1)-1,W=q[L],J=L+1,te=q[J];if(0>a(W,H))J<K&&0>a(te,W)?(q[V]=te,q[J]=H,V=J):(q[V]=W,q[L]=H,V=L);else if(J<K&&0>a(te,H))q[V]=te,q[J]=H,V=J;else break e}}return Z}function a(q,Z){var H=q.sortIndex-Z.sortIndex;return H!==0?H:q.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,h=3,p=!1,g=!1,v=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function k(q){for(var Z=r(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=q)n(u),Z.sortIndex=Z.expirationTime,t(l,Z);else break;Z=r(u)}}function B(q){if(v=!1,k(q),!g)if(r(l)!==null)g=!0,F||(F=!0,T());else{var Z=r(u);Z!==null&&X(B,Z.startTime-q)}}var F=!1,w=-1,C=5,N=-1;function P(){return b?!0:!(e.unstable_now()-N<C)}function D(){if(b=!1,F){var q=e.unstable_now();N=q;var Z=!0;try{e:{g=!1,v&&(v=!1,_(w),w=-1),p=!0;var H=h;try{t:{for(k(q),f=r(l);f!==null&&!(f.expirationTime>q&&P());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var K=V(f.expirationTime<=q);if(q=e.unstable_now(),typeof K=="function"){f.callback=K,k(q),Z=!0;break t}f===r(l)&&n(l),k(q)}else n(l);f=r(l)}if(f!==null)Z=!0;else{var ne=r(u);ne!==null&&X(B,ne.startTime-q),Z=!1}}break e}finally{f=null,h=H,p=!1}Z=void 0}}finally{Z?T():F=!1}}}var T;if(typeof S=="function")T=function(){S(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,R=U.port2;U.port1.onmessage=D,T=function(){R.postMessage(null)}}else T=function(){y(D,0)};function X(q,Z){w=y(function(){q(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(q){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var H=h;h=Z;try{return q()}finally{h=H}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var H=h;h=q;try{return Z()}finally{h=H}},e.unstable_scheduleCallback=function(q,Z,H){var V=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?V+H:V):H=V,q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,q={id:d++,callback:Z,priorityLevel:q,startTime:H,expirationTime:K,sortIndex:-1},H>V?(q.sortIndex=H,t(u,q),r(l)===null&&q===r(u)&&(v?(_(w),w=-1):v=!0,X(B,H-V))):(q.sortIndex=K,t(l,q),g||p||(g=!0,F||(F=!0,T()))),q},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(q){var Z=h;return function(){var H=h;h=Z;try{return q.apply(this,arguments)}finally{h=H}}}}(lB)),lB}var eU;function Ode(){return eU||(eU=1,oB.exports=Fde()),oB.exports}var cB={exports:{}},Io={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tU;function Dde(){if(tU)return Io;tU=1;var e=Lx();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:l,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Io.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Io.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(l,u,null,d)},Io.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},Io.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},Io.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Io.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(l,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Io.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},Io.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Io.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},Io.requestFormReset=function(l){n.d.r(l)},Io.unstable_batchedUpdates=function(l,u){return l(u)},Io.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Io.useFormStatus=function(){return i.H.useHostTransitionStatus()},Io.version="19.1.1",Io}var rU;function TW(){if(rU)return cB.exports;rU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),cB.exports=Dde(),cB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nU;function Rde(){if(nU)return ib;nU=1;var e=Ode(),t=Lx(),r=TW();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,x=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(x=m.return),A=m.return;while(A)}return m.tag===3?x:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function l(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var x=A,E=m;;){var M=x.return;if(M===null)break;var z=M.alternate;if(z===null){if(E=M.return,E!==null){x=E;continue}break}if(M.child===z.child){for(z=M.child;z;){if(z===x)return o(M),A;if(z===E)return o(M),m;z=z.sibling}throw Error(n(188))}if(x.return!==E.return)x=M,E=z;else{for(var le=!1,be=M.child;be;){if(be===x){le=!0,x=M,E=z;break}if(be===E){le=!0,E=M,x=z;break}be=be.sibling}if(!le){for(be=z.child;be;){if(be===x){le=!0,x=z,E=M;break}if(be===E){le=!0,E=z,x=M;break}be=be.sibling}if(!le)throw Error(n(189))}}if(x.alternate!==E)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function T(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var U=Symbol.for("react.client.reference");function R(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===U?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case B:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case S:return(A.displayName||"Context")+".Provider";case _:return(A._context.displayName||"Context")+".Consumer";case k:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case w:return m=A.displayName||null,m!==null?m:R(A.type)||"Memo";case C:m=A._payload,A=A._init;try{return R(A(m))}catch{}}return null}var X=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},V=[],K=-1;function ne(A){return{current:A}}function L(A){0>K||(A.current=V[K],V[K]=null,K--)}function W(A,m){K++,V[K]=A.current,A.current=m}var J=ne(null),te=ne(null),ie=ne(null),Ae=ne(null);function oe(A,m){switch(W(ie,m),W(te,A),W(J,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?EM(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=EM(m),A=CM(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}L(J),W(J,A)}function ce(){L(J),L(te),L(ie)}function ge(A){A.memoizedState!==null&&W(Ae,A);var m=J.current,x=CM(m,A.type);m!==x&&(W(te,A),W(J,x))}function je(A){te.current===A&&(L(J),L(te)),Ae.current===A&&(L(Ae),eb._currentValue=H)}var re=Object.prototype.hasOwnProperty,Se=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,_e=e.unstable_shouldYield,he=e.unstable_requestPaint,Ie=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Pe=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ze=e.log,ot=e.unstable_setDisableYieldValue,mt=null,Bt=null;function Lt(A){if(typeof Ze=="function"&&ot(A),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(mt,A)}catch{}}var Ot=Math.clz32?Math.clz32:Nr,Qt=Math.log,bt=Math.LN2;function Nr(A){return A>>>=0,A===0?32:31-(Qt(A)/bt|0)|0}var rr=256,nn=4194304;function Cr(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Vr(A,m,x){var E=A.pendingLanes;if(E===0)return 0;var M=0,z=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var be=E&134217727;return be!==0?(E=be&~z,E!==0?M=Cr(E):(le&=be,le!==0?M=Cr(le):x||(x=be&~A,x!==0&&(M=Cr(x))))):(be=E&~z,be!==0?M=Cr(be):le!==0?M=Cr(le):x||(x=E&~A,x!==0&&(M=Cr(x)))),M===0?0:m!==0&&m!==M&&(m&z)===0&&(z=M&-M,x=m&-m,z>=x||z===32&&(x&4194048)!==0)?m:M}function Fn(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function jr(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var A=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),A}function pt(){var A=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),A}function Je(A){for(var m=[],x=0;31>x;x++)m.push(A);return m}function gt(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function dt(A,m,x,E,M,z){var le=A.pendingLanes;A.pendingLanes=x,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=x,A.entangledLanes&=x,A.errorRecoveryDisabledLanes&=x,A.shellSuspendCounter=0;var be=A.entanglements,Re=A.expirationTimes,it=A.hiddenUpdates;for(x=le&~x;0<x;){var Ct=31-Ot(x),It=1<<Ct;be[Ct]=0,Re[Ct]=-1;var At=it[Ct];if(At!==null)for(it[Ct]=null,Ct=0;Ct<At.length;Ct++){var ft=At[Ct];ft!==null&&(ft.lane&=-536870913)}x&=~It}E!==0&&Dt(A,E,0),z!==0&&M===0&&A.tag!==0&&(A.suspendedLanes|=z&~(le&~m))}function Dt(A,m,x){A.pendingLanes|=m,A.suspendedLanes&=~m;var E=31-Ot(m);A.entangledLanes|=m,A.entanglements[E]=A.entanglements[E]|1073741824|x&4194090}function zt(A,m){var x=A.entangledLanes|=m;for(A=A.entanglements;x;){var E=31-Ot(x),M=1<<E;M&m|A[E]&m&&(A[E]|=m),x&=~M}}function Pr(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Xr(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function gn(){var A=Z.p;return A!==0?A:(A=window.event,A===void 0?32:VM(A.type))}function vn(A,m){var x=Z.p;try{return Z.p=A,m()}finally{Z.p=x}}var $t=Math.random().toString(36).slice(2),tn="__reactFiber$"+$t,en="__reactProps$"+$t,cr="__reactContainer$"+$t,Yr="__reactEvents$"+$t,ta="__reactListeners$"+$t,fe="__reactHandles$"+$t,Be="__reactResources$"+$t,Ee="__reactMarker$"+$t;function Ce(A){delete A[tn],delete A[en],delete A[Yr],delete A[ta],delete A[fe]}function Ne(A){var m=A[tn];if(m)return m;for(var x=A.parentNode;x;){if(m=x[cr]||x[tn]){if(x=m.alternate,m.child!==null||x!==null&&x.child!==null)for(A=kM(A);A!==null;){if(x=A[tn])return x;A=kM(A)}return m}A=x,x=A.parentNode}return null}function Te(A){if(A=A[tn]||A[cr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Ye(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function ut(A){var m=A[Be];return m||(m=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ee]=!0}var tt=new Set,at={};function Tt(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(at[A]=m,A=0;A<m.length;A++)tt.add(m[A])}var Yt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Kt={};function _r(A){return re.call(Kt,A)?!0:re.call(Ht,A)?!1:Yt.test(A)?Kt[A]=!0:(Ht[A]=!0,!1)}function an(A,m,x){if(_r(m))if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var E=m.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+x)}}function sn(A,m,x){if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+x)}}function dn(A,m,x,E){if(E===null)A.removeAttribute(x);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(x);return}A.setAttributeNS(m,x,""+E)}}var ds,bo;function As(A){if(ds===void 0)try{throw Error()}catch(x){var m=x.stack.trim().match(/\n( *(at )?)/);ds=m&&m[1]||"",bo=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+A+bo}var Zs=!1;function Fs(A,m){if(!A||Zs)return"";Zs=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(m){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(ft){var At=ft}Reflect.construct(A,[],It)}else{try{It.call()}catch(ft){At=ft}A.call(It.prototype)}}else{try{throw Error()}catch(ft){At=ft}(It=A())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(ft){if(ft&&At&&typeof ft.stack=="string")return[ft.stack,At.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=E.DetermineComponentFrameRoot(),le=z[0],be=z[1];if(le&&be){var Re=le.split(`
`),it=be.split(`
`);for(M=E=0;E<Re.length&&!Re[E].includes("DetermineComponentFrameRoot");)E++;for(;M<it.length&&!it[M].includes("DetermineComponentFrameRoot");)M++;if(E===Re.length||M===it.length)for(E=Re.length-1,M=it.length-1;1<=E&&0<=M&&Re[E]!==it[M];)M--;for(;1<=E&&0<=M;E--,M--)if(Re[E]!==it[M]){if(E!==1||M!==1)do if(E--,M--,0>M||Re[E]!==it[M]){var Ct=`
`+Re[E].replace(" at new "," at ");return A.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",A.displayName)),Ct}while(1<=E&&0<=M);break}}}finally{Zs=!1,Error.prepareStackTrace=x}return(x=A?A.displayName||A.name:"")?As(x):""}function gi(A){switch(A.tag){case 26:case 27:case 5:return As(A.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 15:return Fs(A.type,!1);case 11:return Fs(A.type.render,!1);case 1:return Fs(A.type,!0);case 31:return As("Activity");default:return""}}function xa(A){try{var m="";do m+=gi(A),A=A.return;while(A);return m}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function ei(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Rd(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function yh(A){var m=Rd(A)?"checked":"value",x=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),E=""+A[m];if(!A.hasOwnProperty(m)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var M=x.get,z=x.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return M.call(this)},set:function(le){E=""+le,z.call(this,le)}}),Object.defineProperty(A,m,{enumerable:x.enumerable}),{getValue:function(){return E},setValue:function(le){E=""+le},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Qc(A){A._valueTracker||(A._valueTracker=yh(A))}function qA(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var x=m.getValue(),E="";return A&&(E=Rd(A)?A.checked?"true":"false":A.value),A=E,A!==x?(m.setValue(A),!0):!1}function vi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Pd=/[\n"\\]/g;function On(A){return A.replace(Pd,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function xi(A,m,x,E,M,z,le,be){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),m!=null?le==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+ei(m)):A.value!==""+ei(m)&&(A.value=""+ei(m)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),m!=null?Vc(A,le,ei(m)):x!=null?Vc(A,le,ei(x)):E!=null&&A.removeAttribute("value"),M==null&&z!=null&&(A.defaultChecked=!!z),M!=null&&(A.checked=M&&typeof M!="function"&&typeof M!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+ei(be):A.removeAttribute("name")}function Hc(A,m,x,E,M,z,le,be){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(A.type=z),m!=null||x!=null){if(!(z!=="submit"&&z!=="reset"||m!=null))return;x=x!=null?""+ei(x):"",m=m!=null?""+ei(m):x,be||m===A.value||(A.value=m),A.defaultValue=m}E=E??M,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=be?A.checked:!!E,A.defaultChecked=!!E,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function Vc(A,m,x){m==="number"&&vi(A.ownerDocument)===A||A.defaultValue===""+x||(A.defaultValue=""+x)}function wl(A,m,x,E){if(A=A.options,m){m={};for(var M=0;M<x.length;M++)m["$"+x[M]]=!0;for(x=0;x<A.length;x++)M=m.hasOwnProperty("$"+A[x].value),A[x].selected!==M&&(A[x].selected=M),M&&E&&(A[x].defaultSelected=!0)}else{for(x=""+ei(x),m=null,M=0;M<A.length;M++){if(A[M].value===x){A[M].selected=!0,E&&(A[M].defaultSelected=!0);return}m!==null||A[M].disabled||(m=A[M])}m!==null&&(m.selected=!0)}}function Vn(A,m,x){if(m!=null&&(m=""+ei(m),m!==A.value&&(A.value=m),x==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=x!=null?""+ei(x):""}function zc(A,m,x,E){if(m==null){if(E!=null){if(x!=null)throw Error(n(92));if(X(E)){if(1<E.length)throw Error(n(93));E=E[0]}x=E}x==null&&(x=""),m=x}x=ei(m),A.defaultValue=x,E=A.textContent,E===x&&E!==""&&E!==null&&(A.value=E)}function yo(A,m){if(m){var x=A.firstChild;if(x&&x===A.lastChild&&x.nodeType===3){x.nodeValue=m;return}}A.textContent=m}var ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wh(A,m,x){var E=m.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?E?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":E?A.setProperty(m,x):typeof x!="number"||x===0||ec.has(m)?m==="float"?A.cssFloat=x:A[m]=(""+x).trim():A[m]=x+"px"}function WA(A,m,x){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,x!=null){for(var E in x)!x.hasOwnProperty(E)||m!=null&&m.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var M in m)E=m[M],m.hasOwnProperty(M)&&x[M]!==E&&wh(A,M,E)}else for(var z in m)m.hasOwnProperty(z)&&wh(A,z,m[z])}function XA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ld=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(A){return Ld.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var El=null;function ca(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var nc=null,Cl=null;function Br(A){var m=Te(A);if(m&&(A=m.stateNode)){var x=A[en]||null;e:switch(A=m.stateNode,m.type){case"input":if(xi(A,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),m=x.name,x.type==="radio"&&m!=null){for(x=A;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+On(""+m)+'"][type="radio"]'),m=0;m<x.length;m++){var E=x[m];if(E!==A&&E.form===A.form){var M=E[en]||null;if(!M)throw Error(n(90));xi(E,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(m=0;m<x.length;m++)E=x[m],E.form===A.form&&qA(E)}break e;case"textarea":Vn(A,x.value,x.defaultValue);break e;case"select":m=x.value,m!=null&&wl(A,!!x.multiple,m,!1)}}}var _l=!1;function Eh(A,m,x){if(_l)return A(m,x);_l=!0;try{var E=A(m);return E}finally{if(_l=!1,(nc!==null||Cl!==null)&&(q2(),nc&&(m=nc,A=Cl,Cl=nc=null,Br(m),A)))for(m=0;m<A.length;m++)Br(A[m])}}function ji(A,m){var x=A.stateNode;if(x===null)return null;var E=x[en]||null;if(E===null)return null;x=E[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(x&&typeof x!="function")throw Error(n(231,m,typeof x));return x}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=!1;if(wo)try{var Sl={};Object.defineProperty(Sl,"passive",{get:function(){ro=!0}}),window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,Sl)}catch{ro=!1}var Eo=null,$c=null,ac=null;function YA(){if(ac)return ac;var A,m=$c,x=m.length,E,M="value"in Eo?Eo.value:Eo.textContent,z=M.length;for(A=0;A<x&&m[A]===M[A];A++);var le=x-A;for(E=1;E<=le&&m[x-E]===M[z-E];E++);return ac=M.slice(A,1<E?1-E:void 0)}function Co(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Fi(){return!0}function Nl(){return!1}function fs(A){function m(x,E,M,z,le){this._reactName=x,this._targetInst=M,this.type=E,this.nativeEvent=z,this.target=le,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(x=A[be],this[be]=x?x(z):z[be]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Fi:Nl,this.isPropagationStopped=Nl,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),m}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=fs(xn),kl=d({},xn,{view:0,detail:0}),JA=fs(kl),Lu,Mu,al,Oi=d({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==al&&(al&&A.type==="mousemove"?(Lu=A.screenX-al.screenX,Mu=A.screenY-al.screenY):Mu=Lu=0,al=A),Lu)},movementY:function(A){return"movementY"in A?A.movementY:Mu}}),hs=fs(Oi),Ch=d({},Oi,{dataTransfer:0}),Gc=fs(Ch),bi=d({},kl,{relatedTarget:0}),qc=fs(bi),sc=d({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Md=fs(sc),Uu=d({},xn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Ud=fs(Uu),ZA=d({},xn,{data:0}),Qu=fs(ZA),Wc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=Qd[A])?!!m[A]:!1}function Xc(){return Vu}var _h=d({},kl,{key:function(A){if(A.key){var m=Wc[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=Co(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Hu[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(A){return A.type==="keypress"?Co(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Co(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),ic=fs(_h),Yc=d({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=fs(Yc),Di=d({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),Hd=fs(Di),G=d({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),de=fs(G),Fe=d({},Oi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=fs(Fe),Ke=d({},xn,{newState:0,oldState:0}),xt=fs(Ke),Pt=[9,13,27,32],Jt=wo&&"CompositionEvent"in window,O=null;wo&&"documentMode"in document&&(O=document.documentMode);var ee=wo&&"TextEvent"in window&&!O,se=wo&&(!Jt||O&&8<O&&11>=O),xe=" ",ze=!1;function st(A,m){switch(A){case"keyup":return Pt.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Tr=!1;function bn(A,m){switch(A){case"compositionend":return Mt(m);case"keypress":return m.which!==32?null:(ze=!0,xe);case"textInput":return A=m.data,A===xe&&ze?null:A;default:return null}}function Gr(A,m){if(Tr)return A==="compositionend"||!Jt&&st(A,m)?(A=YA(),ac=$c=Eo=null,Tr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return se&&m.locale!=="ko"?null:m.data;default:return null}}var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ra(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!zn[A.type]:m==="textarea"}function Bl(A,m,x,E){nc?Cl?Cl.push(E):Cl=[E]:nc=E,m=eE(m,"onChange"),0<m.length&&(x=new Kc("onChange","change",null,x,E),A.push({event:x,listeners:m}))}var Ja=null,_o=null;function Jc(A){vM(A,0)}function Vd(A){var m=Ye(A);if(qA(m))return A}function Sh(A,m){if(A==="change")return m}var ef=!1;if(wo){var Os;if(wo){var zd="oninput"in document;if(!zd){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),zd=typeof tf.oninput=="function"}Os=zd}else Os=!1;ef=Os&&(!document.documentMode||9<document.documentMode)}function rf(){Ja&&(Ja.detachEvent("onpropertychange",Nh),_o=Ja=null)}function Nh(A){if(A.propertyName==="value"&&Vd(_o)){var m=[];Bl(m,_o,A,ca(A)),Eh(Jc,m)}}function So(A,m,x){A==="focusin"?(rf(),Ja=m,_o=x,Ja.attachEvent("onpropertychange",Nh)):A==="focusout"&&rf()}function y1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Vd(_o)}function Em(A,m){if(A==="click")return Vd(m)}function ug(A,m){if(A==="input"||A==="change")return Vd(m)}function Tl(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ti=typeof Object.is=="function"?Object.is:Tl;function $d(A,m){if(ti(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var x=Object.keys(A),E=Object.keys(m);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var M=x[E];if(!re.call(m,M)||!ti(A[M],m[M]))return!1}return!0}function Cm(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function $u(A,m){var x=Cm(A);A=0;for(var E;x;){if(x.nodeType===3){if(E=A+x.textContent.length,A<=m&&E>=m)return{node:x,offset:m-A};A=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Cm(x)}}function Kd(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?Kd(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function no(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=vi(A.document);m instanceof A.HTMLIFrameElement;){try{var x=typeof m.contentWindow.location.href=="string"}catch{x=!1}if(x)A=m.contentWindow;else break;m=vi(A.document)}return m}function yi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var Gd=wo&&"documentMode"in document&&11>=document.documentMode,No=null,oc=null,Zc=null,lc=!1;function Va(A,m,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;lc||No==null||No!==vi(E)||(E=No,"selectionStart"in E&&yi(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Zc&&$d(Zc,E)||(Zc=E,E=eE(oc,"onSelect"),0<E.length&&(m=new Kc("onSelect","select",null,m,x),A.push({event:m,listeners:E}),m.target=No)))}function cc(A,m){var x={};return x[A.toLowerCase()]=m.toLowerCase(),x["Webkit"+A]="webkit"+m,x["Moz"+A]="moz"+m,x}var ms={animationend:cc("Animation","AnimationEnd"),animationiteration:cc("Animation","AnimationIteration"),animationstart:cc("Animation","AnimationStart"),transitionrun:cc("Transition","TransitionRun"),transitionstart:cc("Transition","TransitionStart"),transitioncancel:cc("Transition","TransitionCancel"),transitionend:cc("Transition","TransitionEnd")},ko={},nf={};wo&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function eu(A){if(ko[A])return ko[A];if(!ms[A])return A;var m=ms[A],x;for(x in m)if(m.hasOwnProperty(x)&&x in nf)return ko[A]=m[x];return A}var kh=eu("animationend"),qd=eu("animationiteration"),Wd=eu("animationstart"),Xd=eu("transitionrun"),af=eu("transitionstart"),Bh=eu("transitioncancel"),Yd=eu("transitionend"),Ku=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function za(A,m){Ku.set(A,m),Tt(m,[A])}var sl=new WeakMap;function hn(A,m){if(typeof A=="object"&&A!==null){var x=sl.get(A);return x!==void 0?x:(m={value:A,source:m,stack:xa(m)},sl.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var mn=[],ba=0,Za=0;function Il(){for(var A=ba,m=Za=ba=0;m<A;){var x=mn[m];mn[m++]=null;var E=mn[m];mn[m++]=null;var M=mn[m];mn[m++]=null;var z=mn[m];if(mn[m++]=null,E!==null&&M!==null){var le=E.pending;le===null?M.next=M:(M.next=le.next,le.next=M),E.pending=M}z!==0&&dg(x,M,z)}}function Jd(A,m,x,E){mn[ba++]=A,mn[ba++]=m,mn[ba++]=x,mn[ba++]=E,Za|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function Zd(A,m,x,E){return Jd(A,m,x,E),of(A)}function Gu(A,m){return Jd(A,null,null,m),of(A)}function dg(A,m,x){A.lanes|=x;var E=A.alternate;E!==null&&(E.lanes|=x);for(var M=!1,z=A.return;z!==null;)z.childLanes|=x,E=z.alternate,E!==null&&(E.childLanes|=x),z.tag===22&&(A=z.stateNode,A===null||A._visibility&1||(M=!0)),A=z,z=z.return;return A.tag===3?(z=A.stateNode,M&&m!==null&&(M=31-Ot(x),A=z.hiddenUpdates,E=A[M],E===null?A[M]=[m]:E.push(m),m.lane=x|536870912),z):null}function of(A){if(50<K1)throw K1=0,Nk=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ri={};function jl(A,m,x,E){this.tag=A,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(A,m,x,E){return new jl(A,m,x,E)}function Th(A){return A=A.prototype,!(!A||!A.isReactComponent)}function tu(A,m){var x=A.alternate;return x===null?(x=Ri(A.tag,m,A.key,A.mode),x.elementType=A.elementType,x.type=A.type,x.stateNode=A.stateNode,x.alternate=A,A.alternate=x):(x.pendingProps=m,x.type=A.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=A.flags&65011712,x.childLanes=A.childLanes,x.lanes=A.lanes,x.child=A.child,x.memoizedProps=A.memoizedProps,x.memoizedState=A.memoizedState,x.updateQueue=A.updateQueue,m=A.dependencies,x.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},x.sibling=A.sibling,x.index=A.index,x.ref=A.ref,x.refCleanup=A.refCleanup,x}function _m(A,m){A.flags&=65011714;var x=A.alternate;return x===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=x.childLanes,A.lanes=x.lanes,A.child=x.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=x.memoizedProps,A.memoizedState=x.memoizedState,A.updateQueue=x.updateQueue,A.type=x.type,m=x.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function lf(A,m,x,E,M,z){var le=0;if(E=A,typeof A=="function")Th(A)&&(le=1);else if(typeof A=="string")le=Ade(A,x,J.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case N:return A=Ri(31,x,m,M),A.elementType=N,A.lanes=z,A;case g:return qu(x.children,M,z,m);case v:le=8,M|=24;break;case b:return A=Ri(12,x,m,M|2),A.elementType=b,A.lanes=z,A;case B:return A=Ri(13,x,m,M),A.elementType=B,A.lanes=z,A;case F:return A=Ri(19,x,m,M),A.elementType=F,A.lanes=z,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case S:le=10;break e;case _:le=9;break e;case k:le=11;break e;case w:le=14;break e;case C:le=16,E=null;break e}le=29,x=Error(n(130,A===null?"null":typeof A,"")),E=null}return m=Ri(le,x,m,M),m.elementType=A,m.type=E,m.lanes=z,m}function qu(A,m,x,E){return A=Ri(7,A,E,m),A.lanes=x,A}function Ag(A,m,x){return A=Ri(6,A,null,m),A.lanes=x,A}function Sm(A,m,x){return m=Ri(4,A.children!==null?A.children:[],A.key,m),m.lanes=x,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var eA=[],Wu=0,Ih=null,fg=0,Fl=[],il=0,cf=null,Xu=1,Yu="";function uf(A,m){eA[Wu++]=fg,eA[Wu++]=Ih,Ih=A,fg=m}function v2(A,m,x){Fl[il++]=Xu,Fl[il++]=Yu,Fl[il++]=cf,cf=A;var E=Xu;A=Yu;var M=32-Ot(E)-1;E&=~(1<<M),x+=1;var z=32-Ot(m)+M;if(30<z){var le=M-M%5;z=(E&(1<<le)-1).toString(32),E>>=le,M-=le,Xu=1<<32-Ot(m)+M|x<<M|E,Yu=z+A}else Xu=1<<z|x<<M|E,Yu=A}function Nm(A){A.return!==null&&(uf(A,1),v2(A,1,0))}function km(A){for(;A===Ih;)Ih=eA[--Wu],eA[Wu]=null,fg=eA[--Wu],eA[Wu]=null;for(;A===cf;)cf=Fl[--il],Fl[il]=null,Yu=Fl[--il],Fl[il]=null,Xu=Fl[--il],Fl[il]=null}var Ds=null,$a=null,Un=!1,tA=null,ru=!1,w1=Error(n(519));function df(A){var m=Error(n(418,""));throw jh(hn(m,A)),w1}function x2(A){var m=A.stateNode,x=A.type,E=A.memoizedProps;switch(m[tn]=A,m[en]=E,x){case"dialog":Sn("cancel",m),Sn("close",m);break;case"iframe":case"object":case"embed":Sn("load",m);break;case"video":case"audio":for(x=0;x<q1.length;x++)Sn(q1[x],m);break;case"source":Sn("error",m);break;case"img":case"image":case"link":Sn("error",m),Sn("load",m);break;case"details":Sn("toggle",m);break;case"input":Sn("invalid",m),Hc(m,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),Qc(m);break;case"select":Sn("invalid",m);break;case"textarea":Sn("invalid",m),zc(m,E.value,E.defaultValue,E.children),Qc(m)}x=E.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||m.textContent===""+x||E.suppressHydrationWarning===!0||wM(m.textContent,x)?(E.popover!=null&&(Sn("beforetoggle",m),Sn("toggle",m)),E.onScroll!=null&&Sn("scroll",m),E.onScrollEnd!=null&&Sn("scrollend",m),E.onClick!=null&&(m.onclick=tE),m=!0):m=!1,m||df(A)}function Ju(A){for(Ds=A.return;Ds;)switch(Ds.tag){case 5:case 13:ru=!1;return;case 27:case 3:ru=!0;return;default:Ds=Ds.return}}function ao(A){if(A!==Ds)return!1;if(!Un)return Ju(A),Un=!0,!1;var m=A.tag,x;if((x=m!==3&&m!==27)&&((x=m===5)&&(x=A.type,x=!(x!=="form"&&x!=="button")||Vk(A.type,A.memoizedProps)),x=!x),x&&$a&&df(A),Ju(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(x=A.data,x==="/$"){if(m===0){$a=id(A.nextSibling);break e}m--}else x!=="$"&&x!=="$!"&&x!=="$?"||m++;A=A.nextSibling}$a=null}}else m===27?(m=$a,Wh(A.type)?(A=Gk,Gk=null,$a=A):$a=m):$a=Ds?id(A.stateNode.nextSibling):null;return!0}function ol(){$a=Ds=null,Un=!1}function b2(){var A=tA;return A!==null&&(Rl===null?Rl=A:Rl.push.apply(Rl,A),tA=null),A}function jh(A){tA===null?tA=[A]:tA.push(A)}var nu=ne(null),ni=null,Zu=null;function rA(A,m,x){W(nu,m._currentValue),m._currentValue=x}function au(A){A._currentValue=nu.current,L(nu)}function hg(A,m,x){for(;A!==null;){var E=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),A===x)break;A=A.return}}function mg(A,m,x,E){var M=A.child;for(M!==null&&(M.return=A);M!==null;){var z=M.dependencies;if(z!==null){var le=M.child;z=z.firstContext;e:for(;z!==null;){var be=z;z=M;for(var Re=0;Re<m.length;Re++)if(be.context===m[Re]){z.lanes|=x,be=z.alternate,be!==null&&(be.lanes|=x),hg(z.return,x,A),E||(le=null);break e}z=be.next}}else if(M.tag===18){if(le=M.return,le===null)throw Error(n(341));le.lanes|=x,z=le.alternate,z!==null&&(z.lanes|=x),hg(le,x,A),le=null}else le=M.child;if(le!==null)le.return=M;else for(le=M;le!==null;){if(le===A){le=null;break}if(M=le.sibling,M!==null){M.return=le.return,le=M;break}le=le.return}M=le}}function Fh(A,m,x,E){A=null;for(var M=m,z=!1;M!==null;){if(!z){if((M.flags&524288)!==0)z=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var le=M.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var be=M.type;ti(M.pendingProps.value,le.value)||(A!==null?A.push(be):A=[be])}}else if(M===Ae.current){if(le=M.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(A!==null?A.push(eb):A=[eb])}M=M.return}A!==null&&mg(m,A,x,E),m.flags|=262144}function pg(A){for(A=A.firstContext;A!==null;){if(!ti(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function su(A){ni=A,Zu=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Rs(A){return gg(ni,A)}function nA(A,m){return ni===null&&su(A),gg(A,m)}function gg(A,m){var x=m._currentValue;if(m={context:m,memoizedValue:x,next:null},Zu===null){if(A===null)throw Error(n(308));Zu=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else Zu=Zu.next=m;return x}var J4=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(x,E){A.push(E)}};this.abort=function(){m.aborted=!0,A.forEach(function(x){return x()})}},y2=e.unstable_scheduleCallback,Z4=e.unstable_NormalPriority,Ps={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E1(){return{controller:new J4,data:new Map,refCount:0}}function Bm(A){A.refCount--,A.refCount===0&&y2(Z4,function(){A.controller.abort()})}var Tm=null,C1=0,Af=0,ed=null;function ek(A,m){if(Tm===null){var x=Tm=[];C1=0,Af=Ok(),ed={status:"pending",value:void 0,then:function(E){x.push(E)}}}return C1++,m.then(w2,w2),m}function w2(){if(--C1===0&&Tm!==null){ed!==null&&(ed.status="fulfilled");var A=Tm;Tm=null,Af=0,ed=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function E2(A,m){var x=[],E={status:"pending",value:null,reason:null,then:function(M){x.push(M)}};return A.then(function(){E.status="fulfilled",E.value=m;for(var M=0;M<x.length;M++)(0,x[M])(m)},function(M){for(E.status="rejected",E.reason=M,M=0;M<x.length;M++)(0,x[M])(void 0)}),E}var I=q.S;q.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&ek(A,m),I!==null&&I(A,m)};var Q=ne(null);function Y(){var A=Q.current;return A!==null?A:Ia.pooledCache}function ae(A,m){m===null?W(Q,Q.current):W(Q,m.pool)}function ue(){var A=Y();return A===null?null:{parent:Ps._currentValue,pool:A}}var me=Error(n(460)),pe=Error(n(474)),ve=Error(n(542)),we={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function nt(A,m,x){switch(x=A[x],x===void 0?A.push(m):x!==m&&(m.then(Me,Me),m=x),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Nt(A),A;default:if(typeof m.status=="string")m.then(Me,Me);else{if(A=Ia,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(E){if(m.status==="pending"){var M=m;M.status="fulfilled",M.value=E}},function(E){if(m.status==="pending"){var M=m;M.status="rejected",M.reason=E}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Nt(A),A}throw et=m,me}}var et=null;function Ge(){if(et===null)throw Error(n(459));var A=et;return et=null,A}function Nt(A){if(A===me||A===ve)throw Error(n(483))}var ht=!1;function Ue(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Et(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function kt(A,m,x){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(da&2)!==0){var M=E.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),E.pending=m,m=of(A),dg(A,null,x),m}return Jd(A,E,m,x),of(A)}function _t(A,m,x){if(m=m.updateQueue,m!==null&&(m=m.shared,(x&4194048)!==0)){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}function nr(A,m){var x=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var M=null,z=null;if(x=x.firstBaseUpdate,x!==null){do{var le={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};z===null?M=z=le:z=z.next=le,x=x.next}while(x!==null);z===null?M=z=m:z=z.next=m}else M=z=m;x={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:z,shared:E.shared,callbacks:E.callbacks},A.updateQueue=x;return}A=x.lastBaseUpdate,A===null?x.firstBaseUpdate=m:A.next=m,x.lastBaseUpdate=m}var Xt=!1;function mr(){if(Xt){var A=ed;if(A!==null)throw A}}function Zt(A,m,x,E){Xt=!1;var M=A.updateQueue;ht=!1;var z=M.firstBaseUpdate,le=M.lastBaseUpdate,be=M.shared.pending;if(be!==null){M.shared.pending=null;var Re=be,it=Re.next;Re.next=null,le===null?z=it:le.next=it,le=Re;var Ct=A.alternate;Ct!==null&&(Ct=Ct.updateQueue,be=Ct.lastBaseUpdate,be!==le&&(be===null?Ct.firstBaseUpdate=it:be.next=it,Ct.lastBaseUpdate=Re))}if(z!==null){var It=M.baseState;le=0,Ct=it=Re=null,be=z;do{var At=be.lane&-536870913,ft=At!==be.lane;if(ft?(Ln&At)===At:(E&At)===At){At!==0&&At===Af&&(Xt=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var zr=A,Ir=be;At=m;var wa=x;switch(Ir.tag){case 1:if(zr=Ir.payload,typeof zr=="function"){It=zr.call(wa,It,At);break e}It=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Ir.payload,At=typeof zr=="function"?zr.call(wa,It,At):zr,At==null)break e;It=d({},It,At);break e;case 2:ht=!0}}At=be.callback,At!==null&&(A.flags|=64,ft&&(A.flags|=8192),ft=M.callbacks,ft===null?M.callbacks=[At]:ft.push(At))}else ft={lane:At,tag:be.tag,payload:be.payload,callback:be.callback,next:null},Ct===null?(it=Ct=ft,Re=It):Ct=Ct.next=ft,le|=At;if(be=be.next,be===null){if(be=M.shared.pending,be===null)break;ft=be,be=ft.next,ft.next=null,M.lastBaseUpdate=ft,M.shared.pending=null}}while(!0);Ct===null&&(Re=It),M.baseState=Re,M.firstBaseUpdate=it,M.lastBaseUpdate=Ct,z===null&&(M.shared.lanes=0),$h|=le,A.lanes=le,A.memoizedState=It}}function Rn(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function $n(A,m){var x=A.callbacks;if(x!==null)for(A.callbacks=null,A=0;A<x.length;A++)Rn(x[A],m)}var An=ne(null),on=ne(0);function na(A,m){A=wf,W(on,A),W(An,m),wf=A|m.baseLanes}function Kn(){W(on,wf),W(An,An.current)}function qr(){wf=on.current,L(An),L(on)}var ua=0,Sr=null,Lr=null,Dn=null,Pn=!1,ai=!1,Ls=!1,es=0,ts=0,ps=null,Ol=0;function Gn(){throw Error(n(321))}function gs(A,m){if(m===null)return!1;for(var x=0;x<m.length&&x<A.length;x++)if(!ti(A[x],m[x]))return!1;return!0}function uc(A,m,x,E,M,z){return ua=z,Sr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,q.H=A===null||A.memoizedState===null?r8:n8,Ls=!1,z=x(E,M),Ls=!1,ai&&(z=ff(m,x,E,M)),aA(A),z}function aA(A){q.H=D2;var m=Lr!==null&&Lr.next!==null;if(ua=0,Dn=Lr=Sr=null,Pn=!1,ts=0,ps=null,m)throw Error(n(300));A===null||Pi||(A=A.dependencies,A!==null&&pg(A)&&(Pi=!0))}function ff(A,m,x,E){Sr=A;var M=0;do{if(ai&&(ps=null),ts=0,ai=!1,25<=M)throw Error(n(301));if(M+=1,Dn=Lr=null,A.updateQueue!=null){var z=A.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}q.H=Eue,z=m(x,E)}while(ai);return z}function sA(){var A=q.H,m=A.useState()[0];return m=typeof m.then=="function"?iA(m):m,A=A.useState()[0],(Lr!==null?Lr.memoizedState:null)!==A&&(Sr.flags|=1024),m}function Ta(){var A=es!==0;return es=0,A}function Im(A,m,x){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~x}function vg(A){if(Pn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Pn=!1}ua=0,Dn=Lr=Sr=null,ai=!1,ts=es=0,ps=null}function so(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Sr.memoizedState=Dn=A:Dn=Dn.next=A,Dn}function Ra(){if(Lr===null){var A=Sr.alternate;A=A!==null?A.memoizedState:null}else A=Lr.next;var m=Dn===null?Sr.memoizedState:Dn.next;if(m!==null)Dn=m,Lr=A;else{if(A===null)throw Sr.alternate===null?Error(n(467)):Error(n(310));Lr=A,A={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Dn===null?Sr.memoizedState=Dn=A:Dn=Dn.next=A}return Dn}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function iA(A){var m=ts;return ts+=1,ps===null&&(ps=[]),A=nt(ps,A,m),m=Sr,(Dn===null?m.memoizedState:Dn.next)===null&&(m=m.alternate,q.H=m===null||m.memoizedState===null?r8:n8),A}function Bo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return iA(A);if(A.$$typeof===S)return Rs(A)}throw Error(n(438,String(A)))}function oA(A){var m=null,x=Sr.updateQueue;if(x!==null&&(m=x.memoCache),m==null){var E=Sr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(m={data:E.data.map(function(M){return M.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),x===null&&(x=hf(),Sr.updateQueue=x),x.memoCache=m,x=m.data[m.index],x===void 0)for(x=m.data[m.index]=Array(A),E=0;E<A;E++)x[E]=P;return m.index++,x}function To(A,m){return typeof m=="function"?m(A):m}function jm(A){var m=Ra();return Oh(m,Lr,A)}function Oh(A,m,x){var E=A.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=x;var M=A.baseQueue,z=E.pending;if(z!==null){if(M!==null){var le=M.next;M.next=z.next,z.next=le}m.baseQueue=M=z,E.pending=null}if(z=A.baseState,M===null)A.memoizedState=z;else{m=M.next;var be=le=null,Re=null,it=m,Ct=!1;do{var It=it.lane&-536870913;if(It!==it.lane?(Ln&It)===It:(ua&It)===It){var At=it.revertLane;if(At===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),It===Af&&(Ct=!0);else if((ua&At)===At){it=it.next,At===Af&&(Ct=!0);continue}else It={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Re===null?(be=Re=It,le=z):Re=Re.next=It,Sr.lanes|=At,$h|=At;It=it.action,Ls&&x(z,It),z=it.hasEagerState?it.eagerState:x(z,It)}else At={lane:It,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Re===null?(be=Re=At,le=z):Re=Re.next=At,Sr.lanes|=It,$h|=It;it=it.next}while(it!==null&&it!==m);if(Re===null?le=z:Re.next=be,!ti(z,A.memoizedState)&&(Pi=!0,Ct&&(x=ed,x!==null)))throw x;A.memoizedState=z,A.baseState=le,A.baseQueue=Re,E.lastRenderedState=z}return M===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function xg(A){var m=Ra(),x=m.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=A;var E=x.dispatch,M=x.pending,z=m.memoizedState;if(M!==null){x.pending=null;var le=M=M.next;do z=A(z,le.action),le=le.next;while(le!==M);ti(z,m.memoizedState)||(Pi=!0),m.memoizedState=z,m.baseQueue===null&&(m.baseState=z),x.lastRenderedState=z}return[z,E]}function Fm(A,m,x){var E=Sr,M=Ra(),z=Un;if(z){if(x===void 0)throw Error(n(407));x=x()}else x=m();var le=!ti((Lr||M).memoizedState,x);le&&(M.memoizedState=x,Pi=!0),M=M.queue;var be=Dh.bind(null,E,M,A);if(Lh(2048,8,be,[A]),M.getSnapshot!==m||le||Dn!==null&&Dn.memoizedState.tag&1){if(E.flags|=2048,rd(9,Pm(),Om.bind(null,E,M,x,m),null),Ia===null)throw Error(n(349));z||(ua&124)!==0||bg(E,m,x)}return x}function bg(A,m,x){A.flags|=16384,A={getSnapshot:m,value:x},m=Sr.updateQueue,m===null?(m=hf(),Sr.updateQueue=m,m.stores=[A]):(x=m.stores,x===null?m.stores=[A]:x.push(A))}function Om(A,m,x,E){m.value=x,m.getSnapshot=E,C2(m)&&_2(A)}function Dh(A,m,x){return x(function(){C2(m)&&_2(A)})}function C2(A){var m=A.getSnapshot;A=A.value;try{var x=m();return!ti(A,x)}catch{return!0}}function _2(A){var m=Gu(A,2);m!==null&&pc(m,A,2)}function Dm(A){var m=so();if(typeof A=="function"){var x=A;if(A=x(),Ls){Lt(!0);try{x()}finally{Lt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:A},m}function td(A,m,x,E){return A.baseState=x,Oh(A,Lr,typeof E=="function"?E:To)}function tk(A,m,x,E,M){if(O2(A))throw Error(n(485));if(A=m.action,A!==null){var z={payload:M,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){z.listeners.push(le)}};q.T!==null?x(!0):z.isTransition=!1,E(z),x=m.pending,x===null?(z.next=m.pending=z,S2(m,z)):(z.next=x.next,m.pending=x.next=z)}}function S2(A,m){var x=m.action,E=m.payload,M=A.state;if(m.isTransition){var z=q.T,le={};q.T=le;try{var be=x(M,E),Re=q.S;Re!==null&&Re(le,be),N2(A,m,be)}catch(it){Rh(A,m,it)}finally{q.T=z}}else try{z=x(M,E),N2(A,m,z)}catch(it){Rh(A,m,it)}}function N2(A,m,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){_1(A,m,E)},function(E){return Rh(A,m,E)}):_1(A,m,x)}function _1(A,m,x){m.status="fulfilled",m.value=x,S1(m),A.state=x,m=A.pending,m!==null&&(x=m.next,x===m?A.pending=null:(x=x.next,m.next=x,S2(A,x)))}function Rh(A,m,x){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do m.status="rejected",m.reason=x,S1(m),m=m.next;while(m!==E)}A.action=null}function S1(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function N1(A,m){return m}function Rm(A,m){if(Un){var x=Ia.formState;if(x!==null){e:{var E=Sr;if(Un){if($a){t:{for(var M=$a,z=ru;M.nodeType!==8;){if(!z){M=null;break t}if(M=id(M.nextSibling),M===null){M=null;break t}}z=M.data,M=z==="F!"||z==="F"?M:null}if(M){$a=id(M.nextSibling),E=M.data==="F!";break e}}df(E)}E=!1}E&&(m=x[0])}}return x=so(),x.memoizedState=x.baseState=m,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:N1,lastRenderedState:m},x.queue=E,x=ZL.bind(null,Sr,E),E.dispatch=x,E=Dm(!1),z=rk.bind(null,Sr,!1,E.queue),E=so(),M={state:m,dispatch:null,action:A,pending:null},E.queue=M,x=tk.bind(null,Sr,M,z,x),M.dispatch=x,E.memoizedState=A,[m,x,!1]}function yg(A){var m=Ra();return Ph(m,Lr,A)}function Ph(A,m,x){if(m=Oh(A,m,N1)[0],A=jm(To)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var E=iA(m)}catch(le){throw le===me?ve:le}else E=m;m=Ra();var M=m.queue,z=M.dispatch;return x!==m.memoizedState&&(Sr.flags|=2048,rd(9,Pm(),k2.bind(null,M,x),null)),[E,z,A]}function k2(A,m){A.action=m}function B2(A){var m=Ra(),x=Lr;if(x!==null)return Ph(m,x,A);Ra(),m=m.memoizedState,x=Ra();var E=x.queue.dispatch;return x.memoizedState=A,[m,E,!1]}function rd(A,m,x,E){return A={tag:A,create:x,deps:E,inst:m,next:null},m=Sr.updateQueue,m===null&&(m=hf(),Sr.updateQueue=m),x=m.lastEffect,x===null?m.lastEffect=A.next=A:(E=x.next,x.next=A,A.next=E,m.lastEffect=A),A}function Pm(){return{destroy:void 0,resource:void 0}}function wg(){return Ra().memoizedState}function dc(A,m,x,E){var M=so();E=E===void 0?null:E,Sr.flags|=A,M.memoizedState=rd(1|m,Pm(),x,E)}function Lh(A,m,x,E){var M=Ra();E=E===void 0?null:E;var z=M.memoizedState.inst;Lr!==null&&E!==null&&gs(E,Lr.memoizedState.deps)?M.memoizedState=rd(m,z,x,E):(Sr.flags|=A,M.memoizedState=rd(1|m,z,x,E))}function k1(A,m){dc(8390656,8,A,m)}function T2(A,m){Lh(2048,8,A,m)}function B1(A,m){return Lh(4,2,A,m)}function mf(A,m){return Lh(4,4,A,m)}function I2(A,m){if(typeof m=="function"){A=A();var x=m(A);return function(){typeof x=="function"?x():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function T1(A,m,x){x=x!=null?x.concat([A]):null,Lh(4,4,I2.bind(null,m,A),x)}function I1(){}function j1(A,m){var x=Ra();m=m===void 0?null:m;var E=x.memoizedState;return m!==null&&gs(m,E[1])?E[0]:(x.memoizedState=[A,m],A)}function j2(A,m){var x=Ra();m=m===void 0?null:m;var E=x.memoizedState;if(m!==null&&gs(m,E[1]))return E[0];if(E=A(),Ls){Lt(!0);try{A()}finally{Lt(!1)}}return x.memoizedState=[E,m],E}function pf(A,m,x){return x===void 0||(ua&1073741824)!==0?A.memoizedState=m:(A.memoizedState=x,A=W8(),Sr.lanes|=A,$h|=A,x)}function Eg(A,m,x,E){return ti(x,m)?x:An.current!==null?(A=pf(A,x,E),ti(A,m)||(Pi=!0),A):(ua&42)===0?(Pi=!0,A.memoizedState=x):(A=W8(),Sr.lanes|=A,$h|=A,m)}function Lm(A,m,x,E,M){var z=Z.p;Z.p=z!==0&&8>z?z:8;var le=q.T,be={};q.T=be,rk(A,!1,m,x);try{var Re=M(),it=q.S;if(it!==null&&it(be,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var Ct=E2(Re,E);R1(A,m,Ct,mc(A))}else R1(A,m,E,mc(A))}catch(It){R1(A,m,{then:function(){},status:"rejected",reason:It},mc())}finally{Z.p=z,q.T=le}}function nd(){}function iu(A,m,x,E){if(A.tag!==5)throw Error(n(476));var M=ad(A).queue;Lm(A,M,m,H,x===null?nd:function(){return Mm(A),x(E)})}function ad(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:H},next:null};var x={};return m.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:x},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function Mm(A){var m=ad(A).next.queue;R1(A,m,{},mc())}function Um(){return Rs(eb)}function F1(){return Ra().memoizedState}function F2(){return Ra().memoizedState}function O1(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var x=mc();A=Et(x);var E=kt(m,A,x);E!==null&&(pc(E,m,x),_t(E,m,x)),m={cache:E1()},A.payload=m;return}m=m.return}}function D1(A,m,x){var E=mc();x={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},O2(A)?e8(m,x):(x=Zd(A,m,x,E),x!==null&&(pc(x,A,E),t8(x,m,E)))}function ZL(A,m,x){var E=mc();R1(A,m,x,E)}function R1(A,m,x,E){var M={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(O2(A))e8(m,M);else{var z=A.alternate;if(A.lanes===0&&(z===null||z.lanes===0)&&(z=m.lastRenderedReducer,z!==null))try{var le=m.lastRenderedState,be=z(le,x);if(M.hasEagerState=!0,M.eagerState=be,ti(be,le))return Jd(A,m,M,0),Ia===null&&Il(),!1}catch{}finally{}if(x=Zd(A,m,M,E),x!==null)return pc(x,A,E),t8(x,m,E),!0}return!1}function rk(A,m,x,E){if(E={lane:2,revertLane:Ok(),action:E,hasEagerState:!1,eagerState:null,next:null},O2(A)){if(m)throw Error(n(479))}else m=Zd(A,x,E,2),m!==null&&pc(m,A,2)}function O2(A){var m=A.alternate;return A===Sr||m!==null&&m===Sr}function e8(A,m){ai=Pn=!0;var x=A.pending;x===null?m.next=m:(m.next=x.next,x.next=m),A.pending=m}function t8(A,m,x){if((x&4194048)!==0){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}var D2={readContext:Rs,use:Bo,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn},r8={readContext:Rs,use:Bo,useCallback:function(A,m){return so().memoizedState=[A,m===void 0?null:m],A},useContext:Rs,useEffect:k1,useImperativeHandle:function(A,m,x){x=x!=null?x.concat([A]):null,dc(4194308,4,I2.bind(null,m,A),x)},useLayoutEffect:function(A,m){return dc(4194308,4,A,m)},useInsertionEffect:function(A,m){dc(4,2,A,m)},useMemo:function(A,m){var x=so();m=m===void 0?null:m;var E=A();if(Ls){Lt(!0);try{A()}finally{Lt(!1)}}return x.memoizedState=[E,m],E},useReducer:function(A,m,x){var E=so();if(x!==void 0){var M=x(m);if(Ls){Lt(!0);try{x(m)}finally{Lt(!1)}}}else M=m;return E.memoizedState=E.baseState=M,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:M},E.queue=A,A=A.dispatch=D1.bind(null,Sr,A),[E.memoizedState,A]},useRef:function(A){var m=so();return A={current:A},m.memoizedState=A},useState:function(A){A=Dm(A);var m=A.queue,x=ZL.bind(null,Sr,m);return m.dispatch=x,[A.memoizedState,x]},useDebugValue:I1,useDeferredValue:function(A,m){var x=so();return pf(x,A,m)},useTransition:function(){var A=Dm(!1);return A=Lm.bind(null,Sr,A.queue,!0,!1),so().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,x){var E=Sr,M=so();if(Un){if(x===void 0)throw Error(n(407));x=x()}else{if(x=m(),Ia===null)throw Error(n(349));(Ln&124)!==0||bg(E,m,x)}M.memoizedState=x;var z={value:x,getSnapshot:m};return M.queue=z,k1(Dh.bind(null,E,z,A),[A]),E.flags|=2048,rd(9,Pm(),Om.bind(null,E,z,x,m),null),x},useId:function(){var A=so(),m=Ia.identifierPrefix;if(Un){var x=Yu,E=Xu;x=(E&~(1<<32-Ot(E)-1)).toString(32)+x,m="«"+m+"R"+x,x=es++,0<x&&(m+="H"+x.toString(32)),m+="»"}else x=Ol++,m="«"+m+"r"+x.toString(32)+"»";return A.memoizedState=m},useHostTransitionStatus:Um,useFormState:Rm,useActionState:Rm,useOptimistic:function(A){var m=so();m.memoizedState=m.baseState=A;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=x,m=rk.bind(null,Sr,!0,x),x.dispatch=m,[A,m]},useMemoCache:oA,useCacheRefresh:function(){return so().memoizedState=O1.bind(null,Sr)}},n8={readContext:Rs,use:Bo,useCallback:j1,useContext:Rs,useEffect:T2,useImperativeHandle:T1,useInsertionEffect:B1,useLayoutEffect:mf,useMemo:j2,useReducer:jm,useRef:wg,useState:function(){return jm(To)},useDebugValue:I1,useDeferredValue:function(A,m){var x=Ra();return Eg(x,Lr.memoizedState,A,m)},useTransition:function(){var A=jm(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:iA(A),m]},useSyncExternalStore:Fm,useId:F1,useHostTransitionStatus:Um,useFormState:yg,useActionState:yg,useOptimistic:function(A,m){var x=Ra();return td(x,Lr,A,m)},useMemoCache:oA,useCacheRefresh:F2},Eue={readContext:Rs,use:Bo,useCallback:j1,useContext:Rs,useEffect:T2,useImperativeHandle:T1,useInsertionEffect:B1,useLayoutEffect:mf,useMemo:j2,useReducer:xg,useRef:wg,useState:function(){return xg(To)},useDebugValue:I1,useDeferredValue:function(A,m){var x=Ra();return Lr===null?pf(x,A,m):Eg(x,Lr.memoizedState,A,m)},useTransition:function(){var A=xg(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:iA(A),m]},useSyncExternalStore:Fm,useId:F1,useHostTransitionStatus:Um,useFormState:B2,useActionState:B2,useOptimistic:function(A,m){var x=Ra();return Lr!==null?td(x,Lr,A,m):(x.baseState=A,[A,x.queue.dispatch])},useMemoCache:oA,useCacheRefresh:F2},Cg=null,P1=0;function R2(A){var m=P1;return P1+=1,Cg===null&&(Cg=[]),nt(Cg,A,m)}function L1(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function P2(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function a8(A){var m=A._init;return m(A._payload)}function s8(A){function m(We,Qe){if(A){var rt=We.deletions;rt===null?(We.deletions=[Qe],We.flags|=16):rt.push(Qe)}}function x(We,Qe){if(!A)return null;for(;Qe!==null;)m(We,Qe),Qe=Qe.sibling;return null}function E(We){for(var Qe=new Map;We!==null;)We.key!==null?Qe.set(We.key,We):Qe.set(We.index,We),We=We.sibling;return Qe}function M(We,Qe){return We=tu(We,Qe),We.index=0,We.sibling=null,We}function z(We,Qe,rt){return We.index=rt,A?(rt=We.alternate,rt!==null?(rt=rt.index,rt<Qe?(We.flags|=67108866,Qe):rt):(We.flags|=67108866,Qe)):(We.flags|=1048576,Qe)}function le(We){return A&&We.alternate===null&&(We.flags|=67108866),We}function be(We,Qe,rt,St){return Qe===null||Qe.tag!==6?(Qe=Ag(rt,We.mode,St),Qe.return=We,Qe):(Qe=M(Qe,rt),Qe.return=We,Qe)}function Re(We,Qe,rt,St){var Ar=rt.type;return Ar===g?Ct(We,Qe,rt.props.children,St,rt.key):Qe!==null&&(Qe.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===C&&a8(Ar)===Qe.type)?(Qe=M(Qe,rt.props),L1(Qe,rt),Qe.return=We,Qe):(Qe=lf(rt.type,rt.key,rt.props,null,We.mode,St),L1(Qe,rt),Qe.return=We,Qe)}function it(We,Qe,rt,St){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==rt.containerInfo||Qe.stateNode.implementation!==rt.implementation?(Qe=Sm(rt,We.mode,St),Qe.return=We,Qe):(Qe=M(Qe,rt.children||[]),Qe.return=We,Qe)}function Ct(We,Qe,rt,St,Ar){return Qe===null||Qe.tag!==7?(Qe=qu(rt,We.mode,St,Ar),Qe.return=We,Qe):(Qe=M(Qe,rt),Qe.return=We,Qe)}function It(We,Qe,rt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=Ag(""+Qe,We.mode,rt),Qe.return=We,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case h:return rt=lf(Qe.type,Qe.key,Qe.props,null,We.mode,rt),L1(rt,Qe),rt.return=We,rt;case p:return Qe=Sm(Qe,We.mode,rt),Qe.return=We,Qe;case C:var St=Qe._init;return Qe=St(Qe._payload),It(We,Qe,rt)}if(X(Qe)||T(Qe))return Qe=qu(Qe,We.mode,rt,null),Qe.return=We,Qe;if(typeof Qe.then=="function")return It(We,R2(Qe),rt);if(Qe.$$typeof===S)return It(We,nA(We,Qe),rt);P2(We,Qe)}return null}function At(We,Qe,rt,St){var Ar=Qe!==null?Qe.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Ar!==null?null:be(We,Qe,""+rt,St);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:return rt.key===Ar?Re(We,Qe,rt,St):null;case p:return rt.key===Ar?it(We,Qe,rt,St):null;case C:return Ar=rt._init,rt=Ar(rt._payload),At(We,Qe,rt,St)}if(X(rt)||T(rt))return Ar!==null?null:Ct(We,Qe,rt,St,null);if(typeof rt.then=="function")return At(We,Qe,R2(rt),St);if(rt.$$typeof===S)return At(We,Qe,nA(We,rt),St);P2(We,rt)}return null}function ft(We,Qe,rt,St,Ar){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return We=We.get(rt)||null,be(Qe,We,""+St,Ar);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case h:return We=We.get(St.key===null?rt:St.key)||null,Re(Qe,We,St,Ar);case p:return We=We.get(St.key===null?rt:St.key)||null,it(Qe,We,St,Ar);case C:var yn=St._init;return St=yn(St._payload),ft(We,Qe,rt,St,Ar)}if(X(St)||T(St))return We=We.get(rt)||null,Ct(Qe,We,St,Ar,null);if(typeof St.then=="function")return ft(We,Qe,rt,R2(St),Ar);if(St.$$typeof===S)return ft(We,Qe,rt,nA(Qe,St),Ar);P2(Qe,St)}return null}function zr(We,Qe,rt,St){for(var Ar=null,yn=null,xr=Qe,Fr=Qe=0,Mi=null;xr!==null&&Fr<rt.length;Fr++){xr.index>Fr?(Mi=xr,xr=null):Mi=xr.sibling;var qn=At(We,xr,rt[Fr],St);if(qn===null){xr===null&&(xr=Mi);break}A&&xr&&qn.alternate===null&&m(We,xr),Qe=z(qn,Qe,Fr),yn===null?Ar=qn:yn.sibling=qn,yn=qn,xr=Mi}if(Fr===rt.length)return x(We,xr),Un&&uf(We,Fr),Ar;if(xr===null){for(;Fr<rt.length;Fr++)xr=It(We,rt[Fr],St),xr!==null&&(Qe=z(xr,Qe,Fr),yn===null?Ar=xr:yn.sibling=xr,yn=xr);return Un&&uf(We,Fr),Ar}for(xr=E(xr);Fr<rt.length;Fr++)Mi=ft(xr,We,Fr,rt[Fr],St),Mi!==null&&(A&&Mi.alternate!==null&&xr.delete(Mi.key===null?Fr:Mi.key),Qe=z(Mi,Qe,Fr),yn===null?Ar=Mi:yn.sibling=Mi,yn=Mi);return A&&xr.forEach(function(e0){return m(We,e0)}),Un&&uf(We,Fr),Ar}function Ir(We,Qe,rt,St){if(rt==null)throw Error(n(151));for(var Ar=null,yn=null,xr=Qe,Fr=Qe=0,Mi=null,qn=rt.next();xr!==null&&!qn.done;Fr++,qn=rt.next()){xr.index>Fr?(Mi=xr,xr=null):Mi=xr.sibling;var e0=At(We,xr,qn.value,St);if(e0===null){xr===null&&(xr=Mi);break}A&&xr&&e0.alternate===null&&m(We,xr),Qe=z(e0,Qe,Fr),yn===null?Ar=e0:yn.sibling=e0,yn=e0,xr=Mi}if(qn.done)return x(We,xr),Un&&uf(We,Fr),Ar;if(xr===null){for(;!qn.done;Fr++,qn=rt.next())qn=It(We,qn.value,St),qn!==null&&(Qe=z(qn,Qe,Fr),yn===null?Ar=qn:yn.sibling=qn,yn=qn);return Un&&uf(We,Fr),Ar}for(xr=E(xr);!qn.done;Fr++,qn=rt.next())qn=ft(xr,We,Fr,qn.value,St),qn!==null&&(A&&qn.alternate!==null&&xr.delete(qn.key===null?Fr:qn.key),Qe=z(qn,Qe,Fr),yn===null?Ar=qn:yn.sibling=qn,yn=qn);return A&&xr.forEach(function(Cde){return m(We,Cde)}),Un&&uf(We,Fr),Ar}function wa(We,Qe,rt,St){if(typeof rt=="object"&&rt!==null&&rt.type===g&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:e:{for(var Ar=rt.key;Qe!==null;){if(Qe.key===Ar){if(Ar=rt.type,Ar===g){if(Qe.tag===7){x(We,Qe.sibling),St=M(Qe,rt.props.children),St.return=We,We=St;break e}}else if(Qe.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===C&&a8(Ar)===Qe.type){x(We,Qe.sibling),St=M(Qe,rt.props),L1(St,rt),St.return=We,We=St;break e}x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}rt.type===g?(St=qu(rt.props.children,We.mode,St,rt.key),St.return=We,We=St):(St=lf(rt.type,rt.key,rt.props,null,We.mode,St),L1(St,rt),St.return=We,We=St)}return le(We);case p:e:{for(Ar=rt.key;Qe!==null;){if(Qe.key===Ar)if(Qe.tag===4&&Qe.stateNode.containerInfo===rt.containerInfo&&Qe.stateNode.implementation===rt.implementation){x(We,Qe.sibling),St=M(Qe,rt.children||[]),St.return=We,We=St;break e}else{x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}St=Sm(rt,We.mode,St),St.return=We,We=St}return le(We);case C:return Ar=rt._init,rt=Ar(rt._payload),wa(We,Qe,rt,St)}if(X(rt))return zr(We,Qe,rt,St);if(T(rt)){if(Ar=T(rt),typeof Ar!="function")throw Error(n(150));return rt=Ar.call(rt),Ir(We,Qe,rt,St)}if(typeof rt.then=="function")return wa(We,Qe,R2(rt),St);if(rt.$$typeof===S)return wa(We,Qe,nA(We,rt),St);P2(We,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,Qe!==null&&Qe.tag===6?(x(We,Qe.sibling),St=M(Qe,rt),St.return=We,We=St):(x(We,Qe),St=Ag(rt,We.mode,St),St.return=We,We=St),le(We)):x(We,Qe)}return function(We,Qe,rt,St){try{P1=0;var Ar=wa(We,Qe,rt,St);return Cg=null,Ar}catch(xr){if(xr===me||xr===ve)throw xr;var yn=Ri(29,xr,null,We.mode);return yn.lanes=St,yn.return=We,yn}finally{}}}var _g=s8(!0),i8=s8(!1),ou=ne(null),lA=null;function Mh(A){var m=A.alternate;W(wi,wi.current&1),W(ou,A),lA===null&&(m===null||An.current!==null||m.memoizedState!==null)&&(lA=A)}function o8(A){if(A.tag===22){if(W(wi,wi.current),W(ou,A),lA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(lA=A)}}else Uh()}function Uh(){W(wi,wi.current),W(ou,ou.current)}function gf(A){L(ou),lA===A&&(lA=null),L(wi)}var wi=ne(0);function L2(A){for(var m=A;m!==null;){if(m.tag===13){var x=m.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||Kk(x)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function nk(A,m,x,E){m=A.memoizedState,x=x(E,m),x=x==null?m:d({},m,x),A.memoizedState=x,A.lanes===0&&(A.updateQueue.baseState=x)}var ak={enqueueSetState:function(A,m,x){A=A._reactInternals;var E=mc(),M=Et(E);M.payload=m,x!=null&&(M.callback=x),m=kt(A,M,E),m!==null&&(pc(m,A,E),_t(m,A,E))},enqueueReplaceState:function(A,m,x){A=A._reactInternals;var E=mc(),M=Et(E);M.tag=1,M.payload=m,x!=null&&(M.callback=x),m=kt(A,M,E),m!==null&&(pc(m,A,E),_t(m,A,E))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var x=mc(),E=Et(x);E.tag=2,m!=null&&(E.callback=m),m=kt(A,E,x),m!==null&&(pc(m,A,x),_t(m,A,x))}};function l8(A,m,x,E,M,z,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,z,le):m.prototype&&m.prototype.isPureReactComponent?!$d(x,E)||!$d(M,z):!0}function c8(A,m,x,E){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(x,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(x,E),m.state!==A&&ak.enqueueReplaceState(m,m.state,null)}function Qm(A,m){var x=m;if("ref"in m){x={};for(var E in m)E!=="ref"&&(x[E]=m[E])}if(A=A.defaultProps){x===m&&(x=d({},x));for(var M in A)x[M]===void 0&&(x[M]=A[M])}return x}var M2=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function u8(A){M2(A)}function d8(A){console.error(A)}function A8(A){M2(A)}function U2(A,m){try{var x=A.onUncaughtError;x(m.value,{componentStack:m.stack})}catch(E){setTimeout(function(){throw E})}}function f8(A,m,x){try{var E=A.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function sk(A,m,x){return x=Et(x),x.tag=3,x.payload={element:null},x.callback=function(){U2(A,m)},x}function h8(A){return A=Et(A),A.tag=3,A}function m8(A,m,x,E){var M=x.type.getDerivedStateFromError;if(typeof M=="function"){var z=E.value;A.payload=function(){return M(z)},A.callback=function(){f8(m,x,E)}}var le=x.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){f8(m,x,E),typeof M!="function"&&(Kh===null?Kh=new Set([this]):Kh.add(this));var be=E.stack;this.componentDidCatch(E.value,{componentStack:be!==null?be:""})})}function Cue(A,m,x,E,M){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(m=x.alternate,m!==null&&Fh(m,x,M,!0),x=ou.current,x!==null){switch(x.tag){case 13:return lA===null?Bk():x.alternate===null&&vs===0&&(vs=3),x.flags&=-257,x.flags|=65536,x.lanes=M,E===we?x.flags|=16384:(m=x.updateQueue,m===null?x.updateQueue=new Set([E]):m.add(E),Ik(A,E,M)),!1;case 22:return x.flags|=65536,E===we?x.flags|=16384:(m=x.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=m):(x=m.retryQueue,x===null?m.retryQueue=new Set([E]):x.add(E)),Ik(A,E,M)),!1}throw Error(n(435,x.tag))}return Ik(A,E,M),Bk(),!1}if(Un)return m=ou.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=M,E!==w1&&(A=Error(n(422),{cause:E}),jh(hn(A,x)))):(E!==w1&&(m=Error(n(423),{cause:E}),jh(hn(m,x))),A=A.current.alternate,A.flags|=65536,M&=-M,A.lanes|=M,E=hn(E,x),M=sk(A.stateNode,E,M),nr(A,M),vs!==4&&(vs=2)),!1;var z=Error(n(520),{cause:E});if(z=hn(z,x),$1===null?$1=[z]:$1.push(z),vs!==4&&(vs=2),m===null)return!0;E=hn(E,x),x=m;do{switch(x.tag){case 3:return x.flags|=65536,A=M&-M,x.lanes|=A,A=sk(x.stateNode,E,A),nr(x,A),!1;case 1:if(m=x.type,z=x.stateNode,(x.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Kh===null||!Kh.has(z))))return x.flags|=65536,M&=-M,x.lanes|=M,M=h8(M),m8(M,A,x,E),nr(x,M),!1}x=x.return}while(x!==null);return!1}var p8=Error(n(461)),Pi=!1;function io(A,m,x,E){m.child=A===null?i8(m,null,x,E):_g(m,A.child,x,E)}function g8(A,m,x,E,M){x=x.render;var z=m.ref;if("ref"in E){var le={};for(var be in E)be!=="ref"&&(le[be]=E[be])}else le=E;return su(m),E=uc(A,m,x,le,z,M),be=Ta(),A!==null&&!Pi?(Im(A,m,M),vf(A,m,M)):(Un&&be&&Nm(m),m.flags|=1,io(A,m,E,M),m.child)}function v8(A,m,x,E,M){if(A===null){var z=x.type;return typeof z=="function"&&!Th(z)&&z.defaultProps===void 0&&x.compare===null?(m.tag=15,m.type=z,x8(A,m,z,E,M)):(A=lf(x.type,null,E,m,m.mode,M),A.ref=m.ref,A.return=m,m.child=A)}if(z=A.child,!fk(A,M)){var le=z.memoizedProps;if(x=x.compare,x=x!==null?x:$d,x(le,E)&&A.ref===m.ref)return vf(A,m,M)}return m.flags|=1,A=tu(z,E),A.ref=m.ref,A.return=m,m.child=A}function x8(A,m,x,E,M){if(A!==null){var z=A.memoizedProps;if($d(z,E)&&A.ref===m.ref)if(Pi=!1,m.pendingProps=E=z,fk(A,M))(A.flags&131072)!==0&&(Pi=!0);else return m.lanes=A.lanes,vf(A,m,M)}return ik(A,m,x,E,M)}function b8(A,m,x){var E=m.pendingProps,M=E.children,z=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((m.flags&128)!==0){if(E=z!==null?z.baseLanes|x:x,A!==null){for(M=m.child=A.child,z=0;M!==null;)z=z|M.lanes|M.childLanes,M=M.sibling;m.childLanes=z&~E}else m.childLanes=0,m.child=null;return y8(A,m,E,x)}if((x&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&ae(m,z!==null?z.cachePool:null),z!==null?na(m,z):Kn(),o8(m);else return m.lanes=m.childLanes=536870912,y8(A,m,z!==null?z.baseLanes|x:x,x)}else z!==null?(ae(m,z.cachePool),na(m,z),Uh(),m.memoizedState=null):(A!==null&&ae(m,null),Kn(),Uh());return io(A,m,M,x),m.child}function y8(A,m,x,E){var M=Y();return M=M===null?null:{parent:Ps._currentValue,pool:M},m.memoizedState={baseLanes:x,cachePool:M},A!==null&&ae(m,null),Kn(),o8(m),A!==null&&Fh(A,m,E,!0),null}function Q2(A,m){var x=m.ref;if(x===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(A===null||A.ref!==x)&&(m.flags|=4194816)}}function ik(A,m,x,E,M){return su(m),x=uc(A,m,x,E,void 0,M),E=Ta(),A!==null&&!Pi?(Im(A,m,M),vf(A,m,M)):(Un&&E&&Nm(m),m.flags|=1,io(A,m,x,M),m.child)}function w8(A,m,x,E,M,z){return su(m),m.updateQueue=null,x=ff(m,E,x,M),aA(A),E=Ta(),A!==null&&!Pi?(Im(A,m,z),vf(A,m,z)):(Un&&E&&Nm(m),m.flags|=1,io(A,m,x,z),m.child)}function E8(A,m,x,E,M){if(su(m),m.stateNode===null){var z=ri,le=x.contextType;typeof le=="object"&&le!==null&&(z=Rs(le)),z=new x(E,z),m.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=ak,m.stateNode=z,z._reactInternals=m,z=m.stateNode,z.props=E,z.state=m.memoizedState,z.refs={},Ue(m),le=x.contextType,z.context=typeof le=="object"&&le!==null?Rs(le):ri,z.state=m.memoizedState,le=x.getDerivedStateFromProps,typeof le=="function"&&(nk(m,x,le,E),z.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(le=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),le!==z.state&&ak.enqueueReplaceState(z,z.state,null),Zt(m,E,z,M),mr(),z.state=m.memoizedState),typeof z.componentDidMount=="function"&&(m.flags|=4194308),E=!0}else if(A===null){z=m.stateNode;var be=m.memoizedProps,Re=Qm(x,be);z.props=Re;var it=z.context,Ct=x.contextType;le=ri,typeof Ct=="object"&&Ct!==null&&(le=Rs(Ct));var It=x.getDerivedStateFromProps;Ct=typeof It=="function"||typeof z.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,Ct||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(be||it!==le)&&c8(m,z,E,le),ht=!1;var At=m.memoizedState;z.state=At,Zt(m,E,z,M),mr(),it=m.memoizedState,be||At!==it||ht?(typeof It=="function"&&(nk(m,x,It,E),it=m.memoizedState),(Re=ht||l8(m,x,Re,E,At,it,le))?(Ct||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(m.flags|=4194308)):(typeof z.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=it),z.props=E,z.state=it,z.context=le,E=Re):(typeof z.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{z=m.stateNode,Ve(A,m),le=m.memoizedProps,Ct=Qm(x,le),z.props=Ct,It=m.pendingProps,At=z.context,it=x.contextType,Re=ri,typeof it=="object"&&it!==null&&(Re=Rs(it)),be=x.getDerivedStateFromProps,(it=typeof be=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(le!==It||At!==Re)&&c8(m,z,E,Re),ht=!1,At=m.memoizedState,z.state=At,Zt(m,E,z,M),mr();var ft=m.memoizedState;le!==It||At!==ft||ht||A!==null&&A.dependencies!==null&&pg(A.dependencies)?(typeof be=="function"&&(nk(m,x,be,E),ft=m.memoizedState),(Ct=ht||l8(m,x,Ct,E,At,ft,Re)||A!==null&&A.dependencies!==null&&pg(A.dependencies))?(it||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(E,ft,Re),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(E,ft,Re)),typeof z.componentDidUpdate=="function"&&(m.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof z.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=ft),z.props=E,z.state=ft,z.context=Re,E=Ct):(typeof z.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),E=!1)}return z=E,Q2(A,m),E=(m.flags&128)!==0,z||E?(z=m.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:z.render(),m.flags|=1,A!==null&&E?(m.child=_g(m,A.child,null,M),m.child=_g(m,null,x,M)):io(A,m,x,M),m.memoizedState=z.state,A=m.child):A=vf(A,m,M),A}function C8(A,m,x,E){return ol(),m.flags|=256,io(A,m,x,E),m.child}var ok={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lk(A){return{baseLanes:A,cachePool:ue()}}function ck(A,m,x){return A=A!==null?A.childLanes&~x:0,m&&(A|=lu),A}function _8(A,m,x){var E=m.pendingProps,M=!1,z=(m.flags&128)!==0,le;if((le=z)||(le=A!==null&&A.memoizedState===null?!1:(wi.current&2)!==0),le&&(M=!0,m.flags&=-129),le=(m.flags&32)!==0,m.flags&=-33,A===null){if(Un){if(M?Mh(m):Uh(),Un){var be=$a,Re;if(Re=be){e:{for(Re=be,be=ru;Re.nodeType!==8;){if(!be){be=null;break e}if(Re=id(Re.nextSibling),Re===null){be=null;break e}}be=Re}be!==null?(m.memoizedState={dehydrated:be,treeContext:cf!==null?{id:Xu,overflow:Yu}:null,retryLane:536870912,hydrationErrors:null},Re=Ri(18,null,null,0),Re.stateNode=be,Re.return=m,m.child=Re,Ds=m,$a=null,Re=!0):Re=!1}Re||df(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return Kk(be)?m.lanes=32:m.lanes=536870912,null;gf(m)}return be=E.children,E=E.fallback,M?(Uh(),M=m.mode,be=H2({mode:"hidden",children:be},M),E=qu(E,M,x,null),be.return=m,E.return=m,be.sibling=E,m.child=be,M=m.child,M.memoizedState=lk(x),M.childLanes=ck(A,le,x),m.memoizedState=ok,E):(Mh(m),uk(m,be))}if(Re=A.memoizedState,Re!==null&&(be=Re.dehydrated,be!==null)){if(z)m.flags&256?(Mh(m),m.flags&=-257,m=dk(A,m,x)):m.memoizedState!==null?(Uh(),m.child=A.child,m.flags|=128,m=null):(Uh(),M=E.fallback,be=m.mode,E=H2({mode:"visible",children:E.children},be),M=qu(M,be,x,null),M.flags|=2,E.return=m,M.return=m,E.sibling=M,m.child=E,_g(m,A.child,null,x),E=m.child,E.memoizedState=lk(x),E.childLanes=ck(A,le,x),m.memoizedState=ok,m=M);else if(Mh(m),Kk(be)){if(le=be.nextSibling&&be.nextSibling.dataset,le)var it=le.dgst;le=it,E=Error(n(419)),E.stack="",E.digest=le,jh({value:E,source:null,stack:null}),m=dk(A,m,x)}else if(Pi||Fh(A,m,x,!1),le=(x&A.childLanes)!==0,Pi||le){if(le=Ia,le!==null&&(E=x&-x,E=(E&42)!==0?1:Pr(E),E=(E&(le.suspendedLanes|x))!==0?0:E,E!==0&&E!==Re.retryLane))throw Re.retryLane=E,Gu(A,E),pc(le,A,E),p8;be.data==="$?"||Bk(),m=dk(A,m,x)}else be.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Re.treeContext,$a=id(be.nextSibling),Ds=m,Un=!0,tA=null,ru=!1,A!==null&&(Fl[il++]=Xu,Fl[il++]=Yu,Fl[il++]=cf,Xu=A.id,Yu=A.overflow,cf=m),m=uk(m,E.children),m.flags|=4096);return m}return M?(Uh(),M=E.fallback,be=m.mode,Re=A.child,it=Re.sibling,E=tu(Re,{mode:"hidden",children:E.children}),E.subtreeFlags=Re.subtreeFlags&65011712,it!==null?M=tu(it,M):(M=qu(M,be,x,null),M.flags|=2),M.return=m,E.return=m,E.sibling=M,m.child=E,E=M,M=m.child,be=A.child.memoizedState,be===null?be=lk(x):(Re=be.cachePool,Re!==null?(it=Ps._currentValue,Re=Re.parent!==it?{parent:it,pool:it}:Re):Re=ue(),be={baseLanes:be.baseLanes|x,cachePool:Re}),M.memoizedState=be,M.childLanes=ck(A,le,x),m.memoizedState=ok,E):(Mh(m),x=A.child,A=x.sibling,x=tu(x,{mode:"visible",children:E.children}),x.return=m,x.sibling=null,A!==null&&(le=m.deletions,le===null?(m.deletions=[A],m.flags|=16):le.push(A)),m.child=x,m.memoizedState=null,x)}function uk(A,m){return m=H2({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function H2(A,m){return A=Ri(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function dk(A,m,x){return _g(m,A.child,null,x),A=uk(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function S8(A,m,x){A.lanes|=m;var E=A.alternate;E!==null&&(E.lanes|=m),hg(A.return,m,x)}function Ak(A,m,x,E,M){var z=A.memoizedState;z===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:M}:(z.isBackwards=m,z.rendering=null,z.renderingStartTime=0,z.last=E,z.tail=x,z.tailMode=M)}function N8(A,m,x){var E=m.pendingProps,M=E.revealOrder,z=E.tail;if(io(A,m,E.children,x),E=wi.current,(E&2)!==0)E=E&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&S8(A,x,m);else if(A.tag===19)S8(A,x,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(W(wi,E),M){case"forwards":for(x=m.child,M=null;x!==null;)A=x.alternate,A!==null&&L2(A)===null&&(M=x),x=x.sibling;x=M,x===null?(M=m.child,m.child=null):(M=x.sibling,x.sibling=null),Ak(m,!1,M,x,z);break;case"backwards":for(x=null,M=m.child,m.child=null;M!==null;){if(A=M.alternate,A!==null&&L2(A)===null){m.child=M;break}A=M.sibling,M.sibling=x,x=M,M=A}Ak(m,!0,x,null,z);break;case"together":Ak(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function vf(A,m,x){if(A!==null&&(m.dependencies=A.dependencies),$h|=m.lanes,(x&m.childLanes)===0)if(A!==null){if(Fh(A,m,x,!1),(x&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,x=tu(A,A.pendingProps),m.child=x,x.return=m;A.sibling!==null;)A=A.sibling,x=x.sibling=tu(A,A.pendingProps),x.return=m;x.sibling=null}return m.child}function fk(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&pg(A)))}function _ue(A,m,x){switch(m.tag){case 3:oe(m,m.stateNode.containerInfo),rA(m,Ps,A.memoizedState.cache),ol();break;case 27:case 5:ge(m);break;case 4:oe(m,m.stateNode.containerInfo);break;case 10:rA(m,m.type,m.memoizedProps.value);break;case 13:var E=m.memoizedState;if(E!==null)return E.dehydrated!==null?(Mh(m),m.flags|=128,null):(x&m.child.childLanes)!==0?_8(A,m,x):(Mh(m),A=vf(A,m,x),A!==null?A.sibling:null);Mh(m);break;case 19:var M=(A.flags&128)!==0;if(E=(x&m.childLanes)!==0,E||(Fh(A,m,x,!1),E=(x&m.childLanes)!==0),M){if(E)return N8(A,m,x);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),W(wi,wi.current),E)break;return null;case 22:case 23:return m.lanes=0,b8(A,m,x);case 24:rA(m,Ps,A.memoizedState.cache)}return vf(A,m,x)}function k8(A,m,x){if(A!==null)if(A.memoizedProps!==m.pendingProps)Pi=!0;else{if(!fk(A,x)&&(m.flags&128)===0)return Pi=!1,_ue(A,m,x);Pi=(A.flags&131072)!==0}else Pi=!1,Un&&(m.flags&1048576)!==0&&v2(m,fg,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var E=m.elementType,M=E._init;if(E=M(E._payload),m.type=E,typeof E=="function")Th(E)?(A=Qm(E,A),m.tag=1,m=E8(null,m,E,A,x)):(m.tag=0,m=ik(null,m,E,A,x));else{if(E!=null){if(M=E.$$typeof,M===k){m.tag=11,m=g8(null,m,E,A,x);break e}else if(M===w){m.tag=14,m=v8(null,m,E,A,x);break e}}throw m=R(E)||E,Error(n(306,m,""))}}return m;case 0:return ik(A,m,m.type,m.pendingProps,x);case 1:return E=m.type,M=Qm(E,m.pendingProps),E8(A,m,E,M,x);case 3:e:{if(oe(m,m.stateNode.containerInfo),A===null)throw Error(n(387));E=m.pendingProps;var z=m.memoizedState;M=z.element,Ve(A,m),Zt(m,E,null,x);var le=m.memoizedState;if(E=le.cache,rA(m,Ps,E),E!==z.cache&&mg(m,[Ps],x,!0),mr(),E=le.element,z.isDehydrated)if(z={element:E,isDehydrated:!1,cache:le.cache},m.updateQueue.baseState=z,m.memoizedState=z,m.flags&256){m=C8(A,m,E,x);break e}else if(E!==M){M=hn(Error(n(424)),m),jh(M),m=C8(A,m,E,x);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for($a=id(A.firstChild),Ds=m,Un=!0,tA=null,ru=!0,x=i8(m,null,E,x),m.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(ol(),E===M){m=vf(A,m,x);break e}io(A,m,E,x)}m=m.child}return m;case 26:return Q2(A,m),A===null?(x=jM(m.type,null,m.pendingProps,null))?m.memoizedState=x:Un||(x=m.type,A=m.pendingProps,E=rE(ie.current).createElement(x),E[tn]=m,E[en]=A,lo(E,x,A),$e(E),m.stateNode=E):m.memoizedState=jM(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return ge(m),A===null&&Un&&(E=m.stateNode=BM(m.type,m.pendingProps,ie.current),Ds=m,ru=!0,M=$a,Wh(m.type)?(Gk=M,$a=id(E.firstChild)):$a=M),io(A,m,m.pendingProps.children,x),Q2(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Un&&((M=E=$a)&&(E=Zue(E,m.type,m.pendingProps,ru),E!==null?(m.stateNode=E,Ds=m,$a=id(E.firstChild),ru=!1,M=!0):M=!1),M||df(m)),ge(m),M=m.type,z=m.pendingProps,le=A!==null?A.memoizedProps:null,E=z.children,Vk(M,z)?E=null:le!==null&&Vk(M,le)&&(m.flags|=32),m.memoizedState!==null&&(M=uc(A,m,sA,null,null,x),eb._currentValue=M),Q2(A,m),io(A,m,E,x),m.child;case 6:return A===null&&Un&&((A=x=$a)&&(x=ede(x,m.pendingProps,ru),x!==null?(m.stateNode=x,Ds=m,$a=null,A=!0):A=!1),A||df(m)),null;case 13:return _8(A,m,x);case 4:return oe(m,m.stateNode.containerInfo),E=m.pendingProps,A===null?m.child=_g(m,null,E,x):io(A,m,E,x),m.child;case 11:return g8(A,m,m.type,m.pendingProps,x);case 7:return io(A,m,m.pendingProps,x),m.child;case 8:return io(A,m,m.pendingProps.children,x),m.child;case 12:return io(A,m,m.pendingProps.children,x),m.child;case 10:return E=m.pendingProps,rA(m,m.type,E.value),io(A,m,E.children,x),m.child;case 9:return M=m.type._context,E=m.pendingProps.children,su(m),M=Rs(M),E=E(M),m.flags|=1,io(A,m,E,x),m.child;case 14:return v8(A,m,m.type,m.pendingProps,x);case 15:return x8(A,m,m.type,m.pendingProps,x);case 19:return N8(A,m,x);case 31:return E=m.pendingProps,x=m.mode,E={mode:E.mode,children:E.children},A===null?(x=H2(E,x),x.ref=m.ref,m.child=x,x.return=m,m=x):(x=tu(A.child,E),x.ref=m.ref,m.child=x,x.return=m,m=x),m;case 22:return b8(A,m,x);case 24:return su(m),E=Rs(Ps),A===null?(M=Y(),M===null&&(M=Ia,z=E1(),M.pooledCache=z,z.refCount++,z!==null&&(M.pooledCacheLanes|=x),M=z),m.memoizedState={parent:E,cache:M},Ue(m),rA(m,Ps,M)):((A.lanes&x)!==0&&(Ve(A,m),Zt(m,null,null,x),mr()),M=A.memoizedState,z=m.memoizedState,M.parent!==E?(M={parent:E,cache:E},m.memoizedState=M,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=M),rA(m,Ps,E)):(E=z.cache,rA(m,Ps,E),E!==M.cache&&mg(m,[Ps],x,!0))),io(A,m,m.pendingProps.children,x),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function xf(A){A.flags|=4}function B8(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!PM(m)){if(m=ou.current,m!==null&&((Ln&4194048)===Ln?lA!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||m!==lA))throw et=we,pe;A.flags|=8192}}function V2(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?pt():536870912,A.lanes|=m,Bg|=m)}function M1(A,m){if(!Un)switch(A.tailMode){case"hidden":m=A.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?A.tail=null:x.sibling=null;break;case"collapsed":x=A.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function rs(A){var m=A.alternate!==null&&A.alternate.child===A.child,x=0,E=0;if(m)for(var M=A.child;M!==null;)x|=M.lanes|M.childLanes,E|=M.subtreeFlags&65011712,E|=M.flags&65011712,M.return=A,M=M.sibling;else for(M=A.child;M!==null;)x|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=A,M=M.sibling;return A.subtreeFlags|=E,A.childLanes=x,m}function Sue(A,m,x){var E=m.pendingProps;switch(km(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rs(m),null;case 1:return rs(m),null;case 3:return x=m.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),m.memoizedState.cache!==E&&(m.flags|=2048),au(Ps),ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(A===null||A.child===null)&&(ao(m)?xf(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,b2())),rs(m),null;case 26:return x=m.memoizedState,A===null?(xf(m),x!==null?(rs(m),B8(m,x)):(rs(m),m.flags&=-16777217)):x?x!==A.memoizedState?(xf(m),rs(m),B8(m,x)):(rs(m),m.flags&=-16777217):(A.memoizedProps!==E&&xf(m),rs(m),m.flags&=-16777217),null;case 27:je(m),x=ie.current;var M=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==E&&xf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return rs(m),null}A=J.current,ao(m)?x2(m):(A=BM(M,E,x),m.stateNode=A,xf(m))}return rs(m),null;case 5:if(je(m),x=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==E&&xf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return rs(m),null}if(A=J.current,ao(m))x2(m);else{switch(M=rE(ie.current),A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?M.createElement("select",{is:E.is}):M.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?M.createElement(x,{is:E.is}):M.createElement(x)}}A[tn]=m,A[en]=E;e:for(M=m.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===m)break e;for(;M.sibling===null;){if(M.return===null||M.return===m)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}m.stateNode=A;e:switch(lo(A,x,E),x){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&xf(m)}}return rs(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==E&&xf(m);else{if(typeof E!="string"&&m.stateNode===null)throw Error(n(166));if(A=ie.current,ao(m)){if(A=m.stateNode,x=m.memoizedProps,E=null,M=Ds,M!==null)switch(M.tag){case 27:case 5:E=M.memoizedProps}A[tn]=m,A=!!(A.nodeValue===x||E!==null&&E.suppressHydrationWarning===!0||wM(A.nodeValue,x)),A||df(m)}else A=rE(A).createTextNode(E),A[tn]=m,m.stateNode=A}return rs(m),null;case 13:if(E=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(M=ao(m),E!==null&&E.dehydrated!==null){if(A===null){if(!M)throw Error(n(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[tn]=m}else ol(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;rs(m),M=!1}else M=b2(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=M),M=!0;if(!M)return m.flags&256?(gf(m),m):(gf(m),null)}if(gf(m),(m.flags&128)!==0)return m.lanes=x,m;if(x=E!==null,A=A!==null&&A.memoizedState!==null,x){E=m.child,M=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(M=E.alternate.memoizedState.cachePool.pool);var z=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(z=E.memoizedState.cachePool.pool),z!==M&&(E.flags|=2048)}return x!==A&&x&&(m.child.flags|=8192),V2(m,m.updateQueue),rs(m),null;case 4:return ce(),A===null&&Lk(m.stateNode.containerInfo),rs(m),null;case 10:return au(m.type),rs(m),null;case 19:if(L(wi),M=m.memoizedState,M===null)return rs(m),null;if(E=(m.flags&128)!==0,z=M.rendering,z===null)if(E)M1(M,!1);else{if(vs!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(z=L2(A),z!==null){for(m.flags|=128,M1(M,!1),A=z.updateQueue,m.updateQueue=A,V2(m,A),m.subtreeFlags=0,A=x,x=m.child;x!==null;)_m(x,A),x=x.sibling;return W(wi,wi.current&1|2),m.child}A=A.sibling}M.tail!==null&&Ie()>K2&&(m.flags|=128,E=!0,M1(M,!1),m.lanes=4194304)}else{if(!E)if(A=L2(z),A!==null){if(m.flags|=128,E=!0,A=A.updateQueue,m.updateQueue=A,V2(m,A),M1(M,!0),M.tail===null&&M.tailMode==="hidden"&&!z.alternate&&!Un)return rs(m),null}else 2*Ie()-M.renderingStartTime>K2&&x!==536870912&&(m.flags|=128,E=!0,M1(M,!1),m.lanes=4194304);M.isBackwards?(z.sibling=m.child,m.child=z):(A=M.last,A!==null?A.sibling=z:m.child=z,M.last=z)}return M.tail!==null?(m=M.tail,M.rendering=m,M.tail=m.sibling,M.renderingStartTime=Ie(),m.sibling=null,A=wi.current,W(wi,E?A&1|2:A&1),m):(rs(m),null);case 22:case 23:return gf(m),qr(),E=m.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(m.flags|=8192):E&&(m.flags|=8192),E?(x&536870912)!==0&&(m.flags&128)===0&&(rs(m),m.subtreeFlags&6&&(m.flags|=8192)):rs(m),x=m.updateQueue,x!==null&&V2(m,x.retryQueue),x=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048),A!==null&&L(Q),null;case 24:return x=null,A!==null&&(x=A.memoizedState.cache),m.memoizedState.cache!==x&&(m.flags|=2048),au(Ps),rs(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function Nue(A,m){switch(km(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return au(Ps),ce(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return je(m),null;case 13:if(gf(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));ol()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return L(wi),null;case 4:return ce(),null;case 10:return au(m.type),null;case 22:case 23:return gf(m),qr(),A!==null&&L(Q),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return au(Ps),null;case 25:return null;default:return null}}function T8(A,m){switch(km(m),m.tag){case 3:au(Ps),ce();break;case 26:case 27:case 5:je(m);break;case 4:ce();break;case 13:gf(m);break;case 19:L(wi);break;case 10:au(m.type);break;case 22:case 23:gf(m),qr(),A!==null&&L(Q);break;case 24:au(Ps)}}function U1(A,m){try{var x=m.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var M=E.next;x=M;do{if((x.tag&A)===A){E=void 0;var z=x.create,le=x.inst;E=z(),le.destroy=E}x=x.next}while(x!==M)}}catch(be){_a(m,m.return,be)}}function Qh(A,m,x){try{var E=m.updateQueue,M=E!==null?E.lastEffect:null;if(M!==null){var z=M.next;E=z;do{if((E.tag&A)===A){var le=E.inst,be=le.destroy;if(be!==void 0){le.destroy=void 0,M=m;var Re=x,it=be;try{it()}catch(Ct){_a(M,Re,Ct)}}}E=E.next}while(E!==z)}}catch(Ct){_a(m,m.return,Ct)}}function I8(A){var m=A.updateQueue;if(m!==null){var x=A.stateNode;try{$n(m,x)}catch(E){_a(A,A.return,E)}}}function j8(A,m,x){x.props=Qm(A.type,A.memoizedProps),x.state=A.memoizedState;try{x.componentWillUnmount()}catch(E){_a(A,m,E)}}function Q1(A,m){try{var x=A.ref;if(x!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof x=="function"?A.refCleanup=x(E):x.current=E}}catch(M){_a(A,m,M)}}function cA(A,m){var x=A.ref,E=A.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(M){_a(A,m,M)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(M){_a(A,m,M)}else x.current=null}function F8(A){var m=A.type,x=A.memoizedProps,E=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":x.autoFocus&&E.focus();break e;case"img":x.src?E.src=x.src:x.srcSet&&(E.srcset=x.srcSet)}}catch(M){_a(A,A.return,M)}}function hk(A,m,x){try{var E=A.stateNode;que(E,A.type,x,m),E[en]=m}catch(M){_a(A,A.return,M)}}function O8(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Wh(A.type)||A.tag===4}function mk(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||O8(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Wh(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function pk(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(A,m):(m=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,m.appendChild(A),x=x._reactRootContainer,x!=null||m.onclick!==null||(m.onclick=tE));else if(E!==4&&(E===27&&Wh(A.type)&&(x=A.stateNode,m=null),A=A.child,A!==null))for(pk(A,m,x),A=A.sibling;A!==null;)pk(A,m,x),A=A.sibling}function z2(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?x.insertBefore(A,m):x.appendChild(A);else if(E!==4&&(E===27&&Wh(A.type)&&(x=A.stateNode),A=A.child,A!==null))for(z2(A,m,x),A=A.sibling;A!==null;)z2(A,m,x),A=A.sibling}function D8(A){var m=A.stateNode,x=A.memoizedProps;try{for(var E=A.type,M=m.attributes;M.length;)m.removeAttributeNode(M[0]);lo(m,E,x),m[tn]=A,m[en]=x}catch(z){_a(A,A.return,z)}}var bf=!1,Ms=!1,gk=!1,R8=typeof WeakSet=="function"?WeakSet:Set,Li=null;function kue(A,m){if(A=A.containerInfo,Qk=lE,A=no(A),yi(A)){if("selectionStart"in A)var x={start:A.selectionStart,end:A.selectionEnd};else e:{x=(x=A.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var M=E.anchorOffset,z=E.focusNode;E=E.focusOffset;try{x.nodeType,z.nodeType}catch{x=null;break e}var le=0,be=-1,Re=-1,it=0,Ct=0,It=A,At=null;t:for(;;){for(var ft;It!==x||M!==0&&It.nodeType!==3||(be=le+M),It!==z||E!==0&&It.nodeType!==3||(Re=le+E),It.nodeType===3&&(le+=It.nodeValue.length),(ft=It.firstChild)!==null;)At=It,It=ft;for(;;){if(It===A)break t;if(At===x&&++it===M&&(be=le),At===z&&++Ct===E&&(Re=le),(ft=It.nextSibling)!==null)break;It=At,At=It.parentNode}It=ft}x=be===-1||Re===-1?null:{start:be,end:Re}}else x=null}x=x||{start:0,end:0}}else x=null;for(Hk={focusedElem:A,selectionRange:x},lE=!1,Li=m;Li!==null;)if(m=Li,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Li=A;else for(;Li!==null;){switch(m=Li,z=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&z!==null){A=void 0,x=m,M=z.memoizedProps,z=z.memoizedState,E=x.stateNode;try{var zr=Qm(x.type,M,x.elementType===x.type);A=E.getSnapshotBeforeUpdate(zr,z),E.__reactInternalSnapshotBeforeUpdate=A}catch(Ir){_a(x,x.return,Ir)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,x=A.nodeType,x===9)$k(A);else if(x===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":$k(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Li=A;break}Li=m.return}}function P8(A,m,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:Hh(A,x),E&4&&U1(5,x);break;case 1:if(Hh(A,x),E&4)if(A=x.stateNode,m===null)try{A.componentDidMount()}catch(le){_a(x,x.return,le)}else{var M=Qm(x.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(M,m,A.__reactInternalSnapshotBeforeUpdate)}catch(le){_a(x,x.return,le)}}E&64&&I8(x),E&512&&Q1(x,x.return);break;case 3:if(Hh(A,x),E&64&&(A=x.updateQueue,A!==null)){if(m=null,x.child!==null)switch(x.child.tag){case 27:case 5:m=x.child.stateNode;break;case 1:m=x.child.stateNode}try{$n(A,m)}catch(le){_a(x,x.return,le)}}break;case 27:m===null&&E&4&&D8(x);case 26:case 5:Hh(A,x),m===null&&E&4&&F8(x),E&512&&Q1(x,x.return);break;case 12:Hh(A,x);break;case 13:Hh(A,x),E&4&&U8(A,x),E&64&&(A=x.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(x=Pue.bind(null,x),tde(A,x))));break;case 22:if(E=x.memoizedState!==null||bf,!E){m=m!==null&&m.memoizedState!==null||Ms,M=bf;var z=Ms;bf=E,(Ms=m)&&!z?Vh(A,x,(x.subtreeFlags&8772)!==0):Hh(A,x),bf=M,Ms=z}break;case 30:break;default:Hh(A,x)}}function L8(A){var m=A.alternate;m!==null&&(A.alternate=null,L8(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&Ce(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ka=null,Dl=!1;function yf(A,m,x){for(x=x.child;x!==null;)M8(A,m,x),x=x.sibling}function M8(A,m,x){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(mt,x)}catch{}switch(x.tag){case 26:Ms||cA(x,m),yf(A,m,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Ms||cA(x,m);var E=Ka,M=Dl;Wh(x.type)&&(Ka=x.stateNode,Dl=!1),yf(A,m,x),X1(x.stateNode),Ka=E,Dl=M;break;case 5:Ms||cA(x,m);case 6:if(E=Ka,M=Dl,Ka=null,yf(A,m,x),Ka=E,Dl=M,Ka!==null)if(Dl)try{(Ka.nodeType===9?Ka.body:Ka.nodeName==="HTML"?Ka.ownerDocument.body:Ka).removeChild(x.stateNode)}catch(z){_a(x,m,z)}else try{Ka.removeChild(x.stateNode)}catch(z){_a(x,m,z)}break;case 18:Ka!==null&&(Dl?(A=Ka,NM(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,x.stateNode),ab(A)):NM(Ka,x.stateNode));break;case 4:E=Ka,M=Dl,Ka=x.stateNode.containerInfo,Dl=!0,yf(A,m,x),Ka=E,Dl=M;break;case 0:case 11:case 14:case 15:Ms||Qh(2,x,m),Ms||Qh(4,x,m),yf(A,m,x);break;case 1:Ms||(cA(x,m),E=x.stateNode,typeof E.componentWillUnmount=="function"&&j8(x,m,E)),yf(A,m,x);break;case 21:yf(A,m,x);break;case 22:Ms=(E=Ms)||x.memoizedState!==null,yf(A,m,x),Ms=E;break;default:yf(A,m,x)}}function U8(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{ab(A)}catch(x){_a(m,m.return,x)}}function Bue(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new R8),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new R8),m;default:throw Error(n(435,A.tag))}}function vk(A,m){var x=Bue(A);m.forEach(function(E){var M=Lue.bind(null,A,E);x.has(E)||(x.add(E),E.then(M,M))})}function Ac(A,m){var x=m.deletions;if(x!==null)for(var E=0;E<x.length;E++){var M=x[E],z=A,le=m,be=le;e:for(;be!==null;){switch(be.tag){case 27:if(Wh(be.type)){Ka=be.stateNode,Dl=!1;break e}break;case 5:Ka=be.stateNode,Dl=!1;break e;case 3:case 4:Ka=be.stateNode.containerInfo,Dl=!0;break e}be=be.return}if(Ka===null)throw Error(n(160));M8(z,le,M),Ka=null,Dl=!1,z=M.alternate,z!==null&&(z.return=null),M.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Q8(m,A),m=m.sibling}var sd=null;function Q8(A,m){var x=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Ac(m,A),fc(A),E&4&&(Qh(3,A,A.return),U1(3,A),Qh(5,A,A.return));break;case 1:Ac(m,A),fc(A),E&512&&(Ms||x===null||cA(x,x.return)),E&64&&bf&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(x=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:var M=sd;if(Ac(m,A),fc(A),E&512&&(Ms||x===null||cA(x,x.return)),E&4){var z=x!==null?x.memoizedState:null;if(E=A.memoizedState,x===null)if(E===null)if(A.stateNode===null){e:{E=A.type,x=A.memoizedProps,M=M.ownerDocument||M;t:switch(E){case"title":z=M.getElementsByTagName("title")[0],(!z||z[Ee]||z[tn]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=M.createElement(E),M.head.insertBefore(z,M.querySelector("head > title"))),lo(z,E,x),z[tn]=A,$e(z),E=z;break e;case"link":var le=DM("link","href",M).get(E+(x.href||""));if(le){for(var be=0;be<le.length;be++)if(z=le[be],z.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&z.getAttribute("rel")===(x.rel==null?null:x.rel)&&z.getAttribute("title")===(x.title==null?null:x.title)&&z.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){le.splice(be,1);break t}}z=M.createElement(E),lo(z,E,x),M.head.appendChild(z);break;case"meta":if(le=DM("meta","content",M).get(E+(x.content||""))){for(be=0;be<le.length;be++)if(z=le[be],z.getAttribute("content")===(x.content==null?null:""+x.content)&&z.getAttribute("name")===(x.name==null?null:x.name)&&z.getAttribute("property")===(x.property==null?null:x.property)&&z.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&z.getAttribute("charset")===(x.charSet==null?null:x.charSet)){le.splice(be,1);break t}}z=M.createElement(E),lo(z,E,x),M.head.appendChild(z);break;default:throw Error(n(468,E))}z[tn]=A,$e(z),E=z}A.stateNode=E}else RM(M,A.type,A.stateNode);else A.stateNode=OM(M,E,A.memoizedProps);else z!==E?(z===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):z.count--,E===null?RM(M,A.type,A.stateNode):OM(M,E,A.memoizedProps)):E===null&&A.stateNode!==null&&hk(A,A.memoizedProps,x.memoizedProps)}break;case 27:Ac(m,A),fc(A),E&512&&(Ms||x===null||cA(x,x.return)),x!==null&&E&4&&hk(A,A.memoizedProps,x.memoizedProps);break;case 5:if(Ac(m,A),fc(A),E&512&&(Ms||x===null||cA(x,x.return)),A.flags&32){M=A.stateNode;try{yo(M,"")}catch(ft){_a(A,A.return,ft)}}E&4&&A.stateNode!=null&&(M=A.memoizedProps,hk(A,M,x!==null?x.memoizedProps:M)),E&1024&&(gk=!0);break;case 6:if(Ac(m,A),fc(A),E&4){if(A.stateNode===null)throw Error(n(162));E=A.memoizedProps,x=A.stateNode;try{x.nodeValue=E}catch(ft){_a(A,A.return,ft)}}break;case 3:if(sE=null,M=sd,sd=nE(m.containerInfo),Ac(m,A),sd=M,fc(A),E&4&&x!==null&&x.memoizedState.isDehydrated)try{ab(m.containerInfo)}catch(ft){_a(A,A.return,ft)}gk&&(gk=!1,H8(A));break;case 4:E=sd,sd=nE(A.stateNode.containerInfo),Ac(m,A),fc(A),sd=E;break;case 12:Ac(m,A),fc(A);break;case 13:Ac(m,A),fc(A),A.child.flags&8192&&A.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Ck=Ie()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,vk(A,E)));break;case 22:M=A.memoizedState!==null;var Re=x!==null&&x.memoizedState!==null,it=bf,Ct=Ms;if(bf=it||M,Ms=Ct||Re,Ac(m,A),Ms=Ct,bf=it,fc(A),E&8192)e:for(m=A.stateNode,m._visibility=M?m._visibility&-2:m._visibility|1,M&&(x===null||Re||bf||Ms||Hm(A)),x=null,m=A;;){if(m.tag===5||m.tag===26){if(x===null){Re=x=m;try{if(z=Re.stateNode,M)le=z.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{be=Re.stateNode;var It=Re.memoizedProps.style,At=It!=null&&It.hasOwnProperty("display")?It.display:null;be.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ft){_a(Re,Re.return,ft)}}}else if(m.tag===6){if(x===null){Re=m;try{Re.stateNode.nodeValue=M?"":Re.memoizedProps}catch(ft){_a(Re,Re.return,ft)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}E&4&&(E=A.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,vk(A,x))));break;case 19:Ac(m,A),fc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,vk(A,E)));break;case 30:break;case 21:break;default:Ac(m,A),fc(A)}}function fc(A){var m=A.flags;if(m&2){try{for(var x,E=A.return;E!==null;){if(O8(E)){x=E;break}E=E.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var M=x.stateNode,z=mk(A);z2(A,z,M);break;case 5:var le=x.stateNode;x.flags&32&&(yo(le,""),x.flags&=-33);var be=mk(A);z2(A,be,le);break;case 3:case 4:var Re=x.stateNode.containerInfo,it=mk(A);pk(A,it,Re);break;default:throw Error(n(161))}}catch(Ct){_a(A,A.return,Ct)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function H8(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;H8(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function Hh(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)P8(A,m.alternate,m),m=m.sibling}function Hm(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:Qh(4,m,m.return),Hm(m);break;case 1:cA(m,m.return);var x=m.stateNode;typeof x.componentWillUnmount=="function"&&j8(m,m.return,x),Hm(m);break;case 27:X1(m.stateNode);case 26:case 5:cA(m,m.return),Hm(m);break;case 22:m.memoizedState===null&&Hm(m);break;case 30:Hm(m);break;default:Hm(m)}A=A.sibling}}function Vh(A,m,x){for(x=x&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var E=m.alternate,M=A,z=m,le=z.flags;switch(z.tag){case 0:case 11:case 15:Vh(M,z,x),U1(4,z);break;case 1:if(Vh(M,z,x),E=z,M=E.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(it){_a(E,E.return,it)}if(E=z,M=E.updateQueue,M!==null){var be=E.stateNode;try{var Re=M.shared.hiddenCallbacks;if(Re!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Re.length;M++)Rn(Re[M],be)}catch(it){_a(E,E.return,it)}}x&&le&64&&I8(z),Q1(z,z.return);break;case 27:D8(z);case 26:case 5:Vh(M,z,x),x&&E===null&&le&4&&F8(z),Q1(z,z.return);break;case 12:Vh(M,z,x);break;case 13:Vh(M,z,x),x&&le&4&&U8(M,z);break;case 22:z.memoizedState===null&&Vh(M,z,x),Q1(z,z.return);break;case 30:break;default:Vh(M,z,x)}m=m.sibling}}function xk(A,m){var x=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(A!=null&&A.refCount++,x!=null&&Bm(x))}function bk(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Bm(A))}function uA(A,m,x,E){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)V8(A,m,x,E),m=m.sibling}function V8(A,m,x,E){var M=m.flags;switch(m.tag){case 0:case 11:case 15:uA(A,m,x,E),M&2048&&U1(9,m);break;case 1:uA(A,m,x,E);break;case 3:uA(A,m,x,E),M&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Bm(A)));break;case 12:if(M&2048){uA(A,m,x,E),A=m.stateNode;try{var z=m.memoizedProps,le=z.id,be=z.onPostCommit;typeof be=="function"&&be(le,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Re){_a(m,m.return,Re)}}else uA(A,m,x,E);break;case 13:uA(A,m,x,E);break;case 23:break;case 22:z=m.stateNode,le=m.alternate,m.memoizedState!==null?z._visibility&2?uA(A,m,x,E):H1(A,m):z._visibility&2?uA(A,m,x,E):(z._visibility|=2,Sg(A,m,x,E,(m.subtreeFlags&10256)!==0)),M&2048&&xk(le,m);break;case 24:uA(A,m,x,E),M&2048&&bk(m.alternate,m);break;default:uA(A,m,x,E)}}function Sg(A,m,x,E,M){for(M=M&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var z=A,le=m,be=x,Re=E,it=le.flags;switch(le.tag){case 0:case 11:case 15:Sg(z,le,be,Re,M),U1(8,le);break;case 23:break;case 22:var Ct=le.stateNode;le.memoizedState!==null?Ct._visibility&2?Sg(z,le,be,Re,M):H1(z,le):(Ct._visibility|=2,Sg(z,le,be,Re,M)),M&&it&2048&&xk(le.alternate,le);break;case 24:Sg(z,le,be,Re,M),M&&it&2048&&bk(le.alternate,le);break;default:Sg(z,le,be,Re,M)}m=m.sibling}}function H1(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var x=A,E=m,M=E.flags;switch(E.tag){case 22:H1(x,E),M&2048&&xk(E.alternate,E);break;case 24:H1(x,E),M&2048&&bk(E.alternate,E);break;default:H1(x,E)}m=m.sibling}}var V1=8192;function Ng(A){if(A.subtreeFlags&V1)for(A=A.child;A!==null;)z8(A),A=A.sibling}function z8(A){switch(A.tag){case 26:Ng(A),A.flags&V1&&A.memoizedState!==null&&hde(sd,A.memoizedState,A.memoizedProps);break;case 5:Ng(A);break;case 3:case 4:var m=sd;sd=nE(A.stateNode.containerInfo),Ng(A),sd=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=V1,V1=16777216,Ng(A),V1=m):Ng(A));break;default:Ng(A)}}function $8(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function z1(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Li=E,G8(E,A)}$8(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)K8(A),A=A.sibling}function K8(A){switch(A.tag){case 0:case 11:case 15:z1(A),A.flags&2048&&Qh(9,A,A.return);break;case 3:z1(A);break;case 12:z1(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,$2(A)):z1(A);break;default:z1(A)}}function $2(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Li=E,G8(E,A)}$8(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:Qh(8,m,m.return),$2(m);break;case 22:x=m.stateNode,x._visibility&2&&(x._visibility&=-3,$2(m));break;default:$2(m)}A=A.sibling}}function G8(A,m){for(;Li!==null;){var x=Li;switch(x.tag){case 0:case 11:case 15:Qh(8,x,m);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Bm(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,Li=E;else e:for(x=A;Li!==null;){E=Li;var M=E.sibling,z=E.return;if(L8(E),E===x){Li=null;break e}if(M!==null){M.return=z,Li=M;break e}Li=z}}}var Tue={getCacheForType:function(A){var m=Rs(Ps),x=m.data.get(A);return x===void 0&&(x=A(),m.data.set(A,x)),x}},Iue=typeof WeakMap=="function"?WeakMap:Map,da=0,Ia=null,_n=null,Ln=0,Aa=0,hc=null,zh=!1,kg=!1,yk=!1,wf=0,vs=0,$h=0,Vm=0,wk=0,lu=0,Bg=0,$1=null,Rl=null,Ek=!1,Ck=0,K2=1/0,G2=null,Kh=null,oo=0,Gh=null,Tg=null,Ig=0,_k=0,Sk=null,q8=null,K1=0,Nk=null;function mc(){if((da&2)!==0&&Ln!==0)return Ln&-Ln;if(q.T!==null){var A=Af;return A!==0?A:Ok()}return gn()}function W8(){lu===0&&(lu=(Ln&536870912)===0||Un?vt():536870912);var A=ou.current;return A!==null&&(A.flags|=32),lu}function pc(A,m,x){(A===Ia&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)&&(jg(A,0),qh(A,Ln,lu,!1)),gt(A,x),((da&2)===0||A!==Ia)&&(A===Ia&&((da&2)===0&&(Vm|=x),vs===4&&qh(A,Ln,lu,!1)),dA(A))}function X8(A,m,x){if((da&6)!==0)throw Error(n(327));var E=!x&&(m&124)===0&&(m&A.expiredLanes)===0||Fn(A,m),M=E?Oue(A,m):Tk(A,m,!0),z=E;do{if(M===0){kg&&!E&&qh(A,m,0,!1);break}else{if(x=A.current.alternate,z&&!jue(x)){M=Tk(A,m,!1),z=!1;continue}if(M===2){if(z=m,A.errorRecoveryDisabledLanes&z)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){m=le;e:{var be=A;M=$1;var Re=be.current.memoizedState.isDehydrated;if(Re&&(jg(be,le).flags|=256),le=Tk(be,le,!1),le!==2){if(yk&&!Re){be.errorRecoveryDisabledLanes|=z,Vm|=z,M=4;break e}z=Rl,Rl=M,z!==null&&(Rl===null?Rl=z:Rl.push.apply(Rl,z))}M=le}if(z=!1,M!==2)continue}}if(M===1){jg(A,0),qh(A,m,0,!0);break}e:{switch(E=A,z=M,z){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:qh(E,m,lu,!zh);break e;case 2:Rl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(M=Ck+300-Ie(),10<M)){if(qh(E,m,lu,!zh),Vr(E,0,!0)!==0)break e;E.timeoutHandle=_M(Y8.bind(null,E,x,Rl,G2,Ek,m,lu,Vm,Bg,zh,z,2,-0,0),M);break e}Y8(E,x,Rl,G2,Ek,m,lu,Vm,Bg,zh,z,0,-0,0)}}break}while(!0);dA(A)}function Y8(A,m,x,E,M,z,le,be,Re,it,Ct,It,At,ft){if(A.timeoutHandle=-1,It=m.subtreeFlags,(It&8192||(It&16785408)===16785408)&&(Z1={stylesheets:null,count:0,unsuspend:fde},z8(m),It=mde(),It!==null)){A.cancelPendingCommit=It(aM.bind(null,A,m,z,x,E,M,le,be,Re,Ct,1,At,ft)),qh(A,z,le,!it);return}aM(A,m,z,x,E,M,le,be,Re)}function jue(A){for(var m=A;;){var x=m.tag;if((x===0||x===11||x===15)&&m.flags&16384&&(x=m.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var M=x[E],z=M.getSnapshot;M=M.value;try{if(!ti(z(),M))return!1}catch{return!1}}if(x=m.child,m.subtreeFlags&16384&&x!==null)x.return=m,m=x;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function qh(A,m,x,E){m&=~wk,m&=~Vm,A.suspendedLanes|=m,A.pingedLanes&=~m,E&&(A.warmLanes|=m),E=A.expirationTimes;for(var M=m;0<M;){var z=31-Ot(M),le=1<<z;E[z]=-1,M&=~le}x!==0&&Dt(A,x,m)}function q2(){return(da&6)===0?(G1(0),!1):!0}function kk(){if(_n!==null){if(Aa===0)var A=_n.return;else A=_n,Zu=ni=null,vg(A),Cg=null,P1=0,A=_n;for(;A!==null;)T8(A.alternate,A),A=A.return;_n=null}}function jg(A,m){var x=A.timeoutHandle;x!==-1&&(A.timeoutHandle=-1,Xue(x)),x=A.cancelPendingCommit,x!==null&&(A.cancelPendingCommit=null,x()),kk(),Ia=A,_n=x=tu(A.current,null),Ln=m,Aa=0,hc=null,zh=!1,kg=Fn(A,m),yk=!1,Bg=lu=wk=Vm=$h=vs=0,Rl=$1=null,Ek=!1,(m&8)!==0&&(m|=m&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=m;0<E;){var M=31-Ot(E),z=1<<M;m|=A[M],E&=~z}return wf=m,Il(),x}function J8(A,m){Sr=null,q.H=D2,m===me||m===ve?(m=Ge(),Aa=3):m===pe?(m=Ge(),Aa=4):Aa=m===p8?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,hc=m,_n===null&&(vs=1,U2(A,hn(m,A.current)))}function Z8(){var A=q.H;return q.H=D2,A===null?D2:A}function eM(){var A=q.A;return q.A=Tue,A}function Bk(){vs=4,zh||(Ln&4194048)!==Ln&&ou.current!==null||(kg=!0),($h&134217727)===0&&(Vm&134217727)===0||Ia===null||qh(Ia,Ln,lu,!1)}function Tk(A,m,x){var E=da;da|=2;var M=Z8(),z=eM();(Ia!==A||Ln!==m)&&(G2=null,jg(A,m)),m=!1;var le=vs;e:do try{if(Aa!==0&&_n!==null){var be=_n,Re=hc;switch(Aa){case 8:kk(),le=6;break e;case 3:case 2:case 9:case 6:ou.current===null&&(m=!0);var it=Aa;if(Aa=0,hc=null,Fg(A,be,Re,it),x&&kg){le=0;break e}break;default:it=Aa,Aa=0,hc=null,Fg(A,be,Re,it)}}Fue(),le=vs;break}catch(Ct){J8(A,Ct)}while(!0);return m&&A.shellSuspendCounter++,Zu=ni=null,da=E,q.H=M,q.A=z,_n===null&&(Ia=null,Ln=0,Il()),le}function Fue(){for(;_n!==null;)tM(_n)}function Oue(A,m){var x=da;da|=2;var E=Z8(),M=eM();Ia!==A||Ln!==m?(G2=null,K2=Ie()+500,jg(A,m)):kg=Fn(A,m);e:do try{if(Aa!==0&&_n!==null){m=_n;var z=hc;t:switch(Aa){case 1:Aa=0,hc=null,Fg(A,m,z,1);break;case 2:case 9:if(ke(z)){Aa=0,hc=null,rM(m);break}m=function(){Aa!==2&&Aa!==9||Ia!==A||(Aa=7),dA(A)},z.then(m,m);break e;case 3:Aa=7;break e;case 4:Aa=5;break e;case 7:ke(z)?(Aa=0,hc=null,rM(m)):(Aa=0,hc=null,Fg(A,m,z,7));break;case 5:var le=null;switch(_n.tag){case 26:le=_n.memoizedState;case 5:case 27:var be=_n;if(!le||PM(le)){Aa=0,hc=null;var Re=be.sibling;if(Re!==null)_n=Re;else{var it=be.return;it!==null?(_n=it,W2(it)):_n=null}break t}}Aa=0,hc=null,Fg(A,m,z,5);break;case 6:Aa=0,hc=null,Fg(A,m,z,6);break;case 8:kk(),vs=6;break e;default:throw Error(n(462))}}Due();break}catch(Ct){J8(A,Ct)}while(!0);return Zu=ni=null,q.H=E,q.A=M,da=x,_n!==null?0:(Ia=null,Ln=0,Il(),vs)}function Due(){for(;_n!==null&&!_e();)tM(_n)}function tM(A){var m=k8(A.alternate,A,wf);A.memoizedProps=A.pendingProps,m===null?W2(A):_n=m}function rM(A){var m=A,x=m.alternate;switch(m.tag){case 15:case 0:m=w8(x,m,m.pendingProps,m.type,void 0,Ln);break;case 11:m=w8(x,m,m.pendingProps,m.type.render,m.ref,Ln);break;case 5:vg(m);default:T8(x,m),m=_n=_m(m,wf),m=k8(x,m,wf)}A.memoizedProps=A.pendingProps,m===null?W2(A):_n=m}function Fg(A,m,x,E){Zu=ni=null,vg(m),Cg=null,P1=0;var M=m.return;try{if(Cue(A,M,m,x,Ln)){vs=1,U2(A,hn(x,A.current)),_n=null;return}}catch(z){if(M!==null)throw _n=M,z;vs=1,U2(A,hn(x,A.current)),_n=null;return}m.flags&32768?(Un||E===1?A=!0:kg||(Ln&536870912)!==0?A=!1:(zh=A=!0,(E===2||E===9||E===3||E===6)&&(E=ou.current,E!==null&&E.tag===13&&(E.flags|=16384))),nM(m,A)):W2(m)}function W2(A){var m=A;do{if((m.flags&32768)!==0){nM(m,zh);return}A=m.return;var x=Sue(m.alternate,m,wf);if(x!==null){_n=x;return}if(m=m.sibling,m!==null){_n=m;return}_n=m=A}while(m!==null);vs===0&&(vs=5)}function nM(A,m){do{var x=Nue(A.alternate,A);if(x!==null){x.flags&=32767,_n=x;return}if(x=A.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!m&&(A=A.sibling,A!==null)){_n=A;return}_n=A=x}while(A!==null);vs=6,_n=null}function aM(A,m,x,E,M,z,le,be,Re){A.cancelPendingCommit=null;do X2();while(oo!==0);if((da&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(z=m.lanes|m.childLanes,z|=Za,dt(A,x,z,le,be,Re),A===Ia&&(_n=Ia=null,Ln=0),Tg=m,Gh=A,Ig=x,_k=z,Sk=M,q8=E,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,Mue(Oe,function(){return cM(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||E){E=q.T,q.T=null,M=Z.p,Z.p=2,le=da,da|=4;try{kue(A,m,x)}finally{da=le,Z.p=M,q.T=E}}oo=1,sM(),iM(),oM()}}function sM(){if(oo===1){oo=0;var A=Gh,m=Tg,x=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||x){x=q.T,q.T=null;var E=Z.p;Z.p=2;var M=da;da|=4;try{Q8(m,A);var z=Hk,le=no(A.containerInfo),be=z.focusedElem,Re=z.selectionRange;if(le!==be&&be&&be.ownerDocument&&Kd(be.ownerDocument.documentElement,be)){if(Re!==null&&yi(be)){var it=Re.start,Ct=Re.end;if(Ct===void 0&&(Ct=it),"selectionStart"in be)be.selectionStart=it,be.selectionEnd=Math.min(Ct,be.value.length);else{var It=be.ownerDocument||document,At=It&&It.defaultView||window;if(At.getSelection){var ft=At.getSelection(),zr=be.textContent.length,Ir=Math.min(Re.start,zr),wa=Re.end===void 0?Ir:Math.min(Re.end,zr);!ft.extend&&Ir>wa&&(le=wa,wa=Ir,Ir=le);var We=$u(be,Ir),Qe=$u(be,wa);if(We&&Qe&&(ft.rangeCount!==1||ft.anchorNode!==We.node||ft.anchorOffset!==We.offset||ft.focusNode!==Qe.node||ft.focusOffset!==Qe.offset)){var rt=It.createRange();rt.setStart(We.node,We.offset),ft.removeAllRanges(),Ir>wa?(ft.addRange(rt),ft.extend(Qe.node,Qe.offset)):(rt.setEnd(Qe.node,Qe.offset),ft.addRange(rt))}}}}for(It=[],ft=be;ft=ft.parentNode;)ft.nodeType===1&&It.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<It.length;be++){var St=It[be];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}lE=!!Qk,Hk=Qk=null}finally{da=M,Z.p=E,q.T=x}}A.current=m,oo=2}}function iM(){if(oo===2){oo=0;var A=Gh,m=Tg,x=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||x){x=q.T,q.T=null;var E=Z.p;Z.p=2;var M=da;da|=4;try{P8(A,m.alternate,m)}finally{da=M,Z.p=E,q.T=x}}oo=3}}function oM(){if(oo===4||oo===3){oo=0,he();var A=Gh,m=Tg,x=Ig,E=q8;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?oo=5:(oo=0,Tg=Gh=null,lM(A,A.pendingLanes));var M=A.pendingLanes;if(M===0&&(Kh=null),Xr(x),m=m.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(mt,m,void 0,(m.current.flags&128)===128)}catch{}if(E!==null){m=q.T,M=Z.p,Z.p=2,q.T=null;try{for(var z=A.onRecoverableError,le=0;le<E.length;le++){var be=E[le];z(be.value,{componentStack:be.stack})}}finally{q.T=m,Z.p=M}}(Ig&3)!==0&&X2(),dA(A),M=A.pendingLanes,(x&4194090)!==0&&(M&42)!==0?A===Nk?K1++:(K1=0,Nk=A):K1=0,G1(0)}}function lM(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,Bm(m)))}function X2(A){return sM(),iM(),oM(),cM()}function cM(){if(oo!==5)return!1;var A=Gh,m=_k;_k=0;var x=Xr(Ig),E=q.T,M=Z.p;try{Z.p=32>x?32:x,q.T=null,x=Sk,Sk=null;var z=Gh,le=Ig;if(oo=0,Tg=Gh=null,Ig=0,(da&6)!==0)throw Error(n(331));var be=da;if(da|=4,K8(z.current),V8(z,z.current,le,x),da=be,G1(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(mt,z)}catch{}return!0}finally{Z.p=M,q.T=E,lM(A,m)}}function uM(A,m,x){m=hn(x,m),m=sk(A.stateNode,m,2),A=kt(A,m,2),A!==null&&(gt(A,2),dA(A))}function _a(A,m,x){if(A.tag===3)uM(A,A,x);else for(;m!==null;){if(m.tag===3){uM(m,A,x);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Kh===null||!Kh.has(E))){A=hn(x,A),x=h8(2),E=kt(m,x,2),E!==null&&(m8(x,E,m,A),gt(E,2),dA(E));break}}m=m.return}}function Ik(A,m,x){var E=A.pingCache;if(E===null){E=A.pingCache=new Iue;var M=new Set;E.set(m,M)}else M=E.get(m),M===void 0&&(M=new Set,E.set(m,M));M.has(x)||(yk=!0,M.add(x),A=Rue.bind(null,A,m,x),m.then(A,A))}function Rue(A,m,x){var E=A.pingCache;E!==null&&E.delete(m),A.pingedLanes|=A.suspendedLanes&x,A.warmLanes&=~x,Ia===A&&(Ln&x)===x&&(vs===4||vs===3&&(Ln&62914560)===Ln&&300>Ie()-Ck?(da&2)===0&&jg(A,0):wk|=x,Bg===Ln&&(Bg=0)),dA(A)}function dM(A,m){m===0&&(m=pt()),A=Gu(A,m),A!==null&&(gt(A,m),dA(A))}function Pue(A){var m=A.memoizedState,x=0;m!==null&&(x=m.retryLane),dM(A,x)}function Lue(A,m){var x=0;switch(A.tag){case 13:var E=A.stateNode,M=A.memoizedState;M!==null&&(x=M.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(m),dM(A,x)}function Mue(A,m){return Se(A,m)}var Y2=null,Og=null,jk=!1,J2=!1,Fk=!1,zm=0;function dA(A){A!==Og&&A.next===null&&(Og===null?Y2=Og=A:Og=Og.next=A),J2=!0,jk||(jk=!0,Que())}function G1(A,m){if(!Fk&&J2){Fk=!0;do for(var x=!1,E=Y2;E!==null;){if(A!==0){var M=E.pendingLanes;if(M===0)var z=0;else{var le=E.suspendedLanes,be=E.pingedLanes;z=(1<<31-Ot(42|A)+1)-1,z&=M&~(le&~be),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(x=!0,mM(E,z))}else z=Ln,z=Vr(E,E===Ia?z:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(z&3)===0||Fn(E,z)||(x=!0,mM(E,z));E=E.next}while(x);Fk=!1}}function Uue(){AM()}function AM(){J2=jk=!1;var A=0;zm!==0&&(Wue()&&(A=zm),zm=0);for(var m=Ie(),x=null,E=Y2;E!==null;){var M=E.next,z=fM(E,m);z===0?(E.next=null,x===null?Y2=M:x.next=M,M===null&&(Og=x)):(x=E,(A!==0||(z&3)!==0)&&(J2=!0)),E=M}G1(A)}function fM(A,m){for(var x=A.suspendedLanes,E=A.pingedLanes,M=A.expirationTimes,z=A.pendingLanes&-62914561;0<z;){var le=31-Ot(z),be=1<<le,Re=M[le];Re===-1?((be&x)===0||(be&E)!==0)&&(M[le]=jr(be,m)):Re<=m&&(A.expiredLanes|=be),z&=~be}if(m=Ia,x=Ln,x=Vr(A,A===m?x:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,x===0||A===m&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&De(E),A.callbackNode=null,A.callbackPriority=0;if((x&3)===0||Fn(A,x)){if(m=x&-x,m===A.callbackPriority)return m;switch(E!==null&&De(E),Xr(x)){case 2:case 8:x=ye;break;case 32:x=Oe;break;case 268435456:x=qe;break;default:x=Oe}return E=hM.bind(null,A),x=Se(x,E),A.callbackPriority=m,A.callbackNode=x,m}return E!==null&&E!==null&&De(E),A.callbackPriority=2,A.callbackNode=null,2}function hM(A,m){if(oo!==0&&oo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var x=A.callbackNode;if(X2()&&A.callbackNode!==x)return null;var E=Ln;return E=Vr(A,A===Ia?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(X8(A,E,m),fM(A,Ie()),A.callbackNode!=null&&A.callbackNode===x?hM.bind(null,A):null)}function mM(A,m){if(X2())return null;X8(A,m,!0)}function Que(){Yue(function(){(da&6)!==0?Se(Xe,Uue):AM()})}function Ok(){return zm===0&&(zm=vt()),zm}function pM(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:rc(""+A)}function gM(A,m){var x=m.ownerDocument.createElement("input");return x.name=m.name,x.value=m.value,A.id&&x.setAttribute("form",A.id),m.parentNode.insertBefore(x,m),A=new FormData(A),x.parentNode.removeChild(x),A}function Hue(A,m,x,E,M){if(m==="submit"&&x&&x.stateNode===M){var z=pM((M[en]||null).action),le=E.submitter;le&&(m=(m=le[en]||null)?pM(m.formAction):le.getAttribute("formAction"),m!==null&&(z=m,le=null));var be=new Kc("action","action",null,E,M);A.push({event:be,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(zm!==0){var Re=le?gM(M,le):new FormData(M);iu(x,{pending:!0,data:Re,method:M.method,action:z},null,Re)}}else typeof z=="function"&&(be.preventDefault(),Re=le?gM(M,le):new FormData(M),iu(x,{pending:!0,data:Re,method:M.method,action:z},z,Re))},currentTarget:M}]})}}for(var Dk=0;Dk<sf.length;Dk++){var Rk=sf[Dk],Vue=Rk.toLowerCase(),zue=Rk[0].toUpperCase()+Rk.slice(1);za(Vue,"on"+zue)}za(kh,"onAnimationEnd"),za(qd,"onAnimationIteration"),za(Wd,"onAnimationStart"),za("dblclick","onDoubleClick"),za("focusin","onFocus"),za("focusout","onBlur"),za(Xd,"onTransitionRun"),za(af,"onTransitionStart"),za(Bh,"onTransitionCancel"),za(Yd,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var q1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$ue=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(q1));function vM(A,m){m=(m&4)!==0;for(var x=0;x<A.length;x++){var E=A[x],M=E.event;E=E.listeners;e:{var z=void 0;if(m)for(var le=E.length-1;0<=le;le--){var be=E[le],Re=be.instance,it=be.currentTarget;if(be=be.listener,Re!==z&&M.isPropagationStopped())break e;z=be,M.currentTarget=it;try{z(M)}catch(Ct){M2(Ct)}M.currentTarget=null,z=Re}else for(le=0;le<E.length;le++){if(be=E[le],Re=be.instance,it=be.currentTarget,be=be.listener,Re!==z&&M.isPropagationStopped())break e;z=be,M.currentTarget=it;try{z(M)}catch(Ct){M2(Ct)}M.currentTarget=null,z=Re}}}}function Sn(A,m){var x=m[Yr];x===void 0&&(x=m[Yr]=new Set);var E=A+"__bubble";x.has(E)||(xM(m,A,2,!1),x.add(E))}function Pk(A,m,x){var E=0;m&&(E|=4),xM(x,A,E,m)}var Z2="_reactListening"+Math.random().toString(36).slice(2);function Lk(A){if(!A[Z2]){A[Z2]=!0,tt.forEach(function(x){x!=="selectionchange"&&($ue.has(x)||Pk(x,!1,A),Pk(x,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[Z2]||(m[Z2]=!0,Pk("selectionchange",!1,m))}}function xM(A,m,x,E){switch(VM(m)){case 2:var M=vde;break;case 8:M=xde;break;default:M=Jk}x=M.bind(null,m,x,A),M=void 0,!ro||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),E?M!==void 0?A.addEventListener(m,x,{capture:!0,passive:M}):A.addEventListener(m,x,!0):M!==void 0?A.addEventListener(m,x,{passive:M}):A.addEventListener(m,x,!1)}function Mk(A,m,x,E,M){var z=E;if((m&1)===0&&(m&2)===0&&E!==null)e:for(;;){if(E===null)return;var le=E.tag;if(le===3||le===4){var be=E.stateNode.containerInfo;if(be===M)break;if(le===4)for(le=E.return;le!==null;){var Re=le.tag;if((Re===3||Re===4)&&le.stateNode.containerInfo===M)return;le=le.return}for(;be!==null;){if(le=Ne(be),le===null)return;if(Re=le.tag,Re===5||Re===6||Re===26||Re===27){E=z=le;continue e}be=be.parentNode}}E=E.return}Eh(function(){var it=z,Ct=ca(x),It=[];e:{var At=Ku.get(A);if(At!==void 0){var ft=Kc,zr=A;switch(A){case"keypress":if(Co(x)===0)break e;case"keydown":case"keyup":ft=ic;break;case"focusin":zr="focus",ft=qc;break;case"focusout":zr="blur",ft=qc;break;case"beforeblur":case"afterblur":ft=qc;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Hd;break;case kh:case qd:case Wd:ft=Md;break;case Yd:ft=de;break;case"scroll":case"scrollend":ft=JA;break;case"wheel":ft=Le;break;case"copy":case"cut":case"paste":ft=Ud;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=zu;break;case"toggle":case"beforetoggle":ft=xt}var Ir=(m&4)!==0,wa=!Ir&&(A==="scroll"||A==="scrollend"),We=Ir?At!==null?At+"Capture":null:At;Ir=[];for(var Qe=it,rt;Qe!==null;){var St=Qe;if(rt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||rt===null||We===null||(St=ji(Qe,We),St!=null&&Ir.push(W1(Qe,St,rt))),wa)break;Qe=Qe.return}0<Ir.length&&(At=new ft(At,zr,null,x,Ct),It.push({event:At,listeners:Ir}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ft=A==="mouseout"||A==="pointerout",At&&x!==El&&(zr=x.relatedTarget||x.fromElement)&&(Ne(zr)||zr[cr]))break e;if((ft||At)&&(At=Ct.window===Ct?Ct:(At=Ct.ownerDocument)?At.defaultView||At.parentWindow:window,ft?(zr=x.relatedTarget||x.toElement,ft=it,zr=zr?Ne(zr):null,zr!==null&&(wa=s(zr),Ir=zr.tag,zr!==wa||Ir!==5&&Ir!==27&&Ir!==6)&&(zr=null)):(ft=null,zr=it),ft!==zr)){if(Ir=hs,St="onMouseLeave",We="onMouseEnter",Qe="mouse",(A==="pointerout"||A==="pointerover")&&(Ir=zu,St="onPointerLeave",We="onPointerEnter",Qe="pointer"),wa=ft==null?At:Ye(ft),rt=zr==null?At:Ye(zr),At=new Ir(St,Qe+"leave",ft,x,Ct),At.target=wa,At.relatedTarget=rt,St=null,Ne(Ct)===it&&(Ir=new Ir(We,Qe+"enter",zr,x,Ct),Ir.target=rt,Ir.relatedTarget=wa,St=Ir),wa=St,ft&&zr)t:{for(Ir=ft,We=zr,Qe=0,rt=Ir;rt;rt=Dg(rt))Qe++;for(rt=0,St=We;St;St=Dg(St))rt++;for(;0<Qe-rt;)Ir=Dg(Ir),Qe--;for(;0<rt-Qe;)We=Dg(We),rt--;for(;Qe--;){if(Ir===We||We!==null&&Ir===We.alternate)break t;Ir=Dg(Ir),We=Dg(We)}Ir=null}else Ir=null;ft!==null&&bM(It,At,ft,Ir,!1),zr!==null&&wa!==null&&bM(It,wa,zr,Ir,!0)}}e:{if(At=it?Ye(it):window,ft=At.nodeName&&At.nodeName.toLowerCase(),ft==="select"||ft==="input"&&At.type==="file")var Ar=Sh;else if(ra(At))if(ef)Ar=ug;else{Ar=y1;var yn=So}else ft=At.nodeName,!ft||ft.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?it&&XA(it.elementType)&&(Ar=Sh):Ar=Em;if(Ar&&(Ar=Ar(A,it))){Bl(It,Ar,x,Ct);break e}yn&&yn(A,At,it),A==="focusout"&&it&&At.type==="number"&&it.memoizedProps.value!=null&&Vc(At,"number",At.value)}switch(yn=it?Ye(it):window,A){case"focusin":(ra(yn)||yn.contentEditable==="true")&&(No=yn,oc=it,Zc=null);break;case"focusout":Zc=oc=No=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Va(It,x,Ct);break;case"selectionchange":if(Gd)break;case"keydown":case"keyup":Va(It,x,Ct)}var xr;if(Jt)e:{switch(A){case"compositionstart":var Fr="onCompositionStart";break e;case"compositionend":Fr="onCompositionEnd";break e;case"compositionupdate":Fr="onCompositionUpdate";break e}Fr=void 0}else Tr?st(A,x)&&(Fr="onCompositionEnd"):A==="keydown"&&x.keyCode===229&&(Fr="onCompositionStart");Fr&&(se&&x.locale!=="ko"&&(Tr||Fr!=="onCompositionStart"?Fr==="onCompositionEnd"&&Tr&&(xr=YA()):(Eo=Ct,$c="value"in Eo?Eo.value:Eo.textContent,Tr=!0)),yn=eE(it,Fr),0<yn.length&&(Fr=new Qu(Fr,A,null,x,Ct),It.push({event:Fr,listeners:yn}),xr?Fr.data=xr:(xr=Mt(x),xr!==null&&(Fr.data=xr)))),(xr=ee?bn(A,x):Gr(A,x))&&(Fr=eE(it,"onBeforeInput"),0<Fr.length&&(yn=new Qu("onBeforeInput","beforeinput",null,x,Ct),It.push({event:yn,listeners:Fr}),yn.data=xr)),Hue(It,A,it,x,Ct)}vM(It,m)})}function W1(A,m,x){return{instance:A,listener:m,currentTarget:x}}function eE(A,m){for(var x=m+"Capture",E=[];A!==null;){var M=A,z=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||z===null||(M=ji(A,x),M!=null&&E.unshift(W1(A,M,z)),M=ji(A,m),M!=null&&E.push(W1(A,M,z))),A.tag===3)return E;A=A.return}return[]}function Dg(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function bM(A,m,x,E,M){for(var z=m._reactName,le=[];x!==null&&x!==E;){var be=x,Re=be.alternate,it=be.stateNode;if(be=be.tag,Re!==null&&Re===E)break;be!==5&&be!==26&&be!==27||it===null||(Re=it,M?(it=ji(x,z),it!=null&&le.unshift(W1(x,it,Re))):M||(it=ji(x,z),it!=null&&le.push(W1(x,it,Re)))),x=x.return}le.length!==0&&A.push({event:m,listeners:le})}var Kue=/\r\n?/g,Gue=/\u0000|\uFFFD/g;function yM(A){return(typeof A=="string"?A:""+A).replace(Kue,`
`).replace(Gue,"")}function wM(A,m){return m=yM(m),yM(A)===m}function tE(){}function ya(A,m,x,E,M,z){switch(x){case"children":typeof E=="string"?m==="body"||m==="textarea"&&E===""||yo(A,E):(typeof E=="number"||typeof E=="bigint")&&m!=="body"&&yo(A,""+E);break;case"className":sn(A,"class",E);break;case"tabIndex":sn(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(A,x,E);break;case"style":WA(A,E,z);break;case"data":if(m!=="object"){sn(A,"data",E);break}case"src":case"href":if(E===""&&(m!=="a"||x!=="href")){A.removeAttribute(x);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=rc(""+E),A.setAttribute(x,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(x==="formAction"?(m!=="input"&&ya(A,m,"name",M.name,M,null),ya(A,m,"formEncType",M.formEncType,M,null),ya(A,m,"formMethod",M.formMethod,M,null),ya(A,m,"formTarget",M.formTarget,M,null)):(ya(A,m,"encType",M.encType,M,null),ya(A,m,"method",M.method,M,null),ya(A,m,"target",M.target,M,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=rc(""+E),A.setAttribute(x,E);break;case"onClick":E!=null&&(A.onclick=tE);break;case"onScroll":E!=null&&Sn("scroll",A);break;case"onScrollEnd":E!=null&&Sn("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}x=rc(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""+E):A.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""):A.removeAttribute(x);break;case"capture":case"download":E===!0?A.setAttribute(x,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,E):A.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(x,E):A.removeAttribute(x);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(x):A.setAttribute(x,E);break;case"popover":Sn("beforetoggle",A),Sn("toggle",A),an(A,"popover",E);break;case"xlinkActuate":dn(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":dn(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":dn(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":dn(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":dn(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":dn(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":dn(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":dn(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":dn(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":an(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=tc.get(x)||x,an(A,x,E))}}function Uk(A,m,x,E,M,z){switch(x){case"style":WA(A,E,z);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"children":typeof E=="string"?yo(A,E):(typeof E=="number"||typeof E=="bigint")&&yo(A,""+E);break;case"onScroll":E!=null&&Sn("scroll",A);break;case"onScrollEnd":E!=null&&Sn("scrollend",A);break;case"onClick":E!=null&&(A.onclick=tE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!at.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(M=x.endsWith("Capture"),m=x.slice(2,M?x.length-7:void 0),z=A[en]||null,z=z!=null?z[x]:null,typeof z=="function"&&A.removeEventListener(m,z,M),typeof E=="function")){typeof z!="function"&&z!==null&&(x in A?A[x]=null:A.hasAttribute(x)&&A.removeAttribute(x)),A.addEventListener(m,E,M);break e}x in A?A[x]=E:E===!0?A.setAttribute(x,""):an(A,x,E)}}}function lo(A,m,x){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",A),Sn("load",A);var E=!1,M=!1,z;for(z in x)if(x.hasOwnProperty(z)){var le=x[z];if(le!=null)switch(z){case"src":E=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,z,le,x,null)}}M&&ya(A,m,"srcSet",x.srcSet,x,null),E&&ya(A,m,"src",x.src,x,null);return;case"input":Sn("invalid",A);var be=z=le=M=null,Re=null,it=null;for(E in x)if(x.hasOwnProperty(E)){var Ct=x[E];if(Ct!=null)switch(E){case"name":M=Ct;break;case"type":le=Ct;break;case"checked":Re=Ct;break;case"defaultChecked":it=Ct;break;case"value":z=Ct;break;case"defaultValue":be=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(n(137,m));break;default:ya(A,m,E,Ct,x,null)}}Hc(A,z,be,Re,it,le,M,!1),Qc(A);return;case"select":Sn("invalid",A),E=le=z=null;for(M in x)if(x.hasOwnProperty(M)&&(be=x[M],be!=null))switch(M){case"value":z=be;break;case"defaultValue":le=be;break;case"multiple":E=be;default:ya(A,m,M,be,x,null)}m=z,x=le,A.multiple=!!E,m!=null?wl(A,!!E,m,!1):x!=null&&wl(A,!!E,x,!0);return;case"textarea":Sn("invalid",A),z=M=E=null;for(le in x)if(x.hasOwnProperty(le)&&(be=x[le],be!=null))switch(le){case"value":E=be;break;case"defaultValue":M=be;break;case"children":z=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ya(A,m,le,be,x,null)}zc(A,E,M,z),Qc(A);return;case"option":for(Re in x)if(x.hasOwnProperty(Re)&&(E=x[Re],E!=null))switch(Re){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ya(A,m,Re,E,x,null)}return;case"dialog":Sn("beforetoggle",A),Sn("toggle",A),Sn("cancel",A),Sn("close",A);break;case"iframe":case"object":Sn("load",A);break;case"video":case"audio":for(E=0;E<q1.length;E++)Sn(q1[E],A);break;case"image":Sn("error",A),Sn("load",A);break;case"details":Sn("toggle",A);break;case"embed":case"source":case"link":Sn("error",A),Sn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in x)if(x.hasOwnProperty(it)&&(E=x[it],E!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,it,E,x,null)}return;default:if(XA(m)){for(Ct in x)x.hasOwnProperty(Ct)&&(E=x[Ct],E!==void 0&&Uk(A,m,Ct,E,x,void 0));return}}for(be in x)x.hasOwnProperty(be)&&(E=x[be],E!=null&&ya(A,m,be,E,x,null))}function que(A,m,x,E){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,z=null,le=null,be=null,Re=null,it=null,Ct=null;for(ft in x){var It=x[ft];if(x.hasOwnProperty(ft)&&It!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":Re=It;default:E.hasOwnProperty(ft)||ya(A,m,ft,null,E,It)}}for(var At in E){var ft=E[At];if(It=x[At],E.hasOwnProperty(At)&&(ft!=null||It!=null))switch(At){case"type":z=ft;break;case"name":M=ft;break;case"checked":it=ft;break;case"defaultChecked":Ct=ft;break;case"value":le=ft;break;case"defaultValue":be=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,m));break;default:ft!==It&&ya(A,m,At,ft,E,It)}}xi(A,le,be,Re,it,Ct,z,M);return;case"select":ft=le=be=At=null;for(z in x)if(Re=x[z],x.hasOwnProperty(z)&&Re!=null)switch(z){case"value":break;case"multiple":ft=Re;default:E.hasOwnProperty(z)||ya(A,m,z,null,E,Re)}for(M in E)if(z=E[M],Re=x[M],E.hasOwnProperty(M)&&(z!=null||Re!=null))switch(M){case"value":At=z;break;case"defaultValue":be=z;break;case"multiple":le=z;default:z!==Re&&ya(A,m,M,z,E,Re)}m=be,x=le,E=ft,At!=null?wl(A,!!x,At,!1):!!E!=!!x&&(m!=null?wl(A,!!x,m,!0):wl(A,!!x,x?[]:"",!1));return;case"textarea":ft=At=null;for(be in x)if(M=x[be],x.hasOwnProperty(be)&&M!=null&&!E.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ya(A,m,be,null,E,M)}for(le in E)if(M=E[le],z=x[le],E.hasOwnProperty(le)&&(M!=null||z!=null))switch(le){case"value":At=M;break;case"defaultValue":ft=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==z&&ya(A,m,le,M,E,z)}Vn(A,At,ft);return;case"option":for(var zr in x)if(At=x[zr],x.hasOwnProperty(zr)&&At!=null&&!E.hasOwnProperty(zr))switch(zr){case"selected":A.selected=!1;break;default:ya(A,m,zr,null,E,At)}for(Re in E)if(At=E[Re],ft=x[Re],E.hasOwnProperty(Re)&&At!==ft&&(At!=null||ft!=null))switch(Re){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ya(A,m,Re,At,E,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ir in x)At=x[Ir],x.hasOwnProperty(Ir)&&At!=null&&!E.hasOwnProperty(Ir)&&ya(A,m,Ir,null,E,At);for(it in E)if(At=E[it],ft=x[it],E.hasOwnProperty(it)&&At!==ft&&(At!=null||ft!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ya(A,m,it,At,E,ft)}return;default:if(XA(m)){for(var wa in x)At=x[wa],x.hasOwnProperty(wa)&&At!==void 0&&!E.hasOwnProperty(wa)&&Uk(A,m,wa,void 0,E,At);for(Ct in E)At=E[Ct],ft=x[Ct],!E.hasOwnProperty(Ct)||At===ft||At===void 0&&ft===void 0||Uk(A,m,Ct,At,E,ft);return}}for(var We in x)At=x[We],x.hasOwnProperty(We)&&At!=null&&!E.hasOwnProperty(We)&&ya(A,m,We,null,E,At);for(It in E)At=E[It],ft=x[It],!E.hasOwnProperty(It)||At===ft||At==null&&ft==null||ya(A,m,It,At,E,ft)}var Qk=null,Hk=null;function rE(A){return A.nodeType===9?A:A.ownerDocument}function EM(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CM(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function Vk(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var zk=null;function Wue(){var A=window.event;return A&&A.type==="popstate"?A===zk?!1:(zk=A,!0):(zk=null,!1)}var _M=typeof setTimeout=="function"?setTimeout:void 0,Xue=typeof clearTimeout=="function"?clearTimeout:void 0,SM=typeof Promise=="function"?Promise:void 0,Yue=typeof queueMicrotask=="function"?queueMicrotask:typeof SM<"u"?function(A){return SM.resolve(null).then(A).catch(Jue)}:_M;function Jue(A){setTimeout(function(){throw A})}function Wh(A){return A==="head"}function NM(A,m){var x=m,E=0,M=0;do{var z=x.nextSibling;if(A.removeChild(x),z&&z.nodeType===8)if(x=z.data,x==="/$"){if(0<E&&8>E){x=E;var le=A.ownerDocument;if(x&1&&X1(le.documentElement),x&2&&X1(le.body),x&4)for(x=le.head,X1(x),le=x.firstChild;le;){var be=le.nextSibling,Re=le.nodeName;le[Ee]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&le.rel.toLowerCase()==="stylesheet"||x.removeChild(le),le=be}}if(M===0){A.removeChild(z),ab(m);return}M--}else x==="$"||x==="$?"||x==="$!"?M++:E=x.charCodeAt(0)-48;else E=0;x=z}while(x);ab(m)}function $k(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var x=m;switch(m=m.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":$k(x),Ce(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}A.removeChild(x)}}function Zue(A,m,x,E){for(;A.nodeType===1;){var M=x;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[Ee])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(z=A.getAttribute("rel"),z==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(z!==M.rel||A.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||A.getAttribute("title")!==(M.title==null?null:M.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(z=A.getAttribute("src"),(z!==(M.src==null?null:M.src)||A.getAttribute("type")!==(M.type==null?null:M.type)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&z&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var z=M.name==null?null:""+M.name;if(M.type==="hidden"&&A.getAttribute("name")===z)return A}else return A;if(A=id(A.nextSibling),A===null)break}return null}function ede(A,m,x){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!x||(A=id(A.nextSibling),A===null))return null;return A}function Kk(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function tde(A,m){var x=A.ownerDocument;if(A.data!=="$?"||x.readyState==="complete")m();else{var E=function(){m(),x.removeEventListener("DOMContentLoaded",E)};x.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function id(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var Gk=null;function kM(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var x=A.data;if(x==="$"||x==="$!"||x==="$?"){if(m===0)return A;m--}else x==="/$"&&m++}A=A.previousSibling}return null}function BM(A,m,x){switch(m=rE(x),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function X1(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);Ce(A)}var cu=new Map,TM=new Set;function nE(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Ef=Z.d;Z.d={f:rde,r:nde,D:ade,C:sde,L:ide,m:ode,X:cde,S:lde,M:ude};function rde(){var A=Ef.f(),m=q2();return A||m}function nde(A){var m=Te(A);m!==null&&m.tag===5&&m.type==="form"?Mm(m):Ef.r(A)}var Rg=typeof document>"u"?null:document;function IM(A,m,x){var E=Rg;if(E&&typeof m=="string"&&m){var M=On(m);M='link[rel="'+A+'"][href="'+M+'"]',typeof x=="string"&&(M+='[crossorigin="'+x+'"]'),TM.has(M)||(TM.add(M),A={rel:A,crossOrigin:x,href:m},E.querySelector(M)===null&&(m=E.createElement("link"),lo(m,"link",A),$e(m),E.head.appendChild(m)))}}function ade(A){Ef.D(A),IM("dns-prefetch",A,null)}function sde(A,m){Ef.C(A,m),IM("preconnect",A,m)}function ide(A,m,x){Ef.L(A,m,x);var E=Rg;if(E&&A&&m){var M='link[rel="preload"][as="'+On(m)+'"]';m==="image"&&x&&x.imageSrcSet?(M+='[imagesrcset="'+On(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(M+='[imagesizes="'+On(x.imageSizes)+'"]')):M+='[href="'+On(A)+'"]';var z=M;switch(m){case"style":z=Pg(A);break;case"script":z=Lg(A)}cu.has(z)||(A=d({rel:"preload",href:m==="image"&&x&&x.imageSrcSet?void 0:A,as:m},x),cu.set(z,A),E.querySelector(M)!==null||m==="style"&&E.querySelector(Y1(z))||m==="script"&&E.querySelector(J1(z))||(m=E.createElement("link"),lo(m,"link",A),$e(m),E.head.appendChild(m)))}}function ode(A,m){Ef.m(A,m);var x=Rg;if(x&&A){var E=m&&typeof m.as=="string"?m.as:"script",M='link[rel="modulepreload"][as="'+On(E)+'"][href="'+On(A)+'"]',z=M;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Lg(A)}if(!cu.has(z)&&(A=d({rel:"modulepreload",href:A},m),cu.set(z,A),x.querySelector(M)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(J1(z)))return}E=x.createElement("link"),lo(E,"link",A),$e(E),x.head.appendChild(E)}}}function lde(A,m,x){Ef.S(A,m,x);var E=Rg;if(E&&A){var M=ut(E).hoistableStyles,z=Pg(A);m=m||"default";var le=M.get(z);if(!le){var be={loading:0,preload:null};if(le=E.querySelector(Y1(z)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},x),(x=cu.get(z))&&qk(A,x);var Re=le=E.createElement("link");$e(Re),lo(Re,"link",A),Re._p=new Promise(function(it,Ct){Re.onload=it,Re.onerror=Ct}),Re.addEventListener("load",function(){be.loading|=1}),Re.addEventListener("error",function(){be.loading|=2}),be.loading|=4,aE(le,m,E)}le={type:"stylesheet",instance:le,count:1,state:be},M.set(z,le)}}}function cde(A,m){Ef.X(A,m);var x=Rg;if(x&&A){var E=ut(x).hoistableScripts,M=Lg(A),z=E.get(M);z||(z=x.querySelector(J1(M)),z||(A=d({src:A,async:!0},m),(m=cu.get(M))&&Wk(A,m),z=x.createElement("script"),$e(z),lo(z,"link",A),x.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(M,z))}}function ude(A,m){Ef.M(A,m);var x=Rg;if(x&&A){var E=ut(x).hoistableScripts,M=Lg(A),z=E.get(M);z||(z=x.querySelector(J1(M)),z||(A=d({src:A,async:!0,type:"module"},m),(m=cu.get(M))&&Wk(A,m),z=x.createElement("script"),$e(z),lo(z,"link",A),x.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(M,z))}}function jM(A,m,x,E){var M=(M=ie.current)?nE(M):null;if(!M)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(m=Pg(x.href),x=ut(M).hoistableStyles,E=x.get(m),E||(E={type:"style",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){A=Pg(x.href);var z=ut(M).hoistableStyles,le=z.get(A);if(le||(M=M.ownerDocument||M,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(A,le),(z=M.querySelector(Y1(A)))&&!z._p&&(le.instance=z,le.state.loading=5),cu.has(A)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},cu.set(A,x),z||dde(M,A,x,le.state))),m&&E===null)throw Error(n(528,""));return le}if(m&&E!==null)throw Error(n(529,""));return null;case"script":return m=x.async,x=x.src,typeof x=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Lg(x),x=ut(M).hoistableScripts,E=x.get(m),E||(E={type:"script",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function Pg(A){return'href="'+On(A)+'"'}function Y1(A){return'link[rel="stylesheet"]['+A+"]"}function FM(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function dde(A,m,x,E){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?E.loading=1:(m=A.createElement("link"),E.preload=m,m.addEventListener("load",function(){return E.loading|=1}),m.addEventListener("error",function(){return E.loading|=2}),lo(m,"link",x),$e(m),A.head.appendChild(m))}function Lg(A){return'[src="'+On(A)+'"]'}function J1(A){return"script[async]"+A}function OM(A,m,x){if(m.count++,m.instance===null)switch(m.type){case"style":var E=A.querySelector('style[data-href~="'+On(x.href)+'"]');if(E)return m.instance=E,$e(E),E;var M=d({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),$e(E),lo(E,"style",M),aE(E,x.precedence,A),m.instance=E;case"stylesheet":M=Pg(x.href);var z=A.querySelector(Y1(M));if(z)return m.state.loading|=4,m.instance=z,$e(z),z;E=FM(x),(M=cu.get(M))&&qk(E,M),z=(A.ownerDocument||A).createElement("link"),$e(z);var le=z;return le._p=new Promise(function(be,Re){le.onload=be,le.onerror=Re}),lo(z,"link",E),m.state.loading|=4,aE(z,x.precedence,A),m.instance=z;case"script":return z=Lg(x.src),(M=A.querySelector(J1(z)))?(m.instance=M,$e(M),M):(E=x,(M=cu.get(z))&&(E=d({},x),Wk(E,M)),A=A.ownerDocument||A,M=A.createElement("script"),$e(M),lo(M,"link",E),A.head.appendChild(M),m.instance=M);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(E=m.instance,m.state.loading|=4,aE(E,x.precedence,A));return m.instance}function aE(A,m,x){for(var E=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=E.length?E[E.length-1]:null,z=M,le=0;le<E.length;le++){var be=E[le];if(be.dataset.precedence===m)z=be;else if(z!==M)break}z?z.parentNode.insertBefore(A,z.nextSibling):(m=x.nodeType===9?x.head:x,m.insertBefore(A,m.firstChild))}function qk(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function Wk(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var sE=null;function DM(A,m,x){if(sE===null){var E=new Map,M=sE=new Map;M.set(x,E)}else M=sE,E=M.get(x),E||(E=new Map,M.set(x,E));if(E.has(A))return E;for(E.set(A,null),x=x.getElementsByTagName(A),M=0;M<x.length;M++){var z=x[M];if(!(z[Ee]||z[tn]||A==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var le=z.getAttribute(m)||"";le=A+le;var be=E.get(le);be?be.push(z):E.set(le,[z])}}return E}function RM(A,m,x){A=A.ownerDocument||A,A.head.insertBefore(x,m==="title"?A.querySelector("head > title"):null)}function Ade(A,m,x){if(x===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function PM(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Z1=null;function fde(){}function hde(A,m,x){if(Z1===null)throw Error(n(475));var E=Z1;if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var M=Pg(x.href),z=A.querySelector(Y1(M));if(z){A=z._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=iE.bind(E),A.then(E,E)),m.state.loading|=4,m.instance=z,$e(z);return}z=A.ownerDocument||A,x=FM(x),(M=cu.get(M))&&qk(x,M),z=z.createElement("link"),$e(z);var le=z;le._p=new Promise(function(be,Re){le.onload=be,le.onerror=Re}),lo(z,"link",x),m.instance=z}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(E.count++,m=iE.bind(E),A.addEventListener("load",m),A.addEventListener("error",m))}}function mde(){if(Z1===null)throw Error(n(475));var A=Z1;return A.stylesheets&&A.count===0&&Xk(A,A.stylesheets),0<A.count?function(m){var x=setTimeout(function(){if(A.stylesheets&&Xk(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(x)}}:null}function iE(){if(this.count--,this.count===0){if(this.stylesheets)Xk(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var oE=null;function Xk(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,oE=new Map,m.forEach(pde,A),oE=null,iE.call(A))}function pde(A,m){if(!(m.state.loading&4)){var x=oE.get(A);if(x)var E=x.get(null);else{x=new Map,oE.set(A,x);for(var M=A.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<M.length;z++){var le=M[z];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(x.set(le.dataset.precedence,le),E=le)}E&&x.set(null,E)}M=m.instance,le=M.getAttribute("data-precedence"),z=x.get(le)||E,z===E&&x.set(null,M),x.set(le,M),this.count++,E=iE.bind(this),M.addEventListener("load",E),M.addEventListener("error",E),z?z.parentNode.insertBefore(M,z.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(M,A.firstChild)),m.state.loading|=4}}var eb={$$typeof:S,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function gde(A,m,x,E,M,z,le,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Je(0),this.hiddenUpdates=Je(null),this.identifierPrefix=E,this.onUncaughtError=M,this.onCaughtError=z,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function LM(A,m,x,E,M,z,le,be,Re,it,Ct,It){return A=new gde(A,m,x,le,be,Re,it,It),m=1,z===!0&&(m|=24),z=Ri(3,null,null,m),A.current=z,z.stateNode=A,m=E1(),m.refCount++,A.pooledCache=m,m.refCount++,z.memoizedState={element:E,isDehydrated:x,cache:m},Ue(z),A}function MM(A){return A?(A=ri,A):ri}function UM(A,m,x,E,M,z){M=MM(M),E.context===null?E.context=M:E.pendingContext=M,E=Et(m),E.payload={element:x},z=z===void 0?null:z,z!==null&&(E.callback=z),x=kt(A,E,m),x!==null&&(pc(x,A,m),_t(x,A,m))}function QM(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var x=A.retryLane;A.retryLane=x!==0&&x<m?x:m}}function Yk(A,m){QM(A,m),(A=A.alternate)&&QM(A,m)}function HM(A){if(A.tag===13){var m=Gu(A,67108864);m!==null&&pc(m,A,67108864),Yk(A,67108864)}}var lE=!0;function vde(A,m,x,E){var M=q.T;q.T=null;var z=Z.p;try{Z.p=2,Jk(A,m,x,E)}finally{Z.p=z,q.T=M}}function xde(A,m,x,E){var M=q.T;q.T=null;var z=Z.p;try{Z.p=8,Jk(A,m,x,E)}finally{Z.p=z,q.T=M}}function Jk(A,m,x,E){if(lE){var M=Zk(E);if(M===null)Mk(A,m,E,cE,x),zM(A,E);else if(yde(M,A,m,x,E))E.stopPropagation();else if(zM(A,E),m&4&&-1<bde.indexOf(A)){for(;M!==null;){var z=Te(M);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var le=Cr(z.pendingLanes);if(le!==0){var be=z;for(be.pendingLanes|=2,be.entangledLanes|=2;le;){var Re=1<<31-Ot(le);be.entanglements[1]|=Re,le&=~Re}dA(z),(da&6)===0&&(K2=Ie()+500,G1(0))}}break;case 13:be=Gu(z,2),be!==null&&pc(be,z,2),q2(),Yk(z,2)}if(z=Zk(E),z===null&&Mk(A,m,E,cE,x),z===M)break;M=z}M!==null&&E.stopPropagation()}else Mk(A,m,E,null,x)}}function Zk(A){return A=ca(A),eB(A)}var cE=null;function eB(A){if(cE=null,A=Ne(A),A!==null){var m=s(A);if(m===null)A=null;else{var x=m.tag;if(x===13){if(A=i(m),A!==null)return A;A=null}else if(x===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return cE=A,null}function VM(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case Xe:return 2;case ye:return 8;case Oe:case Pe:return 32;case qe:return 268435456;default:return 32}default:return 32}}var tB=!1,Xh=null,Yh=null,Jh=null,tb=new Map,rb=new Map,Zh=[],bde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zM(A,m){switch(A){case"focusin":case"focusout":Xh=null;break;case"dragenter":case"dragleave":Yh=null;break;case"mouseover":case"mouseout":Jh=null;break;case"pointerover":case"pointerout":tb.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":rb.delete(m.pointerId)}}function nb(A,m,x,E,M,z){return A===null||A.nativeEvent!==z?(A={blockedOn:m,domEventName:x,eventSystemFlags:E,nativeEvent:z,targetContainers:[M]},m!==null&&(m=Te(m),m!==null&&HM(m)),A):(A.eventSystemFlags|=E,m=A.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),A)}function yde(A,m,x,E,M){switch(m){case"focusin":return Xh=nb(Xh,A,m,x,E,M),!0;case"dragenter":return Yh=nb(Yh,A,m,x,E,M),!0;case"mouseover":return Jh=nb(Jh,A,m,x,E,M),!0;case"pointerover":var z=M.pointerId;return tb.set(z,nb(tb.get(z)||null,A,m,x,E,M)),!0;case"gotpointercapture":return z=M.pointerId,rb.set(z,nb(rb.get(z)||null,A,m,x,E,M)),!0}return!1}function $M(A){var m=Ne(A.target);if(m!==null){var x=s(m);if(x!==null){if(m=x.tag,m===13){if(m=i(x),m!==null){A.blockedOn=m,vn(A.priority,function(){if(x.tag===13){var E=mc();E=Pr(E);var M=Gu(x,E);M!==null&&pc(M,x,E),Yk(x,E)}});return}}else if(m===3&&x.stateNode.current.memoizedState.isDehydrated){A.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}A.blockedOn=null}function uE(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var x=Zk(A.nativeEvent);if(x===null){x=A.nativeEvent;var E=new x.constructor(x.type,x);El=E,x.target.dispatchEvent(E),El=null}else return m=Te(x),m!==null&&HM(m),A.blockedOn=x,!1;m.shift()}return!0}function KM(A,m,x){uE(A)&&x.delete(m)}function wde(){tB=!1,Xh!==null&&uE(Xh)&&(Xh=null),Yh!==null&&uE(Yh)&&(Yh=null),Jh!==null&&uE(Jh)&&(Jh=null),tb.forEach(KM),rb.forEach(KM)}function dE(A,m){A.blockedOn===m&&(A.blockedOn=null,tB||(tB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wde)))}var AE=null;function GM(A){AE!==A&&(AE=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){AE===A&&(AE=null);for(var m=0;m<A.length;m+=3){var x=A[m],E=A[m+1],M=A[m+2];if(typeof E!="function"){if(eB(E||x)===null)continue;break}var z=Te(x);z!==null&&(A.splice(m,3),m-=3,iu(z,{pending:!0,data:M,method:x.method,action:E},E,M))}}))}function ab(A){function m(Re){return dE(Re,A)}Xh!==null&&dE(Xh,A),Yh!==null&&dE(Yh,A),Jh!==null&&dE(Jh,A),tb.forEach(m),rb.forEach(m);for(var x=0;x<Zh.length;x++){var E=Zh[x];E.blockedOn===A&&(E.blockedOn=null)}for(;0<Zh.length&&(x=Zh[0],x.blockedOn===null);)$M(x),x.blockedOn===null&&Zh.shift();if(x=(A.ownerDocument||A).$$reactFormReplay,x!=null)for(E=0;E<x.length;E+=3){var M=x[E],z=x[E+1],le=M[en]||null;if(typeof z=="function")le||GM(x);else if(le){var be=null;if(z&&z.hasAttribute("formAction")){if(M=z,le=z[en]||null)be=le.formAction;else if(eB(M)!==null)continue}else be=le.action;typeof be=="function"?x[E+1]=be:(x.splice(E,3),E-=3),GM(x)}}}function rB(A){this._internalRoot=A}fE.prototype.render=rB.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var x=m.current,E=mc();UM(x,E,A,m,null,null)},fE.prototype.unmount=rB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;UM(A.current,2,null,A,null,null),q2(),m[cr]=null}};function fE(A){this._internalRoot=A}fE.prototype.unstable_scheduleHydration=function(A){if(A){var m=gn();A={blockedOn:null,target:A,priority:m};for(var x=0;x<Zh.length&&m!==0&&m<Zh[x].priority;x++);Zh.splice(x,0,A),x===0&&$M(A)}};var qM=t.version;if(qM!=="19.1.1")throw Error(n(527,qM,"19.1.1"));Z.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var Ede={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hE.isDisabled&&hE.supportsFiber)try{mt=hE.inject(Ede),Bt=hE}catch{}}return ib.createRoot=function(A,m){if(!a(A))throw Error(n(299));var x=!1,E="",M=u8,z=d8,le=A8,be=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(M=m.onUncaughtError),m.onCaughtError!==void 0&&(z=m.onCaughtError),m.onRecoverableError!==void 0&&(le=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=LM(A,1,!1,null,null,x,E,M,z,le,be,null),A[cr]=m.current,Lk(A),new rB(m)},ib.hydrateRoot=function(A,m,x){if(!a(A))throw Error(n(299));var E=!1,M="",z=u8,le=d8,be=A8,Re=null,it=null;return x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onUncaughtError!==void 0&&(z=x.onUncaughtError),x.onCaughtError!==void 0&&(le=x.onCaughtError),x.onRecoverableError!==void 0&&(be=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Re=x.unstable_transitionCallbacks),x.formState!==void 0&&(it=x.formState)),m=LM(A,1,!0,m,x??null,E,M,z,le,be,Re,it),m.context=MM(null),x=m.current,E=mc(),E=Pr(E),M=Et(E),M.callback=null,kt(x,M,E),x=E,m.current.lanes=x,gt(m,x),dA(m),A[cr]=m.current,Lk(A),new fE(m)},ib.version="19.1.1",ib}var aU;function Pde(){if(aU)return iB.exports;aU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),iB.exports=Rde(),iB.exports}var Lde=Pde();const Mde=bl(Lde),Ude=()=>{};var sU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Qde=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},jW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,l=a+2<e.length,u=l?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;l||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(IW(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Qde(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new Hde;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Hde extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vde=function(e){const t=IW(e);return jW.encodeByteArray(t,!0)},O_=function(e){return Vde(e).replace(/\./g,"")},FW=function(e){try{return jW.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zde(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $de=()=>zde().__FIREBASE_DEFAULTS__,Kde=()=>{if(typeof process>"u"||typeof sU>"u")return;const e=sU.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Gde=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&FW(e[1]);return t&&JSON.parse(t)},P5=()=>{try{return Ude()||$de()||Kde()||Gde()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},OW=e=>{var t,r;return(r=(t=P5())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},Z6=e=>{const t=OW(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},DW=()=>{var e;return(e=P5())==null?void 0:e.config},RW=e=>{var t;return(t=P5())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qde{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L5(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[O_(JSON.stringify(r)),O_(JSON.stringify(i)),""].join(".")}const ry={};function Wde(){const e={prod:[],emulator:[]};for(const t of Object.keys(ry))ry[t]?e.emulator.push(t):e.prod.push(t);return e}function Xde(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let iU=!1;function M5(e,t){if(typeof window>"u"||typeof document>"u"||!uh(window.location.host)||ry[e]===t||ry[e]||iU)return;ry[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Wde().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{iU=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Xde(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),v=r("learnmore"),b=document.getElementById(v)||document.createElement("a"),y=r("preprendIcon"),_=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const S=h.element;o(S),d(b,v);const k=u();l(_,y),S.append(_,g,b,k),document.body.appendChild(S)}s?(g.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yde(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zo())}function Jde(){var t;const e=(t=P5())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zde(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eAe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function tAe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rAe(){const e=Zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nAe(){return!Jde()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aAe(){try{return typeof indexedDB=="object"}catch{return!1}}function sAe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iAe="FirebaseError";class Bd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=iAe,Object.setPrototypeOf(this,Bd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_w.prototype.create)}}class _w{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?oAe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Bd(a,o,n)}}function oAe(e,t){return e.replace(lAe,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const lAe=/\{\$([^}]+)}/g;function cAe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $0(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(oU(s)&&oU(i)){if(!$0(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function oU(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Fb(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function Ob(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function uAe(e,t){const r=new dAe(e,t);return r.subscribe.bind(r)}class dAe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");AAe(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=uB),a.error===void 0&&(a.error=uB),a.complete===void 0&&(a.complete=uB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AAe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function uB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(e){return e&&e._delegate?e._delegate:e}class Gf{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fAe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new qde;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mAe(t))try{this.getOrInitializeService({instanceIdentifier:Gm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Gm){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Gm){return this.instances.has(t)}getOptions(t=Gm){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:hAe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Gm){return this.component?this.component.multipleInstances?t:Gm:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hAe(e){return e===Gm?void 0:e}function mAe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pAe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new fAe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kn||(kn={}));const gAe={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},vAe=kn.INFO,xAe={[kn.DEBUG]:"log",[kn.VERBOSE]:"log",[kn.INFO]:"info",[kn.WARN]:"warn",[kn.ERROR]:"error"},bAe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=xAe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let eO=class{constructor(t){this.name=t,this._logLevel=vAe,this._logHandler=bAe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?gAe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kn.DEBUG,...t),this._logHandler(this,kn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kn.VERBOSE,...t),this._logHandler(this,kn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kn.INFO,...t),this._logHandler(this,kn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kn.WARN,...t),this._logHandler(this,kn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kn.ERROR,...t),this._logHandler(this,kn.ERROR,...t)}};const yAe=(e,t)=>t.some(r=>e instanceof r);let lU,cU;function wAe(){return lU||(lU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EAe(){return cU||(cU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LW=new WeakMap,XI=new WeakMap,MW=new WeakMap,dB=new WeakMap,tO=new WeakMap;function CAe(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(I0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&LW.set(r,e)}).catch(()=>{}),tO.set(t,e),t}function _Ae(e){if(XI.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});XI.set(e,t)}let YI={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return XI.get(e);if(t==="objectStoreNames")return e.objectStoreNames||MW.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return I0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function SAe(e){YI=e(YI)}function NAe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(AB(this),t,...r);return MW.set(n,t.sort?t.sort():[t]),I0(n)}:EAe().includes(e)?function(...t){return e.apply(AB(this),t),I0(LW.get(this))}:function(...t){return I0(e.apply(AB(this),t))}}function kAe(e){return typeof e=="function"?NAe(e):(e instanceof IDBTransaction&&_Ae(e),yAe(e,wAe())?new Proxy(e,YI):e)}function I0(e){if(e instanceof IDBRequest)return CAe(e);if(dB.has(e))return dB.get(e);const t=kAe(e);return t!==e&&(dB.set(e,t),tO.set(t,e)),t}const AB=e=>tO.get(e);function BAe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=I0(i);return n&&i.addEventListener("upgradeneeded",l=>{n(I0(i.result),l.oldVersion,l.newVersion,I0(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const TAe=["get","getKey","getAll","getAllKeys","count"],IAe=["put","add","delete","clear"],fB=new Map;function uU(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(fB.get(t))return fB.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=IAe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||TAe.includes(r)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&l.done]))[0]};return fB.set(t,s),s}SAe(e=>({...e,get:(t,r,n)=>uU(t,r)||e.get(t,r,n),has:(t,r)=>!!uU(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jAe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(FAe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function FAe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const JI="@firebase/app",dU="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new eO("@firebase/app"),OAe="@firebase/app-compat",DAe="@firebase/analytics-compat",RAe="@firebase/analytics",PAe="@firebase/app-check-compat",LAe="@firebase/app-check",MAe="@firebase/auth",UAe="@firebase/auth-compat",QAe="@firebase/database",HAe="@firebase/data-connect",VAe="@firebase/database-compat",zAe="@firebase/functions",$Ae="@firebase/functions-compat",KAe="@firebase/installations",GAe="@firebase/installations-compat",qAe="@firebase/messaging",WAe="@firebase/messaging-compat",XAe="@firebase/performance",YAe="@firebase/performance-compat",JAe="@firebase/remote-config",ZAe="@firebase/remote-config-compat",efe="@firebase/storage",tfe="@firebase/storage-compat",rfe="@firebase/firestore",nfe="@firebase/ai",afe="@firebase/firestore-compat",sfe="firebase",ife="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="[DEFAULT]",ofe={[JI]:"fire-core",[OAe]:"fire-core-compat",[RAe]:"fire-analytics",[DAe]:"fire-analytics-compat",[LAe]:"fire-app-check",[PAe]:"fire-app-check-compat",[MAe]:"fire-auth",[UAe]:"fire-auth-compat",[QAe]:"fire-rtdb",[HAe]:"fire-data-connect",[VAe]:"fire-rtdb-compat",[zAe]:"fire-fn",[$Ae]:"fire-fn-compat",[KAe]:"fire-iid",[GAe]:"fire-iid-compat",[qAe]:"fire-fcm",[WAe]:"fire-fcm-compat",[XAe]:"fire-perf",[YAe]:"fire-perf-compat",[JAe]:"fire-rc",[ZAe]:"fire-rc-compat",[efe]:"fire-gcs",[tfe]:"fire-gcs-compat",[rfe]:"fire-fst",[afe]:"fire-fst-compat",[nfe]:"fire-vertex","fire-js":"fire-js",[sfe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new Map,lfe=new Map,ej=new Map;function AU(e,t){try{e.container.addComponent(t)}catch(r){qf.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function K0(e){const t=e.name;if(ej.has(t))return qf.debug(`There were multiple attempts to register component ${t}.`),!1;ej.set(t,e);for(const r of Ty.values())AU(r,e);for(const r of lfe.values())AU(r,e);return!0}function Nw(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Cc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cfe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},j0=new _w("app","Firebase",cfe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ufe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Gf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw j0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=ife;function rO(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:ZI,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw j0.create("bad-app-name",{appName:String(a)});if(r||(r=DW()),!r)throw j0.create("no-options");const s=Ty.get(a);if(s){if($0(r,s.options)&&$0(n,s.config))return s;throw j0.create("duplicate-app",{appName:a})}const i=new pAe(a);for(const l of ej.values())i.addComponent(l);const o=new ufe(r,n,i);return Ty.set(a,o),o}function U5(e=ZI){const t=Ty.get(e);if(!t&&e===ZI&&DW())return rO();if(!t)throw j0.create("no-app",{appName:e});return t}function fU(){return Array.from(Ty.values())}function Tu(e,t,r){let n=ofe[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),qf.warn(i.join(" "));return}K0(new Gf(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe="firebase-heartbeat-database",Afe=1,Iy="firebase-heartbeat-store";let hB=null;function UW(){return hB||(hB=BAe(dfe,Afe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Iy)}catch(r){console.warn(r)}}}}).catch(e=>{throw j0.create("idb-open",{originalErrorMessage:e.message})})),hB}async function ffe(e){try{const r=(await UW()).transaction(Iy),n=await r.objectStore(Iy).get(QW(e));return await r.done,n}catch(t){if(t instanceof Bd)qf.warn(t.message);else{const r=j0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});qf.warn(r.message)}}}async function hU(e,t){try{const n=(await UW()).transaction(Iy,"readwrite");await n.objectStore(Iy).put(t,QW(e)),await n.done}catch(r){if(r instanceof Bd)qf.warn(r.message);else{const n=j0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});qf.warn(n.message)}}}function QW(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hfe=1024,mfe=30;class pfe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new vfe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mU();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>mfe){const i=xfe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){qf.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=mU(),{heartbeatsToSend:n,unsentEntries:a}=gfe(this._heartbeatsCache.heartbeats),s=O_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return qf.warn(r),""}}}function mU(){return new Date().toISOString().substring(0,10)}function gfe(e,t=hfe){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),pU(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),pU(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class vfe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aAe()?sAe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await ffe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return hU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return hU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function pU(e){return O_(JSON.stringify({version:2,heartbeats:e})).length}function xfe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bfe(e){K0(new Gf("platform-logger",t=>new jAe(t),"PRIVATE")),K0(new Gf("heartbeat",t=>new pfe(t),"PRIVATE")),Tu(JI,dU,e),Tu(JI,dU,"esm2020"),Tu("fire-js","")}bfe("");function HW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yfe=HW,VW=new _w("auth","Firebase",HW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new eO("@firebase/auth");function wfe(e,...t){D_.logLevel<=kn.WARN&&D_.warn(`Auth (${qp}): ${e}`,...t)}function $C(e,...t){D_.logLevel<=kn.ERROR&&D_.error(`Auth (${qp}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(e,...t){throw nO(e,...t)}function jA(e,...t){return nO(e,...t)}function zW(e,t,r){const n={...yfe(),[t]:r};return new _w("auth","Firebase",n).create(t,{appName:e.name})}function F0(e){return zW(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nO(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return VW.create(e,...t)}function Qr(e,t,...r){if(!e)throw nO(t,...r)}function If(e){const t="INTERNAL ASSERTION FAILED: "+e;throw $C(t),new Error(t)}function Wf(e,t){e||If(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Efe(){return gU()==="http:"||gU()==="https:"}function gU(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cfe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Efe()||eAe()||"connection"in navigator)?navigator.onLine:!0}function _fe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t,r){this.shortDelay=t,this.longDelay=r,Wf(r>t,"Short delay should be less than long delay!"),this.isMobile=Yde()||tAe()}get(){return Cfe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(e,t){Wf(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;If("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;If("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;If("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sfe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kfe=new kw(3e4,6e4);function um(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function dh(e,t,r,n,a={}){return KW(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=Sw({key:e.config.apiKey,...i}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...s};return Zde()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&uh(e.emulatorConfig.host)&&(u.credentials="include"),$W.fetch()(await GW(e,e.config.apiHost,r,o),u)})}async function KW(e,t,r){e._canInitEmulator=!1;const n={...Sfe,...t};try{const a=new Tfe(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw mE(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mE(e,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw mE(e,"email-already-in-use",i);if(l==="USER_DISABLED")throw mE(e,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw zW(e,d,u);Sd(e,d)}}catch(a){if(a instanceof Bd)throw a;Sd(e,"network-request-failed",{message:String(a)})}}async function Q5(e,t,r,n,a={}){const s=await dh(e,t,r,n,a);return"mfaPendingCredential"in s&&Sd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function GW(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?aO(e.config,a):`${e.config.apiScheme}://${a}`;return Nfe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function Bfe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tfe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(jA(this.auth,"network-request-failed")),kfe.get())})}}function mE(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=jA(e,t,n);return a.customData._tokenResponse=r,a}function vU(e){return e!==void 0&&e.enterprise!==void 0}class Ife{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Bfe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jfe(e,t){return dh(e,"GET","/v2/recaptchaConfig",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ffe(e,t){return dh(e,"POST","/v1/accounts:delete",t)}async function R_(e,t){return dh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ofe(e,t=!1){const r=va(e),n=await r.getIdToken(t),a=sO(n);Qr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:ny(mB(a.auth_time)),issuedAtTime:ny(mB(a.iat)),expirationTime:ny(mB(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mB(e){return Number(e)*1e3}function sO(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return $C("JWT malformed, contained fewer than 3 sections"),null;try{const a=FW(r);return a?JSON.parse(a):($C("Failed to decode base64 JWT payload"),null)}catch(a){return $C("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function xU(e){const t=sO(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Bd&&Dfe(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Dfe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ny(this.lastLoginAt),this.creationTime=ny(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(e){var f;const t=e.auth,r=await e.getIdToken(),n=await jy(e,R_(t,{idToken:r}));Qr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?qW(a.providerUserInfo):[],i=Lfe(e.providerData,s),o=e.isAnonymous,l=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new rj(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function Pfe(e){const t=va(e);await P_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Lfe(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function qW(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mfe(e,t){const r=await KW(e,{},async()=>{const n=Sw({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await GW(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&uh(e.emulatorConfig.host)&&(l.credentials="include"),$W.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Ufe(e,t){return dh(e,"POST","/v2/accounts:revokeToken",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):xU(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=xU(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Mfe(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Dv;return n&&(Qr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Qr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Qr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Dv,this.toJSON())}_performRefresh(){return If("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class pd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Rfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rj(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await jy(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Ofe(this,t)}reload(){return Pfe(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new pd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await P_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cc(this.auth.app))return Promise.reject(F0(this.auth));const t=await this.getIdToken();return await jy(this,Ffe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:v}=r;Qr(f&&v,t,"internal-error");const b=Dv.fromJSON(this.name,v);Qr(typeof f=="string",t,"internal-error"),t0(n,t.name),t0(a,t.name),Qr(typeof h=="boolean",t,"internal-error"),Qr(typeof p=="boolean",t,"internal-error"),t0(s,t.name),t0(i,t.name),t0(o,t.name),t0(l,t.name),t0(u,t.name),t0(d,t.name);const y=new pd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(_=>({..._}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new Dv;a.updateFromServerResponse(r);const s=new pd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await P_(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Qr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?qW(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new Dv;o.updateFromIdToken(n);const l=new pd({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new rj(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=new Map;function jf(e){Wf(e instanceof Function,"Expected a class definition");let t=bU.get(e);return t?(Wf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bU.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}WW.type="NONE";const yU=WW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(e,t,r){return`firebase:${e}:${t}:${r}`}class Rv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=KC(this.userKey,a.apiKey,s),this.fullPersistenceKey=KC("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await R_(this.auth,{idToken:t}).catch(()=>{});return r?pd._fromGetAccountInfoResponse(this.auth,r,t):null}return pd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Rv(jf(yU),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||jf(yU);const i=KC(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await R_(t,{idToken:d}).catch(()=>{});if(!h)break;f=await pd._fromGetAccountInfoResponse(t,h,d)}else f=pd._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const l=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Rv(s,t,n):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Rv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ZW(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(XW(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tX(t))return"Blackberry";if(rX(t))return"Webos";if(YW(t))return"Safari";if((t.includes("chrome/")||JW(t))&&!t.includes("edge/"))return"Chrome";if(eX(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function XW(e=Zo()){return/firefox\//i.test(e)}function YW(e=Zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function JW(e=Zo()){return/crios\//i.test(e)}function ZW(e=Zo()){return/iemobile/i.test(e)}function eX(e=Zo()){return/android/i.test(e)}function tX(e=Zo()){return/blackberry/i.test(e)}function rX(e=Zo()){return/webos/i.test(e)}function iO(e=Zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qfe(e=Zo()){var t;return iO(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Hfe(){return rAe()&&document.documentMode===10}function nX(e=Zo()){return iO(e)||eX(e)||rX(e)||tX(e)||/windows phone/i.test(e)||ZW(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aX(e,t=[]){let r;switch(e){case"Browser":r=wU(Zo());break;case"Worker":r=`${wU(Zo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${qp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vfe{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const l=t(s);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zfe(e,t={}){return dh(e,"GET","/v2/passwordPolicy",um(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $fe=6;class Kfe{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??$fe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gfe{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EU(this),this.idTokenSubscription=new EU(this),this.beforeStateQueue=new Vfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=jf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Rv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await R_(this,{idToken:t}),n=await pd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Cc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(t);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await P_(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=_fe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Cc(this.app))return Promise.reject(F0(this));const r=t?va(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Cc(this.app)?Promise.reject(F0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Cc(this.app)?Promise.reject(F0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await zfe(this),r=new Kfe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new _w("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ufe(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&jf(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await Rv.create(this,[jf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,n,a);return()=>{i=!0,l()}}else{const l=t.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=aX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Cc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&wfe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wp(e){return va(e)}class EU{constructor(t){this.auth=t,this.observer=null,this.addObserver=uAe(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H5={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qfe(e){H5=e}function sX(e){return H5.loadJS(e)}function Wfe(){return H5.recaptchaEnterpriseScript}function Xfe(){return H5.gapiScript}function Yfe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Jfe{constructor(){this.enterprise=new Zfe}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Zfe{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const ehe="recaptcha-enterprise",iX="NO_RECAPTCHA";class the{constructor(t){this.type=ehe,this.auth=Wp(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{jfe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Ife(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;vU(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(iX)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Jfe().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&vU(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Wfe();l.length!==0&&(l+=o),sX(l).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function CU(e,t,r,n=!1,a=!1){const s=new the(e);let i;if(a)i=iX;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function nj(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await CU(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await CU(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rhe(e,t){const r=Nw(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if($0(s,t??{}))return a;Sd(a,"already-initialized")}return r.initialize({options:t})}function nhe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(jf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function ahe(e,t,r){const n=Wp(e);Qr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=oX(t),{host:i,port:o}=she(t),l=o===null?"":`:${o}`,u={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Qr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Qr($0(u,n.config.emulator)&&$0(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,uh(i)?(L5(`${s}//${i}${l}`),M5("Auth",!0)):ihe()}function oX(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function she(e){const t=oX(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:_U(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:_U(i)}}}function _U(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ihe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return If("not implemented")}_getIdTokenResponse(t){return If("not implemented")}_linkToIdToken(t,r){return If("not implemented")}_getReauthenticationResolver(t){return If("not implemented")}}async function ohe(e,t){return dh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lhe(e,t){return Q5(e,"POST","/v1/accounts:signInWithPassword",um(e,t))}async function che(e,t){return dh(e,"POST","/v1/accounts:sendOobCode",um(e,t))}async function uhe(e,t){return che(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dhe(e,t){return Q5(e,"POST","/v1/accounts:signInWithEmailLink",um(e,t))}async function Ahe(e,t){return Q5(e,"POST","/v1/accounts:signInWithEmailLink",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy extends oO{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Fy(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Fy(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nj(t,r,"signInWithPassword",lhe);case"emailLink":return dhe(t,{email:this._email,oobCode:this._password});default:Sd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nj(t,n,"signUpPassword",ohe);case"emailLink":return Ahe(t,{idToken:r,email:this._email,oobCode:this._password});default:Sd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pv(e,t){return Q5(e,"POST","/v1/accounts:signInWithIdp",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fhe="http://localhost";class Tp extends oO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Tp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Sd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Tp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Pv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Pv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Pv(t,r)}buildRequest(){const t={requestUri:fhe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Sw(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hhe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mhe(e){const t=Fb(Ob(e)).link,r=t?Fb(Ob(t)).deep_link_id:null,n=Fb(Ob(e)).deep_link_id;return(n?Fb(Ob(n)).link:null)||n||r||t||e}class lO{constructor(t){const r=Fb(Ob(t)),n=r.apiKey??null,a=r.oobCode??null,s=hhe(r.mode??null);Qr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=mhe(t);try{return new lO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.providerId=Mx.PROVIDER_ID}static credential(t,r){return Fy._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=lO.parseLink(r);return Qr(n,"argument-error"),Fy._fromEmailAndCode(t,n.code,n.tenantId)}}Mx.PROVIDER_ID="password";Mx.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mx.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lX{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends lX{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends Bw{constructor(){super("facebook.com")}static credential(t){return Tp._fromParams({providerId:p0.PROVIDER_ID,signInMethod:p0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return p0.credentialFromTaggedObject(t)}static credentialFromError(t){return p0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return p0.credential(t.oauthAccessToken)}catch{return null}}}p0.FACEBOOK_SIGN_IN_METHOD="facebook.com";p0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends Bw{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Tp._fromParams({providerId:g0.PROVIDER_ID,signInMethod:g0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return g0.credentialFromTaggedObject(t)}static credentialFromError(t){return g0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return g0.credential(r,n)}catch{return null}}}g0.GOOGLE_SIGN_IN_METHOD="google.com";g0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0 extends Bw{constructor(){super("github.com")}static credential(t){return Tp._fromParams({providerId:v0.PROVIDER_ID,signInMethod:v0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return v0.credentialFromTaggedObject(t)}static credentialFromError(t){return v0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return v0.credential(t.oauthAccessToken)}catch{return null}}}v0.GITHUB_SIGN_IN_METHOD="github.com";v0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends Bw{constructor(){super("twitter.com")}static credential(t,r){return Tp._fromParams({providerId:x0.PROVIDER_ID,signInMethod:x0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return x0.credentialFromTaggedObject(t)}static credentialFromError(t){return x0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return x0.credential(r,n)}catch{return null}}}x0.TWITTER_SIGN_IN_METHOD="twitter.com";x0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await pd._fromIdTokenResponse(t,n,a),i=SU(n);return new ax({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=SU(n);return new ax({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function SU(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends Bd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,L_.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new L_(t,r,n,a)}}function cX(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?L_._fromErrorAndOperation(e,s,t,n):s})}async function phe(e,t,r=!1){const n=await jy(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return ax._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ghe(e,t,r=!1){const{auth:n}=e;if(Cc(n.app))return Promise.reject(F0(n));const a="reauthenticate";try{const s=await jy(e,cX(n,a,t,e),r);Qr(s.idToken,n,"internal-error");const i=sO(s.idToken);Qr(i,n,"internal-error");const{sub:o}=i;return Qr(e.uid===o,n,"user-mismatch"),ax._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uX(e,t,r=!1){if(Cc(e.app))return Promise.reject(F0(e));const n="signIn",a=await cX(e,n,t),s=await ax._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function vhe(e,t){return uX(Wp(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xhe(e){const t=Wp(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function bhe(e,t,r){const n=Wp(e);await nj(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uhe)}function yhe(e,t,r){return Cc(e.app)?Promise.reject(F0(e)):vhe(va(e),Mx.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&xhe(e),n})}function whe(e,t,r,n){return va(e).onIdTokenChanged(t,r,n)}function Ehe(e,t,r){return va(e).beforeAuthStateChanged(t,r)}function dX(e,t,r,n){return va(e).onAuthStateChanged(t,r,n)}function Che(e){return va(e).signOut()}const M_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AX{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(M_,"1"),this.storage.removeItem(M_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _he=1e3,She=10;class fX extends AX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nX(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Hfe()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,She):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},_he)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}fX.type="LOCAL";const Nhe=fX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hX extends AX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}hX.type="SESSION";const mX=hX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function khe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new V5(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),l=await khe(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}V5.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bhe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const u=cO("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return window}function The(e){FA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pX(){return typeof FA().WorkerGlobalScope<"u"&&typeof FA().importScripts=="function"}async function Ihe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jhe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Fhe(){return pX()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gX="firebaseLocalStorageDb",Ohe=1,U_="firebaseLocalStorage",vX="fbase_key";class Tw{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function z5(e,t){return e.transaction([U_],t?"readwrite":"readonly").objectStore(U_)}function Dhe(){const e=indexedDB.deleteDatabase(gX);return new Tw(e).toPromise()}function aj(){const e=indexedDB.open(gX,Ohe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(U_,{keyPath:vX})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(U_)?t(n):(n.close(),await Dhe(),t(await aj()))})})}async function NU(e,t,r){const n=z5(e,!0).put({[vX]:t,value:r});return new Tw(n).toPromise()}async function Rhe(e,t){const r=z5(e,!1).get(t),n=await new Tw(r).toPromise();return n===void 0?null:n.value}function kU(e,t){const r=z5(e,!0).delete(t);return new Tw(r).toPromise()}const Phe=800,Lhe=3;class xX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aj(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>Lhe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V5._getInstance(Fhe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Ihe(),!this.activeServiceWorker)return;this.sender=new Bhe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||jhe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await aj();return await NU(t,M_,"1"),await kU(t,M_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>NU(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Rhe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>kU(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=z5(a,!1).getAll();return new Tw(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Phe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xX.type="LOCAL";const Mhe=xX;new kw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uhe(e,t){return t?jf(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO extends oO{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Pv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Pv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Pv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function Qhe(e){return uX(e.auth,new uO(e),e.bypassAuthState)}function Hhe(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),ghe(r,new uO(e),e.bypassAuthState)}async function Vhe(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),phe(r,new uO(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bX{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Qhe;case"linkViaPopup":case"linkViaRedirect":return Vhe;case"reauthViaPopup":case"reauthViaRedirect":return Hhe;default:Sd(this.auth,"internal-error")}}resolve(t){Wf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zhe=new kw(2e3,1e4);class bv extends bX{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,bv.currentPopupAction&&bv.currentPopupAction.cancel(),bv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){Wf(this.filter.length===1,"Popup operations only handle one event");const t=cO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(jA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(jA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,zhe.get())};t()}}bv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $he="pendingRedirect",GC=new Map;class Khe extends bX{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=GC.get(this.auth._key());if(!t){try{const n=await Ghe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}GC.set(this.auth._key(),t)}return this.bypassAuthState||GC.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ghe(e,t){const r=Xhe(t),n=Whe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function qhe(e,t){GC.set(e._key(),t)}function Whe(e){return jf(e._redirectPersistence)}function Xhe(e){return KC($he,e.config.apiKey,e.name)}async function Yhe(e,t,r=!1){if(Cc(e.app))return Promise.reject(F0(e));const n=Wp(e),a=Uhe(n,t),i=await new Khe(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jhe=600*1e3;class Zhe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!e0e(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!yX(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(jA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Jhe&&this.cachedEventUids.clear(),this.cachedEventUids.has(BU(t))}saveEventToCache(t){this.cachedEventUids.add(BU(t)),this.lastProcessedEventTime=Date.now()}}function BU(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function yX({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function e0e(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yX(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t0e(e,t={}){return dh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n0e=/^https?/;async function a0e(e){if(e.config.emulator)return;const{authorizedDomains:t}=await t0e(e);for(const r of t)try{if(s0e(r))return}catch{}Sd(e,"unauthorized-domain")}function s0e(e){const t=tj(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!n0e.test(r))return!1;if(r0e.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0e=new kw(3e4,6e4);function TU(){const e=FA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function o0e(e){return new Promise((t,r)=>{var a,s,i;function n(){TU(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{TU(),r(jA(e,"network-request-failed"))},timeout:i0e.get()})}if((s=(a=FA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=FA().gapi)!=null&&i.load)n();else{const o=Yfe("iframefcb");return FA()[o]=()=>{gapi.load?n():r(jA(e,"network-request-failed"))},sX(`${Xfe()}?onload=${o}`).catch(l=>r(l))}}).catch(t=>{throw qC=null,t})}let qC=null;function l0e(e){return qC=qC||o0e(e),qC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0e=new kw(5e3,15e3),u0e="__/auth/iframe",d0e="emulator/auth/iframe",A0e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f0e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h0e(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?aO(t,d0e):`https://${e.config.authDomain}/${u0e}`,n={apiKey:t.apiKey,appName:e.name,v:qp},a=f0e.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Sw(n).slice(1)}`}async function m0e(e){const t=await l0e(e),r=FA().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:h0e(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A0e,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=jA(e,"network-request-failed"),o=FA().setTimeout(()=>{s(i)},c0e.get());function l(){FA().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g0e=500,v0e=600,x0e="_blank",b0e="http://localhost";class IU{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y0e(e,t,r,n=g0e,a=v0e){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...p0e,width:n.toString(),height:a.toString(),top:s,left:i},u=Zo().toLowerCase();r&&(o=JW(u)?x0e:r),XW(u)&&(t=t||b0e,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(Qfe(u)&&o!=="_self")return w0e(t||"",o),new IU(null);const f=window.open(t||"",o,d);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new IU(f)}function w0e(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0e="__/auth/handler",C0e="emulator/auth/handler",_0e=encodeURIComponent("fac");async function jU(e,t,r,n,a,s){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:qp,eventId:a};if(t instanceof lX){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",cAe(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof Bw){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await e._getAppCheckToken(),u=l?`#${_0e}=${encodeURIComponent(l)}`:"";return`${S0e(e)}?${Sw(o).slice(1)}${u}`}function S0e({config:e}){return e.emulator?aO(e,C0e):`https://${e.authDomain}/${E0e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB="webStorageSupport";class N0e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mX,this._completeRedirectFn=Yhe,this._overrideRedirectResult=qhe}async _openPopup(t,r,n,a){var i;Wf((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await jU(t,r,n,tj(),a);return y0e(t,s,cO())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await jU(t,r,n,tj(),a);return The(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Wf(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await m0e(t),n=new Zhe(t);return r.register("authEvent",a=>(Qr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(pB,{type:pB},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[pB];s!==void 0&&r(!!s),Sd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=a0e(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return nX()||YW()||iO()}}const k0e=N0e;var FU="@firebase/auth",OU="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0e{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0e(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I0e(e){K0(new Gf("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Qr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aX(e)},u=new Gfe(n,a,s,l);return nhe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),K0(new Gf("auth-internal",t=>{const r=Wp(t.getProvider("auth").getImmediate());return(n=>new B0e(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tu(FU,OU,T0e(e)),Tu(FU,OU,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0e=300,F0e=RW("authIdTokenMaxAge")||j0e;let DU=null;const O0e=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>F0e)return;const a=r==null?void 0:r.token;DU!==a&&(DU=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function wX(e=U5()){const t=Nw(e,"auth");if(t.isInitialized())return t.getImmediate();const r=rhe(e,{popupRedirectResolver:k0e,persistence:[Mhe,Nhe,mX]}),n=RW("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=O0e(s.toString());Ehe(r,i,()=>i(r.currentUser)),whe(r,o=>i(o))}}const a=OW("auth");return a&&ahe(r,`http://${a}`),r}function D0e(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}qfe({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=jA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",D0e().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I0e("Browser");var R0e="firebase",P0e="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tu(R0e,P0e,"app");var RU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O0,EX;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,C){function N(){}N.prototype=C.prototype,w.D=C.prototype,w.prototype=new N,w.prototype.constructor=w,w.C=function(P,D,T){for(var U=Array(arguments.length-2),R=2;R<arguments.length;R++)U[R-2]=arguments[R];return C.prototype[D].apply(P,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,C,N){N||(N=0);var P=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)P[D]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(D=0;16>D;++D)P[D]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=w.g[0],N=w.g[1],D=w.g[2];var T=w.g[3],U=C+(T^N&(D^T))+P[0]+3614090360&4294967295;C=N+(U<<7&4294967295|U>>>25),U=T+(D^C&(N^D))+P[1]+3905402710&4294967295,T=C+(U<<12&4294967295|U>>>20),U=D+(N^T&(C^N))+P[2]+606105819&4294967295,D=T+(U<<17&4294967295|U>>>15),U=N+(C^D&(T^C))+P[3]+3250441966&4294967295,N=D+(U<<22&4294967295|U>>>10),U=C+(T^N&(D^T))+P[4]+4118548399&4294967295,C=N+(U<<7&4294967295|U>>>25),U=T+(D^C&(N^D))+P[5]+1200080426&4294967295,T=C+(U<<12&4294967295|U>>>20),U=D+(N^T&(C^N))+P[6]+2821735955&4294967295,D=T+(U<<17&4294967295|U>>>15),U=N+(C^D&(T^C))+P[7]+4249261313&4294967295,N=D+(U<<22&4294967295|U>>>10),U=C+(T^N&(D^T))+P[8]+1770035416&4294967295,C=N+(U<<7&4294967295|U>>>25),U=T+(D^C&(N^D))+P[9]+2336552879&4294967295,T=C+(U<<12&4294967295|U>>>20),U=D+(N^T&(C^N))+P[10]+4294925233&4294967295,D=T+(U<<17&4294967295|U>>>15),U=N+(C^D&(T^C))+P[11]+2304563134&4294967295,N=D+(U<<22&4294967295|U>>>10),U=C+(T^N&(D^T))+P[12]+1804603682&4294967295,C=N+(U<<7&4294967295|U>>>25),U=T+(D^C&(N^D))+P[13]+4254626195&4294967295,T=C+(U<<12&4294967295|U>>>20),U=D+(N^T&(C^N))+P[14]+2792965006&4294967295,D=T+(U<<17&4294967295|U>>>15),U=N+(C^D&(T^C))+P[15]+1236535329&4294967295,N=D+(U<<22&4294967295|U>>>10),U=C+(D^T&(N^D))+P[1]+4129170786&4294967295,C=N+(U<<5&4294967295|U>>>27),U=T+(N^D&(C^N))+P[6]+3225465664&4294967295,T=C+(U<<9&4294967295|U>>>23),U=D+(C^N&(T^C))+P[11]+643717713&4294967295,D=T+(U<<14&4294967295|U>>>18),U=N+(T^C&(D^T))+P[0]+3921069994&4294967295,N=D+(U<<20&4294967295|U>>>12),U=C+(D^T&(N^D))+P[5]+3593408605&4294967295,C=N+(U<<5&4294967295|U>>>27),U=T+(N^D&(C^N))+P[10]+38016083&4294967295,T=C+(U<<9&4294967295|U>>>23),U=D+(C^N&(T^C))+P[15]+3634488961&4294967295,D=T+(U<<14&4294967295|U>>>18),U=N+(T^C&(D^T))+P[4]+3889429448&4294967295,N=D+(U<<20&4294967295|U>>>12),U=C+(D^T&(N^D))+P[9]+568446438&4294967295,C=N+(U<<5&4294967295|U>>>27),U=T+(N^D&(C^N))+P[14]+3275163606&4294967295,T=C+(U<<9&4294967295|U>>>23),U=D+(C^N&(T^C))+P[3]+4107603335&4294967295,D=T+(U<<14&4294967295|U>>>18),U=N+(T^C&(D^T))+P[8]+1163531501&4294967295,N=D+(U<<20&4294967295|U>>>12),U=C+(D^T&(N^D))+P[13]+2850285829&4294967295,C=N+(U<<5&4294967295|U>>>27),U=T+(N^D&(C^N))+P[2]+4243563512&4294967295,T=C+(U<<9&4294967295|U>>>23),U=D+(C^N&(T^C))+P[7]+1735328473&4294967295,D=T+(U<<14&4294967295|U>>>18),U=N+(T^C&(D^T))+P[12]+2368359562&4294967295,N=D+(U<<20&4294967295|U>>>12),U=C+(N^D^T)+P[5]+4294588738&4294967295,C=N+(U<<4&4294967295|U>>>28),U=T+(C^N^D)+P[8]+2272392833&4294967295,T=C+(U<<11&4294967295|U>>>21),U=D+(T^C^N)+P[11]+1839030562&4294967295,D=T+(U<<16&4294967295|U>>>16),U=N+(D^T^C)+P[14]+4259657740&4294967295,N=D+(U<<23&4294967295|U>>>9),U=C+(N^D^T)+P[1]+2763975236&4294967295,C=N+(U<<4&4294967295|U>>>28),U=T+(C^N^D)+P[4]+1272893353&4294967295,T=C+(U<<11&4294967295|U>>>21),U=D+(T^C^N)+P[7]+4139469664&4294967295,D=T+(U<<16&4294967295|U>>>16),U=N+(D^T^C)+P[10]+3200236656&4294967295,N=D+(U<<23&4294967295|U>>>9),U=C+(N^D^T)+P[13]+681279174&4294967295,C=N+(U<<4&4294967295|U>>>28),U=T+(C^N^D)+P[0]+3936430074&4294967295,T=C+(U<<11&4294967295|U>>>21),U=D+(T^C^N)+P[3]+3572445317&4294967295,D=T+(U<<16&4294967295|U>>>16),U=N+(D^T^C)+P[6]+76029189&4294967295,N=D+(U<<23&4294967295|U>>>9),U=C+(N^D^T)+P[9]+3654602809&4294967295,C=N+(U<<4&4294967295|U>>>28),U=T+(C^N^D)+P[12]+3873151461&4294967295,T=C+(U<<11&4294967295|U>>>21),U=D+(T^C^N)+P[15]+530742520&4294967295,D=T+(U<<16&4294967295|U>>>16),U=N+(D^T^C)+P[2]+3299628645&4294967295,N=D+(U<<23&4294967295|U>>>9),U=C+(D^(N|~T))+P[0]+4096336452&4294967295,C=N+(U<<6&4294967295|U>>>26),U=T+(N^(C|~D))+P[7]+1126891415&4294967295,T=C+(U<<10&4294967295|U>>>22),U=D+(C^(T|~N))+P[14]+2878612391&4294967295,D=T+(U<<15&4294967295|U>>>17),U=N+(T^(D|~C))+P[5]+4237533241&4294967295,N=D+(U<<21&4294967295|U>>>11),U=C+(D^(N|~T))+P[12]+1700485571&4294967295,C=N+(U<<6&4294967295|U>>>26),U=T+(N^(C|~D))+P[3]+2399980690&4294967295,T=C+(U<<10&4294967295|U>>>22),U=D+(C^(T|~N))+P[10]+4293915773&4294967295,D=T+(U<<15&4294967295|U>>>17),U=N+(T^(D|~C))+P[1]+2240044497&4294967295,N=D+(U<<21&4294967295|U>>>11),U=C+(D^(N|~T))+P[8]+1873313359&4294967295,C=N+(U<<6&4294967295|U>>>26),U=T+(N^(C|~D))+P[15]+4264355552&4294967295,T=C+(U<<10&4294967295|U>>>22),U=D+(C^(T|~N))+P[6]+2734768916&4294967295,D=T+(U<<15&4294967295|U>>>17),U=N+(T^(D|~C))+P[13]+1309151649&4294967295,N=D+(U<<21&4294967295|U>>>11),U=C+(D^(N|~T))+P[4]+4149444226&4294967295,C=N+(U<<6&4294967295|U>>>26),U=T+(N^(C|~D))+P[11]+3174756917&4294967295,T=C+(U<<10&4294967295|U>>>22),U=D+(C^(T|~N))+P[2]+718787259&4294967295,D=T+(U<<15&4294967295|U>>>17),U=N+(T^(D|~C))+P[9]+3951481745&4294967295,w.g[0]=w.g[0]+C&4294967295,w.g[1]=w.g[1]+(D+(U<<21&4294967295|U>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+T&4294967295}n.prototype.u=function(w,C){C===void 0&&(C=w.length);for(var N=C-this.blockSize,P=this.B,D=this.h,T=0;T<C;){if(D==0)for(;T<=N;)a(this,w,T),T+=this.blockSize;if(typeof w=="string"){for(;T<C;)if(P[D++]=w.charCodeAt(T++),D==this.blockSize){a(this,P),D=0;break}}else for(;T<C;)if(P[D++]=w[T++],D==this.blockSize){a(this,P),D=0;break}}this.h=D,this.o+=C},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var C=1;C<w.length-8;++C)w[C]=0;var N=8*this.o;for(C=w.length-8;C<w.length;++C)w[C]=N&255,N/=256;for(this.u(w),w=Array(16),C=N=0;4>C;++C)for(var P=0;32>P;P+=8)w[N++]=this.g[C]>>>P&255;return w};function s(w,C){var N=o;return Object.prototype.hasOwnProperty.call(N,w)?N[w]:N[w]=C(w)}function i(w,C){this.h=C;for(var N=[],P=!0,D=w.length-1;0<=D;D--){var T=w[D]|0;P&&T==C||(N[D]=T,P=!1)}this.g=N}var o={};function l(w){return-128<=w&&128>w?s(w,function(C){return new i([C|0],0>C?-1:0)}):new i([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(0>w)return b(u(-w));for(var C=[],N=1,P=0;w>=N;P++)C[P]=w/N|0,N*=4294967296;return new i(C,0)}function d(w,C){if(w.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w.charAt(0)=="-")return b(d(w.substring(1),C));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(C,8)),P=f,D=0;D<w.length;D+=8){var T=Math.min(8,w.length-D),U=parseInt(w.substring(D,D+T),C);8>T?(T=u(Math.pow(C,T)),P=P.j(T).add(u(U))):(P=P.j(N),P=P.add(u(U)))}return P}var f=l(0),h=l(1),p=l(16777216);e=i.prototype,e.m=function(){if(v(this))return-b(this).m();for(var w=0,C=1,N=0;N<this.g.length;N++){var P=this.i(N);w+=(0<=P?P:4294967296+P)*C,C*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(g(this))return"0";if(v(this))return"-"+b(this).toString(w);for(var C=u(Math.pow(w,6)),N=this,P="";;){var D=k(N,C).g;N=y(N,D.j(C));var T=((0<N.g.length?N.g[0]:N.h)>>>0).toString(w);if(N=D,g(N))return T+P;for(;6>T.length;)T="0"+T;P=T+P}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function g(w){if(w.h!=0)return!1;for(var C=0;C<w.g.length;C++)if(w.g[C]!=0)return!1;return!0}function v(w){return w.h==-1}e.l=function(w){return w=y(this,w),v(w)?-1:g(w)?0:1};function b(w){for(var C=w.g.length,N=[],P=0;P<C;P++)N[P]=~w.g[P];return new i(N,~w.h).add(h)}e.abs=function(){return v(this)?b(this):this},e.add=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],P=0,D=0;D<=C;D++){var T=P+(this.i(D)&65535)+(w.i(D)&65535),U=(T>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);P=U>>>16,T&=65535,U&=65535,N[D]=U<<16|T}return new i(N,N[N.length-1]&-2147483648?-1:0)};function y(w,C){return w.add(b(C))}e.j=function(w){if(g(this)||g(w))return f;if(v(this))return v(w)?b(this).j(b(w)):b(b(this).j(w));if(v(w))return b(this.j(b(w)));if(0>this.l(p)&&0>w.l(p))return u(this.m()*w.m());for(var C=this.g.length+w.g.length,N=[],P=0;P<2*C;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<w.g.length;D++){var T=this.i(P)>>>16,U=this.i(P)&65535,R=w.i(D)>>>16,X=w.i(D)&65535;N[2*P+2*D]+=U*X,_(N,2*P+2*D),N[2*P+2*D+1]+=T*X,_(N,2*P+2*D+1),N[2*P+2*D+1]+=U*R,_(N,2*P+2*D+1),N[2*P+2*D+2]+=T*R,_(N,2*P+2*D+2)}for(P=0;P<C;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=C;P<2*C;P++)N[P]=0;return new i(N,0)};function _(w,C){for(;(w[C]&65535)!=w[C];)w[C+1]+=w[C]>>>16,w[C]&=65535,C++}function S(w,C){this.g=w,this.h=C}function k(w,C){if(g(C))throw Error("division by zero");if(g(w))return new S(f,f);if(v(w))return C=k(b(w),C),new S(b(C.g),b(C.h));if(v(C))return C=k(w,b(C)),new S(b(C.g),C.h);if(30<w.g.length){if(v(w)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var N=h,P=C;0>=P.l(w);)N=B(N),P=B(P);var D=F(N,1),T=F(P,1);for(P=F(P,2),N=F(N,2);!g(P);){var U=T.add(P);0>=U.l(w)&&(D=D.add(N),T=U),P=F(P,1),N=F(N,1)}return C=y(w,D.j(C)),new S(D,C)}for(D=f;0<=w.l(C);){for(N=Math.max(1,Math.floor(w.m()/C.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),T=u(N),U=T.j(C);v(U)||0<U.l(w);)N-=P,T=u(N),U=T.j(C);g(T)&&(T=h),D=D.add(T),w=y(w,U)}return new S(D,w)}e.A=function(w){return k(this,w).h},e.and=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)&w.i(P);return new i(N,this.h&w.h)},e.or=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)|w.i(P);return new i(N,this.h|w.h)},e.xor=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)^w.i(P);return new i(N,this.h^w.h)};function B(w){for(var C=w.g.length+1,N=[],P=0;P<C;P++)N[P]=w.i(P)<<1|w.i(P-1)>>>31;return new i(N,w.h)}function F(w,C){var N=C>>5;C%=32;for(var P=w.g.length-N,D=[],T=0;T<P;T++)D[T]=0<C?w.i(T+N)>>>C|w.i(T+N+1)<<32-C:w.i(T+N);return new i(D,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,EX=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,O0=i}).apply(typeof RU<"u"?RU:typeof self<"u"?self:typeof window<"u"?window:{});var pE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CX,Db,_X,WC,sj,SX,NX,kX;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,ee,se){return O==Array.prototype||O==Object.prototype||(O[ee]=se.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof pE=="object"&&pE];for(var ee=0;ee<O.length;++ee){var se=O[ee];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(O,ee){if(ee)e:{var se=n;O=O.split(".");for(var xe=0;xe<O.length-1;xe++){var ze=O[xe];if(!(ze in se))break e;se=se[ze]}O=O[O.length-1],xe=se[O],ee=ee(xe),ee!=xe&&ee!=null&&t(se,O,{configurable:!0,writable:!0,value:ee})}}function s(O,ee){O instanceof String&&(O+="");var se=0,xe=!1,ze={next:function(){if(!xe&&se<O.length){var st=se++;return{value:ee(st,O[st]),done:!1}}return xe=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(ee,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(O){var ee=typeof O;return ee=ee!="object"?ee:O?Array.isArray(O)?"array":ee:"null",ee=="array"||ee=="object"&&typeof O.length=="number"}function u(O){var ee=typeof O;return ee=="object"&&O!=null||ee=="function"}function d(O,ee,se){return O.call.apply(O.bind,arguments)}function f(O,ee,se){if(!O)throw Error();if(2<arguments.length){var xe=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,xe),O.apply(ee,ze)}}return function(){return O.apply(ee,arguments)}}function h(O,ee,se){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(O,ee){var se=Array.prototype.slice.call(arguments,1);return function(){var xe=se.slice();return xe.push.apply(xe,arguments),O.apply(this,xe)}}function g(O,ee){function se(){}se.prototype=ee.prototype,O.aa=ee.prototype,O.prototype=new se,O.prototype.constructor=O,O.Qb=function(xe,ze,st){for(var Mt=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)Mt[Tr-2]=arguments[Tr];return ee.prototype[ze].apply(xe,Mt)}}function v(O){const ee=O.length;if(0<ee){const se=Array(ee);for(let xe=0;xe<ee;xe++)se[xe]=O[xe];return se}return[]}function b(O,ee){for(let se=1;se<arguments.length;se++){const xe=arguments[se];if(l(xe)){const ze=O.length||0,st=xe.length||0;O.length=ze+st;for(let Mt=0;Mt<st;Mt++)O[ze+Mt]=xe[Mt]}else O.push(xe)}}class y{constructor(ee,se){this.i=ee,this.j=se,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function _(O){return/^[\s\xa0]*$/.test(O)}function S(){var O=o.navigator;return O&&(O=O.userAgent)?O:""}function k(O){return k[" "](O),O}k[" "]=function(){};var B=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(O,ee,se){for(const xe in O)ee.call(se,O[xe],xe,O)}function w(O,ee){for(const se in O)ee.call(void 0,O[se],se,O)}function C(O){const ee={};for(const se in O)ee[se]=O[se];return ee}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(O,ee){let se,xe;for(let ze=1;ze<arguments.length;ze++){xe=arguments[ze];for(se in xe)O[se]=xe[se];for(let st=0;st<N.length;st++)se=N[st],Object.prototype.hasOwnProperty.call(xe,se)&&(O[se]=xe[se])}}function D(O){var ee=1;O=O.split(":");const se=[];for(;0<ee&&O.length;)se.push(O.shift()),ee--;return O.length&&se.push(O.join(":")),se}function T(O){o.setTimeout(()=>{throw O},0)}function U(){var O=V;let ee=null;return O.g&&(ee=O.g,O.g=O.g.next,O.g||(O.h=null),ee.next=null),ee}class R{constructor(){this.h=this.g=null}add(ee,se){const xe=X.get();xe.set(ee,se),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var X=new y(()=>new q,O=>O.reset());class q{constructor(){this.next=this.g=this.h=null}set(ee,se){this.h=ee,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,H=!1,V=new R,K=()=>{const O=o.Promise.resolve(void 0);Z=()=>{O.then(ne)}};var ne=()=>{for(var O;O=U();){try{O.h.call(O.g)}catch(se){T(se)}var ee=X;ee.j(O),100>ee.h&&(ee.h++,O.next=ee.g,ee.g=O)}H=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(O,ee){this.type=O,this.g=this.target=ee,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var O=!1,ee=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const se=()=>{};o.addEventListener("test",se,ee),o.removeEventListener("test",se,ee)}catch{}return O}();function te(O,ee){if(W.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var se=this.type=O.type,xe=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=ee,ee=O.relatedTarget){if(B){e:{try{k(ee.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ee=null)}}else se=="mouseover"?ee=O.fromElement:se=="mouseout"&&(ee=O.toElement);this.relatedTarget=ee,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:ie[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&te.aa.h.call(this)}}g(te,W);var ie={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ce(O,ee,se,xe,ze){this.listener=O,this.proxy=null,this.src=ee,this.type=se,this.capture=!!xe,this.ha=ze,this.key=++oe,this.da=this.fa=!1}function ge(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function je(O){this.src=O,this.g={},this.h=0}je.prototype.add=function(O,ee,se,xe,ze){var st=O.toString();O=this.g[st],O||(O=this.g[st]=[],this.h++);var Mt=Se(O,ee,xe,ze);return-1<Mt?(ee=O[Mt],se||(ee.fa=!1)):(ee=new ce(ee,this.src,st,!!xe,ze),ee.fa=se,O.push(ee)),ee};function re(O,ee){var se=ee.type;if(se in O.g){var xe=O.g[se],ze=Array.prototype.indexOf.call(xe,ee,void 0),st;(st=0<=ze)&&Array.prototype.splice.call(xe,ze,1),st&&(ge(ee),O.g[se].length==0&&(delete O.g[se],O.h--))}}function Se(O,ee,se,xe){for(var ze=0;ze<O.length;++ze){var st=O[ze];if(!st.da&&st.listener==ee&&st.capture==!!se&&st.ha==xe)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),_e={};function he(O,ee,se,xe,ze){if(Array.isArray(ee)){for(var st=0;st<ee.length;st++)he(O,ee[st],se,xe,ze);return null}return se=ot(se),O&&O[Ae]?O.K(ee,se,u(xe)?!!xe.capture:!1,ze):Ie(O,ee,se,!1,xe,ze)}function Ie(O,ee,se,xe,ze,st){if(!ee)throw Error("Invalid event type");var Mt=u(ze)?!!ze.capture:!!ze,Tr=qe(O);if(Tr||(O[De]=Tr=new je(O)),se=Tr.add(ee,se,xe,Mt,st),se.proxy)return se;if(xe=He(),se.proxy=xe,xe.src=O,xe.listener=se,O.addEventListener)J||(ze=Mt),ze===void 0&&(ze=!1),O.addEventListener(ee.toString(),xe,ze);else if(O.attachEvent)O.attachEvent(Oe(ee.toString()),xe);else if(O.addListener&&O.removeListener)O.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return se}function He(){function O(se){return ee.call(O.src,O.listener,se)}const ee=Pe;return O}function Xe(O,ee,se,xe,ze){if(Array.isArray(ee))for(var st=0;st<ee.length;st++)Xe(O,ee[st],se,xe,ze);else xe=u(xe)?!!xe.capture:!!xe,se=ot(se),O&&O[Ae]?(O=O.i,ee=String(ee).toString(),ee in O.g&&(st=O.g[ee],se=Se(st,se,xe,ze),-1<se&&(ge(st[se]),Array.prototype.splice.call(st,se,1),st.length==0&&(delete O.g[ee],O.h--)))):O&&(O=qe(O))&&(ee=O.g[ee.toString()],O=-1,ee&&(O=Se(ee,se,xe,ze)),(se=-1<O?ee[O]:null)&&ye(se))}function ye(O){if(typeof O!="number"&&O&&!O.da){var ee=O.src;if(ee&&ee[Ae])re(ee.i,O);else{var se=O.type,xe=O.proxy;ee.removeEventListener?ee.removeEventListener(se,xe,O.capture):ee.detachEvent?ee.detachEvent(Oe(se),xe):ee.addListener&&ee.removeListener&&ee.removeListener(xe),(se=qe(ee))?(re(se,O),se.h==0&&(se.src=null,ee[De]=null)):ge(O)}}}function Oe(O){return O in _e?_e[O]:_e[O]="on"+O}function Pe(O,ee){if(O.da)O=!0;else{ee=new te(ee,this);var se=O.listener,xe=O.ha||O.src;O.fa&&ye(O),O=se.call(xe,ee)}return O}function qe(O){return O=O[De],O instanceof je?O:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(O){return typeof O=="function"?O:(O[Ze]||(O[Ze]=function(ee){return O.handleEvent(ee)}),O[Ze])}function mt(){L.call(this),this.i=new je(this),this.M=this,this.F=null}g(mt,L),mt.prototype[Ae]=!0,mt.prototype.removeEventListener=function(O,ee,se,xe){Xe(this,O,ee,se,xe)};function Bt(O,ee){var se,xe=O.F;if(xe)for(se=[];xe;xe=xe.F)se.push(xe);if(O=O.M,xe=ee.type||ee,typeof ee=="string")ee=new W(ee,O);else if(ee instanceof W)ee.target=ee.target||O;else{var ze=ee;ee=new W(xe,O),P(ee,ze)}if(ze=!0,se)for(var st=se.length-1;0<=st;st--){var Mt=ee.g=se[st];ze=Lt(Mt,xe,!0,ee)&&ze}if(Mt=ee.g=O,ze=Lt(Mt,xe,!0,ee)&&ze,ze=Lt(Mt,xe,!1,ee)&&ze,se)for(st=0;st<se.length;st++)Mt=ee.g=se[st],ze=Lt(Mt,xe,!1,ee)&&ze}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var O=this.i,ee;for(ee in O.g){for(var se=O.g[ee],xe=0;xe<se.length;xe++)ge(se[xe]);delete O.g[ee],O.h--}}this.F=null},mt.prototype.K=function(O,ee,se,xe){return this.i.add(String(O),ee,!1,se,xe)},mt.prototype.L=function(O,ee,se,xe){return this.i.add(String(O),ee,!0,se,xe)};function Lt(O,ee,se,xe){if(ee=O.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var ze=!0,st=0;st<ee.length;++st){var Mt=ee[st];if(Mt&&!Mt.da&&Mt.capture==se){var Tr=Mt.listener,bn=Mt.ha||Mt.src;Mt.fa&&re(O.i,Mt),ze=Tr.call(bn,xe)!==!1&&ze}}return ze&&!xe.defaultPrevented}function Ot(O,ee,se){if(typeof O=="function")se&&(O=h(O,se));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(O,ee||0)}function Qt(O){O.g=Ot(()=>{O.g=null,O.i&&(O.i=!1,Qt(O))},O.l);const ee=O.h;O.h=null,O.m.apply(null,ee)}class bt extends L{constructor(ee,se){super(),this.m=ee,this.l=se,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(O){L.call(this),this.h=O,this.g={}}g(Nr,L);var rr=[];function nn(O){F(O.g,function(ee,se){this.g.hasOwnProperty(se)&&ye(ee)},O),O.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),nn(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cr=o.JSON.stringify,Vr=o.JSON.parse,Fn=class{stringify(O){return o.JSON.stringify(O,void 0)}parse(O){return o.JSON.parse(O,void 0)}};function jr(){}jr.prototype.h=null;function vt(O){return O.h||(O.h=O.i())}function pt(){}var Je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){W.call(this,"d")}g(gt,W);function dt(){W.call(this,"c")}g(dt,W);var Dt={},zt=null;function Pr(){return zt=zt||new mt}Dt.La="serverreachability";function Xr(O){W.call(this,Dt.La,O)}g(Xr,W);function gn(O){const ee=Pr();Bt(ee,new Xr(ee))}Dt.STAT_EVENT="statevent";function vn(O,ee){W.call(this,Dt.STAT_EVENT,O),this.stat=ee}g(vn,W);function $t(O){const ee=Pr();Bt(ee,new vn(ee,O))}Dt.Ma="timingevent";function tn(O,ee){W.call(this,Dt.Ma,O),this.size=ee}g(tn,W);function en(O,ee){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){O()},ee)}function cr(){this.g=!0}cr.prototype.xa=function(){this.g=!1};function Yr(O,ee,se,xe,ze,st){O.info(function(){if(O.g)if(st)for(var Mt="",Tr=st.split("&"),bn=0;bn<Tr.length;bn++){var Gr=Tr[bn].split("=");if(1<Gr.length){var zn=Gr[0];Gr=Gr[1];var ra=zn.split("_");Mt=2<=ra.length&&ra[1]=="type"?Mt+(zn+"="+Gr+"&"):Mt+(zn+"=redacted&")}}else Mt=null;else Mt=st;return"XMLHTTP REQ ("+xe+") [attempt "+ze+"]: "+ee+`
`+se+`
`+Mt})}function ta(O,ee,se,xe,ze,st,Mt){O.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+ze+"]: "+ee+`
`+se+`
`+st+" "+Mt})}function fe(O,ee,se,xe){O.info(function(){return"XMLHTTP TEXT ("+ee+"): "+Ee(O,se)+(xe?" "+xe:"")})}function Be(O,ee){O.info(function(){return"TIMEOUT: "+ee})}cr.prototype.info=function(){};function Ee(O,ee){if(!O.g)return ee;if(!ee)return null;try{var se=JSON.parse(ee);if(se){for(O=0;O<se.length;O++)if(Array.isArray(se[O])){var xe=se[O];if(!(2>xe.length)){var ze=xe[1];if(Array.isArray(ze)&&!(1>ze.length)){var st=ze[0];if(st!="noop"&&st!="stop"&&st!="close")for(var Mt=1;Mt<ze.length;Mt++)ze[Mt]=""}}}}return Cr(se)}catch{return ee}}var Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function Ye(){}g(Ye,jr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Te=new Ye;function ut(O,ee,se,xe){this.j=O,this.i=ee,this.l=se,this.R=xe||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var tt={},at={};function Tt(O,ee,se){O.L=1,O.v=zc(xi(ee)),O.m=se,O.P=!0,Vt(O,null)}function Vt(O,ee){O.F=Date.now(),Kt(O),O.A=xi(O.v);var se=O.A,xe=O.R;Array.isArray(xe)||(xe=[String(xe)]),Br(se.i,"t",xe),O.C=0,se=O.j.J,O.h=new $e,O.g=de(O.j,se?ee:null,!O.m),0<O.O&&(O.M=new bt(h(O.Y,O,O.g),O.O)),ee=O.U,se=O.g,xe=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(rr[0]=ze.toString()),ze=rr);for(var st=0;st<ze.length;st++){var Mt=he(se,ze[st],xe||ee.handleEvent,!1,ee.h||ee);if(!Mt)break;ee.g[Mt.key]=Mt}ee=O.H?C(O.H):{},O.m?(O.u||(O.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,ee)):(O.u="GET",O.g.ea(O.A,O.u,null,ee)),gn(),Yr(O.i,O.u,O.A,O.l,O.R,O.m)}ut.prototype.ca=function(O){O=O.target;const ee=this.M;ee&&hs(O)==3?ee.j():this.Y(O)},ut.prototype.Y=function(O){try{if(O==this.g)e:{const ra=hs(this.g);var ee=this.g.Ba();const Bl=this.g.Z();if(!(3>ra)&&(ra!=3||this.g&&(this.h.h||this.g.oa()||Ch(this.g)))){this.J||ra!=4||ee==7||(ee==8||0>=Bl?gn(3):gn(2)),an(this);var se=this.g.Z();this.X=se;t:if(Yt(this)){var xe=Ch(this.g);O="";var ze=xe.length,st=hs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),sn(this);var Mt="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<ze;ee++)this.h.h=!0,O+=this.h.i.decode(xe[ee],{stream:!(st&&ee==ze-1)});xe.length=0,this.h.g+=O,this.C=0,Mt=this.h.g}else Mt=this.g.oa();if(this.o=se==200,ta(this.i,this.u,this.A,this.l,this.R,ra,se),this.o){if(this.T&&!this.K){t:{if(this.g){var Tr,bn=this.g;if((Tr=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Tr)){var Gr=Tr;break t}}Gr=null}if(se=Gr)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ds(this,se);else{this.o=!1,this.s=3,$t(12),dn(this),sn(this);break e}}if(this.P){se=!0;let Ja;for(;!this.J&&this.C<Mt.length;)if(Ja=Ht(this,Mt),Ja==at){ra==4&&(this.s=4,$t(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(Ja==tt){this.s=4,$t(15),fe(this.i,this.l,Mt,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,Ja,null),ds(this,Ja);if(Yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ra!=4||Mt.length!=0||this.h.h||(this.s=1,$t(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,Mt,"[Invalid Chunked Response]"),dn(this),sn(this);else if(0<Mt.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Mt.length),Xc(zn),zn.M=!0,$t(11))}}else fe(this.i,this.l,Mt,null),ds(this,Mt);ra==4&&dn(this),this.o&&!this.J&&(ra==4?Yc(this.j,this):(this.o=!1,Kt(this)))}else Gc(this.g),se==400&&0<Mt.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),dn(this),sn(this)}}}catch{}finally{}};function Yt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Ht(O,ee){var se=O.C,xe=ee.indexOf(`
`,se);return xe==-1?at:(se=Number(ee.substring(se,xe)),isNaN(se)?tt:(xe+=1,xe+se>ee.length?at:(ee=ee.slice(xe,xe+se),O.C=xe+se,ee)))}ut.prototype.cancel=function(){this.J=!0,dn(this)};function Kt(O){O.S=Date.now()+O.I,_r(O,O.I)}function _r(O,ee){if(O.B!=null)throw Error("WatchDog timer not null");O.B=en(h(O.ba,O),ee)}function an(O){O.B&&(o.clearTimeout(O.B),O.B=null)}ut.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Be(this.i,this.A),this.L!=2&&(gn(),$t(17)),dn(this),this.s=2,sn(this)):_r(this,this.S-O)};function sn(O){O.j.G==0||O.J||Yc(O.j,O)}function dn(O){an(O);var ee=O.M;ee&&typeof ee.ma=="function"&&ee.ma(),O.M=null,nn(O.U),O.g&&(ee=O.g,O.g=null,ee.abort(),ee.ma())}function ds(O,ee){try{var se=O.j;if(se.G!=0&&(se.g==O||gi(se.h,O))){if(!O.K&&gi(se.h,O)&&se.G==3){try{var xe=se.Da.g.parse(ee)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var ze=xe;if(ze[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<O.F)ic(se),Md(se);else break e;Vu(se),$t(18)}}else se.za=ze[1],0<se.za-se.T&&37500>ze[2]&&se.F&&se.v==0&&!se.C&&(se.C=en(h(se.Za,se),6e3));if(1>=Fs(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Di(se,11)}else if((O.K||se.g==O)&&ic(se),!_(ee))for(ze=se.Da.g.parse(ee),ee=0;ee<ze.length;ee++){let Gr=ze[ee];if(se.T=Gr[0],Gr=Gr[1],se.G==2)if(Gr[0]=="c"){se.K=Gr[1],se.ia=Gr[2];const zn=Gr[3];zn!=null&&(se.la=zn,se.j.info("VER="+se.la));const ra=Gr[4];ra!=null&&(se.Aa=ra,se.j.info("SVER="+se.Aa));const Bl=Gr[5];Bl!=null&&typeof Bl=="number"&&0<Bl&&(xe=1.5*Bl,se.L=xe,se.j.info("backChannelRequestTimeoutMs_="+xe)),xe=se;const Ja=O.g;if(Ja){const _o=Ja.g?Ja.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var st=xe.h;st.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(st.j=st.l,st.g=new Set,st.h&&(xa(st,st.h),st.h=null))}if(xe.D){const Jc=Ja.g?Ja.g.getResponseHeader("X-HTTP-Session-Id"):null;Jc&&(xe.ya=Jc,Vn(xe.I,xe.D,Jc))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-O.F,se.j.info("Handshake RTT: "+se.R+"ms")),xe=se;var Mt=O;if(xe.qa=G(xe,xe.J?xe.ia:null,xe.W),Mt.K){ei(xe.h,Mt);var Tr=Mt,bn=xe.L;bn&&(Tr.I=bn),Tr.B&&(an(Tr),Kt(Tr)),xe.g=Mt}else Qd(xe);0<se.i.length&&Ud(se)}else Gr[0]!="stop"&&Gr[0]!="close"||Di(se,7);else se.G==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?Di(se,7):sc(se):Gr[0]!="noop"&&se.l&&se.l.ta(Gr),se.v=0)}}gn(4)}catch{}}var bo=class{constructor(O,ee){this.g=O,this.map=ee}};function As(O){this.l=O||10,o.PerformanceNavigationTiming?(O=o.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zs(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Fs(O){return O.h?1:O.g?O.g.size:0}function gi(O,ee){return O.h?O.h==ee:O.g?O.g.has(ee):!1}function xa(O,ee){O.g?O.g.add(ee):O.h=ee}function ei(O,ee){O.h&&O.h==ee?O.h=null:O.g&&O.g.has(ee)&&O.g.delete(ee)}As.prototype.cancel=function(){if(this.i=Rd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Rd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let ee=O.i;for(const se of O.g.values())ee=ee.concat(se.D);return ee}return v(O.i)}function yh(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(l(O)){for(var ee=[],se=O.length,xe=0;xe<se;xe++)ee.push(O[xe]);return ee}ee=[],se=0;for(xe in O)ee[se++]=O[xe];return ee}function Qc(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(l(O)||typeof O=="string"){var ee=[];O=O.length;for(var se=0;se<O;se++)ee.push(se);return ee}ee=[],se=0;for(const xe in O)ee[se++]=xe;return ee}}}function qA(O,ee){if(O.forEach&&typeof O.forEach=="function")O.forEach(ee,void 0);else if(l(O)||typeof O=="string")Array.prototype.forEach.call(O,ee,void 0);else for(var se=Qc(O),xe=yh(O),ze=xe.length,st=0;st<ze;st++)ee.call(void 0,xe[st],se&&se[st],O)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pd(O,ee){if(O){O=O.split("&");for(var se=0;se<O.length;se++){var xe=O[se].indexOf("="),ze=null;if(0<=xe){var st=O[se].substring(0,xe);ze=O[se].substring(xe+1)}else st=O[se];ee(st,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function On(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof On){this.h=O.h,Hc(this,O.j),this.o=O.o,this.g=O.g,Vc(this,O.s),this.l=O.l;var ee=O.i,se=new El;se.i=ee.i,ee.g&&(se.g=new Map(ee.g),se.h=ee.h),wl(this,se),this.m=O.m}else O&&(ee=String(O).match(vi))?(this.h=!1,Hc(this,ee[1]||"",!0),this.o=yo(ee[2]||""),this.g=yo(ee[3]||"",!0),Vc(this,ee[4]),this.l=yo(ee[5]||"",!0),wl(this,ee[6]||"",!0),this.m=yo(ee[7]||"")):(this.h=!1,this.i=new El(null,this.h))}On.prototype.toString=function(){var O=[],ee=this.j;ee&&O.push(ec(ee,WA,!0),":");var se=this.g;return(se||ee=="file")&&(O.push("//"),(ee=this.o)&&O.push(ec(ee,WA,!0),"@"),O.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&O.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&O.push("/"),O.push(ec(se,se.charAt(0)=="/"?tc:XA,!0))),(se=this.i.toString())&&O.push("?",se),(se=this.m)&&O.push("#",ec(se,rc)),O.join("")};function xi(O){return new On(O)}function Hc(O,ee,se){O.j=se?yo(ee,!0):ee,O.j&&(O.j=O.j.replace(/:$/,""))}function Vc(O,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);O.s=ee}else O.s=null}function wl(O,ee,se){ee instanceof El?(O.i=ee,Eh(O.i,O.h)):(se||(ee=ec(ee,Ld)),O.i=new El(ee,O.h))}function Vn(O,ee,se){O.i.set(ee,se)}function zc(O){return Vn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function yo(O,ee){return O?ee?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function ec(O,ee,se){return typeof O=="string"?(O=encodeURI(O).replace(ee,wh),se&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function wh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var WA=/[#\/\?@]/g,XA=/[#\?:]/g,tc=/[#\?]/g,Ld=/[#\?@]/g,rc=/#/g;function El(O,ee){this.h=this.g=null,this.i=O||null,this.j=!!ee}function ca(O){O.g||(O.g=new Map,O.h=0,O.i&&Pd(O.i,function(ee,se){O.add(decodeURIComponent(ee.replace(/\+/g," ")),se)}))}e=El.prototype,e.add=function(O,ee){ca(this),this.i=null,O=_l(this,O);var se=this.g.get(O);return se||this.g.set(O,se=[]),se.push(ee),this.h+=1,this};function nc(O,ee){ca(O),ee=_l(O,ee),O.g.has(ee)&&(O.i=null,O.h-=O.g.get(ee).length,O.g.delete(ee))}function Cl(O,ee){return ca(O),ee=_l(O,ee),O.g.has(ee)}e.forEach=function(O,ee){ca(this),this.g.forEach(function(se,xe){se.forEach(function(ze){O.call(ee,ze,xe,this)},this)},this)},e.na=function(){ca(this);const O=Array.from(this.g.values()),ee=Array.from(this.g.keys()),se=[];for(let xe=0;xe<ee.length;xe++){const ze=O[xe];for(let st=0;st<ze.length;st++)se.push(ee[xe])}return se},e.V=function(O){ca(this);let ee=[];if(typeof O=="string")Cl(this,O)&&(ee=ee.concat(this.g.get(_l(this,O))));else{O=Array.from(this.g.values());for(let se=0;se<O.length;se++)ee=ee.concat(O[se])}return ee},e.set=function(O,ee){return ca(this),this.i=null,O=_l(this,O),Cl(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[ee]),this.h+=1,this},e.get=function(O,ee){return O?(O=this.V(O),0<O.length?String(O[0]):ee):ee};function Br(O,ee,se){nc(O,ee),0<se.length&&(O.i=null,O.g.set(_l(O,ee),v(se)),O.h+=se.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],ee=Array.from(this.g.keys());for(var se=0;se<ee.length;se++){var xe=ee[se];const st=encodeURIComponent(String(xe)),Mt=this.V(xe);for(xe=0;xe<Mt.length;xe++){var ze=st;Mt[xe]!==""&&(ze+="="+encodeURIComponent(String(Mt[xe]))),O.push(ze)}}return this.i=O.join("&")};function _l(O,ee){return ee=String(ee),O.j&&(ee=ee.toLowerCase()),ee}function Eh(O,ee){ee&&!O.j&&(ca(O),O.i=null,O.g.forEach(function(se,xe){var ze=xe.toLowerCase();xe!=ze&&(nc(this,xe),Br(this,ze,se))},O)),O.j=ee}function ji(O,ee){const se=new cr;if(o.Image){const xe=new Image;xe.onload=p(ro,se,"TestLoadImage: loaded",!0,ee,xe),xe.onerror=p(ro,se,"TestLoadImage: error",!1,ee,xe),xe.onabort=p(ro,se,"TestLoadImage: abort",!1,ee,xe),xe.ontimeout=p(ro,se,"TestLoadImage: timeout",!1,ee,xe),o.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=O}else ee(!1)}function wo(O,ee){const se=new cr,xe=new AbortController,ze=setTimeout(()=>{xe.abort(),ro(se,"TestPingServer: timeout",!1,ee)},1e4);fetch(O,{signal:xe.signal}).then(st=>{clearTimeout(ze),st.ok?ro(se,"TestPingServer: ok",!0,ee):ro(se,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(ze),ro(se,"TestPingServer: error",!1,ee)})}function ro(O,ee,se,xe,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),xe(se)}catch{}}function Sl(){this.g=new Fn}function Eo(O,ee,se){const xe=se||"";try{qA(O,function(ze,st){let Mt=ze;u(ze)&&(Mt=Cr(ze)),ee.push(xe+st+"="+encodeURIComponent(Mt))})}catch(ze){throw ee.push(xe+"type="+encodeURIComponent("_badmap")),ze}}function $c(O){this.l=O.Ub||null,this.j=O.eb||!1}g($c,jr),$c.prototype.g=function(){return new ac(this.l,this.j)},$c.prototype.i=function(O){return function(){return O}}({});function ac(O,ee){mt.call(this),this.D=O,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ac,mt),e=ac.prototype,e.open=function(O,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=ee,this.readyState=1,Fi(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(ee.body=O),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;YA(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function YA(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var ee=O.value?O.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!O.done}))&&(this.response=this.responseText+=ee)}O.done?Co(this):Fi(this),this.readyState==3&&YA(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,Co(this))},e.Qa=function(O){this.g&&(this.response=O,Co(this))},e.ga=function(){this.g&&Co(this)};function Co(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Fi(O)}e.setRequestHeader=function(O,ee){this.u.append(O,ee)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],ee=this.h.entries();for(var se=ee.next();!se.done;)se=se.value,O.push(se[0]+": "+se[1]),se=ee.next();return O.join(`\r
`)};function Fi(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(ac.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function Nl(O){let ee="";return F(O,function(se,xe){ee+=xe,ee+=":",ee+=se,ee+=`\r
`}),ee}function fs(O,ee,se){e:{for(xe in se){var xe=!1;break e}xe=!0}xe||(se=Nl(se),typeof O=="string"?se!=null&&encodeURIComponent(String(se)):Vn(O,ee,se))}function xn(O){mt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(xn,mt);var Kc=/^https?$/i,kl=["POST","PUT"];e=xn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,ee,se,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);ee=ee?ee.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?vt(this.o):vt(Te),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ee,String(O),!0),this.B=!1}catch(st){JA(this,st);return}if(O=se||"",se=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var ze in xe)se.set(ze,xe[ze]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const st of xe.keys())se.set(st,xe.get(st));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(se.keys()).find(st=>st.toLowerCase()=="content-type"),ze=o.FormData&&O instanceof o.FormData,!(0<=Array.prototype.indexOf.call(kl,ee,void 0))||xe||ze||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[st,Mt]of se)this.g.setRequestHeader(st,Mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oi(this),this.u=!0,this.g.send(O),this.u=!1}catch(st){JA(this,st)}};function JA(O,ee){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=ee,O.m=5,Lu(O),al(O)}function Lu(O){O.A||(O.A=!0,Bt(O,"complete"),Bt(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,Bt(this,"complete"),Bt(this,"abort"),al(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),xn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Mu(this):this.bb())},e.bb=function(){Mu(this)};function Mu(O){if(O.h&&typeof i<"u"&&(!O.v[1]||hs(O)!=4||O.Z()!=2)){if(O.u&&hs(O)==4)Ot(O.Ea,0,O);else if(Bt(O,"readystatechange"),hs(O)==4){O.h=!1;try{const Mt=O.Z();e:switch(Mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var se;if(!(se=ee)){var xe;if(xe=Mt===0){var ze=String(O.D).match(vi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),xe=!Kc.test(ze?ze.toLowerCase():"")}se=xe}if(se)Bt(O,"complete"),Bt(O,"success");else{O.m=6;try{var st=2<hs(O)?O.g.statusText:""}catch{st=""}O.l=st+" ["+O.Z()+"]",Lu(O)}}finally{al(O)}}}}function al(O,ee){if(O.g){Oi(O);const se=O.g,xe=O.v[0]?()=>{}:null;O.g=null,O.v=null,ee||Bt(O,"ready");try{se.onreadystatechange=xe}catch{}}}function Oi(O){O.I&&(o.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function hs(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<hs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var ee=this.g.responseText;return O&&ee.indexOf(O)==0&&(ee=ee.substring(O.length)),Vr(ee)}};function Ch(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function Gc(O){const ee={};O=(O.g&&2<=hs(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<O.length;xe++){if(_(O[xe]))continue;var se=D(O[xe]);const ze=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const st=ee[ze]||[];ee[ze]=st,st.push(se)}w(ee,function(xe){return xe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(O,ee,se){return se&&se.internalChannelParams&&se.internalChannelParams[O]||ee}function qc(O){this.Aa=0,this.i=[],this.j=new cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,O),this.cb=bi("retryDelaySeedMs",1e4,O),this.Wa=bi("forwardChannelMaxRetries",2,O),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new As(O&&O.concurrentRequestLimit),this.Da=new Sl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=qc.prototype,e.la=8,e.G=1,e.connect=function(O,ee,se,xe){$t(0),this.W=O,this.H=ee||{},se&&xe!==void 0&&(this.H.OSID=se,this.H.OAID=xe),this.F=this.X,this.I=G(this,null,this.W),Ud(this)};function sc(O){if(Uu(O),O.G==3){var ee=O.U++,se=xi(O.I);if(Vn(se,"SID",O.K),Vn(se,"RID",ee),Vn(se,"TYPE","terminate"),Wc(O,se),ee=new ut(O,O.j,ee),ee.L=2,ee.v=zc(xi(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=ee.v,se=!0),se||(ee.g=de(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Kt(ee)}Hd(O)}function Md(O){O.g&&(Xc(O),O.g.cancel(),O.g=null)}function Uu(O){Md(O),O.u&&(o.clearTimeout(O.u),O.u=null),ic(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&o.clearTimeout(O.s),O.s=null)}function Ud(O){if(!Zs(O.h)&&!O.s){O.s=!0;var ee=O.Ga;Z||K(),H||(Z(),H=!0),V.add(ee,O),O.B=0}}function ZA(O,ee){return Fs(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=ee.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=en(h(O.Ga,O,ee),zu(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new ut(this,this.j,O);let st=this.o;if(this.S&&(st?(st=C(st),P(st,this.S)):st=this.S),this.m!==null||this.O||(ze.H=st,st=null),this.P)e:{for(var ee=0,se=0;se<this.i.length;se++){t:{var xe=this.i[se];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(ee+=xe,4096<ee){ee=se;break e}if(ee===4096||se===this.i.length-1){ee=se+1;break e}}ee=1e3}else ee=1e3;ee=Hu(this,ze,ee),se=xi(this.I),Vn(se,"RID",O),Vn(se,"CVER",22),this.D&&Vn(se,"X-HTTP-Session-Id",this.D),Wc(this,se),st&&(this.O?ee="headers="+encodeURIComponent(String(Nl(st)))+"&"+ee:this.m&&fs(se,this.m,st)),xa(this.h,ze),this.Ua&&Vn(se,"TYPE","init"),this.P?(Vn(se,"$req",ee),Vn(se,"SID","null"),ze.T=!0,Tt(ze,se,null)):Tt(ze,se,ee),this.G=2}}else this.G==3&&(O?Qu(this,O):this.i.length==0||Zs(this.h)||Qu(this))};function Qu(O,ee){var se;ee?se=ee.l:se=O.U++;const xe=xi(O.I);Vn(xe,"SID",O.K),Vn(xe,"RID",se),Vn(xe,"AID",O.T),Wc(O,xe),O.m&&O.o&&fs(xe,O.m,O.o),se=new ut(O,O.j,se,O.B+1),O.m===null&&(se.H=O.o),ee&&(O.i=ee.D.concat(O.i)),ee=Hu(O,se,1e3),se.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,se),Tt(se,xe,ee)}function Wc(O,ee){O.H&&F(O.H,function(se,xe){Vn(ee,xe,se)}),O.l&&qA({},function(se,xe){Vn(ee,xe,se)})}function Hu(O,ee,se){se=Math.min(O.i.length,se);var xe=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let st=-1;for(;;){const Mt=["count="+se];st==-1?0<se?(st=ze[0].g,Mt.push("ofs="+st)):st=0:Mt.push("ofs="+st);let Tr=!0;for(let bn=0;bn<se;bn++){let Gr=ze[bn].g;const zn=ze[bn].map;if(Gr-=st,0>Gr)st=Math.max(0,ze[bn].g-100),Tr=!1;else try{Eo(zn,Mt,"req"+Gr+"_")}catch{xe&&xe(zn)}}if(Tr){xe=Mt.join("&");break e}}}return O=O.i.splice(0,se),ee.D=O,xe}function Qd(O){if(!O.g&&!O.u){O.Y=1;var ee=O.Fa;Z||K(),H||(Z(),H=!0),V.add(ee,O),O.v=0}}function Vu(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=en(h(O.Fa,O),zu(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,_h(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=en(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Md(this),_h(this))};function Xc(O){O.A!=null&&(o.clearTimeout(O.A),O.A=null)}function _h(O){O.g=new ut(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var ee=xi(O.qa);Vn(ee,"RID","rpc"),Vn(ee,"SID",O.K),Vn(ee,"AID",O.T),Vn(ee,"CI",O.F?"0":"1"),!O.F&&O.ja&&Vn(ee,"TO",O.ja),Vn(ee,"TYPE","xmlhttp"),Wc(O,ee),O.m&&O.o&&fs(ee,O.m,O.o),O.L&&(O.g.I=O.L);var se=O.g;O=O.ia,se.L=1,se.v=zc(xi(ee)),se.m=null,se.P=!0,Vt(se,O)}e.Za=function(){this.C!=null&&(this.C=null,Md(this),Vu(this),$t(19))};function ic(O){O.C!=null&&(o.clearTimeout(O.C),O.C=null)}function Yc(O,ee){var se=null;if(O.g==ee){ic(O),Xc(O),O.g=null;var xe=2}else if(gi(O.h,ee))se=ee.D,ei(O.h,ee),xe=1;else return;if(O.G!=0){if(ee.o)if(xe==1){se=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var ze=O.B;xe=Pr(),Bt(xe,new tn(xe,se)),Ud(O)}else Qd(O);else if(ze=ee.s,ze==3||ze==0&&0<ee.X||!(xe==1&&ZA(O,ee)||xe==2&&Vu(O)))switch(se&&0<se.length&&(ee=O.h,ee.i=ee.i.concat(se)),ze){case 1:Di(O,5);break;case 4:Di(O,10);break;case 3:Di(O,6);break;default:Di(O,2)}}}function zu(O,ee){let se=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(se*=2),se*ee}function Di(O,ee){if(O.j.info("Error code "+ee),ee==2){var se=h(O.fb,O),xe=O.Xa;const ze=!xe;xe=new On(xe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Hc(xe,"https"),zc(xe),ze?ji(xe.toString(),se):wo(xe.toString(),se)}else $t(2);O.G=0,O.l&&O.l.sa(ee),Hd(O),Uu(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Hd(O){if(O.G=0,O.ka=[],O.l){const ee=Rd(O.h);(ee.length!=0||O.i.length!=0)&&(b(O.ka,ee),b(O.ka,O.i),O.h.i.length=0,v(O.i),O.i.length=0),O.l.ra()}}function G(O,ee,se){var xe=se instanceof On?xi(se):new On(se);if(xe.g!="")ee&&(xe.g=ee+"."+xe.g),Vc(xe,xe.s);else{var ze=o.location;xe=ze.protocol,ee=ee?ee+"."+ze.hostname:ze.hostname,ze=+ze.port;var st=new On(null);xe&&Hc(st,xe),ee&&(st.g=ee),ze&&Vc(st,ze),se&&(st.l=se),xe=st}return se=O.D,ee=O.ya,se&&ee&&Vn(xe,se,ee),Vn(xe,"VER",O.la),Wc(O,xe),xe}function de(O,ee,se){if(ee&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=O.Ca&&!O.pa?new xn(new $c({eb:se})):new xn(O.pa),ee.Ha(O.J),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}e=Fe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(O,ee){return new Ke(O,ee)};function Ke(O,ee){mt.call(this),this.g=new qc(ee),this.l=O,this.h=ee&&ee.messageUrlParams||null,O=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(O?O["X-WebChannel-Content-Type"]=ee.messageContentType:O={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(O?O["X-WebChannel-Client-Profile"]=ee.va:O={"X-WebChannel-Client-Profile":ee.va}),this.g.S=O,(O=ee&&ee.Sb)&&!_(O)&&(this.g.m=O),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!_(ee)&&(this.g.D=ee,O=this.h,O!==null&&ee in O&&(O=this.h,ee in O&&delete O[ee])),this.j=new Jt(this)}g(Ke,mt),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){sc(this.g)},Ke.prototype.o=function(O){var ee=this.g;if(typeof O=="string"){var se={};se.__data__=O,O=se}else this.u&&(se={},se.__data__=Cr(O),O=se);ee.i.push(new bo(ee.Ya++,O)),ee.G==3&&Ud(ee)},Ke.prototype.N=function(){this.g.l=null,delete this.j,sc(this.g),delete this.g,Ke.aa.N.call(this)};function xt(O){gt.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var ee=O.__sm__;if(ee){e:{for(const se in ee){O=se;break e}O=void 0}(this.i=O)&&(O=this.i,ee=ee!==null&&O in ee?ee[O]:void 0),this.data=ee}else this.data=O}g(xt,gt);function Pt(){dt.call(this),this.status=1}g(Pt,dt);function Jt(O){this.g=O}g(Jt,Fe),Jt.prototype.ua=function(){Bt(this.g,"a")},Jt.prototype.ta=function(O){Bt(this.g,new xt(O))},Jt.prototype.sa=function(O){Bt(this.g,new Pt)},Jt.prototype.ra=function(){Bt(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,kX=function(){return new Le},NX=function(){return Pr()},SX=Dt,sj={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,WC=Ce,Ne.COMPLETE="complete",_X=Ne,pt.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Db=pt,xn.prototype.listenOnce=xn.prototype.L,xn.prototype.getLastError=xn.prototype.Ka,xn.prototype.getLastErrorCode=xn.prototype.Ba,xn.prototype.getStatus=xn.prototype.Z,xn.prototype.getResponseJson=xn.prototype.Oa,xn.prototype.getResponseText=xn.prototype.oa,xn.prototype.send=xn.prototype.ea,xn.prototype.setWithCredentials=xn.prototype.Ha,CX=xn}).apply(typeof pE<"u"?pE:typeof self<"u"?self:typeof window<"u"?window:{});const PU="@firebase/firestore",LU="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Uo.UNAUTHENTICATED=new Uo(null),Uo.GOOGLE_CREDENTIALS=new Uo("google-credentials-uid"),Uo.FIRST_PARTY=new Uo("first-party-uid"),Uo.MOCK_USER=new Uo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ux="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=new eO("@firebase/firestore");function dv(){return Ip.logLevel}function lr(e,...t){if(Ip.logLevel<=kn.DEBUG){const r=t.map(dO);Ip.debug(`Firestore (${Ux}): ${e}`,...r)}}function Xf(e,...t){if(Ip.logLevel<=kn.ERROR){const r=t.map(dO);Ip.error(`Firestore (${Ux}): ${e}`,...r)}}function jp(e,...t){if(Ip.logLevel<=kn.WARN){const r=t.map(dO);Ip.warn(`Firestore (${Ux}): ${e}`,...r)}}function dO(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,BX(e,n,r)}function BX(e,t,r){let n=`FIRESTORE (${Ux}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Xf(n),new Error(n)}function oa(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||BX(t,a,n)}function Zr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Bd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class IX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Uo.UNAUTHENTICATED))}shutdown(){}}class L0e{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class M0e{constructor(t){this.t=t,this.currentUser=Uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){oa(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new Lf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Lf,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{lr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(lr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Lf)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(lr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(oa(typeof n.accessToken=="string",31837,{l:n}),new TX(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return oa(t===null||typeof t=="string",2055,{h:t}),new Uo(t)}}class U0e{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Uo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q0e{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new U0e(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Uo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H0e{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){oa(this.o===void 0,3512);const n=s=>{s.error!=null&&lr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,lr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{lr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):lr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new MU(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(oa(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new MU(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0e(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=V0e(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Bn(e,t){return e<t?-1:e>t?1:0}function ij(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return gB(a)===gB(s)?Bn(a,s):gB(a)?1:-1}return Bn(e.length,t.length)}const z0e=55296,$0e=57343;function gB(e){const t=e.charCodeAt(0);return t>=z0e&&t<=$0e}function sx(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU="__name__";class vA{constructor(t,r,n){r===void 0?r=0:r>t.length&&Hr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Hr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return vA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof vA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=vA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Bn(t.length,r.length)}static compareSegments(t,r){const n=vA.isNumericId(t),a=vA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?vA.extractNumericId(t).compare(vA.extractNumericId(r)):ij(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return O0.fromString(t.substring(4,t.length-2))}}class Na extends vA{construct(t,r,n){return new Na(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wt(wt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Na(r)}static emptyPath(){return new Na([])}}const K0e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ki extends vA{construct(t,r,n){return new Ki(t,r,n)}static isValidIdentifier(t){return K0e.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ki.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UU}static keyField(){return new Ki([UU])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Wt(wt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Wt(wt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Wt(wt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Wt(wt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ki(r)}static emptyPath(){return new Ki([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this.path=t}static fromPath(t){return new gr(Na.fromString(t))}static fromName(t){return new gr(Na.fromString(t).popFirst(5))}static empty(){return new gr(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Na.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Na.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gr(new Na(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jX(e,t,r){if(!r)throw new Wt(wt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function FX(e,t,r,n){if(t===!0&&n===!0)throw new Wt(wt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function QU(e){if(!gr.isDocumentKey(e))throw new Wt(wt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function HU(e){if(gr.isDocumentKey(e))throw new Wt(wt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function OX(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function K5(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hr(12329,{type:typeof e})}function Yo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(wt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=K5(e);throw new Wt(wt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function G0e(e,t){if(t<=0)throw new Wt(wt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,t){const r={typeString:e};return t&&(r.value=t),r}function Iw(e,t){if(!OX(e))throw new Wt(wt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Wt(wt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=-62135596800,zU=1e6;class br{static now(){return br.fromMillis(Date.now())}static fromDate(t){return br.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*zU);return new br(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<VU)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zU}_compareTo(t){return this.seconds===t.seconds?Bn(this.nanoseconds,t.nanoseconds):Bn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:br._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Iw(t,br._jsonSchema))return new br(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-VU;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}br._jsonSchemaVersion="firestore/timestamp/1.0",br._jsonSchema={type:hi("string",br._jsonSchemaVersion),seconds:hi("number"),nanoseconds:hi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{static fromTimestamp(t){return new Wr(t)}static min(){return new Wr(new br(0,0))}static max(){return new Wr(new br(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=-1;function q0e(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Wr.fromTimestamp(n===1e9?new br(r+1,0):new br(r,n));return new G0(a,gr.empty(),t)}function W0e(e){return new G0(e.readTime,e.key,Oy)}class G0{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new G0(Wr.min(),gr.empty(),Oy)}static max(){return new G0(Wr.max(),gr.empty(),Oy)}}function X0e(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=gr.comparator(e.documentKey,t.documentKey),r!==0?r:Bn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J0e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(e){if(e.code!==wt.FAILED_PRECONDITION||e.message!==Y0e)throw e;lr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Hr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ft((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ft?r:Ft.resolve(r)}catch(r){return Ft.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ft.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ft.reject(r)}static resolve(t){return new Ft((r,n)=>{r(t)})}static reject(t){return new Ft((r,n)=>{n(t)})}static waitFor(t){return new Ft((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},l=>n(l))}),i=!0,s===a&&r()})}static or(t){let r=Ft.resolve(!1);for(const n of t)r=r.next(a=>a?Ft.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Ft((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Ft((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Z0e(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Hx(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}G5.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=-1;function q5(e){return e==null}function Q_(e){return e===0&&1/e==-1/0}function eme(e){return typeof e=="number"&&Number.isInteger(e)&&!Q_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DX="";function tme(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=$U(t)),t=rme(e.get(r),t);return $U(t)}function rme(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case DX:r+="";break;default:r+=s}}return r}function $U(e){return e+DX+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function dm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function RX(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,r){this.comparator=t,this.root=r||ho.EMPTY}insert(t,r){return new is(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,ho.BLACK,null,null))}remove(t){return new is(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ho.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gE(this.root,t,this.comparator,!1)}getReverseIterator(){return new gE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gE(this.root,t,this.comparator,!0)}}class gE{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ho{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??ho.RED,this.left=a??ho.EMPTY,this.right=s??ho.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new ho(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ho.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return ho.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ho.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ho.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Hr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Hr(27949);return t+(this.isRed()?0:1)}}ho.EMPTY=null,ho.RED=!0,ho.BLACK=!1;ho.EMPTY=new class{constructor(){this.size=0}get key(){throw Hr(57766)}get value(){throw Hr(16141)}get color(){throw Hr(16727)}get left(){throw Hr(29726)}get right(){throw Hr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new ho(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this.comparator=t,this.data=new is(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new GU(this.data.getIterator())}getIteratorFrom(t){return new GU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Si)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Si(this.comparator);return r.data=t,r}}class GU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t){this.fields=t,t.sort(Ki.comparator)}static empty(){return new Bc([])}unionWith(t){let r=new Si(Ki.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Bc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return sx(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PX("Invalid base64 string: "+s):s}}(t);return new Yi(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Yi(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yi.EMPTY_BYTE_STRING=new Yi("");const nme=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function q0(e){if(oa(!!e,39018),typeof e=="string"){let t=0;const r=nme.exec(e);if(oa(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:zs(e.seconds),nanos:zs(e.nanos)}}function zs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function W0(e){return typeof e=="string"?Yi.fromBase64String(e):Yi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX="server_timestamp",MX="__type__",UX="__previous_value__",QX="__local_write_time__";function W5(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[MX])==null?void 0:n.stringValue)===LX}function X5(e){const t=e.mapValue.fields[UX];return W5(t)?X5(t):t}function Dy(e){const t=q0(e.mapValue.fields[QX].timestampValue);return new br(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ame{constructor(t,r,n,a,s,i,o,l,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const H_="(default)";class ix{constructor(t,r){this.projectId=t,this.database=r||H_}static empty(){return new ix("","")}get isDefaultDatabase(){return this.database===H_}isEqual(t){return t instanceof ix&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HX="__type__",sme="__max__",vE={mapValue:{}},VX="__vector__",V_="value";function X0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?W5(e)?4:ome(e)?9007199254740991:ime(e)?10:11:Hr(28295,{value:e})}function MA(e,t){if(e===t)return!0;const r=X0(e);if(r!==X0(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Dy(e).isEqual(Dy(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=q0(a.timestampValue),o=q0(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return W0(a.bytesValue).isEqual(W0(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return zs(a.geoPointValue.latitude)===zs(s.geoPointValue.latitude)&&zs(a.geoPointValue.longitude)===zs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return zs(a.integerValue)===zs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=zs(a.doubleValue),o=zs(s.doubleValue);return i===o?Q_(i)===Q_(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return sx(e.arrayValue.values||[],t.arrayValue.values||[],MA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(KU(i)!==KU(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!MA(i[l],o[l])))return!1;return!0}(e,t);default:return Hr(52216,{left:e})}}function Ry(e,t){return(e.values||[]).find(r=>MA(r,t))!==void 0}function ox(e,t){if(e===t)return 0;const r=X0(e),n=X0(t);if(r!==n)return Bn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Bn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=zs(s.integerValue||s.doubleValue),l=zs(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(e,t);case 3:return qU(e.timestampValue,t.timestampValue);case 4:return qU(Dy(e),Dy(t));case 5:return ij(e.stringValue,t.stringValue);case 6:return function(s,i){const o=W0(s),l=W0(i);return o.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=Bn(o[u],l[u]);if(d!==0)return d}return Bn(o.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=Bn(zs(s.latitude),zs(i.latitude));return o!==0?o:Bn(zs(s.longitude),zs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return WU(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,v;const o=s.fields||{},l=i.fields||{},u=(h=o[V_])==null?void 0:h.arrayValue,d=(p=l[V_])==null?void 0:p.arrayValue,f=Bn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((v=d==null?void 0:d.values)==null?void 0:v.length)||0);return f!==0?f:WU(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===vE.mapValue&&i===vE.mapValue)return 0;if(s===vE.mapValue)return 1;if(i===vE.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const h=ij(l[f],d[f]);if(h!==0)return h;const p=ox(o[l[f]],u[d[f]]);if(p!==0)return p}return Bn(l.length,d.length)}(e.mapValue,t.mapValue);default:throw Hr(23264,{he:r})}}function qU(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bn(e,t);const r=q0(e),n=q0(t),a=Bn(r.seconds,n.seconds);return a!==0?a:Bn(r.nanos,n.nanos)}function WU(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=ox(r[a],n[a]);if(s)return s}return Bn(r.length,n.length)}function lx(e){return oj(e)}function oj(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=q0(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return W0(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return gr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=oj(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${oj(r.fields[i])}`;return a+"}"}(e.mapValue):Hr(61005,{value:e})}function XC(e){switch(X0(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=X5(e);return t?16+XC(t):16;case 5:return 2*e.stringValue.length;case 6:return W0(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+XC(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return dm(n.fields,(s,i)=>{a+=s.length+XC(i)}),a}(e.mapValue);default:throw Hr(13486,{value:e})}}function z_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function lj(e){return!!e&&"integerValue"in e}function fO(e){return!!e&&"arrayValue"in e}function XU(e){return!!e&&"nullValue"in e}function YU(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function YC(e){return!!e&&"mapValue"in e}function ime(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[HX])==null?void 0:n.stringValue)===VX}function ay(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return dm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=ay(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ay(e.arrayValue.values[r]);return t}return{...e}}function ome(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===sme}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t){this.value=t}static empty(){return new zl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!YC(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ay(r)}setAll(t){let r=Ki.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=ay(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());YC(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return MA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];YC(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){dm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new zl(ay(this.value))}}function zX(e){const t=[];return dm(e.fields,(r,n)=>{const a=new Ki([r]);if(YC(n)){const s=zX(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Bc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new zo(t,0,Wr.min(),Wr.min(),Wr.min(),zl.empty(),0)}static newFoundDocument(t,r,n,a){return new zo(t,1,r,Wr.min(),n,a,0)}static newNoDocument(t,r){return new zo(t,2,r,Wr.min(),Wr.min(),zl.empty(),0)}static newUnknownDocument(t,r){return new zo(t,3,r,Wr.min(),Wr.min(),zl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Wr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t,r){this.position=t,this.inclusive=r}}function JU(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=gr.comparator(gr.fromName(i.referenceValue),r.key):n=ox(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function ZU(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!MA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(t,r="asc"){this.field=t,this.dir=r}}function lme(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $X{}class fi extends $X{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new ume(t,r,n):r==="array-contains"?new fme(t,n):r==="in"?new hme(t,n):r==="not-in"?new mme(t,n):r==="array-contains-any"?new pme(t,n):new fi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new dme(t,n):new Ame(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(ox(r,this.value)):r!==null&&X0(this.value)===X0(r)&&this.matchesComparison(ox(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nd extends $X{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Nd(t,r)}matches(t){return KX(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KX(e){return e.op==="and"}function GX(e){return cme(e)&&KX(e)}function cme(e){for(const t of e.filters)if(t instanceof Nd)return!1;return!0}function cj(e){if(e instanceof fi)return e.field.canonicalString()+e.op.toString()+lx(e.value);if(GX(e))return e.filters.map(t=>cj(t)).join(",");{const t=e.filters.map(r=>cj(r)).join(",");return`${e.op}(${t})`}}function qX(e,t){return e instanceof fi?function(n,a){return a instanceof fi&&n.op===a.op&&n.field.isEqual(a.field)&&MA(n.value,a.value)}(e,t):e instanceof Nd?function(n,a){return a instanceof Nd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&qX(i,a.filters[o]),!0):!1}(e,t):void Hr(19439)}function WX(e){return e instanceof fi?function(r){return`${r.field.canonicalString()} ${r.op} ${lx(r.value)}`}(e):e instanceof Nd?function(r){return r.op.toString()+" {"+r.getFilters().map(WX).join(" ,")+"}"}(e):"Filter"}class ume extends fi{constructor(t,r,n){super(t,r,n),this.key=gr.fromName(n.referenceValue)}matches(t){const r=gr.comparator(t.key,this.key);return this.matchesComparison(r)}}class dme extends fi{constructor(t,r){super(t,"in",r),this.keys=XX("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Ame extends fi{constructor(t,r){super(t,"not-in",r),this.keys=XX("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function XX(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>gr.fromName(n.referenceValue))}class fme extends fi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return fO(r)&&Ry(r.arrayValue,this.value)}}class hme extends fi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Ry(this.value.arrayValue,r)}}class mme extends fi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Ry(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ry(this.value.arrayValue,r)}}class pme extends fi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!fO(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ry(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gme{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function e7(e,t=null,r=[],n=[],a=null,s=null,i=null){return new gme(e,t,r,n,a,s,i)}function hO(e){const t=Zr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>cj(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),q5(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>lx(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>lx(n)).join(",")),t.Te=r}return t.Te}function mO(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!lme(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!qX(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ZU(e.startAt,t.startAt)&&ZU(e.endAt,t.endAt)}function uj(e){return gr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,l=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vme(e,t,r,n,a,s,i,o){return new Xp(e,t,r,n,a,s,i,o)}function Y5(e){return new Xp(e)}function t7(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function pO(e){return e.collectionGroup!==null}function Lv(e){const t=Zr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Si(Ki.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Py(s,n))}),r.has(Ki.keyField().canonicalString())||t.Ie.push(new Py(Ki.keyField(),n))}return t.Ie}function OA(e){const t=Zr(e);return t.Ee||(t.Ee=xme(t,Lv(e))),t.Ee}function xme(e,t){if(e.limitType==="F")return e7(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Py(a.field,s)});const r=e.endAt?new cx(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new cx(e.startAt.position,e.startAt.inclusive):null;return e7(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function dj(e,t){const r=e.filters.concat([t]);return new Xp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function $_(e,t,r){return new Xp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function J5(e,t){return mO(OA(e),OA(t))&&e.limitType===t.limitType}function YX(e){return`${hO(OA(e))}|lt:${e.limitType}`}function Av(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>WX(a)).join(", ")}]`),q5(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>lx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>lx(a)).join(",")),`Target(${n})`}(OA(e))}; limitType=${e.limitType})`}function Z5(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):gr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Lv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,l){const u=JU(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,Lv(n),a)||n.endAt&&!function(i,o,l){const u=JU(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,Lv(n),a))}(e,t)}function bme(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function JX(e){return(t,r)=>{let n=!1;for(const a of Lv(e)){const s=yme(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function yme(e,t,r){const n=e.field.isKeyField()?gr.comparator(t.key,r.key):function(s,i,o){const l=i.data.field(s),u=o.data.field(s);return l!==null&&u!==null?ox(l,u):Hr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Hr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){dm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return RX(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wme=new is(gr.comparator);function Yf(){return wme}const ZX=new is(gr.comparator);function Rb(...e){let t=ZX;for(const r of e)t=t.insert(r.key,r);return t}function eY(e){let t=ZX;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function ap(){return sy()}function tY(){return sy()}function sy(){return new Yp(e=>e.toString(),(e,t)=>e.isEqual(t))}const Eme=new is(gr.comparator),Cme=new Si(gr.comparator);function Tn(...e){let t=Cme;for(const r of e)t=t.add(r);return t}const _me=new Si(Bn);function Sme(){return _me}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q_(t)?"-0":t}}function rY(e){return{integerValue:""+e}}function Nme(e,t){return eme(t)?rY(t):gO(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this._=void 0}}function kme(e,t,r){return e instanceof Ly?function(a,s){const i={fields:{[MX]:{stringValue:LX},[QX]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&W5(s)&&(s=X5(s)),s&&(i.fields[UX]=s),{mapValue:i}}(r,t):e instanceof ux?aY(e,t):e instanceof My?sY(e,t):function(a,s){const i=nY(a,s),o=r7(i)+r7(a.Ae);return lj(i)&&lj(a.Ae)?rY(o):gO(a.serializer,o)}(e,t)}function Bme(e,t,r){return e instanceof ux?aY(e,t):e instanceof My?sY(e,t):r}function nY(e,t){return e instanceof K_?function(n){return lj(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Ly extends eN{}class ux extends eN{constructor(t){super(),this.elements=t}}function aY(e,t){const r=iY(t);for(const n of e.elements)r.some(a=>MA(a,n))||r.push(n);return{arrayValue:{values:r}}}class My extends eN{constructor(t){super(),this.elements=t}}function sY(e,t){let r=iY(t);for(const n of e.elements)r=r.filter(a=>!MA(a,n));return{arrayValue:{values:r}}}class K_ extends eN{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function r7(e){return zs(e.integerValue||e.doubleValue)}function iY(e){return fO(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(t,r){this.field=t,this.transform=r}}function Tme(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof ux&&a instanceof ux||n instanceof My&&a instanceof My?sx(n.elements,a.elements,MA):n instanceof K_&&a instanceof K_?MA(n.Ae,a.Ae):n instanceof Ly&&a instanceof Ly}(e.transform,t.transform)}class Ime{constructor(t,r){this.version=t,this.transformResults=r}}class pl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new pl}static exists(t){return new pl(void 0,t)}static updateTime(t){return new pl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function JC(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class tN{}function lY(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new rN(e.key,pl.none()):new jw(e.key,e.data,pl.none());{const r=e.data,n=zl.empty();let a=new Si(Ki.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Am(e.key,n,new Bc(a.toArray()),pl.none())}}function jme(e,t,r){e instanceof jw?function(a,s,i){const o=a.value.clone(),l=a7(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof Am?function(a,s,i){if(!JC(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=a7(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(cY(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function iy(e,t,r,n){return e instanceof jw?function(s,i,o,l){if(!JC(s.precondition,i))return o;const u=s.value.clone(),d=s7(s.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Am?function(s,i,o,l){if(!JC(s.precondition,i))return o;const u=s7(s.fieldTransforms,l,i),d=i.data;return d.setAll(cY(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return JC(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function Fme(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=nY(n.transform,a||null);s!=null&&(r===null&&(r=zl.empty()),r.set(n.field,s))}return r||null}function n7(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&sx(n,a,(s,i)=>Tme(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class jw extends tN{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Am extends tN{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cY(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function a7(e,t,r){const n=new Map;oa(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,Bme(i,o,r[a]))}return n}function s7(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,kme(s,i,t))}return n}class rN extends tN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ome extends tN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dme{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&jme(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=iy(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=iy(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=tY();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const l=lY(i,o);l!==null&&n.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(Wr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Tn())}isEqual(t){return this.batchId===t.batchId&&sx(this.mutations,t.mutations,(r,n)=>n7(r,n))&&sx(this.baseMutations,t.baseMutations,(r,n)=>n7(r,n))}}class vO{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){oa(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return Eme}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new vO(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rme{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pme{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii,Mn;function Lme(e){switch(e){case wt.OK:return Hr(64938);case wt.CANCELLED:case wt.UNKNOWN:case wt.DEADLINE_EXCEEDED:case wt.RESOURCE_EXHAUSTED:case wt.INTERNAL:case wt.UNAVAILABLE:case wt.UNAUTHENTICATED:return!1;case wt.INVALID_ARGUMENT:case wt.NOT_FOUND:case wt.ALREADY_EXISTS:case wt.PERMISSION_DENIED:case wt.FAILED_PRECONDITION:case wt.ABORTED:case wt.OUT_OF_RANGE:case wt.UNIMPLEMENTED:case wt.DATA_LOSS:return!0;default:return Hr(15467,{code:e})}}function uY(e){if(e===void 0)return Xf("GRPC error has no .code"),wt.UNKNOWN;switch(e){case ii.OK:return wt.OK;case ii.CANCELLED:return wt.CANCELLED;case ii.UNKNOWN:return wt.UNKNOWN;case ii.DEADLINE_EXCEEDED:return wt.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return wt.RESOURCE_EXHAUSTED;case ii.INTERNAL:return wt.INTERNAL;case ii.UNAVAILABLE:return wt.UNAVAILABLE;case ii.UNAUTHENTICATED:return wt.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return wt.INVALID_ARGUMENT;case ii.NOT_FOUND:return wt.NOT_FOUND;case ii.ALREADY_EXISTS:return wt.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return wt.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return wt.FAILED_PRECONDITION;case ii.ABORTED:return wt.ABORTED;case ii.OUT_OF_RANGE:return wt.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return wt.UNIMPLEMENTED;case ii.DATA_LOSS:return wt.DATA_LOSS;default:return Hr(39323,{code:e})}}(Mn=ii||(ii={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mme(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ume=new O0([4294967295,4294967295],0);function i7(e){const t=Mme().encode(e),r=new EX;return r.update(t),new Uint8Array(r.digest())}function o7(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new O0([r,n],0),new O0([a,s],0)]}class xO{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Pb(`Invalid padding: ${r}`);if(n<0)throw new Pb(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Pb(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Pb(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=O0.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(O0.fromNumber(n)));return a.compare(Ume)===1&&(a=new O0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=i7(t),[n,a]=o7(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new xO(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=i7(t),[n,a]=o7(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Pb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,Fw.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new nN(Wr.min(),a,new is(Bn),Yf(),Tn())}}class Fw{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new Fw(n,r,Tn(),Tn(),Tn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class dY{constructor(t,r){this.targetId=t,this.Ce=r}}class AY{constructor(t,r,n=Yi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class l7{constructor(){this.ve=0,this.Fe=c7(),this.Me=Yi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Tn(),r=Tn(),n=Tn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Hr(38017,{changeType:s})}}),new Fw(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=c7()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,oa(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qme{constructor(t){this.Ge=t,this.ze=new Map,this.je=Yf(),this.Je=xE(),this.He=xE(),this.Ye=new is(Bn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Hr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(uj(s))if(n===0){const i=new gr(s.path);this.et(r,i,zo.newNoDocument(i,Wr.min()))}else oa(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),l=o?this.ct(o,t,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=W0(n).toUint8Array()}catch(l){if(l instanceof PX)return jp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new xO(i,a,s)}catch(l){return jp(l instanceof Pb?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&uj(o.target)){const l=new gr(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,zo.newNoDocument(l,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=Tn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new nN(t,r,this.Ye,this.je,n);return this.je=Yf(),this.Je=xE(),this.He=xE(),this.Ye=new is(Bn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new l7,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Si(Bn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Si(Bn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||lr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new l7),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function xE(){return new is(gr.comparator)}function c7(){return new is(gr.comparator)}const Hme={asc:"ASCENDING",desc:"DESCENDING"},Vme={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zme={and:"AND",or:"OR"};class $me{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Aj(e,t){return e.useProto3Json||q5(t)?t:{value:t}}function G_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fY(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Kme(e,t){return G_(e,t.toTimestamp())}function DA(e){return oa(!!e,49232),Wr.fromTimestamp(function(r){const n=q0(r);return new br(n.seconds,n.nanos)}(e))}function bO(e,t){return fj(e,t).canonicalString()}function fj(e,t){const r=function(a){return new Na(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function hY(e){const t=Na.fromString(e);return oa(xY(t),10190,{key:t.toString()}),t}function hj(e,t){return bO(e.databaseId,t.path)}function vB(e,t){const r=hY(t);if(r.get(1)!==e.databaseId.projectId)throw new Wt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Wt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new gr(pY(r))}function mY(e,t){return bO(e.databaseId,t)}function Gme(e){const t=hY(e);return t.length===4?Na.emptyPath():pY(t)}function mj(e){return new Na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pY(e){return oa(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function u7(e,t,r){return{name:hj(e,t),fields:r.value.mapValue.fields}}function qme(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Hr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(oa(d===void 0||typeof d=="string",58123),Yi.fromBase64String(d||"")):(oa(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Yi.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?wt.UNKNOWN:uY(u.code);return new Wt(d,u.message||"")}(i);r=new AY(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=vB(e,n.document.name),s=DA(n.document.updateTime),i=n.document.createTime?DA(n.document.createTime):Wr.min(),o=new zl({mapValue:{fields:n.document.fields}}),l=zo.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new ZC(u,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=vB(e,n.document),s=n.readTime?DA(n.readTime):Wr.min(),i=zo.newNoDocument(a,s),o=n.removedTargetIds||[];r=new ZC([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=vB(e,n.document),s=n.removedTargetIds||[];r=new ZC([],s,a,null)}else{if(!("filter"in t))return Hr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Pme(a,s),o=n.targetId;r=new dY(o,i)}}return r}function Wme(e,t){let r;if(t instanceof jw)r={update:u7(e,t.key,t.value)};else if(t instanceof rN)r={delete:hj(e,t.key)};else if(t instanceof Am)r={update:u7(e,t.key,t.data),updateMask:ape(t.fieldMask)};else{if(!(t instanceof Ome))return Hr(16599,{Vt:t.type});r={verify:hj(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Ly)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ux)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof My)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof K_)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Hr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Kme(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hr(27497)}(e,t.precondition)),r}function Xme(e,t){return e&&e.length>0?(oa(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?DA(a.updateTime):DA(s);return i.isEqual(Wr.min())&&(i=DA(s)),new Ime(i,a.transformResults||[])}(r,t))):[]}function Yme(e,t){return{documents:[mY(e,t.path)]}}function Jme(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=mY(e,a);const s=function(u){if(u.length!==0)return vY(Nd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:fv(h.field),direction:tpe(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=Aj(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Zme(e){let t=Gme(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){oa(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=gY(f);return h instanceof Nd&&GX(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new Py(hv(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,q5(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new cx(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new cx(p,h)}(r.endAt)),vme(t,a,i,s,o,"F",l,u)}function epe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function gY(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=hv(r.unaryFilter.field);return fi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=hv(r.unaryFilter.field);return fi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hv(r.unaryFilter.field);return fi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hv(r.unaryFilter.field);return fi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Hr(61313);default:return Hr(60726)}}(e):e.fieldFilter!==void 0?function(r){return fi.create(hv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Hr(58110);default:return Hr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Nd.create(r.compositeFilter.filters.map(n=>gY(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Hr(1026)}}(r.compositeFilter.op))}(e):Hr(30097,{filter:e})}function tpe(e){return Hme[e]}function rpe(e){return Vme[e]}function npe(e){return zme[e]}function fv(e){return{fieldPath:e.canonicalString()}}function hv(e){return Ki.fromServerFormat(e.fieldPath)}function vY(e){return e instanceof fi?function(r){if(r.op==="=="){if(YU(r.value))return{unaryFilter:{field:fv(r.field),op:"IS_NAN"}};if(XU(r.value))return{unaryFilter:{field:fv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(YU(r.value))return{unaryFilter:{field:fv(r.field),op:"IS_NOT_NAN"}};if(XU(r.value))return{unaryFilter:{field:fv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fv(r.field),op:rpe(r.op),value:r.value}}}(e):e instanceof Nd?function(r){const n=r.getFilters().map(a=>vY(a));return n.length===1?n[0]:{compositeFilter:{op:npe(r.op),filters:n}}}(e):Hr(54877,{filter:e})}function ape(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function xY(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,r,n,a,s=Wr.min(),i=Wr.min(),o=Yi.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new C0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new C0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new C0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new C0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class spe{constructor(t){this.yt=t}}function ipe(e){const t=Zme({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?$_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ope{constructor(){this.Cn=new lpe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Ft.resolve()}getCollectionParents(t,r){return Ft.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Ft.resolve()}deleteFieldIndex(t,r){return Ft.resolve()}deleteAllFieldIndexes(t){return Ft.resolve()}createTargetIndexes(t,r){return Ft.resolve()}getDocumentsMatchingTarget(t,r){return Ft.resolve(null)}getIndexType(t,r){return Ft.resolve(0)}getFieldIndexes(t,r){return Ft.resolve([])}getNextCollectionGroupToUpdate(t){return Ft.resolve(null)}getMinOffset(t,r){return Ft.resolve(G0.min())}getMinOffsetFromCollectionGroup(t,r){return Ft.resolve(G0.min())}updateCollectionGroup(t,r,n){return Ft.resolve()}updateIndexEntries(t,r){return Ft.resolve()}}class lpe{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Si(Na.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Si(Na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bY=41943040;class Ul{static withCacheSize(t){return new Ul(t,Ul.DEFAULT_COLLECTION_PERCENTILE,Ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ul.DEFAULT_COLLECTION_PERCENTILE=10,Ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ul.DEFAULT=new Ul(bY,Ul.DEFAULT_COLLECTION_PERCENTILE,Ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ul.DISABLED=new Ul(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new dx(0)}static cr(){return new dx(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7="LruGarbageCollector",cpe=1048576;function f7([e,t],[r,n]){const a=Bn(e,r);return a===0?Bn(t,n):a}class upe{constructor(t){this.Ir=t,this.buffer=new Si(f7),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();f7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class dpe{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lr(A7,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Hx(r)?lr(A7,"Ignoring IndexedDB error during garbage collection: ",r):await Qx(r)}await this.Vr(3e5)})}}class Ape{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Ft.resolve(G5.ce);const n=new upe(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),Ft.resolve(d7)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(lr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d7):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,l,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(lr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),dv()<=kn.DEBUG&&lr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),Ft.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function fpe(e,t){return new Ape(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hpe{constructor(){this.changes=new Yp(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,zo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ft.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mpe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ppe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&iy(n.mutation,a,Bc.empty(),br.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Tn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Tn()){const a=ap();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=Rb();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=ap();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Tn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=Yf();const i=sy(),o=function(){return sy()}();return r.forEach((l,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Am)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),iy(d.mutation,u,d.mutation.getFieldMask(),br.now())):i.set(u.key,Bc.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new mpe(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=sy();let a=new is((i,o)=>i-o),s=Tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||Bc.empty();d=o.applyToLocalView(u,d),n.set(l,d);const f=(a.get(o.batchId)||Tn()).add(l);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,f=tY();d.forEach(h=>{if(!s.has(h)){const p=lY(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Ft.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return gr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):pO(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Ft.resolve(ap());let o=Oy,l=s;return i.next(u=>Ft.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Ft.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,Tn())).next(d=>({batchId:o,changes:eY(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new gr(r)).next(n=>{let a=Rb();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=Rb();return this.indexManager.getCollectionParents(t,s).next(o=>Ft.forEach(o,l=>{const u=function(f,h){return new Xp(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,zo.newInvalidDocument(d)))});let o=Rb();return i.forEach((l,u)=>{const d=s.get(l);d!==void 0&&iy(d.mutation,u,Bc.empty(),br.now()),Z5(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gpe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Ft.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:DA(a.createTime)}}(r)),Ft.resolve()}getNamedQuery(t,r){return Ft.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:ipe(a.bundledQuery),readTime:DA(a.readTime)}}(r)),Ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vpe{constructor(){this.overlays=new is(gr.comparator),this.qr=new Map}getOverlay(t,r){return Ft.resolve(this.overlays.get(r))}getOverlays(t,r){const n=ap();return Ft.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Ft.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Ft.resolve()}getOverlaysForCollection(t,r,n){const a=ap(),s=r.length+1,i=new gr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&a.set(l.getKey(),l)}return Ft.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new is((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=ap(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=ap(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Ft.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Rme(r,n));let s=this.qr.get(r);s===void 0&&(s=Tn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xpe{constructor(){this.sessionToken=Yi.EMPTY_BYTE_STRING}getSessionToken(t){return Ft.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.Qr=new Si(Hi.$r),this.Ur=new Si(Hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Hi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Hi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new gr(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new gr(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1);let s=Tn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Hi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Hi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return gr.comparator(t.key,r.key)||Bn(t.Yr,r.Yr)}static Kr(t,r){return Bn(t.Yr,r.Yr)||gr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bpe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Si(Hi.$r)}checkEmpty(t){return Ft.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Dme(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Hi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Ft.resolve(i)}lookupMutationBatch(t,r){return Ft.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Ft.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ft.resolve(this.mutationQueue.length===0?AO:this.tr-1)}getAllMutationBatches(t){return Ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Hi(r,0),a=new Hi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Ft.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Si(Bn);return r.forEach(a=>{const s=new Hi(a,0),i=new Hi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Ft.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;gr.isDocumentKey(s)||(s=s.child(""));const i=new Hi(new gr(s),0);let o=new Si(Bn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(l.Yr)),!0)},i),Ft.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){oa(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ft.forEach(r.mutations,a=>{const s=new Hi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Hi(r,0),a=this.Zr.firstAfterOrEqual(n);return Ft.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ft.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ype{constructor(t){this.ri=t,this.docs=function(){return new is(gr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Ft.resolve(n?n.document.mutableCopy():zo.newInvalidDocument(r))}getEntries(t,r){let n=Yf();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():zo.newInvalidDocument(a))}),Ft.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Yf();const i=r.path,o=new gr(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||X0e(W0e(d),n)<=0||(a.has(d.key)||Z5(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ft.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Hr(9500)}ii(t,r){return Ft.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new wpe(this)}getSize(t){return Ft.resolve(this.size)}}class wpe extends hpe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Ft.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Epe{constructor(t){this.persistence=t,this.si=new Yp(r=>hO(r),mO),this.lastRemoteSnapshotVersion=Wr.min(),this.highestTargetId=0,this.oi=0,this._i=new yO,this.targetCount=0,this.ai=dx.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Ft.resolve()}getLastRemoteSnapshotVersion(t){return Ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ft.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Ft.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ft.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new dx(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Ft.resolve()}updateTargetData(t,r){return this.Pr(r),Ft.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ft.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Ft.waitFor(s).next(()=>a)}getTargetCount(t){return Ft.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Ft.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Ft.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Ft.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Ft.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Ft.resolve(n)}containsKey(t,r){return Ft.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(t,r){this.ui={},this.overlays={},this.ci=new G5(0),this.li=!1,this.li=!0,this.hi=new xpe,this.referenceDelegate=t(this),this.Pi=new Epe(this),this.indexManager=new ope,this.remoteDocumentCache=function(a){return new ype(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new spe(r),this.Ii=new gpe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new vpe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new bpe(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){lr("MemoryPersistence","Starting transaction:",t);const a=new Cpe(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Ft.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Cpe extends J0e{constructor(t){super(),this.currentSequenceNumber=t}}class wO{constructor(t){this.persistence=t,this.Ri=new yO,this.Vi=null}static mi(t){return new wO(t)}get fi(){if(this.Vi)return this.Vi;throw Hr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ft.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ft.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Ft.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ft.forEach(this.fi,n=>{const a=gr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Wr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Ft.or([()=>Ft.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class q_{constructor(t,r){this.persistence=t,this.pi=new Yp(n=>tme(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=fpe(this,r)}static mi(t,r){return new q_(t,r)}Ei(){}di(t){return Ft.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Ft.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Ft.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Wr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Ft.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ft.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ft.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Ft.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=XC(t.data.value)),r}br(t,r,n){return Ft.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Ft.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Tn(),a=Tn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new EO(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _pe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Spe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nAe()?8:Z0e(Zo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new _pe;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(dv()<=kn.DEBUG&&lr("QueryEngine","SDK will not create cache indexes for query:",Av(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ft.resolve()):(dv()<=kn.DEBUG&&lr("QueryEngine","Query:",Av(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(dv()<=kn.DEBUG&&lr("QueryEngine","The SDK decides to create cache indexes for query:",Av(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,OA(r))):Ft.resolve())}ys(t,r){if(t7(r))return Ft.resolve(null);let n=OA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=$_(r,null,"F"),n=OA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=Tn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(t,$_(r,null,"F")):this.vs(t,u,r,l)}))})))}ws(t,r,n,a){return t7(r)||a.isEqual(Wr.min())?Ft.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Ft.resolve(null):(dv()<=kn.DEBUG&&lr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Av(r)),this.vs(t,i,r,q0e(a,Oy)).next(o=>o))})}Ds(t,r){let n=new Si(JX(t));return r.forEach((a,s)=>{Z5(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return dv()<=kn.DEBUG&&lr("QueryEngine","Using full collection scan to execute query:",Av(r)),this.ps.getDocumentsMatchingQuery(t,r,G0.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="LocalStore",Npe=3e8;class kpe{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new is(Bn),this.xs=new Yp(s=>hO(s),mO),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ppe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Bpe(e,t,r,n){return new kpe(e,t,r,n)}async function wY(e,t){const r=Zr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let l=Tn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function Tpe(e,t){const r=Zr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const f=u.batch,h=f.keys();let p=Ft.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(l,g)).next(v=>{const b=u.docVersions.get(g);oa(b!==null,48541),v.version.compareTo(b)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Tn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function EY(e){const t=Zr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Ipe(e,t){const r=Zr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Yi.EMPTY_BYTE_STRING,Wr.min()).withLastLimboFreeSnapshotVersion(Wr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(v,b,y){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Npe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let l=Yf(),u=Tn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(jpe(s,i,t.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Wr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Ft.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=a,s))}function jpe(e,t,r){let n=Tn(),a=Tn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=Yf();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(Wr.min())?(t.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),i=i.insert(o,l)):lr(CO,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:a}})}function Fpe(e,t){const r=Zr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=AO),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Ope(e,t){const r=Zr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Ft.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new C0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function pj(e,t,r){const n=Zr(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!Hx(i))throw i;lr(CO,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function h7(e,t,r){const n=Zr(e);let a=Wr.min(),s=Tn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const f=Zr(l),h=f.xs.get(d);return h!==void 0?Ft.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,OA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Wr.min(),r?s:Tn())).next(o=>(Dpe(n,bme(t),o),{documents:o,Qs:s})))}function Dpe(e,t,r){let n=e.Os.get(t)||Wr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class m7{constructor(){this.activeTargetIds=Sme()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Rpe{constructor(){this.Mo=new m7,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new m7,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ppe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7="ConnectivityMonitor";class g7{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lr(p7,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lr(p7,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bE=null;function gj(){return bE===null?bE=function(){return 268435456+Math.round(2147483648*Math.random())}():bE++,"0x"+bE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="RestConnection",Lpe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mpe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===H_?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=gj(),o=this.zo(t,r.toUriEncodedString());lr(xB,`Sending RPC '${t}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:u}=new URL(o),d=uh(u);return this.Jo(t,o,l,n,d).then(f=>(lr(xB,`Received RPC '${t}' ${i}: `,f),f),f=>{throw jp(xB,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ux}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=Lpe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Upe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="WebChannelConnection";class Qpe extends Mpe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=gj();return new Promise((o,l)=>{const u=new CX;u.setWithCredentials(!0),u.listenOnce(_X.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case WC.NO_ERROR:const f=u.getResponseJson();lr(jo,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case WC.TIMEOUT:lr(jo,`RPC '${t}' ${i} timed out`),l(new Wt(wt.DEADLINE_EXCEEDED,"Request time out"));break;case WC.HTTP_ERROR:const h=u.getStatus();if(lr(jo,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(y){const _=y.toLowerCase().replace(/_/g,"-");return Object.values(wt).indexOf(_)>=0?_:wt.UNKNOWN}(g.status);l(new Wt(v,g.message))}else l(new Wt(wt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Wt(wt.UNAVAILABLE,"Connection failed."));break;default:Hr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{lr(jo,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);lr(jo,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=gj(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=kX(),o=NX(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");lr(jo,`Creating RPC '${t}' stream ${a}: ${d}`,l);const f=i.createWebChannel(d,l);this.I_(f);let h=!1,p=!1;const g=new Upe({Yo:b=>{p?lr(jo,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(lr(jo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),lr(jo,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),v=(b,y,_)=>{b.listen(y,S=>{try{_(S)}catch(k){setTimeout(()=>{throw k},0)}})};return v(f,Db.EventType.OPEN,()=>{p||(lr(jo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),v(f,Db.EventType.CLOSE,()=>{p||(p=!0,lr(jo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),v(f,Db.EventType.ERROR,b=>{p||(p=!0,jp(jo,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new Wt(wt.UNAVAILABLE,"The operation could not be completed")))}),v(f,Db.EventType.MESSAGE,b=>{var y;if(!p){const _=b.data[0];oa(!!_,16349);const S=_,k=(S==null?void 0:S.error)||((y=S[0])==null?void 0:y.error);if(k){lr(jo,`RPC '${t}' stream ${a} received error:`,k);const B=k.status;let F=function(N){const P=ii[N];if(P!==void 0)return uY(P)}(B),w=k.message;F===void 0&&(F=wt.INTERNAL,w="Unknown error status: "+B+" with message "+k.message),p=!0,g.a_(new Wt(F,w)),f.close()}else lr(jo,`RPC '${t}' stream ${a} received:`,_),g.u_(_)}}),v(o,SX.STAT_EVENT,b=>{b.stat===sj.PROXY?lr(jo,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===sj.NOPROXY&&lr(jo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function bB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(e){return new $me(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&lr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="PersistentStream";class _Y{constructor(t,r,n,a,s,i,o,l){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CY(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===wt.RESOURCE_EXHAUSTED?(Xf(r.toString()),Xf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===wt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Wt(wt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return lr(v7,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(lr(v7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hpe extends _Y{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=qme(this.serializer,t),n=function(s){if(!("targetChange"in s))return Wr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Wr.min():i.readTime?DA(i.readTime):Wr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=mj(this.serializer),r.addTarget=function(s,i){let o;const l=i.target;if(o=uj(l)?{documents:Yme(s,l)}:{query:Jme(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=fY(s,i.resumeToken);const u=Aj(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Wr.min())>0){o.readTime=G_(s,i.snapshotVersion.toTimestamp());const u=Aj(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=epe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=mj(this.serializer),r.removeTarget=t,this.q_(r)}}class Vpe extends _Y{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return oa(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,oa(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){oa(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Xme(t.writeResults,t.commitTime),n=DA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=mj(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Wme(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpe{}class $pe extends zpe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Wt(wt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,fj(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Wt(wt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,fj(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wt(wt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Kpe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xf(r),this.aa=!1):lr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="RemoteStore";class Gpe{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Jp(this)&&(lr(Fp,"Restarting streams for network reachability change."),await async function(l){const u=Zr(l);u.Ea.add(4),await Ow(u),u.Ra.set("Unknown"),u.Ea.delete(4),await sN(u)}(this))})}),this.Ra=new Kpe(n,a)}}async function sN(e){if(Jp(e))for(const t of e.da)await t(!0)}async function Ow(e){for(const t of e.da)await t(!1)}function SY(e,t){const r=Zr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),kO(r)?NO(r):Vx(r).O_()&&SO(r,t))}function _O(e,t){const r=Zr(e),n=Vx(r);r.Ia.delete(t),n.O_()&&NY(r,t),r.Ia.size===0&&(n.O_()?n.L_():Jp(r)&&r.Ra.set("Unknown"))}function SO(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Vx(e).Y_(t)}function NY(e,t){e.Va.Ue(t),Vx(e).Z_(t)}function NO(e){e.Va=new Qme({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Vx(e).start(),e.Ra.ua()}function kO(e){return Jp(e)&&!Vx(e).x_()&&e.Ia.size>0}function Jp(e){return Zr(e).Ea.size===0}function kY(e){e.Va=void 0}async function qpe(e){e.Ra.set("Online")}async function Wpe(e){e.Ia.forEach((t,r)=>{SO(e,t)})}async function Xpe(e,t){kY(e),kO(e)?(e.Ra.ha(t),NO(e)):e.Ra.set("Unknown")}async function Ype(e,t,r){if(e.Ra.set("Online"),t instanceof AY&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){lr(Fp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await W_(e,n)}else if(t instanceof ZC?e.Va.Ze(t):t instanceof dY?e.Va.st(t):e.Va.tt(t),!r.isEqual(Wr.min()))try{const n=await EY(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(Yi.EMPTY_BYTE_STRING,d.snapshotVersion)),NY(s,l);const f=new C0(d.target,l,u,d.sequenceNumber);SO(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){lr(Fp,"Failed to raise snapshot:",n),await W_(e,n)}}async function W_(e,t,r){if(!Hx(t))throw t;e.Ea.add(1),await Ow(e),e.Ra.set("Offline"),r||(r=()=>EY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{lr(Fp,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await sN(e)})}function BY(e,t){return t().catch(r=>W_(e,r,t))}async function iN(e){const t=Zr(e),r=Y0(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:AO;for(;Jpe(t);)try{const a=await Fpe(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Zpe(t,a)}catch(a){await W_(t,a)}TY(t)&&IY(t)}function Jpe(e){return Jp(e)&&e.Ta.length<10}function Zpe(e,t){e.Ta.push(t);const r=Y0(e);r.O_()&&r.X_&&r.ea(t.mutations)}function TY(e){return Jp(e)&&!Y0(e).x_()&&e.Ta.length>0}function IY(e){Y0(e).start()}async function ege(e){Y0(e).ra()}async function tge(e){const t=Y0(e);for(const r of e.Ta)t.ea(r.mutations)}async function rge(e,t,r){const n=e.Ta.shift(),a=vO.from(n,t,r);await BY(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await iN(e)}async function nge(e,t){t&&Y0(e).X_&&await async function(n,a){if(function(i){return Lme(i)&&i!==wt.ABORTED}(a.code)){const s=n.Ta.shift();Y0(n).B_(),await BY(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await iN(n)}}(e,t),TY(e)&&IY(e)}async function x7(e,t){const r=Zr(e);r.asyncQueue.verifyOperationInProgress(),lr(Fp,"RemoteStore received new credentials");const n=Jp(r);r.Ea.add(3),await Ow(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await sN(r)}async function age(e,t){const r=Zr(e);t?(r.Ea.delete(2),await sN(r)):t||(r.Ea.add(2),await Ow(r),r.Ra.set("Unknown"))}function Vx(e){return e.ma||(e.ma=function(r,n,a){const s=Zr(r);return s.sa(),new Hpe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:qpe.bind(null,e),t_:Wpe.bind(null,e),r_:Xpe.bind(null,e),H_:Ype.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),kO(e)?NO(e):e.Ra.set("Unknown")):(await e.ma.stop(),kY(e))})),e.ma}function Y0(e){return e.fa||(e.fa=function(r,n,a){const s=Zr(r);return s.sa(),new Vpe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ege.bind(null,e),r_:nge.bind(null,e),ta:tge.bind(null,e),na:rge.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await iN(e)):(await e.fa.stop(),e.Ta.length>0&&(lr(Fp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Lf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new BO(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(wt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TO(e,t){if(Xf("AsyncQueue",`${t}: ${e}`),Hx(e))return new Wt(wt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{static emptySet(t){return new Mv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||gr.comparator(r.key,n.key):(r,n)=>gr.comparator(r.key,n.key),this.keyedMap=Rb(),this.sortedSet=new is(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Mv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Mv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(){this.ga=new is(gr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Hr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class Ax{constructor(t,r,n,a,s,i,o,l,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Ax(t,r,Mv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&J5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sge{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class ige{constructor(){this.queries=y7(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Zr(r),s=a.queries;a.queries=y7(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Wt(wt.ABORTED,"Firestore shutting down"))}}function y7(){return new Yp(e=>YX(e),J5)}async function IO(e,t){const r=Zr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new sge,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=TO(i,`Initialization of query '${Av(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&FO(r)}async function jO(e,t){const r=Zr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function oge(e,t){const r=Zr(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&FO(r)}function lge(e,t,r){const n=Zr(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function FO(e){e.Ca.forEach(t=>{t.next()})}var vj,w7;(w7=vj||(vj={})).Ma="default",w7.Cache="cache";class OO{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Ax(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Ax.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==vj.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(t){this.key=t}}class FY{constructor(t){this.key=t}}class cge{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tn(),this.mutatedKeys=Tn(),this.eu=JX(t),this.tu=new Mv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new b7,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=Z5(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==v&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(l||u)&&(o=!0)),b&&(p?(i=i.add(p),s=v?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hr(20277,{Rt:b})}};return v(p)-v(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new Ax(this.query,t.tu,s,i,t.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b7,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Tn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new FY(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new jY(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Tn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Ax.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const DO="SyncEngine";class uge{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class dge{constructor(t){this.key=t,this.hu=!1}}class Age{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Yp(o=>YX(o),J5),this.Iu=new Map,this.Eu=new Set,this.du=new is(gr.comparator),this.Au=new Map,this.Ru=new yO,this.Vu={},this.mu=new Map,this.fu=dx.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fge(e,t,r=!0){const n=MY(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await OY(n,t,r,!0),a}async function hge(e,t){const r=MY(e);await OY(r,t,!0,!1)}async function OY(e,t,r,n){const a=await Ope(e.localStore,OA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await mge(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&SY(e.remoteStore,a),o}async function mge(e,t,r,n,a){e.pu=(f,h,p)=>async function(v,b,y,_){let S=b.view.ru(y);S.Cs&&(S=await h7(v.localStore,b.query,!1).then(({documents:w})=>b.view.ru(w,S)));const k=_&&_.targetChanges.get(b.targetId),B=_&&_.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(S,v.isPrimaryClient,k,B);return C7(v,b.targetId,F.au),F.snapshot}(e,f,h,p);const s=await h7(e.localStore,t,!0),i=new cge(t,s.Qs),o=i.ru(s.documents),l=Fw.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,l);C7(e,r,u.au);const d=new uge(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function pge(e,t,r){const n=Zr(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!J5(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await pj(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&_O(n.remoteStore,a.targetId),xj(n,a.targetId)}).catch(Qx)):(xj(n,a.targetId),await pj(n.localStore,a.targetId,!0))}async function gge(e,t){const r=Zr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),_O(r.remoteStore,n.targetId))}async function vge(e,t,r){const n=_ge(e);try{const a=await function(i,o){const l=Zr(i),u=br.now(),d=o.reduce((p,g)=>p.add(g.key),Tn());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Yf(),v=Tn();return l.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,_)=>{_.isValidDocument()||(v=v.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const _ of o){const S=Fme(_,f.get(_.key).overlayedDocument);S!=null&&y.push(new Am(_.key,S,zX(S.value.mapValue),pl.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:eY(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new is(Bn)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await Dw(n,a.changes),await iN(n.remoteStore)}catch(a){const s=TO(a,"Failed to persist write");r.reject(s)}}async function DY(e,t){const r=Zr(e);try{const n=await Ipe(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(oa(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?oa(i.hu,14607):a.removedDocuments.size>0&&(oa(i.hu,42227),i.hu=!1))}),await Dw(r,n,t)}catch(n){await Qx(n)}}function E7(e,t,r){const n=Zr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=Zr(i);l.onlineState=o;let u=!1;l.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&FO(l)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function xge(e,t,r){const n=Zr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new is(gr.comparator);i=i.insert(s,zo.newNoDocument(s,Wr.min()));const o=Tn().add(s),l=new nN(Wr.min(),new Map,new is(Bn),i,o);await DY(n,l),n.du=n.du.remove(s),n.Au.delete(t),RO(n)}else await pj(n.localStore,t,!1).then(()=>xj(n,t,r)).catch(Qx)}async function bge(e,t){const r=Zr(e),n=t.batch.batchId;try{const a=await Tpe(r.localStore,t);PY(r,n,null),RY(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Dw(r,a)}catch(a){await Qx(a)}}async function yge(e,t,r){const n=Zr(e);try{const a=await function(i,o){const l=Zr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(oa(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,t);PY(n,t,r),RY(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Dw(n,a)}catch(a){await Qx(a)}}function RY(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function PY(e,t,r){const n=Zr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function xj(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||LY(e,n)})}function LY(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(_O(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),RO(e))}function C7(e,t,r){for(const n of r)n instanceof jY?(e.Ru.addReference(n.key,t),wge(e,n)):n instanceof FY?(lr(DO,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||LY(e,n.key)):Hr(19791,{wu:n})}function wge(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(lr(DO,"New document in limbo: "+r),e.Eu.add(n),RO(e))}function RO(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new gr(Na.fromString(t)),n=e.fu.next();e.Au.set(n,new dge(r)),e.du=e.du.insert(r,n),SY(e.remoteStore,new C0(OA(Y5(r.path)),n,"TargetPurposeLimboResolution",G5.ce))}}async function Dw(e,t,r){const n=Zr(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){a.push(u);const f=EO.As(l.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(l,u){const d=Zr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ft.forEach(u,h=>Ft.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Ft.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!Hx(f))throw f;lr(CO,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,v)}}}(n.localStore,s))}async function Ege(e,t){const r=Zr(e);if(!r.currentUser.isEqual(t)){lr(DO,"User change. New user:",t.toKey());const n=await wY(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Wt(wt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Dw(r,n.Ls)}}function Cge(e,t){const r=Zr(e),n=r.Au.get(t);if(n&&n.hu)return Tn().add(n.key);{let a=Tn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function MY(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=DY.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cge.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xge.bind(null,t),t.Pu.H_=oge.bind(null,t.eventManager),t.Pu.yu=lge.bind(null,t.eventManager),t}function _ge(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bge.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yge.bind(null,t),t}class X_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=aN(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Bpe(this.persistence,new Spe,t.initialUser,this.serializer)}Cu(t){return new yY(wO.mi,this.serializer)}Du(t){return new Rpe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}X_.provider={build:()=>new X_};class Sge extends X_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){oa(this.persistence.referenceDelegate instanceof q_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new dpe(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Ul.withCacheSize(this.cacheSizeBytes):Ul.DEFAULT;return new yY(n=>q_.mi(n,r),this.serializer)}}class bj{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>E7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ege.bind(null,this.syncEngine),await age(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ige}()}createDatastore(t){const r=aN(t.databaseInfo.databaseId),n=function(s){return new Qpe(s)}(t.databaseInfo);return function(s,i,o,l){return new $pe(s,i,o,l)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new Gpe(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>E7(this.syncEngine,r,0),function(){return g7.v()?new g7:new Ppe}())}createSyncEngine(t,r){return function(a,s,i,o,l,u,d){const f=new Age(a,s,i,o,l,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Zr(a);lr(Fp,"RemoteStore shutting down."),s.Ea.add(5),await Ow(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}bj.provider={build:()=>new bj};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xf("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="FirestoreClient";class Nge{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Uo.UNAUTHENTICATED,this.clientId=$5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{lr(J0,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(lr(J0,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Lf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=TO(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function yB(e,t){e.asyncQueue.verifyOperationInProgress(),lr(J0,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await wY(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function _7(e,t){e.asyncQueue.verifyOperationInProgress();const r=await kge(e);lr(J0,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>x7(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>x7(t.remoteStore,a)),e._onlineComponents=t}async function kge(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lr(J0,"Using user provided OfflineComponentProvider");try{await yB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===wt.FAILED_PRECONDITION||a.code===wt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;jp("Error using user provided cache. Falling back to memory cache: "+r),await yB(e,new X_)}}else lr(J0,"Using default OfflineComponentProvider"),await yB(e,new Sge(void 0));return e._offlineComponents}async function UY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lr(J0,"Using user provided OnlineComponentProvider"),await _7(e,e._uninitializedComponentsProvider._online)):(lr(J0,"Using default OnlineComponentProvider"),await _7(e,new bj))),e._onlineComponents}function Bge(e){return UY(e).then(t=>t.syncEngine)}async function Y_(e){const t=await UY(e),r=t.eventManager;return r.onListen=fge.bind(null,t.syncEngine),r.onUnlisten=pge.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=hge.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=gge.bind(null,t.syncEngine),r}function Tge(e,t,r={}){const n=new Lf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new PO({next:h=>{d.Nu(),i.enqueueAndForget(()=>jO(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Wt(wt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?u.reject(new Wt(wt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new OO(Y5(o.path),d,{includeMetadataChanges:!0,qa:!0});return IO(s,f)}(await Y_(e),e.asyncQueue,t,r,n)),n.promise}function Ige(e,t,r={}){const n=new Lf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new PO({next:h=>{d.Nu(),i.enqueueAndForget(()=>jO(s,f)),h.fromCache&&l.source==="server"?u.reject(new Wt(wt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new OO(o,d,{includeMetadataChanges:!0,qa:!0});return IO(s,f)}(await Y_(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QY(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY="firestore.googleapis.com",N7=!0;class k7{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(wt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HY,this.ssl=N7}else this.host=t.host,this.ssl=t.ssl??N7;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=bY;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cpe)throw new Wt(wt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}FX("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QY(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Wt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Wt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Wt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class oN{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k7({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(wt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(wt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k7(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new IX;switch(n.type){case"firstParty":return new Q0e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wt(wt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=S7.get(r);n&&(lr("ComponentProvider","Removing Datastore"),S7.delete(r),n.terminate())}(this),Promise.resolve()}}function VY(e,t,r,n={}){var u;e=Yo(e,oN);const a=uh(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(L5(`https://${o}`),M5("Firestore",!0)),s.host!==HY&&s.host!==o&&jp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:n};if(!$0(l,i)&&(e._setSettings(l),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Uo.MOCK_USER;else{d=PW(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Wt(wt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Uo(h)}e._authCredentials=new L0e(new TX(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Td(this.firestore,t,this._query)}}class ns{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ns(this.firestore,t,this._key)}toJSON(){return{type:ns._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(Iw(r,ns._jsonSchema))return new ns(t,n||null,new gr(Na.fromString(r.referencePath)))}}ns._jsonSchemaVersion="firestore/documentReference/1.0",ns._jsonSchema={type:hi("string",ns._jsonSchemaVersion),referencePath:hi("string")};class Mf extends Td{constructor(t,r,n){super(t,r,Y5(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ns(this.firestore,null,new gr(t))}withConverter(t){return new Mf(this.firestore,t,this._path)}}function Ut(e,t,...r){if(e=va(e),jX("collection","path",t),e instanceof oN){const n=Na.fromString(t,...r);return HU(n),new Mf(e,null,n)}{if(!(e instanceof ns||e instanceof Mf))throw new Wt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return HU(n),new Mf(e.firestore,null,n)}}function hr(e,t,...r){if(e=va(e),arguments.length===1&&(t=$5.newId()),jX("doc","path",t),e instanceof oN){const n=Na.fromString(t,...r);return QU(n),new ns(e,null,new gr(n))}{if(!(e instanceof ns||e instanceof Mf))throw new Wt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return QU(n),new ns(e.firestore,e instanceof Mf?e.converter:null,new gr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7="AsyncQueue";class T7{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CY(this,"async_queue_retry"),this._c=()=>{const n=bB();n&&lr(B7,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=bB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=bB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Lf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Hx(t))throw t;lr(B7,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,Xf("INTERNAL UNHANDLED ERROR: ",I7(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=BO.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Hr(47125,{Pc:I7(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function I7(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class kd extends oN{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new T7,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new T7(t),this._firestoreClient=void 0,await t}}}function LO(e,t){const r=typeof e=="object"?e:U5(),n=typeof e=="string"?e:H_,a=Nw(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=Z6("firestore");s&&VY(a,...s)}return a}function zx(e){if(e._terminated)throw new Wt(wt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||jge(e),e._firestoreClient}function jge(e){var n,a,s;const t=e._freezeSettings(),r=function(o,l,u,d){return new ame(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,QY(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Nge(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _c(Yi.fromBase64String(t))}catch(r){throw new Wt(wt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new _c(Yi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:_c._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Iw(t,_c._jsonSchema))return _c.fromBase64String(t.bytes)}}_c._jsonSchemaVersion="firestore/bytes/1.0",_c._jsonSchema={type:hi("string",_c._jsonSchemaVersion),bytes:hi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Wt(wt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ki(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Wt(wt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Wt(wt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bn(this._lat,t._lat)||Bn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bd._jsonSchemaVersion}}static fromJSON(t){if(Iw(t,bd._jsonSchema))return new bd(t.latitude,t.longitude)}}bd._jsonSchemaVersion="firestore/geoPoint/1.0",bd._jsonSchema={type:hi("string",bd._jsonSchemaVersion),latitude:hi("number"),longitude:hi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:yd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Iw(t,yd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new yd(t.vectorValues);throw new Wt(wt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yd._jsonSchemaVersion="firestore/vectorValue/1.0",yd._jsonSchema={type:hi("string",yd._jsonSchemaVersion),vectorValues:hi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge=/^__.*__$/;class Oge{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Am(t,this.data,this.fieldMask,r,this.fieldTransforms):new jw(t,this.data,r,this.fieldTransforms)}}class zY{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Am(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function $Y(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hr(40011,{Ac:e})}}class lN{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new lN({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return J_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if($Y(this.Ac)&&Fge.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Dge{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||aN(t)}Cc(t,r,n,a=!1){return new lN({Ac:t,methodName:r,Dc:n,path:Ki.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gx(e){const t=e._freezeSettings(),r=aN(e._databaseId);return new Dge(e._databaseId,!!t.ignoreUndefinedProperties,r)}function MO(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);HO("Data must be an object, but it was:",i,n);const o=WY(n,i);let l,u;if(s.merge)l=new Bc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=yj(t,f,r);if(!i.contains(h))throw new Wt(wt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);YY(d,h)||d.push(h)}l=new Bc(d),u=i.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=i.fieldTransforms;return new Oge(new zl(o),l,u)}class cN extends Kx{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof cN}}function Rge(e,t,r){return new lN({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class UO extends Kx{_toFieldTransform(t){return new oY(t.path,new Ly)}isEqual(t){return t instanceof UO}}class QO extends Kx{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Rge(this,t,!0),n=this.vc.map(s=>qx(s,r)),a=new ux(n);return new oY(t.path,a)}isEqual(t){return t instanceof QO&&$0(this.vc,t.vc)}}function KY(e,t,r,n){const a=e.Cc(1,t,r);HO("Data must be an object, but it was:",a,n);const s=[],i=zl.empty();dm(n,(l,u)=>{const d=VO(t,l,r);u=va(u);const f=a.yc(d);if(u instanceof cN)s.push(d);else{const h=qx(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new Bc(s);return new zY(i,o,a.fieldTransforms)}function GY(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[yj(t,n,r)],l=[a];if(s.length%2!=0)throw new Wt(wt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(yj(t,s[h])),l.push(s[h+1]);const u=[],d=zl.empty();for(let h=o.length-1;h>=0;--h)if(!YY(u,o[h])){const p=o[h];let g=l[h];g=va(g);const v=i.yc(p);if(g instanceof cN)u.push(p);else{const b=qx(g,v);b!=null&&(u.push(p),d.set(p,b))}}const f=new Bc(u);return new zY(d,f,i.fieldTransforms)}function qY(e,t,r,n=!1){return qx(r,e.Cc(n?4:3,t))}function qx(e,t){if(XY(e=va(e)))return HO("Unsupported field value:",t,e),WY(e,t);if(e instanceof Kx)return function(n,a){if(!$Y(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let l=qx(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=va(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Nme(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=br.fromDate(n);return{timestampValue:G_(a.serializer,s)}}if(n instanceof br){const s=new br(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:G_(a.serializer,s)}}if(n instanceof bd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof _c)return{bytesValue:fY(a.serializer,n._byteString)};if(n instanceof ns){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof yd)return function(i,o){return{mapValue:{fields:{[HX]:{stringValue:VX},[V_]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return gO(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${K5(n)}`)}(e,t)}function WY(e,t){const r={};return RX(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dm(e,(n,a)=>{const s=qx(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function XY(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof br||e instanceof bd||e instanceof _c||e instanceof ns||e instanceof Kx||e instanceof yd)}function HO(e,t,r){if(!XY(r)||!OX(r)){const n=K5(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function yj(e,t,r){if((t=va(t))instanceof $x)return t._internalPath;if(typeof t=="string")return VO(e,t);throw J_("Field path arguments must be of type string or ",e,!1,void 0,r)}const Pge=new RegExp("[~\\*/\\[\\]]");function VO(e,t,r){if(t.search(Pge)>=0)throw J_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new $x(...t.split("."))._internalPath}catch{throw J_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function J_(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${n}`),i&&(l+=` in document ${a}`),l+=")"),new Wt(wt.INVALID_ARGUMENT,o+e+l)}function YY(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ns(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Lge(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(uN("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Lge extends zO{data(){return super.data()}}function uN(e,t){return typeof t=="string"?VO(e,t):t instanceof $x?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Wt(wt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $O{}class Rw extends $O{}function tr(e,t,...r){let n=[];t instanceof $O&&n.push(t),n=n.concat(r),function(s){const i=s.filter(l=>l instanceof dN).length,o=s.filter(l=>l instanceof Pw).length;if(i>1||i>0&&o>0)throw new Wt(wt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Pw extends Rw{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new Pw(t,r,n)}_apply(t){const r=this._parse(t);return eJ(t._query,r),new Td(t.firestore,t.converter,dj(t._query,r))}_parse(t){const r=Gx(t.firestore);return function(s,i,o,l,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Wt(wt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){O7(f,d);const g=[];for(const v of f)g.push(F7(l,s,v));h={arrayValue:{values:g}}}else h=F7(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||O7(f,d),h=qY(o,i,f,d==="in"||d==="not-in");return fi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function In(e,t,r){const n=t,a=uN("where",e);return Pw._create(a,n,r)}class dN extends $O{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new dN(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Nd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)eJ(i,l),i=dj(i,l)}(t._query,r),new Td(t.firestore,t.converter,dj(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class AN extends Rw{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new AN(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Wt(wt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Wt(wt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Py(s,i)}(t._query,this._field,this._direction);return new Td(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Xp(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Kr(e,t="asc"){const r=t,n=uN("orderBy",e);return AN._create(n,r)}class fN extends Rw{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new fN(t,r,n)}_apply(t){return new Td(t.firestore,t.converter,$_(t._query,this._limit,this._limitType))}}function wd(e){return G0e("limit",e),fN._create("limit",e,"F")}class hN extends Rw{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new hN(t,r,n)}_apply(t){const r=Mge(t,this.type,this._docOrFields,this._inclusive);return new Td(t.firestore,t.converter,function(a,s){return new Xp(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function ZY(...e){return hN._create("startAfter",e,!1)}function Mge(e,t,r,n){if(r[0]=va(r[0]),r[0]instanceof zO)return function(s,i,o,l,u){if(!l)throw new Wt(wt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of Lv(s))if(f.field.isKeyField())d.push(z_(i,l.key));else{const h=l.data.field(f.field);if(W5(h))throw new Wt(wt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new cx(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=Gx(e.firestore);return function(i,o,l,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Wt(wt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const v=d[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!pO(i)&&v.indexOf("/")!==-1)throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const b=i.path.child(Na.fromString(v));if(!gr.isDocumentKey(b))throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new gr(b);p.push(z_(o,y))}else{const b=qY(l,u,v);p.push(b)}}return new cx(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function F7(e,t,r){if(typeof(r=va(r))=="string"){if(r==="")throw new Wt(wt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pO(t)&&r.indexOf("/")!==-1)throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Na.fromString(r));if(!gr.isDocumentKey(n))throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return z_(e,new gr(n))}if(r instanceof ns)return z_(e,r._key);throw new Wt(wt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${K5(r)}.`)}function O7(e,t){if(!Array.isArray(e)||e.length===0)throw new Wt(wt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function eJ(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Wt(wt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wt(wt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class tJ{convertValue(t,r="none"){switch(X0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(W0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Hr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return dm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[V_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>zs(i.doubleValue));return new yd(r)}convertGeoPoint(t){return new bd(zs(t.latitude),zs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=X5(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Dy(t));default:return null}}convertTimestamp(t){const r=q0(t);return new br(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Na.fromString(t);oa(xY(n),9688,{name:t});const a=new ix(n.get(1),n.get(3)),s=new gr(n.popFirst(5));return a.isEqual(r)||Xf(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class yv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class D0 extends zO{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new oy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(uN("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(wt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=D0._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}D0._jsonSchemaVersion="firestore/documentSnapshot/1.0",D0._jsonSchema={type:hi("string",D0._jsonSchemaVersion),bundleSource:hi("string","DocumentSnapshot"),bundleName:hi("string"),bundle:hi("string")};class oy extends D0{data(t={}){return super.data(t)}}class R0{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new yv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new oy(this._firestore,this._userDataWriter,n.key,n,new yv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Wt(wt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new oy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new yv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new oy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new yv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Uge(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(wt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=R0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=$5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Uge(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(e){e=Yo(e,ns);const t=Yo(e.firestore,kd);return Tge(zx(t),e._key).then(r=>rJ(t,e,r))}R0._jsonSchemaVersion="firestore/querySnapshot/1.0",R0._jsonSchema={type:hi("string",R0._jsonSchemaVersion),bundleSource:hi("string","QuerySnapshot"),bundleName:hi("string"),bundle:hi("string")};class GO extends tJ{constructor(t){super(),this.firestore=t}convertBytes(t){return new _c(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ns(this.firestore,null,r)}}function Ss(e){e=Yo(e,Td);const t=Yo(e.firestore,kd),r=zx(t),n=new GO(t);return JY(e._query),Ige(r,e._query).then(a=>new R0(t,n,e,a))}function Ji(e,t,r){e=Yo(e,ns);const n=Yo(e.firestore,kd),a=KO(e.converter,t,r);return Xx(n,[MO(Gx(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,pl.none())])}function Ah(e,t,r,...n){e=Yo(e,ns);const a=Yo(e.firestore,kd),s=Gx(a);let i;return i=typeof(t=va(t))=="string"||t instanceof $x?GY(s,"updateDoc",e._key,t,r,n):KY(s,"updateDoc",e._key,t),Xx(a,[i.toMutation(e._key,pl.exists(!0))])}function Is(e){return Xx(Yo(e.firestore,kd),[new rN(e._key,pl.none())])}function Jn(e,t){const r=Yo(e.firestore,kd),n=hr(e),a=KO(e.converter,t);return Xx(r,[MO(Gx(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,pl.exists(!1))]).then(()=>n)}function vr(e,...t){var l,u,d;e=va(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||j7(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(j7(t[n])){const f=t[n];t[n]=(l=f.next)==null?void 0:l.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof ns)i=Yo(e.firestore,kd),o=Y5(e._key.path),s={next:f=>{t[n]&&t[n](rJ(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=Yo(e,Td);i=Yo(f.firestore,kd),o=f._query;const h=new GO(i);s={next:p=>{t[n]&&t[n](new R0(i,h,f,p))},error:t[n+1],complete:t[n+2]},JY(e._query)}return function(h,p,g,v){const b=new PO(v),y=new OO(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>IO(await Y_(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>jO(await Y_(h),y))}}(zx(i),o,a,s)}function Xx(e,t){return function(n,a){const s=new Lf;return n.asyncQueue.enqueueAndForget(async()=>vge(await Bge(n),a,s)),s.promise}(zx(e),t)}function rJ(e,t,r){const n=r.docs.get(t._key),a=new GO(e);return new D0(e,a,t._key,n,new yv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Gx(t)}set(t,r,n){this._verifyNotCommitted();const a=wB(t,this._firestore),s=KO(a.converter,r,n),i=MO(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,pl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=wB(t,this._firestore);let i;return i=typeof(r=va(r))=="string"||r instanceof $x?GY(this._dataReader,"WriteBatch.update",s._key,r,n,a):KY(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,pl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=wB(t,this._firestore);return this._mutations=this._mutations.concat(new rN(r._key,pl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(wt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wB(e,t){if((e=va(e)).firestore!==t)throw new Wt(wt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Z0(){return new UO("serverTimestamp")}function aJ(...e){return new QO("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(e){return zx(e=Yo(e,kd)),new nJ(e,t=>Xx(e,t))}(function(t,r=!0){(function(a){Ux=a})(qp),K0(new Gf("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new kd(new M0e(n.getProvider("auth-internal")),new H0e(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Wt(wt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ix(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Tu(PU,LU,t),Tu(PU,LU,"esm2020")})();const Qge=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:tJ,Bytes:_c,CollectionReference:Mf,DocumentReference:ns,DocumentSnapshot:D0,FieldPath:$x,FieldValue:Kx,Firestore:kd,FirestoreError:Wt,GeoPoint:bd,Query:Td,QueryCompositeFilterConstraint:dN,QueryConstraint:Rw,QueryDocumentSnapshot:oy,QueryFieldFilterConstraint:Pw,QueryLimitConstraint:fN,QueryOrderByConstraint:AN,QuerySnapshot:R0,QueryStartAtConstraint:hN,SnapshotMetadata:yv,Timestamp:br,VectorValue:yd,WriteBatch:nJ,_AutoId:$5,_ByteString:Yi,_DatabaseId:ix,_DocumentKey:gr,_EmptyAuthCredentialsProvider:IX,_FieldPath:Ki,_cast:Yo,_logWarn:jp,_validateIsNotUsedTogether:FX,addDoc:Jn,arrayUnion:aJ,collection:Ut,connectFirestoreEmulator:VY,deleteDoc:Is,doc:hr,ensureFirestoreConfigured:zx,executeWrite:Xx,getDoc:Wx,getDocs:Ss,getFirestore:LO,limit:wd,onSnapshot:vr,orderBy:Kr,query:tr,serverTimestamp:Z0,setDoc:Ji,startAfter:ZY,updateDoc:Ah,where:In,writeBatch:mN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sJ="firebasestorage.googleapis.com",iJ="storageBucket",Hge=120*1e3,Vge=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Bd{constructor(t,r,n=0){super(EB(t),`Firebase Storage: ${r} (${EB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,js.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return EB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bs;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bs||(Bs={}));function EB(e){return"storage/"+e}function qO(){const e="An unknown error occurred, please check the error payload for server response.";return new js(Bs.UNKNOWN,e)}function zge(e){return new js(Bs.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function $ge(e){return new js(Bs.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kge(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new js(Bs.UNAUTHENTICATED,e)}function Gge(){return new js(Bs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qge(e){return new js(Bs.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Wge(){return new js(Bs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Xge(){return new js(Bs.CANCELED,"User canceled the upload/download.")}function Yge(e){return new js(Bs.INVALID_URL,"Invalid URL '"+e+"'.")}function Jge(e){return new js(Bs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Zge(){return new js(Bs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iJ+"' property when initializing the app?")}function eve(){return new js(Bs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tve(){return new js(Bs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rve(e){return new js(Bs.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wj(e){return new js(Bs.INVALID_ARGUMENT,e)}function oJ(){return new js(Bs.APP_DELETED,"The Firebase app was deleted.")}function nve(e){return new js(Bs.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ly(e,t){return new js(Bs.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ob(e){throw new js(Bs.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=Tc.makeFromUrl(t,r)}catch{return new Tc(t,"")}if(n.path==="")return n;throw Jge(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),l={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},v=r===sJ?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${v}/${a}/${b}`,"i"),S=[{regex:o,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<S.length;k++){const B=S[k],F=B.regex.exec(t);if(F){const w=F[B.indices.bucket];let C=F[B.indices.path];C||(C=""),n=new Tc(w,C),B.postModify(n);break}}if(n==null)throw Yge(t);return n}}class ave{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sve(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function l(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,l())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(l()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let S;o===1?(o=2,S=0):S=(n+Math.random())*1e3,f(S)}let g=!1;function v(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,v(!0)},r),v}function ive(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ove(e){return e!==void 0}function lve(e){return typeof e=="object"&&!Array.isArray(e)}function WO(e){return typeof e=="string"||e instanceof String}function D7(e){return XO()&&e instanceof Blob}function XO(){return typeof Blob<"u"}function R7(e,t,r,n){if(n<t)throw wj(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw wj(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function lJ(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var hp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(hp||(hp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cve(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(t,r,n,a,s,i,o,l,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new yE(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===hp.NO_ERROR,l=s.getStatus();if(!o||cve(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===hp.ABORT;n(!1,new yE(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new yE(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());ove(l)?s(l):s()}catch(l){i(l)}else if(o!==null){const l=qO();l.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,l)):i(l)}else if(a.canceled){const l=this.appDelete_?oJ():Xge();i(l)}else{const l=Wge();i(l)}};this.canceled_?r(!1,new yE(!1,null,!0)):this.backoffId_=sve(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&ive(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yE{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function dve(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Ave(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function fve(e,t){t&&(e["X-Firebase-GMPID"]=t)}function hve(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function mve(e,t,r,n,a,s,i=!0,o=!1){const l=lJ(e.urlParams),u=e.url+l,d=Object.assign({},e.headers);return fve(d,t),dve(d,r),Ave(d,s),hve(d,n),new uve(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pve(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gve(...e){const t=pve();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(XO())return new Blob(e);throw new js(Bs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vve(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xve(e){if(typeof atob>"u")throw rve("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class CB{constructor(t,r){this.data=t,this.contentType=r||null}}function bve(e,t){switch(e){case SA.RAW:return new CB(cJ(t));case SA.BASE64:case SA.BASE64URL:return new CB(uJ(e,t));case SA.DATA_URL:return new CB(wve(t),Eve(t))}throw qO()}function cJ(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function yve(e){let t;try{t=decodeURIComponent(e)}catch{throw ly(SA.DATA_URL,"Malformed data URL.")}return cJ(t)}function uJ(e,t){switch(e){case SA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw ly(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case SA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw ly(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=xve(t)}catch(a){throw a.message.includes("polyfill")?a:ly(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class dJ{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw ly(SA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Cve(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function wve(e){const t=new dJ(e);return t.base64?uJ(SA.BASE64,t.rest):yve(t.rest)}function Eve(e){return new dJ(e).contentType}function Cve(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(t,r){let n=0,a="";D7(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(D7(this.data_)){const n=this.data_,a=vve(n,t,r);return a===null?null:new b0(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new b0(n,!0)}}static getBlob(...t){if(XO()){const r=t.map(n=>n instanceof b0?n.data_:n);return new b0(gve.apply(null,r))}else{const r=t.map(i=>WO(i)?bve(SA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new b0(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(e){let t;try{t=JSON.parse(e)}catch{return null}return lve(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ve(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Sve(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function fJ(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nve(e,t){return t}class ll{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||Nve}}let wE=null;function kve(e){return!WO(e)||e.length<2?e:fJ(e)}function hJ(){if(wE)return wE;const e=[];e.push(new ll("bucket")),e.push(new ll("generation")),e.push(new ll("metageneration")),e.push(new ll("name","fullPath",!0));function t(s,i){return kve(i)}const r=new ll("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new ll("size");return a.xform=n,e.push(a),e.push(new ll("timeCreated")),e.push(new ll("updated")),e.push(new ll("md5Hash",null,!0)),e.push(new ll("cacheControl",null,!0)),e.push(new ll("contentDisposition",null,!0)),e.push(new ll("contentEncoding",null,!0)),e.push(new ll("contentLanguage",null,!0)),e.push(new ll("contentType",null,!0)),e.push(new ll("metadata","customMetadata",!0)),wE=e,wE}function Bve(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new Tc(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function Tve(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return Bve(n,e),n}function mJ(e,t,r){const n=AJ(t);return n===null?null:Tve(e,n,r)}function Ive(e,t,r,n){const a=AJ(t);if(a===null||!WO(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=YO(h,r,n),g=lJ({alt:"media",token:u});return p+g})[0]}function jve(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}class pJ{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(e){if(!e)throw qO()}function Fve(e,t){function r(n,a){const s=mJ(e,a,t);return gJ(s!==null),s}return r}function Ove(e,t){function r(n,a){const s=mJ(e,a,t);return gJ(s!==null),Ive(s,a,e.host,e._protocol)}return r}function vJ(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Gge():a=Kge():r.getStatus()===402?a=$ge(e.bucket):r.getStatus()===403?a=qge(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function Dve(e){const t=vJ(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=zge(e.path)),s.serverResponse=a.serverResponse,s}return r}function Rve(e,t,r){const n=t.fullServerUrl(),a=YO(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new pJ(a,s,Ove(e,r),i);return o.errorHandler=Dve(t),o}function Pve(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Lve(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=Pve(null,t)),n}function Mve(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let S="";for(let k=0;k<2;k++)S=S+Math.random().toString().slice(2);return S}const l=o();i["Content-Type"]="multipart/related; boundary="+l;const u=Lve(t,n,a),d=jve(u,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=b0.getBlob(f,n,h);if(p===null)throw eve();const g={name:u.fullPath},v=YO(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,_=new pJ(v,b,Fve(e,r),y);return _.urlParams=g,_.headers=i,_.body=p.uploadData(),_.errorHandler=vJ(t),_}class Uve{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw ob("cannot .send() more than once");if(uh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ob("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ob("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ob("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ob("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Qve extends Uve{initXhr(){this.xhr_.responseType="text"}}function xJ(){return new Qve}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t,r){this._service=t,r instanceof Tc?this._location=r:this._location=Tc.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Op(t,r)}get root(){const t=new Tc(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fJ(this._location.path)}get storage(){return this._service}get parent(){const t=_ve(this._location.path);if(t===null)return null;const r=new Tc(this._location.bucket,t);return new Op(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw nve(t)}}function Hve(e,t,r){e._throwIfRoot("uploadBytes");const n=Mve(e.storage,e._location,hJ(),new b0(t,!0),r);return e.storage.makeRequestWithTokens(n,xJ).then(a=>({metadata:a,ref:e}))}function Vve(e){e._throwIfRoot("getDownloadURL");const t=Rve(e.storage,e._location,hJ());return e.storage.makeRequestWithTokens(t,xJ).then(r=>{if(r===null)throw tve();return r})}function zve(e,t){const r=Sve(e._location.path,t),n=new Tc(e._location.bucket,r);return new Op(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ve(e){return/^[A-Za-z]+:\/\//.test(e)}function Kve(e,t){return new Op(e,t)}function bJ(e,t){if(e instanceof JO){const r=e;if(r._bucket==null)throw Zge();const n=new Op(r,r._bucket);return t!=null?bJ(n,t):n}else return t!==void 0?zve(e,t):e}function Gve(e,t){if(t&&$ve(t)){if(e instanceof JO)return Kve(e,t);throw wj("To use ref(service, url), the first argument must be a Storage instance.")}else return bJ(e,t)}function P7(e,t){const r=t==null?void 0:t[iJ];return r==null?null:Tc.makeFromBucketSpec(r,e)}function qve(e,t,r,n={}){e.host=`${t}:${r}`;const a=uh(t);a&&(L5(`https://${e.host}/b`),M5("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:PW(s,e.app.options.projectId))}class JO{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=sJ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Hge,this._maxUploadRetryTime=Vge,this._requests=new Set,a!=null?this._bucket=Tc.makeFromBucketSpec(a,this._host):this._bucket=P7(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Tc.makeFromBucketSpec(this._url,t):this._bucket=P7(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){R7("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){R7("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Cc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Op(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new ave(oJ());{const i=mve(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const L7="@firebase/storage",M7="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yJ="storage";function ZO(e,t,r){return e=va(e),Hve(e,t,r)}function eD(e){return e=va(e),Vve(e)}function tD(e,t){return e=va(e),Gve(e,t)}function rD(e=U5(),t){e=va(e);const n=Nw(e,yJ).getImmediate({identifier:t}),a=Z6("storage");return a&&Wve(n,...a),n}function Wve(e,t,r,n={}){qve(e,t,r,n)}function Xve(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new JO(r,n,a,t,qp)}function Yve(){K0(new Gf(yJ,Xve,"PUBLIC").setMultipleInstances(!0)),Tu(L7,M7,""),Tu(L7,M7,"esm2020")}Yve();const Jve={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.appspot.com",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},nD=rO(Jve),Lw=wX(nD),Rr=LO(nD),wJ=rD(nD),EJ=Object.freeze(Object.defineProperty({__proto__:null,auth:Lw,db:Rr,storage:wJ},Symbol.toStringTag,{value:"Module"})),Zve=async(e,t)=>{try{return(await yhe(Lw,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},_B=async()=>{try{await Che(Lw)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},exe=async e=>{try{await bhe(Lw,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},CJ=async e=>{try{const t=hr(Rr,"usuarios",e),r=await Wx(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var er=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(er||{}),un=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(un||{}),Zm=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Zm||{});const txe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),pi="w-6 h-6",pN="w-24 h-24",aD=()=>c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),rxe=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),nxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),axe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Lb=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Mb=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),_J=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),sxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pN,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),ixe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),oxe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),lxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),cxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),U7=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),EE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),SB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),CE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),NB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Q7=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),uxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),dxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Axe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),fxe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),H7=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),hxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),kB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),mxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:pi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),pxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),V7=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:pi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),gxe=[{id:er.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(sxe,{})},{id:er.PROFESORADO,label:"Profesorado",icon:c.jsx(ixe,{})},{id:er.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(oxe,{})},{id:er.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(lxe,{})}],vxe={[er.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(cxe,{})},{name:"Administración",icon:c.jsx(fxe,{})},{name:"Seguimiento Curricular",icon:c.jsx(pxe,{})},{name:"Acompañamiento docente",icon:c.jsx(Axe,{})},{name:"Análisis Taxonómico",icon:c.jsx(V7,{})},{name:"Interdisciplinario",icon:c.jsx(kB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(U7,{})},{name:"Crear horarios",icon:c.jsx(SB,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(CE,{})},{name:"Inclusión",icon:c.jsx(H7,{})},{name:"Calendario Académico",icon:c.jsx(EE,{})},{name:"Muro de Anuncios",icon:c.jsx(Lb,{})},{name:"Mensajería Interna",icon:c.jsx(Mb,{})},{name:"Generador de Actas",icon:c.jsx(NB,{})}],[er.PROFESORADO]:[{name:"Planificación",icon:c.jsx(Q7,{})},{name:"Mis Acompañamientos",icon:c.jsx(hxe,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(uxe,{})},{name:"Análisis Taxonómico",icon:c.jsx(V7,{})},{name:"Interdisciplinario",icon:c.jsx(kB,{})},{name:"Inclusión",icon:c.jsx(H7,{})},{name:"Actividades Remotas",icon:c.jsx(dxe,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(NB,{})},{name:"Evaluaciones Formativas",icon:c.jsx(CE,{})},{name:"Calendario Académico",icon:c.jsx(EE,{})},{name:"Muro de Anuncios",icon:c.jsx(Lb,{})},{name:"Mensajería Interna",icon:c.jsx(Mb,{})},{name:"Generador de Actas",icon:c.jsx(U7,{})}],[er.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(CE,{})},{name:"Asistencia Dual",icon:c.jsx(SB,{})},{name:"Pañol",icon:c.jsx(mxe,{})},{name:"Gestión de Empresas",icon:c.jsx(txe,{})},{name:"Calendario Académico",icon:c.jsx(EE,{})},{name:"Muro de Anuncios",icon:c.jsx(Lb,{})},{name:"Mensajería Interna",icon:c.jsx(Mb,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Generador de Actas",icon:c.jsx(NB,{})}],[er.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(Q7,{})},{name:"Evaluación Formativa",icon:c.jsx(CE,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(kB,{})},{name:"Asistencia a Empresa",icon:c.jsx(SB,{})},{name:"Calendario Académico",icon:c.jsx(EE,{})},{name:"Muro de Anuncios",icon:c.jsx(Lb,{})},{name:"Mensajería Interna",icon:c.jsx(Mb,{})}]},z7=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],_E=["Pendiente","En Proceso","Cumplida"],wv=["1º Medio","2º Medio","3º Medio","4º Medio"],qi=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Cs=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Ej=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],e_=["Lunes","Martes","Miércoles","Jueves","Viernes"],Cj=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],xxe={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},Uv={[un.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[un.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[un.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[un.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},bxe=Object.values(Zm),BB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],TB=["Vinculado","Desvinculado","En proceso","Empresa"],mp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],yxe=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],Z_=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],cy=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],SJ=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],SE=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],wxe=["Mecánica Industrial","Mecánica Automotriz"],Exe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],Cxe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},_xe=["Pasantía","Visita","Certificación","Formación en empresa"],Sxe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},Nxe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},kxe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),l("forgot_sent")},f=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(aD,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},NE=({trigger:e,children:t,onOpen:r})=>{const[n,a]=j.useState(!1),s=j.useRef(null),i=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return j.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("div",{onClick:i,children:e}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},$7="usuariosLiceo",Bxe=({user:e,onClose:t,onSave:r})=>{const[n,a]=j.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...e,...n};try{const u=localStorage.getItem($7);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=l:d.push(l),localStorage.setItem($7,JSON.stringify(d)),r(l),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},K7="usuariosLiceo",Txe=({user:e,onClose:t,onSave:r})=>{const[n,a]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==s){l("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(K7);let p=h?JSON.parse(h):[];const g=p.findIndex(v=>v.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(K7,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ixe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jxe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),G7=e=>{const t=jxe(e);return t.charAt(0).toUpperCase()+t.slice(1)},NJ=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Fxe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oxe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dxe=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},l)=>j.createElement("svg",{ref:l,...Oxe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:NJ("lucide",a),...!s&&!Fxe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>j.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=(e,t)=>{const r=j.forwardRef(({className:n,...a},s)=>j.createElement(Dxe,{ref:s,iconNode:t,className:NJ(`lucide-${Ixe(G7(e))}`,`lucide-${e}`,n),...a}));return r.displayName=G7(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rxe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],Pxe=fn("bell-ring",Rxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lxe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],_j=fn("book-open",Lxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mxe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Uxe=fn("briefcase",Mxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qxe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Hxe=fn("building",Qxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vxe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],zxe=fn("calendar-check",Vxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $xe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Kxe=fn("calendar",$xe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gxe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],qxe=fn("chart-column",Gxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wxe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xxe=fn("chevron-left",Wxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yxe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Jxe=fn("chevron-right",Yxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zxe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Sj=fn("circle-check",Zxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],t1e=fn("clipboard-check",e1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],n1e=fn("clipboard-list",r1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kJ=fn("clock",a1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],BJ=fn("download",s1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],o1e=fn("funnel",i1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],q7=fn("graduation-cap",l1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],u1e=fn("hash",c1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],A1e=fn("info",d1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],h1e=fn("layout-dashboard",f1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ub=fn("loader-circle",m1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],g1e=fn("mail",p1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nj=fn("map-pin",v1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],b1e=fn("megaphone",x1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],w1e=fn("message-square",y1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],TJ=fn("pencil",E1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1e=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],_1e=fn("percent",C1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],IJ=fn("plus",S1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1e=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],k1e=fn("puzzle",N1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1e=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],T1e=fn("route",B1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sD=fn("save",I1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],F1e=fn("search",j1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],kj=fn("square-plus",O1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],R1e=fn("star",D1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],L1e=fn("target",P1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Yx=fn("trash-2",M1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Q1e=fn("upload",U1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],W7=fn("user",H1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],t_=fn("users",V1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],$1e=fn("video",z1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X7=fn("x",K1e);async function G1e(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Z0()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await Jn(Ut(Rr,"notificaciones"),t)).id}function q1e(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(l=>{l.id&&(i.has(l.id)||i.set(l.id,l))});const o=Array.from(i.values()).sort((l,u)=>{var h,p;const d=(h=l.createdAt)!=null&&h.toDate?l.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=tr(Ut(Rr,"notificaciones"),In("docenteEmailLower","==",e.email.toLowerCase()),Kr("createdAt","desc"));r.push(vr(i,o=>{n=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}if(e.nombreCompleto){const i=tr(Ut(Rr,"notificaciones"),In("docenteNombre","==",e.nombreCompleto),Kr("createdAt","desc"));r.push(vr(i,o=>{a=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}return()=>r.forEach(i=>i())}async function W1e(e){const t=hr(Rr,"notificaciones",e);await Ah(t,{leida:!0})}async function X1e(e){const t=hr(Rr,"notificaciones",e);await Is(t)}const Y7="anunciosMuro",J7="mensajesInternos",Z7="lir-read-status",Y1e=({user:e})=>{if(e.fotoUrl)return c.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},J1e=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=j.useState([]),[f,h]=j.useState([]),[p,g]=j.useState(!1),[v,b]=j.useState(!1),[y,_]=j.useState([]),S=j.useCallback(()=>{try{const N=localStorage.getItem(`${Z7}-${e.id}`);return N?JSON.parse(N):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),k=j.useCallback(N=>{try{localStorage.setItem(`${Z7}-${e.id}`,JSON.stringify(N))}catch(P){console.error("Failed to set read status:",P)}},[e.id]);j.useEffect(()=>{const N=JSON.parse(localStorage.getItem(Y7)||"[]"),P=S();d(N.filter(T=>!P.announcements.includes(T.id)));const D=JSON.parse(localStorage.getItem(J7)||"[]");h(D.filter(T=>T.para===e.email).sort((T,U)=>new Date(U.fecha).getTime()-new Date(T.fecha).getTime()).slice(0,5))},[e.id,S,o]),j.useEffect(()=>{if(!(e!=null&&e.email))return;const N=q1e({email:e.email,nombreCompleto:e.nombreCompleto},P=>{const D=P.filter(T=>T.tipo&&(T.tipo.toLowerCase()==="pie"||T.tipo==="nueva_intervencion"));_(D)});return()=>N()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const B=()=>{const N=S(),P=JSON.parse(localStorage.getItem(Y7)||"[]").map(D=>D.id);N.announcements=P,k(N),d([])},F=()=>{const N=S(),D=JSON.parse(localStorage.getItem(J7)||"[]").filter(T=>T.para===e.email).map(T=>T.id);N.messages=[...new Set([...N.messages,...D])],k(N),l()},w=y.filter(N=>!N.leida).length,C=N=>{var P;try{const D=(P=N.createdAt)!=null&&P.toDate?N.createdAt.toDate():new Date(N.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(nxe,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(axe,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),c.jsx(NE,{onOpen:B,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[c.jsx(Lb,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(N=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:N.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:N.mensaje})]},N.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(NE,{trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[c.jsx(k1e,{className:"w-5 h-5"}),w>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:w})]}),children:c.jsxs("div",{className:"p-2 w-80",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),c.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&c.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(N=>c.jsx("li",{className:"p-2 text-sm",children:c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:N.titulo}),c.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:N.mensaje}),N.estudianteNombre&&c.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",c.jsx("b",{children:N.estudianteNombre})]}),c.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:C(N)})]}),c.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!N.leida&&c.jsx("button",{onClick:()=>N.id&&W1e(N.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),c.jsx("button",{onClick:()=>N.id&&X1e(N.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},N.id))]})]})}),c.jsx(NE,{onOpen:F,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(Mb,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(N=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",N.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:N.asunto})]},N.id)),f.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(NE,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(Y1e,{user:e})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&c.jsx("li",{children:c.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&c.jsx(Bxe,{user:e,onClose:()=>g(!1),onSave:n}),v&&c.jsx(Txe,{user:e,onClose:()=>b(!1),onSave:n})]})},Z1e={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.appspot.com",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},iD=fU().length?fU()[0]:rO(Z1e),jt=LO(iD),ebe=wX(iD),tbe=rD(iD),Mw="reemplazos_docentes",rbe="usuarios",oD=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},nbe=e=>{const t=e.data();return{id:e.id,...t}},abe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:br.fromDate(new Date),fechaActualizacion:br.fromDate(new Date)};return(await Jn(Ut(jt,Mw),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},sbe=async(e,t)=>{try{const r=hr(jt,Mw,e),n=await Wx(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Is(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},ibe=(e,t,r=50)=>{try{const n=tr(Ut(jt,Mw),In("userId","==",e),Kr("diaAusencia","desc"),wd(r));return vr(n,a=>{const s=a.docs.map(oD);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},obe=e=>{try{const t=tr(Ut(jt,rbe),In("profile","==",er.PROFESORADO));return vr(t,n=>{const a=n.docs.map(nbe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},lbe=async e=>{try{const t=tr(Ut(jt,Mw),In("userId","==",e)),n=(await Ss(t)).docs.map(oD),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},cbe=async(e,t)=>{try{if(!t.trim())return[];const r=tr(Ut(jt,Mw),In("userId","==",e),Kr("diaAusencia","desc"),wd(100)),a=(await Ss(r)).docs.map(oD),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},ube=Array.from({length:12},(e,t)=>t+1),e9={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},dbe=e=>{const[t,r]=j.useState([]),[n,a]=j.useState(!0),[s,i]=j.useState(null);j.useEffect(()=>e?ibe(e,f=>{r(f),a(!1)}):void 0,[e]);const o=j.useCallback(async d=>{try{return i(null),await abe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),l=j.useCallback(async d=>{try{i(null),await sbe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=j.useCallback(async d=>{try{return i(null),d.trim()?await cbe(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:l,search:u}},Abe=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0);j.useEffect(()=>obe(i=>{t(i),n(!1)}),[]);const a=j.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Mg=({label:e,icon:t,children:r})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),c.jsxs("div",{className:"relative",children:[t&&c.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),fbe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",hbe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",mbe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",kE=({title:e,value:t,icon:r})=>c.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[c.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:r}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),pbe=({userId:e})=>{const[t,r]=j.useState(null),[n,a]=j.useState(!1),s=j.useCallback(async()=>{try{a(!0);const i=await lbe(e);r(i)}catch(i){console.error(i)}finally{a(!1)}},[e]);return j.useEffect(()=>{e&&s()},[e,s]),n?c.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:c.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[c.jsx(Ub,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):t?c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx(kE,{title:"Total",value:t.totalReemplazos,icon:c.jsx(Pxe,{className:"h-6 w-6"})}),c.jsx(kE,{title:"Realizadas",value:t.horasRealizadas,icon:c.jsx(Sj,{className:"h-6 w-6"})}),c.jsx(kE,{title:"Cubiertas",value:t.horasCubiertas,icon:c.jsx(t1e,{className:"h-6 w-6"})}),c.jsx(kE,{title:"Efectividad",value:`${t.porcentajeRealizadas.toFixed(1)}%`,icon:c.jsx(_1e,{className:"h-6 w-6"})})]}):null},gbe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=dbe(t),{profesorNames:l,loading:u}=Abe(),[d,f]=j.useState(e9),[h,p]=j.useState(""),[g,v]=j.useState([]),[b,y]=j.useState(null),[_,S]=j.useState(!1),[k,B]=j.useState(!1);j.useEffect(()=>{(async()=>{if(!h.trim())return v(r);B(!0);try{const T=await s(h);v(T)}finally{B(!1)}})()},[r,h,s]);const F=j.useCallback(D=>{const{name:T,value:U}=D.target;f(R=>({...R,[T]:U}))},[]),w=j.useCallback(D=>{f(T=>{const R=T.bloquesAfectados.includes(D)?T.bloquesAfectados.filter(X=>X!==D):[...T.bloquesAfectados,D].sort((X,q)=>X-q);return{...T,bloquesAfectados:R}})},[]),C=j.useCallback(async D=>{D.preventDefault(),y(null),S(!0);const{docenteAusente:T,asignaturaAusente:U,curso:R,diaAusencia:X,bloquesAfectados:q,docenteReemplazante:Z,asignaturaReemplazante:H}=d;if(!T||!U||!R||!X||!Z||!H||q.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),S(!1);return}if(T===Z){y("El docente ausente y el reemplazante no pueden ser la misma persona."),S(!1);return}try{const V=U.trim().toLowerCase()===H.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",K={...d,resultado:V};await n(K),f(e9);const ne=document.createElement("div");ne.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",ne.textContent=V==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(ne),setTimeout(()=>document.body.contains(ne)&&document.body.removeChild(ne),2500)}catch(V){console.error(V),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{S(!1)}},[d,n]),N=j.useCallback(async D=>{if(window.confirm("¿Eliminar este registro?"))try{await a(D)}catch(T){console.error(T),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),P="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!e||!e.email&&!e.id?c.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),c.jsx(pbe,{userId:t})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[c.jsx(Ub,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):c.jsxs("form",{onSubmit:C,className:"space-y-8",children:[c.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(t_,{className:"h-5 w-5 text-slate-400"}),c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),c.jsx(Mg,{label:"Nombre",icon:c.jsx(q7,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:F,className:P,required:!0,disabled:_,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Mg,{label:"Asignatura",icon:c.jsx(_j,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:F,className:P,required:!0,disabled:_,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Mg,{label:"Curso",icon:c.jsx(t_,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"curso",value:d.curso,onChange:F,className:P,required:!0,disabled:_,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Cs.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Mg,{label:"Día de ausencia",icon:c.jsx(Kxe,{className:"h-5 w-5"}),children:c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:F,className:P.replace("px-10","px-10"),required:!0,disabled:_})}),c.jsxs("div",{children:[c.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[c.jsx(kJ,{className:"h-5 w-5 text-slate-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),c.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:ube.map(D=>{const T=d.bloquesAfectados.includes(D);return c.jsx("button",{type:"button",onClick:()=>w(D),disabled:_,className:`${fbe} ${T?hbe:mbe}`,"aria-pressed":T,children:D},D)})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(t_,{className:"h-5 w-5 text-slate-400"}),c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),c.jsx(Mg,{label:"Nombre",icon:c.jsx(q7,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:F,className:P,required:!0,disabled:_,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})}),c.jsx(Mg,{label:"Asignatura",icon:c.jsx(_j,{className:"h-5 w-5"}),children:c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:F,className:P,required:!0,disabled:_,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(D=>c.jsx("option",{value:D,children:D},D))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[c.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[c.jsx(Sj,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(b||o)&&c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:b||o}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:_||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:_?c.jsxs(c.Fragment,{children:[c.jsx(Ub,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):c.jsxs(c.Fragment,{children:[c.jsx(sD,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"relative w-full max-w-md",children:[c.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:k?c.jsx(Ub,{className:"h-5 w-5 animate-spin"}):c.jsx(F1e,{className:"h-5 w-5"})}),c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:D=>p(D.target.value),className:P,disabled:k})]})]}),i?c.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[c.jsx(Ub,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(D=>c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:D},D))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(D=>c.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(D.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.curso}),c.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteAusente,c.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaAusente})]}),c.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteReemplazante,c.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaReemplazante})]}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.bloquesAfectados.join(", ")}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${D.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[c.jsx(Sj,{className:"h-4 w-4"}),D.resultado]})}),c.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:c.jsx("button",{onClick:()=>N(D.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:_,children:c.jsx(Yx,{className:"h-4 w-4"})})})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&c.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},vbe=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=Ut(Rr,"reemplazos"),r=tr(t,Kr("fecha","desc"));return vr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},xbe=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=Ut(Rr,"acompanamientos"),r=tr(t,Kr("fecha","desc"));return vr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},bbe=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=Ut(Rr,"calendar_events"),r=tr(t,Kr("date","asc"));return vr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},AA=({title:e,value:t,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),$m=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=j.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=j.useMemo(()=>Math.max(...s,1),[s]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},ybe=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState(!0),[l,u]=j.useState(null);return j.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=vbe(b=>{t(b),h()}),g=xbe(b=>{n(b),h()}),v=bbe(b=>{s(b),h()});return()=>{p(),g(),v()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:l}},wbe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=ybe(),[i,o]=j.useState(cy);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),j.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):cy)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(cy)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=j.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(B=>B.resultado==="Hora realizada").length,v=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(B,F)=>B.reduce((w,C)=>{const N=C[F];return typeof N=="string"&&(w[N]=(w[N]||0)+1),w},{}),_=y(t,"docenteAusente"),S=y(t,"docenteReemplazante"),k=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:v,tasaCobertura:b,inasistenciasPorDocente:Object.entries(_).map(([B,F])=>({label:B,value:F})),reemplazosPorDocente:Object.entries(S).map(([B,F])=>({label:B,value:F})),inasistenciasPorCurso:Object.entries(k).map(([B,F])=>({label:B,value:F})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:v}]}},[t]),u=j.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(F=>{F.criteria.forEach(w=>{g.set(w.name,F.domain)})});let v=0,b=0;const y={},_={};r.forEach(F=>{y[F.docente]||(y[F.docente]={total:0,count:0}),Object.entries(F.rubricaResultados).forEach(([w,C])=>{v+=C,b++,y[F.docente].total+=C,y[F.docente].count++;const N=g.get(w);N&&(_[N]||(_[N]={total:0,count:0}),_[N].total+=C,_[N].count++)})});const S=b>0?(v/b).toFixed(2):"N/A",k=Object.entries(y).map(([F,w])=>({label:F,value:w.count>0?(w.total/w.count).toFixed(2):0})),B=Object.entries(_).map(([F,w])=>({label:F,value:w.count>0?(w.total/w.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:S,desempenoPorDocente:k,desempenoPorDominio:B}},[r,i]),d=j.useMemo(()=>{const p={[un.EVALUACION]:0,[un.ACTO]:0,[un.ACTIVIDAD_FOCALIZADA]:0,[un.SALIDA_PEDAGOGICA]:0};for(const v of n)p.hasOwnProperty(v.type)&&p[v.type]++;const g=Object.entries(p).map(([v,b])=>({label:Uv[v].label,value:b}));return{totalEvaluaciones:p[un.EVALUACION],totalActos:p[un.ACTO],totalActividadesFocalizadas:p[un.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[un.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(AA,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),c.jsx(AA,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),c.jsx(AA,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),c.jsx(AA,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx($m,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),c.jsx($m,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),c.jsx($m,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),c.jsx($m,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(AA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),c.jsx(AA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx($m,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),c.jsx($m,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(AA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),c.jsx(AA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),c.jsx(AA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),c.jsx(AA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx($m,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var v,b;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((v=Uv[p.type])==null?void 0:v.color)||"bg-gray-100 text-gray-800"}`,children:((b=Uv[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var t9;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(t9||(t9={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r9;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(r9||(r9={}));var n9;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(n9||(n9={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=["user","model","function","system"];var s9;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(s9||(s9={}));var i9;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(i9||(i9={}));var o9;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(o9||(o9={}));var l9;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(l9||(l9={}));var uy;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(uy||(uy={}));var c9;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(c9||(c9={}));var u9;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(u9||(u9={}));var d9;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(d9||(d9={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Ug extends qo{constructor(t,r){super(t),this.response=r}}class jJ extends qo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class P0 extends qo{}class FJ extends qo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ebe="https://generativelanguage.googleapis.com",Cbe="v1beta",_be="0.24.1",Sbe="genai-js";var Dp;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Dp||(Dp={}));class Nbe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Cbe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Ebe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function kbe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Sbe}/${_be}`),t.join(" ")}async function Bbe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",kbe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new P0(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new P0(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new P0(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function Tbe(e,t,r,n,a,s){const i=new Nbe(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},Obe(s)),{method:"POST",headers:await Bbe(i),body:a})}}async function Uw(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:l}=await Tbe(e,t,r,n,a,s);return Ibe(o,l,i)}async function Ibe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){jbe(a,e)}return n.ok||await Fbe(n,e),n}function jbe(e,t){let r=e;throw r.name==="AbortError"?(r=new FJ(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof jJ||e instanceof P0||(r=new qo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function Fbe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new jJ(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function Obe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),r_(e.candidates[0]))throw new Ug(`${A0(e)}`,e);return Dbe(e)}else if(e.promptFeedback)throw new Ug(`Text not available. ${A0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),r_(e.candidates[0]))throw new Ug(`${A0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),A9(e)[0]}else if(e.promptFeedback)throw new Ug(`Function call not available. ${A0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),r_(e.candidates[0]))throw new Ug(`${A0(e)}`,e);return A9(e)}else if(e.promptFeedback)throw new Ug(`Function call not available. ${A0(e)}`,e)},e}function Dbe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function A9(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const Rbe=[uy.RECITATION,uy.SAFETY,uy.LANGUAGE];function r_(e){return!!e.finishReason&&Rbe.includes(e.finishReason)}function A0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];r_(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function Uy(e){return this instanceof Uy?(this.v=e,this):new Uy(e)}function Pbe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,v){s.push([h,p,g,v])>1||o(h,p)})})}function o(h,p){try{l(n[h](p))}catch(g){f(s[0][3],g)}}function l(h){h.value instanceof Uy?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Lbe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Qbe(t),[n,a]=r.tee();return{stream:Ube(n),response:Mbe(a)}}async function Mbe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return lD(Hbe(t));t.push(a)}}function Ube(e){return Pbe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Uy(r.read());if(a)break;yield yield Uy(lD(n))}})}function Qbe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new qo("Failed to parse stream"));return}n.close();return}a+=i;let l=a.match(f9),u;for(;l;){try{u=JSON.parse(l[1])}catch{n.error(new qo(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(u),a=a.substring(l[0].length),l=a.match(f9)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new FJ("Request aborted when reading from the stream"):o=new qo("Error reading from the stream"),o})}}})}function Hbe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OJ(e,t,r,n){const a=await Uw(t,Dp.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return Lbe(a)}async function DJ(e,t,r,n){const s=await(await Uw(t,Dp.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:lD(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Qy(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return Vbe(t)}function Vbe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new qo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new qo("No content is provided for sending chat message.");return n?t:r}function zbe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new P0("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Qy(e);n.contents=[s]}return{generateContentRequest:n}}function h9(e){let t;return e.contents?t=e:t={contents:[Qy(e)]},e.systemInstruction&&(t.systemInstruction=RJ(e.systemInstruction)),t}function $be(e){return typeof e=="string"||Array.isArray(e)?{content:Qy(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Kbe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Gbe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new qo(`First content should be with role 'user', got ${n}`);if(!a9.includes(n))throw new qo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(a9)}`);if(!Array.isArray(a))throw new qo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new qo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const l of m9)l in o&&(s[l]+=1);const i=Kbe[n];for(const o of m9)if(!i.includes(o)&&s[o]>0)throw new qo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function p9(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="SILENT_ERROR";class qbe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(Gbe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=Qy(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>DJ(this._apiKey,this.model,d,f)).then(p=>{var g;if(p9(p.response)){this._history.push(u);const v=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(v)}else{const v=A0(p.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=Qy(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=OJ(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(g9)}).then(p=>p.response).then(p=>{if(p9(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=A0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==g9&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wbe(e,t,r,n){return(await Uw(t,Dp.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xbe(e,t,r,n){return(await Uw(t,Dp.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function Ybe(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await Uw(t,Dp.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=RJ(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=h9(t),s=Object.assign(Object.assign({},this._requestOptions),r);return DJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=h9(t),s=Object.assign(Object.assign({},this._requestOptions),r);return OJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new qbe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=zbe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return Wbe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=$be(t),a=Object.assign(Object.assign({},this._requestOptions),r);return Xbe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return Ybe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new qo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new v9(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new P0("Cached content must contain a `name` field.");if(!t.model)throw new P0("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new P0(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new v9(this.apiKey,s,n)}}const cD="horario_asignaciones",PJ="horarios_generados",Jbe="usuarios",LJ=e=>{const t=e.data();return{id:e.id,...t}},Zbe=e=>{const t=tr(Ut(jt,cD));return vr(t,n=>{const a=n.docs.map(s=>LJ(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},eye=async e=>{try{return(await Jn(Ut(jt,cD),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},tye=async e=>{try{const t=hr(jt,cD,e);await Is(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},x9=async e=>{try{const t=hr(jt,PJ,"global");await Ji(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},rye=e=>{const t=hr(jt,PJ,"global");return vr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},nye=e=>{const t=tr(Ut(jt,Jbe),In("profile","==",er.PROFESORADO));return vr(t,n=>{const a=n.docs.map(s=>LJ(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},aye=({horarios:e})=>Object.keys(e).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Cs.map(t=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),c.jsx("tbody",{children:e_.map(t=>c.jsxs(lt.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+Cs.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),Cj.map(({bloque:r,inicio:n,fin:a})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Cs.map(s=>{var o,l;const i=(l=(o=e[s])==null?void 0:o[t])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),sye=()=>{const[e,t]=j.useState([]),[r,n]=j.useState({curso:"",asignatura:"",profesor:""}),[a,s]=j.useState([]),[i,o]=j.useState({}),[l,u]=j.useState(Cs[0]),[d,f]=j.useState(!1),[h,p]=j.useState(!0),[g,v]=j.useState(null),[b,y]=j.useState(null),[_,S]=j.useState(null),[k,B]=j.useState({asignatura:"",profesor:""}),[F,w]=j.useState("edicion"),[C,N]=j.useState("");j.useEffect(()=>{p(!0);const H=Zbe(t),V=rye(o),K=nye(ne=>{const L=ne.map(W=>W.nombreCompleto).sort();s(L),p(!1)});return()=>{H(),V(),K()}},[]);const P=async H=>{if(H.preventDefault(),v(null),!r.curso||!r.asignatura||!r.profesor){v("Todos los campos de la asignación son obligatorios.");return}try{await eye({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(V){v(V instanceof Error?V.message:"Error al guardar la asignación.")}},D=async H=>{try{await tye(H)}catch(V){v(V instanceof Error?V.message:"Error al eliminar la asignación.")}},T=async()=>{if(e.length===0){v("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}f(!0),v(null),y(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new os(H),K=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${e_.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(Cj,null,2)}
                - Cursos del liceo: ${Cs.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(xxe,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${C||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await V.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),ie=JSON.parse(te);await x9(ie),y("¡Horario generado y guardado con éxito!")}catch(H){console.error("Error al generar horario con IA:",H),v("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{f(!1)}},U=(H,V,K)=>{S({dia:H,bloque:V}),B({asignatura:(K==null?void 0:K.asignatura)||"",profesor:(K==null?void 0:K.profesor)||""})},R=async()=>{if(!_)return;const{dia:H,bloque:V}=_,K=JSON.parse(JSON.stringify(i));K[l]||(K[l]={}),K[l][H]||(K[l][H]={}),K[l][H][V]={asignatura:k.asignatura||null,profesor:k.profesor||null};try{await x9(K),S(null)}catch(ne){v(ne instanceof Error?ne.message:"Error al guardar la edición.")}},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",q=()=>{const H=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),e_.map(V=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:V},V))]})}),c.jsx("tbody",{children:Cj.map(({bloque:V,inicio:K,fin:ne})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:V}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${K} - ${ne}`})]}),e_.map(L=>{var te;const W=(_==null?void 0:_.dia)===L&&(_==null?void 0:_.bloque)===V,J=(te=H[L])==null?void 0:te[V];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!W&&U(L,V,J),children:W?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:k.asignatura,onChange:ie=>B(Ae=>({...Ae,asignatura:ie.target.value})),className:X+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:k.profesor,onChange:ie=>B(Ae=>({...Ae,profesor:ie.target.value})),className:X+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>S(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:R,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):J!=null&&J.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:J.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",J.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${L}-${V}`)})]},V))})]})})},Z=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:H=>n(V=>({...V,curso:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),Cs.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:H=>n(V=>({...V,asignatura:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:H=>n(V=>({...V,profesor:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),a.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:e.map(H=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[H.curso," - ",H.asignatura," - ",c.jsx("strong",{children:H.profesor})]}),c.jsx("button",{onClick:()=>D(H.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},H.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:C,onChange:H=>N(H.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:X})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:T,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&c.jsx("p",{className:"text-red-600",children:g}),b&&c.jsx("p",{className:"text-green-600",children:b})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:H=>u(H.target.value),className:X+" md:w-1/3",children:Cs.map(H=>c.jsx("option",{value:H,children:H},H))})]}),Object.keys(i).length>0?q():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return h?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>w("edicion"),className:`${F==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>w("global"),className:`${F==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),F==="edicion"?Z():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(aye,{horarios:i})]})]})},gN="acciones",iye=async()=>{try{const e=tr(Ut(Rr,gN),Kr("fechaRegistro","desc"));return(await Ss(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedagógicas")}},oye=async e=>{try{return{id:(await Jn(Ut(Rr,gN),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acción:",t),new Error("No se pudo crear la acción pedagógica")}},b9=async(e,t)=>{try{const r=hr(Rr,gN,e);await Ah(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",e),new Error("No se pudo actualizar la acción pedagógica")}},lye=async e=>{try{const t=hr(Rr,gN,e);await Is(t)}catch(t){throw console.error("Error al eliminar acción:",t,"ID:",e),new Error("No se pudo eliminar la acción pedagógica")}},y9={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},cye={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},uye=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,s]=j.useState(null),[i,o]=j.useState(y9),[l,u]=j.useState(null),[d,f]=j.useState(""),[h,p]=j.useState(""),[g,v]=j.useState(""),b=j.useCallback(async()=>{n(!0);try{const N=await iye();t(N),s(null)}catch(N){console.error("Error al cargar acciones:",N),s("No se pudieron cargar las acciones pedagógicas.")}finally{n(!1)}},[]);j.useEffect(()=>{b()},[b]);const y=j.useCallback(N=>{const{name:P,value:D}=N.target;o(T=>({...T,[P]:D}))},[]),_=j.useCallback(()=>{o(y9),u(null),s(null)},[]),S=j.useCallback(async N=>{if(N.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){s("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{l?await b9(l,i):await oye(i),await b(),_()}catch(P){console.error("Error al guardar acción:",P),s("Error al guardar la acción.")}},[i,l,b,_]),k=j.useCallback(N=>{window.scrollTo({top:0,behavior:"smooth"}),u(N.id),o({...N,enlaceDocumento:N.enlaceDocumento||""})},[]),B=j.useCallback(async N=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await lye(N),await b()}catch(P){console.error("Error al eliminar acción:",P),s("No se pudo eliminar la acción.")}},[b]),F=j.useCallback(async N=>{try{const P=e.find(D=>D.id===N);if(P){const T=(_E.indexOf(P.estado)+1)%_E.length,U=_E[T];await b9(N,{estado:U}),await b()}}catch(P){console.error("Error al cambiar estado:",P),s("No se pudo cambiar el estado de la acción.")}},[e,b]),w=j.useMemo(()=>e.filter(N=>{const P=d===""||N.responsable.toLowerCase().includes(d.toLowerCase())||N.descripcion.toLowerCase().includes(d.toLowerCase()),D=h===""||N.area===h,T=g===""||N.estado===g;return P&&D&&T}),[e,d,h,g]),C="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:y,className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:y,placeholder:"Nombre del responsable",className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:y,className:C,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),z7.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:y,rows:3,placeholder:"Detalle de la acción a realizar...",className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:y,className:C})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),c.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:y,placeholder:"https://ejemplo.com/documento",className:C})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:_,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:N=>f(N.target.value),className:C+" md:col-span-1"}),c.jsxs("select",{value:h,onChange:N=>p(N.target.value),className:C,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),z7.map(N=>c.jsx("option",{value:N,children:N},N))]}),c.jsxs("select",{value:g,onChange:N=>v(N.target.value),className:C,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),_E.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):w.length>0?w.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:N.responsable}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:N.area})]}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:N.descripcion}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("div",{children:["Reg: ",N.fechaRegistro]}),c.jsxs("div",{className:"font-semibold",children:["Comp: ",N.fechaCumplimiento]})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>F(N.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${cye[N.estado]}`,children:N.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[N.enlaceDocumento&&c.jsx("a",{href:N.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:"🔗"}),c.jsx("button",{onClick:()=>k(N),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>B(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},N.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},vN="planificaciones",MJ="actividades_calendario",UJ=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},dye=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:br.fromDate(new Date),fechaActualizacion:br.fromDate(new Date)};return(await Jn(Ut(jt,vN),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},Aye=async(e,t,r)=>{try{const n=hr(jt,vN,e),a=await Wx(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Ah(n,{...t,fechaActualizacion:br.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},fye=async(e,t)=>{try{const r=hr(jt,vN,e),n=await Wx(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Is(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},hye=(e,t)=>{const r=tr(Ut(jt,vN),In("userId","==",e),Kr("fechaCreacion","desc"));return vr(r,n=>{const a=n.docs.map(UJ);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},mye=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:br.fromDate(new Date),fechaActualizacion:br.fromDate(new Date)};return(await Jn(Ut(jt,MJ),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},pye=(e,t)=>{const r=tr(Ut(jt,MJ),In("userId","==",e),Kr("fecha","desc"));return vr(r,n=>{const a=n.docs.map(UJ);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},gye=e=>{const[t,r]=j.useState([]),[n,a]=j.useState(!0),[s,i]=j.useState(null);return j.useEffect(()=>e?(a(!0),hye(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await dye(d,e)}catch(f){throw i(f.message||"Error al guardar planificación"),f}},update:async(d,f)=>{try{i(null),await Aye(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await fye(d,e)}catch(f){throw i(f.message||"Error al eliminar planificación"),f}}}},Bj=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},vye=e=>{const[t,r]=j.useState([]),[n,a]=j.useState(!0),[s,i]=j.useState(null);j.useEffect(()=>e?pye(e,u=>{r(u),a(!1)}):void 0,[e]);const o=j.useCallback(async l=>{try{return i(null),await mye(l,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},xye=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=j.useState(e),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),t()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},bye=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=j.useState(e.progreso??0),[o,l]=j.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),l(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{l(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),c.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&c.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),c.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},yye=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=j.useState(e),[o,l]=j.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,v]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[v]:p}}):b=>({...b,[h]:p}))},d=async()=>{l(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{l(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),c.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),c.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},wye=({userId:e})=>{const{actividades:t,save:r}=vye(e),[n,a]=j.useState("list"),[s,i]=j.useState(null),[o,l]=j.useState(!1),[u,d]=j.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=j.useState(f);j.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(F){console.error("Error al verificar evento en calendario:",F)}},v=F=>{const{name:w,value:C}=F.target;p(N=>({...N,[w]:C}))},b=(F,w,C)=>{p(N=>({...N,tareas:N.tareas.map(P=>P.id===F?{...P,[w]:C}:P)}))},y=()=>{p(F=>({...F,tareas:[...F.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},_=F=>{p(w=>({...w,tareas:w.tareas.filter(C=>C.id!==F)}))},S=async F=>{F.preventDefault(),l(!0);const w=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(C=>C.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{Bj("Planificación - Actividad Calendario");const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=(await(await new os(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text(),R={...h,objetivo:U.replace(/(\*\*|\*)/g,"")},X=await r(R),q={...R,id:X};i(q),a("summary")}catch(C){console.error("Error al generar objetivo con IA:",C),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const N={...h,objetivo:"No generado"},P=await r(N),D={...N,id:P};i(D),a("summary")}catch(N){console.error("Error al guardar actividad:",N),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},k=async F=>{if(F)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(w){console.error("Error adding to calendar:",w),alert("Hubo un error al agregar la actividad al calendario.")}},B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:S,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:h.nombre,onChange:v,placeholder:"Nombre de la Actividad",className:B,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:v,className:B,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:v,className:B,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:v,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:B,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:v,placeholder:"Ubicación",className:B,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:h.participantes,onChange:v,placeholder:"Participantes",className:B,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:v,placeholder:"Recursos Generales Necesarios",rows:2,className:B,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((F,w)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>_(F.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:F.descripcion,onChange:C=>b(F.id,"descripcion",C.target.value),placeholder:`Descripción de la Tarea ${w+1}`,rows:2,className:B,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:F.responsable,onChange:C=>b(F.id,"responsable",C.target.value),placeholder:"Responsable",className:B,required:!0,disabled:o}),c.jsx("input",{value:F.recursos,onChange:C=>b(F.id,"recursos",C.target.value),placeholder:"Recursos Necesarios",className:B,disabled:o})]})]},F.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:s.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:s.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:s.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:s.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:s.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:s.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>k(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:t.length>0?t.map(F=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:F.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(F.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",F.ubicacion]})]},F.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Eye=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=gye(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=j.useState(o),[d,f]=j.useState(null),[h,p]=j.useState(!1),[g,v]=j.useState(null),[b,y]=j.useState("unidad"),[_,S]=j.useState(null),[k,B]=j.useState(null),F=j.useMemo(()=>e.asignaturas||[],[e.asignaturas]),w=j.useMemo(()=>{const K=e.cursos||[],ne=new Set;return K.forEach(L=>{L.startsWith("1º")?ne.add("1º Medio"):L.startsWith("2º")?ne.add("2º Medio"):L.startsWith("3º")?ne.add("3º Medio"):L.startsWith("4º")&&ne.add("4º Medio")}),Array.from(ne)},[e.cursos]);j.useEffect(()=>{u(K=>({...K,asignatura:F[0]||"",nivel:w[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(K=>({id:K.id,autor:K.autor,tipo:K.tipo,coincideConUserId:K.autor===t}))})},[F,w,e,t,r]);const C=K=>{const{name:ne,value:L}=K.target;u(W=>({...W,[ne]:ne==="cantidadClases"?parseInt(L,10):L}))},N=()=>{const{asignatura:K,nivel:ne,nombreUnidad:L,contenidos:W,cantidadClases:J,observaciones:te,ideasParaUnidad:ie}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${K}
    - Nivel: ${ne}
    - Nombre de la Unidad: "${L}"
    - Contenidos clave a trabajar (insumo principal): "${W}"
    - Cantidad de clases para la unidad: ${J}
    - Ideas y perspectiva del docente para la unidad: "${ie||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${te||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${J} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},P=async K=>{if(K.preventDefault(),p(!0),v(null),!l.contenidos||!l.nombreUnidad){v("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{Bj("Planificación - Unidad");const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new os(ne).getGenerativeModel({model:"gemini-1.5-flash-latest"}),J=N(),te={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},oe=(await(await W.generateContent({contents:[{parts:[{text:J}]}],generationConfig:{responseMimeType:"application/json",responseSchema:te}})).response).text(),ce=JSON.parse(oe),ge={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,ge),f({...ge,id:d.id});else{const je=await n(ge);f({...ge,id:je})}}catch(ne){console.error("Error al generar planificación con IA",ne),v("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},D=async(K,ne)=>{p(!0),v(null);const L=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ne.asignatura}
    - Nivel: ${ne.nivel}
    - Objetivo de la clase: ${K.objetivosAprendizaje}
    - Contenidos: ${K.contenidosConceptuales}
    - Actividades sugeridas: ${K.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{Bj("Planificación - Utilizar Clase");const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new os(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ie={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await te.generateContent({contents:[{parts:[{text:L}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ie}})).response).text(),ge=JSON.parse(ce),je={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ne.asignatura,nivel:ne.nivel,contenidos:K.contenidosConceptuales,observaciones:"",nombreClase:K.actividades,duracionClase:80,momentosClase:ge,detalleLeccionOrigen:K};await n(je),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(W){console.error("Error al generar plan de clase con IA",W),v("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},T=K=>{K.tipo==="Unidad"&&(u({asignatura:K.asignatura,nivel:K.nivel,nombreUnidad:K.nombreUnidad,contenidos:K.contenidos,cantidadClases:K.cantidadClases,observaciones:K.observaciones,ideasParaUnidad:K.ideasParaUnidad||""}),f(K),window.scrollTo({top:0,behavior:"smooth"}))},U=async K=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(K),(d==null?void 0:d.id)===K&&(f(null),u(o))}catch(ne){console.error("Error al eliminar planificación:",ne),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},R=async K=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(K),(_==null?void 0:_.id)===K&&S(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(ne){console.error("Error al eliminar plan de clase:",ne),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},X=(K,ne)=>{d&&B({planId:d.id,lessonIndex:K,lessonData:ne})},q=async K=>{if(k)try{const{planId:ne,lessonIndex:L}=k,W=r.find(ie=>ie.id===ne&&ie.tipo==="Unidad");if(!W)return;const J=[...W.detallesLeccion];J[L]=K;const te={...W,detallesLeccion:J};await a(ne,te),f(te),B(null)}catch(ne){console.error("Error al actualizar lección:",ne),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:C,className:Z,disabled:h,children:F.length>0?F.map(K=>c.jsx("option",{value:K,children:K},K)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:C,className:Z,disabled:h,children:w.length>0?w.map(K=>c.jsx("option",{value:K,children:K},K)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:C,className:Z,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:C,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:Z,disabled:h})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:C,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:Z,disabled:h})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:C,className:Z,min:"1",max:"20",disabled:h})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:C,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:Z,disabled:h})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:h||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(bye,{plan:d,onEditLesson:X,onUseLesson:D,onUpdatePlan:a,isLoading:h})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(K=>K.tipo==="Unidad").length>0?r.filter(K=>K.tipo==="Unidad").map(K=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===K.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(K.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",K.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>T(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>U(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:"🗑️"})]})]})},K.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),V=()=>{const K=r.filter(ne=>ne.tipo==="Clase").sort((ne,L)=>new Date(L.fechaCreacion).getTime()-new Date(ne.fechaCreacion).getTime());return _?c.jsx(yye,{plan:_,onBack:()=>S(null),onDelete:R,onSave:async ne=>{try{await a(ne.id,ne),S(ne)}catch(L){console.error("Error al actualizar plan de clase:",L),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:K.length>0?K.map(ne=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ne.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ne.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ne.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>S(ne),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ne.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&H(),b==="clase"&&V(),b==="calendario"&&c.jsx(wye,{userId:t}),k&&c.jsx(xye,{lesson:k.lessonData,onClose:()=>B(null),onSave:q,isLoading:h})]})},xN="events",Cye=async()=>{try{const e=tr(Ut(Rr,xN),Kr("date","asc"));return(await Ss(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},_ye=async e=>{try{return{id:(await Jn(Ut(Rr,xN),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},Sye=async(e,t)=>{try{const r=hr(Rr,xN,e);await Ah(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},Nye=async e=>{try{const t=hr(Rr,xN,e);await Is(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},kye=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],w9={[un.EVALUACION]:c.jsx(_j,{className:"h-4 w-4"}),[un.ACTO]:c.jsx(b1e,{className:"h-4 w-4"}),[un.ACTIVIDAD_FOCALIZADA]:c.jsx(L1e,{className:"h-4 w-4"}),[un.SALIDA_PEDAGOGICA]:c.jsx(T1e,{className:"h-4 w-4"})},Bye=e=>{switch(e.type){case un.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case un.ACTO:return`Acto: ${e.ubicacion}`;case un.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case un.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},Tye=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,l]=j.useState({});j.useEffect(()=>{l(a||{type:un.EVALUACION,subtype:Zm.PRUEBA_PARCIAL,asignatura:qi[0],curso:Cs[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=v=>{const{name:b,value:y}=v.target;l(_=>({..._,[b]:y}))},f=v=>{l(b=>{if(b.type===un.SALIDA_PEDAGOGICA){const y=b.cursos||[],_=y.includes(v)?y.filter(S=>S!==v):[...y,v];return{...b,cursos:_.sort()}}return b})},h=v=>{var y;v.preventDefault();let b;switch(o.type){case un.EVALUACION:{const _={date:s,type:un.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Zm.RUBRICA||o.subtype===Zm.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(_.enlace=o.enlace.trim()),b=_;break}case un.ACTO:b={date:s,type:un.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.ACTIVIDAD_FOCALIZADA:b={date:s,type:un.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.SALIDA_PEDAGOGICA:b={date:s,type:un.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case un.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:bxe.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:qi.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Cs.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Zm.RUBRICA||o.subtype===Zm.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case un.ACTO:case un.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsxs("div",{className:"relative",children:[c.jsx(Nj,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),c.jsxs("div",{className:"relative",children:[c.jsx(kJ,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case un.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsxs("div",{className:"relative",children:[c.jsx(Nj,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Cs.map(v=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(v),onChange:()=>f(v),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),c.jsx("span",{children:v})]},v))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:c.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:v=>v.stopPropagation(),children:c.jsxs("form",{onSubmit:h,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),c.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:c.jsx(X7,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(un).map(v=>c.jsx("option",{value:v,children:v},v))})]}),g()]})]}),c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[c.jsx("div",{children:a&&n&&c.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[c.jsx(Yx,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[c.jsx(X7,{className:"h-4 w-4"}),"Cancelar"]}),c.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[c.jsx(sD,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},Iye=({profile:e})=>{const[t,r]=j.useState(new Date),[n,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(null),[u,d]=j.useState(!1),[f,h]=j.useState(Object.values(un)),[p,g]=j.useState(!1),[v,b]=j.useState(null),[y,_]=j.useState(null),S=j.useCallback(async()=>{i(!0);try{const D=await Cye();a(D),l(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);j.useEffect(()=>{S()},[S]);const k=j.useMemo(()=>{const D=t.getFullYear(),T=t.getMonth(),U=new Date(D,T,1).getDay(),R=new Date(D,T+1,0).getDate(),X=[];let q=1;for(let Z=0;Z<6;Z++){const H=[];for(let V=0;V<7;V++)Z===0&&V<U||q>R?H.push(null):(H.push(new Date(D,T,q)),q++);if(X.push(H),q>R)break}return X},[t]),B=D=>{h(T=>T.includes(D)?T.filter(U=>U!==D):[...T,D])},F=()=>{f.length===Object.values(un).length?h([]):h(Object.values(un))},w=D=>{e!==er.ESTUDIANTE&&(b(D.toISOString().split("T")[0]),_(null),g(!0))},C=(D,T)=>{T.stopPropagation(),e!==er.ESTUDIANTE&&(b(D.date),_(D),g(!0))},N=async D=>{d(!0);try{y?await Sye(y.id,D):await _ye(D),await S(),g(!1)}catch(T){console.error("Error al guardar evento:",T);const U=T instanceof Error?T.message:"Error desconocido";l(`Error al guardar el evento: ${U}`)}finally{d(!1)}},P=async()=>{if(y){d(!0);try{await Nye(y.id),await S(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const T=D instanceof Error?D.message:"Error desconocido";l(`No se pudo eliminar el evento: ${T}`)}finally{d(!1)}}};return c.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),c.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),c.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&c.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),o&&c.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&c.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[c.jsx(A1e,{className:"h-5 w-5 mt-0.5"}),c.jsx("p",{children:"No hay eventos registrados en la nube."})]}),c.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[c.jsx(o1e,{className:"h-4 w-4"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:F,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(un).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(un).map(D=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${Uv[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[c.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>B(D),className:"hidden"}),c.jsx("span",{className:"shrink-0",children:w9[D]}),c.jsx("span",{children:Uv[D].label})]},D))]})]}),c.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(Xxe,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(Jxe,{className:"h-5 w-5"})})]}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:kye.map(D=>c.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:k.flat().map((D,T)=>{const U=D&&D.toDateString()===new Date().toDateString(),R=D==null?void 0:D.toISOString().split("T")[0],X=R?n.filter(q=>q.date===R&&f.includes(q.type)):[];return c.jsx("div",{onClick:()=>D&&w(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==er.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${U?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:X.map(q=>c.jsxs("div",{onClick:Z=>C(q,Z),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Uv[q.type].color}`,children:[c.jsx("span",{className:"shrink-0",children:w9[q.type]}),c.jsx("span",{className:"truncate",children:Bye(q)})]},q.id))}),e!==er.ESTUDIANTE&&c.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:c.jsx(IJ,{className:"h-4 w-4"})})]})},T)})})]}),p&&c.jsx(Tye,{isOpen:p,onClose:()=>g(!1),onSave:N,onDelete:P,event:y,date:v,isLoading:u})]})},bN="anuncios",jye=async()=>{try{const e=tr(Ut(Rr,bN),Kr("fechaPublicacion","desc"));return(await Ss(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},Fye=async e=>{try{return{id:(await Jn(Ut(Rr,bN),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},Oye=async(e,t)=>{try{const r=hr(Rr,bN,e);await Ah(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},Dye=async e=>{try{const t=hr(Rr,bN,e);await Is(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},E9=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Rye=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState(!1),[s,i]=j.useState(null),[o,l]=j.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=j.useState({tipo:"Todos",cursos:[]}),f=j.useCallback(async()=>{a(!0);try{const w=await jye();r(w),i(null)}catch(w){console.error("Error al cargar anuncios desde Firestore",w),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);j.useEffect(()=>{f()},[f]);const h=w=>{const{name:C,value:N}=w.target;l(P=>({...P,[C]:N}))},p=w=>{d({tipo:w,cursos:w==="Cursos"?[]:void 0})},g=w=>{d(C=>{var P;if(C.tipo!=="Cursos")return C;const N=(P=C.cursos)!=null&&P.includes(w)?C.cursos.filter(D=>D!==w):[...C.cursos||[],w];return{...C,cursos:N}})},v=async w=>{if(w.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const C={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await Fye(C),await f(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(C){console.error("Error al crear anuncio:",C),i("Error al publicar el anuncio en la nube.")}},b=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await Dye(w),await f()}catch(C){console.error("Error al eliminar anuncio:",C),i("No se pudo eliminar el anuncio en la nube.")}},y=async w=>{try{const C=t.find(N=>N.id===w);C&&(await Oye(w,{destacado:!C.destacado}),await f())}catch(C){console.error("Error al actualizar anuncio:",C),i("No se pudo actualizar el estado del anuncio en la nube.")}},_=j.useMemo(()=>[...t].sort((w,C)=>w.destacado&&!C.destacado?-1:!w.destacado&&C.destacado?1:new Date(C.fechaPublicacion).getTime()-new Date(w.fechaPublicacion).getTime()),[t]),S=j.useMemo(()=>{const w=e.profile,C=e.curso;return _.filter(N=>{if(w===er.SUBDIRECCION)return!0;if(!N.destinatarios)return w!==er.ESTUDIANTE;const{tipo:P,cursos:D}=N.destinatarios;return P==="Todos"||P==="Profesores"&&w===er.PROFESORADO||P==="Coordinación TP"&&w===er.COORDINACION_TP?!0:P==="Cursos"?w===er.ESTUDIANTE?D==null?void 0:D.includes(C||""):!0:!1})},[_,e]),k=w=>e.profile===er.ESTUDIANTE?!1:e.profile===er.SUBDIRECCION||e.profile===w.profileCreador,B=()=>e.profile===er.SUBDIRECCION||e.profile===er.PROFESORADO,F="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==er.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:F})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:F})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(w=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:w,checked:u.tipo===w,onChange:()=>p(w),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:w.replace("Coordinación TP","Coord. TP")})]},w))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Cs.map(w=>{var C;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(C=u.cursos)==null?void 0:C.includes(w),onChange:()=>g(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:w})]},w)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:F})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&S.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&S.length>0&&S.map((w,C)=>{const N=E9[C%E9.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${N.bg} ${N.rotate}`,children:[w.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:w.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:w.mensaje}),w.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:w.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:w.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(w.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[B()&&c.jsx("button",{onClick:()=>y(w.id),title:w.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${w.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),k(w)&&c.jsx("button",{onClick:()=>b(w.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},w.id)})})]})},QJ="api_logs",Pye=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:br.fromDate(new Date)};await Jn(Ut(jt,QJ),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},Lye=e=>{const t=tr(Ut(jt,QJ),Kr("timestamp","desc"));return vr(t,n=>{const a=n.docs.map(s=>{var o,l;const i=s.data();return{id:s.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},em=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}Pye(e,t)},uD="actas_de_reunion",Mye=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},Uye=e=>{const t=tr(Ut(jt,uD),Kr("fechaCreacion","desc"));return vr(t,n=>{const a=n.docs.map(s=>Mye(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},Qye=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:br.fromDate(new Date(e.fechaCreacion))};return(await Jn(Ut(jt,uD),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},Hye=async e=>{try{const t=hr(jt,uD,e);await Is(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},HJ=window.SpeechRecognition||window.webkitSpeechRecognition,C9=!!HJ,Vye=({isListening:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),zye=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState(null),[s,i]=j.useState({tipoReunion:BB[0],asistentes:"",textoReunion:""}),[o,l]=j.useState(!1),[u,d]=j.useState(!1),[f,h]=j.useState(!0),[p,g]=j.useState(null),v=j.useRef(null);j.useEffect(()=>{h(!0);const w=Uye(C=>{r(C),!n&&C.length>0&&a(C[0]),h(!1)});return()=>w()},[n]);const b=w=>{const{name:C,value:N}=w.target;i(P=>({...P,[C]:N}))},y=j.useCallback(()=>{var w;if(!C9){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(w=v.current)==null||w.stop():(v.current=new HJ,v.current.lang="es-CL",v.current.continuous=!0,v.current.interimResults=!0,v.current.onresult=C=>{let N="";for(let P=C.resultIndex;P<C.results.length;++P)C.results[P].isFinal&&(N+=C.results[P][0].transcript+". ");i(P=>({...P,textoReunion:P.textoReunion+N}))},v.current.onstart=()=>l(!0),v.current.onend=()=>l(!1),v.current.onerror=C=>{console.error("Speech recognition error",C.error),g(`Error de reconocimiento: ${C.error}`),l(!1)},v.current.start())},[o]),_=async w=>{w.preventDefault();const{tipoReunion:C,asistentes:N,textoReunion:P}=s;if(!C||!N.trim()||!P.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{em("Generador de Actas");const D="",U=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),R=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${P}"
                
                Asistentes a la reunión para referencia de nombres: ${N}
            `,H=(await(await U.generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(H),K={fechaCreacion:new Date().toISOString(),...s,...V},ne=await Qye(K,e);i({tipoReunion:BB[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},S=async w=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await Hye(w),(n==null?void 0:n.id)===w&&a(t.length>1?t[1]:null)}catch(C){console.error("Error deleting acta:",C),alert("No se pudo eliminar el acta.")}},k=w=>{a(w)},B=w=>w.temas||w.acuerdos||w.plazos||w.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),w.temas&&w.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.temas.map((N,P)=>c.jsx("li",{children:N},P))})]}),w.acuerdos&&w.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.acuerdos.map((N,P)=>c.jsx("li",{children:N},P))})]}),w.plazos&&w.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.plazos.map((N,P)=>c.jsx("li",{children:N},P))})]}),w.responsables&&w.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.responsables.map((N,P)=>c.jsx("li",{children:N},P))})]})]}):null,F="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:F,children:BB.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:F})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:F}),C9&&c.jsx("button",{type:"button",onClick:y,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(Vye,{isListening:o})})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(w=>c.jsxs("button",{onClick:()=>k(w),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===w.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(w.fechaCreacion).toLocaleDateString("es-CL")})]},w.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),c.jsx("button",{onClick:()=>S(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((w,C)=>w.trim()&&c.jsx("li",{children:w.trim()},C))}),B(n),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:n.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},$ye="modulepreload",Kye=function(e){return"/"+e},_9={},fx=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=Kye(u),u in _9)return;_9[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":$ye,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function pa(e){"@babel/helpers - typeof";return pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(e)}var Wo=Uint8Array,Ic=Uint16Array,dD=Int32Array,yN=new Wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wN=new Wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tj=new Wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VJ=function(e,t){for(var r=new Ic(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new dD(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},zJ=VJ(yN,2),$J=zJ.b,Ij=zJ.r;$J[28]=258,Ij[258]=28;var KJ=VJ(wN,0),Gye=KJ.b,S9=KJ.r,jj=new Ic(32768);for(var Ua=0;Ua<32768;++Ua){var r0=(Ua&43690)>>1|(Ua&21845)<<1;r0=(r0&52428)>>2|(r0&13107)<<2,r0=(r0&61680)>>4|(r0&3855)<<4,jj[Ua]=((r0&65280)>>8|(r0&255)<<8)>>1}var RA=function(e,t,r){for(var n=e.length,a=0,s=new Ic(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Ic(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Ic(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[jj[f]>>l]=u}else for(o=new Ic(n),a=0;a<n;++a)e[a]&&(o[a]=jj[i[e[a]-1]++]>>15-e[a]);return o},tm=new Wo(288);for(var Ua=0;Ua<144;++Ua)tm[Ua]=8;for(var Ua=144;Ua<256;++Ua)tm[Ua]=9;for(var Ua=256;Ua<280;++Ua)tm[Ua]=7;for(var Ua=280;Ua<288;++Ua)tm[Ua]=8;var Hy=new Wo(32);for(var Ua=0;Ua<32;++Ua)Hy[Ua]=5;var qye=RA(tm,9,0),Wye=RA(tm,9,1),Xye=RA(Hy,5,0),Yye=RA(Hy,5,1),IB=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},od=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},jB=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},AD=function(e){return(e+7)/8|0},GJ=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Wo(e.subarray(t,r))},Jye=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dd=function(e,t,r){var n=new Error(t||Jye[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,dd),!r)throw n;return n},Zye=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Wo(0);var i=!r,o=i||t.i!=2,l=t.i;i&&(r=new Wo(a*3));var u=function(je){var re=r.length;if(je>re){var Se=new Wo(Math.max(re*2,je));Se.set(r),r=Se}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,v=t.m,b=t.n,y=a*8;do{if(!p){d=od(e,f,1);var _=od(e,f+1,3);if(f+=3,_)if(_==1)p=Wye,g=Yye,v=9,b=5;else if(_==2){var F=od(e,f,31)+257,w=od(e,f+10,15)+4,C=F+od(e,f+5,31)+1;f+=14;for(var N=new Wo(C),P=new Wo(19),D=0;D<w;++D)P[Tj[D]]=od(e,f+D*3,7);f+=w*3;for(var T=IB(P),U=(1<<T)-1,R=RA(P,T,1),D=0;D<C;){var X=R[od(e,f,U)];f+=X&15;var S=X>>4;if(S<16)N[D++]=S;else{var q=0,Z=0;for(S==16?(Z=3+od(e,f,3),f+=2,q=N[D-1]):S==17?(Z=3+od(e,f,7),f+=3):S==18&&(Z=11+od(e,f,127),f+=7);Z--;)N[D++]=q}}var H=N.subarray(0,F),V=N.subarray(F);v=IB(H),b=IB(V),p=RA(H,v,1),g=RA(V,b,1)}else dd(1);else{var S=AD(f)+4,k=e[S-4]|e[S-3]<<8,B=S+k;if(B>a){l&&dd(0);break}o&&u(h+k),r.set(e.subarray(S,B),h),t.b=h+=k,t.p=f=B*8,t.f=d;continue}if(f>y){l&&dd(0);break}}o&&u(h+131072);for(var K=(1<<v)-1,ne=(1<<b)-1,L=f;;L=f){var q=p[jB(e,f)&K],W=q>>4;if(f+=q&15,f>y){l&&dd(0);break}if(q||dd(2),W<256)r[h++]=W;else if(W==256){L=f,p=null;break}else{var J=W-254;if(W>264){var D=W-257,te=yN[D];J=od(e,f,(1<<te)-1)+$J[D],f+=te}var ie=g[jB(e,f)&ne],Ae=ie>>4;ie||dd(3),f+=ie&15;var V=Gye[Ae];if(Ae>3){var te=wN[Ae];V+=jB(e,f)&(1<<te)-1,f+=te}if(f>y){l&&dd(0);break}o&&u(h+131072);var oe=h+J;if(h<V){var ce=s-V,ge=Math.min(V,oe);for(ce+h<0&&dd(3);h<ge;++h)r[h]=n[ce+h]}for(;h<oe;++h)r[h]=r[h-V]}}t.l=p,t.p=L,t.b=h,t.f=d,p&&(d=1,t.m=v,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?GJ(r,0,h):r.subarray(0,h)},Cf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},lb=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},FB=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:WJ,l:0};if(a==1){var i=new Wo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(B,F){return B.f-F.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],l=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Ic(h+1),g=Fj(r[d-1],p,0);if(g>t){var n=0,v=0,b=g-t,y=1<<b;for(s.sort(function(F,w){return p[w.s]-p[F.s]||F.f-w.f});n<a;++n){var _=s[n].s;if(p[_]>t)v+=y-(1<<g-p[_]),p[_]=t;else break}for(v>>=b;v>0;){var S=s[n].s;p[S]<t?v-=1<<t-p[S]++-1:++n}for(;n>=0&&v;--n){var k=s[n].s;p[k]==t&&(--p[k],++v)}g=t}return{t:new Wo(p),l:g}},Fj=function(e,t,r){return e.s==-1?Math.max(Fj(e.l,t,r+1),Fj(e.r,t,r+1)):t[e.s]=r},N9=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ic(++t),n=0,a=e[0],s=1,i=function(l){r[n++]=l},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},cb=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},qJ=function(e,t,r){var n=r.length,a=AD(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},k9=function(e,t,r,n,a,s,i,o,l,u,d){Cf(t,d++,r),++a[256];for(var f=FB(a,15),h=f.t,p=f.l,g=FB(s,15),v=g.t,b=g.l,y=N9(h),_=y.c,S=y.n,k=N9(v),B=k.c,F=k.n,w=new Ic(19),C=0;C<_.length;++C)++w[_[C]&31];for(var C=0;C<B.length;++C)++w[B[C]&31];for(var N=FB(w,7),P=N.t,D=N.l,T=19;T>4&&!P[Tj[T-1]];--T);var U=u+5<<3,R=cb(a,tm)+cb(s,Hy)+i,X=cb(a,h)+cb(s,v)+i+14+3*T+cb(w,P)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&U<=R&&U<=X)return qJ(t,d,e.subarray(l,l+u));var q,Z,H,V;if(Cf(t,d,1+(X<R)),d+=2,X<R){q=RA(h,p,0),Z=h,H=RA(v,b,0),V=v;var K=RA(P,D,0);Cf(t,d,S-257),Cf(t,d+5,F-1),Cf(t,d+10,T-4),d+=14;for(var C=0;C<T;++C)Cf(t,d+3*C,P[Tj[C]]);d+=3*T;for(var ne=[_,B],L=0;L<2;++L)for(var W=ne[L],C=0;C<W.length;++C){var J=W[C]&31;Cf(t,d,K[J]),d+=P[J],J>15&&(Cf(t,d,W[C]>>5&127),d+=W[C]>>12)}}else q=qye,Z=tm,H=Xye,V=Hy;for(var C=0;C<o;++C){var te=n[C];if(te>255){var J=te>>18&31;lb(t,d,q[J+257]),d+=Z[J+257],J>7&&(Cf(t,d,te>>23&31),d+=yN[J]);var ie=te&31;lb(t,d,H[ie]),d+=V[ie],ie>3&&(lb(t,d,te>>5&8191),d+=wN[ie])}else lb(t,d,q[te]),d+=Z[te]}return lb(t,d,q[256]),d+Z[256]},ewe=new dD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),WJ=new Wo(0),twe=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Wo(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(l[0]=s.r>>3);for(var f=ewe[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,v=s.p||new Ic(32768),b=s.h||new Ic(g+1),y=Math.ceil(r/3),_=2*y,S=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<_)&g},k=new dD(25e3),B=new Ic(288),F=new Ic(32),w=0,C=0,N=s.i||0,P=0,D=s.w||0,T=0;N+2<i;++N){var U=S(N),R=N&32767,X=b[U];if(v[R]=X,b[U]=R,D<=N){var q=i-N;if((w>7e3||P>24576)&&(q>423||!u)){d=k9(e,l,0,k,B,F,C,P,T,N-T,d),P=w=C=0,T=N;for(var Z=0;Z<286;++Z)B[Z]=0;for(var Z=0;Z<30;++Z)F[Z]=0}var H=2,V=0,K=p,ne=R-X&32767;if(q>2&&U==S(N-ne))for(var L=Math.min(h,q)-1,W=Math.min(32767,N),J=Math.min(258,q);ne<=W&&--K&&R!=X;){if(e[N+H]==e[N+H-ne]){for(var te=0;te<J&&e[N+te]==e[N+te-ne];++te);if(te>H){if(H=te,V=ne,te>L)break;for(var ie=Math.min(ne,te-2),Ae=0,Z=0;Z<ie;++Z){var oe=N-ne+Z&32767,ce=v[oe],ge=oe-ce&32767;ge>Ae&&(Ae=ge,X=oe)}}}R=X,X=v[R],ne+=R-X&32767}if(V){k[P++]=268435456|Ij[H]<<18|S9[V];var je=Ij[H]&31,re=S9[V]&31;C+=yN[je]+wN[re],++B[257+je],++F[re],D=N+H,++w}else k[P++]=e[N],++B[e[N]]}}for(N=Math.max(N,D);N<i;++N)k[P++]=e[N],++B[e[N]];d=k9(e,l,u,k,B,F,C,P,T,N-T,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=b,s.p=v,s.i=N,s.w=D)}else{for(var N=s.w||0;N<i+u;N+=65535){var Se=N+65535;Se>=i&&(l[d/8|0]=u,Se=i),d=qJ(l,d+1,e.subarray(N,Se))}s.i=i}return GJ(o,0,n+AD(d)+a)},XJ=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},rwe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Wo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return twe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},YJ=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},nwe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=XJ();a.p(t.dictionary),YJ(e,2,a.d())}},awe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&dd(6,"invalid zlib data"),(e[1]>>5&1)==1&&dd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Oj(e,t){t||(t={});var r=XJ();r.p(e);var n=rwe(e,t,t.dictionary?6:2,4);return nwe(n,t),YJ(n,n.length-4,r.d()),n}function swe(e,t){return Zye(e.subarray(awe(e),-4),{i:2},t,t)}var iwe=typeof TextDecoder<"u"&&new TextDecoder,owe=0;try{iwe.decode(WJ,{stream:!0}),owe=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function OB(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var Sa={log:OB,warn:function(e){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):OB.call(null,arguments))},error:function(e){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):OB(e))}};function DB(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){qm(n.response,t,r)},n.onerror=function(){Sa.error("could not download file")},n.send()}function B9(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function BE(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var dy,Dj,qm=Mr.saveAs||((typeof window>"u"?"undefined":pa(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Mr.URL||Mr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?B9(a.href)?DB(e,t,r):BE(a,a.target="_blank"):BE(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){BE(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(B9(e))DB(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){BE(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:pa(s)!=="object"&&(Sa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return DB(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Mr.HTMLElement)||Mr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":pa(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var l=Mr.URL||Mr.webkitURL,u=l.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function JJ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function RB(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Fo(r,n,a,s,t[0],7,-680876936),s=Fo(s,r,n,a,t[1],12,-389564586),a=Fo(a,s,r,n,t[2],17,606105819),n=Fo(n,a,s,r,t[3],22,-1044525330),r=Fo(r,n,a,s,t[4],7,-176418897),s=Fo(s,r,n,a,t[5],12,1200080426),a=Fo(a,s,r,n,t[6],17,-1473231341),n=Fo(n,a,s,r,t[7],22,-45705983),r=Fo(r,n,a,s,t[8],7,1770035416),s=Fo(s,r,n,a,t[9],12,-1958414417),a=Fo(a,s,r,n,t[10],17,-42063),n=Fo(n,a,s,r,t[11],22,-1990404162),r=Fo(r,n,a,s,t[12],7,1804603682),s=Fo(s,r,n,a,t[13],12,-40341101),a=Fo(a,s,r,n,t[14],17,-1502002290),r=Oo(r,n=Fo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Oo(s,r,n,a,t[6],9,-1069501632),a=Oo(a,s,r,n,t[11],14,643717713),n=Oo(n,a,s,r,t[0],20,-373897302),r=Oo(r,n,a,s,t[5],5,-701558691),s=Oo(s,r,n,a,t[10],9,38016083),a=Oo(a,s,r,n,t[15],14,-660478335),n=Oo(n,a,s,r,t[4],20,-405537848),r=Oo(r,n,a,s,t[9],5,568446438),s=Oo(s,r,n,a,t[14],9,-1019803690),a=Oo(a,s,r,n,t[3],14,-187363961),n=Oo(n,a,s,r,t[8],20,1163531501),r=Oo(r,n,a,s,t[13],5,-1444681467),s=Oo(s,r,n,a,t[2],9,-51403784),a=Oo(a,s,r,n,t[7],14,1735328473),r=Do(r,n=Oo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Do(s,r,n,a,t[8],11,-2022574463),a=Do(a,s,r,n,t[11],16,1839030562),n=Do(n,a,s,r,t[14],23,-35309556),r=Do(r,n,a,s,t[1],4,-1530992060),s=Do(s,r,n,a,t[4],11,1272893353),a=Do(a,s,r,n,t[7],16,-155497632),n=Do(n,a,s,r,t[10],23,-1094730640),r=Do(r,n,a,s,t[13],4,681279174),s=Do(s,r,n,a,t[0],11,-358537222),a=Do(a,s,r,n,t[3],16,-722521979),n=Do(n,a,s,r,t[6],23,76029189),r=Do(r,n,a,s,t[9],4,-640364487),s=Do(s,r,n,a,t[12],11,-421815835),a=Do(a,s,r,n,t[15],16,530742520),r=Ro(r,n=Do(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Ro(s,r,n,a,t[7],10,1126891415),a=Ro(a,s,r,n,t[14],15,-1416354905),n=Ro(n,a,s,r,t[5],21,-57434055),r=Ro(r,n,a,s,t[12],6,1700485571),s=Ro(s,r,n,a,t[3],10,-1894986606),a=Ro(a,s,r,n,t[10],15,-1051523),n=Ro(n,a,s,r,t[1],21,-2054922799),r=Ro(r,n,a,s,t[8],6,1873313359),s=Ro(s,r,n,a,t[15],10,-30611744),a=Ro(a,s,r,n,t[6],15,-1560198380),n=Ro(n,a,s,r,t[13],21,1309151649),r=Ro(r,n,a,s,t[4],6,-145523070),s=Ro(s,r,n,a,t[11],10,-1120210379),a=Ro(a,s,r,n,t[2],15,718787259),n=Ro(n,a,s,r,t[9],21,-343485551),e[0]=_0(r,e[0]),e[1]=_0(n,e[1]),e[2]=_0(a,e[2]),e[3]=_0(s,e[3])}function EN(e,t,r,n,a,s){return t=_0(_0(t,e),_0(n,s)),_0(t<<a|t>>>32-a,r)}function Fo(e,t,r,n,a,s,i){return EN(t&r|~t&n,e,t,a,s,i)}function Oo(e,t,r,n,a,s,i){return EN(t&n|r&~n,e,t,a,s,i)}function Do(e,t,r,n,a,s,i){return EN(t^r^n,e,t,a,s,i)}function Ro(e,t,r,n,a,s,i){return EN(r^(t|~n),e,t,a,s,i)}function ZJ(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)RB(n,lwe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(RB(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,RB(n,a),n}function lwe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}dy=Mr.atob.bind(Mr),Dj=Mr.btoa.bind(Mr);var T9="0123456789abcdef".split("");function cwe(e){for(var t="",r=0;r<4;r++)t+=T9[e>>8*r+4&15]+T9[e>>8*r&15];return t}function uwe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Rj(e){return ZJ(e).map(uwe).join("")}var dwe=function(e){for(var t=0;t<e.length;t++)e[t]=cwe(e[t]);return e.join("")}(ZJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function _0(e,t){if(dwe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Pj(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(l=0;l<f;l++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(l)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var I9={print:4,modify:8,copy:16,"annot-forms":32};function mv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(I9.perm!==void 0)throw new Error("Invalid permission: "+o);a+=I9[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=Rj(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Pj(this.encryptionKey,this.padding)}function pv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function j9(e){if(pa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Mr.console&&Sa.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function eS(e){if(!(this instanceof eS))return new eS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function eZ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ep(e,t,r,n,a){if(!(this instanceof ep))return new ep(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,eZ.call(this,n,a)}function Ev(e,t,r,n,a){if(!(this instanceof Ev))return new Ev(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,eZ.call(this,n,a)}function pr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,u="S",d=null;pa(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=j9;var g="1.3",v=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(G){g=G};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(G){return b[G]};a=a||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},S=_.COMPAT;function k(){this.saveGraphicsState(),he(new $t(bt,0,0,-bt,0,Di()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),u="n",S=_.ADVANCED}function B(){this.restoreGraphicsState(),u="S",S=_.COMPAT}var F=p.__private__.combineFontStyleAndFontWeight=function(G,de){if(G=="bold"&&de=="normal"||G=="bold"&&de==400||G=="normal"&&de=="italic"||G=="bold"&&de=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return de&&(G=de==400||de==="normal"?G==="italic"?"italic":"normal":de!=700&&de!=="bold"||G!=="normal"?(de==700?"bold":de)+""+G:"bold"),G};p.advancedAPI=function(G){var de=S===_.COMPAT;return de&&k.call(this),typeof G!="function"||(G(this),de&&B.call(this)),this},p.compatAPI=function(G){var de=S===_.ADVANCED;return de&&B.call(this),typeof G!="function"||(G(this),de&&k.call(this)),this},p.isAdvancedAPI=function(){return S===_.ADVANCED};var w,C=function(G){if(S!==_.ADVANCED)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=p.roundToPrecision=p.__private__.roundToPrecision=function(G,de){var Fe=t||de;if(isNaN(G)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(Fe).replace(/0+$/,"")};w=p.hpf=p.__private__.hpf=typeof l=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,l)}:l==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,16)};var P=p.f2=p.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return N(G,2)},D=p.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return N(G,3)},T=p.scale=p.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return S===_.COMPAT?G*bt:S===_.ADVANCED?G:void 0},U=function(G){return S===_.COMPAT?Di()-G:S===_.ADVANCED?G:void 0},R=function(G){return T(U(G))};p.__private__.setPrecision=p.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var X,q="00000000000000000000000000000000",Z=p.__private__.getFileId=function(){return q},H=p.__private__.setFileId=function(G){return q=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new mv(d.userPermissions,d.userPassword,d.ownerPassword,q)),q};p.setFileId=function(G){return H(G),this},p.getFileId=function(){return Z()};var V=p.__private__.convertDateToPDFDate=function(G){var de=G.getTimezoneOffset(),Fe=de<0?"+":"-",Le=Math.floor(Math.abs(de/60)),Ke=Math.abs(de%60),xt=[Fe,J(Le),"'",J(Ke),"'"].join("");return["D:",G.getFullYear(),J(G.getMonth()+1),J(G.getDate()),J(G.getHours()),J(G.getMinutes()),J(G.getSeconds()),xt].join("")},K=p.__private__.convertPDFDateToDate=function(G){var de=parseInt(G.substr(2,4),10),Fe=parseInt(G.substr(6,2),10)-1,Le=parseInt(G.substr(8,2),10),Ke=parseInt(G.substr(10,2),10),xt=parseInt(G.substr(12,2),10),Pt=parseInt(G.substr(14,2),10);return new Date(de,Fe,Le,Ke,xt,Pt,0)},ne=p.__private__.setCreationDate=function(G){var de;if(G===void 0&&(G=new Date),G instanceof Date)de=V(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");de=G}return X=de},L=p.__private__.getCreationDate=function(G){var de=X;return G==="jsDate"&&(de=K(X)),de};p.setCreationDate=function(G){return ne(G),this},p.getCreationDate=function(G){return L(G)};var W,J=p.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},te=p.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},ie=0,Ae=[],oe=[],ce=0,ge=[],je=[],re=!1,Se=oe,De=function(){ie=0,ce=0,oe=[],Ae=[],ge=[],Ee=ta(),Ce=ta()};p.__private__.setCustomOutputDestination=function(G){re=!0,Se=G};var _e=function(G){re||(Se=G)};p.__private__.resetCustomOutputDestination=function(){re=!1,Se=oe};var he=p.__private__.out=function(G){return G=G.toString(),ce+=G.length+1,Se.push(G),Se},Ie=p.__private__.write=function(G){return he(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},He=p.__private__.getArrayBuffer=function(G){for(var de=G.length,Fe=new ArrayBuffer(de),Le=new Uint8Array(Fe);de--;)Le[de]=G.charCodeAt(de);return Fe},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Xe};var ye=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(G){return ye=S===_.ADVANCED?G/bt:G,this};var Oe,Pe=p.__private__.getFontSize=p.getFontSize=function(){return S===_.COMPAT?ye:ye*bt},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(G){return qe=G,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Ze,ot=p.__private__.setZoomMode=function(G){var de=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))Oe=G;else if(isNaN(G)){if(de.indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');Oe=G}else Oe=parseInt(G,10)};p.__private__.getZoomMode=function(){return Oe};var mt,Bt=p.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');Ze=G};p.__private__.getPageMode=function(){return Ze};var Lt=p.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');mt=G};p.__private__.getLayoutMode=function(){return mt},p.__private__.setDisplayMode=p.setDisplayMode=function(G,de,Fe){return ot(G),Lt(de),Bt(Fe),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(G){if(Object.keys(Ot).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[G]},p.__private__.getDocumentProperties=function(){return Ot},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(G){for(var de in Ot)Ot.hasOwnProperty(de)&&G[de]&&(Ot[de]=G[de]);return this},p.__private__.setDocumentProperty=function(G,de){if(Object.keys(Ot).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[G]=de};var Qt,bt,Nr,rr,nn,Cr={},Vr={},Fn=[],jr={},vt={},pt={},Je={},gt=null,dt=0,Dt=[],zt=new j9(p),Pr=e.hotfixes||[],Xr={},gn={},vn=[],$t=function G(de,Fe,Le,Ke,xt,Pt){if(!(this instanceof G))return new G(de,Fe,Le,Ke,xt,Pt);isNaN(de)&&(de=1),isNaN(Fe)&&(Fe=0),isNaN(Le)&&(Le=0),isNaN(Ke)&&(Ke=1),isNaN(xt)&&(xt=0),isNaN(Pt)&&(Pt=0),this._matrix=[de,Fe,Le,Ke,xt,Pt]};Object.defineProperty($t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty($t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty($t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty($t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty($t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty($t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty($t.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty($t.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty($t.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty($t.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty($t.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty($t.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty($t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$t.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(w).join(G)},$t.prototype.multiply=function(G){var de=G.sx*this.sx+G.shy*this.shx,Fe=G.sx*this.shy+G.shy*this.sy,Le=G.shx*this.sx+G.sy*this.shx,Ke=G.shx*this.shy+G.sy*this.sy,xt=G.tx*this.sx+G.ty*this.shx+this.tx,Pt=G.tx*this.shy+G.ty*this.sy+this.ty;return new $t(de,Fe,Le,Ke,xt,Pt)},$t.prototype.decompose=function(){var G=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ke=this.tx,xt=this.ty,Pt=Math.sqrt(G*G+de*de),Jt=(G/=Pt)*Fe+(de/=Pt)*Le;Fe-=G*Jt,Le-=de*Jt;var O=Math.sqrt(Fe*Fe+Le*Le);return Jt/=O,G*(Le/=O)<de*(Fe/=O)&&(G=-G,de=-de,Jt=-Jt,Pt=-Pt),{scale:new $t(Pt,0,0,O,0,0),translate:new $t(1,0,0,1,Ke,xt),rotate:new $t(G,de,-de,G,0,0),skew:new $t(1,0,Jt,1,0,0)}},$t.prototype.toString=function(G){return this.join(" ")},$t.prototype.inversed=function(){var G=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ke=this.tx,xt=this.ty,Pt=1/(G*Le-de*Fe),Jt=Le*Pt,O=-de*Pt,ee=-Fe*Pt,se=G*Pt;return new $t(Jt,O,ee,se,-Jt*Ke-ee*xt,-O*Ke-se*xt)},$t.prototype.applyToPoint=function(G){var de=G.x*this.sx+G.y*this.shx+this.tx,Fe=G.x*this.shy+G.y*this.sy+this.ty;return new Hu(de,Fe)},$t.prototype.applyToRectangle=function(G){var de=this.applyToPoint(G),Fe=this.applyToPoint(new Hu(G.x+G.w,G.y+G.h));return new Qd(de.x,de.y,Fe.x-de.x,Fe.y-de.y)},$t.prototype.clone=function(){var G=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ke=this.tx,xt=this.ty;return new $t(G,de,Fe,Le,Ke,xt)},p.Matrix=$t;var tn=p.matrixMult=function(G,de){return de.multiply(G)},en=new $t(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=en;var cr=function(G,de){if(!vt[G]){var Fe=(de instanceof ep?"Sh":"P")+(Object.keys(jr).length+1).toString(10);de.id=Fe,vt[G]=Fe,jr[Fe]=de,zt.publish("addPattern",de)}};p.ShadingPattern=ep,p.TilingPattern=Ev,p.addShadingPattern=function(G,de){return C("addShadingPattern()"),cr(G,de),this},p.beginTilingPattern=function(G){C("beginTilingPattern()"),Xc(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},p.endTilingPattern=function(G,de){C("endTilingPattern()"),de.stream=je[W].join(`
`),cr(G,de),zt.publish("endTilingPattern",de),vn.pop().restore()};var Yr=p.__private__.newObject=function(){var G=ta();return fe(G,!0),G},ta=p.__private__.newObjectDeferred=function(){return ie++,Ae[ie]=function(){return ce},ie},fe=function(G,de){return de=typeof de=="boolean"&&de,Ae[G]=ce,de&&he(G+" 0 obj"),G},Be=p.__private__.newAdditionalObject=function(){var G={objId:ta(),content:""};return ge.push(G),G},Ee=ta(),Ce=ta(),Ne=p.__private__.decodeColorString=function(G){var de=G.split(" ");if(de.length!==2||de[1]!=="g"&&de[1]!=="G")de.length===5&&(de[4]==="k"||de[4]==="K")&&(de=[(1-de[0])*(1-de[3]),(1-de[1])*(1-de[3]),(1-de[2])*(1-de[3]),"r"]);else{var Fe=parseFloat(de[0]);de=[Fe,Fe,Fe,"r"]}for(var Le="#",Ke=0;Ke<3;Ke++)Le+=("0"+Math.floor(255*parseFloat(de[Ke])).toString(16)).slice(-2);return Le},Te=p.__private__.encodeColorString=function(G){var de;typeof G=="string"&&(G={ch1:G});var Fe=G.ch1,Le=G.ch2,Ke=G.ch3,xt=G.ch4,Pt=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Jt=new JJ(Fe);if(Jt.ok)Fe=Jt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var O=parseInt(Fe.substr(1),16);Fe=O>>16&255,Le=O>>8&255,Ke=255&O}if(Le===void 0||xt===void 0&&Fe===Le&&Le===Ke)if(typeof Fe=="string")de=Fe+" "+Pt[0];else switch(G.precision){case 2:de=P(Fe/255)+" "+Pt[0];break;case 3:default:de=D(Fe/255)+" "+Pt[0]}else if(xt===void 0||pa(xt)==="object"){if(xt&&!isNaN(xt.a)&&xt.a===0)return de=["1.","1.","1.",Pt[1]].join(" ");if(typeof Fe=="string")de=[Fe,Le,Ke,Pt[1]].join(" ");else switch(G.precision){case 2:de=[P(Fe/255),P(Le/255),P(Ke/255),Pt[1]].join(" ");break;default:case 3:de=[D(Fe/255),D(Le/255),D(Ke/255),Pt[1]].join(" ")}}else if(typeof Fe=="string")de=[Fe,Le,Ke,xt,Pt[2]].join(" ");else switch(G.precision){case 2:de=[P(Fe),P(Le),P(Ke),P(xt),Pt[2]].join(" ");break;case 3:default:de=[D(Fe),D(Le),D(Ke),D(xt),Pt[2]].join(" ")}return de},Ye=p.__private__.getFilters=function(){return i},ut=p.__private__.putStream=function(G){var de=(G=G||{}).data||"",Fe=G.filters||Ye(),Le=G.alreadyAppliedFilters||[],Ke=G.addLength1||!1,xt=de.length,Pt=G.objectId,Jt=function(Tr){return Tr};if(d!==null&&Pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Jt=ca.encryptor(Pt,0));var O={};Fe===!0&&(Fe=["FlateEncode"]);var ee=G.additionalKeyValues||[],se=(O=pr.API.processDataByFilters!==void 0?pr.API.processDataByFilters(de,Fe):{data:de,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(O.data.length!==0&&(ee.push({key:"Length",value:O.data.length}),Ke===!0&&ee.push({key:"Length1",value:xt})),se.length!=0)if(se.split("/").length-1==1)ee.push({key:"Filter",value:se});else{ee.push({key:"Filter",value:"["+se+"]"});for(var xe=0;xe<ee.length;xe+=1)if(ee[xe].key==="DecodeParms"){for(var ze=[],st=0;st<O.reverseChain.split("/").length-1;st+=1)ze.push("null");ze.push(ee[xe].value),ee[xe].value="["+ze.join(" ")+"]"}}he("<<");for(var Mt=0;Mt<ee.length;Mt++)he("/"+ee[Mt].key+" "+ee[Mt].value);he(">>"),O.data.length!==0&&(he("stream"),he(Jt(O.data)),he("endstream"))},$e=p.__private__.putPage=function(G){var de=G.number,Fe=G.data,Le=G.objId,Ke=G.contentsObjId;fe(Le,!0),he("<</Type /Page"),he("/Parent "+G.rootDictionaryObjId+" 0 R"),he("/Resources "+G.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(w(G.mediaBox.bottomLeftX))+" "+parseFloat(w(G.mediaBox.bottomLeftY))+" "+w(G.mediaBox.topRightX)+" "+w(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&he("/CropBox ["+w(G.cropBox.bottomLeftX)+" "+w(G.cropBox.bottomLeftY)+" "+w(G.cropBox.topRightX)+" "+w(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&he("/BleedBox ["+w(G.bleedBox.bottomLeftX)+" "+w(G.bleedBox.bottomLeftY)+" "+w(G.bleedBox.topRightX)+" "+w(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&he("/TrimBox ["+w(G.trimBox.bottomLeftX)+" "+w(G.trimBox.bottomLeftY)+" "+w(G.trimBox.topRightX)+" "+w(G.trimBox.topRightY)+"]"),G.artBox!==null&&he("/ArtBox ["+w(G.artBox.bottomLeftX)+" "+w(G.artBox.bottomLeftY)+" "+w(G.artBox.topRightX)+" "+w(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&he("/UserUnit "+G.userUnit),zt.publish("putPage",{objId:Le,pageContext:Dt[de],pageNumber:de,page:Fe}),he("/Contents "+Ke+" 0 R"),he(">>"),he("endobj");var xt=Fe.join(`
`);return S===_.ADVANCED&&(xt+=`
Q`),fe(Ke,!0),ut({data:xt,filters:Ye(),objectId:Ke}),he("endobj"),Le},tt=p.__private__.putPages=function(){var G,de,Fe=[];for(G=1;G<=dt;G++)Dt[G].objId=ta(),Dt[G].contentsObjId=ta();for(G=1;G<=dt;G++)Fe.push($e({number:G,data:je[G],objId:Dt[G].objId,contentsObjId:Dt[G].contentsObjId,mediaBox:Dt[G].mediaBox,cropBox:Dt[G].cropBox,bleedBox:Dt[G].bleedBox,trimBox:Dt[G].trimBox,artBox:Dt[G].artBox,userUnit:Dt[G].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:Ce}));fe(Ee,!0),he("<</Type /Pages");var Le="/Kids [";for(de=0;de<dt;de++)Le+=Fe[de]+" 0 R ";he(Le+"]"),he("/Count "+dt),he(">>"),he("endobj"),zt.publish("postPutPages")},at=function(G){zt.publish("putFont",{font:G,out:he,newObject:Yr,putStream:ut}),G.isAlreadyPutted!==!0&&(G.objectNumber=Yr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+pv(G.postScriptName)),he("/Subtype /Type1"),typeof G.encoding=="string"&&he("/Encoding /"+G.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Tt=function(){for(var G in Cr)Cr.hasOwnProperty(G)&&(f===!1||f===!0&&h.hasOwnProperty(G))&&at(Cr[G])},Vt=function(G){G.objectNumber=Yr();var de=[];de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Form"}),de.push({key:"BBox",value:"["+[w(G.x),w(G.y),w(G.x+G.width),w(G.y+G.height)].join(" ")+"]"}),de.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var Fe=G.pages[1].join(`
`);ut({data:Fe,additionalKeyValues:de,objectId:G.objectNumber}),he("endobj")},Yt=function(){for(var G in Xr)Xr.hasOwnProperty(G)&&Vt(Xr[G])},Ht=function(G,de){var Fe,Le=[],Ke=1/(de-1);for(Fe=0;Fe<1;Fe+=Ke)Le.push(Fe);if(Le.push(1),G[0].offset!=0){var xt={offset:0,color:G[0].color};G.unshift(xt)}if(G[G.length-1].offset!=1){var Pt={offset:1,color:G[G.length-1].color};G.push(Pt)}for(var Jt="",O=0,ee=0;ee<Le.length;ee++){for(Fe=Le[ee];Fe>G[O+1].offset;)O++;var se=G[O].offset,xe=(Fe-se)/(G[O+1].offset-se),ze=G[O].color,st=G[O+1].color;Jt+=te(Math.round((1-xe)*ze[0]+xe*st[0]).toString(16))+te(Math.round((1-xe)*ze[1]+xe*st[1]).toString(16))+te(Math.round((1-xe)*ze[2]+xe*st[2]).toString(16))}return Jt.trim()},Kt=function(G,de){de||(de=21);var Fe=Yr(),Le=Ht(G.colors,de),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+de+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut({data:Le,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),he("endobj"),G.objectNumber=Yr(),he("<< /ShadingType "+G.type),he("/ColorSpace /DeviceRGB");var xt="/Coords ["+w(parseFloat(G.coords[0]))+" "+w(parseFloat(G.coords[1]))+" ";G.type===2?xt+=w(parseFloat(G.coords[2]))+" "+w(parseFloat(G.coords[3])):xt+=w(parseFloat(G.coords[2]))+" "+w(parseFloat(G.coords[3]))+" "+w(parseFloat(G.coords[4]))+" "+w(parseFloat(G.coords[5])),he(xt+="]"),G.matrix&&he("/Matrix ["+G.matrix.toString()+"]"),he("/Function "+Fe+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},_r=function(G,de){var Fe=ta(),Le=Yr();de.push({resourcesOid:Fe,objectOid:Le}),G.objectNumber=Le;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+G.boundingBox.map(w).join(" ")+"]"}),Ke.push({key:"XStep",value:w(G.xStep)}),Ke.push({key:"YStep",value:w(G.yStep)}),Ke.push({key:"Resources",value:Fe+" 0 R"}),G.matrix&&Ke.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),ut({data:G.stream,additionalKeyValues:Ke,objectId:G.objectNumber}),he("endobj")},an=function(G){var de;for(de in jr)jr.hasOwnProperty(de)&&(jr[de]instanceof ep?Kt(jr[de]):jr[de]instanceof Ev&&_r(jr[de],G))},sn=function(G){for(var de in G.objectNumber=Yr(),he("<<"),G)switch(de){case"opacity":he("/ca "+P(G[de]));break;case"stroke-opacity":he("/CA "+P(G[de]))}he(">>"),he("endobj")},dn=function(){var G;for(G in pt)pt.hasOwnProperty(G)&&sn(pt[G])},ds=function(){for(var G in he("/XObject <<"),Xr)Xr.hasOwnProperty(G)&&Xr[G].objectNumber>=0&&he("/"+G+" "+Xr[G].objectNumber+" 0 R");zt.publish("putXobjectDict"),he(">>")},bo=function(){ca.oid=Yr(),he("<<"),he("/Filter /Standard"),he("/V "+ca.v),he("/R "+ca.r),he("/U <"+ca.toHexString(ca.U)+">"),he("/O <"+ca.toHexString(ca.O)+">"),he("/P "+ca.P),he(">>"),he("endobj")},As=function(){for(var G in he("/Font <<"),Cr)Cr.hasOwnProperty(G)&&(f===!1||f===!0&&h.hasOwnProperty(G))&&he("/"+G+" "+Cr[G].objectNumber+" 0 R");he(">>")},Zs=function(){if(Object.keys(jr).length>0){for(var G in he("/Shading <<"),jr)jr.hasOwnProperty(G)&&jr[G]instanceof ep&&jr[G].objectNumber>=0&&he("/"+G+" "+jr[G].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),he(">>")}},Fs=function(G){if(Object.keys(jr).length>0){for(var de in he("/Pattern <<"),jr)jr.hasOwnProperty(de)&&jr[de]instanceof p.TilingPattern&&jr[de].objectNumber>=0&&jr[de].objectNumber<G&&he("/"+de+" "+jr[de].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),he(">>")}},gi=function(){if(Object.keys(pt).length>0){var G;for(G in he("/ExtGState <<"),pt)pt.hasOwnProperty(G)&&pt[G].objectNumber>=0&&he("/"+G+" "+pt[G].objectNumber+" 0 R");zt.publish("putGStateDict"),he(">>")}},xa=function(G){fe(G.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),As(),Zs(),Fs(G.objectOid),gi(),ds(),he(">>"),he("endobj")},ei=function(){var G=[];Tt(),dn(),Yt(),an(G),zt.publish("putResources"),G.forEach(xa),xa({resourcesOid:Ce,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Rd=function(){zt.publish("putAdditionalObjects");for(var G=0;G<ge.length;G++){var de=ge[G];fe(de.objId,!0),he(de.content),he("endobj")}zt.publish("postPutAdditionalObjects")},yh=function(G){Vr[G.fontName]=Vr[G.fontName]||{},Vr[G.fontName][G.fontStyle]=G.id},Qc=function(G,de,Fe,Le,Ke){var xt={id:"F"+(Object.keys(Cr).length+1).toString(10),postScriptName:G,fontName:de,fontStyle:Fe,encoding:Le,isStandardFont:Ke||!1,metadata:{}};return zt.publish("addFont",{font:xt,instance:this}),Cr[xt.id]=xt,yh(xt),xt.id},qA=function(G){for(var de=0,Fe=Xe.length;de<Fe;de++){var Le=Qc.call(this,G[de][0],G[de][1],G[de][2],Xe[de][3],!0);f===!1&&(h[Le]=!0);var Ke=G[de][0].split("-");yh({id:Le,fontName:Ke[0],fontStyle:Ke[1]||""})}zt.publish("addFonts",{fonts:Cr,dictionary:Vr})},vi=function(G){return G.foo=function(){try{return G.apply(this,arguments)}catch(Le){var de=Le.stack||"";~de.indexOf(" at ")&&(de=de.split(" at ")[1]);var Fe="Error in function "+de.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Mr.console)throw new Error(Fe);Mr.console.error(Fe,Le),Mr.alert&&alert(Fe)}},G.foo.bar=G,G.foo},Pd=function(G,de){var Fe,Le,Ke,xt,Pt,Jt,O,ee,se;if(Ke=(de=de||{}).sourceEncoding||"Unicode",Pt=de.outputEncoding,(de.autoencode||Pt)&&Cr[Qt].metadata&&Cr[Qt].metadata[Ke]&&Cr[Qt].metadata[Ke].encoding&&(xt=Cr[Qt].metadata[Ke].encoding,!Pt&&Cr[Qt].encoding&&(Pt=Cr[Qt].encoding),!Pt&&xt.codePages&&(Pt=xt.codePages[0]),typeof Pt=="string"&&(Pt=xt[Pt]),Pt)){for(O=!1,Jt=[],Fe=0,Le=G.length;Fe<Le;Fe++)(ee=Pt[G.charCodeAt(Fe)])?Jt.push(String.fromCharCode(ee)):Jt.push(G[Fe]),Jt[Fe].charCodeAt(0)>>8&&(O=!0);G=Jt.join("")}for(Fe=G.length;O===void 0&&Fe!==0;)G.charCodeAt(Fe-1)>>8&&(O=!0),Fe--;if(!O)return G;for(Jt=de.noBOM?[]:[254,255],Fe=0,Le=G.length;Fe<Le;Fe++){if((se=(ee=G.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(se),Jt.push(ee-(se<<8))}return String.fromCharCode.apply(void 0,Jt)},On=p.__private__.pdfEscape=p.pdfEscape=function(G,de){return Pd(G,de).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xi=p.__private__.beginPage=function(G){je[++dt]=[],Dt[dt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},wl(dt),_e(je[W])},Hc=function(G,de){var Fe,Le,Ke;switch(r=de||r,typeof G=="string"&&(Fe=y(G.toLowerCase()),Array.isArray(Fe)&&(Le=Fe[0],Ke=Fe[1])),Array.isArray(G)&&(Le=G[0]*bt,Ke=G[1]*bt),isNaN(Le)&&(Le=a[0],Ke=a[1]),(Le>14400||Ke>14400)&&(Sa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ke=Math.min(14400,Ke)),a=[Le,Ke],r.substr(0,1)){case"l":Ke>Le&&(a=[Ke,Le]);break;case"p":Le>Ke&&(a=[Ke,Le])}xi(a),JA(Kc),he(bi),ZA!==0&&he(ZA+" J"),Qu!==0&&he(Qu+" j"),zt.publish("addPage",{pageNumber:dt})},Vc=function(G){G>0&&G<=dt&&(je.splice(G,1),Dt.splice(G,1),dt--,W>dt&&(W=dt),this.setPage(W))},wl=function(G){G>0&&G<=dt&&(W=G)},Vn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return je.length-1},zc=function(G,de,Fe){var Le,Ke=void 0;return Fe=Fe||{},G=G!==void 0?G:Cr[Qt].fontName,de=de!==void 0?de:Cr[Qt].fontStyle,Le=G.toLowerCase(),Vr[Le]!==void 0&&Vr[Le][de]!==void 0?Ke=Vr[Le][de]:Vr[G]!==void 0&&Vr[G][de]!==void 0?Ke=Vr[G][de]:Fe.disableWarning===!1&&Sa.warn("Unable to look up font label for font '"+G+"', '"+de+"'. Refer to getFontList() for available fonts."),Ke||Fe.noFallback||(Ke=Vr.times[de])==null&&(Ke=Vr.times.normal),Ke},yo=p.__private__.putInfo=function(){var G=Yr(),de=function(Le){return Le};for(var Fe in d!==null&&(de=ca.encryptor(G,0)),he("<<"),he("/Producer ("+On(de("jsPDF "+pr.version))+")"),Ot)Ot.hasOwnProperty(Fe)&&Ot[Fe]&&he("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+On(de(Ot[Fe]))+")");he("/CreationDate ("+On(de(X))+")"),he(">>"),he("endobj")},ec=p.__private__.putCatalog=function(G){var de=(G=G||{}).rootDictionaryObjId||Ee;switch(Yr(),he("<<"),he("/Type /Catalog"),he("/Pages "+de+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+Oe;Fe.substr(Fe.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&he("/OpenAction [3 0 R /XYZ null null "+P(Oe)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Ze&&he("/PageMode /"+Ze),zt.publish("putCatalog"),he(">>"),he("endobj")},wh=p.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(ie+1)),he("/Root "+ie+" 0 R"),he("/Info "+(ie-1)+" 0 R"),d!==null&&he("/Encrypt "+ca.oid+" 0 R"),he("/ID [ <"+q+"> <"+q+"> ]"),he(">>")},WA=p.__private__.putHeader=function(){he("%PDF-"+g),he("%ºß¬à")},XA=p.__private__.putXRef=function(){var G="0000000000";he("xref"),he("0 "+(ie+1)),he("0000000000 65535 f ");for(var de=1;de<=ie;de++)typeof Ae[de]=="function"?he((G+Ae[de]()).slice(-10)+" 00000 n "):Ae[de]!==void 0?he((G+Ae[de]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},tc=p.__private__.buildDocument=function(){De(),_e(oe),zt.publish("buildDocument"),WA(),tt(),Rd(),ei(),d!==null&&bo(),yo(),ec();var G=ce;return XA(),wh(),he("startxref"),he(""+G),he("%%EOF"),_e(je[W]),oe.join(`
`)},Ld=p.__private__.getBlob=function(G){return new Blob([He(G)],{type:"application/pdf"})},rc=p.output=p.__private__.output=vi(function(G,de){switch(typeof(de=de||{})=="string"?de={filename:de}:de.filename=de.filename||"generated.pdf",G){case void 0:return tc();case"save":p.save(de.filename);break;case"arraybuffer":return He(tc());case"blob":return Ld(tc());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL(Ld(tc()))||void 0;Sa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Le=tc();try{Fe=Dj(Le)}catch{Fe=Dj(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+de.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';de.pdfObjectUrl&&(Ke=de.pdfObjectUrl,xt="");var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+xt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(de)+");<\/script></body></html>",Jt=Mr.open();return Jt!==null&&Jt.document.write(Pt),Jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(de.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+de.filename+'" width="500px" height="400px" /></body></html>',ee=Mr.open();if(ee!==null){ee.document.write(O);var se=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=de.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",de)+'"></iframe></body></html>',ze=Mr.open();if(ze!==null&&(ze.document.write(xe),ze.document.title=de.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",de);default:return null}}),El=function(G){return Array.isArray(Pr)===!0&&Pr.indexOf(G)>-1};switch(n){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=El("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);bt=n}var ca=null;ne(),H();var nc=function(G){return d!==null?ca.encryptor(G,0):function(de){return de}},Cl=p.__private__.getPageInfo=p.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[G].objId,pageNumber:G,pageContext:Dt[G]}},Br=p.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var de in Dt)if(Dt[de].objId===G)break;return Cl(de)},_l=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Dt[W].objId,pageNumber:W,pageContext:Dt[W]}};p.addPage=function(){return Hc.apply(this,arguments),this},p.setPage=function(){return wl.apply(this,arguments),_e.call(this,je[W]),this},p.insertPage=function(G){return this.addPage(),this.movePage(W,G),this},p.movePage=function(G,de){var Fe,Le;if(G>de){Fe=je[G],Le=Dt[G];for(var Ke=G;Ke>de;Ke--)je[Ke]=je[Ke-1],Dt[Ke]=Dt[Ke-1];je[de]=Fe,Dt[de]=Le,this.setPage(de)}else if(G<de){Fe=je[G],Le=Dt[G];for(var xt=G;xt<de;xt++)je[xt]=je[xt+1],Dt[xt]=Dt[xt+1];je[de]=Fe,Dt[de]=Le,this.setPage(de)}return this},p.deletePage=function(){return Vc.apply(this,arguments),this},p.__private__.text=p.text=function(G,de,Fe,Le,Ke){var xt,Pt,Jt,O,ee,se,xe,ze,st,Mt=(Le=Le||{}).scope||this;if(typeof G=="number"&&typeof de=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var Tr=Fe;Fe=de,de=G,G=Tr}if(arguments[3]instanceof $t?(C("The transform parameter of text() with a Matrix value"),st=Ke):(Jt=arguments[4],O=arguments[5],pa(xe=arguments[3])==="object"&&xe!==null||(typeof Jt=="string"&&(O=Jt,Jt=null),typeof xe=="string"&&(O=xe,xe=null),typeof xe=="number"&&(Jt=xe,xe=null),Le={flags:xe,angle:Jt,align:O})),isNaN(de)||isNaN(Fe)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return Mt;var bn="",Gr=!1,zn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:xn,ra=Mt.internal.scaleFactor;function Bl(hn){return hn=hn.split("	").join(Array(Le.TabLen||9).join(" ")),On(hn,xe)}function Ja(hn){for(var mn,ba=hn.concat(),Za=[],Il=ba.length;Il--;)typeof(mn=ba.shift())=="string"?Za.push(mn):Array.isArray(hn)&&(mn.length===1||mn[1]===void 0&&mn[2]===void 0)?Za.push(mn[0]):Za.push([mn[0],mn[1],mn[2]]);return Za}function _o(hn,mn){var ba;if(typeof hn=="string")ba=mn(hn)[0];else if(Array.isArray(hn)){for(var Za,Il,Jd=hn.concat(),Zd=[],Gu=Jd.length;Gu--;)typeof(Za=Jd.shift())=="string"?Zd.push(mn(Za)[0]):Array.isArray(Za)&&typeof Za[0]=="string"&&(Il=mn(Za[0],Za[1],Za[2]),Zd.push([Il[0],Il[1],Il[2]]));ba=Zd}return ba}var Jc=!1,Vd=!0;if(typeof G=="string")Jc=!0;else if(Array.isArray(G)){var Sh=G.concat();Pt=[];for(var ef,Os=Sh.length;Os--;)(typeof(ef=Sh.shift())!="string"||Array.isArray(ef)&&typeof ef[0]!="string")&&(Vd=!1);Jc=Vd}if(Jc===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var zd=ye/Mt.internal.scaleFactor,tf=zd*(zn-1);switch(Le.baseline){case"bottom":Fe-=tf;break;case"top":Fe+=zd-tf;break;case"hanging":Fe+=zd-2*tf;break;case"middle":Fe+=zd/2-tf}if((se=Le.maxWidth||0)>0&&(typeof G=="string"?G=Mt.splitTextToSize(G,se):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce(function(hn,mn){return hn.concat(Mt.splitTextToSize(mn,se))},[]))),xt={text:G,x:de,y:Fe,options:Le,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:Cr,activeFontSize:ye}},zt.publish("preProcessText",xt),G=xt.text,Jt=(Le=xt.options).angle,!(st instanceof $t)&&Jt&&typeof Jt=="number"){Jt*=Math.PI/180,Le.rotationDirection===0&&(Jt=-Jt),S===_.ADVANCED&&(Jt=-Jt);var rf=Math.cos(Jt),Nh=Math.sin(Jt);st=new $t(rf,Nh,-Nh,rf,0,0)}else Jt&&Jt instanceof $t&&(st=Jt);S!==_.ADVANCED||st||(st=en),(ee=Le.charSpace||Uu)!==void 0&&(bn+=w(T(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(bn+=w(100*ze)+` Tz
`),Le.lang;var So=-1,y1=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Em=Mt.internal.getCurrentPageInfo().pageContext;switch(y1){case 0:case!1:case"fill":So=0;break;case 1:case!0:case"stroke":So=1;break;case 2:case"fillThenStroke":So=2;break;case 3:case"invisible":So=3;break;case 4:case"fillAndAddForClipping":So=4;break;case 5:case"strokeAndAddPathForClipping":So=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":So=6;break;case 7:case"addToPathForClipping":So=7}var ug=Em.usedRenderingMode!==void 0?Em.usedRenderingMode:-1;So!==-1?bn+=So+` Tr
`:ug!==-1&&(bn+=`0 Tr
`),So!==-1&&(Em.usedRenderingMode=So),O=Le.align||"left";var Tl,ti=ye*zn,$d=Mt.internal.pageSize.getWidth(),Cm=Cr[Qt];ee=Le.charSpace||Uu,se=Le.maxWidth||0,xe=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var $u=[],Kd=function(hn){return Mt.getStringUnitWidth(hn,{font:Cm,charSpace:ee,fontSize:ye,doKerning:!1})*ye/ra};if(Object.prototype.toString.call(G)==="[object Array]"){var no;Pt=Ja(G),O!=="left"&&(Tl=Pt.map(Kd));var yi,Gd=0;if(O==="right"){de-=Tl[0],G=[],Os=Pt.length;for(var No=0;No<Os;No++)No===0?(yi=Oi(de),no=hs(Fe)):(yi=T(Gd-Tl[No]),no=-ti),G.push([Pt[No],yi,no]),Gd=Tl[No]}else if(O==="center"){de-=Tl[0]/2,G=[],Os=Pt.length;for(var oc=0;oc<Os;oc++)oc===0?(yi=Oi(de),no=hs(Fe)):(yi=T((Gd-Tl[oc])/2),no=-ti),G.push([Pt[oc],yi,no]),Gd=Tl[oc]}else if(O==="left"){G=[],Os=Pt.length;for(var Zc=0;Zc<Os;Zc++)G.push(Pt[Zc])}else if(O==="justify"&&Cm.encoding==="Identity-H"){G=[],Os=Pt.length,se=se!==0?se:$d;for(var lc=0,Va=0;Va<Os;Va++)if(no=Va===0?hs(Fe):-ti,yi=Va===0?Oi(de):lc,Va<Os-1){var cc=T((se-Tl[Va])/(Pt[Va].split(" ").length-1)),ms=Pt[Va].split(" ");G.push([ms[0]+" ",yi,no]),lc=0;for(var ko=1;ko<ms.length;ko++){var nf=(Kd(ms[ko-1]+" "+ms[ko])-Kd(ms[ko]))*ra+cc;ko==ms.length-1?G.push([ms[ko],nf,0]):G.push([ms[ko]+" ",nf,0]),lc-=nf}}else G.push([Pt[Va],yi,no]);G.push(["",lc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],Os=Pt.length,se=se!==0?se:$d,Va=0;Va<Os;Va++)no=Va===0?hs(Fe):-ti,yi=Va===0?Oi(de):0,Va<Os-1?$u.push(w(T((se-Tl[Va])/(Pt[Va].split(" ").length-1)))):$u.push(0),G.push([Pt[Va],yi,no])}}var eu=typeof Le.R2L=="boolean"?Le.R2L:qe;eu===!0&&(G=_o(G,function(hn,mn,ba){return[hn.split("").reverse().join(""),mn,ba]})),xt={text:G,x:de,y:Fe,options:Le,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:Cr,activeFontSize:ye}},zt.publish("postProcessText",xt),G=xt.text,Gr=xt.mutex.isHex||!1;var kh=Cr[Qt].encoding;kh!=="WinAnsiEncoding"&&kh!=="StandardEncoding"||(G=_o(G,function(hn,mn,ba){return[Bl(hn),mn,ba]})),Pt=Ja(G),G=[];for(var qd,Wd,Xd,af=0,Bh=1,Yd=Array.isArray(Pt[0])?Bh:af,Ku="",sf=function(hn,mn,ba){var Za="";return ba instanceof $t?(ba=typeof Le.angle=="number"?tn(ba,new $t(1,0,0,1,hn,mn)):tn(new $t(1,0,0,1,hn,mn),ba),S===_.ADVANCED&&(ba=tn(new $t(1,0,0,-1,0,0),ba)),Za=ba.join(" ")+` Tm
`):Za=w(hn)+" "+w(mn)+` Td
`,Za},za=0;za<Pt.length;za++){switch(Ku="",Yd){case Bh:Xd=(Gr?"<":"(")+Pt[za][0]+(Gr?">":")"),qd=parseFloat(Pt[za][1]),Wd=parseFloat(Pt[za][2]);break;case af:Xd=(Gr?"<":"(")+Pt[za]+(Gr?">":")"),qd=Oi(de),Wd=hs(Fe)}$u!==void 0&&$u[za]!==void 0&&(Ku=$u[za]+` Tw
`),za===0?G.push(Ku+sf(qd,Wd,st)+Xd):Yd===af?G.push(Ku+Xd):Yd===Bh&&G.push(Ku+sf(qd,Wd,st)+Xd)}G=Yd===af?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var sl=`BT
/`;return sl+=Qt+" "+ye+` Tf
`,sl+=w(ye*zn)+` TL
`,sl+=sc+`
`,sl+=bn,sl+=G,he(sl+="ET"),h[Qt]=!0,Mt};var Eh=p.__private__.clip=p.clip=function(G){return he(G==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Eh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return he("n"),this};var ji=p.__private__.isValidStyle=function(G){var de=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(de=!0),de};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(G){return ji(G)&&(u=G),this};var wo=p.__private__.getStyle=p.getStyle=function(G){var de=u;switch(G){case"D":case"S":de="S";break;case"F":de="f";break;case"FD":case"DF":de="B";break;case"f":case"f*":case"B":case"B*":de=G}return de},ro=p.close=function(){return he("h"),this};p.stroke=function(){return he("S"),this},p.fill=function(G){return Sl("f",G),this},p.fillEvenOdd=function(G){return Sl("f*",G),this},p.fillStroke=function(G){return Sl("B",G),this},p.fillStrokeEvenOdd=function(G){return Sl("B*",G),this};var Sl=function(G,de){pa(de)==="object"?ac(de,G):he(G)},Eo=function(G){G===null||S===_.ADVANCED&&G===void 0||(G=wo(G),he(G))};function $c(G,de,Fe,Le,Ke){var xt=new Ev(de||this.boundingBox,Fe||this.xStep,Le||this.yStep,this.gState,Ke||this.matrix);xt.stream=this.stream;var Pt=G+"$$"+this.cloneIndex+++"$$";return cr(Pt,xt),xt}var ac=function(G,de){var Fe=vt[G.key],Le=jr[Fe];if(Le instanceof ep)he("q"),he(YA(de)),Le.gState&&p.setGState(Le.gState),he(G.matrix.toString()+" cm"),he("/"+Fe+" sh"),he("Q");else if(Le instanceof Ev){var Ke=new $t(1,0,0,-1,0,Di());G.matrix&&(Ke=Ke.multiply(G.matrix||en),Fe=$c.call(Le,G.key,G.boundingBox,G.xStep,G.yStep,Ke).id),he("q"),he("/Pattern cs"),he("/"+Fe+" scn"),Le.gState&&p.setGState(Le.gState),he(de),he("Q")}},YA=function(G){switch(G){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Co=p.moveTo=function(G,de){return he(w(T(G))+" "+w(R(de))+" m"),this},Fi=p.lineTo=function(G,de){return he(w(T(G))+" "+w(R(de))+" l"),this},Nl=p.curveTo=function(G,de,Fe,Le,Ke,xt){return he([w(T(G)),w(R(de)),w(T(Fe)),w(R(Le)),w(T(Ke)),w(R(xt)),"c"].join(" ")),this};p.__private__.line=p.line=function(G,de,Fe,Le,Ke){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!ji(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return S===_.COMPAT?this.lines([[Fe-G,Le-de]],G,de,[1,1],Ke||"S"):this.lines([[Fe-G,Le-de]],G,de,[1,1]).stroke()},p.__private__.lines=p.lines=function(G,de,Fe,Le,Ke,xt){var Pt,Jt,O,ee,se,xe,ze,st,Mt,Tr,bn,Gr;if(typeof G=="number"&&(Gr=Fe,Fe=de,de=G,G=Gr),Le=Le||[1,1],xt=xt||!1,isNaN(de)||isNaN(Fe)||!Array.isArray(G)||!Array.isArray(Le)||!ji(Ke)||typeof xt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Co(de,Fe),Pt=Le[0],Jt=Le[1],ee=G.length,Tr=de,bn=Fe,O=0;O<ee;O++)(se=G[O]).length===2?(Tr=se[0]*Pt+Tr,bn=se[1]*Jt+bn,Fi(Tr,bn)):(xe=se[0]*Pt+Tr,ze=se[1]*Jt+bn,st=se[2]*Pt+Tr,Mt=se[3]*Jt+bn,Tr=se[4]*Pt+Tr,bn=se[5]*Jt+bn,Nl(xe,ze,st,Mt,Tr,bn));return xt&&ro(),Eo(Ke),this},p.path=function(G){for(var de=0;de<G.length;de++){var Fe=G[de],Le=Fe.c;switch(Fe.op){case"m":Co(Le[0],Le[1]);break;case"l":Fi(Le[0],Le[1]);break;case"c":Nl.apply(this,Le);break;case"h":ro()}}return this},p.__private__.rect=p.rect=function(G,de,Fe,Le,Ke){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!ji(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return S===_.COMPAT&&(Le=-Le),he([w(T(G)),w(R(de)),w(T(Fe)),w(T(Le)),"re"].join(" ")),Eo(Ke),this},p.__private__.triangle=p.triangle=function(G,de,Fe,Le,Ke,xt,Pt){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ke)||isNaN(xt)||!ji(Pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-G,Le-de],[Ke-Fe,xt-Le],[G-Ke,de-xt]],G,de,[1,1],Pt,!0),this},p.__private__.roundedRect=p.roundedRect=function(G,de,Fe,Le,Ke,xt,Pt){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ke)||isNaN(xt)||!ji(Pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Jt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*Fe),xt=Math.min(xt,.5*Le),this.lines([[Fe-2*Ke,0],[Ke*Jt,0,Ke,xt-xt*Jt,Ke,xt],[0,Le-2*xt],[0,xt*Jt,-Ke*Jt,xt,-Ke,xt],[2*Ke-Fe,0],[-Ke*Jt,0,-Ke,-xt*Jt,-Ke,-xt],[0,2*xt-Le],[0,-xt*Jt,Ke*Jt,-xt,Ke,-xt]],G+Ke,de,[1,1],Pt,!0),this},p.__private__.ellipse=p.ellipse=function(G,de,Fe,Le,Ke){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!ji(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xt=4/3*(Math.SQRT2-1)*Fe,Pt=4/3*(Math.SQRT2-1)*Le;return Co(G+Fe,de),Nl(G+Fe,de-Pt,G+xt,de-Le,G,de-Le),Nl(G-xt,de-Le,G-Fe,de-Pt,G-Fe,de),Nl(G-Fe,de+Pt,G-xt,de+Le,G,de+Le),Nl(G+xt,de+Le,G+Fe,de+Pt,G+Fe,de),Eo(Ke),this},p.__private__.circle=p.circle=function(G,de,Fe,Le){if(isNaN(G)||isNaN(de)||isNaN(Fe)||!ji(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,de,Fe,Fe,Le)},p.setFont=function(G,de,Fe){return Fe&&(de=F(de,Fe)),Qt=zc(G,de,{disableWarning:!1}),this};var fs=p.__private__.getFont=p.getFont=function(){return Cr[zc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var G,de,Fe={};for(G in Vr)if(Vr.hasOwnProperty(G))for(de in Fe[G]=[],Vr[G])Vr[G].hasOwnProperty(de)&&Fe[G].push(de);return Fe},p.addFont=function(G,de,Fe,Le,Ke){var xt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xt.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&xt.indexOf(arguments[3])==-1&&(Fe=F(Fe,Le)),Ke=Ke||"Identity-H",Qc.call(this,G,de,Fe,Ke)};var xn,Kc=e.lineWidth||.200025,kl=p.__private__.getLineWidth=p.getLineWidth=function(){return Kc},JA=p.__private__.setLineWidth=p.setLineWidth=function(G){return Kc=G,he(w(T(G))+" w"),this};p.__private__.setLineDash=pr.API.setLineDash=pr.API.setLineDashPattern=function(G,de){if(G=G||[],de=de||0,isNaN(de)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map(function(Fe){return w(T(Fe))}).join(" "),de=w(T(de)),he("["+G+"] "+de+" d"),this};var Lu=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*xn};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*xn};var Mu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(xn=G),this},al=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return xn};Mu(e.lineHeight);var Oi=p.__private__.getHorizontalCoordinate=function(G){return T(G)},hs=p.__private__.getVerticalCoordinate=function(G){return S===_.ADVANCED?G:Dt[W].mediaBox.topRightY-Dt[W].mediaBox.bottomLeftY-T(G)},Ch=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(G){return w(Oi(G))},Gc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(G){return w(hs(G))},bi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ne(bi)},p.__private__.setStrokeColor=p.setDrawColor=function(G,de,Fe,Le){return bi=Te({ch1:G,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"draw",precision:2}),he(bi),this};var qc=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ne(qc)},p.__private__.setFillColor=p.setFillColor=function(G,de,Fe,Le){return qc=Te({ch1:G,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"fill",precision:2}),he(qc),this};var sc=e.textColor||"0 g",Md=p.__private__.getTextColor=p.getTextColor=function(){return Ne(sc)};p.__private__.setTextColor=p.setTextColor=function(G,de,Fe,Le){return sc=Te({ch1:G,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"text",precision:3}),this};var Uu=e.charSpace,Ud=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Uu||0)};p.__private__.setCharSpace=p.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Uu=G,this};var ZA=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(G){var de=p.CapJoinStyles[G];if(de===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ZA=de,he(de+" J"),this};var Qu=0;p.__private__.setLineJoin=p.setLineJoin=function(G){var de=p.CapJoinStyles[G];if(de===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qu=de,he(de+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(w(T(G))+" M"),this},p.GState=eS,p.setGState=function(G){(G=typeof G=="string"?pt[Je[G]]:Wc(null,G)).equals(gt)||(he("/"+G.id+" gs"),gt=G)};var Wc=function(G,de){if(!G||!Je[G]){var Fe=!1;for(var Le in pt)if(pt.hasOwnProperty(Le)&&pt[Le].equals(de)){Fe=!0;break}if(Fe)de=pt[Le];else{var Ke="GS"+(Object.keys(pt).length+1).toString(10);pt[Ke]=de,de.id=Ke}return G&&(Je[G]=de.id),zt.publish("addGState",de),de}};p.addGState=function(G,de){return Wc(G,de),this},p.saveGraphicsState=function(){return he("q"),Fn.push({key:Qt,size:ye,color:sc}),this},p.restoreGraphicsState=function(){he("Q");var G=Fn.pop();return Qt=G.key,ye=G.size,sc=G.color,gt=null,this},p.setCurrentTransformationMatrix=function(G){return he(G.toString()+" cm"),this},p.comment=function(G){return he("#"+G),this};var Hu=function(G,de){var Fe=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(xt){isNaN(xt)||(Fe=parseFloat(xt))}});var Le=de||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(xt){isNaN(xt)||(Le=parseFloat(xt))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(xt){Ke=xt.toString()}}),this},Qd=function(G,de,Fe,Le){Hu.call(this,G,de),this.type="rect";var Ke=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Pt){isNaN(Pt)||(Ke=parseFloat(Pt))}});var xt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xt},set:function(Pt){isNaN(Pt)||(xt=parseFloat(Pt))}}),this},Vu=function(){this.page=dt,this.currentPage=W,this.pages=je.slice(0),this.pagesContext=Dt.slice(0),this.x=Nr,this.y=rr,this.matrix=nn,this.width=Yc(W),this.height=Di(W),this.outputDestination=Se,this.id="",this.objectNumber=-1};Vu.prototype.restore=function(){dt=this.page,W=this.currentPage,Dt=this.pagesContext,je=this.pages,Nr=this.x,rr=this.y,nn=this.matrix,zu(W,this.width),Hd(W,this.height),Se=this.outputDestination};var Xc=function(G,de,Fe,Le,Ke){vn.push(new Vu),dt=W=0,je=[],Nr=G,rr=de,nn=Ke,xi([Fe,Le])},_h=function(G){if(gn[G])vn.pop().restore();else{var de=new Vu,Fe="Xo"+(Object.keys(Xr).length+1).toString(10);de.id=Fe,gn[G]=Fe,Xr[Fe]=de,zt.publish("addFormObject",de),vn.pop().restore()}};for(var ic in p.beginFormObject=function(G,de,Fe,Le,Ke){return Xc(G,de,Fe,Le,Ke),this},p.endFormObject=function(G){return _h(G),this},p.doFormObject=function(G,de){var Fe=Xr[gn[G]];return he("q"),he(de.toString()+" cm"),he("/"+Fe.id+" Do"),he("Q"),this},p.getFormObject=function(G){var de=Xr[gn[G]];return{x:de.x,y:de.y,width:de.width,height:de.height,matrix:de.matrix}},p.save=function(G,de){return G=G||"generated.pdf",(de=de||{}).returnPromise=de.returnPromise||!1,de.returnPromise===!1?(qm(Ld(tc()),G),typeof qm.unload=="function"&&Mr.setTimeout&&setTimeout(qm.unload,911),this):new Promise(function(Fe,Le){try{var Ke=qm(Ld(tc()),G);typeof qm.unload=="function"&&Mr.setTimeout&&setTimeout(qm.unload,911),Fe(Ke)}catch(xt){Le(xt.message)}})},pr.API)pr.API.hasOwnProperty(ic)&&(ic==="events"&&pr.API.events.length?function(G,de){var Fe,Le,Ke;for(Ke=de.length-1;Ke!==-1;Ke--)Fe=de[Ke][0],Le=de[Ke][1],G.subscribe.apply(G,[Fe].concat(typeof Le=="function"?[Le]:Le))}(zt,pr.API.events):p[ic]=pr.API[ic]);var Yc=p.getPageWidth=function(G){return(Dt[G=G||W].mediaBox.topRightX-Dt[G].mediaBox.bottomLeftX)/bt},zu=p.setPageWidth=function(G,de){Dt[G].mediaBox.topRightX=de*bt+Dt[G].mediaBox.bottomLeftX},Di=p.getPageHeight=function(G){return(Dt[G=G||W].mediaBox.topRightY-Dt[G].mediaBox.bottomLeftY)/bt},Hd=p.setPageHeight=function(G,de){Dt[G].mediaBox.topRightY=de*bt+Dt[G].mediaBox.bottomLeftY};return p.internal={pdfEscape:On,getStyle:wo,getFont:fs,getFontSize:Pe,getCharSpace:Ud,getTextColor:Md,getLineHeight:Lu,getLineHeightFactor:al,getLineWidth:kl,write:Ie,getHorizontalCoordinate:Oi,getVerticalCoordinate:hs,getCoordinateString:Ch,getVerticalCoordinateString:Gc,collections:{},newObject:Yr,newAdditionalObject:Be,newObjectDeferred:ta,newObjectDeferredBegin:fe,getFilters:Ye,putStream:ut,events:zt,scaleFactor:bt,pageSize:{getWidth:function(){return Yc(W)},setWidth:function(G){zu(W,G)},getHeight:function(){return Di(W)},setHeight:function(G){Hd(W,G)}},encryptionOptions:d,encryption:ca,getEncryptor:nc,output:rc,getNumberOfPages:Vn,pages:je,out:he,f2:P,f3:D,getPageInfo:Cl,getPageInfoByObjId:Br,getCurrentPageInfo:_l,getPDFVersion:v,Point:Hu,Rectangle:Qd,Matrix:$t,hasHotfix:El},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Yc(W)},set:function(G){zu(W,G)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Di(W)},set:function(G){Hd(W,G)},enumerable:!0,configurable:!0}),qA.call(p,Xe),Qt="F1",Hc(a,r),zt.publish("initialized"),p}mv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},mv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},mv.prototype.processOwnerPassword=function(e,t){return Pj(Rj(t).substr(0,5),e)},mv.prototype.encryptor=function(e,t){var r=Rj(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Pj(r,n)}},eS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||pa(e)!==pa(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},pr.API={events:[]},pr.version="2.5.2";var ys=pr.API,fD=1,Zp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qg=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jr=function(e){return e.toFixed(2)},n0=function(e){return e.toFixed(5)};ys.__acroform__={};var Jl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},F9=function(e){return e*fD},mA=function(e){var t=new rZ,r=fr.internal.getHeight(e)||0,n=fr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jr(n)),Number(Jr(r))],t},Awe=ys.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},fwe=ys.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},hwe=ys.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ks=ys.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hwe(e,t-1)},Gs=ys.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Awe(e,t-1)},qs=ys.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fwe(e,t-1)},mwe=ys.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(Jr(l.lowerLeft_X)),Number(Jr(l.lowerLeft_Y)),Number(Jr(l.upperRight_X)),Number(Jr(l.upperRight_Y))]},pwe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Lj(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Jr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=mA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},Lj=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=fr.internal.getHeight(e)||0;i=i<0?-i:i;var o=fr.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(D,T,U){if(D+1<a.length){var R=T+" "+a[D+1][0];return TE(R,e,U).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=TE("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,v=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+TE(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",_=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var k=!1;if(a[S].length!==1&&b!==a[S].length-1){if((f+2)*(_+2)+2>i)continue e;y+=a[S][b],k=!0,v=S,S--}else{y=(y+=a[S][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var B=parseInt(S),F=l(B,y,s),w=S>=a.length-1;if(F&&!w){y+=" ",b=0;continue}if(F||w){if(w)v=B;else if(e.multiline&&(f+2)*(_+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(_+2)+2>i)continue e;v=B}}for(var C="",N=g;N<=v;N++){var P=a[N];if(e.multiline){if(N===v){C+=P[b]+" ",b=(b+1)%P.length;continue}if(N===g){C+=P[P.length-1]+" ";continue}}C+=P[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,d=TE(C,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=Jr(u)+" "+Jr(p)+` Td
`,t+="("+Zp(C)+`) Tj
`,t+=-Jr(u)+` 0 Td
`,p=-(s+2),d=0,g=k?v:v+1,_++,y=""}break}return n.text=t,n.fontSize=s,n},TE=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},gwe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vwe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},xwe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),pa(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},bwe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Id.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(gwe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fD=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new nZ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&vwe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=mwe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=fr.createDefaultAppearanceStream(o),pa(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=pwe(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&xwe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},tZ=ys.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),pa(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Zp(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},PB=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Zp(n(e))+")"},NA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};NA.prototype.toString=function(){return this.objId+" 0 R"},NA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},NA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:tZ(a,this.objId,this.scope)}):a instanceof NA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var rZ=function(){NA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Jl(rZ,NA);var nZ=function(){NA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Zp(r(e))+")"}},set:function(r){e=r}})};Jl(nZ,NA);var Id=function e(){NA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ks(t,3)},set:function(y){y?this.F=Gs(t,3):this.F=qs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof tS)return;s="FieldObject"+e.FieldNum++}var y=function(_){return _};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Zp(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/fD:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof tS||this instanceof pp))return PB(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof $i?h:PB(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof $i?y:y.substr(0,1)==="("?Qg(y.substr(1,y.length-2)):Qg(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?Qg(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof $i?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $i?p:PB(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof $i?y:y.substr(0,1)==="("?Qg(y.substr(1,y.length-2)):Qg(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?Qg(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof $i?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,1)},set:function(y){y?this.Ff=Gs(this.Ff,1):this.Ff=qs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,2)},set:function(y){y?this.Ff=Gs(this.Ff,2):this.Ff=qs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,3)},set:function(y){y?this.Ff=Gs(this.Ff,3):this.Ff=qs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Jl(Id,NA);var Qv=function(){Id.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return tZ(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,u=[];l=i.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,18)},set:function(r){r?this.Ff=Gs(this.Ff,18):this.Ff=qs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Gs(this.Ff,19):this.Ff=qs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,20)},set:function(r){r?(this.Ff=Gs(this.Ff,20),t.sort()):this.Ff=qs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,22)},set:function(r){r?this.Ff=Gs(this.Ff,22):this.Ff=qs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(r){r?this.Ff=Gs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,27)},set:function(r){r?this.Ff=Gs(this.Ff,27):this.Ff=qs(this.Ff,27)}}),this.hasAppearanceStream=!1};Jl(Qv,Id);var Hv=function(){Qv.call(this),this.fontName="helvetica",this.combo=!1};Jl(Hv,Qv);var Vv=function(){Hv.call(this),this.combo=!0};Jl(Vv,Hv);var n_=function(){Vv.call(this),this.edit=!0};Jl(n_,Vv);var $i=function(){Id.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,15)},set:function(r){r?this.Ff=Gs(this.Ff,15):this.Ff=qs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,16)},set:function(r){r?this.Ff=Gs(this.Ff,16):this.Ff=qs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,17)},set:function(r){r?this.Ff=Gs(this.Ff,17):this.Ff=qs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(r){r?this.Ff=Gs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Zp(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){pa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Jl($i,Id);var a_=function(){$i.call(this),this.pushButton=!0};Jl(a_,$i);var zv=function(){$i.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Jl(zv,$i);var tS=function(){var e,t;Id.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Zp(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){pa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=fr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Jl(tS,Id),zv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},zv.prototype.createOption=function(e){var t=new tS;return t.Parent=this,t.optionName=e,this.Kids.push(t),ywe.call(this.scope,t),t};var s_=function(){$i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=fr.CheckBox.createAppearanceStream()};Jl(s_,$i);var pp=function(){Id.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,13)},set:function(t){t?this.Ff=Gs(this.Ff,13):this.Ff=qs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,21)},set:function(t){t?this.Ff=Gs(this.Ff,21):this.Ff=qs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(t){t?this.Ff=Gs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,24)},set:function(t){t?this.Ff=Gs(this.Ff,24):this.Ff=qs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,25)},set:function(t){t?this.Ff=Gs(this.Ff,25):this.Ff=qs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(t){t?this.Ff=Gs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Jl(pp,Id);var i_=function(){pp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,14)},set:function(e){e?this.Ff=Gs(this.Ff,14):this.Ff=qs(this.Ff,14)}}),this.password=!0};Jl(i_,pp);var fr={CheckBox:{createAppearanceStream:function(){return{N:{On:fr.CheckBox.YesNormal},D:{On:fr.CheckBox.YesPushDown,Off:fr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=mA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=Lj(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Jr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=mA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=fr.internal.getHeight(e),i=fr.internal.getWidth(e),o=Lj(e,e.caption);return a.push("1 g"),a.push("0 0 "+Jr(i)+" "+Jr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Jr(i-1)+" "+Jr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Jr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=mA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:fr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=fr.RadioButton.Circle.YesNormal,t.D[e]=fr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=mA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=fr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+n0(fr.internal.getWidth(e)/2)+" "+n0(fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=mA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*fr.internal.Bezier_C).toFixed(5)),i=Number((n*fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+n0(fr.internal.getWidth(e)/2)+" "+n0(fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+n0(fr.internal.getWidth(e)/2)+" "+n0(fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=mA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+n0(fr.internal.getWidth(e)/2)+" "+n0(fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:fr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=fr.RadioButton.Cross.YesNormal,t.D[e]=fr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=mA(e);t.scope=e.scope;var r=[],n=fr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jr(fr.internal.getWidth(e)-2)+" "+Jr(fr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jr(n.x1.x)+" "+Jr(n.x1.y)+" m"),r.push(Jr(n.x2.x)+" "+Jr(n.x2.y)+" l"),r.push(Jr(n.x4.x)+" "+Jr(n.x4.y)+" m"),r.push(Jr(n.x3.x)+" "+Jr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=mA(e);t.scope=e.scope;var r=fr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Jr(fr.internal.getWidth(e)-2)+" "+Jr(fr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Jr(r.x1.x)+" "+Jr(r.x1.y)+" m"),n.push(Jr(r.x2.x)+" "+Jr(r.x2.y)+" l"),n.push(Jr(r.x4.x)+" "+Jr(r.x4.y)+" m"),n.push(Jr(r.x3.x)+" "+Jr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=mA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};fr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=fr.internal.getWidth(e),r=fr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},fr.internal.getWidth=function(e){var t=0;return pa(e)==="object"&&(t=F9(e.Rect[2])),t},fr.internal.getHeight=function(e){var t=0;return pa(e)==="object"&&(t=F9(e.Rect[3])),t};var ywe=ys.addField=function(e){if(bwe(this,e),!(e instanceof Id))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ys.AcroFormChoiceField=Qv,ys.AcroFormListBox=Hv,ys.AcroFormComboBox=Vv,ys.AcroFormEditBox=n_,ys.AcroFormButton=$i,ys.AcroFormPushButton=a_,ys.AcroFormRadioButton=zv,ys.AcroFormCheckBox=s_,ys.AcroFormTextField=pp,ys.AcroFormPasswordField=i_,ys.AcroFormAppearance=fr,ys.AcroForm={ChoiceField:Qv,ListBox:Hv,ComboBox:Vv,EditBox:n_,Button:$i,PushButton:a_,RadioButton:zv,CheckBox:s_,TextField:pp,PasswordField:i_,Appearance:fr},pr.AcroForm={ChoiceField:Qv,ListBox:Hv,ComboBox:Vv,EditBox:n_,Button:$i,PushButton:a_,RadioButton:zv,CheckBox:s_,TextField:pp,PasswordField:i_,Appearance:fr};pr.AcroForm;function aZ(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,T){var U,R,X,q,Z,H=t;if((T=T||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(F(D))for(Z in r)for(X=r[Z],U=0;U<X.length;U+=1){for(q=!0,R=0;R<X[U].length;R+=1)if(X[U][R]!==void 0&&X[U][R]!==D[R]){q=!1;break}if(q===!0){H=Z;break}}else for(Z in r)for(X=r[Z],U=0;U<X.length;U+=1){for(q=!0,R=0;R<X[U].length;R+=1)if(X[U][R]!==void 0&&X[U][R]!==D.charCodeAt(R)){q=!1;break}if(q===!0){H=Z;break}}return H===t&&T!==t&&(H=T),H},a=function D(T){for(var U=this.internal.write,R=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:T.width}),q.push({key:"Height",value:T.height}),T.colorSpace===b.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===b.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var Z="",H=0,V=T.transparency.length;H<V;H++)Z+=T.transparency[H]+" "+T.transparency[H]+" ";q.push({key:"Mask",value:"["+Z+"]"})}T.sMask!==void 0&&q.push({key:"SMask",value:T.objectId+1+" 0 R"});var K=T.filter!==void 0?["/"+T.filter]:void 0;if(R({data:T.data,additionalKeyValues:q,alreadyAppliedFilters:K,objectId:T.objectId}),U("endobj"),"sMask"in T&&T.sMask!==void 0){var ne="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,L={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:ne,data:T.sMask};"filter"in T&&(L.filter=T.filter),D.call(this,L)}if(T.colorSpace===b.INDEXED){var W=this.internal.newObject();R({data:C(new Uint8Array(T.palette)),objectId:W}),U("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var T in D)a.call(this,D[T])},i=function(){var D,T=this.internal.collections.addImage_images,U=this.internal.write;for(var R in T)U("/I"+(D=T[R]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return pa(D)==="object"&&D.nodeType===1},h=function(D,T){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var U=""+D.getAttribute("src");if(U.indexOf("data:image/")===0)return dy(unescape(U).split("base64,").pop());var R=e.loadFile(U,!0);if(R!==void 0)return R}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var X;switch(T){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return dy(D.toDataURL(X,1).split("base64,").pop())}},p=function(D){var T=this.internal.collections.addImage_images;if(T){for(var U in T)if(D===T[U].alias)return T[U]}},g=function(D,T,U){return D||T||(D=-96,T=-96),D<0&&(D=-1*U.width*72/D/this.internal.scaleFactor),T<0&&(T=-1*U.height*72/T/this.internal.scaleFactor),D===0&&(D=T*U.width/U.height),T===0&&(T=D*U.height/U.width),[D,T]},v=function(D,T,U,R,X,q){var Z=g.call(this,U,R,X),H=this.internal.getCoordinateString,V=this.internal.getVerticalCoordinateString,K=l.call(this);if(U=Z[0],R=Z[1],K[X.index]=X,q){q*=Math.PI/180;var ne=Math.cos(q),L=Math.sin(q),W=function(te){return te.toFixed(4)},J=[W(ne),W(L),W(-1*L),W(ne),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,H(D),V(T+R),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([H(U),"0","0",H(R),"0","0","cm"].join(" "))):this.internal.write([H(U),"0","0",H(R),H(D),V(T+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(D){var T,U,R=0;if(typeof D=="string")for(U=D.length,T=0;T<U;T++)R=(R<<5)-R+D.charCodeAt(T),R|=0;else if(F(D))for(U=D.byteLength/2,T=0;T<U;T++)R=(R<<5)-R+D[T],R|=0;return R},S=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var T=!0;return D.length===0&&(T=!1),D.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(T=!1),T},k=e.__addimage__.extractImageFromDataUrl=function(D){var T=(D=D||"").split("base64,"),U=null;if(T.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(R)&&(U={mimeType:R[1],charset:R[2],data:T[1]})}return U},B=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return B()&&D instanceof ArrayBuffer};var F=e.__addimage__.isArrayBufferView=function(D){return B()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(D){for(var T=D.length,U=new Uint8Array(T),R=0;R<T;R++)U[R]=D.charCodeAt(R);return U},C=e.__addimage__.arrayBufferToBinaryString=function(D){for(var T="",U=F(D)?D:new Uint8Array(D),R=0;R<U.length;R+=8192)T+=String.fromCharCode.apply(null,U.subarray(R,R+8192));return T};e.addImage=function(){var D,T,U,R,X,q,Z,H,V;if(typeof arguments[1]=="number"?(T=t,U=arguments[1],R=arguments[2],X=arguments[3],q=arguments[4],Z=arguments[5],H=arguments[6],V=arguments[7]):(T=arguments[1],U=arguments[2],R=arguments[3],X=arguments[4],q=arguments[5],Z=arguments[6],H=arguments[7],V=arguments[8]),pa(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var K=D;D=K.imageData,T=K.format||T||t,U=K.x||U||0,R=K.y||R||0,X=K.w||K.width||X,q=K.h||K.height||q,Z=K.alias||Z,H=K.compression||H,V=K.rotation||K.angle||V}var ne=this.internal.getFilters();if(H===void 0&&ne.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(U)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var L=N.call(this,D,T,Z,H);return v.call(this,U,R,X,q,L,V),this};var N=function(D,T,U,R){var X,q,Z;if(typeof D=="string"&&n(D)===t){D=unescape(D);var H=P(D,!1);(H!==""||(H=e.loadFile(D,!0))!==void 0)&&(D=H)}if(f(D)&&(D=h(D,T)),T=n(D,T),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((Z=U)==null||Z.length===0)&&(U=function(V){return typeof V=="string"||F(V)?_(V):F(V.data)?_(V.data):null}(D)),(X=p.call(this,U))||(B()&&(D instanceof Uint8Array||T==="RGBA"||(q=D,D=w(D))),X=this["process"+T.toUpperCase()](D,u.call(this),U,function(V){return V&&typeof V=="string"&&(V=V.toUpperCase()),V in e.image_compression?V:y.NONE}(R),q)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},P=e.__addimage__.convertBase64ToBinaryString=function(D,T){var U;T=typeof T!="boolean"||T;var R,X="";if(typeof D=="string"){R=(U=k(D))!==null?U.data:D;try{X=dy(R)}catch(q){if(T)throw S(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};e.getImageProperties=function(D){var T,U,R="";if(f(D)&&(D=h(D)),typeof D=="string"&&n(D)===t&&((R=P(D,!1))===""&&(R=e.loadFile(D)||""),D=R),U=n(D),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!B()||D instanceof Uint8Array||(D=w(D)),!(T=this["process"+U.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=U,T}})(pr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};pr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),_=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(y(_))+") >>",v.content=s;var S=v.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var B=this.annotations._nameMap[n.options.name];n.options.pageNumber=B.page,n.options.top=B.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var F=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+F+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,a-u,o,i,s),l},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(pr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=e.__arabicParser__.isArabicEndLetter=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(v){return i(v)&&a.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var b=0,y=r,_="",S=0;for(b=0;b<v.length;b+=1)y[v.charCodeAt(b)]!==void 0?(S++,typeof(y=y[v.charCodeAt(b)])=="number"&&(_+=String.fromCharCode(y),y=r,S=0),b===v.length-1&&(y=r,_+=v.charAt(b-(S-1)),b-=S-1,S=0)):(y=r,_+=v.charAt(b-S),b-=S,S=0);return _};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(v,b,y){return i(v)?s(v)===!1?-1:!u(v)||!i(b)&&!i(y)||!i(y)&&o(b)||o(v)&&!i(b)||o(v)&&l(b)||o(v)&&o(b)?0:d(v)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(v)||!i(y)?1:2:-1},p=function(v){var b=0,y=0,_=0,S="",k="",B="",F=(v=v||"").split("\\s+"),w=[];for(b=0;b<F.length;b+=1){for(w.push(""),y=0;y<F[b].length;y+=1)S=F[b][y],k=F[b][y-1],B=F[b][y+1],i(S)?(_=h(S,k,B),w[b]+=_!==-1?String.fromCharCode(t[S.charCodeAt(0)][_]):S):w[b]+=S;w[b]=f(w[b])}return w.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var _=0;for(y=[],_=0;_<b.length;_+=1)Array.isArray(b[_])?y.push([p(b[_][0]),b[_][1],b[_][2]]):y.push([p(b[_])]);v=y}else v=p(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",g])}(pr.API),pr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(pr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(v){g=v}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=u.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,k){return S.concat(b.splitTextToSize(k,y))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)p<(v=this.getStringUnitWidth(l[_],{font:f})*d)&&(p=v);return p!==0&&(g=l.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,v,b,y=[],_=[],S=[],k={},B={},F=[],w=[],C=(h=h||{}).autoSize||!1,N=h.printHeaders!==!1,P=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),T=typeof h.padding=="number"?h.padding:3,U=h.headerBackgroundColor||"#c8c8c8",R=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=R,this.setFontSize(P),f==null)_=y=Object.keys(d[0]),S=y.map(function(){return"left"});else if(Array.isArray(f)&&pa(f[0])==="object")for(y=f.map(function(K){return K.name}),_=f.map(function(K){return K.prompt||K.name||""}),S=f.map(function(K){return K.align||"left"}),p=0;p<f.length;p+=1)B[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(_=y=f,S=y.map(function(){return"left"}));if(C||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(k[b=y[p]]=d.map(function(K){return K[b]}),this.setFont(void 0,"bold"),F.push(this.getTextDimensions(_[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=k[b],this.setFont(void 0,"normal"),v=0;v<g.length;v+=1)F.push(this.getTextDimensions(g[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[b]=Math.max.apply(null,F)+T+T,F=[]}if(N){var X={};for(p=0;p<y.length;p+=1)X[y[p]]={},X[y[p]].text=_[p],X[y[p]].align=S[p];var q=o.call(this,X,B);w=y.map(function(K){return new s(l,u,B[K],q,X[K].text,void 0,X[K].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var Z=f.reduce(function(K,ne){return K[ne.name]=ne.align,K},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var H=o.call(this,d[p],B);for(v=0;v<y.length;v+=1){var V=d[p][y[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:v,data:V},this),i.call(this,new s(l,u,B[y[v]],H,V,p+2,Z[y[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var g=l[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(pr.API);var sZ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iZ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Mj=aZ(iZ),oZ=[100,200,300,400,500,600,700,800,900],wwe=aZ(oZ);function Uj(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return sZ[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof Mj[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function O9(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Ewe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},D9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function R9(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Cwe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Ewe,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=Uj(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+R9(s)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=Mj[l],f=d<=Mj.normal?-1:1,h=O9(u,iZ,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=sZ[l],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=wwe[l],f=O9(u,oZ,d,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+R9(s)+"'.");return i}function P9(e){return e.trimLeft()}function _we(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Swe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var IE,L9,M9,LB=["times"];(function(e){var t,r,n,a,s,i,o,l,u,d=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new i,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new i,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=L;Object.defineProperty(this,"pdf",{get:function(){return W}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(_e){J=!!_e}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(_e){te=!!_e}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(_e){isNaN(_e)||(ie=_e)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(_e){isNaN(_e)||(Ae=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var he;typeof _e=="number"?he=[_e,_e,_e,_e]:((he=new Array(4))[0]=_e[0],he[1]=_e.length>=2?_e[1]:he[0],he[2]=_e.length>=3?_e[2]:he[0],he[3]=_e.length>=4?_e[3]:he[1]),u.margin=he}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(_e){oe=_e}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(_e){ce=_e}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(_e){ge=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(_e){je=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var he;he=h(_e),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var he=h(_e);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var re=null;function Se(_e,he){if(re===null){var Ie=function(He){var Xe=[];return Object.keys(He).forEach(function(ye){He[ye].forEach(function(Oe){var Pe=null;switch(Oe){case"bold":Pe={family:ye,weight:"bold"};break;case"italic":Pe={family:ye,style:"italic"};break;case"bolditalic":Pe={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:ye}}Pe!==null&&(Pe.ref={name:ye,style:Oe},Xe.push(Pe))})}),Xe}(_e.getFontList());re=function(He){for(var Xe={},ye=0;ye<He.length;++ye){var Oe=Uj(He[ye]),Pe=Oe.family,qe=Oe.stretch,Ze=Oe.style,ot=Oe.weight;Xe[Pe]=Xe[Pe]||{},Xe[Pe][qe]=Xe[Pe][qe]||{},Xe[Pe][qe][Ze]=Xe[Pe][qe][Ze]||{},Xe[Pe][qe][Ze][ot]=Oe}return Xe}(Ie.concat(he))}return re}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(_e){re=null,De=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var he;if(this.ctx.font=_e,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var Ie=he[1],He=(he[2],he[3]),Xe=he[4],ye=(he[5],he[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Oe==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Pe=function(Ot){var Qt,bt,Nr=[],rr=Ot.trim();if(rr==="")return LB;if(rr in D9)return[D9[rr]];for(;rr!=="";){switch(bt=null,Qt=(rr=P9(rr)).charAt(0)){case'"':case"'":bt=_we(rr.substring(1),Qt);break;default:bt=Swe(rr)}if(bt===null||(Nr.push(bt[0]),(rr=P9(bt[1]))!==""&&rr.charAt(0)!==","))return LB;rr=rr.replace(/^,/,"")}return Nr}(ye);if(this.fontFaces){var qe=Cwe(Se(this.pdf,this.fontFaces),Pe.map(function(Ot){return{family:Ot,stretch:"normal",weight:He,style:Ie}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var Ze="";(He==="bold"||parseInt(He,10)>=700||Ie==="bold")&&(Ze="bold"),Ie==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ot="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Bt=0;Bt<Pe.length;Bt++){if(this.pdf.internal.getFont(Pe[Bt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ot=Pe[Bt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Pe[Bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Pe[Bt],Ze="bold";else if(this.pdf.internal.getFont(Pe[Bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Pe[Bt],Ze="normal";break}}if(ot===""){for(var Lt=0;Lt<Pe.length;Lt++)if(mt[Pe[Lt]]){ot=mt[Pe[Lt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){k.call(this,"fill",!1)},f.prototype.stroke=function(){k.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,W){if(isNaN(L)||isNaN(W))throw Sa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new i(L,W));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(L,W)},f.prototype.closePath=function(){var L=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&pa(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){L=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(L.x,L.y)},f.prototype.lineTo=function(L,W){if(isNaN(L)||isNaN(W))throw Sa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new i(L,W));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,W,J,te){if(isNaN(J)||isNaN(te)||isNaN(L)||isNaN(W))throw Sa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new i(J,te)),Ae=this.ctx.transform.applyToPoint(new i(L,W));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.bezierCurveTo=function(L,W,J,te,ie,Ae){if(isNaN(ie)||isNaN(Ae)||isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(ie,Ae)),ce=this.ctx.transform.applyToPoint(new i(L,W)),ge=this.ctx.transform.applyToPoint(new i(J,te));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:ge.x,y2:ge.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},f.prototype.arc=function(L,W,J,te,ie,Ae){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te)||isNaN(ie))throw Sa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(L,W));L=oe.x,W=oe.y;var ce=this.ctx.transform.applyToPoint(new i(0,J)),ge=this.ctx.transform.applyToPoint(new i(0,0));J=Math.sqrt(Math.pow(ce.x-ge.x,2)+Math.pow(ce.y-ge.y,2))}Math.abs(ie-te)>=2*Math.PI&&(te=0,ie=2*Math.PI),this.path.push({type:"arc",x:L,y:W,radius:J,startAngle:te,endAngle:ie,counterclockwise:Ae})},f.prototype.arcTo=function(L,W,J,te,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,W),this.lineTo(L+J,W),this.lineTo(L+J,W+te),this.lineTo(L,W+te),this.lineTo(L,W),this.lineTo(L+J,W),this.lineTo(L,W)},f.prototype.fillRect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,W,J,te),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(L,W,J,te),this.stroke())},f.prototype.clearRect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,W,J,te))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(W),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var W,J,te,ie;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))W=0,J=0,te=0,ie=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(Ae!==null)W=parseInt(Ae[1]),J=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)W=parseInt(Ae[1]),J=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=parseFloat(Ae[4]);else{if(ie=1,typeof L=="string"&&L.charAt(0)!=="#"){var oe=new JJ(L);L=oe.ok?oe.toHex():"#000000"}L.length===4?(W=L.substring(1,2),W+=W,J=L.substring(2,3),J+=J,te=L.substring(3,4),te+=te):(W=L.substring(1,3),J=L.substring(3,5),te=L.substring(5,7)),W=parseInt(W,16),J=parseInt(J,16),te=parseInt(te,16)}}return{r:W,g:J,b:te,a:ie,style:L}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,W,J,te){if(isNaN(W)||isNaN(J)||typeof L!="string")throw Sa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ie=H(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;T.call(this,{text:L,x:W,y:J,scale:Ae,angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(L,W,J,te){if(isNaN(W)||isNaN(J)||typeof L!="string")throw Sa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){te=isNaN(te)?void 0:te;var ie=H(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;T.call(this,{text:L,x:W,y:J,scale:Ae,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(L){if(typeof L!="string")throw Sa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,J=this.pdf.internal.scaleFactor,te=W.internal.getFontSize(),ie=W.getStringUnitWidth(L)*te/W.internal.scaleFactor,Ae=function(oe){var ce=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new Ae({width:ie*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(L,W){if(isNaN(L)||isNaN(W))throw Sa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(L,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(L){if(isNaN(L))throw Sa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.translate=function(L,W){if(isNaN(L)||isNaN(W))throw Sa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,L,W);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(L,W,J,te,ie,Ae){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te)||isNaN(ie)||isNaN(Ae))throw Sa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new l(L,W,J,te,ie,Ae);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(L,W,J,te,ie,Ae){L=isNaN(L)?1:L,W=isNaN(W)?0:W,J=isNaN(J)?0:J,te=isNaN(te)?1:te,ie=isNaN(ie)?0:ie,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new l(L,W,J,te,ie,Ae)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,W,J,te,ie,Ae,oe,ce,ge){var je=this.pdf.getImageProperties(L),re=1,Se=1,De=1,_e=1;te!==void 0&&ce!==void 0&&(De=ce/te,_e=ge/ie,re=je.width/te*ce/te,Se=je.height/ie*ge/ie),Ae===void 0&&(Ae=W,oe=J,W=0,J=0),te!==void 0&&ce===void 0&&(ce=te,ge=ie),te===void 0&&ce===void 0&&(ce=je.width,ge=je.height);for(var he,Ie=this.ctx.transform.decompose(),He=H(Ie.rotate.shx),Xe=new l,ye=(Xe=(Xe=(Xe=Xe.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(Ae-W*De,oe-J*_e,te*re,ie*Se)),Oe=b.call(this,ye),Pe=[],qe=0;qe<Oe.length;qe+=1)Pe.indexOf(Oe[qe])===-1&&Pe.push(Oe[qe]);if(S(Pe),this.autoPaging)for(var Ze=Pe[0],ot=Pe[Pe.length-1],mt=Ze;mt<ot+1;mt++){this.pdf.setPage(mt);var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=mt===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=mt===1?0:Ot+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var Nr=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(he,this.posX+this.margin[3],-bt+Lt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=Nr}var rr=JSON.parse(JSON.stringify(ye));rr=_([rr],this.posX+this.margin[3],-bt+Lt+this.ctx.prevPageLastElemOffset)[0];var nn=(mt>Ze||mt<ot)&&v.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,Qt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,He),nn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,He)};var b=function(L,W,J){var te=[];W=W||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":te.push(Math.floor((L.y+ie)/J)+1);break;case"arc":te.push(Math.floor((L.y+ie-L.radius)/J)+1),te.push(Math.floor((L.y+ie+L.radius)/J)+1);break;case"qct":var Ae=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);te.push(Math.floor((Ae.y+ie)/J)+1),te.push(Math.floor((Ae.y+Ae.h+ie)/J)+1);break;case"bct":var oe=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);te.push(Math.floor((oe.y+ie)/J)+1),te.push(Math.floor((oe.y+oe.h+ie)/J)+1);break;case"rect":te.push(Math.floor((L.y+ie)/J)+1),te.push(Math.floor((L.y+L.h+ie)/J)+1)}for(var ce=0;ce<te.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<te[ce];)y.call(this);return te},y=function(){var L=this.fillStyle,W=this.strokeStyle,J=this.font,te=this.lineCap,ie=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=W,this.font=J,this.lineCap=te,this.lineWidth=ie,this.lineJoin=Ae},_=function(L,W,J){for(var te=0;te<L.length;te++)switch(L[te].type){case"bct":L[te].x2+=W,L[te].y2+=J;case"qct":L[te].x1+=W,L[te].y1+=J;case"mt":case"lt":case"arc":default:L[te].x+=W,L[te].y+=J}return L},S=function(L){return L.sort(function(W,J){return W-J})},k=function(L,W){for(var J,te,ie=this.fillStyle,Ae=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,ge=Math.abs(ce*this.ctx.transform.scaleX),je=this.lineJoin,re=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),De=[],_e=0;_e<Se.length;_e++)if(Se[_e].x!==void 0)for(var he=b.call(this,Se[_e]),Ie=0;Ie<he.length;Ie+=1)De.indexOf(he[Ie])===-1&&De.push(he[Ie]);for(var He=0;He<De.length;He++)for(;this.pdf.internal.getNumberOfPages()<De[He];)y.call(this);if(S(De),this.autoPaging)for(var Xe=De[0],ye=De[De.length-1],Oe=Xe;Oe<ye+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ie,this.strokeStyle=Ae,this.lineCap=oe,this.lineWidth=ge,this.lineJoin=je;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Oe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Oe===1?0:Ze+(Oe-2)*ot;if(this.ctx.clip_path.length!==0){var Bt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(J,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),B.call(this,L,!0),this.path=Bt}if(te=JSON.parse(JSON.stringify(re)),this.path=_(te,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),W===!1||Oe===0){var Lt=(Oe>Xe||Oe<ye)&&v.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,ot,null).clip().discardPath()),B.call(this,L,W),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=ge,B.call(this,L,W),this.lineWidth=ce;this.path=re},B=function(L,W){if((L!=="stroke"||W||!g.call(this))&&(L==="stroke"||W||!p.call(this))){for(var J,te,ie=[],Ae=this.path,oe=0;oe<Ae.length;oe++){var ce=Ae[oe];switch(ce.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ce,deltas:[],abs:[]});break;case"lt":var ge=ie.length;if(Ae[oe-1]&&!isNaN(Ae[oe-1].x)&&(J=[ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],ge>0)){for(;ge>=0;ge--)if(ie[ge-1].close!==!0&&ie[ge-1].begin!==!0){ie[ge-1].deltas.push(J),ie[ge-1].abs.push(ce);break}}break;case"bct":J=[ce.x1-Ae[oe-1].x,ce.y1-Ae[oe-1].y,ce.x2-Ae[oe-1].x,ce.y2-Ae[oe-1].y,ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],ie[ie.length-1].deltas.push(J);break;case"qct":var je=Ae[oe-1].x+2/3*(ce.x1-Ae[oe-1].x),re=Ae[oe-1].y+2/3*(ce.y1-Ae[oe-1].y),Se=ce.x+2/3*(ce.x1-ce.x),De=ce.y+2/3*(ce.y1-ce.y),_e=ce.x,he=ce.y;J=[je-Ae[oe-1].x,re-Ae[oe-1].y,Se-Ae[oe-1].x,De-Ae[oe-1].y,_e-Ae[oe-1].x,he-Ae[oe-1].y],ie[ie.length-1].deltas.push(J);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ce)}}te=W?null:L==="stroke"?"stroke":"fill";for(var Ie=!1,He=0;He<ie.length;He++)if(ie[He].arc)for(var Xe=ie[He].abs,ye=0;ye<Xe.length;ye++){var Oe=Xe[ye];Oe.type==="arc"?C.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,W,!Ie):U.call(this,Oe.x,Oe.y),Ie=!0}else if(ie[He].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(ie[He].begin!==!0){var Pe=ie[He].start.x,qe=ie[He].start.y;R.call(this,ie[He].deltas,Pe,qe),Ie=!0}te&&N.call(this,te),W&&P.call(this)}},F=function(L){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-J;case"top":return L+W-J;case"hanging":return L+W-2*J;case"middle":return L+W/2-J;case"ideographic":return L;case"alphabetic":default:return L}},w=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(W,J){this.colorStops.push([W,J])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(L,W,J,te,ie,Ae,oe,ce,ge){for(var je=q.call(this,J,te,ie,Ae),re=0;re<je.length;re++){var Se=je[re];re===0&&(ge?D.call(this,Se.x1+L,Se.y1+W):U.call(this,Se.x1+L,Se.y1+W)),X.call(this,L,W,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}ce?P.call(this):N.call(this,oe)},N=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(L,W){this.pdf.internal.out(r(L)+" "+n(W)+" m")},T=function(L){var W;switch(L.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var J=this.pdf.getTextDimensions(L.text),te=F.call(this,L.y),ie=w.call(this,te)-J.h,Ae=this.ctx.transform.applyToPoint(new i(L.x,te)),oe=this.ctx.transform.decompose(),ce=new l;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var ge,je,re,Se=this.ctx.transform.applyToRectangle(new o(L.x,te,J.w,J.h)),De=ce.applyToRectangle(new o(L.x,ie,J.w,J.h)),_e=b.call(this,De),he=[],Ie=0;Ie<_e.length;Ie+=1)he.indexOf(_e[Ie])===-1&&he.push(_e[Ie]);if(S(he),this.autoPaging)for(var He=he[0],Xe=he[he.length-1],ye=He;ye<Xe+1;ye++){this.pdf.setPage(ye);var Oe=ye===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],Ze=qe-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],mt=ot-this.margin[3],Bt=ye===1?0:Pe+(ye-2)*Ze;if(this.ctx.clip_path.length!==0){var Lt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ge,this.posX+this.margin[3],-1*Bt+Oe),B.call(this,"fill",!0),this.path=Lt}var Ot=_([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Bt+Oe+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*L.scale),re=this.lineWidth,this.lineWidth=re*L.scale);var Qt=this.autoPaging!=="text";if(Qt||Ot.y+Ot.h<=qe){if(Qt||Ot.y>=Oe&&Ot.x<=ot){var bt=Qt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||ot-Ot.x)[0],Nr=_([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Bt+Oe+this.ctx.prevPageLastElemOffset)[0],rr=Qt&&(ye>He||ye<Xe)&&v.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ze,null).clip().discardPath()),this.pdf.text(bt,Nr.x,Nr.y,{angle:L.angle,align:W,renderingMode:L.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else Ot.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Ot.y);L.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=re)}else L.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*L.scale),re=this.lineWidth,this.lineWidth=re*L.scale),this.pdf.text(L.text,Ae.x+this.posX,Ae.y+this.posY,{angle:L.angle,align:W,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=re)},U=function(L,W,J,te){J=J||0,te=te||0,this.pdf.internal.out(r(L+J)+" "+n(W+te)+" l")},R=function(L,W,J){return this.pdf.lines(L,W,J,null,null)},X=function(L,W,J,te,ie,Ae,oe,ce){this.pdf.internal.out([t(a(J+L)),t(s(te+W)),t(a(ie+L)),t(s(Ae+W)),t(a(oe+L)),t(s(ce+W)),"c"].join(" "))},q=function(L,W,J,te){for(var ie=2*Math.PI,Ae=Math.PI/2;W>J;)W-=ie;var oe=Math.abs(J-W);oe<ie&&te&&(oe=ie-oe);for(var ce=[],ge=te?-1:1,je=W;oe>1e-5;){var re=je+ge*Math.min(oe,Ae);ce.push(Z.call(this,L,je,re)),oe-=Math.abs(re-je),je=re}return ce},Z=function(L,W,J){var te=(J-W)/2,ie=L*Math.cos(te),Ae=L*Math.sin(te),oe=ie,ce=-Ae,ge=oe*oe+ce*ce,je=ge+oe*ie+ce*Ae,re=4/3*(Math.sqrt(2*ge*je)-je)/(oe*Ae-ce*ie),Se=oe-re*ce,De=ce+re*oe,_e=Se,he=-De,Ie=te+W,He=Math.cos(Ie),Xe=Math.sin(Ie);return{x1:L*Math.cos(W),y1:L*Math.sin(W),x2:Se*He-De*Xe,y2:Se*Xe+De*He,x3:_e*He-he*Xe,y3:_e*Xe+he*He,x4:L*Math.cos(J),y4:L*Math.sin(J)}},H=function(L){return 180*L/Math.PI},V=function(L,W,J,te,ie,Ae){var oe=L+.5*(J-L),ce=W+.5*(te-W),ge=ie+.5*(J-ie),je=Ae+.5*(te-Ae),re=Math.min(L,ie,oe,ge),Se=Math.max(L,ie,oe,ge),De=Math.min(W,Ae,ce,je),_e=Math.max(W,Ae,ce,je);return new o(re,De,Se-re,_e-De)},K=function(L,W,J,te,ie,Ae,oe,ce){var ge,je,re,Se,De,_e,he,Ie,He,Xe,ye,Oe,Pe,qe,Ze=J-L,ot=te-W,mt=ie-J,Bt=Ae-te,Lt=oe-ie,Ot=ce-Ae;for(je=0;je<41;je++)He=(he=(re=L+(ge=je/40)*Ze)+ge*((De=J+ge*mt)-re))+ge*(De+ge*(ie+ge*Lt-De)-he),Xe=(Ie=(Se=W+ge*ot)+ge*((_e=te+ge*Bt)-Se))+ge*(_e+ge*(Ae+ge*Ot-_e)-Ie),je==0?(ye=He,Oe=Xe,Pe=He,qe=Xe):(ye=Math.min(ye,He),Oe=Math.min(Oe,Xe),Pe=Math.max(Pe,He),qe=Math.max(qe,Xe));return new o(Math.round(ye),Math.round(Oe),Math.round(Pe-ye),Math.round(qe-Oe))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,W,J=(L=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:W}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(pr.API),function(e){var t=function(s){var i,o,l,u,d,f,h,p,g,v;for(o=[],l=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(d=((d=((d=((d=(d-(v=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,v+33)):o.push(122);return function(b,y){for(var _=y;_>0;_--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,l,u,d,f=String,h="length",p=255,g="charCodeAt",v="slice",b="replace";for(s[v](-2),s=s[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],u=0,d=(s+=i="uuuuu"[v](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,_){for(var S=_;S>0;S--)y.pop()}(l,i[h]),f.fromCharCode.apply(f,l)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=Oj(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,l=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(pr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var v=g.length,b=[],y=String.fromCharCode;for(h=0;h<v;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(pr.API),function(e){function t(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):fx(()=>Promise.resolve().then(()=>PLe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):fx(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=pa(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(l(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(v){return v.format==="truetype"});g&&l.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||pr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,d).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,pr.getPageSize=function(i,o,l){if(pa(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,v=0;if(h.hasOwnProperty(f))g=h[f][1]/d,v=h[f][0]/d;else try{g=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",v>g&&(p=v,v=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>v&&(p=v,v=g,g=p)}return{width:v,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Uj):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(pr.API),pr.API.addJS=function(e){return M9=e,this.internal.events.subscribe("postPutResources",function(){IE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(IE+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),L9=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+M9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){IE!==void 0&&L9!==void 0&&this.internal.out("/Names <</JavaScript "+IE+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(pr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,v={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),v={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(pr.API);var Hg,jE,U9,Q9,H9,Nwe=function(){var e,t,r;function n(s){var i,o,l,u,d,f,h,p,g,v,b,y,_,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var k,B;for(B=[],k=0;k<4;++k)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(_=0;0<=v?_<v:_>v;0<=v?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var v,b,y,_,S,k,B,F,w,C,N,P,D,T,U,R,X,q,Z,H,V,K=Math.ceil((u.width-f)/p),ne=Math.ceil((u.height-h)/g),L=u.width==K&&u.height==ne;for(T=i*K,P=L?o:new Uint8Array(T*ne),k=s.length,D=0,b=0;D<ne&&l<k;){switch(s[l++]){case 0:for(_=X=0;X<T;_=X+=1)P[b++]=s[l++];break;case 1:for(_=q=0;q<T;_=q+=1)v=s[l++],S=_<i?0:P[b-i],P[b++]=(v+S)%256;break;case 2:for(_=Z=0;Z<T;_=Z+=1)v=s[l++],y=(_-_%i)/i,U=D&&P[(D-1)*T+y*i+_%i],P[b++]=(U+v)%256;break;case 3:for(_=H=0;H<T;_=H+=1)v=s[l++],y=(_-_%i)/i,S=_<i?0:P[b-i],U=D&&P[(D-1)*T+y*i+_%i],P[b++]=(v+Math.floor((S+U)/2))%256;break;case 4:for(_=V=0;V<T;_=V+=1)v=s[l++],y=(_-_%i)/i,S=_<i?0:P[b-i],D===0?U=R=0:(U=P[(D-1)*T+y*i+_%i],R=y&&P[(D-1)*T+(y-1)*i+_%i]),B=S+U-R,F=Math.abs(B-S),C=Math.abs(B-U),N=Math.abs(B-R),w=F<=C&&F<=N?S:C<=N?U:R,P[b++]=(v+w)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!L){var W=((h+D*g)*u.width+f)*i,J=D*T;for(_=0;_<K;_+=1){for(var te=0;te<i;te+=1)o[W++]=P[J++];W+=(p-1)*i}}D++}}return s=swe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,l,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,l,u,d,f,h,p,g,v,b,y;if(l=this.colors,v=null,o=this.hasAlphaChannel,this.palette.length&&(v=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,o=!0),g=(u=s.data||s).length,f=v||i,d=h=0,l===1)for(;d<g;)p=v?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=v?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{t=Mr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,l,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],l=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,p.push(i.image=e(l));return p}},n.prototype.renderFrame=function(s,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,l,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,l=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=l[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function kwe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&v)==0&&(h=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,k=e[t++],B=k>>6&1,F=1<<(7&k)+1,w=o,C=l,N=!1;k>>7&&(N=!0,w=t,C=F,t+=3*F);var P=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:b,y,width:_,height:S,has_local_palette:N,palette_offset:w,palette_size:C,data_offset:P,data_length:t-P,transparent_index:h,interlaced:!!B,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,U){var R=this.frameInfo(T),X=R.width*R.height,q=new Uint8Array(X);V9(e,R.data_offset,q,X);var Z=R.palette_offset,H=R.transparent_index;H===null&&(H=256);var V=R.width,K=r-V,ne=V,L=4*(R.y*r+R.x),W=4*((R.y+R.height)*r+R.x),J=L,te=4*K;R.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=q.length;Ae<oe;++Ae){var ce=q[Ae];if(ne===0&&(ne=V,(J+=te)>=W&&(te=4*K+4*r*(ie-1),J=L+(V+K)*(ie<<1),ie>>=1)),ce===H)J+=4;else{var ge=e[Z+3*ce],je=e[Z+3*ce+1],re=e[Z+3*ce+2];U[J++]=re,U[J++]=je,U[J++]=ge,U[J++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(T,U){var R=this.frameInfo(T),X=R.width*R.height,q=new Uint8Array(X);V9(e,R.data_offset,q,X);var Z=R.palette_offset,H=R.transparent_index;H===null&&(H=256);var V=R.width,K=r-V,ne=V,L=4*(R.y*r+R.x),W=4*((R.y+R.height)*r+R.x),J=L,te=4*K;R.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=q.length;Ae<oe;++Ae){var ce=q[Ae];if(ne===0&&(ne=V,(J+=te)>=W&&(te=4*K+4*r*(ie-1),J=L+(V+K)*(ie<<1),ie>>=1)),ce===H)J+=4;else{var ge=e[Z+3*ce],je=e[Z+3*ce+1],re=e[Z+3*ce+2];U[J++]=ge,U[J++]=je,U[J++]=re,U[J++]=255}--ne}}}function V9(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,u=(1<<l)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),v=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<l)break;var b=f&u;if(f>>=l,d-=l,b!==s){if(b===i)break;for(var y=b<o?b:v,_=0,S=y;S>s;)S=g[S]>>8,++_;var k=S;if(h+_+(y!==b?1:0)>n)return void Sa.log("Warning, gif stream longer than expected.");r[h++]=k;var B=h+=_;for(y!==b&&(r[h++]=k),S=y;_--;)S=g[S],r[--B]=255&S,S>>=8;v!==null&&o<4096&&(g[o++]=v<<8|k,o>=u+1&&l<12&&(++l,u=u<<1|1)),v=b}else o=i+1,u=(1<<(l=a+1))-1,v=null}return h!==n&&Sa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function MB(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),v=[],b=0,y=7,_=new Array(64),S=new Array(64),k=new Array(64),B=new Array(256),F=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(L,W){for(var J=0,te=0,ie=new Array,Ae=1;Ae<=16;Ae++){for(var oe=1;oe<=L[Ae];oe++)ie[W[te]]=[],ie[W[te]][0]=J,ie[W[te]][1]=Ae,te++,J++;J*=2}return ie}function Z(L){for(var W=L[0],J=L[1]-1;J>=0;)W&1<<J&&(b|=1<<y),J--,--y<0&&(b==255?(H(255),H(0)):H(b),y=7,b=0)}function H(L){v.push(L)}function V(L){H(L>>8&255),H(255&L)}function K(L,W,J,te,ie){for(var Ae,oe=ie[0],ce=ie[240],ge=function(Xe,ye){var Oe,Pe,qe,Ze,ot,mt,Bt,Lt,Ot,Qt,bt=0;for(Ot=0;Ot<8;++Ot){Oe=Xe[bt],Pe=Xe[bt+1],qe=Xe[bt+2],Ze=Xe[bt+3],ot=Xe[bt+4],mt=Xe[bt+5],Bt=Xe[bt+6];var Nr=Oe+(Lt=Xe[bt+7]),rr=Oe-Lt,nn=Pe+Bt,Cr=Pe-Bt,Vr=qe+mt,Fn=qe-mt,jr=Ze+ot,vt=Ze-ot,pt=Nr+jr,Je=Nr-jr,gt=nn+Vr,dt=nn-Vr;Xe[bt]=pt+gt,Xe[bt+4]=pt-gt;var Dt=.707106781*(dt+Je);Xe[bt+2]=Je+Dt,Xe[bt+6]=Je-Dt;var zt=.382683433*((pt=vt+Fn)-(dt=Cr+rr)),Pr=.5411961*pt+zt,Xr=1.306562965*dt+zt,gn=.707106781*(gt=Fn+Cr),vn=rr+gn,$t=rr-gn;Xe[bt+5]=$t+Pr,Xe[bt+3]=$t-Pr,Xe[bt+1]=vn+Xr,Xe[bt+7]=vn-Xr,bt+=8}for(bt=0,Ot=0;Ot<8;++Ot){Oe=Xe[bt],Pe=Xe[bt+8],qe=Xe[bt+16],Ze=Xe[bt+24],ot=Xe[bt+32],mt=Xe[bt+40],Bt=Xe[bt+48];var tn=Oe+(Lt=Xe[bt+56]),en=Oe-Lt,cr=Pe+Bt,Yr=Pe-Bt,ta=qe+mt,fe=qe-mt,Be=Ze+ot,Ee=Ze-ot,Ce=tn+Be,Ne=tn-Be,Te=cr+ta,Ye=cr-ta;Xe[bt]=Ce+Te,Xe[bt+32]=Ce-Te;var ut=.707106781*(Ye+Ne);Xe[bt+16]=Ne+ut,Xe[bt+48]=Ne-ut;var $e=.382683433*((Ce=Ee+fe)-(Ye=Yr+en)),tt=.5411961*Ce+$e,at=1.306562965*Ye+$e,Tt=.707106781*(Te=fe+Yr),Vt=en+Tt,Yt=en-Tt;Xe[bt+40]=Yt+tt,Xe[bt+24]=Yt-tt,Xe[bt+8]=Vt+at,Xe[bt+56]=Vt-at,bt++}for(Ot=0;Ot<64;++Ot)Qt=Xe[Ot]*ye[Ot],p[Ot]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(L,W),je=0;je<64;++je)g[w[je]]=ge[je];var re=g[0]-J;J=g[0],re==0?Z(te[0]):(Z(te[h[Ae=32767+re]]),Z(f[Ae]));for(var Se=63;Se>0&&g[Se]==0;)Se--;if(Se==0)return Z(oe),J;for(var De,_e=1;_e<=Se;){for(var he=_e;g[_e]==0&&_e<=Se;)++_e;var Ie=_e-he;if(Ie>=16){De=Ie>>4;for(var He=1;He<=De;++He)Z(ce);Ie&=15}Ae=32767+g[_e],Z(ie[(Ie<<4)+h[Ae]]),Z(f[Ae]),_e++}return Se!=63&&Z(oe),J}function ne(L){L=Math.min(Math.max(L,1),100),s!=L&&(function(W){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ie=i((J[te]*W+50)/100);ie=Math.min(Math.max(ie,1),255),o[w[te]]=ie}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=i((Ae[oe]*W+50)/100);ce=Math.min(Math.max(ce,1),255),l[w[oe]]=ce}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,re=0;re<8;re++)for(var Se=0;Se<8;Se++)u[je]=1/(o[w[je]]*ge[re]*ge[Se]*8),d[je]=1/(l[w[je]]*ge[re]*ge[Se]*8),je++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),s=L)}this.encode=function(L,W){W&&ne(W),v=new Array,b=0,y=7,V(65496),V(65504),V(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),V(1),V(1),H(0),H(0),function(){V(65499),V(132),H(0);for(var Pe=0;Pe<64;Pe++)H(o[Pe]);H(1);for(var qe=0;qe<64;qe++)H(l[qe])}(),function(Pe,qe){V(65472),V(17),H(8),V(qe),V(Pe),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(L.width,L.height),function(){V(65476),V(418),H(0);for(var Pe=0;Pe<16;Pe++)H(C[Pe+1]);for(var qe=0;qe<=11;qe++)H(N[qe]);H(16);for(var Ze=0;Ze<16;Ze++)H(P[Ze+1]);for(var ot=0;ot<=161;ot++)H(D[ot]);H(1);for(var mt=0;mt<16;mt++)H(T[mt+1]);for(var Bt=0;Bt<=11;Bt++)H(U[Bt]);H(17);for(var Lt=0;Lt<16;Lt++)H(R[Lt+1]);for(var Ot=0;Ot<=161;Ot++)H(X[Ot])}(),V(65498),V(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var J=0,te=0,ie=0;b=0,y=7,this.encode.displayName="_encode_";for(var Ae,oe,ce,ge,je,re,Se,De,_e,he=L.data,Ie=L.width,He=L.height,Xe=4*Ie,ye=0;ye<He;){for(Ae=0;Ae<Xe;){for(je=Xe*ye+Ae,Se=-1,De=0,_e=0;_e<64;_e++)re=je+(De=_e>>3)*Xe+(Se=4*(7&_e)),ye+De>=He&&(re-=Xe*(ye+1+De-He)),Ae+Se>=Xe&&(re-=Ae+Se-Xe+4),oe=he[re++],ce=he[re++],ge=he[re++],_[_e]=(F[oe]+F[ce+256>>0]+F[ge+512>>0]>>16)-128,S[_e]=(F[oe+768>>0]+F[ce+1024>>0]+F[ge+1280>>0]>>16)-128,k[_e]=(F[oe+1280>>0]+F[ce+1536>>0]+F[ge+1792>>0]>>16)-128;J=K(_,u,J,t,n),te=K(S,d,te,r,a),ie=K(k,d,ie,r,a),Ae+=32}ye+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,Z(Oe)}return V(65497),new Uint8Array(v)},e=e||50,function(){for(var L=String.fromCharCode,W=0;W<256;W++)B[W]=L(W)}(),t=q(C,N),r=q(T,U),n=q(P,D),a=q(R,X),function(){for(var L=1,W=2,J=1;J<=15;J++){for(var te=L;te<W;te++)h[32767+te]=J,f[32767+te]=[],f[32767+te][1]=J,f[32767+te][0]=te;for(var ie=-(W-1);ie<=-L;ie++)h[32767+ie]=J,f[32767+ie]=[],f[32767+ie][1]=J,f[32767+ie][0]=W-1+ie;L<<=1,W<<=1}}(),function(){for(var L=0;L<256;L++)F[L]=19595*L,F[L+256>>0]=38470*L,F[L+512>>0]=7471*L+32768,F[L+768>>0]=-11059*L,F[L+1024>>0]=-21709*L,F[L+1280>>0]=32768*L+8421375,F[L+1536>>0]=-27439*L,F[L+1792>>0]=-5329*L}(),ne(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ld(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function z9(e){function t(C){if(!C)throw Error("assert :P")}function r(C,N,P){for(var D=0;4>D;D++)if(C[N+D]!=P.charCodeAt(D))return!0;return!1}function n(C,N,P,D,T){for(var U=0;U<T;U++)C[N+U]=P[D+U]}function a(C,N,P,D){for(var T=0;T<D;T++)C[N+T]=P}function s(C){return new Int32Array(C)}function i(C,N){for(var P=[],D=0;D<C;D++)P.push(new N);return P}function o(C,N){var P=[];return function D(T,U,R){for(var X=R[U],q=0;q<X&&(T.push(R.length>U+1?[]:new N),!(R.length<U+1));q++)D(T[q],U+1,R)}(P,0,C),P}var l=function(){var C=this;function N(I,Q){for(var Y=1<<Q-1>>>0;I&Y;)Y>>>=1;return Y?(I&Y-1)+Y:I}function P(I,Q,Y,ae,ue){t(!(ae%Y));do I[Q+(ae-=Y)]=ue;while(0<ae)}function D(I,Q,Y,ae,ue){if(t(2328>=ue),512>=ue)var me=s(512);else if((me=s(ue))==null)return 0;return function(pe,ve,we,ke,Me,nt){var et,Ge,Nt=ve,ht=1<<we,Ue=s(16),Ve=s(16);for(t(Me!=0),t(ke!=null),t(pe!=null),t(0<we),Ge=0;Ge<Me;++Ge){if(15<ke[Ge])return 0;++Ue[ke[Ge]]}if(Ue[0]==Me)return 0;for(Ve[1]=0,et=1;15>et;++et){if(Ue[et]>1<<et)return 0;Ve[et+1]=Ve[et]+Ue[et]}for(Ge=0;Ge<Me;++Ge)et=ke[Ge],0<ke[Ge]&&(nt[Ve[et]++]=Ge);if(Ve[15]==1)return(ke=new T).g=0,ke.value=nt[0],P(pe,Nt,1,ht,ke),ht;var Et,kt=-1,_t=ht-1,nr=0,Xt=1,mr=1,Zt=1<<we;for(Ge=0,et=1,Me=2;et<=we;++et,Me<<=1){if(Xt+=mr<<=1,0>(mr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et])(ke=new T).g=et,ke.value=nt[Ge++],P(pe,Nt+nr,Me,Zt,ke),nr=N(nr,et)}for(et=we+1,Me=2;15>=et;++et,Me<<=1){if(Xt+=mr<<=1,0>(mr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et]){if(ke=new T,(nr&_t)!=kt){for(Nt+=Zt,Et=1<<(kt=et)-we;15>kt&&!(0>=(Et-=Ue[kt]));)++kt,Et<<=1;ht+=Zt=1<<(Et=kt-we),pe[ve+(kt=nr&_t)].g=Et+we,pe[ve+kt].value=Nt-ve-kt}ke.g=et-we,ke.value=nt[Ge++],P(pe,Nt+(nr>>we),Me,Zt,ke),nr=N(nr,et)}}return Xt!=2*Ve[15]-1?0:ht}(I,Q,Y,ae,ue,me)}function T(){this.value=this.g=0}function U(){this.value=this.g=0}function R(){this.G=i(5,T),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Os,U)}function X(I,Q,Y,ae){t(I!=null),t(Q!=null),t(2147483648>ae),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=Q,I.pa=Y,I.Jd=Q,I.Yc=Y+ae,I.Zc=4<=ae?Y+ae-4+1:Y,Ae(I)}function q(I,Q){for(var Y=0;0<Q--;)Y|=ce(I,128)<<Q;return Y}function Z(I,Q){var Y=q(I,Q);return oe(I)?-Y:Y}function H(I,Q,Y,ae){var ue,me=0;for(t(I!=null),t(Q!=null),t(4294967288>ae),I.Sb=ae,I.Ra=0,I.u=0,I.h=0,4<ae&&(ae=4),ue=0;ue<ae;++ue)me+=Q[Y+ue]<<8*ue;I.Ra=me,I.bb=ae,I.oa=Q,I.pa=Y}function V(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<rf-8>>>0,++I.bb,I.u-=8;J(I)&&(I.h=1,I.u=0)}function K(I,Q){if(t(0<=Q),!I.h&&Q<=tf){var Y=W(I)&zd[Q];return I.u+=Q,V(I),Y}return I.h=1,I.u=0}function ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(I){return I.Ra>>>(I.u&rf-1)>>>0}function J(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>rf}function te(I,Q){I.u=Q,I.h=J(I)}function ie(I){I.u>=Nh&&(t(I.u>=Nh),V(I))}function Ae(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function oe(I){return q(I,1)}function ce(I,Q){var Y=I.Ca;0>I.b&&Ae(I);var ae=I.b,ue=Y*Q>>>8,me=(I.I>>>ae>ue)+0;for(me?(Y-=ue,I.I-=ue+1<<ae>>>0):Y=ue+1,ae=Y,ue=0;256<=ae;)ue+=8,ae>>=8;return ae=7^ue+So[ae],I.b-=ae,I.Ca=(Y<<ae)-1,me}function ge(I,Q,Y){I[Q+0]=Y>>24&255,I[Q+1]=Y>>16&255,I[Q+2]=Y>>8&255,I[Q+3]=Y>>0&255}function je(I,Q){return I[Q+0]<<0|I[Q+1]<<8}function re(I,Q){return je(I,Q)|I[Q+2]<<16}function Se(I,Q){return je(I,Q)|je(I,Q+2)<<16}function De(I,Q){var Y=1<<Q;return t(I!=null),t(0<Q),I.X=s(Y),I.X==null?0:(I.Mb=32-Q,I.Xa=Q,1)}function _e(I,Q){t(I!=null),t(Q!=null),t(I.Xa==Q.Xa),n(Q.X,0,I.X,0,1<<Q.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function Ie(I,Q,Y,ae){t(Y!=null),t(ae!=null);var ue=Y[0],me=ae[0];return ue==0&&(ue=(I*me+Q/2)/Q),me==0&&(me=(Q*ue+I/2)/I),0>=ue||0>=me?0:(Y[0]=ue,ae[0]=me,1)}function He(I,Q){return I+(1<<Q)-1>>>Q}function Xe(I,Q){return((4278255360&I)+(4278255360&Q)>>>0&4278255360)+((16711935&I)+(16711935&Q)>>>0&16711935)>>>0}function ye(I,Q){C[Q]=function(Y,ae,ue,me,pe,ve,we){var ke;for(ke=0;ke<pe;++ke){var Me=C[I](ve[we+ke-1],ue,me+ke);ve[we+ke]=Xe(Y[ae+ke],Me)}}}function Oe(){this.ud=this.hd=this.jd=0}function Pe(I,Q){return((4278124286&(I^Q))>>>1)+(I&Q)>>>0}function qe(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function Ze(I,Q){return qe(I+(I-Q+.5>>1))}function ot(I,Q,Y){return Math.abs(Q-Y)-Math.abs(I-Y)}function mt(I,Q,Y,ae,ue,me,pe){for(ae=me[pe-1],Y=0;Y<ue;++Y)me[pe+Y]=ae=Xe(I[Q+Y],ae)}function Bt(I,Q,Y,ae,ue){var me;for(me=0;me<Y;++me){var pe=I[Q+me],ve=pe>>8&255,we=16711935&(we=(we=16711935&pe)+((ve<<16)+ve));ae[ue+me]=(4278255360&pe)+we>>>0}}function Lt(I,Q){Q.jd=I>>0&255,Q.hd=I>>8&255,Q.ud=I>>16&255}function Ot(I,Q,Y,ae,ue,me){var pe;for(pe=0;pe<ae;++pe){var ve=Q[Y+pe],we=ve>>>8,ke=ve,Me=255&(Me=(Me=ve>>>16)+((I.jd<<24>>24)*(we<<24>>24)>>>5));ke=255&(ke=(ke=ke+((I.hd<<24>>24)*(we<<24>>24)>>>5))+((I.ud<<24>>24)*(Me<<24>>24)>>>5)),ue[me+pe]=(4278255360&ve)+(Me<<16)+ke}}function Qt(I,Q,Y,ae,ue){C[Q]=function(me,pe,ve,we,ke,Me,nt,et,Ge){for(we=nt;we<et;++we)for(nt=0;nt<Ge;++nt)ke[Me++]=ue(ve[ae(me[pe++])])},C[I]=function(me,pe,ve,we,ke,Me,nt){var et=8>>me.b,Ge=me.Ea,Nt=me.K[0],ht=me.w;if(8>et)for(me=(1<<me.b)-1,ht=(1<<et)-1;pe<ve;++pe){var Ue,Ve=0;for(Ue=0;Ue<Ge;++Ue)Ue&me||(Ve=ae(we[ke++])),Me[nt++]=ue(Nt[Ve&ht]),Ve>>=et}else C["VP8LMapColor"+Y](we,ke,Nt,ht,Me,nt,pe,ve,Ge)}}function bt(I,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=I[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255}}function Nr(I,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=I[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255,ae[ue++]=me>>24&255}}function rr(I,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=(pe=I[Q++])>>16&240|pe>>12&15,pe=pe>>0&240|pe>>28&15;ae[ue++]=me,ae[ue++]=pe}}function nn(I,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=(pe=I[Q++])>>16&248|pe>>13&7,pe=pe>>5&224|pe>>3&31;ae[ue++]=me,ae[ue++]=pe}}function Cr(I,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=I[Q++];ae[ue++]=me>>0&255,ae[ue++]=me>>8&255,ae[ue++]=me>>16&255}}function Vr(I,Q,Y,ae,ue,me){if(me==0)for(Y=Q+Y;Q<Y;)ge(ae,((me=I[Q++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),ue+=32;else n(ae,ue,I,Q,Y)}function Fn(I,Q){C[Q][0]=C[I+"0"],C[Q][1]=C[I+"1"],C[Q][2]=C[I+"2"],C[Q][3]=C[I+"3"],C[Q][4]=C[I+"4"],C[Q][5]=C[I+"5"],C[Q][6]=C[I+"6"],C[Q][7]=C[I+"7"],C[Q][8]=C[I+"8"],C[Q][9]=C[I+"9"],C[Q][10]=C[I+"10"],C[Q][11]=C[I+"11"],C[Q][12]=C[I+"12"],C[Q][13]=C[I+"13"],C[Q][14]=C[I+"0"],C[Q][15]=C[I+"0"]}function jr(I){return I==Sm||I==eA||I==Wu||I==Ih}function vt(){this.eb=[],this.size=this.A=this.fb=0}function pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Je(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vt,this.f.kb=new pt,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dt(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function zt(I,Q){var Y=I.T,ae=Q.ba.f.RGBA,ue=ae.eb,me=ae.fb+I.ka*ae.A,pe=ni[Q.ba.S],ve=I.y,we=I.O,ke=I.f,Me=I.N,nt=I.ea,et=I.W,Ge=Q.cc,Nt=Q.dc,ht=Q.Mc,Ue=Q.Nc,Ve=I.ka,Et=I.ka+I.T,kt=I.U,_t=kt+1>>1;for(Ve==0?pe(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me,null,null,kt):(pe(Q.ec,Q.fc,ve,we,Ge,Nt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,kt),++Y);Ve+2<Et;Ve+=2)Ge=ke,Nt=Me,ht=nt,Ue=et,Me+=I.Rc,et+=I.Rc,me+=2*ae.A,pe(ve,(we+=2*I.fa)-I.fa,ve,we,Ge,Nt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,kt);return we+=I.fa,I.j+Et<I.o?(n(Q.ec,Q.fc,ve,we,kt),n(Q.cc,Q.dc,ke,Me,_t),n(Q.Mc,Q.Nc,nt,et,_t),Y--):1&Et||pe(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me+ae.A,null,null,kt),Y}function Pr(I,Q,Y){var ae=I.F,ue=[I.J];if(ae!=null){var me=I.U,pe=Q.ba.S,ve=pe==lf||pe==Wu;Q=Q.ba.f.RGBA;var we=[0],ke=I.ka;we[0]=I.T,I.Kb&&(ke==0?--we[0]:(--ke,ue[0]-=I.width),I.j+I.ka+I.T==I.o&&(we[0]=I.o-I.j-ke));var Me=Q.eb;ke=Q.fb+ke*Q.A,I=mn(ae,ue[0],I.width,me,we,Me,ke+(ve?0:3),Q.A),t(Y==we),I&&jr(pe)&&sl(Me,ke,ve,me,we,Q.A)}return 0}function Xr(I){var Q=I.ma,Y=Q.ba.S,ae=11>Y,ue=Y==Th||Y==_m||Y==lf||Y==qu||Y==12||jr(Y);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Vd(Q.Oa,I,ue?11:12))return 0;if(ue&&jr(Y)&&Pt(),I.da)alert("todo:use_scaling");else{if(ae){if(Q.Ib=Dt,I.Kb){if(Y=I.U+1>>1,Q.memory=s(I.U+2*Y),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+I.U,Q.Mc=Q.cc,Q.Nc=Q.dc+Y,Q.Ib=zt,Pt()}}else alert("todo:EmitYUV");ue&&(Q.Jb=Pr,ae&&Ke())}if(ae&&!y2){for(I=0;256>I;++I)Z4[I]=89858*(I-128)+Rs>>su,Bm[I]=-22014*(I-128)+Rs,E1[I]=-45773*(I-128),Ps[I]=113618*(I-128)+Rs>>su;for(I=nA;I<gg;++I)Q=76283*(I-16)+Rs>>su,Tm[I-nA]=zn(Q,255),C1[I-nA]=zn(Q+8>>4,15);y2=1}return 1}function gn(I){var Q=I.ma,Y=I.U,ae=I.T;return t(!(1&I.ka)),0>=Y||0>=ae?0:(Y=Q.Ib(I,Q),Q.Jb!=null&&Q.Jb(I,Q,Y),Q.Dc+=Y,1)}function vn(I){I.ma.memory=null}function $t(I,Q,Y,ae){return K(I,8)!=47?0:(Q[0]=K(I,14)+1,Y[0]=K(I,14)+1,ae[0]=K(I,1),K(I,3)!=0?0:!I.h)}function tn(I,Q){if(4>I)return I+1;var Y=I-2>>1;return(2+(1&I)<<Y)+K(Q,Y)+1}function en(I,Q){return 120<Q?Q-120:1<=(Y=((Y=Yu[Q-1])>>4)*I+(8-(15&Y)))?Y:1;var Y}function cr(I,Q,Y){var ae=W(Y),ue=I[Q+=255&ae].g-8;return 0<ue&&(te(Y,Y.u+8),ae=W(Y),Q+=I[Q].value,Q+=ae&(1<<ue)-1),te(Y,Y.u+I[Q].g),I[Q].value}function Yr(I,Q,Y){return Y.g+=I.g,Y.value+=I.value<<Q>>>0,t(8>=Y.g),I.g}function ta(I,Q,Y){var ae=I.xc;return t((Q=ae==0?0:I.vc[I.md*(Y>>ae)+(Q>>ae)])<I.Wb),I.Ya[Q]}function fe(I,Q,Y,ae){var ue=I.ab,me=I.c*Q,pe=I.C;Q=pe+Q;var ve=Y,we=ae;for(ae=I.Ta,Y=I.Ua;0<ue--;){var ke=I.gc[ue],Me=pe,nt=Q,et=ve,Ge=we,Nt=(we=ae,ve=Y,ke.Ea);switch(t(Me<nt),t(nt<=ke.nc),ke.hc){case 2:ug(et,Ge,(nt-Me)*Nt,we,ve);break;case 0:var ht=Me,Ue=nt,Ve=we,Et=ve,kt=(Zt=ke).Ea;ht==0&&(y1(et,Ge,null,null,1,Ve,Et),mt(et,Ge+1,0,0,kt-1,Ve,Et+1),Ge+=kt,Et+=kt,++ht);for(var _t=1<<Zt.b,nr=_t-1,Xt=He(kt,Zt.b),mr=Zt.K,Zt=Zt.w+(ht>>Zt.b)*Xt;ht<Ue;){var Rn=mr,$n=Zt,An=1;for(Em(et,Ge,Ve,Et-kt,1,Ve,Et);An<kt;){var on=(An&~nr)+_t;on>kt&&(on=kt),(0,$u[Rn[$n++]>>8&15])(et,Ge+ +An,Ve,Et+An-kt,on-An,Ve,Et+An),An=on}Ge+=kt,Et+=kt,++ht&nr||(Zt+=Xt)}nt!=ke.nc&&n(we,ve-Nt,we,ve+(nt-Me-1)*Nt,Nt);break;case 1:for(Nt=et,Ue=Ge,kt=(et=ke.Ea)-(Et=et&~(Ve=(Ge=1<<ke.b)-1)),ht=He(et,ke.b),_t=ke.K,ke=ke.w+(Me>>ke.b)*ht;Me<nt;){for(nr=_t,Xt=ke,mr=new Oe,Zt=Ue+Et,Rn=Ue+et;Ue<Zt;)Lt(nr[Xt++],mr),Kd(mr,Nt,Ue,Ge,we,ve),Ue+=Ge,ve+=Ge;Ue<Rn&&(Lt(nr[Xt++],mr),Kd(mr,Nt,Ue,kt,we,ve),Ue+=kt,ve+=kt),++Me&Ve||(ke+=ht)}break;case 3:if(et==we&&Ge==ve&&0<ke.b){for(Ue=we,et=Nt=ve+(nt-Me)*Nt-(Et=(nt-Me)*He(ke.Ea,ke.b)),Ge=we,Ve=ve,ht=[],Et=(kt=Et)-1;0<=Et;--Et)ht[Et]=Ge[Ve+Et];for(Et=kt-1;0<=Et;--Et)Ue[et+Et]=ht[Et];Tl(ke,Me,nt,we,Nt,we,ve)}else Tl(ke,Me,nt,et,Ge,we,ve)}ve=ae,we=Y}we!=Y&&n(ae,Y,ve,we,me)}function Be(I,Q){var Y=I.V,ae=I.Ba+I.c*I.C,ue=Q-I.C;if(t(Q<=I.l.o),t(16>=ue),0<ue){var me=I.l,pe=I.Ta,ve=I.Ua,we=me.width;if(fe(I,ue,Y,ae),ue=ve=[ve],t((Y=I.C)<(ae=Q)),t(me.v<me.va),ae>me.o&&(ae=me.o),Y<me.j){var ke=me.j-Y;Y=me.j,ue[0]+=ke*we}if(Y>=ae?Y=0:(ue[0]+=4*me.v,me.ka=Y-me.j,me.U=me.va-me.v,me.T=ae-Y,Y=1),Y){if(ve=ve[0],11>(Y=I.ca).S){var Me=Y.f.RGBA,nt=(ae=Y.S,ue=me.U,me=me.T,ke=Me.eb,Me.A),et=me;for(Me=Me.fb+I.Ma*Me.A;0<et--;){var Ge=pe,Nt=ve,ht=ue,Ue=ke,Ve=Me;switch(ae){case Ri:no(Ge,Nt,ht,Ue,Ve);break;case Th:yi(Ge,Nt,ht,Ue,Ve);break;case Sm:yi(Ge,Nt,ht,Ue,Ve),sl(Ue,Ve,0,ht,1,0);break;case tu:oc(Ge,Nt,ht,Ue,Ve);break;case _m:Vr(Ge,Nt,ht,Ue,Ve,1);break;case eA:Vr(Ge,Nt,ht,Ue,Ve,1),sl(Ue,Ve,0,ht,1,0);break;case lf:Vr(Ge,Nt,ht,Ue,Ve,0);break;case Wu:Vr(Ge,Nt,ht,Ue,Ve,0),sl(Ue,Ve,1,ht,1,0);break;case qu:Gd(Ge,Nt,ht,Ue,Ve);break;case Ih:Gd(Ge,Nt,ht,Ue,Ve),hn(Ue,Ve,ht,1,0);break;case Ag:No(Ge,Nt,ht,Ue,Ve);break;default:t(0)}ve+=we,Me+=nt}I.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=Y.height)}}I.C=Q,t(I.C<=I.i)}function Ee(I){var Q;if(0<I.ua)return 0;for(Q=0;Q<I.Wb;++Q){var Y=I.Ya[Q].G,ae=I.Ya[Q].H;if(0<Y[1][ae[1]+0].g||0<Y[2][ae[2]+0].g||0<Y[3][ae[3]+0].g)return 0}return 1}function Ce(I,Q,Y,ae,ue,me){if(I.Z!=0){var pe=I.qd,ve=I.rd;for(t(nu[I.Z]!=null);Q<Y;++Q)nu[I.Z](pe,ve,ae,ue,ae,ue,me),pe=ae,ve=ue,ue+=me;I.qd=pe,I.rd=ve}}function Ne(I,Q){var Y=I.l.ma,ae=Y.Z==0||Y.Z==1?I.l.j:I.C;if(ae=I.C<ae?ae:I.C,t(Q<=I.l.o),Q>ae){var ue=I.l.width,me=Y.ca,pe=Y.tb+ue*ae,ve=I.V,we=I.Ba+I.c*ae,ke=I.gc;t(I.ab==1),t(ke[0].hc==3),$d(ke[0],ae,Q,ve,we,me,pe),Ce(Y,ae,Q,me,pe,ue)}I.C=I.Ma=Q}function Te(I,Q,Y,ae,ue,me,pe){var ve=I.$/ae,we=I.$%ae,ke=I.m,Me=I.s,nt=Y+I.$,et=nt;ue=Y+ae*ue;var Ge=Y+ae*me,Nt=280+Me.ua,ht=I.Pb?ve:16777216,Ue=0<Me.ua?Me.Wa:null,Ve=Me.wc,Et=nt<Ge?ta(Me,we,ve):null;t(I.C<me),t(Ge<=ue);var kt=!1;e:for(;;){for(;kt||nt<Ge;){var _t=0;if(ve>=ht){var nr=nt-Y;t((ht=I).Pb),ht.wd=ht.m,ht.xd=nr,0<ht.s.ua&&_e(ht.s.Wa,ht.s.vb),ht=ve+v2}if(we&Ve||(Et=ta(Me,we,ve)),t(Et!=null),Et.Qb&&(Q[nt]=Et.qb,kt=!0),!kt)if(ie(ke),Et.jc){_t=ke,nr=Q;var Xt=nt,mr=Et.pd[W(_t)&Os-1];t(Et.jc),256>mr.g?(te(_t,_t.u+mr.g),nr[Xt]=mr.value,_t=0):(te(_t,_t.u+mr.g-256),t(256<=mr.value),_t=mr.value),_t==0&&(kt=!0)}else _t=cr(Et.G[0],Et.H[0],ke);if(ke.h)break;if(kt||256>_t){if(!kt)if(Et.nd)Q[nt]=(Et.qb|_t<<8)>>>0;else{if(ie(ke),kt=cr(Et.G[1],Et.H[1],ke),ie(ke),nr=cr(Et.G[2],Et.H[2],ke),Xt=cr(Et.G[3],Et.H[3],ke),ke.h)break;Q[nt]=(Xt<<24|kt<<16|_t<<8|nr)>>>0}if(kt=!1,++nt,++we>=ae&&(we=0,++ve,pe!=null&&ve<=me&&!(ve%16)&&pe(I,ve),Ue!=null))for(;et<nt;)_t=Q[et++],Ue.X[(506832829*_t&4294967295)>>>Ue.Mb]=_t}else if(280>_t){if(_t=tn(_t-256,ke),nr=cr(Et.G[4],Et.H[4],ke),ie(ke),nr=en(ae,nr=tn(nr,ke)),ke.h)break;if(nt-Y<nr||ue-nt<_t)break e;for(Xt=0;Xt<_t;++Xt)Q[nt+Xt]=Q[nt+Xt-nr];for(nt+=_t,we+=_t;we>=ae;)we-=ae,++ve,pe!=null&&ve<=me&&!(ve%16)&&pe(I,ve);if(t(nt<=ue),we&Ve&&(Et=ta(Me,we,ve)),Ue!=null)for(;et<nt;)_t=Q[et++],Ue.X[(506832829*_t&4294967295)>>>Ue.Mb]=_t}else{if(!(_t<Nt))break e;for(kt=_t-280,t(Ue!=null);et<nt;)_t=Q[et++],Ue.X[(506832829*_t&4294967295)>>>Ue.Mb]=_t;_t=nt,t(!(kt>>>(nr=Ue).Xa)),Q[_t]=nr.X[kt],kt=!0}kt||t(ke.h==J(ke))}if(I.Pb&&ke.h&&nt<ue)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&_e(I.s.vb,I.s.Wa);else{if(ke.h)break e;pe!=null&&pe(I,ve>me?me:ve),I.a=0,I.$=nt-Y}return 1}return I.a=3,0}function Ye(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var Q=I.Wa;Q!=null&&(Q.X=null),I.vb=null,t(I!=null)}function ut(){var I=new _h;return I==null?null:(I.a=0,I.xb=jh,Fn("Predictor","VP8LPredictors"),Fn("Predictor","VP8LPredictors_C"),Fn("PredictorAdd","VP8LPredictorsAdd"),Fn("PredictorAdd","VP8LPredictorsAdd_C"),ug=Bt,Kd=Ot,no=bt,yi=Nr,Gd=rr,No=nn,oc=Cr,C.VP8LMapColor32b=ti,C.VP8LMapColor8b=Cm,I)}function $e(I,Q,Y,ae,ue){var me=1,pe=[I],ve=[Q],we=ae.m,ke=ae.s,Me=null,nt=0;e:for(;;){if(Y)for(;me&&K(we,1);){var et=pe,Ge=ve,Nt=ae,ht=1,Ue=Nt.m,Ve=Nt.gc[Nt.ab],Et=K(Ue,2);if(Nt.Oc&1<<Et)me=0;else{switch(Nt.Oc|=1<<Et,Ve.hc=Et,Ve.Ea=et[0],Ve.nc=Ge[0],Ve.K=[null],++Nt.ab,t(4>=Nt.ab),Et){case 0:case 1:Ve.b=K(Ue,3)+2,ht=$e(He(Ve.Ea,Ve.b),He(Ve.nc,Ve.b),0,Nt,Ve.K),Ve.K=Ve.K[0];break;case 3:var kt,_t=K(Ue,8)+1,nr=16<_t?0:4<_t?1:2<_t?2:3;if(et[0]=He(Ve.Ea,nr),Ve.b=nr,kt=ht=$e(_t,1,0,Nt,Ve.K)){var Xt,mr=_t,Zt=Ve,Rn=1<<(8>>Zt.b),$n=s(Rn);if($n==null)kt=0;else{var An=Zt.K[0],on=Zt.w;for($n[0]=Zt.K[0][0],Xt=1;Xt<1*mr;++Xt)$n[Xt]=Xe(An[on+Xt],$n[Xt-1]);for(;Xt<4*Rn;++Xt)$n[Xt]=0;Zt.K[0]=null,Zt.K[0]=$n,kt=1}}ht=kt;break;case 2:break;default:t(0)}me=ht}}if(pe=pe[0],ve=ve[0],me&&K(we,1)&&!(me=1<=(nt=K(we,4))&&11>=nt)){ae.a=3;break e}var na;if(na=me)t:{var Kn,qr,ua,Sr=ae,Lr=pe,Dn=ve,Pn=nt,ai=Y,Ls=Sr.m,es=Sr.s,ts=[null],ps=1,Ol=0,Gn=uf[Pn];r:for(;;){if(ai&&K(Ls,1)){var gs=K(Ls,3)+2,uc=He(Lr,gs),aA=He(Dn,gs),ff=uc*aA;if(!$e(uc,aA,0,Sr,ts))break r;for(ts=ts[0],es.xc=gs,Kn=0;Kn<ff;++Kn){var sA=ts[Kn]>>8&65535;ts[Kn]=sA,sA>=ps&&(ps=sA+1)}}if(Ls.h)break r;for(qr=0;5>qr;++qr){var Ta=il[qr];!qr&&0<Pn&&(Ta+=1<<Pn),Ol<Ta&&(Ol=Ta)}var Im=i(ps*Gn,T),vg=ps,so=i(vg,R);if(so==null)var Ra=null;else t(65536>=vg),Ra=so;var hf=s(Ol);if(Ra==null||hf==null||Im==null){Sr.a=1;break r}var iA=Im;for(Kn=ua=0;Kn<ps;++Kn){var Bo=Ra[Kn],oA=Bo.G,To=Bo.H,jm=0,Oh=1,xg=0;for(qr=0;5>qr;++qr){Ta=il[qr],oA[qr]=iA,To[qr]=ua,!qr&&0<Pn&&(Ta+=1<<Pn);a:{var Fm,bg=Ta,Om=Sr,Dh=hf,C2=iA,_2=ua,Dm=0,td=Om.m,tk=K(td,1);if(a(Dh,0,0,bg),tk){var S2=K(td,1)+1,N2=K(td,1),_1=K(td,N2==0?1:8);Dh[_1]=1,S2==2&&(Dh[_1=K(td,8)]=1);var Rh=1}else{var S1=s(19),N1=K(td,4)+4;if(19<N1){Om.a=3;var Rm=0;break a}for(Fm=0;Fm<N1;++Fm)S1[Xu[Fm]]=K(td,3);var yg=void 0,Ph=void 0,k2=Om,B2=S1,rd=bg,Pm=Dh,wg=0,dc=k2.m,Lh=8,k1=i(128,T);n:for(;D(k1,0,7,B2,19);){if(K(dc,1)){var T2=2+2*K(dc,3);if((yg=2+K(dc,T2))>rd)break n}else yg=rd;for(Ph=0;Ph<rd&&yg--;){ie(dc);var B1=k1[0+(127&W(dc))];te(dc,dc.u+B1.g);var mf=B1.value;if(16>mf)Pm[Ph++]=mf,mf!=0&&(Lh=mf);else{var I2=mf==16,T1=mf-16,I1=Fl[T1],j1=K(dc,fg[T1])+I1;if(Ph+j1>rd)break n;for(var j2=I2?Lh:0;0<j1--;)Pm[Ph++]=j2}}wg=1;break n}wg||(k2.a=3),Rh=wg}(Rh=Rh&&!td.h)&&(Dm=D(C2,_2,8,Dh,bg)),Rh&&Dm!=0?Rm=Dm:(Om.a=3,Rm=0)}if(Rm==0)break r;if(Oh&&cf[qr]==1&&(Oh=iA[ua].g==0),jm+=iA[ua].g,ua+=Rm,3>=qr){var pf,Eg=hf[0];for(pf=1;pf<Ta;++pf)hf[pf]>Eg&&(Eg=hf[pf]);xg+=Eg}}if(Bo.nd=Oh,Bo.Qb=0,Oh&&(Bo.qb=(oA[3][To[3]+0].value<<24|oA[1][To[1]+0].value<<16|oA[2][To[2]+0].value)>>>0,jm==0&&256>oA[0][To[0]+0].value&&(Bo.Qb=1,Bo.qb+=oA[0][To[0]+0].value<<8)),Bo.jc=!Bo.Qb&&6>xg,Bo.jc){var Lm,nd=Bo;for(Lm=0;Lm<Os;++Lm){var iu=Lm,ad=nd.pd[iu],Mm=nd.G[0][nd.H[0]+iu];256<=Mm.value?(ad.g=Mm.g+256,ad.value=Mm.value):(ad.g=0,ad.value=0,iu>>=Yr(Mm,8,ad),iu>>=Yr(nd.G[1][nd.H[1]+iu],16,ad),iu>>=Yr(nd.G[2][nd.H[2]+iu],0,ad),Yr(nd.G[3][nd.H[3]+iu],24,ad))}}}es.vc=ts,es.Wb=ps,es.Ya=Ra,es.yc=Im,na=1;break t}na=0}if(!(me=na)){ae.a=3;break e}if(0<nt){if(ke.ua=1<<nt,!De(ke.Wa,nt)){ae.a=1,me=0;break e}}else ke.ua=0;var Um=ae,F1=pe,F2=ve,O1=Um.s,D1=O1.xc;if(Um.c=F1,Um.i=F2,O1.md=He(F1,D1),O1.wc=D1==0?-1:(1<<D1)-1,Y){ae.xb=b2;break e}if((Me=s(pe*ve))==null){ae.a=1,me=0;break e}me=(me=Te(ae,Me,0,pe,ve,ve,null))&&!we.h;break e}return me?(ue!=null?ue[0]=Me:(t(Me==null),t(Y)),ae.$=0,Y||Ye(ke)):Ye(ke),me}function tt(I,Q){var Y=I.c*I.i,ae=Y+Q+16*Q;return t(I.c<=Q),I.V=s(ae),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+Y+Q,1)}function at(I,Q){var Y=I.C,ae=Q-Y,ue=I.V,me=I.Ba+I.c*Y;for(t(Q<=I.l.o);0<ae;){var pe=16<ae?16:ae,ve=I.l.ma,we=I.l.width,ke=we*pe,Me=ve.ca,nt=ve.tb+we*Y,et=I.Ta,Ge=I.Ua;fe(I,pe,ue,me),ba(et,Ge,Me,nt,ke),Ce(ve,Y,Y+pe,Me,nt,we),ae-=pe,ue+=pe*I.c,Y+=pe}t(Y==Q),I.C=I.Ma=Q}function Tt(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var I=[];return function Q(Y,ae,ue){for(var me=ue[ae],pe=0;pe<me&&(Y.push(ue.length>ae+1?[]:0),!(ue.length<ae+1));pe++)Q(Y[pe],ae+1,ue)}(I,0,[3,11]),I}()}function Kt(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function _r(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function an(){this.ld=this.La=this.dd=this.tc=0}function sn(){this.Na=this.la=0}function dn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ds(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new an),this.Y=0,this.ya=Array(new ds),this.aa=0,this.l=new Fs}function As(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Zs(){this.cb=this.a=0,this.sc="",this.m=new ne,this.Od=new Tt,this.Kc=new Vt,this.ed=new _r,this.Qa=new Yt,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ne),this.ia=0,this.pb=i(4,dn),this.Pa=new Kt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new As),this.Hd=0,this.rb=Array(new sn),this.sb=0,this.wa=Array(new an),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ds),this.L=this.aa=0,this.gd=o([4,2],an),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gi(){var I=new Zs;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,Ds||(Ds=yh)),I}function xa(I,Q,Y){return I.a==0&&(I.a=Q,I.sc=Y,I.cb=0),0}function ei(I,Q,Y){return 3<=Y&&I[Q+0]==157&&I[Q+1]==1&&I[Q+2]==42}function Rd(I,Q){if(I==null)return 0;if(I.a=0,I.sc="OK",Q==null)return xa(I,2,"null VP8Io passed to VP8GetHeaders()");var Y=Q.data,ae=Q.w,ue=Q.ha;if(4>ue)return xa(I,7,"Truncated header.");var me=Y[ae+0]|Y[ae+1]<<8|Y[ae+2]<<16,pe=I.Od;if(pe.Rb=!(1&me),pe.td=me>>1&7,pe.yd=me>>4&1,pe.ub=me>>5,3<pe.td)return xa(I,3,"Incorrect keyframe parameters.");if(!pe.yd)return xa(I,4,"Frame not displayable.");ae+=3,ue-=3;var ve=I.Kc;if(pe.Rb){if(7>ue)return xa(I,7,"cannot parse picture header");if(!ei(Y,ae,ue))return xa(I,3,"Bad code word");ve.c=16383&(Y[ae+4]<<8|Y[ae+3]),ve.Td=Y[ae+4]>>6,ve.i=16383&(Y[ae+6]<<8|Y[ae+5]),ve.Ud=Y[ae+6]>>6,ae+=7,ue-=7,I.za=ve.c+15>>4,I.Ub=ve.i+15>>4,Q.width=ve.c,Q.height=ve.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((me=I.Pa).jb,0,255,me.jb.length),t((me=I.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,a(me.Zb,0,0,me.Zb.length),a(me.Lb,0,0,me.Lb)}if(pe.ub>ue)return xa(I,7,"bad partition length");X(me=I.m,Y,ae,pe.ub),ae+=pe.ub,ue-=pe.ub,pe.Rb&&(ve.Ld=oe(me),ve.Kd=oe(me)),ve=I.Qa;var we,ke=I.Pa;if(t(me!=null),t(ve!=null),ve.Cb=oe(me),ve.Cb){if(ve.Bb=oe(me),oe(me)){for(ve.Fb=oe(me),we=0;4>we;++we)ve.Zb[we]=oe(me)?Z(me,7):0;for(we=0;4>we;++we)ve.Lb[we]=oe(me)?Z(me,6):0}if(ve.Bb)for(we=0;3>we;++we)ke.jb[we]=oe(me)?q(me,8):255}else ve.Bb=0;if(me.Ka)return xa(I,3,"cannot parse segment header");if((ve=I.ed).zd=oe(me),ve.Tb=q(me,6),ve.wb=q(me,3),ve.Pc=oe(me),ve.Pc&&oe(me)){for(ke=0;4>ke;++ke)oe(me)&&(ve.vd[ke]=Z(me,6));for(ke=0;4>ke;++ke)oe(me)&&(ve.od[ke]=Z(me,6))}if(I.L=ve.Tb==0?0:ve.zd?1:2,me.Ka)return xa(I,3,"cannot parse filter header");var Me=ue;if(ue=we=ae,ae=we+Me,ve=Me,I.Xb=(1<<q(I.m,2))-1,Me<3*(ke=I.Xb))Y=7;else{for(we+=3*ke,ve-=3*ke,Me=0;Me<ke;++Me){var nt=Y[ue+0]|Y[ue+1]<<8|Y[ue+2]<<16;nt>ve&&(nt=ve),X(I.Jc[+Me],Y,we,nt),we+=nt,ve-=nt,ue+=3}X(I.Jc[+ke],Y,we,ve),Y=we<ae?0:5}if(Y!=0)return xa(I,Y,"cannot parse partitions");for(Y=q(we=I.m,7),ue=oe(we)?Z(we,4):0,ae=oe(we)?Z(we,4):0,ve=oe(we)?Z(we,4):0,ke=oe(we)?Z(we,4):0,we=oe(we)?Z(we,4):0,Me=I.Qa,nt=0;4>nt;++nt){if(Me.Cb){var et=Me.Zb[nt];Me.Fb||(et+=Y)}else{if(0<nt){I.pb[nt]=I.pb[0];continue}et=Y}var Ge=I.pb[nt];Ge.Sc[0]=Nm[zn(et+ue,127)],Ge.Sc[1]=km[zn(et+0,127)],Ge.Eb[0]=2*Nm[zn(et+ae,127)],Ge.Eb[1]=101581*km[zn(et+ve,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=Nm[zn(et+ke,117)],Ge.Qc[1]=km[zn(et+we,127)],Ge.lc=et+we}if(!pe.Rb)return xa(I,4,"Not a key frame.");for(oe(me),pe=I.Pa,Y=0;4>Y;++Y){for(ue=0;8>ue;++ue)for(ae=0;3>ae;++ae)for(ve=0;11>ve;++ve)ke=ce(me,df[Y][ue][ae][ve])?q(me,8):ru[Y][ue][ae][ve],pe.Wc[Y][ue].Yb[ae][ve]=ke;for(ue=0;17>ue;++ue)pe.Xc[Y][ue]=pe.Wc[Y][x2[ue]]}return I.kc=oe(me),I.kc&&(I.Bd=q(me,8)),I.cb=1}function yh(I,Q,Y,ae,ue,me,pe){var ve=Q[ue].Yb[Y];for(Y=0;16>ue;++ue){if(!ce(I,ve[Y+0]))return ue;for(;!ce(I,ve[Y+1]);)if(ve=Q[++ue].Yb[0],Y=0,ue==16)return 16;var we=Q[ue+1].Yb;if(ce(I,ve[Y+2])){var ke=I,Me=0;if(ce(ke,(et=ve)[(nt=Y)+3]))if(ce(ke,et[nt+6])){for(ve=0,nt=2*(Me=ce(ke,et[nt+8]))+(et=ce(ke,et[nt+9+Me])),Me=0,et=$a[nt];et[ve];++ve)Me+=Me+ce(ke,et[ve]);Me+=3+(8<<nt)}else ce(ke,et[nt+7])?(Me=7+2*ce(ke,165),Me+=ce(ke,145)):Me=5+ce(ke,159);else Me=ce(ke,et[nt+4])?3+ce(ke,et[nt+5]):2;ve=we[2]}else Me=1,ve=we[1];we=pe+Un[ue],0>(ke=I).b&&Ae(ke);var nt,et=ke.b,Ge=(nt=ke.Ca>>1)-(ke.I>>et)>>31;--ke.b,ke.Ca+=Ge,ke.Ca|=1,ke.I-=(nt+1&Ge)<<et,me[we]=((Me^Ge)-Ge)*ae[(0<ue)+0]}return 16}function Qc(I){var Q=I.rb[I.sb-1];Q.la=0,Q.Na=0,a(I.zc,0,0,I.zc.length),I.ja=0}function qA(I,Q){if(I==null)return 0;if(Q==null)return xa(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!Rd(I,Q))return 0;if(t(I.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(I.L=0);var Y=ed[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=Q.v-Y>>4,I.zb=Q.j-Y>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=Q.o+15+Y>>4,I.Hb=Q.va+15+Y>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var ae=I.ed;for(Y=0;4>Y;++Y){var ue;if(I.Qa.Cb){var me=I.Qa.Lb[Y];I.Qa.Fb||(me+=ae.Tb)}else me=ae.Tb;for(ue=0;1>=ue;++ue){var pe=I.gd[Y][ue],ve=me;if(ae.Pc&&(ve+=ae.vd[0],ue&&(ve+=ae.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var we=ve;0<ae.wb&&(we=4<ae.wb?we>>2:we>>1)>9-ae.wb&&(we=9-ae.wb),1>we&&(we=1),pe.dd=we,pe.tc=2*ve+we,pe.ld=40<=ve?2:15<=ve?1:0}else pe.tc=0;pe.La=ue}}}Y=0}else xa(I,6,"Frame setup failed"),Y=I.a;if(Y=Y==0){if(Y){I.$c=0,0<I.Aa||(I.Ic=w2);e:{Y=I.Ic,ae=4*(we=I.za);var ke=32*we,Me=we+1,nt=0<I.L?we*(0<I.Aa?2:1):0,et=(I.Aa==2?2:1)*we;if((pe=ae+832+(ue=3*(16*Y+ed[I.L])/2*ke)+(me=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=pe)Y=0;else{if(pe>I.Vb){if(I.Vb=0,I.Ec=s(pe),I.Fc=0,I.Ec==null){Y=xa(I,1,"no memory during frame initialization.");break e}I.Vb=pe}pe=I.Ec,ve=I.Fc,I.Ac=pe,I.Bc=ve,ve+=ae,I.Gd=i(ke,As),I.Hd=0,I.rb=i(Me+1,sn),I.sb=1,I.wa=nt?i(nt,an):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=we),t(!0),I.oc=pe,I.pc=ve,ve+=832,I.ya=i(et,ds),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=we),I.R=16*we,I.B=8*we,we=(ke=ed[I.L])*I.R,ke=ke/2*I.B,I.sa=pe,I.ta=ve+we,I.qa=I.sa,I.ra=I.ta+16*Y*I.R+ke,I.Ha=I.qa,I.Ia=I.ra+8*Y*I.B+ke,I.$c=0,ve+=ue,I.mb=me?pe:null,I.nb=me?ve:null,t(ve+me<=I.Fc+I.Vb),Qc(I),a(I.Ac,I.Bc,0,ae),Y=1}}if(Y){if(Q.ka=0,Q.y=I.sa,Q.O=I.ta,Q.f=I.qa,Q.N=I.ra,Q.ea=I.Ha,Q.Vd=I.Ia,Q.fa=I.R,Q.Rc=I.B,Q.F=null,Q.J=0,!Gu){for(Y=-255;255>=Y;++Y)Za[255+Y]=0>Y?-Y:Y;for(Y=-1020;1020>=Y;++Y)Il[1020+Y]=-128>Y?-128:127<Y?127:Y;for(Y=-112;112>=Y;++Y)Jd[112+Y]=-16>Y?-16:15<Y?15:Y;for(Y=-255;510>=Y;++Y)Zd[255+Y]=0>Y?0:255<Y?255:Y;Gu=1}Zc=yo,lc=Vc,cc=wl,ms=Vn,ko=zc,Va=Hc,nf=qc,eu=sc,kh=Ud,qd=ZA,Wd=Md,Xd=Uu,af=Qu,Bh=Wc,Yd=al,Ku=Oi,sf=hs,za=Ch,ao[0]=ji,ao[1]=wh,ao[2]=_l,ao[3]=Eh,ao[4]=wo,ao[5]=Sl,ao[6]=ro,ao[7]=Eo,ao[8]=ac,ao[9]=$c,Ju[0]=El,Ju[1]=XA,Ju[2]=tc,Ju[3]=Ld,Ju[4]=ca,Ju[5]=nc,Ju[6]=Cl,ol[0]=Nl,ol[1]=WA,ol[2]=YA,ol[3]=Co,ol[4]=xn,ol[5]=fs,ol[6]=Kc,Y=1}else Y=0}Y&&(Y=function(Ge,Nt){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var ht,Ue=Ge.Jc[Ge.M&Ge.Xb],Ve=Ge.m,Et=Ge;for(ht=0;ht<Et.za;++ht){var kt=Ve,_t=Et,nr=_t.Ac,Xt=_t.Bc+4*ht,mr=_t.zc,Zt=_t.ya[_t.aa+ht];if(_t.Qa.Bb?Zt.$b=ce(kt,_t.Pa.jb[0])?2+ce(kt,_t.Pa.jb[2]):ce(kt,_t.Pa.jb[1]):Zt.$b=0,_t.kc&&(Zt.Ad=ce(kt,_t.Bd)),Zt.Za=!ce(kt,145)+0,Zt.Za){var Rn=Zt.Ob,$n=0;for(_t=0;4>_t;++_t){var An,on=mr[0+_t];for(An=0;4>An;++An){on=w1[nr[Xt+An]][on];for(var na=tA[ce(kt,on[0])];0<na;)na=tA[2*na+ce(kt,on[na])];on=-na,nr[Xt+An]=on}n(Rn,$n,nr,Xt,4),$n+=4,mr[0+_t]=on}}else on=ce(kt,156)?ce(kt,128)?1:3:ce(kt,163)?2:0,Zt.Ob[0]=on,a(nr,Xt,on,4),a(mr,0,on,4);Zt.Dd=ce(kt,142)?ce(kt,114)?ce(kt,183)?1:3:2:0}if(Et.m.Ka)return xa(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(Et=Ue,kt=(Ve=Ge).rb[Ve.sb-1],nr=Ve.rb[Ve.sb+Ve.ja],ht=Ve.ya[Ve.aa+Ve.ja],Xt=Ve.kc?ht.Ad:0)kt.la=nr.la=0,ht.Za||(kt.Na=nr.Na=0),ht.Hc=0,ht.Gc=0,ht.ia=0;else{var Kn,qr;if(kt=nr,nr=Et,Xt=Ve.Pa.Xc,mr=Ve.ya[Ve.aa+Ve.ja],Zt=Ve.pb[mr.$b],_t=mr.ad,Rn=0,$n=Ve.rb[Ve.sb-1],on=An=0,a(_t,Rn,0,384),mr.Za)var ua=0,Sr=Xt[3];else{na=s(16);var Lr=kt.Na+$n.Na;if(Lr=Ds(nr,Xt[1],Lr,Zt.Eb,0,na,0),kt.Na=$n.Na=(0<Lr)+0,1<Lr)Zc(na,0,_t,Rn);else{var Dn=na[0]+3>>3;for(na=0;256>na;na+=16)_t[Rn+na]=Dn}ua=1,Sr=Xt[0]}var Pn=15&kt.la,ai=15&$n.la;for(na=0;4>na;++na){var Ls=1&ai;for(Dn=qr=0;4>Dn;++Dn)Pn=Pn>>1|(Ls=(Lr=Ds(nr,Sr,Lr=Ls+(1&Pn),Zt.Sc,ua,_t,Rn))>ua)<<7,qr=qr<<2|(3<Lr?3:1<Lr?2:_t[Rn+0]!=0),Rn+=16;Pn>>=4,ai=ai>>1|Ls<<7,An=(An<<8|qr)>>>0}for(Sr=Pn,ua=ai>>4,Kn=0;4>Kn;Kn+=2){for(qr=0,Pn=kt.la>>4+Kn,ai=$n.la>>4+Kn,na=0;2>na;++na){for(Ls=1&ai,Dn=0;2>Dn;++Dn)Lr=Ls+(1&Pn),Pn=Pn>>1|(Ls=0<(Lr=Ds(nr,Xt[2],Lr,Zt.Qc,0,_t,Rn)))<<3,qr=qr<<2|(3<Lr?3:1<Lr?2:_t[Rn+0]!=0),Rn+=16;Pn>>=2,ai=ai>>1|Ls<<5}on|=qr<<4*Kn,Sr|=Pn<<4<<Kn,ua|=(240&ai)<<Kn}kt.la=Sr,$n.la=ua,mr.Hc=An,mr.Gc=on,mr.ia=43690&on?0:Zt.ia,Xt=!(An|on)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[ht.$b][ht.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Xt),Et.Ka)return xa(Ge,7,"Premature end-of-file encountered.")}if(Qc(Ge),Ve=Nt,Et=1,ht=(Ue=Ge).D,kt=0<Ue.L&&Ue.M>=Ue.zb&&Ue.M<=Ue.Va,Ue.Aa==0)e:{if(ht.M=Ue.M,ht.uc=kt,_o(Ue,ht),Et=1,ht=(qr=Ue.D).Nb,kt=(on=ed[Ue.L])*Ue.R,nr=on/2*Ue.B,na=16*ht*Ue.R,Dn=8*ht*Ue.B,Xt=Ue.sa,mr=Ue.ta-kt+na,Zt=Ue.qa,_t=Ue.ra-nr+Dn,Rn=Ue.Ha,$n=Ue.Ia-nr+Dn,ai=(Pn=qr.M)==0,An=Pn>=Ue.Va-1,Ue.Aa==2&&_o(Ue,qr),qr.uc)for(Ls=(Lr=Ue).D.M,t(Lr.D.uc),qr=Lr.yb;qr<Lr.Hb;++qr){ua=qr,Sr=Ls;var es=(ts=(Ta=Lr).D).Nb;Kn=Ta.R;var ts=ts.wa[ts.Y+ua],ps=Ta.sa,Ol=Ta.ta+16*es*Kn+16*ua,Gn=ts.dd,gs=ts.tc;if(gs!=0)if(t(3<=gs),Ta.L==1)0<ua&&Ku(ps,Ol,Kn,gs+4),ts.La&&za(ps,Ol,Kn,gs),0<Sr&&Yd(ps,Ol,Kn,gs+4),ts.La&&sf(ps,Ol,Kn,gs);else{var uc=Ta.B,aA=Ta.qa,ff=Ta.ra+8*es*uc+8*ua,sA=Ta.Ha,Ta=Ta.Ia+8*es*uc+8*ua;es=ts.ld,0<ua&&(eu(ps,Ol,Kn,gs+4,Gn,es),qd(aA,ff,sA,Ta,uc,gs+4,Gn,es)),ts.La&&(Xd(ps,Ol,Kn,gs,Gn,es),Bh(aA,ff,sA,Ta,uc,gs,Gn,es)),0<Sr&&(nf(ps,Ol,Kn,gs+4,Gn,es),kh(aA,ff,sA,Ta,uc,gs+4,Gn,es)),ts.La&&(Wd(ps,Ol,Kn,gs,Gn,es),af(aA,ff,sA,Ta,uc,gs,Gn,es))}}if(Ue.ia&&alert("todo:DitherRow"),Ve.put!=null){if(qr=16*Pn,Pn=16*(Pn+1),ai?(Ve.y=Ue.sa,Ve.O=Ue.ta+na,Ve.f=Ue.qa,Ve.N=Ue.ra+Dn,Ve.ea=Ue.Ha,Ve.W=Ue.Ia+Dn):(qr-=on,Ve.y=Xt,Ve.O=mr,Ve.f=Zt,Ve.N=_t,Ve.ea=Rn,Ve.W=$n),An||(Pn-=on),Pn>Ve.o&&(Pn=Ve.o),Ve.F=null,Ve.J=null,Ue.Fa!=null&&0<Ue.Fa.length&&qr<Pn&&(Ve.J=Hd(Ue,Ve,qr,Pn-qr),Ve.F=Ue.mb,Ve.F==null&&Ve.F.length==0)){Et=xa(Ue,3,"Could not decode alpha data.");break e}qr<Ve.j&&(on=Ve.j-qr,qr=Ve.j,t(!(1&on)),Ve.O+=Ue.R*on,Ve.N+=Ue.B*(on>>1),Ve.W+=Ue.B*(on>>1),Ve.F!=null&&(Ve.J+=Ve.width*on)),qr<Pn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=qr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Pn-qr,Et=Ve.put(Ve))}ht+1!=Ue.Ic||An||(n(Ue.sa,Ue.ta-kt,Xt,mr+16*Ue.R,kt),n(Ue.qa,Ue.ra-nr,Zt,_t+8*Ue.B,nr),n(Ue.Ha,Ue.Ia-nr,Rn,$n+8*Ue.B,nr))}if(!Et)return xa(Ge,6,"Output aborted.")}return 1}(I,Q)),Q.bc!=null&&Q.bc(Q),Y&=1}return Y?(I.cb=0,Y):0}function vi(I,Q,Y,ae,ue){ue=I[Q+Y+32*ae]+(ue>>3),I[Q+Y+32*ae]=-256&ue?0>ue?0:255:ue}function Pd(I,Q,Y,ae,ue,me){vi(I,Q,0,Y,ae+ue),vi(I,Q,1,Y,ae+me),vi(I,Q,2,Y,ae-me),vi(I,Q,3,Y,ae-ue)}function On(I){return(20091*I>>16)+I}function xi(I,Q,Y,ae){var ue,me=0,pe=s(16);for(ue=0;4>ue;++ue){var ve=I[Q+0]+I[Q+8],we=I[Q+0]-I[Q+8],ke=(35468*I[Q+4]>>16)-On(I[Q+12]),Me=On(I[Q+4])+(35468*I[Q+12]>>16);pe[me+0]=ve+Me,pe[me+1]=we+ke,pe[me+2]=we-ke,pe[me+3]=ve-Me,me+=4,Q++}for(ue=me=0;4>ue;++ue)ve=(I=pe[me+0]+4)+pe[me+8],we=I-pe[me+8],ke=(35468*pe[me+4]>>16)-On(pe[me+12]),vi(Y,ae,0,0,ve+(Me=On(pe[me+4])+(35468*pe[me+12]>>16))),vi(Y,ae,1,0,we+ke),vi(Y,ae,2,0,we-ke),vi(Y,ae,3,0,ve-Me),me++,ae+=32}function Hc(I,Q,Y,ae){var ue=I[Q+0]+4,me=35468*I[Q+4]>>16,pe=On(I[Q+4]),ve=35468*I[Q+1]>>16;Pd(Y,ae,0,ue+pe,I=On(I[Q+1]),ve),Pd(Y,ae,1,ue+me,I,ve),Pd(Y,ae,2,ue-me,I,ve),Pd(Y,ae,3,ue-pe,I,ve)}function Vc(I,Q,Y,ae,ue){xi(I,Q,Y,ae),ue&&xi(I,Q+16,Y,ae+4)}function wl(I,Q,Y,ae){lc(I,Q+0,Y,ae,1),lc(I,Q+32,Y,ae+128,1)}function Vn(I,Q,Y,ae){var ue;for(I=I[Q+0]+4,ue=0;4>ue;++ue)for(Q=0;4>Q;++Q)vi(Y,ae,Q,ue,I)}function zc(I,Q,Y,ae){I[Q+0]&&ms(I,Q+0,Y,ae),I[Q+16]&&ms(I,Q+16,Y,ae+4),I[Q+32]&&ms(I,Q+32,Y,ae+128),I[Q+48]&&ms(I,Q+48,Y,ae+128+4)}function yo(I,Q,Y,ae){var ue,me=s(16);for(ue=0;4>ue;++ue){var pe=I[Q+0+ue]+I[Q+12+ue],ve=I[Q+4+ue]+I[Q+8+ue],we=I[Q+4+ue]-I[Q+8+ue],ke=I[Q+0+ue]-I[Q+12+ue];me[0+ue]=pe+ve,me[8+ue]=pe-ve,me[4+ue]=ke+we,me[12+ue]=ke-we}for(ue=0;4>ue;++ue)pe=(I=me[0+4*ue]+3)+me[3+4*ue],ve=me[1+4*ue]+me[2+4*ue],we=me[1+4*ue]-me[2+4*ue],ke=I-me[3+4*ue],Y[ae+0]=pe+ve>>3,Y[ae+16]=ke+we>>3,Y[ae+32]=pe-ve>>3,Y[ae+48]=ke-we>>3,ae+=64}function ec(I,Q,Y){var ae,ue=Q-32,me=ri,pe=255-I[ue-1];for(ae=0;ae<Y;++ae){var ve,we=me,ke=pe+I[Q-1];for(ve=0;ve<Y;++ve)I[Q+ve]=we[ke+I[ue+ve]];Q+=32}}function wh(I,Q){ec(I,Q,4)}function WA(I,Q){ec(I,Q,8)}function XA(I,Q){ec(I,Q,16)}function tc(I,Q){var Y;for(Y=0;16>Y;++Y)n(I,Q+32*Y,I,Q-32,16)}function Ld(I,Q){var Y;for(Y=16;0<Y;--Y)a(I,Q,I[Q-1],16),Q+=32}function rc(I,Q,Y){var ae;for(ae=0;16>ae;++ae)a(Q,Y+32*ae,I,16)}function El(I,Q){var Y,ae=16;for(Y=0;16>Y;++Y)ae+=I[Q-1+32*Y]+I[Q+Y-32];rc(ae>>5,I,Q)}function ca(I,Q){var Y,ae=8;for(Y=0;16>Y;++Y)ae+=I[Q-1+32*Y];rc(ae>>4,I,Q)}function nc(I,Q){var Y,ae=8;for(Y=0;16>Y;++Y)ae+=I[Q+Y-32];rc(ae>>4,I,Q)}function Cl(I,Q){rc(128,I,Q)}function Br(I,Q,Y){return I+2*Q+Y+2>>2}function _l(I,Q){var Y,ae=Q-32;for(ae=new Uint8Array([Br(I[ae-1],I[ae+0],I[ae+1]),Br(I[ae+0],I[ae+1],I[ae+2]),Br(I[ae+1],I[ae+2],I[ae+3]),Br(I[ae+2],I[ae+3],I[ae+4])]),Y=0;4>Y;++Y)n(I,Q+32*Y,ae,0,ae.length)}function Eh(I,Q){var Y=I[Q-1],ae=I[Q-1+32],ue=I[Q-1+64],me=I[Q-1+96];ge(I,Q+0,16843009*Br(I[Q-1-32],Y,ae)),ge(I,Q+32,16843009*Br(Y,ae,ue)),ge(I,Q+64,16843009*Br(ae,ue,me)),ge(I,Q+96,16843009*Br(ue,me,me))}function ji(I,Q){var Y,ae=4;for(Y=0;4>Y;++Y)ae+=I[Q+Y-32]+I[Q-1+32*Y];for(ae>>=3,Y=0;4>Y;++Y)a(I,Q+32*Y,ae,4)}function wo(I,Q){var Y=I[Q-1+0],ae=I[Q-1+32],ue=I[Q-1+64],me=I[Q-1-32],pe=I[Q+0-32],ve=I[Q+1-32],we=I[Q+2-32],ke=I[Q+3-32];I[Q+0+96]=Br(ae,ue,I[Q-1+96]),I[Q+1+96]=I[Q+0+64]=Br(Y,ae,ue),I[Q+2+96]=I[Q+1+64]=I[Q+0+32]=Br(me,Y,ae),I[Q+3+96]=I[Q+2+64]=I[Q+1+32]=I[Q+0+0]=Br(pe,me,Y),I[Q+3+64]=I[Q+2+32]=I[Q+1+0]=Br(ve,pe,me),I[Q+3+32]=I[Q+2+0]=Br(we,ve,pe),I[Q+3+0]=Br(ke,we,ve)}function ro(I,Q){var Y=I[Q+1-32],ae=I[Q+2-32],ue=I[Q+3-32],me=I[Q+4-32],pe=I[Q+5-32],ve=I[Q+6-32],we=I[Q+7-32];I[Q+0+0]=Br(I[Q+0-32],Y,ae),I[Q+1+0]=I[Q+0+32]=Br(Y,ae,ue),I[Q+2+0]=I[Q+1+32]=I[Q+0+64]=Br(ae,ue,me),I[Q+3+0]=I[Q+2+32]=I[Q+1+64]=I[Q+0+96]=Br(ue,me,pe),I[Q+3+32]=I[Q+2+64]=I[Q+1+96]=Br(me,pe,ve),I[Q+3+64]=I[Q+2+96]=Br(pe,ve,we),I[Q+3+96]=Br(ve,we,we)}function Sl(I,Q){var Y=I[Q-1+0],ae=I[Q-1+32],ue=I[Q-1+64],me=I[Q-1-32],pe=I[Q+0-32],ve=I[Q+1-32],we=I[Q+2-32],ke=I[Q+3-32];I[Q+0+0]=I[Q+1+64]=me+pe+1>>1,I[Q+1+0]=I[Q+2+64]=pe+ve+1>>1,I[Q+2+0]=I[Q+3+64]=ve+we+1>>1,I[Q+3+0]=we+ke+1>>1,I[Q+0+96]=Br(ue,ae,Y),I[Q+0+64]=Br(ae,Y,me),I[Q+0+32]=I[Q+1+96]=Br(Y,me,pe),I[Q+1+32]=I[Q+2+96]=Br(me,pe,ve),I[Q+2+32]=I[Q+3+96]=Br(pe,ve,we),I[Q+3+32]=Br(ve,we,ke)}function Eo(I,Q){var Y=I[Q+0-32],ae=I[Q+1-32],ue=I[Q+2-32],me=I[Q+3-32],pe=I[Q+4-32],ve=I[Q+5-32],we=I[Q+6-32],ke=I[Q+7-32];I[Q+0+0]=Y+ae+1>>1,I[Q+1+0]=I[Q+0+64]=ae+ue+1>>1,I[Q+2+0]=I[Q+1+64]=ue+me+1>>1,I[Q+3+0]=I[Q+2+64]=me+pe+1>>1,I[Q+0+32]=Br(Y,ae,ue),I[Q+1+32]=I[Q+0+96]=Br(ae,ue,me),I[Q+2+32]=I[Q+1+96]=Br(ue,me,pe),I[Q+3+32]=I[Q+2+96]=Br(me,pe,ve),I[Q+3+64]=Br(pe,ve,we),I[Q+3+96]=Br(ve,we,ke)}function $c(I,Q){var Y=I[Q-1+0],ae=I[Q-1+32],ue=I[Q-1+64],me=I[Q-1+96];I[Q+0+0]=Y+ae+1>>1,I[Q+2+0]=I[Q+0+32]=ae+ue+1>>1,I[Q+2+32]=I[Q+0+64]=ue+me+1>>1,I[Q+1+0]=Br(Y,ae,ue),I[Q+3+0]=I[Q+1+32]=Br(ae,ue,me),I[Q+3+32]=I[Q+1+64]=Br(ue,me,me),I[Q+3+64]=I[Q+2+64]=I[Q+0+96]=I[Q+1+96]=I[Q+2+96]=I[Q+3+96]=me}function ac(I,Q){var Y=I[Q-1+0],ae=I[Q-1+32],ue=I[Q-1+64],me=I[Q-1+96],pe=I[Q-1-32],ve=I[Q+0-32],we=I[Q+1-32],ke=I[Q+2-32];I[Q+0+0]=I[Q+2+32]=Y+pe+1>>1,I[Q+0+32]=I[Q+2+64]=ae+Y+1>>1,I[Q+0+64]=I[Q+2+96]=ue+ae+1>>1,I[Q+0+96]=me+ue+1>>1,I[Q+3+0]=Br(ve,we,ke),I[Q+2+0]=Br(pe,ve,we),I[Q+1+0]=I[Q+3+32]=Br(Y,pe,ve),I[Q+1+32]=I[Q+3+64]=Br(ae,Y,pe),I[Q+1+64]=I[Q+3+96]=Br(ue,ae,Y),I[Q+1+96]=Br(me,ue,ae)}function YA(I,Q){var Y;for(Y=0;8>Y;++Y)n(I,Q+32*Y,I,Q-32,8)}function Co(I,Q){var Y;for(Y=0;8>Y;++Y)a(I,Q,I[Q-1],8),Q+=32}function Fi(I,Q,Y){var ae;for(ae=0;8>ae;++ae)a(Q,Y+32*ae,I,8)}function Nl(I,Q){var Y,ae=8;for(Y=0;8>Y;++Y)ae+=I[Q+Y-32]+I[Q-1+32*Y];Fi(ae>>4,I,Q)}function fs(I,Q){var Y,ae=4;for(Y=0;8>Y;++Y)ae+=I[Q+Y-32];Fi(ae>>3,I,Q)}function xn(I,Q){var Y,ae=4;for(Y=0;8>Y;++Y)ae+=I[Q-1+32*Y];Fi(ae>>3,I,Q)}function Kc(I,Q){Fi(128,I,Q)}function kl(I,Q,Y){var ae=I[Q-Y],ue=I[Q+0],me=3*(ue-ae)+dg[1020+I[Q-2*Y]-I[Q+Y]],pe=of[112+(me+4>>3)];I[Q-Y]=ri[255+ae+of[112+(me+3>>3)]],I[Q+0]=ri[255+ue-pe]}function JA(I,Q,Y,ae){var ue=I[Q+0],me=I[Q+Y];return jl[255+I[Q-2*Y]-I[Q-Y]]>ae||jl[255+me-ue]>ae}function Lu(I,Q,Y,ae){return 4*jl[255+I[Q-Y]-I[Q+0]]+jl[255+I[Q-2*Y]-I[Q+Y]]<=ae}function Mu(I,Q,Y,ae,ue){var me=I[Q-3*Y],pe=I[Q-2*Y],ve=I[Q-Y],we=I[Q+0],ke=I[Q+Y],Me=I[Q+2*Y],nt=I[Q+3*Y];return 4*jl[255+ve-we]+jl[255+pe-ke]>ae?0:jl[255+I[Q-4*Y]-me]<=ue&&jl[255+me-pe]<=ue&&jl[255+pe-ve]<=ue&&jl[255+nt-Me]<=ue&&jl[255+Me-ke]<=ue&&jl[255+ke-we]<=ue}function al(I,Q,Y,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Lu(I,Q+ae,Y,ue)&&kl(I,Q+ae,Y)}function Oi(I,Q,Y,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Lu(I,Q+ae*Y,1,ue)&&kl(I,Q+ae*Y,1)}function hs(I,Q,Y,ae){var ue;for(ue=3;0<ue;--ue)al(I,Q+=4*Y,Y,ae)}function Ch(I,Q,Y,ae){var ue;for(ue=3;0<ue;--ue)Oi(I,Q+=4,Y,ae)}function Gc(I,Q,Y,ae,ue,me,pe,ve){for(me=2*me+1;0<ue--;){if(Mu(I,Q,Y,me,pe))if(JA(I,Q,Y,ve))kl(I,Q,Y);else{var we=I,ke=Q,Me=Y,nt=we[ke-2*Me],et=we[ke-Me],Ge=we[ke+0],Nt=we[ke+Me],ht=we[ke+2*Me],Ue=27*(Et=dg[1020+3*(Ge-et)+dg[1020+nt-Nt]])+63>>7,Ve=18*Et+63>>7,Et=9*Et+63>>7;we[ke-3*Me]=ri[255+we[ke-3*Me]+Et],we[ke-2*Me]=ri[255+nt+Ve],we[ke-Me]=ri[255+et+Ue],we[ke+0]=ri[255+Ge-Ue],we[ke+Me]=ri[255+Nt-Ve],we[ke+2*Me]=ri[255+ht-Et]}Q+=ae}}function bi(I,Q,Y,ae,ue,me,pe,ve){for(me=2*me+1;0<ue--;){if(Mu(I,Q,Y,me,pe))if(JA(I,Q,Y,ve))kl(I,Q,Y);else{var we=I,ke=Q,Me=Y,nt=we[ke-Me],et=we[ke+0],Ge=we[ke+Me],Nt=of[112+((ht=3*(et-nt))+4>>3)],ht=of[112+(ht+3>>3)],Ue=Nt+1>>1;we[ke-2*Me]=ri[255+we[ke-2*Me]+Ue],we[ke-Me]=ri[255+nt+ht],we[ke+0]=ri[255+et-Nt],we[ke+Me]=ri[255+Ge-Ue]}Q+=ae}}function qc(I,Q,Y,ae,ue,me){Gc(I,Q,Y,1,16,ae,ue,me)}function sc(I,Q,Y,ae,ue,me){Gc(I,Q,1,Y,16,ae,ue,me)}function Md(I,Q,Y,ae,ue,me){var pe;for(pe=3;0<pe;--pe)bi(I,Q+=4*Y,Y,1,16,ae,ue,me)}function Uu(I,Q,Y,ae,ue,me){var pe;for(pe=3;0<pe;--pe)bi(I,Q+=4,1,Y,16,ae,ue,me)}function Ud(I,Q,Y,ae,ue,me,pe,ve){Gc(I,Q,ue,1,8,me,pe,ve),Gc(Y,ae,ue,1,8,me,pe,ve)}function ZA(I,Q,Y,ae,ue,me,pe,ve){Gc(I,Q,1,ue,8,me,pe,ve),Gc(Y,ae,1,ue,8,me,pe,ve)}function Qu(I,Q,Y,ae,ue,me,pe,ve){bi(I,Q+4*ue,ue,1,8,me,pe,ve),bi(Y,ae+4*ue,ue,1,8,me,pe,ve)}function Wc(I,Q,Y,ae,ue,me,pe,ve){bi(I,Q+4,1,ue,8,me,pe,ve),bi(Y,ae+4,1,ue,8,me,pe,ve)}function Hu(){this.ba=new Je,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Qd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xc(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new T}function _h(){this.xb=this.a=0,this.l=new Fs,this.ca=new Je,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xc,this.ab=0,this.gc=i(4,Vu),this.Oc=0}function ic(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yc(I,Q,Y,ae,ue,me,pe){for(I=I==null?0:I[Q+0],Q=0;Q<pe;++Q)ue[me+Q]=I+Y[ae+Q]&255,I=ue[me+Q]}function zu(I,Q,Y,ae,ue,me,pe){var ve;if(I==null)Yc(null,null,Y,ae,ue,me,pe);else for(ve=0;ve<pe;++ve)ue[me+ve]=I[Q+ve]+Y[ae+ve]&255}function Di(I,Q,Y,ae,ue,me,pe){if(I==null)Yc(null,null,Y,ae,ue,me,pe);else{var ve,we=I[Q+0],ke=we,Me=we;for(ve=0;ve<pe;++ve)ke=Me+(we=I[Q+ve])-ke,Me=Y[ae+ve]+(-256&ke?0>ke?0:255:ke)&255,ke=we,ue[me+ve]=Me}}function Hd(I,Q,Y,ae){var ue=Q.width,me=Q.o;if(t(I!=null&&Q!=null),0>Y||0>=ae||Y+ae>me)return null;if(!I.Cc){if(I.ga==null){var pe;if(I.ga=new ic,(pe=I.ga==null)||(pe=Q.width*Q.o,t(I.Gb.length==0),I.Gb=s(pe),I.Uc=0,I.Gb==null?pe=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,pe=1),pe=!pe),!pe){pe=I.ga;var ve=I.Fa,we=I.P,ke=I.qc,Me=I.mb,nt=I.nb,et=we+1,Ge=ke-1,Nt=pe.l;if(t(ve!=null&&Me!=null&&Q!=null),nu[0]=null,nu[1]=Yc,nu[2]=zu,nu[3]=Di,pe.ca=Me,pe.tb=nt,pe.c=Q.width,pe.i=Q.height,t(0<pe.c&&0<pe.i),1>=ke)Q=0;else if(pe.$a=ve[we+0]>>0&3,pe.Z=ve[we+0]>>2&3,pe.Lc=ve[we+0]>>4&3,we=ve[we+0]>>6&3,0>pe.$a||1<pe.$a||4<=pe.Z||1<pe.Lc||we)Q=0;else if(Nt.put=gn,Nt.ac=Xr,Nt.bc=vn,Nt.ma=pe,Nt.width=Q.width,Nt.height=Q.height,Nt.Da=Q.Da,Nt.v=Q.v,Nt.va=Q.va,Nt.j=Q.j,Nt.o=Q.o,pe.$a)e:{t(pe.$a==1),Q=ut();t:for(;;){if(Q==null){Q=0;break e}if(t(pe!=null),pe.mc=Q,Q.c=pe.c,Q.i=pe.i,Q.l=pe.l,Q.l.ma=pe,Q.l.width=pe.c,Q.l.height=pe.i,Q.a=0,H(Q.m,ve,et,Ge),!$e(pe.c,pe.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ee(Q.s)?(pe.ic=1,ve=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(ve),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(pe.ic=0,Q=tt(Q,pe.c)),!Q))break t;Q=1;break e}pe.mc=null,Q=0}else Q=Ge>=pe.c*pe.i;pe=!Q}if(pe)return null;I.ga.Lc!=1?I.Ga=0:ae=me-Y}t(I.ga!=null),t(Y+ae<=me);e:{if(Q=(ve=I.ga).c,me=ve.l.o,ve.$a==0){if(et=I.rc,Ge=I.Vc,Nt=I.Fa,we=I.P+1+Y*Q,ke=I.mb,Me=I.nb+Y*Q,t(we<=I.P+I.qc),ve.Z!=0)for(t(nu[ve.Z]!=null),pe=0;pe<ae;++pe)nu[ve.Z](et,Ge,Nt,we,ke,Me,Q),et=ke,Ge=Me,Me+=Q,we+=Q;else for(pe=0;pe<ae;++pe)n(ke,Me,Nt,we,Q),et=ke,Ge=Me,Me+=Q,we+=Q;I.rc=et,I.Vc=Ge}else{if(t(ve.mc!=null),Q=Y+ae,t((pe=ve.mc)!=null),t(Q<=pe.i),pe.C>=Q)Q=1;else if(ve.ic||Ke(),ve.ic){ve=pe.V,et=pe.Ba,Ge=pe.c;var ht=pe.i,Ue=(Nt=1,we=pe.$/Ge,ke=pe.$%Ge,Me=pe.m,nt=pe.s,pe.$),Ve=Ge*ht,Et=Ge*Q,kt=nt.wc,_t=Ue<Et?ta(nt,ke,we):null;t(Ue<=Ve),t(Q<=ht),t(Ee(nt));t:for(;;){for(;!Me.h&&Ue<Et;){if(ke&kt||(_t=ta(nt,ke,we)),t(_t!=null),ie(Me),256>(ht=cr(_t.G[0],_t.H[0],Me)))ve[et+Ue]=ht,++Ue,++ke>=Ge&&(ke=0,++we<=Q&&!(we%16)&&Ne(pe,we));else{if(!(280>ht)){Nt=0;break t}ht=tn(ht-256,Me);var nr,Xt=cr(_t.G[4],_t.H[4],Me);if(ie(Me),!(Ue>=(Xt=en(Ge,Xt=tn(Xt,Me)))&&Ve-Ue>=ht)){Nt=0;break t}for(nr=0;nr<ht;++nr)ve[et+Ue+nr]=ve[et+Ue+nr-Xt];for(Ue+=ht,ke+=ht;ke>=Ge;)ke-=Ge,++we<=Q&&!(we%16)&&Ne(pe,we);Ue<Et&&ke&kt&&(_t=ta(nt,ke,we))}t(Me.h==J(Me))}Ne(pe,we>Q?Q:we);break t}!Nt||Me.h&&Ue<Ve?(Nt=0,pe.a=Me.h?5:3):pe.$=Ue,Q=Nt}else Q=Te(pe,pe.V,pe.Ba,pe.c,pe.i,Q,at);if(!Q){ae=0;break e}}Y+ae>=me&&(I.Cc=1),ae=1}if(!ae)return null;if(I.Cc&&((ae=I.ga)!=null&&(ae.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+Y*ue}function G(I,Q,Y,ae,ue,me){for(;0<ue--;){var pe,ve=I,we=Q+(Y?1:0),ke=I,Me=Q+(Y?0:3);for(pe=0;pe<ae;++pe){var nt=ke[Me+4*pe];nt!=255&&(nt*=32897,ve[we+4*pe+0]=ve[we+4*pe+0]*nt>>23,ve[we+4*pe+1]=ve[we+4*pe+1]*nt>>23,ve[we+4*pe+2]=ve[we+4*pe+2]*nt>>23)}Q+=me}}function de(I,Q,Y,ae,ue){for(;0<ae--;){var me;for(me=0;me<Y;++me){var pe=I[Q+2*me+0],ve=15&(ke=I[Q+2*me+1]),we=4369*ve,ke=(240&ke|ke>>4)*we>>16;I[Q+2*me+0]=(240&pe|pe>>4)*we>>16&240|(15&pe|pe<<4)*we>>16>>4&15,I[Q+2*me+1]=240&ke|ve}Q+=ue}}function Fe(I,Q,Y,ae,ue,me,pe,ve){var we,ke,Me=255;for(ke=0;ke<ue;++ke){for(we=0;we<ae;++we){var nt=I[Q+we];me[pe+4*we]=nt,Me&=nt}Q+=Y,pe+=ve}return Me!=255}function Le(I,Q,Y,ae,ue){var me;for(me=0;me<ue;++me)Y[ae+me]=I[Q+me]>>8}function Ke(){sl=G,hn=de,mn=Fe,ba=Le}function xt(I,Q,Y){C[I]=function(ae,ue,me,pe,ve,we,ke,Me,nt,et,Ge,Nt,ht,Ue,Ve,Et,kt){var _t,nr=kt-1>>1,Xt=ve[we+0]|ke[Me+0]<<16,mr=nt[et+0]|Ge[Nt+0]<<16;t(ae!=null);var Zt=3*Xt+mr+131074>>2;for(Q(ae[ue+0],255&Zt,Zt>>16,ht,Ue),me!=null&&(Zt=3*mr+Xt+131074>>2,Q(me[pe+0],255&Zt,Zt>>16,Ve,Et)),_t=1;_t<=nr;++_t){var Rn=ve[we+_t]|ke[Me+_t]<<16,$n=nt[et+_t]|Ge[Nt+_t]<<16,An=Xt+Rn+mr+$n+524296,on=An+2*(Rn+mr)>>3;Zt=on+Xt>>1,Xt=(An=An+2*(Xt+$n)>>3)+Rn>>1,Q(ae[ue+2*_t-1],255&Zt,Zt>>16,ht,Ue+(2*_t-1)*Y),Q(ae[ue+2*_t-0],255&Xt,Xt>>16,ht,Ue+(2*_t-0)*Y),me!=null&&(Zt=An+mr>>1,Xt=on+$n>>1,Q(me[pe+2*_t-1],255&Zt,Zt>>16,Ve,Et+(2*_t-1)*Y),Q(me[pe+2*_t+0],255&Xt,Xt>>16,Ve,Et+(2*_t+0)*Y)),Xt=Rn,mr=$n}1&kt||(Zt=3*Xt+mr+131074>>2,Q(ae[ue+kt-1],255&Zt,Zt>>16,ht,Ue+(kt-1)*Y),me!=null&&(Zt=3*mr+Xt+131074>>2,Q(me[pe+kt-1],255&Zt,Zt>>16,Ve,Et+(kt-1)*Y)))}}function Pt(){ni[Ri]=Zu,ni[Th]=au,ni[tu]=rA,ni[_m]=hg,ni[lf]=mg,ni[qu]=Fh,ni[Ag]=pg,ni[Sm]=au,ni[eA]=hg,ni[Wu]=mg,ni[Ih]=Fh}function Jt(I){return I&-16384?0>I?0:255:I>>J4}function O(I,Q){return Jt((19077*I>>8)+(26149*Q>>8)-14234)}function ee(I,Q,Y){return Jt((19077*I>>8)-(6419*Q>>8)-(13320*Y>>8)+8708)}function se(I,Q){return Jt((19077*I>>8)+(33050*Q>>8)-17685)}function xe(I,Q,Y,ae,ue){ae[ue+0]=O(I,Y),ae[ue+1]=ee(I,Q,Y),ae[ue+2]=se(I,Q)}function ze(I,Q,Y,ae,ue){ae[ue+0]=se(I,Q),ae[ue+1]=ee(I,Q,Y),ae[ue+2]=O(I,Y)}function st(I,Q,Y,ae,ue){var me=ee(I,Q,Y);Q=me<<3&224|se(I,Q)>>3,ae[ue+0]=248&O(I,Y)|me>>5,ae[ue+1]=Q}function Mt(I,Q,Y,ae,ue){var me=240&se(I,Q)|15;ae[ue+0]=240&O(I,Y)|ee(I,Q,Y)>>4,ae[ue+1]=me}function Tr(I,Q,Y,ae,ue){ae[ue+0]=255,xe(I,Q,Y,ae,ue+1)}function bn(I,Q,Y,ae,ue){ze(I,Q,Y,ae,ue),ae[ue+3]=255}function Gr(I,Q,Y,ae,ue){xe(I,Q,Y,ae,ue),ae[ue+3]=255}function zn(I,Q){return 0>I?0:I>Q?Q:I}function ra(I,Q,Y){C[I]=function(ae,ue,me,pe,ve,we,ke,Me,nt){for(var et=Me+(-2&nt)*Y;Me!=et;)Q(ae[ue+0],me[pe+0],ve[we+0],ke,Me),Q(ae[ue+1],me[pe+0],ve[we+0],ke,Me+Y),ue+=2,++pe,++we,Me+=2*Y;1&nt&&Q(ae[ue+0],me[pe+0],ve[we+0],ke,Me)}}function Bl(I,Q,Y){return Y==0?I==0?Q==0?6:5:Q==0?4:0:Y}function Ja(I,Q,Y,ae,ue){switch(I>>>30){case 3:lc(Q,Y,ae,ue,0);break;case 2:Va(Q,Y,ae,ue);break;case 1:ms(Q,Y,ae,ue)}}function _o(I,Q){var Y,ae,ue=Q.M,me=Q.Nb,pe=I.oc,ve=I.pc+40,we=I.oc,ke=I.pc+584,Me=I.oc,nt=I.pc+600;for(Y=0;16>Y;++Y)pe[ve+32*Y-1]=129;for(Y=0;8>Y;++Y)we[ke+32*Y-1]=129,Me[nt+32*Y-1]=129;for(0<ue?pe[ve-1-32]=we[ke-1-32]=Me[nt-1-32]=129:(a(pe,ve-32-1,127,21),a(we,ke-32-1,127,9),a(Me,nt-32-1,127,9)),ae=0;ae<I.za;++ae){var et=Q.ya[Q.aa+ae];if(0<ae){for(Y=-1;16>Y;++Y)n(pe,ve+32*Y-4,pe,ve+32*Y+12,4);for(Y=-1;8>Y;++Y)n(we,ke+32*Y-4,we,ke+32*Y+4,4),n(Me,nt+32*Y-4,Me,nt+32*Y+4,4)}var Ge=I.Gd,Nt=I.Hd+ae,ht=et.ad,Ue=et.Hc;if(0<ue&&(n(pe,ve-32,Ge[Nt].y,0,16),n(we,ke-32,Ge[Nt].f,0,8),n(Me,nt-32,Ge[Nt].ea,0,8)),et.Za){var Ve=pe,Et=ve-32+16;for(0<ue&&(ae>=I.za-1?a(Ve,Et,Ge[Nt].y[15],4):n(Ve,Et,Ge[Nt+1].y,0,4)),Y=0;4>Y;Y++)Ve[Et+128+Y]=Ve[Et+256+Y]=Ve[Et+384+Y]=Ve[Et+0+Y];for(Y=0;16>Y;++Y,Ue<<=2)Ve=pe,Et=ve+Af[Y],ao[et.Ob[Y]](Ve,Et),Ja(Ue,ht,16*+Y,Ve,Et)}else if(Ve=Bl(ae,ue,et.Ob[0]),Ju[Ve](pe,ve),Ue!=0)for(Y=0;16>Y;++Y,Ue<<=2)Ja(Ue,ht,16*+Y,pe,ve+Af[Y]);for(Y=et.Gc,Ve=Bl(ae,ue,et.Dd),ol[Ve](we,ke),ol[Ve](Me,nt),Ue=ht,Ve=we,Et=ke,255&(et=Y>>0)&&(170&et?cc(Ue,256,Ve,Et):ko(Ue,256,Ve,Et)),et=Me,Ue=nt,255&(Y>>=8)&&(170&Y?cc(ht,320,et,Ue):ko(ht,320,et,Ue)),ue<I.Ub-1&&(n(Ge[Nt].y,0,pe,ve+480,16),n(Ge[Nt].f,0,we,ke+224,8),n(Ge[Nt].ea,0,Me,nt+224,8)),Y=8*me*I.B,Ge=I.sa,Nt=I.ta+16*ae+16*me*I.R,ht=I.qa,et=I.ra+8*ae+Y,Ue=I.Ha,Ve=I.Ia+8*ae+Y,Y=0;16>Y;++Y)n(Ge,Nt+Y*I.R,pe,ve+32*Y,16);for(Y=0;8>Y;++Y)n(ht,et+Y*I.B,we,ke+32*Y,8),n(Ue,Ve+Y*I.B,Me,nt+32*Y,8)}}function Jc(I,Q,Y,ae,ue,me,pe,ve,we){var ke=[0],Me=[0],nt=0,et=we!=null?we.kd:0,Ge=we??new Qd;if(I==null||12>Y)return 7;Ge.data=I,Ge.w=Q,Ge.ha=Y,Q=[Q],Y=[Y],Ge.gb=[Ge.gb];e:{var Nt=Q,ht=Y,Ue=Ge.gb;if(t(I!=null),t(ht!=null),t(Ue!=null),Ue[0]=0,12<=ht[0]&&!r(I,Nt[0],"RIFF")){if(r(I,Nt[0]+8,"WEBP")){Ue=3;break e}var Ve=Se(I,Nt[0]+4);if(12>Ve||4294967286<Ve){Ue=3;break e}if(et&&Ve>ht[0]-8){Ue=7;break e}Ue[0]=Ve,Nt[0]+=12,ht[0]-=12}Ue=0}if(Ue!=0)return Ue;for(Ve=0<Ge.gb[0],Y=Y[0];;){e:{var Et=I;ht=Q,Ue=Y;var kt=ke,_t=Me,nr=Nt=[0];if((Zt=nt=[nt])[0]=0,8>Ue[0])Ue=7;else{if(!r(Et,ht[0],"VP8X")){if(Se(Et,ht[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var Xt=Se(Et,ht[0]+8),mr=1+re(Et,ht[0]+12);if(2147483648<=mr*(Et=1+re(Et,ht[0]+15))){Ue=3;break e}nr!=null&&(nr[0]=Xt),kt!=null&&(kt[0]=mr),_t!=null&&(_t[0]=Et),ht[0]+=18,Ue[0]-=18,Zt[0]=1}Ue=0}}if(nt=nt[0],Nt=Nt[0],Ue!=0)return Ue;if(ht=!!(2&Nt),!Ve&&nt)return 3;if(me!=null&&(me[0]=!!(16&Nt)),pe!=null&&(pe[0]=ht),ve!=null&&(ve[0]=0),pe=ke[0],Nt=Me[0],nt&&ht&&we==null){Ue=0;break}if(4>Y){Ue=7;break}if(Ve&&nt||!Ve&&!nt&&!r(I,Q[0],"ALPH")){Y=[Y],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{Xt=I,Ue=Q,Ve=Y;var Zt=Ge.gb;kt=Ge.na,_t=Ge.P,nr=Ge.Sa,mr=22,t(Xt!=null),t(Ve!=null),Et=Ue[0];var Rn=Ve[0];for(t(kt!=null),t(nr!=null),kt[0]=null,_t[0]=null,nr[0]=0;;){if(Ue[0]=Et,Ve[0]=Rn,8>Rn){Ue=7;break e}var $n=Se(Xt,Et+4);if(4294967286<$n){Ue=3;break e}var An=8+$n+1&-2;if(mr+=An,0<Zt&&mr>Zt){Ue=3;break e}if(!r(Xt,Et,"VP8 ")||!r(Xt,Et,"VP8L")){Ue=0;break e}if(Rn[0]<An){Ue=7;break e}r(Xt,Et,"ALPH")||(kt[0]=Xt,_t[0]=Et+8,nr[0]=$n),Et+=An,Rn-=An}}if(Y=Y[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],Ue!=0)break}Y=[Y],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(Zt=I,Ue=Q,Ve=Y,kt=Ge.gb[0],_t=Ge.Ja,nr=Ge.xa,Xt=Ue[0],Et=!r(Zt,Xt,"VP8 "),mr=!r(Zt,Xt,"VP8L"),t(Zt!=null),t(Ve!=null),t(_t!=null),t(nr!=null),8>Ve[0])Ue=7;else{if(Et||mr){if(Zt=Se(Zt,Xt+4),12<=kt&&Zt>kt-12){Ue=3;break e}if(et&&Zt>Ve[0]-8){Ue=7;break e}_t[0]=Zt,Ue[0]+=8,Ve[0]-=8,nr[0]=mr}else nr[0]=5<=Ve[0]&&Zt[Xt+0]==47&&!(Zt[Xt+4]>>5),_t[0]=Ve[0];Ue=0}if(Y=Y[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],Q=Q[0],Ue!=0)break;if(4294967286<Ge.Ja)return 3;if(ve==null||ht||(ve[0]=Ge.xa?2:1),pe=[pe],Nt=[Nt],Ge.xa){if(5>Y){Ue=7;break}ve=pe,et=Nt,ht=me,I==null||5>Y?I=0:5<=Y&&I[Q+0]==47&&!(I[Q+4]>>5)?(Ve=[0],Zt=[0],kt=[0],H(_t=new L,I,Q,Y),$t(_t,Ve,Zt,kt)?(ve!=null&&(ve[0]=Ve[0]),et!=null&&(et[0]=Zt[0]),ht!=null&&(ht[0]=kt[0]),I=1):I=0):I=0}else{if(10>Y){Ue=7;break}ve=Nt,I==null||10>Y||!ei(I,Q+3,Y-3)?I=0:(et=I[Q+0]|I[Q+1]<<8|I[Q+2]<<16,ht=16383&(I[Q+7]<<8|I[Q+6]),I=16383&(I[Q+9]<<8|I[Q+8]),1&et||3<(et>>1&7)||!(et>>4&1)||et>>5>=Ge.Ja||!ht||!I?I=0:(pe&&(pe[0]=ht),ve&&(ve[0]=I),I=1))}if(!I||(pe=pe[0],Nt=Nt[0],nt&&(ke[0]!=pe||Me[0]!=Nt)))return 3;we!=null&&(we[0]=Ge,we.offset=Q-we.w,t(4294967286>Q-we.w),t(we.offset==we.ha-Y));break}return Ue==0||Ue==7&&nt&&we==null?(me!=null&&(me[0]|=Ge.na!=null&&0<Ge.na.length),ae!=null&&(ae[0]=pe),ue!=null&&(ue[0]=Nt),0):Ue}function Vd(I,Q,Y){var ae=Q.width,ue=Q.height,me=0,pe=0,ve=ae,we=ue;if(Q.Da=I!=null&&0<I.Da,Q.Da&&(ve=I.cd,we=I.bd,me=I.v,pe=I.j,11>Y||(me&=-2,pe&=-2),0>me||0>pe||0>=ve||0>=we||me+ve>ae||pe+we>ue))return 0;if(Q.v=me,Q.j=pe,Q.va=me+ve,Q.o=pe+we,Q.U=ve,Q.T=we,Q.da=I!=null&&0<I.da,Q.da){if(!Ie(ve,we,Y=[I.ib],me=[I.hb]))return 0;Q.ib=Y[0],Q.hb=me[0]}return Q.ob=I!=null&&I.ob,Q.Kb=I==null||!I.Sd,Q.da&&(Q.ob=Q.ib<3*ae/4&&Q.hb<3*ue/4,Q.Kb=0),1}function Sh(I){if(I==null)return 2;if(11>I.S){var Q=I.f.RGBA;Q.fb+=(I.height-1)*Q.A,Q.A=-Q.A}else Q=I.f.kb,I=I.height,Q.O+=(I-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(I-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(I-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(I-1)*Q.lb,Q.lb=-Q.lb);return 0}function ef(I,Q,Y,ae){if(ae==null||0>=I||0>=Q)return 2;if(Y!=null){if(Y.Da){var ue=Y.cd,me=Y.bd,pe=-2&Y.v,ve=-2&Y.j;if(0>pe||0>ve||0>=ue||0>=me||pe+ue>I||ve+me>Q)return 2;I=ue,Q=me}if(Y.da){if(!Ie(I,Q,ue=[Y.ib],me=[Y.hb]))return 2;I=ue[0],Q=me[0]}}ae.width=I,ae.height=Q;e:{var we=ae.width,ke=ae.height;if(I=ae.S,0>=we||0>=ke||!(I>=Ri&&13>I))I=2;else{if(0>=ae.Rd&&ae.sd==null){pe=me=ue=Q=0;var Me=(ve=we*E2[I])*ke;if(11>I||(me=(ke+1)/2*(Q=(we+1)/2),I==12&&(pe=(ue=we)*ke)),(ke=s(Me+2*me+pe))==null){I=1;break e}ae.sd=ke,11>I?((we=ae.f.RGBA).eb=ke,we.fb=0,we.A=ve,we.size=Me):((we=ae.f.kb).y=ke,we.O=0,we.fa=ve,we.Fd=Me,we.f=ke,we.N=0+Me,we.Ab=Q,we.Cd=me,we.ea=ke,we.W=0+Me+me,we.Db=Q,we.Ed=me,I==12&&(we.F=ke,we.J=0+Me+2*me),we.Tc=pe,we.lb=ue)}if(Q=1,ue=ae.S,me=ae.width,pe=ae.height,ue>=Ri&&13>ue)if(11>ue)I=ae.f.RGBA,Q&=(ve=Math.abs(I.A))*(pe-1)+me<=I.size,Q&=ve>=me*E2[ue],Q&=I.eb!=null;else{I=ae.f.kb,ve=(me+1)/2,Me=(pe+1)/2,we=Math.abs(I.fa),ke=Math.abs(I.Ab);var nt=Math.abs(I.Db),et=Math.abs(I.lb),Ge=et*(pe-1)+me;Q&=we*(pe-1)+me<=I.Fd,Q&=ke*(Me-1)+ve<=I.Cd,Q=(Q&=nt*(Me-1)+ve<=I.Ed)&we>=me&ke>=ve&nt>=ve,Q&=I.y!=null,Q&=I.f!=null,Q&=I.ea!=null,ue==12&&(Q&=et>=me,Q&=Ge<=I.Tc,Q&=I.F!=null)}else Q=0;I=Q?0:2}}return I!=0||Y!=null&&Y.fd&&(I=Sh(ae)),I}var Os=64,zd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tf=24,rf=32,Nh=8,So=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(I){return I},C.Predictor2=function(I,Q,Y){return Q[Y+0]},C.Predictor3=function(I,Q,Y){return Q[Y+1]},C.Predictor4=function(I,Q,Y){return Q[Y-1]},C.Predictor5=function(I,Q,Y){return Pe(Pe(I,Q[Y+1]),Q[Y+0])},C.Predictor6=function(I,Q,Y){return Pe(I,Q[Y-1])},C.Predictor7=function(I,Q,Y){return Pe(I,Q[Y+0])},C.Predictor8=function(I,Q,Y){return Pe(Q[Y-1],Q[Y+0])},C.Predictor9=function(I,Q,Y){return Pe(Q[Y+0],Q[Y+1])},C.Predictor10=function(I,Q,Y){return Pe(Pe(I,Q[Y-1]),Pe(Q[Y+0],Q[Y+1]))},C.Predictor11=function(I,Q,Y){var ae=Q[Y+0];return 0>=ot(ae>>24&255,I>>24&255,(Q=Q[Y-1])>>24&255)+ot(ae>>16&255,I>>16&255,Q>>16&255)+ot(ae>>8&255,I>>8&255,Q>>8&255)+ot(255&ae,255&I,255&Q)?ae:I},C.Predictor12=function(I,Q,Y){var ae=Q[Y+0];return(qe((I>>24&255)+(ae>>24&255)-((Q=Q[Y-1])>>24&255))<<24|qe((I>>16&255)+(ae>>16&255)-(Q>>16&255))<<16|qe((I>>8&255)+(ae>>8&255)-(Q>>8&255))<<8|qe((255&I)+(255&ae)-(255&Q)))>>>0},C.Predictor13=function(I,Q,Y){var ae=Q[Y-1];return(Ze((I=Pe(I,Q[Y+0]))>>24&255,ae>>24&255)<<24|Ze(I>>16&255,ae>>16&255)<<16|Ze(I>>8&255,ae>>8&255)<<8|Ze(I>>0&255,ae>>0&255))>>>0};var y1=C.PredictorAdd0;C.PredictorAdd1=mt,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var Em=C.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var ug,Tl=C.ColorIndexInverseTransform,ti=C.MapARGB,$d=C.VP8LColorIndexInverseTransformAlpha,Cm=C.MapAlpha,$u=C.VP8LPredictorsAdd=[];$u.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Kd,no,yi,Gd,No,oc,Zc,lc,Va,cc,ms,ko,nf,eu,kh,qd,Wd,Xd,af,Bh,Yd,Ku,sf,za,sl,hn,mn,ba,Za=s(511),Il=s(2041),Jd=s(225),Zd=s(767),Gu=0,dg=Il,of=Jd,ri=Zd,jl=Za,Ri=0,Th=1,tu=2,_m=3,lf=4,qu=5,Ag=6,Sm=7,eA=8,Wu=9,Ih=10,fg=[2,3,7],Fl=[3,3,11],il=[280,256,256,256,40],cf=[0,1,1,1,0],Xu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yu=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],uf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],v2=8,Nm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],km=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ds=null,$a=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Un=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],tA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ru=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],w1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],df=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],x2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ju=[],ao=[],ol=[],b2=1,jh=2,nu=[],ni=[];xt("UpsampleRgbLinePair",xe,3),xt("UpsampleBgrLinePair",ze,3),xt("UpsampleRgbaLinePair",Gr,4),xt("UpsampleBgraLinePair",bn,4),xt("UpsampleArgbLinePair",Tr,4),xt("UpsampleRgba4444LinePair",Mt,2),xt("UpsampleRgb565LinePair",st,2);var Zu=C.UpsampleRgbLinePair,rA=C.UpsampleBgrLinePair,au=C.UpsampleRgbaLinePair,hg=C.UpsampleBgraLinePair,mg=C.UpsampleArgbLinePair,Fh=C.UpsampleRgba4444LinePair,pg=C.UpsampleRgb565LinePair,su=16,Rs=1<<su-1,nA=-227,gg=482,J4=6,y2=0,Z4=s(256),Ps=s(256),E1=s(256),Bm=s(256),Tm=s(gg-nA),C1=s(gg-nA);ra("YuvToRgbRow",xe,3),ra("YuvToBgrRow",ze,3),ra("YuvToRgbaRow",Gr,4),ra("YuvToBgraRow",bn,4),ra("YuvToArgbRow",Tr,4),ra("YuvToRgba4444Row",Mt,2),ra("YuvToRgb565Row",st,2);var Af=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ed=[0,2,8],ek=[8,7,6,4,4,2,2,2,1,1,1,1],w2=1;this.WebPDecodeRGBA=function(I,Q,Y,ae,ue){var me=Th,pe=new Hu,ve=new Je;pe.ba=ve,ve.S=me,ve.width=[ve.width],ve.height=[ve.height];var we=ve.width,ke=ve.height,Me=new gt;if(Me==null||I==null)var nt=2;else t(Me!=null),nt=Jc(I,Q,Y,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(nt!=0?we=0:(we!=null&&(we[0]=Me.width[0]),ke!=null&&(ke[0]=Me.height[0]),we=1),we){ve.width=ve.width[0],ve.height=ve.height[0],ae!=null&&(ae[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(ae=new Fs,(ue=new Qd).data=I,ue.w=Q,ue.ha=Y,ue.kd=1,Q=[0],t(ue!=null),((I=Jc(ue.data,ue.w,ue.ha,null,null,null,Q,null,ue))==0||I==7)&&Q[0]&&(I=4),(Q=I)==0){if(t(pe!=null),ae.data=ue.data,ae.w=ue.w+ue.offset,ae.ha=ue.ha-ue.offset,ae.put=gn,ae.ac=Xr,ae.bc=vn,ae.ma=pe,ue.xa){if((I=ut())==null){pe=1;break e}if(function(et,Ge){var Nt=[0],ht=[0],Ue=[0];t:for(;;){if(et==null)return 0;if(Ge==null)return et.a=2,0;if(et.l=Ge,et.a=0,H(et.m,Ge.data,Ge.w,Ge.ha),!$t(et.m,Nt,ht,Ue)){et.a=3;break t}if(et.xb=jh,Ge.width=Nt[0],Ge.height=ht[0],!$e(Nt[0],ht[0],1,et,null))break t;return 1}return t(et.a!=0),0}(I,ae)){if(ae=(Q=ef(ae.width,ae.height,pe.Oa,pe.ba))==0){t:{ae=I;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((Y=ae.l)!=null),t((ue=Y.ma)!=null),ae.xb!=0){if(ae.ca=ue.ba,ae.tb=ue.tb,t(ae.ca!=null),!Vd(ue.Oa,Y,_m)){ae.a=2;break r}if(!tt(ae,Y.width)||Y.da)break r;if((Y.da||jr(ae.ca.S))&&Ke(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ke()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!De(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!Te(ae,ae.V,ae.Ba,ae.c,ae.i,Y.o,Be))break r;ue.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(Q=I.a)}else Q=I.a}else{if((I=new gi)==null){pe=1;break e}if(I.Fa=ue.na,I.P=ue.P,I.qc=ue.Sa,Rd(I,ae)){if((Q=ef(ae.width,ae.height,pe.Oa,pe.ba))==0){if(I.Aa=0,Y=pe.Oa,t((ue=I)!=null),Y!=null){if(0<(we=0>(we=Y.Md)?0:100<we?255:255*we/100)){for(ke=Me=0;4>ke;++ke)12>(nt=ue.pb[ke]).lc&&(nt.ia=we*ek[0>nt.lc?0:nt.lc]>>3),Me|=nt.ia;Me&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=Y.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}qA(I,ae)||(Q=I.a)}}else Q=I.a}Q==0&&pe.Oa!=null&&pe.Oa.fd&&(Q=Sh(pe.ba))}pe=Q}me=pe!=0?null:11>me?ve.f.RGBA.eb:ve.f.kb.y}else me=null;return me};var E2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,N){for(var P="",D=0;D<4;D++)P+=String.fromCharCode(C[N++]);return P}function d(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16)>>>0}function f(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16|C[N+3]<<24)>>>0}new l;var h=[0],p=[0],g=[],v=new l,b=e,y=function(C,N){var P={},D=0,T=!1,U=0,R=0;if(P.frames=[],!function(W,J,te,ie){for(var Ae=0;Ae<ie;Ae++)if(W[J+Ae]!=te.charCodeAt(Ae))return!0;return!1}(C,N,"RIFF",4)){var X,q;for(f(C,N+=4),N+=8;N<C.length;){var Z=u(C,N),H=f(C,N+=4);N+=4;var V=H+(1&H);switch(Z){case"VP8 ":case"VP8L":P.frames[D]===void 0&&(P.frames[D]={}),(L=P.frames[D]).src_off=T?R:N-8,L.src_size=U+H+8,D++,T&&(T=!1,U=0,R=0);break;case"VP8X":(L=P.header={}).feature_flags=C[N];var K=N+4;L.canvas_width=1+d(C,K),K+=3,L.canvas_height=1+d(C,K),K+=3;break;case"ALPH":T=!0,U=V+8,R=N-8;break;case"ANIM":(L=P.header).bgcolor=f(C,N),K=N+4,L.loop_count=(X=C)[(q=K)+0]<<0|X[q+1]<<8,K+=2;break;case"ANMF":var ne,L;(L=P.frames[D]={}).offset_x=2*d(C,N),N+=3,L.offset_y=2*d(C,N),N+=3,L.width=1+d(C,N),N+=3,L.height=1+d(C,N),N+=3,L.duration=d(C,N),N+=3,ne=C[N++],L.dispose=1&ne,L.blend=ne>>1&1}Z!="ANMF"&&(N+=V)}return P}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var _=y.header?y.header:null,S=y.frames?y.frames:null;if(_){_.loop_counter=_.loop_count,h=[_.canvas_height],p=[_.canvas_width];for(var k=0;k<S.length&&S[k].blend!=0;k++);}var B=S[0],F=v.WebPDecodeRGBA(b,B.src_off,B.src_size,p,h);B.rgba=F,B.imgwidth=p[0],B.imgheight=h[0];for(var w=0;w<p[0]*h[0]*4;w++)g[w]=F[w];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof Oj=="function"},r=function(h,p,g,v){var b=4,y=i;switch(v){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=l}h=n(h,p,g,y);var _=Oj(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(_)},n=function(h,p,g,v){for(var b,y,_,S=h.length/p,k=new Uint8Array(h.length+S),B=d(),F=0;F<S;F+=1){if(_=F*p,b=h.subarray(_,_+p),v)k.set(v(b,g,y),_+F);else{for(var w,C=B.length,N=[];w<C;w+=1)N[w]=B[w](b,g,y);var P=f(N.concat());k.set(N[P],_+F)}y=b}return k},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,v=[],b=h.length;v[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,v[y+1]=h[y]-g+256&255;return v},i=function(h,p,g){var v,b=[],y=h.length;b[0]=2;for(var _=0;_<y;_+=1)v=g&&g[_]||0,b[_+1]=h[_]-v+256&255;return b},o=function(h,p,g){var v,b,y=[],_=h.length;y[0]=3;for(var S=0;S<_;S+=1)v=h[S-p]||0,b=g&&g[S]||0,y[S+1]=h[S]+256-(v+b>>>1)&255;return y},l=function(h,p,g){var v,b,y,_,S=[],k=h.length;S[0]=4;for(var B=0;B<k;B+=1)v=h[B-p]||0,b=g&&g[B]||0,y=g&&g[B-p]||0,_=u(v,b,y),S[B+1]=h[B]-_+256&255;return S},u=function(h,p,g){if(h===p&&p===g)return h;var v=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return v<=b&&v<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,l]},f=function(h){var p=h.map(function(g){return g.reduce(function(v,b){return v+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,v){var b,y,_,S,k,B,F,w,C,N,P,D,T,U,R,X=this.decode.FLATE_DECODE,q="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(_=new Nwe(h)).imgData,y=_.bits,b=_.colorSpace,k=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){C=(w=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,P=new Uint8Array(C*_.colors),N=new Uint8Array(C);var Z,H=_.pixelBitlength-_.bits;for(U=0,R=0;U<C;U++){for(T=w[U],Z=0;Z<H;)P[R++]=T>>>Z&255,Z+=_.bits;N[U]=T>>>Z&255}}if(_.bits===16){C=(w=new Uint32Array(_.decodePixels().buffer)).length,P=new Uint8Array(C*(32/_.pixelBitlength)*_.colors),N=new Uint8Array(C*(32/_.pixelBitlength)),D=_.colors>1,U=0,R=0;for(var V=0;U<C;)T=w[U++],P[R++]=T>>>0&255,D&&(P[R++]=T>>>16&255,T=w[U++],P[R++]=T>>>0&255),N[V++]=T>>>16&255;y=8}v!==e.image_compression.NONE&&t()?(h=r(P,_.width*_.colors,_.colors,v),F=r(N,_.width,1,v)):(h=P,F=N,X=void 0)}if(_.colorType===3&&(b=this.color_spaces.INDEXED,B=_.palette,_.transparency.indexed)){var K=_.transparency.indexed,ne=0;for(U=0,C=K.length;U<C;++U)ne+=K[U];if((ne/=255)===C-1&&K.indexOf(0)!==-1)S=[K.indexOf(0)];else if(ne!==C){for(w=_.decodePixels(),N=new Uint8Array(w.length),U=0,C=w.length;U<C;U++)N[U]=K[w[U]];F=r(N,_.width,1)}}var L=function(W){var J;switch(W){case e.image_compression.FAST:J=11;break;case e.image_compression.MEDIUM:J=13;break;case e.image_compression.SLOW:J=14;break;default:J=12}return J}(v);return X===this.decode.FLATE_DECODE&&(q="/Predictor "+L+" "),q+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(F&&this.__addimage__.isArrayBuffer(F)||this.__addimage__.isArrayBufferView(F))&&(F=this.__addimage__.arrayBufferToBinaryString(F)),{alias:g,data:h,index:p,filter:X,decodeParameters:q,transparency:S,palette:B,sMask:F,predictor:L,width:_.width,height:_.height,bitsPerComponent:y,colorSpace:b}}}})(pr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new kwe(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new MB(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(pr.API),ld.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ld.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Sa.log("bit decode error:"+r)}},ld.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},ld.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},ld.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},ld.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},ld.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},ld.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},ld.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},ld.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new ld(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new MB(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(pr.API),z9.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new z9(t),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new MB(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(pr.API),pr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[l++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},pr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hg=pr.API,jE=Hg.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,v=o[0]||l,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&pa(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||v)/l+h)),g=n;return b},U9=Hg.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Hg.processArabic&&(e=Hg.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:jE.apply(this,arguments).reduce(function(s,i){return s+i},0)},Q9=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},H9=function(e,t,r){r||(r={});var n,a,s,i,o,l,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,v=e.split(" "),b=jE.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),_=[];v.map(function(k){(k=k.split(/\s*\n/)).length>1?_=_.concat(k.map(function(B,F){return(F&&B.length?`
`:"")+B})):_.push(k[0])}),v=_,l=U9.apply(this,[y,r])}for(s=0,i=v.length;s<i;s++){var S=0;if(n=v[s],l&&n[0]==`
`&&(n=n.substr(1),S=1),h+p+(g=(a=jE.apply(this,[n,r])).reduce(function(k,B){return k+B},0))>t||S){if(g>t){for(o=Q9.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(k,B){return k+B},0)}else d=[n];f.push(d),h=g+l,p=b}else d.push(n),h+=p+g,p=b}return u=l?function(k,B){return(B?y:"")+k.join(" ")}:function(k){return k.join(" ")},f.map(u)},Hg.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(H9.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,v,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),v="-"):(g=s(h).slice(2),v=""),g=v+g.slice(0,-1)+n[g.slice(-1)];else{if(pa(h)!=="object")throw new Error("Don't know what to do with value type "+pa(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,v,b={},y=1,_=b,S=[],k="",B="",F=f.length-1,w=1;w<F;w+=1)(v=f[w])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(S.push([_,g]),_={},g=void 0):v=="}"?((p=S.pop())[0][p[1]]=_,g=void 0,_=p[0]):v=="-"?y=-1:g===void 0?r.hasOwnProperty(v)?(k+=r[v],g=parseInt(k,16)*y,y=1,k=""):k+=v:r.hasOwnProperty(v)?(B+=r[v],_[g]=parseInt(B,16)*y,y=1,g=void 0,B=""):B+=v;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(pr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(dy(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(pr),function(e){function t(){return(Mr.canvg?Promise.resolve(Mr.canvg):fx(()=>import("./index.es-DtedV5uE.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}pr.API.addSvgAsImage=function(r,n,a,s,i,o,l,u){if(isNaN(n)||isNaN(a))throw Sa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Sa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,l,u)})}}(),pr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},pr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,f=0;function h(g,v){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(pa(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,v=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?v.push("/"+g+" /"+r[g].value):v.push("/"+g+" "+r[g].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(pr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,l,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var v=u();d({data:p,addLength1:!0,objectId:v}),l("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+pv(o.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var _=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+pv(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+pv(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),l("endobj");var v=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+pv(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+pv(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,v=p,b="",y=0,_="",S=g[v].encoding;if(g[v].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:f};for(_=o,v=p,Array.isArray(o)&&(_=o[0]),y=0;y<_.length;y+=1)g[v].metadata.hasOwnProperty("cmap")&&(i=g[v].metadata.cmap.unicode.codeMap[_[y].charCodeAt(0)]),i||_[y].charCodeAt(0)<256&&g[v].metadata.hasOwnProperty("Unicode")?b+=_[y]:b+="";var k="";return parseInt(v.slice(1))<14||S==="WinAnsiEncoding"?k=h(b,v).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(k=r(b,g[v])),f.isHex=!0,{text:k,x:l,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},l,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(pr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(pr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,l,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,S=0;this.__bidiEngine__={};var k=function(D){var T=D.charCodeAt(),U=T>>8,R=v[U];return R!==void 0?f[256*R+(255&T)]:U===252||U===253?"AL":y.test(U)?"L":U===8?"R":"N"},B=function(D){for(var T,U=0;U<D.length;U++){if((T=k(D.charAt(U)))==="L")return!1;if(T==="R")return!0}return!1},F=function(D,T,U,R){var X,q,Z,H,V=T[R];switch(V){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(V="AN");break;case"AL":_=!0,V="R";break;case"WS":V="N";break;case"CS":R<1||R+1>=T.length||(X=U[R-1])!=="EN"&&X!=="AN"||(q=T[R+1])!=="EN"&&q!=="AN"?V="N":_&&(q="AN"),V=q===X?q:"N";break;case"ES":V=(X=R>0?U[R-1]:"B")==="EN"&&R+1<T.length&&T[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&U[R-1]==="EN"){V="EN";break}if(_){V="N";break}for(Z=R+1,H=T.length;Z<H&&T[Z]==="ET";)Z++;V=Z<H&&T[Z]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(H=T.length,Z=R+1;Z<H&&T[Z]==="NSM";)Z++;if(Z<H){var K=D[R],ne=K>=1425&&K<=2303||K===64286;if(X=T[Z],ne&&(X==="R"||X==="AL")){V="R";break}}}V=R<1||(X=T[R-1])==="B"?"N":U[R-1];break;case"B":_=!1,a=!0,V=S;break;case"S":s=!0,V="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":V="N"}return V},w=function(D,T,U){var R=D.split("");return U&&C(R,U,{hiLevel:S}),R.reverse(),T&&T.reverse(),R.join("")},C=function(D,T,U){var R,X,q,Z,H,V=-1,K=D.length,ne=0,L=[],W=S?p:h,J=[];for(_=!1,a=!1,s=!1,X=0;X<K;X++)J[X]=k(D[X]);for(q=0;q<K;q++){if(H=ne,L[q]=F(D,J,L,q),R=240&(ne=W[H][g[L[q]]]),ne&=15,T[q]=Z=W[ne][5],R>0)if(R===16){for(X=V;X<q;X++)T[X]=1;V=-1}else V=-1;if(W[ne][6])V===-1&&(V=q);else if(V>-1){for(X=V;X<q;X++)T[X]=Z;V=-1}J[q]==="B"&&(T[q]=0),U.hiLevel|=Z}s&&function(te,ie,Ae){for(var oe=0;oe<Ae;oe++)if(te[oe]==="S"){ie[oe]=S;for(var ce=oe-1;ce>=0&&te[ce]==="WS";ce--)ie[ce]=S}}(J,T,K)},N=function(D,T,U,R,X){if(!(X.hiLevel<D)){if(D===1&&S===1&&!a)return T.reverse(),void(U&&U.reverse());for(var q,Z,H,V,K=T.length,ne=0;ne<K;){if(R[ne]>=D){for(H=ne+1;H<K&&R[H]>=D;)H++;for(V=ne,Z=H-1;V<Z;V++,Z--)q=T[V],T[V]=T[Z],T[Z]=q,U&&(q=U[V],U[V]=U[Z],U[Z]=q);ne=H}ne++}}},P=function(D,T,U){var R=D.split(""),X={hiLevel:S};return U||(U=[]),C(R,U,X),function(q,Z,H){if(H.hiLevel!==0&&d)for(var V,K=0;K<q.length;K++)Z[K]===1&&(V=b.indexOf(q[K]))>=0&&(q[K]=b[V+1])}(R,U,X),N(2,R,T,U,X),N(1,R,T,U,X),R.join("")};return this.__bidiEngine__.doBidiReorder=function(D,T,U){if(function(X,q){if(q)for(var Z=0;Z<X.length;Z++)q[Z]=Z;o===void 0&&(o=B(X)),u===void 0&&(u=B(X))}(D,T),i||!l||u)if(i&&l&&o^u)S=o?1:0,D=w(D,T,U);else if(!i&&l&&u)S=o?1:0,D=P(D,T,U),D=w(D,T);else if(!i||o||l||u){if(i&&!l&&o^u)D=w(D,T),o?(S=0,D=P(D,T,U)):(S=1,D=P(D,T,U),D=w(D,T));else if(i&&o&&!l&&u)S=1,D=P(D,T,U),D=w(D,T);else if(!i&&!l&&o^u){var R=d;o?(S=1,D=P(D,T,U),S=0,d=!1,D=P(D,T,U),d=R):(S=0,D=P(D,T,U),D=w(D,T),S=1,d=!1,D=P(D,T,U),d=R,D=w(D,T))}}else S=0,D=P(D,T,U);else S=o?1:0,D=P(D,T,U);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(pr),pr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new rm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Vwe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Bwe(this.contents),this.head=new Iwe(this),this.name=new Rwe(this),this.cmap=new lZ(this),this.toUnicode={},this.hhea=new jwe(this),this.maxp=new Pwe(this),this.hmtx=new Lwe(this),this.post=new Owe(this),this.os2=new Fwe(this),this.loca=new Hwe(this),this.glyf=new Mwe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)t=l[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var jd,rm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,l;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+l},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),Bwe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,l,u,d,f,h,p,g,v;for(v in p=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),i=Math.floor(f/l),d=16*p-f,(a=new rm).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[v],a.writeString(v),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),v==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=cZ.call(r);r.length%4;)r.push(0);for(s=new rm(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),Twe={}.hasOwnProperty,HA=function(e,t){for(var r in t)Twe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};jd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Iwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new rm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),$9=function(){function e(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,_,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),t.pos+=2,v=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),u=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),d=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),a=(this.length-t.pos+this.offset)/2,o=function(){var k,B;for(B=[],l=k=0;0<=a?k<a:k>a;l=0<=a?++k:--k)B.push(t.readUInt16());return B}(),l=y=0,S=s.length;y<S;l=++y)for(b=s[l],n=_=g=v[l];g<=b?_<=b:_>=b;n=g<=b?++_:--_)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-g)-(h-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,F,w,C,N,P,D,T,U,R,X,q,Z,H,V,K,ne,L,W,J,te,ie,Ae,oe,ce,ge,je,re;switch(R=new rm,i=Object.keys(t).sort(function(Se,De){return Se-De}),r){case"macroman":for(v=0,b=function(){var Se=[];for(g=0;g<256;++g)Se.push(0);return Se}(),_={0:0},s={},X=0,V=i.length;X<V;X++)_[ce=t[a=i[X]]]==null&&(_[ce]=++v),s[a]={old:t[a],new:_[t[a]]},b[a]=_[t[a]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(b),{charMap:s,subtable:R.data,maxGlyphID:v+1};case"unicode":for(T=[],f=[],S=0,_={},n={},y=u=null,q=0,K=i.length;q<K;q++)_[B=t[a=i[q]]]==null&&(_[B]=++S),n[a]={old:B,new:_[B]},o=_[B]-a,y!=null&&o===u||(y&&f.push(y),T.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),T.push(65535),P=2*(N=T.length),C=2*Math.pow(Math.log(N)/Math.LN2,2),h=Math.log(C/2)/Math.LN2,w=2*N-C,l=[],F=[],p=[],g=Z=0,ne=T.length;Z<ne;g=++Z){if(D=T[g],d=f[g],D===65535){l.push(0),F.push(0);break}if(D-(U=n[D].new)>=32768)for(l.push(0),F.push(2*(p.length+N-g)),a=H=D;D<=d?H<=d:H>=d;a=D<=d?++H:--H)p.push(n[a].new);else l.push(U-D),F.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*N+2*p.length),R.writeUInt16(0),R.writeUInt16(P),R.writeUInt16(C),R.writeUInt16(h),R.writeUInt16(w),Ae=0,L=f.length;Ae<L;Ae++)a=f[Ae],R.writeUInt16(a);for(R.writeUInt16(0),oe=0,W=T.length;oe<W;oe++)a=T[oe],R.writeUInt16(a);for(ge=0,J=l.length;ge<J;ge++)o=l[ge],R.writeUInt16(o);for(je=0,te=F.length;je<te;je++)k=F[je],R.writeUInt16(k);for(re=0,ie=p.length;re<ie;re++)v=p[re],R.writeUInt16(v);return{charMap:n,subtable:R.data,maxGlyphID:S+1}}},e}(),lZ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new $9(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=$9.encode(r,n),(s=new rm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),jwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),Fwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),Owe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),Dwe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Rwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,l,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new Dwe(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),Pwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),Lwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),cZ=[].slice,Mwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,l,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new rm(n.read(s))).readShort(),d=l.readShort(),h=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[r]=o===-1?new Qwe(l,d,h,u,f):new Uwe(l,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)s=r[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),Uwe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Qwe=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new rm(cZ.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Hwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,jd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),Vwe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,l;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y;for(a in n=lZ.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(l=y[a]).old]=l.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(_){var S,k;for(S in k={},_)k[_[S]]=S;return k}(p),f=Object.keys(d).sort(function(_,S){return _-S}),v=function(){var _,S,k;for(k=[],_=0,S=f.length;_<S;_++)o=f[_],k.push(d[o]);return k}(),s=this.font.glyf.encode(i,v,p),u=this.font.loca.encode(s.offsets,v),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();pr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function uZ(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var K9={},$v=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:K9=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return K9||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Qj=function(e,t){return Qj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Qj(e,t)};function dZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Qj(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var AZ=function(e){dZ(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function zwe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function $we(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function rS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function fZ(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=hZ(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function hZ(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function CN(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function mZ(e,t){var r=CN(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Kwe(e,t,r,n,a){var s={},i=1.3333333333333333,o=UB(t,function(S){return a.getComputedStyle(S).backgroundColor});o!=null&&(s.fillColor=o);var l=UB(t,function(S){return a.getComputedStyle(S).color});l!=null&&(s.textColor=l);var u=qwe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=UB(t,function(S){return a.getComputedStyle(S)[d]});g!=null&&(s.lineColor=g);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=Gwe(n);y&&(s.fontStyle=y);var _=(n.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(s.font=_),s}function Gwe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function UB(e,t){var r=pZ(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function pZ(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:pZ(e.parentElement,t):r}function qwe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=CN(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function gZ(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var l=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],v=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=Wwe(l,u,r,g,n,a);b&&(v==="thead"?d.push(b):v==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function Wwe(e,t,r,n,a,s){for(var i=new AZ(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;s&&(d=Kwe(e,l,t,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Xwe(l)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function Xwe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Ywe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Ff(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function vZ(e,t){var r=new $v(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Ywe(a,n,t);var s=Ff({},a,n,t),i;typeof window<"u"&&(i=window);var o=Jwe(a,n,t),l=Zwe(a,n,t),u=e2e(r,s),d=r2e(r,s,i);return{id:t.tableId,content:d,hooks:l,styles:o,settings:u}}function Jwe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=e[l],d=t[l],f=r[l];n.columnStyles=Ff({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[l]||{}});n[l]=Ff({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function Zwe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function e2e(e,t){var r,n,a,s,i,o,l,u,d,f,h,p,g=CN(t.margin,40/e.scaleFactor()),v=(r=t2e(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var _=(s=t.useCss)!==null&&s!==void 0?s:!1,S=t.theme||(_?"plain":"striped"),k=!!t.horizontalPageBreak,B=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:_,theme:S,startY:v,margin:g,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:k,horizontalPageBreakRepeat:B,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function t2e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function r2e(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=gZ(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||n2e(n,a,s);return{columns:l,head:n,body:a,foot:s}}function n2e(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var Hj=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),a2e=function(e){dZ(t,e);function t(r,n,a,s,i,o){var l=e.call(this,r,n,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return t}(Hj),s2e=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new a2e(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Hj(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Hj(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),xZ=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof AZ&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>a?u:a},0)},e}(),bZ=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=CN(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),i2e=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function o2e(e,t){l2e(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=Vj(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=Vj(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),u2e(t),d2e(t,e),c2e(t)}function l2e(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=mZ(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,l,null);var f=u.padding("horizontal");u.contentWidth=rS(u.text,u.styles,e)+f;var h=rS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function Vj(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,l=n*o,u=i.width+l,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=Vj(h,t,r))}return t}function c2e(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=t[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete t[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[l.index]={cell:d,left:h,row:s}}}}}function u2e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var u=a;delete n.cells[l.index],a=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=l.width;continue}u.width=l.width+s}}}function d2e(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=G9(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=G9(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function G9(e,t,r,n,a){return e.map(function(s){return A2e(s,t,r,n,a)})}function A2e(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=rS(e,r,n))return e;for(;t<rS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function yZ(e,t){var r=new $v(e),n=f2e(t,r.scaleFactor()),a=new s2e(t,n);return o2e(r,a),r.applyStyles(r.userStyles),a}function f2e(e,t){var r=e.content,n=m2e(r.columns);if(r.head.length===0){var a=q9(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=q9(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:QB("head",r.head,n,i,s,t),body:QB("body",r.body,n,i,s,t),foot:QB("foot",r.foot,n,i,s,t)}}function QB(e,t,r,n,a,s){var i={},o=t.map(function(l,u){for(var d=0,f={},h=0,p=0,g=0,v=r;g<v.length;g++){var b=v[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(l)?y=l[b.index-h-d]:y=l[b.dataKey];var _={};typeof y=="object"&&!Array.isArray(y)&&(_=(y==null?void 0:y.styles)||{});var S=p2e(e,b,u,a,n,s,_),k=new bZ(y,S,e);f[b.dataKey]=k,f[b.index]=k,p=k.colSpan-1,i[b.index]={left:k.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new xZ(l,u,e,f)});return o}function q9(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=h2e(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function h2e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function m2e(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new i2e(a,t,r)})}function p2e(e,t,r,n,a,s,i){var o=$we(n),l;e==="head"?l=a.headStyles:e==="body"?l=a.bodyStyles:e==="foot"&&(l=a.footStyles);var u=Ff({},o.table,o[e],a.styles,l),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?Ff({},o.alternateRow,a.alternateRowStyles):{},p=zwe(s),g=Ff({},p,u,h,f);return Ff(g,i)}function g2e(e,t,r){var n;r===void 0&&(r={});var a=mZ(e,t),s=new Map,i=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function v2e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=g2e(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function wZ(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var l=t.body,u=l.reduce(function(h,p){return h+p.height},0);o+=u}var d=new $v(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(CZ(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=Ff({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?x2e(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Jf(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;nS(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Jf(d,t,h,s,t.columns)})),fZ(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function x2e(e,t,r,n){var a=v2e(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Ay(e,t,r,n,u.columns,!0):W9(e,t,n,u.columns),b2e(e,t,r,n,u.columns),HB(e,t,n,u.columns)});else for(var i=-1,o=a[0],l=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?Ay(e,t,r,n,d,!0):W9(e,t,n,d),u=X9(e,t,i+1,n,d),HB(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Ay(e,t,r,n,h.columns,!0),X9(e,t,i+1,n,h.columns,f),HB(e,t,n,h.columns)}),i=u};i<t.body.length-1;)l()}function W9(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Jf(e,t,s,r,n)})}function b2e(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;nS(e,t,s,o,r,n,a)})}function X9(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(l,u){var d=r+u===t.body.length-1,f=EZ(e,t,d,n);l.canEntireRowFit(f,a)&&(Jf(e,t,l,n,a),o=r+u)}),o}function HB(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Jf(e,t,s,r,n)})}function y2e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function w2e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=e.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new bZ(u.raw,u.styles,u.section);d=Ff(d,u),d.text=[];var f=y2e(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var g=new xZ(e.raw,-1,e.section,a,!0);g.height=s;for(var v=0,b=r.columns;v<b.length;v++){var l=b[v],d=g.cells[l.index];d&&(d.height=g.height);var u=e.cells[l.index];u&&(u.height=e.height)}return g}function E2e(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function nS(e,t,r,n,a,s,i){var o=EZ(e,t,n,s);if(r.canEntireRowFit(o,i))Jf(e,t,r,s,i);else if(E2e(e,r,o,t)){var l=w2e(r,o,t,e);Jf(e,t,r,s,i),Ay(e,t,a,s,i),nS(e,t,l,n,a,s,i)}else Ay(e,t,a,s,i),nS(e,t,r,n,a,s,i)}function Jf(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}e.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}C2e(e,l,n);var d=l.getTextPos();uZ(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function C2e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=hZ(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),_2e(e,t,r,n.lineWidth))}function _2e(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o));function l(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function EZ(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Ay(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Jf(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;fZ(e,t,r,n),CZ(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Jf(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function CZ(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function S2e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=vZ(this,n),s=yZ(this,a);return wZ(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){uZ(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return $v.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){$v.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new $v(this),s=gZ(a,t,window,r,!1),i=s.head,o=s.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var VB;function gl(e,t){var r=vZ(e,t),n=yZ(e,r);wZ(e,n)}try{if(typeof window<"u"&&window){var Y9=window,J9=Y9.jsPDF||((VB=Y9.jspdf)===null||VB===void 0?void 0:VB.jsPDF);J9&&S2e(J9)}}catch(e){console.error("Could not apply autoTable plugin",e)}const hD="evaluaciones_pruebas",mD="evaluaciones_rubricas_estaticas",pD="evaluaciones_rubricas_interactivas",N2e="usuarios",_N=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},k2e=e=>{const t=tr(Ut(jt,hD),Kr("fechaCreacion","desc"));return vr(t,n=>{e(n.docs.map(a=>_N(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},B2e=async e=>{try{const{id:t,...r}=e,n=hr(jt,hD,t);await Ji(n,{...r,fechaCreacion:br.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},T2e=async e=>{try{await Is(hr(jt,hD,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},I2e=e=>{const t=tr(Ut(jt,mD),Kr("fechaCreacion","desc"));return vr(t,n=>{e(n.docs.map(a=>_N(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},j2e=async e=>{try{const{id:t,...r}=e,n=hr(jt,mD,t);await Ji(n,{...r,fechaCreacion:br.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},F2e=async e=>{try{await Is(hr(jt,mD,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},O2e=e=>{const t=tr(Ut(jt,pD));return vr(t,n=>{e(n.docs.map(a=>_N(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},D2e=async e=>{try{const{id:t,...r}=e,n=hr(jt,pD,t);await Ji(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},R2e=async e=>{try{return(await Jn(Ut(jt,pD),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},P2e=e=>{const t=tr(Ut(jt,N2e));return vr(t,n=>{e(n.docs.map(a=>_N(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},L2e=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],Z9={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},o_=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},M2e=({open:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),U2e=({item:e,index:t,showAnswers:r})=>{const n=j.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:n.map((a,s)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>c.jsxs("li",{children:[c.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},Q2e=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(null),[a,s]=j.useState(!1),[i,o]=j.useState(!1),[l,u]=j.useState(null),[d,f]=j.useState(!1),h={nombre:"",asignatura:qi[0],nivel:wv[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=j.useState(h);j.useEffect(()=>{const w=k2e(t);return()=>w()},[]);const v=w=>{const{name:C,value:N}=w.target;g(P=>({...P,[C]:N}))},b=w=>{g(C=>{const N={...C.tiposActividad};return N[w]?delete N[w]:N[w]=Z9[w][0],{...C,tiposActividad:N}})},y=(w,C)=>{g(N=>({...N,tiposActividad:{...N.tiposActividad,[w]:C}}))},_=w=>{g(C=>{const N=C.selectedNee.includes(w)?C.selectedNee.filter(P=>P!==w):[...C.selectedNee,w];return{...C,selectedNee:N}})},S=async w=>{if(w.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const C=Object.entries(p.tiposActividad).map(([D,T])=>`- ${T} ítem(s) de tipo '${D}'`).join(`
`),N=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",P=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${C}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${N}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{em("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Z=(await(await new os(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);let V=0;H.actividades.forEach(ne=>{ne.items.forEach(L=>{V+=L.puntaje||0,L.tipo==="Comprensión de lectura"&&L.preguntas&&L.preguntas.forEach(W=>{V+=W.puntaje||0})})});const K={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:H.objetivo,instruccionesGenerales:H.instruccionesGenerales,puntajeIdeal:V,actividades:H.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(K),f(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},k=async()=>{if(r)try{await B2e(r),alert("Prueba guardada con éxito.")}catch(w){console.error(w),alert("No se pudo guardar la prueba.")}},B=async w=>{if(window.confirm("¿Eliminar esta prueba?"))try{await T2e(w),(r==null?void 0:r.id)===w&&n(null)}catch(C){console.error(C),alert("No se pudo eliminar la prueba.")}},F=async w=>{o(!0);const C=new pr("p","mm","a4"),N=20,P=C.internal.pageSize.getHeight(),D=C.internal.pageSize.getWidth(),T=D-N*2;let U=N;const R=Z=>{Z.setFillColor(230,230,230),Z.rect(0,0,D,25,"F"),Z.setFontSize(9),Z.setTextColor(0,0,0),Z.text("LICEO INDUSTRIAL DE RECOLETA",N,15,{align:"left"}),Z.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-N,15,{align:"right"})};R(C),U=30,C.setTextColor(0,0,0),C.setFont("helvetica","bold"),C.setFontSize(16),C.text(w.nombre,D/2,U,{align:"center"}),U+=10,gl(C,{startY:U,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},w.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},w.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},w.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:w.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:w.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:Z=>{R(C)}}),U=C.lastAutoTable.finalY+10;const X=Z=>{U+Z>P-N&&(C.addPage(),R(C),U=N+15,C.setTextColor(0,0,0))},q=(Z,H)=>{C.setFont("helvetica",H.isBold?"bold":"normal"),C.setFontSize(H.fontSize);const V=Array.isArray(Z)?Z.join(`
`):Z;return C.getTextDimensions(V,{maxWidth:H.width}).h};for(const Z of w.actividades){let H=q(Z.titulo,{fontSize:12,width:T,isBold:!0})+q(Z.instrucciones,{fontSize:10,width:T})+12;X(H),C.setFont("helvetica","bold"),C.setFontSize(12),C.setTextColor(0,0,0),C.text(Z.titulo,N,U),U+=8,C.setFont("helvetica","normal"),C.setFontSize(10);const V=C.splitTextToSize(Z.instrucciones,T);C.text(V,N,U),U+=V.length*(10*.35*1.15)+4;for(const[K,ne]of Z.items.entries()){let L=0;const W=`${K+1}. ${ne.pregunta} (${ne.puntaje} pts)`;switch(L+=q(W,{fontSize:10,width:T,isBold:!0}),ne.tipo){case"Selección múltiple":ne.opciones.forEach(ie=>{L+=q(ie,{fontSize:10,width:T-5})+3}),L+=7;break;case"Verdadero o Falso":L+=10;break;case"Desarrollo":L+=30;break;case"Términos pareados":L+=ne.pares.length*12+20;break;case"Comprensión de lectura":const te=ne;L+=q(te.texto,{fontSize:10,width:T-10})+10,te.preguntas.forEach(ie=>{const Ae=`${ie.pregunta} (${ie.puntaje} pts)`;L+=q(Ae,{fontSize:10,width:T-5,isBold:!0}),ie.tipo==="Selección múltiple"?(ie.opciones.forEach(oe=>{L+=q(oe,{fontSize:10,width:T-10})+3}),L+=7):ie.tipo==="Desarrollo"&&(L+=30),L+=5}),L+=15;break}X(L),C.setFont("helvetica","bold"),C.setFontSize(10),C.setTextColor(0,0,0);const J=C.splitTextToSize(W,T);if(C.text(J,N,U),U+=J.length*5+4,C.setFont("helvetica","normal"),ne.tipo==="Selección múltiple")ne.opciones.forEach((te,ie)=>{C.text(`${String.fromCharCode(65+ie)}) ${te}`,N+5,U),U+=7});else if(ne.tipo==="Verdadero o Falso")C.text("V ______    F ______",N+5,U),U+=10;else if(ne.tipo==="Desarrollo")C.setDrawColor(200,200,200),C.setFillColor(245,245,245),C.rect(N,U,T,25,"FD"),U+=30;else if(ne.tipo==="Términos pareados"){const te=[...ne.pares.map(Ae=>Ae.definicion)].sort(()=>Math.random()-.5),ie=ne.pares.map((Ae,oe)=>[`${oe+1}. ${Ae.concepto}`,`(   ) ${te[oe]}`]);gl(C,{startY:U,head:[["Columna A: Concepto","Columna B: Definición"]],body:ie,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Ae=>R(C)}),U=C.lastAutoTable.finalY+10}else if(ne.tipo==="Comprensión de lectura"){const te=ne;C.setFillColor(240,240,240),C.setDrawColor(200,200,200);const ie=C.splitTextToSize(te.texto,T-10),Ae=ie.length*(10*.35*1.15)+8;C.rect(N,U,T,Ae,"FD"),U+=4,C.setFont("helvetica","normal"),C.setFontSize(10),C.setTextColor(0,0,0),C.text(ie,N+5,U),U+=Ae;for(const[oe,ce]of te.preguntas.entries()){const ge=`${oe+1}. ${ce.pregunta} (${ce.puntaje} pts)`;C.setFont("helvetica","bold");const je=C.splitTextToSize(ge,T-5);C.text(je,N+5,U),U+=je.length*5+4,C.setFont("helvetica","normal"),ce.tipo==="Selección múltiple"?ce.opciones.forEach((re,Se)=>{C.text(`${String.fromCharCode(65+Se)}) ${re}`,N+10,U),U+=7}):ce.tipo==="Desarrollo"&&(C.setDrawColor(200,200,200),C.setFillColor(245,245,245),C.rect(N+5,U,T-5,25,"FD"),U+=30)}}U+=5}}C.save(`${w.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(M2e,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:k,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>F(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(_J,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(w=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:w.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:w.instrucciones}),c.jsx("div",{className:"space-y-6",children:w.items.map((C,N)=>c.jsx(U2e,{item:C,index:N,showAnswers:d},C.id))})]},w.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:v,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:p.asignatura,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:qi.map(w=>c.jsx("option",{children:w},w))}),c.jsx("select",{name:"nivel",value:p.nivel,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:wv.map(w=>c.jsx("option",{children:w},w))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((w,C)=>c.jsx("button",{type:"button",onClick:()=>g(N=>({...N,dificultad:w})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${C===0?"rounded-l-lg":""} ${C===2?"rounded-r-lg":""}
                                            ${p.dificultad===w?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:w},w))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.isNee,onChange:w=>g(C=>({...C,isNee:w.target.checked,selectedNee:w.target.checked?C.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:Z_.map(w=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(w),onChange:()=>_(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:w})]},w))})]})]})]}),c.jsx("textarea",{name:"contenido",value:p.contenido,onChange:v,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:L2e.map(w=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[w],onChange:()=>b(w),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:w})]}),p.tiposActividad[w]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),Z9[w].map(C=>c.jsx("button",{type:"button",onClick:()=>y(w,C),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[w]===C?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:C},C))]})]},w))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:e.length>0?e.map(w=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[w.asignatura," - ",w.nivel," (",new Date(w.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(w),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>B(w.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},w.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},H2e=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=j.useState(null),[i,o]=j.useState("list"),[l,u]=j.useState(!1),[d,f]=j.useState(""),h=async(B,F)=>{if(!B.trim()||!F.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const w=`Crea una rúbrica de evaluación detallada sobre "${B}" con el propósito de "${F}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,C={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{em("Evaluación - Rúbricas");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new os(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:C}})).response).text(),X=JSON.parse(R),q={id:crypto.randomUUID(),titulo:B,descripcion:F,fechaCreacion:new Date().toISOString(),dimensiones:X.map(Z=>({id:crypto.randomUUID(),nombre:Z.dimension,niveles:{insuficiente:Z.insuficiente,suficiente:Z.suficiente,competente:Z.competente,avanzado:Z.avanzado}}))};s(q)}catch(N){console.error(N),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const B=crypto.randomUUID(),F={id:B,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(N=>N?{...N,dimensiones:[...N.dimensiones,F]}:null),f("");const w=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(N=>N.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,C={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{em("Evaluación - Rúbricas (Añadir Dimensión)");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new os(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:C}})).response).text(),X=JSON.parse(R);s(q=>q?{...q,dimensiones:q.dimensiones.map(Z=>Z.id===B?{...Z,niveles:X,isLoading:!1}:Z)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),s(P=>P?{...P,dimensiones:P.dimensiones.filter(D=>D.id!==B)}:null)}},g=()=>{if(!a)return;e.some(F=>F.id===a.id)?t(a):n(a),o("list"),s(null)},v=B=>{s(B),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(B,F,w)=>{a&&s(C=>C?{...C,dimensiones:C.dimensiones.map(N=>N.id!==B?N:F==="nombre"?{...N,nombre:w}:{...N,niveles:{...N.niveles,[F]:w}})}:null)},_=(B,F)=>{s(w=>w?{...w,[B]:F}:null)},S=B=>{a&&s(F=>F?{...F,dimensiones:F.dimensiones.filter(w=>w.id!==B)}:null)},k=()=>{if(!a)return null;const B="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",F=`${B} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:a.titulo,onChange:w=>_("titulo",w.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${B} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:a.descripcion,onChange:w=>_("descripcion",w.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${B} mt-1`})]})]}),a.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(w=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:w},w))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(w=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:w.nombre,onChange:C=>y(w.id,"nombre",C.target.value),rows:4,className:F})}),Object.keys(w.niveles).map(C=>c.jsx("td",{className:"p-2 w-1/5",children:w.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:w.niveles[C],onChange:N=>y(w.id,C,N.target.value),rows:4,className:F})},C)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>S(w.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},w.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:w=>f(w.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${B} mt-1`})]}),c.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(B=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:B.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>v(B),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(B.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},B.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):k()},V2e=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=j.useState([]),[a,s]=j.useState(null),[i,o]=j.useState(null),[l,u]=j.useState({rubricaEstaticaId:"",curso:""}),[d,f]=j.useState(null);j.useEffect(()=>{const _=O2e(n);return()=>_()},[]);const h=async _=>{_.preventDefault();const S=t.find(B=>B.id===l.rubricaEstaticaId);if(!S||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const k={nombre:S.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:S.id,resultados:{}};try{await R2e(k),u({rubricaEstaticaId:"",curso:""})}catch(B){console.error(B),alert("No se pudo crear la evaluación con rúbrica.")}},p=_=>{s(_),o(JSON.parse(JSON.stringify(_)))},g=(_,S,k)=>{i&&o(B=>{if(!B)return null;const F=JSON.parse(JSON.stringify(B));return F.resultados[_]||(F.resultados[_]={puntajes:{},feedback:""}),F.resultados[_].puntajes[S]=k,F})},v=async()=>{if(i)try{await D2e(i),s(i),alert("Cambios guardados.")}catch(_){console.error(_),alert("No se pudieron guardar los cambios.")}},b=j.useCallback(_=>{const S=i,k=t.find(P=>P.id===(S==null?void 0:S.rubricaEstaticaId));if(!S||!k)return{score:0,maxScore:0,grade:"N/A"};const B=k.dimensiones.length*4,F=S.resultados[_];if(!F)return{score:0,maxScore:B,grade:"1.0"};const w=Object.values(F.puntajes).reduce((P,D)=>P+D,0),C=1+6*(w/B),N=B>0?C.toFixed(1):"1.0";return{score:w,maxScore:B,grade:N}},[i,t]),y=async _=>{if(!i)return;const S=t.find(w=>w.id===i.rubricaEstaticaId),k=i.resultados[_];if(!S||!k||Object.keys(k.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(_);const F=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${S.dimensiones.map(w=>`${w.nombre}: ${k.puntajes[w.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${S.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{em("Evaluación - Rúbricas Interactivas (Feedback)");const w="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",T=(await(await new os(w).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(F)).response).text();o(U=>{if(!U)return null;const R=JSON.parse(JSON.stringify(U));return R.resultados[_].feedback=T.replace(/(\*\*|\*)/g,""),R})}catch(w){console.error(w),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const _=t.find(k=>k.id===a.rubricaEstaticaId),S=e.filter(k=>k.profile===er.ESTUDIANTE&&o_(k.curso||"")===a.curso).map(k=>k.nombreCompleto).sort();return _?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),c.jsx("p",{className:"text-slate-500",children:a.curso})]}),c.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),_.dimensiones.map(k=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:k.nombre},k.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:S.map(k=>{var C;const{score:B,maxScore:F,grade:w}=b(k);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:k}),_.dimensiones.map(N=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(P=>{var D;return c.jsx("button",{onClick:()=>g(k,N.id,P),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[k])==null?void 0:D.puntajes[N.id])===P?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:P},P)})})},N.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[B,"/",F]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:w}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((C=i.resultados[k])==null?void 0:C.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>y(k),disabled:d===k,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===k?"...":"Generar IA"})]})})]},k)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:_=>u({...l,rubricaEstaticaId:_.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(_=>c.jsx("option",{value:_.id,children:_.titulo},_.id))]}),c.jsxs("select",{value:l.curso,onChange:_=>u({...l,curso:_.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),Cs.map(_=>c.jsx("option",{value:_,children:_},_))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(_=>c.jsxs("button",{onClick:()=>p(_),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:_.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:_.curso})]},_.id))})]})]})},z2e=({allUsers:e})=>{const[t,r]=j.useState(""),n=j.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===er.ESTUDIANTE&&s.curso).map(s=>o_(s.curso)))).sort(),[e]),a=j.useMemo(()=>{const s=e.filter(i=>i.profile===er.ESTUDIANTE);return t?s.filter(i=>o_(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>c.jsx("option",{value:s,children:s},s))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:o_(s.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},$2e=()=>{const[e,t]=j.useState("pruebas"),[r,n]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState(!0);j.useEffect(()=>{o(!0);const f=P2e(n),h=I2e(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const l=async f=>{try{await j2e(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await F2e(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>c.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&c.jsx(Q2e,{}),e==="rubricas"&&c.jsx(H2e,{rubricas:a,onSave:l,onDelete:u,onCreate:l}),e==="rubricasInteractivas"&&c.jsx(V2e,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&c.jsx(z2e,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var aS={};aS.version="0.18.5";var _Z=1252,K2e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],gD={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},vD=function(e){K2e.indexOf(e)!=-1&&(_Z=gD[0]=e)};function G2e(){vD(1252)}var gd=function(e){vD(e)};function xD(){gd(1200),G2e()}function eQ(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function q2e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function SZ(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Qb=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?q2e(e.slice(2)):t==254&&r==255?SZ(e.slice(2)):t==65279?e.slice(1):e},FE=function(t){return String.fromCharCode(t)},tQ=function(t){return String.fromCharCode(t)},Vy,S0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zy(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=S0.charAt(s)+S0.charAt(i)+S0.charAt(o)+S0.charAt(l);return t}function Oc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=S0.indexOf(e.charAt(u++)),i=S0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=S0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=S0.indexOf(e.charAt(u++)),a=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(a));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),fh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function nm(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function rQ(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Sc=function(t){return pn?fh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function SN(e){if(typeof ArrayBuffer>"u")return Sc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function fm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function W2e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function bD(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return bD(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Gi=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:fh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function X2e(e){for(var t=[],r=0,n=e.length+250,a=nm(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=nm(65535),n=65530)}return t.push(a.slice(0,r)),Gi(t)}var vl=/\u0000/g,Hb=/[\u0001-\u0006]/g;function Kv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function vd(e,t){var r=""+e;return r.length>=t?r:ws("0",t-r.length)+r}function yD(e,t){var r=""+e;return r.length>=t?r:ws(" ",t-r.length)+r}function sS(e,t){var r=""+e;return r.length>=t?r:r+ws(" ",t-r.length)}function Y2e(e,t){var r=""+Math.round(e);return r.length>=t?r:ws("0",t-r.length)+r}function J2e(e,t){var r=""+e;return r.length>=t?r:ws("0",t-r.length)+r}var nQ=Math.pow(2,32);function Vg(e,t){if(e>nQ||e<-nQ)return Y2e(e,t);var r=Math.round(e);return J2e(r,t)}function iS(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var aQ=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],zB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Z2e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Dr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},sQ={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},eEe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function oS(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+l,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function sp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=iEe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var NZ=new Date(1899,11,31,0,0,0),tEe=NZ.getTime(),rEe=new Date(1900,2,1,0,0,0);function kZ(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=rEe&&(r+=1440*60*1e3),(r-(tEe+(e.getTimezoneOffset()-NZ.getTimezoneOffset())*6e4))/(1440*60*1e3)}function wD(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function nEe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function aEe(e){var t=e<0?12:11,r=wD(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function sEe(e){var t=wD(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function $y(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=aEe(e):t===10?r=e.toFixed(10).substr(0,12):r=sEe(e),wD(nEe(r.toUpperCase()))}function Rp(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):$y(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ju(14,kZ(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function iEe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function oEe(e,t,r,n){var a="",s=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return zB[r.m-1][1];case 5:return zB[r.m-1][0];default:return zB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return aQ[r.q][0];default:return aQ[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?vd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=vd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?vd(l,u):"";return d}function N0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var BZ=/%/g;function lEe(e,t,r){var n=t.replace(BZ,""),a=t.length-n.length;return Uf(e,n,r*Math.pow(10,2*a))+ws("%",a)}function cEe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Uf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function TZ(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+TZ(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var IZ=/# (\?+)( ?)\/( ?)(\d+)/;function uEe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?ws(" ",e[1].length+1+e[4].length):yD(i,e[1].length)+e[2]+"/"+e[3]+vd(o,e[4].length))}function dEe(e,t,r){return r+(t===0?"":""+t)+ws(" ",e[1].length+2+e[4].length)}var jZ=/^#*0*\.([0#]+)/,FZ=/\).*[0#]/,OZ=/\(###\) ###\\?-####/;function dl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function iQ(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function oQ(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function AEe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function fEe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function hu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(FZ)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?hu("n",n,r):"("+hu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return cEe(e,t,r);if(t.indexOf("%")!==-1)return lEe(e,t,r);if(t.indexOf("E")!==-1)return TZ(t,r);if(t.charCodeAt(0)===36)return"$"+hu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Vg(l,t.length);if(t.match(/^[#?]+$/))return a=Vg(r,0),a==="0"&&(a=""),a.length>t.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(IZ))return uEe(s,l,u);if(t.match(/^#+0+$/))return u+Vg(l,t.length-t.indexOf("0"));if(s=t.match(jZ))return a=iQ(r,s[1].length).replace(/^([^\.]+)$/,"$1."+dl(s[1])).replace(/\.$/,"."+dl(s[1])).replace(/\.(\d*)$/,function(g,v){return"."+v+ws("0",dl(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+iQ(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+N0(Vg(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+hu(e,t,-r):N0(""+(Math.floor(r)+AEe(r,s[1].length)))+"."+vd(oQ(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return hu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Kv(hu(e,t.replace(/[\\-]/g,""),r)),i=0,Kv(Kv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(OZ))return a=hu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=oS(l,Math.pow(10,i)-1,!1),a=""+u,d=Uf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=sS(o[2],i),d.length<s[4].length&&(d=dl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=oS(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?yD(o[1],i)+s[2]+"/"+s[3]+sS(o[2],i):ws(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Vg(r,0),t.length<=a.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return dl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=oQ(r,s[1].length),r<0?"-"+hu(e,t,-r):N0(fEe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?vd(0,3-g.length):"")+g})+"."+vd(i,s[1].length);switch(t){case"###,##0.00":return hu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=N0(Vg(l,0));return p!=="0"?u+p:"";case"###,###.00":return hu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return hu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function hEe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Uf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function mEe(e,t,r){var n=t.replace(BZ,""),a=t.length-n.length;return Uf(e,n,r*Math.pow(10,2*a))+ws("%",a)}function DZ(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+DZ(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function pA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(FZ)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?pA("n",n,r):"("+pA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return hEe(e,t,r);if(t.indexOf("%")!==-1)return mEe(e,t,r);if(t.indexOf("E")!==-1)return DZ(t,r);if(t.charCodeAt(0)===36)return"$"+pA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+vd(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(IZ))return dEe(s,l,u);if(t.match(/^#+0+$/))return u+vd(l,t.length-t.indexOf("0"));if(s=t.match(jZ))return a=(""+r).replace(/^([^\.]+)$/,"$1."+dl(s[1])).replace(/\.$/,"."+dl(s[1])),a=a.replace(/\.(\d*)$/,function(g,v){return"."+v+ws("0",dl(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+N0(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+pA(e,t,-r):N0(""+r)+"."+ws("0",s[1].length);if(s=t.match(/^#,#*,#0/))return pA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Kv(pA(e,t.replace(/[\\-]/g,""),r)),i=0,Kv(Kv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(OZ))return a=pA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=oS(l,Math.pow(10,i)-1,!1),a=""+u,d=Uf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=sS(o[2],i),d.length<s[4].length&&(d=dl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=oS(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?yD(o[1],i)+s[2]+"/"+s[3]+sS(o[2],i):ws(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:dl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return dl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+pA(e,t,-r):N0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?vd(0,3-g.length):"")+g})+"."+vd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=N0(""+l);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return pA(e,t.slice(0,t.lastIndexOf(".")),r)+dl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Uf(e,t,r){return(r|0)===r?pA(e,t,r):hu(e,t,r)}function pEe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var RZ=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Jx(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":iS(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(RZ))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function gEe(e,t,r,n){for(var a=[],s="",i=0,o="",l="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!iS(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=sp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=sp(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"上":var v={t:o,v:o};if(u==null&&(u=sp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(v.v=u.H>=12?"下午":"上午"),v.t="T",i+=5,h="h"):(v.t="t",++i),u==null&&v.t==="T")return"";a[a.length]=v,l=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(RZ)){if(u==null&&(u=sp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Jx(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,_;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,l="h",b<1&&(b=1);break;case"s":(_=a[i].v.match(/\.0+$/))&&(y=Math.max(y,_[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var S="",k;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=oEe(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(k=i+1;a[k]!=null&&((o=a[k].t)==="?"||o==="D"||(o===" "||o==="t")&&a[k+1]!=null&&(a[k+1].t==="?"||a[k+1].t==="t"&&a[k+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[k].v==="/"||a[k].v===" "&&a[k+1]!=null&&a[k+1].t=="?"));)a[i].v+=a[k].v,a[k]={v:"",t:";"},++k;S+=a[i].v,i=k-1;break;case"G":a[i].t="t",a[i].v=Rp(t,r);break}var B="",F,w;if(S.length>0){S.charCodeAt(0)==40?(F=t<0&&S.charCodeAt(0)===45?-t:t,w=Uf("n",S,F)):(F=t<0&&n>1?-t:t,w=Uf("n",S,F),F<0&&a[0]&&a[0].t=="t"&&(w=w.substr(1),a[0].v="-"+a[0].v)),k=w.length-1;var C=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){C=i;break}var N=a.length;if(C===a.length&&w.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(k>=a[i].v.length-1?(k-=a[i].v.length,a[i].v=w.substr(k+1,a[i].v.length)):k<0?a[i].v="":(a[i].v=w.substr(0,k+1),k=-1),a[i].t="t",N=i);k>=0&&N<a.length&&(a[N].v=w.substr(0,k+1)+a[N].v)}else if(C!==a.length&&w.indexOf("E")===-1){for(k=w.indexOf(".")-1,i=C;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===C?a[i].v.indexOf(".")-1:a[i].v.length-1,B=a[i].v.substr(d+1);d>=0;--d)k>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(B=w.charAt(k--)+B);a[i].v=B,a[i].t="t",N=i}for(k>=0&&N<a.length&&(a[N].v=w.substr(0,k+1)+a[N].v),k=w.indexOf(".")+1,i=C;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==C)){for(d=a[i].v.indexOf(".")>-1&&i===C?a[i].v.indexOf(".")+1:0,B=a[i].v.substr(0,d);d<a[i].v.length;++d)k<w.length&&(B+=w.charAt(k++));a[i].v=B,a[i].t="t",N=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(F=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=Uf(a[i].t,a[i].v,F),a[i].t="t");var P="";for(i=0;i!==a.length;++i)a[i]!=null&&(P+=a[i].v);return P}var lQ=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function cQ(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function vEe(e,t){var r=pEe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(lQ),o=r[1].match(lQ);return cQ(t,i)?[n,r[0]]:cQ(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function ju(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Dr)[e],n==null&&(n=r.table&&r.table[sQ[e]]||Dr[sQ[e]]),n==null&&(n=eEe[e]||"General");break}if(iS(n,0))return Rp(t,r);t instanceof Date&&(t=kZ(t,r.date1904));var a=vEe(n,t);if(iS(a[1]))return Rp(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return gEe(a[1],t,r,a[0])}function Qf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Dr[r]==null){t<0&&(t=r);continue}if(Dr[r]==e){t=r;break}}t<0&&(t=391)}return Dr[t]=e,t}function NN(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Qf(e[t],t)}function Zx(){Dr=Z2e()}var xEe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},PZ=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function bEe(e){var t=typeof e=="number"?Dr[e]:e;return t=t.replace(PZ,"(\\d+)"),new RegExp("^"+t+"$")}function yEe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(PZ)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":l=p;break;case"m":i>=0?o=p:a=p;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var wEe=function(){var e={};e.version="1.2.0";function t(){for(var w=0,C=new Array(256),N=0;N!=256;++N)w=N,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,C[N]=w;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function n(w){var C=0,N=0,P=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)D[P]=w[P];for(P=0;P!=256;++P)for(N=w[P],C=256+P;C<4096;C+=256)N=D[C]=N>>>8^w[N&255];var T=[];for(P=1;P!=16;++P)T[P-1]=typeof Int32Array<"u"?D.subarray(P*256,P*256+256):D.slice(P*256,P*256+256);return T}var a=n(r),s=a[0],i=a[1],o=a[2],l=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],v=a[10],b=a[11],y=a[12],_=a[13],S=a[14];function k(w,C){for(var N=C^-1,P=0,D=w.length;P<D;)N=N>>>8^r[(N^w.charCodeAt(P++))&255];return~N}function B(w,C){for(var N=C^-1,P=w.length-15,D=0;D<P;)N=S[w[D++]^N&255]^_[w[D++]^N>>8&255]^y[w[D++]^N>>16&255]^b[w[D++]^N>>>24]^v[w[D++]]^g[w[D++]]^p[w[D++]]^h[w[D++]]^f[w[D++]]^d[w[D++]]^u[w[D++]]^l[w[D++]]^o[w[D++]]^i[w[D++]]^s[w[D++]]^r[w[D++]];for(P+=15;D<P;)N=N>>>8^r[(N^w[D++])&255];return~N}function F(w,C){for(var N=C^-1,P=0,D=w.length,T=0,U=0;P<D;)T=w.charCodeAt(P++),T<128?N=N>>>8^r[(N^T)&255]:T<2048?(N=N>>>8^r[(N^(192|T>>6&31))&255],N=N>>>8^r[(N^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,U=w.charCodeAt(P++)&1023,N=N>>>8^r[(N^(240|T>>8&7))&255],N=N>>>8^r[(N^(128|T>>2&63))&255],N=N>>>8^r[(N^(128|U>>6&15|(T&3)<<4))&255],N=N>>>8^r[(N^(128|U&63))&255]):(N=N>>>8^r[(N^(224|T>>12&15))&255],N=N>>>8^r[(N^(128|T>>6&63))&255],N=N>>>8^r[(N^(128|T&63))&255]);return~N}return e.table=r,e.bstr=k,e.buf=B,e.str=F,e}(),Er=function(){var t={};t.version="1.2.1";function r(fe,Be){for(var Ee=fe.split("/"),Ce=Be.split("/"),Ne=0,Te=0,Ye=Math.min(Ee.length,Ce.length);Ne<Ye;++Ne){if(Te=Ee[Ne].length-Ce[Ne].length)return Te;if(Ee[Ne]!=Ce[Ne])return Ee[Ne]<Ce[Ne]?-1:1}return Ee.length-Ce.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(0,Be+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(Be+1)}function s(fe,Be){typeof Be=="string"&&(Be=new Date(Be));var Ee=Be.getHours();Ee=Ee<<6|Be.getMinutes(),Ee=Ee<<5|Be.getSeconds()>>>1,fe.write_shift(2,Ee);var Ce=Be.getFullYear()-1980;Ce=Ce<<4|Be.getMonth()+1,Ce=Ce<<5|Be.getDate(),fe.write_shift(2,Ce)}function i(fe){var Be=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,Ce=new Date,Ne=Ee&31;Ee>>>=5;var Te=Ee&15;Ee>>>=4,Ce.setMilliseconds(0),Ce.setFullYear(Ee+1980),Ce.setMonth(Te-1),Ce.setDate(Ne);var Ye=Be&31;Be>>>=5;var ut=Be&63;return Be>>>=6,Ce.setHours(Be),Ce.setMinutes(ut),Ce.setSeconds(Ye<<1),Ce}function o(fe){po(fe,0);for(var Be={},Ee=0;fe.l<=fe.length-4;){var Ce=fe.read_shift(2),Ne=fe.read_shift(2),Te=fe.l+Ne,Ye={};switch(Ce){case 21589:Ee=fe.read_shift(1),Ee&1&&(Ye.mtime=fe.read_shift(4)),Ne>5&&(Ee&2&&(Ye.atime=fe.read_shift(4)),Ee&4&&(Ye.ctime=fe.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}fe.l=Te,Be[Ce]=Ye}return Be}var l;function u(){return l||(l={})}function d(fe,Be){if(fe[0]==80&&fe[1]==75)return pt(fe,Be);if((fe[0]|32)==109&&(fe[1]|32)==105)return vn(fe,Be);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,Ce=512,Ne=0,Te=0,Ye=0,ut=0,$e=0,tt=[],at=fe.slice(0,512);po(at,0);var Tt=f(at);switch(Ee=Tt[0],Ee){case 3:Ce=512;break;case 4:Ce=4096;break;case 0:if(Tt[1]==0)return pt(fe,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}Ce!==512&&(at=fe.slice(0,Ce),po(at,28));var Vt=fe.slice(0,Ce);h(at,Ee);var Yt=at.read_shift(4,"i");if(Ee===3&&Yt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Yt);at.l+=4,Ye=at.read_shift(4,"i"),at.l+=4,at.chk("00100000","Mini Stream Cutoff Size: "),ut=at.read_shift(4,"i"),Ne=at.read_shift(4,"i"),$e=at.read_shift(4,"i"),Te=at.read_shift(4,"i");for(var Ht=-1,Kt=0;Kt<109&&(Ht=at.read_shift(4,"i"),!(Ht<0));++Kt)tt[Kt]=Ht;var _r=p(fe,Ce);b($e,Te,_r,Ce,tt);var an=_(_r,Ye,tt,Ce);an[Ye].name="!Directory",Ne>0&&ut!==U&&(an[ut].name="!MiniFAT"),an[tt[0]].name="!FAT",an.fat_addrs=tt,an.ssz=Ce;var sn={},dn=[],ds=[],bo=[];S(Ye,an,_r,dn,Ne,sn,ds,ut),g(ds,bo,dn),dn.shift();var As={FileIndex:ds,FullPaths:bo};return Be&&Be.raw&&(As.raw={header:Vt,sectors:_r}),As}function f(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(R,"Header Signature: "),fe.l+=16;var Be=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Be]}function h(fe,Be){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function p(fe,Be){for(var Ee=Math.ceil(fe.length/Be)-1,Ce=[],Ne=1;Ne<Ee;++Ne)Ce[Ne-1]=fe.slice(Ne*Be,(Ne+1)*Be);return Ce[Ee-1]=fe.slice(Ee*Be),Ce}function g(fe,Be,Ee){for(var Ce=0,Ne=0,Te=0,Ye=0,ut=0,$e=Ee.length,tt=[],at=[];Ce<$e;++Ce)tt[Ce]=at[Ce]=Ce,Be[Ce]=Ee[Ce];for(;ut<at.length;++ut)Ce=at[ut],Ne=fe[Ce].L,Te=fe[Ce].R,Ye=fe[Ce].C,tt[Ce]===Ce&&(Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]),Te!==-1&&tt[Te]!==Te&&(tt[Ce]=tt[Te])),Ye!==-1&&(tt[Ye]=Ce),Ne!==-1&&Ce!=tt[Ce]&&(tt[Ne]=tt[Ce],at.lastIndexOf(Ne)<ut&&at.push(Ne)),Te!==-1&&Ce!=tt[Ce]&&(tt[Te]=tt[Ce],at.lastIndexOf(Te)<ut&&at.push(Te));for(Ce=1;Ce<$e;++Ce)tt[Ce]===Ce&&(Te!==-1&&tt[Te]!==Te?tt[Ce]=tt[Te]:Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]));for(Ce=1;Ce<$e;++Ce)if(fe[Ce].type!==0){if(ut=Ce,ut!=tt[ut])do ut=tt[ut],Be[Ce]=Be[ut]+"/"+Be[Ce];while(ut!==0&&tt[ut]!==-1&&ut!=tt[ut]);tt[Ce]=-1}for(Be[0]+="/",Ce=1;Ce<$e;++Ce)fe[Ce].type!==2&&(Be[Ce]+="/")}function v(fe,Be,Ee){for(var Ce=fe.start,Ne=fe.size,Te=[],Ye=Ce;Ee&&Ne>0&&Ye>=0;)Te.push(Be.slice(Ye*T,Ye*T+T)),Ne-=T,Ye=tp(Ee,Ye*4);return Te.length===0?yt(0):Gi(Te).slice(0,fe.size)}function b(fe,Be,Ee,Ce,Ne){var Te=U;if(fe===U){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var Ye=Ee[fe],ut=(Ce>>>2)-1;if(!Ye)return;for(var $e=0;$e<ut&&(Te=tp(Ye,$e*4))!==U;++$e)Ne.push(Te);b(tp(Ye,Ce-4),Be-1,Ee,Ce,Ne)}}function y(fe,Be,Ee,Ce,Ne){var Te=[],Ye=[];Ne||(Ne=[]);var ut=Ce-1,$e=0,tt=0;for($e=Be;$e>=0;){Ne[$e]=!0,Te[Te.length]=$e,Ye.push(fe[$e]);var at=Ee[Math.floor($e*4/Ce)];if(tt=$e*4&ut,Ce<4+tt)throw new Error("FAT boundary crossed: "+$e+" 4 "+Ce);if(!fe[at])break;$e=tp(fe[at],tt)}return{nodes:Te,data:yQ([Ye])}}function _(fe,Be,Ee,Ce){var Ne=fe.length,Te=[],Ye=[],ut=[],$e=[],tt=Ce-1,at=0,Tt=0,Vt=0,Yt=0;for(at=0;at<Ne;++at)if(ut=[],Vt=at+Be,Vt>=Ne&&(Vt-=Ne),!Ye[Vt]){$e=[];var Ht=[];for(Tt=Vt;Tt>=0;){Ht[Tt]=!0,Ye[Tt]=!0,ut[ut.length]=Tt,$e.push(fe[Tt]);var Kt=Ee[Math.floor(Tt*4/Ce)];if(Yt=Tt*4&tt,Ce<4+Yt)throw new Error("FAT boundary crossed: "+Tt+" 4 "+Ce);if(!fe[Kt]||(Tt=tp(fe[Kt],Yt),Ht[Tt]))break}Te[Vt]={nodes:ut,data:yQ([$e])}}return Te}function S(fe,Be,Ee,Ce,Ne,Te,Ye,ut){for(var $e=0,tt=Ce.length?2:0,at=Be[fe].data,Tt=0,Vt=0,Yt;Tt<at.length;Tt+=128){var Ht=at.slice(Tt,Tt+128);po(Ht,64),Vt=Ht.read_shift(2),Yt=BD(Ht,0,Vt-tt),Ce.push(Yt);var Kt={name:Yt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},_r=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);_r!==0&&(Kt.ct=k(Ht,Ht.l-8));var an=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);an!==0&&(Kt.mt=k(Ht,Ht.l-8)),Kt.start=Ht.read_shift(4,"i"),Kt.size=Ht.read_shift(4,"i"),Kt.size<0&&Kt.start<0&&(Kt.size=Kt.type=0,Kt.start=U,Kt.name=""),Kt.type===5?($e=Kt.start,Ne>0&&$e!==U&&(Be[$e].name="!StreamData")):Kt.size>=4096?(Kt.storage="fat",Be[Kt.start]===void 0&&(Be[Kt.start]=y(Ee,Kt.start,Be.fat_addrs,Be.ssz)),Be[Kt.start].name=Kt.name,Kt.content=Be[Kt.start].data.slice(0,Kt.size)):(Kt.storage="minifat",Kt.size<0?Kt.size=0:$e!==U&&Kt.start!==U&&Be[$e]&&(Kt.content=v(Kt,Be[$e].data,(Be[ut]||{}).data))),Kt.content&&po(Kt.content,0),Te[Yt]=Kt,Ye.push(Kt)}}function k(fe,Be){return new Date((Ec(fe,Be+4)/1e7*Math.pow(2,32)+Ec(fe,Be)/1e7-11644473600)*1e3)}function B(fe,Be){return u(),d(l.readFileSync(fe),Be)}function F(fe,Be){var Ee=Be&&Be.type;switch(Ee||pn&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return B(fe,Be);case"base64":return d(Sc(Oc(fe)),Be);case"binary":return d(Sc(fe),Be)}return d(fe,Be)}function w(fe,Be){var Ee=Be||{},Ce=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=Ce+"/",fe.FileIndex[0]={name:Ce,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),C(fe)}function C(fe){var Be="Sh33tJ5";if(!Er.find(fe,"/"+Be)){var Ee=yt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Be,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Be),N(fe)}}function N(fe,Be){w(fe);for(var Ee=!1,Ce=!1,Ne=fe.FullPaths.length-1;Ne>=0;--Ne){var Te=fe.FileIndex[Ne];switch(Te.type){case 0:Ce?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:Ce=!0,isNaN(Te.R*Te.L*Te.C)&&(Ee=!0),Te.R>-1&&Te.L>-1&&Te.R==Te.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Be)){var Ye=new Date(1987,1,19),ut=0,$e=Object.create?Object.create(null):{},tt=[];for(Ne=0;Ne<fe.FullPaths.length;++Ne)$e[fe.FullPaths[Ne]]=!0,fe.FileIndex[Ne].type!==0&&tt.push([fe.FullPaths[Ne],fe.FileIndex[Ne]]);for(Ne=0;Ne<tt.length;++Ne){var at=n(tt[Ne][0]);Ce=$e[at],Ce||(tt.push([at,{name:a(at).replace("/",""),type:1,clsid:q,ct:Ye,mt:Ye,content:null}]),$e[at]=!0)}for(tt.sort(function(Yt,Ht){return r(Yt[0],Ht[0])}),fe.FullPaths=[],fe.FileIndex=[],Ne=0;Ne<tt.length;++Ne)fe.FullPaths[Ne]=tt[Ne][0],fe.FileIndex[Ne]=tt[Ne][1];for(Ne=0;Ne<tt.length;++Ne){var Tt=fe.FileIndex[Ne],Vt=fe.FullPaths[Ne];if(Tt.name=a(Vt).replace("/",""),Tt.L=Tt.R=Tt.C=-(Tt.color=1),Tt.size=Tt.content?Tt.content.length:0,Tt.start=0,Tt.clsid=Tt.clsid||q,Ne===0)Tt.C=tt.length>1?1:-1,Tt.size=0,Tt.type=5;else if(Vt.slice(-1)=="/"){for(ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=Vt;++ut);for(Tt.C=ut>=tt.length?-1:ut,ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=n(Vt);++ut);Tt.R=ut>=tt.length?-1:ut,Tt.type=1}else n(fe.FullPaths[Ne+1]||"")==n(Vt)&&(Tt.R=Ne+1),Tt.type=2}}}function P(fe,Be){var Ee=Be||{};if(Ee.fileType=="mad")return $t(fe,Ee);switch(N(fe),Ee.fileType){case"zip":return gt(fe,Ee)}var Ce=function(Yt){for(var Ht=0,Kt=0,_r=0;_r<Yt.FileIndex.length;++_r){var an=Yt.FileIndex[_r];if(an.content){var sn=an.content.length;sn>0&&(sn<4096?Ht+=sn+63>>6:Kt+=sn+511>>9)}}for(var dn=Yt.FullPaths.length+3>>2,ds=Ht+7>>3,bo=Ht+127>>7,As=ds+Kt+dn+bo,Zs=As+127>>7,Fs=Zs<=109?0:Math.ceil((Zs-109)/127);As+Zs+Fs+127>>7>Zs;)Fs=++Zs<=109?0:Math.ceil((Zs-109)/127);var gi=[1,Fs,Zs,bo,dn,Kt,Ht,0];return Yt.FileIndex[0].size=Ht<<6,gi[7]=(Yt.FileIndex[0].start=gi[0]+gi[1]+gi[2]+gi[3]+gi[4]+gi[5])+(gi[6]+7>>3),gi}(fe),Ne=yt(Ce[7]<<9),Te=0,Ye=0;{for(Te=0;Te<8;++Te)Ne.write_shift(1,X[Te]);for(Te=0;Te<8;++Te)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Te=0;Te<3;++Te)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,Ce[2]),Ne.write_shift(4,Ce[0]+Ce[1]+Ce[2]+Ce[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,Ce[3]?Ce[0]+Ce[1]+Ce[2]-1:U),Ne.write_shift(4,Ce[3]),Ne.write_shift(-4,Ce[1]?Ce[0]-1:U),Ne.write_shift(4,Ce[1]),Te=0;Te<109;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1)}if(Ce[1])for(Ye=0;Ye<Ce[1];++Ye){for(;Te<236+Ye*127;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1);Ne.write_shift(-4,Ye===Ce[1]-1?U:Ye+1)}var ut=function(Yt){for(Ye+=Yt;Te<Ye-1;++Te)Ne.write_shift(-4,Te+1);Yt&&(++Te,Ne.write_shift(-4,U))};for(Ye=Te=0,Ye+=Ce[1];Te<Ye;++Te)Ne.write_shift(-4,Z.DIFSECT);for(Ye+=Ce[2];Te<Ye;++Te)Ne.write_shift(-4,Z.FATSECT);ut(Ce[3]),ut(Ce[4]);for(var $e=0,tt=0,at=fe.FileIndex[0];$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(tt<4096)&&(at.start=Ye,ut(tt+511>>9)));for(ut(Ce[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,Z.ENDOFCHAIN);for(Ye=Te=0,$e=0;$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(!tt||tt>=4096)&&(at.start=Ye,ut(tt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,Z.ENDOFCHAIN);for(Te=0;Te<Ce[4]<<2;++Te){var Tt=fe.FullPaths[Te];if(!Tt||Tt.length===0){for($e=0;$e<17;++$e)Ne.write_shift(4,0);for($e=0;$e<3;++$e)Ne.write_shift(4,-1);for($e=0;$e<12;++$e)Ne.write_shift(4,0);continue}at=fe.FileIndex[Te],Te===0&&(at.start=at.size?at.start-1:U);var Vt=Te===0&&Ee.root||at.name;if(tt=2*(Vt.length+1),Ne.write_shift(64,Vt,"utf16le"),Ne.write_shift(2,tt),Ne.write_shift(1,at.type),Ne.write_shift(1,at.color),Ne.write_shift(-4,at.L),Ne.write_shift(-4,at.R),Ne.write_shift(-4,at.C),at.clsid)Ne.write_shift(16,at.clsid,"hex");else for($e=0;$e<4;++$e)Ne.write_shift(4,0);Ne.write_shift(4,at.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,at.start),Ne.write_shift(4,at.size),Ne.write_shift(4,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>=4096)if(Ne.l=at.start+1<<9,pn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+511&-512;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&511;++$e)Ne.write_shift(1,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>0&&at.size<4096)if(pn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+63&-64;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&63;++$e)Ne.write_shift(1,0)}if(pn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function D(fe,Be){var Ee=fe.FullPaths.map(function($e){return $e.toUpperCase()}),Ce=Ee.map(function($e){var tt=$e.split("/");return tt[tt.length-($e.slice(-1)=="/"?2:1)]}),Ne=!1;Be.charCodeAt(0)===47?(Ne=!0,Be=Ee[0].slice(0,-1)+Be):Ne=Be.indexOf("/")!==-1;var Te=Be.toUpperCase(),Ye=Ne===!0?Ee.indexOf(Te):Ce.indexOf(Te);if(Ye!==-1)return fe.FileIndex[Ye];var ut=!Te.match(Hb);for(Te=Te.replace(vl,""),ut&&(Te=Te.replace(Hb,"!")),Ye=0;Ye<Ee.length;++Ye)if((ut?Ee[Ye].replace(Hb,"!"):Ee[Ye]).replace(vl,"")==Te||(ut?Ce[Ye].replace(Hb,"!"):Ce[Ye]).replace(vl,"")==Te)return fe.FileIndex[Ye];return null}var T=64,U=-2,R="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],q="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:R,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(fe,Be,Ee){u();var Ce=P(fe,Ee);l.writeFileSync(Be,Ce)}function V(fe){for(var Be=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Be[Ee]=String.fromCharCode(fe[Ee]);return Be.join("")}function K(fe,Be){var Ee=P(fe,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),l.writeFileSync(Be.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:V(Ee);case"base64":return zy(typeof Ee=="string"?Ee:V(Ee));case"buffer":if(pn)return Buffer.isBuffer(Ee)?Ee:fh(Ee);case"array":return typeof Ee=="string"?Sc(Ee):Ee}return Ee}var ne;function L(fe){try{var Be=fe.InflateRaw,Ee=new Be;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)ne=fe;else throw new Error("zlib does not expose bytesRead")}catch(Ce){console.error("cannot use native zlib: "+(Ce.message||Ce))}}function W(fe,Be){if(!ne)return jr(fe,Be);var Ee=ne.InflateRaw,Ce=new Ee,Ne=Ce._processChunk(fe.slice(fe.l),Ce._finishFlushFlag);return fe.l+=Ce.bytesRead,Ne}function J(fe){return ne?ne.deflateRawSync(fe):Qt(fe)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(fe){var Be=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var ce=typeof Uint8Array<"u",ge=ce?new Uint8Array(256):[],je=0;je<256;++je)ge[je]=oe(je);function re(fe,Be){var Ee=ge[fe&255];return Be<=8?Ee>>>8-Be:(Ee=Ee<<8|ge[fe>>8&255],Be<=16?Ee>>>16-Be:(Ee=Ee<<8|ge[fe>>16&255],Ee>>>24-Be))}function Se(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=6?0:fe[Ce+1]<<8))>>>Ee&3}function De(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=5?0:fe[Ce+1]<<8))>>>Ee&7}function _e(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=4?0:fe[Ce+1]<<8))>>>Ee&15}function he(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=3?0:fe[Ce+1]<<8))>>>Ee&31}function Ie(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=1?0:fe[Ce+1]<<8))>>>Ee&127}function He(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3,Te=(1<<Ee)-1,Ye=fe[Ne]>>>Ce;return Ee<8-Ce||(Ye|=fe[Ne+1]<<8-Ce,Ee<16-Ce)||(Ye|=fe[Ne+2]<<16-Ce,Ee<24-Ce)||(Ye|=fe[Ne+3]<<24-Ce),Ye&Te}function Xe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ce<=5?fe[Ne]|=(Ee&7)<<Ce:(fe[Ne]|=Ee<<Ce&255,fe[Ne+1]=(Ee&7)>>8-Ce),Be+3}function ye(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee=(Ee&1)<<Ce,fe[Ne]|=Ee,Be+1}function Oe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee,Be+8}function Pe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee&255,fe[Ne+2]=Ee>>>8,Be+16}function qe(fe,Be){var Ee=fe.length,Ce=2*Ee>Be?2*Ee:Be+5,Ne=0;if(Ee>=Be)return fe;if(pn){var Te=rQ(Ce);if(fe.copy)fe.copy(Te);else for(;Ne<fe.length;++Ne)Te[Ne]=fe[Ne];return Te}else if(ce){var Ye=new Uint8Array(Ce);if(Ye.set)Ye.set(fe);else for(;Ne<Ee;++Ne)Ye[Ne]=fe[Ne];return Ye}return fe.length=Ce,fe}function Ze(fe){for(var Be=new Array(fe),Ee=0;Ee<fe;++Ee)Be[Ee]=0;return Be}function ot(fe,Be,Ee){var Ce=1,Ne=0,Te=0,Ye=0,ut=0,$e=fe.length,tt=ce?new Uint16Array(32):Ze(32);for(Te=0;Te<32;++Te)tt[Te]=0;for(Te=$e;Te<Ee;++Te)fe[Te]=0;$e=fe.length;var at=ce?new Uint16Array($e):Ze($e);for(Te=0;Te<$e;++Te)tt[Ne=fe[Te]]++,Ce<Ne&&(Ce=Ne),at[Te]=0;for(tt[0]=0,Te=1;Te<=Ce;++Te)tt[Te+16]=ut=ut+tt[Te-1]<<1;for(Te=0;Te<$e;++Te)ut=fe[Te],ut!=0&&(at[Te]=tt[ut+16]++);var Tt=0;for(Te=0;Te<$e;++Te)if(Tt=fe[Te],Tt!=0)for(ut=re(at[Te],Ce)>>Ce-Tt,Ye=(1<<Ce+4-Tt)-1;Ye>=0;--Ye)Be[ut|Ye<<Tt]=Tt&15|Te<<4;return Ce}var mt=ce?new Uint16Array(512):Ze(512),Bt=ce?new Uint16Array(32):Ze(32);if(!ce){for(var Lt=0;Lt<512;++Lt)mt[Lt]=0;for(Lt=0;Lt<32;++Lt)Bt[Lt]=0}(function(){for(var fe=[],Be=0;Be<32;Be++)fe.push(5);ot(fe,Bt,32);var Ee=[];for(Be=0;Be<=143;Be++)Ee.push(8);for(;Be<=255;Be++)Ee.push(9);for(;Be<=279;Be++)Ee.push(7);for(;Be<=287;Be++)Ee.push(8);ot(Ee,mt,288)})();var Ot=function(){for(var Be=ce?new Uint8Array(32768):[],Ee=0,Ce=0;Ee<Ae.length-1;++Ee)for(;Ce<Ae[Ee+1];++Ce)Be[Ce]=Ee;for(;Ce<32768;++Ce)Be[Ce]=29;var Ne=ce?new Uint8Array(259):[];for(Ee=0,Ce=0;Ee<ie.length-1;++Ee)for(;Ce<ie[Ee+1];++Ce)Ne[Ce]=Ee;function Te(ut,$e){for(var tt=0;tt<ut.length;){var at=Math.min(65535,ut.length-tt),Tt=tt+at==ut.length;for($e.write_shift(1,+Tt),$e.write_shift(2,at),$e.write_shift(2,~at&65535);at-- >0;)$e[$e.l++]=ut[tt++]}return $e.l}function Ye(ut,$e){for(var tt=0,at=0,Tt=ce?new Uint16Array(32768):[];at<ut.length;){var Vt=Math.min(65535,ut.length-at);if(Vt<10){for(tt=Xe($e,tt,+(at+Vt==ut.length)),tt&7&&(tt+=8-(tt&7)),$e.l=tt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=ut[at++];tt=$e.l*8;continue}tt=Xe($e,tt,+(at+Vt==ut.length)+2);for(var Yt=0;Vt-- >0;){var Ht=ut[at];Yt=(Yt<<5^Ht)&32767;var Kt=-1,_r=0;if((Kt=Tt[Yt])&&(Kt|=at&-32768,Kt>at&&(Kt-=32768),Kt<at))for(;ut[Kt+_r]==ut[at+_r]&&_r<250;)++_r;if(_r>2){Ht=Ne[_r],Ht<=22?tt=Oe($e,tt,ge[Ht+1]>>1)-1:(Oe($e,tt,3),tt+=5,Oe($e,tt,ge[Ht-23]>>5),tt+=3);var an=Ht<8?0:Ht-4>>2;an>0&&(Pe($e,tt,_r-ie[Ht]),tt+=an),Ht=Be[at-Kt],tt=Oe($e,tt,ge[Ht]>>3),tt-=3;var sn=Ht<4?0:Ht-2>>1;sn>0&&(Pe($e,tt,at-Kt-Ae[Ht]),tt+=sn);for(var dn=0;dn<_r;++dn)Tt[Yt]=at&32767,Yt=(Yt<<5^ut[at])&32767,++at;Vt-=_r-1}else Ht<=143?Ht=Ht+48:tt=ye($e,tt,1),tt=Oe($e,tt,ge[Ht]),Tt[Yt]=at&32767,++at}tt=Oe($e,tt,0)-1}return $e.l=(tt+7)/8|0,$e.l}return function($e,tt){return $e.length<8?Te($e,tt):Ye($e,tt)}}();function Qt(fe){var Be=yt(50+Math.floor(fe.length*1.1)),Ee=Ot(fe,Be);return Be.slice(0,Ee)}var bt=ce?new Uint16Array(32768):Ze(32768),Nr=ce?new Uint16Array(32768):Ze(32768),rr=ce?new Uint16Array(128):Ze(128),nn=1,Cr=1;function Vr(fe,Be){var Ee=he(fe,Be)+257;Be+=5;var Ce=he(fe,Be)+1;Be+=5;var Ne=_e(fe,Be)+4;Be+=4;for(var Te=0,Ye=ce?new Uint8Array(19):Ze(19),ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,tt=ce?new Uint8Array(8):Ze(8),at=ce?new Uint8Array(8):Ze(8),Tt=Ye.length,Vt=0;Vt<Ne;++Vt)Ye[te[Vt]]=Te=De(fe,Be),$e<Te&&($e=Te),tt[Te]++,Be+=3;var Yt=0;for(tt[0]=0,Vt=1;Vt<=$e;++Vt)at[Vt]=Yt=Yt+tt[Vt-1]<<1;for(Vt=0;Vt<Tt;++Vt)(Yt=Ye[Vt])!=0&&(ut[Vt]=at[Yt]++);var Ht=0;for(Vt=0;Vt<Tt;++Vt)if(Ht=Ye[Vt],Ht!=0){Yt=ge[ut[Vt]]>>8-Ht;for(var Kt=(1<<7-Ht)-1;Kt>=0;--Kt)rr[Yt|Kt<<Ht]=Ht&7|Vt<<3}var _r=[];for($e=1;_r.length<Ee+Ce;)switch(Yt=rr[Ie(fe,Be)],Be+=Yt&7,Yt>>>=3){case 16:for(Te=3+Se(fe,Be),Be+=2,Yt=_r[_r.length-1];Te-- >0;)_r.push(Yt);break;case 17:for(Te=3+De(fe,Be),Be+=3;Te-- >0;)_r.push(0);break;case 18:for(Te=11+Ie(fe,Be),Be+=7;Te-- >0;)_r.push(0);break;default:_r.push(Yt),$e<Yt&&($e=Yt);break}var an=_r.slice(0,Ee),sn=_r.slice(Ee);for(Vt=Ee;Vt<286;++Vt)an[Vt]=0;for(Vt=Ce;Vt<30;++Vt)sn[Vt]=0;return nn=ot(an,bt,286),Cr=ot(sn,Nr,30),Be}function Fn(fe,Be){if(fe[0]==3&&!(fe[1]&3))return[nm(Be),2];for(var Ee=0,Ce=0,Ne=rQ(Be||1<<18),Te=0,Ye=Ne.length>>>0,ut=0,$e=0;(Ce&1)==0;){if(Ce=De(fe,Ee),Ee+=3,Ce>>>1)Ce>>1==1?(ut=9,$e=5):(Ee=Vr(fe,Ee),ut=nn,$e=Cr);else{Ee&7&&(Ee+=8-(Ee&7));var tt=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,tt>0)for(!Be&&Ye<Te+tt&&(Ne=qe(Ne,Te+tt),Ye=Ne.length);tt-- >0;)Ne[Te++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Be&&Ye<Te+32767&&(Ne=qe(Ne,Te+32767),Ye=Ne.length);var at=He(fe,Ee,ut),Tt=Ce>>>1==1?mt[at]:bt[at];if(Ee+=Tt&15,Tt>>>=4,(Tt>>>8&255)===0)Ne[Te++]=Tt;else{if(Tt==256)break;Tt-=257;var Vt=Tt<8?0:Tt-4>>2;Vt>5&&(Vt=0);var Yt=Te+ie[Tt];Vt>0&&(Yt+=He(fe,Ee,Vt),Ee+=Vt),at=He(fe,Ee,$e),Tt=Ce>>>1==1?Bt[at]:Nr[at],Ee+=Tt&15,Tt>>>=4;var Ht=Tt<4?0:Tt-2>>1,Kt=Ae[Tt];for(Ht>0&&(Kt+=He(fe,Ee,Ht),Ee+=Ht),!Be&&Ye<Yt&&(Ne=qe(Ne,Yt+100),Ye=Ne.length);Te<Yt;)Ne[Te]=Ne[Te-Kt],++Te}}}return Be?[Ne,Ee+7>>>3]:[Ne.slice(0,Te),Ee+7>>>3]}function jr(fe,Be){var Ee=fe.slice(fe.l||0),Ce=Fn(Ee,Be);return fe.l+=Ce[1],Ce[0]}function vt(fe,Be){if(fe)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function pt(fe,Be){var Ee=fe;po(Ee,0);var Ce=[],Ne=[],Te={FileIndex:Ce,FullPaths:Ne};w(Te,{root:Be.root});for(var Ye=Ee.length-4;(Ee[Ye]!=80||Ee[Ye+1]!=75||Ee[Ye+2]!=5||Ee[Ye+3]!=6)&&Ye>=0;)--Ye;Ee.l=Ye+4,Ee.l+=4;var ut=Ee.read_shift(2);Ee.l+=6;var $e=Ee.read_shift(4);for(Ee.l=$e,Ye=0;Ye<ut;++Ye){Ee.l+=20;var tt=Ee.read_shift(4),at=Ee.read_shift(4),Tt=Ee.read_shift(2),Vt=Ee.read_shift(2),Yt=Ee.read_shift(2);Ee.l+=8;var Ht=Ee.read_shift(4),Kt=o(Ee.slice(Ee.l+Tt,Ee.l+Tt+Vt));Ee.l+=Tt+Vt+Yt;var _r=Ee.l;Ee.l=Ht+4,Je(Ee,tt,at,Te,Kt),Ee.l=_r}return Te}function Je(fe,Be,Ee,Ce,Ne){fe.l+=2;var Te=fe.read_shift(2),Ye=fe.read_shift(2),ut=i(fe);if(Te&8257)throw new Error("Unsupported ZIP encryption");for(var $e=fe.read_shift(4),tt=fe.read_shift(4),at=fe.read_shift(4),Tt=fe.read_shift(2),Vt=fe.read_shift(2),Yt="",Ht=0;Ht<Tt;++Ht)Yt+=String.fromCharCode(fe[fe.l++]);if(Vt){var Kt=o(fe.slice(fe.l,fe.l+Vt));(Kt[21589]||{}).mt&&(ut=Kt[21589].mt),((Ne||{})[21589]||{}).mt&&(ut=Ne[21589].mt)}fe.l+=Vt;var _r=fe.slice(fe.l,fe.l+tt);switch(Ye){case 8:_r=W(fe,at);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var an=!1;Te&8&&($e=fe.read_shift(4),$e==134695760&&($e=fe.read_shift(4),an=!0),tt=fe.read_shift(4),at=fe.read_shift(4)),tt!=Be&&vt(an,"Bad compressed size: "+Be+" != "+tt),at!=Ee&&vt(an,"Bad uncompressed size: "+Ee+" != "+at),en(Ce,Yt,_r,{unsafe:!0,mt:ut})}function gt(fe,Be){var Ee=Be||{},Ce=[],Ne=[],Te=yt(1),Ye=Ee.compression?8:0,ut=0,$e=0,tt=0,at=0,Tt=0,Vt=fe.FullPaths[0],Yt=Vt,Ht=fe.FileIndex[0],Kt=[],_r=0;for($e=1;$e<fe.FullPaths.length;++$e)if(Yt=fe.FullPaths[$e].slice(Vt.length),Ht=fe.FileIndex[$e],!(!Ht.size||!Ht.content||Yt=="Sh33tJ5")){var an=at,sn=yt(Yt.length);for(tt=0;tt<Yt.length;++tt)sn.write_shift(1,Yt.charCodeAt(tt)&127);sn=sn.slice(0,sn.l),Kt[Tt]=wEe.buf(Ht.content,0);var dn=Ht.content;Ye==8&&(dn=J(dn)),Te=yt(30),Te.write_shift(4,67324752),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Ht.mt?s(Te,Ht.mt):Te.write_shift(4,0),Te.write_shift(-4,Kt[Tt]),Te.write_shift(4,dn.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,sn.length),Te.write_shift(2,0),at+=Te.length,Ce.push(Te),at+=sn.length,Ce.push(sn),at+=dn.length,Ce.push(dn),Te=yt(46),Te.write_shift(4,33639248),Te.write_shift(2,0),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Te.write_shift(4,0),Te.write_shift(-4,Kt[Tt]),Te.write_shift(4,dn.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,sn.length),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(4,0),Te.write_shift(4,an),_r+=Te.l,Ne.push(Te),_r+=sn.length,Ne.push(sn),++Tt}return Te=yt(22),Te.write_shift(4,101010256),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,Tt),Te.write_shift(2,Tt),Te.write_shift(4,_r),Te.write_shift(4,at),Te.write_shift(2,0),Gi([Gi(Ce),Gi(Ne),Te])}var dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dt(fe,Be){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",Ce=Ee.match(/\.([^\.]+)$/);return Ce&&dt[Ce[1]]||Be&&(Ce=(Ee=Be).match(/[\.\\]([^\.\\])+$/),Ce&&dt[Ce[1]])?dt[Ce[1]]:"application/octet-stream"}function zt(fe){for(var Be=zy(fe),Ee=[],Ce=0;Ce<Be.length;Ce+=76)Ee.push(Be.slice(Ce,Ce+76));return Ee.join(`\r
`)+`\r
`}function Pr(fe){var Be=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var at=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(at.length==1?"0"+at:at)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],Ce=Be.split(`\r
`),Ne=0;Ne<Ce.length;++Ne){var Te=Ce[Ne];if(Te.length==0){Ee.push("");continue}for(var Ye=0;Ye<Te.length;){var ut=76,$e=Te.slice(Ye,Ye+ut);$e.charAt(ut-1)=="="?ut--:$e.charAt(ut-2)=="="?ut-=2:$e.charAt(ut-3)=="="&&(ut-=3),$e=Te.slice(Ye,Ye+ut),Ye+=ut,Ye<Te.length&&($e+="="),Ee.push($e)}}return Ee.join(`\r
`)}function Xr(fe){for(var Be=[],Ee=0;Ee<fe.length;++Ee){for(var Ce=fe[Ee];Ee<=fe.length&&Ce.charAt(Ce.length-1)=="=";)Ce=Ce.slice(0,Ce.length-1)+fe[++Ee];Be.push(Ce)}for(var Ne=0;Ne<Be.length;++Ne)Be[Ne]=Be[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Te){return String.fromCharCode(parseInt(Te.slice(1),16))});return Sc(Be.join(`\r
`))}function gn(fe,Be,Ee){for(var Ce="",Ne="",Te="",Ye,ut=0;ut<10;++ut){var $e=Be[ut];if(!$e||$e.match(/^\s*$/))break;var tt=$e.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":Ce=tt[2].trim();break;case"content-type":Te=tt[2].trim();break;case"content-transfer-encoding":Ne=tt[2].trim();break}}switch(++ut,Ne.toLowerCase()){case"base64":Ye=Sc(Oc(Be.slice(ut).join("")));break;case"quoted-printable":Ye=Xr(Be.slice(ut));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var at=en(fe,Ce.slice(Ee.length),Ye,{unsafe:!0});Te&&(at.ctype=Te)}function vn(fe,Be){if(V(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Be&&Be.root||"",Ce=(pn&&Buffer.isBuffer(fe)?fe.toString("binary"):V(fe)).split(`\r
`),Ne=0,Te="";for(Ne=0;Ne<Ce.length;++Ne)if(Te=Ce[Ne],!!/^Content-Location:/i.test(Te)&&(Te=Te.slice(Te.indexOf("file")),Ee||(Ee=Te.slice(0,Te.lastIndexOf("/")+1)),Te.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),Te.slice(0,Ee.length)!=Ee););var Ye=(Ce[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ut="--"+(Ye[1]||""),$e=[],tt=[],at={FileIndex:$e,FullPaths:tt};w(at);var Tt,Vt=0;for(Ne=0;Ne<Ce.length;++Ne){var Yt=Ce[Ne];Yt!==ut&&Yt!==ut+"--"||(Vt++&&gn(at,Ce.slice(Tt,Ne),Ee),Tt=Ne)}return at}function $t(fe,Be){var Ee=Be||{},Ce=Ee.boundary||"SheetJS";Ce="------="+Ce;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ce.slice(2)+'"',"","",""],Te=fe.FullPaths[0],Ye=Te,ut=fe.FileIndex[0],$e=1;$e<fe.FullPaths.length;++$e)if(Ye=fe.FullPaths[$e].slice(Te.length),ut=fe.FileIndex[$e],!(!ut.size||!ut.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(_r){return"_x"+_r.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(_r){return"_u"+_r.charCodeAt(0).toString(16)+"_"});for(var tt=ut.content,at=pn&&Buffer.isBuffer(tt)?tt.toString("binary"):V(tt),Tt=0,Vt=Math.min(1024,at.length),Yt=0,Ht=0;Ht<=Vt;++Ht)(Yt=at.charCodeAt(Ht))>=32&&Yt<128&&++Tt;var Kt=Tt>=Vt*4/5;Ne.push(Ce),Ne.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+Ye),Ne.push("Content-Transfer-Encoding: "+(Kt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Dt(ut,Ye)),Ne.push(""),Ne.push(Kt?Pr(at):zt(at))}return Ne.push(Ce+`--\r
`),Ne.join(`\r
`)}function tn(fe){var Be={};return w(Be,fe),Be}function en(fe,Be,Ee,Ce){var Ne=Ce&&Ce.unsafe;Ne||w(fe);var Te=!Ne&&Er.find(fe,Be);if(!Te){var Ye=fe.FullPaths[0];Be.slice(0,Ye.length)==Ye?Ye=Be:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Be).replace("//","/")),Te={name:a(Be),type:2},fe.FileIndex.push(Te),fe.FullPaths.push(Ye),Ne||Er.utils.cfb_gc(fe)}return Te.content=Ee,Te.size=Ee?Ee.length:0,Ce&&(Ce.CLSID&&(Te.clsid=Ce.CLSID),Ce.mt&&(Te.mt=Ce.mt),Ce.ct&&(Te.ct=Ce.ct)),Te}function cr(fe,Be){w(fe);var Ee=Er.find(fe,Be);if(Ee){for(var Ce=0;Ce<fe.FileIndex.length;++Ce)if(fe.FileIndex[Ce]==Ee)return fe.FileIndex.splice(Ce,1),fe.FullPaths.splice(Ce,1),!0}return!1}function Yr(fe,Be,Ee){w(fe);var Ce=Er.find(fe,Be);if(Ce){for(var Ne=0;Ne<fe.FileIndex.length;++Ne)if(fe.FileIndex[Ne]==Ce)return fe.FileIndex[Ne].name=a(Ee),fe.FullPaths[Ne]=Ee,!0}return!1}function ta(fe){N(fe,!0)}return t.find=D,t.read=F,t.parse=d,t.write=K,t.writeFile=H,t.utils={cfb_new:tn,cfb_add:en,cfb_del:cr,cfb_mov:Yr,cfb_gc:ta,ReadShift:fy,CheckField:see,prep_blob:po,bconcat:Gi,use_zlib:L,_deflateRaw:Qt,_inflateRaw:jr,consts:Z},t}();function EEe(e){return typeof e=="string"?SN(e):Array.isArray(e)?W2e(e):e}function Qw(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=SN(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?kA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([EEe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=fm(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function CEe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ts(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function uQ(e,t){for(var r=[],n=Ts(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function kN(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function BN(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function _Ee(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var lS=new Date(1899,11,30,0,0,0);function Ni(e,t){var r=e.getTime(),n=lS.getTime()+(e.getTimezoneOffset()-lS.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var LZ=new Date,SEe=lS.getTime()+(LZ.getTimezoneOffset()-lS.getTimezoneOffset())*6e4,dQ=LZ.getTimezoneOffset();function TN(e){var t=new Date;return t.setTime(e*24*60*60*1e3+SEe),t.getTimezoneOffset()!==dQ&&t.setTime(t.getTime()+(t.getTimezoneOffset()-dQ)*6e4),t}function NEe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var AQ=new Date("2017-02-19T19:06:09.000Z"),MZ=isNaN(AQ.getFullYear())?new Date("2/19/17"):AQ,kEe=MZ.getFullYear()==2017;function Qa(e,t){var r=new Date(e);if(kEe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(MZ.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Pp(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return kA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return kA(SZ(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return kA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return kA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ha(e[r]));return t}function ws(e,t){for(var r="";r.length<t;)r+=e;return r}function Ed(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var BEe=["january","february","march","april","may","june","july","august","september","october","november","december"];function hx(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&BEe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var TEe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function UZ(e){return e?e.content&&e.type?Pp(e.content,!0):e.data?Qb(e.data):e.asNodeBuffer&&pn?Qb(e.asNodeBuffer().toString("binary")):e.asBinary?Qb(e.asBinary()):e._data&&e._data.getContent?Qb(Pp(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function QZ(e){if(!e)return null;if(e.data)return eQ(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?eQ(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function IEe(e){return e&&e.name.slice(-4)===".bin"?QZ(e):UZ(e)}function vu(e,t){for(var r=e.FullPaths||Ts(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function ED(e,t){var r=vu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function li(e,t,r){if(!r)return IEe(ED(e,t));if(!t)return null;try{return li(e,t)}catch{return null}}function Nc(e,t,r){if(!r)return UZ(ED(e,t));if(!t)return null;try{return Nc(e,t)}catch{return null}}function jEe(e,t,r){return QZ(ED(e,t))}function fQ(e){for(var t=e.FullPaths||Ts(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function cn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=fh(r):n=X2e(r),Er.utils.cfb_add(e,t,n)}Er.utils.cfb_add(e,t,r)}else e.file(t,r)}function CD(){return Er.utils.cfb_new()}function HZ(e,t){switch(t.type){case"base64":return Er.read(e,{type:"base64"});case"binary":return Er.read(e,{type:"binary"});case"buffer":case"array":return Er.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Vb(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ys=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,FEe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,hQ=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,OEe=/<[^>]*>/g,rl=Ys.match(hQ)?hQ:OEe,DEe=/<\w*:/,REe=/<(\/?)\w+:/;function $r(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(FEe),o=0,l="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,l=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function VA(e){return e.replace(REe,"<$1")}var VZ={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},_D=kN(VZ),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,l){return VZ[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),SD=/[&<>'"]/g,PEe=/[\u0000-\u0008\u000b-\u001f]/g;function ga(e){var t=e+"";return t.replace(SD,function(r){return _D[r]}).replace(PEe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function mQ(e){return ga(e).replace(/ /g,"_x0020_")}var zZ=/[\u0000-\u001f]/g;function ND(e){var t=e+"";return t.replace(SD,function(r){return _D[r]}).replace(/\n/g,"<br/>").replace(zZ,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function LEe(e){var t=e+"";return t.replace(SD,function(r){return _D[r]}).replace(zZ,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var pQ=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function MEe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function $B(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function gQ(e){var t=nm(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function vQ(e){return fh(e,"binary").toString("utf8")}var OE="foo bar bazâð£",Ca=pn&&(vQ(OE)==$B(OE)&&vQ||gQ(OE)==$B(OE)&&gQ)||$B,kA=pn?function(e){return fh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Ky=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),$Z=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),UEe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),QEe=/<\/?(?:vt:)?variant>/g,HEe=/<(?:vt:)([^>]*)>([\s\S]*)</;function xQ(e,t){var r=$r(e),n=e.match(UEe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(QEe,"").match(HEe);i&&a.push({v:Ca(i[2]),t:i[1]})}),a}var KZ=/(^\s|\s$|\n)/;function go(e,t){return"<"+e+(t.match(KZ)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Gy(e){return Ts(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Gt(e,t,r){return"<"+e+(r!=null?Gy(r):"")+(t!=null?(t.match(KZ)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function zj(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function VEe(e,t){switch(typeof e){case"string":var r=Gt("vt:lpwstr",ga(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Gt((e|0)==e?"vt:i4":"vt:r8",ga(String(e)));case"boolean":return Gt("vt:bool",e?"true":"false")}if(e instanceof Date)return Gt("vt:filetime",zj(e));throw new Error("Unable to serialize "+e)}function kD(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ca(fm(bD(e)));throw new Error("Bad input format: expected Buffer or string")}var qy=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,_i={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},eg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],wc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function zEe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function $Ee(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var bQ=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},yQ=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:fh(t)})):bQ(e)}:bQ,wQ=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Of(e,a)));return n.join("").replace(vl,"")},BD=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(vl,""):wQ(e,t,r)}:wQ,EQ=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},GZ=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):EQ(e,t,r)}:EQ,CQ=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(gv(e,a)));return n.join("")},Hw=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):CQ(t,r,n)}:CQ,qZ=function(e,t){var r=Ec(e,t);return r>0?Hw(e,t+4,t+4+r-1):""},WZ=qZ,XZ=function(e,t){var r=Ec(e,t);return r>0?Hw(e,t+4,t+4+r-1):""},YZ=XZ,JZ=function(e,t){var r=2*Ec(e,t);return r>0?Hw(e,t+4,t+4+r-1):""},ZZ=JZ,eee=function(t,r){var n=Ec(t,r);return n>0?BD(t,r+4,r+4+n):""},tee=eee,ree=function(e,t){var r=Ec(e,t);return r>0?Hw(e,t+4,t+4+r):""},nee=ree,aee=function(e,t){return zEe(e,t)},cS=aee,TD=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(WZ=function(t,r){if(!Buffer.isBuffer(t))return qZ(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},YZ=function(t,r){if(!Buffer.isBuffer(t))return XZ(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},ZZ=function(t,r){if(!Buffer.isBuffer(t))return JZ(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},tee=function(t,r){if(!Buffer.isBuffer(t))return eee(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},nee=function(t,r){if(!Buffer.isBuffer(t))return ree(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},cS=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):aee(t,r)},TD=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var gv=function(e,t){return e[t]},Of=function(e,t){return e[t+1]*256+e[t]},KEe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ec=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},tp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},GEe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function fy(e,t){var r="",n,a,s=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(Of(this,u)),u+=2;e*=2;break;case"utf8":r=Hw(this,this.l,this.l+e);break;case"utf16le":e*=2,r=BD(this,this.l,this.l+e);break;case"wstr":return fy.call(this,e,"dbcs");case"lpstr-ansi":r=WZ(this,this.l),e=4+Ec(this,this.l);break;case"lpstr-cp":r=YZ(this,this.l),e=4+Ec(this,this.l);break;case"lpwstr":r=ZZ(this,this.l),e=4+2*Ec(this,this.l);break;case"lpp4":e=4+Ec(this,this.l),r=tee(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ec(this,this.l),r=nee(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=gv(this,this.l+e++))!==0;)s.push(FE(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=Of(this,this.l+e))!==0;)s.push(FE(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=gv(this,u),this.l=u+1,o=fy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(FE(Of(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=gv(this,u),this.l=u+1,o=fy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(FE(gv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=gv(this,this.l),this.l++,n;case 2:return n=(t==="i"?KEe:Of)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?tp:GEe)(this,this.l),this.l+=4,n):(a=Ec(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=cS(this,this.l):a=cS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=GZ(this,this.l,e);break}}return this.l+=e,r}var qEe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},WEe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},XEe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function YEe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)XEe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,qEe(this,t,this.l);break;case 8:if(n=8,r==="f"){$Ee(this,t,this.l);break}case 16:break;case-4:n=4,WEe(this,t,this.l);break}return this.l+=n,this}function see(e,t){var r=GZ(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function po(e,t){e.l=t,e.read_shift=fy,e.chk=see,e.write_shift=YEe}function el(e,t){e.l+=t}function yt(e){var t=nm(e);return po(t,0),t}function hh(e,t,r){if(e){var n,a,s;po(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=ew[o]||ew[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;l=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=l,t(d,u,o))return}}}function ql(){var e=[],t=pn?256:2048,r=function(u){var d=yt(u);return po(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Gi(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=ew[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&TD(r)&&e.push(r)}}function hy(e,t,r){var n=Ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function _Q(e,t,r){var n=Ha(e);return n.s=hy(n.s,t.s,r),n.e=hy(n.e,t.s,r),n}function my(e,t){if(e.cRel&&e.c<0)for(e=Ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Ur(e);return!e.cRel&&e.cRel!=null&&(r=eCe(r)),!e.rRel&&e.rRel!=null&&(r=JEe(r)),r}function KB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+as(e.s.c)+":"+(e.e.cRel?"":"$")+as(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ws(e.s.r)+":"+(e.e.rRel?"":"$")+Ws(e.e.r):my(e.s,t.biff)+":"+my(e.e,t.biff)}function ID(e){return parseInt(ZEe(e),10)-1}function Ws(e){return""+(e+1)}function JEe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ZEe(e){return e.replace(/\$(\d+)$/,"$1")}function jD(e){for(var t=tCe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function as(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function eCe(e){return e.replace(/^([A-Z])/,"$$$1")}function tCe(e){return e.replace(/^\$([A-Z])/,"$1")}function rCe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ss(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Ur(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Xl(e){var t=e.indexOf(":");return t==-1?{s:ss(e),e:ss(e)}:{s:ss(e.slice(0,t)),e:ss(e.slice(t+1))}}function rn(e,t){return typeof t>"u"||typeof t=="number"?rn(e.s,e.e):(typeof e!="string"&&(e=Ur(e)),typeof t!="string"&&(t=Ur(t)),e==t?e:e+":"+t)}function Hn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function SQ(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ju(e.z,r?Ni(t):t)}catch{}try{return e.w=ju((e.XF||{}).numFmtId||(r?14:0),r?Ni(t):t)}catch{return""+t}}function Zf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?mh[e.v]||e.v:t==null?SQ(e,e.v):SQ(e,t))}function hm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function iee(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,v=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>v&&(u.s.c=v),u.e.r<g&&(u.e.r=g),u.e.c<v&&(u.e.c=v),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Dr[14],n.cellDates?(p.t="d",p.w=ju(p.z,Ni(p.v))):(p.t="n",p.v=Ni(p.v),p.w=ju(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][v]&&s[g][v].z&&(p.z=s[g][v].z),s[g][v]=p;else{var b=Ur({c:v,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=rn(u)),s}function e1(e,t){return iee(null,e,t)}function nCe(e){return e.read_shift(4,"i")}function Cd(e,t){return t||(t=yt(4)),t.write_shift(4,e),t}function Jo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Wi(e,t){var r=!1;return t==null&&(r=!0,t=yt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function aCe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function sCe(e,t){return t||(t=yt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function FD(e,t){var r=e.l,n=e.read_shift(1),a=Jo(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(aCe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function iCe(e,t){var r=!1;return t==null&&(r=!0,t=yt(15+4*e.t.length)),t.write_shift(1,0),Wi(e.t,t),r?t.slice(0,t.l):t}var oCe=FD;function lCe(e,t){var r=!1;return t==null&&(r=!0,t=yt(23+4*e.t.length)),t.write_shift(1,1),Wi(e.t,t),t.write_shift(4,1),sCe({},t),r?t.slice(0,t.l):t}function Du(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function tg(e,t){return t==null&&(t=yt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function rg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function ng(e,t){return t==null&&(t=yt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var cCe=Jo,oee=Wi;function OD(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function uS(e,t){var r=!1;return t==null&&(r=!0,t=yt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var uCe=Jo,$j=OD,DD=uS;function RD(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?cS([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):tp(t,0)>>2;return r?a/100:a}function lee(e,t){t==null&&(t=yt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function cee(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function dCe(e,t){return t||(t=yt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ag=cee,t1=dCe;function Xo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Lp(e,t){return(t||yt(8)).write_shift(8,e,"f")}function ACe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=gp[a];u&&(t.rgb=Xy(u));break;case 2:t.rgb=Xy([i,o,l]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function dS(e,t){if(t||(t=yt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function fCe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function hCe(e,t){t||(t=yt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function uee(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function mCe(e){return uee(e,1)}function pCe(e){return uee(e,2)}var PD=2,Ll=3,DE=11,NQ=12,AS=19,RE=64,gCe=65,vCe=71,xCe=4108,bCe=4126,Vi=80,dee=81,yCe=[Vi,dee],Kj={1:{n:"CodePage",t:PD},2:{n:"Category",t:Vi},3:{n:"PresentationFormat",t:Vi},4:{n:"ByteCount",t:Ll},5:{n:"LineCount",t:Ll},6:{n:"ParagraphCount",t:Ll},7:{n:"SlideCount",t:Ll},8:{n:"NoteCount",t:Ll},9:{n:"HiddenCount",t:Ll},10:{n:"MultimediaClipCount",t:Ll},11:{n:"ScaleCrop",t:DE},12:{n:"HeadingPairs",t:xCe},13:{n:"TitlesOfParts",t:bCe},14:{n:"Manager",t:Vi},15:{n:"Company",t:Vi},16:{n:"LinksUpToDate",t:DE},17:{n:"CharacterCount",t:Ll},19:{n:"SharedDoc",t:DE},22:{n:"HyperlinksChanged",t:DE},23:{n:"AppVersion",t:Ll,p:"version"},24:{n:"DigSig",t:gCe},26:{n:"ContentType",t:Vi},27:{n:"ContentStatus",t:Vi},28:{n:"Language",t:Vi},29:{n:"Version",t:Vi},255:{},2147483648:{n:"Locale",t:AS},2147483651:{n:"Behavior",t:AS},1919054434:{}},Gj={1:{n:"CodePage",t:PD},2:{n:"Title",t:Vi},3:{n:"Subject",t:Vi},4:{n:"Author",t:Vi},5:{n:"Keywords",t:Vi},6:{n:"Comments",t:Vi},7:{n:"Template",t:Vi},8:{n:"LastAuthor",t:Vi},9:{n:"RevNumber",t:Vi},10:{n:"EditTime",t:RE},11:{n:"LastPrinted",t:RE},12:{n:"CreatedDate",t:RE},13:{n:"ModifiedDate",t:RE},14:{n:"PageCount",t:Ll},15:{n:"WordCount",t:Ll},16:{n:"CharCount",t:Ll},17:{n:"Thumbnail",t:vCe},18:{n:"Application",t:Vi},19:{n:"DocSecurity",t:Ll},255:{},2147483648:{n:"Locale",t:AS},2147483651:{n:"Behavior",t:AS},1919054434:{}},kQ={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},wCe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ECe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var CCe=ECe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),gp=Ha(CCe),mh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Aee={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},qj={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},PE={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function LD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function _Ce(e){var t=LD();if(!e||!e.match)return t;var r={};if((e.match(rl)||[]).forEach(function(n){var a=$r(n);switch(a[0].replace(DEe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[qj[a.ContentType]]!==void 0&&t[qj[a.ContentType]].push(a.PartName);break}}),t.xmlns!==_i.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function fee(e,t){var r=_Ee(qj),n=[],a;n[n.length]=Ys,n[n.length]=Gt("Types",null,{xmlns:_i.CT,"xmlns:xsd":_i.xsd,"xmlns:xsi":_i.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Gt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){e[l]&&e[l].length>0&&(a=e[l][0],n[n.length]=Gt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:PE[l][t.bookType]||PE[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Gt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:PE[l][t.bookType]||PE[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Gt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var En={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Wy(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function py(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(rl)||[]).forEach(function(a){var s=$r(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Vb(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function Gv(e){var t=[Ys,Gt("Relationships",null,{xmlns:_i.RELS})];return Ts(e["!id"]).forEach(function(r){t[t.length]=Gt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ha(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[En.HLINK,En.XPATH,En.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var SCe="application/vnd.oasis.opendocument.spreadsheet";function NCe(e,t){for(var r=kD(e),n,a;n=qy.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=$r(n[0],!1),a.path=="/"&&a.type!==SCe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function kCe(e){var t=[Ys];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function BQ(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function BCe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function TCe(e){var t=[Ys];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(BQ(e[r][0],e[r][1])),t.push(BCe("",e[r][0]));return t.push(BQ("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function hee(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+aS.version+"</meta:generator></office:meta></office:document-meta>"}var Iu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],ICe=function(){for(var e=new Array(Iu.length),t=0;t<Iu.length;++t){var r=Iu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function mee(e){var t={};e=Ca(e);for(var r=0;r<Iu.length;++r){var n=Iu[r],a=e.match(ICe[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Qa(t[n[1]]))}return t}function GB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=ga(t),n[n.length]=r?Gt(e,t,r):go(e,t))}function pee(e,t){var r=t||{},n=[Ys,Gt("cp:coreProperties",null,{"xmlns:cp":_i.CORE_PROPS,"xmlns:dc":_i.dc,"xmlns:dcterms":_i.dcterms,"xmlns:dcmitype":_i.dcmitype,"xmlns:xsi":_i.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&GB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:zj(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&GB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:zj(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Iu.length;++s){var i=Iu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&GB(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var vp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],gee=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function vee(e,t,r,n){var a=[];if(typeof e=="string")a=xQ(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?xQ(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function jCe(e,t,r){var n={};return t||(t={}),e=Ca(e),vp.forEach(function(a){var s=(e.match(Ky(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Qn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&vee(n.HeadingPairs,n.TitlesOfParts,t,r),t}function xee(e){var t=[],r=Gt;return e||(e={}),e.Application="SheetJS",t[t.length]=Ys,t[t.length]=Gt("Properties",null,{xmlns:_i.EXT_PROPS,"xmlns:vt":_i.vt}),vp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ga(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ga(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var FCe=/<[^>]+>[^<]*/g;function OCe(e,t){var r={},n="",a=e.match(FCe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=$r(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=Ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function bee(e){var t=[Ys,Gt("Properties",null,{xmlns:_i.CUST_PROPS,"xmlns:vt":_i.vt})];if(!e)return t.join("");var r=1;return Ts(e).forEach(function(a){++r,t[t.length]=Gt("property",VEe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ga(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Wj={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},qB;function DCe(e,t,r){qB||(qB=kN(Wj)),t=qB[t]||t,e[t]=r}function RCe(e,t){var r=[];return Ts(Wj).map(function(n){for(var a=0;a<Iu.length;++a)if(Iu[a][1]==n)return Iu[a];for(a=0;a<vp.length;++a)if(vp[a][1]==n)return vp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(go(Wj[n[1]]||n[1],a))}}),Gt("DocumentProperties",r.join(""),{xmlns:wc.o})}function PCe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ts(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Iu.length;++i)if(s==Iu[i][1])return;for(i=0;i<vp.length;++i)if(s==vp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Gt(mQ(s),o,{"dt:dt":l}))}}),t&&Ts(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Gt(mQ(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+wc.o+'">'+a.join("")+"</"+n+">"}function MD(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function LCe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=yt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function yee(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function wee(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Eee(e,t,r){return t===31?wee(e):yee(e,t,r)}function Xj(e,t,r){return Eee(e,t,r===!1?0:4)}function MCe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Eee(e,t,0)}function UCe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(vl,""),e.l-a&2&&(e.l+=2)}return r}function QCe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(vl,"");return r}function HCe(e){var t=e.l,r=fS(e,dee);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=fS(e,Ll);return[r,n]}function VCe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(HCe(e));return r}function TQ(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(vl,"").replace(Hb,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Cee(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function zCe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function fS(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==NQ&&n!==t&&yCe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===NQ?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return yee(e,n,4).replace(vl,"");case 31:return wee(e);case 64:return MD(e);case 65:return Cee(e);case 71:return zCe(e);case 80:return Xj(e,n,!s.raw).replace(vl,"");case 81:return MCe(e,n).replace(vl,"");case 4108:return VCe(e);case 4126:case 4127:return n==4127?UCe(e):QCe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function IQ(e,t){var r=yt(4),n=yt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=yt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=LCe(t);break;case 31:case 80:for(n=yt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Gi([r,n])}function jQ(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,l=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(_,S){return _[1]-S[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=fS(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:gd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=fS(e,PD),gd(o),l!==-1){var v=e.l;e.l=s[l][1],u=TQ(e,o),e.l=v}}else if(s[i][0]===0){if(o===0){l=i,e.l=s[i+1][1];continue}u=TQ(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Cee(e);break;case 30:e.l+=4,y=Xj(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=Xj(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Qs(e,4);break;case 64:e.l+=4,y=Qa(MD(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var _ee=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function $Ce(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function FQ(e,t,r){var n=yt(8),a=[],s=[],i=8,o=0,l=yt(8),u=yt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),a.push(u),i+=8+l.length,!t){u=yt(8),u.write_shift(4,0),a.unshift(u);var d=[yt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=yt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Gi(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(_ee.indexOf(e[o][0])>-1||gee.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var v=h.split(".");h=(+v[0]<<16)+(+v[1]||0)}l=IQ(g.t,h)}else{var b=$Ce(h);b==-1&&(b=31,h=String(h)),l=IQ(b,h)}s.push(l),u=yt(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+l.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Gi([n].concat(a).concat(s))}function OQ(e,t,r){var n=e.content;if(!n)return{};po(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Er.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=jQ(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var g;try{g=jQ(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function DQ(e,t,r,n,a,s){var i=yt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Er.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=FQ(e,r,n);if(o.push(l),a){var u=FQ(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Gi(o)}function a0(e,t){return e.read_shift(t),null}function KCe(e,t){t||(t=yt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function GCe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Qs(e,t){return e.read_shift(t)===1}function Al(e,t){return t||(t=yt(2)),t.write_shift(2,+!!e),t}function ci(e){return e.read_shift(2,"u")}function bu(e,t){return t||(t=yt(2)),t.write_shift(2,e),t}function See(e,t){return GCe(e,t,ci)}function qCe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Nee(e,t,r){return r||(r=yt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Vw(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function WCe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,l={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function XCe(e){var t=e.t||"",r=yt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=yt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Gi(a)}function Mp(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function zw(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Mp(e,n,r)}function sg(e,t,r){if(r.biff>5)return zw(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function kee(e,t,r){return r||(r=yt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function YCe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function JCe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(vl,"");return n&&(e.l+=24),a}function ZCe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(vl,"");return r+i}function e_e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return JCe(e);case"0303000000000000c000000000000046":return ZCe(e);default:throw new Error("Unsupported Moniker "+r)}}function LE(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(vl,""):"";return r}function RQ(e,t){t||(t=yt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function t_e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,l,u="",d,f;a&16&&(s=LE(e,r-e.l)),a&128&&(i=LE(e,r-e.l)),(a&257)===257&&(o=LE(e,r-e.l)),(a&257)===1&&(l=e_e(e,r-e.l)),a&8&&(u=LE(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=MD(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function r_e(e){var t=yt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),RQ(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&RQ(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Bee(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Tee(e,t){var r=Bee(e);return r[3]=0,r}function zA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Up(e,t,r,n){return n||(n=yt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function n_e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function a_e(e,t,r){return t===0?"":sg(e,t,r)}function s_e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function Iee(e){var t=e.read_shift(2),r=RD(e);return[t,r]}function i_e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=Vw(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function IN(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function jee(e,t){return t||(t=yt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Fee(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var o_e=Fee;function Oee(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function l_e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function c_e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Po(e){e.l+=2,e.l+=e.read_shift(2)}var u_e={0:Po,4:Po,5:Po,6:Po,7:c_e,8:Po,9:Po,10:Po,11:Po,12:Po,13:l_e,14:Po,15:Po,16:Po,17:Po,18:Po,19:Po,20:Po,21:Oee};function d_e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(u_e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function ME(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function UD(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=yt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function A_e(e,t){return t===0||e.read_shift(2),1200}function f_e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=sg(e,0,r);return e.read_shift(t+n-e.l),a}function h_e(e,t){var r=!t||t.biff==8,n=yt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function m_e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function p_e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=Vw(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function g_e(e,t){var r=!t||t.biff>=8?2:1,n=yt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function v_e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(WCe(e));return s.Count=n,s.Unique=a,s}function x_e(e,t){var r=yt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=XCe(e[a]);var s=Gi([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function b_e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function y_e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function w_e(e){var t=n_e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function E_e(e){return e.read_shift(2),e.read_shift(4)}function PQ(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function C_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function __e(){var e=yt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function S_e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function N_e(e){var t=yt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function k_e(){}function B_e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Vw(e,0,r),n}function T_e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=yt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function I_e(e){var t=zA(e);return t.isst=e.read_shift(4),t}function j_e(e,t,r,n){var a=yt(10);return Up(e,t,n,a),a.write_shift(4,r),a}function F_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=zA(e);r.biff==2&&e.l++;var s=zw(e,n-e.l,r);return a.val=s,a}function O_e(e,t,r,n,a){var s=!a||a.biff==8,i=yt(8+ +s+(1+s)*r.length);return Up(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function D_e(e,t,r){var n=e.read_shift(2),a=sg(e,0,r);return[n,a]}function R_e(e,t,r,n){var a=r&&r.biff==5;n||(n=yt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var P_e=sg;function LQ(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function L_e(e,t){var r=t.biff==8||!t.biff?4:2,n=yt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function M_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Iee(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function U_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(Iee(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function Q_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function H_e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=wCe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function V_e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=H_e(e,t,n.fStyle,r),n}function MQ(e,t,r,n){var a=r&&r.biff==5;n||(n=yt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function z_e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function $_e(e){var t=yt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function UQ(e,t,r){var n=zA(e);(r.biff==2||t==9)&&++e.l;var a=qCe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function K_e(e,t,r,n,a,s){var i=yt(8);return Up(e,t,n,i),Nee(r,s,i),i}function G_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=zA(e),a=Xo(e);return n.val=a,n}function q_e(e,t,r,n){var a=yt(14);return Up(e,t,n,a),Lp(r,a),a}var QQ=a_e;function W_e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Mp(e,s),o=[];n>e.l;)o.push(zw(e));return[s,a,i,o]}function HQ(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=i_e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var X_e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function VQ(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Mp(e,i,r);a&32&&(u=X_e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:dke(e,d,r,o);return{chKey:s,Name:u,itab:l,rgce:f}}function Dee(e,t,r){if(r.biff<8)return Y_e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(s_e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function Y_e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Vw(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function J_e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Mp(e,n,r),i=Mp(e,a,r);return[s,i]}function Z_e(e,t,r){var n=Fee(e);e.l++;var a=e.read_shift(1);return t-=8,[Ake(e,t,r),a,n]}function zQ(e,t,r){var n=o_e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,cke(e,t,r)]}function eSe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function tSe(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=sg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function rSe(e,t,r){return tSe(e,t,r)}function nSe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(IN(e));return r}function aSe(e){var t=yt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)jee(e[r],t);return t}function sSe(e,t,r){if(r&&r.biff<8)return oSe(e,t,r);var n=Oee(e),a=d_e(e,t-22,n[1]);return{cmo:n,ft:a}}var iSe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function oSe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((iSe[n]||el)(e,t,r)),{cmo:[a,n,s],ft:i}}function lSe(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=YCe(e,6,r);var o=e.read_shift(2);e.read_shift(2),ci(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Mp(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function cSe(e,t){var r=IN(e);e.l+=16;var n=t_e(e,t-24);return[r,n]}function uSe(e){var t=yt(24),r=ss(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Gi([t,r_e(e[1])])}function dSe(e,t){e.read_shift(2);var r=IN(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(vl,""),[r,n]}function ASe(e){var t=e[1].Tooltip,r=yt(10+2*(t.length+1));r.write_shift(2,2048);var n=ss(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function fSe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=kQ[r]||r,r=e.read_shift(2),t[1]=kQ[r]||r,t}function hSe(e){return e||(e=yt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function mSe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Tee(e));return r}function pSe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Tee(e));return r}function gSe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Ree(e,t,r){if(!r.cellStyles)return el(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function vSe(e,t){var r=yt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function xSe(e,t){var r={};return t<32||(e.l+=16,r.header=Xo(e),r.footer=Xo(e),e.l+=2),r}function bSe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function ySe(e){for(var t=yt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var wSe=zA,ESe=See,CSe=zw;function _Se(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function SSe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=zA(e);++e.l;var a=sg(e,t-7,r);return n.t="str",n.val=a,n}function NSe(e){var t=zA(e);++e.l;var r=Xo(e);return t.t="n",t.val=r,t}function kSe(e,t,r){var n=yt(15);return qw(n,e,t),n.write_shift(8,r,"f"),n}function BSe(e){var t=zA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function TSe(e,t,r){var n=yt(9);return qw(n,e,t),n.write_shift(2,r),n}function ISe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function jSe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function FSe(e,t,r){var n=e.l+t,a=zA(e),s=e.read_shift(2),i=Mp(e,s,r);return e.l=n,a.t="str",a.val=i,a}var OSe=[2,3,48,49,131,139,140,245],Yj=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=kN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=nm(1);switch(l.type){case"base64":d=Sc(Oc(o));break;case"binary":d=Sc(o);break;case"buffer":case"array":d=o;break}po(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,b=521;f==2&&(v=d.read_shift(2)),d.l+=3,f!=2&&(v=d.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),_=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(_=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var S=[],k={},B=Math.min(d.length,f==2?521:b-10-(p?264:0)),F=g?32:11;d.l<B&&d[d.l]!=13;)switch(k={},k.name=Vy.utils.decode(_,d.slice(d.l,d.l+F)).replace(/[\u0000\r\n].*$/g,""),d.l+=F,k.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(k.offset=d.read_shift(4)),k.len=d.read_shift(1),f==2&&(k.offset=d.read_shift(2)),k.dec=d.read_shift(1),k.name.length&&S.push(k),f!=2&&(d.l+=g?13:14),k.type){case"B":(!p||k.len!=8)&&l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var w=0,C=0;for(u[0]=[],C=0;C!=S.length;++C)u[0][C]=S[C].name;for(;v-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++w]=[],C=0,C=0;C!=S.length;++C){var N=d.slice(d.l,d.l+S[C].len);d.l+=S[C].len,po(N,0);var P=Vy.utils.decode(_,N);switch(S[C].type){case"C":P.trim().length&&(u[w][C]=P.replace(/\s+$/,""));break;case"D":P.length===8?u[w][C]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):u[w][C]=P;break;case"F":u[w][C]=parseFloat(P.trim());break;case"+":case"I":u[w][C]=g?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":u[w][C]=!0;break;case"N":case"F":u[w][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[w][C]="##MEMO##"+(g?parseInt(P.trim(),10):N.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(u[w][C]=+P||0);break;case"@":u[w][C]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[w][C]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[w][C]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[w][C]=-N.read_shift(-8,"f");break;case"B":if(p&&S[C].len==8){u[w][C]=N.read_shift(8,"f");break}case"G":case"P":N.l+=S[C].len;break;case"0":if(S[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[C].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=S,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=e1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,l){try{return hm(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&gd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ql(),f=pS(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],v=0,b=0,y=0,_=1;for(v=0;v<h.length;++v){if(((g[v]||{}).DBF||{}).name){h[v]=g[v].DBF.name,++y;continue}if(h[v]!=null){if(++y,typeof h[v]=="number"&&(h[v]=h[v].toString(10)),typeof h[v]!="string")throw new Error("DBF Invalid column name "+h[v]+" |"+typeof h[v]+"|");if(h.indexOf(h[v])!==v){for(b=0;b<1024;++b)if(h.indexOf(h[v]+"_"+b)==-1){h[v]+="_"+b;break}}}}var S=Hn(o["!ref"]),k=[],B=[],F=[];for(v=0;v<=S.e.c-S.s.c;++v){var w="",C="",N=0,P=[];for(b=0;b<p.length;++b)p[b][v]!=null&&P.push(p[b][v]);if(P.length==0||h[v]==null){k[v]="?";continue}for(b=0;b<P.length;++b){switch(typeof P[b]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=P[b]instanceof Date?"D":"C";break;default:C="C"}N=Math.max(N,String(P[b]).length),w=w&&w!=C?"C":C}N>250&&(N=250),C=((g[v]||{}).DBF||{}).type,C=="C"&&g[v].DBF.len>N&&(N=g[v].DBF.len),w=="B"&&C=="N"&&(w="N",F[v]=g[v].DBF.dec,N=g[v].DBF.len),B[v]=w=="C"||C=="N"?N:s[w]||0,_+=B[v],k[v]=w}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*y),D.write_shift(2,_),v=0;v<4;++v)D.write_shift(4,0);for(D.write_shift(4,0|(+t[_Z]||3)<<8),v=0,b=0;v<h.length;++v)if(h[v]!=null){var T=d.next(32),U=(h[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,U,"sbcs"),T.write_shift(1,k[v]=="?"?"C":k[v],"sbcs"),T.write_shift(4,b),T.write_shift(1,B[v]||s[k[v]]||0),T.write_shift(1,F[v]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),b+=B[v]||s[k[v]]||0}var R=d.next(264);for(R.write_shift(4,13),v=0;v<65;++v)R.write_shift(4,0);for(v=0;v<p.length;++v){var X=d.next(_);for(X.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(k[b]){case"L":X.write_shift(1,p[v][b]==null?63:p[v][b]?84:70);break;case"B":X.write_shift(8,p[v][b]||0,"f");break;case"N":var q="0";for(typeof p[v][b]=="number"&&(q=p[v][b].toFixed(F[b]||0)),y=0;y<B[b]-q.length;++y)X.write_shift(1,32);X.write_shift(1,q,"sbcs");break;case"D":p[v][b]?(X.write_shift(4,("0000"+p[v][b].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(p[v][b].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+p[v][b].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(p[v][b]!=null?p[v][b]:"").slice(0,B[b]);for(X.write_shift(1,Z,"sbcs"),y=0;y<B[b]-Z.length;++y)X.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),Pee=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ts(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?tQ(g):g},n=function(h,p,g){var v=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return v==59?h:tQ(v)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(Oc(h),p);case"binary":return s(h,p);case"buffer":return s(pn&&Buffer.isBuffer(h)?h.toString("binary"):fm(h),p);case"array":return s(Pp(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),v=-1,b=-1,y=0,_=0,S=[],k=[],B=null,F={},w=[],C=[],N=[],P=0,D;for(+p.codepage>=0&&gd(+p.codepage);y!==g.length;++y){P=0;var T=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),U=T.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),R=U[0],X;if(T.length>0)switch(R){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&k.push(T.slice(3).replace(/;;/g,";"));break;case"C":var q=!1,Z=!1,H=!1,V=!1,K=-1,ne=-1;for(_=1;_<U.length;++_)switch(U[_].charAt(0)){case"A":break;case"X":b=parseInt(U[_].slice(1))-1,Z=!0;break;case"Y":for(v=parseInt(U[_].slice(1))-1,Z||(b=0),D=S.length;D<=v;++D)S[D]=[];break;case"K":X=U[_].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(Ed(X))?isNaN(hx(X).getDate())||(X=Qa(X)):(X=Ed(X),B!==null&&Jx(B)&&(X=TN(X))),q=!0;break;case"E":V=!0;var L=qv(U[_].slice(1),{r:v,c:b});S[v][b]=[S[v][b],L];break;case"S":H=!0,S[v][b]=[S[v][b],"S5S"];break;case"G":break;case"R":K=parseInt(U[_].slice(1))-1;break;case"C":ne=parseInt(U[_].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+T)}if(q&&(S[v][b]&&S[v][b].length==2?S[v][b][0]=X:S[v][b]=X,B=null),H){if(V)throw new Error("SYLK shared formula cannot have own formula");var W=K>-1&&S[K][ne];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");S[v][b][1]=tte(W[1],{r:v-K,c:b-ne})}break;case"F":var J=0;for(_=1;_<U.length;++_)switch(U[_].charAt(0)){case"X":b=parseInt(U[_].slice(1))-1,++J;break;case"Y":for(v=parseInt(U[_].slice(1))-1,D=S.length;D<=v;++D)S[D]=[];break;case"M":P=parseInt(U[_].slice(1))/20;break;case"F":break;case"G":break;case"P":B=k[parseInt(U[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=U[_].slice(1).split(" "),D=parseInt(N[0],10);D<=parseInt(N[1],10);++D)P=parseInt(N[2],10),C[D-1]=P===0?{hidden:!0}:{wch:P},am(C[D-1]);break;case"C":b=parseInt(U[_].slice(1))-1,C[b]||(C[b]={});break;case"R":v=parseInt(U[_].slice(1))-1,w[v]||(w[v]={}),P>0?(w[v].hpt=P,w[v].hpx=px(P)):P===0&&(w[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+T)}J<1&&(B=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+T)}}return w.length>0&&(F["!rows"]=w),C.length>0&&(F["!cols"]=C),p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),[S,F]}function i(h,p){var g=a(h,p),v=g[0],b=g[1],y=e1(v,p);return Ts(b).forEach(function(_){y[_]=b[_]}),y}function o(h,p){return hm(i(h,p),p)}function l(h,p,g,v){var b="C;Y"+(g+1)+";X"+(v+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+KD(h.f,{r:g,c:v}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,v){var b="F;W"+(v+1)+" "+(v+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Yy(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Jy(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,v){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*Zy(g.hpx)+";"),b.length>2&&h.push(b+"R"+(v+1))})}function f(h,p){var g=["ID;PWXL;N;E"],v=[],b=Hn(h["!ref"]),y,_=Array.isArray(h),S=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var k=b.s.r;k<=b.e.r;++k)for(var B=b.s.c;B<=b.e.c;++B){var F=Ur({r:k,c:B});y=_?(h[k]||[])[B]:h[F],!(!y||y.v==null&&(!y.f||y.F))&&v.push(l(y,h,k,B))}return g.join(S)+S+v.join(S)+S+"E"+S}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),Lee=function(){function e(s,i){switch(i.type){case"base64":return t(Oc(s),i);case"binary":return t(s,i);case"buffer":return t(pn&&Buffer.isBuffer(s)?s.toString("binary"):fm(s),i);case"array":return t(Pp(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var v=o[d]||"";(v.match(/["]/g)||[]).length&1&&d<o.length-1;)v+=`
`+o[++d];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++l]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][u]=!0:v==="FALSE"?f[l][u]=!1:isNaN(Ed(g))?isNaN(hx(g).getDate())?f[l][u]=g:f[l][u]=Qa(g):f[l][u]=Ed(g),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][u++]=v!==""?v:null;break}if(v==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return e1(e(s,i),i)}function n(s,i){return hm(r(s,i),i)}var a=function(){var s=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=Hn(l["!ref"]),f,h=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var v=Ur({r:p,c:g});if(f=h?(l[p]||[])[g]:l[v],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ju(f.z||Dr[14],Ni(Qa(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,_=u.join(y);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Mee=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,v=-1,b=0,y=[];b!==p.length;++b){var _=p[b].trim().split(":");if(_[0]==="cell"){var S=ss(_[1]);if(y.length<=S.r)for(g=y.length;g<=S.r;++g)y[g]||(y[g]=[]);switch(g=S.r,v=S.c,_[2]){case"t":y[g][v]=e(_[3]);break;case"v":y[g][v]=+_[3];break;case"vtf":var k=_[_.length-1];case"vtc":switch(_[3]){case"nl":y[g][v]=!!+_[4];break;default:y[g][v]=+_[4];break}_[2]=="vtf"&&(y[g][v]=[y[g][v],k])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return e1(r(f,h),h)}function a(f,h){return hm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,v="",b=Xl(f["!ref"]),y=Array.isArray(f),_=b.s.r;_<=b.e.r;++_)for(var S=b.s.c;S<=b.e.c;++S)if(v=Ur({r:_,c:S}),g=y?(f[_]||[])[S]:f[v],!(!g||g.v==null||g.t==="z")){switch(p=["cell",v,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var k=Ni(Qa(g.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=g.w||ju(g.z||Dr[14],k);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),mx=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Ed(d))?isNaN(hx(d).getDate())?f[h][p]=d:f[h][p]=Qa(d):f[h][p]=Ed(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),v=g.length-1;v>=0&&g[v].length===0;)--v;for(var b=10,y=0,_=0;_<=v;++_)y=g[_].indexOf(" "),y==-1?y=g[_].length:y++,b=Math.max(b,y);for(_=0;_<=v;++_){p[_]=[];var S=0;for(e(g[_].slice(0,b).trim(),p,_,S,h),S=1;S<=(g[_].length-b)/10+1;++S)e(g[_].slice(b+(S-1)*10,b+S*10).trim(),p,_,S,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(v,b){return v[0]-b[0]||n[v[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,_=0,S=0,k=0,B=p.charCodeAt(0),F=!1,w=0,C=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=h.dateNF!=null?bEe(h.dateNF):null;function P(){var D=d.slice(S,k),T={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)T.t="z";else if(h.raw)T.t="s",T.v=D;else if(D.trim().length===0)T.t="s",T.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(T.t="s",T.v=D.slice(2,-1).replace(/""/g,'"')):WNe(D)?(T.t="n",T.f=D.slice(1)):(T.t="s",T.v=D);else if(D=="TRUE")T.t="b",T.v=!0;else if(D=="FALSE")T.t="b",T.v=!1;else if(!isNaN(_=Ed(D)))T.t="n",h.cellText!==!1&&(T.w=D),T.v=_;else if(!isNaN(hx(D).getDate())||N&&D.match(N)){T.z=h.dateNF||Dr[14];var U=0;N&&D.match(N)&&(D=yEe(D,h.dateNF,D.match(N)||[]),U=1),h.cellDates?(T.t="d",T.v=Qa(D,U)):(T.t="n",T.v=Ni(Qa(D,U))),h.cellText!==!1&&(T.w=ju(T.z,T.v instanceof Date?Ni(T.v):T.v)),h.cellNF||delete T.z}else T.t="s",T.v=D;if(T.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=T):g[Ur({c:y,r:b})]=T),S=k+1,C=d.charCodeAt(S),v.e.c<y&&(v.e.c=y),v.e.r<b&&(v.e.r=b),w==B)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;k<d.length;++k)switch(w=d.charCodeAt(k)){case 34:C===34&&(F=!F);break;case B:case 10:case 13:if(!F&&P())break e;break}return k-S>0&&P(),g["!ref"]=rn(v),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):e1(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:eR(d,f);switch(f.type){case"base64":h=Oc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Vy<"u"||(h=pn&&Buffer.isBuffer(d)?d.toString("binary"):fm(d));break;case"array":h=Pp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ca(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ca(h):f.type=="binary"&&typeof Vy<"u",h.slice(0,19)=="socialcalc:version:"?Mee.to_sheet(f.type=="string"?h:Ca(h),f):i(h,f)}function l(d,f){return hm(o(d,f),f)}function u(d){for(var f=[],h=Hn(d["!ref"]),p,g=Array.isArray(d),v=h.s.r;v<=h.e.r;++v){for(var b=[],y=h.s.c;y<=h.e.c;++y){var _=Ur({r:v,c:y});if(p=g?(d[v]||[])[y]:d[_],!p||p.v==null){b.push("          ");continue}for(var S=(p.w||(Zf(p),p.w)||"").slice(0,10);S.length<10;)S+=" ";b.push(S+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function DSe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Pee.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return mx.to_workbook(e,t)}}var xp=function(){function e(L,W,J){if(L){po(L,L.l||0);for(var te=J.Enum||K;L.l<L.length;){var ie=L.read_shift(2),Ae=te[ie]||te[65535],oe=L.read_shift(2),ce=L.l+oe,ge=Ae.f&&Ae.f(L,oe,J);if(L.l=ce,W(ge,Ae,ie))return}}}function t(L,W){switch(W.type){case"base64":return r(Sc(Oc(L)),W);case"binary":return r(Sc(L),W);case"buffer":case"array":return r(L,W)}throw"Unsupported type "+W.type}function r(L,W){if(!L)return L;var J=W||{},te=J.dense?[]:{},ie="Sheet1",Ae="",oe=0,ce={},ge=[],je=[],re={s:{r:0,c:0},e:{r:0,c:0}},Se=J.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)J.Enum=K,e(L,function(Ie,He,Xe){switch(Xe){case 0:J.vers=Ie,Ie>=4096&&(J.qpro=!0);break;case 6:re=Ie;break;case 204:Ie&&(Ae=Ie);break;case 222:Ae=Ie;break;case 15:case 51:J.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=J.dateNF||Dr[14],J.cellDates&&(Ie[1].t="d",Ie[1].v=TN(Ie[1].v))),J.qpro&&Ie[3]>oe&&(te["!ref"]=rn(re),ce[ie]=te,ge.push(ie),te=J.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ie=Ae||"Sheet"+(oe+1),Ae="");var ye=J.dense?(te[Ie[0].r]||[])[Ie[0].c]:te[Ur(Ie[0])];if(ye){ye.t=Ie[1].t,ye.v=Ie[1].v,Ie[1].z!=null&&(ye.z=Ie[1].z),Ie[1].f!=null&&(ye.f=Ie[1].f);break}J.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Ur(Ie[0])]=Ie[1];break}},J);else if(L[2]==26||L[2]==14)J.Enum=ne,L[2]==14&&(J.qpro=!0,L.l=0),e(L,function(Ie,He,Xe){switch(Xe){case 204:ie=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>oe&&(te["!ref"]=rn(re),ce[ie]=te,ge.push(ie),te=J.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ie="Sheet"+(oe+1)),Se>0&&Ie[0].r>=Se)break;J.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Ur(Ie[0])]=Ie[1],re.e.c<Ie[0].c&&(re.e.c=Ie[0].c),re.e.r<Ie[0].r&&(re.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(je[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:je[Ie[0]]=Ie[1],Ie[0]==oe&&(ie=Ie[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(te["!ref"]=rn(re),ce[Ae||ie]=te,ge.push(Ae||ie),!je.length)return{SheetNames:ge,Sheets:ce};for(var De={},_e=[],he=0;he<je.length;++he)ce[ge[he]]?(_e.push(je[he]||ge[he]),De[je[he]]=ce[je[he]]||ce[ge[he]]):(_e.push(je[he]),De[je[he]]={"!ref":"A1"});return{SheetNames:_e,Sheets:De}}function n(L,W){var J=W||{};if(+J.codepage>=0&&gd(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var te=ql(),ie=Hn(L["!ref"]),Ae=Array.isArray(L),oe=[];qt(te,0,s(1030)),qt(te,6,l(ie));for(var ce=Math.min(ie.e.r,8191),ge=ie.s.r;ge<=ce;++ge)for(var je=Ws(ge),re=ie.s.c;re<=ie.e.c;++re){ge===ie.s.r&&(oe[re]=as(re));var Se=oe[re]+je,De=Ae?(L[ge]||[])[re]:L[Se];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?qt(te,13,p(ge,re,De.v)):qt(te,14,v(ge,re,De.v));else{var _e=Zf(De);qt(te,15,f(ge,re,_e.slice(0,239)))}}return qt(te,1),te.end()}function a(L,W){var J=W||{};if(+J.codepage>=0&&gd(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var te=ql();qt(te,0,i(L));for(var ie=0,Ae=0;ie<L.SheetNames.length;++ie)(L.Sheets[L.SheetNames[ie]]||{})["!ref"]&&qt(te,27,V(L.SheetNames[ie],Ae++));var oe=0;for(ie=0;ie<L.SheetNames.length;++ie){var ce=L.Sheets[L.SheetNames[ie]];if(!(!ce||!ce["!ref"])){for(var ge=Hn(ce["!ref"]),je=Array.isArray(ce),re=[],Se=Math.min(ge.e.r,8191),De=ge.s.r;De<=Se;++De)for(var _e=Ws(De),he=ge.s.c;he<=ge.e.c;++he){De===ge.s.r&&(re[he]=as(he));var Ie=re[he]+_e,He=je?(ce[De]||[])[he]:ce[Ie];if(!(!He||He.t=="z"))if(He.t=="n")qt(te,23,P(De,he,oe,He.v));else{var Xe=Zf(He);qt(te,22,w(De,he,oe,Xe.slice(0,239)))}}++oe}}return qt(te,1),te.end()}function s(L){var W=yt(2);return W.write_shift(2,L),W}function i(L){var W=yt(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var J=0,te=0,ie=0,Ae=0;Ae<L.SheetNames.length;++Ae){var oe=L.SheetNames[Ae],ce=L.Sheets[oe];if(!(!ce||!ce["!ref"])){++ie;var ge=Xl(ce["!ref"]);J<ge.e.r&&(J=ge.e.r),te<ge.e.c&&(te=ge.e.c)}}return J>8191&&(J=8191),W.write_shift(2,J),W.write_shift(1,ie),W.write_shift(1,te),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(L,W,J){var te={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&J.qpro?(te.s.c=L.read_shift(1),L.l++,te.s.r=L.read_shift(2),te.e.c=L.read_shift(1),L.l++,te.e.r=L.read_shift(2),te):(te.s.c=L.read_shift(2),te.s.r=L.read_shift(2),W==12&&J.qpro&&(L.l+=2),te.e.c=L.read_shift(2),te.e.r=L.read_shift(2),W==12&&J.qpro&&(L.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(L){var W=yt(8);return W.write_shift(2,L.s.c),W.write_shift(2,L.s.r),W.write_shift(2,L.e.c),W.write_shift(2,L.e.r),W}function u(L,W,J){var te=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(te[0].c=L.read_shift(1),te[3]=L.read_shift(1),te[0].r=L.read_shift(2),L.l+=2):(te[2]=L.read_shift(1),te[0].c=L.read_shift(2),te[0].r=L.read_shift(2)),te}function d(L,W,J){var te=L.l+W,ie=u(L,W,J);if(ie[1].t="s",J.vers==20768){L.l++;var Ae=L.read_shift(1);return ie[1].v=L.read_shift(Ae,"utf8"),ie}return J.qpro&&L.l++,ie[1].v=L.read_shift(te-L.l,"cstr"),ie}function f(L,W,J){var te=yt(7+J.length);te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,L),te.write_shift(1,39);for(var ie=0;ie<te.length;++ie){var Ae=J.charCodeAt(ie);te.write_shift(1,Ae>=128?95:Ae)}return te.write_shift(1,0),te}function h(L,W,J){var te=u(L,W,J);return te[1].v=L.read_shift(2,"i"),te}function p(L,W,J){var te=yt(7);return te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,L),te.write_shift(2,J,"i"),te}function g(L,W,J){var te=u(L,W,J);return te[1].v=L.read_shift(8,"f"),te}function v(L,W,J){var te=yt(13);return te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,L),te.write_shift(8,J,"f"),te}function b(L,W,J){var te=L.l+W,ie=u(L,W,J);if(ie[1].v=L.read_shift(8,"f"),J.qpro)L.l=te;else{var Ae=L.read_shift(2);k(L.slice(L.l,L.l+Ae),ie),L.l+=Ae}return ie}function y(L,W,J){var te=W&32768;return W&=-32769,W=(te?L:0)+(W>=8192?W-16384:W),(te?"":"$")+(J?as(W):Ws(W))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(L,W){po(L,0);for(var J=[],te=0,ie="",Ae="",oe="",ce="";L.l<L.length;){var ge=L[L.l++];switch(ge){case 0:J.push(L.read_shift(8,"f"));break;case 1:Ae=y(W[0].c,L.read_shift(2),!0),ie=y(W[0].r,L.read_shift(2),!1),J.push(Ae+ie);break;case 2:{var je=y(W[0].c,L.read_shift(2),!0),re=y(W[0].r,L.read_shift(2),!1);Ae=y(W[0].c,L.read_shift(2),!0),ie=y(W[0].r,L.read_shift(2),!1),J.push(je+re+":"+Ae+ie)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(L.read_shift(2));break;case 6:{for(var Se="";ge=L[L.l++];)Se+=String.fromCharCode(ge);J.push('"'+Se.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:ce=J.pop(),oe=J.pop(),J.push(["AND","OR"][ge-20]+"("+oe+","+ce+")");break;default:if(ge<32&&S[ge])ce=J.pop(),oe=J.pop(),J.push(oe+S[ge]+ce);else if(_[ge]){if(te=_[ge][1],te==69&&(te=L[L.l++]),te>J.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+J.join("|")+"|");return}var De=J.slice(-te);J.length-=te,J.push(_[ge][0]+"("+De.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}J.length==1?W[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function B(L){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=L.read_shift(2),W[3]=L[L.l++],W[0].c=L[L.l++],W}function F(L,W){var J=B(L);return J[1].t="s",J[1].v=L.read_shift(W-4,"cstr"),J}function w(L,W,J,te){var ie=yt(6+te.length);ie.write_shift(2,L),ie.write_shift(1,J),ie.write_shift(1,W),ie.write_shift(1,39);for(var Ae=0;Ae<te.length;++Ae){var oe=te.charCodeAt(Ae);ie.write_shift(1,oe>=128?95:oe)}return ie.write_shift(1,0),ie}function C(L,W){var J=B(L);J[1].v=L.read_shift(2);var te=J[1].v>>1;if(J[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return J[1].v=te,J}function N(L,W){var J=B(L),te=L.read_shift(4),ie=L.read_shift(4),Ae=L.read_shift(2);if(Ae==65535)return te===0&&ie===3221225472?(J[1].t="e",J[1].v=15):te===0&&ie===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var oe=Ae&32768;return Ae=(Ae&32767)-16446,J[1].v=(1-oe*2)*(ie*Math.pow(2,Ae+32)+te*Math.pow(2,Ae)),J}function P(L,W,J,te){var ie=yt(14);if(ie.write_shift(2,L),ie.write_shift(1,J),ie.write_shift(1,W),te==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var Ae=0,oe=0,ce=0,ge=0;return te<0&&(Ae=1,te=-te),oe=Math.log2(te)|0,te/=Math.pow(2,oe-31),ge=te>>>0,(ge&2147483648)==0&&(te/=2,++oe,ge=te>>>0),te-=ge,ge|=2147483648,ge>>>=0,te*=Math.pow(2,32),ce=te>>>0,ie.write_shift(4,ce),ie.write_shift(4,ge),oe+=16383+(Ae?32768:0),ie.write_shift(2,oe),ie}function D(L,W){var J=N(L);return L.l+=W-14,J}function T(L,W){var J=B(L),te=L.read_shift(4);return J[1].v=te>>6,J}function U(L,W){var J=B(L),te=L.read_shift(8,"f");return J[1].v=te,J}function R(L,W){var J=U(L);return L.l+=W-10,J}function X(L,W){return L[L.l+W-1]==0?L.read_shift(W,"cstr"):""}function q(L,W){var J=L[L.l++];J>W-1&&(J=W-1);for(var te="";te.length<J;)te+=String.fromCharCode(L[L.l++]);return te}function Z(L,W,J){if(!(!J.qpro||W<21)){var te=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var ie=L.read_shift(W-21,"cstr");return[te,ie]}}function H(L,W){for(var J={},te=L.l+W;L.l<te;){var ie=L.read_shift(2);if(ie==14e3){for(J[ie]=[0,""],J[ie][0]=L.read_shift(2);L[L.l];)J[ie][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return J}function V(L,W){var J=yt(5+L.length);J.write_shift(2,14e3),J.write_shift(2,W);for(var te=0;te<L.length;++te){var ie=L.charCodeAt(te);J[J.l++]=ie>127?95:ie}return J[J.l++]=0,J}var K={0:{n:"BOF",f:ci},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:q},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:R},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function RSe(e){var t={},r=e.match(rl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=$r(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=gD[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var PSe=function(){var e=Ky("t"),t=Ky("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Qn(i[1])},l=s.match(t);return l&&(o.s=RSe(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),LSe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),MSe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,USe=/<(?:\w+:)?r>/,QSe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function QD(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Ca(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ca(e),r&&(n.h=ND(n.t))):e.match(USe)&&(n.r=Ca(e),n.t=Qn(Ca((e.replace(QSe,"").match(MSe)||[]).join("").replace(rl,""))),r&&(n.h=LSe(PSe(n.r)))),n):{t:""}}var HSe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,VSe=/<(?:\w+:)?(?:si|sstItem)>/g,zSe=/<\/(?:\w+:)?(?:si|sstItem)>/;function $Se(e,t){var r=[],n="";if(!e)return r;var a=e.match(HSe);if(a){n=a[2].replace(VSe,"").split(zSe);for(var s=0;s!=n.length;++s){var i=QD(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=$r(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var KSe=/^\s|\s$|[\t\n\r]/;function Uee(e,t){if(!t.bookSST)return"";var r=[Ys];r[r.length]=Gt("sst",null,{xmlns:eg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(KSe)&&(s+=' xml:space="preserve"'),s+=">"+ga(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function GSe(e){return[e.read_shift(4),e.read_shift(4)]}function qSe(e,t){var r=[],n=!1;return hh(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function WSe(e,t){return t||(t=yt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var XSe=iCe;function YSe(e){var t=ql();Rt(t,159,WSe(e));for(var r=0;r<e.length;++r)Rt(t,19,XSe(e[r]));return Rt(t,160),t.end()}function Qee(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Hf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function JSe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Hf(e,4),t.U=Hf(e,4),t.W=Hf(e,4),t}function ZSe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function e5e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(ZSe(e));return t}function t5e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function r5e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Hf(e,4),t.U=Hf(e,4),t.W=Hf(e,4),t}function n5e(e){var t=r5e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Hee(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Vee(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function a5e(e){var t=Hf(e);switch(t.Minor){case 2:return[t.Minor,s5e(e)];case 3:return[t.Minor,i5e()];case 4:return[t.Minor,o5e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function s5e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Hee(e,r),a=Vee(e,e.length-e.l);return{t:"Std",h:n,v:a}}function i5e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function o5e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(rl,function(s){var i=$r(s);switch(VA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function l5e(e,t){var r={},n=r.EncryptionVersionInfo=Hf(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Hee(e,a),t-=a,r.EncryptionVerifier=Vee(e,t),r}function c5e(e){var t={},r=t.EncryptionVersionInfo=Hf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function HD(e){var t=0,r,n=Qee(e),a=n.length+1,s,i,o,l,u;for(r=nm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var zee=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=Qee(i),l=s(o),u=o.length,d=nm(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=l>>8,d[u]=a(e[0],h),--u,h=l&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=l>>8,d[u]=a(o[u],h),--u,h=l&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=l>>8,d[u]=a(e[g],h),--u,--g,h=l&255,d[u]=a(o[u],h),--u,--g;return d}}(),u5e=function(e,t,r,n,a){a||(a=t),n||(n=zee(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},d5e=function(e){var t=0,r=zee(e);return function(n){var a=u5e("",n,t,r);return t=a[1],a[0]}};function A5e(e,t,r,n){var a={key:ci(e),verificationBytes:ci(e)};return r.password&&(a.verifier=HD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=d5e(r.password)),a}function f5e(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=c5e(e):n.Data=l5e(e,t),n}function h5e(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?f5e(e,t-2,n):A5e(e,r.biff>=8?t:t-2,r,n),n}var $ee=function(){function e(a,s){switch(s.type){case"base64":return t(Oc(a),s);case"binary":return t(a,s);case"buffer":return t(pn&&Buffer.isBuffer(a)?a.toString("binary"):fm(a),s);case"array":return t(Pp(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,v=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++v,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][v]=y:o[Ur({r:f,c:v})]=y}break}p=h.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=rn(u),o}function r(a,s){return hm(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Hn(a["!ref"]),o,l=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Ur({r:u,c:d});o=l?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Zf(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function m5e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Xy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function p5e(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,l=0,u=a+s;switch(l=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function g5e(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function hS(e,t){if(t===0)return e;var r=p5e(m5e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Xy(g5e(r))}var Kee=6,v5e=15,x5e=1,$o=Kee;function Yy(e){return Math.floor((e+Math.round(128/$o)/256)*$o)}function Jy(e){return Math.floor((e-5)/$o*100+.5)/100}function mS(e){return Math.round((e*$o+5)/$o*256)/256}function WB(e){return mS(Jy(Yy(e)))}function VD(e){var t=Math.abs(e-WB(e)),r=$o;if(t>.005)for($o=x5e;$o<v5e;++$o)Math.abs(e-WB(e))<=t&&(t=Math.abs(e-WB(e)),r=$o);$o=r}function am(e){e.width?(e.wpx=Yy(e.width),e.wch=Jy(e.wpx),e.MDW=$o):e.wpx?(e.wch=Jy(e.wpx),e.width=mS(e.wch),e.MDW=$o):typeof e.wch=="number"&&(e.width=mS(e.wch),e.wpx=Yy(e.width),e.MDW=$o),e.customWidth&&delete e.customWidth}var b5e=96,Gee=b5e;function Zy(e){return e*96/Gee}function px(e){return e*Gee/96}var y5e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function w5e(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(rl)||[]).forEach(function(i){var o=$r(i);switch(VA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ma(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ma(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function E5e(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(rl)||[]).forEach(function(i){var o=$r(i);switch(VA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function C5e(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(rl)||[]).forEach(function(i){var o=$r(i);switch(VA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ca(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ma(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ma(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ma(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ma(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ma(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ma(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ma(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=gD[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ma(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=gp[a.color.index];a.color.index==81&&(l=gp[1]),l||(l=gp[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=hS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function _5e(e,t,r){t.NumberFmt=[];for(var n=Ts(Dr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Dr[n[a]];var s=e[0].match(rl);if(s)for(a=0;a<s.length;++a){var i=$r(s[a]);switch(VA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Qn(Ca(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Qf(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function S5e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Gt("numFmt",null,{numFmtId:n,formatCode:ga(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Gt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var UE=["numFmtId","fillId","fontId","borderId","xfId"],QE=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function N5e(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(rl)||[]).forEach(function(s){var i=$r(s),o=0;switch(VA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<UE.length;++o)n[UE[o]]&&(n[UE[o]]=parseInt(n[UE[o]],10));for(o=0;o<QE.length;++o)n[QE[o]]&&(n[QE[o]]=Ma(n[QE[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Ma(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function k5e(e){var t=[];return t[t.length]=Gt("cellXfs",null),e.forEach(function(r){t[t.length]=Gt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Gt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var B5e=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&_5e(f,d,u),(f=o.match(a))&&C5e(f,d,l,u),(f=o.match(n))&&E5e(f,d,l,u),(f=o.match(s))&&w5e(f,d,l,u),(f=o.match(r))&&N5e(f,d,u),d}}();function qee(e,t){var r=[Ys,Gt("styleSheet",null,{xmlns:eg[0],"xmlns:vt":_i.vt})],n;return e.SSF&&(n=S5e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=k5e(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function T5e(e,t){var r=e.read_shift(2),n=Jo(e);return[r,n]}function I5e(e,t,r){r||(r=yt(6+4*t.length)),r.write_shift(2,e),Wi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function j5e(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=fCe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=ACe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Jo(e),n}function F5e(e,t){t||(t=yt(153)),t.write_shift(2,e.sz*20),hCe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),dS(e.color,t);var n=0;return n=2,t.write_shift(1,n),Wi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var O5e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],XB,D5e=el;function $Q(e,t){t||(t=yt(84)),XB||(XB=kN(O5e));var r=XB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(dS({auto:1},t),dS({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function R5e(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Wee(e,t,r){r||(r=yt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function ub(e,t){return t||(t=yt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var P5e=el;function L5e(e,t){return t||(t=yt(51)),t.write_shift(1,0),ub(null,t),ub(null,t),ub(null,t),ub(null,t),ub(null,t),t.length>t.l?t.slice(0,t.l):t}function M5e(e,t){return t||(t=yt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),uS(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function U5e(e,t,r){var n=yt(2052);return n.write_shift(4,e),uS(t,n),uS(r,n),n.length>n.l?n.slice(0,n.l):n}function Q5e(e,t,r){var n={};n.NumberFmt=[];for(var a in Dr)n.NumberFmt[a]=Dr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return hh(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Qf(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=hS(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function H5e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,Cd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,I5e(a,t[a]))}),Rt(e,616))}}function V5e(e){var t=1;Rt(e,611,Cd(t)),Rt(e,43,F5e({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function z5e(e){var t=2;Rt(e,603,Cd(t)),Rt(e,45,$Q({patternType:"none"})),Rt(e,45,$Q({patternType:"gray125"})),Rt(e,604)}function $5e(e){var t=1;Rt(e,613,Cd(t)),Rt(e,46,L5e()),Rt(e,614)}function K5e(e){var t=1;Rt(e,626,Cd(t)),Rt(e,47,Wee({numFmtId:0},65535)),Rt(e,627)}function G5e(e,t){Rt(e,617,Cd(t.length)),t.forEach(function(r){Rt(e,47,Wee(r,0))}),Rt(e,618)}function q5e(e){var t=1;Rt(e,619,Cd(t)),Rt(e,48,M5e({xfId:0,name:"Normal"})),Rt(e,620)}function W5e(e){var t=0;Rt(e,505,Cd(t)),Rt(e,506)}function X5e(e){var t=0;Rt(e,508,U5e(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function Y5e(e,t){var r=ql();return Rt(r,278),H5e(r,e.SSF),V5e(r),z5e(r),$5e(r),K5e(r),G5e(r,t.cellXfs),q5e(r),W5e(r),X5e(r),Rt(r,279),r.end()}var J5e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Z5e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(rl)||[]).forEach(function(a){var s=$r(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[J5e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function eNe(){}function tNe(){}var rNe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,nNe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,aNe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function sNe(e,t,r){t.themeElements={};var n;[["clrScheme",rNe,Z5e],["fontScheme",nNe,eNe],["fmtScheme",aNe,tNe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var iNe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Xee(e,t){(!e||e.length===0)&&(e=zD());var r,n={};if(!(r=e.match(iNe)))throw new Error("themeElements not found in theme");return sNe(r[0],n,t),n.raw=e,n}function zD(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ys];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function oNe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=HZ(s,{type:"array"})}catch{return}var o=Nc(i,"theme/theme/theme1.xml",!0);if(o)return Xee(o,r)}}function lNe(e){return e.read_shift(4)}function cNe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=uNe(e,4);break;case 2:t.xclrValue=Bee(e);break;case 3:t.xclrValue=lNe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function uNe(e,t){return el(e,t)}function dNe(e,t){return el(e,t)}function ANe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=cNe(e);break;case 6:n[1]=dNe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function fNe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(ANe(e,r-e.l));return{ixfe:n,ext:s}}function hNe(e,t){t.forEach(function(r){r[0]})}function mNe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Jo(e)}}function pNe(e){var t=yt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Wi(e.name,t),t.slice(0,t.l)}function gNe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function vNe(e){var t=yt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function xNe(e,t){var r=yt(8+2*t.length);return r.write_shift(4,e),Wi(t,r),r.slice(0,r.l)}function bNe(e){return e.l+=4,e.read_shift(4)!=0}function yNe(e,t){var r=yt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function wNe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return hh(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function ENe(){var e=ql();return Rt(e,332),Rt(e,334,Cd(1)),Rt(e,335,pNe({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,xNe(1,"XLDAPR")),Rt(e,52),Rt(e,35,Cd(514)),Rt(e,4096,Cd(0)),Rt(e,4097,bu(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,yNe(1)),Rt(e,51,vNe([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function CNe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(rl,function(o){var l=$r(o);switch(VA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function Yee(){var e=[Ys];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function _Ne(e){var t=[];if(!e)return t;var r=1;return(e.match(rl)||[]).forEach(function(n){var a=$r(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function SNe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Ur(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function NNe(e,t,r){var n=[];return hh(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function kNe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;hh(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function BNe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Cv=1024;function Jee(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Gt("xml",null,{"xmlns:v":wc.v,"xmlns:o":wc.o,"xmlns:x":wc.x,"xmlns:mv":wc.mv}).replace(/\/>/,">"),Gt("o:shapelayout",Gt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Gt("v:shapetype",[Gt("v:stroke",null,{joinstyle:"miter"}),Gt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Cv<e*1e3;)Cv+=1e3;return t.forEach(function(s){var i=ss(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Gt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Gt("v:fill",l,o),d={on:"t",obscured:"t"};++Cv,a=a.concat(["<v:shape"+Gy({id:"_x0000_s"+Cv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Gt("v:shadow",null,d),Gt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",go("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),go("x:AutoFill","False"),go("x:Row",String(i.r)),go("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function KQ(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=ss(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var l=Hn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=rn(l);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function TNe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=$r(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=ss(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&QD(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Zee(e){var t=[Ys,Gt("comments",null,{xmlns:eg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=ga(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(ga(l.a))),s.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(go("t",ga(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(go("t",ga(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function INe(e,t){var r=[],n=!1,a={},s=0;return e.replace(rl,function(o,l){var u=$r(o);switch(VA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=e.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function jNe(e,t,r){var n=[Ys,Gt("ThreadedComments",null,{xmlns:_i.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Gt("threadedComment",go("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function FNe(e,t){var r=[],n=!1;return e.replace(rl,function(s){var i=$r(s);switch(VA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function ONe(e){var t=[Ys,Gt("personList",null,{xmlns:_i.TCMNT,"xmlns:x":eg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Gt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function DNe(e){var t={};t.iauthor=e.read_shift(4);var r=ag(e);return t.rfx=r.s,t.ref=Ur(r.s),e.l+=16,t}function RNe(e,t){return t==null&&(t=yt(36)),t.write_shift(4,e[1].iauthor),t1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var PNe=Jo;function LNe(e){return Wi(e.slice(0,54))}function MNe(e,t){var r=[],n=[],a={},s=!1;return hh(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function UNe(e){var t=ql(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,LNe(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:ss(n[0]),e:ss(n[0])};Rt(t,635,RNe([s,a])),a.t&&a.t.length>0&&Rt(t,637,lCe(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var QNe="application/vnd.ms-office.vbaProject";function HNe(e){var t=Er.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Er.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Er.write(t)}function VNe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Er.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var ete=["xlsb","xlsm","xlam","biff8","xla"];function zNe(){return{"!type":"dialog"}}function $Ne(){return{"!type":"dialog"}}function KNe(){return{"!type":"macro"}}function GNe(){return{"!type":"macro"}}var qv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,a+(o?"":"$")+as(d)+(l?"":"$")+Ws(u)}return function(a,s){return t=s,a.replace(e,r)}}(),$D=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,KD=function(){return function(t,r){return t.replace($D,function(n,a,s,i,o,l){var u=jD(i)-(s?0:r.c),d=ID(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function tte(e,t){return e.replace($D,function(r,n,a,s,i,o){return n+(a=="$"?a+s:as(jD(s)+t.c))+(i=="$"?i+o:Ws(ID(o)+t.r))})}function qNe(e,t,r){var n=Xl(t),a=n.s,s=ss(r),i={r:s.r-a.r,c:s.c-a.c};return tte(e,i)}function WNe(e){return e.length!=1}function GQ(e){return e.replace(/_xlfn\./g,"")}function si(e){e.l+=1}function sm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function rte(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return nte(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=sm(e),o=sm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function nte(e){var t=sm(e),r=sm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function XNe(e,t,r){if(r.biff<8)return nte(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=sm(e),i=sm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function ate(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return YNe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=sm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function YNe(e){var t=sm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function JNe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ZNe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return e4e(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function e4e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function t4e(e,t,r){var n=(e[e.l++]&96)>>5,a=rte(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function r4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=rte(e,s,r);return[n,a,i]}function n4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function a4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function s4e(e,t,r){var n=(e[e.l++]&96)>>5,a=XNe(e,t-1,r);return[n,a]}function i4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function qQ(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function o4e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function l4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function c4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function u4e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function d4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function ste(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function A4e(e){return e.read_shift(2),ste(e)}function f4e(e){return e.read_shift(2),ste(e)}function h4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=ate(e,0,r);return[n,a]}function m4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=ZNe(e,0,r);return[n,a]}function p4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=ate(e,0,r);return[n,a,s]}function g4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[bke[a],lte[a],n]}function v4e(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:x4e(e);return[a,(s[0]===0?lte:xke)[s[1]]]}function x4e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function b4e(e,t,r){e.l+=r&&r.biff==2?3:4}function y4e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function w4e(e){return e.l++,mh[e.read_shift(1)]}function E4e(e){return e.l++,e.read_shift(2)}function C4e(e){return e.l++,e.read_shift(1)!==0}function _4e(e){return e.l++,Xo(e)}function S4e(e,t,r){return e.l++,Vw(e,t-1,r)}function N4e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Qs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=mh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Xo(e);break;case 2:r[1]=sg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function k4e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?ag:IN)(e));return a}function B4e(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=N4e(e,r.biff);return i}function T4e(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function I4e(e,t,r){if(r.biff==5)return j4e(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function j4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function F4e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function O4e(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function D4e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function R4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var P4e=el,L4e=el,M4e=el;function $w(e,t,r){return e.l+=2,[JNe(e)]}function GD(e){return e.l+=6,[]}var U4e=$w,Q4e=GD,H4e=GD,V4e=$w;function ite(e){return e.l+=2,[ci(e),e.read_shift(2)&1]}var z4e=$w,$4e=ite,K4e=GD,G4e=$w,q4e=$w,W4e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function X4e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=W4e[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function Y4e(e){return e.l+=2,[e.read_shift(4)]}function J4e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Z4e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function eke(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function tke(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function rke(e){return e.l+=4,[0,0]}var WQ={1:{n:"PtgExp",f:y4e},2:{n:"PtgTbl",f:M4e},3:{n:"PtgAdd",f:si},4:{n:"PtgSub",f:si},5:{n:"PtgMul",f:si},6:{n:"PtgDiv",f:si},7:{n:"PtgPower",f:si},8:{n:"PtgConcat",f:si},9:{n:"PtgLt",f:si},10:{n:"PtgLe",f:si},11:{n:"PtgEq",f:si},12:{n:"PtgGe",f:si},13:{n:"PtgGt",f:si},14:{n:"PtgNe",f:si},15:{n:"PtgIsect",f:si},16:{n:"PtgUnion",f:si},17:{n:"PtgRange",f:si},18:{n:"PtgUplus",f:si},19:{n:"PtgUminus",f:si},20:{n:"PtgPercent",f:si},21:{n:"PtgParen",f:si},22:{n:"PtgMissArg",f:si},23:{n:"PtgStr",f:S4e},26:{n:"PtgSheet",f:J4e},27:{n:"PtgEndSheet",f:Z4e},28:{n:"PtgErr",f:w4e},29:{n:"PtgBool",f:C4e},30:{n:"PtgInt",f:E4e},31:{n:"PtgNum",f:_4e},32:{n:"PtgArray",f:i4e},33:{n:"PtgFunc",f:g4e},34:{n:"PtgFuncVar",f:v4e},35:{n:"PtgName",f:T4e},36:{n:"PtgRef",f:h4e},37:{n:"PtgArea",f:t4e},38:{n:"PtgMemArea",f:F4e},39:{n:"PtgMemErr",f:P4e},40:{n:"PtgMemNoMem",f:L4e},41:{n:"PtgMemFunc",f:O4e},42:{n:"PtgRefErr",f:D4e},43:{n:"PtgAreaErr",f:n4e},44:{n:"PtgRefN",f:m4e},45:{n:"PtgAreaN",f:s4e},46:{n:"PtgMemAreaN",f:eke},47:{n:"PtgMemNoMemN",f:tke},57:{n:"PtgNameX",f:I4e},58:{n:"PtgRef3d",f:p4e},59:{n:"PtgArea3d",f:r4e},60:{n:"PtgRefErr3d",f:R4e},61:{n:"PtgAreaErr3d",f:a4e},255:{}},nke={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ake={1:{n:"PtgElfLel",f:ite},2:{n:"PtgElfRw",f:G4e},3:{n:"PtgElfCol",f:U4e},6:{n:"PtgElfRwV",f:q4e},7:{n:"PtgElfColV",f:V4e},10:{n:"PtgElfRadical",f:z4e},11:{n:"PtgElfRadicalS",f:K4e},13:{n:"PtgElfColS",f:Q4e},15:{n:"PtgElfColSV",f:H4e},16:{n:"PtgElfRadicalLel",f:$4e},25:{n:"PtgList",f:X4e},29:{n:"PtgSxName",f:Y4e},255:{}},ske={0:{n:"PtgAttrNoop",f:rke},1:{n:"PtgAttrSemi",f:d4e},2:{n:"PtgAttrIf",f:c4e},4:{n:"PtgAttrChoose",f:o4e},8:{n:"PtgAttrGoto",f:l4e},16:{n:"PtgAttrSum",f:b4e},32:{n:"PtgAttrBaxcel",f:qQ},33:{n:"PtgAttrBaxcel",f:qQ},64:{n:"PtgAttrSpace",f:A4e},65:{n:"PtgAttrSpaceSemi",f:f4e},128:{n:"PtgAttrIfError",f:u4e},255:{}};function Kw(e,t,r,n){if(n.biff<8)return el(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=B4e(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=k4e(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(el(e,t)),s}function Gw(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=WQ[s]||WQ[nke[s]],(s===24||s===25)&&(a=(s===24?ake:ske)[e[e.l+1]]),!a||!a.f?el(e,t):i.push([a.n,a.f(e,t,r)]);return i}function ike(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var oke={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function lke(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function ote(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function XQ(e,t,r){var n=ote(e,t,r);return n=="#REF"?n:lke(n,r)}function Ho(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var v=-1,b="",y=0,_=e[0].length;y<_;++y){var S=e[0][y];switch(S[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),v>=0){switch(e[0][v][1][0]){case 0:b=ws(" ",e[0][v][1][1]);break;case 1:b=ws("\r",e[0][v][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}u=u+b,v=-1}o.push(u+oke[S[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=hy(S[1][1],i,a),o.push(my(d,s));break;case"PtgRefN":d=r?hy(S[1][1],r,a):S[1][1],o.push(my(d,s));break;case"PtgRef3d":f=S[1][1],d=hy(S[1][2],i,a),g=XQ(n,f,a),o.push(g+"!"+my(d,s));break;case"PtgFunc":case"PtgFuncVar":var k=S[1][0],B=S[1][1];k||(k=0),k&=127;var F=k==0?[]:o.slice(-k);o.length-=k,B==="User"&&(B=F.shift()),o.push(B+"("+F.join(",")+")");break;case"PtgBool":o.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(S[1]);break;case"PtgNum":o.push(String(S[1]));break;case"PtgStr":o.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(S[1]);break;case"PtgAreaN":p=_Q(S[1][1],r?{s:r}:i,a),o.push(KB(p,a));break;case"PtgArea":p=_Q(S[1][1],i,a),o.push(KB(p,a));break;case"PtgArea3d":f=S[1][1],p=S[1][2],g=XQ(n,f,a),o.push(g+"!"+KB(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=S[1][2];var w=(n.names||[])[h-1]||(n[0]||[])[h],C=w?w.Name:"SH33TJSNAME"+String(h);C&&C.slice(0,6)=="_xlfn."&&!a.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var N=S[1][1];h=S[1][2];var P;if(a.biff<=5)N<0&&(N=-N),n[N]&&(P=n[N][h]);else{var D="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][h]&&n[N][h].itab>0&&(D=n.SheetNames[n[N][h].itab-1]+"!"):D=n.SheetNames[h-1]+"!"),n[N]&&n[N][h])D+=n[N][h].Name;else if(n[0]&&n[0][h])D+=n[0][h].Name;else{var T=(ote(n,N,a)||"").split(";;");T[h-1]?D=T[h-1]:D+="SH33TJSERRX"}o.push(D);break}P||(P={Name:"SH33TJSERRY"}),o.push(P.Name);break;case"PtgParen":var U="(",R=")";if(v>=0){switch(b="",e[0][v][1][0]){case 2:U=ws(" ",e[0][v][1][1])+U;break;case 3:U=ws("\r",e[0][v][1][1])+U;break;case 4:R=ws(" ",e[0][v][1][1])+R;break;case 5:R=ws("\r",e[0][v][1][1])+R;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}o.push(U+o.pop()+R);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:S[1][1],r:S[1][0]};var X={c:r.c,r:r.r};if(n.sharedf[Ur(d)]){var q=n.sharedf[Ur(d)];o.push(Ho(q,i,X,n,a))}else{var Z=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ho(u[1],i,X,n,a)),Z=!0;break}Z||o.push(S[1])}break;case"PtgArray":o.push("{"+ike(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&v>=0&&H.indexOf(e[0][y][0])==-1){S=e[0][v];var V=!0;switch(S[1][0]){case 4:V=!1;case 0:b=ws(" ",S[1][1]);break;case 5:V=!1;case 1:b=ws("\r",S[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}o.push((V?b:"")+o.pop()+(V?"":b)),v=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function cke(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],el(e,t-2)];var o=Gw(e,i,r);return t!==i+a&&(s=Kw(e,t-i-a,o,r)),e.l=n,[o,s]}function uke(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],el(e,t-2)];var o=Gw(e,i,r);return t!==i+a&&(s=Kw(e,t-i-a,o,r)),e.l=n,[o,s]}function dke(e,t,r,n){var a=e.l+t,s=Gw(e,n,r),i;return a!==e.l&&(i=Kw(e,a-e.l,s,r)),[s,i]}function Ake(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=Gw(e,s,r);return s==65535?[[],el(e,t-2)]:(t!==s+2&&(a=Kw(e,n-s-2,i,r)),[i,a])}function fke(e){var t;if(Of(e,e.l+6)!==65535)return[Xo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function hke(e){if(e==null){var t=yt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Lp(e);return Lp(0)}function YB(e,t,r){var n=e.l+t,a=zA(e);r.biff==2&&++e.l;var s=fke(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=uke(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function mke(e,t,r,n,a){var s=Up(t,r,a),i=hke(e.v),o=yt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=yt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Gi([s,i,o,u]);return f}function jN(e,t,r){var n=e.read_shift(4),a=Gw(e,n,r),s=e.read_shift(4),i=s>0?Kw(e,s,a,r):null;return[a,i]}var pke=jN,FN=jN,gke=jN,vke=jN,xke={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},lte={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},bke={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function YQ(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function yke(e){var t="of:="+e.replace($D,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function JB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function wke(e){return e.replace(/\./,"!")}var gy={},Wv={},vy=typeof Map<"u";function qD(e,t,r){var n=0,a=e.length;if(r){if(vy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=vy?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(vy?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function ON(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&($o=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Jy(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=mS(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function bp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function mm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Qf(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function cte(e,t,r,n,a,s){try{n.cellNF&&(e.z=Dr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Dr[t]==null&&Qf(xEe[t]||"General",t),e.t==="e")e.w=e.w||mh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=$y(e.v);else if(e.t==="d"){var i=Ni(e.v);(i|0)===i?e.w=i.toString(10):e.w=$y(i)}else{if(e.v===void 0)return"";e.w=Rp(e.v,Wv)}else e.t==="d"?e.w=ju(t,Ni(e.v),Wv):e.w=ju(t,e.v,Wv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=hS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=hS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function Eke(e,t,r){if(e&&e["!ref"]){var n=Hn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Cke(e,t){var r=Hn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=rn(r))}var _ke=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Ske=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Nke=/<(?:\w:)?hyperlink [^>]*>/mg,kke=/"(\w*:\w*)"/,Bke=/<(?:\w:)?col\b[^>]*[\/]?>/g,Tke=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ike=/<(?:\w:)?pageMargins[^>]*\/>/g,ute=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,jke=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Fke=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Oke(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Ske);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(ute);h?WD(h[0],o,a,r):(h=u.match(jke))&&Rke(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(kke);g&&Cke(o,g[1])}var v=u.match(Fke);v&&v[1]&&Wke(v[1],a);var b=[];if(t.cellStyles){var y=u.match(Bke);y&&zke(b,y)}f&&Jke(f[1],o,t,l,s,i);var _=d.match(Tke);_&&(o["!autofilter"]=Kke(_[0]));var S=[],k=d.match(_ke);if(k)for(p=0;p!=k.length;++p)S[p]=Hn(k[p].slice(k[p].indexOf('"')+1));var B=d.match(Nke);B&&Qke(o,B,n);var F=d.match(Ike);if(F&&(o["!margins"]=Hke($r(F[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=rn(l)),t.sheetRows>0&&o["!ref"]){var w=Hn(o["!ref"]);t.sheetRows<=+w.e.r&&(w.e.r=t.sheetRows-1,w.e.r>l.e.r&&(w.e.r=l.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>l.e.c&&(w.e.c=l.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=rn(w))}return b.length>0&&(o["!cols"]=b),S.length>0&&(o["!merges"]=S),o}function Dke(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+rn(e[r])+'"/>';return t+"</mergeCells>"}function WD(e,t,r,n){var a=$r(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Ca(a.codeName)))}function Rke(e,t,r,n,a){WD(e.slice(0,e.indexOf(">")),r,n,a)}function Pke(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,i.codeName=kA(ga(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Gt("outlinePr",null,u)}!s&&!o||(a[a.length]=Gt("sheetPr",o,i))}var Lke=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Mke=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Uke(e){var t={sheet:1};return Lke.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Mke.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=HD(e.password).toString(16).toUpperCase()),Gt("sheetProtection",null,t)}function Qke(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=$r(Ca(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Qn(s.location))):(s.Target="#"+Qn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Hn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Ur({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function Hke(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Vke(e){return bp(e),Gt("pageMargins",null,e)}function zke(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=$r(t[n],!0);a.hidden&&(a.hidden=Ma(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,VD(a.width)),am(a);s<=i;)e[s++]=Ha(a)}}function $ke(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Gt("col",null,ON(a,n)));return r[r.length]="</cols>",r.join("")}function Kke(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Gke(e,t,r,n){var a=typeof e.ref=="string"?e.ref:rn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Xl(a);i.s.r==i.e.r&&(i.e.r=Xl(t["!ref"]).e.r,a=rn(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Gt("autoFilter",null,{ref:a})}var qke=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Wke(e,t){t.Views||(t.Views=[{}]),(e.match(qke)||[]).forEach(function(r,n){var a=$r(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function Xke(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Gt("sheetViews",Gt("sheetView",null,a),{})}function Yke(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=mh[e.v];break;case"d":n&&n.cellDates?a=Qa(e.v,-1).toISOString():(e=Ha(e),e.t="n",a=""+(e.v=Ni(Qa(e.v)))),typeof e.z>"u"&&(e.z=Dr[14]);break;default:a=e.v;break}var o=go("v",ga(a)),l={r:t},u=mm(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=go("v",""+qD(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Gt("f",ga(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Gt("c",o,l)}var Jke=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Ky("v"),i=Ky("f");return function(l,u,d,f,h,p){for(var g=0,v="",b=[],y=[],_=0,S=0,k=0,B="",F,w,C=0,N=0,P,D,T=0,U=0,R=Array.isArray(p.CellXf),X,q=[],Z=[],H=Array.isArray(u),V=[],K={},ne=!1,L=!!d.sheetStubs,W=l.split(t),J=0,te=W.length;J!=te;++J){v=W[J].trim();var ie=v.length;if(ie!==0){var Ae=0;e:for(g=0;g<ie;++g)switch(v[g]){case">":if(v[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(w=$r(v.slice(Ae,g),!0),C=w.r!=null?parseInt(w.r,10):C+1,N=-1,d.sheetRows&&d.sheetRows<C)continue;K={},ne=!1,w.ht&&(ne=!0,K.hpt=parseFloat(w.ht),K.hpx=px(K.hpt)),w.hidden=="1"&&(ne=!0,K.hidden=!0),w.outlineLevel!=null&&(ne=!0,K.level=+w.outlineLevel),ne&&(V[C-1]=K)}break;case"<":Ae=g;break}if(Ae>=g)break;if(w=$r(v.slice(Ae,g),!0),C=w.r!=null?parseInt(w.r,10):C+1,N=-1,!(d.sheetRows&&d.sheetRows<C)){f.s.r>C-1&&(f.s.r=C-1),f.e.r<C-1&&(f.e.r=C-1),d&&d.cellStyles&&(K={},ne=!1,w.ht&&(ne=!0,K.hpt=parseFloat(w.ht),K.hpx=px(K.hpt)),w.hidden=="1"&&(ne=!0,K.hidden=!0),w.outlineLevel!=null&&(ne=!0,K.level=+w.outlineLevel),ne&&(V[C-1]=K)),b=v.slice(g).split(e);for(var oe=0;oe!=b.length&&b[oe].trim().charAt(0)=="<";++oe);for(b=b.slice(oe),g=0;g!=b.length;++g)if(v=b[g].trim(),v.length!==0){if(y=v.match(r),_=g,S=0,k=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,y!=null&&y.length===2){for(_=0,B=y[1],S=0;S!=B.length&&!((k=B.charCodeAt(S)-64)<1||k>26);++S)_=26*_+k;--_,N=_}else++N;for(S=0;S!=v.length&&v.charCodeAt(S)!==62;++S);if(++S,w=$r(v.slice(0,S),!0),w.r||(w.r=Ur({r:C-1,c:N})),B=v.slice(S),F={t:""},(y=B.match(s))!=null&&y[1]!==""&&(F.v=Qn(y[1])),d.cellFormula){if((y=B.match(i))!=null&&y[1]!==""){if(F.f=Qn(Ca(y[1])).replace(/\r\n/g,`
`),d.xlfn||(F.f=GQ(F.f)),y[0].indexOf('t="array"')>-1)F.F=(B.match(a)||[])[1],F.F.indexOf(":")>-1&&q.push([Hn(F.F),F.F]);else if(y[0].indexOf('t="shared"')>-1){D=$r(y[0]);var ce=Qn(Ca(y[1]));d.xlfn||(ce=GQ(ce)),Z[parseInt(D.si,10)]=[D,ce,w.r]}}else(y=B.match(/<f[^>]*\/>/))&&(D=$r(y[0]),Z[D.si]&&(F.f=qNe(Z[D.si][1],Z[D.si][2],w.r)));var ge=ss(w.r);for(S=0;S<q.length;++S)ge.r>=q[S][0].s.r&&ge.r<=q[S][0].e.r&&ge.c>=q[S][0].s.c&&ge.c<=q[S][0].e.c&&(F.F=q[S][1])}if(w.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(L)F.t="z";else continue;else F.t=w.t||"n";switch(f.s.c>N&&(f.s.c=N),f.e.c<N&&(f.e.c=N),F.t){case"n":if(F.v==""||F.v==null){if(!L)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!L)continue;F.t="z"}else P=gy[parseInt(F.v,10)],F.v=P.t,F.r=P.r,d.cellHTML&&(F.h=P.h);break;case"str":F.t="s",F.v=F.v!=null?Ca(F.v):"",d.cellHTML&&(F.h=ND(F.v));break;case"inlineStr":y=B.match(n),F.t="s",y!=null&&(P=QD(y[1]))?(F.v=P.t,d.cellHTML&&(F.h=P.h)):F.v="";break;case"b":F.v=Ma(F.v);break;case"d":d.cellDates?F.v=Qa(F.v,1):(F.v=Ni(Qa(F.v,1)),F.t="n");break;case"e":(!d||d.cellText!==!1)&&(F.w=F.v),F.v=Aee[F.v];break}if(T=U=0,X=null,R&&w.s!==void 0&&(X=p.CellXf[w.s],X!=null&&(X.numFmtId!=null&&(T=X.numFmtId),d.cellStyles&&X.fillId!=null&&(U=X.fillId))),cte(F,T,U,d,h,p),d.cellDates&&R&&F.t=="n"&&Jx(Dr[T])&&(F.t="d",F.v=TN(F.v)),w.cm&&d.xlmeta){var je=(d.xlmeta.Cell||[])[+w.cm-1];je&&je.type=="XLDAPR"&&(F.D=!0)}if(H){var re=ss(w.r);u[re.r]||(u[re.r]=[]),u[re.r][re.c]=F}else u[w.r]=F}}}}V.length>0&&(u["!rows"]=V)}}();function Zke(e,t,r,n){var a=[],s=[],i=Hn(e["!ref"]),o="",l,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),v={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=as(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=Ws(f),h=i.s.c;h<=i.e.c;++h){l=d[h]+u;var _=g?(e[f]||[])[h]:e[l];_!==void 0&&(o=Yke(_,l,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(v={r:u},p&&p[f]&&(b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=Zy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level)),a[a.length]=Gt("row",s.join(""),v))}if(p)for(;f<p.length;++f)p&&p[f]&&(v={r:f+1},b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=Zy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level),a[a.length]=Gt("row","",v));return a.join("")}function dte(e,t,r,n){var a=[Ys,Gt("worksheet",null,{xmlns:eg[0],"xmlns:r":_i.r})],s=r.SheetNames[e],i=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",d=Hn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=rn(d)}n||(n={}),l["!comments"]=[];var f=[];Pke(l,r,e,t,a),a[a.length]=Gt("dimension",null,{ref:u}),a[a.length]=Xke(l,t,e,r),t.sheetFormat&&(a[a.length]=Gt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=$ke(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Zke(l,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=Uke(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=Gke(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=Dke(l["!merges"]));var h=-1,p,g=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(g=ha(n,-1,ga(v[1].Target).replace(/#.*$/,""),En.HLINK),p["r:id"]="rId"+g),(h=v[1].Target.indexOf("#"))>-1&&(p.location=ga(v[1].Target.slice(h+1))),v[1].Tooltip&&(p.tooltip=ga(v[1].Tooltip)),a[a.length]=Gt("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=Vke(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=go("ignoredErrors",Gt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ha(n,-1,"../drawings/drawing"+(e+1)+".xml",En.DRAW),a[a.length]=Gt("drawing",null,{"r:id":"rId"+g}),l["!drawing"]=f),l["!comments"].length>0&&(g=ha(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",En.VML),a[a.length]=Gt("legacyDrawing",null,{"r:id":"rId"+g}),l["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function eBe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function tBe(e,t,r){var n=yt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=Zy(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ur(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var v=n.l;return n.l=l,n.write_shift(4,o),n.l=v,n.length>n.l?n.slice(0,n.l):n}function rBe(e,t,r,n){var a=tBe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var nBe=ag,aBe=t1;function sBe(){}function iBe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=cCe(e),r}function oBe(e,t,r){r==null&&(r=yt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return dS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),oee(e,r),r.slice(0,r.l)}function lBe(e){var t=Du(e);return[t]}function cBe(e,t,r){return r==null&&(r=yt(8)),tg(t,r)}function uBe(e){var t=rg(e);return[t]}function dBe(e,t,r){return r==null&&(r=yt(4)),ng(t,r)}function ABe(e){var t=Du(e),r=e.read_shift(1);return[t,r,"b"]}function fBe(e,t,r){return r==null&&(r=yt(9)),tg(t,r),r.write_shift(1,e.v?1:0),r}function hBe(e){var t=rg(e),r=e.read_shift(1);return[t,r,"b"]}function mBe(e,t,r){return r==null&&(r=yt(5)),ng(t,r),r.write_shift(1,e.v?1:0),r}function pBe(e){var t=Du(e),r=e.read_shift(1);return[t,r,"e"]}function gBe(e,t,r){return r==null&&(r=yt(9)),tg(t,r),r.write_shift(1,e.v),r}function vBe(e){var t=rg(e),r=e.read_shift(1);return[t,r,"e"]}function xBe(e,t,r){return r==null&&(r=yt(8)),ng(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function bBe(e){var t=Du(e),r=e.read_shift(4);return[t,r,"s"]}function yBe(e,t,r){return r==null&&(r=yt(12)),tg(t,r),r.write_shift(4,t.v),r}function wBe(e){var t=rg(e),r=e.read_shift(4);return[t,r,"s"]}function EBe(e,t,r){return r==null&&(r=yt(8)),ng(t,r),r.write_shift(4,t.v),r}function CBe(e){var t=Du(e),r=Xo(e);return[t,r,"n"]}function _Be(e,t,r){return r==null&&(r=yt(16)),tg(t,r),Lp(e.v,r),r}function Ate(e){var t=rg(e),r=Xo(e);return[t,r,"n"]}function SBe(e,t,r){return r==null&&(r=yt(12)),ng(t,r),Lp(e.v,r),r}function NBe(e){var t=Du(e),r=RD(e);return[t,r,"n"]}function kBe(e,t,r){return r==null&&(r=yt(12)),tg(t,r),lee(e.v,r),r}function BBe(e){var t=rg(e),r=RD(e);return[t,r,"n"]}function TBe(e,t,r){return r==null&&(r=yt(8)),ng(t,r),lee(e.v,r),r}function IBe(e){var t=Du(e),r=FD(e);return[t,r,"is"]}function jBe(e){var t=Du(e),r=Jo(e);return[t,r,"str"]}function FBe(e,t,r){return r==null&&(r=yt(12+4*e.v.length)),tg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function OBe(e){var t=rg(e),r=Jo(e);return[t,r,"str"]}function DBe(e,t,r){return r==null&&(r=yt(8+4*e.v.length)),ng(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function RBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=FN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function PBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=FN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function LBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=Xo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=FN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function MBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=Jo(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=FN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}var UBe=ag,QBe=t1;function HBe(e,t){return t==null&&(t=yt(4)),t.write_shift(4,e),t}function VBe(e,t){var r=e.l+t,n=ag(e),a=OD(e),s=Jo(e),i=Jo(e),o=Jo(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function zBe(e,t){var r=yt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));t1({s:ss(e[0]),e:ss(e[0])},r),DD("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Wi(a||"",r),Wi(e[1].Tooltip||"",r),Wi("",r),r.slice(0,r.l)}function $Be(){}function KBe(e,t,r){var n=e.l+t,a=cee(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=pke(e,n-e.l,r);i[1]=o}else e.l=n;return i}function GBe(e,t,r){var n=e.l+t,a=ag(e),s=[a];if(r.cellFormula){var i=vke(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function qBe(e,t,r){r==null&&(r=yt(18));var n=ON(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var fte=["left","right","top","bottom","header","footer"];function WBe(e){var t={};return fte.forEach(function(r){t[r]=Xo(e)}),t}function XBe(e,t){return t==null&&(t=yt(48)),bp(e),fte.forEach(function(r){Lp(e[r],t)}),t}function YBe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function JBe(e,t,r){r==null&&(r=yt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function ZBe(e){var t=yt(24);return t.write_shift(4,4),t.write_shift(4,1),t1(e,t),t}function eTe(e,t){return t==null&&(t=yt(66)),t.write_shift(2,e.password?HD(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function tTe(){}function rTe(){}function nTe(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,v,b,y,_,S,k,B,F=[];o.biff=12,o["!row"]=0;var w=0,C=!1,N=[],P={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=P,D.arrayf=N,D.SheetNames=a.SheetNames||a.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var T=0;T<a.Names.length;++T)D[0][T+1]=a.Names[T];var U=[],R=[],X=!1;ew[16]={n:"BrtShortReal",f:Ate};var q;if(hh(e,function(V,K,ne){if(!h)switch(ne){case 148:u=V;break;case 0:p=V,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),k=Ws(b=p.r),o["!row"]=p.r,(V.hidden||V.hpt||V.level!=null)&&(V.hpt&&(V.hpx=px(V.hpt)),R[V.r]=V);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:V[2]},V[2]){case"n":g.v=V[1];break;case"s":S=gy[V[1]],g.v=S.t,g.r=S.r;break;case"b":g.v=!!V[1];break;case"e":g.v=V[1],o.cellText!==!1&&(g.w=mh[g.v]);break;case"str":g.t="s",g.v=V[1];break;case"is":g.t="s",g.v=V[1].t;break}if((v=i.CellXf[V[0].iStyleRef])&&cte(g,v.numFmtId,null,o,s,i),y=V[0].c==-1?y+1:V[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=g):l[as(y)+k]=g,o.cellFormula){for(C=!1,w=0;w<N.length;++w){var L=N[w];p.r>=L[0].s.r&&p.r<=L[0].e.r&&y>=L[0].s.c&&y<=L[0].e.c&&(g.F=rn(L[0]),C=!0)}!C&&V.length>3&&(g.f=V[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&v&&g.t=="n"&&Jx(Dr[v.numFmtId])){var W=sp(g.v);W&&(g.t="d",g.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}q&&(q.type=="XLDAPR"&&(g.D=!0),q=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=V[0].c==-1?y+1:V[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=g):l[as(y)+k]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),q&&(q.type=="XLDAPR"&&(g.D=!0),q=void 0);break;case 176:F.push(V);break;case 49:q=((o.xlmeta||{}).Cell||[])[V-1];break;case 494:var J=n["!id"][V.relId];for(J?(V.Target=J.Target,V.loc&&(V.Target+="#"+V.loc),V.Rel=J):V.relId==""&&(V.Target="#"+V.loc),b=V.rfx.s.r;b<=V.rfx.e.r;++b)for(y=V.rfx.s.c;y<=V.rfx.e.c;++y)o.dense?(l[b]||(l[b]=[]),l[b][y]||(l[b][y]={t:"z",v:void 0}),l[b][y].l=V):(_=Ur({c:y,r:b}),l[_]||(l[_]={t:"z",v:void 0}),l[_].l=V);break;case 426:if(!o.cellFormula)break;N.push(V),B=o.dense?l[b][y]:l[as(y)+k],B.f=Ho(V[1],d,{r:p.r,c:y},D,o),B.F=rn(V[0]);break;case 427:if(!o.cellFormula)break;P[Ur(V[0].s)]=V[1],B=o.dense?l[b][y]:l[as(y)+k],B.f=Ho(V[1],d,{r:p.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;V.e>=V.s;)U[V.e--]={width:V.w/256,hidden:!!(V.flags&1),level:V.level},X||(X=!0,VD(V.w/256)),am(U[V.e+1]);break;case 161:l["!autofilter"]={ref:rn(V)};break;case 476:l["!margins"]=V;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),V.name&&(a.Sheets[r].CodeName=V.name),(V.above||V.left)&&(l["!outline"]={above:V.above,left:V.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),V.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!K.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ne.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=rn(u||d)),o.sheetRows&&l["!ref"]){var Z=Hn(l["!ref"]);o.sheetRows<=+Z.e.r&&(Z.e.r=o.sheetRows-1,Z.e.r>d.e.r&&(Z.e.r=d.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>d.e.c&&(Z.e.c=d.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),l["!fullref"]=l["!ref"],l["!ref"]=rn(Z))}return F.length>0&&(l["!merges"]=F),U.length>0&&(l["!cols"]=U),R.length>0&&(l["!rows"]=R),l}function aTe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ha(t),t.z=t.z||Dr[14],t.v=Ni(Qa(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=mm(a.cellXfs,t,a),t.l&&s["!links"].push([Ur(l),t.l]),t.c&&s["!comments"].push([Ur(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=qD(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?Rt(e,18,EBe(t,l)):Rt(e,7,yBe(t,l))):(l.t="str",i?Rt(e,17,DBe(t,l)):Rt(e,6,FBe(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,TBe(t,l)):Rt(e,2,kBe(t,l)):i?Rt(e,16,SBe(t,l)):Rt(e,5,_Be(t,l)),!0;case"b":return l.t="b",i?Rt(e,15,mBe(t,l)):Rt(e,4,fBe(t,l)),!0;case"e":return l.t="e",i?Rt(e,14,xBe(t,l)):Rt(e,3,gBe(t,l)),!0}return i?Rt(e,12,dBe(t,l)):Rt(e,1,cBe(t,l)),!0}function sTe(e,t,r,n){var a=Hn(t["!ref"]||"A1"),s,i="",o=[];Rt(e,145);var l=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=Ws(d),rBe(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=as(h)),s=o[h]+i;var p=l?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=aTe(e,p,d,h,n,t,f)}}Rt(e,146)}function iTe(e,t){!t||!t["!merges"]||(Rt(e,177,HBe(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,QBe(r))}),Rt(e,178))}function oTe(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,qBe(n,r))}),Rt(e,391))}function lTe(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,ZBe(Hn(t["!ref"]))),Rt(e,650))}function cTe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ha(r,-1,n[1].Target.replace(/#.*$/,""),En.HLINK);Rt(e,494,zBe(n,a))}}),delete t["!links"]}function uTe(e,t,r,n){if(t["!comments"].length>0){var a=ha(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",En.VML);Rt(e,551,DD("rId"+a)),t["!legacy"]=a}}function dTe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:rn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Xl(s);o.s.r==o.e.r&&(o.e.r=Xl(t["!ref"]).e.r,s=rn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,t1(Hn(s))),Rt(e,162)}}function ATe(e,t,r){Rt(e,133),Rt(e,137,JBe(t,r)),Rt(e,138),Rt(e,134)}function fTe(e,t){t["!protect"]&&Rt(e,535,eTe(t["!protect"]))}function hTe(e,t,r,n){var a=ql(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Hn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,oBe(o,i["!outline"])),Rt(a,148,aBe(l)),ATe(a,i,r.Workbook),oTe(a,i),sTe(a,i,e,t),fTe(a,i),dTe(a,i,r,e),iTe(a,i),cTe(a,i,n),i["!margins"]&&Rt(a,476,XBe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&lTe(a,i),uTe(a,i,e,n),Rt(a,130),a.end()}function mTe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function pTe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=mTe(f);d.s.r=d.s.c=0,d.e.c=o,u=as(o),h[0].forEach(function(p,g){i[u+Ws(g)]={t:"n",v:p,z:h[1]},l=g}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=rn(d)),i}function gTe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(ute);return o&&WD(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function vTe(e,t){e.l+=10;var r=Jo(e);return{name:r}}function xTe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return hh(e,function(l,u,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var XD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],bTe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],yTe=[],wTe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function JQ(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function ZQ(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function hte(e){ZQ(e.WBProps,XD),ZQ(e.CalcPr,wTe),JQ(e.WBView,bTe),JQ(e.Sheets,yTe),Wv.date1904=Ma(e.WBProps.date1904)}function ETe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ma(e.Workbook.WBProps.date1904)?"true":"false"}var CTe="][*?/\\".split("");function mte(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return CTe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function _Te(e,t,r){e.forEach(function(n,a){mte(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function STe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];_Te(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Eke(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var NTe=/<\w+:workbook/;function kTe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(rl,function(l,u){var d=$r(l);switch(VA(d[0])){case"<?xml":break;case"<workbook":l.match(NTe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":XD.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ma(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ca(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Ca(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ca(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ma(d.hidden||"0")&&(s.Hidden=!0),i=u+l.length;break;case"</definedName>":s.Ref=Qn(Ca(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),eg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return hte(r),r}function pte(e){var t=[Ys];t[t.length]=Gt("workbook",null,{xmlns:eg[0],"xmlns:r":_i.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(XD.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Gt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:ga(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Gt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Gt("definedName",ga(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function BTe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=$j(e),r.name=Jo(e),r}function TTe(e,t){return t||(t=yt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),DD(e.strRelID,t),Wi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function ITe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Jo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function jTe(e,t){t||(t=yt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),oee(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function FTe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function OTe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=uCe(e),i=gke(e,0,r),o=OD(e);e.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function DTe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],ew[16]={n:"BrtFRTArchID$",f:FTe},hh(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=Ho(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),hte(r),r.Names=s,r.supbooks=i,r}function RTe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,TTe(a))}Rt(e,144)}function PTe(e,t){t||(t=yt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Wi("SheetJS",t),Wi(aS.version,t),Wi(aS.version,t),Wi("7262",t),t.length>t.l?t.slice(0,t.l):t}function LTe(e,t){t||(t=yt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function MTe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,LTe(a)),Rt(e,136))}}function UTe(e,t){var r=ql();return Rt(r,131),Rt(r,128,PTe()),Rt(r,153,jTe(e.Workbook&&e.Workbook.WBProps||null)),MTe(r,e),RTe(r,e),Rt(r,132),r.end()}function QTe(e,t,r){return t.slice(-4)===".bin"?DTe(e,r):kTe(e,r)}function HTe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?nTe(e,n,r,a,s,i,o):Oke(e,n,r,a,s,i,o)}function VTe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?xTe(e,n,r,a,s):gTe(e,n,r,a,s)}function zTe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?KNe():GNe()}function $Te(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?zNe():$Ne()}function KTe(e,t,r,n){return t.slice(-4)===".bin"?Q5e(e,r,n):B5e(e,r,n)}function GTe(e,t,r){return Xee(e,r)}function qTe(e,t,r){return t.slice(-4)===".bin"?qSe(e,r):$Se(e,r)}function WTe(e,t,r){return t.slice(-4)===".bin"?MNe(e,r):TNe(e,r)}function XTe(e,t,r){return t.slice(-4)===".bin"?NNe(e):_Ne(e)}function YTe(e,t,r,n){return r.slice(-4)===".bin"?kNe(e,t,r,n):void 0}function JTe(e,t,r){return t.slice(-4)===".bin"?wNe(e,t,r):CNe(e,t,r)}function ZTe(e,t,r){return(t.slice(-4)===".bin"?UTe:pte)(e)}function e3e(e,t,r,n,a){return(t.slice(-4)===".bin"?hTe:dte)(e,r,n,a)}function t3e(e,t,r){return(t.slice(-4)===".bin"?Y5e:qee)(e,r)}function r3e(e,t,r){return(t.slice(-4)===".bin"?YSe:Uee)(e,r)}function n3e(e,t,r){return(t.slice(-4)===".bin"?UNe:Zee)(e)}function a3e(e){return(e.slice(-4)===".bin"?ENe:Yee)()}var gte=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,vte=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function cd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(gte),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(vte),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function s3e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(gte),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(vte),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var xy;function i3e(e,t){var r=xy[e]||Qn(e);return r==="General"?Rp(t):ju(r,t)}function o3e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function l3e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||mh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=$y(e.v):e.w=Rp(e.v):e.w=i3e(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=xy[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Jx(n)){var a=sp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function c3e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=y5e[n.Pattern]||n.Pattern)}e[t.ID]=t}function u3e(e,t,r,n,a,s,i,o,l,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ma(e);break;case"String":n.t="s",n.r=pQ(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Qa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Aee[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=pQ(t||e));break}if(l3e(n,d,u),u.cellFormula!==!1)if(n.Formula){var v=Qn(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=qv(v,a),delete n.Formula,n.ArrayRange=="RC"?n.F=qv("RC:RC",a):n.ArrayRange&&(n.F=qv(n.ArrayRange,a),l.push([Hn(n.F),n.F]))}else for(g=0;g<l.length;++g)a.r>=l[g][0].s.r&&a.r<=l[g][0].e.r&&a.c>=l[g][0].s.c&&a.c<=l[g][0].e.c&&(n.F=l[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function d3e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function ZB(e,t){var r=t||{};Zx();var n=Qb(kD(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ca(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Ha(r);return i.type="string",mx.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(He){a.indexOf("<"+He)>=0&&(s=!0)}),s)return X3e(n,r);xy={"General Number":"General","General Date":Dr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Dr[15],"Short Date":Dr[14],"Long Time":Dr[19],"Medium Time":Dr[18],"Short Time":Dr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Dr[2],Standard:Dr[4],Percent:Dr[10],Scientific:Dr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},v={},b=cd('<Data ss:Type="String">'),y=0,_=0,S=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},B={},F={},w="",C=0,N=[],P={},D={},T=0,U=[],R=[],X={},q=[],Z,H=!1,V=[],K=[],ne={},L=0,W=0,J={Sheets:[],WBProps:{date1904:!1}},te={};qy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=qy.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?u3e(n.slice(y,o.index),w,b,l[l.length-1][0]=="comment"?X:g,{c:_,r:S},B,q[_],v,V,r):(w="",b=cd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(R.length>0&&(g.c=R),(!r.sheetRows||r.sheetRows>S)&&g.v!==void 0&&(r.dense?(h[S]||(h[S]=[]),h[S][_]=g):h[as(_)+Ws(S)]=g),g.HRef&&(g.l={Target:Qn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(L=_+(parseInt(g.MergeAcross,10)|0),W=S+(parseInt(g.MergeDown,10)|0),N.push({s:{c:_,r:S},e:{c:L,r:W}})),!r.sheetStubs)g.MergeAcross?_=L+1:++_;else if(g.MergeAcross||g.MergeDown){for(var Ae=_;Ae<=L;++Ae)for(var oe=S;oe<=W;++oe)(Ae>_||oe>S)&&(r.dense?(h[oe]||(h[oe]=[]),h[oe][Ae]={t:"z"}):h[as(Ae)+Ws(oe)]={t:"z"});_=L+1}else++_;else g=s3e(o[0]),g.Index&&(_=+g.Index-1),_<k.s.c&&(k.s.c=_),_>k.e.c&&(k.e.c=_),o[0].slice(-2)==="/>"&&++_,R=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(S<k.s.r&&(k.s.r=S),S>k.e.r&&(k.e.r=S),o[0].slice(-2)==="/>"&&(v=cd(o[0]),v.Index&&(S=+v.Index-1)),_=0,++S):(v=cd(o[0]),v.Index&&(S=+v.Index-1),ne={},(v.AutoFitHeight=="0"||v.Height)&&(ne.hpx=parseInt(v.Height,10),ne.hpt=Zy(ne.hpx),K[S]=ne),v.Hidden=="1"&&(ne.hidden=!0,K[S]=ne));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(h["!ref"]=rn(k),r.sheetRows&&r.sheetRows<=k.e.r&&(h["!fullref"]=h["!ref"],k.e.r=r.sheetRows-1,h["!ref"]=rn(k))),N.length&&(h["!merges"]=N),q.length>0&&(h["!cols"]=q),K.length>0&&(h["!rows"]=K),d[p]=h}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=_=0,l.push([o[3],!1]),u=cd(o[0]),p=Qn(u.Name),h=r.dense?[]:{},N=[],V=[],K=[],te={name:p,Hidden:0},J.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),q=[],H=!1}break;case"style":o[1]==="/"?c3e(B,F,r):F=cd(o[0]);break;case"numberformat":F.nf=Qn(cd(o[0]).Format||"General"),xy[F.nf]&&(F.nf=xy[F.nf]);for(var ce=0;ce!=392&&Dr[ce]!=F.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Dr[ce]==null){Qf(F.nf,ce);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(Z=cd(o[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!H&&Z.wpx>10){H=!0,$o=Kee;for(var ge=0;ge<q.length;++ge)q[ge]&&am(q[ge])}H&&am(Z),q[Z.Index-1||q.length]=Z;for(var je=0;je<+Z.Span;++je)q[q.length]=Ha(Z);break;case"namedrange":if(o[1]==="/")break;J.Names||(J.Names=[]);var re=$r(o[0]),Se={Name:re.Name,Ref:qv(re.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(Se.Sheet=J.Sheets.length-1),J.Names.push(Se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=n.slice(C,o.index):C=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=cd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?DCe(P,ie,n.slice(T,o.index)):T=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));d3e(X),R.push(X)}else l.push([o[3],!1]),u=cd(o[0]),X={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=cd(o[0]);h["!autofilter"]={ref:qv(De.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return aH(n,r);var _e=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(o[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(T,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else T=o.index+o[0].length;break;case"header":h["!margins"]||bp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].header=+$r(o[0]).Margin);break;case"footer":h["!margins"]||bp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].footer=+$r(o[0]).Margin);break;case"pagemargins":var he=$r(o[0]);h["!margins"]||bp(h["!margins"]={},"xlml"),isNaN(+he.Top)||(h["!margins"].top=+he.Top),isNaN(+he.Left)||(h["!margins"].left=+he.Left),isNaN(+he.Right)||(h["!margins"].right=+he.Right),isNaN(+he.Bottom)||(h["!margins"].bottom=+he.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?o3e(D,ie,U,n.slice(T,o.index)):(U=o,T=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Ie={};return!r.bookSheets&&!r.bookProps&&(Ie.Sheets=d),Ie.SheetNames=f,Ie.Workbook=J,Ie.SSF=Ha(Dr),Ie.Props=P,Ie.Custprops=D,Ie}function Jj(e,t){switch(JD(t=t||{}),t.type||"base64"){case"base64":return ZB(Oc(e),t);case"binary":case"buffer":case"file":return ZB(e,t);case"array":return ZB(fm(e),t)}}function A3e(e,t){var r=[];return e.Props&&r.push(RCe(e.Props,t)),e.Custprops&&r.push(PCe(e.Props,e.Custprops)),r.join("")}function f3e(){return""}function h3e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Gt("NumberFormat",null,{"ss:Format":ga(Dr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Gt("Style",s.join(""),i))}),Gt("Styles",r.join(""))}function xte(e){return Gt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+KD(e.Ref,{r:0,c:0})})}function m3e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(xte(a)))}return Gt("Names",r.join(""))}function p3e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(xte(o)))}return s.join("")}function g3e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Gt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Gt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Gt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Gt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(go("ProtectContents","True")),e["!protect"].objects&&a.push(go("ProtectObjects","True")),e["!protect"].scenarios&&a.push(go("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(go("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(go("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Gt("WorksheetOptions",a.join(""),{xmlns:wc.x})}function v3e(e){return e.map(function(t){var r=MEe(t.t||""),n=Gt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Gt("Comment",n,{"ss:Author":t.a})}).join("")}function x3e(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ga(KD(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=ss(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ga(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ga(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=mh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Dr[14]);break;case"s":f="String",h=LEe(e.v||"");break}var p=mm(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(v+=v3e(e.c)),Gt("Cell",v,o)}function b3e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=px(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function y3e(e,t,r,n){if(!e["!ref"])return"";var a=Hn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){am(b);var _=!!b.width,S=ON(y,b),k={"ss:Index":y+1};_&&(k["ss:Width"]=Yy(S.width)),b.hidden&&(k["ss:Hidden"]="1"),o.push(Gt("Column",null,k))});for(var l=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[b3e(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Ur(p),v=l?(e[u]||[])[f]:e[g];d.push(x3e(v,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function w3e(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?p3e(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?y3e(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(g3e(s,t,e,r)),n.join("")}function E3e(e,t){t||(t={}),e.SSF||(e.SSF=Ha(Dr)),e.SSF&&(Zx(),NN(e.SSF),t.revssf=BN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],mm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(A3e(e,t)),r.push(f3e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Gt("Worksheet",w3e(n,t,e),{"ss:Name":ga(e.SheetNames[n])}));return r[2]=h3e(e,t),r[3]=m3e(e),Ys+Gt("Workbook",r.join(""),{xmlns:wc.ss,"xmlns:o":wc.o,"xmlns:x":wc.x,"xmlns:ss":wc.ss,"xmlns:dt":wc.dt,"xmlns:html":wc.html})}function C3e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=mCe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=pCe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var _3e=[60,1084,2066,2165,2175];function S3e(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=Of(r,r.l),u=Zj[l],d=0;u!=null&&_3e.indexOf(l)>-1;)s=Of(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=Zj[l=Of(r,r.l)];var f=Gi(i);po(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function fA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Dr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||mh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=$y(e.v):e.w=Rp(e.v):e.w=ju(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&Jx(Dr[n]||String(n))){var a=sp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function HE(e,t,r){return{v:e,ixfe:t,t:r}}function N3e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,l=[],u="",d={},f,h="",p,g,v,b,y={},_=[],S,k,B=[],F=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},N=function(Qt){return Qt<8?gp[Qt]:Qt<64&&F[Qt-8]||gp[Qt]},P=function(Qt,bt,Nr){var rr=bt.XF.data;if(!(!rr||!rr.patternType||!Nr||!Nr.cellStyles)){bt.s={},bt.s.patternType=rr.patternType;var nn;(nn=Xy(N(rr.icvFore)))&&(bt.s.fgColor={rgb:nn}),(nn=Xy(N(rr.icvBack)))&&(bt.s.bgColor={rgb:nn})}},D=function(Qt,bt,Nr){if(!(ne>1)&&!(Nr.sheetRows&&Qt.r>=Nr.sheetRows)){if(Nr.cellStyles&&bt.XF&&bt.XF.data&&P(Qt,bt,Nr),delete bt.ixfe,delete bt.XF,f=Qt,h=Ur(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),Nr.cellFormula&&bt.f){for(var rr=0;rr<_.length;++rr)if(!(_[rr][0].s.c>Qt.c||_[rr][0].s.r>Qt.r)&&!(_[rr][0].e.c<Qt.c||_[rr][0].e.r<Qt.r)){bt.F=rn(_[rr][0]),(_[rr][0].s.c!=Qt.c||_[rr][0].s.r!=Qt.r)&&delete bt.f,bt.f&&(bt.f=""+Ho(_[rr][1],i,Qt,V,T));break}}Nr.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=bt):a[h]=bt}},T={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(T.password=t.password);var U,R=[],X=[],q=[],Z=[],H=!1,V=[];V.SheetNames=T.snames,V.sharedf=T.sharedf,V.arrayf=T.arrayf,V.names=[],V.XTI=[];var K=0,ne=0,L=0,W=[],J=[],te;T.codepage=1200,gd(1200);for(var ie=!1;e.l<e.length-1;){var Ae=e.l,oe=e.read_shift(2);if(oe===0&&K===10)break;var ce=e.l===e.length?0:e.read_shift(2),ge=Zj[oe];if(ge&&ge.f){if(t.bookSheets&&K===133&&oe!==133)break;if(K=oe,ge.r===2||ge.r==12){var je=e.read_shift(2);if(ce-=2,!T.enc&&je!==oe&&((je&255)<<8|je>>8)!==oe)throw new Error("rt mismatch: "+je+"!="+oe);ge.r==12&&(e.l+=10,ce-=10)}var re={};if(oe===10?re=ge.f(e,ce,T):re=S3e(oe,ge,e,ce,T),ne==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(oe){case 34:r.opts.Date1904=w.WBProps.date1904=re;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(T.enc||(e.l=0),T.enc=re,!t.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=re;break;case 66:var Se=Number(re);switch(Se){case 21010:Se=1200;break;case 32768:Se=1e4;break;case 32769:Se=1252;break}gd(T.codepage=Se),ie=!0;break;case 317:T.rrtabid=re;break;case 25:T.winlocked=re;break;case 439:r.opts.RefreshAll=re;break;case 12:r.opts.CalcCount=re;break;case 16:r.opts.CalcDelta=re;break;case 17:r.opts.CalcIter=re;break;case 13:r.opts.CalcMode=re;break;case 14:r.opts.CalcPrecision=re;break;case 95:r.opts.CalcSaveRecalc=re;break;case 15:T.CalcRefMode=re;break;case 2211:r.opts.FullCalc=re;break;case 129:re.fDialog&&(a["!type"]="dialog"),re.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),re.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:B.push(re);break;case 430:V.push([re]),V[V.length-1].XTI=[];break;case 35:case 547:V[V.length-1].push(re);break;case 24:case 536:te={Name:re.Name,Ref:Ho(re.rgce,i,null,V,T)},re.itab>0&&(te.Sheet=re.itab-1),V.names.push(te),V[0]||(V[0]=[],V[0].XTI=[]),V[V.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(J[re.itab-1]={ref:rn(re.rgce[0][0][1][2])});break;case 22:T.ExternCount=re;break;case 23:V.length==0&&(V[0]=[],V[0].XTI=[]),V[V.length-1].XTI=V[V.length-1].XTI.concat(re),V.XTI=V.XTI.concat(re);break;case 2196:if(T.biff<8)break;te!=null&&(te.Comment=re[1]);break;case 18:a["!protect"]=re;break;case 19:re!==0&&T.WTF&&console.error("Password verifier: "+re);break;case 133:s[re.pos]=re,T.snames.push(re.name);break;case 10:{if(--ne)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=rn(i),t.sheetRows&&t.sheetRows<=i.e.r){var De=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=rn(i),i.e.r=De}i.e.r++,i.e.c++}R.length>0&&(a["!merges"]=R),X.length>0&&(a["!objects"]=X),q.length>0&&(a["!cols"]=q),Z.length>0&&(a["!rows"]=Z),w.Sheets.push(C)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),T.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(T.biff=5,ie=!0,gd(T.codepage=28591)),T.biff==8&&re.BIFFVer==0&&re.dt==16&&(T.biff=2),ne++)break;if(a=t.dense?[]:{},T.biff<8&&!ie&&(ie=!0,gd(T.codepage=t.codepage||1252)),T.biff<5||re.BIFFVer==0&&re.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-ce,name:u};s[_e.pos]=_e,T.snames.push(u)}else u=(s[Ae]||{name:""}).name;re.dt==32&&(a["!type"]="chart"),re.dt==64&&(a["!type"]="macro"),R=[],X=[],T.arrayf=_=[],q=[],Z=[],H=!1,C={Hidden:(s[Ae]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[re.r]||[])[re.c]:a[Ur({c:re.c,r:re.r})])&&++re.c,S={ixfe:re.ixfe,XF:B[re.ixfe]||{},v:re.val,t:"n"},L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:re.c,r:re.r},S,t);break;case 5:case 517:S={ixfe:re.ixfe,XF:B[re.ixfe],v:re.val,t:re.t},L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:re.c,r:re.r},S,t);break;case 638:S={ixfe:re.ixfe,XF:B[re.ixfe],v:re.rknum,t:"n"},L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:re.c,r:re.r},S,t);break;case 189:for(var he=re.c;he<=re.C;++he){var Ie=re.rkrec[he-re.c][0];S={ixfe:Ie,XF:B[Ie],v:re.rkrec[he-re.c][1],t:"n"},L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:he,r:re.r},S,t)}break;case 6:case 518:case 1030:{if(re.val=="String"){o=re;break}if(S=HE(re.val,re.cell.ixfe,re.tt),S.XF=B[S.ixfe],t.cellFormula){var He=re.formula;if(He&&He[0]&&He[0][0]&&He[0][0][0]=="PtgExp"){var Xe=He[0][0][1][0],ye=He[0][0][1][1],Oe=Ur({r:Xe,c:ye});y[Oe]?S.f=""+Ho(re.formula,i,re.cell,V,T):S.F=((t.dense?(a[Xe]||[])[ye]:a[Oe])||{}).F}else S.f=""+Ho(re.formula,i,re.cell,V,T)}L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D(re.cell,S,t),o=re}break;case 7:case 519:if(o)o.val=re,S=HE(re,o.cell.ixfe,"s"),S.XF=B[S.ixfe],t.cellFormula&&(S.f=""+Ho(o.formula,i,o.cell,V,T)),L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D(o.cell,S,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(re);var Pe=Ur(re[0].s);if(p=t.dense?(a[re[0].s.r]||[])[re[0].s.c]:a[Pe],t.cellFormula&&p){if(!o||!Pe||!p)break;p.f=""+Ho(re[1],i,re[0],V,T),p.F=rn(re[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Ur(o.cell)]=re[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Ur(o.cell)],(p||{}).f=""+Ho(re[0],i,f,V,T)}}break;case 253:S=HE(l[re.isst].t,re.ixfe,"s"),l[re.isst].h&&(S.h=l[re.isst].h),S.XF=B[S.ixfe],L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:re.c,r:re.r},S,t);break;case 513:t.sheetStubs&&(S={ixfe:re.ixfe,XF:B[re.ixfe],t:"z"},L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:re.c,r:re.r},S,t));break;case 190:if(t.sheetStubs)for(var qe=re.c;qe<=re.C;++qe){var Ze=re.ixfe[qe-re.c];S={ixfe:Ze,XF:B[Ze],t:"z"},L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:qe,r:re.r},S,t)}break;case 214:case 516:case 4:S=HE(re.val,re.ixfe,"s"),S.XF=B[S.ixfe],L>0&&(S.z=W[S.ixfe>>8&63]),fA(S,t,r.opts.Date1904),D({c:re.c,r:re.r},S,t);break;case 0:case 512:ne===1&&(i=re);break;case 252:l=re;break;case 1054:if(T.biff==4){W[L++]=re[1];for(var ot=0;ot<L+163&&Dr[ot]!=re[1];++ot);ot>=163&&Qf(re[1],L+163)}else Qf(re[1],re[0]);break;case 30:{W[L++]=re;for(var mt=0;mt<L+163&&Dr[mt]!=re;++mt);mt>=163&&Qf(re,L+163)}break;case 229:R=R.concat(re);break;case 93:X[re.cmo[0]]=T.lastobj=re;break;case 438:T.lastobj.TxO=re;break;case 127:T.lastobj.ImData=re;break;case 440:for(b=re[0].s.r;b<=re[0].e.r;++b)for(v=re[0].s.c;v<=re[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Ur({c:v,r:b})],p&&(p.l=re[1]);break;case 2048:for(b=re[0].s.r;b<=re[0].e.r;++b)for(v=re[0].s.c;v<=re[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Ur({c:v,r:b})],p&&p.l&&(p.l.Tooltip=re[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;p=t.dense?(a[re[0].r]||[])[re[0].c]:a[Ur(re[0])];var Bt=X[re[2]];p||(t.dense?(a[re[0].r]||(a[re[0].r]=[]),p=a[re[0].r][re[0].c]={t:"z"}):p=a[Ur(re[0])]={t:"z"},i.e.r=Math.max(i.e.r,re[0].r),i.s.r=Math.min(i.s.r,re[0].r),i.e.c=Math.max(i.e.c,re[0].c),i.s.c=Math.min(i.s.c,re[0].c)),p.c||(p.c=[]),g={a:re[1],t:Bt.TxO.t},p.c.push(g)}break;case 2173:hNe(B[re.ixfe],re.ext);break;case 125:{if(!T.cellStyles)break;for(;re.e>=re.s;)q[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},H||(H=!0,VD(re.w/256)),am(q[re.e+1])}break;case 520:{var Lt={};re.level!=null&&(Z[re.r]=Lt,Lt.level=re.level),re.hidden&&(Z[re.r]=Lt,Lt.hidden=!0),re.hpt&&(Z[re.r]=Lt,Lt.hpt=re.hpt,Lt.hpx=px(re.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||bp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=re;break;case 161:a["!margins"]||bp(a["!margins"]={}),a["!margins"].header=re.header,a["!margins"].footer=re.footer;break;case 574:re.RTL&&(w.Views[0].RTL=!0);break;case 146:F=re;break;case 2198:U=re;break;case 140:k=re;break;case 442:u?C.CodeName=re||C.name:w.WBProps.CodeName=re||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=ce}return r.SheetNames=Ts(s).sort(function(Ot,Qt){return Number(Ot)-Number(Qt)}).map(function(Ot){return s[Ot].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&J.forEach(function(Ot,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Ot}),r.Strings=l,r.SSF=Ha(Dr),T.enc&&(r.Encryption=T.enc),U&&(r.Themes=U),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),V.names.length>0&&(w.Names=V.names),r.Workbook=w,r}var by={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function k3e(e,t,r){var n=Er.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=OQ(n,Kj,by.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Er.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=OQ(i,Gj,by.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(vee(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function B3e(e,t){var r=[],n=[],a=[],s=0,i,o=uQ(Kj,"n"),l=uQ(Gj,"n");if(e.Props)for(i=Ts(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Ts(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)_ee.indexOf(a[s][0])>-1||gee.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Er.utils.cfb_add(t,"/SummaryInformation",DQ(n,by.SI,l,Gj)),(r.length||u.length)&&Er.utils.cfb_add(t,"/DocumentSummaryInformation",DQ(r,by.DSI,o,Kj,u.length?u:null,by.UDI))}function bte(e,t){t||(t={}),JD(t),xD(),t.codepage&&vD(t.codepage);var r,n;if(e.FullPaths){if(Er.find(e,"/encryption"))throw new Error("File is password-protected");r=Er.find(e,"!CompObj"),n=Er.find(e,"/Workbook")||Er.find(e,"/Book")}else{switch(t.type){case"base64":e=Sc(Oc(e));break;case"binary":e=Sc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}po(e,0),n={content:e}}var a,s;if(r&&C3e(r),t.bookProps&&!t.bookSheets)a={};else{var i=pn?"buffer":"array";if(n&&n.content)a=N3e(n.content,t);else if((s=Er.find(e,"PerfectOffice_MAIN"))&&s.content)a=xp.to_workbook(s.content,(t.type=i,t));else if((s=Er.find(e,"NativeContent_MAIN"))&&s.content)a=xp.to_workbook(s.content,(t.type=i,t));else throw(s=Er.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Er.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=HNe(e))}var o={};return e.FullPaths&&k3e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function T3e(e,t){var r=t||{},n=Er.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Er.utils.cfb_add(n,a,yte(e,r)),r.biff==8&&(e.Props||e.Custprops)&&B3e(e,n),r.biff==8&&e.vbaraw&&VNe(n,Er.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var ew={0:{f:eBe},1:{f:lBe},2:{f:NBe},3:{f:pBe},4:{f:ABe},5:{f:CBe},6:{f:jBe},7:{f:bBe},8:{f:MBe},9:{f:LBe},10:{f:RBe},11:{f:PBe},12:{f:uBe},13:{f:BBe},14:{f:vBe},15:{f:hBe},16:{f:Ate},17:{f:OBe},18:{f:wBe},19:{f:FD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:OTe},40:{},42:{},43:{f:j5e},44:{f:T5e},45:{f:D5e},46:{f:P5e},47:{f:R5e},48:{},49:{f:nCe},50:{},51:{f:gNe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Ree},62:{f:IBe},63:{f:SNe},64:{f:tTe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:el,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:YBe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:iBe},148:{f:nBe,p:16},151:{f:$Be},152:{},153:{f:ITe},154:{},155:{},156:{f:BTe},157:{},158:{},159:{T:1,f:GSe},160:{T:-1},161:{T:1,f:ag},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:UBe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:mNe},336:{T:-1},337:{f:bNe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:$j},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Dee},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:KBe},427:{f:GBe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:WBe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:sBe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:VBe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:$j},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:PNe},633:{T:1},634:{T:-1},635:{T:1,f:DNe},636:{T:-1},637:{f:oCe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:vTe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:rTe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Zj={6:{f:YB},10:{f:a0},12:{f:ci},13:{f:ci},14:{f:Qs},15:{f:Qs},16:{f:Xo},17:{f:Qs},18:{f:Qs},19:{f:ci},20:{f:QQ},21:{f:QQ},23:{f:Dee},24:{f:VQ},25:{f:Qs},26:{},27:{},28:{f:rSe},29:{},34:{f:Qs},35:{f:HQ},38:{f:Xo},39:{f:Xo},40:{f:Xo},41:{f:Xo},42:{f:Qs},43:{f:Qs},47:{f:h5e},49:{f:B_e},51:{f:ci},60:{},61:{f:C_e},64:{f:Qs},65:{f:k_e},66:{f:ci},77:{},80:{},81:{},82:{},85:{f:ci},89:{},90:{},91:{},92:{f:f_e},93:{f:sSe},94:{},95:{f:Qs},96:{},97:{},99:{f:Qs},125:{f:Ree},128:{f:z_e},129:{f:m_e},130:{f:ci},131:{f:Qs},132:{f:Qs},133:{f:p_e},134:{},140:{f:fSe},141:{f:ci},144:{},146:{f:pSe},151:{},152:{},153:{},154:{},155:{},156:{f:ci},157:{},158:{},160:{f:ESe},161:{f:xSe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:U_e},190:{f:Q_e},193:{f:a0},197:{},198:{},199:{},200:{},201:{},202:{f:Qs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ci},220:{},221:{f:Qs},222:{},224:{f:V_e},225:{f:A_e},226:{f:a0},227:{},229:{f:nSe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:v_e},253:{f:I_e},255:{f:b_e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:See},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Qs},353:{f:a0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:W_e},431:{f:Qs},432:{},433:{},434:{},437:{},438:{f:lSe},439:{f:Qs},440:{f:cSe},441:{},442:{f:zw},443:{},444:{f:ci},445:{},446:{},448:{f:a0},449:{f:E_e,r:2},450:{f:a0},512:{f:LQ},513:{f:wSe},515:{f:G_e},516:{f:F_e},517:{f:UQ},519:{f:CSe},520:{f:y_e},523:{},545:{f:zQ},549:{f:PQ},566:{},574:{f:S_e},638:{f:M_e},659:{},1048:{},1054:{f:D_e},1084:{},1212:{f:Z_e},2048:{f:dSe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:ME},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:a0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:gSe,r:12},2173:{f:fNe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Qs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:J_e,r:12},2197:{},2198:{f:oNe,r:12},2199:{},2200:{},2201:{},2202:{f:eSe,r:12},2203:{f:a0},2204:{},2205:{},2206:{},2207:{},2211:{f:w_e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ci},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:bSe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:mSe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:LQ},1:{},2:{f:BSe},3:{f:NSe},4:{f:SSe},5:{f:UQ},7:{f:ISe},8:{},9:{f:ME},11:{},22:{f:ci},30:{f:P_e},31:{},32:{},33:{f:zQ},36:{},37:{f:PQ},50:{f:jSe},62:{},52:{},67:{},68:{f:ci},69:{},86:{},126:{},127:{f:_Se},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:FSe},223:{},234:{},354:{},421:{},518:{f:YB},521:{f:ME},536:{f:VQ},547:{f:HQ},561:{},579:{},1030:{f:YB},1033:{f:ME},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&TD(r)&&e.push(r)}}function I3e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function qw(e,t,r){return e||(e=yt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function j3e(e,t,r,n){var a=yt(9);return qw(a,e,t),Nee(r,n||"b",a),a}function F3e(e,t,r){var n=yt(8+2*r.length);return qw(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function O3e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Ni(Qa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,TSe(r,n,a)):qt(e,3,kSe(r,n,a));return;case"b":case"e":qt(e,5,j3e(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,F3e(r,n,(t.v||"").slice(0,255)));return}qt(e,1,qw(null,r,n))}function D3e(e,t,r,n){var a=Array.isArray(t),s=Hn(t["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=rn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=Ws(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(l[d]=as(d)),i=l[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&O3e(e,f,u,d)}}}function R3e(e,t){for(var r=t||{},n=ql(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,UD(e,16,r)),D3e(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function P3e(e,t,r){qt(e,49,T_e({sz:12,name:"Arial"},r))}function L3e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,R_e(a,t[a],r))})}function M3e(e,t){var r=yt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=yt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),jee(Hn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function U3e(e,t){for(var r=0;r<16;++r)qt(e,224,MQ({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,MQ(n,0,t))})}function Q3e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,uSe(n)),n[1].Tooltip&&qt(e,2048,ASe(n))}delete t["!links"]}function H3e(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,vSe(ON(a,n),a))})}}function V3e(e,t,r,n,a){var s=16+mm(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,Up(r,n,s));return}if(t.bf)qt(e,6,mke(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Ni(Qa(t.v)):t.v;qt(e,515,q_e(r,n,i,s));break;case"b":case"e":qt(e,517,K_e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=qD(a.Strings,t.v,a.revStrings);qt(e,253,j_e(r,n,o,s))}else qt(e,516,O_e(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,Up(r,n,s))}}function z3e(e,t,r){var n=ql(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Hn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}qt(n,2057,UD(r,16,t)),qt(n,13,bu(1)),qt(n,12,bu(100)),qt(n,15,Al(!0)),qt(n,17,Al(!1)),qt(n,16,Lp(.001)),qt(n,95,Al(!0)),qt(n,42,Al(!1)),qt(n,43,Al(!1)),qt(n,130,bu(1)),qt(n,128,$_e()),qt(n,131,Al(!1)),qt(n,132,Al(!1)),u&&H3e(n,s["!cols"]),qt(n,512,L_e(p,t)),u&&(s["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){f=Ws(v);for(var b=p.s.c;b<=p.e.c;++b){v===p.s.r&&(h[b]=as(b)),d=h[b]+f;var y=l?(s[v]||[])[b]:s[d];y&&(V3e(n,y,v,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var _=o.CodeName||o.name||a;return u&&qt(n,574,N_e((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,aSe(s["!merges"])),u&&Q3e(n,s),qt(n,442,kee(_)),u&&M3e(n,s),qt(n,10),n.end()}function $3e(e,t,r){var n=ql(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(qt(n,2057,UD(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,o?bu(1200):null),qt(n,193,KCe(2)),l&&qt(n,191),l&&qt(n,192),qt(n,226),qt(n,92,h_e("SheetJS",r)),qt(n,66,bu(o?1200:1252)),o&&qt(n,353,bu(0)),o&&qt(n,448),qt(n,317,ySe(e.SheetNames.length)),o&&e.vbaraw&&qt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,kee(u))}qt(n,156,bu(17)),qt(n,25,Al(!1)),qt(n,18,Al(!1)),qt(n,19,bu(0)),o&&qt(n,431,Al(!1)),o&&qt(n,444,bu(0)),qt(n,61,__e()),qt(n,64,Al(!1)),qt(n,141,bu(0)),qt(n,34,Al(ETe(e)=="true")),qt(n,14,Al(!0)),o&&qt(n,439,Al(!1)),qt(n,218,bu(0)),P3e(n,e,r),L3e(n,e.SSF,r),U3e(n,r),o&&qt(n,352,Al(!1));var d=n.end(),f=ql();o&&qt(f,140,hSe()),o&&r.Strings&&I3e(f,252,x_e(r.Strings)),qt(f,10);var h=f.end(),p=ql(),g=0,v=0;for(v=0;v<e.SheetNames.length;++v)g+=(o?12:11)+(o?2:1)*e.SheetNames[v].length;var b=d.length+g+h.length;for(v=0;v<e.SheetNames.length;++v){var y=s[v]||{};qt(p,133,g_e({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[v]},r)),b+=t[v].length}var _=p.end();if(g!=_.length)throw new Error("BS8 "+g+" != "+_.length);var S=[];return d.length&&S.push(d),_.length&&S.push(_),h.length&&S.push(h),Gi(S)}function K3e(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ha(Dr)),e&&e.SSF&&(Zx(),NN(e.SSF),r.revssf=BN(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,ZD(r),r.cellXfs=[],mm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=z3e(a,r,e);return n.unshift($3e(e,n,r)),Gi(n)}function yte(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Xl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return K3e(e,t);case 4:case 3:case 2:return R3e(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function eH(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,l=TEe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<l.length;++i){var v=l[i].trim(),b=v.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=v.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var _=y[o].trim();if(_.match(/<t[dh]/i)){for(var S=_,k=0;S.charAt(0)=="<"&&(k=S.indexOf(">"))>-1;)S=S.slice(k+1);for(var B=0;B<g.length;++B){var F=g[B];F.s.c==d&&F.s.r<u&&u<=F.e.r&&(d=F.e.c+1,B=-1)}var w=$r(_.slice(0,_.indexOf(">")));h=w.colspan?+w.colspan:1,((f=+w.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var C=w.t||w["data-t"]||"";if(!S.length){d+=h;continue}if(S=$Z(S),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!S.length){d+=h;continue}var N={t:"s",v:S};r.raw||!S.trim().length||C=="s"||(S==="TRUE"?N={t:"b",v:!0}:S==="FALSE"?N={t:"b",v:!1}:isNaN(Ed(S))?isNaN(hx(S).getDate())||(N={t:"d",v:Qa(S)},r.cellDates||(N={t:"n",v:Ni(N.v)}),N.z=r.dateNF||Dr[14]):N={t:"n",v:Ed(S)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=N):n[Ur({r:u,c:d})]=N,d+=h}}}}return n["!ref"]=rn(p),g.length&&(n["!merges"]=g),n}function G3e(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Ur({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||ND(f.w||(Zf(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Gt("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var q3e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',W3e="</body></html>";function X3e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return hm(eH(r[0],t),t);var n=nR();return r.forEach(function(a,s){aR(n,eH(a,t),"Sheet"+(s+1))}),n}function Y3e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function wte(e,t){var r=t||{},n=r.header!=null?r.header:q3e,a=r.footer!=null?r.footer:W3e,s=[n],i=Xl(e["!ref"]);r.dense=Array.isArray(e),s.push(Y3e(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(G3e(e,i,o,r));return s.push("</table>"+a),s.join("")}function Ete(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?ss(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Xl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,v=0,b=0,y=0,_=0,S=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&v<l;++g){var k=o[g];if(tH(k)){if(n.display)continue;p[v]={hidden:!0}}var B=k.children;for(b=y=0;b<B.length;++b){var F=B[b];if(!(n.display&&tH(F))){var w=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):$Z(F.innerHTML),C=F.getAttribute("data-z")||F.getAttribute("z");for(h=0;h<f.length;++h){var N=f[h];N.s.c==y+s&&N.s.r<v+a&&v+a<=N.e.r&&(y=N.e.c+1-s,h=-1)}S=+F.getAttribute("colspan")||1,((_=+F.getAttribute("rowspan")||1)>1||S>1)&&f.push({s:{r:v+a,c:y+s},e:{r:v+a+(_||1)-1,c:y+s+(S||1)-1}});var P={t:"s",v:w},D=F.getAttribute("data-t")||F.getAttribute("t")||"";w!=null&&(w.length==0?P.t=D||"z":n.raw||w.trim().length==0||D=="s"||(w==="TRUE"?P={t:"b",v:!0}:w==="FALSE"?P={t:"b",v:!1}:isNaN(Ed(w))?isNaN(hx(w).getDate())||(P={t:"d",v:Qa(w)},n.cellDates||(P={t:"n",v:Ni(P.v)}),P.z=n.dateNF||Dr[14]):P={t:"n",v:Ed(w)})),P.z===void 0&&C!=null&&(P.z=C);var T="",U=F.getElementsByTagName("A");if(U&&U.length)for(var R=0;R<U.length&&!(U[R].hasAttribute("href")&&(T=U[R].getAttribute("href"),T.charAt(0)!="#"));++R);T&&T.charAt(0)!="#"&&(P.l={Target:T}),n.dense?(e[v+a]||(e[v+a]=[]),e[v+a][y+s]=P):e[Ur({c:y+s,r:v+a})]=P,u.e.c<y+s&&(u.e.c=y+s),y+=S}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,v-1+a),e["!ref"]=rn(u),v>=l&&(e["!fullref"]=rn((u.e.r=o.length-g+v-1+a,u))),e}function Cte(e,t){var r=t||{},n=r.dense?[]:{};return Ete(n,e,t)}function J3e(e,t){return hm(Cte(e,t),t)}function tH(e){var t="",r=Z3e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Z3e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function eIe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var rH={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function _te(e,t){var r=t||{},n=kD(e),a=[],s,i,o={name:""},l="",u=0,d,f,h={},p=[],g=r.dense?[]:{},v,b,y={value:""},_="",S=0,k=[],B=-1,F=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,N={},P=[],D={},T=0,U=0,R=[],X=1,q=1,Z=[],H={Names:[]},V={},K=["",""],ne=[],L={},W="",J=0,te=!1,ie=!1,Ae=0;for(qy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=qy.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"工作表":v[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?g["!ref"]=rn(w):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(g["!fullref"]=g["!ref"],w.e.r=r.sheetRows-1,g["!ref"]=rn(w)),P.length&&(g["!merges"]=P),R.length&&(g["!rows"]=R),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ie=!1):v[0].charAt(v[0].length-2)!=="/"&&(d=$r(v[0],!1),B=F=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,g=r.dense?[]:{},P=[],R=[],ie=!0);break;case"table-row-group":v[1]==="/"?--C:++C;break;case"table-row":case"行":if(v[1]==="/"){B+=X,X=1;break}if(f=$r(v[0],!1),f.行号?B=f.行号-1:B==-1&&(B=0),X=+f["number-rows-repeated"]||1,X<10)for(Ae=0;Ae<X;++Ae)C>0&&(R[B+Ae]={level:C});F=-1;break;case"covered-table-cell":v[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(g[B]||(g[B]=[]),g[B][F]={t:"z"}):g[Ur({r:B,c:F})]={t:"z"}),_="",k=[];break;case"table-cell":case"数据":if(v[0].charAt(v[0].length-2)==="/")++F,y=$r(v[0],!1),q=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=YQ(Qn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Qn(y["string-value"]||""),r.dense?(g[B]||(g[B]=[]),g[B][F]=b):g[Ur({r:B,c:F})]=b),F+=q-1;else if(v[1]!=="/"){++F,_="",S=0,k=[],q=1;var oe=X?B+X-1:B;if(F>w.e.c&&(w.e.c=F),F<w.s.c&&(w.s.c=F),B<w.s.r&&(w.s.r=B),oe>w.e.r&&(w.e.r=oe),y=$r(v[0],!1),ne=[],L={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Qn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(T=parseInt(y["number-matrix-rows-spanned"],10)||0,U=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:B,c:F},e:{r:B+T-1,c:F+U-1}},b.F=rn(D),Z.push([D,b.F])),y.formula)b.f=YQ(y.formula);else for(Ae=0;Ae<Z.length;++Ae)B>=Z[Ae][0].s.r&&B<=Z[Ae][0].e.r&&F>=Z[Ae][0].s.c&&F<=Z[Ae][0].e.c&&(b.F=Z[Ae][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(T=parseInt(y["number-rows-spanned"],10)||0,U=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:B,c:F},e:{r:B+T-1,c:F+U-1}},P.push(D)),y["number-columns-repeated"]&&(q=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ma(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Qa(y["date-value"]),r.cellDates||(b.t="n",b.v=Ni(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=NEe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=TN(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(_=Qn(y["string-value"]),k=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(te=!1,b.t==="s"&&(b.v=_||"",k.length&&(b.R=k),te=S==0),V.Target&&(b.l=V),ne.length>0&&(b.c=ne,ne=[]),_&&r.cellText!==!1&&(b.w=_),te&&(b.t="z",delete b.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=B))for(var ce=0;ce<X;++ce){if(q=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[B+ce]||(g[B+ce]=[]),g[B+ce][F]=ce==0?b:Ha(b);--q>0;)g[B+ce][F+q]=Ha(b);else for(g[Ur({r:B+ce,c:F})]=b;--q>0;)g[Ur({r:B+ce,c:F+q})]=Ha(b);w.e.c<=F&&(w.e.c=F)}q=parseInt(y["number-columns-repeated"]||"1",10),F+=q-1,q=0,b={},_="",k=[]}V={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s;L.t=_,k.length&&(L.R=k),L.a=W,ne.push(L)}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);W="",J=0,_="",S=0,k=[];break;case"creator":v[1]==="/"?W=n.slice(J,v.index):J=v.index+v[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);_="",S=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(N[o.name]=l,(s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=$r(v[0],!1),a.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(v[0],!1),l+=rH[v[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(v[0],!1),l+=rH[v[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,v.index);break}else u=v.index+v[0].length;break;case"named-range":i=$r(v[0],!1),K=JB(i["cell-range-address"]);var ge={Name:i.name,Ref:K[0]+"!"+K[1]};ie&&(ge.Sheet=p.length),H.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(v[1]==="/"&&(!y||!y["string-value"])){var je=eIe(n.slice(S,v.index));_=(_.length>0?_+`
`:"")+je[0]}else $r(v[0],!1),S=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{K=JB($r(v[0])["target-range-address"]),h[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(V=$r(v[0],!1),!V.href)break;V.Target=Qn(V.href),delete V.href,V.Target.charAt(0)=="#"&&V.Target.indexOf(".")>-1?(K=JB(V.Target.slice(1)),V.Target="#"+K[0]+"!"+K[1]):V.Target.match(/^\.\.[\\\/]/)&&(V.Target=V.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(v)}}var re={Sheets:h,SheetNames:p,Workbook:H};return r.bookSheets&&delete re.Sheets,re}function nH(e,t){t=t||{},vu(e,"META-INF/manifest.xml")&&NCe(li(e,"META-INF/manifest.xml"),t);var r=Nc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=_te(Ca(r),t);return vu(e,"meta.xml")&&(n.Props=mee(li(e,"meta.xml"))),n}function aH(e,t){return _te(e,t)}var tIe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Gy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ys+t}}(),sH=function(){var e=function(s){return ga(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var l=[];l.push('      <table:table table:name="'+ga(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Xl(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var v="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=f.e.r;++u){for(v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+v+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var y=!1,_={},S="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),_["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,_["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){l.push(r);continue}var k=Ur({r:u,c:d}),B=g?(s[u]||[])[d]:s[k];if(B&&B.f&&(_["table:formula"]=ga(yke(B.f)),B.F&&B.F.slice(0,k.length)==k)){var F=Xl(B.F);_["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,_["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!B){l.push(t);continue}switch(B.t){case"b":S=B.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=B.v?"true":"false";break;case"n":S=B.w||String(B.v||0),_["office:value-type"]="float",_["office:value"]=B.v||0;break;case"s":case"str":S=B.v==null?"":B.v,_["office:value-type"]="string";break;case"d":S=B.w||Qa(B.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=Qa(B.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(t);continue}var w=e(S);if(B.l&&B.l.Target){var C=B.l.Target;C=C.charAt(0)=="#"?"#"+wke(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),w=Gt("text:a",w,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+Gt("table:table-cell",Gt("text:p",w,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;am(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Ys],u=Gy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Gy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(hee().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function Ste(e,t){if(t.bookType=="fods")return sH(e,t);var r=CD(),n="",a=[],s=[];return n="mimetype",cn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",cn(r,n,sH(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",cn(r,n,tIe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",cn(r,n,Ys+hee()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",cn(r,n,TCe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",cn(r,n,kCe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Qp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function eF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ca(fm(e))}function rIe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Sc(kA(e))}function nIe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function im(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function iH(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function aIe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function sIe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function tw(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function fa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ns(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=tw(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=tw(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function co(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(fa(n*8+a.type)),a.type==2&&t.push(fa(a.data.length)),t.push(a.data))})}),im(t)}function YD(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function mu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=tw(e,n),s=Wn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ns(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Wn(o.data),u=Ns(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Ns(s[3][0].data)>>>0>0),r.push(i)}return r}function zg(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:fa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:fa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:fa(i.data.length)}],n[2].push({data:co(i.meta),type:2})});var s=co(n);t.push(fa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),im(t)}function iIe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=tw(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[im(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=im(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function pu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(iIe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return im(t)}function $g(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=fa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return im(t)}function oIe(e,t,r,n){var a=Qp(e),s=a.getUint32(4,!0),i=(n>1?12:8)+iH(s&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=iH(s&(n>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function lIe(e,t,r){var n=Qp(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=aIe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function eT(e,t){var r=new Uint8Array(32),n=Qp(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,sIe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function tT(e,t){var r=new Uint8Array(32),n=Qp(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function cIe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return oIe(e,t,r,e[0]);case 5:return lIe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Qo(e){var t=Wn(e);return tw(t[1][0].data)}function oH(e,t){var r=Wn(t.data),n=Ns(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Wn(i.data),l=Ns(o[1][0].data)>>>0;switch(n){case 1:s[l]=eF(o[3][0].data);break;case 8:{var u=e[Qo(o[9][0].data)][0],d=Wn(u.data),f=e[Qo(d[1][0].data)][0],h=Ns(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=Wn(f.data);s[l]=p[3].map(function(g){return eF(g.data)}).join("")}break}}),s}function uIe(e,t){var r,n,a,s,i,o,l,u,d,f,h,p,g,v,b=Wn(e),y=Ns(b[1][0].data)>>>0,_=Ns(b[2][0].data)>>>0,S=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Ns(b[8][0].data)>0||!1,k,B;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)k=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,B=(u=(l=b[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)k=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,B=(v=(g=b[3])==null?void 0:g[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var F=S?4:1,w=Qp(k),C=[],N=0;N<k.length/2;++N){var P=w.getUint16(N*2,!0);P<65535&&C.push([N,P])}if(C.length!=_)throw"Expected ".concat(_," cells, found ").concat(C.length);var D=[];for(N=0;N<C.length-1;++N)D[C[N][0]]=B.subarray(C[N][1]*F,C[N+1][1]*F);return C.length>=1&&(D[C[C.length-1][0]]=B.subarray(C[C.length-1][1]*F)),{R:y,cells:D}}function dIe(e,t){var r,n=Wn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ns(n[7][0].data)>>>0>0?1:0:-1,s=YD(n[5],function(i){return uIe(i,a)});return{nrows:Ns(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function AIe(e,t,r){var n,a=Wn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ns(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ns(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=rn(s);var i=Wn(a[4][0].data),o=oH(e,e[Qo(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?oH(e,e[Qo(i[17][0].data)][0]):[],u=Wn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Wn(f.data),p=e[Qo(h[2][0].data)][0],g=Ns(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var v=dIe(e,p);v.data.forEach(function(b,y){b.forEach(function(_,S){var k=Ur({r:d+y,c:S}),B=cIe(_,o,l);B&&(r[k]=B)})}),d+=v.nrows})}function fIe(e,t){var r=Wn(t.data),n={"!ref":"A1"},a=e[Qo(r[2][0].data)],s=Ns(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return AIe(e,a[0],n),n}function hIe(e,t){var r,n=Wn(t.data),a={name:(r=n[1])!=null&&r[0]?eF(n[1][0].data):"",sheets:[]},s=YD(n[2],Qo);return s.forEach(function(i){e[i].forEach(function(o){var l=Ns(o.meta[1][0].data);l==6e3&&a.sheets.push(fIe(e,o))})}),a}function mIe(e,t){var r=nR(),n=Wn(t.data),a=YD(n[1],Qo);if(a.forEach(function(s){e[s].forEach(function(i){var o=Ns(i.meta[1][0].data);if(o==2){var l=hIe(e,i);l.sheets.forEach(function(u,d){aR(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function rT(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=pu(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=mu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ns(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(u){var d=Ns(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return mIe(s,o)}function pIe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Ns(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Qp(e[7][0].data),d=0,f=[],h=Qp(e[4][0].data),p=0,g=[],v=0;v<t.length;++v){if(t[v]==null){u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535);continue}u.setUint16(v*2,d,!0),h.setUint16(v*2,p,!0);var b,y;switch(typeof t[v]){case"string":b=eT({t:"s",v:t[v]},r),y=tT({t:"s",v:t[v]},r);break;case"number":b=eT({t:"n",v:t[v]},r),y=tT({t:"n",v:t[v]},r);break;case"boolean":b=eT({t:"b",v:t[v]},r),y=tT({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(b),d+=b.length,g.push(y),p+=y.length,++l}for(e[2][0].data=fa(l);v<e[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535,!0);return e[6][0].data=im(f),e[3][0].data=im(g),l}function gIe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Xl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(rn(n)));var s=pS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(W){return W.forEach(function(J){typeof J=="string"&&i.push(J)})});var o={},l=[],u=Er.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,J){return[W,u.FullPaths[J]]}).forEach(function(W){var J=W[0],te=W[1];if(J.type==2&&J.name.match(/\.iwa/)){var ie=J.content,Ae=pu(ie),oe=mu(Ae);oe.forEach(function(ce){l.push(ce.id),o[ce.id]={deps:[],location:te,type:Ns(ce.messages[0].meta[1][0].data)}})}}),l.sort(function(W,J){return W-J});var d=l.filter(function(W){return W>1}).map(function(W){return[W,fa(W)]});u.FileIndex.map(function(W,J){return[W,u.FullPaths[J]]}).forEach(function(W){var J=W[0];if(W[1],!!J.name.match(/\.iwa/)){var te=mu(pu(J.content));te.forEach(function(ie){ie.messages.forEach(function(Ae){d.forEach(function(oe){ie.messages.some(function(ce){return Ns(ce.meta[1][0].data)!=11006&&nIe(ce.data,oe[1])})&&o[oe[0]].deps.push(ie.id)})})})}});for(var f=Er.find(u,o[1].location),h=mu(pu(f.content)),p,g=0;g<h.length;++g){var v=h[g];v.id==1&&(p=v)}var b=Qo(Wn(p.messages[0].data)[1][0].data);for(f=Er.find(u,o[b].location),h=mu(pu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(Wn(p.messages[0].data)[2][0].data),f=Er.find(u,o[b].location),h=mu(pu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(Wn(p.messages[0].data)[2][0].data),f=Er.find(u,o[b].location),h=mu(pu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);var y=Wn(p.messages[0].data);{y[6][0].data=fa(n.e.r+1),y[7][0].data=fa(n.e.c+1);var _=Qo(y[46][0].data),S=Er.find(u,o[_].location),k=mu(pu(S.content));{for(var B=0;B<k.length&&k[B].id!=_;++B);if(k[B].id!=_)throw"Bad ColumnRowUIDMapArchive";var F=Wn(k[B].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var w=0;w<=n.e.c;++w){var C=[];C[1]=C[2]=[{type:0,data:fa(w+420690)}],F[1].push({type:2,data:co(C)}),F[2].push({type:0,data:fa(w)}),F[3].push({type:0,data:fa(w)})}F[4]=[],F[5]=[],F[6]=[];for(var N=0;N<=n.e.r;++N)C=[],C[1]=C[2]=[{type:0,data:fa(N+726270)}],F[4].push({type:2,data:co(C)}),F[5].push({type:0,data:fa(N)}),F[6].push({type:0,data:fa(N)});k[B].messages[0].data=co(F)}S.content=$g(zg(k)),S.size=S.content.length,delete y[46];var P=Wn(y[4][0].data);{P[7][0].data=fa(n.e.r+1);var D=Wn(P[1][0].data),T=Qo(D[2][0].data);S=Er.find(u,o[T].location),k=mu(pu(S.content));{if(k[0].id!=T)throw"Bad HeaderStorageBucket";var U=Wn(k[0].messages[0].data);for(N=0;N<s.length;++N){var R=Wn(U[2][0].data);R[1][0].data=fa(N),R[4][0].data=fa(s[N].length),U[2][N]={type:U[2][0].type,data:co(R)}}k[0].messages[0].data=co(U)}S.content=$g(zg(k)),S.size=S.content.length;var X=Qo(P[2][0].data);S=Er.find(u,o[X].location),k=mu(pu(S.content));{if(k[0].id!=X)throw"Bad HeaderStorageBucket";for(U=Wn(k[0].messages[0].data),w=0;w<=n.e.c;++w)R=Wn(U[2][0].data),R[1][0].data=fa(w),R[4][0].data=fa(n.e.r+1),U[2][w]={type:U[2][0].type,data:co(R)};k[0].messages[0].data=co(U)}S.content=$g(zg(k)),S.size=S.content.length;var q=Qo(P[4][0].data);(function(){for(var W=Er.find(u,o[q].location),J=mu(pu(W.content)),te,ie=0;ie<J.length;++ie){var Ae=J[ie];Ae.id==q&&(te=Ae)}var oe=Wn(te.messages[0].data);{oe[3]=[];var ce=[];i.forEach(function(re,Se){ce[1]=[{type:0,data:fa(Se)}],ce[2]=[{type:0,data:fa(1)}],ce[3]=[{type:2,data:rIe(re)}],oe[3].push({type:2,data:co(ce)})})}te.messages[0].data=co(oe);var ge=zg(J),je=$g(ge);W.content=je,W.size=W.content.length})();var Z=Wn(P[3][0].data);{var H=Z[1][0];delete Z[2];var V=Wn(H.data);{var K=Qo(V[2][0].data);(function(){for(var W=Er.find(u,o[K].location),J=mu(pu(W.content)),te,ie=0;ie<J.length;++ie){var Ae=J[ie];Ae.id==K&&(te=Ae)}var oe=Wn(te.messages[0].data);{delete oe[6],delete Z[7];var ce=new Uint8Array(oe[5][0].data);oe[5]=[];for(var ge=0,je=0;je<=n.e.r;++je){var re=Wn(ce);ge+=pIe(re,s[je],i),re[1][0].data=fa(je),oe[5].push({data:co(re),type:2})}oe[1]=[{type:0,data:fa(n.e.c+1)}],oe[2]=[{type:0,data:fa(n.e.r+1)}],oe[3]=[{type:0,data:fa(ge)}],oe[4]=[{type:0,data:fa(n.e.r+1)}]}te.messages[0].data=co(oe);var Se=zg(J),De=$g(Se);W.content=De,W.size=W.content.length})()}H.data=co(V)}P[3][0].data=co(Z)}y[4][0].data=co(P)}p.messages[0].data=co(y);var ne=zg(h),L=$g(ne);return f.content=L,f.size=f.content.length,u}function Nte(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function JD(e){Nte([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function ZD(e){Nte([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function vIe(e){return En.WS.indexOf(e)>-1?"sheet":e==En.CS?"chart":e==En.DS?"dialog":e==En.MS?"macro":e&&e.length?e:"sheet"}function xIe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,vIe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function bIe(e,t,r,n,a,s,i,o,l,u,d,f){try{s[n]=py(Nc(e,r,!0),t);var h=li(e,t),p;switch(o){case"sheet":p=HTe(h,t,a,l,s[n],u,d,f);break;case"chart":if(p=VTe(h,t,a,l,s[n],u,d,f),!p||!p["!drawel"])break;var g=Vb(p["!drawel"].Target,t),v=Wy(g),b=BNe(Nc(e,g,!0),py(Nc(e,v,!0),g)),y=Vb(b,g),_=Wy(y);p=pTe(Nc(e,y,!0),y,l,py(Nc(e,_,!0),y),u,p);break;case"macro":p=zTe(h,t,a,l,s[n],u,d,f);break;case"dialog":p=$Te(h,t,a,l,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var S=[];s&&s[n]&&Ts(s[n]).forEach(function(k){var B="";if(s[n][k].Type==En.CMNT){B=Vb(s[n][k].Target,t);var F=WTe(li(e,B,!0),B,l);if(!F||!F.length)return;KQ(p,F,!1)}s[n][k].Type==En.TCMNT&&(B=Vb(s[n][k].Target,t),S=S.concat(INe(li(e,B,!0),l)))}),S&&S.length&&KQ(p,S,!0,l.people||[])}catch(k){if(l.WTF)throw k}}function uu(e){return e.charAt(0)=="/"?e.slice(1):e}function yIe(e,t){if(Zx(),t=t||{},JD(t),vu(e,"META-INF/manifest.xml")||vu(e,"objectdata.xml"))return nH(e,t);if(vu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof rT<"u"){if(e.FileIndex)return rT(e);var r=Er.utils.cfb_new();return fQ(e).forEach(function(R){cn(r,R,jEe(e,R))}),rT(r)}throw new Error("Unsupported NUMBERS file")}if(!vu(e,"[Content_Types].xml"))throw vu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):vu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=fQ(e),a=_Ce(Nc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",li(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!li(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(gy=[],a.sst)try{gy=qTe(li(e,uu(a.sst)),a.sst,t)}catch(R){if(t.WTF)throw R}t.cellStyles&&a.themes.length&&(l=GTe(Nc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=KTe(li(e,uu(a.style)),a.style,l,t))}a.links.map(function(R){try{var X=py(Nc(e,Wy(uu(R))),R);return YTe(li(e,uu(R)),X,R,t)}catch{}});var d=QTe(li(e,uu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=li(e,uu(a.coreprops[0]),!0),h&&(f=mee(h)),a.extprops.length!==0&&(h=li(e,uu(a.extprops[0]),!0),h&&jCe(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Nc(e,uu(a.custprops[0]),!0),h&&(p=OCe(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(X){return X.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var v={};t.bookDeps&&a.calcchain&&(v=XTe(li(e,uu(a.calcchain)),a.calcchain));var b=0,y={},_,S;{var k=d.Sheets;f.Worksheets=k.length,f.SheetNames=[];for(var B=0;B!=k.length;++B)f.SheetNames[B]=k[B].name}var F=s?"bin":"xml",w=a.workbooks[0].lastIndexOf("/"),C=(a.workbooks[0].slice(0,w+1)+"_rels/"+a.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");vu(e,C)||(C="xl/_rels/workbook."+F+".rels");var N=py(Nc(e,C,!0),C.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=JTe(li(e,uu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=FNe(li(e,uu(a.people[0])),t)),N&&(N=xIe(N,d.Sheets));var P=li(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var D="sheet";if(N&&N[b]?(_="xl/"+N[b][1].replace(/[\/]?xl\//,""),vu(e,_)||(_=N[b][1]),vu(e,_)||(_=C.replace(/_rels\/.*$/,"")+N[b][1]),D=N[b][2]):(_="xl/worksheets/sheet"+(b+1-P)+"."+F,_=_.replace(/sheet0\./,"sheet.")),S=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var T=!1,U=0;U!=t.sheets.length;++U)typeof t.sheets[U]=="number"&&t.sheets[U]==b&&(T=1),typeof t.sheets[U]=="string"&&t.sheets[U].toLowerCase()==f.SheetNames[b].toLowerCase()&&(T=1);if(!T)continue e}}bIe(e,_,S,f.SheetNames[b],b,y,i,D,t,d,l,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:v,Sheets:i,SheetNames:f.SheetNames,Strings:gy,Styles:u,Themes:l,SSF:Ha(Dr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(R,X){R=R.replace(/^Root Entry[\/]/,""),g.keys.push(R),g.files[R]=e.FileIndex[X]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=li(e,uu(a.vba[0]),!0):a.defaults&&a.defaults.bin===QNe&&(g.vbaraw=li(e,"xl/vbaProject.bin",!0))),g}function wIe(e,t){var r=t||{},n="Workbook",a=Er.find(e,n);try{if(n="/!DataSpaces/Version",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(JSe(a.content),n="/!DataSpaces/DataSpaceMap",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=e5e(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=t5e(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);n5e(a.content)}catch{}if(n="/EncryptionInfo",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=a5e(a.content);if(n="/EncryptedPackage",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function EIe(e,t){return t.bookType=="ods"?Ste(e,t):t.bookType=="numbers"?gIe(e,t):t.bookType=="xlsb"?CIe(e,t):_Ie(e,t)}function CIe(e,t){Cv=1024,e&&!e.SSF&&(e.SSF=Ha(Dr)),e&&e.SSF&&(Zx(),NN(e.SSF),t.revssf=BN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,vy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=ete.indexOf(t.bookType)>-1,a=LD();ZD(t=t||{});var s=CD(),i="",o=0;if(t.cellXfs=[],mm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",cn(s,i,pee(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,cn(s,i,xee(e.Props)),a.extprops.push(i),ha(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",cn(s,i,bee(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,En.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,cn(s,i,e3e(o-1,i,t,e,d)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(f){var p=f["!comments"],g=!1,v="";p&&p.length>0&&(v="xl/comments"+o+"."+r,cn(s,v,n3e(p,v)),a.comments.push(v),ha(d,-1,"../comments"+o+"."+r,En.CMNT),g=!0),f["!legacy"]&&g&&cn(s,"xl/drawings/vmlDrawing"+o+".vml",Jee(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&cn(s,Wy(i),Gv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,cn(s,i,r3e(t.Strings,i,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,cn(s,i,ZTe(e,i)),a.workbooks.push(i),ha(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",cn(s,i,zD(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,cn(s,i,t3e(e,i,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",cn(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,cn(s,i,a3e(i)),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,En.XLMETA),cn(s,"[Content_Types].xml",fee(a,t)),cn(s,"_rels/.rels",Gv(t.rels)),cn(s,"xl/_rels/workbook."+r+".rels",Gv(t.wbrels)),delete t.revssf,delete t.ssf,s}function _Ie(e,t){Cv=1024,e&&!e.SSF&&(e.SSF=Ha(Dr)),e&&e.SSF&&(Zx(),NN(e.SSF),t.revssf=BN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,vy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=ete.indexOf(t.bookType)>-1,a=LD();ZD(t=t||{});var s=CD(),i="",o=0;if(t.cellXfs=[],mm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",cn(s,i,pee(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,cn(s,i,xee(e.Props)),a.extprops.push(i),ha(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",cn(s,i,bee(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,En.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,cn(s,i,dte(o-1,t,e,f)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(h){var g=h["!comments"],v=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(_){_[1].forEach(function(S){S.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,cn(s,b,jNe(g,d,t)),a.threadedcomments.push(b),ha(f,-1,"../threadedComments/threadedComment"+o+"."+r,En.TCMNT)),b="xl/comments"+o+"."+r,cn(s,b,Zee(g)),a.comments.push(b),ha(f,-1,"../comments"+o+"."+r,En.CMNT),v=!0}h["!legacy"]&&v&&cn(s,"xl/drawings/vmlDrawing"+o+".vml",Jee(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&cn(s,Wy(i),Gv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,cn(s,i,Uee(t.Strings,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,cn(s,i,pte(e)),a.workbooks.push(i),ha(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",cn(s,i,zD(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,cn(s,i,qee(e,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",cn(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,cn(s,i,Yee()),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(i="xl/persons/person.xml",cn(s,i,ONe(d)),a.people.push(i),ha(t.wbrels,-1,"persons/person.xml",En.PEOPLE)),cn(s,"[Content_Types].xml",fee(a,t)),cn(s,"_rels/.rels",Gv(t.rels)),cn(s,"xl/_rels/workbook."+r+".rels",Gv(t.wbrels)),delete t.revssf,delete t.ssf,s}function eR(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Oc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function SIe(e,t){return Er.find(e,"EncryptedPackage")?wIe(e,t):bte(e,t)}function NIe(e,t){var r,n=e,a=t||{};return a.type||(a.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=HZ(n,a),yIe(r,a)}function kte(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Jj(e.slice(r),t);default:break e}return mx.to_workbook(e,t)}function kIe(e,t){var r="",n=eR(e,t);switch(t.type){case"base64":r=Oc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Pp(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ca(r)),t.type="binary",kte(r,t)}function BIe(e,t){var r=e;return t.type=="base64"&&(r=Oc(r)),r=Vy.utils.decode(1200,r.slice(2),"str"),t.type="binary",kte(r,t)}function TIe(e){return e.match(/[^\x00-\x7F]/)?kA(e):e}function nT(e,t,r,n){return n?(r.type="string",mx.to_workbook(e,r)):mx.to_workbook(t,r)}function rw(e,t){xD();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return rw(new Uint8Array(e),(r=Ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Wv={},r.dateNF&&(Wv.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=CEe(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=TIe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ha(r),r.type="array",rw(bD(n),r)}switch((a=eR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return SIe(Er.read(n,r),r);break;case 9:if(a[1]<=8)return bte(n,r);break;case 60:return Jj(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return DSe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Lee.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?NIe(n,r):nT(e,n,r,s);case 239:return a[3]===60?Jj(n,r):nT(e,n,r,s);case 255:if(a[1]===254)return BIe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return xp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return xp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Yj.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return $ee.to_workbook(n,r);break;case 10:case 13:case 32:return kIe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return OSe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?Yj.to_workbook(n,r):nT(e,n,r,s)}function Bte(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Qw(t.file,Er.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Er.write(e,t)}function IIe(e,t){var r=Ha(t||{}),n=EIe(e,r);return jIe(n,r)}function jIe(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Er.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(SN(a))}return t.password&&typeof encrypt_agile<"u"?Bte(encrypt_agile(a,t.password),t):t.type==="file"?Qw(t.file,a):t.type=="string"?Ca(a):a}function FIe(e,t){var r=t||{},n=T3e(e,r);return Bte(n,r)}function gA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return zy(kA(n));case"binary":return kA(n);case"string":return e;case"file":return Qw(t.file,n,"utf8");case"buffer":return pn?fh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):gA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function OIe(e,t){switch(t.type){case"base64":return zy(e);case"binary":return e;case"string":return e;case"file":return Qw(t.file,e,"binary");case"buffer":return pn?fh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function VE(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?zy(r):t.type=="string"?Ca(r):r;case"file":return Qw(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Tte(e,t){xD(),STe(e);var r=Ha(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Tte(e,r);return r.type="array",SN(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return gA(E3e(e,r),r);case"slk":case"sylk":return gA(Pee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return gA(wte(e.Sheets[e.SheetNames[a]],r),r);case"txt":return OIe(Ite(e.Sheets[e.SheetNames[a]],r),r);case"csv":return gA(rR(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return gA(Lee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return VE(Yj.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return gA(mx.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return gA($ee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return gA(Mee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return gA(Ste(e,r),r);case"wk1":return VE(xp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return VE(xp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),VE(yte(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),FIe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return IIe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function DIe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function tR(e,t,r){var n={};return n.type="file",n.file=t,DIe(n),Tte(e,n)}function RIe(e,t,r,n,a,s,i,o){var l=Ws(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+l];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var v=g.v;switch(g.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(v==null)if(g.t=="e"&&v===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&v===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?v:Zf(g,v,o);v!=null&&(f=!1)}}return{row:h,isempty:f}}function pS(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Hn(d);break;case"number":l=Hn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var f=Ws(l.s.r),h=[],p=[],g=0,v=0,b=Array.isArray(e),y=l.s.r,_=0,S={};b&&!e[y]&&(e[y]=[]);var k=u.skipHidden&&e["!cols"]||[],B=u.skipHidden&&e["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(k[_]||{}).hidden)switch(h[_]=as(_),r=b?e[y][_]:e[h[_]+f],n){case 1:s[_]=_-l.s.c;break;case 2:s[_]=h[_];break;case 3:s[_]=u.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=Zf(r,null,u),v=S[i]||0,!v)S[i]=1;else{do o=i+"_"+v++;while(S[o]);S[i]=v,S[o]=1}s[_]=o}for(y=l.s.r+a;y<=l.e.r;++y)if(!(B[y]||{}).hidden){var F=RIe(e,l,y,h,n,s,b,u);(F.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=F.row)}return p.length=g,p}var lH=/"/g;function PIe(e,t,r,n,a,s,i,o){for(var l=!0,u=[],d="",f=Ws(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){l=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:Zf(p,null,o));for(var g=0,v=0;g!==d.length;++g)if((v=d.charCodeAt(g))===a||v===s||v===34||o.forceQuotes){d='"'+d.replace(lH,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(l=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(lH,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function rR(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Hn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=as(g));for(var v=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=PIe(e,a,b,f,i,l,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((v++?o:"")+d)));return delete n.dense,r.join("")}function Ite(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=rR(e,t);return r}function LIe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Hn(e["!ref"]),s="",i=[],o,l=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=as(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=Ws(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function jte(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Hn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(v,b){Ts(v).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var _=v[y],S="z",k="",B=Ur({c:o+p,r:i+b+a});u=nw(s,B),_&&typeof _=="object"&&!(_ instanceof Date)?s[B]=_:(typeof _=="number"?S="n":typeof _=="boolean"?S="b":typeof _=="string"?S="s":_ instanceof Date?(S="d",n.cellDates||(S="n",_=Ni(_)),k=n.dateNF||Dr[14]):_===null&&n.nullError&&(S="e",_=0),u?(u.t=S,u.v=_,delete u.w,delete u.R,k&&(u.z=k)):s[B]=u={t:S,v:_},k&&(u.z=k))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=Ws(i);if(a)for(p=0;p<h.length;++p)s[as(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=rn(d),s}function MIe(e,t){return jte(null,e,t)}function nw(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ss(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?nw(e,Ur(t)):nw(e,Ur({r:t,c:r||0}))}function UIe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function nR(){return{SheetNames:[],Sheets:{}}}function aR(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(mte(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function QIe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=UIe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function HIe(e,t){return e.z=t,e}function Fte(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function VIe(e,t,r){return Fte(e,"#"+t,r)}function zIe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function $Ie(e,t,r,n){for(var a=typeof t!="string"?t:Hn(t),s=typeof t=="string"?t:rn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=nw(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e}var _u={encode_col:as,encode_row:Ws,encode_cell:Ur,encode_range:rn,decode_col:jD,decode_row:ID,split_cell:rCe,decode_cell:ss,decode_range:Xl,format_cell:Zf,sheet_add_aoa:iee,sheet_add_json:jte,sheet_add_dom:Ete,aoa_to_sheet:e1,json_to_sheet:MIe,table_to_sheet:Cte,table_to_book:J3e,sheet_to_csv:rR,sheet_to_txt:Ite,sheet_to_json:pS,sheet_to_html:wte,sheet_to_formulae:LIe,sheet_to_row_object_array:pS,sheet_get_cell:nw,book_new:nR,book_append_sheet:aR,book_set_sheet_visibility:QIe,cell_set_number_format:HIe,cell_set_hyperlink:Fte,cell_set_internal_link:VIe,cell_add_comment:zIe,sheet_set_array_formula:$Ie,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const KIe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const l of r)try{const u=Ut(Rr,l),d=await Ss(u),f=d.size;n+=f,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Ut(Rr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=tr(l,In("timestamp",">=",u.toISOString()),Kr("timestamp","desc")),f=await Ss(d),h={};f.docs.forEach(p=>{const g=p.data(),v=new Date(g.timestamp).toLocaleDateString("es-CL");h[v]=(h[v]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},cH=500,Kg=({title:e,value:t,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),aT=({title:e,data:t,colorClass:r})=>{const n=j.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},GIe=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,s]=j.useState(null),[i,o]=j.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});j.useEffect(()=>{n(!0);const f=Lye(g=>{t(g),n(!1)}),h=async()=>{try{const g=await KIe();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:l,userStats:u,moduleStats:d}=j.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),v={today:0,week:0,month:0},b={},y={};e.forEach(k=>{const B=new Date(k.timestamp).getTime();B>=h&&v.today++,B>=p&&v.week++,B>=g&&v.month++;const F=k.userEmail||"Desconocido";b[F]||(b[F]={email:F,today:0,month:0,total:0}),b[F].total++,B>=h&&b[F].today++,B>=g&&b[F].month++,y[k.module]=(y[k.module]||0)+1});const _=Object.values(b).sort((k,B)=>B.total-k.total),S=Object.entries(y).map(([k,B])=>({label:k,value:B})).sort((k,B)=>B.value-k.value);return{stats:v,userStats:_,moduleStats:S}},[e]);return c.jsxs("div",{className:"space-y-8",children:[a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(Kg,{title:"Llamadas Hoy",value:r?"--":l.today,description:`Límite recomendado: ${cH}`,alert:l.today>cH}),c.jsx(Kg,{title:"Llamadas esta Semana",value:r?"--":l.week}),c.jsx(Kg,{title:"Llamadas este Mes",value:r?"--":l.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(aT,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(Kg,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(Kg,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(Kg,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(aT,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(aT,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qIe="type.googleapis.com/google.protobuf.Int64Value",WIe="type.googleapis.com/google.protobuf.UInt64Value";function Ote(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function gS(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>gS(t));if(typeof e=="function"||typeof e=="object")return Ote(e,t=>gS(t));throw new Error("Data cannot be encoded in JSON: "+e)}function gx(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case qIe:case WIe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>gx(t)):typeof e=="function"||typeof e=="object"?Ote(e,t=>gx(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $l extends Bd{constructor(t,r,n){super(`${sR}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,$l.prototype)}}function XIe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function vS(e,t){let r=XIe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!uH[i])return new $l("internal","internal");r=uH[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=gx(a))}}catch{}return r==="ok"?null:new $l(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YIe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Cc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF="us-central1",JIe=/^data: (.*?)(?:\n|$)/;function ZIe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new $l("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class eje{constructor(t,r,n,a,s=tF,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new YIe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=tF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function tje(e,t,r){const n=uh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(L5(e.emulatorOrigin),M5("Functions",!0))}function rje(e,t,r){const n=a=>aje(e,t,a,{});return n.stream=(a,s)=>ije(e,t,a,s),n}async function nje(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function Dte(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function aje(e,t,r,n){const a=e._url(t);return sje(e,a,r,n)}async function sje(e,t,r,n){r=gS(r);const a={data:r},s=await Dte(e,n),i=n.timeout||7e4,o=ZIe(i),l=await Promise.race([nje(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!l)throw new $l("cancelled","Firebase Functions instance was deleted.");const u=vS(l.status,l.json);if(u)throw u;if(!l.json)throw new $l("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new $l("internal","Response is missing data field.");return{data:gx(d)}}function ije(e,t,r,n){const a=e._url(t);return oje(e,a,r,n||{})}async function oje(e,t,r,n){var h;r=gS(r);const a={data:r},s=await Dte(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const v=new $l("cancelled","Request was cancelled.");return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}const g=vS(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,l;const u=new Promise((p,g)=>{o=p,l=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new $l("cancelled","Request was cancelled.");l(p)});const d=i.body.getReader(),f=lje(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:v}=await p.read();return{value:g,done:v}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function lje(e,t,r,n){const a=(i,o)=>{const l=i.match(JIe);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){t(gx(d.result));return}if("message"in d){o.enqueue(gx(d.message));return}if("error"in d){const f=vS(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof $l){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const u=new $l("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new $l("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return l()}catch(u){const d=u instanceof $l?u:vS(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const dH="@firebase/functions",AH="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cje="auth-internal",uje="app-check-internal",dje="messaging-internal";function Aje(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(cje),i=r.getProvider(dje),o=r.getProvider(uje);return new eje(a,s,i,o,n)};K0(new Gf(sR,t,"PUBLIC").setMultipleInstances(!0)),Tu(dH,AH,e),Tu(dH,AH,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(e=U5(),t=tF){const n=Nw(va(e),sR).getImmediate({identifier:t}),a=Z6("functions");return a&&fje(n,...a),n}function fje(e,t,r){tje(va(e),t,r)}function Gg(e,t,r){return rje(va(e),t)}Aje();const fH=Ut(Rr,"usuarios");async function Rte(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",fH);const e=await Ss(fH);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const hH=Object.values(er),sT=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",hje=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,s]=j.useState("Usuarios"),[i,o]=j.useState({nombreCompleto:"",email:"",rut:"",profile:er.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=j.useState(null),[d,f]=j.useState(""),[h,p]=j.useState(""),[g,v]=j.useState(""),[b,y]=j.useState(null),[_,S]=j.useState(null),[k,B]=j.useState(null),F=j.useCallback(async()=>{n(!0);try{const H=await Rte();t(H)}catch(H){console.error("Error al cargar usuarios",H),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);j.useEffect(()=>{F()},[F]);const w=j.useCallback(H=>{const{name:V,value:K}=H.target;o(ne=>({...ne,[V]:K,curso:V==="profile"&&K!==er.ESTUDIANTE?"":ne.curso,cursos:V==="profile"&&K!==er.PROFESORADO?[]:ne.cursos,asignaturas:V==="profile"&&K!==er.PROFESORADO?[]:ne.asignaturas}))},[]),C=j.useCallback((H,V)=>{o(K=>{const ne=K[H]||[],L=ne.includes(V)?ne.filter(W=>W!==V):[...ne,V];return{...K,[H]:L}})},[]),N=j.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:er.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),P=j.useCallback(async H=>{H.preventDefault(),y(null);const{nombreCompleto:V,email:K,profile:ne,curso:L,password:W}=i;if(!V.trim()||!K.trim()){y("Nombre Completo y Email son obligatorios.");return}if(ne===er.ESTUDIANTE&&!L){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(W!=null&&W.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const J=db();try{if(l){const te=Gg(J,"updateUser"),ie={...i,password:(W==null?void 0:W.trim())||void 0,curso:ne===er.ESTUDIANTE?sT(L||""):void 0};await te(ie)}else{const te=Gg(J,"createUser"),ie={...i,curso:ne===er.ESTUDIANTE?sT(L||""):void 0};await te(ie)}await F(),N()}catch(te){console.error("Error al guardar usuario:",te),y(te.message||"Error al guardar el usuario.")}},[i,l,F,N]),D=j.useCallback(H=>{u(H.email),o({nombreCompleto:H.nombreCompleto,email:H.email,rut:H.rut||"",profile:H.profile,password:"",curso:H.curso||"",cursos:H.cursos||[],asignaturas:H.asignaturas||[]}),setTimeout(()=>{const V=document.querySelector("form");V&&V.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),T=j.useCallback(async H=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${H}? Esta acción es irreversible.`))try{const V=db();await Gg(V,"deleteUser")({email:H}),await F()}catch(V){console.error("Error al eliminar usuario:",V),y(V.message||"No se pudo borrar el usuario.")}},[F]),U=async H=>{var W;const V=(W=H.target.files)==null?void 0:W[0];if(!V)return;S({message:"Procesando archivo...",isError:!1});const K=db(),ne=Gg(K,"createUser"),L=new FileReader;L.onload=async J=>{var te;try{const ie=new Uint8Array((te=J.target)==null?void 0:te.result),Ae=rw(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=_u.sheet_to_json(oe);if(ce.length===0){S({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ge=ce.map(_e=>{const he=_e.Nombre||_e.nombre,Ie=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Curso||_e.curso,Xe=_e.RUT||_e.rut;return!he||!Ie||!He?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(he).trim(),email:String(Ie).trim(),profile:er.ESTUDIANTE,curso:sT(String(He).trim()),rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),je=await Promise.all(ge),re=je.filter(_e=>!_e.error).length,Se=je.filter(_e=>_e.error);let De=`Carga completada. ${re} estudiantes agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),S({message:De,isError:Se.length>0}),await F()}catch(ie){S({message:`Error: ${ie.message}`,isError:!0})}},L.readAsArrayBuffer(V),H.target.value=""},R=async H=>{var W;const V=(W=H.target.files)==null?void 0:W[0];if(!V)return;B({message:"Procesando archivo...",isError:!1});const K=db(),ne=Gg(K,"createUser"),L=new FileReader;L.onload=async J=>{var te;try{const ie=new Uint8Array((te=J.target)==null?void 0:te.result),Ae=rw(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=_u.sheet_to_json(oe);if(ce.length===0){B({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ge=ce.map(_e=>{const he=_e.Nombre||_e.nombre,Ie=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Perfil||_e.perfil||_e.Profile||_e.profile,Xe=_e.RUT||_e.rut;return!he||!Ie||!He?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(he).trim(),email:String(Ie).trim(),profile:He,rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),je=await Promise.all(ge),re=je.filter(_e=>!_e.error).length,Se=je.filter(_e=>_e.error);let De=`Carga completada. ${re} usuarios agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),B({message:De,isError:Se.length>0}),await F()}catch(ie){B({message:`Error: ${ie.message}`,isError:!0})}},L.readAsArrayBuffer(V),H.target.value=""},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",q=j.useMemo(()=>Array.from(new Set(e.filter(H=>H.profile===er.ESTUDIANTE&&H.curso).map(H=>H.curso))).sort(),[e]),Z=j.useMemo(()=>e.filter(H=>(d===""||H.nombreCompleto.toLowerCase().includes(d.toLowerCase())||H.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||H.profile===h)&&(g===""||H.curso===g)),[e,d,h,g]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),_&&c.jsx("p",{className:`text-sm mt-2 ${_.isError?"text-red-600":"text-green-600"}`,children:_.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:R,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),k&&c.jsx("p",{className:`text-sm mt-2 ${k.isError?"text-red-600":"text-green-600"}`,children:k.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:w,className:X,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:w,className:X,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:w,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:X})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:w,placeholder:"12.345.678-9",className:X})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:w,className:X,required:!0,children:hH.map(H=>c.jsx("option",{value:H,children:H},H))})]}),i.profile===er.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:w,className:X,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Cs.map(H=>c.jsx("option",{value:H,children:H},H))]})]})]}),i.profile===er.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Cs.map(H=>{var V;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((V=i.cursos)==null?void 0:V.includes(H))||!1,onChange:()=>C("cursos",H),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),i.profile===er.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qi.map(H=>{var V;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((V=i.asignaturas)==null?void 0:V.includes(H))||!1,onChange:()=>C("asignaturas",H),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const H=db(),K=await Gg(H,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",K),y("✅ Custom claim agregado exitosamente")}catch(H){console.error("❌ Error al agregar custom claim:",H),y(`Error: ${H.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var H,V,K,ne,L;try{const{auth:W}=await fx(async()=>{const{auth:ie}=await Promise.resolve().then(()=>EJ);return{auth:ie}},void 0);console.log("🔍 Usuario actual:",(H=W.currentUser)==null?void 0:H.email);const J=await((V=W.currentUser)==null?void 0:V.getIdToken(!0));console.log("🔑 Token refreshed:",!!J);const te=await((K=W.currentUser)==null?void 0:K.getIdTokenResult());console.log("📋 Claims completos:",te==null?void 0:te.claims),console.log("👤 Profile claim:",(ne=te==null?void 0:te.claims)==null?void 0:ne.profile),((L=te==null?void 0:te.claims)==null?void 0:L.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(W){console.error("❌ Error verificando token:",W),y(`Error verificando token: ${W.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:H=>f(H.target.value),className:X})}),c.jsx("div",{children:c.jsxs("select",{value:h,onChange:H=>p(H.target.value),className:X,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),hH.map(H=>c.jsx("option",{value:H,children:H},H))]})}),c.jsx("div",{children:c.jsxs("select",{value:g,onChange:H=>v(H.target.value),className:X,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),q.map(H=>c.jsx("option",{value:H,children:H},H))]})})]}),r?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:H.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:H.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H.profile===er.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":H.profile===er.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:H.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[H.profile===er.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:H.curso||"Sin curso"}),H.profile===er.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[H.cursos&&H.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.cursos.slice(0,3).map(V=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:V},V)),H.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.cursos.length-3]})]})]}),H.asignaturas&&H.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.asignaturas.slice(0,2).map(V=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:V},V)),H.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.asignaturas.length-2]})]})]}),(!H.cursos||H.cursos.length===0)&&(!H.asignaturas||H.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),H.profile!==er.ESTUDIANTE&&H.profile!==er.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>D(H),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>T(H.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},H.email))})]}),Z.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&c.jsx(GIe,{})]})},vx="seguimiento_dual_records",mje=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},pje=e=>{const t=tr(Ut(jt,vx),Kr("nombreEstudiante","asc"));return vr(t,n=>{const a=n.docs.map(s=>mje(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},xS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=br.fromDate(new Date(t[n]+"T00:00:00")))}),t},gje=async e=>{try{const t=xS(e);return(await Jn(Ut(jt,vx),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},mH=async(e,t)=>{try{const r=hr(jt,vx,e),n=xS(t);await Ji(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},vje=async e=>{try{const t=hr(jt,vx,e);await Is(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},xje=async e=>{const t=mN(jt),r=Ut(jt,vx);let n=0,a=0;for(const s of e){const i=tr(r,In("rutEstudiante","==",s.rutEstudiante)),o=await Ss(i);if(o.empty){const l=hr(r);t.set(l,xS(s)),a++}else{const l=o.docs[0].id,u=hr(jt,vx,l);t.set(u,xS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},bje={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},yje=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},wje=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},Eje=({record:e,onSave:t,onClose:r})=>{const[n,a]=j.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:f,checked:h}=l.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Cje=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),a=j.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:mp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:TB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=j.useState(a),[o,l]=j.useState(null),[u,d]=j.useState(""),[f,h]=j.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=j.useState(null),[v,b]=j.useState(null),[y,_]=j.useState(!1),[S,k]=j.useState(null);j.useEffect(()=>{n(!0);const H=pje(V=>{t(V),n(!1)});return()=>H()},[]);const B=j.useCallback(H=>{const{name:V,value:K}=H.target;i(ne=>({...ne,[V]:K}))},[]),F=j.useCallback(H=>{const{name:V,value:K}=H.target;h(ne=>({...ne,[V]:K}))},[]),w=j.useCallback(()=>{i(a),l(null),g(null)},[a]),C=async H=>{H.preventDefault(),g(null);const K=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ne=>{var L;return!((L=s[ne])!=null&&L.trim())});if(K){g(`El campo '${K}' es obligatorio.`);return}try{o?await mH(o,s):await gje(s),w()}catch(ne){console.error(ne),g("No se pudo guardar el registro.")}},N=j.useCallback(H=>{window.scrollTo({top:0,behavior:"smooth"}),l(H.id),i(H)},[]),P=async H=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await vje(H)}catch(V){console.error(V),g("No se pudo eliminar el registro.")}},D=H=>{k(H),_(!0)},T=()=>{k(null),_(!1)},U=async H=>{try{await mH(H.id,H),T()}catch(V){console.error(V),alert("No se pudieron guardar los cambios de supervisión.")}},R=()=>{const H=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],V=_u.aoa_to_sheet([H]),K=_u.book_new();_u.book_append_sheet(K,V,"Plantilla"),tR(K,"Plantilla_Seguimiento_Dual.xlsx")},X=H=>{var ne;const V=(ne=H.target.files)==null?void 0:ne[0];if(!V)return;b({message:"Procesando archivo...",isError:!1});const K=new FileReader;K.onload=async L=>{var W;try{const J=new Uint8Array((W=L.target)==null?void 0:W.result),te=rw(J,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ie=te.SheetNames[0],Ae=te.Sheets[ie],oe=_u.sheet_to_json(Ae,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo está vacío.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ge=Object.keys(oe[0]).map(De=>De.trim().toLowerCase()),re=["nombre","rut","curso 2025","empresa","estado"].find(De=>!ge.includes(De));if(re)throw new Error(`Falta la columna requerida: '${re}'`);const Se=oe.map((De,_e)=>{try{const he={};for(const Ie in De){const He=ce[Ie.trim().toLowerCase()];if(He){let Xe=De[Ie];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(He)?(Xe=yje(Xe),Xe&&(he[He]=Xe)):He.includes("realizada")?he[He]=wje(Xe):Xe!=null&&Xe!==""&&(he[He]=String(Xe).trim())}}return!he.nombreEstudiante||!he.rutEstudiante?(console.warn(`Fila ${_e+2}: Faltan campos requeridos`),null):he}catch(he){return console.error(`Error procesando fila ${_e+2}:`,he),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",Se),Se.length>0){const{updated:De,created:_e}=await xje(Se);b({message:`Carga exitosa. ${_e} registros creados, ${De} actualizados.`,isError:!1})}else b({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(J){console.error("Error completo:",J),b({message:`Error al procesar el archivo: ${J.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},K.readAsArrayBuffer(V)},q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=j.useMemo(()=>e.filter(H=>(u===""||H.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||H.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||H.rutEstudiante.includes(u))&&(f.curso===""||H.curso===f.curso)&&(f.empresa===""||H.nombreEmpresa===f.empresa)&&(f.estado===""||H.estado===f.estado)&&(f.comuna===""||H.comuna===f.comuna)&&(f.profesor===""||H.profesorTutorEmpresa===f.profesor)).sort((H,V)=>H.nombreEstudiante.localeCompare(V.nombreEstudiante)),[e,u,f]);return j.useMemo(()=>{const H=new Set,V=new Set;return e.forEach(K=>{K.nombreEmpresa&&H.add(K.nombreEmpresa),K.comuna&&V.add(K.comuna)}),{empresas:Array.from(H).sort(),comunas:Array.from(V).sort()}},[e]),r?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:B,className:q,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:B,className:q,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:s.curso,onChange:B,className:q,required:!0,children:mp.map(H=>c.jsx("option",{value:H,children:H},H))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:B,className:q,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),Ej.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:B,className:q,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:B,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:B,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:B,className:q})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:s.estado,onChange:B,className:q,children:TB.map(H=>c.jsx("option",{value:H,children:H},H))})]})]}),s.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:B,className:`${q} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:B,className:`${q} border-red-300`})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:R,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:X,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),v&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${v.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:v.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:H=>d(H.target.value),className:`${q} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:f.curso,onChange:F,className:q,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),mp.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"estado",value:f.estado,onChange:F,className:q,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),TB.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"profesor",value:f.profesor,onChange:F,className:q,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),Ej.map(H=>c.jsx("option",{children:H},H))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:H.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:H.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${bje[H.estado]}`,children:H.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>D(H),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>N(H),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>P(H.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},H.id))})]})})]}),y&&S&&c.jsx(Eje,{record:S,onClose:T,onSave:U})]})},Pte="actividades_remotas",Lte="respuestas_actividades",Mte="pruebas_estandarizadas",_je="usuarios",Ute=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},iR=e=>{const t=Ute(e);return t?t.toISOString():void 0},bS=e=>{const t=Ute(e);return t?t.toISOString().split("T")[0]:void 0},Qte=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:br.fromDate(t)},Hte=e=>br.fromDate(new Date(e||new Date().toISOString())),Sje=e=>!!e&&/^data:/.test(e),aw=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(aw);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=aw(n))}),t},Nje=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},kje=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:iR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:bS(t.plazoEntrega)||bS(new Date)}},Bje=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:iR(t.fechaCompletado)||new Date().toISOString()}},Tje=e=>{const t=e.data()||{};return{id:e.id,...t}},Ije=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:iR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:bS(t.plazoEntrega)||bS(new Date)}},jje=e=>{const t=tr(Ut(jt,Pte),Kr("fechaCreacion","desc"));return vr(t,r=>e(r.docs.map(kje)),r=>{console.error("subscribeToActividades error:",r),e([])})},Fje=(e,t)=>{const r=Ut(jt,Lte),n=tr(r,Kr("fechaCompletado","desc"));return vr(n,a=>e(a.docs.map(Bje)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},Oje=e=>{const t=tr(Ut(jt,_je),Kr("nombreCompleto","asc"));return vr(t,r=>e(r.docs.map(Tje)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},Dje=e=>{const t=tr(Ut(jt,Mte),Kr("fechaCreacion","desc"));return vr(t,r=>e(r.docs.map(Ije)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},Rje=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=aw({...a,fechaCreacion:Hte(r),plazoEntrega:Qte(n)});return(await Jn(Ut(jt,Pte),s)).id},Pje=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=aw({...a,fechaCreacion:Hte(r),plazoEntrega:Qte(n)});return(await Jn(Ut(jt,Mte),s)).id},Lje=async(e,t)=>{const r=aw(t);await Ah(hr(jt,Lte,e),r)},Mje=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},Uje=async(e,t,r)=>{const{bytes:n,contentType:a}=Nje(e),s=Date.now(),i=t.replace(/\s+/g,"_"),o=`recursos/${r}/${s}/${i}`,l=tD(tbe,o);await ZO(l,n,{contentType:a});const u=await eD(l);return{nombre:t,url:u}},Qje=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(Sje(i==null?void 0:i.url)){const l=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return Uje(i.url,l,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return Rje(a)},iT=e=>e?new Date(e).toLocaleDateString("es-CL"):"",Hje=e=>e?new Date(e).toLocaleString("es-CL"):"",Vje=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),qa=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},oi=(e,t)=>{if(t&&qa(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>oi(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Pl=(e,t,...r)=>{if(qa(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=oi(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Pa=({content:e,context:t="unknown"})=>{try{const r=oi(e,`UltraSafeRenderer-${t}`);return c.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),c.jsx("span",{children:"[Error al mostrar contenido]"})}},oT={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},lT=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],zje=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,u]=j.useState(null),[d,f]=j.useState(null),[h,p]=j.useState(!1),[g,v]=j.useState(!1),[b,y]=j.useState(!1),[_,S]=j.useState(!1),[k,B]=j.useState(!1),[F,w]=j.useState(!0),[C,N]=j.useState(null),[P,D]=j.useState(""),[T,U]=j.useState(null),[R,X]=j.useState(null),[q,Z]=j.useState([]),[H,V]=j.useState("actividades"),[K,ne]=j.useState(null),[L,W]=j.useState([]),[J,te]=j.useState(""),ie={asignatura:qi[0],nivel:wv[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[Ae,oe]=j.useState(ie),ce={asignatura:qi[0],nivel:wv[0],contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ge,je]=j.useState(ce);j.useEffect(()=>{w(!0);const vt=jje(t),pt=Dje(n),Je=Fje(s),gt=Oje(dt=>{o(dt),w(!1)});return()=>{vt(),pt(),Je(),gt()}},[]);const re=vt=>{oe(pt=>({...pt,[vt.target.name]:vt.target.value}))},Se=vt=>{je(pt=>({...pt,[vt.target.name]:vt.target.value}))},De=vt=>{oe(pt=>({...pt,recursos:{...pt.recursos,[vt.target.name]:vt.target.value}}))},_e=vt=>{vt.target.files&&Z(Array.from(vt.target.files))},he=vt=>{oe(pt=>{const Je=pt.tipos.includes(vt)?pt.tipos.filter(dt=>dt!==vt):[...pt.tipos,vt],gt={...pt.cantidadPreguntas};return Je.includes(vt)?gt[vt]||(gt[vt]=oT[vt][0]):delete gt[vt],{...pt,tipos:Je,cantidadPreguntas:gt}})},Ie=(vt,pt)=>{oe(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[vt]:pt}}))},He=(vt,pt=!1)=>{(pt?je:oe)(gt=>{const dt=gt.cursosDestino||[],Dt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,cursosDestino:Dt}})},Xe=(vt,pt=!1)=>{(pt?je:oe)(gt=>{const dt=gt.estudiantesDestino||[],Dt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,estudiantesDestino:Dt}})},ye=()=>{const{tipos:vt,contenido:pt,asignatura:Je,nivel:gt,cantidadPreguntas:dt}=Ae;let Dt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${pt}"
Asignatura: ${Je}
Nivel: ${gt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return vt.forEach(zt=>{const Pr=dt[zt]||oT[zt][0];switch(zt){case"Quiz":Dt+=`- "Quiz": Array de ${Pr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensión de Lectura":Dt+=`- "Comprensión de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${Pr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Términos Pareados":Dt+=`- "Términos Pareados": Array de ${Pr} { concepto, definicion }
`;break;case"Desarrollo":Dt+=`- "Desarrollo": Array de ${Pr} { pregunta, rubrica }
`;break}}),Dt},Oe=()=>{const{contenido:vt,objetivosAprendizaje:pt,asignatura:Je,nivel:gt}=ge;return`Eres experto en evaluación educativa y diseño de pruebas SIMCE.
Responde SOLO con JSON válido.

INFORMACIÓN:
- Asignatura: ${Je}
- Nivel: ${gt}
- Contenido: ${vt}
- Objetivos: ${pt}

{
  "titulo": "Título",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opción A", "Opción B", "Opción C", "Opción D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Breve explicación",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades válidas: ${lT.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function Pe(vt,pt){if(console.log(`🔍 Adaptando contenido para ${vt}:`,pt),qa(pt,`autoAdaptContent-${vt}`),vt==="Desarrollo"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(qa(Je,`desarrollo-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return dt?{pregunta:Pl(dt[1],`desarrollo-pregunta-${gt}`),rubrica:Pl(dt[2],`desarrollo-rubrica-${gt}`)}:{pregunta:Pl(Je,`desarrollo-pregunta-simple-${gt}`),rubrica:""}}if(Je&&typeof Je=="object"){const dt=Pl(Je,`desarrollo-obj-pregunta-${gt}`,"pregunta","Pregunta","texto");let Dt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const zt=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;Dt=oi(zt,`desarrollo-rubrica-${gt}`)}return{pregunta:dt,rubrica:Dt}}return{pregunta:oi(Je,`desarrollo-fallback-${gt}`),rubrica:""}});if(vt==="Términos Pareados"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(qa(Je,`pareados-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.+?)[\s:-–]+(.+)$/);return dt?{id:gt,concepto:Pl(dt[1],`pareados-concepto-${gt}`),definicion:Pl(dt[2],`pareados-definicion-${gt}`)}:{id:gt,concepto:Pl(Je,`pareados-concepto-simple-${gt}`),definicion:""}}return Je&&typeof Je=="object"?{id:gt,concepto:Pl(Je,`pareados-obj-concepto-${gt}`,"concepto","termino"),definicion:Pl(Je,`pareados-obj-definicion-${gt}`,"definicion","significado")}:{id:gt,concepto:oi(Je,`pareados-fallback-${gt}`),definicion:""}});if(vt==="Comprensión de Lectura"){if(qa(pt,"comprension-lectura-input"),pt&&typeof pt=="object"&&!Array.isArray(pt)&&Array.isArray(pt.preguntas))return{texto:Pl(pt,"comprension-texto","texto"),preguntas:pt.preguntas.map((Je,gt)=>(qa(Je,`comprension-pregunta-${gt}`),{pregunta:Pl(Je,`comprension-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Dt)=>oi(dt,`comprension-opcion-${gt}-${Dt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`comprension-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(pt)){const Je=pt.map((dt,Dt)=>Pl(dt,`comprension-bloque-${Dt}`,"texto")).join(`

---

`),gt=pt.flatMap((dt,Dt)=>(qa(dt,`comprension-bloque-preguntas-${Dt}`),Array.isArray(dt.preguntas)?dt.preguntas:[]));return{texto:Je,preguntas:gt.map((dt,Dt)=>(qa(dt,`comprension-combined-pregunta-${Dt}`),{pregunta:Pl(dt,`comprension-combined-pregunta-${Dt}`,"pregunta"),opciones:Array.isArray(dt.opciones)?dt.opciones.map((zt,Pr)=>oi(zt,`comprension-combined-opcion-${Dt}-${Pr}`)):[],respuestaCorrecta:oi(dt.respuestaCorrecta,`comprension-combined-respuesta-${Dt}`),puntaje:typeof dt.puntaje=="number"?dt.puntaje:1}))}}}return vt==="Quiz"&&Array.isArray(pt)?pt.map((Je,gt)=>(qa(Je,`quiz-item-${gt}`),{pregunta:Pl(Je,`quiz-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Dt)=>oi(dt,`quiz-opcion-${gt}-${Dt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`quiz-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):pt}const qe=async vt=>{var pt;if(vt.preventDefault(),!Ae.contenido.trim()||Ae.tipos.length===0){N("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),N(null);try{const Je=await Promise.all(q.map(async cr=>({nombre:cr.name,url:await Vje(cr)}))),gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Dt=new os(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),zt=ye();let gn=await(await(await Dt.generateContent(zt)).response).text();gn=gn.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const vn=gn.match(/\{[\s\S]*\}/);if(!vn)throw new Error("La IA no devolvió JSON válido.");const $t=JSON.parse(vn[0]);console.log("🔍 Datos generados por IA:",$t),qa($t,"generated-data");const tn={};for(const cr of Ae.tipos){const Yr=(pt=$t.actividades)==null?void 0:pt[cr];console.log(`🔍 Contenido crudo para ${cr}:`,Yr),qa(Yr,`raw-content-${cr}`),tn[cr]=Pe(cr,Yr),console.log(`🔍 Contenido adaptado para ${cr}:`,tn[cr]),qa(tn[cr],`adapted-content-${cr}`)}const en={id:"",fechaCreacion:new Date().toISOString(),...Ae,recursos:{...Ae.recursos,archivos:Je},introduccion:oi($t.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:tn};console.log("🔍 Actividad final:",en),qa(en,"new-actividad"),U(en)}catch(Je){N(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},Ze=async vt=>{if(vt.preventDefault(),!ge.contenido.trim()||!ge.objetivosAprendizaje.trim()){N("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),N(null);try{const pt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",gt=new os(pt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),dt=Oe();let Pr=await(await(await gt.generateContent(dt)).response).text();Pr=Pr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Xr=Pr.match(/\{[\s\S]*\}/);if(!Xr)throw new Error("No se encontró JSON válido en la respuesta.");const gn=Xr[0].replace(/,(\s*[}\]])/g,"$1"),vn=JSON.parse(gn);if(!vn.preguntas||!Array.isArray(vn.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const $t=(vn.textos||[]).map((cr,Yr)=>({id:cr.id||Yr+1,titulo:oi(cr.titulo,`texto-titulo-${Yr}`)||`Texto ${Yr+1}`,contenido:oi(cr.contenido,`texto-contenido-${Yr}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(cr.tipo)?cr.tipo:"informativo",palabras:cr.palabras||(cr.contenido?String(cr.contenido).split(" ").length:0)})),tn=vn.preguntas.slice(0,30).map((cr,Yr)=>({numero:cr.numero||Yr+1,pregunta:oi(cr.pregunta,`pregunta-${Yr}`)||`Pregunta ${Yr+1}`,opciones:Array.isArray(cr.opciones)&&cr.opciones.length>=4?cr.opciones.slice(0,4).map((ta,fe)=>oi(ta,`pregunta-opcion-${Yr}-${fe}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(cr.respuestaCorrecta)?cr.respuestaCorrecta:"A",habilidad:lT.includes(cr.habilidad)?cr.habilidad:lT[0],justificacion:oi(cr.justificacion,`justificacion-${Yr}`)||"Justificación no disponible",...cr.textoId&&typeof cr.textoId=="number"?{textoId:cr.textoId}:{}})),en={id:"",fechaCreacion:new Date().toISOString(),...ge,titulo:oi(vn.titulo,"prueba-titulo")||`Prueba ${ge.asignatura}`,instrucciones:oi(vn.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:$t,preguntas:tn};X(en)}catch(pt){N(`Error al generar la prueba: ${(pt==null?void 0:pt.message)||pt}`)}finally{y(!1)}},ot=async()=>{if(T)try{S(!0),await Qje(T),oe(ie),Z([]),p(!1),U(null)}catch(vt){console.error("Error al guardar la actividad con archivos:",vt),N("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{S(!1)}},mt=async()=>{if(R)try{S(!0);const vt={...R,cursosDestino:R.cursosDestino||[],estudiantesDestino:R.estudiantesDestino||[],textos:R.textos||[],preguntas:R.preguntas.map(pt=>({...pt,textoId:pt.textoId||null}))};await Pje(vt),je(ce),v(!1),X(null)}catch(vt){console.error("Error al guardar la prueba:",vt),N("No se pudo guardar la prueba.")}finally{S(!1)}},Bt=j.useMemo(()=>{var Je,gt,dt,Dt;const vt=l||d;if(!vt||!i.length)return[];const pt=new Map;if(!((Je=vt.cursosDestino)!=null&&Je.length)&&!((gt=vt.estudiantesDestino)!=null&&gt.length)){const zt=vt.nivel.charAt(0);i.filter(Pr=>{var Xr;return Pr.profile===er.ESTUDIANTE&&((Xr=Pr.curso)==null?void 0:Xr.startsWith(zt))}).forEach(Pr=>pt.set(Pr.id,Pr))}else(dt=vt.cursosDestino)!=null&&dt.length&&i.filter(zt=>zt.profile===er.ESTUDIANTE&&vt.cursosDestino.includes(zt.curso||"")).forEach(zt=>pt.set(zt.id,zt)),(Dt=vt.estudiantesDestino)!=null&&Dt.length&&i.filter(zt=>zt.profile===er.ESTUDIANTE&&vt.estudiantesDestino.includes(zt.nombreCompleto)).forEach(zt=>pt.set(zt.id,zt));return Array.from(pt.values()).sort((zt,Pr)=>zt.nombreCompleto.localeCompare(Pr.nombreCompleto))},[l,d,i]),Lt=j.useMemo(()=>{const vt=(l==null?void 0:l.id)||(d==null?void 0:d.id);return a.filter(pt=>pt.actividadId===vt)},[a,l,d]),Ot=j.useMemo(()=>i.filter(vt=>vt.profile===er.ESTUDIANTE).sort((vt,pt)=>vt.nombreCompleto.localeCompare(pt.nombreCompleto)),[i]),Qt=j.useMemo(()=>P.trim()?Ot.filter(vt=>vt.nombreCompleto.toLowerCase().includes(P.toLowerCase())):Ot,[Ot,P]),bt=()=>c.jsxs("div",{className:"flex space-x-1 mb-6",children:[c.jsx("button",{onClick:()=>V("actividades"),className:`px-4 py-2 rounded-lg font-semibold ${H==="actividades"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>V("pruebas"),className:`px-4 py-2 rounded-lg font-semibold ${H==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Pruebas Estandarizadas"})]}),Nr=()=>{var vt,pt,Je;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l?c.jsxs(c.Fragment,{children:[c.jsx(Pa,{content:l.asignatura,context:"actividad-asignatura"})," - ",l.tipos.join(", ")]}):c.jsx(Pa,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",(l==null?void 0:l.nivel)||(d==null?void 0:d.nivel)," | Plazo:"," ",iT((l==null?void 0:l.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),c.jsx("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((vt=l==null?void 0:l.tipos)==null?void 0:vt.includes("Desarrollo"))&&c.jsx("th",{className:"px-4 py-3"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Bt.map(gt=>{var Dt;const dt=Lt.find(zt=>zt.estudianteId===gt.id);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:gt.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?`${dt.puntaje}/${dt.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:dt?c.jsx("span",{className:parseFloat(dt.nota)>=4?"text-green-600":"text-red-600",children:dt.nota}):"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?Hje(dt.fechaCompletado):"-"}),((Dt=l==null?void 0:l.tipos)==null?void 0:Dt.includes("Desarrollo"))&&c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?c.jsx("button",{onClick:()=>{var Pr,Xr,gn;ne(dt);const zt=Array.from({length:((Xr=(Pr=l.generatedContent)==null?void 0:Pr.Desarrollo)==null?void 0:Xr.length)||0},(vn,$t)=>({index:$t,puntaje:0,observacion:""}));W(zt),te(((gn=dt==null?void 0:dt.revisionDocente)==null?void 0:gn.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):c.jsx("span",{className:"text-slate-400",children:"-"})})]},gt.id)})})]})})]}),K&&((pt=l==null?void 0:l.tipos)==null?void 0:pt.includes("Desarrollo"))&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(K==null?void 0:K.estudianteNombre)||""]}),c.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=l.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((gt,dt)=>{var Dt,zt;return console.log(`🔍 Renderizando item desarrollo ${dt}:`,gt),qa(gt,`revision-item-${dt}`),c.jsxs("div",{className:"p-3 border rounded-lg",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`revision-pregunta-${dt}`})]}),gt.rubrica&&c.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[c.jsx("strong",{children:"Rúbrica:"})," ",c.jsx(Pa,{content:gt.rubrica,context:`revision-rubrica-${dt}`})]}),c.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[c.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),c.jsx("input",{type:"number",min:0,step:.5,value:((Dt=L[dt])==null?void 0:Dt.puntaje)??0,onChange:Pr=>{const Xr=Number(Pr.target.value)||0;W(gn=>{const vn=[...gn];return vn[dt]={...vn[dt]||{index:dt,puntaje:0},puntaje:Xr},vn})},className:"w-24 border-slate-300 rounded-md"}),c.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((zt=L[dt])==null?void 0:zt.observacion)||"",onChange:Pr=>{const Xr=Pr.target.value;W(gn=>{const vn=[...gn];return vn[dt]={...vn[dt]||{index:dt,puntaje:0},observacion:Xr},vn})},className:"flex-1 border-slate-300 rounded-md"})]})]},dt)})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{rows:3,value:J,onChange:gt=>te(gt.target.value),className:"w-full border-slate-300 rounded-md"})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>{ne(null),W([]),te("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:async()=>{if(K)try{B(!0);const gt=Number(K.puntaje)||0,dt=Number(K.puntajeMaximo)||0,Dt=(L||[]).reduce((Xr,gn)=>Xr+(Number(gn.puntaje)||0),0),zt=gt+Dt,Pr=Mje(zt,dt);await Lje(K.id,{puntaje:zt,puntajeMaximo:dt,nota:Pr,revisionDocente:{completada:!0,observacionesGenerales:J||"",detalle:L||[],puntajeDocente:Dt}}),ne(null),W([]),te("")}catch(gt){console.error("Error guardando revisión:",gt),N("No se pudo guardar la revisión del docente.")}finally{B(!1)}},disabled:k,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:k?"Guardando...":"Guardar Revisión"})]})]})})]})},rr=()=>{var vt,pt;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),c.jsxs("form",{onSubmit:qe,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:Ae.asignatura,onChange:re,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(Je=>c.jsx("option",{value:Je,children:Je},Je))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:Ae.nivel,onChange:re,className:"w-full border-slate-300 rounded-md shadow-sm",children:wv.map(Je=>c.jsx("option",{value:Je,children:Je},Je))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),c.jsx("textarea",{name:"instrucciones",value:(vt=Ae.recursos)==null?void 0:vt.instrucciones,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),c.jsx("textarea",{name:"enlaces",value:(pt=Ae.recursos)==null?void 0:pt.enlaces,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),c.jsx("input",{type:"file",multiple:!0,onChange:_e,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Si no seleccionas nada, será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Cs.map(Je=>{var gt;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(gt=Ae.cursosDestino)==null?void 0:gt.includes(Je),onChange:()=>He(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:Je})]},Je)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:P,onChange:Je=>D(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Qt.map(Je=>{var gt;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(gt=Ae.estudiantesDestino)==null?void 0:gt.includes(Je.nombreCompleto),onChange:()=>Xe(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:yxe.map(Je=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ae.tipos.includes(Je),onChange:()=>he(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),Ae.tipos.includes(Je)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),oT[Je].map(gt=>c.jsx("button",{type:"button",onClick:()=>Ie(Je,gt),className:`px-3 py-1 rounded-full font-semibold text-xs ${Ae.cantidadPreguntas[Je]===gt?"bg-amber-500 text-white":"bg-slate-200"}`,children:gt},gt))]})]},Je))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:Ae.contenido,onChange:re,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:Ae.plazoEntrega,onChange:re,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),C&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:C}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:b?"Generando...":"Generar y Previsualizar"})})]})]})},nn=()=>{var vt;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(Pa,{content:T==null?void 0:T.introduccion,context:"preview-introduccion"})})]}),(T==null?void 0:T.recursos)&&(T.recursos.instrucciones||T.recursos.enlaces||((vt=T.recursos.archivos)==null?void 0:vt.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[T.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(Pa,{content:T.recursos.instrucciones,context:"preview-instrucciones"})}),T.recursos.enlaces&&c.jsx("div",{children:T.recursos.enlaces.split(`
`).map((pt,Je)=>pt.trim()&&c.jsx("a",{href:pt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:pt},Je))}),T.recursos.archivos&&T.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:T.recursos.archivos.map(pt=>c.jsx("li",{className:"text-slate-700",children:pt.nombre},pt.nombre))})]})]}),T==null?void 0:T.tipos.map(pt=>{const Je=T.generatedContent[pt];return console.log(`🔍 Renderizando preview para ${pt}:`,Je),qa(Je,`preview-${pt}`),Je?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:pt}),c.jsxs("div",{className:"space-y-4 text-sm",children:[pt==="Quiz"&&Array.isArray(Je)&&Je.map((gt,dt)=>(qa(gt,`preview-quiz-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`preview-quiz-pregunta-${dt}`})]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Dt,zt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",c.jsx(Pa,{content:Dt,context:`preview-quiz-opcion-${dt}-${zt}`})]},zt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",c.jsx(Pa,{content:gt.respuestaCorrecta,context:`preview-quiz-respuesta-${dt}`})]})]},dt))),pt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:c.jsx(Pa,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((gt,dt)=>(qa(gt,`preview-lectura-pregunta-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`preview-lectura-pregunta-${dt}`})]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Dt,zt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",c.jsx(Pa,{content:Dt,context:`preview-lectura-opcion-${dt}-${zt}`})]},zt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",c.jsx(Pa,{content:gt.respuestaCorrecta,context:`preview-lectura-respuesta-${dt}`})]})]},dt)))]}),pt==="Términos Pareados"&&Array.isArray(Je)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),c.jsx("tbody",{children:Je.map((gt,dt)=>(qa(gt,`preview-pareado-${dt}`),c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:c.jsx(Pa,{content:gt.concepto,context:`preview-pareado-concepto-${dt}`})}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:c.jsx(Pa,{content:gt.definicion,context:`preview-pareado-definicion-${dt}`})})]},gt.id)))})]})}),pt==="Desarrollo"&&Array.isArray(Je)&&Je.map((gt,dt)=>(console.log(`🔍 Renderizando desarrollo ${dt}:`,gt),qa(gt,`preview-desarrollo-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(Pa,{content:gt.pregunta,context:`preview-desarrollo-pregunta-${dt}`})]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",c.jsx(Pa,{content:gt.rubrica,context:`preview-desarrollo-rubrica-${dt}`})]})]},dt))),(pt==="Quiz"||pt==="Términos Pareados"||pt==="Desarrollo")&&!Array.isArray(Je)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido para ",c.jsx("strong",{children:pt})," no tiene el formato esperado."]}),pt==="Comprensión de Lectura"&&(!Je||typeof Je!="object"||!Array.isArray(Je.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido de ",c.jsx("strong",{children:"Comprensión de Lectura"})," no tiene el formato esperado."]})]})]},pt):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>U(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:ot,disabled:_,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:_?"Guardando...":"Confirmar y Asignar"})]})]})},Cr=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>p(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(vt=>{var gt,dt;qa(vt,`lista-actividad-${vt.id}`);const pt=[];(gt=vt.cursosDestino)!=null&&gt.length&&pt.push(`Cursos: ${vt.cursosDestino.join(", ")}`),(dt=vt.estudiantesDestino)!=null&&dt.length&&pt.push(`Estudiantes: ${vt.estudiantesDestino.length}`);const Je=pt.length?pt.join(" | "):`Todo ${vt.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(Pa,{content:vt.asignatura,context:`lista-asignatura-${vt.id}`})," — ",vt.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",iT(vt.fechaCreacion)]})]}),c.jsx("button",{onClick:()=>u(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),Vr=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),c.jsx("button",{onClick:()=>v(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:Ze,className:"space-y-6 mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:ge.asignatura,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(vt=>c.jsx("option",{value:vt,children:vt},vt))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:ge.nivel,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:wv.map(vt=>c.jsx("option",{value:vt,children:vt},vt))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),c.jsx("textarea",{name:"objetivosAprendizaje",value:ge.objetivosAprendizaje,onChange:Se,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),c.jsx("textarea",{name:"contenido",value:ge.contenido,onChange:Se,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:ge.plazoEntrega,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),C&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:C}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400",children:b?"Generando...":"Generar y Previsualizar"})})]})]}),Fn=()=>{var vt,pt;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),c.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:c.jsx(Pa,{content:R==null?void 0:R.titulo,context:"preview-prueba-titulo"})}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(Pa,{content:R==null?void 0:R.instrucciones,context:"preview-prueba-instrucciones"})})]}),(vt=R==null?void 0:R.textos)!=null&&vt.length?c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),c.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:R.textos.map((Je,gt)=>(qa(Je,`preview-texto-${gt}`),c.jsxs("li",{children:[c.jsxs("p",{className:"font-semibold",children:[c.jsx(Pa,{content:Je.titulo,context:`preview-texto-titulo-${gt}`}),c.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),c.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:c.jsx(Pa,{content:Je.contenido,context:`preview-texto-contenido-${gt}`})})]},Je.id)))})]}):null,(pt=R==null?void 0:R.preguntas)!=null&&pt.length?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),R.preguntas.slice(0,10).map((Je,gt)=>(qa(Je,`preview-pregunta-${gt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",c.jsx(Pa,{content:Je.pregunta,context:`preview-pregunta-texto-${gt}`})]}),c.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((dt,Dt)=>c.jsx("li",{children:c.jsx(Pa,{content:dt,context:`preview-pregunta-opcion-${gt}-${Dt}`})},Dt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero)))]}):null]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>X(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:mt,disabled:_,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:_?"Guardando...":"Confirmar y Asignar"})]})]})},jr=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),c.jsx("button",{onClick:()=>v(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:r.length>0?r.map(vt=>(qa(vt,`lista-prueba-${vt.id}`),c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800",children:c.jsx(Pa,{content:vt.titulo,context:`lista-prueba-titulo-${vt.id}`})}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Nivel: ",vt.nivel," | Creado: ",iT(vt.fechaCreacion)]})]}),c.jsx("button",{onClick:()=>f(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id))):c.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return F?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"animate-fade-in",children:[bt(),R?Fn():T?nn():l||d?Nr():H==="pruebas"?g?Vr():jr():h?rr():Cr()]})},$je="actividades_remotas",oR="respuestas_actividades",Vte=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},pH=e=>{const t=Vte(e);return t?t.toISOString():void 0},Kje=e=>{const t=Vte(e);return t?t.toISOString().split("T")[0]:void 0},lR=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:pH(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:Kje(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:pH(t.fechaCompletado)||t.fechaCompletado}},xx=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},Gje=e=>new Promise(t=>setTimeout(t,e)),qje=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await Gje(s)}else throw a}throw new Error("Max retries exceeded")},Wje=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=tr(Ut(jt,$je),Kr("fechaCreacion","desc"));return vr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(l=>lR(l)).filter(l=>{var u,d,f,h,p;if(!((u=l.cursosDestino)!=null&&u.length)&&!((d=l.estudiantesDestino)!=null&&d.length)){const g=l.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=l.cursosDestino)!=null&&h.includes(e.curso||"")||(p=l.estudiantesDestino)!=null&&p.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const o=xx(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=xx(s,"suscripción a actividades");r==null||r(i)}})},Xje=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=tr(Ut(jt,oR),In("estudianteId","==",e),Kr("fechaCompletado","desc"));return vr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const l=lR(o);return console.log(`📄 Respuesta ${o.id}:`,{actividadId:l.actividadId,puntaje:l.puntaje,nota:l.nota,requiereRevision:l.requiereRevisionDocente,revisionCompletada:(u=l.revisionDocente)==null?void 0:u.completada,fechaCompletado:l.fechaCompletado}),l});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const o=xx(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=xx(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),Yje(e,t,r);r==null||r(i)}})},Yje=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=tr(Ut(jt,oR),In("estudianteId","==",e));return vr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>lR(o)).sort((o,l)=>new Date(l.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const o=xx(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=xx(s,"suscripción alternativa a respuestas");r==null||r(i)}})},Jje=async e=>qje(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:br.fromDate(new Date(e.fechaCompletado))},r=await Jn(Ut(jt,oR),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),Zje=.6,eFe=(e,t,r=Zje,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},rF=({className:e="w-5 h-5"})=>c.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tFe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new os(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(`🤖 Intento ${o} de generar feedback con IA`);const l=nFe(e,t);let f=(await(await s.generateContent(l)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const p=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${o}`),p}catch(p){throw console.warn(`⚠️ Error al parsear JSON en intento ${o}:`,p),new Error("JSON parsing failed")}}catch(l){if(console.log(`❌ Error en intento ${o}:`,l.message),(i=l.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},rFe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await Jje(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await tFe(t,r);if(s){const{updateDoc:i,doc:o}=await fx(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>Qge);return{updateDoc:u,doc:d}},void 0),{db:l}=await fx(async()=>{const{db:u}=await Promise.resolve().then(()=>EJ);return{db:u}},void 0);return await i(o(l,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},vo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},$s=(e,t)=>{if(t&&vo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>$s(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},xd=(e,t,...r)=>{if(vo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=$s(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=$s(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ui=({content:e,context:t="unknown"})=>{try{const r=$s(e,`UltraSafeRenderer-${t}`);return c.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),c.jsx("span",{children:"[Error al mostrar contenido]"})}};function gH(e){if(console.log("🔍 Normalizando lectura:",e),vo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{vo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>$s(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:xd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:$s(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:xd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>xd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(vo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function vH(e){return console.log("🔍 Normalizando pareados:",e),vo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(vo(t,`pareado-${r}`),{izquierda:xd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:xd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(vo(t,`pareado-array-${r}`),{izquierda:xd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:xd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function xH(e){return console.log("🔍 Normalizando desarrollo:",e),vo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(vo(t,`desarrollo-pregunta-${r}`),{enunciado:xd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(vo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:xd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const nFe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${$s(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${$s(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${$s(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${$s(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${$s(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${$s(e.asignatura,"feedback-prompt-asignatura")}" sobre "${$s(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},aFe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=j.useState({}),[s,i]=j.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},l=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(p=>{const g=e.generatedContent[p],v=n[p];if(console.log(`🔍 Procesando tipo: ${p}`,g),vo(g,`handleSubmit-${p}`),!!g){if((p==="Quiz"||p==="Comprensión de Lectura")&&(p==="Quiz"?Array.isArray(g)?g.map((y,_)=>(vo(y,`quiz-question-${_}`),{pregunta:xd(y,`quiz-pregunta-${_}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((S,k)=>$s(S,`quiz-opcion-${_}-${k}`)):[],respuestaCorrecta:$s(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${_}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:gH(g).preguntas).forEach((y,_)=>{const S=v==null?void 0:v[_],k=S===y.respuestaCorrecta,B=y.puntaje??1;k&&(u+=B),d+=B,f.items.push({pregunta:y.pregunta,respuestaUsuario:$s(S,`feedback-respuesta-${_}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:k,puntajeObtenido:k?B:0,tipo:p})}),p==="Términos Pareados"){const b=vH(g),y=v||{};b.forEach((_,S)=>{const k=y[S],B=k===_.derecha,F=_.puntaje??1;B&&(u+=F),d+=F,f.items.push({pregunta:`${_.izquierda} → ¿?`,respuestaUsuario:$s(k,`pareado-feedback-${S}`)||"No respondida",respuestaCorrecta:_.derecha,esCorrecta:B,puntajeObtenido:B?F:0,tipo:p})})}if(p==="Desarrollo"){const b=xH(g),y=v||{};b.forEach((_,S)=>{const k=$s(y[S],`desarrollo-feedback-${S}`).trim();f.items.push({pregunta:_.enunciado,respuestaUsuario:k||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:p})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:eFe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:c.jsx(ui,{content:e.asignatura,context:"actividad-asignatura"})}),c.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(ui,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),vo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,p)=>(vo(h,`render-quiz-question-${p}`),{pregunta:xd(h,`render-quiz-pregunta-${p}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,v)=>$s(g,`render-quiz-opcion-${p}-${v}`)):[],respuestaCorrecta:$s(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${p}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),c.jsx("div",{className:"space-y-6",children:f.map((h,p)=>c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",c.jsx(ui,{content:h.pregunta,context:`quiz-pregunta-${p}`})]}),c.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,v)=>{var b;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[c.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{children:c.jsx(ui,{content:g,context:`quiz-opcion-${p}-${v}`})})]},v)})})]},p))})]},u)}case"Comprensión de Lectura":{const f=gH(d);return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),c.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:c.jsx(ui,{content:f.texto,context:"lectura-texto"})}),c.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,p)=>c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",c.jsx(ui,{content:h.pregunta,context:`lectura-pregunta-${p}`})]}),c.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,v)=>{var b;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[c.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{children:c.jsx(ui,{content:g,context:`lectura-opcion-${p}-${v}`})})]},v)})})]},p))})]},u)}case"Términos Pareados":{const f=vH(d),h=n[u]||{},p=[...new Set(f.map(g=>g.derecha))];for(let g=p.length-1;g>0;g--){const v=Math.floor(Math.random()*(g+1));[p[g],p[v]]=[p[v],p[g]]}return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,v)=>c.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[c.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[v+1,". ",c.jsx(ui,{content:g.izquierda,context:`pareado-izq-${v}`})]}),c.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[v]??"",onChange:b=>o(u,{...h,[v]:b.target.value}),children:[c.jsx("option",{value:"",children:"— Selecciona la pareja —"}),p.map((b,y)=>c.jsx("option",{value:b,children:$s(b,`pareado-opcion-${v}-${y}`)},y))]})]},`${g.izquierda}-${v}`))})]},u)}case"Desarrollo":{const f=xH(d),h=n[u]||{};return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),c.jsx("div",{className:"space-y-6",children:f.map((p,g)=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",c.jsx(ui,{content:p.enunciado,context:`desarrollo-enunciado-${g}`})]}),c.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:v=>o(u,{...h,[g]:v.target.value})})]},g))}),c.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),c.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:c.jsxs("button",{onClick:l,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?c.jsx(rF,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},sFe=({currentUser:e})=>{var N,P,D;const[t,r]=j.useState(!0),[n,a]=j.useState("list"),[s,i]=j.useState(!1),[o,l]=j.useState([]),[u,d]=j.useState([]),[f,h]=j.useState(null),[p,g]=j.useState(null),[v,b]=j.useState(null),[y,_]=j.useState("connecting");j.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let T=!1,U=!1,R=!1,X=!1;const q=()=>{(T||R)&&(U||X)&&(R&&X?(_("error"),b("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):_("connected"),r(!1),console.log("✅ Carga completada - Actividades:",T,"Respuestas:",U))},Z=Wje(e,V=>{console.log("📋 Actividades recibidas:",V.length),V.forEach((K,ne)=>{console.log(`  ${ne+1}. ${K.asignatura} (ID: ${K.id})`),vo(K,`actividad-${ne}`)}),l(V),T=!0,q()},V=>{console.error("❌ Error en suscripción de actividades:",V),R=!0,q()}),H=Xje(e.id,V=>{console.log("📝 Respuestas del estudiante recibidas:",V.length),V.forEach((K,ne)=>{var L;console.log(`  ${ne+1}. Actividad ${K.actividadId} - Nota: ${K.nota} - Fecha: ${K.fechaCompletado}`),(L=K.revisionDocente)!=null&&L.completada&&console.log("    ✅ Con revisión docente completada"),vo(K,`respuesta-${ne}`)}),d(V),U=!0,q()},V=>{var K;console.error("❌ Error en suscripción de respuestas:",V),(K=V.message)!=null&&K.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),b("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),X=!0,q()});return()=>{console.log("🧹 Limpiando subscripciones"),Z==null||Z(),H==null||H()}},[e]),j.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const S=T=>{console.log("🔍 Iniciando actividad:",T.asignatura),h(T),a("activity"),b(null)},k=T=>{console.log("🔍 Viendo resultado:",T.actividadId);const U=o.find(R=>R.id===T.actividadId);U?(h(U),g(T),a("result"),b(null)):b("No se pudieron cargar los detalles de esta actividad completada.")},B=j.useCallback(async(T,U)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:T.puntaje,nota:T.nota}),a("result"),i(!0),b(null);const R={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...T,retroalimentacionDetallada:U};console.log("💾 Guardando respuesta...");try{const X=await rFe(R,f,U);console.log("✅ Respuesta completada con ID:",X.id),g(X),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(X){console.error("❌ Error crítico al completar actividad:",X),b("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...R,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),F=j.useMemo(()=>{if(u.length===0)return new Set;const T=new Set(u.map(U=>U.actividadId));return console.log("🎯 IDs completados calculados:",T.size),T},[u]),w=j.useMemo(()=>{if(o.length===0)return[];const T=o.filter(U=>!F.has(U.id));return console.log("⏳ Actividades pendientes:",T.length),T},[o,F]),C=j.useMemo(()=>{if(u.length===0)return[];const T=u.map(U=>{const R=o.find(X=>X.id===U.actividadId);return{...U,asignatura:(R==null?void 0:R.asignatura)||"Actividad no disponible",tipos:(R==null?void 0:R.tipos)||[]}}).sort((U,R)=>new Date(R.fechaCompletado).getTime()-new Date(U.fechaCompletado).getTime());return console.log("📖 Historial preparado:",T.length),T},[u,o]);return t?c.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[c.jsx(rF,{className:"w-8 h-8 text-slate-500"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),c.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&o.length===0&&u.length===0?c.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[c.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),c.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?c.jsx(aFe,{actividad:f,onComplete:B,currentUser:e}):n==="result"&&p?(console.log("🔍 Renderizando resultado:",p),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),c.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",c.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),c.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",c.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),v&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",v]})}),s&&c.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[c.jsx(rF,{className:"w-8 h-8 text-blue-500"}),c.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),c.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),p.retroalimentacionAI&&!s&&c.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[c.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),c.jsx("p",{className:"text-slate-700 mt-1",children:c.jsx(ui,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((N=p.retroalimentacionAI.desafios)==null?void 0:N.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),c.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((T,U)=>c.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[c.jsx("p",{className:"font-semibold text-slate-800",children:c.jsx(ui,{content:T.pregunta,context:`feedback-desafio-pregunta-${U}`})}),c.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:c.jsx(ui,{content:T.explicacionDelError,context:`feedback-desafio-explicacion-${U}`})})]},U))})]}),((D=(P=p.retroalimentacionAI)==null?void 0:P.comentariosDesarrollo)==null?void 0:D.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),c.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((T,U)=>c.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[c.jsx("p",{className:"font-semibold text-slate-800",children:c.jsx(ui,{content:T.pregunta,context:`feedback-desarrollo-pregunta-${U}`})}),c.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:c.jsx(ui,{content:T.retroalimentacionBreve,context:`feedback-desarrollo-retro-${U}`})})]},U))})]})]}),p.retroalimentacionDetallada&&c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),p.retroalimentacionDetallada.items.map((T,U)=>{const R=T.esCorrecta===null,X=R?"border-slate-400 bg-slate-50":T.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",q=R?"🕓":T.esCorrecta?"✅":"❌";return c.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${X}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[U+1,". ",c.jsx(ui,{content:T.pregunta,context:`feedback-item-pregunta-${U}`})]}),c.jsx("span",{className:"font-bold text-lg",children:q})]}),c.jsxs("div",{className:"mt-2 text-sm pl-4",children:[c.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",c.jsx("span",{className:"font-medium",children:c.jsx(ui,{content:T.respuestaUsuario,context:`feedback-item-respuesta-${U}`})})]}),!R&&!T.esCorrecta&&c.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",c.jsx("span",{className:"font-medium text-green-700",children:c.jsx(ui,{content:T.respuestaCorrecta,context:`feedback-item-correcta-${U}`})})]}),R&&c.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},U)})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>{a("list"),h(null),g(null),b(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&c.jsx("button",{onClick:()=>{a("activity"),g(null),b(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[v&&c.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:c.jsxs("p",{className:"text-amber-800",children:["⚠️ ",v]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:w.length>0?w.map(T=>c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(ui,{content:T.asignatura,context:`actividad-asignatura-${T.id}`})," - ",T.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",c.jsx(ui,{content:typeof T.plazoEntrega=="string"?T.plazoEntrega:"",context:`actividad-plazo-${T.id}`})]})]}),c.jsx("button",{onClick:()=>S(T),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},T.id)):c.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),c.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),c.jsx("div",{className:"space-y-4",children:C.length>0?C.map(T=>c.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(ui,{content:T.asignatura,context:`completada-asignatura-${T.id}`})," - ",T.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(T.fechaCompletado).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",c.jsx("span",{className:`font-bold text-lg ${parseFloat(T.nota)>=4?"text-green-600":"text-red-600"}`,children:T.nota})]}),c.jsx("button",{onClick:()=>k(T),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},T.id)):c.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},DN="estudiantes_inclusion",iFe="usuarios",zte=e=>{const t=e.data();return{id:e.id,...t}},oFe=e=>{const t=tr(Ut(jt,DN));return vr(t,n=>{const a=n.docs.map(s=>zte(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},lFe=e=>{const t=tr(Ut(jt,iFe));return vr(t,n=>{const a=n.docs.map(s=>zte(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},cFe=async e=>{try{return(await Jn(Ut(jt,DN),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},uFe=async(e,t)=>{try{const{id:r,...n}=t,a=hr(jt,DN,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},dFe=async e=>{try{const t=hr(jt,DN,e);await Is(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},AFe=({estudiantes:e})=>{const t=j.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.curso]=(l[u.curso]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({curso:l,cantidad:u})).sort((l,u)=>l.curso.localeCompare(u.curso))},[e]),r=j.useMemo(()=>{const o=e.reduce((l,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return l[d]=(l[d]||0)+1,l},{});return Object.entries(o).map(([l,u])=>({nivel:l,cantidad:u})).sort((l,u)=>l.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(l.nivel)-parseInt(u.nivel))},[e]),n=j.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.dificultad]=(l[u.dificultad]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({diagnostico:l,cantidad:u})).sort((l,u)=>u.cantidad-l.cantidad)},[e]),a=j.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),l=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:l}},[e]),s=j.useMemo(()=>e.reduce((o,l)=>o+(l.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),c.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),c.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),c.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),c.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),c.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),c.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,"°"]}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),c.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]})]})]})},bH=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=j.useState(""),[a,s]=j.useState(""),[i,o]=j.useState(!1),l=j.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=j.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),c.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),c.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>c.jsx("option",{value:f,children:f},f))]})]})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),c.jsxs("span",{children:["Resultados filtrados: ",l.length]})]}),c.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${l.length} estudiantes disponibles`}),i&&c.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:l.length===0?c.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):c.jsx("div",{className:"divide-y dark:divide-slate-600",children:l.map(f=>c.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),c.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&l.length===1&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),c.jsxs("button",{onClick:()=>d(l[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",l[0].nombreCompleto]})]})]})]})},fFe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=j.useState(Z_[0]),s=()=>r(e,n);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Z_.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},hFe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=j.useState("intervenciones"),[o,l]=j.useState(e);j.useEffect(()=>l(e),[e]);const[u,d]=j.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=j.useState(f),[g,v]=j.useState({trimestre:"T1",meta:""}),[b,y]=j.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[_,S]=j.useState(null),[k,B]=j.useState(!1),F={motivo:"",acuerdos:"",asistentes:""},[w,C]=j.useState(F),N=()=>{r(o),t()},P=async()=>{var _e;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let re,Se=!1;u?re=(o.intervenciones||[]).map(he=>he.id===u.id?{...he,...h}:he):(Se=!0,re=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const De=re.sort((he,Ie)=>new Date(Ie.fecha).getTime()-new Date(he.fecha).getTime());if(l(he=>({...he,intervenciones:De})),Se)try{await G1e({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(_e=a?a(h.responsable):void 0)==null?void 0:_e.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${o.nombre}. Acción: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(he){console.error("Error al crear notificación:",he),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}p(f),d(null)},D=re=>{d(re),p({responsable:re.responsable,accion:re.accion,observaciones:re.observaciones})},T=re=>{window.confirm("¿Eliminar esta intervención?")&&l(Se=>({...Se,intervenciones:(Se.intervenciones||[]).filter(De=>De.id!==re)}))},U=re=>{const{name:Se,value:De}=re.target;l(_e=>({..._e,[Se]:De,fechaActualizacionApoyos:new Date().toISOString()}))},R=()=>{if(!g.meta.trim())return;const re={...g,id:crypto.randomUUID(),cumplida:!1};l(Se=>({...Se,metasProgreso:[...Se.metasProgreso||[],re]})),v({trimestre:"T1",meta:""})},X=re=>{l(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).map(De=>De.id===re?{...De,cumplida:!De.cumplida}:De)}))},q=re=>{l(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).filter(De=>De.id!==re)}))},Z=j.useMemo(()=>{const re=o.metasProgreso||[];if(re.length===0)return{percent:0,color:"bg-slate-300"};const Se=re.filter(he=>he.cumplida).length,De=Math.round(Se/re.length*100),_e=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:_e}},[o.metasProgreso]),H=j.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const re=new Date(o.fechaActualizacionApoyos),Se=new Date;return Se.setMonth(Se.getMonth()-3),re<Se},[o.fechaActualizacionApoyos]),V=()=>{if(!b.titulo.trim()||!b.fecha)return;const re={...b,id:crypto.randomUUID(),resuelta:!1};l(Se=>({...Se,alertas:[...Se.alertas||[],re].sort((De,_e)=>new Date(De.fecha).getTime()-new Date(_e.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},K=re=>{l(Se=>({...Se,alertas:(Se.alertas||[]).map(De=>De.id===re?{...De,resuelta:!De.resuelta}:De)}))},ne=re=>{l(Se=>({...Se,alertas:(Se.alertas||[]).filter(De=>De.id!==re)}))},L=re=>{re.target.files&&re.target.files[0]&&S(re.target.files[0])},W=()=>{if(!_)return;B(!0);const re=new FileReader;re.readAsDataURL(_),re.onloadend=()=>{const Se={id:crypto.randomUUID(),nombre:_.name,url:re.result,fechaSubida:new Date().toISOString()};l(De=>({...De,archivos:[Se,...De.archivos||[]]})),S(null),B(!1)},re.onerror=()=>{alert("Error al leer el archivo."),B(!1)}},J=re=>{window.confirm("¿Eliminar este archivo?")&&l(Se=>({...Se,archivos:(Se.archivos||[]).filter(De=>De.id!==re)}))},te=()=>{if(!w.motivo.trim()||!w.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const re={...w,id:crypto.randomUUID(),fecha:new Date().toISOString()};l(Se=>({...Se,reuniones:[re,...Se.reuniones||[]].sort((De,_e)=>new Date(_e.fecha).getTime()-new Date(De.fecha).getTime())})),C(F)},ie=re=>{window.confirm("¿Eliminar este registro de reunión?")&&l(Se=>({...Se,reuniones:(Se.reuniones||[]).filter(De=>De.id!==re)}))},Ae=()=>{var ye,Oe,Pe;const re=new pr("p","mm","a4"),Se=20,De=re.internal.pageSize.getWidth(),_e=re.internal.pageSize.getHeight();let he=Se;const Ie=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Módulo Inclusión",Se,15)};Ie(re),re.setFontSize(18),re.setFont("helvetica","bold"),re.setTextColor(40),re.text(o.nombre,Se,he+10),he+=15,re.setFontSize(11),re.setFont("helvetica","normal"),re.setTextColor(80),re.text(`Curso: ${o.curso}`,Se,he),re.text(`Dificultad: ${o.dificultad}`,Se,he+6),he+=15;const He=qe=>{he+qe>_e-Se&&(re.addPage(),Ie(re),he=Se)},Xe=qe=>{He(15),re.setFontSize(14),re.setFont("helvetica","bold"),re.text(qe,Se,he),he+=10};if((ye=o.intervenciones)!=null&&ye.length&&(Xe("Historial de Intervenciones"),gl(re,{startY:he,head:[["Fecha","Responsable","Acción","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>Ie(re)}),he=re.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){He(30),Xe("Seguimiento y Apoyos"),re.setFontSize(11),re.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ze=re.splitTextToSize(qe,De-Se*2);re.text(Ze,Se,he),he+=Ze.length*5+10}(Oe=o.metasProgreso)!=null&&Oe.length&&(He(30),Xe("Metas de Progreso"),gl(re,{startY:he,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Ie(re)}),he=re.lastAutoTable.finalY+10),(Pe=o.reuniones)!=null&&Pe.length&&(Xe("Reuniones con Apoderados"),gl(re,{startY:he,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>Ie(re)})),re.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),c.jsxs("select",{value:h.responsable,onChange:re=>p(Se=>({...Se,responsable:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(re=>c.jsx("option",{value:re,children:re},re))]}),h.responsable&&!u&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),c.jsx("textarea",{value:h.accion,onChange:re=>p(Se=>({...Se,accion:re.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:re=>p(Se=>({...Se,observaciones:re.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[u&&c.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),c.jsx("button",{onClick:P,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(re=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.accion}),re.observaciones&&c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:re.observaciones}),c.jsxs("div",{className:"flex items-center justify-between mt-2",children:[c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(re.fecha).toLocaleString("es-CL")," - ",re.responsable]}),c.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>D(re),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),c.jsx("button",{onClick:()=>T(re.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},re.id)),(!o.intervenciones||o.intervenciones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:"📋"}),c.jsx("p",{children:"No hay intervenciones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ce=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),H&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Z.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Z.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:re=>v(Se=>({...Se,trimestre:re.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:re=>v(Se=>({...Se,meta:re.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:R,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),c.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(re=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:re.cumplida,onChange:()=>X(re.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${re.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[re.trimestre,":"]})," ",re.meta]}),c.jsx("button",{onClick:()=>q(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},re.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),c.jsx("p",{children:"No hay metas definidas"}),c.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),ge=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:b.titulo,onChange:re=>y(Se=>({...Se,titulo:re.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:re=>y(Se=>({...Se,fecha:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:V,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(re=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:re.resuelta,onChange:()=>K(re.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${re.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[re.titulo," (",new Date(re.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),c.jsx("button",{onClick:()=>ne(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},re.id)),(!o.alertas||o.alertas.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),c.jsx("p",{children:"No hay alertas programadas"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:L,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),c.jsx("button",{onClick:W,disabled:!_||k,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:k?"Subiendo...":"Subir"}),_&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",_.name]})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(re=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsxs("a",{href:re.url,download:re.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:re.nombre,children:["📎 ",re.nombre]}),c.jsx("button",{onClick:()=>J(re.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},re.id)),(!o.archivos||o.archivos.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:"📁"}),c.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),je=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:w.motivo,onChange:re=>C(Se=>({...Se,motivo:re.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:w.acuerdos,onChange:re=>C(Se=>({...Se,acuerdos:re.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:w.asistentes,onChange:re=>C(Se=>({...Se,asistentes:re.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:te,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!w.motivo.trim()||!w.asistentes.trim(),children:"Guardar Reunión"})})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(re=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.motivo}),re.acuerdos&&c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[c.jsx("strong",{children:"Acuerdos:"})," ",re.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(re.fecha).toLocaleString("es-CL")," - Asistentes: ",re.asistentes]})]}),c.jsx("button",{onClick:()=>ie(re.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},re.id)),(!o.reuniones||o.reuniones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:"👥"}),c.jsx("p",{children:"No hay reuniones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:re=>re.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:Ae,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),c.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(re=>c.jsx("button",{onClick:()=>i(re),className:`${s===re?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:re==="alertas"?"Alertas y Archivos":re==="seguimiento"?"Seguimiento y Metas":re},re))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&ce(),s==="reuniones"&&je(),s==="alertas"&&ge()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),c.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},yH=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(null),[u,d]=j.useState(null),[f,h]=j.useState(""),[p,g]=j.useState(""),[v,b]=j.useState(""),[y,_]=j.useState("dashboard");j.useEffect(()=>{i(!0);const P=oFe(T=>{r(T),i(!1)}),D=lFe(T=>a(T));return()=>{P(),D()}},[]);const S=async(P,D)=>{if(t.some(U=>U.nombre===P.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const T={nombre:P.nombreCompleto,curso:P.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await cFe(T),alert(`✅ ${P.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(U){console.error("Error al agregar estudiante:",U),alert("Hubo un error al agregar al estudiante al programa.")}},k=async P=>{try{await uFe(P.id,P)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},B=async P=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await dFe(P),(o==null?void 0:o.id)===P&&l(null),alert("✅ Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},F=P=>{const D=C;if(D.length===0){alert("No hay datos para exportar.");return}const T=D.map(U=>{var R;return{Nombre:U.nombre,Curso:U.curso,Dificultad:U.dificultad,"N° Intervenciones":((R=U.intervenciones)==null?void 0:R.length)||0,"Alertas Pendientes":(U.alertas||[]).filter(X=>!X.resuelta).length,"Metas Cumplidas":(U.metasProgreso||[]).filter(X=>X.cumplida).length,"Total Metas":(U.metasProgreso||[]).length,"Última Actualización":U.fechaActualizacionApoyos?new Date(U.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(P==="xlsx"){const U=_u.json_to_sheet(T),R=_u.book_new();_u.book_append_sheet(R,U,"Estudiantes_Inclusion"),tR(R,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const U=new pr;U.text("Listado de Estudiantes - Programa de Inclusión",14,15),gl(U,{startY:20,head:[Object.keys(T[0])],body:T.map(Object.values)}),U.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},w=j.useMemo(()=>n.filter(P=>{var D;return P.profile===er.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(P.curso||""))||e.profile===er.SUBDIRECCION)}).filter(P=>!t.some(D=>D.nombre===P.nombreCompleto)),[n,t,e]),C=j.useMemo(()=>t.filter(P=>P.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||P.curso===p)&&(v===""||P.dificultad===v)).sort((P,D)=>P.nombre.localeCompare(D.nombre)),[t,f,p,v]),N=j.useMemo(()=>n.filter(P=>P.profile===er.PROFESORADO).map(P=>P.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>_("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),c.jsx("button",{onClick:()=>_("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?c.jsxs("div",{className:"text-center py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),c.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):c.jsxs(c.Fragment,{children:[y==="dashboard"&&c.jsxs("div",{className:"space-y-8",children:[c.jsx(AFe,{estudiantes:t}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),c.jsx("button",{onClick:()=>_("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),c.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(P=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:P.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[P.curso," - ",P.dificultad]})]}),c.jsx("button",{onClick:()=>l(P),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},P.id)),t.length===0&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),c.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),c.jsx(bH,{estudiantesDisponibles:w,onSelect:P=>d(P)})]})]}),y==="lista"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",C.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>F("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),c.jsx("button",{onClick:()=>F("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),c.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:P=>h(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),c.jsxs("select",{value:p,onChange:P=>g(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Cs.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),c.jsxs("select",{value:v,onChange:P=>b(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),Z_.map(P=>c.jsx("option",{value:P,children:P},P))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-blue-600",children:C.length}),c.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-green-600",children:t.length}),c.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((P,D)=>P+(D.alertas||[]).filter(T=>!T.resuelta).length,0)}),c.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(P=>P.curso)).size}),c.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[C.map(P=>{var D;return c.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:P.nombre}),(P.alertas||[]).filter(T=>!T.resuelta).length>0&&c.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(P.alertas||[]).filter(T=>!T.resuelta).length," alertas"]})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[P.curso," - ",P.dificultad]}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[c.jsxs("span",{children:[((D=P.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),c.jsxs("span",{children:[(P.metasProgreso||[]).filter(T=>T.cumplida).length," metas cumplidas"]}),P.fechaActualizacionApoyos&&c.jsxs("span",{children:["Últ. actualización: ",new Date(P.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>l(P),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>B(P.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},P.id)}),C.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),c.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||v?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||v)&&c.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),c.jsx(bH,{estudiantesDisponibles:w,onSelect:P=>d(P)})]})]}),u&&c.jsx(fFe,{student:u,onClose:()=>d(null),onConfirm:(P,D)=>{S(P,D),d(null)}}),o&&c.jsx(hFe,{student:o,onClose:()=>l(null),onSave:k,profesores:N})]})},$te="asistencia_dual",mFe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},pFe=(e,t)=>{const r=tr(Ut(jt,$te),In("emailEstudiante","==",e),Kr("fechaHora","desc"));return vr(r,a=>{const s=a.docs.map(i=>mFe(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},gFe=async e=>{try{const t={...e,fechaHora:br.fromDate(new Date(e.fechaHora))};await Jn(Ut(jt,$te),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},vFe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),xFe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),bFe=({currentUser:e})=>{const[t,r]=j.useState(e.curso||""),[n,a]=j.useState([]),[s,i]=j.useState(!1),[o,l]=j.useState(!0),[u,d]=j.useState(null);j.useEffect(()=>{if(!e.email){l(!1);return}l(!0);const h=pFe(e.email,p=>{a(p),l(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await gFe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(v){console.error("Error saving record to Firestore:",v),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),mp.map(h=>c.jsx("option",{value:h,children:h},h))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?c.jsx(vFe,{}):c.jsx(xFe,{}),h.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},yFe=async()=>{try{console.log("🔍 Debugging users collection...");const e=Ut(Rr,"users"),t=tr(e,wd(10)),r=await Ss(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},wFe=async(e,t)=>{var l,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=br.fromDate(r),s=br.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=Ut(Rr,f);try{const p=tr(h,In("fechaHora",">=",a),In("fechaHora","<=",s)),g=await Ss(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((l=g.docs[0])==null?void 0:l.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let v=!1;for(const b of g)try{const y=tr(h,In(b,">=",a),In(b,"<=",s)),_=await Ss(y);o[f]={exists:!0,hasDateField:b,count:_.size,sampleDoc:((u=_.docs[0])==null?void 0:u.data())||null},v=!0;break}catch{continue}if(!v){const b=tr(h,Kr("__name__"),wd(5)),y=await Ss(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},EFe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=br.fromDate(a),o=br.fromDate(s),l=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((p,g)=>{let v;g.fechaHora instanceof Date?v=g.fechaHora:typeof g.fechaHora=="string"?v=new Date(g.fechaHora):v=new Date;const b=v.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const p=Ut(Rr,h),g=tr(p,In("fechaHora",">=",i),In("fechaHora","<=",o),Kr("fechaHora","desc")),v=vr(g,b=>{console.log(`📋 ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(_=>_.startsWith(`${h}_`)).forEach(_=>u.delete(_)),b.docs.forEach((_,S)=>{var k;if(S<5){const B=_.data();let F;(k=B.fechaHora)!=null&&k.toDate?F=B.fechaHora.toDate():typeof B.fechaHora=="string"?F=new Date(B.fechaHora):F=new Date,console.log(`   ${S+1}. ${B.emailEstudiante} - ${F.toLocaleString()} - ${B.tipo}`),console.log(`      📅 Fecha original: ${B.fechaHora} (tipo: ${typeof B.fechaHora})`)}}),b.forEach(_=>{var w;const S=_.data();let k;(w=S.fechaHora)!=null&&w.toDate?k=S.fechaHora.toDate():typeof S.fechaHora=="string"?k=new Date(S.fechaHora):S.fechaHora instanceof Date?k=S.fechaHora:S.fechaHora?k=new Date(S.fechaHora):k=new Date;const B={id:_.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:k,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},F=`${h}_${_.id}`;u.set(F,B)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},b=>{console.warn(`⚠️ Error con filtro en ${h}:`,b),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=tr(p,wd(200)),_=vr(y,k=>{if(console.log(`📋 ${h} (sin filtro): ${k.size} documentos`),k.size>0){const F=k.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(F)),console.log("📄 Primer documento:",F)}const B=k.docs.filter(F=>{var N;const w=F.data();if(!w.fechaHora)return!1;let C;return(N=w.fechaHora)!=null&&N.toDate?C=w.fechaHora.toDate():typeof w.fechaHora=="string"?C=new Date(w.fechaHora):w.fechaHora instanceof Date?C=w.fechaHora:C=new Date(w.fechaHora),C>=a&&C<=s});console.log(`📅 ${h}: ${B.length} registros después de filtro manual`),B.length>0&&(Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),B.forEach(w=>{var T;const C=w.data();let N;(T=C.fechaHora)!=null&&T.toDate?N=C.fechaHora.toDate():typeof C.fechaHora=="string"?N=new Date(C.fechaHora):C.fechaHora instanceof Date?N=C.fechaHora:N=new Date(C.fechaHora);const P={id:w.id,emailEstudiante:C.emailEstudiante||C.email||"",nombreEstudiante:C.nombreEstudiante||C.nombre||"",curso:C.curso||"",fechaHora:N,tipo:C.tipo,ubicacion:C.ubicacion||null,observaciones:C.observaciones||"",...C},D=`${h}_${w.id}`;u.set(D,P)}),d())}),S=l.findIndex(k=>k===v);S>=0?l[S]=_:l.push(_)});l.push(v)}catch(p){console.warn(`❌ Error configurando ${h}:`,p)}}),()=>{l.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},CFe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",l);const u=o.filter(d=>d.profile===er.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const l=Ut(Rr,o),u=tr(l),d=vr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,v,b,y;try{const _=p.data(),S=_.email||_.userEmail||_.mail||_.correo||"",k=_.nombreCompleto||_.displayName||_.name||_.nombre||_.fullName||"",B=_.curso||_.course||_.class||_.grade||"";let F=_.profile||_.role||_.tipo||_.userType||er.ESTUDIANTE;if(typeof F=="string"){const N=F.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?F=er.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?F=er.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?F=er.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(F=er.COORDINADOR_TP)}const w={id:p.id,email:S,nombreCompleto:k,curso:B,profile:F,activo:_.activo!==!1,fechaCreacion:((v=(g=_.fechaCreacion)==null?void 0:g.toDate)==null?void 0:v.call(g))||new Date(_.fechaCreacion)||new Date,ultimaActividad:((y=(b=_.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(_.ultimaActividad)||new Date,..._},C=`${o}_${p.id}`;a.set(C,w)}catch(_){console.warn(`Error procesando documento ${p.id} en ${o}:`,_)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${o}:`,f)});n.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},_Fe=(e,t)=>{try{console.log("Setting up users subscription...");const r=Ut(Rr,"users"),n=tr(r);return vr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const v=d.data();console.log(`Processing user doc ${d.id}:`,v);const b=v.email||v.userEmail||v.mail||"",y=v.nombreCompleto||v.displayName||v.name||v.nombre||"",_=v.curso||v.course||v.class||"";let S=v.profile||v.role||v.tipo||er.ESTUDIANTE;if(typeof S=="string"){const B=S.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?S=er.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?S=er.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?S=er.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(S=er.COORDINADOR_TP)}const k={id:d.id,email:b,nombreCompleto:y,curso:_,profile:S,activo:v.activo!==!1,fechaCreacion:((h=(f=v.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(v.fechaCreacion)||new Date,ultimaActividad:((g=(p=v.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(v.ultimaActividad)||new Date,...v};i.push(k)}catch(v){console.warn(`Error processing user document ${d.id}:`,v)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===er.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},zE=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},SFe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),NFe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),kFe=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,s]=j.useState(!0),[i,o]=j.useState(null),[l,u]=j.useState(new Date),[d,f]=j.useState("todos"),[h,p]=j.useState("");j.useEffect(()=>{s(!0),o(null);const F=l.getFullYear(),w=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",F,"Mes:",w);let C=!1,N=!1;const P=()=>{C&&N&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const T=Ut(Rr,"asistencia_dual"),U=tr(T,wd(5)),R=await Ss(U);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${R.size}`),R.size>0)R.docs.forEach((X,q)=>{const Z=X.data();console.log(`   ${q+1}. ${X.id.slice(0,8)} - ${Z.emailEstudiante} - ${Z.tipo}`),console.log("      Fecha original:",Z.fechaHora),console.log("      Todos los campos:",Object.keys(Z))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const X=["asistenciaEmpresa","asistencia_empresa"];for(const q of X)try{const Z=Ut(Rr,q),H=tr(Z,wd(3)),V=await Ss(H);if(console.log(`📋 ${q}: ${V.size} documentos`),V.size>0){const K=V.docs[0].data();console.log("   Estructura:",Object.keys(K)),console.log("   Email:",K.emailEstudiante||K.email),console.log("   Fecha:",K.fechaHora||K.fecha)}}catch(Z){console.log(`❌ ${q}: ${Z instanceof Error?Z.message:"Error"}`)}}}catch(T){console.error("❌ Error en prueba directa:",T),T.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):T.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),wFe(F,w).then(T=>{console.log("🔍 Debug info for collections:",T),Object.entries(T).forEach(([U,R])=>{if(R.exists&&R.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${U.toUpperCase()}:`),console.log(`   📊 Total documentos: ${R.totalDocs}`),console.log(`   📅 Documentos del período: ${R.count}`),console.log(`   🔑 Campo de fecha: ${R.hasDateField}`),R.sampleDoc){console.log("   📄 Documento ejemplo:",R.sampleDoc);const X=R.sampleDoc,q=X.emailEstudiante||X.email||X.userEmail||X.correo||"NO ENCONTRADO",Z=X.tipo||X.type||X.action||X.tipoRegistro||"NO ENCONTRADO",H=X.fechaHora||X.fecha||X.timestamp||X.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${q}`),console.log(`   📝 Tipo registro: ${Z}`),console.log(`   📅 Fecha: ${H}`),console.log("   🗂️ Todos los campos:",Object.keys(X))}R.filteredDocs&&R.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",R.filteredDocs.length),R.filteredDocs.forEach((X,q)=>{q<3&&console.log(`      ${q+1}. ID: ${X.id}`,X.data)}))}else R.exists?console.log(`⚪ Colección ${U}: vacía`):console.log(`❌ Colección ${U}: no existe`)})}).catch(T=>{console.error("Debug error:",T)}),yFe().then(T=>{console.log("🔍 Debug info for users:",T),(!T.exists||T.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async R=>{var X;try{const q=Ut(Rr,R),Z=tr(q,wd(5)),H=await Ss(Z);H.size>0?(console.log(`✅ Encontrada colección alternativa: ${R} con ${H.size} documentos`),console.log("Documento muestra:",(X=H.docs[0])==null?void 0:X.data())):console.log(`❌ Colección ${R}: vacía`)}catch{console.log(`❌ Colección ${R}: no existe`)}}))}).catch(T=>{console.error("Users debug error:",T)});try{console.log("Configurando suscripción a asistencia...");const T=EFe(F,w,R=>{if(console.log("✅ Received registros:",R.length),R.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",R[0]);const X=[...new Set(R.map(ne=>ne.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",X);const q=[...new Set(R.map(ne=>ne.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",q);const Z=R.reduce((ne,L)=>{const W=new Date(L.fechaHora).getDate();return ne[W]||(ne[W]=[]),ne[W].push(L),ne},{});console.log("📅 Registros por día del mes:",Object.keys(Z).map(ne=>({dia:parseInt(ne),cantidad:Z[parseInt(ne)].length})));const H=r.map(ne=>ne.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",H);const V=X.filter(ne=>H.includes(ne)),K=X.filter(ne=>!H.includes(ne));console.log("✅ Emails que coinciden:",V),console.log("❌ Emails que NO coinciden:",K)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(R),C=!0,P()},R=>{console.error("❌ Error fetching asistencia:",R),o("Error al cargar datos de asistencia: "+R.message),C=!0,P()});console.log("Configurando suscripción a usuarios...");const U=CFe(R=>{if(console.log("✅ Received users (multi-collection):",R.length),R.length>0){console.log("Sample user:",R[0]);const X=R.filter(q=>q.profile===er.ESTUDIANTE&&q.curso);console.log("Dual students found:",X.length),X.forEach(q=>{console.log(`- ${q.nombreCompleto} (${q.curso}) - ${q.email}`)})}n(R),N=!0,P()},R=>{console.error("❌ Error fetching users (multi-collection):",R),console.log("🔄 Intentando con función original de usuarios...");const X=_Fe(q=>{console.log("✅ Received users (fallback):",q.length),n(q),N=!0,P()},q=>{console.error("❌ Error en fallback también:",q),o("Error al cargar estudiantes: "+R.message),N=!0,P()})});return()=>{console.log("Limpiando suscripciones..."),T&&T(),U&&U()}}catch(T){console.error("❌ Error setting up subscriptions:",T),o("Error al inicializar conexiones: "+(T instanceof Error?T.message:"Error desconocido")),s(!1)}},[l]);const{monthDays:g,monthName:v,year:b}=j.useMemo(()=>{const F=l.getFullYear(),w=l.getMonth();return{monthDays:new Date(F,w+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:F}},[l]),y=j.useMemo(()=>{let F=r.filter(w=>w.profile===er.ESTUDIANTE&&w.curso&&mp.includes(zE(w.curso)));if(d!=="todos"&&(F=F.filter(w=>zE(w.curso||"")===d)),h&&(F=F.filter(w=>w.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const w=[...new Set(e.map(P=>P.emailEstudiante).filter(Boolean))],C=F.map(P=>P.email),N=w.filter(P=>!C.includes(P));if(N.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",N);const D=N.map(T=>{const U=e.find(R=>R.emailEstudiante===T);return{id:T,email:T,nombreCompleto:(U==null?void 0:U.nombreEstudiante)||T.split("@")[0],curso:(U==null?void 0:U.curso)||"3ºC",profile:er.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(T=>{const U=d==="todos"||zE(T.curso)===d,R=!h||T.nombreCompleto.toLowerCase().includes(h.toLowerCase());return U&&R&&mp.includes(zE(T.curso))});F=[...F,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${F.length}`),F.forEach(w=>{console.log(`   - ${w.nombreCompleto} (${w.curso}) - ${w.email}`)}),F.sort((w,C)=>w.nombreCompleto.localeCompare(C.nombreCompleto))},[r,d,h,e]),_=j.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const F=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),F):(e.forEach((w,C)=>{const N=w.emailEstudiante;if(!N)return;let P;if(w.fechaHora instanceof Date)P=w.fechaHora;else if(w.fechaHora&&typeof w.fechaHora=="object"&&"toDate"in w.fechaHora)P=w.fechaHora.toDate();else if(typeof w.fechaHora=="string")P=new Date(w.fechaHora);else{console.warn("Fecha no válida en registro:",w);return}const D=P.getDate(),T=P.getMonth(),U=P.getFullYear();C<3&&console.log(`📅 Registro ${C+1}:`,{email:N,tipo:w.tipo,fechaOriginal:w.fechaHora,fechaProcesada:P.toLocaleString(),año:U,mes:T,día:D}),F.has(N)||F.set(N,new Map);const R=F.get(N);R.has(D)||R.set(D,{});const X=R.get(D);w.tipo==="Entrada"?(!X.entrada||P<new Date(X.entrada.fechaHora))&&(X.entrada=w):w.tipo==="Salida"&&(!X.salida||P>new Date(X.salida.fechaHora))&&(X.salida=w)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:F.size,estudiantes:Array.from(F.keys()),registrosPorEstudiante:Array.from(F.entries()).map(([w,C])=>({email:w,dias:Array.from(C.keys()),totalRegistros:Array.from(C.values()).reduce((N,P)=>N+(P.entrada?1:0)+(P.salida?1:0),0)}))}),F)},[e]),S=F=>{u(w=>{const C=new Date(w);return C.setMonth(C.getMonth()+F),C})},k=F=>{F!=null&&F.latitud&&(F!=null&&F.longitud)&&window.open(`https://www.google.com/maps?q=${F.latitud},${F.longitud}`,"_blank")},B=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>S(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${v} ${b}`}),c.jsx("button",{onClick:()=>S(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),c.jsxs("select",{value:d,onChange:F=>f(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),mp.map(F=>c.jsx("option",{value:F,children:F},F))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:F=>p(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(F,w)=>{const N=new Date(b,l.getMonth(),w+1).getDay(),P=N===0||N===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${P?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:B[N]}),c.jsx("div",{children:w+1})]},w)})]})}),c.jsx("tbody",{children:y.length>0?y.map(F=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:F.nombreCompleto}),Array.from({length:g},(w,C)=>{var U;const N=C+1,P=(U=_.get(F.email))==null?void 0:U.get(N),D=new Date(b,l.getMonth(),C+1),T=D.getDay()===0||D.getDay()===6;return F.email==="alexis.robles@industrialderecoleta.cl"&&N===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:F.email,day:N,hasDataForStudent:_.has(F.email),studentDayRecords:P,allAttendanceKeys:Array.from(_.keys()),daysForStudent:_.get(F.email)?Array.from(_.get(F.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${T?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(P==null?void 0:P.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return k((R=P.entrada)==null?void 0:R.ubicacion)},children:[c.jsx(SFe,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(P.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(P==null?void 0:P.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var R;return k((R=P.salida)==null?void 0:R.ubicacion)},children:[c.jsx(NFe,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(P.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},N)})]},F.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},RN="evaluaciones_formativas",PN="calificaciones_formativas",cR="trabajos_grupales_formativos",BFe="usuarios",uR=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},TFe=(e,t,r)=>{const n=tr(Ut(jt,RN),In("curso","==",e),In("asignatura","==",t),Kr("fecha","asc"));return vr(n,a=>{r(a.docs.map(s=>uR(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},IFe=async(e,t)=>{const r=mN(jt),n=hr(Ut(jt,RN));r.set(n,{...e,fecha:br.fromDate(new Date(e.fecha+"T00:00:00"))});const a=hr(jt,PN,n.id);return r.set(a,t),await r.commit(),n.id},jFe=async(e,t)=>{const r=hr(jt,RN,e);await Ji(r,t,{merge:!0})},FFe=async e=>{const t=mN(jt);t.delete(hr(jt,RN,e)),t.delete(hr(jt,PN,e)),await t.commit()},OFe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=hr(jt,PN,n);return vr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},DFe=async(e,t)=>{const r=hr(jt,PN,e);await Ji(r,t,{merge:!0})},RFe=(e,t,r)=>{const n=tr(Ut(jt,cR),In("curso","==",e),In("asignatura","==",t),Kr("fechaPresentacion","desc"));return vr(n,a=>{r(a.docs.map(s=>uR(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},PFe=async e=>{const t={...e,fechaPresentacion:br.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Jn(Ut(jt,cR),t)},LFe=async(e,t)=>{const r=hr(jt,cR,e);await Ji(r,t,{merge:!0})},MFe=e=>{const t=tr(Ut(jt,BFe));return vr(t,r=>{e(r.docs.map(n=>uR(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},Kte=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},_v={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Gte=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},UFe=({cursos:e,onSelect:t})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Gte(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),QFe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Gte(e);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>c.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:_v[s]||_v.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},HFe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=j.useState([]),[i,o]=j.useState({}),[l,u]=j.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=j.useState(null),[h,p]=j.useState(null),[g,v]=j.useState(!0),b=j.useMemo(()=>r.filter(C=>C.profile===er.ESTUDIANTE&&Kte(C.curso||"")===e).map(C=>C.nombreCompleto).sort((C,N)=>C.localeCompare(N)),[r,e]);j.useEffect(()=>{v(!0);const C=TFe(e,t,N=>{s(N);const P=N.map(T=>T.id),D=OFe(P,T=>{o(U=>({...U,...T}))});return v(!1),()=>D()});return()=>C()},[e,t]);const y=C=>{const{name:N,value:P}=C.target;d?f(D=>D?{...D,[N]:P}:null):u(D=>({...D,[N]:P}))},_=async C=>{if(C.preventDefault(),p(null),!l.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const N={asignatura:t,curso:e,...l},P=b.reduce((D,T)=>(D[T]="trabajado",D),{});try{await IFe(N,P),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),p("No se pudo crear la evaluación.")}},S=(C,N)=>{var U;const P=((U=i[C])==null?void 0:U[N])||"trabajado";let D;P==="trabajado"?D="no trabajado":P==="no trabajado"?D="ausente":D="trabajado";const T={...i,[C]:{...i[C]||{},[N]:D}};o(T),DFe(C,{[N]:D}).catch(R=>{console.error("Error updating grade:",R)})},k=C=>f(C),B=async()=>{if(d)try{await jFe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(C){console.error(C),p("No se pudo guardar la edición.")}},F=async C=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await FFe(C)}catch(N){console.error(N),p("No se pudo eliminar la evaluación.")}},w=j.useCallback(C=>{if(a.length===0)return"-";let N=0,P=0;return a.forEach(D=>{var U;const T=(U=i[D.id])==null?void 0:U[C];T==="trabajado"?(N+=7,P++):T==="no trabajado"&&(N+=2,P++)}),P===0?"-":(N/P).toFixed(1)},[i,a]);return g?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(C=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===C.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:B,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:C.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:C.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>k(C),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>F(C.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},C.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:C}),a.map(N=>{var T;const P=(T=i[N.id])==null?void 0:T[C];let D;return P==="trabajado"?D=_v[t]||_v.Default:P==="no trabajado"?D="❌":P==="ausente"?D="A":D=_v[t]||_v.Default,c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>S(N.id,C),className:`text-3xl transition-opacity duration-200 ${P==="trabajado"?"opacity-100":P==="no trabajado"?"opacity-40":P==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},N.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:w(C)})]},C))})]})})]})},VFe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=j.useState([]),[i,o]=j.useState(null),[l,u]=j.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=j.useState({}),[h,p]=j.useState(2),g=j.useMemo(()=>r.filter(k=>k.profile===er.ESTUDIANTE&&Kte(k.curso||"")===e).sort((k,B)=>k.nombreCompleto.localeCompare(B.nombreCompleto)),[r,e]);j.useEffect(()=>{const k=RFe(e,t,s);return()=>k()},[e,t]),j.useEffect(()=>{if(i){const k={};i.grupos.forEach(B=>{B.integrantes.forEach(F=>{k[F.nombre]={groupNumber:String(B.numero),role:F.rol||""}})}),f(k)}else f({})},[i]);const v=async k=>{if(k.preventDefault(),!l.nombre.trim())return;const B={curso:e,asignatura:t,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await PFe(B),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(F){console.error(F),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const k=new Map;for(const F of g){const w=d[F.nombreCompleto];if(w&&w.groupNumber){const C=parseInt(w.groupNumber,10);isNaN(C)||(k.has(C)||k.set(C,[]),k.get(C).push({nombre:F.nombreCompleto,rol:w.role||""}))}}const B=Array.from(k.entries()).map(([F,w])=>({numero:F,integrantes:w})).sort((F,w)=>F.numero-w.numero);try{await LFe(i.id,{grupos:B}),alert("Grupos guardados con éxito.")}catch(F){console.error(F),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const k=[...g].sort(()=>Math.random()-.5),B={};k.forEach((F,w)=>{var C;B[F.nombreCompleto]={groupNumber:String(w%h+1),role:((C=d[F.nombreCompleto])==null?void 0:C.role)||""}}),f(B)},_=(k,B,F)=>{f(w=>({...w,[k]:{...w[k]||{groupNumber:"",role:""},[B]:F}}))},S=j.useMemo(()=>{const k=new Map;return Object.entries(d).forEach(([B,F])=>{F.groupNumber&&(k.has(F.groupNumber)||k.set(F.groupNumber,[]),k.get(F.groupNumber).push({nombre:B,rol:F.role}))}),Array.from(k.entries()).sort((B,F)=>parseInt(B[0])-parseInt(F[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:h,onChange:k=>p(parseInt(k.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:g.map(k=>{var B;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:k.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((B=d[k.nombreCompleto])==null?void 0:B.groupNumber)||"",onChange:F=>_(k.nombreCompleto,"groupNumber",F.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},k.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:S.map(([k,B])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",k]}),c.jsx("ul",{className:"space-y-2",children:B.map(F=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:F.nombre}),c.jsxs("select",{value:F.rol||"",onChange:w=>_(F.nombre,"role",w.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),SJ.map(w=>c.jsx("option",{value:w,children:w},w))]})]},F.nombre))})]},k))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:k=>u({...l,nombre:k.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:k=>u({...l,fecha:k.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(k=>c.jsxs("button",{onClick:()=>o(k),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:k.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",k.fechaPresentacion]})]},k.id))]})]})},zFe=({currentUser:e})=>{const[t,r]=j.useState("calificaciones"),[n,a]=j.useState(null),[s,i]=j.useState(null),[o,l]=j.useState([]),[u,d]=j.useState(!0);j.useEffect(()=>{d(!0);const v=MFe(b=>{l(b),d(!1)});return()=>v()},[]);const f=j.useMemo(()=>e.cursos||[],[e.cursos]),h=j.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:v,label:b})=>c.jsx("button",{onClick:()=>r(v),className:`${t===v?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(UFe,{cursos:f,onSelect:a});if(!s)return c.jsx(QFe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return c.jsx(HFe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return c.jsx(VFe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:g()})]})},r1="acompanamientos",$Fe="ciclosOPR",KFe="configuracion",GFe=async()=>{try{const e=tr(Ut(Rr,r1),Kr("fecha","desc"));return(await Ss(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompañamientos:",e),new Error("No se pudieron cargar los registros de acompañamiento")}},qFe=async e=>{try{return{id:(await Jn(Ut(Rr,r1),{...e,fecha:e.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acompañamiento:",t),new Error("No se pudo crear el registro de acompañamiento")}},WFe=async(e,t)=>{try{const r=hr(Rr,r1,e);await Ah(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",e),new Error("No se pudo actualizar el registro de acompañamiento")}},XFe=async e=>{try{const t=hr(Rr,r1,e);await Is(t)}catch(t){throw console.error("Error al eliminar acompañamiento:",t,"ID:",e),new Error("No se pudo eliminar el registro de acompañamiento")}},YFe=async(e,t)=>{try{const r=Ut(Rr,r1,e,$Fe);return{id:(await Jn(r,{...t,createdAt:new Date().toISOString()})).id,...t}}catch(r){throw console.error(`Error al crear ciclo OPR para ${e}:`,r),new Error("No se pudo crear el ciclo OPR")}},JFe=async(e,t)=>{try{const r=rD(),n=tD(r,t),a=await ZO(n,e);return await eD(a.ref)}catch(r){throw console.error(`Error al subir archivo a ${t}:`,r),new Error("No se pudo subir el archivo")}},ZFe=async e=>{try{const t=tr(Ut(Rr,r1),In("docente","==",e),Kr("fecha","desc"));return(await Ss(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompañamientos por docente:",t),new Error("No se pudieron cargar los acompañamientos del docente")}},e6e=async()=>{try{const e=hr(Rr,KFe,"rubricaAcompanamiento"),t=await Wx(e);return t.exists()?t.data().rubrica:null}catch(e){return console.error("Error al obtener rúbrica personalizada:",e),null}},t6e=async()=>await Rte(),r6e=({label:e,onFileChange:t,uploadedUrl:r,onRemove:n,isUploading:a,accept:s="video/mp4,video/quicktime"})=>{const i=`file-upload-${e.replace(/\s+/g,"-")}`;return c.jsxs("div",{className:"w-full",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),r?c.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[c.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline truncate",children:"Ver video cargado"}),c.jsx("button",{type:"button",onClick:n,className:"text-red-500 hover:text-red-700 ml-auto",children:c.jsx(Yx,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{id:i,type:"file",onChange:o=>o.target.files&&t(o.target.files[0]),className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100",disabled:a,accept:s}),a&&c.jsx("div",{className:"text-sm text-amber-600",children:"Cargando..."})]})]})},n6e=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=j.useState(!1),[o,l]=j.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),u=j.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",modelo:"",videoModeloUrl:"",foco:"",elementosIdentificar:"",brecha:{videoUrl:"",minutoInicial:"",minutoFinal:"",preguntas:"",indicadores:""}},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:o.curso||"",profesor:o.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,o]),[d,f]=j.useState(t||u),[h,p]=j.useState({}),g=C=>{const{name:N,value:P}=C.target,D=N.split(".");D.length>1?f(T=>{const U=JSON.parse(JSON.stringify(T));let R=U;for(let X=0;X<D.length-1;X++)R=R[D[X]];return R[D[D.length-1]]=P,U}):f(T=>({...T,[N]:P}))},v=(C,N,P)=>{f(D=>({...D,detallesObservacion:D.detallesObservacion.map(T=>T.id===C?{...T,[N]:P}:T)}))},b=()=>{const C=d.detallesObservacion[d.detallesObservacion.length-1],N=C&&parseInt(C.minuto.split("-")[1],10)||0,P=`${N+1}-${N+5}`;f(D=>({...D,detallesObservacion:[...D.detallesObservacion,{id:`row_${Date.now()}`,minuto:P,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},y=C=>{f(N=>({...N,detallesObservacion:N.detallesObservacion.filter(P=>P.id!==C)}))},_=async(C,N)=>{p(P=>({...P,[C]:!0}));try{const P=`${Date.now()}-${N.name}`,D=e.id||"independent",T=d.id||"temp",U=`videos_opr/${D}/${T}/${P}`,R=await JFe(N,U),X=C.split(".");X.length>1?f(q=>{const Z=JSON.parse(JSON.stringify(q));let H=Z;for(let V=0;V<X.length-1;V++)H=H[X[V]];return H[X[X.length-1]]=R,Z}):f(q=>({...q,[C]:R}))}catch(P){console.error("Error al subir archivo:",P),alert("No se pudo subir el archivo. Revise los permisos de Storage.")}finally{p(P=>({...P,[C]:!1}))}},S=C=>{const N=C.split(".");N.length>1?f(P=>{const D=JSON.parse(JSON.stringify(P));let T=D;for(let U=0;U<N.length-1;U++)T=T[N[U]];return T[N[N.length-1]]="",D}):f(P=>({...P,[C]:""}))},k=async(C,N,P)=>{if(!P||!P.trim())return P;const D=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${N}):

"""${P}"""`;try{return(await C.generateContent(D)).response.text()}catch(T){return console.error(`Error improving text for ${N}:`,T),P}},B=async()=>{var C,N;i(!0);try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await em("Acompañamiento - Mejorar Ciclo OPR");const T=new os(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),U=d.retroalimentacion,R=d.planificacion,X=await Promise.all([k(T,"Éxito",U.exito),k(T,"Modelo",U.modelo),k(T,"Foco",U.foco),k(T,"Elementos a identificar",U.elementosIdentificar),k(T,"Brecha - Preguntas",((C=U.brecha)==null?void 0:C.preguntas)||""),k(T,"Brecha - Indicadores",((N=U.brecha)==null?void 0:N.indicadores)||""),k(T,"Planificación - Preparación",R.preparacion),k(T,"Planificación - Objetivo",R.objetivo),k(T,"Planificación - Actividad",R.actividad),k(T,"Planificación - Tiempo",R.tiempo)]);f(q=>({...q,retroalimentacion:{...q.retroalimentacion,exito:X[0],modelo:X[1],foco:X[2],elementosIdentificar:X[3],brecha:{...q.retroalimentacion.brecha,preguntas:X[4],indicadores:X[5]}},planificacion:{...q.planificacion,preparacion:X[6],objetivo:X[7],actividad:X[8],tiempo:X[9]}}))}catch(P){console.error(P),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},F=()=>{const C=new pr,N=C.internal.pageSize.getWidth(),P=15,D=N-P*2;let T=20;const U=Z=>{T>260&&(C.addPage(),T=20),C.setFontSize(14),C.setFont("helvetica","bold"),C.text(Z,P,T),T+=10},R=(Z,H="")=>{if(!Z)return;T>270&&(C.addPage(),T=20),C.setFontSize(10),C.setFont("helvetica","bold"),C.text(H,P,T),C.setFont("helvetica","normal");const V=C.splitTextToSize(Z,D-(H?15:0));C.text(V,P+(H?15:0),T),T+=V.length*5+4};C.setFontSize(18),C.setFont("helvetica","bold"),C.text("Informe de Ciclo OPR",N/2,T,{align:"center"}),T+=15,U("1. Datos Generales");const X=[["Docente:",o.docente],["Curso:",o.curso],["Asignatura:",o.asignatura],["Fecha:",new Date(d.fecha).toLocaleDateString("es-CL")],["Hora:",`${d.horaInicio} - ${d.horaTermino}`],["Ciclo:",d.nombreCiclo]];gl(C,{body:X,startY:T,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),T=C.lastAutoTable.finalY+10,U("2. Registro Detallado de Observación");const q=d.detallesObservacion.map(Z=>[Z.minuto,Z.accionesDocente,Z.accionesEstudiantes,Z.actividades]);gl(C,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:q,startY:T,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:Z=>{var H;T=((H=Z.cursor)==null?void 0:H.y)||20}}),T=C.lastAutoTable.finalY+10,U("3. Retroalimentación Docente"),R(d.retroalimentacion.exito,"Éxito:"),R(d.retroalimentacion.modelo,"Modelo:"),R(d.retroalimentacion.foco,"Foco:"),R(d.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),T+=5,C.setFontSize(11),C.setFont("helvetica","bold"),C.text("Análisis de Brecha",P,T),T+=7,R(`${d.retroalimentacion.brecha.minutoInicial} a ${d.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),R(d.retroalimentacion.brecha.preguntas,"Preguntas:"),R(d.retroalimentacion.brecha.indicadores,"Indicadores:"),U("4. Planificación de Práctica"),R(d.planificacion.preparacion,"Preparación:"),R(d.planificacion.objetivo,"Objetivo:"),R(d.planificacion.actividad,"Actividad:"),R(d.planificacion.tiempo,"Tiempo:"),U("5. Seguimiento"),R(new Date(d.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),R(d.seguimiento.firma,"Firma (Registrado por):"),C.save(`Informe_OPR_${o.docente}_${d.fecha}.pdf`)},w=async C=>{C.preventDefault();const N={...d,docenteInfo:o.docente,cursoInfo:o.curso,asignaturaInfo:o.asignatura,seguimiento:{...d.seguimiento,profesor:o.docente,curso:o.curso}};await r(N)};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{value:o.docente,onChange:C=>l(N=>({...N,docente:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{value:o.curso,onChange:C=>l(N=>({...N,curso:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Cs.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:o.asignatura,onChange:C=>l(N=>({...N,asignatura:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(C=>c.jsx("option",{value:C,children:C},C))]})]})]})]}),c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:B,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md flex items-center gap-2",disabled:s,children:[c.jsx(TJ,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),c.jsxs("button",{type:"button",onClick:F,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[c.jsx(BJ,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),c.jsxs("form",{onSubmit:w,className:"space-y-8",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx($1e,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("input",{type:"text",name:"nombreCiclo",value:d.nombreCiclo,onChange:g,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"number",name:"registroN",value:d.registroN,onChange:g,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"time",name:"horaInicio",value:d.horaInicio,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"time",name:"horaTermino",value:d.horaTermino,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx(r6e,{label:"Subir video de observación de clase",onFileChange:C=>_("videoObservacionUrl",C),uploadedUrl:d.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!h.videoObservacionUrl})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(n1e,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b dark:border-slate-600",children:[c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),c.jsx("th",{className:"p-2"})]})}),c.jsx("tbody",{children:d.detallesObservacion.map(C=>c.jsxs("tr",{className:"border-b dark:border-slate-700",children:[c.jsx("td",{children:c.jsx("input",{type:"text",value:C.minuto,onChange:N=>v(C.id,"minuto",N.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.accionesDocente,onChange:N=>v(C.id,"accionesDocente",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.accionesEstudiantes,onChange:N=>v(C.id,"accionesEstudiantes",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.actividades,onChange:N=>v(C.id,"actividades",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:d.detallesObservacion.length>1&&c.jsx("button",{type:"button",onClick:()=>y(C.id),className:"text-red-500 p-1",children:c.jsx(Yx,{className:"w-4 h-4"})})})]},C.id))})]})}),c.jsxs("button",{type:"button",onClick:b,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1",children:[c.jsx(kj,{className:"w-4 h-4"})," Agregar Fila"]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(w1e,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),c.jsx("textarea",{name:"retroalimentacion.exito",value:d.retroalimentacion.exito,onChange:g,placeholder:"Éxito",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.modelo",value:d.retroalimentacion.modelo,onChange:g,placeholder:"Modelo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.foco",value:d.retroalimentacion.foco,onChange:g,placeholder:"Foco",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:d.retroalimentacion.elementosIdentificar,onChange:g,placeholder:"Elementos a Identificar",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Brecha"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoInicial",value:d.retroalimentacion.brecha.minutoInicial,onChange:g,placeholder:"Minuto inicial",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoFinal",value:d.retroalimentacion.brecha.minutoFinal,onChange:g,placeholder:"Minuto final",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("textarea",{name:"retroalimentacion.brecha.preguntas",value:d.retroalimentacion.brecha.preguntas,onChange:g,placeholder:"Preguntas",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.brecha.indicadores",value:d.retroalimentacion.brecha.indicadores,onChange:g,placeholder:"Indicadores",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(zxe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),c.jsx("textarea",{name:"planificacion.preparacion",value:d.planificacion.preparacion,onChange:g,placeholder:"Preparación",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"planificacion.objetivo",value:d.planificacion.objetivo,onChange:g,placeholder:"Objetivo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"planificacion.actividad",value:d.planificacion.actividad,onChange:g,placeholder:"Actividad",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"planificacion.tiempo",value:d.planificacion.tiempo,onChange:g,placeholder:"Tiempo",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("input",{type:"date",name:"seguimiento.fecha",value:d.seguimiento.fecha,onChange:g,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"seguimiento.firma",value:d.seguimiento.firma,onChange:g,placeholder:"Firma (Nombre de quien registra)",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[c.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Ciclo OPR"})]})]})]})},a6e=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,s]=j.useState(!0),[i,o]=j.useState(!0),[l,u]=j.useState(null),[d,f]=j.useState("list"),[h,p]=j.useState(null),[g,v]=j.useState("general"),[b,y]=j.useState(!1),_=cy,S=j.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[k,B]=j.useState(S),F=j.useCallback(async()=>{s(!0);try{const H=await GFe();t(H)}catch(H){u("No se pudieron cargar los registros."),console.error(H)}finally{s(!1)}},[]),w=j.useCallback(async()=>{o(!0);try{const V=(await t6e()).filter(K=>K.profile==="PROFESORADO").map(K=>K.nombreCompleto).sort();n(V)}catch(H){u("No se pudo cargar la lista de profesores."),console.error(H)}finally{o(!1)}},[]);j.useEffect(()=>{F(),w()},[F,w]);const C=async()=>{if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}y(!0),u(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await em("Acompañamiento - Feedback General");const K=new os(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ne=Object.entries(k.rubricaResultados||{}).map(([te,ie])=>`- ${te}: Nivel ${ie}`).join(`
`),L=`
            Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
            Contexto de la observación:
            - Docente: ${k.docente}
            - Asignatura: ${k.asignatura}
            - Curso: ${k.curso}
            - Resultados de la pauta de observación (rúbrica):
            ${ne||"No se completó la pauta."}
            - Observaciones adicionales del evaluador:
            ${k.observacionesGenerales||"Sin observaciones adicionales."}

            Basado en esta información, tu texto debe:
            1. Iniciar con un reconocimiento positivo.
            2. Mencionar 1 o 2 fortalezas clave observadas.
            3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
            4. Concluir con una frase motivadora.
            La respuesta debe ser solo el texto de la retroalimentación.
        `,J=(await K.generateContent(L)).response.text();B(te=>({...te,retroalimentacionConsolidada:J})),alert("Retroalimentación generada con éxito.")}catch(H){console.error("Error al generar retroalimentación:",H),u("No se pudo generar la retroalimentación. Revisa la consola para más detalles.")}finally{y(!1)}},N=async H=>{if(H.preventDefault(),!("docente"in k)||!k.docente||!k.curso||!k.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{if(h)await WFe(h,k),alert("¡Actualizado correctamente!");else{const V=await qFe(k);p(V.id),B(V),alert("¡Guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await F()}catch(V){u("Error al guardar el registro."),console.error(V)}},P=()=>{B(S),p(null),f("form"),v("general"),u(null)},D=H=>{B(H),p(H.id),f("form"),v("general"),u(null)},T=async H=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await XFe(H),await F()}catch(V){u("No se pudo eliminar el registro."),console.error(V)}},U=(H,V)=>{B(K=>({...K,rubricaResultados:{...K.rubricaResultados,[H]:V}}))},R=()=>{if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}const H=new pr,V=H.internal.pageSize.getWidth(),K=15,ne=V-K*2;let L=20;H.setFontSize(18),H.setFont("helvetica","bold"),H.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",V/2,L,{align:"center"}),L+=5,H.setLineWidth(.5),H.line(K,L,V-K,L),L+=10;const W=[["Docente:",k.docente],["Curso:",k.curso],["Asignatura:",k.asignatura],["Fecha:",new Date(k.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",k.bloques||"No especificado"]];if(gl(H,{body:W,startY:L,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),L=H.lastAutoTable.finalY+10,Object.keys(k.rubricaResultados||{}).length>0){H.setFontSize(12),H.setFont("helvetica","bold"),H.text("RESULTADOS DE EVALUACIÓN",K,L),L+=8;const ie=Object.entries(k.rubricaResultados).map(([Ae,oe])=>[Ae,`Nivel ${oe}`,oe===1?"Débil":oe===2?"Incipiente":oe===3?"Satisfactorio":"Avanzado"]);gl(H,{startY:L,head:[["Criterio","Nivel","Descripción"]],body:ie,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:K,right:K},styles:{fontSize:9}}),L=H.lastAutoTable.finalY+10}const J=(ie,Ae)=>{if(!Ae||Ae.trim()==="")return;L>250&&(H.addPage(),L=20),H.setFontSize(12),H.setFont("helvetica","bold"),H.text(ie,K,L),L+=8,H.setFontSize(10),H.setFont("helvetica","normal");const oe=H.splitTextToSize(Ae,ne);H.text(oe,K,L),L+=oe.length*5+10};J("OBSERVACIONES GENERALES",k.observacionesGenerales),J("RETROALIMENTACIÓN PEDAGÓGICA",k.retroalimentacionConsolidada);const te=H.getNumberOfPages();for(let ie=1;ie<=te;ie++)H.setPage(ie),H.setFontSize(8),H.setFont("helvetica","italic"),H.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Página ${ie} de ${te}`,V/2,H.internal.pageSize.getHeight()-10,{align:"center"});H.save(`Informe_Acompañamiento_${k.docente}_${k.curso}_${new Date().toISOString().split("T")[0]}.pdf`)},X=H=>{B(V=>({...V,[H.target.name]:H.target.value}))},q=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>{P(),v("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2",children:[c.jsx(kj,{className:"w-5 h-5"})," Acompañamiento"]}),c.jsxs("button",{onClick:()=>{B(S),p(null),f("form"),v("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2",children:[c.jsx(kj,{className:"w-5 h-5"})," Ciclo OPR"]})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-3",children:[c.jsx(qxe,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),c.jsxs("div",{className:"space-y-3",children:[a&&c.jsx("p",{children:"Cargando..."}),!a&&e.filter(H=>H.id).length>0?e.filter(H=>H.id).map(H=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:H.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[H.curso," - ",H.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(H.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>{D(H),v("general")},className:"text-green-600 hover:text-green-800 font-semibold text-sm",children:"Ver/Editar"}),c.jsx("button",{onClick:()=>{D(H),v("opr")},className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Agregar OPR"}),c.jsx("button",{onClick:()=>T(H.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1",children:c.jsx(Yx,{className:"w-4 h-4"})})]})]},H.id)):!a&&c.jsx("p",{className:"text-slate-500 italic p-4 bg-slate-100 dark:bg-slate-800 rounded-md",children:"No hay acompañamientos registrados."})]})]})]}),Z=()=>{const H=h?e.find(K=>K.id===h):null,V={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in k&&k.docente||"",curso:"curso"in k&&k.curso||"",asignatura:"asignatura"in k&&k.asignatura||"",bloques:"bloques"in k&&k.bloques||"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:g==="general"?h?"Editando Acompañamiento":"Nuevo Acompañamiento":"Gestión de Ciclo OPR"}),c.jsx("button",{type:"button",onClick:()=>f("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>v("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${g==="general"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Acompañamiento General"}),c.jsx("button",{onClick:()=>v("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${g==="opr"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Ciclo OPR"})]})}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),g==="general"&&c.jsxs("form",{onSubmit:N,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2 text-green-700 dark:text-green-300",children:"Asistente IA - Informe General"}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:C,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md flex items-center gap-2",disabled:b,children:[c.jsx(TJ,{className:"w-4 h-4"}),b?"Generando...":"Generar Retroalimentación con IA"]}),c.jsxs("button",{type:"button",onClick:()=>R(),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[c.jsx(BJ,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Genera automáticamente la retroalimentación. Luego, crea el informe en PDF."}),"retroalimentacionConsolidada"in k&&k.retroalimentacionConsolidada&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-slate-800 rounded-md shadow",children:[c.jsx("h5",{className:"font-semibold text-sm mb-2",children:"Retroalimentación Consolidada (guardada):"}),c.jsx("textarea",{readOnly:!0,rows:8,value:k.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap bg-transparent border-none p-0 focus:ring-0"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:"docente"in k?k.docente:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:"curso"in k?k.curso:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Cs.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:"asignatura"in k?k.asignatura:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:"bloques"in k?k.bloques:"",onChange:X,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in k?k.observacionesGenerales:"",onChange:X,rows:4,placeholder:"Ingrese sus observaciones sobre la clase...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:_.map(K=>c.jsx(lt.Fragment,{children:K.criteria.map((ne,L)=>c.jsxs("tr",{children:[L===0&&c.jsx("td",{rowSpan:K.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:K.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ne.name}),ne.levels.map((W,J)=>{const te=J+1,ie="rubricaResultados"in k&&k.rubricaResultados[ne.name]===te;return c.jsx("td",{onClick:()=>U(ne.name,te),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${ie?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:W},te)})]},ne.name))},K.domain))})]})}),c.jsx("div",{className:"flex justify-end gap-4",children:c.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:[h?"Actualizar":"Guardar"," Acompañamiento"]})})]}),g==="opr"&&c.jsx(n6e,{acompanamiento:H||V,cicloToEdit:null,profesores:r,onSave:async K=>{try{const ne={...K,acompanamientoId:(H==null?void 0:H.id)||null};await YFe(ne),alert("Ciclo OPR guardado exitosamente"),f("list")}catch(ne){console.error("Error al guardar ciclo OPR:",ne),alert("Error al guardar el ciclo OPR")}},onCancel:()=>f("list")})]})};return a||i?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?q():Z()})})},dR="mensajes_internos",s6e="usuarios",qte="mensajes_read_status",Wte=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},i6e=(e,t)=>{const r=tr(Ut(jt,dR),In("participants","array-contains",e),Kr("fecha","desc"));return vr(r,a=>{const s=a.docs.map(i=>Wte(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},o6e=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:br.fromDate(new Date)};await Jn(Ut(jt,dR),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},l6e=async e=>{try{const t=hr(jt,dR,e);await Is(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},c6e=(e,t)=>{const r=hr(jt,qte,e);return vr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},u6e=async(e,t)=>{try{const r=hr(jt,qte,e);await Ji(r,{messages:aJ(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},d6e=e=>{const t=tr(Ut(jt,s6e),Kr("nombreCompleto","asc"));return vr(t,n=>{const a=n.docs.map(s=>Wte(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},A6e=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=j.useState("inbox"),[a,s]=j.useState([]),[i,o]=j.useState([]),[l,u]=j.useState(null),[d,f]=j.useState({announcements:[],messages:[]}),[h,p]=j.useState(!0),g={para:"",asunto:"",cuerpo:""},[v,b]=j.useState(g);j.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const w=i6e(e.email,P=>{s(P),p(!1)}),C=d6e(o),N=c6e(e.id,P=>{f(P),t()});return()=>{w(),C(),N()}},[e.id,e.email,t]);const y=w=>{u(w),r==="inbox"&&!d.messages.includes(w.id)&&u6e(e.id,w.id).catch(C=>{console.error("Failed to mark message as read:",C)})},_=async w=>{if(w.preventDefault(),!v.para||!v.asunto.trim()||!v.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const C={de:e.email,para:v.para,asunto:v.asunto,cuerpo:v.cuerpo};try{await o6e(C),b(g),n("sent")}catch(N){console.error("Error sending message:",N),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},S=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await l6e(w),u(null)}catch(C){console.error("Error deleting message:",C),alert("No se pudo eliminar el mensaje.")}},k=w=>{b({para:w.de,asunto:`Re: ${w.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${w.de}
Fecha: ${new Date(w.fecha).toLocaleString("es-CL")}

${w.cuerpo}`}),n("compose")},B=j.useMemo(()=>a.filter(w=>w.para===e.email),[a,e.email]),F=j.useMemo(()=>a.filter(w=>w.de===e.email),[a,e.email]);return h?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?B:F).map(w=>{const C=r==="inbox"&&!d.messages.includes(w.id);return c.jsxs("div",{onClick:()=>y(w),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===w.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${C?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?w.de:`Para: ${w.para}`}),C&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${C?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:w.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(w.fecha).toLocaleString("es-CL")})]},w.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:v.para,onChange:w=>b({...v,para:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(w=>w.email!==e.email).map(w=>c.jsxs("option",{value:w.email,children:[w.nombreCompleto," (",w.email,")"]},w.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:v.asunto,onChange:w=>b({...v,asunto:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:v.cuerpo,onChange:w=>b({...v,cuerpo:w.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>k(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>S(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nF=function(e,t){return nF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},nF(e,t)};function Fd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");nF(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var aF=function(){return aF=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},aF.apply(this,arguments)};function cl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,l)}u((n=n.apply(e,[])).next())})}function Lo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function $E(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var eh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),LN=function(e,t){return eh.fromClientRect(e,t.getBoundingClientRect())},f6e=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new eh(0,0,n,a)},MN=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Vs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},wH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h6e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var KE=0;KE<wH.length;KE++)h6e[wH.charCodeAt(KE)]=KE;var EH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var GE=0;GE<EH.length;GE++)zb[EH.charCodeAt(GE)]=GE;var m6e=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=zb[e.charCodeAt(n)],i=zb[e.charCodeAt(n+1)],o=zb[e.charCodeAt(n+2)],l=zb[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},p6e=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},g6e=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},yp=5,AR=11,cT=2,v6e=AR-yp,Xte=65536>>yp,x6e=1<<yp,uT=x6e-1,b6e=1024>>yp,y6e=Xte+b6e,w6e=y6e,E6e=32,C6e=w6e+E6e,_6e=65536>>AR,S6e=1<<v6e,N6e=S6e-1,CH=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},k6e=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},B6e=function(e,t){var r=m6e(e),n=Array.isArray(r)?g6e(r):new Uint32Array(r),a=Array.isArray(r)?p6e(r):new Uint16Array(r),s=24,i=CH(a,s/2,n[4]/2),o=n[5]===2?CH(a,(s+n[4])/2):k6e(n,Math.ceil((s+n[4])/4));return new T6e(n[0],n[1],n[2],n[3],i,o)},T6e=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>yp],r=(r<<cT)+(t&uT),this.data[r];if(t<=65535)return r=this.index[Xte+(t-55296>>yp)],r=(r<<cT)+(t&uT),this.data[r];if(t<this.highStart)return r=C6e-_6e+(t>>AR),r=this.index[r],r+=t>>yp&N6e,r=this.index[r],r=(r<<cT)+(t&uT),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),_H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I6e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qE=0;qE<_H.length;qE++)I6e[_H.charCodeAt(qE)]=qE;var j6e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",SH=50,F6e=1,Yte=2,Jte=3,O6e=4,D6e=5,NH=7,Zte=8,kH=9,k0=10,sF=11,BH=12,iF=13,R6e=14,$b=15,oF=16,WE=17,Ab=18,P6e=19,TH=20,lF=21,fb=22,dT=23,qg=24,vc=25,Kb=26,Gb=27,Wg=28,L6e=29,rp=30,M6e=31,XE=32,YE=33,cF=34,uF=35,dF=36,sw=37,AF=38,l_=39,c_=40,AT=41,ere=42,U6e=43,Q6e=[9001,65288],tre="!",Nn="×",JE="÷",fF=B6e(j6e),_f=[rp,dF],hF=[F6e,Yte,Jte,D6e],rre=[k0,Zte],IH=[Gb,Kb],H6e=hF.concat(rre),jH=[AF,l_,c_,cF,uF],V6e=[$b,iF],z6e=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=fF.get(s);if(o>SH?(a.push(!0),o-=SH):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(oF);if(o===O6e||o===sF){if(i===0)return n.push(i),r.push(rp);var l=r[i-1];return H6e.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(rp))}if(n.push(i),o===M6e)return r.push(t==="strict"?lF:sw);if(o===ere||o===L6e)return r.push(rp);if(o===U6e)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(sw):r.push(rp);r.push(o)}),[n,r,a]},fT=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==k0)break}if(a===k0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===t)return!0;if(i!==k0)break}if(o!==k0)break}return!1},FH=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===k0)r--;else return n}return 0},$6e=function(e,t,r,n,a){if(r[n]===0)return Nn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Nn;var i=s-1,o=s+1,l=t[s],u=i>=0?t[i]:0,d=t[o];if(l===Yte&&d===Jte)return Nn;if(hF.indexOf(l)!==-1)return tre;if(hF.indexOf(d)!==-1||rre.indexOf(d)!==-1)return Nn;if(FH(s,t)===Zte)return JE;if(fF.get(e[s])===sF||(l===XE||l===YE)&&fF.get(e[o])===sF||l===NH||d===NH||l===kH||[k0,iF,$b].indexOf(l)===-1&&d===kH||[WE,Ab,P6e,qg,Wg].indexOf(d)!==-1||FH(s,t)===fb||fT(dT,fb,s,t)||fT([WE,Ab],lF,s,t)||fT(BH,BH,s,t))return Nn;if(l===k0)return JE;if(l===dT||d===dT)return Nn;if(d===oF||l===oF)return JE;if([iF,$b,lF].indexOf(d)!==-1||l===R6e||u===dF&&V6e.indexOf(l)!==-1||l===Wg&&d===dF||d===TH||_f.indexOf(d)!==-1&&l===vc||_f.indexOf(l)!==-1&&d===vc||l===Gb&&[sw,XE,YE].indexOf(d)!==-1||[sw,XE,YE].indexOf(l)!==-1&&d===Kb||_f.indexOf(l)!==-1&&IH.indexOf(d)!==-1||IH.indexOf(l)!==-1&&_f.indexOf(d)!==-1||[Gb,Kb].indexOf(l)!==-1&&(d===vc||[fb,$b].indexOf(d)!==-1&&t[o+1]===vc)||[fb,$b].indexOf(l)!==-1&&d===vc||l===vc&&[vc,Wg,qg].indexOf(d)!==-1)return Nn;if([vc,Wg,qg,WE,Ab].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===vc)return Nn;if([Wg,qg].indexOf(h)!==-1)f--;else break}if([Gb,Kb].indexOf(d)!==-1)for(var f=[WE,Ab].indexOf(l)!==-1?i:s;f>=0;){var h=t[f];if(h===vc)return Nn;if([Wg,qg].indexOf(h)!==-1)f--;else break}if(AF===l&&[AF,l_,cF,uF].indexOf(d)!==-1||[l_,cF].indexOf(l)!==-1&&[l_,c_].indexOf(d)!==-1||[c_,uF].indexOf(l)!==-1&&d===c_||jH.indexOf(l)!==-1&&[TH,Kb].indexOf(d)!==-1||jH.indexOf(d)!==-1&&l===Gb||_f.indexOf(l)!==-1&&_f.indexOf(d)!==-1||l===qg&&_f.indexOf(d)!==-1||_f.concat(vc).indexOf(l)!==-1&&d===fb&&Q6e.indexOf(e[o])===-1||_f.concat(vc).indexOf(d)!==-1&&l===Ab)return Nn;if(l===AT&&d===AT){for(var p=r[s],g=1;p>0&&(p--,t[p]===AT);)g++;if(g%2!==0)return Nn}return l===XE&&d===YE?Nn:JE},K6e=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=z6e(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[vc,rp,ere].indexOf(o)!==-1?sw:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,l){return o&&e[l]>=19968&&e[l]<=40959}):void 0;return[n,a,i]},G6e=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===tre,this.start=n,this.end=a}return e.prototype.slice=function(){return Vs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),q6e=function(e,t){var r=MN(e),n=K6e(r,t),a=n[0],s=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=Nn;u<o&&(d=$6e(r,s,a,++u,i))===Nn;);if(d!==Nn||u===o){var f=new G6e(r,d,l,u);return l=u,{value:f,done:!1}}return{done:!0,value:null}}}},W6e=1,X6e=2,Ww=4,OH=8,yS=10,DH=47,yy=92,Y6e=9,J6e=32,ZE=34,hb=61,Z6e=35,eOe=36,tOe=37,eC=39,tC=40,mb=41,rOe=95,Ql=45,nOe=33,aOe=60,sOe=62,iOe=64,oOe=91,lOe=93,cOe=61,uOe=123,rC=63,dOe=125,RH=124,AOe=126,fOe=128,PH=65533,hT=42,ip=43,hOe=44,mOe=58,pOe=59,iw=46,gOe=0,vOe=8,xOe=11,bOe=14,yOe=31,wOe=127,hA=-1,nre=48,are=97,sre=101,EOe=102,COe=117,_Oe=122,ire=65,ore=69,lre=70,SOe=85,NOe=90,Vo=function(e){return e>=nre&&e<=57},kOe=function(e){return e>=55296&&e<=57343},Xg=function(e){return Vo(e)||e>=ire&&e<=lre||e>=are&&e<=EOe},BOe=function(e){return e>=are&&e<=_Oe},TOe=function(e){return e>=ire&&e<=NOe},IOe=function(e){return BOe(e)||TOe(e)},jOe=function(e){return e>=fOe},nC=function(e){return e===yS||e===Y6e||e===J6e},wS=function(e){return IOe(e)||jOe(e)||e===rOe},LH=function(e){return wS(e)||Vo(e)||e===Ql},FOe=function(e){return e>=gOe&&e<=vOe||e===xOe||e>=bOe&&e<=yOe||e===wOe},f0=function(e,t){return e!==yy?!1:t!==yS},aC=function(e,t,r){return e===Ql?wS(t)||f0(t,r):wS(e)?!0:!!(e===yy&&f0(e,t))},mT=function(e,t,r){return e===ip||e===Ql?Vo(t)?!0:t===iw&&Vo(r):Vo(e===iw?t:e)},OOe=function(e){var t=0,r=1;(e[t]===ip||e[t]===Ql)&&(e[t]===Ql&&(r=-1),t++);for(var n=[];Vo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Vs.apply(void 0,n),10):0;e[t]===iw&&t++;for(var s=[];Vo(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Vs.apply(void 0,s),10):0;(e[t]===ore||e[t]===sre)&&t++;var l=1;(e[t]===ip||e[t]===Ql)&&(e[t]===Ql&&(l=-1),t++);for(var u=[];Vo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Vs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},DOe={type:2},ROe={type:3},POe={type:4},LOe={type:13},MOe={type:8},UOe={type:21},QOe={type:9},HOe={type:10},VOe={type:11},zOe={type:12},$Oe={type:14},sC={type:23},KOe={type:1},GOe={type:25},qOe={type:24},WOe={type:26},XOe={type:27},YOe={type:28},JOe={type:29},ZOe={type:31},mF={type:32},cre=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(MN(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==mF;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case ZE:return this.consumeStringToken(ZE);case Z6e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(LH(r)||f0(n,a)){var s=aC(r,n,a)?X6e:W6e,i=this.consumeName();return{type:5,value:i,flags:s}}break;case eOe:if(this.peekCodePoint(0)===hb)return this.consumeCodePoint(),LOe;break;case eC:return this.consumeStringToken(eC);case tC:return DOe;case mb:return ROe;case hT:if(this.peekCodePoint(0)===hb)return this.consumeCodePoint(),$Oe;break;case ip:if(mT(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case hOe:return POe;case Ql:var o=t,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(mT(o,l,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(aC(o,l,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(l===Ql&&u===sOe)return this.consumeCodePoint(),this.consumeCodePoint(),qOe;break;case iw:if(mT(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case DH:if(this.peekCodePoint(0)===hT)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===hT&&(d=this.consumeCodePoint(),d===DH))return this.consumeToken();if(d===hA)return this.consumeToken()}break;case mOe:return WOe;case pOe:return XOe;case aOe:if(this.peekCodePoint(0)===nOe&&this.peekCodePoint(1)===Ql&&this.peekCodePoint(2)===Ql)return this.consumeCodePoint(),this.consumeCodePoint(),GOe;break;case iOe:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(aC(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case oOe:return YOe;case yy:if(f0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case lOe:return JOe;case cOe:if(this.peekCodePoint(0)===hb)return this.consumeCodePoint(),MOe;break;case uOe:return VOe;case dOe:return zOe;case COe:case SOe:var g=this.peekCodePoint(0),v=this.peekCodePoint(1);return g===ip&&(Xg(v)||v===rC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case RH:if(this.peekCodePoint(0)===hb)return this.consumeCodePoint(),QOe;if(this.peekCodePoint(0)===RH)return this.consumeCodePoint(),UOe;break;case AOe:if(this.peekCodePoint(0)===hb)return this.consumeCodePoint(),HOe;break;case hA:return mF}return nC(t)?(this.consumeWhiteSpace(),ZOe):Vo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):wS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Vs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Xg(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===rC&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Vs.apply(void 0,t.map(function(l){return l===rC?nre:l})),16),s=parseInt(Vs.apply(void 0,t.map(function(l){return l===rC?lre:l})),16);return{type:30,start:a,end:s}}var i=parseInt(Vs.apply(void 0,t),16);if(this.peekCodePoint(0)===Ql&&Xg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Xg(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Vs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===tC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===tC?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===hA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===eC||r===ZE){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===hA||this.peekCodePoint(0)===mb)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),sC)}for(;;){var a=this.consumeCodePoint();if(a===hA||a===mb)return{type:22,value:Vs.apply(void 0,t)};if(nC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===hA||this.peekCodePoint(0)===mb?(this.consumeCodePoint(),{type:22,value:Vs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),sC);if(a===ZE||a===eC||a===tC||FOe(a))return this.consumeBadUrlRemnants(),sC;if(a===yy)if(f0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),sC;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;nC(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===mb||t===hA)return;f0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Vs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===hA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===yS)return this._value.splice(0,n),KOe;if(a===yy){var s=this._value[n+1];s!==hA&&s!==void 0&&(s===yS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):f0(a,s)&&(r+=this.consumeStringSlice(n),r+=Vs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=Ww,n=this.peekCodePoint(0);for((n===ip||n===Ql)&&t.push(this.consumeCodePoint());Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===iw&&Vo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=OH;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===ore||n===sre)&&((a===ip||a===Ql)&&Vo(s)||Vo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=OH;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[OOe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(aC(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===tOe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Xg(t)){for(var r=Vs(t);Xg(this.peekCodePoint(0))&&r.length<6;)r+=Vs(this.consumeCodePoint());nC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||kOe(n)||n>1114111?PH:n}return t===hA?PH:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(LH(r))t+=Vs(r);else if(f0(r,this.peekCodePoint(0)))t+=Vs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),ure=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new cre;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||tDe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?mF:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Xw=function(e){return e.type===15},n1=function(e){return e.type===17},Ea=function(e){return e.type===20},eDe=function(e){return e.type===0},pF=function(e,t){return Ea(e)&&e.value===t},dre=function(e){return e.type!==31},bx=function(e){return e.type!==31&&e.type!==4},$A=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},tDe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},om=function(e){return e.type===17||e.type===15},di=function(e){return e.type===16||om(e)},Are=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},xo={type:17,number:0,flags:Ww},fR={type:16,number:50,flags:Ww},B0={type:16,number:100,flags:Ww},qb=function(e,t,r){var n=e[0],a=e[1];return[Oa(n,t),Oa(typeof a<"u"?a:n,r)]},Oa=function(e,t){if(e.type===16)return e.number/100*t;if(Xw(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},fre="deg",hre="grad",mre="rad",pre="turn",UN={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case fre:return Math.PI*t.number/180;case hre:return Math.PI/200*t.number;case mre:return t.number;case pre:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},gre=function(e){return e.type===15&&(e.unit===fre||e.unit===hre||e.unit===mre||e.unit===pre)},vre=function(e){var t=e.filter(Ea).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[xo,xo];case"to top":case"bottom":return Su(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[xo,B0];case"to right":case"left":return Su(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[B0,B0];case"to bottom":case"top":return Su(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[B0,xo];case"to left":case"right":return Su(270)}return 0},Su=function(e){return Math.PI*e/180},L0={name:"color",parse:function(e,t){if(t.type===18){var r=rDe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return T0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return T0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return T0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return T0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=Vf[t.value.toUpperCase()];if(typeof o<"u")return o}return Vf.TRANSPARENT}},M0=function(e){return(255&e)===0},Ui=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},T0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},MH=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},UH=function(e,t){var r=t.filter(bx);if(r.length===3){var n=r.map(MH),a=n[0],s=n[1],i=n[2];return T0(a,s,i,1)}if(r.length===4){var o=r.map(MH),a=o[0],s=o[1],i=o[2],l=o[3];return T0(a,s,i,l)}return 0};function pT(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var QH=function(e,t){var r=t.filter(bx),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Su(n.number):UN.parse(e,n))/(Math.PI*2),l=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?Oa(i,1):1;if(l===0)return T0(u*255,u*255,u*255,1);var f=u<=.5?u*(l+1):u+l-u*l,h=u*2-f,p=pT(h,f,o+1/3),g=pT(h,f,o),v=pT(h,f,o-1/3);return T0(p*255,g*255,v*255,d)},rDe={hsl:QH,hsla:QH,rgb:UH,rgba:UH},wy=function(e,t){return L0.parse(e,ure.create(t).parseComponentValue())},Vf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},nDe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},aDe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},QN=function(e,t){var r=L0.parse(e,t[0]),n=t[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},HH=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=xo),n.stop===null&&(n.stop=B0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var l=Oa(o,t);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(v,b){var y=v.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},sDe=function(e,t,r){var n=t/2,a=r/2,s=Oa(e[0],t)-n,i=a-Oa(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},iDe=function(e,t,r){var n=typeof e=="number"?e:sDe(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-l,i+l]},ud=function(e,t){return Math.sqrt(e*e+t*t)},VH=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var l=o[0],u=o[1],d=ud(r-l,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},oDe=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(ud(t,r),ud(t,r-a),ud(t-n,r),ud(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),l=VH(n,a,t,r,!0),u=l[0],d=l[1];s=ud(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(ud(t,r),ud(t,r-a),ud(t-n,r),ud(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=VH(n,a,t,r,!1),u=f[0],d=f[1];s=ud(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Oa(e.size[0],n),i=e.size.length===2?Oa(e.size[1],a):s),[s,i]},lDe=function(e,t){var r=Su(180),n=[];return $A(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=vre(a);return}else if(gre(i)){r=UN.parse(e,i);return}}var o=QN(e,a);n.push(o)}),{angle:r,stops:n,type:1}},iC=function(e,t){var r=Su(180),n=[];return $A(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=vre(a);return}else if(gre(i)){r=(UN.parse(e,i)+Su(270))%Su(360);return}}var o=QN(e,a);n.push(o)}),{angle:r,stops:n,type:1}},cDe=function(e,t){var r=Su(180),n=[],a=1,s=0,i=3,o=[];return $A(t).forEach(function(l,u){var d=l[0];if(u===0){if(Ea(d)&&d.value==="linear"){a=1;return}else if(Ea(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=L0.parse(e,d.values[0]);n.push({stop:xo,color:f})}else if(d.name==="to"){var f=L0.parse(e,d.values[0]);n.push({stop:B0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(bx);if(h.length===2){var f=L0.parse(e,h[1]),p=h[0];n1(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+Su(180))%Su(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},xre="closest-side",bre="farthest-side",yre="closest-corner",wre="farthest-corner",Ere="circle",Cre="ellipse",_re="cover",Sre="contain",uDe=function(e,t){var r=0,n=3,a=[],s=[];return $A(t).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(f,h){if(u)if(Ea(h))switch(h.value){case"center":return s.push(fR),f;case"top":case"left":return s.push(xo),f;case"right":case"bottom":return s.push(B0),f}else(di(h)||om(h))&&s.push(h);else if(Ea(h))switch(h.value){case Ere:return r=0,!1;case Cre:return r=1,!1;case"at":return u=!0,!1;case xre:return n=0,!1;case _re:case bre:return n=1,!1;case Sre:case yre:return n=2,!1;case wre:return n=3,!1}else if(om(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},l)}if(l){var d=QN(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},oC=function(e,t){var r=0,n=3,a=[],s=[];return $A(t).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,f){if(Ea(f))switch(f.value){case"center":return s.push(fR),!1;case"top":case"left":return s.push(xo),!1;case"right":case"bottom":return s.push(B0),!1}else if(di(f)||om(f))return s.push(f),!1;return d},l):o===1&&(l=i.reduce(function(d,f){if(Ea(f))switch(f.value){case Ere:return r=0,!1;case Cre:return r=1,!1;case Sre:case xre:return n=0,!1;case bre:return n=1,!1;case yre:return n=2,!1;case _re:case wre:return n=3,!1}else if(om(f)||di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},l)),l){var u=QN(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},dDe=function(e){return e.type===1},ADe=function(e){return e.type===2},hR={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=Nre[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function fDe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Nre[e.name])}var Nre={"linear-gradient":lDe,"-moz-linear-gradient":iC,"-ms-linear-gradient":iC,"-o-linear-gradient":iC,"-webkit-linear-gradient":iC,"radial-gradient":uDe,"-moz-radial-gradient":oC,"-ms-radial-gradient":oC,"-o-radial-gradient":oC,"-webkit-radial-gradient":oC,"-webkit-gradient":cDe},hDe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return bx(n)&&fDe(n)}).map(function(n){return hR.parse(e,n)})}},mDe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pDe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return $A(t).map(function(r){return r.filter(di)}).map(Are)}},gDe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return $A(t).map(function(r){return r.filter(Ea).map(function(n){return n.value}).join(" ")}).map(vDe)}},vDe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Xv||(Xv={}));var xDe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return $A(t).map(function(r){return r.filter(bDe)})}},bDe=function(e){return Ea(e)||di(e)},HN=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},yDe=HN("top"),wDe=HN("right"),EDe=HN("bottom"),CDe=HN("left"),VN=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Are(r.filter(di))}}},_De=VN("top-left"),SDe=VN("top-right"),NDe=VN("bottom-right"),kDe=VN("bottom-left"),zN=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},BDe=zN("top"),TDe=zN("right"),IDe=zN("bottom"),jDe=zN("left"),$N=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Xw(r)?r.number:0}}},FDe=$N("top"),ODe=$N("right"),DDe=$N("bottom"),RDe=$N("left"),PDe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},LDe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},MDe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).reduce(function(r,n){return r|UDe(n.value)},0)}},UDe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},QDe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},HDe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},ES;(function(e){e.NORMAL="normal",e.STRICT="strict"})(ES||(ES={}));var VDe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return ES.STRICT;case"normal":default:return ES.NORMAL}}},zDe={name:"line-height",initialValue:"normal",prefix:!1,type:4},zH=function(e,t){return Ea(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:di(e)?Oa(e,t):t},$De={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:hR.parse(e,t)}},KDe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},gF={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},KN=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},GDe=KN("top"),qDe=KN("right"),WDe=KN("bottom"),XDe=KN("left"),YDe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},JDe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},GN=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ZDe=GN("top"),eRe=GN("right"),tRe=GN("bottom"),rRe=GN("left"),nRe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},aRe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},sRe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&pF(t[0],"none")?[]:$A(t).map(function(r){for(var n={color:Vf.TRANSPARENT,offsetX:xo,offsetY:xo,blur:xo},a=0,s=0;s<r.length;s++){var i=r[s];om(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=L0.parse(e,i)}return n})}},iRe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},oRe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=uRe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},lRe=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},cRe=function(e){var t=e.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},uRe={matrix:lRe,matrix3d:cRe},$H={type:16,number:50,flags:Ww},dRe=[$H,$H],ARe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(di);return r.length!==2?dRe:[r[0],r[1]]}},fRe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ey;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Ey||(Ey={}));var hRe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Ey.BREAK_ALL;case"keep-all":return Ey.KEEP_ALL;case"normal":default:return Ey.NORMAL}}},mRe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(n1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},kre={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},pRe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return n1(t)?t.number:1}},gRe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vRe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},xRe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},bRe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},yRe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(n1(t))return t.number;if(Ea(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},wRe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ea).map(function(r){return r.value})}},ERe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ci=function(e,t){return(e&t)!==0},CRe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},_Re={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(dre),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&n1(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},SRe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(dre),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Ea(s)&&s.value!=="none"){var o=i&&n1(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},NRe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Xw).map(function(r){return kre.parse(e,r)})}},kRe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(eDe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},KH=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},BRe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&pF(t[0],"none")?[]:$A(t).map(function(r){for(var n={color:255,offsetX:xo,offsetY:xo,blur:xo,spread:xo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];pF(i,"inset")?n.inset=!0:om(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=L0.parse(e,i)}return n})}},TRe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(Ea).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},IRe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},jRe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Xw(t)?t.number:0}},FRe=function(){function e(t,r){var n,a;this.animationDuration=sr(t,NRe,r.animationDuration),this.backgroundClip=sr(t,nDe,r.backgroundClip),this.backgroundColor=sr(t,aDe,r.backgroundColor),this.backgroundImage=sr(t,hDe,r.backgroundImage),this.backgroundOrigin=sr(t,mDe,r.backgroundOrigin),this.backgroundPosition=sr(t,pDe,r.backgroundPosition),this.backgroundRepeat=sr(t,gDe,r.backgroundRepeat),this.backgroundSize=sr(t,xDe,r.backgroundSize),this.borderTopColor=sr(t,yDe,r.borderTopColor),this.borderRightColor=sr(t,wDe,r.borderRightColor),this.borderBottomColor=sr(t,EDe,r.borderBottomColor),this.borderLeftColor=sr(t,CDe,r.borderLeftColor),this.borderTopLeftRadius=sr(t,_De,r.borderTopLeftRadius),this.borderTopRightRadius=sr(t,SDe,r.borderTopRightRadius),this.borderBottomRightRadius=sr(t,NDe,r.borderBottomRightRadius),this.borderBottomLeftRadius=sr(t,kDe,r.borderBottomLeftRadius),this.borderTopStyle=sr(t,BDe,r.borderTopStyle),this.borderRightStyle=sr(t,TDe,r.borderRightStyle),this.borderBottomStyle=sr(t,IDe,r.borderBottomStyle),this.borderLeftStyle=sr(t,jDe,r.borderLeftStyle),this.borderTopWidth=sr(t,FDe,r.borderTopWidth),this.borderRightWidth=sr(t,ODe,r.borderRightWidth),this.borderBottomWidth=sr(t,DDe,r.borderBottomWidth),this.borderLeftWidth=sr(t,RDe,r.borderLeftWidth),this.boxShadow=sr(t,BRe,r.boxShadow),this.color=sr(t,PDe,r.color),this.direction=sr(t,LDe,r.direction),this.display=sr(t,MDe,r.display),this.float=sr(t,QDe,r.cssFloat),this.fontFamily=sr(t,xRe,r.fontFamily),this.fontSize=sr(t,bRe,r.fontSize),this.fontStyle=sr(t,ERe,r.fontStyle),this.fontVariant=sr(t,wRe,r.fontVariant),this.fontWeight=sr(t,yRe,r.fontWeight),this.letterSpacing=sr(t,HDe,r.letterSpacing),this.lineBreak=sr(t,VDe,r.lineBreak),this.lineHeight=sr(t,zDe,r.lineHeight),this.listStyleImage=sr(t,$De,r.listStyleImage),this.listStylePosition=sr(t,KDe,r.listStylePosition),this.listStyleType=sr(t,gF,r.listStyleType),this.marginTop=sr(t,GDe,r.marginTop),this.marginRight=sr(t,qDe,r.marginRight),this.marginBottom=sr(t,WDe,r.marginBottom),this.marginLeft=sr(t,XDe,r.marginLeft),this.opacity=sr(t,pRe,r.opacity);var s=sr(t,YDe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=sr(t,JDe,r.overflowWrap),this.paddingTop=sr(t,ZDe,r.paddingTop),this.paddingRight=sr(t,eRe,r.paddingRight),this.paddingBottom=sr(t,tRe,r.paddingBottom),this.paddingLeft=sr(t,rRe,r.paddingLeft),this.paintOrder=sr(t,TRe,r.paintOrder),this.position=sr(t,aRe,r.position),this.textAlign=sr(t,nRe,r.textAlign),this.textDecorationColor=sr(t,gRe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=sr(t,vRe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=sr(t,sRe,r.textShadow),this.textTransform=sr(t,iRe,r.textTransform),this.transform=sr(t,oRe,r.transform),this.transformOrigin=sr(t,ARe,r.transformOrigin),this.visibility=sr(t,fRe,r.visibility),this.webkitTextStrokeColor=sr(t,IRe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=sr(t,jRe,r.webkitTextStrokeWidth),this.wordBreak=sr(t,hRe,r.wordBreak),this.zIndex=sr(t,mRe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return M0(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ci(this.display,4)||Ci(this.display,33554432)||Ci(this.display,268435456)||Ci(this.display,536870912)||Ci(this.display,67108864)||Ci(this.display,134217728)},e}(),ORe=function(){function e(t,r){this.content=sr(t,CRe,r.content),this.quotes=sr(t,kRe,r.quotes)}return e}(),GH=function(){function e(t,r){this.counterIncrement=sr(t,_Re,r.counterIncrement),this.counterReset=sr(t,SRe,r.counterReset)}return e}(),sr=function(e,t,r){var n=new cre,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new ure(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,Ea(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return UN.parse(e,s.parseComponentValue());case"color":return L0.parse(e,s.parseComponentValue());case"image":return hR.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return om(o)?o:xo;case"length-percentage":var l=s.parseComponentValue();return di(l)?l:xo;case"time":return kre.parse(e,s.parseComponentValue())}break}},DRe="data-html2canvas-debug",RRe=function(e){var t=e.getAttribute(DRe);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},vF=function(e,t){var r=RRe(e);return r===1||t===r},KA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,vF(r,3))debugger;this.styles=new FRe(t,window.getComputedStyle(r,null)),yF(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=LN(this.context,r),vF(r,4)&&(this.flags|=16)}return e}(),PRe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",qH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lC=0;lC<qH.length;lC++)Wb[qH.charCodeAt(lC)]=lC;var LRe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Wb[e.charCodeAt(n)],i=Wb[e.charCodeAt(n+1)],o=Wb[e.charCodeAt(n+2)],l=Wb[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},MRe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},URe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},wp=5,mR=11,gT=2,QRe=mR-wp,Bre=65536>>wp,HRe=1<<wp,vT=HRe-1,VRe=1024>>wp,zRe=Bre+VRe,$Re=zRe,KRe=32,GRe=$Re+KRe,qRe=65536>>mR,WRe=1<<QRe,XRe=WRe-1,WH=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},YRe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},JRe=function(e,t){var r=LRe(e),n=Array.isArray(r)?URe(r):new Uint32Array(r),a=Array.isArray(r)?MRe(r):new Uint16Array(r),s=24,i=WH(a,s/2,n[4]/2),o=n[5]===2?WH(a,(s+n[4])/2):YRe(n,Math.ceil((s+n[4])/4));return new ZRe(n[0],n[1],n[2],n[3],i,o)},ZRe=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>wp],r=(r<<gT)+(t&vT),this.data[r];if(t<=65535)return r=this.index[Bre+(t-55296>>wp)],r=(r<<gT)+(t&vT),this.data[r];if(t<this.highStart)return r=GRe-qRe+(t>>mR),r=this.index[r],r+=t>>wp&XRe,r=this.index[r],r=(r<<gT)+(t&vT),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),XH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ePe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cC=0;cC<XH.length;cC++)ePe[XH.charCodeAt(cC)]=cC;var tPe=1,xT=2,bT=3,YH=4,JH=5,rPe=7,ZH=8,yT=9,wT=10,eV=11,tV=12,rV=13,nV=14,ET=15,nPe=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},aPe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},sPe=JRe(PRe),xu="×",CT="÷",iPe=function(e){return sPe.get(e)},oPe=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===xT&&i===bT)return xu;if(s===xT||s===bT||s===YH||i===xT||i===bT||i===YH)return CT;if(s===ZH&&[ZH,yT,eV,tV].indexOf(i)!==-1||(s===eV||s===yT)&&(i===yT||i===wT)||(s===tV||s===wT)&&i===wT||i===rV||i===JH||i===rPe||s===tPe)return xu;if(s===rV&&i===nV){for(;a===JH;)a=t[--n];if(a===nV)return xu}if(s===ET&&i===ET){for(var o=0;a===ET;)o++,a=t[--n];if(o%2===0)return xu}return CT},lPe=function(e){var t=nPe(e),r=t.length,n=0,a=0,s=t.map(iPe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=xu;n<r&&(i=oPe(t,s,++n))===xu;);if(i!==xu||n===r){var o=aPe.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},cPe=function(e){for(var t=lPe(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},uPe=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},dPe=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=MN(n.data).map(function(l){return Vs(l)}),s=0,i={},o=a.every(function(l,u){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},APe=function(){return typeof new Image().crossOrigin<"u"},fPe=function(){return typeof new XMLHttpRequest().responseType=="string"},hPe=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},aV=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},mPe=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=xF(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),sV(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",aV(l)?sV(xF(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),aV(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},xF=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},sV=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},fo={get SUPPORT_RANGE_BOUNDS(){var e=uPe(document);return Object.defineProperty(fo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=fo.SUPPORT_RANGE_BOUNDS&&dPe(document);return Object.defineProperty(fo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=hPe(document);return Object.defineProperty(fo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?mPe(document):Promise.resolve(!1);return Object.defineProperty(fo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=APe();return Object.defineProperty(fo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=fPe();return Object.defineProperty(fo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(fo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(fo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Cy=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),pPe=function(e,t,r,n){var a=xPe(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(fo.SUPPORT_RANGE_BOUNDS){var l=iV(n,i,o.length).getClientRects();if(l.length>1){var u=pR(o),d=0;u.forEach(function(h){s.push(new Cy(h,eh.fromDOMRectList(e,iV(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Cy(o,eh.fromDOMRectList(e,l)))}else{var f=n.splitText(o.length);s.push(new Cy(o,gPe(e,n))),n=f}else fo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},gPe=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=LN(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return eh.EMPTY},iV=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},pR=function(e){if(fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return cPe(e)},vPe=function(e,t){if(fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return yPe(e,t)},xPe=function(e,t){return t.letterSpacing!==0?pR(e):vPe(e,t)},bPe=[32,160,4961,65792,65793,4153,4241],yPe=function(e,t){for(var r=q6e(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=MN(i),l="";o.forEach(function(u){bPe.indexOf(u)===-1?l+=Vs(u):(l.length&&n.push(l),n.push(Vs(u)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)s();return n},wPe=function(){function e(t,r,n){this.text=EPe(r.data,n.textTransform),this.textBounds=pPe(t,this.text,n,r)}return e}(),EPe=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(CPe,_Pe);case 2:return e.toUpperCase();default:return e}},CPe=/(^|\s|:|-|\(|\))([a-z])/g,_Pe=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Tre=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(KA),Ire=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(KA),jre=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=LN(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(KA),Fre=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(KA),bF=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(KA),SPe=[{type:15,flags:0,unit:"px",number:3}],NPe=[{type:16,flags:0,number:50}],kPe=function(e){return e.width>e.height?new eh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new eh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},BPe=function(e){var t=e.type===TPe?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},CS="checkbox",_S="radio",TPe="password",oV=707406591,gR=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=BPe(n),(a.type===CS||a.type===_S)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=kPe(a.bounds)),a.type){case CS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=SPe;break;case _S:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=NPe;break}return a}return t}(KA),Ore=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(KA),Dre=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(KA),Rre=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Lre(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?wy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Vf.TRANSPARENT,i=n.contentWindow.document.body?wy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Vf.TRANSPARENT;a.backgroundColor=M0(s)?M0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(KA),IPe=["OL","UL","MENU"],u_=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Mre(a)&&a.data.trim().length>0)r.textNodes.push(new wPe(e,a,r.styles));else if(Sv(a))if(Vre(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return u_(e,o,r,n)});else{var i=Pre(e,a);i.styles.isVisible()&&(jPe(a,i,n)?i.flags|=4:FPe(i.styles)&&(i.flags|=2),IPe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?u_(e,a.shadowRoot,i,n):!SS(a)&&!Ure(a)&&!NS(a)&&u_(e,a,i,n))}},Pre=function(e,t){return wF(t)?new Tre(e,t):Qre(t)?new Ire(e,t):Ure(t)?new jre(e,t):OPe(t)?new Fre(e,t):DPe(t)?new bF(e,t):RPe(t)?new gR(e,t):NS(t)?new Ore(e,t):SS(t)?new Dre(e,t):Hre(t)?new Rre(e,t):new KA(e,t)},Lre=function(e,t){var r=Pre(e,t);return r.flags|=4,u_(e,t,r,r),r},jPe=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||vR(e)&&r.styles.isTransparent()},FPe=function(e){return e.isPositioned()||e.isFloating()},Mre=function(e){return e.nodeType===Node.TEXT_NODE},Sv=function(e){return e.nodeType===Node.ELEMENT_NODE},yF=function(e){return Sv(e)&&typeof e.style<"u"&&!d_(e)},d_=function(e){return typeof e.className=="object"},OPe=function(e){return e.tagName==="LI"},DPe=function(e){return e.tagName==="OL"},RPe=function(e){return e.tagName==="INPUT"},PPe=function(e){return e.tagName==="HTML"},Ure=function(e){return e.tagName==="svg"},vR=function(e){return e.tagName==="BODY"},Qre=function(e){return e.tagName==="CANVAS"},lV=function(e){return e.tagName==="VIDEO"},wF=function(e){return e.tagName==="IMG"},Hre=function(e){return e.tagName==="IFRAME"},cV=function(e){return e.tagName==="STYLE"},LPe=function(e){return e.tagName==="SCRIPT"},SS=function(e){return e.tagName==="TEXTAREA"},NS=function(e){return e.tagName==="SELECT"},Vre=function(e){return e.tagName==="SLOT"},uV=function(e){return e.tagName.indexOf("-")>0},MPe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},e}(),dV={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},AV={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},UPe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},QPe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Yg=function(e,t,r,n,a,s){return e<t||e>r?ow(e,a,s.length>0):n.integers.reduce(function(i,o,l){for(;e>=o;)e-=o,i+=n.values[l];return i},"")+s},zre=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Us=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(zre(Math.abs(e),s,n,function(i){return Vs(Math.floor(i%s)+t)})+a)},Km=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return zre(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},vv=1,u0=2,d0=4,Xb=8,Sf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return ow(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Ci(s,vv)&&o!==""?o=t[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Ci(s,u0)||u===1&&l===1&&Ci(s,d0)&&e>100||u===1&&l>1&&Ci(s,Xb)?o=t[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},fV="十百千萬",hV="拾佰仟萬",mV="マイナス",_T="마이너스",ow=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Us(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Km(e,"〇一二三四五六七八九",a);case 6:return Yg(e,1,3999,dV,3,n).toLowerCase();case 7:return Yg(e,1,3999,dV,3,n);case 8:return Us(e,945,969,!1,n);case 9:return Us(e,97,122,!1,n);case 10:return Us(e,65,90,!1,n);case 11:return Us(e,1632,1641,!0,n);case 12:case 49:return Yg(e,1,9999,AV,3,n);case 35:return Yg(e,1,9999,AV,3,n).toLowerCase();case 13:return Us(e,2534,2543,!0,n);case 14:case 30:return Us(e,6112,6121,!0,n);case 15:return Km(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Km(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Sf(e,"零一二三四五六七八九",fV,"負",a,u0|d0|Xb);case 47:return Sf(e,"零壹貳參肆伍陸柒捌玖",hV,"負",a,vv|u0|d0|Xb);case 42:return Sf(e,"零一二三四五六七八九",fV,"负",a,u0|d0|Xb);case 41:return Sf(e,"零壹贰叁肆伍陆柒捌玖",hV,"负",a,vv|u0|d0|Xb);case 26:return Sf(e,"〇一二三四五六七八九","十百千万",mV,a,0);case 25:return Sf(e,"零壱弐参四伍六七八九","拾百千万",mV,a,vv|u0|d0);case 31:return Sf(e,"영일이삼사오육칠팔구","십백천만",_T,s,vv|u0|d0);case 33:return Sf(e,"零一二三四五六七八九","十百千萬",_T,s,0);case 32:return Sf(e,"零壹貳參四五六七八九","拾百千",_T,s,vv|u0|d0);case 18:return Us(e,2406,2415,!0,n);case 20:return Yg(e,1,19999,QPe,3,n);case 21:return Us(e,2790,2799,!0,n);case 22:return Us(e,2662,2671,!0,n);case 22:return Yg(e,1,10999,UPe,3,n);case 23:return Km(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Km(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Us(e,3302,3311,!0,n);case 28:return Km(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Km(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Us(e,3792,3801,!0,n);case 37:return Us(e,6160,6169,!0,n);case 38:return Us(e,4160,4169,!0,n);case 39:return Us(e,2918,2927,!0,n);case 40:return Us(e,1776,1785,!0,n);case 43:return Us(e,3046,3055,!0,n);case 44:return Us(e,3174,3183,!0,n);case 45:return Us(e,3664,3673,!0,n);case 46:return Us(e,3872,3881,!0,n);case 3:default:return Us(e,48,57,!0,n)}},$re="data-html2canvas-ignore",pV=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new MPe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=HPe(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,l=o.document,u=$Pe(a).then(function(){return cl(n,void 0,void 0,function(){var d,f;return Lo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(WPe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,zPe(l)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,f)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(GPe(document.doctype)+"<html></html>"),qPe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},e.prototype.createElementClone=function(t){if(vF(t,2))debugger;if(Qre(t))return this.createCanvasClone(t);if(lV(t))return this.createVideoClone(t);if(cV(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return wF(r)&&(wF(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),uV(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return ST(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Sv(r)||!LPe(r)&&!r.hasAttribute($re)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Sv(r)||!cV(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Sv(s)&&Vre(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(Mre(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Sv(t)&&(yF(t)||d_(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&yF(a)&&(this.clonedReferenceElement=a),vR(a)&&JPe(a);var l=this.counters.parse(new GH(this.context,s)),u=this.resolvePseudoContent(t,a,i,_y.BEFORE);uV(t)&&(r=!0),lV(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,_y.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||d_(t))&&!Hre(t)||r)&&ST(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(SS(t)||NS(t))&&(SS(a)||NS(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new GH(this.context,n));var l=new ORe(this.context,n),u=o.createElement("html2canvaspseudoelement");ST(n,u),l.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(Ea);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(bx),v=g[0],b=g[1];if(v&&Ea(v)){var y=s.counters.getCounterValue(v.value),_=b&&Ea(b)?gF.parse(s.context,b.value):3;u.appendChild(o.createTextNode(ow(y,_,!1)))}}else if(f.name==="counters"){var S=f.values.filter(bx),v=S[0],k=S[1],b=S[2];if(v&&Ea(v)){var B=s.counters.getCounterValues(v.value),F=b&&Ea(b)?gF.parse(s.context,b.value):3,w=k&&k.type===0?k.value:"",C=B.map(function(D){return ow(D,F,!1)}).join(w);u.appendChild(o.createTextNode(C))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(KH(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(KH(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=EF+" "+CF;var d=a===_y.BEFORE?" "+EF:" "+CF;return d_(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),_y;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(_y||(_y={}));var HPe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute($re,"true"),e.body.appendChild(r),r},VPe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},zPe=function(e){return Promise.all([].slice.call(e.images,0).map(VPe))},$Pe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},KPe=["all","d","content"],ST=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);KPe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},GPe=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},qPe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},WPe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},XPe=":before",YPe=":after",EF="___html2canvas___pseudoelement_before",CF="___html2canvas___pseudoelement_after",gV=`{
    content: "" !important;
    display: none !important;
}`,JPe=function(e){ZPe(e,"."+EF+XPe+gV+`
         .`+CF+YPe+gV)},ZPe=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Kre=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),eLe=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(kT(t)||aLe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return cl(this,void 0,void 0,function(){var r,n,a,s,i=this;return Lo(this,function(o){switch(o.label){case 0:return r=Kre.isSameOrigin(t),n=!NT(t)&&this._options.useCORS===!0&&fo.SUPPORT_CORS_IMAGES&&!r,a=!NT(t)&&!r&&!kT(t)&&typeof this._options.proxy=="string"&&fo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!NT(t)&&!kT(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(sLe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=fo.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},e}(),tLe=/^data:image\/svg\+xml/i,rLe=/^data:image\/.*;base64,/i,nLe=/^data:image\/.*/i,aLe=function(e){return fo.SUPPORT_SVG_DRAWING||!iLe(e)},NT=function(e){return nLe.test(e)},sLe=function(e){return rLe.test(e)},kT=function(e){return e.substr(0,4)==="blob"},iLe=function(e){return e.substr(-3).toLowerCase()==="svg"||tLe.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Jg=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},uC=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Jg(this.start,this.startControl,t),a=Jg(this.startControl,this.endControl,t),s=Jg(this.endControl,this.end,t),i=Jg(n,a,t),o=Jg(a,s,t),l=Jg(i,o,t);return r?new e(this.start,n,i,l):new e(l,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),yu=function(e){return e.type===1},oLe=function(){function e(t){var r=t.styles,n=t.bounds,a=qb(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=qb(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=qb(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=qb(r.borderBottomLeftRadius,n.width,n.height),g=p[0],v=p[1],b=[];b.push((s+l)/n.width),b.push((g+f)/n.width),b.push((i+v)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,l/=y,u/=y,f/=y,h/=y,g/=y,v/=y);var _=n.width-l,S=n.height-h,k=n.width-f,B=n.height-v,F=r.borderTopWidth,w=r.borderRightWidth,C=r.borderBottomWidth,N=r.borderLeftWidth,P=Oa(r.paddingTop,t.bounds.width),D=Oa(r.paddingRight,t.bounds.width),T=Oa(r.paddingBottom,t.bounds.width),U=Oa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Ga(n.left+N/3,n.top+F/3,s-N/3,i-F/3,sa.TOP_LEFT):new ar(n.left+N/3,n.top+F/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Ga(n.left+_,n.top+F/3,l-w/3,u-F/3,sa.TOP_RIGHT):new ar(n.left+n.width-w/3,n.top+F/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Ga(n.left+k,n.top+S,f-w/3,h-C/3,sa.BOTTOM_RIGHT):new ar(n.left+n.width-w/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=g>0||v>0?Ga(n.left+N/3,n.top+B,g-N/3,v-C/3,sa.BOTTOM_LEFT):new ar(n.left+N/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Ga(n.left+N*2/3,n.top+F*2/3,s-N*2/3,i-F*2/3,sa.TOP_LEFT):new ar(n.left+N*2/3,n.top+F*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Ga(n.left+_,n.top+F*2/3,l-w*2/3,u-F*2/3,sa.TOP_RIGHT):new ar(n.left+n.width-w*2/3,n.top+F*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Ga(n.left+k,n.top+S,f-w*2/3,h-C*2/3,sa.BOTTOM_RIGHT):new ar(n.left+n.width-w*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||v>0?Ga(n.left+N*2/3,n.top+B,g-N*2/3,v-C*2/3,sa.BOTTOM_LEFT):new ar(n.left+N*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=s>0||i>0?Ga(n.left+N/2,n.top+F/2,s-N/2,i-F/2,sa.TOP_LEFT):new ar(n.left+N/2,n.top+F/2),this.topRightBorderStroke=s>0||i>0?Ga(n.left+_,n.top+F/2,l-w/2,u-F/2,sa.TOP_RIGHT):new ar(n.left+n.width-w/2,n.top+F/2),this.bottomRightBorderStroke=f>0||h>0?Ga(n.left+k,n.top+S,f-w/2,h-C/2,sa.BOTTOM_RIGHT):new ar(n.left+n.width-w/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=g>0||v>0?Ga(n.left+N/2,n.top+B,g-N/2,v-C/2,sa.BOTTOM_LEFT):new ar(n.left+N/2,n.top+n.height-C/2),this.topLeftBorderBox=s>0||i>0?Ga(n.left,n.top,s,i,sa.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=l>0||u>0?Ga(n.left+_,n.top,l,u,sa.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Ga(n.left+k,n.top+S,f,h,sa.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||v>0?Ga(n.left,n.top+B,g,v,sa.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Ga(n.left+N,n.top+F,Math.max(0,s-N),Math.max(0,i-F),sa.TOP_LEFT):new ar(n.left+N,n.top+F),this.topRightPaddingBox=l>0||u>0?Ga(n.left+Math.min(_,n.width-w),n.top+F,_>n.width+w?0:Math.max(0,l-w),Math.max(0,u-F),sa.TOP_RIGHT):new ar(n.left+n.width-w,n.top+F),this.bottomRightPaddingBox=f>0||h>0?Ga(n.left+Math.min(k,n.width-N),n.top+Math.min(S,n.height-C),Math.max(0,f-w),Math.max(0,h-C),sa.BOTTOM_RIGHT):new ar(n.left+n.width-w,n.top+n.height-C),this.bottomLeftPaddingBox=g>0||v>0?Ga(n.left+N,n.top+Math.min(B,n.height-C),Math.max(0,g-N),Math.max(0,v-C),sa.BOTTOM_LEFT):new ar(n.left+N,n.top+n.height-C),this.topLeftContentBox=s>0||i>0?Ga(n.left+N+U,n.top+F+P,Math.max(0,s-(N+U)),Math.max(0,i-(F+P)),sa.TOP_LEFT):new ar(n.left+N+U,n.top+F+P),this.topRightContentBox=l>0||u>0?Ga(n.left+Math.min(_,n.width+N+U),n.top+F+P,_>n.width+N+U?0:l-N+U,u-(F+P),sa.TOP_RIGHT):new ar(n.left+n.width-(w+D),n.top+F+P),this.bottomRightContentBox=f>0||h>0?Ga(n.left+Math.min(k,n.width-(N+U)),n.top+Math.min(S,n.height+F+P),Math.max(0,f-(w+D)),h-(C+T),sa.BOTTOM_RIGHT):new ar(n.left+n.width-(w+D),n.top+n.height-(C+T)),this.bottomLeftContentBox=g>0||v>0?Ga(n.left+N+U,n.top+B,Math.max(0,g-(N+U)),v-(C+T),sa.BOTTOM_LEFT):new ar(n.left+N+U,n.top+n.height-(C+T))}return e}(),sa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(sa||(sa={}));var Ga=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,l=e+r,u=t+n;switch(a){case sa.TOP_LEFT:return new uC(new ar(e,u),new ar(e,u-o),new ar(l-i,t),new ar(l,t));case sa.TOP_RIGHT:return new uC(new ar(e,t),new ar(e+i,t),new ar(l,u-o),new ar(l,u));case sa.BOTTOM_RIGHT:return new uC(new ar(l,t),new ar(l,t+o),new ar(e+i,u),new ar(e,u));case sa.BOTTOM_LEFT:default:return new uC(new ar(l,u),new ar(l-i,u),new ar(e,t+o),new ar(e,t))}},kS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},lLe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},BS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},cLe=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),dC=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),uLe=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),dLe=function(e){return e.type===0},Gre=function(e){return e.type===1},ALe=function(e){return e.type===2},vV=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},fLe=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},qre=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Wre=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new oLe(this.container),this.container.styles.opacity<1&&this.effects.push(new uLe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new cLe(n,a,s))}if(this.container.styles.overflowX!==0){var i=kS(this.curves),o=BS(this.curves);vV(i,o)?this.effects.push(new dC(i,6)):(this.effects.push(new dC(i,2)),this.effects.push(new dC(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!Gre(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=kS(n.curves),o=BS(n.curves);vV(i,o)||a.unshift(new dC(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(l){return Ci(l.target,t)})},e}(),_F=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ci(a.flags,4),i=Ci(a.flags,2),o=new Wre(a,e);Ci(a.styles.display,2048)&&n.push(o);var l=Ci(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new qre(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,v){return f>g.element.container.styles.zIndex.order?(h=v,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,v){return f>=g.element.container.styles.zIndex.order?(p=v+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);_F(o,d,s?d:r,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),_F(o,t,r,l);Ci(a.flags,8)&&Xre(a,l)})},Xre=function(e,t){for(var r=e instanceof bF?e.start:1,n=e instanceof bF?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof Fre&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=ow(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},hLe=function(e){var t=new Wre(e,null),r=new qre(t),n=[];return _F(t,r,r,n),Xre(t.container,n),r},xV=function(e,t){switch(t){case 0:return Nu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Nu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Nu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Nu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},mLe=function(e,t){switch(t){case 0:return Nu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Nu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Nu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Nu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},pLe=function(e,t){switch(t){case 0:return Nu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Nu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Nu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Nu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},gLe=function(e,t){switch(t){case 0:return AC(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return AC(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return AC(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return AC(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},AC=function(e,t){var r=[];return yu(e)?r.push(e.subdivide(.5,!1)):r.push(e),yu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Nu=function(e,t,r,n){var a=[];return yu(e)?a.push(e.subdivide(.5,!1)):a.push(e),yu(r)?a.push(r.subdivide(.5,!0)):a.push(r),yu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),yu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Yre=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},TS=function(e){var t=e.styles,r=e.bounds,n=Oa(t.paddingLeft,r.width),a=Oa(t.paddingRight,r.width),s=Oa(t.paddingTop,r.width),i=Oa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},vLe=function(e,t){return e===0?t.bounds:e===2?TS(t):Yre(t)},xLe=function(e,t){return e===0?t.bounds:e===2?TS(t):Yre(t)},BT=function(e,t,r){var n=vLe(xv(e.styles.backgroundOrigin,t),e),a=xLe(xv(e.styles.backgroundClip,t),e),s=bLe(xv(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],l=qb(xv(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=yLe(xv(e.styles.backgroundRepeat,t),l,s,n,a),d=Math.round(n.left+l[0]),f=Math.round(n.top+l[1]);return[u,d,f,i,o]},Zg=function(e){return Ea(e)&&e.value===Xv.AUTO},fC=function(e){return typeof e=="number"},bLe=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(di(i)&&o&&di(o))return[Oa(i,r.width),Oa(o,r.height)];var l=fC(s);if(Ea(i)&&(i.value===Xv.CONTAIN||i.value===Xv.COVER)){if(fC(s)){var u=r.width/r.height;return u<s!=(i.value===Xv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=fC(n),f=fC(a),h=d||f;if(Zg(i)&&(!o||Zg(o))){if(d&&f)return[n,a];if(!l&&!h)return[r.width,r.height];if(h&&l){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var v=d?n:r.width,b=f?a:r.height;return[v,b]}if(l){var y=0,_=0;return di(i)?y=Oa(i,r.width):di(o)&&(_=Oa(o,r.height)),Zg(i)?y=_*s:(!o||Zg(o))&&(_=y/s),[y,_]}var S=null,k=null;if(di(i)?S=Oa(i,r.width):o&&di(o)&&(k=Oa(o,r.height)),S!==null&&(!o||Zg(o))&&(k=d&&f?S/n*a:r.height),k!==null&&Zg(i)&&(S=d&&f?k/a*n:r.width),S!==null&&k!==null)return[S,k];throw new Error("Unable to calculate background-size for element")},xv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},yLe=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],l=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(l+n.top+i)),new ar(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+l)),new ar(Math.round(n.left+s),Math.round(n.top+i+l))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},wLe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bV="Hidden Text",ELe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=wLe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(bV)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(bV)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Jre=function(){function e(t,r){this.context=t,this.options=r}return e}(),CLe=1e4,_Le=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new ELe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),ALe(r)&&(this.ctx.globalAlpha=r.opacity),dLe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Gre(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return cl(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return cl(this,void 0,void 0,function(){return Lo(this,function(n){switch(n.label){case 0:if(Ci(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=pR(r.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+a),o+s.ctx.measureText(l).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=TLe(r.fontFamily).join(", "),s=Xw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return cl(this,void 0,void 0,function(){var a,s,i,o,l,u,d,f,h=this;return Lo(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(v){switch(v){case 0:h.ctx.fillStyle=Ui(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ui(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Ui(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ui(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=TS(r),i=BS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return cl(this,void 0,void 0,function(){var n,a,s,i,o,l,_,_,u,d,f,h,k,p,g,B,v,b,y,_,S,k,B;return Lo(this,function(F){switch(F.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,F.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:F.sent(),F.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Tre))return[3,8];F.label=5;case 5:return F.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return _=F.sent(),this.renderReplacedElement(n,a,_),[3,8];case 7:return F.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Ire&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof jre))return[3,12];F.label=9;case 9:return F.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return _=F.sent(),this.renderReplacedElement(n,a,_),[3,12];case 11:return F.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Rre&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=F.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),F.label=14;case 14:if(n instanceof gR&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===CS?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Ui(oV),this.ctx.fill(),this.ctx.restore()):n.type===_S&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ui(oV),this.ctx.fill(),this.ctx.restore())),SLe(n)&&n.value.length){switch(h=this.createFontStyle(s),k=h[0],p=h[1],g=this.fontMetrics.getMetrics(k,p).baseline,this.ctx.font=k,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=kLe(n.styles.textAlign),B=TS(n),v=0,n.styles.textAlign){case 1:v+=B.width/2;break;case 2:v+=B.width;break}b=B.add(v,0,0,-B.height/2+1),this.ctx.save(),this.path([new ar(B.left,B.top),new ar(B.left+B.width,B.top),new ar(B.left+B.width,B.top+B.height),new ar(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Cy(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ci(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];_=void 0,S=y.url,F.label=15;case 15:return F.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return _=F.sent(),this.ctx.drawImage(_,n.bounds.left-(_.width+10),n.bounds.top),[3,18];case 17:return F.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(k=this.createFontStyle(s)[0],this.ctx.font=k,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new eh(n.bounds.left,n.bounds.top+Oa(n.styles.paddingTop,n.bounds.width),n.bounds.width,zH(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Cy(r.listValue,B),s.letterSpacing,zH(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),F.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return cl(this,void 0,void 0,function(){var n,a,y,s,i,y,o,l,y,u,d,y,f,h,y,p,g,y,v,b,y;return Lo(this,function(_){switch(_.label){case 0:if(Ci(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:_.sent(),n=0,a=r.negativeZIndex,_.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:_.sent(),_.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:_.sent(),s=0,i=r.nonInlineLevel,_.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:_.sent(),_.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,_.label=11;case 11:return o<l.length?(y=l[o],[4,this.renderStack(y)]):[3,14];case 12:_.sent(),_.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,_.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:_.sent(),_.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,_.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:_.sent(),_.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,_.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:_.sent(),_.label=25;case 25:return p++,[3,23];case 26:v=0,b=r.positiveZIndex,_.label=27;case 27:return v<b.length?(y=b[v],[4,this.renderStack(y)]):[3,30];case 28:_.sent(),_.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=yu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),yu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return cl(this,void 0,void 0,function(){var n,a,s,i,o,l;return Lo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,P,q,Z,U,R,C,g,P,q,Z,U,R,v,b,y,_,S,k,B,F,w,C,N,P,D,T,U,R,X,q,Z,H,V,K,ne,L,W,J,te;return Lo(this,function(ie){switch(ie.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ie.sent(),[3,4];case 3:return ie.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=BT(r,n,[f.width,f.height,f.width/f.height]),P=p[0],q=p[1],Z=p[2],U=p[3],R=p[4],C=s.ctx.createPattern(s.resizeImage(f,U,R),"repeat"),s.renderRepeat(P,C,q,Z)),[3,6];case 5:dDe(d)?(g=BT(r,n,[null,null,null]),P=g[0],q=g[1],Z=g[2],U=g[3],R=g[4],v=iDe(d.angle,U,R),b=v[0],y=v[1],_=v[2],S=v[3],k=v[4],B=document.createElement("canvas"),B.width=U,B.height=R,F=B.getContext("2d"),w=F.createLinearGradient(y,S,_,k),HH(d.stops,b).forEach(function(Ae){return w.addColorStop(Ae.stop,Ui(Ae.color))}),F.fillStyle=w,F.fillRect(0,0,U,R),U>0&&R>0&&(C=s.ctx.createPattern(B,"repeat"),s.renderRepeat(P,C,q,Z))):ADe(d)&&(N=BT(r,n,[null,null,null]),P=N[0],D=N[1],T=N[2],U=N[3],R=N[4],X=d.position.length===0?[fR]:d.position,q=Oa(X[0],U),Z=Oa(X[X.length-1],R),H=oDe(d,q,Z,U,R),V=H[0],K=H[1],V>0&&K>0&&(ne=s.ctx.createRadialGradient(D+q,T+Z,0,D+q,T+Z,V),HH(d.stops,V*2).forEach(function(Ae){return ne.addColorStop(Ae.stop,Ui(Ae.color))}),s.path(P),s.ctx.fillStyle=ne,V!==K?(L=r.bounds.left+.5*r.bounds.width,W=r.bounds.top+.5*r.bounds.height,J=K/V,te=1/J,s.ctx.save(),s.ctx.translate(L,W),s.ctx.transform(1,0,0,J,0,0),s.ctx.translate(-L,-W),s.ctx.fillRect(D,te*(T-W)+W,U,R*te),s.ctx.restore()):s.ctx.fill())),ie.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return cl(this,void 0,void 0,function(){return Lo(this,function(s){return this.path(xV(a,n)),this.ctx.fillStyle=Ui(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return cl(this,void 0,void 0,function(){var i,o;return Lo(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=mLe(s,a),this.path(i),this.ctx.fillStyle=Ui(r),this.ctx.fill(),o=pLe(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return cl(this,void 0,void 0,function(){var n,a,s,i,o,l,u,d,f=this;return Lo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!M0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=NLe(xv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),M0(n.backgroundColor)||(this.ctx.fillStyle=Ui(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=kS(r.curves),v=p.inset?0:CLe,b=fLe(g,-v+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+v,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Ui(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Ui(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,l=0,u=s,h.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!M0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return cl(this,void 0,void 0,function(){var o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,F,B,F;return Lo(this,function(w){return this.ctx.save(),o=gLe(s,a),l=xV(s,a),i===2&&(this.path(l),this.ctx.clip()),yu(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),yu(l[1])?(f=l[1].end.x,h=l[1].end.y):(f=l[1].x,h=l[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),g=n<3?n*3:n*2,v=n<3?n*2:n,i===3&&(g=n,v=n),b=!0,p<=g*2?b=!1:p<=g*2+v?(y=p/(2*g+v),g*=y,v*=y):(_=Math.floor((p+v)/(g+v)),S=(p-_*g)/(_-1),k=(p-(_+1)*g)/_,v=k<=0||Math.abs(v-S)<Math.abs(v-k)?S:k),b&&(i===3?this.ctx.setLineDash([0,g+v]):this.ctx.setLineDash([g,v])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ui(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(yu(l[0])&&(B=l[3],F=l[0],this.ctx.beginPath(),this.formatPath([new ar(B.end.x,B.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke()),yu(l[1])&&(B=l[1],F=l[2],this.ctx.beginPath(),this.formatPath([new ar(B.end.x,B.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return cl(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=hLe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Jre),SLe=function(e){return e instanceof Dre||e instanceof Ore?!0:e instanceof gR&&e.type!==_S&&e.type!==CS},NLe=function(e,t){switch(e){case 0:return kS(t);case 2:return lLe(t);case 1:default:return BS(t)}},kLe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},BLe=["-apple-system","system-ui"],TLe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return BLe.indexOf(t)===-1}):e},ILe=function(e){Fd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return cl(this,void 0,void 0,function(){var n,a;return Lo(this,function(s){switch(s.label){case 0:return n=xF(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,jLe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Jre),jLe=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},FLe=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,$E([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,$E([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,$E([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,$E([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),OLe=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new FLe({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new eLe(this,t)}return e.instanceCount=1,e}(),IS=function(e,t){return t===void 0&&(t={}),DLe(e,t)};typeof window<"u"&&Kre.setContext(window);var DLe=function(e,t){return cl(void 0,void 0,void 0,function(){var r,n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,w,F,w,C,N,P,D,T,U,R,X,q,Z,H,V,K,ne,L,W,J;return Lo(this,function(te){switch(te.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(C=t.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(N=t.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:t.proxy,useCORS:(P=t.useCORS)!==null&&P!==void 0?P:!1},s=aF({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},a),i={windowWidth:(T=t.windowWidth)!==null&&T!==void 0?T:n.innerWidth,windowHeight:(U=t.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(R=t.scrollX)!==null&&R!==void 0?R:n.pageXOffset,scrollY:(X=t.scrollY)!==null&&X!==void 0?X:n.pageYOffset},o=new eh(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new OLe(s,o),u=(q=t.foreignObjectRendering)!==null&&q!==void 0?q:!1,d={allowTaint:(Z=t.allowTaint)!==null&&Z!==void 0?Z:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new pV(l,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),g=vR(h)||PPe(h)?f6e(h.ownerDocument):LN(l,h),v=g.width,b=g.height,y=g.left,_=g.top,S=RLe(l,h,t.backgroundColor),k={canvas:t.canvas,backgroundColor:S,scale:(V=(H=t.scale)!==null&&H!==void 0?H:n.devicePixelRatio)!==null&&V!==void 0?V:1,x:((K=t.x)!==null&&K!==void 0?K:0)+y,y:((ne=t.y)!==null&&ne!==void 0?ne:0)+_,width:(L=t.width)!==null&&L!==void 0?L:Math.ceil(v),height:(W=t.height)!==null&&W!==void 0?W:Math.ceil(b)},u?(l.logger.debug("Document cloned, using foreign object rendering"),w=new ILe(l,k),[4,w.render(h)]):[3,3];case 2:return B=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+_+" with size "+v+"x"+b+" using computed rendering"),l.logger.debug("Starting DOM parsing"),F=Lre(l,h),S===F.styles.backgroundColor&&(F.styles.backgroundColor=Vf.TRANSPARENT),l.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),w=new _Le(l,k),[4,w.render(F)];case 4:B=te.sent(),te.label=5;case 5:return(!((J=t.removeContainer)!==null&&J!==void 0)||J)&&(pV.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,B]}})})},RLe=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?wy(e,getComputedStyle(n.documentElement).backgroundColor):Vf.TRANSPARENT,s=n.body?wy(e,getComputedStyle(n.body).backgroundColor):Vf.TRANSPARENT,i=typeof r=="string"?wy(e,r):r===null?Vf.TRANSPARENT:4294967295;return t===n.documentElement?M0(a)?M0(s)?i:s:a:i};const PLe=Object.freeze(Object.defineProperty({__proto__:null,default:IS},Symbol.toStringTag,{value:"Module"})),qN="proyectos_interdisciplinarios",Zre="entregas_interdisciplinarias",LLe="usuarios",xR=e=>{const t=e.data();return{id:e.id,...t}},MLe=e=>{const t=tr(Ut(jt,qN),Kr("nombreProyecto","asc"));return vr(t,n=>{const a=n.docs.map(s=>xR(s));e(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},ULe=async e=>{try{return(await Jn(Ut(jt,qN),e)).id}catch(t){throw console.error("Error al crear la planificación:",t),new Error("No se pudo crear la planificación.")}},yV=async(e,t)=>{try{const{id:r,...n}=t,a=hr(jt,qN,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},QLe=async e=>{try{const t=hr(jt,qN,e);await Is(t)}catch(t){throw console.error("Error al eliminar la planificación:",t),new Error("No se pudo eliminar la planificación.")}},HLe=(e,t)=>{const r=tr(Ut(jt,Zre),In("planificacionId","==",e));return vr(r,a=>{const s=a.docs.map(i=>xR(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},wV=async(e,t)=>{try{const r=hr(jt,Zre,e);await Ji(r,{feedbackProfesor:t,fechaFeedback:br.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},VLe=e=>{const t=tr(Ut(jt,LLe));return vr(t,n=>{const a=n.docs.map(s=>xR(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},zLe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=j.useState(null),a=j.useMemo(()=>{const l=[];return e.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[e]),s=j.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),f=new Date(`${l.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(p=>p[0]).join("").toUpperCase(),d=p=>{let g=0;for(let v=0;v<p.length;v++)g=p.charCodeAt(v)+((g<<5)-g);return g},f=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],h=Math.abs(d(l))%f.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${f[h]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[f,h]=j.useState(l.activity),p=v=>{h({...f,[v.target.name]:v.target.value})},g=()=>{d(l.planId,f),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:g,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const u=s(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},$Le=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),KLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),GLe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),qLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),WLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),XLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),YLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),JLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),SF=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),s0=({icon:e,label:t,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[e,c.jsx("span",{children:t})]}),n]}),r]}),ZLe=({initialPlan:e,onSave:t,onCancel:r})=>{const[n,a]=j.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=j.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=j.useState({nombre:"",fecha:""}),[u,d]=j.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[f,h]=j.useState(!1),[p,g]=j.useState(!1),[v,b]=j.useState(!1);j.useEffect(()=>{a(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const y=async C=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}C==="objetivos"?h(!0):g(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let P="";C==="objetivos"?P=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:P=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const X=(await(await new os(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(P)).response).text();a(q=>({...q,[C]:X.replace(/(\*\*|\*)/g,"")}))}catch(D){console.error(`Error al generar ${C}`,D),alert(`Hubo un error al generar los ${C}. Inténtelo de nuevo.`)}finally{C==="objetivos"?h(!1):g(!1)}},_=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}b(!0);const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const X=(await(await new os(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),q=JSON.parse(X);a(Z=>{var H,V,K;return{...Z,actividades:((H=q.actividades)==null?void 0:H.map(ne=>({...ne,id:crypto.randomUUID()})))||Z.actividades,fechasClave:((V=q.fechasClave)==null?void 0:V.map(ne=>({...ne,id:crypto.randomUUID()})))||Z.fechasClave,tareas:((K=q.tareas)==null?void 0:K.map((ne,L)=>({...ne,id:crypto.randomUUID(),numero:L+1})))||Z.tareas}})}catch(P){console.error("Error al generar la estructura del proyecto:",P),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{b(!1)}},S=C=>{a(N=>({...N,[C.target.name]:C.target.value}))},k=(C,N)=>{a(P=>{const D=P[C],T=D.includes(N)?D.filter(U=>U!==N):[...D,N];return{...P,[C]:T}})},B=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(C=>({...C,actividades:[...C.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},F=()=>{!o.nombre||!o.fecha||(a(C=>({...C,fechasClave:[...C.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},w=()=>{var N;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const C={id:crypto.randomUUID(),numero:(((N=n.tareas)==null?void 0:N.length)||0)+1,...u};a(P=>({...P,tareas:[...P.tareas||[],C]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(s0,{icon:c.jsx($Le,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:S,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(s0,{icon:c.jsx(KLe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:S,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(s0,{icon:c.jsx(GLe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:Cs.map(C=>c.jsx("button",{type:"button",onClick:()=>k("cursos",C),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(C)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:C},C))})}),c.jsx(s0,{icon:c.jsx(qLe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:qi.map(C=>c.jsx("button",{type:"button",onClick:()=>k("asignaturas",C),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(C)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:C},C))})}),c.jsx(s0,{icon:c.jsx(WLe,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:S,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(s0,{icon:c.jsx(XLe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>y("objetivos"),disabled:!n.descripcionProyecto.trim()||f,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(SF,{})}),children:f?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:S,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(s0,{icon:c.jsx(YLe,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>y("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||p,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(SF,{})}),children:p?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:S,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(s0,{icon:c.jsx(JLe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:c.jsx("button",{type:"button",onClick:_,disabled:v||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:v?"Generando...":"✨ Sugerir Estructura con IA"})}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:s.nombre,onChange:C=>i({...s,nombre:C.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:s.fechaInicio,onChange:C=>i({...s,fechaInicio:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:s.fechaFin,onChange:C=>i({...s,fechaFin:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:B,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(C=>c.jsx("li",{children:C.nombre},C.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:C=>l({...o,nombre:C.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:C=>l({...o,fecha:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:F,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(C=>c.jsxs("li",{children:[C.nombre," (",C.fecha,")"]},C.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:C=>d({...u,instrucciones:C.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:C=>d({...u,fechaEntrega:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(C=>c.jsxs("li",{children:[C.numero,". ",C.instrucciones]},C.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:e?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},EV=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,s]=j.useState("list"),[i,o]=j.useState(null),[l,u]=j.useState(null),[d,f]=j.useState(null);j.useEffect(()=>{n(!0);const S=MLe(k=>{t(k),n(!1)});return()=>S()},[]);const h=j.useCallback(async(S,k)=>{const B=e.find(F=>F.id===S);if(B){const F={...B,actividades:(B.actividades||[]).map(w=>w.id===k.id?k:w)};await yV(S,F)}},[e]),p=async S=>{try{"id"in S&&S.id?await yV(S.id,S):await ULe(S),s("list"),o(null)}catch(k){console.error("Error al guardar la planificación:",k),alert("No se pudo guardar la planificación.")}},g=S=>{o(S),s("form")},v=async S=>{if(console.log("ID recibido por handleDelete:",S),!S){console.error("handleDelete fue llamado con un ID inválido:",S),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await QLe(S)}catch(k){console.error("Error al eliminar la planificación:",k),alert("No se pudo eliminar la planificación.")}},b=()=>{o(null),s("form")},y=async S=>{u(S.id);const k=new pr("p","mm","a4"),B=15,F=k.internal.pageSize.getWidth(),w=k.internal.pageSize.getHeight(),C=F-B*2;let N=B;const P=22,D=14,T=11,U=()=>{k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text("Proyecto Interdisciplinario",B,12),k.text("Liceo Industrial de Recoleta",F-B,12,{align:"right"}),k.setDrawColor(220),k.line(B,15,F-B,15)},R=V=>{N+V>w-B&&(k.addPage(),U(),N=B+15)},X=(V,K)=>{if(!K||Array.isArray(K)&&K.length===0||typeof K=="string"&&!K.trim())return;const ne=10;k.setFontSize(T);const L=Array.isArray(K)?K.join(", "):String(K),W=k.splitTextToSize(L,C),J=W.length*(T*.35*1.15);R(ne+J+12),k.setFont("helvetica","bold"),k.setFontSize(D),k.setTextColor(40),k.text(V,B,N),N+=6,k.setDrawColor(200),k.line(B,N,B+30,N),N+=8,k.setFont("helvetica","normal"),k.setFontSize(T),k.setTextColor(80),k.text(W,B,N),N+=J+12};U(),N=B+20,k.setFont("helvetica","bold"),k.setFontSize(P),k.setTextColor(0);const q=k.splitTextToSize(S.nombreProyecto,C);if(k.text(q,B,N),N+=q.length*(P*.4)+10,gl(k,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},S.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:T,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=k.lastAutoTable.finalY+15,X("Descripción del Proyecto",S.descripcionProyecto),X("Objetivos de Aprendizaje",S.objetivos),X("Indicadores de Logro",S.indicadoresLogro),S.tareas&&S.tareas.length>0){const V=S.tareas.map(ne=>[ne.numero.toString(),ne.instrucciones,ne.fechaEntrega]),K=(V.length+1)*10+15;R(K+15),k.setFont("helvetica","bold"),k.setFontSize(D),k.setTextColor(40),k.text("Tareas para Estudiantes",B,N),N+=10,gl(k,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:V,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=k.lastAutoTable.finalY+15}const Z=document.getElementById("gantt-container-vertical");if(Z)try{const K=(await IS(Z,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");k.addPage(),U(),N=B+15,k.setFont("helvetica","bold"),k.setFontSize(D),k.setTextColor(40),k.text("Cronograma del Proyecto",B,N),N+=10;const ne=k.getImageProperties(K),L=C,W=ne.height*L/ne.width;k.addImage(K,"PNG",B,N,L,W)}catch(V){console.error("Error generating timeline image:",V)}const H=k.internal.pages.length-1;for(let V=1;V<=H;V++)k.setPage(V),k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text(`Página ${V} de ${H}`,F-B,k.internal.pageSize.getHeight()-10,{align:"right"});k.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},_=({plan:S,onBack:k})=>{var X,q;const[B,F]=j.useState([]),[w,C]=j.useState([]),[N,P]=j.useState(((X=S.tareas)==null?void 0:X[0])||null),[D,T]=j.useState(null);j.useEffect(()=>{const Z=VLe(F),H=HLe(S.id,C);return()=>{Z(),H()}},[S.id]);const U=j.useMemo(()=>B.filter(Z=>Z.profile===er.ESTUDIANTE&&S.cursos.includes(Z.curso||"")).sort((Z,H)=>Z.nombreCompleto.localeCompare(H.nombreCompleto)),[B,S.cursos]),R=async Z=>{var K;T(Z.id);const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${N==null?void 0:N.instrucciones}"
                - Comentario del estudiante: "${Z.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${Z.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((K=Z.archivoAdjunto)==null?void 0:K.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const te=(await(await new os(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(V)).response).text().replace(/(\*\*|\*)/g,"");await wV(Z.id,te)}catch(ne){console.error("Error al generar feedback con IA:",ne),alert("No se pudo generar la retroalimentación.")}finally{T(null)}};return N?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",S.nombreProyecto]}),c.jsx("button",{onClick:k,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:N.id,onChange:Z=>{var H;return P(((H=S.tareas)==null?void 0:H.find(V=>V.id===Z.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(q=S.tareas)==null?void 0:q.map(Z=>c.jsxs("option",{value:Z.id,children:["Tarea ",Z.numero,": ",Z.instrucciones]},Z.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:U.map(Z=>{const H=w.find(V=>V.tareaId===N.id&&V.estudianteId===Z.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[Z.nombreCompleto," - ",H!=null&&H.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),H?c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[H.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",H.observacionesEstudiante]}),H.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:H.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:H.enlaceUrl})]}),H.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:H.archivoAdjunto.url,download:H.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:H.archivoAdjunto.nombre})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:H.feedbackProfesor||"",onBlur:V=>wV(H.id,V.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},H.id),c.jsx("button",{onClick:()=>R(H),disabled:D===H.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:D===H.id?"...":c.jsx(SF,{})})]})]}):c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},Z.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(_,{plan:d,onBack:()=>f(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:e.map(S=>(console.log("Inspeccionando objeto plan:",S),c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:S.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(S.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>f(S),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>y(S),disabled:l===S.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===S.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>g(S),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>v(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},S.id)))})]}):c.jsx(ZLe,{initialPlan:i,onSave:p,onCancel:()=>{s("list"),o(null)}}),e.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(zLe,{planificaciones:e,onActivityUpdate:h})})]})},TT="pañolMaquinas",CV="pañolRegistros",e8e=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=j.useState(a),[o,l]=j.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=j.useState(u),[h,p]=j.useState(null),[g,v]=j.useState({maquinaId:"",curso:"",profesor:"",fecha:""});j.useEffect(()=>{try{const T=localStorage.getItem(TT);if(T&&JSON.parse(T).length>0)t(JSON.parse(T));else{const R=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];t(R),localStorage.setItem(TT,JSON.stringify(R))}const U=localStorage.getItem(CV);U&&n(JSON.parse(U))}catch(T){console.error("Error al cargar datos de Pañol desde localStorage",T)}},[]);const b=j.useCallback(T=>{t(T),localStorage.setItem(TT,JSON.stringify(T))},[]),y=j.useCallback(T=>{n(T),localStorage.setItem(CV,JSON.stringify(T))},[]),_=T=>{T.preventDefault(),d.nombre.trim()&&(b(h?e.map(U=>U.id===h.id?{...h,...d}:U):[{...d,id:crypto.randomUUID()},...e]),f(u),p(null))},S=j.useCallback(T=>{if(r.some(U=>U.maquinaId===T)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&b(e.filter(U=>U.id!==T))},[e,r,b]),k=T=>{T.preventDefault();const U=o||s;if(!U.curso||!U.profesorResponsable.trim()||!U.maquinaId||U.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}y(o?r.map(R=>R.id===o.id?o:R):[{...s,id:crypto.randomUUID()},...r]),i(a),l(null)},B=j.useCallback(T=>{window.confirm("¿Eliminar este registro de uso?")&&y(r.filter(U=>U.id!==T))},[r,y]),F=j.useMemo(()=>r.filter(T=>(g.maquinaId===""||T.maquinaId===g.maquinaId)&&(g.curso===""||T.curso===g.curso)&&(g.profesor===""||T.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||T.fecha===g.fecha)).sort((T,U)=>new Date(U.fecha).getTime()-new Date(T.fecha).getTime()),[r,g]),w=j.useMemo(()=>new Map(e.map(T=>[T.id,T])),[e]),C=()=>{const T=F.map(X=>{var q,Z;return{Fecha:X.fecha,Curso:X.curso,Profesor:X.profesorResponsable,Máquina:((q=w.get(X.maquinaId))==null?void 0:q.nombre)||"N/A",Especialidad:((Z=w.get(X.maquinaId))==null?void 0:Z.especialidad)||"N/A","Total Horas":X.totalHoras,Observaciones:X.observaciones}}),U=_u.json_to_sheet(T),R=_u.book_new();_u.book_append_sheet(R,U,"RegistrosPañol"),tR(R,"Registros_Pañol.xlsx")},N=()=>{const T=new pr;gl(T,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:F.map(U=>{var R,X;return[U.fecha,U.curso,U.profesorResponsable,((R=w.get(U.maquinaId))==null?void 0:R.nombre)||"N/A",((X=w.get(U.maquinaId))==null?void 0:X.especialidad)||"N/A",U.totalHoras,U.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:U=>{T.setFontSize(10),T.setFont("helvetica","bold"),T.text("LICEO INDUSTRIAL DE RECOLETA",U.settings.margin.left,15)}}),T.save("Registros_Pañol.pdf")},P="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",D=()=>{const T=o||s,U=o?l:i;return c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:T.fecha,onChange:R=>U({...T,fecha:R.target.value}),className:P,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:T.curso,onChange:R=>U({...T,curso:R.target.value}),className:P,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),Cs.map(R=>c.jsx("option",{children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:T.profesorResponsable,onChange:R=>U({...T,profesorResponsable:R.target.value}),className:P,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),Ej.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:T.maquinaId,onChange:R=>U({...T,maquinaId:R.target.value}),className:P,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),e.map(R=>c.jsx("option",{value:R.id,children:R.nombre},R.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:T.totalHoras,onChange:R=>U({...T,totalHoras:Number(R.target.value)}),className:P,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:T.observaciones,onChange:R=>U({...T,observaciones:R.target.value}),placeholder:"Observaciones...",className:`${P}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),D()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:_,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:T=>f({...d,nombre:T.target.value}),placeholder:"Nombre máquina",className:P}),c.jsxs("select",{value:d.especialidad,onChange:T=>f({...d,especialidad:T.target.value}),className:P,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:h?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.map(T=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[T.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",T.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{p(T),f(T)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>S(T.id),className:"text-red-500",children:"🗑️"})]})]},T.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:C,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:N,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:g.fecha,onChange:T=>v({...g,fecha:T.target.value}),className:P}),c.jsxs("select",{value:g.curso,onChange:T=>v({...g,curso:T.target.value}),className:P,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Cs.map(T=>c.jsx("option",{children:T},T))]}),c.jsxs("select",{value:g.maquinaId,onChange:T=>v({...g,maquinaId:T.target.value}),className:P,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(T=>c.jsx("option",{value:T.id,children:T.nombre},T.id))]}),c.jsx("input",{value:g.profesor,onChange:T=>v({...g,profesor:T.target.value}),placeholder:"Buscar profesor...",className:P})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:F.map(T=>{var U;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:T.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((U=w.get(T.maquinaId))==null?void 0:U.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[T.profesorResponsable," (",T.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:T.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(T),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>B(T.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},T.id)})})]})})]})]})]})};function yl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=yl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var IT={exports:{}},jT={},FT={exports:{}},OT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _V;function t8e(){if(_V)return OT;_V=1;var e=Lx();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),v=g[0].inst,b=g[1];return s(function(){v.value=p,v.getSnapshot=h,l(v)&&b({inst:v})},[f,p,h]),a(function(){return l(v)&&b({inst:v}),f(function(){l(v)&&b({inst:v})})},[f]),i(p),p}function l(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return OT.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,OT}var SV;function r8e(){return SV||(SV=1,FT.exports=t8e()),FT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NV;function n8e(){if(NV)return jT;NV=1;var e=Lx(),t=r8e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return jT.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function y(F){if(!_){if(_=!0,S=F,F=h(F),p!==void 0&&v.hasValue){var w=v.value;if(p(w,F))return k=w}return k=F}if(w=k,n(S,F))return w;var C=h(F);return p!==void 0&&p(w,C)?(S=F,w):(S=F,k=C)}var _=!1,S,k,B=f===void 0?null:f;return[function(){return y(d())},B===null?void 0:function(){return y(B())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},jT}var kV;function a8e(){return kV||(kV=1,IT.exports=n8e()),IT.exports}var ene=a8e();const s8e=bl(ene),i8e={},BV=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(i8e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,l);return l},o8e=e=>e?BV(e):BV,{useDebugValue:l8e}=lt,{useSyncExternalStoreWithSelector:c8e}=s8e,u8e=e=>e;function tne(e,t=u8e,r){const n=c8e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return l8e(n),n}const TV=(e,t)=>{const r=o8e(e),n=(a,s=t)=>tne(r,a,s);return Object.assign(n,r),n},d8e=(e,t)=>e?TV(e,t):TV;function tl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var A8e={value:()=>{}};function WN(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new A_(r)}function A_(e){this._=e}function f8e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}A_.prototype=WN.prototype={constructor:A_,on:function(e,t){var r=this._,n=f8e(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=h8e(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=IV(r[a],e.name,t);else if(t==null)for(a in r)r[a]=IV(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new A_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function h8e(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function IV(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=A8e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var NF="http://www.w3.org/1999/xhtml";const jV={svg:"http://www.w3.org/2000/svg",xhtml:NF,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function XN(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),jV.hasOwnProperty(t)?{space:jV[t],local:e}:e}function m8e(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===NF&&t.documentElement.namespaceURI===NF?t.createElement(e):t.createElementNS(r,e)}}function p8e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rne(e){var t=XN(e);return(t.local?p8e:m8e)(t)}function g8e(){}function bR(e){return e==null?g8e:function(){return this.querySelector(e)}}function v8e(e){typeof e!="function"&&(e=bR(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),l,u,d=0;d<i;++d)(l=s[d])&&(u=e.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Dc(n,this._parents)}function x8e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function b8e(){return[]}function nne(e){return e==null?b8e:function(){return this.querySelectorAll(e)}}function y8e(e){return function(){return x8e(e.apply(this,arguments))}}function w8e(e){typeof e=="function"?e=y8e(e):e=nne(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(e.call(l,l.__data__,u,i)),a.push(l));return new Dc(n,a)}function ane(e){return function(){return this.matches(e)}}function sne(e){return function(t){return t.matches(e)}}var E8e=Array.prototype.find;function C8e(e){return function(){return E8e.call(this.children,e)}}function _8e(){return this.firstElementChild}function S8e(e){return this.select(e==null?_8e:C8e(typeof e=="function"?e:sne(e)))}var N8e=Array.prototype.filter;function k8e(){return Array.from(this.children)}function B8e(e){return function(){return N8e.call(this.children,e)}}function T8e(e){return this.selectAll(e==null?k8e:B8e(typeof e=="function"?e:sne(e)))}function I8e(e){typeof e!="function"&&(e=ane(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new Dc(n,this._parents)}function ine(e){return new Array(e.length)}function j8e(){return new Dc(this._enter||this._groups.map(ine),this._parents)}function jS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jS.prototype={constructor:jS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function F8e(e){return function(){return e}}function O8e(e,t,r,n,a,s){for(var i=0,o,l=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new jS(e,s[i]);for(;i<l;++i)(o=t[i])&&(a[i]=o)}function D8e(e,t,r,n,a,s,i){var o,l,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(l=t[o])&&(h[o]=p=i.call(l,l.__data__,o,t)+"",u.has(p)?a[o]=l:u.set(p,l));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(l=u.get(p))?(n[o]=l,l.__data__=s[o],u.delete(p)):r[o]=new jS(e,s[o]);for(o=0;o<d;++o)(l=t[o])&&u.get(h[o])===l&&(a[o]=l)}function R8e(e){return e.__data__}function P8e(e,t){if(!arguments.length)return Array.from(this,R8e);var r=t?D8e:O8e,n=this._parents,a=this._groups;typeof e!="function"&&(e=F8e(e));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=L8e(e.call(d,d&&d.__data__,u,n)),g=p.length,v=o[u]=new Array(g),b=i[u]=new Array(g),y=l[u]=new Array(h);r(d,f,v,b,y,p,t);for(var _=0,S=0,k,B;_<g;++_)if(k=v[_]){for(_>=S&&(S=_+1);!(B=b[S])&&++S<g;);k._next=B||null}}return i=new Dc(i,n),i._enter=o,i._exit=l,i}function L8e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function M8e(){return new Dc(this._exit||this._groups.map(ine),this._parents)}function U8e(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function Q8e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var u=r[l],d=n[l],f=u.length,h=o[l]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;l<a;++l)o[l]=r[l];return new Dc(o,this._parents)}function H8e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function V8e(e){e||(e=z8e);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,l=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(t)}return new Dc(a,this._parents).order()}function z8e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $8e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function K8e(){return Array.from(this)}function G8e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function q8e(){let e=0;for(const t of this)++e;return e}function W8e(){return!this.node()}function X8e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function Y8e(e){return function(){this.removeAttribute(e)}}function J8e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Z8e(e,t){return function(){this.setAttribute(e,t)}}function eMe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tMe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function rMe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function nMe(e,t){var r=XN(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?J8e:Y8e:typeof t=="function"?r.local?rMe:tMe:r.local?eMe:Z8e)(r,t))}function one(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function aMe(e){return function(){this.style.removeProperty(e)}}function sMe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function iMe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function oMe(e,t,r){return arguments.length>1?this.each((t==null?aMe:typeof t=="function"?iMe:sMe)(e,t,r??"")):yx(this.node(),e)}function yx(e,t){return e.style.getPropertyValue(t)||one(e).getComputedStyle(e,null).getPropertyValue(t)}function lMe(e){return function(){delete this[e]}}function cMe(e,t){return function(){this[e]=t}}function uMe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function dMe(e,t){return arguments.length>1?this.each((t==null?lMe:typeof t=="function"?uMe:cMe)(e,t)):this.node()[e]}function lne(e){return e.trim().split(/^|\s+/)}function yR(e){return e.classList||new cne(e)}function cne(e){this._node=e,this._names=lne(e.getAttribute("class")||"")}cne.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function une(e,t){for(var r=yR(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function dne(e,t){for(var r=yR(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function AMe(e){return function(){une(this,e)}}function fMe(e){return function(){dne(this,e)}}function hMe(e,t){return function(){(t.apply(this,arguments)?une:dne)(this,e)}}function mMe(e,t){var r=lne(e+"");if(arguments.length<2){for(var n=yR(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?hMe:t?AMe:fMe)(r,t))}function pMe(){this.textContent=""}function gMe(e){return function(){this.textContent=e}}function vMe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function xMe(e){return arguments.length?this.each(e==null?pMe:(typeof e=="function"?vMe:gMe)(e)):this.node().textContent}function bMe(){this.innerHTML=""}function yMe(e){return function(){this.innerHTML=e}}function wMe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function EMe(e){return arguments.length?this.each(e==null?bMe:(typeof e=="function"?wMe:yMe)(e)):this.node().innerHTML}function CMe(){this.nextSibling&&this.parentNode.appendChild(this)}function _Me(){return this.each(CMe)}function SMe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function NMe(){return this.each(SMe)}function kMe(e){var t=typeof e=="function"?e:rne(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function BMe(){return null}function TMe(e,t){var r=typeof e=="function"?e:rne(e),n=t==null?BMe:typeof t=="function"?t:bR(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function IMe(){var e=this.parentNode;e&&e.removeChild(this)}function jMe(){return this.each(IMe)}function FMe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function OMe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function DMe(e){return this.select(e?OMe:FMe)}function RMe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function PMe(e){return function(t){e.call(this,t,this.__data__)}}function LMe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function MMe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function UMe(e,t,r){return function(){var n=this.__on,a,s=PMe(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function QMe(e,t,r){var n=LMe(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(a=0,d=o[l];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?UMe:MMe,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Ane(e,t,r){var n=one(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function HMe(e,t){return function(){return Ane(this,e,t)}}function VMe(e,t){return function(){return Ane(this,e,t.apply(this,arguments))}}function zMe(e,t){return this.each((typeof t=="function"?VMe:HMe)(e,t))}function*$Me(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var fne=[null];function Dc(e,t){this._groups=e,this._parents=t}function Yw(){return new Dc([[document.documentElement]],fne)}function KMe(){return this}Dc.prototype=Yw.prototype={constructor:Dc,select:v8e,selectAll:w8e,selectChild:S8e,selectChildren:T8e,filter:I8e,data:P8e,enter:j8e,exit:M8e,join:U8e,merge:Q8e,selection:KMe,order:H8e,sort:V8e,call:$8e,nodes:K8e,node:G8e,size:q8e,empty:W8e,each:X8e,attr:nMe,style:oMe,property:dMe,classed:mMe,text:xMe,html:EMe,raise:_Me,lower:NMe,append:kMe,insert:TMe,remove:jMe,clone:DMe,datum:RMe,on:QMe,dispatch:zMe,[Symbol.iterator]:$Me};function Eu(e){return typeof e=="string"?new Dc([[document.querySelector(e)]],[document.documentElement]):new Dc([[e]],fne)}function GMe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xA(e,t){if(e=GMe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const qMe={passive:!1},lw={capture:!0,passive:!1};function DT(e){e.stopImmediatePropagation()}function Yv(e){e.preventDefault(),e.stopImmediatePropagation()}function hne(e){var t=e.document.documentElement,r=Eu(e).on("dragstart.drag",Yv,lw);"onselectstart"in t?r.on("selectstart.drag",Yv,lw):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function mne(e,t){var r=e.document.documentElement,n=Eu(e).on("dragstart.drag",null);t&&(n.on("click.drag",Yv,lw),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const hC=e=>()=>e;function kF(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}kF.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function WMe(e){return!e.ctrlKey&&!e.button}function XMe(){return this.parentNode}function YMe(e,t){return t??{x:e.x,y:e.y}}function JMe(){return navigator.maxTouchPoints||"ontouchstart"in this}function ZMe(){var e=WMe,t=XMe,r=YMe,n=JMe,a={},s=WN("start","drag","end"),i=0,o,l,u,d,f=0;function h(k){k.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,qMe).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(k,B){if(!(d||!e.call(this,k,B))){var F=S(this,t.call(this,k,B),k,B,"mouse");F&&(Eu(k.view).on("mousemove.drag",g,lw).on("mouseup.drag",v,lw),hne(k.view),DT(k),u=!1,o=k.clientX,l=k.clientY,F("start",k))}}function g(k){if(Yv(k),!u){var B=k.clientX-o,F=k.clientY-l;u=B*B+F*F>f}a.mouse("drag",k)}function v(k){Eu(k.view).on("mousemove.drag mouseup.drag",null),mne(k.view,u),Yv(k),a.mouse("end",k)}function b(k,B){if(e.call(this,k,B)){var F=k.changedTouches,w=t.call(this,k,B),C=F.length,N,P;for(N=0;N<C;++N)(P=S(this,w,k,B,F[N].identifier,F[N]))&&(DT(k),P("start",k,F[N]))}}function y(k){var B=k.changedTouches,F=B.length,w,C;for(w=0;w<F;++w)(C=a[B[w].identifier])&&(Yv(k),C("drag",k,B[w]))}function _(k){var B=k.changedTouches,F=B.length,w,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),w=0;w<F;++w)(C=a[B[w].identifier])&&(DT(k),C("end",k,B[w]))}function S(k,B,F,w,C,N){var P=s.copy(),D=xA(N||F,B),T,U,R;if((R=r.call(k,new kF("beforestart",{sourceEvent:F,target:h,identifier:C,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:P}),w))!=null)return T=R.x-D[0]||0,U=R.y-D[1]||0,function X(q,Z,H){var V=D,K;switch(q){case"start":a[C]=X,K=i++;break;case"end":delete a[C],--i;case"drag":D=xA(H||Z,B),K=i;break}P.call(q,k,new kF(q,{sourceEvent:Z,subject:R,target:h,identifier:C,active:K,x:D[0]+T,y:D[1]+U,dx:D[0]-V[0],dy:D[1]-V[1],dispatch:P}),w)}}return h.filter=function(k){return arguments.length?(e=typeof k=="function"?k:hC(!!k),h):e},h.container=function(k){return arguments.length?(t=typeof k=="function"?k:hC(k),h):t},h.subject=function(k){return arguments.length?(r=typeof k=="function"?k:hC(k),h):r},h.touchable=function(k){return arguments.length?(n=typeof k=="function"?k:hC(!!k),h):n},h.on=function(){var k=s.on.apply(s,arguments);return k===s?h:k},h.clickDistance=function(k){return arguments.length?(f=(k=+k)*k,h):Math.sqrt(f)},h}function wR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function pne(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Jw(){}var cw=.7,FS=1/cw,Jv="\\s*([+-]?\\d+)\\s*",uw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",PA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eUe=/^#([0-9a-f]{3,8})$/,tUe=new RegExp(`^rgb\\(${Jv},${Jv},${Jv}\\)$`),rUe=new RegExp(`^rgb\\(${PA},${PA},${PA}\\)$`),nUe=new RegExp(`^rgba\\(${Jv},${Jv},${Jv},${uw}\\)$`),aUe=new RegExp(`^rgba\\(${PA},${PA},${PA},${uw}\\)$`),sUe=new RegExp(`^hsl\\(${uw},${PA},${PA}\\)$`),iUe=new RegExp(`^hsla\\(${uw},${PA},${PA},${uw}\\)$`),FV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wR(Jw,Hp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:OV,formatHex:OV,formatHex8:oUe,formatHsl:lUe,formatRgb:DV,toString:DV});function OV(){return this.rgb().formatHex()}function oUe(){return this.rgb().formatHex8()}function lUe(){return gne(this).formatHsl()}function DV(){return this.rgb().formatRgb()}function Hp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=eUe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?RV(t):r===3?new Kl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?mC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?mC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tUe.exec(e))?new Kl(t[1],t[2],t[3],1):(t=rUe.exec(e))?new Kl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nUe.exec(e))?mC(t[1],t[2],t[3],t[4]):(t=aUe.exec(e))?mC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sUe.exec(e))?MV(t[1],t[2]/100,t[3]/100,1):(t=iUe.exec(e))?MV(t[1],t[2]/100,t[3]/100,t[4]):FV.hasOwnProperty(e)?RV(FV[e]):e==="transparent"?new Kl(NaN,NaN,NaN,0):null}function RV(e){return new Kl(e>>16&255,e>>8&255,e&255,1)}function mC(e,t,r,n){return n<=0&&(e=t=r=NaN),new Kl(e,t,r,n)}function cUe(e){return e instanceof Jw||(e=Hp(e)),e?(e=e.rgb(),new Kl(e.r,e.g,e.b,e.opacity)):new Kl}function BF(e,t,r,n){return arguments.length===1?cUe(e):new Kl(e,t,r,n??1)}function Kl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}wR(Kl,BF,pne(Jw,{brighter(e){return e=e==null?FS:Math.pow(FS,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cw:Math.pow(cw,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kl(Ep(this.r),Ep(this.g),Ep(this.b),OS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PV,formatHex:PV,formatHex8:uUe,formatRgb:LV,toString:LV}));function PV(){return`#${op(this.r)}${op(this.g)}${op(this.b)}`}function uUe(){return`#${op(this.r)}${op(this.g)}${op(this.b)}${op((isNaN(this.opacity)?1:this.opacity)*255)}`}function LV(){const e=OS(this.opacity);return`${e===1?"rgb(":"rgba("}${Ep(this.r)}, ${Ep(this.g)}, ${Ep(this.b)}${e===1?")":`, ${e})`}`}function OS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ep(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function op(e){return e=Ep(e),(e<16?"0":"")+e.toString(16)}function MV(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fd(e,t,r,n)}function gne(e){if(e instanceof fd)return new fd(e.h,e.s,e.l,e.opacity);if(e instanceof Jw||(e=Hp(e)),!e)return new fd;if(e instanceof fd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new fd(i,o,l,e.opacity)}function dUe(e,t,r,n){return arguments.length===1?gne(e):new fd(e,t,r,n??1)}function fd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}wR(fd,dUe,pne(Jw,{brighter(e){return e=e==null?FS:Math.pow(FS,e),new fd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cw:Math.pow(cw,e),new fd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Kl(RT(e>=240?e-240:e+120,a,n),RT(e,a,n),RT(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new fd(UV(this.h),pC(this.s),pC(this.l),OS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=OS(this.opacity);return`${e===1?"hsl(":"hsla("}${UV(this.h)}, ${pC(this.s)*100}%, ${pC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function UV(e){return e=(e||0)%360,e<0?e+360:e}function pC(e){return Math.max(0,Math.min(1,e||0))}function RT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ER=e=>()=>e;function AUe(e,t){return function(r){return e+r*t}}function fUe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function hUe(e){return(e=+e)==1?vne:function(t,r){return r-t?fUe(t,r,e):ER(isNaN(t)?r:t)}}function vne(e,t){var r=t-e;return r?AUe(e,r):ER(isNaN(e)?t:e)}const DS=function e(t){var r=hUe(t);function n(a,s){var i=r((a=BF(a)).r,(s=BF(s)).r),o=r(a.g,s.g),l=r(a.b,s.b),u=vne(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function mUe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function pUe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gUe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=a1(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function vUe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ad(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function xUe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=a1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var TF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,PT=new RegExp(TF.source,"g");function bUe(e){return function(){return e}}function yUe(e){return function(t){return e(t)+""}}function xne(e,t){var r=TF.lastIndex=PT.lastIndex=0,n,a,s,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=TF.exec(e))&&(a=PT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:Ad(n,a)})),r=PT.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?yUe(l[0].x):bUe(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function a1(e,t){var r=typeof t,n;return t==null||r==="boolean"?ER(t):(r==="number"?Ad:r==="string"?(n=Hp(t))?(t=n,DS):xne:t instanceof Hp?DS:t instanceof Date?vUe:pUe(t)?mUe:Array.isArray(t)?gUe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xUe:Ad)(e,t)}function CR(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var QV=180/Math.PI,IF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bne(e,t,r,n,a,s){var i,o,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),e*n<t*r&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*QV,skewX:Math.atan(l)*QV,scaleX:i,scaleY:o}}var gC;function wUe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?IF:bne(t.a,t.b,t.c,t.d,t.e,t.f)}function EUe(e){return e==null||(gC||(gC=document.createElementNS("http://www.w3.org/2000/svg","g")),gC.setAttribute("transform",e),!(e=gC.transform.baseVal.consolidate()))?IF:(e=e.matrix,bne(e.a,e.b,e.c,e.d,e.e,e.f))}function yne(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push("translate(",null,t,null,r);g.push({i:v-4,x:Ad(u,f)},{i:v-2,x:Ad(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:Ad(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:Ad(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function l(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push(a(p)+"scale(",null,",",null,")");g.push({i:v-4,x:Ad(u,f)},{i:v-2,x:Ad(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,v=h.length,b;++g<v;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var CUe=yne(wUe,"px, ","px)","deg)"),_Ue=yne(EUe,", ",")",")"),SUe=1e-12;function HV(e){return((e=Math.exp(e))+1/e)/2}function NUe(e){return((e=Math.exp(e))-1/e)/2}function kUe(e){return((e=Math.exp(2*e))-1)/(e+1)}const BUe=function e(t,r,n){function a(s,i){var o=s[0],l=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-l,v=p*p+g*g,b,y;if(v<SUe)y=Math.log(h/u)/t,b=function(w){return[o+w*p,l+w*g,u*Math.exp(t*w*y)]};else{var _=Math.sqrt(v),S=(h*h-u*u+n*v)/(2*u*r*_),k=(h*h-u*u-n*v)/(2*h*r*_),B=Math.log(Math.sqrt(S*S+1)-S),F=Math.log(Math.sqrt(k*k+1)-k);y=(F-B)/t,b=function(w){var C=w*y,N=HV(B),P=u/(r*_)*(N*kUe(t*C+B)-NUe(B));return[o+P*p,l+P*g,u*N/HV(t*C+B)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return e(i,o,l)},a}(Math.SQRT2,2,4);function TUe(e,t){t===void 0&&(t=e,e=a1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}var wx=0,Yb=0,pb=0,wne=1e3,RS,Jb,PS=0,Vp=0,YN=0,dw=typeof performance=="object"&&performance.now?performance:Date,Ene=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _R(){return Vp||(Ene(IUe),Vp=dw.now()+YN)}function IUe(){Vp=0}function LS(){this._call=this._time=this._next=null}LS.prototype=Cne.prototype={constructor:LS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?_R():+r)+(t==null?0:+t),!this._next&&Jb!==this&&(Jb?Jb._next=this:RS=this,Jb=this),this._call=e,this._time=r,jF()},stop:function(){this._call&&(this._call=null,this._time=1/0,jF())}};function Cne(e,t,r){var n=new LS;return n.restart(e,t,r),n}function jUe(){_R(),++wx;for(var e=RS,t;e;)(t=Vp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wx}function VV(){Vp=(PS=dw.now())+YN,wx=Yb=0;try{jUe()}finally{wx=0,OUe(),Vp=0}}function FUe(){var e=dw.now(),t=e-PS;t>wne&&(YN-=t,PS=e)}function OUe(){for(var e,t=RS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:RS=r);Jb=e,jF(n)}function jF(e){if(!wx){Yb&&(Yb=clearTimeout(Yb));var t=e-Vp;t>24?(e<1/0&&(Yb=setTimeout(VV,e-dw.now()-YN)),pb&&(pb=clearInterval(pb))):(pb||(PS=dw.now(),pb=setInterval(FUe,wne)),wx=1,Ene(VV))}}function zV(e,t,r){var n=new LS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var DUe=WN("start","end","cancel","interrupt"),RUe=[],_ne=0,$V=1,FF=2,f_=3,KV=4,OF=5,h_=6;function JN(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;PUe(e,r,{name:t,index:n,group:a,on:DUe,tween:RUe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_ne})}function SR(e,t){var r=Od(e,t);if(r.state>_ne)throw new Error("too late; already scheduled");return r}function GA(e,t){var r=Od(e,t);if(r.state>f_)throw new Error("too late; already running");return r}function Od(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function PUe(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Cne(s,0,r.time);function s(u){r.state=$V,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==$V)return l();for(d in n)if(p=n[d],p.name===r.name){if(p.state===f_)return zV(i);p.state===KV?(p.state=h_,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=h_,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(zV(function(){r.state===f_&&(r.state=KV,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=FF,r.on.call("start",e,e.__data__,r.index,r.group),r.state===FF){for(r.state=f_,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=OF,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===OF&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=h_,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function m_(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>FF&&n.state<OF,n.state=h_,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function LUe(e){return this.each(function(){m_(this,e)})}function MUe(e,t){var r,n;return function(){var a=GA(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function UUe(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=GA(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=o;break}l===u&&a.push(o)}s.tween=a}}function QUe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Od(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?MUe:UUe)(r,e,t))}function NR(e,t,r){var n=e._id;return e.each(function(){var a=GA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Od(a,n).value[t]}}function Sne(e,t){var r;return(typeof t=="number"?Ad:t instanceof Hp?DS:(r=Hp(t))?(t=r,DS):xne)(e,t)}function HUe(e){return function(){this.removeAttribute(e)}}function VUe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zUe(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function $Ue(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function KUe(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function GUe(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function qUe(e,t){var r=XN(e),n=r==="transform"?_Ue:Sne;return this.attrTween(e,typeof t=="function"?(r.local?GUe:KUe)(r,n,NR(this,"attr."+e,t)):t==null?(r.local?VUe:HUe)(r):(r.local?$Ue:zUe)(r,n,t))}function WUe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function XUe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function YUe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&XUe(e,s)),r}return a._value=t,a}function JUe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&WUe(e,s)),r}return a._value=t,a}function ZUe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=XN(e);return this.tween(r,(n.local?YUe:JUe)(n,t))}function e7e(e,t){return function(){SR(this,e).delay=+t.apply(this,arguments)}}function t7e(e,t){return t=+t,function(){SR(this,e).delay=t}}function r7e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?e7e:t7e)(t,e)):Od(this.node(),t).delay}function n7e(e,t){return function(){GA(this,e).duration=+t.apply(this,arguments)}}function a7e(e,t){return t=+t,function(){GA(this,e).duration=t}}function s7e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?n7e:a7e)(t,e)):Od(this.node(),t).duration}function i7e(e,t){if(typeof t!="function")throw new Error;return function(){GA(this,e).ease=t}}function o7e(e){var t=this._id;return arguments.length?this.each(i7e(t,e)):Od(this.node(),t).ease}function l7e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;GA(this,e).ease=r}}function c7e(e){if(typeof e!="function")throw new Error;return this.each(l7e(this._id,e))}function u7e(e){typeof e!="function"&&(e=ane(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new th(n,this._parents,this._name,this._id)}function d7e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var l=t[o],u=r[o],d=l.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new th(i,this._parents,this._name,this._id)}function A7e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function f7e(e,t,r){var n,a,s=A7e(t)?SR:GA;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function h7e(e,t){var r=this._id;return arguments.length<2?Od(this.node(),r).on.on(e):this.each(f7e(r,e,t))}function m7e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function p7e(){return this.on("end.remove",m7e(this._id))}function g7e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=bR(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],l=o.length,u=s[i]=new Array(l),d,f,h=0;h<l;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,JN(u[h],t,r,h,u,Od(d,r)));return new th(s,this._parents,t,r)}function v7e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=nne(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var l=n[o],u=l.length,d,f=0;f<u;++f)if(d=l[f]){for(var h=e.call(d,d.__data__,f,l),p,g=Od(d,r),v=0,b=h.length;v<b;++v)(p=h[v])&&JN(p,t,r,v,h,g);s.push(h),i.push(d)}return new th(s,i,t,r)}var x7e=Yw.prototype.constructor;function b7e(){return new x7e(this._groups,this._parents)}function y7e(e,t){var r,n,a;return function(){var s=yx(this,e),i=(this.style.removeProperty(e),yx(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function Nne(e){return function(){this.style.removeProperty(e)}}function w7e(e,t,r){var n,a=r+"",s;return function(){var i=yx(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function E7e(e,t,r){var n,a,s;return function(){var i=yx(this,e),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),yx(this,e))),i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o))}}function C7e(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var l=GA(this,e),u=l.on,d=l.value[s]==null?o||(o=Nne(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),l.on=n}}function _7e(e,t,r){var n=(e+="")=="transform"?CUe:Sne;return t==null?this.styleTween(e,y7e(e,n)).on("end.style."+e,Nne(e)):typeof t=="function"?this.styleTween(e,E7e(e,n,NR(this,"style."+e,t))).each(C7e(this._id,e)):this.styleTween(e,w7e(e,n,t),r).on("end.style."+e,null)}function S7e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function N7e(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&S7e(e,i,r)),n}return s._value=t,s}function k7e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,N7e(e,t,r??""))}function B7e(e){return function(){this.textContent=e}}function T7e(e){return function(){var t=e(this);this.textContent=t??""}}function I7e(e){return this.tween("text",typeof e=="function"?T7e(NR(this,"text",e)):B7e(e==null?"":e+""))}function j7e(e){return function(t){this.textContent=e.call(this,t)}}function F7e(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&j7e(a)),t}return n._value=e,n}function O7e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,F7e(e))}function D7e(){for(var e=this._name,t=this._id,r=kne(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Od(l,t);JN(l,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new th(n,this._parents,e,r)}function R7e(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};r.each(function(){var u=GA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),a===0&&s()})}var P7e=0;function th(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function kne(){return++P7e}var Nf=Yw.prototype;th.prototype={constructor:th,select:g7e,selectAll:v7e,selectChild:Nf.selectChild,selectChildren:Nf.selectChildren,filter:u7e,merge:d7e,selection:b7e,transition:D7e,call:Nf.call,nodes:Nf.nodes,node:Nf.node,size:Nf.size,empty:Nf.empty,each:Nf.each,on:h7e,attr:qUe,attrTween:ZUe,style:_7e,styleTween:k7e,text:I7e,textTween:O7e,remove:p7e,tween:QUe,delay:r7e,duration:s7e,ease:o7e,easeVarying:c7e,end:R7e,[Symbol.iterator]:Nf[Symbol.iterator]};function L7e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var M7e={time:null,delay:0,duration:250,ease:L7e};function U7e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Q7e(e){var t,r;e instanceof th?(t=e._id,e=e._name):(t=kne(),(r=M7e).time=_R(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&JN(l,e,t,u,i,r||U7e(l,t));return new th(n,this._parents,e,t)}Yw.prototype.interrupt=LUe;Yw.prototype.transition=Q7e;const vC=e=>()=>e;function H7e(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Df(e,t,r){this.k=e,this.x=t,this.y=r}Df.prototype={constructor:Df,scale:function(e){return e===1?this:new Df(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Df(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var U0=new Df(1,0,0);Df.prototype;function LT(e){e.stopImmediatePropagation()}function gb(e){e.preventDefault(),e.stopImmediatePropagation()}function V7e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function z7e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function GV(){return this.__zoom||U0}function $7e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function K7e(){return navigator.maxTouchPoints||"ontouchstart"in this}function G7e(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function q7e(){var e=V7e,t=z7e,r=G7e,n=$7e,a=K7e,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=BUe,u=WN("start","zoom","end"),d,f,h,p=500,g=150,v=0,b=10;function y(R){R.property("__zoom",GV).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",P).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(R,X,q,Z){var H=R.selection?R.selection():R;H.property("__zoom",GV),R!==H?B(R,X,q,Z):H.interrupt().each(function(){F(this,arguments).event(Z).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},y.scaleBy=function(R,X,q,Z){y.scaleTo(R,function(){var H=this.__zoom.k,V=typeof X=="function"?X.apply(this,arguments):X;return H*V},q,Z)},y.scaleTo=function(R,X,q,Z){y.transform(R,function(){var H=t.apply(this,arguments),V=this.__zoom,K=q==null?k(H):typeof q=="function"?q.apply(this,arguments):q,ne=V.invert(K),L=typeof X=="function"?X.apply(this,arguments):X;return r(S(_(V,L),K,ne),H,i)},q,Z)},y.translateBy=function(R,X,q,Z){y.transform(R,function(){return r(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof q=="function"?q.apply(this,arguments):q),t.apply(this,arguments),i)},null,Z)},y.translateTo=function(R,X,q,Z,H){y.transform(R,function(){var V=t.apply(this,arguments),K=this.__zoom,ne=Z==null?k(V):typeof Z=="function"?Z.apply(this,arguments):Z;return r(U0.translate(ne[0],ne[1]).scale(K.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof q=="function"?-q.apply(this,arguments):-q),V,i)},Z,H)};function _(R,X){return X=Math.max(s[0],Math.min(s[1],X)),X===R.k?R:new Df(X,R.x,R.y)}function S(R,X,q){var Z=X[0]-q[0]*R.k,H=X[1]-q[1]*R.k;return Z===R.x&&H===R.y?R:new Df(R.k,Z,H)}function k(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function B(R,X,q,Z){R.on("start.zoom",function(){F(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(Z).end()}).tween("zoom",function(){var H=this,V=arguments,K=F(H,V).event(Z),ne=t.apply(H,V),L=q==null?k(ne):typeof q=="function"?q.apply(H,V):q,W=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),J=H.__zoom,te=typeof X=="function"?X.apply(H,V):X,ie=l(J.invert(L).concat(W/J.k),te.invert(L).concat(W/te.k));return function(Ae){if(Ae===1)Ae=te;else{var oe=ie(Ae),ce=W/oe[2];Ae=new Df(ce,L[0]-oe[0]*ce,L[1]-oe[1]*ce)}K.zoom(null,Ae)}})}function F(R,X,q){return!q&&R.__zooming||new w(R,X)}function w(R,X){this.that=R,this.args=X,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,X),this.taps=0}w.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,X){return this.mouse&&R!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var X=Eu(this.that).datum();u.call(R,this.that,new H7e(R,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),X)}};function C(R,...X){if(!e.apply(this,arguments))return;var q=F(this,X).event(R),Z=this.__zoom,H=Math.max(s[0],Math.min(s[1],Z.k*Math.pow(2,n.apply(this,arguments)))),V=xA(R);if(q.wheel)(q.mouse[0][0]!==V[0]||q.mouse[0][1]!==V[1])&&(q.mouse[1]=Z.invert(q.mouse[0]=V)),clearTimeout(q.wheel);else{if(Z.k===H)return;q.mouse=[V,Z.invert(V)],m_(this),q.start()}gb(R),q.wheel=setTimeout(K,g),q.zoom("mouse",r(S(_(Z,H),q.mouse[0],q.mouse[1]),q.extent,i));function K(){q.wheel=null,q.end()}}function N(R,...X){if(h||!e.apply(this,arguments))return;var q=R.currentTarget,Z=F(this,X,!0).event(R),H=Eu(R.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",W,!0),V=xA(R,q),K=R.clientX,ne=R.clientY;hne(R.view),LT(R),Z.mouse=[V,this.__zoom.invert(V)],m_(this),Z.start();function L(J){if(gb(J),!Z.moved){var te=J.clientX-K,ie=J.clientY-ne;Z.moved=te*te+ie*ie>v}Z.event(J).zoom("mouse",r(S(Z.that.__zoom,Z.mouse[0]=xA(J,q),Z.mouse[1]),Z.extent,i))}function W(J){H.on("mousemove.zoom mouseup.zoom",null),mne(J.view,Z.moved),gb(J),Z.event(J).end()}}function P(R,...X){if(e.apply(this,arguments)){var q=this.__zoom,Z=xA(R.changedTouches?R.changedTouches[0]:R,this),H=q.invert(Z),V=q.k*(R.shiftKey?.5:2),K=r(S(_(q,V),Z,H),t.apply(this,X),i);gb(R),o>0?Eu(this).transition().duration(o).call(B,K,Z,R):Eu(this).call(y.transform,K,Z,R)}}function D(R,...X){if(e.apply(this,arguments)){var q=R.touches,Z=q.length,H=F(this,X,R.changedTouches.length===Z).event(R),V,K,ne,L;for(LT(R),K=0;K<Z;++K)ne=q[K],L=xA(ne,this),L=[L,this.__zoom.invert(L),ne.identifier],H.touch0?!H.touch1&&H.touch0[2]!==L[2]&&(H.touch1=L,H.taps=0):(H.touch0=L,V=!0,H.taps=1+!!d);d&&(d=clearTimeout(d)),V&&(H.taps<2&&(f=L[0],d=setTimeout(function(){d=null},p)),m_(this),H.start())}}function T(R,...X){if(this.__zooming){var q=F(this,X).event(R),Z=R.changedTouches,H=Z.length,V,K,ne,L;for(gb(R),V=0;V<H;++V)K=Z[V],ne=xA(K,this),q.touch0&&q.touch0[2]===K.identifier?q.touch0[0]=ne:q.touch1&&q.touch1[2]===K.identifier&&(q.touch1[0]=ne);if(K=q.that.__zoom,q.touch1){var W=q.touch0[0],J=q.touch0[1],te=q.touch1[0],ie=q.touch1[1],Ae=(Ae=te[0]-W[0])*Ae+(Ae=te[1]-W[1])*Ae,oe=(oe=ie[0]-J[0])*oe+(oe=ie[1]-J[1])*oe;K=_(K,Math.sqrt(Ae/oe)),ne=[(W[0]+te[0])/2,(W[1]+te[1])/2],L=[(J[0]+ie[0])/2,(J[1]+ie[1])/2]}else if(q.touch0)ne=q.touch0[0],L=q.touch0[1];else return;q.zoom("touch",r(S(K,ne,L),q.extent,i))}}function U(R,...X){if(this.__zooming){var q=F(this,X).event(R),Z=R.changedTouches,H=Z.length,V,K;for(LT(R),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),V=0;V<H;++V)K=Z[V],q.touch0&&q.touch0[2]===K.identifier?delete q.touch0:q.touch1&&q.touch1[2]===K.identifier&&delete q.touch1;if(q.touch1&&!q.touch0&&(q.touch0=q.touch1,delete q.touch1),q.touch0)q.touch0[1]=this.__zoom.invert(q.touch0[0]);else if(q.end(),q.taps===2&&(K=xA(K,this),Math.hypot(f[0]-K[0],f[1]-K[1])<b)){var ne=Eu(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return y.wheelDelta=function(R){return arguments.length?(n=typeof R=="function"?R:vC(+R),y):n},y.filter=function(R){return arguments.length?(e=typeof R=="function"?R:vC(!!R),y):e},y.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:vC(!!R),y):a},y.extent=function(R){return arguments.length?(t=typeof R=="function"?R:vC([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),y):t},y.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],y):[s[0],s[1]]},y.translateExtent=function(R){return arguments.length?(i[0][0]=+R[0][0],i[1][0]=+R[1][0],i[0][1]=+R[0][1],i[1][1]=+R[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(R){return arguments.length?(r=R,y):r},y.duration=function(R){return arguments.length?(o=+R,y):o},y.interpolate=function(R){return arguments.length?(l=R,y):l},y.on=function(){var R=u.on.apply(u,arguments);return R===u?y:R},y.clickDistance=function(R){return arguments.length?(v=(R=+R)*R,y):Math.sqrt(v)},y.tapDistance=function(R){return arguments.length?(b=+R,y):b},y}var Bne=TW();const ZN=j.createContext(null),W7e=ZN.Provider,rh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Tne=rh.error001();function ls(e,t){const r=j.useContext(ZN);if(r===null)throw new Error(Tne);return tne(r,e,t)}const Zi=()=>{const e=j.useContext(ZN);if(e===null)throw new Error(Tne);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},X7e=e=>e.userSelectionActive?"none":"all";function Ine({position:e,children:t,className:r,style:n,...a}){const s=ls(X7e),i=`${e}`.split("-");return lt.createElement("div",{className:yl(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Y7e({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:lt.createElement(Ine,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const J7e=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const f=j.useRef(null),[h,p]=j.useState({x:0,y:0,width:0,height:0}),g=yl(["react-flow__edge-textwrapper",u]);return j.useEffect(()=>{if(f.current){const v=f.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[r]),typeof r>"u"||!r?null:lt.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&lt.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),lt.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),l)};var Z7e=j.memo(J7e);const kR=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ex=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),BR=(e={x:0,y:0},t)=>({x:Ex(e.x,t[0][0],t[1][0]),y:Ex(e.y,t[0][1],t[1][1])}),qV=(e,t,r)=>e<t?Ex(Math.abs(e-t),1,50)/50:e>r?-Ex(Math.abs(e-r),1,50)/50:0,jne=(e,t)=>{const r=qV(e.x,35,t.width-35)*20,n=qV(e.y,35,t.height-35)*20;return[r,n]},Fne=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},e9e=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),TR=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),t9e=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),WV=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),DF=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},r9e=e=>ku(e.width)&&ku(e.height)&&ku(e.x)&&ku(e.y),ku=e=>!isNaN(e)&&isFinite(e),_s=Symbol.for("internals"),One=["Enter"," ","Escape"],n9e=(e,t)=>{},a9e=e=>"nativeEvent"in e;function RF(e){var a,s;const t=a9e(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Dne=e=>"clientX"in e,Q0=(e,t)=>{var s,i;const r=Dne(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},MS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Zw=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&ku(r)&&ku(n)?lt.createElement(Z7e,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);Zw.displayName="BaseEdge";function vb(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function Rne({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function Pne({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(l-e),f=Math.abs(u-t);return[l,u,d,f]}var zp;(function(e){e.Strict="strict",e.Loose="loose"})(zp||(zp={}));var lp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(lp||(lp={}));var Aw;(function(e){e.Partial="partial",e.Full="full"})(Aw||(Aw={}));var y0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(y0||(y0={}));var US;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(US||(US={}));var wr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(wr||(wr={}));function XV({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===wr.Left||e===wr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Lne({sourceX:e,sourceY:t,sourcePosition:r=wr.Bottom,targetX:n,targetY:a,targetPosition:s=wr.Top}){const[i,o]=XV({pos:r,x1:e,y1:t,x2:n,y2:a}),[l,u]=XV({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=Pne({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${e},${t} C${i},${o} ${l},${u} ${n},${a}`,d,f,h,p]}const IR=j.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=wr.Bottom,targetPosition:s=wr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})=>{const[b,y,_]=Lne({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return lt.createElement(Zw,{path:b,labelX:y,labelY:_,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})});IR.displayName="SimpleBezierEdge";const YV={[wr.Left]:{x:-1,y:0},[wr.Right]:{x:1,y:0},[wr.Top]:{x:0,y:-1},[wr.Bottom]:{x:0,y:1}},s9e=({source:e,sourcePosition:t=wr.Bottom,target:r})=>t===wr.Left||t===wr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},JV=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function i9e({source:e,sourcePosition:t=wr.Bottom,target:r,targetPosition:n=wr.Top,center:a,offset:s}){const i=YV[t],o=YV[n],l={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=s9e({source:l,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,v;const b={x:0,y:0},y={x:0,y:0},[_,S,k,B]=Rne({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??_,v=a.y??S;const w=[{x:g,y:l.y},{x:g,y:u.y}],C=[{x:l.x,y:v},{x:u.x,y:v}];i[f]===h?p=f==="x"?w:C:p=f==="x"?C:w}else{const w=[{x:l.x,y:u.y}],C=[{x:u.x,y:l.y}];if(f==="x"?p=i.x===h?C:w:p=i.y===h?w:C,t===n){const U=Math.abs(e[f]-r[f]);if(U<=s){const R=Math.min(s-1,s-U);i[f]===h?b[f]=(l[f]>e[f]?-1:1)*R:y[f]=(u[f]>r[f]?-1:1)*R}}if(t!==n){const U=f==="x"?"y":"x",R=i[f]===o[U],X=l[U]>u[U],q=l[U]<u[U];(i[f]===1&&(!R&&X||R&&q)||i[f]!==1&&(!R&&q||R&&X))&&(p=f==="x"?w:C)}const N={x:l.x+b.x,y:l.y+b.y},P={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(N.x-p[0].x),Math.abs(P.x-p[0].x)),T=Math.max(Math.abs(N.y-p[0].y),Math.abs(P.y-p[0].y));D>=T?(g=(N.x+P.x)/2,v=p[0].y):(g=p[0].x,v=(N.y+P.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,v,k,B]}function o9e(e,t,r,n){const a=Math.min(JV(e,t)/2,JV(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function PF({sourceX:e,sourceY:t,sourcePosition:r=wr.Bottom,targetX:n,targetY:a,targetPosition:s=wr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,f,h,p,g]=i9e({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((b,y,_)=>{let S="";return _>0&&_<d.length-1?S=o9e(d[_-1],y,d[_+1],i):S=`${_===0?"M":"L"}${y.x} ${y.y}`,b+=S,b},""),f,h,p,g]}const e4=j.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:f=wr.Bottom,targetPosition:h=wr.Top,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,_,S]=PF({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return lt.createElement(Zw,{path:y,labelX:_,labelY:S,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});e4.displayName="SmoothStepEdge";const jR=j.memo(e=>{var t;return lt.createElement(e4,{...e,pathOptions:j.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});jR.displayName="StepEdge";function l9e({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=Rne({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const FR=j.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,v,b]=l9e({sourceX:e,sourceY:t,targetX:r,targetY:n});return lt.createElement(Zw,{path:g,labelX:v,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});FR.displayName="StraightEdge";function xC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ZV({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case wr.Left:return[t-xC(t-n,s),r];case wr.Right:return[t+xC(n-t,s),r];case wr.Top:return[t,r-xC(r-a,s)];case wr.Bottom:return[t,r+xC(a-r,s)]}}function Mne({sourceX:e,sourceY:t,sourcePosition:r=wr.Bottom,targetX:n,targetY:a,targetPosition:s=wr.Top,curvature:i=.25}){const[o,l]=ZV({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=ZV({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=Pne({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${n},${a}`,f,h,p,g]}const QS=j.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=wr.Bottom,targetPosition:s=wr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,_,S]=Mne({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:v==null?void 0:v.curvature});return lt.createElement(Zw,{path:y,labelX:_,labelY:S,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});QS.displayName="BezierEdge";const OR=j.createContext(null),c9e=OR.Provider;OR.Consumer;const u9e=()=>j.useContext(OR),d9e=e=>"id"in e&&"source"in e&&"target"in e,A9e=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,LF=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,f9e=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),h9e=(e,t)=>{if(!e.source||!e.target)return t;let r;return d9e(e)?r={...e}:r={...e,id:A9e(e)},f9e(r,t)?t:t.concat(r)},MF=({x:e,y:t},[r,n,a],s,[i,o])=>{const l={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},Une=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Zv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},DR=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Zv(a,t).positionAbsolute;return e9e(n,TR({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return t9e(r)},Qne=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:v}=Zv(d,o),b={x:v.x,y:v.y,width:f||0,height:h||0},y=DF(l,b),_=typeof f>"u"||typeof h>"u"||f===null||h===null,S=s&&y>0,k=(f||0)*(h||0);(_||S||y>=k||d.dragging)&&u.push(d)}),u},Hne=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Vne=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),l=Math.min(i,o),u=Ex(l,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},Wm=(e,t=0)=>e.transition().duration(t);function ez(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function m9e(e,t,r,n,a,s){const{x:i,y:o}=Q0(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const v=RR(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:v});if(y){const _=a.find(S=>S.nodeId===g&&S.type===v&&S.id===b);return{handle:{id:b,type:v,nodeId:g,x:(_==null?void 0:_.x)||r.x,y:(_==null?void 0:_.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const v=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(v<=n){const b=s(g);v<=f&&(v<f?d=[{handle:g,validHandleResult:b}]:v===f&&d.push({handle:g,validHandleResult:b}),f=v)}}),!d.length)return{handle:null,validHandleResult:zne()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:v})=>p?g.type==="target":h?v.isValid:!0)||d[0]}const p9e={source:null,target:null,sourceHandle:null,targetHandle:null},zne=()=>({handleDomNode:null,isValid:!1,connection:p9e,endHandle:null});function $ne(e,t,r,n,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...zne(),handleDomNode:l};if(l){const d=RR(void 0,l),f=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),p=l.classList.contains("connectable"),g=l.classList.contains("connectableend"),v={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=v,p&&g&&(t===zp.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(v))}return u}function g9e({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[_s]){const{handleBounds:i}=s[_s];let o=[],l=[];i&&(o=ez(s,i,"source",`${t}-${r}-${n}`),l=ez(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function RR(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function MT(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function v9e(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Kne({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=Fne(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:v,panBy:b,getNodes:y,cancelConnection:_}=s();let S=0,k;const{x:B,y:F}=Q0(e),w=d==null?void 0:d.elementFromPoint(B,F),C=RR(l,w),N=h==null?void 0:h.getBoundingClientRect();if(!N||!C)return;let P,D=Q0(e,N),T=!1,U=null,R=!1,X=null;const q=g9e({nodes:y(),nodeId:r,handleId:t,handleType:C}),Z=()=>{if(!p)return;const[K,ne]=jne(D,N);b({x:K,y:ne}),S=requestAnimationFrame(Z)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:r,handleId:t,type:C},connectionEndHandle:null}),v==null||v(e,{nodeId:r,handleId:t,handleType:C});function H(K){const{transform:ne}=s();D=Q0(K,N);const{handle:L,validHandleResult:W}=m9e(K,d,MF(D,ne,!1,[1,1]),g,q,J=>$ne(J,f,r,t,a?"target":"source",o,d));if(k=L,T||(Z(),T=!0),X=W.handleDomNode,U=W.connection,R=W.isValid,i({connectionPosition:k&&R?Une({x:k.x,y:k.y},ne):D,connectionStatus:v9e(!!k,R),connectionEndHandle:W.endHandle}),!k&&!R&&!X)return MT(P);U.source!==U.target&&X&&(MT(P),P=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",R),X.classList.toggle("react-flow__handle-valid",R))}function V(K){var ne,L;(k||X)&&U&&R&&(n==null||n(U)),(L=(ne=s()).onConnectEnd)==null||L.call(ne,K),l&&(u==null||u(K)),MT(P),_(),cancelAnimationFrame(S),T=!1,R=!1,U=null,X=null,d.removeEventListener("mousemove",H),d.removeEventListener("mouseup",V),d.removeEventListener("touchmove",H),d.removeEventListener("touchend",V)}d.addEventListener("mousemove",H),d.addEventListener("mouseup",V),d.addEventListener("touchmove",H),d.addEventListener("touchend",V)}const tz=()=>!0,x9e=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),b9e=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},Gne=j.forwardRef(({type:e="source",position:t=wr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var N,P;const g=i||null,v=e==="target",b=Zi(),y=u9e(),{connectOnClick:_,noPanClassName:S}=ls(x9e,tl),{connecting:k,clickConnecting:B}=ls(b9e(y,g,e),tl);y||(P=(N=b.getState()).onError)==null||P.call(N,"010",rh.error010());const F=D=>{const{defaultEdgeOptions:T,onConnect:U,hasDefaultEdges:R}=b.getState(),X={...T,...D};if(R){const{edges:q,setEdges:Z}=b.getState();Z(h9e(X,q))}U==null||U(X),o==null||o(X)},w=D=>{if(!y)return;const T=Dne(D);a&&(T&&D.button===0||!T)&&Kne({event:D,handleId:g,nodeId:y,onConnect:F,isTarget:v,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||tz}),T?d==null||d(D):f==null||f(D)},C=D=>{const{onClickConnectStart:T,onClickConnectEnd:U,connectionClickStartHandle:R,connectionMode:X,isValidConnection:q}=b.getState();if(!y||!R&&!a)return;if(!R){T==null||T(D,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const Z=Fne(D.target),H=r||q||tz,{connection:V,isValid:K}=$ne({nodeId:y,id:g,type:e},X,R.nodeId,R.handleId||null,R.type,H,Z);K&&F(V),U==null||U(D),b.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:yl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,u,{source:!v,target:v,connectable:n,connectablestart:a,connectableend:s,connecting:B,connectionindicator:n&&(a&&!k||s&&k)}]),onMouseDown:w,onTouchStart:w,onClick:_?C:void 0,ref:p,...h},l)});Gne.displayName="Handle";var Cx=j.memo(Gne);const qne=({data:e,isConnectable:t,targetPosition:r=wr.Top,sourcePosition:n=wr.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(Cx,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,lt.createElement(Cx,{type:"source",position:n,isConnectable:t}));qne.displayName="DefaultNode";var UF=j.memo(qne);const Wne=({data:e,isConnectable:t,sourcePosition:r=wr.Bottom})=>lt.createElement(lt.Fragment,null,e==null?void 0:e.label,lt.createElement(Cx,{type:"source",position:r,isConnectable:t}));Wne.displayName="InputNode";var Xne=j.memo(Wne);const Yne=({data:e,isConnectable:t,targetPosition:r=wr.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(Cx,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);Yne.displayName="OutputNode";var Jne=j.memo(Yne);const PR=()=>null;PR.displayName="GroupNode";const y9e=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),bC=e=>e.id;function w9e(e,t){return tl(e.selectedNodes.map(bC),t.selectedNodes.map(bC))&&tl(e.selectedEdges.map(bC),t.selectedEdges.map(bC))}const Zne=j.memo(({onSelectionChange:e})=>{const t=Zi(),{selectedNodes:r,selectedEdges:n}=ls(y9e,w9e);return j.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});Zne.displayName="SelectionListener";const E9e=e=>!!e.onSelectionChange;function C9e({onSelectionChange:e}){const t=ls(E9e);return e||t?lt.createElement(Zne,{onSelectionChange:e}):null}const _9e=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function ev(e,t){j.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function wn(e,t,r){j.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const S9e=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:v,maxZoom:b,nodeExtent:y,onNodesChange:_,onEdgesChange:S,elementsSelectable:k,connectionMode:B,snapGrid:F,snapToGrid:w,translateExtent:C,connectOnClick:N,defaultEdgeOptions:P,fitView:D,fitViewOptions:T,onNodesDelete:U,onEdgesDelete:R,onNodeDrag:X,onNodeDragStart:q,onNodeDragStop:Z,onSelectionDrag:H,onSelectionDragStart:V,onSelectionDragStop:K,noPanClassName:ne,nodeOrigin:L,rfId:W,autoPanOnConnect:J,autoPanOnNodeDrag:te,onError:ie,connectionRadius:Ae,isValidConnection:oe,nodeDragThreshold:ce})=>{const{setNodes:ge,setEdges:je,setDefaultNodesAndEdges:re,setMinZoom:Se,setMaxZoom:De,setTranslateExtent:_e,setNodeExtent:he,reset:Ie}=ls(_9e,tl),He=Zi();return j.useEffect(()=>{const Xe=n==null?void 0:n.map(ye=>({...ye,...P}));return re(r,Xe),()=>{Ie()}},[]),wn("defaultEdgeOptions",P,He.setState),wn("connectionMode",B,He.setState),wn("onConnect",a,He.setState),wn("onConnectStart",s,He.setState),wn("onConnectEnd",i,He.setState),wn("onClickConnectStart",o,He.setState),wn("onClickConnectEnd",l,He.setState),wn("nodesDraggable",u,He.setState),wn("nodesConnectable",d,He.setState),wn("nodesFocusable",f,He.setState),wn("edgesFocusable",h,He.setState),wn("edgesUpdatable",p,He.setState),wn("elementsSelectable",k,He.setState),wn("elevateNodesOnSelect",g,He.setState),wn("snapToGrid",w,He.setState),wn("snapGrid",F,He.setState),wn("onNodesChange",_,He.setState),wn("onEdgesChange",S,He.setState),wn("connectOnClick",N,He.setState),wn("fitViewOnInit",D,He.setState),wn("fitViewOnInitOptions",T,He.setState),wn("onNodesDelete",U,He.setState),wn("onEdgesDelete",R,He.setState),wn("onNodeDrag",X,He.setState),wn("onNodeDragStart",q,He.setState),wn("onNodeDragStop",Z,He.setState),wn("onSelectionDrag",H,He.setState),wn("onSelectionDragStart",V,He.setState),wn("onSelectionDragStop",K,He.setState),wn("noPanClassName",ne,He.setState),wn("nodeOrigin",L,He.setState),wn("rfId",W,He.setState),wn("autoPanOnConnect",J,He.setState),wn("autoPanOnNodeDrag",te,He.setState),wn("onError",ie,He.setState),wn("connectionRadius",Ae,He.setState),wn("isValidConnection",oe,He.setState),wn("nodeDragThreshold",ce,He.setState),ev(e,ge),ev(t,je),ev(v,Se),ev(b,De),ev(C,_e),ev(y,he),null},rz={display:"none"},N9e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},eae="react-flow__node-desc",tae="react-flow__edge-desc",k9e="react-flow__aria-live",B9e=e=>e.ariaLiveMessage;function T9e({rfId:e}){const t=ls(B9e);return lt.createElement("div",{id:`${k9e}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:N9e},t)}function I9e({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${eae}-${e}`,style:rz},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${tae}-${e}`,style:rz},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(T9e,{rfId:e}))}var fw=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=j.useState(!1),a=j.useRef(!1),s=j.useRef(new Set([])),[i,o]=j.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return j.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&RF(p))return!1;const v=az(p.code,o);s.current.add(p[v]),nz(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&RF(p))return!1;const v=az(p.code,o);nz(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[v]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function nz(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function az(e,t){return t.includes(e)?"code":"key"}function rae(e,t,r,n){var o,l;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Zv(s,n);return rae(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[_s])==null?void 0:o.z)??0)>(r.z??0)?((l=s[_s])==null?void 0:l.z)??0:r.z??0},n)}function nae(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:l}=rae(n,e,{...n.position,z:((s=n[_s])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[_s].z=l,r!=null&&r[n.id]&&(n[_s].isParent=!0)}})}function UT(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const l=(ku(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,_s,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[_s])==null?void 0:p.handleBounds,z:l}}),a.set(o.id,d)}),nae(a,r,s),a}function aae(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&l&&(h||!t.initial)){const g=r().filter(b=>{var _;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(_=t.nodes)!=null&&_.length?y&&t.nodes.some(S=>S.id===b.id):y}),v=g.every(b=>b.width&&b.height);if(g.length>0&&v){const b=DR(g,f),{x:y,y:_,zoom:S}=Vne(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),k=U0.translate(y,_).scale(S);return typeof t.duration=="number"&&t.duration>0?o.transform(Wm(l,t.duration),k):o.transform(l,k),!0}}return!1}function j9e(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[_s]:n[_s],selected:r.selected})}),new Map(t)}function F9e(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function yC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();e!=null&&e.length&&(l&&n({nodeInternals:j9e(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:F9e(t,s)}),o==null||o(t))}const tv=()=>{},O9e={zoomIn:tv,zoomOut:tv,zoomTo:tv,getZoom:()=>1,setViewport:tv,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:tv,fitBounds:tv,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},D9e=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),R9e=()=>{const e=Zi(),{d3Zoom:t,d3Selection:r}=ls(D9e,tl);return j.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Wm(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Wm(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Wm(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=e.getState().transform,u=U0.translate(a.x??i,a.y??o).scale(a.zoom??l);t.transform(Wm(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>aae(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=l/2-s*d,p=U0.translate(f,h).scale(d);t.transform(Wm(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Vne(a,i,o,l,u,(s==null?void 0:s.padding)??.1),p=U0.translate(d,f).scale(h);t.transform(Wm(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),MF(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=e.getState();if(!l)return a;const{x:u,y:d}=l.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return MF(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),u=Une(a,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:O9e,[t,r])};function t4(){const e=R9e(),t=Zi(),r=j.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),n=j.useCallback(v=>t.getState().nodeInternals.get(v),[]),a=j.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(b=>({...b}))},[]),s=j.useCallback(v=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===v)},[]),i=j.useCallback(v=>{const{getNodes:b,setNodes:y,hasDefaultNodes:_,onNodesChange:S}=t.getState(),k=b(),B=typeof v=="function"?v(k):v;if(_)y(B);else if(S){const F=B.length===0?k.map(w=>({type:"remove",id:w.id})):B.map(w=>({item:w,type:"reset"}));S(F)}},[]),o=j.useCallback(v=>{const{edges:b=[],setEdges:y,hasDefaultEdges:_,onEdgesChange:S}=t.getState(),k=typeof v=="function"?v(b):v;if(_)y(k);else if(S){const B=k.length===0?b.map(F=>({type:"remove",id:F.id})):k.map(F=>({item:F,type:"reset"}));S(B)}},[]),l=j.useCallback(v=>{const b=Array.isArray(v)?v:[v],{getNodes:y,setNodes:_,hasDefaultNodes:S,onNodesChange:k}=t.getState();if(S){const F=[...y(),...b];_(F)}else if(k){const B=b.map(F=>({item:F,type:"add"}));k(B)}},[]),u=j.useCallback(v=>{const b=Array.isArray(v)?v:[v],{edges:y=[],setEdges:_,hasDefaultEdges:S,onEdgesChange:k}=t.getState();if(S)_([...y,...b]);else if(k){const B=b.map(F=>({item:F,type:"add"}));k(B)}},[]),d=j.useCallback(()=>{const{getNodes:v,edges:b=[],transform:y}=t.getState(),[_,S,k]=y;return{nodes:v().map(B=>({...B})),edges:b.map(B=>({...B})),viewport:{x:_,y:S,zoom:k}}},[]),f=j.useCallback(({nodes:v,edges:b})=>{const{nodeInternals:y,getNodes:_,edges:S,hasDefaultNodes:k,hasDefaultEdges:B,onNodesDelete:F,onEdgesDelete:w,onNodesChange:C,onEdgesChange:N}=t.getState(),P=(v||[]).map(X=>X.id),D=(b||[]).map(X=>X.id),T=_().reduce((X,q)=>{const Z=q.parentNode||q.parentId,H=!P.includes(q.id)&&Z&&X.find(K=>K.id===Z);return(typeof q.deletable=="boolean"?q.deletable:!0)&&(P.includes(q.id)||H)&&X.push(q),X},[]),U=S.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),R=U.filter(X=>D.includes(X.id));if(T||R){const X=Hne(T,U),q=[...R,...X],Z=q.reduce((H,V)=>(H.includes(V.id)||H.push(V.id),H),[]);if((B||k)&&(B&&t.setState({edges:S.filter(H=>!Z.includes(H.id))}),k&&(T.forEach(H=>{y.delete(H.id)}),t.setState({nodeInternals:new Map(y)}))),Z.length>0&&(w==null||w(q),N&&N(Z.map(H=>({id:H,type:"remove"})))),T.length>0&&(F==null||F(T),C)){const H=T.map(V=>({id:V.id,type:"remove"}));C(H)}}},[]),h=j.useCallback(v=>{const b=r9e(v),y=b?null:t.getState().nodeInternals.get(v.id);return!b&&!y?[null,null,b]:[b?v:WV(y),y,b]},[]),p=j.useCallback((v,b=!0,y)=>{const[_,S,k]=h(v);return _?(y||t.getState().getNodes()).filter(B=>{if(!k&&(B.id===S.id||!B.positionAbsolute))return!1;const F=WV(B),w=DF(F,_);return b&&w>0||w>=_.width*_.height}):[]},[]),g=j.useCallback((v,b,y=!0)=>{const[_]=h(v);if(!_)return!1;const S=DF(_,b);return y&&S>0||S>=_.width*_.height},[]);return j.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,l,u,d,f,p,g])}const P9e={actInsideInputWithModifier:!1};var L9e=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=Zi(),{deleteElements:n}=t4(),a=fw(e,P9e),s=fw(t);j.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),j.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function M9e(e){const t=Zi();j.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=kR(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",rh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const LR={position:"absolute",width:"100%",height:"100%",top:0,left:0},U9e=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,wC=e=>({x:e.x,y:e.y,zoom:e.k}),rv=(e,t)=>e.target.closest(`.${t}`),sz=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),iz=e=>{const t=e.ctrlKey&&MS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Q9e=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),H9e=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=lp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:v,zoomActivationKeyCode:b,preventScrolling:y=!0,children:_,noWheelClassName:S,noPanClassName:k})=>{const B=j.useRef(),F=Zi(),w=j.useRef(!1),C=j.useRef(!1),N=j.useRef(null),P=j.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:T,d3ZoomHandler:U,userSelectionActive:R}=ls(Q9e,tl),X=fw(b),q=j.useRef(0),Z=j.useRef(!1),H=j.useRef();return M9e(N),j.useEffect(()=>{if(N.current){const V=N.current.getBoundingClientRect(),K=q7e().scaleExtent([g,v]).translateExtent(p),ne=Eu(N.current).call(K),L=U0.translate(h.x,h.y).scale(Ex(h.zoom,g,v)),W=[[0,0],[V.width,V.height]],J=K.constrain()(L,W,p);K.transform(ne,J),K.wheelDelta(iz),F.setState({d3Zoom:K,d3Selection:ne,d3ZoomHandler:ne.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:N.current.closest(".react-flow")})}},[]),j.useEffect(()=>{T&&D&&(i&&!X&&!R?T.on("wheel.zoom",V=>{if(rv(V,S))return!1;V.preventDefault(),V.stopImmediatePropagation();const K=T.property("__zoom").k||1;if(V.ctrlKey&&s){const oe=xA(V),ce=iz(V),ge=K*Math.pow(2,ce);D.scaleTo(T,ge,oe,V);return}const ne=V.deltaMode===1?20:1;let L=l===lp.Vertical?0:V.deltaX*ne,W=l===lp.Horizontal?0:V.deltaY*ne;!MS()&&V.shiftKey&&l!==lp.Vertical&&(L=V.deltaY*ne,W=0),D.translateBy(T,-(L/K)*o,-(W/K)*o,{internal:!0});const J=wC(T.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ie,onViewportChangeEnd:Ae}=F.getState();clearTimeout(H.current),Z.current||(Z.current=!0,t==null||t(V,J),te==null||te(J)),Z.current&&(e==null||e(V,J),ie==null||ie(J),H.current=setTimeout(()=>{r==null||r(V,J),Ae==null||Ae(J),Z.current=!1},150))},{passive:!1}):typeof U<"u"&&T.on("wheel.zoom",function(V,K){if(!y&&V.type==="wheel"&&!V.ctrlKey||rv(V,S))return null;V.preventDefault(),U.call(this,V,K)},{passive:!1}))},[R,i,l,T,D,U,X,s,y,S,t,e,r]),j.useEffect(()=>{D&&D.on("start",V=>{var L,W;if(!V.sourceEvent||V.sourceEvent.internal)return null;q.current=(L=V.sourceEvent)==null?void 0:L.button;const{onViewportChangeStart:K}=F.getState(),ne=wC(V.transform);w.current=!0,P.current=ne,((W=V.sourceEvent)==null?void 0:W.type)==="mousedown"&&F.setState({paneDragging:!0}),K==null||K(ne),t==null||t(V.sourceEvent,ne)})},[D,t]),j.useEffect(()=>{D&&(R&&!w.current?D.on("zoom",null):R||D.on("zoom",V=>{var ne;const{onViewportChange:K}=F.getState();if(F.setState({transform:[V.transform.x,V.transform.y,V.transform.k]}),C.current=!!(n&&sz(f,q.current??0)),(e||K)&&!((ne=V.sourceEvent)!=null&&ne.internal)){const L=wC(V.transform);K==null||K(L),e==null||e(V.sourceEvent,L)}}))},[R,D,e,f,n]),j.useEffect(()=>{D&&D.on("end",V=>{if(!V.sourceEvent||V.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=F.getState();if(w.current=!1,F.setState({paneDragging:!1}),n&&sz(f,q.current??0)&&!C.current&&n(V.sourceEvent),C.current=!1,(r||K)&&U9e(P.current,V.transform)){const ne=wC(V.transform);P.current=ne,clearTimeout(B.current),B.current=setTimeout(()=>{K==null||K(ne),r==null||r(V.sourceEvent,ne)},i?150:0)}})},[D,i,f,r,n]),j.useEffect(()=>{D&&D.filter(V=>{const K=X||a,ne=s&&V.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&V.button===1&&V.type==="mousedown"&&(rv(V,"react-flow__node")||rv(V,"react-flow__edge")))return!0;if(!f&&!K&&!i&&!u&&!s||R||!u&&V.type==="dblclick"||rv(V,S)&&V.type==="wheel"||rv(V,k)&&(V.type!=="wheel"||i&&V.type==="wheel"&&!X)||!s&&V.ctrlKey&&V.type==="wheel"||!K&&!i&&!ne&&V.type==="wheel"||!f&&(V.type==="mousedown"||V.type==="touchstart")||Array.isArray(f)&&!f.includes(V.button)&&V.type==="mousedown")return!1;const L=Array.isArray(f)&&f.includes(V.button)||!V.button||V.button<=1;return(!V.ctrlKey||V.type==="wheel")&&L})},[R,D,a,s,i,u,f,d,X]),lt.createElement("div",{className:"react-flow__renderer",ref:N,style:LR},_)},V9e=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function z9e(){const{userSelectionActive:e,userSelectionRect:t}=ls(V9e,tl);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function oz(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function sae(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&oz(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&oz(n,i);break}case"remove":return n}return n.push(i),n},r)}function iae(e,t){return sae(e,t)}function $9e(e,t){return sae(e,t)}const h0=(e,t)=>({id:e,type:"select",selected:t});function Nv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(h0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(h0(n.id,!1))),r},[])}const QT=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},K9e=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),oae=j.memo(({isSelecting:e,selectionMode:t=Aw.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=j.useRef(null),p=Zi(),g=j.useRef(0),v=j.useRef(0),b=j.useRef(),{userSelectionActive:y,elementsSelectable:_,dragging:S}=ls(K9e,tl),k=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},B=U=>{s==null||s(U),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},F=U=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){U.preventDefault();return}i==null||i(U)},w=o?U=>o(U):void 0,C=U=>{const{resetSelectedElements:R,domNode:X}=p.getState();if(b.current=X==null?void 0:X.getBoundingClientRect(),!_||!e||U.button!==0||U.target!==h.current||!b.current)return;const{x:q,y:Z}=Q0(U,b.current);R(),p.setState({userSelectionRect:{width:0,height:0,startX:q,startY:Z,x:q,y:Z}}),n==null||n(U)},N=U=>{const{userSelectionRect:R,nodeInternals:X,edges:q,transform:Z,onNodesChange:H,onEdgesChange:V,nodeOrigin:K,getNodes:ne}=p.getState();if(!e||!b.current||!R)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const L=Q0(U,b.current),W=R.startX??0,J=R.startY??0,te={...R,x:L.x<W?L.x:W,y:L.y<J?L.y:J,width:Math.abs(L.x-W),height:Math.abs(L.y-J)},ie=ne(),Ae=Qne(X,te,Z,t===Aw.Partial,!0,K),oe=Hne(Ae,q).map(ge=>ge.id),ce=Ae.map(ge=>ge.id);if(g.current!==ce.length){g.current=ce.length;const ge=Nv(ie,ce);ge.length&&(H==null||H(ge))}if(v.current!==oe.length){v.current=oe.length;const ge=Nv(q,oe);ge.length&&(V==null||V(ge))}p.setState({userSelectionRect:te})},P=U=>{if(U.button!==0)return;const{userSelectionRect:R}=p.getState();!y&&R&&U.target===h.current&&(B==null||B(U)),p.setState({nodesSelectionActive:g.current>0}),k(),a==null||a(U)},D=U=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(U)),k()},T=_&&(e||y);return lt.createElement("div",{className:yl(["react-flow__pane",{dragging:S,selection:e}]),onClick:T?void 0:QT(B,h),onContextMenu:QT(F,h),onWheel:QT(w,h),onMouseEnter:T?void 0:l,onMouseDown:T?C:void 0,onMouseMove:T?N:u,onMouseUp:T?P:void 0,onMouseLeave:T?D:d,ref:h,style:LR},f,lt.createElement(z9e,null))});oae.displayName="Pane";function lae(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:lae(n,t):!1}function lz(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function G9e(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!lae(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function q9e(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function cae(e,t,r,n,a=[0,0],s){const i=q9e(e,e.extent||n);let o=i;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const f=r.get(l),{x:h,y:p}=Zv(f,a).positionAbsolute;o=f&&ku(h)&&ku(p)&&ku(f.width)&&ku(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",rh.error005()),o=i;else if(e.extent&&l&&e.extent!=="parent"){const f=r.get(l),{x:h,y:p}=Zv(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(l){const f=r.get(l);u=Zv(f,a).positionAbsolute}const d=o&&o!=="parent"?BR(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function HT({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const cz=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...kR(l)}})};function xb(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function QF({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=t.getState(),u=o.get(e);if(!u){l==null||l("012",rh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function W9e(){const e=Zi();return j.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function VT(e){return(t,r,n)=>e==null?void 0:e(t,n)}function uae({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Zi(),[l,u]=j.useState(!1),d=j.useRef([]),f=j.useRef({x:null,y:null}),h=j.useRef(0),p=j.useRef(null),g=j.useRef({x:0,y:0}),v=j.useRef(null),b=j.useRef(!1),y=j.useRef(!1),_=j.useRef(!1),S=W9e();return j.useEffect(()=>{if(e!=null&&e.current){const k=Eu(e.current),B=({x:C,y:N})=>{const{nodeInternals:P,onNodeDrag:D,onSelectionDrag:T,updateNodePositions:U,nodeExtent:R,snapGrid:X,snapToGrid:q,nodeOrigin:Z,onError:H}=o.getState();f.current={x:C,y:N};let V=!1,K={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&R){const L=DR(d.current,Z);K=TR(L)}if(d.current=d.current.map(L=>{const W={x:C-L.distance.x,y:N-L.distance.y};q&&(W.x=X[0]*Math.round(W.x/X[0]),W.y=X[1]*Math.round(W.y/X[1]));const J=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];d.current.length>1&&R&&!L.extent&&(J[0][0]=L.positionAbsolute.x-K.x+R[0][0],J[1][0]=L.positionAbsolute.x+(L.width??0)-K.x2+R[1][0],J[0][1]=L.positionAbsolute.y-K.y+R[0][1],J[1][1]=L.positionAbsolute.y+(L.height??0)-K.y2+R[1][1]);const te=cae(L,W,P,J,Z,H);return V=V||L.position.x!==te.position.x||L.position.y!==te.position.y,L.position=te.position,L.positionAbsolute=te.positionAbsolute,L}),!V)return;U(d.current,!0,!0),u(!0);const ne=a?D:VT(T);if(ne&&v.current){const[L,W]=HT({nodeId:a,dragItems:d.current,nodeInternals:P});ne(v.current,L,W)}},F=()=>{if(!p.current)return;const[C,N]=jne(g.current,p.current);if(C!==0||N!==0){const{transform:P,panBy:D}=o.getState();f.current.x=(f.current.x??0)-C/P[2],f.current.y=(f.current.y??0)-N/P[2],D({x:C,y:N})&&B(f.current)}h.current=requestAnimationFrame(F)},w=C=>{var Z;const{nodeInternals:N,multiSelectionActive:P,nodesDraggable:D,unselectNodesAndEdges:T,onNodeDragStart:U,onSelectionDragStart:R}=o.getState();y.current=!0;const X=a?U:VT(R);(!i||!s)&&!P&&a&&((Z=N.get(a))!=null&&Z.selected||T()),a&&s&&i&&QF({id:a,store:o,nodeRef:e});const q=S(C);if(f.current=q,d.current=G9e(N,D,q,a),X&&d.current){const[H,V]=HT({nodeId:a,dragItems:d.current,nodeInternals:N});X(C.sourceEvent,H,V)}};if(t)k.on(".drag",null);else{const C=ZMe().on("start",N=>{const{domNode:P,nodeDragThreshold:D}=o.getState();D===0&&w(N),_.current=!1;const T=S(N);f.current=T,p.current=(P==null?void 0:P.getBoundingClientRect())||null,g.current=Q0(N.sourceEvent,p.current)}).on("drag",N=>{var U,R;const P=S(N),{autoPanOnNodeDrag:D,nodeDragThreshold:T}=o.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(_.current=!0),!_.current){if(!b.current&&y.current&&D&&(b.current=!0,F()),!y.current){const X=P.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),q=P.ySnapped-(((R=f==null?void 0:f.current)==null?void 0:R.y)??0);Math.sqrt(X*X+q*q)>T&&w(N)}(f.current.x!==P.xSnapped||f.current.y!==P.ySnapped)&&d.current&&y.current&&(v.current=N.sourceEvent,g.current=Q0(N.sourceEvent,p.current),B(P))}}).on("end",N=>{if(!(!y.current||_.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:P,nodeInternals:D,onNodeDragStop:T,onSelectionDragStop:U}=o.getState(),R=a?T:VT(U);if(P(d.current,!1,!1),R){const[X,q]=HT({nodeId:a,dragItems:d.current,nodeInternals:D});R(N.sourceEvent,X,q)}}}).filter(N=>{const P=N.target;return!N.button&&(!r||!lz(P,`.${r}`,e))&&(!n||lz(P,n,e))});return k.call(C),()=>{k.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,S]),l}function dae(){const e=Zi();return j.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(_=>_.selected&&(_.draggable||d&&typeof _.draggable>"u")),h=o?l[0]:5,p=o?l[1]:5,g=r.isShiftPressed?4:1,v=r.x*h*g,b=r.y*p*g,y=f.map(_=>{if(_.positionAbsolute){const S={x:_.positionAbsolute.x+v,y:_.positionAbsolute.y+b};o&&(S.x=l[0]*Math.round(S.x/l[0]),S.y=l[1]*Math.round(S.y/l[1]));const{positionAbsolute:k,position:B}=cae(_,S,n,a,void 0,u);_.position=B,_.positionAbsolute=k}return _});s(y,!0,!1)},[])}const ex={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var bb=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:v,style:b,className:y,isDraggable:_,isSelectable:S,isConnectable:k,isFocusable:B,selectNodesOnDrag:F,sourcePosition:w,targetPosition:C,hidden:N,resizeObserver:P,dragHandle:D,zIndex:T,isParent:U,noDragClassName:R,noPanClassName:X,initialized:q,disableKeyboardA11y:Z,ariaLabel:H,rfId:V,hasHandleBounds:K})=>{const ne=Zi(),L=j.useRef(null),W=j.useRef(null),J=j.useRef(w),te=j.useRef(C),ie=j.useRef(n),Ae=S||_||d||f||h||p,oe=dae(),ce=xb(r,ne.getState,f),ge=xb(r,ne.getState,h),je=xb(r,ne.getState,p),re=xb(r,ne.getState,g),Se=xb(r,ne.getState,v),De=Ie=>{const{nodeDragThreshold:He}=ne.getState();if(S&&(!F||!_||He>0)&&QF({id:r,store:ne,nodeRef:L}),d){const Xe=ne.getState().nodeInternals.get(r);Xe&&d(Ie,{...Xe})}},_e=Ie=>{if(!RF(Ie)&&!Z)if(One.includes(Ie.key)&&S){const He=Ie.key==="Escape";QF({id:r,store:ne,unselect:He,nodeRef:L})}else _&&u&&Object.prototype.hasOwnProperty.call(ex,Ie.key)&&(ne.setState({ariaLiveMessage:`Moved selected node ${Ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:ex[Ie.key].x,y:ex[Ie.key].y,isShiftPressed:Ie.shiftKey}))};j.useEffect(()=>()=>{W.current&&(P==null||P.unobserve(W.current),W.current=null)},[]),j.useEffect(()=>{if(L.current&&!N){const Ie=L.current;(!q||!K||W.current!==Ie)&&(W.current&&(P==null||P.unobserve(W.current)),P==null||P.observe(Ie),W.current=Ie)}},[N,q,K]),j.useEffect(()=>{const Ie=ie.current!==n,He=J.current!==w,Xe=te.current!==C;L.current&&(Ie||He||Xe)&&(Ie&&(ie.current=n),He&&(J.current=w),Xe&&(te.current=C),ne.getState().updateNodeDimensions([{id:r,nodeElement:L.current,forceUpdate:!0}]))},[r,n,w,C]);const he=uae({nodeRef:L,disabled:N||!_,noDragClassName:R,handleSelector:D,nodeId:r,isSelectable:S,selectNodesOnDrag:F});return N?null:lt.createElement("div",{className:yl(["react-flow__node",`react-flow__node-${n}`,{[X]:_},y,{selected:u,selectable:S,parent:U,dragging:he}]),ref:L,style:{zIndex:T,transform:`translate(${o}px,${l}px)`,pointerEvents:Ae?"all":"none",visibility:q?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:ge,onMouseLeave:je,onContextMenu:re,onClick:De,onDoubleClick:Se,onKeyDown:B?_e:void 0,tabIndex:B?0:void 0,role:B?"button":void 0,"aria-describedby":Z?void 0:`${eae}-${V}`,"aria-label":H},lt.createElement(c9e,{value:r},lt.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:k,sourcePosition:w,targetPosition:C,dragging:he,dragHandle:D,zIndex:T})))};return t.displayName="NodeWrapper",j.memo(t)};const X9e=e=>{const t=e.getNodes().filter(r=>r.selected);return{...DR(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Y9e({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Zi(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:u}=ls(X9e,tl),d=dae(),f=j.useRef(null);if(j.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),uae({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const v=n.getState().getNodes().filter(b=>b.selected);e(g,v)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(ex,g.key)&&d({x:ex[g.key].x,y:ex[g.key].y,isShiftPressed:g.shiftKey})};return lt.createElement("div",{className:yl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},lt.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var J9e=j.memo(Y9e);const Z9e=e=>e.nodesSelectionActive,Aae=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:_,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:B,panOnScroll:F,panOnScrollSpeed:w,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:P,defaultViewport:D,translateExtent:T,minZoom:U,maxZoom:R,preventScrolling:X,onSelectionContextMenu:q,noWheelClassName:Z,noPanClassName:H,disableKeyboardA11y:V})=>{const K=ls(Z9e),ne=fw(f),L=fw(y),W=L||P,J=L||F,te=ne||h&&W!==!0;return L9e({deleteKeyCode:o,multiSelectionKeyCode:b}),lt.createElement(H9e,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:B,panOnScroll:J,panOnScrollSpeed:w,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:!ne&&W,defaultViewport:D,translateExtent:T,minZoom:U,maxZoom:R,zoomActivationKeyCode:_,preventScrolling:X,noWheelClassName:Z,noPanClassName:H},lt.createElement(oae,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:W,isSelecting:!!te,selectionMode:p},e,K&&lt.createElement(J9e,{onSelectionContextMenu:q,noPanClassName:H,disableKeyboardA11y:V})))};Aae.displayName="FlowRenderer";var eQe=j.memo(Aae);function tQe(e){return ls(j.useCallback(r=>e?Qne(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function rQe(e){const t={input:bb(e.input||Xne),default:bb(e.default||UF),output:bb(e.output||Jne),group:bb(e.group||PR)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=bb(e[s]||UF),a),r);return{...t,...n}}const nQe=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},aQe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),fae=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=ls(aQe,tl),o=tQe(e.onlyRenderVisibleElements),l=j.useRef(),u=j.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return l.current=d,d},[]);return j.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:LR},o.map(d=>{var B,F,w;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",rh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),v=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?BR(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,_=(y==null?void 0:y.x)??0,S=(y==null?void 0:y.y)??0,k=nQe({x:_,y:S,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return lt.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||wr.Bottom,targetPosition:d.targetPosition||wr.Top,hidden:d.hidden,xPos:_,yPos:S,xPosOrigin:k.x,yPosOrigin:k.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:v,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((B=d[_s])==null?void 0:B.z)??0,isParent:!!((F=d[_s])!=null&&F.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((w=d[_s])!=null&&w.handleBounds)})}))};fae.displayName="NodeRenderer";var sQe=j.memo(fae);const iQe=(e,t,r)=>r===wr.Left?e-t:r===wr.Right?e+t:e,oQe=(e,t,r)=>r===wr.Top?e-t:r===wr.Bottom?e+t:e,uz="react-flow__edgeupdater",dz=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:yl([uz,`${uz}-${o}`]),cx:iQe(t,n,e),cy:oQe(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),lQe=()=>!0;var nv=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:b,source:y,target:_,sourceX:S,sourceY:k,targetX:B,targetY:F,sourcePosition:w,targetPosition:C,elementsSelectable:N,hidden:P,sourceHandleId:D,targetHandleId:T,onContextMenu:U,onMouseEnter:R,onMouseMove:X,onMouseLeave:q,reconnectRadius:Z,onReconnect:H,onReconnectStart:V,onReconnectEnd:K,markerEnd:ne,markerStart:L,rfId:W,ariaLabel:J,isFocusable:te,isReconnectable:ie,pathOptions:Ae,interactionWidth:oe,disableKeyboardA11y:ce})=>{const ge=j.useRef(null),[je,re]=j.useState(!1),[Se,De]=j.useState(!1),_e=Zi(),he=j.useMemo(()=>`url('#${LF(L,W)}')`,[L,W]),Ie=j.useMemo(()=>`url('#${LF(ne,W)}')`,[ne,W]);if(P)return null;const He=bt=>{var Fn;const{edges:Nr,addSelectedEdges:rr,unselectNodesAndEdges:nn,multiSelectionActive:Cr}=_e.getState(),Vr=Nr.find(jr=>jr.id===r);Vr&&(N&&(_e.setState({nodesSelectionActive:!1}),Vr.selected&&Cr?(nn({nodes:[],edges:[Vr]}),(Fn=ge.current)==null||Fn.blur()):rr([r])),i&&i(bt,Vr))},Xe=vb(r,_e.getState,o),ye=vb(r,_e.getState,U),Oe=vb(r,_e.getState,R),Pe=vb(r,_e.getState,X),qe=vb(r,_e.getState,q),Ze=(bt,Nr)=>{if(bt.button!==0)return;const{edges:rr,isValidConnection:nn}=_e.getState(),Cr=Nr?_:y,Vr=(Nr?T:D)||null,Fn=Nr?"target":"source",jr=nn||lQe,vt=Nr,pt=rr.find(dt=>dt.id===r);De(!0),V==null||V(bt,pt,Fn);const Je=dt=>{De(!1),K==null||K(dt,pt,Fn)};Kne({event:bt,handleId:Vr,nodeId:Cr,onConnect:dt=>H==null?void 0:H(pt,dt),isTarget:vt,getState:_e.getState,setState:_e.setState,isValidConnection:jr,edgeUpdaterType:Fn,onReconnectEnd:Je})},ot=bt=>Ze(bt,!0),mt=bt=>Ze(bt,!1),Bt=()=>re(!0),Lt=()=>re(!1),Ot=!N&&!i,Qt=bt=>{var Nr;if(!ce&&One.includes(bt.key)&&N){const{unselectNodesAndEdges:rr,addSelectedEdges:nn,edges:Cr}=_e.getState();bt.key==="Escape"?((Nr=ge.current)==null||Nr.blur(),rr({edges:[Cr.find(Fn=>Fn.id===r)]})):nn([r])}};return lt.createElement("g",{className:yl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:u,inactive:Ot,updating:je}]),onClick:He,onDoubleClick:Xe,onContextMenu:ye,onMouseEnter:Oe,onMouseMove:Pe,onMouseLeave:qe,onKeyDown:te?Qt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":J===null?void 0:J||`Edge from ${y} to ${_}`,"aria-describedby":te?`${tae}-${W}`:void 0,ref:ge},!Se&&lt.createElement(e,{id:r,source:y,target:_,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,data:s,style:b,sourceX:S,sourceY:k,targetX:B,targetY:F,sourcePosition:w,targetPosition:C,sourceHandleId:D,targetHandleId:T,markerStart:he,markerEnd:Ie,pathOptions:Ae,interactionWidth:oe}),ie&&lt.createElement(lt.Fragment,null,(ie==="source"||ie===!0)&&lt.createElement(dz,{position:w,centerX:S,centerY:k,radius:Z,onMouseDown:ot,onMouseEnter:Bt,onMouseOut:Lt,type:"source"}),(ie==="target"||ie===!0)&&lt.createElement(dz,{position:C,centerX:B,centerY:F,radius:Z,onMouseDown:mt,onMouseEnter:Bt,onMouseOut:Lt,type:"target"})))};return t.displayName="EdgeWrapper",j.memo(t)};function cQe(e){const t={default:nv(e.default||QS),straight:nv(e.bezier||FR),step:nv(e.step||jR),smoothstep:nv(e.step||e4),simplebezier:nv(e.simplebezier||IR)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=nv(e[s]||QS),a),r);return{...t,...n}}function Az(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case wr.Top:return{x:n+s/2,y:a};case wr.Right:return{x:n+s,y:a+i/2};case wr.Bottom:return{x:n+s/2,y:a+i};case wr.Left:return{x:n,y:a+i/2}}}function fz(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const uQe=(e,t,r,n,a,s)=>{const i=Az(r,e,t),o=Az(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function dQe({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=TR({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function hz(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[_s])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const AQe=[{level:0,isMaxLevel:!0,edges:[]}];function fQe(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const l=ku(o.zIndex);let u=l?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),v=Math.max(((d=p==null?void 0:p[_s])==null?void 0:d.z)||0,((f=h==null?void 0:h[_s])==null?void 0:f.z)||0,1e3);u=(l?o.zIndex:0)+(g?v:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return s.length===0?AQe:s}function hQe(e,t,r){const n=ls(j.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&dQe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return fQe(n,t,r)}const mQe=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),pQe=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),mz={[US.Arrow]:mQe,[US.ArrowClosed]:pQe};function gQe(e){const t=Zi();return j.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(mz,e)?mz[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",rh.error009(e)),null)},[e])}const vQe=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=gQe(t);return l?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},lt.createElement(l,{color:r,strokeWidth:i})):null},xQe=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=LF(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},hae=({defaultColor:e,rfId:t})=>{const r=ls(j.useCallback(xQe({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return lt.createElement("defs",null,r.map(n=>lt.createElement(vQe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};hae.displayName="MarkerDefinitions";var bQe=j.memo(hae);const yQe=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),mae=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:_,edgesUpdatable:S,elementsSelectable:k,width:B,height:F,connectionMode:w,nodeInternals:C,onError:N}=ls(yQe,tl),P=hQe(t,C,r);return B?lt.createElement(lt.Fragment,null,P.map(({level:D,edges:T,isMaxLevel:U})=>lt.createElement("svg",{key:D,style:{zIndex:D},width:B,height:F,className:"react-flow__edges react-flow__container"},U&&lt.createElement(bQe,{defaultColor:e,rfId:n}),lt.createElement("g",null,T.map(R=>{const[X,q,Z]=hz(C.get(R.source)),[H,V,K]=hz(C.get(R.target));if(!Z||!K)return null;let ne=R.type||"default";a[ne]||(N==null||N("011",rh.error011(ne)),ne="default");const L=a[ne]||a.default,W=w===zp.Strict?V.target:(V.target??[]).concat(V.source??[]),J=fz(q.source,R.sourceHandle),te=fz(W,R.targetHandle),ie=(J==null?void 0:J.position)||wr.Bottom,Ae=(te==null?void 0:te.position)||wr.Top,oe=!!(R.focusable||_&&typeof R.focusable>"u"),ce=R.reconnectable||R.updatable,ge=typeof h<"u"&&(ce||S&&typeof ce>"u");if(!J||!te)return N==null||N("008",rh.error008(J,R)),null;const{sourceX:je,sourceY:re,targetX:Se,targetY:De}=uQe(X,J,ie,H,te,Ae);return lt.createElement(L,{key:R.id,id:R.id,className:yl([R.className,s]),type:ne,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:je,sourceY:re,targetX:Se,targetY:De,sourcePosition:ie,targetPosition:Ae,elementsSelectable:k,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,rfId:n,ariaLabel:R.ariaLabel,isFocusable:oe,isReconnectable:ge,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:y})})))),b):null};mae.displayName="EdgeRenderer";var wQe=j.memo(mae);const EQe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function CQe({children:e}){const t=ls(EQe);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function _Qe(e){const t=t4(),r=j.useRef(!1);j.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const SQe={[wr.Left]:wr.Right,[wr.Right]:wr.Left,[wr.Top]:wr.Bottom,[wr.Bottom]:wr.Top},pae=({nodeId:e,handleType:t,style:r,type:n=y0.Bezier,CustomComponent:a,connectionStatus:s})=>{var F,w,C;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=ls(j.useCallback(N=>({fromNode:N.nodeInternals.get(e),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[e]),tl),f=(F=i==null?void 0:i[_s])==null?void 0:F.handleBounds;let h=f==null?void 0:f[t];if(d===zp.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(N=>N.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,v=p?p.y+p.height/2:i.height??0,b=(((w=i.positionAbsolute)==null?void 0:w.x)??0)+g,y=(((C=i.positionAbsolute)==null?void 0:C.y)??0)+v,_=p==null?void 0:p.position,S=_?SQe[_]:null;if(!_||!S)return null;if(a)return lt.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:l,toY:u,fromPosition:_,toPosition:S,connectionStatus:s});let k="";const B={sourceX:b,sourceY:y,sourcePosition:_,targetX:l,targetY:u,targetPosition:S};return n===y0.Bezier?[k]=Mne(B):n===y0.Step?[k]=PF({...B,borderRadius:0}):n===y0.SmoothStep?[k]=PF(B):n===y0.SimpleBezier?[k]=Lne(B):k=`M${b},${y} ${l},${u}`,lt.createElement("path",{d:k,fill:"none",className:"react-flow__connection-path",style:r})};pae.displayName="ConnectionLine";const NQe=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function kQe({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:u}=ls(NQe,tl);return!(a&&s&&o&&i)?null:lt.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:yl(["react-flow__connection",u])},lt.createElement(pae,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function pz(e,t){return j.useRef(null),Zi(),j.useMemo(()=>t(e),[e])}const gae=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:_,connectionLineComponent:S,connectionLineContainerStyle:k,selectionKeyCode:B,selectionOnDrag:F,selectionMode:w,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:P,deleteKeyCode:D,onlyRenderVisibleElements:T,elementsSelectable:U,selectNodesOnDrag:R,defaultViewport:X,translateExtent:q,minZoom:Z,maxZoom:H,preventScrolling:V,defaultMarkerColor:K,zoomOnScroll:ne,zoomOnPinch:L,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:te,zoomOnDoubleClick:ie,panOnDrag:Ae,onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:ge,onPaneMouseLeave:je,onPaneScroll:re,onPaneContextMenu:Se,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:Ie,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:Ze,elevateEdgesOnSelect:ot,disableKeyboardA11y:mt,nodeOrigin:Bt,nodeExtent:Lt,rfId:Ot})=>{const Qt=pz(e,rQe),bt=pz(t,cQe);return _Qe(s),lt.createElement(eQe,{onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:ge,onPaneMouseLeave:je,onPaneContextMenu:Se,onPaneScroll:re,deleteKeyCode:D,selectionKeyCode:B,selectionOnDrag:F,selectionMode:w,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:P,elementsSelectable:U,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ne,zoomOnPinch:L,zoomOnDoubleClick:ie,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:te,panOnDrag:Ae,defaultViewport:X,translateExtent:q,minZoom:Z,maxZoom:H,onSelectionContextMenu:g,preventScrolling:V,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:Ze,disableKeyboardA11y:mt},lt.createElement(CQe,null,lt.createElement(wQe,{edgeTypes:bt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:T,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:Ie,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,defaultMarkerColor:K,noPanClassName:Ze,elevateEdgesOnSelect:!!ot,disableKeyboardA11y:mt,rfId:Ot},lt.createElement(kQe,{style:_,type:y,component:S,containerStyle:k})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(sQe,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:R,onlyRenderVisibleElements:T,noPanClassName:Ze,noDragClassName:Pe,disableKeyboardA11y:mt,nodeOrigin:Bt,nodeExtent:Lt,rfId:Ot})))};gae.displayName="GraphView";var BQe=j.memo(gae);const HF=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],i0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:HF,nodeExtent:HF,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zp.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:n9e,isValidConnection:void 0},TQe=()=>d8e((e,t)=>({...i0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:UT(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?UT(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=t(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((v,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[_s]:{...y[_s],handleBounds:void 0}});else if(y){const _=kR(b.nodeElement);!!(_.width&&_.height&&(y.width!==_.width||y.height!==_.height||b.forceUpdate))&&(a.set(y.id,{...y,[_s]:{...y[_s],handleBounds:{source:cz(".source",b.nodeElement,h,u),target:cz(".target",b.nodeElement,h,u)}},..._}),v.push({id:y.id,type:"dimensions",dimensions:_}))}return v},[]);nae(a,u);const g=i||s&&!i&&aae(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=t();if(r!=null&&r.length){if(s){const u=iae(r,o()),d=UT(u,a,i,l);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>h0(l,!0)):(i=Nv(s(),r),o=Nv(a,[])),yC({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>h0(l,!0)):(i=Nv(a,r),o=Nv(s(),[])),yC({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,l=i.map(d=>(d.selected=!1,h0(d.id,!1))),u=o.map(d=>h0(d.id,!1));yC({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>h0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>h0(o.id,!1));yC({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=BR(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=U0.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:i0.connectionNodeId,connectionHandleId:i0.connectionHandleId,connectionHandleType:i0.connectionHandleType,connectionStatus:i0.connectionStatus,connectionStartHandle:i0.connectionStartHandle,connectionEndHandle:i0.connectionEndHandle}),reset:()=>e({...i0})}),Object.is),MR=({children:e})=>{const t=j.useRef(null);return t.current||(t.current=TQe()),lt.createElement(W7e,{value:t.current},e)};MR.displayName="ReactFlowProvider";const vae=({children:e})=>j.useContext(ZN)?lt.createElement(lt.Fragment,null,e):lt.createElement(MR,null,e);vae.displayName="ReactFlowWrapper";const IQe={input:Xne,default:UF,output:Jne,group:PR},jQe={default:QS,straight:FR,step:jR,smoothstep:e4,simplebezier:IR},FQe=[0,0],OQe=[15,15],DQe={x:0,y:0,zoom:1},RQe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},xae=j.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=IQe,edgeTypes:i=jQe,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:B,onNodeDoubleClick:F,onNodeDragStart:w,onNodeDrag:C,onNodeDragStop:N,onNodesDelete:P,onEdgesDelete:D,onSelectionChange:T,onSelectionDragStart:U,onSelectionDrag:R,onSelectionDragStop:X,onSelectionContextMenu:q,onSelectionStart:Z,onSelectionEnd:H,connectionMode:V=zp.Strict,connectionLineType:K=y0.Bezier,connectionLineStyle:ne,connectionLineComponent:L,connectionLineContainerStyle:W,deleteKeyCode:J="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ie=!1,selectionMode:Ae=Aw.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ce=MS()?"Meta":"Control",zoomActivationKeyCode:ge=MS()?"Meta":"Control",snapToGrid:je=!1,snapGrid:re=OQe,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:De=!0,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:Ie,nodeOrigin:He=FQe,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,defaultViewport:Pe=DQe,minZoom:qe=.5,maxZoom:Ze=2,translateExtent:ot=HF,preventScrolling:mt=!0,nodeExtent:Bt,defaultMarkerColor:Lt="#b1b1b7",zoomOnScroll:Ot=!0,zoomOnPinch:Qt=!0,panOnScroll:bt=!1,panOnScrollSpeed:Nr=.5,panOnScrollMode:rr=lp.Free,zoomOnDoubleClick:nn=!0,panOnDrag:Cr=!0,onPaneClick:Vr,onPaneMouseEnter:Fn,onPaneMouseMove:jr,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,children:gt,onEdgeContextMenu:dt,onEdgeDoubleClick:Dt,onEdgeMouseEnter:zt,onEdgeMouseMove:Pr,onEdgeMouseLeave:Xr,onEdgeUpdate:gn,onEdgeUpdateStart:vn,onEdgeUpdateEnd:$t,onReconnect:tn,onReconnectStart:en,onReconnectEnd:cr,reconnectRadius:Yr=10,edgeUpdaterRadius:ta=10,onNodesChange:fe,onEdgesChange:Be,noDragClassName:Ee="nodrag",noWheelClassName:Ce="nowheel",noPanClassName:Ne="nopan",fitView:Te=!1,fitViewOptions:Ye,connectOnClick:ut=!0,attributionPosition:$e,proOptions:tt,defaultEdgeOptions:at,elevateNodesOnSelect:Tt=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Yt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Kt=!0,connectionRadius:_r=20,isValidConnection:an,onError:sn,style:dn,id:ds,nodeDragThreshold:bo,...As},Zs)=>{const Fs=ds||"1";return lt.createElement("div",{...As,style:{...dn,...RQe},ref:Zs,className:yl(["react-flow",a]),"data-testid":"rf__wrapper",id:ds},lt.createElement(vae,null,lt.createElement(BQe,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:B,onNodeDoubleClick:F,nodeTypes:s,edgeTypes:i,connectionLineType:K,connectionLineStyle:ne,connectionLineComponent:L,connectionLineContainerStyle:W,selectionKeyCode:te,selectionOnDrag:ie,selectionMode:Ae,deleteKeyCode:J,multiSelectionKeyCode:ce,panActivationKeyCode:oe,zoomActivationKeyCode:ge,onlyRenderVisibleElements:Se,selectNodesOnDrag:De,defaultViewport:Pe,translateExtent:ot,minZoom:qe,maxZoom:Ze,preventScrolling:mt,zoomOnScroll:Ot,zoomOnPinch:Qt,zoomOnDoubleClick:nn,panOnScroll:bt,panOnScrollSpeed:Nr,panOnScrollMode:rr,panOnDrag:Cr,onPaneClick:Vr,onPaneMouseEnter:Fn,onPaneMouseMove:jr,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,onSelectionContextMenu:q,onSelectionStart:Z,onSelectionEnd:H,onEdgeContextMenu:dt,onEdgeDoubleClick:Dt,onEdgeMouseEnter:zt,onEdgeMouseMove:Pr,onEdgeMouseLeave:Xr,onReconnect:tn??gn,onReconnectStart:en??vn,onReconnectEnd:cr??$t,reconnectRadius:Yr??ta,defaultMarkerColor:Lt,noDragClassName:Ee,noWheelClassName:Ce,noPanClassName:Ne,elevateEdgesOnSelect:Vt,rfId:Fs,disableKeyboardA11y:Yt,nodeOrigin:He,nodeExtent:Bt}),lt.createElement(S9e,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:Ie,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,elevateNodesOnSelect:Tt,minZoom:qe,maxZoom:Ze,nodeExtent:Bt,onNodesChange:fe,onEdgesChange:Be,snapToGrid:je,snapGrid:re,connectionMode:V,translateExtent:ot,connectOnClick:ut,defaultEdgeOptions:at,fitView:Te,fitViewOptions:Ye,onNodesDelete:P,onEdgesDelete:D,onNodeDragStart:w,onNodeDrag:C,onNodeDragStop:N,onSelectionDrag:R,onSelectionDragStart:U,onSelectionDragStop:X,noPanClassName:Ne,nodeOrigin:He,rfId:Fs,autoPanOnConnect:Ht,autoPanOnNodeDrag:Kt,onError:sn,connectionRadius:_r,isValidConnection:an,nodeDragThreshold:bo}),lt.createElement(C9e,{onSelectionChange:T}),gt,lt.createElement(Y7e,{proOptions:tt,position:$e}),lt.createElement(I9e,{rfId:Fs,disableKeyboardA11y:Yt})))});xae.displayName="ReactFlow";function bae(e){return t=>{const[r,n]=j.useState(t),a=j.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const PQe=bae(iae),LQe=bae($9e);function MQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function UQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function QQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function HQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function VQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Zb=({children:e,className:t,...r})=>lt.createElement("button",{type:"button",className:yl(["react-flow__controls-button",t]),...r},e);Zb.displayName="ControlButton";const zQe=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),yae=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:f="bottom-left"})=>{const h=Zi(),[p,g]=j.useState(!1),{isInteractive:v,minZoomReached:b,maxZoomReached:y}=ls(zQe,tl),{zoomIn:_,zoomOut:S,fitView:k}=t4();if(j.useEffect(()=>{g(!0)},[]),!p)return null;const B=()=>{_(),s==null||s()},F=()=>{S(),i==null||i()},w=()=>{k(a),o==null||o()},C=()=>{h.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),l==null||l(!v)};return lt.createElement(Ine,{className:yl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(Zb,{onClick:B,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},lt.createElement(MQe,null)),lt.createElement(Zb,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},lt.createElement(UQe,null))),r&&lt.createElement(Zb,{className:"react-flow__controls-fitview",onClick:w,title:"fit view","aria-label":"fit view"},lt.createElement(QQe,null)),n&&lt.createElement(Zb,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},v?lt.createElement(VQe,null):lt.createElement(HQe,null)),d)};yae.displayName="Controls";var $Qe=j.memo(yae),_d;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(_d||(_d={}));function KQe({color:e,dimensions:t,lineWidth:r}){return lt.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function GQe({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const qQe={[_d.Dots]:"#91919a",[_d.Lines]:"#eee",[_d.Cross]:"#e2e2e2"},WQe={[_d.Dots]:1,[_d.Lines]:1,[_d.Cross]:6},XQe=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function wae({id:e,variant:t=_d.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const u=j.useRef(null),{transform:d,patternId:f}=ls(XQe,tl),h=i||qQe[t],p=n||WQe[t],g=t===_d.Dots,v=t===_d.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],_=p*d[2],S=v?[_,_]:y,k=g?[_/s,_/s]:[S[0]/s,S[1]/s];return lt.createElement("svg",{className:yl(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},lt.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},g?lt.createElement(GQe,{color:h,radius:_/s}):lt.createElement(KQe,{dimensions:S,color:h,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}wae.displayName="Background";var YQe=j.memo(wae);function JQe(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const ZQe=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function H0(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let av=null;function Eae(e={}){return av||(e.includeStyleProperties?(av=e.includeStyleProperties,av):(av=H0(window.getComputedStyle(document.documentElement)),av))}function HS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function eHe(e){const t=HS(e,"border-left-width"),r=HS(e,"border-right-width");return e.clientWidth+t+r}function tHe(e){const t=HS(e,"border-top-width"),r=HS(e,"border-bottom-width");return e.clientHeight+t+r}function Cae(e,t={}){const r=t.width||eHe(e),n=t.height||tHe(e);return{width:r,height:n}}function rHe(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const gc=16384;function nHe(e){(e.width>gc||e.height>gc)&&(e.width>gc&&e.height>gc?e.width>e.height?(e.height*=gc/e.width,e.width=gc):(e.width*=gc/e.height,e.height=gc):e.width>gc?(e.height*=gc/e.width,e.width=gc):(e.width*=gc/e.height,e.height=gc))}function VS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function aHe(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function sHe(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),aHe(a)}const Wl=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Wl(r,t)};function iHe(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function oHe(e,t){return Eae(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function lHe(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?iHe(r):oHe(r,n);return document.createTextNode(`${a}{${s}}`)}function gz(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=ZQe();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(lHe(i,r,a,n)),t.appendChild(o)}function cHe(e,t,r){gz(e,t,":before",r),gz(e,t,":after",r)}const vz="application/font-woff",xz="image/jpeg",uHe={woff:vz,woff2:vz,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:xz,jpeg:xz,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function dHe(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function UR(e){const t=dHe(e).toLowerCase();return uHe[t]||""}function AHe(e){return e.split(/,/)[1]}function VF(e){return e.search(/^(data:)/)!==-1}function fHe(e,t){return`data:${t};base64,${e}`}async function _ae(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const zT={};function hHe(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function QR(e,t,r){const n=hHe(e,t,r.includeQueryParams);if(zT[n]!=null)return zT[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await _ae(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),AHe(o)));a=fHe(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return zT[n]=a,a}async function mHe(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):VS(t)}async function pHe(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return VS(o)}const r=e.poster,n=UR(r),a=await QR(r,n,t);return VS(a)}async function gHe(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await r4(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function vHe(e,t){return Wl(e,HTMLCanvasElement)?mHe(e):Wl(e,HTMLVideoElement)?pHe(e,t):Wl(e,HTMLIFrameElement)?gHe(e,t):e.cloneNode(Sae(e))}const xHe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Sae=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function bHe(e,t,r){var n,a;if(Sae(t))return t;let s=[];return xHe(e)&&e.assignedNodes?s=H0(e.assignedNodes()):Wl(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=H0(e.contentDocument.body.childNodes):s=H0(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Wl(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>r4(o,r)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function yHe(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Eae(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Wl(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function wHe(e,t){Wl(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Wl(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function EHe(e,t){if(Wl(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function CHe(e,t,r){return Wl(t,Element)&&(yHe(e,t,r),cHe(e,t,r),wHe(e,t),EHe(e,t)),t}async function _He(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const l=e.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await r4(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);e.appendChild(i)}return e}async function r4(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>vHe(n,t)).then(n=>bHe(e,n,t)).then(n=>CHe(e,n,t)).then(n=>_He(n,t))}const Nae=/url\((['"]?)([^'"]+?)\1\)/g,SHe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,NHe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function kHe(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function BHe(e){const t=[];return e.replace(Nae,(r,n,a)=>(t.push(a),r)),t.filter(r=>!VF(r))}async function THe(e,t,r,n,a){try{const s=r?JQe(t,r):t,i=UR(t);let o;return a||(o=await QR(s,i,n)),e.replace(kHe(t),`$1${o}$3`)}catch{}return e}function IHe(e,{preferredFontFormat:t}){return t?e.replace(NHe,r=>{for(;;){const[n,,a]=SHe.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function kae(e){return e.search(Nae)!==-1}async function Bae(e,t,r){if(!kae(e))return e;const n=IHe(e,r);return BHe(n).reduce((s,i)=>s.then(o=>THe(o,i,t,r)),Promise.resolve(n))}async function sv(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Bae(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function jHe(e,t){await sv("background",e,t)||await sv("background-image",e,t),await sv("mask",e,t)||await sv("-webkit-mask",e,t)||await sv("mask-image",e,t)||await sv("-webkit-mask-image",e,t)}async function FHe(e,t){const r=Wl(e,HTMLImageElement);if(!(r&&!VF(e.src))&&!(Wl(e,SVGImageElement)&&!VF(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await QR(n,UR(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...l)=>{try{s(t.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function OHe(e,t){const n=H0(e.childNodes).map(a=>Tae(a,t));await Promise.all(n).then(()=>e)}async function Tae(e,t){Wl(e,Element)&&(await jHe(e,t),await FHe(e,t),await OHe(e,t))}function DHe(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const bz={};async function yz(e){let t=bz[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},bz[e]=t,t}async function wz(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),_ae(o,t.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>r)}function Ez(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;t.push(l[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(n);if(l===null){if(l=o.exec(n),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(l[0])}return t}async function RHe(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{H0(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,u=yz(l).then(d=>wz(d,t)).then(d=>Ez(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(yz(a.href).then(o=>wz(o,t)).then(o=>Ez(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{H0(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function PHe(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>kae(t.style.getPropertyValue("src")))}async function LHe(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=H0(e.ownerDocument.styleSheets),n=await RHe(r,t);return PHe(n)}function Iae(e){return e.trim().replace(/["']/g,"")}function MHe(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Iae(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function UHe(e,t){const r=await LHe(e,t),n=MHe(e);return(await Promise.all(r.filter(s=>n.has(Iae(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Bae(s.cssText,i,t)}))).join(`
`)}async function QHe(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await UHe(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function HHe(e,t={}){const{width:r,height:n}=Cae(e,t),a=await r4(e,t,!0);return await QHe(a,t),await Tae(a,t),DHe(a,t),await sHe(a,r,n)}async function VHe(e,t={}){const{width:r,height:n}=Cae(e,t),a=await HHe(e,t),s=await VS(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=t.pixelRatio||rHe(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*l,i.height=d*l,t.skipAutoScale||nHe(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function n4(e,t={}){return(await VHe(e,t)).toDataURL()}const jae="recursos_crucigramas",a4="recursos_lineas_de_tiempo",s4="recursos_mapas_mentales",Fae="recursos_sopas_de_letras",i4=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},zHe=e=>{const t=tr(Ut(jt,jae),Kr("fechaCreacion","desc"));return vr(t,r=>{const n=r.docs.map(a=>i4(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},$He=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:br.fromDate(new Date)};return(await Jn(Ut(jt,jae),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},KHe=e=>{const t=tr(Ut(jt,a4),Kr("createdAt","desc"));return vr(t,r=>{const n=r.docs.map(a=>i4(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},GHe=async(e,t)=>{try{const{id:r,...n}=e,a=hr(jt,a4,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:br.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},qHe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:br.fromDate(new Date)};return(await Jn(Ut(jt,a4),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},WHe=async e=>{try{const t=hr(jt,a4,e);await Is(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},XHe=e=>{const t=tr(Ut(jt,s4),Kr("createdAt","desc"));return vr(t,r=>{const n=r.docs.map(a=>i4(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},YHe=async(e,t)=>{try{const{id:r,...n}=e,a=hr(jt,s4,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:br.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},JHe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:br.fromDate(new Date)};return(await Jn(Ut(jt,s4),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},ZHe=async e=>{try{const t=hr(jt,s4,e);await Is(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},eVe=e=>{const t=tr(Ut(jt,Fae),Kr("createdAt","desc"));return vr(t,r=>{const n=r.docs.map(a=>i4(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},tVe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:br.fromDate(new Date)};return(await Jn(Ut(jt,Fae),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},rVe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),nVe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),aVe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),sVe=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return c.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[c.jsx(Cx,{type:"target",position:wr.Left,className:"w-2 h-2 !bg-slate-400"}),c.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),c.jsx(Cx,{type:"source",position:wr.Right,className:"w-2 h-2 !bg-slate-400"})]})},zF=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+zF(n,t),0),$F=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,l,u)=>{r.push({id:o.id,position:{x:l*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=zF(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=zF(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,l+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((l,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),n.push({id:`e-${e.id}-${l.id}`,source:e.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((f,h)=>{const p=d+(h-(l.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${l.id}-${f.id}`,source:l.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Oae=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&c.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>c.jsx(Oae,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},iVe={custom:sVe},oVe=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=j.useState(e.treeData),[s,i]=j.useState("tree"),[o,l]=j.useState(!1),[u,d,f]=PQe([]),[h,p,g]=LQe([]),{fitView:v}=t4();j.useEffect(()=>{const{nodes:B,edges:F}=$F(n,s);d(B),p(F),setTimeout(()=>v({duration:300}),50)},[n,s,d,p,v]);const b=(B,F)=>{const w=JSON.parse(JSON.stringify(n)),C=N=>N.id===B?(N.label=F,!0):(N.children||[]).some(C);C(w),a(w)},y=B=>{const F=JSON.parse(JSON.stringify(n)),w=C=>C.id===B?(C.children||(C.children=[]),C.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(C.children||[]).some(w);w(F),a(F)},_=B=>{const F=JSON.parse(JSON.stringify(n)),w=C=>{const N=(C.children||[]).findIndex(P=>P.id===B);return N!==-1?(C.children.splice(N,1),!0):(C.children||[]).some(w)};w(F),a(F)},S=()=>{l(!0);const{nodes:B,edges:F}=$F(n,s);r({...e,treeData:n,nodes:B,edges:F}),setTimeout(()=>l(!1),1e3)},k=async B=>{const F=document.querySelector(".react-flow");F&&n4(F,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(w=>{{const C=document.createElement("a");C.download=`${e.tema}.png`,C.href=w,C.click()}}).catch(w=>console.error("oops, something went wrong!",w))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),c.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:c.jsxs(xae,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:iVe,children:[c.jsx($Qe,{}),c.jsx(YQe,{})]})}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(nVe,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(aVe,{})," Vista central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(Oae,{node:n,onUpdate:b,onAddChild:y,onDelete:_})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>k(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},lVe=({onBack:e,currentUser:t})=>{const[r,n]=j.useState("list"),[a,s]=j.useState([]),[i,o]=j.useState(null),[l,u]=j.useState(!1),[d,f]=j.useState(!0),[h,p]=j.useState(""),[g,v]=j.useState(""),[b,y]=j.useState("");j.useEffect(()=>{f(!0);const w=XHe(C=>{s(C),f(!1)});return()=>w()},[]);const _=async w=>{if(w.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const X=(await(await new os(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),q=JSON.parse(X),Z=W=>({id:crypto.randomUUID(),label:W.label||"Sin etiqueta",icon:W.icon||"🧠",type:W.type||"default",children:(W.children||[]).map(Z)}),H=Z(q),{nodes:V,edges:K}=$F(H),ne={tema:h,nivel:g,treeData:H,nodes:V,edges:K},L=await JHe(ne,t);o({...ne,id:L,createdAt:new Date().toISOString()}),n("editor")}catch(P){console.error("AI Generation Error:",P),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},S=async w=>{try{await YHe(w,t)}catch(C){console.error("Error saving mind map:",C),alert("No se pudo guardar el mapa mental.")}},k=w=>{o(w),n("editor")},B=async w=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await ZHe(w)}catch(C){console.error("Error deleting mind map:",C),alert("No se pudo eliminar el mapa mental.")}},F=()=>{switch(r){case"editor":return i?c.jsx(MR,{children:c.jsx(oVe,{mapData:i,onBack:()=>n("list"),onSave:S})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:h,onChange:w=>p(w.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:b,onChange:w=>y(w.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(rVe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(w=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:w.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(w.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>k(w),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>B(w.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},w.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),F()]})},cVe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uVe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),dVe=({onBack:e,currentUser:t})=>{const[r,n]=j.useState([]),[a,s]=j.useState("Media"),[i,o]=j.useState(10),[l,u]=j.useState(!1),[d,f]=j.useState(Array(10).fill("")),[h,p]=j.useState(""),[g,v]=j.useState(null),[b,y]=j.useState({ai:!1,puzzle:!1,data:!0}),_=j.useRef(null);j.useEffect(()=>{y(D=>({...D,data:!0}));const P=eVe(D=>{n(D),y(T=>({...T,data:!1}))});return()=>P()},[]),j.useEffect(()=>{f(P=>{const D=Array(i).fill("");for(let T=0;T<Math.min(P.length,i);T++)D[T]=P[T];return D})},[i]);const S=(P,D)=>{const T=[...d];T[P]=D,f(T)},k=async()=>{if(h.trim()){y(P=>({...P,ai:!0}));try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",T=new os(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),U=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,Z=(await(await T.generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);if(!H.palabras||!Array.isArray(H.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const K=[...H.palabras.map(ne=>ne.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;K.length<i;)K.push("");f(K)}catch(P){console.error("Error generating words with AI:",P),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(P=>({...P,ai:!1}))}}},B=(P,D,T,U,R,X)=>{for(let q=0;q<P.length;q++){const Z=T+q*R.y,H=U+q*R.x;if(Z<0||Z>=X||H<0||H>=X||D[Z][H]&&D[Z][H]!==P[q])return!1}return!0},F=(P,D,T,U,R)=>{for(let X=0;X<P.length;X++)D[T+X*R.y][U+X*R.x]=P[X]},w=async()=>{y(Z=>({...Z,puzzle:!0})),v(null),await new Promise(Z=>setTimeout(Z,100));const P=d.map(Z=>Z.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(P.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(Z=>({...Z,puzzle:!1}));return}const D=Math.max(...P.map(Z=>Z.length));let T=Math.max(D,P.length)+2;a==="Media"&&(T+=3),a==="Difícil"&&(T+=5),T=Math.min(Math.max(T,10),25);const U=Array(T).fill(null).map(()=>Array(T).fill(null)),R=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&R.push({x:1,y:-1}),a==="Difícil"&&R.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const Z of P.sort((H,V)=>V.length-H.length)){let H=!1;for(let V=0;V<100;V++){const K=R[Math.floor(Math.random()*R.length)],ne=Math.floor(Math.random()*T),L=Math.floor(Math.random()*T);if(B(Z,U,ne,L,K,T)){F(Z,U,ne,L,K),H=!0;break}}H||console.warn(`No se pudo colocar la palabra: ${Z}`)}const X=U.map(Z=>Z.map(H=>H||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),q={tema:h||"Personalizado",grid:X.map(Z=>Z.join("")),words:P.sort()};try{const Z=await tVe(q,t);v({...q,id:Z,createdAt:new Date().toISOString()})}catch(Z){console.error("Error saving puzzle:",Z),alert("No se pudo guardar la sopa de letras.")}finally{y(Z=>({...Z,puzzle:!1}))}},C=()=>{_.current&&n4(_.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(P=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=P,D.click()}).catch(P=>{console.error("oops, something went wrong!",P),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},N=()=>{var T;if(!g)return null;const P=((T=g.grid[0])==null?void 0:T.length)||1,D=g.grid.join("").split("");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:_,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${P}, minmax(0, 1fr))`},children:D.map((U,R)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:U},R))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(U=>c.jsx("li",{children:U},U))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:a,onChange:P=>s(P.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(P=>c.jsx("button",{onClick:()=>{o(P),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===P?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:P},P)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:P=>o(parseInt(P.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:P=>p(P.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:k,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?c.jsx(cVe,{}):c.jsxs(c.Fragment,{children:[c.jsx(uVe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((P,D)=>c.jsx("input",{type:"text",value:P,onChange:T=>S(D,T.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:w,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&N()]})},AVe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),fVe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),hVe=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=j.useState(e),[s,i]=j.useState(null),o=j.useRef(null),l=(p,g,v)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:v}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,p].sort((v,b)=>parseInt(v.date)-parseInt(b.date));a(v=>({...v,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(v=>v.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",v=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const B=(await(await new os(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(v)).response).text().replace(/^```json\s*|```\s*$/g,""),F=JSON.parse(B);a(w=>({...w,events:w.events.map(C=>C.id===p.id?{...C,date:F.date,description:F.description,icon:F.icon}:C).sort((C,N)=>parseInt(C.date)-parseInt(N.date))}))}catch(b){console.error("Error al generar descripción del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&n4(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:o,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const v=g%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:v&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!v&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:p.date,onChange:g=>l(p.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("textarea",{value:p.description,onChange:g=>l(p.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):c.jsx(fVe,{})})]}),c.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},mVe=({onBack:e,currentUser:t})=>{const[r,n]=j.useState("list"),[a,s]=j.useState([]),[i,o]=j.useState(null),[l,u]=j.useState(!1),[d,f]=j.useState(!0),[h,p]=j.useState(""),[g,v]=j.useState(""),[b,y]=j.useState("");j.useEffect(()=>{f(!0);const B=KHe(F=>{s(F),f(!1)});return()=>B()},[]);const _=async B=>{if(B.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",C=`
            Genera una línea de tiempo sobre el tema "${h}" ${w}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const R=(await(await new os(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(C)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(R);if(!X.events||!Array.isArray(X.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const q={tema:h,fechaInicio:g,fechaFin:b,events:X.events.map(H=>({id:crypto.randomUUID(),date:H.date||"Sin fecha",description:H.description||"Sin descripción",icon:H.icon||"🗓️"}))},Z=await qHe(q,t);o({...q,id:Z,createdAt:new Date().toISOString()}),n("editor")}catch(N){console.error("AI Generation Error:",N),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},S=async B=>{try{await GHe(B,t),n("list"),o(null)}catch(F){console.error("Error saving timeline:",F),alert("No se pudo guardar la línea de tiempo.")}},k=async B=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await WHe(B)}catch(F){console.error("Error deleting timeline:",F),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?c.jsx(hVe,{timeline:i,onSave:S,onBack:()=>n("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:h,onChange:B=>p(B.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:B=>v(B.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:B=>y(B.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(AVe,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(B=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(B.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(B),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>k(B.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},B.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},pVe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Cz=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),gVe=({onBack:e,currentUser:t})=>{const[r,n]=j.useState([]),[a,s]=j.useState(10),[i,o]=j.useState(!1),[l,u]=j.useState(Array(10).fill("")),[d,f]=j.useState(Array(10).fill("")),[h,p]=j.useState(""),[g,v]=j.useState(null),[b,y]=j.useState(!1),[_,S]=j.useState({ai:!1,puzzle:!1,data:!0}),[k,B]=j.useState(null),F=j.useRef(null);j.useEffect(()=>{S(X=>({...X,data:!0}));const R=zHe(X=>{const q=X.map(Z=>{const{grid_flat:H,grid_width:V,...K}=Z,ne=[];if(H&&V>0)for(let L=0;L<H.length;L+=V)ne.push(H.slice(L,L+V));return{...K,grid:ne}});n(q),S(Z=>({...Z,data:!1}))});return()=>R()},[]),j.useEffect(()=>{const R=a;u(X=>Array.from({length:R},(q,Z)=>X[Z]||"")),f(X=>Array.from({length:R},(q,Z)=>X[Z]||""))},[a]);const w=(R,X)=>{const q=[...l];q[R]=X,u(q)},C=(R,X)=>{const q=[...d];q[R]=X,f(q)},N=async()=>{if(h.trim()){S(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new os(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ne=(await(await q.generateContent(Z)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const L=ne.indexOf("{"),W=ne.lastIndexOf("}");L!==-1&&W!==-1&&(ne=ne.substring(L,W+1)),ne=ne.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ne.includes("__SPLIT__")&&(ne=ne.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(Ae,oe,ce,ge)=>{const je=ce.split("__SPLIT__").map(re=>re.trim().replace(/,$/,""));return oe+je.join(",")+ge})),ne=ne.replace(/,\s*]/g,"]");let J;try{J=JSON.parse(ne)}catch{console.error("Respuesta IA no es JSON válido:",ne),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),S(oe=>({...oe,ai:!1}));return}if(!J.items||!Array.isArray(J.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=J.items.map(Ae=>(Ae.word||"").toUpperCase().replace(/\s/g,"")),ie=J.items.map(Ae=>Ae.clue||"");u(Array.from({length:a},(Ae,oe)=>te[oe]||"")),f(Array.from({length:a},(Ae,oe)=>ie[oe]||""))}catch(R){console.error("Error generating words/clues with AI:",R),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{S(R=>({...R,ai:!1}))}}},P=async R=>{const X=l[R];if(!X||!X.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}B(R);try{const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new os(q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),V=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${X}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,W=(await(await H.generateContent(V)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(W);J.clue&&C(R,J.clue)}catch(q){console.error("Error generating clue with AI:",q),alert("No se pudo generar la pista.")}finally{B(null)}},D=j.useCallback(()=>{try{const R=l.map((Ie,He)=>({word:Ie.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[He]})).filter(Ie=>Ie.word.length>0);if(R.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;R.sort((Ie,He)=>He.word.length-Ie.word.length);const X=R[0].word.length,q=Math.max(X,R.length)*2;let Z=Array.from({length:q},()=>Array(q).fill(null));const H=[],V=R.shift(),K=Math.floor(q/2),ne=Math.floor((q-V.word.length)/2);for(let Ie=0;Ie<V.word.length;Ie++)Z[K][ne+Ie]=V.word[Ie];H.push({word:V.word,clue:V.clue,direction:"across",row:K,col:ne});for(const Ie of R){let He={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of H)for(let ye=0;ye<Xe.word.length;ye++)for(let Oe=0;Oe<Ie.word.length;Oe++)if(Xe.word[ye]===Ie.word[Oe]){let Pe=0,qe,Ze,ot;Xe.direction==="across"?(ot="down",qe=Xe.row-Oe,Ze=Xe.col+ye):(ot="across",qe=Xe.row+ye,Ze=Xe.col-Oe);let mt=!0;for(let Bt=0;Bt<Ie.word.length;Bt++){const Lt=qe+(ot==="down"?Bt:0),Ot=Ze+(ot==="across"?Bt:0);if(Lt<0||Lt>=q||Ot<0||Ot>=q){mt=!1;break}const Qt=Z[Lt][Ot],bt=Lt===Xe.row+(Xe.direction==="down"?ye:0)&&Ot===Xe.col+(Xe.direction==="across"?ye:0);if(Qt&&!bt){mt=!1;break}if(Qt&&bt&&Qt!==Ie.word[Oe]){mt=!1;break}if(!bt){if(ot==="across"&&(Lt>0&&Z[Lt-1][Ot]||Lt<q-1&&Z[Lt+1][Ot])){mt=!1;break}if(ot==="down"&&(Ot>0&&Z[Lt][Ot-1]||Ot<q-1&&Z[Lt][Ot+1])){mt=!1;break}}Qt&&Pe++}mt&&Pe>He.score&&(He={score:Pe,row:qe,col:Ze,direction:ot})}if(He.score>-1){for(let Xe=0;Xe<Ie.word.length;Xe++){const ye=He.row+(He.direction==="down"?Xe:0),Oe=He.col+(He.direction==="across"?Xe:0);Z[ye][Oe]=Ie.word[Xe]}H.push({word:Ie.word,clue:Ie.clue,direction:He.direction,row:He.row,col:He.col})}}let L=q,W=-1,J=q,te=-1;H.forEach(Ie=>{L=Math.min(L,Ie.row),W=Math.max(W,Ie.row+(Ie.direction==="down"?Ie.word.length-1:0)),J=Math.min(J,Ie.col),te=Math.max(te,Ie.col+(Ie.direction==="across"?Ie.word.length-1:0))}),W===-1&&(L=H[0].row,W=H[0].row,J=H[0].col,te=H[0].col+H[0].word.length-1);const ie=1,Ae=Math.max(0,L-ie),oe=Math.min(q,W+1+ie),ce=Math.max(0,J-ie),ge=Math.min(q,te+1+ie),je=Z.slice(Ae,oe).map(Ie=>Ie.slice(ce,ge)),re=H.map(Ie=>({...Ie,row:Ie.row-Ae,col:Ie.col-ce})).sort((Ie,He)=>Ie.row-He.row||Ie.col-He.col);let Se=1;const De=[],_e=new Map;re.forEach(Ie=>{const He=`${Ie.row},${Ie.col}`;_e.has(He)||_e.set(He,Se++),De.push({...Ie,number:_e.get(He)})});const he=je.map(Ie=>Ie.map(He=>({char:He,number:null})));return De.forEach(Ie=>{const He=`${Ie.row},${Ie.col}`;he[Ie.row]&&he[Ie.row][Ie.col]!==void 0&&(he[Ie.row][Ie.col].number=_e.get(He))}),{grid:he,clues:{across:De.filter(Ie=>Ie.direction==="across").sort((Ie,He)=>Ie.number-He.number),down:De.filter(Ie=>Ie.direction==="down").sort((Ie,He)=>Ie.number-He.number)}}}catch(R){return console.error("Error generating crossword grid:",R),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),T=async()=>{var X;S(q=>({...q,puzzle:!0})),v(null),await new Promise(q=>setTimeout(q,100));const R=D();if(R){const q={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:R.grid,clues:R.clues},{grid:Z,...H}=q,V={...H,grid_flat:Z.flat().map(K=>K.char||""),grid_width:((X=Z[0])==null?void 0:X.length)||0};try{const K=await $He(V,t);v({...q,id:K,fechaCreacion:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar el crucigrama en la base de datos.")}}S(q=>({...q,puzzle:!1}))},U=()=>{F.current&&(y(!1),setTimeout(()=>{n4(F.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(R=>{const X=document.createElement("a");X.download="crucigrama.png",X.href=R,X.click()}).catch(R=>console.error("Error generating image",R))},100))};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:F,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((R,X)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:R.char?"white":"black"},children:[R.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:R.number}),b&&R.char&&c.jsx("span",{children:R.char})]},X))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:g.clues.across.map(R=>c.jsxs("li",{children:[c.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:g.clues.down.map(R=>c.jsxs("li",{children:[c.jsxs("strong",{children:[R.number,"."]})," ",R.clue]},`${R.word}-${R.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:U,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>c.jsx("button",{onClick:()=>{s(R),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:a,onChange:R=>s(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:N,disabled:_.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:_.ai?c.jsx(pVe,{}):c.jsxs(c.Fragment,{children:[c.jsx(Cz,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((R,X)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[X],onChange:q=>w(X,q.target.value),placeholder:`Palabra ${X+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[c.jsx("textarea",{value:d[X],onChange:q=>C(X,q.target.value),placeholder:`Pista ${X+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:()=>P(X),disabled:k===X,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:k===X?c.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):c.jsx(Cz,{})})]})]},X))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:T,disabled:_.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:_.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},vVe=()=>{const[e,t]=j.useState(null),[r,n]=j.useState(!0);return j.useEffect(()=>{const a=dX(ebe,async s=>{if(s&&s.email)try{const i=await CJ(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},xVe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],bVe=({recurso:e,onClick:t})=>c.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:e.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),yVe=()=>{const[e,t]=j.useState("menu"),{currentUser:r}=vVe(),n=()=>e!=="menu"&&!r?c.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?c.jsx(lVe,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?c.jsx(dVe,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?c.jsx(mVe,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?c.jsx(gVe,{onBack:()=>t("menu"),currentUser:r}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:xVe.map(a=>c.jsx(bVe,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},wVe="evaluaciones_formativas",EVe="calificaciones_formativas",Dae="trabajos_grupales_formativos",Rae=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},CVe=(e,t)=>{const r=tr(Ut(jt,wVe),In("curso","==",e));return vr(r,n=>{t(n.docs.map(a=>Rae(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},_Ve=e=>{const t=tr(Ut(jt,EVe));return vr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},SVe=(e,t)=>{const r=tr(Ut(jt,Dae),In("curso","==",e));return vr(r,n=>{t(n.docs.map(a=>Rae(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},NVe=async e=>{try{const{id:t,...r}=e,n=hr(jt,Dae,t);await Ji(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},kVe=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState({}),[s,i]=j.useState([]),[o,l]=j.useState(!0),[u,d]=j.useState(null),[f,h]=j.useState(!1),[p,g]=j.useState(null),v=j.useRef(null);j.useEffect(()=>{if(!e.curso){l(!1);return}l(!0);const k=CVe(e.curso,r),B=_Ve(a),F=SVe(e.curso,w=>{i(w),l(!1)});return()=>{k(),B(),F()}},[e.curso]);const b=j.useMemo(()=>{if(!e.curso)return[];const B=t.filter(F=>F.curso===e.curso).reduce((F,w)=>((F[w.asignatura]=F[w.asignatura]||[]).push(w),F),{});return Object.entries(B).map(([F,w])=>{let C=0,N=0;const P=w.map(T=>{var X;const U=(X=n[T.id])==null?void 0:X[e.nombreCompleto];let R="No Trabajado";return U==="trabajado"?(C+=7,N++,R="Trabajado"):U==="no trabajado"&&(C+=2,N++,R="No Trabajado"),{id:T.id,nombreActividad:T.nombreActividad,fecha:T.fecha,estado:R}}).filter(T=>{var U;return(U=n[T.id])==null?void 0:U[e.nombreCompleto]}),D=N>0?(C/N).toFixed(1):"N/A";return{asignatura:F,promedio:D,actividades:P.sort((T,U)=>new Date(U.fecha).getTime()-new Date(T.fecha).getTime())}}).filter(F=>F.actividades.length>0).sort((F,w)=>F.asignatura.localeCompare(w.asignatura))},[t,n,e]);j.useEffect(()=>{if(b.reduce((N,P)=>N+P.actividades.length,0)===0){d(null);return}const B=b.reduce((N,P)=>{const D=parseFloat(P.promedio);return isNaN(D)?N:N+D},0),F=b.length>0?B/b.length:0,w=SE.find(N=>F>=N.promedioMin&&F<=N.promedioMax)||null,C=SE.filter(N=>F>=N.promedioMin);if(d({puntajeTotal:0,promedio:F,rangoActual:w,insigniasGanadas:C}),v.current!==null){const N=SE.find(P=>v.current>=P.promedioMin&&v.current<=P.promedioMax)||null;w&&(!N||w.nombre!==N.nombre)&&g(w)}v.current=F},[b]);const y=j.useMemo(()=>e.curso?s.filter(k=>k.curso===e.curso).map(k=>{const B=k.grupos.find(F=>F.integrantes.some(w=>w.nombre===e.nombreCompleto));return B?{...k,miGrupo:B}:null}).filter(k=>k!==null).sort((k,B)=>new Date(B.fechaPresentacion).getTime()-new Date(k.fechaPresentacion).getTime()):[],[s,e]),_=async(k,B)=>{const F=s.find(C=>C.id===k);if(!F)return;const w={...F,grupos:F.grupos.map(C=>C.integrantes.some(P=>P.nombre===e.nombreCompleto)?{...C,integrantes:C.integrantes.map(P=>P.nombre===e.nombreCompleto?{...P,rol:B||void 0}:P)}:C)};try{await NVe(w)}catch(C){console.error("Error updating role:",C),alert("No se pudo actualizar el rol.")}},S=k=>{const B=parseFloat(k);return isNaN(B)?"bg-slate-400":B<4?"bg-red-500":B<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:k=>k.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),c.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:k=>k.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:SE.map(k=>{const B=u==null?void 0:u.insigniasGanadas.some(F=>F.nombre===k.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${B?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:k.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${B?"text-amber-700":"text-slate-600"}`,children:k.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",k.promedioMin," y ",k.promedioMax]})]})]},k.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(k=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:k.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${S(k.promedio)}`,children:k.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),k.actividades.map(B=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:B.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${B.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:B.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},B.id))]})]},k.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:y.map(k=>{const B=k.miGrupo.integrantes.filter(w=>w.nombre!==e.nombreCompleto&&w.rol).map(w=>w.rol),F=SJ.filter(w=>!B.includes(w));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:k.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[k.asignatura," - Presentación: ",new Date(k.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",k.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:k.miGrupo.integrantes.map(w=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:w.nombre===e.nombreCompleto?"font-bold":"",children:w.nombre}),w.nombre===e.nombreCompleto?c.jsxs("select",{value:w.rol||"",onChange:C=>_(k.id,C.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),w.rol&&!F.includes(w.rol)&&c.jsx("option",{value:w.rol,children:w.rol}),F.map(C=>c.jsx("option",{value:C,children:C},C))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:w.rol||"Sin rol"})]},w.nombre))})]})]},k.id)})})]})]})},BVe="proyectos_interdisciplinarios",Pae="entregas_interdisciplinarias",Lae=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},TVe=(e,t)=>{const r=tr(Ut(jt,BVe),In("cursos","array-contains",e));return vr(r,n=>{const a=n.docs.map(s=>Lae(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},IVe=(e,t)=>{const r=tr(Ut(jt,Pae),In("estudianteId","==",e));return vr(r,n=>{const a=n.docs.map(s=>Lae(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},jVe=async e=>{try{const{id:t,...r}=e,n=hr(jt,Pae,t),a={...r,fechaCompletado:br.fromDate(new Date(r.fechaCompletado||Date.now()))};await Ji(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},FVe=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(!0);j.useEffect(()=>{if(!e.curso||!e.id){l(!1);return}l(!0);const f=TVe(e.curso,r),h=IVe(e.id,p=>{a(p),l(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await jVe(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=j.useMemo(()=>{const B=n.find(F=>F.planificacionId===f.id&&F.tareaId===h.id);return B||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,v]=j.useState(!1),[b,y]=j.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),_=B=>{var w;const F=(w=B.target.files)==null?void 0:w[0];F&&(alert(`Simulación: Archivo "${F.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:F.name,url:`simulated/path/${F.name}`},fechaCompletado:new Date().toISOString()}))},S=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},k=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:p.completada,onChange:k,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&c.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>v(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:b.observaciones,onChange:B=>y({...b,observaciones:B.target.value}),onBlur:S,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:b.enlace,onChange:B=>y({...b,enlace:B.target.value}),onBlur:S,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:_,className:"text-sm"}),p.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,v=h.length>0?g/h.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(v),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${v}%`}})})]})]}),s===f.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>c.jsx(d,{plan:f,tarea:b},b.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},OVe=({data:e})=>c.jsx("div",{className:"space-y-4",children:e.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),DVe=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState(!1),[s,i]=j.useState(null),[o,l]=j.useState(null),[u,d]=j.useState(cy),f=j.useCallback(async()=>{a(!0);try{const b=(await ZFe(e.nombreCompleto)).sort((y,_)=>new Date(_.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(v){console.error("Error al cargar acompañamientos desde Firestore",v),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=j.useCallback(async()=>{try{const v=await e6e();v&&d(v)}catch(v){console.error("Error al cargar rúbrica personalizada",v)}},[]);j.useEffect(()=>{f(),h()},[f,h]);const p=j.useMemo(()=>{if(!o)return[];const v={};return u.forEach(b=>{v[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const _=o.rubricaResultados[y.name];_&&(v[b.domain].total+=_,v[b.domain].count++)})}),Object.entries(v).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=v=>{const b=new pr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompañamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),gl(b,{startY:35,body:[["Docente:",v.docente],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Asignatura:",v.asignatura],["Curso:",v.curso],["Bloques:",v.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(v.rubricaResultados).length>0){const k=[],B=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(F=>{k.push([{content:F.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),F.criteria.forEach(w=>{const C=v.rubricaResultados[w.name],N=C?B[C-1]:"No evaluado";k.push([w.name,N])})}),gl(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:k,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const _=(k,B)=>{if(!B)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(k,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const F=b.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(F,14,y),y+=F.length*5+10};_("Observaciones Generales",v.observacionesGenerales),_("Retroalimentación Consolidada",v.retroalimentacionConsolidada);const S=b.getNumberOfPages();for(let k=1;k<=S;k++)b.setPage(k),b.setFontSize(8),b.setTextColor(128),b.text(`Página ${k} de ${S}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(v.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(_J,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(OVe,{data:p})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(v=>c.jsx("button",{onClick:()=>l(v),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[v.curso," - ",v.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(v.fecha).toLocaleDateString("es-CL"),v.bloques&&` | Bloques: ${v.bloques}`]}),Object.keys(v.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(v.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},v.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},RVe=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=Ut(Rr,"planificaciones"),r=tr(t,Kr("fechaCreacion","desc"));return vr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},PVe=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Ut(Rr,"planificaciones"),n=tr(r,In("userId","==",e),Kr("fechaCreacion","desc"));return vr(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function V0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function LVe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function HR(e){let t,r,n;e.length!==2?(t=V0,r=(o,l)=>V0(e(o),l),n=(o,l)=>e(o)-l):(t=e===V0||e===LVe?e:MVe,r=e,n=e);function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=a(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:a,center:i,right:s}}function MVe(){return 0}function Mae(e){return e===null?NaN:+e}function*UVe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const QVe=HR(V0),e2=QVe.right;HR(Mae).center;class _z extends Map{constructor(t,r=zVe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Sz(this,t))}has(t){return super.has(Sz(this,t))}set(t,r){return super.set(HVe(this,t),r)}delete(t){return super.delete(VVe(this,t))}}function Sz({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function HVe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function VVe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function zVe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $Ve(e=V0){if(e===V0)return Uae;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Uae(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const KVe=Math.sqrt(50),GVe=Math.sqrt(10),qVe=Math.sqrt(2);function zS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=KVe?10:s>=GVe?5:s>=qVe?2:1;let o,l,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?zS(e,t,r*2):[o,l,u]}function KF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?zS(t,e,r):zS(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(s-u)/-i;else for(let u=0;u<o;++u)l[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(a+u)/-i;else for(let u=0;u<o;++u)l[u]=(a+u)*i;return l}function GF(e,t,r){return t=+t,e=+e,r=+r,zS(e,t,r)[2]}function qF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?GF(t,e,r):GF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Nz(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function kz(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Qae(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Uae:$Ve(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+h)),g=Math.min(n,Math.floor(t+(l-u)*f/l+h));Qae(e,t,p,g,a)}const s=e[t];let i=r,o=n;for(yb(e,r,t),a(e[n],s)>0&&yb(e,r,n);i<o;){for(yb(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?yb(e,r,o):(++o,yb(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function yb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function WVe(e,t,r){if(e=Float64Array.from(UVe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return kz(e);if(t>=1)return Nz(e);var n,a=(n-1)*t,s=Math.floor(a),i=Nz(Qae(e,s).subarray(0,s+1)),o=kz(e.subarray(s+1));return i+(o-i)*(a-s)}}function XVe(e,t,r=Mae){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function YVe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}const WF=Math.PI,XF=2*WF,Xm=1e-6,JVe=XF-Xm;function Hae(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function ZVe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Hae;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class eze{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Hae:ZVe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,l=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Xm)if(!(Math.abs(f*l-u*d)>Xm)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,v=l*l+u*u,b=p*p+g*g,y=Math.sqrt(v),_=Math.sqrt(h),S=s*Math.tan((WF-Math.acos((v+h-b)/(2*y*_)))/2),k=S/_,B=S/y;Math.abs(k-1)>Xm&&this._append`L${t+k*d},${r+k*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+B*l},${this._y1=r+B*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),l=n*Math.sin(a),u=t+o,d=r+l,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Xm||Math.abs(this._y1-d)>Xm)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%XF+XF),h>JVe?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Xm&&this._append`A${n},${n},0,${+(h>=WF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function tze(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $S(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function _x(e){return e=$S(Math.abs(e)),e?e[1]:NaN}function rze(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(a-=o,a+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function nze(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var aze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hw(e){if(!(t=aze.exec(e)))throw new Error("invalid format: "+e);var t;return new VR({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}hw.prototype=VR.prototype;function VR(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}VR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sze(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Vae;function ize(e,t){var r=$S(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Vae=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+$S(e,Math.max(0,t+s-1))[0]}function Bz(e,t){var r=$S(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Tz={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tze,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Bz(e*100,t),r:Bz,s:ize,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Iz(e){return e}var jz=Array.prototype.map,Fz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function oze(e){var t=e.grouping===void 0||e.thousands===void 0?Iz:rze(jz.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Iz:nze(jz.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=hw(f);var h=f.fill,p=f.align,g=f.sign,v=f.symbol,b=f.zero,y=f.width,_=f.comma,S=f.precision,k=f.trim,B=f.type;B==="n"?(_=!0,B="g"):Tz[B]||(S===void 0&&(S=12),k=!0,B="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var F=v==="$"?r:v==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",w=v==="$"?n:/[%p]/.test(B)?i:"",C=Tz[B],N=/[defgprs%]/.test(B);S=S===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function P(D){var T=F,U=w,R,X,q;if(B==="c")U=C(D)+U,D="";else{D=+D;var Z=D<0||1/D<0;if(D=isNaN(D)?l:C(Math.abs(D),S),k&&(D=sze(D)),Z&&+D==0&&g!=="+"&&(Z=!1),T=(Z?g==="("?g:o:g==="-"||g==="("?"":g)+T,U=(B==="s"?Fz[8+Vae/3]:"")+U+(Z&&g==="("?")":""),N){for(R=-1,X=D.length;++R<X;)if(q=D.charCodeAt(R),48>q||q>57){U=(q===46?a+D.slice(R+1):D.slice(R))+U,D=D.slice(0,R);break}}}_&&!b&&(D=t(D,1/0));var H=T.length+D.length+U.length,V=H<y?new Array(y-H+1).join(h):"";switch(_&&b&&(D=t(V+D,V.length?y-U.length:1/0),V=""),p){case"<":D=T+D+U+V;break;case"=":D=T+V+D+U;break;case"^":D=V.slice(0,H=V.length>>1)+T+D+U+V.slice(H);break;default:D=V+T+D+U;break}return s(D)}return P.toString=function(){return f+""},P}function d(f,h){var p=u((f=hw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(_x(h)/3)))*3,v=Math.pow(10,-g),b=Fz[8+g/3];return function(y){return p(v*y)+b}}return{format:u,formatPrefix:d}}var EC,zR,zae;lze({thousands:",",grouping:[3],currency:["$",""]});function lze(e){return EC=oze(e),zR=EC.format,zae=EC.formatPrefix,EC}function cze(e){return Math.max(0,-_x(Math.abs(e)))}function uze(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_x(t)/3)))*3-_x(Math.abs(e)))}function dze(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_x(t)-_x(e))+1}function Ru(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ph(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const YF=Symbol("implicit");function o4(){var e=new _z,t=[],r=[],n=YF;function a(s){let i=e.get(s);if(i===void 0){if(n!==YF)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new _z;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return o4(t,r).unknown(n)},Ru.apply(a,arguments),a}function $R(){var e=o4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,v=p?n:a;s=(v-g)/Math.max(1,h-l+u*2),o&&(s=Math.floor(s)),g+=(v-g-s*(h-l))*d,i=s*(1-l),o&&(g=Math.round(g),i=Math.round(i));var b=YVe(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return $R(t(),[n,a]).round(o).paddingInner(l).paddingOuter(u).align(d)},Ru.apply(f(),arguments)}function $ae(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $ae(t())},e}function Aze(){return $ae($R.apply(null,arguments).paddingInner(1))}function fze(e){return function(){return e}}function KS(e){return+e}var Oz=[0,1];function hl(e){return e}function JF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:fze(isNaN(t)?NaN:.5)}function hze(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function mze(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=JF(a,n),s=r(i,s)):(n=JF(n,a),s=r(s,i)),function(o){return s(n(o))}}function pze(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=JF(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var l=e2(e,o,1,n)-1;return s[l](a[l](o))}}function t2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function l4(){var e=Oz,t=Oz,r=a1,n,a,s,i=hl,o,l,u;function d(){var h=Math.min(e.length,t.length);return i!==hl&&(i=hze(e[0],e[h-1])),o=h>2?pze:mze,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),Ad)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,KS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=CR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:hl,d()):i!==hl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function KR(){return l4()(hl,hl)}function Kae(e,t,r,n){var a=qF(e,t,r),s;switch(n=hw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=uze(a,i))&&(n.precision=s),zae(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=dze(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=cze(a))&&(n.precision=s-(n.type==="%")*2);break}}return zR(n)}function pm(e){var t=e.domain;return e.ticks=function(r){var n=t();return KF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Kae(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=GF(i,o,r),u===l)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function Gae(){var e=KR();return e.copy=function(){return t2(e,Gae())},Ru.apply(e,arguments),pm(e)}function qae(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,KS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return qae(e).unknown(t)},e=arguments.length?Array.from(e,KS):[0,1],pm(r)}function Wae(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function Dz(e){return Math.log(e)}function Rz(e){return Math.exp(e)}function gze(e){return-Math.log(-e)}function vze(e){return-Math.exp(-e)}function xze(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bze(e){return e===10?xze:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yze(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Pz(e){return(t,r)=>-e(-t,r)}function GR(e){const t=e(Dz,Rz),r=t.domain;let n=10,a,s;function i(){return a=yze(n),s=bze(n),r()[0]<0?(a=Pz(a),s=Pz(s),e(gze,vze)):e(Dz,Rz),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,v;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}y.length*2<b&&(y=KF(u,d,b))}else y=KF(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=hw(l)).precision==null&&(l.trim=!0),l=zR(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(Wae(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function Xae(){const e=GR(l4()).domain([1,10]);return e.copy=()=>t2(e,Xae()).base(e.base()),Ru.apply(e,arguments),e}function Lz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Mz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function qR(e){var t=1,r=e(Lz(t),Mz(t));return r.constant=function(n){return arguments.length?e(Lz(t=+n),Mz(t)):t},pm(r)}function Yae(){var e=qR(l4());return e.copy=function(){return t2(e,Yae()).constant(e.constant())},Ru.apply(e,arguments)}function Uz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wze(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Eze(e){return e<0?-e*e:e*e}function WR(e){var t=e(hl,hl),r=1;function n(){return r===1?e(hl,hl):r===.5?e(wze,Eze):e(Uz(r),Uz(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},pm(t)}function XR(){var e=WR(l4());return e.copy=function(){return t2(e,XR()).exponent(e.exponent())},Ru.apply(e,arguments),e}function Cze(){return XR.apply(null,arguments).exponent(.5)}function Qz(e){return Math.sign(e)*e*e}function _ze(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Jae(){var e=KR(),t=[0,1],r=!1,n;function a(s){var i=_ze(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(Qz(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,KS)).map(Qz)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Jae(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ru.apply(a,arguments),pm(a)}function Zae(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=XVe(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[e2(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(V0),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Zae().domain(e).range(t).unknown(n)},Ru.apply(s,arguments)}function ese(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(l){return l!=null&&l<=l?a[e2(n,l,0,r)]:s}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,o()):a.slice()},i.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(s=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return ese().domain([e,t]).range(a).unknown(s)},Ru.apply(pm(i),arguments)}function tse(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[e2(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return tse().domain(e).range(t).unknown(r)},Ru.apply(a,arguments)}const $T=new Date,KT=new Date;function ki(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const l=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return l;let u;do l.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return l},a.filter=s=>ki(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>($T.setTime(+s),KT.setTime(+i),e($T),e(KT),Math.floor(r($T,KT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const GS=ki(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);GS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ki(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):GS);GS.range;const Rf=1e3,Bu=Rf*60,Pf=Bu*60,nh=Pf*24,YR=nh*7,Hz=nh*30,GT=nh*365,cp=ki(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Rf)},(e,t)=>(t-e)/Rf,e=>e.getUTCSeconds());cp.range;const JR=ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rf)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getMinutes());JR.range;const ZR=ki(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getUTCMinutes());ZR.range;const eP=ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rf-e.getMinutes()*Bu)},(e,t)=>{e.setTime(+e+t*Pf)},(e,t)=>(t-e)/Pf,e=>e.getHours());eP.range;const tP=ki(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pf)},(e,t)=>(t-e)/Pf,e=>e.getUTCHours());tP.range;const r2=ki(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bu)/nh,e=>e.getDate()-1);r2.range;const c4=ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nh,e=>e.getUTCDate()-1);c4.range;const rse=ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nh,e=>Math.floor(e/nh));rse.range;function ig(e){return ki(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bu)/YR)}const u4=ig(0),qS=ig(1),Sze=ig(2),Nze=ig(3),Sx=ig(4),kze=ig(5),Bze=ig(6);u4.range;qS.range;Sze.range;Nze.range;Sx.range;kze.range;Bze.range;function og(e){return ki(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/YR)}const d4=og(0),WS=og(1),Tze=og(2),Ize=og(3),Nx=og(4),jze=og(5),Fze=og(6);d4.range;WS.range;Tze.range;Ize.range;Nx.range;jze.range;Fze.range;const rP=ki(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rP.range;const nP=ki(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());nP.range;const ah=ki(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ah.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ki(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ah.range;const sh=ki(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ki(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});sh.range;function nse(e,t,r,n,a,s){const i=[[cp,1,Rf],[cp,5,5*Rf],[cp,15,15*Rf],[cp,30,30*Rf],[s,1,Bu],[s,5,5*Bu],[s,15,15*Bu],[s,30,30*Bu],[a,1,Pf],[a,3,3*Pf],[a,6,6*Pf],[a,12,12*Pf],[n,1,nh],[n,2,2*nh],[r,1,YR],[t,1,Hz],[t,3,3*Hz],[e,1,GT]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function l(u,d,f){const h=Math.abs(d-u)/f,p=HR(([,,b])=>b).right(i,h);if(p===i.length)return e.every(qF(u/GT,d/GT,f));if(p===0)return GS.every(Math.max(qF(u,d,f),1));const[g,v]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(v)}return[o,l]}const[Oze,Dze]=nse(sh,nP,d4,rse,tP,ZR),[Rze,Pze]=nse(ah,rP,u4,r2,eP,JR);function qT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function WT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Lze(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=Eb(a),d=Cb(a),f=Eb(s),h=Cb(s),p=Eb(i),g=Cb(i),v=Eb(o),b=Cb(o),y=Eb(l),_=Cb(l),S={a:Z,A:H,b:V,B:K,c:null,d:qz,e:qz,f:o$e,g:g$e,G:x$e,H:a$e,I:s$e,j:i$e,L:ase,m:l$e,M:c$e,p:ne,q:L,Q:Yz,s:Jz,S:u$e,u:d$e,U:A$e,V:f$e,w:h$e,W:m$e,x:null,X:null,y:p$e,Y:v$e,Z:b$e,"%":Xz},k={a:W,A:J,b:te,B:ie,c:null,d:Wz,e:Wz,f:C$e,g:O$e,G:R$e,H:y$e,I:w$e,j:E$e,L:ise,m:_$e,M:S$e,p:Ae,q:oe,Q:Yz,s:Jz,S:N$e,u:k$e,U:B$e,V:T$e,w:I$e,W:j$e,x:null,X:null,y:F$e,Y:D$e,Z:P$e,"%":Xz},B={a:P,A:D,b:T,B:U,c:R,d:Kz,e:Kz,f:e$e,g:$z,G:zz,H:Gz,I:Gz,j:Xze,L:Zze,m:Wze,M:Yze,p:N,q:qze,Q:r$e,s:n$e,S:Jze,u:Vze,U:zze,V:$ze,w:Hze,W:Kze,x:X,X:q,y:$z,Y:zz,Z:Gze,"%":t$e};S.x=F(r,S),S.X=F(n,S),S.c=F(t,S),k.x=F(r,k),k.X=F(n,k),k.c=F(t,k);function F(ce,ge){return function(je){var re=[],Se=-1,De=0,_e=ce.length,he,Ie,He;for(je instanceof Date||(je=new Date(+je));++Se<_e;)ce.charCodeAt(Se)===37&&(re.push(ce.slice(De,Se)),(Ie=Vz[he=ce.charAt(++Se)])!=null?he=ce.charAt(++Se):Ie=he==="e"?" ":"0",(He=ge[he])&&(he=He(je,Ie)),re.push(he),De=Se+1);return re.push(ce.slice(De,Se)),re.join("")}}function w(ce,ge){return function(je){var re=wb(1900,void 0,1),Se=C(re,ce,je+="",0),De,_e;if(Se!=je.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ge&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(De=WT(wb(re.y,0,1)),_e=De.getUTCDay(),De=_e>4||_e===0?WS.ceil(De):WS(De),De=c4.offset(De,(re.V-1)*7),re.y=De.getUTCFullYear(),re.m=De.getUTCMonth(),re.d=De.getUTCDate()+(re.w+6)%7):(De=qT(wb(re.y,0,1)),_e=De.getDay(),De=_e>4||_e===0?qS.ceil(De):qS(De),De=r2.offset(De,(re.V-1)*7),re.y=De.getFullYear(),re.m=De.getMonth(),re.d=De.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),_e="Z"in re?WT(wb(re.y,0,1)).getUTCDay():qT(wb(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(_e+5)%7:re.w+re.U*7-(_e+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,WT(re)):qT(re)}}function C(ce,ge,je,re){for(var Se=0,De=ge.length,_e=je.length,he,Ie;Se<De;){if(re>=_e)return-1;if(he=ge.charCodeAt(Se++),he===37){if(he=ge.charAt(Se++),Ie=B[he in Vz?ge.charAt(Se++):he],!Ie||(re=Ie(ce,je,re))<0)return-1}else if(he!=je.charCodeAt(re++))return-1}return re}function N(ce,ge,je){var re=u.exec(ge.slice(je));return re?(ce.p=d.get(re[0].toLowerCase()),je+re[0].length):-1}function P(ce,ge,je){var re=p.exec(ge.slice(je));return re?(ce.w=g.get(re[0].toLowerCase()),je+re[0].length):-1}function D(ce,ge,je){var re=f.exec(ge.slice(je));return re?(ce.w=h.get(re[0].toLowerCase()),je+re[0].length):-1}function T(ce,ge,je){var re=y.exec(ge.slice(je));return re?(ce.m=_.get(re[0].toLowerCase()),je+re[0].length):-1}function U(ce,ge,je){var re=v.exec(ge.slice(je));return re?(ce.m=b.get(re[0].toLowerCase()),je+re[0].length):-1}function R(ce,ge,je){return C(ce,t,ge,je)}function X(ce,ge,je){return C(ce,r,ge,je)}function q(ce,ge,je){return C(ce,n,ge,je)}function Z(ce){return i[ce.getDay()]}function H(ce){return s[ce.getDay()]}function V(ce){return l[ce.getMonth()]}function K(ce){return o[ce.getMonth()]}function ne(ce){return a[+(ce.getHours()>=12)]}function L(ce){return 1+~~(ce.getMonth()/3)}function W(ce){return i[ce.getUTCDay()]}function J(ce){return s[ce.getUTCDay()]}function te(ce){return l[ce.getUTCMonth()]}function ie(ce){return o[ce.getUTCMonth()]}function Ae(ce){return a[+(ce.getUTCHours()>=12)]}function oe(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var ge=F(ce+="",S);return ge.toString=function(){return ce},ge},parse:function(ce){var ge=w(ce+="",!1);return ge.toString=function(){return ce},ge},utcFormat:function(ce){var ge=F(ce+="",k);return ge.toString=function(){return ce},ge},utcParse:function(ce){var ge=w(ce+="",!0);return ge.toString=function(){return ce},ge}}}var Vz={"-":"",_:" ",0:"0"},eo=/^\s*\d+/,Mze=/^%/,Uze=/[\\^$*+?|[\]().{}]/g;function Yn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function Qze(e){return e.replace(Uze,"\\$&")}function Eb(e){return new RegExp("^(?:"+e.map(Qze).join("|")+")","i")}function Cb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Hze(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Vze(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function zze(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function $ze(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Kze(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function zz(e,t,r){var n=eo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function $z(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Gze(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function qze(e,t,r){var n=eo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Wze(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Kz(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Xze(e,t,r){var n=eo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Gz(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Yze(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Jze(e,t,r){var n=eo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Zze(e,t,r){var n=eo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function e$e(e,t,r){var n=eo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function t$e(e,t,r){var n=Mze.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function r$e(e,t,r){var n=eo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function n$e(e,t,r){var n=eo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function qz(e,t){return Yn(e.getDate(),t,2)}function a$e(e,t){return Yn(e.getHours(),t,2)}function s$e(e,t){return Yn(e.getHours()%12||12,t,2)}function i$e(e,t){return Yn(1+r2.count(ah(e),e),t,3)}function ase(e,t){return Yn(e.getMilliseconds(),t,3)}function o$e(e,t){return ase(e,t)+"000"}function l$e(e,t){return Yn(e.getMonth()+1,t,2)}function c$e(e,t){return Yn(e.getMinutes(),t,2)}function u$e(e,t){return Yn(e.getSeconds(),t,2)}function d$e(e){var t=e.getDay();return t===0?7:t}function A$e(e,t){return Yn(u4.count(ah(e)-1,e),t,2)}function sse(e){var t=e.getDay();return t>=4||t===0?Sx(e):Sx.ceil(e)}function f$e(e,t){return e=sse(e),Yn(Sx.count(ah(e),e)+(ah(e).getDay()===4),t,2)}function h$e(e){return e.getDay()}function m$e(e,t){return Yn(qS.count(ah(e)-1,e),t,2)}function p$e(e,t){return Yn(e.getFullYear()%100,t,2)}function g$e(e,t){return e=sse(e),Yn(e.getFullYear()%100,t,2)}function v$e(e,t){return Yn(e.getFullYear()%1e4,t,4)}function x$e(e,t){var r=e.getDay();return e=r>=4||r===0?Sx(e):Sx.ceil(e),Yn(e.getFullYear()%1e4,t,4)}function b$e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yn(t/60|0,"0",2)+Yn(t%60,"0",2)}function Wz(e,t){return Yn(e.getUTCDate(),t,2)}function y$e(e,t){return Yn(e.getUTCHours(),t,2)}function w$e(e,t){return Yn(e.getUTCHours()%12||12,t,2)}function E$e(e,t){return Yn(1+c4.count(sh(e),e),t,3)}function ise(e,t){return Yn(e.getUTCMilliseconds(),t,3)}function C$e(e,t){return ise(e,t)+"000"}function _$e(e,t){return Yn(e.getUTCMonth()+1,t,2)}function S$e(e,t){return Yn(e.getUTCMinutes(),t,2)}function N$e(e,t){return Yn(e.getUTCSeconds(),t,2)}function k$e(e){var t=e.getUTCDay();return t===0?7:t}function B$e(e,t){return Yn(d4.count(sh(e)-1,e),t,2)}function ose(e){var t=e.getUTCDay();return t>=4||t===0?Nx(e):Nx.ceil(e)}function T$e(e,t){return e=ose(e),Yn(Nx.count(sh(e),e)+(sh(e).getUTCDay()===4),t,2)}function I$e(e){return e.getUTCDay()}function j$e(e,t){return Yn(WS.count(sh(e)-1,e),t,2)}function F$e(e,t){return Yn(e.getUTCFullYear()%100,t,2)}function O$e(e,t){return e=ose(e),Yn(e.getUTCFullYear()%100,t,2)}function D$e(e,t){return Yn(e.getUTCFullYear()%1e4,t,4)}function R$e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Nx(e):Nx.ceil(e),Yn(e.getUTCFullYear()%1e4,t,4)}function P$e(){return"+0000"}function Xz(){return"%"}function Yz(e){return+e}function Jz(e){return Math.floor(+e/1e3)}var iv,lse,cse;L$e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function L$e(e){return iv=Lze(e),lse=iv.format,iv.parse,cse=iv.utcFormat,iv.utcParse,iv}function M$e(e){return new Date(e)}function U$e(e){return e instanceof Date?+e:+new Date(+e)}function aP(e,t,r,n,a,s,i,o,l,u){var d=KR(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),v=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),_=u("%b %d"),S=u("%B"),k=u("%Y");function B(F){return(l(F)<F?p:o(F)<F?g:i(F)<F?v:s(F)<F?b:n(F)<F?a(F)<F?y:_:r(F)<F?S:k)(F)}return d.invert=function(F){return new Date(f(F))},d.domain=function(F){return arguments.length?h(Array.from(F,U$e)):h().map(M$e)},d.ticks=function(F){var w=h();return e(w[0],w[w.length-1],F??10)},d.tickFormat=function(F,w){return w==null?B:u(w)},d.nice=function(F){var w=h();return(!F||typeof F.range!="function")&&(F=t(w[0],w[w.length-1],F??10)),F?h(Wae(w,F)):d},d.copy=function(){return t2(d,aP(e,t,r,n,a,s,i,o,l,u))},d}function Q$e(){return Ru.apply(aP(Rze,Pze,ah,rP,u4,r2,eP,JR,cp,lse).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function H$e(){return Ru.apply(aP(Oze,Dze,sh,nP,d4,c4,tP,ZR,cp,cse).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function A4(){var e=0,t=1,r,n,a,s,i=hl,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(a1),u.rangeRound=d(CR),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function gm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function use(){var e=pm(A4()(hl));return e.copy=function(){return gm(e,use())},ph.apply(e,arguments)}function dse(){var e=GR(A4()).domain([1,10]);return e.copy=function(){return gm(e,dse()).base(e.base())},ph.apply(e,arguments)}function Ase(){var e=qR(A4());return e.copy=function(){return gm(e,Ase()).constant(e.constant())},ph.apply(e,arguments)}function sP(){var e=WR(A4());return e.copy=function(){return gm(e,sP()).exponent(e.exponent())},ph.apply(e,arguments)}function V$e(){return sP.apply(null,arguments).exponent(.5)}function fse(){var e=[],t=hl;function r(n){if(n!=null&&!isNaN(n=+n))return t((e2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(V0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>WVe(e,s/n))},r.copy=function(){return fse(t).domain(e)},ph.apply(r,arguments)}function f4(){var e=0,t=.5,r=1,n=1,a,s,i,o,l,u=hl,d,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-s)*(n*v<n*s?o:l),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function g(v){return function(b){var y,_,S;return arguments.length?([y,_,S]=b,u=TUe(v,[y,_,S]),p):[u(0),u(.5),u(1)]}}return p.range=g(a1),p.rangeRound=g(CR),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return d=v,a=v(e),s=v(t),i=v(r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function hse(){var e=pm(f4()(hl));return e.copy=function(){return gm(e,hse())},ph.apply(e,arguments)}function mse(){var e=GR(f4()).domain([.1,1,10]);return e.copy=function(){return gm(e,mse()).base(e.base())},ph.apply(e,arguments)}function pse(){var e=qR(f4());return e.copy=function(){return gm(e,pse()).constant(e.constant())},ph.apply(e,arguments)}function iP(){var e=WR(f4());return e.copy=function(){return gm(e,iP()).exponent(e.exponent())},ph.apply(e,arguments)}function z$e(){return iP.apply(null,arguments).exponent(.5)}function $$e(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const K$e=$$e("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Fa(e){return function(){return e}}const gse=Math.cos,XS=Math.sin,Dd=Math.sqrt,YS=Math.PI,h4=2*YS;function oP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new eze(t)}function lP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vse(e){this._context=e}vse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function m4(e){return new vse(e)}function xse(e){return e[0]}function bse(e){return e[1]}function yse(e,t){var r=Fa(!0),n=null,a=m4,s=null,i=oP(o);e=typeof e=="function"?e:e===void 0?xse:Fa(e),t=typeof t=="function"?t:t===void 0?bse:Fa(t);function o(l){var u,d=(l=lP(l)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,l),+t(f,u,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Fa(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Fa(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Fa(!!l),o):r},o.curve=function(l){return arguments.length?(a=l,n!=null&&(s=a(n)),o):a},o.context=function(l){return arguments.length?(l==null?n=s=null:s=a(n=l),o):n},o}function CC(e,t,r){var n=null,a=Fa(!0),s=null,i=m4,o=null,l=oP(u);e=typeof e=="function"?e:e===void 0?xse:Fa(+e),t=typeof t=="function"?t:Fa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?bse:Fa(+r);function u(f){var h,p,g,v=(f=lP(f)).length,b,y=!1,_,S=new Array(v),k=new Array(v);for(s==null&&(o=i(_=l())),h=0;h<=v;++h){if(!(h<v&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(S[g],k[g]);o.lineEnd(),o.areaEnd()}y&&(S[h]=+e(b,h,f),k[h]=+t(b,h,f),o.point(n?+n(b,h,f):S[h],r?+r(b,h,f):k[h]))}if(_)return o=null,_+""||null}function d(){return yse().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Fa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Fa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Fa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Fa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Fa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Fa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Fa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class wse{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function G$e(e){return new wse(e,!0)}function q$e(e){return new wse(e,!1)}const cP={draw(e,t){const r=Dd(t/YS);e.moveTo(r,0),e.arc(0,0,r,0,h4)}},W$e={draw(e,t){const r=Dd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Ese=Dd(1/3),X$e=Ese*2,Y$e={draw(e,t){const r=Dd(t/X$e),n=r*Ese;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},J$e={draw(e,t){const r=Dd(t),n=-r/2;e.rect(n,n,r,r)}},Z$e=.8908130915292852,Cse=XS(YS/10)/XS(7*YS/10),eKe=XS(h4/10)*Cse,tKe=-gse(h4/10)*Cse,rKe={draw(e,t){const r=Dd(t*Z$e),n=eKe*r,a=tKe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=h4*s/5,o=gse(i),l=XS(i);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*a,l*n+o*a)}e.closePath()}},XT=Dd(3),nKe={draw(e,t){const r=-Dd(t/(XT*3));e.moveTo(0,r*2),e.lineTo(-XT*r,-r),e.lineTo(XT*r,-r),e.closePath()}},du=-.5,Au=Dd(3)/2,ZF=1/Dd(12),aKe=(ZF/2+1)*3,sKe={draw(e,t){const r=Dd(t/aKe),n=r/2,a=r*ZF,s=n,i=r*ZF+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(du*n-Au*a,Au*n+du*a),e.lineTo(du*s-Au*i,Au*s+du*i),e.lineTo(du*o-Au*l,Au*o+du*l),e.lineTo(du*n+Au*a,du*a-Au*n),e.lineTo(du*s+Au*i,du*i-Au*s),e.lineTo(du*o+Au*l,du*l-Au*o),e.closePath()}};function iKe(e,t){let r=null,n=oP(a);e=typeof e=="function"?e:Fa(e||cP),t=typeof t=="function"?t:Fa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Fa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Fa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function JS(){}function ZS(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function _se(e){this._context=e}_se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ZS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ZS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oKe(e){return new _se(e)}function Sse(e){this._context=e}Sse.prototype={areaStart:JS,areaEnd:JS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ZS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lKe(e){return new Sse(e)}function Nse(e){this._context=e}Nse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ZS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cKe(e){return new Nse(e)}function kse(e){this._context=e}kse.prototype={areaStart:JS,areaEnd:JS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uKe(e){return new kse(e)}function Zz(e){return e<0?-1:1}function e$(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(Zz(s)+Zz(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function t$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function YT(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function e5(e){this._context=e}e5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:YT(this,this._t0,t$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,YT(this,t$(this,r=e$(this,e,t)),r);break;default:YT(this,this._t0,r=e$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Bse(e){this._context=new Tse(e)}(Bse.prototype=Object.create(e5.prototype)).point=function(e,t){e5.prototype.point.call(this,t,e)};function Tse(e){this._context=e}Tse.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function dKe(e){return new e5(e)}function AKe(e){return new Bse(e)}function Ise(e){this._context=e}Ise.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=r$(e),a=r$(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function r$(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function fKe(e){return new Ise(e)}function p4(e,t){this._context=e,this._t=t}p4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function hKe(e){return new p4(e,.5)}function mKe(e){return new p4(e,0)}function pKe(e){return new p4(e,1)}function kx(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function e6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function gKe(e,t){return e[t]}function vKe(e){const t=[];return t.key=e,t}function xKe(){var e=Fa([]),t=e6,r=kx,n=gKe;function a(s){var i=Array.from(e.apply(this,arguments),vKe),o,l=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=lP(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Fa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Fa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?e6:typeof s=="function"?s:Fa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??kx,a):r},a}function bKe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}kx(e,t)}}function yKe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}kx(e,t)}}function wKe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var v=e[t[g]],b=v[n][1]||0,y=v[n-1][1]||0;p+=b-y}l+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,kx(e,t)}}var EKe={value:function(){}};function jse(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new p_(r)}function p_(e){this._=e}function CKe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}p_.prototype=jse.prototype={constructor:p_,on:function(e,t){var r=this._,n=CKe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=_Ke(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=n$(r[a],e.name,t);else if(t==null)for(a in r)r[a]=n$(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new p_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function _Ke(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function n$(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=EKe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const SKe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:jse},Symbol.toStringTag,{value:"Module"})),NKe=kde(SKe);var JT,a$;function kKe(){if(a$)return JT;a$=1;const e=NKe.dispatch,t=Math.PI/180,r={archimedean:v,rectangular:b},n=64,a=2048;JT=function(){var k=[256,256],B=s,F=i,w=l,C=o,N=o,P=u,D=d,T=v,U=[],R=1/0,X=e("word","end"),q=null,Z=Math.random,H={},V=_;H.canvas=function(L){return arguments.length?(V=S(L),H):V},H.start=function(){var L=K(V()),W=y((k[0]>>5)*k[1]),J=null,te=U.length,ie=-1,Ae=[],oe=U.map(function(ge,je){return ge.text=B.call(this,ge,je),ge.font=F.call(this,ge,je),ge.style=C.call(this,ge,je),ge.weight=N.call(this,ge,je),ge.rotate=P.call(this,ge,je),ge.size=~~w.call(this,ge,je),ge.padding=D.call(this,ge,je),ge}).sort(function(ge,je){return je.size-ge.size});return q&&clearInterval(q),q=setInterval(ce,0),ce(),H;function ce(){for(var ge=Date.now();Date.now()-ge<R&&++ie<te&&q;){var je=oe[ie];je.x=k[0]*(Z()+.5)>>1,je.y=k[1]*(Z()+.5)>>1,f(L,je,oe,ie),je.hasText&&ne(W,je,J)&&(Ae.push(je),X.call("word",H,je),J?p(J,je):J=[{x:je.x+je.x0,y:je.y+je.y0},{x:je.x+je.x1,y:je.y+je.y1}],je.x-=k[0]>>1,je.y-=k[1]>>1)}ie>=te&&(H.stop(),X.call("end",H,Ae,J))}},H.stop=function(){q&&(clearInterval(q),q=null);for(const L of U)delete L.sprite;return H};function K(L){const W=L.getContext("2d",{willReadFrequently:!0});L.width=L.height=1;const J=Math.sqrt(W.getImageData(0,0,1,1).data.length>>2);return L.width=(n<<5)/J,L.height=a/J,W.fillStyle=W.strokeStyle="red",{context:W,ratio:J}}function ne(L,W,J){k[0],k[1];for(var te=W.x,ie=W.y,Ae=Math.sqrt(k[0]*k[0]+k[1]*k[1]),oe=T(k),ce=Z()<.5?1:-1,ge=-ce,je,re,Se;(je=oe(ge+=ce))&&(re=~~je[0],Se=~~je[1],!(Math.min(Math.abs(re),Math.abs(Se))>=Ae));)if(W.x=te+re,W.y=ie+Se,!(W.x+W.x0<0||W.y+W.y0<0||W.x+W.x1>k[0]||W.y+W.y1>k[1])&&(!J||g(W,J))&&!h(W,L,k[0])){for(var De=W.sprite,_e=W.width>>5,he=k[0]>>5,Ie=W.x-(_e<<4),He=Ie&127,Xe=32-He,ye=W.y1-W.y0,Oe=(W.y+W.y0)*he+(Ie>>5),Pe,qe=0;qe<ye;qe++){Pe=0;for(var Ze=0;Ze<=_e;Ze++)L[Oe+Ze]|=Pe<<Xe|(Ze<_e?(Pe=De[qe*_e+Ze])>>>He:0);Oe+=he}return!0}return!1}return H.timeInterval=function(L){return arguments.length?(R=L??1/0,H):R},H.words=function(L){return arguments.length?(U=L,H):U},H.size=function(L){return arguments.length?(k=[+L[0],+L[1]],H):k},H.font=function(L){return arguments.length?(F=S(L),H):F},H.fontStyle=function(L){return arguments.length?(C=S(L),H):C},H.fontWeight=function(L){return arguments.length?(N=S(L),H):N},H.rotate=function(L){return arguments.length?(P=S(L),H):P},H.text=function(L){return arguments.length?(B=S(L),H):B},H.spiral=function(L){return arguments.length?(T=r[L]||L,H):T},H.fontSize=function(L){return arguments.length?(w=S(L),H):w},H.padding=function(L){return arguments.length?(D=S(L),H):D},H.random=function(L){return arguments.length?(Z=L,H):Z},H.on=function(){var L=X.on.apply(X,arguments);return L===X?H:L},H};function s(k){return k.text}function i(){return"serif"}function o(){return"normal"}function l(k){return Math.sqrt(k.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(k,B,F,w){if(!B.sprite){var C=k.context,N=k.ratio;C.clearRect(0,0,(n<<5)/N,a/N);var P=0,D=0,T=0,U=F.length;for(--w;++w<U;){B=F[w],C.save(),C.font=B.style+" "+B.weight+" "+~~((B.size+1)/N)+"px "+B.font;const je=C.measureText(B.text),re=-Math.floor(je.width/2);let Se=(je.width+1)*N,De=B.size<<1;if(B.rotate){var R=Math.sin(B.rotate*t),X=Math.cos(B.rotate*t),q=Se*X,Z=Se*R,H=De*X,V=De*R;Se=Math.max(Math.abs(q+V),Math.abs(q-V))+31>>5<<5,De=~~Math.max(Math.abs(Z+H),Math.abs(Z-H))}else Se=Se+31>>5<<5;if(De>T&&(T=De),P+Se>=n<<5&&(P=0,D+=T,T=0),D+De>=a)break;C.translate((P+(Se>>1))/N,(D+(De>>1))/N),B.rotate&&C.rotate(B.rotate*t),C.fillText(B.text,re,0),B.padding&&(C.lineWidth=2*B.padding,C.strokeText(B.text,re,0)),C.restore(),B.width=Se,B.height=De,B.xoff=P,B.yoff=D,B.x1=Se>>1,B.y1=De>>1,B.x0=-B.x1,B.y0=-B.y1,B.hasText=!0,P+=Se}for(var K=C.getImageData(0,0,(n<<5)/N,a/N).data,ne=[];--w>=0;)if(B=F[w],!!B.hasText){for(var L=B.width,W=L>>5,J=B.y1-B.y0,te=0;te<J*W;te++)ne[te]=0;if(P=B.xoff,P==null)return;D=B.yoff;for(var ie=0,Ae=-1,oe=0;oe<J;oe++){for(var te=0;te<L;te++){var ce=W*oe+(te>>5),ge=K[(D+oe)*(n<<5)+(P+te)<<2]?1<<31-te%32:0;ne[ce]|=ge,ie|=ge}ie?Ae=oe:(B.y0++,J--,oe--,D++)}B.y1=B.y0+Ae,B.sprite=ne.slice(0,(B.y1-B.y0)*W)}}}function h(k,B,F){F>>=5;for(var w=k.sprite,C=k.width>>5,N=k.x-(C<<4),P=N&127,D=32-P,T=k.y1-k.y0,U=(k.y+k.y0)*F+(N>>5),R,X=0;X<T;X++){R=0;for(var q=0;q<=C;q++)if((R<<D|(q<C?(R=w[X*C+q])>>>P:0))&B[U+q])return!0;U+=F}return!1}function p(k,B){var F=k[0],w=k[1];B.x+B.x0<F.x&&(F.x=B.x+B.x0),B.y+B.y0<F.y&&(F.y=B.y+B.y0),B.x+B.x1>w.x&&(w.x=B.x+B.x1),B.y+B.y1>w.y&&(w.y=B.y+B.y1)}function g(k,B){return k.x+k.x1>B[0].x&&k.x+k.x0<B[1].x&&k.y+k.y1>B[0].y&&k.y+k.y0<B[1].y}function v(k){var B=k[0]/k[1];return function(F){return[B*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function b(k){var B=4,F=B*k[0]/k[1],w=0,C=0;return function(N){var P=N<0?-1:1;switch(Math.sqrt(1+4*P*N)-P&3){case 0:w+=F;break;case 1:C+=B;break;case 2:w-=F;break;default:C-=B;break}return[w,C]}}function y(k){for(var B=[],F=-1;++F<k;)B[F]=0;return B}function _(){return document.createElement("canvas")}function S(k){return typeof k=="function"?k:function(){return k}}return JT}var BKe=kKe();const TKe=bl(BKe),IKe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),jKe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),FKe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),OKe=e=>{const[t,r]=j.useState([]),[n,a]=j.useState(!0),[s,i]=j.useState(null),o=j.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return j.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let l;const u=d=>{r(d),a(!1),i(null)};if(o)l=RVe(u);else{const d=e.email||e.id||"";l=PVe(u,d)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},DKe=({plan:e,onClose:t})=>c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),c.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(jKe,{})})]}),c.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),c.jsx("div",{className:"mt-3",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),c.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>c.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?c.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>c.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[c.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),s$=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],RKe=["1º Medio","2º Medio","3º Medio","4º Medio"],PKe=({words:e})=>{const t=j.useRef(null);return j.useEffect(()=>{if(!e.length||!t.current)return;const r=Eu(t.current);r.selectAll("*").remove();const n=TKe().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>o4(K$e)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),c.jsx("svg",{ref:t})},LKe=({planificaciones:e})=>{const[t,r]=j.useState("todos"),[n,a]=j.useState("todos"),s=j.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=j.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=j.useMemo(()=>{const d=s$.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,v)=>{d[g]!==void 0&&(d[g]+=s$.length-v)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),l=j.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,v;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((v=p.reflexionUnidad)==null?void 0:v.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[c.jsx("option",{value:"todos",children:"Todos los Niveles"}),RKe.map(d=>c.jsx("option",{value:d,children:d},d))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>c.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):c.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),c.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?c.jsx(PKe,{words:l}):c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},MKe=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=OKe(e),[s,i]=j.useState("seguimiento"),[o,l]=j.useState("1º"),[u,d]=j.useState(null),[f,h]=j.useState(null),p=j.useMemo(()=>{const b={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{children:"Usuario no autenticado."})});if(r)return c.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[c.jsx(FKe,{}),c.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return c.jsx("div",{className:"text-center py-8",children:c.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const v=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>l(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):c.jsx("div",{className:"space-y-4",children:qi.map(b=>{const y=p.filter(S=>S.asignatura===b);if(y.length===0)return null;const _=u===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>d(_?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform ${_?"rotate-180":""}`,children:c.jsx(IKe,{})})]}),_&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:c.jsx("ul",{className:"space-y-3",children:y.map(S=>c.jsx("li",{children:c.jsxs("button",{onClick:()=>h(S),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:S.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",S.autor||"N/A"]})]})},S.id))})})]},b)})})]});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&c.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),c.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&v(),s==="analisis"&&c.jsx(LKe,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&c.jsx(DKe,{plan:f,onClose:()=>h(null)})]})},g4="analisisTaxonomicos",UKe=async()=>{try{const e=tr(Ut(Rr,g4),Kr("uploadDate","desc"));return(await Ss(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},QKe=async e=>{if(!e)return[];try{const t=tr(Ut(Rr,g4),In("userId","==",e),Kr("uploadDate","desc"));return(await Ss(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},HKe=async e=>{try{return{id:(await Jn(Ut(Rr,g4),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},VKe=async e=>{try{const t=hr(Rr,g4,e);await Is(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},i$=["1º Medio","2º Medio","3º Medio","4º Medio"],kf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],ov={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},zKe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o$=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState(!1),[s,i]=j.useState(null),[o,l]=j.useState(null),[u,d]=j.useState(""),[f,h]=j.useState(!1),[p,g]=j.useState(null),[v,b]=j.useState(null),[y,_]=j.useState(""),[S,k]=j.useState(""),[B,F]=j.useState(""),[w,C]=j.useState(""),[N,P]=j.useState("resumen"),D=j.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const V=e.profile==="SUBDIRECCION"?await UKe():await QKe(e.id);r(V),i(null)}catch(V){console.error("Error al cargar análisis:",V),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);j.useEffect(()=>{D()},[D]);const T=async V=>{var ne;const K=(ne=V.target.files)==null?void 0:ne[0];if(K){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(K.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(K),d(K.name),i(null);const W=new FileReader;W.onloadend=()=>{var te;const J=(te=W.result)==null?void 0:te.split(",")[1];if(!J){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),b(null);return}b({mimeType:K.type,data:J})},W.onerror=()=>i("Error al leer el archivo."),W.readAsDataURL(K)}},U=async()=>{if(!u.trim()||!v){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!S){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const V=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,K={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:kf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:kf.reduce((ne,L)=>({...ne,[L]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{em("Análisis Taxonómico",e);const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new os(ne).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:K}}),J={inlineData:{mimeType:v.mimeType,data:v.data}},ie=(await W.generateContent([V,J])).response.text();let Ae;try{Ae=JSON.parse(ie)}catch(ge){throw console.error("Error al parsear JSON:",ge),console.error("Respuesta recibida (no es JSON válido):",ie),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const oe={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:Ae.analysisResults,summary:Ae.summary,nivel:y,asignatura:S},ce=await HKe(oe);await D(),l(ce),d(""),g(null),b(null),_(""),k("")}catch(ne){console.error(ne);const L=ne instanceof Error?ne.message:"Hubo un error al analizar el documento.";i(L)}finally{h(!1)}},R=async V=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await VKe(V),await D(),(o==null?void 0:o.id)===V&&l(null)}catch{i("No se pudo eliminar el análisis.")}},X=j.useMemo(()=>t.filter(V=>{const K=B?V.nivel===B:!0,ne=w?V.asignatura===w:!0;return K&&ne}),[t,B,w]),q=j.useMemo(()=>{const V={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};X.forEach(ne=>{kf.forEach(L=>{var J;const W=((J=ne.summary)==null?void 0:J[L])||0;V[L]+=W})});const K=Object.values(V).reduce((ne,L)=>ne+L,0);return{acc:V,total:K}},[X]),Z=j.useMemo(()=>{const V=new Map;X.forEach(ne=>{const L=ne.asignatura||"Sin asignatura";V.has(L)||V.set(L,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const W=V.get(L);kf.forEach(J=>{var te;W[J]+=((te=ne.summary)==null?void 0:te[J])||0})});const K=Array.from(V.entries()).map(([ne,L])=>({asignatura:ne,counts:L,total:Object.values(L).reduce((W,J)=>W+J,0)}));return K.sort((ne,L)=>L.total-ne.total),K},[X]),H=j.useMemo(()=>o?Object.values(o.summary).reduce((V,K)=>V+(K||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:T,accept:".pdf,.doc,.docx"}),c.jsx("span",{children:"Cargue un archivo"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:y,onChange:V=>_(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),i$.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:S,onChange:V=>k(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(V=>c.jsx("option",{value:V,children:V},V))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:V=>d(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:U,disabled:f||!v,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?c.jsx(zKe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?c.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(V=>c.jsxs("button",{onClick:()=>l(V),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===V.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:V.documentName}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(V.uploadDate).toLocaleString("es-CL")}),(V.nivel||V.asignatura)&&c.jsxs("p",{className:"text-xs text-slate-500",children:[V.nivel||"Nivel s/i"," • ",V.asignatura||"Asignatura s/i"]})]},V.id))})]})]}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:c.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),c.jsxs("select",{value:B,onChange:V=>F(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos"}),i$.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),c.jsxs("select",{value:w,onChange:V=>C(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas"}),qi.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsx("button",{type:"button",onClick:()=>{F(""),C("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>P("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),c.jsx("button",{onClick:()=>P("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),N==="resumen"?c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[X.length," análisis considerados"]})]}),c.jsx("div",{className:"space-y-3",children:kf.map(V=>{const K=q.acc[V],ne=q.total>0?K/q.total*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:V}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[K," (",ne.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${ov[V]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},V)})}),c.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:kf.map(V=>c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[c.jsx("span",{className:"text-sm",children:V}),c.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${ov[V]}`,children:q.acc[V]})]},V))})]}):c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," asignaturas comparadas"]})]}),Z.length===0?c.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):c.jsx("div",{className:"space-y-5",children:Z.map(V=>{const K=V.total||1;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:V.asignatura}),c.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[V.total," ítems"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:kf.map(ne=>{const L=V.counts[ne]||0,W=L/K*100;return c.jsx("div",{className:`${ov[ne]} h-5`,style:{width:`${W}%`},title:`${ne}: ${L} (${W.toFixed(0)}%)`},ne)})}),c.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:kf.map(ne=>c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:`inline-block w-3 h-3 rounded ${ov[ne]}`}),c.jsx("span",{children:ne})]},ne))})]},V.asignatura)})})]})]}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&c.jsxs(c.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),c.jsx("button",{onClick:()=>R(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",H," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:kf.map(V=>{const K=o.summary[V]||0,ne=H>0?K/H*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:V}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[K," (",ne.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${ov[V]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},V)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((V,K)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:V.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${ov[V.habilidadBloom]}`,children:V.habilidadBloom})})]},K))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},t5="empresas_practicas",$Ke="usuarios",uP="rutas_supervision",dP=e=>{const t=e.data();return{id:e.id,...t}};async function KKe(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const GKe=e=>{const t=tr(Ut(jt,t5),Kr("nombre","asc"));return vr(t,r=>{const n=r.docs.map(a=>dP(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},qKe=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await KKe(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=hr(jt,t5,n);return await Ji(s,a,{merge:!0}),n}else return(await Jn(Ut(jt,t5),{...r,createdAt:Z0()})).id},WKe=async e=>{const t=hr(jt,t5,e);await Is(t)},XKe=e=>{const t=tr(Ut(jt,$Ke),In("profile","==","PROFESORADO"),Kr("nombreCompleto","asc"));return vr(t,r=>{const n=r.docs.map(a=>dP(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},YKe=async e=>(await Jn(Ut(jt,uP),{...e,createdAt:Z0()})).id,JKe=e=>{const t=tr(Ut(jt,uP),Kr("createdAt","desc"));return vr(t,r=>{const n=r.docs.map(a=>dP(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},ZKe=async e=>{const t=hr(jt,uP,e);await Is(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cp=function(){return Cp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Cp.apply(this,arguments)};function eGe(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{l(n.next(u))}catch(d){s(d)}}function o(u){try{l(n.throw(u))}catch(d){s(d)}}function l(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}l((n=n.apply(e,[])).next())})}function tGe(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Or.apply(this,arguments)}function _p(e){return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function Fse(e){var t=function(r,n){if(_p(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(_p(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return _p(t)==="symbol"?t:String(t)}function kv(e,t,r){return(t=Fse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l$(Object(r),!0).forEach(function(n){kv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fse(n.key),n)}}function t6(e,t){return t6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},t6(e,t)}function r5(e){return r5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r5(e)}function rGe(e,t){if(t&&(_p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function nGe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=r5(e);if(t){var a=r5(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return rGe(this,r)}}function r6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ose(e,t){if(e){if(typeof e=="string")return r6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?r6(e,t):void 0}}function AP(e){return function(t){if(Array.isArray(t))return r6(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Ose(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var aGe=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),fu="-ms-",u$="-moz-",Zn="-webkit-",fP="decl",Dse="@keyframes",sGe=Math.abs,v4=String.fromCharCode,iGe=Object.assign;function Rse(e){return e.trim()}function ia(e,t,r){return e.replace(t,r)}function n6(e,t){return e.indexOf(t)}function Ao(e,t){return 0|e.charCodeAt(t)}function mw(e,t,r){return e.slice(t,r)}function yA(e){return e.length}function hP(e){return e.length}function _C(e,t){return t.push(e),e}var x4=1,Bx=1,Pse=0,Yl=0,Ai=0,s1="";function b4(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:x4,column:Bx,length:i,return:""}}function _b(e,t){return iGe(b4("",null,null,"",null,null,0),e,{length:-e.length},t)}function jc(){return Ai=Yl<Pse?Ao(s1,Yl++):0,Bx++,Ai===10&&(Bx=1,x4++),Ai}function LA(){return Ao(s1,Yl)}function g_(){return Yl}function n2(e,t){return mw(s1,e,t)}function pw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lse(e){return x4=Bx=1,Pse=yA(s1=e),Yl=0,[]}function Mse(e){return s1="",e}function v_(e){return Rse(n2(Yl-1,a6(e===91?e+2:e===40?e+1:e)))}function oGe(e){for(;(Ai=LA())&&Ai<33;)jc();return pw(e)>2||pw(Ai)>3?"":" "}function lGe(e,t){for(;--t&&jc()&&!(Ai<48||Ai>102||Ai>57&&Ai<65||Ai>70&&Ai<97););return n2(e,g_()+(t<6&&LA()==32&&jc()==32))}function a6(e){for(;jc();)switch(Ai){case e:return Yl;case 34:case 39:e!==34&&e!==39&&a6(Ai);break;case 40:e===41&&a6(e);break;case 92:jc()}return Yl}function cGe(e,t){for(;jc()&&e+Ai!==57&&(e+Ai!==84||LA()!==47););return"/*"+n2(t,Yl-1)+"*"+v4(e===47?e:jc())}function uGe(e){for(;!pw(LA());)jc();return n2(e,Yl)}function d$(e){return Mse(x_("",null,null,null,[""],e=Lse(e),0,[0],e))}function x_(e,t,r,n,a,s,i,o,l){for(var u=0,d=0,f=i,h=0,p=0,g=0,v=1,b=1,y=1,_=0,S="",k=a,B=s,F=n,w=S;b;)switch(g=_,_=jc()){case 40:if(g!=108&&Ao(w,f-1)==58){n6(w+=ia(v_(_),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:w+=v_(_);break;case 9:case 10:case 13:case 32:w+=oGe(g);break;case 92:w+=lGe(g_()-1,7);continue;case 47:switch(LA()){case 42:case 47:_C(dGe(cGe(jc(),g_()),t,r),l);break;default:w+="/"}break;case 123*v:o[u++]=yA(w)*y;case 125*v:case 59:case 0:switch(_){case 0:case 125:b=0;case 59+d:p>0&&yA(w)-f&&_C(p>32?f$(w+";",n,r,f-1):f$(ia(w," ","")+";",n,r,f-2),l);break;case 59:w+=";";default:if(_C(F=A$(w,t,r,u,d,a,o,S,k=[],B=[],f),s),_===123)if(d===0)x_(w,t,F,F,k,s,f,o,B);else switch(h===99&&Ao(w,3)===110?100:h){case 100:case 109:case 115:x_(e,F,F,n&&_C(A$(e,F,F,0,0,a,o,S,a,k=[],f),B),a,B,f,o,n?k:B);break;default:x_(w,F,F,F,[""],B,0,o,B)}}u=d=p=0,v=y=1,S=w="",f=i;break;case 58:f=1+yA(w),p=g;default:if(v<1){if(_==123)--v;else if(_==125&&v++==0&&(Ai=Yl>0?Ao(s1,--Yl):0,Bx--,Ai===10&&(Bx=1,x4--),Ai==125))continue}switch(w+=v4(_),_*v){case 38:y=d>0?1:(w+="\f",-1);break;case 44:o[u++]=(yA(w)-1)*y,y=1;break;case 64:LA()===45&&(w+=v_(jc())),h=LA(),d=f=yA(S=w+=uGe(g_())),_++;break;case 45:g===45&&yA(w)==2&&(v=0)}}return s}function A$(e,t,r,n,a,s,i,o,l,u,d){for(var f=a-1,h=a===0?s:[""],p=hP(h),g=0,v=0,b=0;g<n;++g)for(var y=0,_=mw(e,f+1,f=sGe(v=i[g])),S=e;y<p;++y)(S=Rse(v>0?h[y]+" "+_:ia(_,/&\f/g,h[y])))&&(l[b++]=S);return b4(e,t,r,a===0?"rule":o,l,u,d)}function dGe(e,t,r){return b4(e,t,r,"comm",v4(Ai),mw(e,2,-2),0)}function f$(e,t,r,n){return b4(e,t,r,fP,mw(e,0,n),mw(e,n+1,-1),n)}function Sp(e,t){for(var r="",n=hP(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function h$(e,t,r,n){switch(e.type){case"@import":case fP:return e.return=e.return||e.value;case"comm":return"";case Dse:return e.return=e.value+"{"+Sp(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return yA(r=Sp(e.children,n))?e.return=e.value+"{"+r+"}":""}function m$(e){var t=hP(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function AGe(e){return function(t){t.root||(t=t.return)&&e(t)}}function Use(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var fGe=function(e,t,r){for(var n=0,a=0;n=a,a=LA(),n===38&&a===12&&(t[r]=1),!pw(a);)jc();return n2(e,Yl)},hGe=function(e,t){return Mse(function(r,n){var a=-1,s=44;do switch(pw(s)){case 0:s===38&&LA()===12&&(n[a]=1),r[a]+=fGe(Yl-1,n,a);break;case 2:r[a]+=v_(s);break;case 4:if(s===44){r[++a]=LA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=v4(s)}while(s=jc());return r}(Lse(e),t))},p$=new WeakMap,mGe=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||p$.get(r))&&!n){p$.set(e,!0);for(var a=[],s=hGe(t,a),i=r.props,o=0,l=0;o<s.length;o++)for(var u=0;u<i.length;u++,l++)e.props[l]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},pGe=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Qse(e,t){switch(function(r,n){return 45^Ao(r,0)?(((n<<2^Ao(r,0))<<2^Ao(r,1))<<2^Ao(r,2))<<2^Ao(r,3):0}(e,t)){case 5103:return Zn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zn+e+u$+e+fu+e+e;case 6828:case 4268:return Zn+e+fu+e+e;case 6165:return Zn+e+fu+"flex-"+e+e;case 5187:return Zn+e+ia(e,/(\w+).+(:[^]+)/,Zn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Zn+e+fu+"flex-item-"+ia(e,/flex-|-self/,"")+e;case 4675:return Zn+e+fu+"flex-line-pack"+ia(e,/align-content|flex-|-self/,"")+e;case 5548:return Zn+e+fu+ia(e,"shrink","negative")+e;case 5292:return Zn+e+fu+ia(e,"basis","preferred-size")+e;case 6060:return Zn+"box-"+ia(e,"-grow","")+Zn+e+fu+ia(e,"grow","positive")+e;case 4554:return Zn+ia(e,/([^-])(transform)/g,"$1"+Zn+"$2")+e;case 6187:return ia(ia(ia(e,/(zoom-|grab)/,Zn+"$1"),/(image-set)/,Zn+"$1"),e,"")+e;case 5495:case 3959:return ia(e,/(image-set\([^]*)/,Zn+"$1$`$1");case 4968:return ia(ia(e,/(.+:)(flex-)?(.*)/,Zn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zn+e+e;case 4095:case 3583:case 4068:case 2532:return ia(e,/(.+)-inline(.+)/,Zn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(yA(e)-1-t>6)switch(Ao(e,t+1)){case 109:if(Ao(e,t+4)!==45)break;case 102:return ia(e,/(.+:)(.+)-([^]+)/,"$1"+Zn+"$2-$3$1"+u$+(Ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~n6(e,"stretch")?Qse(ia(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ao(e,t+1)!==115)break;case 6444:switch(Ao(e,yA(e)-3-(~n6(e,"!important")&&10))){case 107:return ia(e,":",":"+Zn)+e;case 101:return ia(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zn+(Ao(e,14)===45?"inline-":"")+"box$3$1"+Zn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Ao(e,t+11)){case 114:return Zn+e+fu+ia(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zn+e+fu+ia(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zn+e+fu+ia(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zn+e+fu+e+e}return e}var g$,SC,b_=typeof document<"u",gGe=b_?void 0:(g$=function(){return Use(function(){var e={};return function(t){return e[t]}})},SC=new WeakMap,function(e){if(SC.has(e))return SC.get(e);var t=g$(e);return SC.set(e,t),t}),vGe=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case fP:e.return=Qse(e.value,e.length);break;case Dse:return Sp([_b(e,{value:ia(e.value,"@","@"+Zn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sp([_b(e,{props:[ia(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Sp([_b(e,{props:[ia(a,/:(plac\w+)/,":"+Zn+"input-$1")]}),_b(e,{props:[ia(a,/:(plac\w+)/,":-moz-$1")]}),_b(e,{props:[ia(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],Hse=function(e){var t=e.key;if(b_&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||vGe,a,s,i={},o=[];b_&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var _=y.getAttribute("data-emotion").split(" "),S=1;S<_.length;S++)i[_[S]]=!0;o.push(y)}));var l=[mGe,pGe];if(b_){var u,d=[h$,AGe(function(y){u.insert(y)})],f=m$(l.concat(n,d));s=function(y,_,S,k){u=S,Sp(d$(y?y+"{"+_.styles+"}":_.styles),f),k&&(b.inserted[_.name]=!0)}}else{var h=[h$],p=m$(l.concat(n,h)),g=gGe(n)(t),v=function(y,_){var S=_.name;return g[S]===void 0&&(g[S]=Sp(d$(y?y+"{"+_.styles+"}":_.styles),p)),g[S]};s=function(y,_,S,k){var B=_.name,F=v(y,_);return b.compat===void 0?(k&&(b.inserted[B]=!0),F):k?void(b.inserted[B]=F):F}}var b={key:t,sheet:new aGe({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function la(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var to=typeof Symbol=="function"&&Symbol.for,s6=to?Symbol.for("react.element"):60103,i6=to?Symbol.for("react.portal"):60106,y_=to?Symbol.for("react.fragment"):60107,w_=to?Symbol.for("react.strict_mode"):60108,E_=to?Symbol.for("react.profiler"):60114,C_=to?Symbol.for("react.provider"):60109,__=to?Symbol.for("react.context"):60110,o6=to?Symbol.for("react.async_mode"):60111,n5=to?Symbol.for("react.concurrent_mode"):60111,S_=to?Symbol.for("react.forward_ref"):60112,N_=to?Symbol.for("react.suspense"):60113,xGe=to?Symbol.for("react.suspense_list"):60120,k_=to?Symbol.for("react.memo"):60115,B_=to?Symbol.for("react.lazy"):60116,bGe=to?Symbol.for("react.block"):60121,yGe=to?Symbol.for("react.fundamental"):60117,wGe=to?Symbol.for("react.responder"):60118,EGe=to?Symbol.for("react.scope"):60119;function xc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case s6:switch(e=e.type){case o6:case n5:case y_:case E_:case w_:case N_:return e;default:switch(e=e&&e.$$typeof){case __:case S_:case B_:case k_:case C_:return e;default:return t}}case i6:return t}}}function v$(e){return xc(e)===n5}var CGe={AsyncMode:o6,ConcurrentMode:n5,ContextConsumer:__,ContextProvider:C_,Element:s6,ForwardRef:S_,Fragment:y_,Lazy:B_,Memo:k_,Portal:i6,Profiler:E_,StrictMode:w_,Suspense:N_,isAsyncMode:function(e){return v$(e)||xc(e)===o6},isConcurrentMode:v$,isContextConsumer:function(e){return xc(e)===__},isContextProvider:function(e){return xc(e)===C_},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===s6},isForwardRef:function(e){return xc(e)===S_},isFragment:function(e){return xc(e)===y_},isLazy:function(e){return xc(e)===B_},isMemo:function(e){return xc(e)===k_},isPortal:function(e){return xc(e)===i6},isProfiler:function(e){return xc(e)===E_},isStrictMode:function(e){return xc(e)===w_},isSuspense:function(e){return xc(e)===N_},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===y_||e===n5||e===E_||e===w_||e===N_||e===xGe||typeof e=="object"&&e!==null&&(e.$$typeof===B_||e.$$typeof===k_||e.$$typeof===C_||e.$$typeof===__||e.$$typeof===S_||e.$$typeof===yGe||e.$$typeof===wGe||e.$$typeof===EGe||e.$$typeof===bGe)},typeOf:xc};la(function(e,t){});var x$=la(function(e){e.exports=CGe}),b$={};b$[x$.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b$[x$.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var l6=typeof document<"u";function Vse(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var mP=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||l6===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},pP=function(e,t,r){mP(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);l6||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!l6&&a.length!==0)return a}},_Ge={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},SGe=/[A-Z]|^ms/g,NGe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zse=function(e){return e.charCodeAt(1)===45},y$=function(e){return e!=null&&typeof e!="boolean"},ZT=Use(function(e){return zse(e)?e:e.replace(SGe,"-$&").toLowerCase()}),w$=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(NGe,function(r,n,a){return wA={name:n,styles:a,next:wA},n})}return _Ge[e]===1||zse(e)||typeof t!="number"||t===0?t:t+"px"};function Sy(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return wA={name:r.name,styles:r.styles,next:wA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)wA={name:n.name,styles:n.styles,next:wA},n=n.next;var a=r.styles+";";return a}return function(l,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=Sy(l,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":y$(g)&&(f+=ZT(p)+":"+w$(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var v=Sy(l,u,g);switch(p){case"animation":case"animationName":f+=ZT(p)+":"+v+";";break;default:f+=p+"{"+v+"}"}}else for(var b=0;b<g.length;b++)y$(g[b])&&(f+=ZT(p)+":"+w$(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=wA,i=r(e);return wA=s,Sy(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var wA,E$=/label:\s*([^\s;\n{]+)\s*(;|$)/g,y4=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";wA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=Sy(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=Sy(r,t,e[i]),n&&(a+=s[i]);E$.lastIndex=0;for(var o,l="";(o=E$.exec(a))!==null;)l+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+l;return{name:u,styles:a,next:wA}},kGe=typeof document<"u",BGe=function(e){return e()},$se=!!j.useInsertionEffect&&j.useInsertionEffect,Kse=kGe&&$se||BGe,C$=$se||j.useLayoutEffect,tx=typeof document<"u",gP={}.hasOwnProperty,a5=j.createContext(typeof HTMLElement<"u"?Hse({key:"css"}):null);a5.Provider;var w4=function(e){return j.forwardRef(function(t,r){var n=j.useContext(a5);return e(t,n,r)})};tx||(w4=function(e){return function(t){var r=j.useContext(a5);return r===null?(r=Hse({key:"css"}),j.createElement(a5.Provider,{value:r},e(t,r))):e(t,r)}});var vP=j.createContext({}),c6="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",TGe=function(e,t){var r={};for(var n in t)gP.call(t,n)&&(r[n]=t[n]);return r[c6]=e,r},IGe=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;mP(t,r,n);var a=Kse(function(){return pP(t,r,n)});if(!tx&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return j.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},jGe=w4(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[c6],s=[n],i="";typeof e.className=="string"?i=Vse(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=y4(s,void 0,j.useContext(vP));i+=t.key+"-"+o.name;var l={};for(var u in e)!gP.call(e,u)||u==="css"||u===c6||(l[u]=e[u]);return l.ref=r,l.className=i,j.createElement(j.Fragment,null,j.createElement(IGe,{cache:t,serialized:o,isStringTag:typeof a=="string"}),j.createElement(a,l))});la(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var kr=function(e,t){var r=arguments;if(t==null||!gP.call(t,"css"))return j.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=jGe,a[1]=TGe(e,t);for(var s=2;s<n;s++)a[s]=r[s];return j.createElement.apply(null,a)};w4(function(e,t){var r=e.styles,n=y4([r],void 0,j.useContext(vP));if(!tx){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var l=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,l);return l?null:j.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=j.useRef();return C$(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),C$(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&pP(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function xP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y4(t)}var FGe=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function OGe(e,t,r){var n=[],a=Vse(e,n,r);return n.length<2?r:a+t(n)}var DGe=function(e){var t,r=e.cache,n=e.serializedArr,a=Kse(function(){for(var s="",i=0;i<n.length;i++){var o=pP(r,n[i],!1);tx||o===void 0||(s+=o)}if(!tx)return s});return tx||a.length===0?null:j.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};w4(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=y4(o,t.registered);return r.push(u),mP(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return OGe(t.registered,n,FGe(o))},theme:j.useContext(vP)},s=e.children(a);return j.createElement(j.Fragment,null,j.createElement(DGe,{cache:t,serializedArr:r}),s)});function Qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,l,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(f)throw i}}return u}}(e,t)||Ose(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function EA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var l,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)l=f[u],o.indexOf(l)>=0||(d[l]=i[l]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zf(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gse(e){return zf(e).getComputedStyle(e)}const NC=Math.round;function qse(e){return Xse(e)?(e.nodeName||"").toLowerCase():""}let kC;function Wse(e){return e instanceof zf(e).HTMLElement}function T_(e){return e instanceof zf(e).Element}function Xse(e){return e instanceof zf(e).Node}function _$(e){return typeof ShadowRoot>"u"?!1:e instanceof zf(e).ShadowRoot||e instanceof ShadowRoot}function Yse(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Gse(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function RGe(){return/^((?!chrome|android).)*safari/i.test(function(){if(kC)return kC;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(kC=e.brands.map(t=>t.brand+"/"+t.version).join(" "),kC):navigator.userAgent}())}function Jse(e){return T_(e)?e:e.contextElement}const Zse={x:1,y:1};function S$(e){const t=Jse(e);if(!Wse(t))return Zse;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(l){const u=Gse(l);let d=parseFloat(u.width),f=parseFloat(u.height);const h=l.offsetWidth,p=l.offsetHeight,g=NC(d)!==h||NC(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?NC(r.width):r.width)/n,o=(s?NC(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function N$(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=Jse(e);let l=Zse;t&&(l=S$(e));const u=o?zf(o):window,d=RGe()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/l.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,p=i.width/l.x,g=i.height/l.y;if(o){const v=zf(o),b=n;let y=v.frameElement;for(;y&&n&&b!==v;){const _=S$(y),S=y.getBoundingClientRect(),k=getComputedStyle(y);S.x+=(y.clientLeft+parseFloat(k.paddingLeft))*_.x,S.y+=(y.clientTop+parseFloat(k.paddingTop))*_.y,f*=_.x,h*=_.y,p*=_.x,g*=_.y,f+=S.x,h+=S.y,y=zf(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function PGe(e){if(qse(e)==="html")return e;const t=e.assignedSlot||e.parentNode||_$(e)&&e.host||function(r){return((Xse(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return _$(t)?t.host:t}function eie(e){const t=PGe(e);return function(r){return["html","body","#document"].includes(qse(r))}(t)?t.ownerDocument.body:Wse(t)&&Yse(t)?t:eie(t)}function I_(e,t){var r;t===void 0&&(t=[]);const n=eie(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=zf(n);return a?t.concat(s,s.visualViewport||[],Yse(n)?n:[]):t.concat(n,I_(n))}var u6=typeof document<"u"?j.useLayoutEffect:j.useEffect,LGe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],s5=function(){};function MGe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function UGe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(MGe(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var k$=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):_p(e)==="object"&&e!==null?[e]:[];var t},B$=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,yr({},EA(e,LGe))},bs=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function E4(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function tie(e){return E4(e)?window.pageYOffset:e.scrollTop}function i5(e,t){E4(e)?window.scrollTo(0,t):e.scrollTop=t}function QGe(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function BC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s5,a=tie(e),s=t-a,i=10,o=0;function l(){var u=QGe(o+=i,a,s,r);i5(e,u),o<r?window.requestAnimationFrame(l):n(e)}l()}function T$(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?i5(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&i5(e,Math.max(t.offsetTop-a,0))}function I$(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var rie=!1,HGe={get passive(){return rie=!0}},TC=typeof window<"u"?window:{};TC.addEventListener&&TC.removeEventListener&&(TC.addEventListener("p",s5,HGe),TC.removeEventListener("p",s5,!1));var VGe=rie;function zGe(e){return e!=null}function IC(e,t,r){return e?t:r}var $Ge=["children","innerProps"],KGe=["children","innerProps"];function GGe(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,l=function(X){var q=getComputedStyle(X),Z=q.position==="absolute",H=/(auto|scroll)/;if(q.position==="fixed")return document.documentElement;for(var V=X;V=V.parentElement;)if(q=getComputedStyle(V),(!Z||q.position!=="static")&&H.test(q.overflow+q.overflowY+q.overflowX))return V;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=l.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,v=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||E4(d=l)?window.innerHeight:d.clientHeight,_=tie(l),S=parseInt(getComputedStyle(r).marginBottom,10),k=parseInt(getComputedStyle(r).marginTop,10),B=b-k,F=y-v,w=B+_,C=f-_-v,N=p-y+_+S,P=_+v-k,D=160;switch(a){case"auto":case"bottom":if(F>=g)return{placement:"bottom",maxHeight:t};if(C>=g&&!i)return s&&BC(l,N,D),{placement:"bottom",maxHeight:t};if(!i&&C>=n||i&&F>=n)return s&&BC(l,N,D),{placement:"bottom",maxHeight:i?F-S:C-S};if(a==="auto"||i){var T=t,U=i?B:w;return U>=n&&(T=Math.min(U-S-o,t)),{placement:"top",maxHeight:T}}if(a==="bottom")return s&&i5(l,N),{placement:"bottom",maxHeight:t};break;case"top":if(B>=g)return{placement:"top",maxHeight:t};if(w>=g&&!i)return s&&BC(l,P,D),{placement:"top",maxHeight:t};if(!i&&w>=n||i&&B>=n){var R=t;return(!i&&w>=n||i&&B>=n)&&(R=i?B-k:w-k),s&&BC(l,P,D),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var j$,nie=function(e){return e==="auto"?"bottom":e},aie=j.createContext(null),qGe=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,l=(j.useContext(aie)||{}).setPortalPlacement,u=j.useRef(null),d=Qi(j.useState(n),2),f=d[0],h=d[1],p=Qi(j.useState(null),2),g=p[0],v=p[1],b=o.spacing.controlHeight;return u6(function(){var y=u.current;if(y){var _=s==="fixed",S=GGe({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!_,isFixedPosition:_,controlHeight:b});h(S.maxHeight),v(S.placement),l==null||l(S.placement)}},[n,a,s,i,r,l,b]),t({ref:u,placerProps:yr(yr({},e),{},{placement:g||nie(a),maxHeight:f})})},WGe=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return kr("div",Or({},bs(e,"menu",{menu:!0}),{ref:r},n),t)},sie=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return yr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},XGe=sie,YGe=sie,JGe=["size"],ZGe=["innerProps","isRtl","size"],e3,t3,eqe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},iie=function(e){var t=e.size,r=EA(e,JGe);return kr("svg",Or({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:eqe},r))},r3=function(e){return kr(iie,Or({size:20},e),kr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},F$=function(e){return kr(iie,Or({size:20},e),kr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},oie=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return yr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},tqe=oie,rqe=oie,nqe=function(){var e=xP.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(j$||(e3=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],t3||(t3=e3.slice(0)),j$=Object.freeze(Object.defineProperties(e3,{raw:{value:Object.freeze(t3)}})))),n3=function(e){var t=e.delay,r=e.offset;return kr("span",{css:xP({animation:"".concat(nqe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},aqe=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return kr("div",Or({ref:a},bs(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},sqe=["data"],iqe=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,l=e.label,u=e.theme,d=e.selectProps;return kr("div",Or({},bs(e,"group",{group:!0}),o),kr(s,Or({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),l),kr("div",null,t))},oqe=["innerRef","isDisabled","isHidden","inputClassName"],lie={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},lqe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":yr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},lie)},cqe=function(e){return yr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},lie)},O$=function(e){var t=e.children,r=e.innerProps;return kr("div",r,t)},uqe=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,l=r.Container,u=r.Label,d=r.Remove;return kr(l,{data:n,innerProps:yr(yr({},bs(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},kr(u,{data:n,innerProps:yr({},bs(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),kr(d,{data:n,innerProps:yr(yr({},bs(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},dqe={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||kr(r3,null))},Control:aqe,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||kr(F$,null))},DownChevron:F$,CrossIcon:r3,Group:iqe,GroupHeading:function(e){var t=B$(e);t.data;var r=EA(t,sqe);return kr("div",Or({},bs(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return kr("span",Or({},t,bs(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=B$(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,l=EA(n,oqe);return kr("div",Or({},bs(e,"input",{"input-container":!0}),{"data-value":r||""}),kr("input",Or({className:t({input:!0},o),ref:a,style:cqe(i),disabled:s},l)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=EA(e,ZGe);return kr("div",Or({},bs(yr(yr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),kr(n3,{delay:0,offset:r}),kr(n3,{delay:160,offset:!0}),kr(n3,{delay:320,offset:!r}))},Menu:WGe,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return kr("div",Or({},bs(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=j.useRef(null),l=j.useRef(null),u=Qi(j.useState(nie(s)),2),d=u[0],f=u[1],h=j.useMemo(function(){return{setPortalPlacement:f}},[]),p=Qi(j.useState(null),2),g=p[0],v=p[1],b=j.useCallback(function(){if(n){var k=function(w){var C=w.getBoundingClientRect();return{bottom:C.bottom,height:C.height,left:C.left,right:C.right,top:C.top,width:C.width}}(n),B=i==="fixed"?0:window.pageYOffset,F=k[d]+B;F===(g==null?void 0:g.offset)&&k.left===(g==null?void 0:g.rect.left)&&k.width===(g==null?void 0:g.rect.width)||v({offset:F,rect:k})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);u6(function(){b()},[b]);var y=j.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),n&&o.current&&(l.current=function(k,B,F,w){w===void 0&&(w={});const{ancestorScroll:C=!0,ancestorResize:N=!0,elementResize:P=!0,animationFrame:D=!1}=w,T=C&&!D,U=T||N?[...T_(k)?I_(k):k.contextElement?I_(k.contextElement):[],...I_(B)]:[];U.forEach(Z=>{T&&Z.addEventListener("scroll",F,{passive:!0}),N&&Z.addEventListener("resize",F)});let R,X=null;if(P){let Z=!0;X=new ResizeObserver(()=>{Z||F(),Z=!1}),T_(k)&&!D&&X.observe(k),T_(k)||!k.contextElement||D||X.observe(k.contextElement),X.observe(B)}let q=D?N$(k):null;return D&&function Z(){const H=N$(k);!q||H.x===q.x&&H.y===q.y&&H.width===q.width&&H.height===q.height||F(),q=H,R=requestAnimationFrame(Z)}(),F(),()=>{var Z;U.forEach(H=>{T&&H.removeEventListener("scroll",F),N&&H.removeEventListener("resize",F)}),(Z=X)==null||Z.disconnect(),X=null,D&&cancelAnimationFrame(R)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);u6(function(){y()},[y]);var _=j.useCallback(function(k){o.current=k,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var S=kr("div",Or({ref:_},bs(yr(yr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return kr(aie.Provider,{value:h},t?Bne.createPortal(S,t):S)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=EA(e,KGe);return kr("div",Or({},bs(yr(yr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=EA(e,$Ge);return kr("div",Or({},bs(yr(yr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:uqe,MultiValueContainer:O$,MultiValueLabel:O$,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({role:"button"},r),t||kr(r3,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return kr("div",Or({},bs(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return kr("div",Or({},bs(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return kr("div",Or({},bs(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return kr("div",Or({},bs(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},D$=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Aqe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||D$(n)&&D$(a)))return!1;var n,a;return!0}for(var fqe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},R$=function(e){return kr("span",Or({css:fqe},e))},hqe={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,l=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(l?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},mqe=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,l=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,v=o.isSearchable,b=o.menuIsOpen,y=o.options,_=o.screenReaderStatus,S=o.tabSelectsValue,k=o.isLoading,B=o["aria-label"],F=o["aria-live"],w=j.useMemo(function(){return yr(yr({},hqe),d||{})},[d]),C=j.useMemo(function(){var R,X="";if(t&&w.onChange){var q=t.option,Z=t.options,H=t.removedValue,V=t.removedValues,K=t.value,ne=H||q||(R=K,Array.isArray(R)?null:R),L=ne?f(ne):"",W=Z||V||void 0,J=W?W.map(f):[],te=yr({isDisabled:ne&&g(ne,i),label:L,labels:J},t);X=w.onChange(te)}return X},[t,w,g,i,f]),N=j.useMemo(function(){var R="",X=r||n,q=!!(r&&i&&i.includes(r));if(X&&w.onFocus){var Z={focused:X,label:f(X),isDisabled:g(X,i),isSelected:q,options:a,context:X===r?"menu":"value",selectValue:i,isAppleDevice:u};R=w.onFocus(Z)}return R},[r,n,f,g,w,a,i,u]),P=j.useMemo(function(){var R="";if(b&&y.length&&!k&&w.onFilter){var X=_({count:a.length});R=w.onFilter({inputValue:h,resultsMessage:X})}return R},[a,h,b,w,y,_,k]),D=(t==null?void 0:t.action)==="initial-input-focus",T=j.useMemo(function(){var R="";if(w.guidance){var X=n?"value":b?"menu":"input";R=w.guidance({"aria-label":B,context:X,isDisabled:r&&g(r,i),isMulti:p,isSearchable:v,tabSelectsValue:S,isInitialFocus:D})}return R},[B,r,n,p,g,v,b,w,i,S,D]),U=kr(j.Fragment,null,kr("span",{id:"aria-selection"},C),kr("span",{id:"aria-focused"},N),kr("span",{id:"aria-results"},P),kr("span",{id:"aria-guidance"},T));return kr(j.Fragment,null,kr(R$,{id:l},D&&U),kr(R$,{"aria-live":F,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!D&&U))},a3=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],pqe=new RegExp("["+a3.map(function(e){return e.letters}).join("")+"]","g"),cie={},s3=0;s3<a3.length;s3++)for(var i3=a3[s3],o3=0;o3<i3.letters.length;o3++)cie[i3.letters[o3]]=i3.base;var uie=function(e){return e.replace(pqe,function(t){return cie[t]})},gqe=function(e,t){t===void 0&&(t=Aqe);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(uie),P$=function(e){return e.replace(/^\s+|\s+$/g,"")},vqe=function(e){return"".concat(e.label," ").concat(e.value)},xqe=["innerRef"];function bqe(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(l){var u=Qi(l,1)[0];return!s.includes(u)});return o.reduce(function(l,u){var d=Qi(u,2),f=d[0],h=d[1];return l[f]=h,l},{})}(EA(e,xqe),"onExited","in","enter","exit","appear");return kr("input",Or({ref:t},r,{css:xP({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var L$=["boxSizing","height","overflow","paddingRight","position"],M$={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function U$(e){e.preventDefault()}function Q$(e){e.stopPropagation()}function H$(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function V$(){return"ontouchstart"in window||navigator.maxTouchPoints}var z$=!(typeof window>"u"||!window.document||!window.document.createElement),Sb=0,lv={capture:!1,passive:!1},yqe=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},wqe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Eqe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,l=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=j.useRef(!1),p=j.useRef(!1),g=j.useRef(0),v=j.useRef(null),b=j.useCallback(function(F,w){if(v.current!==null){var C=v.current,N=C.scrollTop,P=C.scrollHeight,D=C.clientHeight,T=v.current,U=w>0,R=P-D-N,X=!1;R>w&&h.current&&(u&&u(F),h.current=!1),U&&p.current&&(f&&f(F),p.current=!1),U&&w>R?(l&&!h.current&&l(F),T.scrollTop=P,X=!0,h.current=!0):!U&&-w>N&&(d&&!p.current&&d(F),T.scrollTop=0,X=!0,p.current=!0),X&&function(q){q.cancelable&&q.preventDefault(),q.stopPropagation()}(F)}},[l,u,d,f]),y=j.useCallback(function(F){b(F,F.deltaY)},[b]),_=j.useCallback(function(F){g.current=F.changedTouches[0].clientY},[]),S=j.useCallback(function(F){var w=g.current-F.changedTouches[0].clientY;b(F,w)},[b]),k=j.useCallback(function(F){if(F){var w=!!VGe&&{passive:!1};F.addEventListener("wheel",y,w),F.addEventListener("touchstart",_,w),F.addEventListener("touchmove",S,w)}},[S,_,y]),B=j.useCallback(function(F){F&&(F.removeEventListener("wheel",y,!1),F.removeEventListener("touchstart",_,!1),F.removeEventListener("touchmove",S,!1))},[S,_,y]);return j.useEffect(function(){if(o){var F=v.current;return k(F),function(){B(F)}}},[o,k,B]),function(F){v.current=F}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,l=i.accountForScrollbars,u=l===void 0||l,d=j.useRef({}),f=j.useRef(null),h=j.useCallback(function(g){if(z$){var v=document.body,b=v&&v.style;if(u&&L$.forEach(function(k){var B=b&&b[k];d.current[k]=B}),u&&Sb<1){var y=parseInt(d.current.paddingRight,10)||0,_=document.body?document.body.clientWidth:0,S=window.innerWidth-_+y||0;Object.keys(M$).forEach(function(k){var B=M$[k];b&&(b[k]=B)}),b&&(b.paddingRight="".concat(S,"px"))}v&&V$()&&(v.addEventListener("touchmove",U$,lv),g&&(g.addEventListener("touchstart",H$,lv),g.addEventListener("touchmove",Q$,lv))),Sb+=1}},[u]),p=j.useCallback(function(g){if(z$){var v=document.body,b=v&&v.style;Sb=Math.max(Sb-1,0),u&&Sb<1&&L$.forEach(function(y){var _=d.current[y];b&&(b[y]=_)}),v&&V$()&&(v.removeEventListener("touchmove",U$,lv),g&&(g.removeEventListener("touchstart",H$,lv),g.removeEventListener("touchmove",Q$,lv)))}},[u]);return j.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return kr(j.Fragment,null,r&&kr("div",{onClick:yqe,css:wqe}),t(function(i){a(i),s(i)}))}var Cqe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},_qe=function(e){var t=e.name,r=e.onFocus;return kr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Cqe,value:"",onChange:function(){}})};function d6(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function die(){return d6(/^Mac/i)}function Sqe(){return d6(/^iPhone/i)||d6(/^iPad/i)||die()&&navigator.maxTouchPoints>1}var Nqe,kqe={clearIndicator:rqe,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return yr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:tqe,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return yr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return yr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return yr(yr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},lqe),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return yr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:YGe,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return yr((kv(r={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(n),"100%"),kv(r,"position","absolute"),kv(r,"width","100%"),kv(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return yr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return yr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return yr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return yr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:XGe,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return yr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return yr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return yr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return yr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},l3={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Bqe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:I$(),captureMenuScroll:!I$(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=yr({ignoreCase:!0,ignoreAccents:!0,stringify:vqe,trim:!0,matchFrom:"any"},Nqe),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,l=i?P$(t):t,u=i?P$(s(e)):s(e);return n&&(l=l.toLowerCase(),u=u.toLowerCase()),a&&(l=gqe(l),u=uie(u)),o==="start"?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function $$(e,t,r,n){return{type:"option",data:t,isDisabled:fie(e,t,r),isSelected:hie(e,t,r),label:Aie(e,t),value:o5(e,t),index:n}}function jC(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return $$(e,i,t,o)}).filter(function(i){return q$(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=$$(e,r,t,n);return q$(e,s)?s:void 0}).filter(zGe)}function K$(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,AP(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function G$(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,AP(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function q$(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!pie(e)||!s)&&mie(e,{label:i,value:o,data:a},n)}var c3=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Aie=function(e,t){return e.getOptionLabel(t)},o5=function(e,t){return e.getOptionValue(t)};function fie(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function hie(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=o5(e,t);return r.some(function(a){return o5(e,a)===n})}function mie(e,t,r){return!e.filterOption||e.filterOption(t,r)}var pie=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Tqe=1,gie=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&t6(i,o)})(s,j.Component);var t,r,n,a=nGe(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=die()||Sqe(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,v=p.name;h.name=v,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,v=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),v&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,v=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),_=o.isOptionDisabled(f,b);if(y){var S=o.getOptionValue(f);o.setValue(b.filter(function(k){return o.getOptionValue(k)!==S}),"deselect-option",f)}else{if(_)return void o.ariaOnChange(f,{action:"select-option",option:f,name:v});g?o.setValue([].concat(AP(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),v=p.filter(function(y){return o.getOptionValue(y)!==g}),b=IC(h,v,v[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(IC(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),v=IC(f,g,g[0]||null);o.onChange(v,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return c3(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return G$(jC(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return UGe.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Aie(o.props,f)},o.getOptionValue=function(f){return o5(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=kqe[f](h,p);g.boxSizing="border-box";var v=o.props.styles[f];return v?v(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,yr(yr({},dqe),f.components);var f},o.buildCategorizedOptions=function(){return jC(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return K$(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:yr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&E4(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),v=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||v>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return pie(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,v=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,_=h.isDisabled,S=h.menuIsOpen,k=h.onKeyDown,B=h.tabSelectsValue,F=h.openMenuOnFocus,w=o.state,C=w.focusedOption,N=w.focusedValue,P=w.selectValue;if(!(_||typeof k=="function"&&(k(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(N)o.removeValue(N);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!S||!B||!C||F&&o.isOptionSelected(C,P))return;o.selectOption(C);break;case"Enter":if(f.keyCode===229)break;if(S){if(!C||o.isComposing)return;o.selectOption(C);break}return;case"Escape":S?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&v&&o.clearValue();break;case" ":if(b)return;if(!S){o.openMenu("first");break}if(!C)return;o.selectOption(C);break;case"ArrowUp":S?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":S?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!S)return;o.focusOption("pageup");break;case"PageDown":if(!S)return;o.focusOption("pagedown");break;case"Home":if(!S)return;o.focusOption("first");break;case"End":if(!S)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++Tqe),o.state.selectValue=k$(i.value),i.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=u[d],o.state.focusedOptionId=c3(l,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&T$(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!l&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&l&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||l||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(T$(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,l=this.state,u=l.selectValue,d=l.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,l=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=l.indexOf(u);u||(d=-1);var f=l.length-1,h=-1;if(l.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:l[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(l);l||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(l3):yr(yr({},l3),this.props.theme):l3}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,l=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,v=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:l,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:v,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,l=i.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(i,o){return fie(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return hie(this.props,i,o)}},{key:"filterOption",value:function(i,o){return mie(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:l,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,l=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,v=this.getComponents().Input,b=this.state,y=b.inputIsHidden,_=b.ariaSelection,S=this.commonProps,k=u||this.getElementId("input"),B=yr(yr(yr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?j.createElement(v,Or({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},B)):j.createElement(bqe,Or({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:s5,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},B))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),l=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,v=this.props,b=v.controlShouldRenderValue,y=v.isDisabled,_=v.isMulti,S=v.inputValue,k=v.placeholder,B=this.state,F=B.selectValue,w=B.focusedValue,C=B.isFocused;if(!this.hasValue()||!b)return S?null:j.createElement(p,Or({},g,{key:"placeholder",isDisabled:y,isFocused:C,innerProps:{id:this.getElementId("placeholder")}}),k);if(_)return F.map(function(P,D){var T=P===w,U="".concat(i.getOptionLabel(P),"-").concat(i.getOptionValue(P));return j.createElement(l,Or({},g,{components:{Container:u,Label:d,Remove:f},isFocused:T,isDisabled:y,key:U,index:D,removeProps:{onClick:function(){return i.removeValue(P)},onTouchEnd:function(){return i.removeValue(P)},onMouseDown:function(R){R.preventDefault()}},data:P}),i.formatOptionLabel(P,"value"))});if(S)return null;var N=F[0];return j.createElement(h,Or({},g,{data:N,isDisabled:y}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,Or({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;return i&&d?j.createElement(i,Or({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,l=i.IndicatorSeparator;if(!o||!l)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return j.createElement(l,Or({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(i,Or({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),l=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,v=o.Option,b=this.commonProps,y=this.state.focusedOption,_=this.props,S=_.captureMenuScroll,k=_.inputValue,B=_.isLoading,F=_.loadingMessage,w=_.minMenuHeight,C=_.maxMenuHeight,N=_.menuIsOpen,P=_.menuPlacement,D=_.menuPosition,T=_.menuPortalTarget,U=_.menuShouldBlockScroll,R=_.menuShouldScrollIntoView,X=_.noOptionsMessage,q=_.onMenuScrollToTop,Z=_.onMenuScrollToBottom;if(!N)return null;var H,V=function(J,te){var ie=J.type,Ae=J.data,oe=J.isDisabled,ce=J.isSelected,ge=J.label,je=J.value,re=y===Ae,Se=oe?void 0:function(){return i.onOptionHover(Ae)},De=oe?void 0:function(){return i.selectOption(Ae)},_e="".concat(i.getElementId("option"),"-").concat(te),he={id:_e,onClick:De,onMouseMove:Se,onMouseOver:Se,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return j.createElement(v,Or({},b,{innerProps:he,data:Ae,isDisabled:oe,isSelected:ce,key:_e,label:ge,type:ie,value:je,isFocused:re,innerRef:re?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(J.data,"menu"))};if(this.hasOptions())H=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var te=J.data,ie=J.options,Ae=J.index,oe="".concat(i.getElementId("group"),"-").concat(Ae),ce="".concat(oe,"-heading");return j.createElement(l,Or({},b,{key:oe,data:te,options:ie,Heading:u,headingProps:{id:ce,data:J.data},label:i.formatGroupLabel(J.data)}),J.options.map(function(ge){return V(ge,"".concat(Ae,"-").concat(ge.index))}))}if(J.type==="option")return V(J,"".concat(J.index))});else if(B){var K=F({inputValue:k});if(K===null)return null;H=j.createElement(p,b,K)}else{var ne=X({inputValue:k});if(ne===null)return null;H=j.createElement(g,b,ne)}var L={minMenuHeight:w,maxMenuHeight:C,menuPlacement:P,menuPosition:D,menuShouldScrollIntoView:R},W=j.createElement(qGe,Or({},b,L),function(J){var te=J.ref,ie=J.placerProps,Ae=ie.placement,oe=ie.maxHeight;return j.createElement(d,Or({},b,L,{innerRef:te,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:B,placement:Ae}),j.createElement(Eqe,{captureEnabled:S,onTopArrive:q,onBottomArrive:Z,lockEnabled:U},function(ce){return j.createElement(f,Or({},b,{innerRef:function(ge){i.getMenuListRef(ge),ce(ge)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:B,maxHeight:oe,focusedOption:y}),H)}))});return T||D==="fixed"?j.createElement(h,Or({},b,{appendTo:T,controlElement:this.controlRef,menuPlacement:P,menuPosition:D}),W):W}},{key:"renderFormField",value:function(){var i=this,o=this.props,l=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return j.createElement(_qe,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(l){var g=p.map(function(y){return i.getOptionValue(y)}).join(l);return j.createElement("input",{name:f,type:"hidden",value:g})}var v=p.length>0?p.map(function(y,_){return j.createElement("input",{key:"i-".concat(_),name:f,type:"hidden",value:i.getOptionValue(y)})}):j.createElement("input",{name:f,type:"hidden",value:""});return j.createElement("div",null,v)}var b=p[0]?this.getOptionValue(p[0]):"";return j.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,l=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return j.createElement(mqe,Or({},i,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,l=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,v=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return j.createElement(u,Or({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),j.createElement(o,Or({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:v}),j.createElement(d,Or({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),j.createElement(l,Or({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var l=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,v=i.options,b=i.value,y=i.menuIsOpen,_=i.inputValue,S=i.isMulti,k=k$(b),B={};if(l&&(b!==l.value||v!==l.options||y!==l.menuIsOpen||_!==l.inputValue)){var F=y?function(U,R){return K$(jC(U,R))}(i,k):[],w=y?G$(jC(i,k),"".concat(g,"-option")):[],C=u?function(U,R){var X=U.focusedValue,q=U.selectValue.indexOf(X);if(q>-1){if(R.indexOf(X)>-1)return X;if(q<R.length)return R[q]}return null}(o,k):null,N=function(U,R){var X=U.focusedOption;return X&&R.indexOf(X)>-1?X:R[0]}(o,F);B={selectValue:k,focusedOption:N,focusedOptionId:c3(w,N),focusableOptionsWithIds:w,focusedValue:C,clearFocusValueOnUpdate:!1}}var P=d!=null&&i!==l?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,T=h&&p;return h&&!T&&(D={value:IC(S,k,k[0]||null),options:k,action:"initial-input-focus"},T=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),yr(yr(yr({},B),P),{},{prevProps:i,ariaSelection:D,prevWasFocused:T})}}],r&&c$(t.prototype,r),n&&c$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();gie.defaultProps=Bqe;var Iqe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],jqe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],bP=la(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Fqe=la(function(e){var t=bP.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),vie=la(function(e){var t=bP.default;e.exports=function(r){var n=Fqe(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),Oqe=la(function(e){e.exports=function(t,r,n){return(r=vie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){Oqe(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),la(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),la(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,vie(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Dqe=la(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Dqe(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var W$=la(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Rqe=la(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Pqe=la(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Lqe=la(function(e){var t=bP.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pqe(r)},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t){var r=Rqe();return function(){var n,a=W$(t);if(r){var s=W$(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Lqe(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var A6=la(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),Mqe=la(function(e){e.exports=function(t){if(Array.isArray(t))return A6(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Uqe=la(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),xie=la(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return A6(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A6(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),Qqe=la(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t){return Mqe(t)||Uqe(t)||xie(t)||Qqe()},e.exports.__esModule=!0,e.exports.default=e.exports});var Hqe=la(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Vqe=la(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,l=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(l.push(a.value),l.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}},e.exports.__esModule=!0,e.exports.default=e.exports}),zqe=la(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t,r){return Hqe(t)||Vqe(t,r)||xie(t,r)||zqe()},e.exports.__esModule=!0,e.exports.default=e.exports});var $qe=la(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=$qe(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),la(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var Kqe=j.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,l=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,v=EA(a,jqe),b=v.inputValue,y=j.useRef(void 0),_=j.useRef(!1),S=Qi(j.useState(Array.isArray(i)?i:void 0),2),k=S[0],B=S[1],F=Qi(j.useState(b!==void 0?b:""),2),w=F[0],C=F[1],N=Qi(j.useState(i===!0),2),P=N[0],D=N[1],T=Qi(j.useState(void 0),2),U=T[0],R=T[1],X=Qi(j.useState([]),2),q=X[0],Z=X[1],H=Qi(j.useState(!1),2),V=H[0],K=H[1],ne=Qi(j.useState({}),2),L=ne[0],W=ne[1],J=Qi(j.useState(void 0),2),te=J[0],ie=J[1],Ae=Qi(j.useState(void 0),2),oe=Ae[0],ce=Ae[1];l!==oe&&(W({}),ce(l)),i!==te&&(B(Array.isArray(i)?i:void 0),ie(i)),j.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var ge=j.useCallback(function(Se,De){if(!u)return De();var _e=u(Se,De);_e&&typeof _e.then=="function"&&_e.then(De,function(){return De()})},[u]);j.useEffect(function(){i===!0&&ge(w,function(Se){_.current&&(B(Se||[]),D(!!y.current))})},[]);var je=j.useCallback(function(Se,De){var _e=function(Ie,He,Xe){if(Xe){var ye=Xe(Ie,He);if(typeof ye=="string")return ye}return Ie}(Se,De,h);if(!_e)return y.current=void 0,C(""),R(""),Z([]),D(!1),void K(!1);if(l&&L[_e])C(_e),R(_e),Z(L[_e]),D(!1),K(!1);else{var he=y.current={};C(_e),D(!0),K(!U),ge(_e,function(Ie){_&&he===y.current&&(y.current=void 0,D(!1),R(_e),Z(Ie||[]),K(!1),W(Ie?yr(yr({},L),{},kv({},_e,Ie)):L))})}},[l,ge,U,L,h]),re=V?[]:w&&U?q:k||[];return yr(yr({},v),{},{options:re,isLoading:P||f,onInputChange:je,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,l=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,v=a.onMenuClose,b=a.onMenuOpen,y=a.value,_=EA(a,Iqe),S=Qi(j.useState(f!==void 0?f:i),2),k=S[0],B=S[1],F=Qi(j.useState(h!==void 0?h:l),2),w=F[0],C=F[1],N=Qi(j.useState(y!==void 0?y:d),2),P=N[0],D=N[1],T=j.useCallback(function(V,K){typeof p=="function"&&p(V,K),D(V)},[p]),U=j.useCallback(function(V,K){var ne;typeof g=="function"&&(ne=g(V,K)),B(ne!==void 0?ne:V)},[g]),R=j.useCallback(function(){typeof b=="function"&&b(),C(!0)},[b]),X=j.useCallback(function(){typeof v=="function"&&v(),C(!1)},[v]),q=f!==void 0?f:k,Z=h!==void 0?h:w,H=y!==void 0?y:P;return yr(yr({},_),{},{inputValue:q,menuIsOpen:Z,onChange:T,onInputChange:U,onMenuClose:X,onMenuOpen:R,value:H})}(r);return j.createElement(gie,Or({ref:t},n))}),Gqe=Kqe,qqe=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},Bv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Bv||(Bv={}));class np{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:l,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=l,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,np.instance){if(!qqe(this.options,np.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(np.instance.options)}`);return np.instance}np.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Bv.FAILURE:this.done?Bv.SUCCESS:this.loading?Bv.LOADING:Bv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Wqe=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(l,u){var d={};for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&u.indexOf(f)<0&&(d[f]=l[f]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(l);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(l,f[h])&&(d[f[h]]=l[f[h]])}return d}(e,["bounds","location"]),o=Cp({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var l=0,u=0,d=arguments.length;u<d;u++)l+=arguments[u].length;var f=Array(l),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,v=p.length;g<v;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},Xqe=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(l,u,d){d===void 0&&(d={});var f=d.maxWait,h=j.useRef(null),p=j.useRef([]),g=d.leading,v=d.trailing===void 0||d.trailing,b=j.useRef(!1),y=j.useRef(null),_=j.useRef(!1),S=j.useRef(l);S.current=l;var k=j.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);j.useEffect(function(){return _.current=!1,function(){_.current=!0}},[]);var B=j.useCallback(function(){for(var w=[],C=0;C<arguments.length;C++)w[C]=arguments[C];p.current=w,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(S.current.apply(S,w),b.current=!0),y.current=setTimeout(function(){var N=!0;g&&b.current&&(N=!1),k(),!_.current&&v&&N&&S.current.apply(S,w)},u),f&&!h.current&&v&&(h.current=setTimeout(function(){var N=p.current;k(),_.current||S.current.apply(null,N)},f))},[f,u,k,g,v]),F=j.useCallback(function(){y.current&&(S.current.apply(null,p.current),k())},[k]);return[B,k,F]}(function(l,u){if(!a)return u([]);if(l.length<n)return u([]);var d=Cp({},t);a.getPlacePredictions(Wqe(d,l,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},X$=j.forwardRef(function(e,t){var r,n,a,s,i,o,l,u,d=function(v){var b=v.apiKey,y=v.apiOptions,_=v.onLoadFailed,S=j.useState(void 0),k=S[0],B=S[1],F=j.useState(void 0),w=F[0],C=F[1],N=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");B(new window.google.maps.places.AutocompleteService),C(new google.maps.places.AutocompleteSessionToken)};return j.useEffect(function(){b?eGe(void 0,void 0,void 0,function(){var P;return tGe(this,function(D){switch(D.label){case 0:if(!b)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new np(Cp({apiKey:b},Cp({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return N(),[3,5];case 4:return P=D.sent(),typeof _=="function"&&_(P),[3,5];case 5:return[2]}})}):N()},[]),{placesService:k,sessionToken:w,setSessionToken:C}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=Xqe({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(l=e.withSessionToken)!==null&&l!==void 0&&l});return j.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),lt.createElement(Gqe,Cp({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(v){return v.value.place_id}}))});function bie(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=bie(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Cn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=bie(e))&&(n&&(n+=" "),n+=t);return n}var u3={},d3={},Y$;function Yqe(){return Y$||(Y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(d3)),d3}var A3={},J$;function yie(){return J$||(J$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(A3)),A3}var f3={},Z$;function wie(){return Z$||(Z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(f3)),f3}var h3={},eK;function yP(){return eK||(eK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,n.push(i),i=""):i+=u:u==="["?(l=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(h3)),h3}var tK;function wP(){return tK||(tK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yqe(),r=yie(),n=wie(),a=yP();function s(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?s(o,a.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return i(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function i(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=s}(u3)),u3}var m3,rK;function Jqe(){return rK||(rK=1,m3=wP().get),m3}var Zqe=Jqe();const lm=bl(Zqe);var p3={exports:{}},aa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nK;function eWe(){if(nK)return aa;nK=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,_=e?Symbol.for("react.scope"):60119;function S(B){if(typeof B=="object"&&B!==null){var F=B.$$typeof;switch(F){case t:switch(B=B.type,B){case l:case u:case n:case s:case a:case f:return B;default:switch(B=B&&B.$$typeof,B){case o:case d:case g:case p:case i:return B;default:return F}}case r:return F}}}function k(B){return S(B)===u}return aa.AsyncMode=l,aa.ConcurrentMode=u,aa.ContextConsumer=o,aa.ContextProvider=i,aa.Element=t,aa.ForwardRef=d,aa.Fragment=n,aa.Lazy=g,aa.Memo=p,aa.Portal=r,aa.Profiler=s,aa.StrictMode=a,aa.Suspense=f,aa.isAsyncMode=function(B){return k(B)||S(B)===l},aa.isConcurrentMode=k,aa.isContextConsumer=function(B){return S(B)===o},aa.isContextProvider=function(B){return S(B)===i},aa.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===t},aa.isForwardRef=function(B){return S(B)===d},aa.isFragment=function(B){return S(B)===n},aa.isLazy=function(B){return S(B)===g},aa.isMemo=function(B){return S(B)===p},aa.isPortal=function(B){return S(B)===r},aa.isProfiler=function(B){return S(B)===s},aa.isStrictMode=function(B){return S(B)===a},aa.isSuspense=function(B){return S(B)===f},aa.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===n||B===u||B===s||B===a||B===f||B===h||typeof B=="object"&&B!==null&&(B.$$typeof===g||B.$$typeof===p||B.$$typeof===i||B.$$typeof===o||B.$$typeof===d||B.$$typeof===b||B.$$typeof===y||B.$$typeof===_||B.$$typeof===v)},aa.typeOf=S,aa}var aK;function tWe(){return aK||(aK=1,p3.exports=eWe()),p3.exports}var rWe=tWe(),Xi=e=>e===0?0:e>0?1:-1,Rc=e=>typeof e=="number"&&e!=+e,up=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!Rc(e),UA=e=>ur(e)||typeof e=="string",nWe=0,gw=e=>{var t=++nWe;return"".concat(e||"").concat(t)},xl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var s;if(up(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Rc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Eie=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Tv=(e,t)=>ur(e)&&ur(t)?r=>e+r*(t-e):()=>t;function cv(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function aWe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):lm(n,t))===r)}var ks=e=>e===null||typeof e>"u",a2=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),sWe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function EP(e){if(typeof e!="string")return!1;var t=sWe;return t.includes(e)}var iWe=["viewBox","children"],sK=["points","pathLength"],g3={svg:iWe,polygon:sK,polyline:sK},CP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{EP(a)&&(n[a]=s=>r[a](r,s))}),n},oWe=(e,t,r)=>n=>(e(t,r,n),null),i1=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];EP(a)&&typeof s=="function"&&(n||(n={}),n[a]=oWe(s,t,r))}),n},lWe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Cie(e){if(typeof e!="string")return!1;var t=lWe;return t.includes(e)}function nl(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Cie(n)});return Object.fromEntries(t)}var iK=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",oK=null,v3=null,_ie=e=>{if(e===oK&&Array.isArray(v3))return v3;var t=[];return j.Children.forEach(e,r=>{ks(r)||(rWe.isFragment(r)?t=t.concat(_ie(r.props.children)):t.push(r))}),v3=t,oK=e,t};function s2(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>iK(a)):n=[iK(t)],_ie(e).forEach(a=>{var s=lm(a,"type.displayName")||lm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var cWe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(g3==null?void 0:g3[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||Cie(t)),l=!!r&&EP(t);return i||o||l},Xn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(j.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;cWe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},uWe=["children","width","height","viewBox","className","style","title","desc"];function f6(){return f6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f6.apply(null,arguments)}function dWe(e,t){if(e==null)return{};var r,n,a=AWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Sie=j.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:l,desc:u}=e,d=dWe(e,uWe),f=s||{width:n,height:a,x:0,y:0},h=Cn("recharts-surface",i);return j.createElement("svg",f6({},Xn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),j.createElement("title",null,l),j.createElement("desc",null,u),r)}),fWe=["children","className"];function h6(){return h6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h6.apply(null,arguments)}function hWe(e,t){if(e==null)return{};var r,n,a=mWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cs=j.forwardRef((e,t)=>{var{children:r,className:n}=e,a=hWe(e,fWe),s=Cn("recharts-layer",n);return j.createElement("g",h6({className:s},Xn(a,!0),{ref:t}),r)}),pWe=j.createContext(null),gWe=["type","size","sizeType"];function m6(){return m6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m6.apply(null,arguments)}function lK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lK(Object(r),!0).forEach(function(n){vWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vWe(e,t,r){return(t=xWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xWe(e){var t=bWe(e,"string");return typeof t=="symbol"?t:t+""}function bWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yWe(e,t){if(e==null)return{};var r,n,a=wWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Nie={symbolCircle:cP,symbolCross:W$e,symbolDiamond:Y$e,symbolSquare:J$e,symbolStar:rKe,symbolTriangle:nKe,symbolWye:sKe},EWe=Math.PI/180,CWe=e=>{var t="symbol".concat(a2(e));return Nie[t]||cP},_We=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*EWe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},SWe=(e,t)=>{Nie["symbol".concat(a2(e))]=t},kie=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=yWe(e,gWe),s=cK(cK({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=CWe(t),h=iKe().type(f).size(_We(r,n,t));return h()},{className:o,cx:l,cy:u}=s,d=Xn(s,!0);return l===+l&&u===+u&&r===+r?j.createElement("path",m6({},d,{className:Cn("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(u,")"),d:i()})):null};kie.registerSymbol=SWe;var x3={},b3={},uK;function NWe(){return uK||(uK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(b3)),b3}var y3={},dK;function C4(){return dK||(dK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(y3)),y3}var w3={},E3={},C3={},AK;function kWe(){return AK||(AK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(C3)),C3}var fK;function _P(){return fK||(fK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kWe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(E3)),E3}var _3={},hK;function BWe(){return hK||(hK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(_3)),_3}var mK;function TWe(){return mK||(mK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_P(),r=BWe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(w3)),w3}var S3={},N3={},pK;function IWe(){return pK||(pK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wP();function r(n){return function(a){return t.get(a,n)}}e.property=r}(N3)),N3}var k3={},B3={},T3={},I3={},gK;function Bie(){return gK||(gK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(I3)),I3}var j3={},vK;function Tie(){return vK||(vK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(j3)),j3}var F3={},xK;function SP(){return xK||(xK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(F3)),F3}var bK;function jWe(){return bK||(bK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NP(),r=Bie(),n=Tie(),a=SP();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(v,b,y,_,S,k){const B=p(v,b,y,_,S,k);return B!==void 0?!!B:i(v,b,g,k)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return l(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const v=Object.keys(h);if(f==null)return v.length===0;if(v.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<v.length;b++){const y=v[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function l(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,b]of h.entries()){const y=f.get(v);if(p(y,b,v,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let b=0;b<h.length;b++){const y=h[b];let _=!1;for(let S=0;S<f.length;S++){if(v.has(S))continue;const k=f[S];let B=!1;if(p(k,y,b,f,h,g)&&(B=!0),B){v.add(S),_=!0;break}}if(!_)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(T3)),T3}var yK;function NP(){return yK||(yK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jWe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(B3)),B3}var O3={},D3={},R3={},wK;function Iie(){return wK||(wK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(R3)),R3}var P3={},EK;function kP(){return EK||(EK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(P3)),P3}var L3={},CK;function BP(){return CK||(CK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",v="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",_="[object Uint16Array]",S="[object Uint32Array]",k="[object BigUint64Array]",B="[object Int8Array]",F="[object Int16Array]",w="[object Int32Array]",C="[object BigInt64Array]",N="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=k,e.booleanTag=a,e.dataViewTag=v,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=N,e.float64ArrayTag=P,e.functionTag=f,e.int16ArrayTag=F,e.int32ArrayTag=w,e.int8ArrayTag=B,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=_,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(L3)),L3}var M3={},_K;function FWe(){return _K||(_K=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(M3)),M3}var SK;function jie(){return SK||(SK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iie(),r=kP(),n=BP(),a=Tie(),s=FWe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const v=g==null?void 0:g(d,f,h,p);if(v!=null)return v;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,_]of d)b.set(y,o(_,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),l(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),l(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),l(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),l(b,d,h,p,g),b}return d}function l(d,f,h=d,p,g){const v=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<v.length;b++){const y=v[b],_=Object.getOwnPropertyDescriptor(d,y);(_==null||_.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=l}(D3)),D3}var NK;function OWe(){return NK||(NK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jie();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(O3)),O3}var kK;function DWe(){return kK||(kK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NP(),r=OWe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(k3)),k3}var U3={},Q3={},H3={},BK;function RWe(){return BK||(BK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jie(),r=BP();function n(a,s){return t.cloneDeepWith(a,(i,o,l,u)=>{const d=s==null?void 0:s(i,o,l,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(H3)),H3}var TK;function PWe(){return TK||(TK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RWe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(Q3)),Q3}var V3={},z3={},IK;function Fie(){return IK||(IK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(z3)),z3}var $3={},jK;function LWe(){return jK||(jK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kP();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}($3)),$3}var FK;function MWe(){return FK||(FK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yie(),r=Fie(),n=LWe(),a=yP();function s(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?l=a.toPath(o):l=[o],l.length===0)return!1;let u=i;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(V3)),V3}var OK;function UWe(){return OK||(OK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NP(),r=wie(),n=PWe(),a=wP(),s=MWe();function i(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=i}(U3)),U3}var DK;function TP(){return DK||(DK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C4(),r=IWe(),n=DWe(),a=UWe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(S3)),S3}var RK;function QWe(){return RK||(RK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NWe(),r=C4(),n=TWe(),a=TP();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(x3)),x3}var K3,PK;function HWe(){return PK||(PK=1,K3=QWe().uniqBy),K3}var VWe=HWe();const LK=bl(VWe);function zWe(e,t,r){return t===!0?LK(e,r):typeof t=="function"?LK(e,t):e}var IP=j.createContext(null),$We=e=>e,us=()=>{var e=j.useContext(IP);return e?e.store.dispatch:$We},j_=()=>{},KWe=()=>j_,GWe=(e,t)=>e===t;function ir(e){var t=j.useContext(IP);return ene.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:KWe,t?t.store.getState:j_,t?t.store.getState:j_,t?e:j_,GWe)}function qWe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function WWe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function XWe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var MK=e=>Array.isArray(e)?e:[e];function YWe(e){const t=Array.isArray(e[0])?e[0]:e;return XWe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function JWe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var ZWe=class{constructor(e){this.value=e}deref(){return this.value}},eXe=typeof WeakRef<"u"?WeakRef:ZWe,tXe=0,UK=1;function FC(){return{s:tXe,v:void 0,o:null,p:null}}function Oie(e,t={}){let r=FC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const b=v.get(g);b===void 0?(o=FC(),v.set(g,o)):o=b}else{let v=o.p;v===null&&(o.p=v=new Map);const b=v.get(g);b===void 0?(o=FC(),v.set(g,o)):o=b}}const u=o;let d;if(o.s===UK)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new eXe(d):d}return u.s=UK,u.v=d,d}return i.clearCache=()=>{r=FC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function rXe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,l={},u=a.pop();typeof u=="object"&&(l=u,u=a.pop()),qWe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:p=Oie,argsMemoizeOptions:g=[]}=d,v=MK(h),b=MK(g),y=YWe(a),_=f(function(){return s++,u.apply(null,arguments)},...v),S=p(function(){i++;const B=JWe(y,arguments);return o=_.apply(null,B),o},...b);return Object.assign(S,{resultFunc:u,memoizedResultFunc:_,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ct=rXe(Oie),nXe=Object.assign((e,t=ct)=>{WWe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,l)=>(i[r[l]]=o,i),{}))},{withTypes:()=>nXe}),G3={},q3={},W3={},QK;function aXe(){return QK||(QK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(W3)),W3}var X3={},Y3={},HK;function Die(){return HK||(HK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(Y3)),Y3}var VK;function sXe(){return VK||(VK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Die(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(X3)),X3}var zK;function iXe(){return zK||(zK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aXe(),r=sXe(),n=yP();function a(s,i,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let v=p;for(let b=0;b<g.length&&v!=null;++b)v=v[g[b]];return v},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let v=0;v<f.length;v++){const b=t.compareValues(p.criteria[v],g.criteria[v],o[v]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(q3)),q3}var J3={},$K;function oXe(){return $K||($K=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<s?i(d,l+1):a.push(d)}};return i(r,0),a}e.flatten=t}(J3)),J3}var Z3={},KK;function Rie(){return KK||(KK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fie(),r=_P(),n=Bie(),a=SP();function s(i,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?a.eq(l[o],i):!1}e.isIterateeCall=s}(Z3)),Z3}var GK;function lXe(){return GK||(GK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iXe(),r=oXe(),n=Rie();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(G3)),G3}var eI,qK;function cXe(){return qK||(qK=1,eI=lXe().sortBy),eI}var uXe=cXe();const _4=bl(uXe);var Pie=e=>e.legend.settings,dXe=e=>e.legend.size,AXe=e=>e.legend.payload;ct([AXe,Pie],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?_4(n,r):n});var OC=1;function fXe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=j.useState({height:0,left:0,top:0,width:0}),n=j.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>OC||Math.abs(i.left-t.left)>OC||Math.abs(i.top-t.top)>OC||Math.abs(i.width-t.width)>OC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function uo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hXe=typeof Symbol=="function"&&Symbol.observable||"@@observable",WK=hXe,tI=()=>Math.random().toString(36).substring(7).split("").join("."),mXe={INIT:`@@redux/INIT${tI()}`,REPLACE:`@@redux/REPLACE${tI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tI()}`},l5=mXe;function jP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Lie(e,t,r){if(typeof e!="function")throw new Error(uo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(uo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(uo(1));return r(Lie)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(l)throw new Error(uo(3));return a}function f(b){if(typeof b!="function")throw new Error(uo(4));if(l)throw new Error(uo(5));let y=!0;u();const _=o++;return i.set(_,b),function(){if(y){if(l)throw new Error(uo(6));y=!1,u(),i.delete(_),s=null}}}function h(b){if(!jP(b))throw new Error(uo(7));if(typeof b.type>"u")throw new Error(uo(8));if(typeof b.type!="string")throw new Error(uo(17));if(l)throw new Error(uo(9));try{l=!0,a=n(a,b)}finally{l=!1}return(s=i).forEach(_=>{_()}),b}function p(b){if(typeof b!="function")throw new Error(uo(10));n=b,h({type:l5.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(uo(11));function _(){const k=y;k.next&&k.next(d())}return _(),{unsubscribe:b(_)}},[WK](){return this}}}return h({type:l5.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[WK]:g}}function pXe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:l5.INIT})>"u")throw new Error(uo(12));if(typeof r(void 0,{type:l5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(uo(13))})}function Mie(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{pXe(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(uo(14));u[f]=g,l=l||g!==p}return l=l||n.length!==Object.keys(i).length,l?u:i}}function c5(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function gXe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(uo(15))};const i={getState:a.getState,dispatch:(l,...u)=>s(l,...u)},o=e.map(l=>l(i));return s=c5(...o)(a.dispatch),{...a,dispatch:s}}}function Uie(e){return jP(e)&&"type"in e&&typeof e.type=="string"}var Qie=Symbol.for("immer-nothing"),XK=Symbol.for("immer-draftable"),Pc=Symbol.for("immer-state");function hd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tx=Object.getPrototypeOf;function $p(e){return!!e&&!!e[Pc]}function ih(e){var t;return e?Hie(e)||Array.isArray(e)||!!e[XK]||!!((t=e.constructor)!=null&&t[XK])||N4(e)||k4(e):!1}var vXe=Object.prototype.constructor.toString();function Hie(e){if(!e||typeof e!="object")return!1;const t=Tx(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===vXe}function u5(e,t){S4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function S4(e){const t=e[Pc];return t?t.type_:Array.isArray(e)?1:N4(e)?2:k4(e)?3:0}function p6(e,t){return S4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vie(e,t,r){const n=S4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function xXe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function N4(e){return e instanceof Map}function k4(e){return e instanceof Set}function Ym(e){return e.copy_||e.base_}function g6(e,t){if(N4(e))return new Map(e);if(k4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Hie(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Pc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Tx(e),n)}else{const n=Tx(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function FP(e,t=!1){return B4(e)||$p(e)||!ih(e)||(S4(e)>1&&(e.set=e.add=e.clear=e.delete=bXe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>FP(n,!0))),e}function bXe(){hd(2)}function B4(e){return Object.isFrozen(e)}var yXe={};function Kp(e){const t=yXe[e];return t||hd(0,e),t}var vw;function zie(){return vw}function wXe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function YK(e,t){t&&(Kp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function v6(e){x6(e),e.drafts_.forEach(EXe),e.drafts_=null}function x6(e){e===vw&&(vw=e.parent_)}function JK(e){return vw=wXe(vw,e)}function EXe(e){const t=e[Pc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ZK(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Pc].modified_&&(v6(t),hd(4)),ih(e)&&(e=d5(t,e),t.parent_||A5(t,e)),t.patches_&&Kp("Patches").generateReplacementPatches_(r[Pc].base_,e,t.patches_,t.inversePatches_)):e=d5(t,r,[]),v6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Qie?e:void 0}function d5(e,t,r){if(B4(t))return t;const n=t[Pc];if(!n)return u5(t,(a,s)=>eG(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return A5(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),u5(s,(o,l)=>eG(e,n,a,o,l,r,i)),A5(e,a,!1),r&&e.patches_&&Kp("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function eG(e,t,r,n,a,s,i){if($p(a)){const o=s&&t&&t.type_!==3&&!p6(t.assigned_,n)?s.concat(n):void 0,l=d5(e,a,o);if(Vie(r,n,l),$p(l))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(ih(a)&&!B4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;d5(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&A5(e,a)}}function A5(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&FP(t,r)}function CXe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:zie(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=OP;r&&(a=[n],s=xw);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var OP={get(e,t){if(t===Pc)return e;const r=Ym(e);if(!p6(r,t))return _Xe(e,r,t);const n=r[t];return e.finalized_||!ih(n)?n:n===rI(e.base_,t)?(nI(e),e.copy_[t]=y6(n,e)):n},has(e,t){return t in Ym(e)},ownKeys(e){return Reflect.ownKeys(Ym(e))},set(e,t,r){const n=$ie(Ym(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=rI(Ym(e),t),s=a==null?void 0:a[Pc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(xXe(r,a)&&(r!==void 0||p6(e.base_,t)))return!0;nI(e),b6(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return rI(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,nI(e),b6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ym(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){hd(11)},getPrototypeOf(e){return Tx(e.base_)},setPrototypeOf(){hd(12)}},xw={};u5(OP,(e,t)=>{xw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});xw.deleteProperty=function(e,t){return xw.set.call(this,e,t,void 0)};xw.set=function(e,t,r){return OP.set.call(this,e[0],t,r,e[0])};function rI(e,t){const r=e[Pc];return(r?Ym(r):e)[t]}function _Xe(e,t,r){var a;const n=$ie(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function $ie(e,t){if(!(t in e))return;let r=Tx(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Tx(r)}}function b6(e){e.modified_||(e.modified_=!0,e.parent_&&b6(e.parent_))}function nI(e){e.copy_||(e.copy_=g6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var SXe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(l=s,...u){return i.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&hd(6),n!==void 0&&typeof n!="function"&&hd(7);let a;if(ih(t)){const s=JK(this),i=y6(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?v6(s):x6(s)}return YK(s,n),ZK(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Qie&&(a=void 0),this.autoFreeze_&&FP(a,!0),n){const s=[],i=[];Kp("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else hd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,l=>t(l,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ih(e)||hd(8),$p(e)&&(e=$f(e));const t=JK(this),r=y6(e,void 0);return r[Pc].isManual_=!0,x6(t),r}finishDraft(e,t){const r=e&&e[Pc];(!r||!r.isManual_)&&hd(9);const{scope_:n}=r;return YK(n,t),ZK(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Kp("Patches").applyPatches_;return $p(e)?n(e,t):this.produce(e,a=>n(a,t))}};function y6(e,t){const r=N4(e)?Kp("MapSet").proxyMap_(e,t):k4(e)?Kp("MapSet").proxySet_(e,t):CXe(e,t);return(t?t.scope_:zie()).drafts_.push(r),r}function $f(e){return $p(e)||hd(10,e),Kie(e)}function Kie(e){if(!ih(e)||B4(e))return e;const t=e[Pc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=g6(e,t.scope_.immer_.useStrictShallowCopy_)}else r=g6(e,!0);return u5(r,(n,a)=>{Vie(r,n,Kie(a))}),t&&(t.finalized_=!1),r}var Lc=new SXe,Gie=Lc.produce;Lc.produceWithPatches.bind(Lc);Lc.setAutoFreeze.bind(Lc);Lc.setUseStrictShallowCopy.bind(Lc);Lc.applyPatches.bind(Lc);Lc.createDraft.bind(Lc);Lc.finishDraft.bind(Lc);function qie(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var NXe=qie(),kXe=qie,BXe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?c5:c5.apply(null,arguments)};function Fu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Fc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Uie(n)&&n.type===e,r}var Wie=class ey extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ey.prototype)}static get[Symbol.species](){return ey}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ey(...t[0].concat(this)):new ey(...t.concat(this))}};function tG(e){return ih(e)?Gie(e,()=>{}):e}function DC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function TXe(e){return typeof e=="boolean"}var IXe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new Wie;return r&&(TXe(r)?i.push(NXe):i.push(kXe(r.extraArgument))),i},jXe="RTK_autoBatch",rG=e=>t=>{setTimeout(t,e)},FXe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:rG(10):e.type==="callback"?e.queueNotification:rG(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[jXe]),s=!a,s&&(i||(i=!0,l(u))),n.dispatch(d)}finally{a=!0}}})},OXe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Wie(e);return n&&a.push(FXe(typeof n=="object"?n:void 0)),a};function DXe(e){const t=IXe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(jP(r))o=Mie(r);else throw new Error(Fc(1));let l;typeof n=="function"?l=n(t):l=t();let u=c5;a&&(u=BXe({trace:!1,...typeof a=="object"&&a}));const d=gXe(...l),f=OXe(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return Lie(o,s,p)}function Xie(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Fc(28));if(o in t)throw new Error(Fc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function RXe(e){return typeof e=="function"}function PXe(e,t){let[r,n,a]=Xie(t),s;if(RXe(e))s=()=>tG(e());else{const o=tG(e);s=()=>o}function i(o=s(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if($p(d)){const p=f(d,l);return p===void 0?d:p}else{if(ih(d))return Gie(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var LXe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",MXe=(e=21)=>{let t="",r=e;for(;r--;)t+=LXe[Math.random()*64|0];return t},UXe=Symbol.for("rtk-slice-createasyncthunk");function QXe(e,t){return`${e}/${t}`}function HXe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[UXe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Fc(11));const o=(typeof a.reducers=="function"?a.reducers(zXe()):a.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(k,B){const F=typeof k=="string"?k:k.type;if(!F)throw new Error(Fc(12));if(F in u.sliceCaseReducersByType)throw new Error(Fc(13));return u.sliceCaseReducersByType[F]=B,d},addMatcher(k,B){return u.sliceMatchers.push({matcher:k,reducer:B}),d},exposeAction(k,B){return u.actionCreators[k]=B,d},exposeCaseReducer(k,B){return u.sliceCaseReducersByName[k]=B,d}};l.forEach(k=>{const B=o[k],F={reducerName:k,type:QXe(s,k),createNotation:typeof a.reducers=="function"};KXe(B)?qXe(F,B,d,t):$Xe(F,B,d)});function f(){const[k={},B=[],F=void 0]=typeof a.extraReducers=="function"?Xie(a.extraReducers):[a.extraReducers],w={...k,...u.sliceCaseReducersByType};return PXe(a.initialState,C=>{for(let N in w)C.addCase(N,w[N]);for(let N of u.sliceMatchers)C.addMatcher(N.matcher,N.reducer);for(let N of B)C.addMatcher(N.matcher,N.reducer);F&&C.addDefaultCase(F)})}const h=k=>k,p=new Map,g=new WeakMap;let v;function b(k,B){return v||(v=f()),v(k,B)}function y(){return v||(v=f()),v.getInitialState()}function _(k,B=!1){function F(C){let N=C[k];return typeof N>"u"&&B&&(N=DC(g,F,y)),N}function w(C=h){const N=DC(p,B,()=>new WeakMap);return DC(N,C,()=>{const P={};for(const[D,T]of Object.entries(a.selectors??{}))P[D]=VXe(T,C,()=>DC(g,C,y),B);return P})}return{reducerPath:k,getSelectors:w,get selectors(){return w(F)},selectSlice:F}}const S={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,..._(i),injectInto(k,{reducerPath:B,...F}={}){const w=B??i;return k.inject({reducerPath:w,reducer:b},F),{...S,..._(w,!0)}}};return S}}function VXe(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Uc=HXe();function zXe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function $Xe({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!GXe(n))throw new Error(Fc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Fu(e,i):Fu(e))}function KXe(e){return e._reducerDefinitionType==="asyncThunk"}function GXe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qXe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Fc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:l,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||RC,pending:o||RC,rejected:l||RC,settled:u||RC})}function RC(){}var WXe="task",Yie="listener",Jie="completed",DP="cancelled",XXe=`task-${DP}`,YXe=`task-${Jie}`,w6=`${Yie}-${DP}`,JXe=`${Yie}-${Jie}`,T4=class{constructor(e){nB(this,"name","TaskAbortError");nB(this,"message");this.code=e,this.message=`${WXe} ${DP} (reason: ${e})`}},RP=(e,t)=>{if(typeof e!="function")throw new TypeError(Fc(32))},f5=()=>{},Zie=(e,t=f5)=>(e.catch(t),e),eoe=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Np=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},kp=e=>{if(e.aborted){const{reason:t}=e;throw new T4(t)}};function toe(e,t){let r=f5;return new Promise((n,a)=>{const s=()=>a(new T4(e.reason));if(e.aborted){s();return}r=eoe(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=f5})}var ZXe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof T4?"cancelled":"rejected",error:r}}finally{t==null||t()}},h5=e=>t=>Zie(toe(e,t).then(r=>(kp(e),r))),roe=e=>{const t=h5(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:rx}=Object,nG={},I4="listenerMiddleware",eYe=(e,t)=>{const r=n=>eoe(e,()=>Np(n,e.reason));return(n,a)=>{RP(n);const s=new AbortController;r(s);const i=ZXe(async()=>{kp(e),kp(s.signal);const o=await n({pause:h5(s.signal),delay:roe(s.signal),signal:s.signal});return kp(s.signal),o},()=>Np(s,YXe));return a!=null&&a.autoJoin&&t.push(i.catch(f5)),{result:h5(e)(i),cancel(){Np(s,XXe)}}}},tYe=(e,t)=>{const r=async(n,a)=>{kp(t);let s=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await toe(t,Promise.race(o));return kp(t),l}finally{s()}};return(n,a)=>Zie(r(n,a))},noe=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Fu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Fc(21));return RP(s),{predicate:a,type:t,effect:s}},aoe=rx(e=>{const{type:t,predicate:r,effect:n}=noe(e);return{id:MXe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Fc(22))}}},{withTypes:()=>aoe}),aG=(e,t)=>{const{type:r,effect:n,predicate:a}=noe(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},E6=e=>{e.pending.forEach(t=>{Np(t,w6)})},rYe=e=>()=>{e.forEach(E6),e.clear()},sG=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},soe=rx(Fu(`${I4}/add`),{withTypes:()=>soe}),nYe=Fu(`${I4}/removeAll`),ioe=rx(Fu(`${I4}/remove`),{withTypes:()=>ioe}),aYe=(...e)=>{console.error(`${I4}/error`,...e)},i2=(e={})=>{const t=new Map,{extra:r,onError:n=aYe}=e;RP(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&E6(d)}),s=d=>{const f=aG(t,d)??aoe(d);return a(f)};rx(s,{withTypes:()=>s});const i=d=>{const f=aG(t,d);return f&&(f.unsubscribe(),d.cancelActive&&E6(f)),!!f};rx(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,v=tYe(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,rx({},h,{getOriginalState:p,condition:(y,_)=>v(y,_).then(Boolean),take:v,delay:roe(g.signal),pause:h5(g.signal),extra:r,signal:g.signal,fork:eYe(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,_,S)=>{y!==g&&(Np(y,w6),S.delete(y))})},cancel:()=>{Np(g,w6),d.pending.delete(g)},throwIfCancelled:()=>{kp(g.signal)}})))}catch(y){y instanceof T4||sG(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),Np(g,JXe),d.pending.delete(g)}},l=rYe(t);return{middleware:d=>f=>h=>{if(!Uie(h))return f(h);if(soe.match(h))return s(h.payload);if(nYe.match(h)){l();return}if(ioe.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===nG)throw new Error(Fc(23));return p};let v;try{if(v=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const _ of y){let S=!1;try{S=_.predicate(h,b,p)}catch(k){S=!1,sG(n,k,{raisedBy:"predicate"})}S&&o(_,h,d,g)}}}finally{p=nG}return v},startListening:s,stopListening:i,clearListeners:l}};function Fc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sYe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ooe=Uc({name:"chartLayout",initialState:sYe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:iYe,setLayout:oYe,setChartSize:lYe,setScale:cYe}=ooe.actions,uYe=ooe.reducer;function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iG(Object(r),!0).forEach(function(n){dYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dYe(e,t,r){return(t=AYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AYe(e){var t=fYe(e,"string");return typeof t=="symbol"?t:t+""}function fYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m5=Math.PI/180,hYe=e=>e*180/Math.PI,ea=(e,t,r,n)=>({x:e+Math.cos(-m5*n)*r,y:t+Math.sin(-m5*n)*r}),loe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},mYe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},pYe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=mYe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:hYe(l),angleInRadian:l}},gYe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},vYe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},xYe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=pYe({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:l,endAngle:u}=gYe(t),d=s,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?oG(oG({},t),{},{radius:a,angle:vYe(d,t)}):null},coe=e=>!j.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function uoe(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function lG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lG(Object(r),!0).forEach(function(n){bYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bYe(e,t,r){return(t=yYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yYe(e){var t=wYe(e,"string");return typeof t=="symbol"?t:t+""}function wYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Da(e,t,r){return ks(e)||ks(t)?r:UA(t)?lm(e,t,r):typeof t=="function"?t(e):r}var EYe=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(Xi(d-u)!==Xi(f-d)){var p=[];if(Xi(f-d)===Xi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var v=f+a[1]-a[0];p[0]=Math.min(d,(v+d)/2),p[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[l]);break}}else{var y=Math.min(u,f),_=Math.max(u,f);if(e>(y+d)/2&&e<=(_+d)/2){({index:i}=r[l]);break}}}else if(t){for(var S=0;S<o;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:i}=t[S]);break}}return i},CYe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&ur(e[s]))return wu(wu({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&ur(e[i]))return wu(wu({},e),{},{[i]:e[i]+(a||0)})}return e},vm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",doe=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Aoe=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,v=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(v=p==="angleAxis"&&s&&s.length>=2?Xi(s[0]-s[1])*2*v:v,f||h){var b=(f||h||[]).map((y,_)=>{var S=n?n.indexOf(y):y;return{coordinate:i(S)+v,value:y,offset:v,index:_}});return b.filter(y=>!Rc(y.coordinate))}return l&&u?u.map((y,_)=>({coordinate:i(y)+v,value:y,index:_,offset:v})):i.ticks&&d!=null?i.ticks(d).map((y,_)=>({coordinate:i(y)+v,value:y,offset:v,index:_})):i.domain().map((y,_)=>({coordinate:i(y)+v,value:n?n[y]:y,index:_,offset:v}))},cG=1e-4,_Ye=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-cG,s=Math.max(n[0],n[1])+cG,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},SYe=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(a[0]=r),(!ur(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},NYe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Rc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},kYe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Rc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},BYe={sign:NYe,expand:bKe,none:kx,silhouette:yKe,wiggle:wKe,positive:kYe},TYe=(e,t,r)=>{var n=BYe[r],a=xKe().keys(t).value((s,i)=>+Da(s,i,0)).order(e6).offset(n);return a(e)};function IYe(e){return e==null?void 0:String(e)}var uG=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Da(s,t.dataKey,t.scale.domain()[i]);return ks(o)?null:t.scale(o)-a/2+n},jYe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},FYe=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},OYe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],DYe=(e,t,r)=>{if(e!=null)return OYe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((l,u)=>{var d=uoe(u,t,r),f=FYe(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},dG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,AG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=_4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],u=a[i-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function fG(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return wu(wu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function o1(e,t){if(e)return String(e);if(typeof t=="string")return t}function RYe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?xYe({x:e,y:t},n):null}var PYe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return wu(wu(wu({},n),ea(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:l}=n;return wu(wu(wu({},n),ea(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},LYe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,gh=e=>e.layout.width,vh=e=>e.layout.height,MYe=e=>e.layout.scale,foe=e=>e.layout.margin,PP=ct(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),LP=ct(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),hoe="data-recharts-item-index",moe="data-recharts-item-data-key",j4=60;function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(n){UYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UYe(e,t,r){return(t=QYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QYe(e){var t=HYe(e,"string");return typeof t=="symbol"?t:t+""}function HYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VYe=e=>e.brush.height,Bi=ct([gh,vh,foe,VYe,PP,LP,Pie,dXe],(e,t,r,n,a,s,i,o)=>{var l=s.reduce((g,v)=>{var{orientation:b}=v;if(!v.mirror&&!v.hide){var y=typeof v.width=="number"?v.width:j4;return o0(o0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,v)=>{var{orientation:b}=v;return!v.mirror&&!v.hide?o0(o0({},g),{},{[b]:lm(g,"".concat(b))+v.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=o0(o0({},u),l),f=d.bottom;d.bottom+=n,d=CYe(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return o0(o0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),zYe=ct(Bi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),poe=ct(gh,vh,(e,t)=>({x:0,y:0,width:e,height:t})),$Ye=j.createContext(null),Zl=()=>j.useContext($Ye)!=null,F4=e=>e.brush,O4=ct([F4,Bi,foe],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),MP=()=>{var e,t=Zl(),r=ir(zYe),n=ir(O4),a=(e=ir(F4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},KYe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},goe=()=>{var e;return(e=ir(Bi))!==null&&e!==void 0?e:KYe},voe=()=>ir(gh),xoe=()=>ir(vh),jn=e=>e.layout.layoutType,UP=()=>ir(jn),GYe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},boe=Uc({name:"legend",initialState:GYe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=$f(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:But,setLegendSettings:Tut,addLegendPayload:yoe,removeLegendPayload:woe}=boe.actions,qYe=boe.reducer;function C6(){return C6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C6.apply(null,arguments)}function mG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mG(Object(r),!0).forEach(function(n){WYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WYe(e,t,r){return(t=XYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XYe(e){var t=YYe(e,"string");return typeof t=="symbol"?t:t+""}function YYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JYe(e){return Array.isArray(e)&&UA(e[0])&&UA(e[1])?e.join(" ~ "):e}var ZYe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var B={padding:0,margin:0},F=(o?_4(s,o):s).map((w,C)=>{if(w.type==="none")return null;var N=w.formatter||i||JYe,{value:P,name:D}=w,T=P,U=D;if(N){var R=N(P,D,w,C,s);if(Array.isArray(R))[T,U]=R;else if(R!=null)T=R;else return null}var X=aI({display:"block",paddingTop:4,paddingBottom:4,color:w.color||"#000"},n);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:X},UA(U)?j.createElement("span",{className:"recharts-tooltip-item-name"},U):null,UA(U)?j.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,j.createElement("span",{className:"recharts-tooltip-item-value"},T),j.createElement("span",{className:"recharts-tooltip-item-unit"},w.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:B},F)}return null},g=aI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=aI({margin:0},a),b=!ks(d),y=b?d:"",_=Cn("recharts-default-tooltip",l),S=Cn("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var k=h?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",C6({className:_,style:g},k),j.createElement("p",{className:S,style:v},j.isValidElement(y)?y:"".concat(y)),p())},Nb="recharts-tooltip-wrapper",eJe={visibility:"hidden"};function tJe(e){var{coordinate:t,translateX:r,translateY:n}=e;return Cn(Nb,{["".concat(Nb,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(Nb,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(Nb,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(Nb,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function pG(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(s&&ur(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=l[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var v=f+o,b=h+u;return v>b?Math.max(d,h):Math.max(f,h)}function rJe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function nJe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:l}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=pG({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=pG({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=rJe({translateX:d,translateY:f,useTranslate3d:o})):u=eJe,{cssProperties:u,cssClasses:tJe({translateX:d,translateY:f,coordinate:r})}}function gG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gG(Object(r),!0).forEach(function(n){_6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _6(e,t,r){return(t=aJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aJe(e){var t=sJe(e,"string");return typeof t=="symbol"?t:t+""}function sJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iJe extends j.PureComponent{constructor(){super(...arguments),_6(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_6(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:v,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:_,cssProperties:S}=nJe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:h,viewBox:p}),k=y?{}:PC(PC({transition:l&&t?"transform ".concat(n,"ms ").concat(a):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),B=PC(PC({},k),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:B,ref:b},s)}}var oJe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),lg={isSsr:oJe()},Eoe=()=>ir(e=>e.rootProps.accessibilityLayer);function Mc(e){return Number.isFinite(e)}function Ix(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function S6(){return S6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S6.apply(null,arguments)}function vG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vG(Object(r),!0).forEach(function(n){lJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lJe(e,t,r){return(t=cJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJe(e){var t=uJe(e,"string");return typeof t=="symbol"?t:t+""}function uJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bG={curveBasisClosed:lKe,curveBasisOpen:cKe,curveBasis:oKe,curveBumpX:G$e,curveBumpY:q$e,curveLinearClosed:uKe,curveLinear:m4,curveMonotoneX:dKe,curveMonotoneY:AKe,curveNatural:fKe,curveStep:hKe,curveStepAfter:pKe,curveStepBefore:mKe},LC=e=>Mc(e.x)&&Mc(e.y),kb=e=>e.x,Bb=e=>e.y,dJe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(a2(e));return(r==="curveMonotone"||r==="curveBump")&&t?bG["".concat(r).concat(t==="vertical"?"Y":"X")]:bG[r]||m4},AJe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=dJe(t,a),o=s?r.filter(LC):r,l;if(Array.isArray(n)){var u=s?n.filter(f=>LC(f)):n,d=o.map((f,h)=>xG(xG({},f),{},{base:u[h]}));return a==="vertical"?l=CC().y(Bb).x1(kb).x0(f=>f.base.x):l=CC().x(kb).y1(Bb).y0(f=>f.base.y),l.defined(LC).curve(i),l(d)}return a==="vertical"&&ur(n)?l=CC().y(Bb).x1(kb).x0(n):ur(n)?l=CC().x(kb).y1(Bb).y0(n):l=yse().x(kb).y(Bb),l.defined(LC).curve(i),l(o)},Coe=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?AJe(e):n;return j.createElement("path",S6({},nl(e),CP(e),{className:Cn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},fJe=["x","y","top","left","width","height","className"];function N6(){return N6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N6.apply(null,arguments)}function yG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hJe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yG(Object(r),!0).forEach(function(n){mJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mJe(e,t,r){return(t=pJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pJe(e){var t=gJe(e,"string");return typeof t=="symbol"?t:t+""}function gJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vJe(e,t){if(e==null)return{};var r,n,a=xJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bJe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),yJe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,l=vJe(e,fJe),u=hJe({x:t,y:r,top:n,left:a,width:s,height:i},l);return!ur(t)||!ur(r)||!ur(s)||!ur(i)||!ur(n)||!ur(a)?null:j.createElement("path",N6({},Xn(u,!0),{className:Cn("recharts-cross",o),d:bJe(t,r,s,i,n,a)}))};function wJe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function wG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EJe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wG(Object(r),!0).forEach(function(n){CJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CJe(e,t,r){return(t=_Je(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Je(e){var t=SJe(e,"string");return typeof t=="symbol"?t:t+""}function SJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pu(e,t){var r=EJe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var sI={},iI={},oI={},EG;function NJe(){return EG||(EG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(oI)),oI}var CG;function kJe(){return CG||(CG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NJe(),r=Iie(),n=kP(),a=BP(),s=SP();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,v){const b=v(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return l(u,d,g,v)}return l(u,d,g,v)}function l(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),_=d.valueOf();return s.eq(y,_)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const v=f.get(u),b=f.get(d);if(v!=null&&b!=null)return v===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,_]of u.entries())if(!d.has(y)||!o(_,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),_=Array.from(d.values());for(let S=0;S<y.length;S++){const k=y[S],B=_.findIndex(F=>o(k,F,void 0,u,d,f,h));if(B===-1)return!1;_.splice(B,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(l(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const _=[...Object.keys(u),...r.getSymbols(u)],S=[...Object.keys(d),...r.getSymbols(d)];if(_.length!==S.length)return!1;for(let k=0;k<_.length;k++){const B=_[k],F=u[B];if(!Object.hasOwn(d,B))return!1;const w=d[B];if(!o(F,w,B,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(iI)),iI}var lI={},_G;function BJe(){return _G||(_G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(lI)),lI}var SG;function TJe(){return SG||(SG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kJe(),r=BJe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(sI)),sI}var cI,NG;function IJe(){return NG||(NG=1,cI=TJe().isEqual),cI}var jJe=IJe();const FJe=bl(jJe);var p5=1e-4,_oe=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Soe=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),kG=(e,t)=>r=>{var n=_oe(e,t);return Soe(n,r)},OJe=(e,t)=>r=>{var n=_oe(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Soe(a,r)},BG=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var l=i[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,a]=l[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=kG(t,r),d=kG(n,a),f=OJe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var v=g>1?1:g,b=v,y=0;y<8;++y){var _=u(b)-v,S=f(b);if(Math.abs(_-v)<p5||S<p5)return d(b);b=h(b-_/S)}return d(b)};return p.isStepper=!1,p},DJe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,l)=>{var u=-(i-o)*r,d=l*n,f=l+(u-d)*a/1e3,h=l*a/1e3+i;return Math.abs(h-o)<p5&&Math.abs(f)<p5?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Noe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return BG(e);case"spring":return DJe();default:if(e.split("(")[0]==="cubic-bezier")return BG(e)}return typeof e=="function"?e:null};function TG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TG(Object(r),!0).forEach(function(n){RJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RJe(e,t,r){return(t=PJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PJe(e){var t=LJe(e,"string");return typeof t=="symbol"?t:t+""}function LJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MJe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),UJe=(e,t,r)=>e.map(n=>"".concat(MJe(n)," ").concat(t,"ms ").concat(r)).join(","),QJe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),yw=(e,t)=>Object.keys(t).reduce((r,n)=>IG(IG({},r),{},{[n]:e(n,t[n])}),{});function jG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jG(Object(r),!0).forEach(function(n){HJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HJe(e,t,r){return(t=VJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VJe(e){var t=zJe(e,"string");return typeof t=="symbol"?t:t+""}function zJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g5=(e,t,r)=>e+(t-e)*r,k6=e=>{var{from:t,to:r}=e;return t!==r},koe=(e,t,r)=>{var n=yw((a,s)=>{if(k6(s)){var[i,o]=e(s.from,s.to,s.velocity);return mo(mo({},s),{},{from:i,velocity:o})}return s},t);return r<1?yw((a,s)=>k6(s)?mo(mo({},s),{},{velocity:g5(s.velocity,n[a].velocity,r),from:g5(s.from,n[a].from,r)}):s,t):koe(e,n,r-1)};function $Je(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>mo(mo({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>yw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(k6).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=koe(r,o,g),a(mo(mo(mo({},e),t),l())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function KJe(e,t,r,n,a,s,i){var o=null,l=a.reduce((f,h)=>mo(mo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=yw((v,b)=>g5(...b,r(h)),l);if(s(mo(mo(mo({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=yw((v,b)=>g5(...b,r(1)),l);s(mo(mo(mo({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Boe=(e,t,r,n,a,s)=>{var i=QJe(e,t);return r.isStepper===!0?$Je(e,t,r,i,a,s):KJe(e,t,r,n,i,a,s)};function GJe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...u]=o;if(typeof l=="number"){a=e.setTimeout(s.bind(null,u),l);return}s(l),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class qJe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function WJe(){return GJe(new qJe)}var XJe=j.createContext(WJe);function Toe(e,t){var r=j.useContext(XJe);return j.useMemo(()=>t??r(e),[e,t,r])}var YJe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function B6(){return B6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B6.apply(null,arguments)}function JJe(e,t){if(e==null)return{};var r,n,a=ZJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function FG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FG(Object(r),!0).forEach(function(n){dp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dp(e,t,r){return(t=eZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eZe(e){var t=tZe(e,"string");return typeof t=="symbol"?t:t+""}function tZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class QP extends j.PureComponent{constructor(t,r){super(t,r),dp(this,"mounted",!1),dp(this,"manager",void 0),dp(this,"stopJSAnimation",null),dp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:l,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:l}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(u);return}if(!(FJe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&l){var h={style:a?{[a]:f}:f};(a&&l[a]!==f||!a&&l!==f)&&this.setState(h)}this.runAnimation(l0(l0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l}=t,u=Boe(r,n,Noe(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([l,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:l,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=UJe(Object.keys(d),n,i);this.manager.start([o,r,l0(l0({},d),{},{transition:f}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:l,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,v=JJe(t,YJe),b=j.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var _=S=>{var{style:k={},className:B}=S.props,F=j.cloneElement(S,l0(l0({},v),{},{style:l0(l0({},k),y),className:B}));return F};return b===1?_(j.Children.only(r)):j.createElement("div",null,j.Children.map(r,S=>_(S)))}}dp(QP,"displayName","Animate");dp(QP,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function v5(e){var t,r=Toe((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return j.createElement(QP,B6({},e,{animationManager:r}))}function x5(){return x5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x5.apply(null,arguments)}var OG=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},rZe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ioe=e=>{var t=Pu(e,rZe),r=j.useRef(null),[n,a]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:v}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var b=Cn("recharts-rectangle",d);return v?j.createElement(v5,{canBegin:n>0,from:{width:o,height:l,x:s,y:i},to:{width:o,height:l,x:s,y:i},duration:h,animationEasing:f,isActive:v},y=>{var{width:_,height:S,x:k,y:B}=y;return j.createElement(v5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},j.createElement("path",x5({},Xn(t,!0),{className:b,d:OG(k,B,_,S,u),ref:r})))}):j.createElement("path",x5({},Xn(t,!0),{className:b,d:OG(s,i,o,l,u)}))};function joe(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=ea(t,r,n,a),o=ea(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function T6(){return T6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T6.apply(null,arguments)}var nZe=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},MC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/m5,f=l?a:a+s*d,h=ea(t,r,u,f),p=ea(t,r,n,f),g=l?a-s*d:a,v=ea(t,r,u*Math.cos(d*m5),g);return{center:h,circleTangency:p,lineTangency:v,theta:d}},Foe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=nZe(s,i),l=s+o,u=ea(t,r,a,s),d=ea(t,r,a,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ea(t,r,n,s),p=ea(t,r,n,l);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},aZe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=Xi(u-l),{circleTangency:f,lineTangency:h,theta:p}=MC({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:v,theta:b}=MC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Foe({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:u});var _="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:S,lineTangency:k,theta:B}=MC({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:F,lineTangency:w,theta:C}=MC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),N=o?Math.abs(l-u):Math.abs(l-u)-B-C;if(N<0&&s===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+="L".concat(w.x,",").concat(w.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(N>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,"Z")}else _+="L".concat(t,",").concat(r,"Z");return _},sZe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ooe=e=>{var t=Pu(e,sZe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=Cn("recharts-sector",f),p=s-a,g=xl(i,p,0,!0),v;return g>0&&Math.abs(u-d)<360?v=aZe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):v=Foe({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),j.createElement("path",T6({},Xn(t,!0),{className:h,d:v}))};function iZe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,h=ea(o,l,u,f),p=ea(o,l,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return joe(t);return[{x:n,y:a},{x:s,y:i}]}var uI={},dI={},AI={},DG;function oZe(){return DG||(DG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Die();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(AI)),AI}var RG;function lZe(){return RG||(RG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oZe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(dI)),dI}var PG;function cZe(){return PG||(PG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rie(),r=lZe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=a,a+=i;return l}e.range=n}(uI)),uI}var fI,LG;function uZe(){return LG||(LG=1,fI=cZe().range),fI}var dZe=uZe();const Doe=bl(dZe),ty=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$R,scaleDiverging:hse,scaleDivergingLog:mse,scaleDivergingPow:iP,scaleDivergingSqrt:z$e,scaleDivergingSymlog:pse,scaleIdentity:qae,scaleImplicit:YF,scaleLinear:Gae,scaleLog:Xae,scaleOrdinal:o4,scalePoint:Aze,scalePow:XR,scaleQuantile:Zae,scaleQuantize:ese,scaleRadial:Jae,scaleSequential:use,scaleSequentialLog:dse,scaleSequentialPow:sP,scaleSequentialQuantile:fse,scaleSequentialSqrt:V$e,scaleSequentialSymlog:Ase,scaleSqrt:Cze,scaleSymlog:Yae,scaleThreshold:tse,scaleTime:Q$e,scaleUtc:H$e,tickFormat:Kae},Symbol.toStringTag,{value:"Module"}));var xm=e=>e.chartData,D4=ct([xm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),HP=(e,t,r,n)=>n?D4(e):xm(e);function jx(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Mc(t)&&Mc(r))return!0}return!1}function MG(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function AZe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Mc(r))a=r;else if(typeof r=="function")return;if(Mc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(jx(i))return i}}function fZe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(jx(n))return MG(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(ur(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&dG.test(a)){var l=dG.exec(a);if(l==null||t==null)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(ur(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&AG.test(s)){var d=AG.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(jx(h))return t==null?h:MG(h,t,r)}}}var l1=1e9,hZe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zP,Ya=!0,Ou="[DecimalError] ",Bp=Ou+"Invalid argument: ",VP=Ou+"Exponent out of range: ",c1=Math.floor,Jm=Math.pow,mZe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kc,zi=1e7,La=7,Roe=9007199254740991,b5=c1(Roe/La),dr={};dr.absoluteValue=dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};dr.comparedTo=dr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};dr.decimalPlaces=dr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*La;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};dr.dividedBy=dr.div=function(e){return Kf(this,new this.constructor(e))};dr.dividedToIntegerBy=dr.idiv=function(e){var t=this,r=t.constructor;return ka(Kf(t,new r(e),0,1),r.precision)};dr.equals=dr.eq=function(e){return!this.cmp(e)};dr.exponent=function(){return mi(this)};dr.greaterThan=dr.gt=function(e){return this.cmp(e)>0};dr.greaterThanOrEqualTo=dr.gte=function(e){return this.cmp(e)>=0};dr.isInteger=dr.isint=function(){return this.e>this.d.length-2};dr.isNegative=dr.isneg=function(){return this.s<0};dr.isPositive=dr.ispos=function(){return this.s>0};dr.isZero=function(){return this.s===0};dr.lessThan=dr.lt=function(e){return this.cmp(e)<0};dr.lessThanOrEqualTo=dr.lte=function(e){return this.cmp(e)<1};dr.logarithm=dr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(kc))throw Error(Ou+"NaN");if(r.s<1)throw Error(Ou+(r.s?"NaN":"-Infinity"));return r.eq(kc)?new n(0):(Ya=!1,t=Kf(ww(r,s),ww(e,s),s),Ya=!0,ka(t,a))};dr.minus=dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Moe(t,e):Poe(t,(e.s=-e.s,e))};dr.modulo=dr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Ou+"NaN");return r.s?(Ya=!1,t=Kf(r,e,0,1).times(e),Ya=!0,r.minus(t)):ka(new n(r),a)};dr.naturalExponential=dr.exp=function(){return Loe(this)};dr.naturalLogarithm=dr.ln=function(){return ww(this)};dr.negated=dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};dr.plus=dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Poe(t,e):Moe(t,(e.s=-e.s,e))};dr.precision=dr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bp+e);if(t=mi(a)+1,n=a.d.length-1,r=n*La+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};dr.squareRoot=dr.sqrt=function(){var e,t,r,n,a,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Ou+"NaN")}for(e=mi(o),Ya=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=BA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=c1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=i=r+3;;)if(s=n,n=s.plus(Kf(o,s,i+2)).times(.5),BA(s.d).slice(0,i)===(t=BA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(ka(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return Ya=!0,ka(n,r)};dr.times=dr.mul=function(e){var t,r,n,a,s,i,o,l,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=p.length,l<u&&(s=h,h=p,p=s,i=l,l=u,u=i),s=[],i=l+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%zi|0,t=o/zi|0;s[a]=(s[a]+t)%zi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ya?ka(e,f.precision):e};dr.toDecimalPlaces=dr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(QA(e,0,l1),t===void 0?t=n.rounding:QA(t,0,8),ka(r,e+mi(r)+1,t))};dr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Gp(n,!0):(QA(e,0,l1),t===void 0?t=a.rounding:QA(t,0,8),n=ka(new a(n),e+1,t),r=Gp(n,!0,e+1)),r};dr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Gp(a):(QA(e,0,l1),t===void 0?t=s.rounding:QA(t,0,8),n=ka(new s(a),e+mi(a)+1,t),r=Gp(n.abs(),!1,e+mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};dr.toInteger=dr.toint=function(){var e=this,t=e.constructor;return ka(new t(e),mi(e)+1,t.rounding)};dr.toNumber=function(){return+this};dr.toPower=dr.pow=function(e){var t,r,n,a,s,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(kc);if(o=new l(o),!o.s){if(e.s<1)throw Error(Ou+"Infinity");return o}if(o.eq(kc))return o;if(n=l.precision,e.eq(kc))return ka(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Roe){for(a=new l(kc),t=Math.ceil(n/La+4),Ya=!1;r%2&&(a=a.times(o),QG(a.d,t)),r=c1(r/2),r!==0;)o=o.times(o),QG(o.d,t);return Ya=!0,e.s<0?new l(kc).div(a):ka(a,n)}}else if(s<0)throw Error(Ou+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Ya=!1,a=e.times(ww(o,n+u)),Ya=!0,a=Loe(a),a.s=s,a};dr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=mi(a),n=Gp(a,r<=s.toExpNeg||r>=s.toExpPos)):(QA(e,1,l1),t===void 0?t=s.rounding:QA(t,0,8),a=ka(new s(a),e,t),r=mi(a),n=Gp(a,e<=r||r<=s.toExpNeg,e)),n};dr.toSignificantDigits=dr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(QA(e,1,l1),t===void 0?t=n.rounding:QA(t,0,8)),ka(new n(r),e,t)};dr.toString=dr.valueOf=dr.val=dr.toJSON=dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mi(e),r=e.constructor;return Gp(e,t<=r.toExpNeg||t>=r.toExpPos)};function Poe(e,t){var r,n,a,s,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ya?ka(t,f):t;if(l=e.d,u=t.d,i=e.e,a=t.e,l=l.slice(),s=i-a,s){for(s<0?(n=l,s=-s,o=u.length):(n=u,a=i,o=l.length),i=Math.ceil(f/La),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=l.length,s=u.length,o-s<0&&(s=o,n=u,u=l,l=n),r=0;s;)r=(l[--s]=l[s]+u[s]+r)/zi|0,l[s]%=zi;for(r&&(l.unshift(r),++a),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=a,Ya?ka(t,f):t}function QA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Bp+e)}function BA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=La-n.length,r&&(s+=m0(r)),s+=n;i=e[t],n=i+"",r=La-n.length,r&&(s+=m0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var Kf=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%zi|0,i=s/zi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,l;if(s!=i)l=s>i?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=a[o]){l=n[o]>a[o]?1:-1;break}return l}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*zi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,F,w,C,N=n.constructor,P=n.s==a.s?1:-1,D=n.d,T=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(Ou+"Division by zero");for(l=n.e-a.e,w=T.length,B=D.length,p=new N(P),g=p.d=[],u=0;T[u]==(D[u]||0);)++u;if(T[u]>(D[u]||0)&&--l,s==null?_=s=N.precision:i?_=s+(mi(n)-mi(a))+1:_=s,_<0)return new N(0);if(_=_/La+2|0,u=0,w==1)for(d=0,T=T[0],_++;(u<B||d)&&_--;u++)S=d*zi+(D[u]||0),g[u]=S/T|0,d=S%T|0;else{for(d=zi/(T[0]+1)|0,d>1&&(T=e(T,d),D=e(D,d),w=T.length,B=D.length),k=w,v=D.slice(0,w),b=v.length;b<w;)v[b++]=0;C=T.slice(),C.unshift(0),F=T[0],T[1]>=zi/2&&++F;do d=0,o=t(T,v,w,b),o<0?(y=v[0],w!=b&&(y=y*zi+(v[1]||0)),d=y/F|0,d>1?(d>=zi&&(d=zi-1),f=e(T,d),h=f.length,b=v.length,o=t(f,v,h,b),o==1&&(d--,r(f,w<h?C:T,h))):(d==0&&(o=d=1),f=T.slice()),h=f.length,h<b&&f.unshift(0),r(v,f,b),o==-1&&(b=v.length,o=t(T,v,w,b),o<1&&(d++,r(v,w<b?C:T,b))),b=v.length):o===0&&(d++,v=[0]),g[u++]=d,o&&v[0]?v[b++]=D[k]||0:(v=[D[k]],b=1);while((k++<B||v[0]!==void 0)&&_--)}return g[0]||g.shift(),p.e=l,ka(p,i?s+mi(p)+1:s)}}();function Loe(e,t){var r,n,a,s,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(mi(e)>16)throw Error(VP+mi(e));if(!e.s)return new d(kc);for(Ya=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Jm(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(kc),d.precision=o;;){if(a=ka(a.times(e),o),r=r.times(++l),i=s.plus(Kf(a,r,o)),BA(i.d).slice(0,o)===BA(s.d).slice(0,o)){for(;u--;)s=ka(s.times(s),o);return d.precision=f,t==null?(Ya=!0,ka(s,f)):s}s=i}}function mi(e){for(var t=e.e*La,r=e.d[0];r>=10;r/=10)t++;return t}function hI(e,t,r){if(t>e.LN10.sd())throw Ya=!0,r&&(e.precision=r),Error(Ou+"LN10 precision limit exceeded");return ka(new e(e.LN10),t)}function m0(e){for(var t="";e--;)t+="0";return t}function ww(e,t){var r,n,a,s,i,o,l,u,d,f=1,h=10,p=e,g=p.d,v=p.constructor,b=v.precision;if(p.s<1)throw Error(Ou+(p.s?"NaN":"-Infinity"));if(p.eq(kc))return new v(0);if(t==null?(Ya=!1,u=b):u=t,p.eq(10))return t==null&&(Ya=!0),hI(v,u);if(u+=h,v.precision=u,r=BA(g),n=r.charAt(0),s=mi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=BA(p.d),n=r.charAt(0),f++;s=mi(p),n>1?(p=new v("0."+r),s++):p=new v(n+"."+r.slice(1))}else return l=hI(v,u+2,b).times(s+""),p=ww(new v(n+"."+r.slice(1)),u-h).plus(l),v.precision=b,t==null?(Ya=!0,ka(p,b)):p;for(o=i=p=Kf(p.minus(kc),p.plus(kc),u),d=ka(p.times(p),u),a=3;;){if(i=ka(i.times(d),u),l=o.plus(Kf(i,new v(a),u)),BA(l.d).slice(0,u)===BA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(hI(v,u+2,b).times(s+""))),o=Kf(o,new v(f),u),v.precision=b,t==null?(Ya=!0,ka(o,b)):o;o=l,a+=2}}function UG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=c1(r/La),e.d=[],n=(r+1)%La,r<0&&(n+=La),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=La;n<a;)e.d.push(+t.slice(n,n+=La));t=t.slice(n),n=La-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ya&&(e.e>b5||e.e<-b5))throw Error(VP+r)}else e.s=0,e.e=0,e.d=[0];return e}function ka(e,t,r){var n,a,s,i,o,l,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=La,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/La),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=La,a=n-La+i}if(r!==void 0&&(s=Jm(10,i-a-1),o=u/s%10|0,l=t<0||f[d+1]!==void 0||u%s,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?a>0?u/Jm(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(s=mi(e),f.length=1,t=t-s-1,f[0]=Jm(10,(La-t%La)%La),e.e=c1(-t/La)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Jm(10,La-n),f[d]=a>0?(u/Jm(10,i-a)%Jm(10,a)|0)*s:0),l)for(;;)if(d==0){(f[0]+=s)==zi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=zi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Ya&&(e.e>b5||e.e<-b5))throw Error(VP+mi(e));return e}function Moe(e,t){var r,n,a,s,i,o,l,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ya?ka(t,p):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),a=Math.max(Math.ceil(p/La),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=l.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(l[a]!=f[a]){d=l[a]<f[a];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,a=f.length-o;a>0;--a)l[o++]=0;for(a=f.length;a>i;){if(l[--a]<f[a]){for(s=a;s&&l[--s]===0;)l[s]=zi-1;--l[s],l[a]+=zi}l[a]-=f[a]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Ya?ka(t,p):t):new h(0)}function Gp(e,t,r){var n,a=mi(e),s=BA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+m0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+m0(-a-1)+s,r&&(n=r-i)>0&&(s+=m0(n))):a>=i?(s+=m0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+m0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=m0(n))),e.s<0?"-"+s:s}function QG(e,t){if(e.length>t)return e.length=t,!0}function Uoe(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Bp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return UG(i,s.toString())}else if(typeof s!="string")throw Error(Bp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,mZe.test(s))UG(i,s);else throw Error(Bp+s)}if(a.prototype=dr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Uoe,a.config=a.set=pZe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function pZe(e){if(!e||typeof e!="object")throw Error(Ou+"Object expected");var t,r,n,a=["precision",1,l1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(c1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Bp+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Bp+r+": "+n);return this}var zP=Uoe(hZe);kc=new zP(1);const ma=zP;var gZe=e=>e,Qoe={},Hoe=e=>e===Qoe,HG=e=>function t(){return arguments.length===0||arguments.length===1&&Hoe(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Voe=(e,t)=>e===1?t:HG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Qoe).length;return s>=e?t(...n):Voe(e-s,HG(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=n.map(d=>Hoe(d)?o.shift():d);return t(...u,...o)}))}),R4=e=>Voe(e.length,e),I6=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},vZe=R4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),xZe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return gZe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,l)=>l(o),s(...arguments))}},j6=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),zoe=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var l;return i===((l=t)===null||l===void 0?void 0:l[o])})||(t=a,r=e(...a)),r}};function $oe(e){var t;return e===0?t=1:t=Math.floor(new ma(e).abs().log(10).toNumber())+1,t}function Koe(e,t,r){for(var n=new ma(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}R4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});R4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});R4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Goe=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},qoe=(e,t,r)=>{if(e.lte(0))return new ma(0);var n=$oe(e.toNumber()),a=new ma(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new ma(Math.ceil(s.div(i).toNumber())).add(r).mul(i),l=o.mul(a);return t?new ma(l.toNumber()):new ma(Math.ceil(l.toNumber()))},bZe=(e,t,r)=>{var n=new ma(1),a=new ma(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ma(10).pow($oe(e)-1),a=new ma(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ma(Math.floor(e)))}else e===0?a=new ma(Math.floor((t-1)/2)):r||(a=new ma(Math.floor(e)));var i=Math.floor((t-1)/2),o=xZe(vZe(l=>a.add(new ma(l-i).mul(n)).toNumber()),I6);return o(0,t)},Woe=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ma(0),tickMin:new ma(0),tickMax:new ma(0)};var i=qoe(new ma(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new ma(0):(o=new ma(t).add(r).div(2),o=o.sub(new ma(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ma(r).sub(o).div(i).toNumber()),d=l+u+1;return d>n?Woe(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:i,tickMin:o.sub(new ma(l).mul(i)),tickMax:o.add(new ma(u).mul(i))})};function yZe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Goe([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...I6(0,n-1).map(()=>1/0)]:[...I6(0,n-1).map(()=>-1/0),o];return t>r?j6(l):l}if(i===o)return bZe(i,n,a);var{step:u,tickMin:d,tickMax:f}=Woe(i,o,s,a,0),h=Koe(d,f.add(new ma(.1).mul(u)),u);return t>r?j6(h):h}function wZe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Goe([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),l=qoe(new ma(i).sub(s).div(o-1),a,0),u=[...Koe(new ma(s),new ma(i),l),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?j6(u):u}var EZe=zoe(yZe),CZe=zoe(wZe),Xoe=e=>e.rootProps.maxBarSize,_Ze=e=>e.rootProps.barGap,Yoe=e=>e.rootProps.barCategoryGap,SZe=e=>e.rootProps.barSize,o2=e=>e.rootProps.stackOffset,$P=e=>e.options.chartName,KP=e=>e.rootProps.syncId,Joe=e=>e.rootProps.syncMethod,GP=e=>e.options.eventEmitter,CA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Hl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},P4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},NZe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:CA.angleAxisId,includeHidden:!1,name:void 0,reversed:CA.reversed,scale:CA.scale,tick:CA.tick,tickCount:void 0,ticks:void 0,type:CA.type,unit:void 0},kZe={allowDataOverflow:Hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hl.scale,tick:Hl.tick,tickCount:Hl.tickCount,ticks:void 0,type:Hl.type,unit:void 0},BZe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:CA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:CA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:CA.scale,tick:CA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},TZe={allowDataOverflow:Hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hl.scale,tick:Hl.tick,tickCount:Hl.tickCount,ticks:void 0,type:"category",unit:void 0},u1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?BZe:NZe,l2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?TZe:kZe,L4=e=>e.polarOptions,qP=ct([gh,vh,Bi],loe),Zoe=ct([L4,qP],(e,t)=>{if(e!=null)return xl(e.innerRadius,t,0)}),ele=ct([L4,qP],(e,t)=>{if(e!=null)return xl(e.outerRadius,t,t*.8)}),IZe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},tle=ct([L4],IZe),jZe=ct([u1,tle],P4),rle=ct([qP,Zoe,ele],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),FZe=ct([l2,rle],P4),d1=ct([jn,L4,Zoe,ele,gh,vh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:l,endAngle:u}=t;return{cx:xl(i,a,a/2),cy:xl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Ba=(e,t)=>t,c2=(e,t,r)=>r;function WP(e){return e==null?void 0:e.id}var Ti=e=>{var t=jn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},A1=e=>e.tooltip.settings.axisId,Ii=e=>{var t=Ti(e),r=A1(e);return f1(e,t,r)};function nle(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,l=(o=i.data)!==null&&o!==void 0?o:n;if(!(l==null||l.length===0)){var u=WP(i);l.forEach((d,f)=>{var h=a==null?f:String(Da(d,a,null)),p=Da(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function M4(e){return e.stackId!=null&&e.dataKey!=null}function VG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VG(Object(r),!0).forEach(function(n){OZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OZe(e,t,r){return(t=DZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DZe(e){var t=RZe(e,"string");return typeof t=="symbol"?t:t+""}function RZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F6=[0,"auto"],bc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??bc},yc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:F6,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:j4},bm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??yc},PZe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},XP=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??PZe},Js=(e,t,r)=>{switch(t){case"xAxis":return xh(e,r);case"yAxis":return bm(e,r);case"zAxis":return XP(e,r);case"angleAxis":return u1(e,r);case"radiusAxis":return l2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},LZe=(e,t,r)=>{switch(t){case"xAxis":return xh(e,r);case"yAxis":return bm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},f1=(e,t,r)=>{switch(t){case"xAxis":return xh(e,r);case"yAxis":return bm(e,r);case"angleAxis":return u1(e,r);case"radiusAxis":return l2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ale=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function YP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var JP=e=>e.graphicalItems.cartesianItems,MZe=ct([Ba,c2],YP),ZP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),u2=ct([JP,Js,MZe],ZP),sle=ct([u2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(M4)),ile=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),ole=ct([u2],ile),eL=e=>e.map(t=>t.data).filter(Boolean).flat(1),UZe=ct([u2],eL),tL=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},rL=ct([UZe,HP],tL),nL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Da(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Da(a,n)}))):e.map(n=>({value:n})),U4=ct([rL,Js,u2],nL);function lle(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function cg(e){return e.filter(t=>UA(t)||t instanceof Date).map(Number).filter(t=>Rc(t)===!1)}function QZe(e,t,r){return!r||typeof t!="number"||Rc(t)?[]:r.length?cg(r.flatMap(n=>{var a=Da(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Mc(s)||!Mc(i)))return[t-s,t+i]})):[]}var HZe=ct([sle,HP,Ii],nle),cle=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,l=o.map(WP);return[i,{stackedData:TYe(e,l,r),graphicalItems:o}]}))},O6=ct([HZe,sle,o2],cle),ule=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=DYe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},VZe=ct([O6,xm,Ba],ule),dle=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>lle(a,f)),d=Da(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:QZe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Da(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Q4=e=>e.errorBars,Ale=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>lle(r,n));ct([ole,Q4,Ba],Ale);var zZe=ct([rL,Js,ole,Q4,Ba],dle);function $Ze(e){var{value:t}=e;if(UA(t)||t instanceof Date)return t}var zG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=cg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KZe=(e,t,r)=>{var n=e.map($Ze).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Eie(n))?Doe(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},aL=e=>{var t;if(e==null||!("domain"in e))return F6;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=cg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:F6},w5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},fle=e=>e.referenceElements.dots,h1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),GZe=ct([fle,Ba,c2],h1),hle=e=>e.referenceElements.areas,qZe=ct([hle,Ba,c2],h1),mle=e=>e.referenceElements.lines,WZe=ct([mle,Ba,c2],h1),ple=(e,t)=>{var r=cg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},XZe=ct(GZe,Ba,ple),gle=(e,t)=>{var r=cg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},YZe=ct([qZe,Ba],gle),vle=(e,t)=>{var r=cg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},JZe=ct(WZe,Ba,vle),ZZe=ct(XZe,JZe,YZe,(e,t,r)=>w5(e,r,t)),xle=ct([Js],aL),sL=(e,t,r,n,a,s,i)=>{var o=AZe(t,e.allowDataOverflow);if(o!=null)return o;var l=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=l?w5(r,a,zG(n)):w5(a,zG(n));return fZe(t,u,e.allowDataOverflow)},eet=ct([Js,xle,VZe,zZe,ZZe,jn,Ba],sL),tet=[0,1],iL=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:l}=e,u=vm(t,s);return u&&o==null?Doe(0,r.length):l==="category"?KZe(n,e,u):a==="expand"?tet:i}},oL=ct([Js,jn,rL,U4,o2,Ba,eet],iL),ble=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(a2(s));return o in ty?o:"point"}}},ym=ct([Js,jn,ale,$P,Ba],ble);function ret(e){if(e!=null){if(e in ty)return ty[e]();var t="scale".concat(a2(e));if(t in ty)return ty[t]()}}function H4(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=ret(t);if(a!=null){var s=a.domain(r).range(n);return _Ye(s),s}}}var lL=(e,t,r)=>{var n=aL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&jx(e))return EZe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&jx(e))return CZe(e,t.tickCount,t.allowDecimals)}},cL=ct([oL,f1,ym],lL),uL=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&jx(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},net=ct([Js,oL,cL,Ba],uL),aet=ct(U4,Js,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(cg(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),yle=ct(aet,jn,Yoe,Bi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Mc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=xl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),set=(e,t)=>{var r=xh(e,t);return r==null||typeof r.padding!="string"?0:yle(e,"xAxis",t,r.padding)},iet=(e,t)=>{var r=bm(e,t);return r==null||typeof r.padding!="string"?0:yle(e,"yAxis",t,r.padding)},oet=ct(xh,set,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),cet=ct(bm,iet,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),uet=ct([Bi,oet,O4,F4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),det=ct([Bi,jn,cet,O4,F4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),d2=(e,t,r,n)=>{var a;switch(t){case"xAxis":return uet(e,r,n);case"yAxis":return det(e,r,n);case"zAxis":return(a=XP(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return tle(e);case"radiusAxis":return rle(e,r);default:return}},wle=ct([Js,d2],P4),m1=ct([Js,ym,net,wle],H4);ct([u2,Q4,Ba],Ale);function Ele(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var V4=(e,t)=>t,z4=(e,t,r)=>r,Aet=ct(PP,V4,z4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Ele)),fet=ct(LP,V4,z4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Ele)),Cle=(e,t)=>({width:e.width,height:t.height}),het=(e,t)=>{var r=typeof t.width=="number"?t.width:j4;return{width:r,height:e.height}},_le=ct(Bi,xh,Cle),met=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},pet=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},get=ct(vh,Bi,Aet,V4,z4,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=Cle(t,o);i==null&&(i=met(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*l.height,i+=(u?-1:1)*l.height}),s}),vet=ct(gh,Bi,fet,V4,z4,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=het(t,o);i==null&&(i=pet(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*l.width,i+=(u?-1:1)*l.width}),s}),xet=(e,t)=>{var r=Bi(e),n=xh(e,t);if(n!=null){var a=get(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},bet=(e,t)=>{var r=Bi(e),n=bm(e,t);if(n!=null){var a=vet(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Sle=ct(Bi,bm,(e,t)=>{var r=typeof t.width=="number"?t.width:j4;return{width:r,height:e.height}}),$G=(e,t,r)=>{switch(t){case"xAxis":return _le(e,r).width;case"yAxis":return Sle(e,r).height;default:return}},Nle=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=vm(e,n),l=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&Eie(l))return l}},A2=ct([jn,U4,Js,Ba],Nle),dL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=vm(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},AL=ct([jn,U4,f1,Ba],dL),KG=ct([jn,LZe,ym,m1,A2,AL,d2,cL,Ba],(e,t,r,n,a,s,i,o,l)=>{if(t==null)return null;var u=vm(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),kle=(e,t,r,n,a,s,i,o,l)=>{if(!(t==null||n==null)){var u=vm(e,l),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=l==="angleAxis"&&s!=null&&s.length>=2?Xi(s[0]-s[1])*2*g:g;var v=f||a;if(v){var b=v.map((y,_)=>{var S=i?i.indexOf(y):y;return{index:_,coordinate:n(S)+g,value:y,offset:g}});return b.filter(y=>!Rc(y.coordinate))}return u&&o?o.map((y,_)=>({coordinate:n(y)+g,value:y,index:_,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,_)=>({coordinate:n(y)+g,value:i?i[y]:y,index:_,offset:g}))}},Ble=ct([jn,f1,ym,m1,cL,d2,A2,AL,Ba],kle),Tle=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=vm(e,i),{tickCount:l}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Xi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Fx=ct([jn,f1,m1,d2,A2,AL,Ba],Tle),Ox=ct(Js,m1,(e,t)=>{if(!(e==null||t==null))return y5(y5({},e),{},{scale:t})}),yet=ct([Js,ym,oL,wle],H4);ct((e,t,r)=>XP(e,r),yet,(e,t)=>{if(!(e==null||t==null))return y5(y5({},e),{},{scale:t})});var wet=ct([jn,PP,LP],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Ile=e=>e.options.defaultTooltipEventType,jle=e=>e.options.validateTooltipEventTypes;function Fle(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function fL(e,t){var r=Ile(e),n=jle(e);return Fle(t,r,n)}function Eet(e){return ir(t=>fL(t,e))}var Ole=(e,t)=>{var r,n=Number(t);if(!(Rc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Cet=e=>e.tooltip.settings,w0={active:!1,index:null,dataKey:void 0,coordinate:void 0},_et={itemInteraction:{click:w0,hover:w0},axisInteraction:{click:w0,hover:w0},keyboardInteraction:w0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Dle=Uc({name:"tooltip",initialState:_et,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=$f(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Net,removeTooltipEntrySettings:ket,setTooltipSettingsState:Bet,setActiveMouseOverItemIndex:Rle,mouseLeaveItem:Tet,mouseLeaveChart:Ple,setActiveClickItemIndex:Iet,setMouseOverAxisIndex:Lle,setMouseClickAxisIndex:jet,setSyncInteraction:D6,setKeyboardInteraction:R6}=Dle.actions,Fet=Dle.reducer;function GG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GG(Object(r),!0).forEach(function(n){Oet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oet(e,t,r){return(t=Det(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Det(e){var t=Ret(e,"string");return typeof t=="symbol"?t:t+""}function Ret(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pet(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Let(e){return e.index!=null}var Mle=(e,t,r,n)=>{if(t==null)return w0;var a=Pet(e,t,r);if(a==null)return w0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(Let(a)){if(s)return UC(UC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return UC(UC({},w0),{},{coordinate:a.coordinate})},hL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Mc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Ule=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var l=i[0],u=l==null?void 0:o(l.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Qle=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},f2=e=>e.options.tooltipPayloadSearcher,p1=e=>e.tooltip;function qG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qG(Object(r),!0).forEach(function(n){Met(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Met(e,t,r){return(t=Uet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uet(e){var t=Qet(e,"string");return typeof t=="symbol"?t:t+""}function Qet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Het(e,t){return e??t}var Hle=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:v,settings:b}=p,y=Het(v,o),_=Array.isArray(y)?uoe(y,u,d):y,S=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,k=b==null?void 0:b.nameKey,B;if(n!=null&&n.dataKey&&Array.isArray(_)&&!Array.isArray(_[0])&&i==="axis"?B=aWe(_,n.dataKey,a):B=s(_,t,l,k),Array.isArray(B))B.forEach(w=>{var C=WG(WG({},b),{},{name:w.name,unit:w.unit,color:void 0,fill:void 0});h.push(fG({tooltipEntrySettings:C,dataKey:w.dataKey,payload:w.payload,value:Da(w.payload,w.dataKey),name:w.name}))});else{var F;h.push(fG({tooltipEntrySettings:b,dataKey:S,payload:B,value:Da(B,S),name:(F=Da(B,k))!==null&&F!==void 0?F:b==null?void 0:b.name}))}return h},f)}},mL=ct([Ii,jn,ale,$P,Ti],ble),Vet=ct([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),zet=ct([Ti,A1],YP),h2=ct([Vet,Ii,zet],ZP),$et=ct([h2],e=>e.filter(M4)),Ket=ct([h2],eL),g1=ct([Ket,xm],tL),Get=ct([$et,xm,Ii],nle),pL=ct([g1,Ii,h2],nL),qet=ct([Ii],aL),Wet=ct([h2],e=>e.filter(M4)),Xet=ct([Get,Wet,o2],cle),Yet=ct([Xet,xm,Ti],ule),Jet=ct([h2],ile),Zet=ct([g1,Ii,Jet,Q4,Ti],dle),ett=ct([fle,Ti,A1],h1),ttt=ct([ett,Ti],ple),rtt=ct([hle,Ti,A1],h1),ntt=ct([rtt,Ti],gle),att=ct([mle,Ti,A1],h1),stt=ct([att,Ti],vle),itt=ct([ttt,stt,ntt],w5),ott=ct([Ii,qet,Yet,Zet,itt,jn,Ti],sL),Vle=ct([Ii,jn,g1,pL,o2,Ti,ott],iL),ltt=ct([Vle,Ii,mL],lL),ctt=ct([Ii,Vle,ltt,Ti],uL),zle=e=>{var t=Ti(e),r=A1(e),n=!1;return d2(e,t,r,n)},$le=ct([Ii,zle],P4),Kle=ct([Ii,mL,ctt,$le],H4),utt=ct([jn,pL,Ii,Ti],Nle),dtt=ct([jn,pL,Ii,Ti],dL),Att=(e,t,r,n,a,s,i,o)=>{if(t){var{type:l}=t,u=vm(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Xi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},bh=ct([jn,Ii,mL,Kle,zle,utt,dtt,Ti],Att),gL=ct([Ile,jle,Cet],(e,t,r)=>Fle(r.shared,e,t)),Gle=e=>e.tooltip.settings.trigger,vL=e=>e.tooltip.settings.defaultIndex,$4=ct([p1,gL,Gle,vL],Mle),cm=ct([$4,g1],hL),qle=ct([bh,cm],Ole),Wle=ct([$4],e=>{if(e)return e.dataKey}),Xle=ct([p1,gL,Gle,vL],Qle),ftt=ct([gh,vh,jn,Bi,bh,vL,Xle,f2],Ule),htt=ct([$4,ftt],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),mtt=ct([$4],e=>e.active),ptt=ct([Xle,cm,xm,Ii,qle,f2,gL],Hle),gtt=ct([ptt],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function XG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XG(Object(r),!0).forEach(function(n){vtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vtt(e,t,r){return(t=xtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xtt(e){var t=btt(e,"string");return typeof t=="symbol"?t:t+""}function btt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ytt=()=>ir(Ii),wtt=()=>{var e=ytt(),t=ir(bh),r=ir(Kle);return bw(YG(YG({},e),{},{scale:r}),t)},Ett=()=>ir($P),xL=(e,t)=>t,Yle=(e,t,r)=>r,bL=(e,t,r,n)=>n,Ctt=ct(bh,e=>_4(e,t=>t.coordinate)),yL=ct([p1,xL,Yle,bL],Mle),Jle=ct([yL,g1],hL),_tt=(e,t,r)=>{if(t!=null){var n=p1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Zle=ct([p1,xL,Yle,bL],Qle),E5=ct([gh,vh,jn,Bi,bh,bL,Zle,f2],Ule),Stt=ct([yL,E5],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),ece=ct(bh,Jle,Ole),Ntt=ct([Zle,Jle,xm,Ii,ece,f2,xL],Hle),ktt=ct([yL],e=>({isActive:e.active,activeIndex:e.index})),Btt=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var l=RYe(e.chartX,e.chartY,t,r,o);if(l){var u=LYe(l,t),d=EYe(u,i,s,n,a),f=PYe(t,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function P6(){return P6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P6.apply(null,arguments)}function JG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JG(Object(r),!0).forEach(function(n){Ttt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ttt(e,t,r){return(t=Itt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Itt(e){var t=jtt(e,"string");return typeof t=="symbol"?t:t+""}function jtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ftt(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=yJe;else if(u==="BarChart")p=wJe(i,d,a,s),g=Ioe;else if(i==="radial"){var{cx:v,cy:b,radius:y,startAngle:_,endAngle:S}=joe(d);p={cx:v,cy:b,startAngle:_,endAngle:S,innerRadius:y,outerRadius:y},g=Ooe}else p={points:iZe(i,d,a)},g=Coe;var k=typeof o=="object"&&"className"in o?o.className:void 0,B=QC(QC(QC(QC({stroke:"#ccc",pointerEvents:"none"},a),p),Xn(o,!1)),{},{payload:f,payloadIndex:h,className:Cn("recharts-tooltip-cursor",k)});return j.isValidElement(o)?j.cloneElement(o,B):j.createElement(g,B)}function Ott(e){var t=wtt(),r=goe(),n=UP(),a=Ett();return j.createElement(Ftt,P6({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var tce=j.createContext(null),Dtt=()=>j.useContext(tce),mI={exports:{}},ZG;function Rtt(){return ZG||(ZG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||l,h),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var v=r?r+u:u;if(!this._events[v])return!1;var b=this._events[v],y=arguments.length,_,S;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(S=1,_=new Array(y-1);S<y;S++)_[S-1]=arguments[S];b.fn.apply(b.context,_)}else{var k=b.length,B;for(S=0;S<k;S++)switch(b[S].once&&this.removeListener(u,b[S].fn,void 0,!0),y){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,f);break;case 4:b[S].fn.call(b[S].context,d,f,h);break;default:if(!_)for(B=1,_=new Array(y-1);B<y;B++)_[B-1]=arguments[B];b[S].fn.apply(b[S].context,_)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var v=0,b=[],y=g.length;v<y;v++)(g[v].fn!==d||h&&!g[v].once||f&&g[v].context!==f)&&b.push(g[v]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(mI)),mI.exports}var Ptt=Rtt();const Ltt=bl(Ptt);var Ew=new Ltt,L6="recharts.syncEvent.tooltip",eq="recharts.syncEvent.brush";function wL(e,t){if(t){var r=Number.parseInt(t,10);if(!Rc(r))return e==null?void 0:e[r]}}var Mtt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},rce=Uc({name:"options",initialState:Mtt,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Utt=rce.reducer,{createEventEmitter:Qtt}=rce.actions;function Htt(e){return e.tooltip.syncInteraction}var Vtt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},nce=Uc({name:"chartData",initialState:Vtt,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:tq,setDataStartEndIndexes:ztt,setComputedData:Iut}=nce.actions,$tt=nce.reducer,ace=()=>{};function Ktt(){var e=ir(KP),t=ir(GP),r=us(),n=ir(Joe),a=ir(bh),s=UP(),i=MP(),o=ir(l=>l.rootProps.className);j.useEffect(()=>{if(e==null)return ace;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(F=>String(F.value)===d.payload.label));var{coordinate:v}=d.payload;if(h==null||d.payload.active===!1||v==null||i==null){r(D6({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=v,_=Math.min(b,i.x+i.width),S=Math.min(y,i.y+i.height),k={x:s==="horizontal"?h.coordinate:_,y:s==="horizontal"?S:h.coordinate},B=D6({active:d.payload.active,coordinate:k,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(B)}}};return Ew.on(L6,l),()=>{Ew.off(L6,l)}},[o,r,t,e,n,a,s,i])}function Gtt(){var e=ir(KP),t=ir(GP),r=us();j.useEffect(()=>{if(e==null)return ace;var n=(a,s,i)=>{t!==i&&e===a&&r(ztt(s))};return Ew.on(eq,n),()=>{Ew.off(eq,n)}},[r,t,e])}function qtt(){var e=us();j.useEffect(()=>{e(Qtt())},[e]),Ktt(),Gtt()}function Wtt(e,t,r,n,a,s){var i=ir(h=>_tt(h,e,t)),o=ir(GP),l=ir(KP),u=ir(Joe),d=ir(Htt),f=d==null?void 0:d.active;j.useEffect(()=>{if(!f&&l!=null&&o!=null){var h=D6({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});Ew.emit(L6,l,h,o)}},[f,r,i,a,n,o,l,u,s])}function rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rq(Object(r),!0).forEach(function(n){Xtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xtt(e,t,r){return(t=Ytt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ytt(e){var t=Jtt(e,"string");return typeof t=="symbol"?t:t+""}function Jtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ztt(e){return e.dataKey}function ert(e,t){return j.isValidElement(e)?j.cloneElement(e,t):typeof e=="function"?j.createElement(e,t):j.createElement(ZYe,t)}var aq=[],trt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!lg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function HC(e){var t=Pu(e,trt),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:v,shared:b,trigger:y,defaultIndex:_,portal:S,axisId:k}=t,B=us(),F=typeof _=="number"?String(_):_;j.useEffect(()=>{B(Bet({shared:b,trigger:y,axisId:k,active:r,defaultIndex:F}))},[B,b,y,k,r,F]);var w=MP(),C=Eoe(),N=Eet(b),{activeIndex:P,isActive:D}=ir(te=>ktt(te,N,y,F)),T=ir(te=>Ntt(te,N,y,F)),U=ir(te=>ece(te,N,y,F)),R=ir(te=>Stt(te,N,y,F)),X=T,q=Dtt(),Z=r??D,[H,V]=fXe([X,Z]),K=N==="axis"?U:void 0;Wtt(N,y,R,K,P,Z);var ne=S??q;if(ne==null)return null;var L=X??aq;Z||(L=aq),o&&L.length&&(L=zWe(X.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),d,Ztt));var W=L.length>0,J=j.createElement(iJe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:l,active:Z,coordinate:R,hasPayload:W,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:w,wrapperStyle:g,lastBoundingBox:H,innerRef:V,hasPortalFromProps:!!S},ert(i,nq(nq({},t),{},{payload:L,label:K,active:Z,coordinate:R,accessibilityLayer:C})));return j.createElement(j.Fragment,null,Bne.createPortal(J,ne),Z&&j.createElement(Ott,{cursor:v,tooltipEventType:N,coordinate:R,payload:X,index:P}))}var pI={},gI={},vI={},sq;function rrt(){return sq||(sq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const l=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),v()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(..._){if(a!=null&&a.aborted)return;i=this,o=_;const S=h==null;p(),l&&S&&d()};return y.schedule=p,y.cancel=v,y.flush=b,a==null||a.addEventListener("abort",v,{once:!0}),y}e.debounce=t}(vI)),vI}var iq;function nrt(){return iq||(iq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rrt();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:l}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...v){d=n.apply(this,v),f=null},a,{edges:u}),p=function(...v){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,v),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,v),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(gI)),gI}var oq;function art(){return oq||(oq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nrt();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(pI)),pI}var xI,lq;function srt(){return lq||(lq=1,xI=art().throttle),xI}var irt=srt();const ort=bl(irt);var Ny=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cq(Object(r),!0).forEach(function(n){lrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lrt(e,t,r){return(t=crt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function crt(e){var t=urt(e,"string");return typeof t=="symbol"?t:t+""}function urt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VC=j.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,v=j.useRef(null),b=j.useRef();b.current=p,j.useImperativeHandle(t,()=>v.current);var[y,_]=j.useState({containerWidth:n.width,containerHeight:n.height}),S=j.useCallback((B,F)=>{_(w=>{var C=Math.round(B),N=Math.round(F);return w.containerWidth===C&&w.containerHeight===N?w:{containerWidth:C,containerHeight:N}})},[]);j.useEffect(()=>{var B=N=>{var P,{width:D,height:T}=N[0].contentRect;S(D,T),(P=b.current)===null||P===void 0||P.call(b,D,T)};d>0&&(B=ort(B,d,{trailing:!0,leading:!1}));var F=new ResizeObserver(B),{width:w,height:C}=v.current.getBoundingClientRect();return S(w,C),F.observe(v.current),()=>{F.disconnect()}},[S,d]);var k=j.useMemo(()=>{var{containerWidth:B,containerHeight:F}=y;if(B<0||F<0)return null;Ny(up(a)||up(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),Ny(!r||r>0,"The aspect(%s) must be greater than zero.",r);var w=up(a)?B:a,C=up(s)?F:s;return r&&r>0&&(w?C=w/r:C&&(w=C*r),l&&C>l&&(C=l)),Ny(w>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,w,C,a,s,i,o,r),j.Children.map(u,N=>j.cloneElement(N,{width:w,height:C,style:bI({width:w,height:C},N.props.style)}))},[r,u,s,l,o,i,y,a]);return j.createElement("div",{id:f?"".concat(f):void 0,className:Cn("recharts-responsive-container",h),style:bI(bI({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:l}),ref:v},j.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),m2=e=>null;m2.displayName="Cell";function drt(e,t,r){return(t=Art(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Art(e){var t=frt(e,"string");return typeof t=="symbol"?t:t+""}function frt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class hrt{constructor(t){drt(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function uq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mrt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uq(Object(r),!0).forEach(function(n){prt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function prt(e,t,r){return(t=grt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function grt(e){var t=vrt(e,"string");return typeof t=="symbol"?t:t+""}function vrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xrt={cacheSize:2e3,enableCache:!0},sce=mrt({},xrt),dq=new hrt(sce.cacheSize),brt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Aq="recharts_measurement_span";function yrt(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var fq=(e,t)=>{try{var r=document.getElementById(Aq);r||(r=document.createElement("span"),r.setAttribute("id",Aq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,brt,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ky=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||lg.isSsr)return{width:0,height:0};if(!sce.enableCache)return fq(t,r);var n=yrt(t,r),a=dq.get(n);if(a)return a;var s=fq(t,r);return dq.set(n,s),s},hq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wrt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ert=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ice={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Crt=Object.keys(ice),Iv="NaN";function _rt(e,t){return e*ice[t]}class Ml{static parse(t){var r,[,n,a]=(r=Ert.exec(t))!==null&&r!==void 0?r:[];return new Ml(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Rc(t)&&(this.unit=""),r!==""&&!wrt.test(r)&&(this.num=NaN,this.unit=""),Crt.includes(r)&&(this.num=_rt(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Rc(this.num)}}function oce(e){if(e.includes(Iv))return Iv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=hq.exec(t))!==null&&r!==void 0?r:[],i=Ml.parse(n??""),o=Ml.parse(s??""),l=a==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return Iv;t=t.replace(hq,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=mq.exec(t))!==null&&u!==void 0?u:[],p=Ml.parse(d??""),g=Ml.parse(h??""),v=f==="+"?p.add(g):p.subtract(g);if(v.isNaN())return Iv;t=t.replace(mq,v.toString())}return t}var pq=/\(([^()]*)\)/;function Srt(e){for(var t=e,r;(r=pq.exec(t))!=null;){var[,n]=r;t=t.replace(pq,oce(n))}return t}function Nrt(e){var t=e.replace(/\s+/g,"");return t=Srt(t),t=oce(t),t}function krt(e){try{return Nrt(e)}catch{return Iv}}function yI(e){var t=krt(e.slice(5,-1));return t===Iv?"":t}var Brt=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Trt=["dx","dy","angle","className","breakAll"];function M6(){return M6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M6.apply(null,arguments)}function gq(e,t){if(e==null)return{};var r,n,a=Irt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Irt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lce=/[ \f\n\r\t\v\u2028\u2029]+/,cce=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ks(t)||(r?a=t.toString().split(""):a=t.toString().split(lce));var s=a.map(o=>({word:o,width:ky(o,n).width})),i=r?0:ky(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},jrt=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,u=ur(s),d=i,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((T,U)=>{var{word:R,width:X}=U,q=T[T.length-1];if(q&&(n==null||a||q.width+X+r<Number(n)))q.words.push(R),q.width+=X+r;else{var Z={words:[R],width:X};T.push(Z)}return T},[])},h=f(t),p=P=>P.reduce((D,T)=>D.width>T.width?D:T);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var v="…",b=P=>{var D=d.slice(0,P),T=cce({breakAll:l,style:o,children:D+v}).wordsWithComputedWidth,U=f(T),R=U.length>s||p(U).width>Number(n);return[R,U]},y=0,_=d.length-1,S=0,k;y<=_&&S<=d.length-1;){var B=Math.floor((y+_)/2),F=B-1,[w,C]=b(F),[N]=b(B);if(!w&&!N&&(y=B+1),w&&N&&(_=B-1),!w&&N){k=C;break}S++}return k||h},vq=e=>{var t=ks(e)?[]:e.toString().split(lce);return[{words:t}]},Frt=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!lg.isSsr){var o,l,u=cce({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return vq(n);return jrt({breakAll:s,children:n,maxLines:i,style:a},o,l,t,r)}return vq(n)},xq="#808080",v1=j.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=xq}=e,d=gq(e,Brt),f=j.useMemo(()=>Frt({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:v,breakAll:b}=d,y=gq(d,Trt);if(!UA(r)||!UA(n))return null;var _=r+(ur(h)?h:0),S=n+(ur(p)?p:0),k;switch(l){case"start":k=yI("calc(".concat(s,")"));break;case"middle":k=yI("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:k=yI("calc(".concat(f.length-1," * -").concat(a,")"));break}var B=[];if(i){var F=f[0].width,{width:w}=d;B.push("scale(".concat(ur(w)?w/F:1,")"))}return g&&B.push("rotate(".concat(g,", ").concat(_,", ").concat(S,")")),B.length&&(y.transform=B.join(" ")),j.createElement("text",M6({},Xn(y,!0),{ref:t,x:_,y:S,className:Cn("recharts-text",v),textAnchor:o,fill:u.includes("url")?xq:u}),f.map((C,N)=>{var P=C.words.join(b?"":" ");return j.createElement("tspan",{x:_,dy:N===0?k:a,key:"".concat(P,"-").concat(N)},P)}))});v1.displayName="Text";var Ort=["offset"],Drt=["labelRef"];function bq(e,t){if(e==null)return{};var r,n,a=Rrt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yq(Object(r),!0).forEach(function(n){Prt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Prt(e,t,r){return(t=Lrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lrt(e){var t=Mrt(e,"string");return typeof t=="symbol"?t:t+""}function Mrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tf.apply(null,arguments)}var Urt=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},EL=e=>e!=null&&typeof e=="function",Qrt=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Hrt=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,v=Qrt(f,h),b=v>=0?1:-1,y,_;a==="insideStart"?(y=f+b*s,_=p):a==="insideEnd"?(y=h-b*s,_=!p):a==="end"&&(y=h+b*s,_=p),_=v<=0?_:!_;var S=ea(o,l,g,y),k=ea(o,l,g,y+(_?1:-1)*359),B="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(_?0:1,`,
    `).concat(k.x,",").concat(k.y),F=ks(e.id)?gw("recharts-radial-line-"):e.id;return j.createElement("text",Tf({},r,{dominantBaseline:"central",className:Cn("recharts-radial-bar-label",i)}),j.createElement("defs",null,j.createElement("path",{id:F,d:B})),j.createElement("textPath",{xlinkHref:"#".concat(F)},t))},Vrt=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=ea(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=ea(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},zrt=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:l}=t,u=l>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,v=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return xs(xs({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var _={x:s+o/2,y:i+l+d,textAnchor:"middle",verticalAnchor:h};return xs(xs({},_),r?{height:Math.max(r.y+r.height-(i+l),0),width:o}:{})}if(a==="left"){var S={x:s-g,y:i+l/2,textAnchor:v,verticalAnchor:"middle"};return xs(xs({},S),r?{width:Math.max(S.x-r.x,0),height:l}:{})}if(a==="right"){var k={x:s+o+g,y:i+l/2,textAnchor:b,verticalAnchor:"middle"};return xs(xs({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:l}:{})}var B=r?{width:o,height:l}:{};return a==="insideLeft"?xs({x:s+g,y:i+l/2,textAnchor:b,verticalAnchor:"middle"},B):a==="insideRight"?xs({x:s+o-g,y:i+l/2,textAnchor:v,verticalAnchor:"middle"},B):a==="insideTop"?xs({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},B):a==="insideBottom"?xs({x:s+o/2,y:i+l-d,textAnchor:"middle",verticalAnchor:f},B):a==="insideTopLeft"?xs({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},B):a==="insideTopRight"?xs({x:s+o-g,y:i+d,textAnchor:v,verticalAnchor:h},B):a==="insideBottomLeft"?xs({x:s+g,y:i+l-d,textAnchor:b,verticalAnchor:f},B):a==="insideBottomRight"?xs({x:s+o-g,y:i+l-d,textAnchor:v,verticalAnchor:f},B):a&&typeof a=="object"&&(ur(a.x)||up(a.x))&&(ur(a.y)||up(a.y))?xs({x:s+xl(a.x,o),y:i+xl(a.y,l),textAnchor:"end",verticalAnchor:"end"},B):xs({x:s+o/2,y:i+l/2,textAnchor:"middle",verticalAnchor:"middle"},B)},$rt=e=>"cx"in e&&ur(e.cx);function Vl(e){var{offset:t=5}=e,r=bq(e,Ort),n=xs({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:l,className:u="",textBreakAll:d,labelRef:f}=n,h=ir(d1),p=MP(),g=s==="center"?p:h??p,v=a||g;if(!v||ks(i)&&ks(o)&&!j.isValidElement(l)&&typeof l!="function")return null;var b=xs(xs({},n),{},{viewBox:v});if(j.isValidElement(l)){var{labelRef:y}=b,_=bq(b,Drt);return j.cloneElement(l,_)}var S;if(typeof l=="function"){if(S=j.createElement(l,b),j.isValidElement(S))return S}else S=Urt(n);var k=$rt(v),B=Xn(n,!0);if(k&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Hrt(n,S,B,v);var F=k?Vrt(v,n.offset,n.position):zrt(n,v);return j.createElement(v1,Tf({ref:f,className:Cn("recharts-label",u)},B,F,{breakAll:d}),S)}Vl.displayName="Label";var uce=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:l,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:v,clockWise:b,labelViewBox:y}=e;if(y)return y;if(ur(g)&&ur(v)){if(ur(d)&&ur(f))return{x:d,y:f,width:g,height:v};if(ur(h)&&ur(p))return{x:h,y:p,width:g,height:v}}if(ur(d)&&ur(f))return{x:d,y:f,width:0,height:0};if(ur(t)&&ur(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},Krt=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?j.createElement(Vl,Tf({key:"label-implicit"},n)):UA(e)?j.createElement(Vl,Tf({key:"label-implicit",value:e},n)):j.isValidElement(e)?e.type===Vl?j.cloneElement(e,xs({key:"label-implicit"},n)):j.createElement(Vl,Tf({key:"label-implicit",content:e},n)):EL(e)?j.createElement(Vl,Tf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?j.createElement(Vl,Tf({},e,{key:"label-implicit"},n)):null},Grt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=uce(t),o=s2(a,Vl).map((u,d)=>j.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var l=Krt(t.label,r||i,s);return[l,...o]};Vl.parseViewBox=uce;Vl.renderCallByParent=Grt;var wI={},EI={},wq;function qrt(){return wq||(wq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(EI)),EI}var CI={},Eq;function Wrt(){return Eq||(Eq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(CI)),CI}var Cq;function Xrt(){return Cq||(Cq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qrt(),r=Wrt(),n=_P();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(wI)),wI}var _I,_q;function Yrt(){return _q||(_q=1,_I=Xrt().last),_I}var Jrt=Yrt();const dce=bl(Jrt);var Zrt=["valueAccessor"],ent=["data","dataKey","clockWise","id","textBreakAll"];function C5(){return C5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C5.apply(null,arguments)}function Sq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sq(Object(r),!0).forEach(function(n){tnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tnt(e,t,r){return(t=rnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rnt(e){var t=nnt(e,"string");return typeof t=="symbol"?t:t+""}function nnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kq(e,t){if(e==null)return{};var r,n,a=ant(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ant(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var snt=e=>Array.isArray(e.value)?dce(e.value):e.value;function z0(e){var{valueAccessor:t=snt}=e,r=kq(e,Zrt),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,l=kq(r,ent);return!n||!n.length?null:j.createElement(cs,{className:"recharts-label-list"},n.map((u,d)=>{var f=ks(a)?t(u,d):Da(u&&u.payload,a),h=ks(i)?{}:{id:"".concat(i,"-").concat(d)};return j.createElement(Vl,C5({},Xn(u,!0),l,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:Vl.parseViewBox(ks(s)?u:Nq(Nq({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}z0.displayName="LabelList";function int(e,t){return e?e===!0?j.createElement(z0,{key:"labelList-implicit",data:t}):j.isValidElement(e)||EL(e)?j.createElement(z0,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?j.createElement(z0,C5({data:t},e,{key:"labelList-implicit"})):null:null}function ont(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=s2(n,z0).map((i,o)=>j.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=int(e.label,t);return[s,...a]}z0.renderCallByParent=ont;var lnt=["points","className","baseLinePoints","connectNulls"];function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jv.apply(null,arguments)}function cnt(e,t){if(e==null)return{};var r,n,a=unt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function unt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Bq=e=>e&&e.x===+e.x&&e.y===+e.y,dnt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{Bq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Bq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},By=(e,t)=>{var r=dnt(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},Ant=(e,t,r)=>{var n=By(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(By(t.reverse(),r).slice(1))},Ace=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=cnt(e,lnt);if(!t||!t.length)return null;var i=Cn("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",l=Ant(t,n,a);return j.createElement("g",{className:i},j.createElement("path",jv({},Xn(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:l})),o?j.createElement("path",jv({},Xn(s,!0),{fill:"none",d:By(t,a)})):null,o?j.createElement("path",jv({},Xn(s,!0),{fill:"none",d:By(n,a)})):null)}var u=By(t,a);return j.createElement("path",jv({},Xn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function U6(){return U6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U6.apply(null,arguments)}var CL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=Cn("recharts-dot",a);return t===+t&&r===+r&&n===+n?j.createElement("circle",U6({},nl(e),CP(e),{className:s,cx:t,cy:r,r:n})):null},_L=e=>e.graphicalItems.polarItems,fnt=ct([Ba,c2],YP),SL=ct([_L,Js,fnt],ZP),hnt=ct([SL],eL),NL=ct([hnt,D4],tL),fce=ct([NL,Js,SL],nL),mnt=ct([NL,Js,SL],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Da(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Da(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),Tq=()=>{},pnt=ct([Js,xle,Tq,mnt,Tq,jn,Ba],sL),hce=ct([Js,jn,NL,fce,o2,Ba,pnt],iL),mce=ct([hce,Js,ym],lL),gnt=ct([Js,hce,mce,Ba],uL),kL=(e,t,r)=>{switch(t){case"angleAxis":return u1(e,r);case"radiusAxis":return l2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},BL=(e,t,r)=>{switch(t){case"angleAxis":return jZe(e,r);case"radiusAxis":return FZe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},x1=ct([kL,ym,gnt,BL],H4),pce=ct([jn,fce,f1,Ba],dL),b1=ct([jn,kL,ym,x1,mce,BL,A2,pce,Ba],kle);ct([jn,kL,x1,BL,A2,pce,Ba],Tle);var vnt=(e,t)=>b1(e,"angleAxis",t,!1),xnt=ct([vnt],e=>{if(e)return e.map(t=>t.coordinate)}),bnt=(e,t)=>b1(e,"radiusAxis",t,!1),ynt=ct([bnt],e=>{if(e)return e.map(t=>t.coordinate)}),wnt=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function Ent(e,t){if(e==null)return{};var r,n,a=Cnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Cnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oh.apply(null,arguments)}function Iq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iq(Object(r),!0).forEach(function(n){_nt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _nt(e,t,r){return(t=Snt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Snt(e){var t=Nnt(e,"string");return typeof t=="symbol"?t:t+""}function Nnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var knt=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=ea(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},Bnt=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=Dx({stroke:"#ccc"},nl(e));return j.createElement("g",{className:"recharts-polar-grid-angle"},s.map(l=>{var u=ea(t,r,n,l),d=ea(t,r,a,l);return j.createElement("line",oh({},o,{key:"line-".concat(l),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},Tnt=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=Dx(Dx({stroke:"#ccc"},nl(e)),{},{fill:"none"});return j.createElement("circle",oh({},s,{className:Cn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},Int=e=>{var{radius:t,index:r}=e,n=Dx(Dx({stroke:"#ccc"},nl(e)),{},{fill:"none"});return j.createElement("path",oh({},n,{className:Cn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:knt(t,e.cx,e.cy,e.polarAngles)}))},jnt=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:j.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?j.createElement(Tnt,oh({key:s},e,{radius:n,index:a})):j.createElement(Int,oh({key:s},e,{radius:n,index:a}))}))},gce=e=>{var t,r,n,a,s,i,o,l,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:v,outerRadius:b}=e,y=Ent(e,wnt),_=ir(d1),S=Dx({cx:(t=(r=_==null?void 0:_.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=_==null?void 0:_.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=_==null?void 0:_.innerRadius)!==null&&i!==void 0?i:v)!==null&&s!==void 0?s:0,outerRadius:(o=(l=_==null?void 0:_.outerRadius)!==null&&l!==void 0?l:b)!==null&&o!==void 0?o:0},y),{polarAngles:k,polarRadius:B,cx:F,cy:w,innerRadius:C,outerRadius:N}=S,P=ir(R=>xnt(R,f)),D=ir(R=>ynt(R,h)),T=Array.isArray(k)?k:P,U=Array.isArray(B)?B:D;return N<=0||T==null||U==null?null:j.createElement("g",{className:"recharts-polar-grid"},j.createElement(Bnt,oh({cx:F,cy:w,innerRadius:C,outerRadius:N,gridType:u,radialLines:d},S,{polarAngles:T,polarRadius:U})),j.createElement(jnt,oh({cx:F,cy:w,innerRadius:C,outerRadius:N,gridType:u,radialLines:d},S,{polarAngles:T,polarRadius:U})))};gce.displayName="PolarGrid";var SI={},NI={},jq;function Fnt(){return jq||(jq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l>s&&(s=l,a=o)}return a}e.maxBy=t}(NI)),NI}var Fq;function Ont(){return Fq||(Fq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fnt(),r=C4(),n=TP();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(SI)),SI}var kI,Oq;function Dnt(){return Oq||(Oq=1,kI=Ont().maxBy),kI}var Rnt=Dnt();const Pnt=bl(Rnt);var BI={},TI={},Dq;function Lnt(){return Dq||(Dq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l<s&&(s=l,a=o)}return a}e.minBy=t}(TI)),TI}var Rq;function Mnt(){return Rq||(Rq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lnt(),r=C4(),n=TP();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(BI)),BI}var II,Pq;function Unt(){return Pq||(Pq=1,II=Mnt().minBy),II}var Qnt=Unt();const Hnt=bl(Qnt);var Vnt={radiusAxis:{},angleAxis:{}},vce=Uc({name:"polarAxis",initialState:Vnt,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:znt,removeRadiusAxis:$nt,addAngleAxis:Knt,removeAngleAxis:Gnt}=vce.actions,qnt=vce.reducer,Wnt=["cx","cy","angle","axisLine"],Xnt=["angle","tickFormatter","stroke","tick"];function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(null,arguments)}function Lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lq(Object(r),!0).forEach(function(n){K4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K4(e,t,r){return(t=Ynt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ynt(e){var t=Jnt(e,"string");return typeof t=="symbol"?t:t+""}function Jnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xce(e,t){if(e==null)return{};var r,n,a=Znt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Znt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bce="radiusAxis";function eat(e){var t=us();return j.useEffect(()=>(t(znt(e)),()=>{t($nt(e))})),null}var tat=(e,t,r,n)=>{var{coordinate:a}=e;return ea(r,n,a,t)},rat=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},nat=(e,t,r,n)=>{var a=Pnt(n,i=>i.coordinate||0),s=Hnt(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},aat=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=xce(e,Wnt),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),l=ea(r,n,o[0],a),u=ea(r,n,o[1],a),d=TA(TA(TA({},nl(i)),{},{fill:"none"},Xn(s,!1)),{},{x1:l.x,y1:l.y,x2:u.x,y2:u.y});return j.createElement("line",Cw({className:"recharts-polar-radius-axis-line"},d))},sat=(e,t,r)=>{var n;return j.isValidElement(e)?n=j.cloneElement(e,t):typeof e=="function"?n=e(t):n=j.createElement(v1,Cw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},iat=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=xce(e,Xnt),o=rat(e.orientation),l=nl(i),u=Xn(s,!1),d=t.map((f,h)=>{var p=tat(f,e.angle,e.cx,e.cy),g=TA(TA(TA(TA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},l),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return j.createElement(cs,Cw({className:Cn("recharts-polar-radius-axis-tick",coe(s)),key:"tick-".concat(f.coordinate)},i1(e,f,h)),sat(s,g,n?n(f.value,h):f.value))});return j.createElement(cs,{className:"recharts-polar-radius-axis-ticks"},d)},oat=e=>{var{radiusAxisId:t}=e,r=ir(d1),n=ir(l=>x1(l,"radiusAxis",t)),a=ir(l=>b1(l,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=TA(TA(TA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return j.createElement(cs,{className:Cn("recharts-polar-radius-axis",bce,s.className)},o&&aat(s,a),i&&iat(s,a),Vl.renderCallByParent(s,nat(s.angle,s.cx,s.cy,a)))};class G4 extends j.PureComponent{render(){return j.createElement(j.Fragment,null,j.createElement(eat,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),j.createElement(oat,this.props))}}K4(G4,"displayName","PolarRadiusAxis");K4(G4,"axisType",bce);K4(G4,"defaultProps",Hl);var lat=["children"];function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lh.apply(null,arguments)}function Mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mq(Object(r),!0).forEach(function(n){q4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q4(e,t,r){return(t=cat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cat(e){var t=uat(e,"string");return typeof t=="symbol"?t:t+""}function uat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dat(e,t){if(e==null)return{};var r,n,a=Aat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Aat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fat=Math.PI/180,Uq=1e-5,yce="angleAxis";function hat(e){var t=us(),r=j.useMemo(()=>{var{children:s}=e,i=dat(e,lat);return i},[e]),n=ir(s=>u1(s,r.id)),a=r===n;return j.useEffect(()=>(t(Knt(r)),()=>{t(Gnt(r))}),[t,r]),a?e.children:null}var mat=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,l=ea(r,n,a,e.coordinate),u=ea(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:l.x,y1:l.y,x2:u.x,y2:u.y}},pat=(e,t)=>{var r=Math.cos(-e.coordinate*fat);return r>Uq?t==="outer"?"start":"end":r<-Uq?t==="outer"?"end":"start":"middle"},gat=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=_A(_A({},nl(e)),{},{fill:"none"},Xn(s,!1));if(a==="circle")return j.createElement(CL,lh({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var l=i.map(u=>ea(t,r,n,u.coordinate));return j.createElement(Ace,lh({className:"recharts-polar-angle-axis-line"},o,{points:l}))},vat=e=>{var{tick:t,tickProps:r,value:n}=e;return t?j.isValidElement(t)?j.cloneElement(t,r):typeof t=="function"?t(r):j.createElement(v1,lh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},xat=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=nl(e),o=Xn(t,!1),l=_A(_A({},i),{},{fill:"none"},Xn(r,!1)),u=s.map((d,f)=>{var h=mat(d,e),p=pat(d,e.orientation),g=_A(_A(_A({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return j.createElement(cs,lh({className:Cn("recharts-polar-angle-axis-tick",coe(t)),key:"tick-".concat(d.coordinate)},i1(e,d,f)),r&&j.createElement("line",lh({className:"recharts-polar-angle-axis-tick-line"},l,h)),j.createElement(vat,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return j.createElement(cs,{className:"recharts-polar-angle-axis-ticks"},u)},bat=e=>{var{angleAxisId:t}=e,r=ir(d1),n=ir(o=>x1(o,"angleAxis",t)),a=Zl(),s=ir(o=>b1(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=_A(_A(_A({},e),{},{scale:n},r),{},{radius:r.outerRadius});return j.createElement(cs,{className:Cn("recharts-polar-angle-axis",yce,i.className)},j.createElement(gat,lh({},i,{ticks:s})),j.createElement(xat,lh({},i,{ticks:s})))};class W4 extends j.PureComponent{render(){return this.props.radius<=0?null:j.createElement(hat,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},j.createElement(bat,this.props))}}q4(W4,"displayName","PolarAngleAxis");q4(W4,"axisType",yce);q4(W4,"defaultProps",CA);function Qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qq(Object(r),!0).forEach(function(n){yat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yat(e,t,r){return(t=wat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wat(e){var t=Eat(e,"string");return typeof t=="symbol"?t:t+""}function Eat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cat=(e,t)=>t,TL=ct([_L,Cat],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),_at=[],IL=(e,t,r)=>(r==null?void 0:r.length)===0?_at:r,wce=ct([D4,TL,IL],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>Hq(Hq({},t.presentationProps),s.props))),a!=null)return a}}),Sat=ct([wce,TL,IL],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Da(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:o1(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),Nat=ct([wce,TL,IL,Bi],(e,t,r,n)=>{if(!(t==null||e==null))return bst({offset:n,pieSettings:t,displayedData:e,cells:r})}),jI={},Vq;function kat(){return Vq||(Vq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(jI)),jI}var FI,zq;function Bat(){return zq||(zq=1,FI=kat().isPlainObject),FI}var Tat=Bat();const Iat=bl(Tat);function _5(){return _5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_5.apply(null,arguments)}var $q=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},jat={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fat=e=>{var t=Pu(e,jat),r=j.useRef(),[n,a]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:l,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||u!==+u||o===0&&l===0||u===0)return null;var v=Cn("recharts-trapezoid",d);return g?j.createElement(v5,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:l,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:_,height:S,x:k,y:B}=b;return j.createElement(v5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},j.createElement("path",_5({},Xn(t,!0),{className:v,d:$q(k,B,y,_,S),ref:r})))}):j.createElement("g",null,j.createElement("path",_5({},Xn(t,!0),{className:v,d:$q(s,i,o,l,u)})))},Oat=["option","shapeType","propTransformer","activeClassName","isActive"];function Dat(e,t){if(e==null)return{};var r,n,a=Rat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function S5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kq(Object(r),!0).forEach(function(n){Pat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pat(e,t,r){return(t=Lat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lat(e){var t=Mat(e,"string");return typeof t=="symbol"?t:t+""}function Mat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uat(e,t){return S5(S5({},t),e)}function Qat(e,t){return e==="symbols"}function Gq(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return j.createElement(Ioe,r);case"trapezoid":return j.createElement(Fat,r);case"sector":return j.createElement(Ooe,r);case"symbols":if(Qat(t))return j.createElement(kie,r);break;default:return null}}function Hat(e){return j.isValidElement(e)?e.props:e}function Ece(e){var{option:t,shapeType:r,propTransformer:n=Uat,activeClassName:a="recharts-active-shape",isActive:s}=e,i=Dat(e,Oat),o;if(j.isValidElement(t))o=j.cloneElement(t,S5(S5({},i),Hat(t)));else if(typeof t=="function")o=t(i);else if(Iat(t)&&typeof t!="boolean"){var l=n(t,i);o=j.createElement(Gq,{shapeType:r,elementProps:l})}else{var u=i;o=j.createElement(Gq,{shapeType:r,elementProps:u})}return s?j.createElement(cs,{className:a},o):o}var jL=(e,t)=>{var r=us();return(n,a)=>s=>{e==null||e(n,a,s),r(Rle({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},FL=e=>{var t=us();return(r,n)=>a=>{e==null||e(r,n,a),t(Tet())}},OL=(e,t)=>{var r=us();return(n,a)=>s=>{e==null||e(n,a,s),r(Iet({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function DL(e){var{fn:t,args:r}=e,n=us(),a=Zl();return j.useEffect(()=>{if(!a){var s=t(r);return n(Net(s)),()=>{n(ket(s))}}},[t,r,n,a]),null}var Cce=()=>{};function Vat(e){var{legendPayload:t}=e,r=us(),n=Zl();return j.useEffect(()=>n?Cce:(r(yoe(t)),()=>{r(woe(t))}),[r,n,t]),null}function _ce(e){var{legendPayload:t}=e,r=us(),n=ir(jn);return j.useEffect(()=>n!=="centric"&&n!=="radial"?Cce:(r(yoe(t)),()=>{r(woe(t))}),[r,n,t]),null}function RL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=j.useRef(gw(t)),n=j.useRef(e);return n.current!==e&&(r.current=gw(t),n.current=e),r.current}var OI,zat=()=>{var[e]=j.useState(()=>gw("uid-"));return e},$at=(OI=jde.useId)!==null&&OI!==void 0?OI:zat;function Kat(e,t){var r=$at();return t||(e?"".concat(e,"-").concat(r):r)}var Gat=j.createContext(void 0),PL=e=>{var{id:t,type:r,children:n}=e,a=Kat("recharts-".concat(r),t);return j.createElement(Gat.Provider,{value:a},n(a))},qat={cartesianItems:[],polarItems:[]},Sce=Uc({name:"graphicalItems",initialState:qat,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=$f(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=$f(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=$f(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:Wat,replaceCartesianGraphicalItem:Xat,removeCartesianGraphicalItem:Yat,addPolarGraphicalItem:Jat,removePolarGraphicalItem:Zat}=Sce.actions,est=Sce.reducer;function tst(e){var t=us(),r=j.useRef(null);return j.useEffect(()=>{r.current===null?t(Wat(e)):r.current!==e&&t(Xat({prev:r.current,next:e})),r.current=e},[t,e]),j.useEffect(()=>()=>{r.current&&(t(Yat(r.current)),r.current=null)},[t]),null}function Nce(e){var t=us();return j.useEffect(()=>(t(Jat(e)),()=>{t(Zat(e))}),[t,e]),null}function rst(){}var nst={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},qq={t:0},DI={t:1};function LL(e){var t=Pu(e,nst),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=Toe("JavascriptAnimate",t.animationManager),[f,h]=j.useState(r?qq:DI),p=j.useRef(null);return j.useEffect(()=>{r||h(DI)},[r]),j.useEffect(()=>{if(!r||!n)return rst;var g=Boe(qq,DI,Noe(s),a,h,d.getTimeoutController()),v=()=>{p.current=g()};return d.start([l,i,v,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,l,o,d]),u(f.t)}var ast=["onMouseEnter","onClick","onMouseLeave"],sst=["id"],ist=["id"];function ML(e,t){if(e==null)return{};var r,n,a=ost(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ost(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wq(Object(r),!0).forEach(function(n){lst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lst(e,t,r){return(t=cst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cst(e){var t=ust(e,"string");return typeof t=="symbol"?t:t+""}function ust(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ch.apply(null,arguments)}function dst(e){var t=j.useMemo(()=>s2(e.children,m2),[e.children]),r=ir(n=>Sat(n,e.id,t));return r==null?null:j.createElement(_ce,{legendPayload:r})}function Ast(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:o1(o,t),hide:l,type:u,color:i,unit:""}}}var fst=(e,t)=>e>t?"start":e<t?"end":"middle",hst=(e,t,r)=>typeof t=="function"?t(e):xl(t,r,r*.8),mst=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=loe(s,i),l=a+xl(e.cx,s,s/2),u=n+xl(e.cy,i,i/2),d=xl(e.innerRadius,o,0),f=hst(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},pst=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},gst=(e,t)=>{if(j.isValidElement(e))return j.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Cn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return j.createElement(Coe,ch({},t,{type:"linear",className:r}))},vst=(e,t,r)=>{if(j.isValidElement(e))return j.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),j.isValidElement(n)))return n;var a=Cn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return j.createElement(v1,ch({},t,{alignmentBaseline:"middle",className:a}),n)};function xst(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=nl(r),l=Xn(a,!1),u=Xn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,v=ea(h.cx,h.cy,h.outerRadius+d,g),b=Es(Es(Es(Es({},o),h),{},{stroke:"none"},l),{},{index:p,textAnchor:fst(v.x,h.cx)},v),y=Es(Es(Es(Es({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[ea(h.cx,h.cy,h.outerRadius,g),v],key:"line"});return j.createElement(cs,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&gst(s,y),vst(a,b,Da(h,i)))});return j.createElement(cs,{className:"recharts-pie-labels"},f)}function kce(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=ir(cm),{onMouseEnter:o,onClick:l,onMouseLeave:u}=a,d=ML(a,ast),f=jL(o,a.dataKey),h=FL(u),p=OL(l,a.dataKey);return t==null?null:j.createElement(j.Fragment,null,t.map((g,v)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(v)===i,y=i?n:null,_=b?r:y,S=Es(Es({},g),{},{stroke:g.stroke,tabIndex:-1,[hoe]:v,[moe]:a.dataKey});return j.createElement(cs,ch({tabIndex:-1,className:"recharts-pie-sector"},i1(d,g,v),{onMouseEnter:f(g,v),onMouseLeave:h(g,v),onClick:p(g,v),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(v)}),j.createElement(Ece,ch({option:_,isActive:b,shapeType:"sector"},S)))}),j.createElement(xst,{sectors:t,props:a,showLabels:s}))}function bst(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:l,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=pst(o,l),g=Math.abs(p),v=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(F=>Da(F,u,0)!==0).length,y=(g>=360?b:b-1)*v,_=g-b*h-y,S=n.reduce((F,w)=>{var C=Da(w,u,0);return F+(ur(C)?C:0)},0),k;if(S>0){var B;k=n.map((F,w)=>{var C=Da(F,u,0),N=Da(F,d,w),P=mst(r,s,F),D=(ur(C)?C:0)/S,T,U=Es(Es({},F),a&&a[w]&&a[w].props);w?T=B.endAngle+Xi(p)*v*(C!==0?1:0):T=o;var R=T+Xi(p)*((C!==0?h:0)+D*_),X=(T+R)/2,q=(P.innerRadius+P.outerRadius)/2,Z=[{name:N,value:C,payload:U,dataKey:u,type:f}],H=ea(P.cx,P.cy,q,X);return B=Es(Es(Es(Es({},r.presentationProps),{},{percent:D,cornerRadius:i,name:N,tooltipPayload:Z,midAngle:X,middleRadius:q,tooltipPosition:H},U),P),{},{value:Da(F,u),startAngle:T,endAngle:R,payload:U,paddingAngle:Xi(p)*v}),B})}return k}function yst(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:l,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=RL(t,"recharts-pie-"),p=r.current,[g,v]=j.useState(!0),b=j.useCallback(()=>{typeof f=="function"&&f(),v(!1)},[f]),y=j.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return j.createElement(LL,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},_=>{var S=[],k=n&&n[0],B=k.startAngle;return n.forEach((F,w)=>{var C=p&&p[w],N=w>0?lm(F,"paddingAngle",0):0;if(C){var P=Tv(C.endAngle-C.startAngle,F.endAngle-F.startAngle),D=Es(Es({},F),{},{startAngle:B+N,endAngle:B+P(_)+N});S.push(D),B=D.endAngle}else{var{endAngle:T,startAngle:U}=F,R=Tv(0,T-U),X=R(_),q=Es(Es({},F),{},{startAngle:B+N,endAngle:B+X+N});S.push(q),B=q.endAngle}}),r.current=S,j.createElement(cs,null,j.createElement(kce,{sectors:S,activeShape:l,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function wst(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=j.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?j.createElement(yst,{props:e,previousSectorsRef:s}):j.createElement(kce,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function Est(e){var{hide:t,className:r,rootTabIndex:n}=e,a=Cn("recharts-pie",r);return t?null:j.createElement(cs,{tabIndex:n,className:a},j.createElement(wst,e))}var Cst={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!lg.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function _st(e){var{id:t}=e,r=ML(e,sst),n=j.useMemo(()=>s2(e.children,m2),[e.children]),a=ir(s=>Nat(s,t,n));return j.createElement(j.Fragment,null,j.createElement(DL,{fn:Ast,args:Es(Es({},e),{},{sectors:a})}),j.createElement(Est,ch({},r,{sectors:a})))}function Bce(e){var t=Pu(e,Cst),{id:r}=t,n=ML(t,ist),a=nl(n);return j.createElement(PL,{id:r,type:"pie"},s=>j.createElement(j.Fragment,null,j.createElement(Nce,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),j.createElement(dst,ch({},n,{id:s})),j.createElement(_st,ch({},n,{id:s})),n.children))}Bce.displayName="Pie";var Sst=ct([Bi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Nst=ct([Sst,gh,vh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Tce=()=>ir(Nst),kst=()=>ir(gtt);function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(n){Bst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bst(e,t,r){return(t=Tst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tst(e){var t=Ist(e,"string");return typeof t=="symbol"?t:t+""}function Ist(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jst=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=Yq(Yq({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Xn(a,!1)),CP(a)),o;return j.isValidElement(a)?o=j.cloneElement(a,i):typeof a=="function"?o=a(i):o=j.createElement(CL,i),j.createElement(cs,{className:"recharts-active-dot"},o)};function Fst(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=ir(cm),i=kst();if(t==null||i==null)return null;var o=t.find(l=>i.includes(l.payload));return ks(o)?null:jst({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(n){Ost(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ost(e,t,r){return(t=Dst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dst(e){var t=Rst(e,"string");return typeof t=="symbol"?t:t+""}function Rst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ice=(e,t)=>x1(e,"radiusAxis",t),Pst=ct([Ice],e=>{if(e!=null)return{scale:e}}),Lst=ct([l2,Ice],(e,t)=>{if(!(e==null||t==null))return N5(N5({},e),{},{scale:t})}),Mst=(e,t,r,n)=>b1(e,"radiusAxis",t,n),jce=(e,t,r)=>u1(e,r),Fce=(e,t,r)=>x1(e,"angleAxis",r),Ust=ct([jce,Fce],(e,t)=>{if(!(e==null||t==null))return N5(N5({},e),{},{scale:t})}),Qst=(e,t,r,n)=>b1(e,"angleAxis",r,n),Hst=ct([jce,Fce,d1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),Vst=(e,t,r,n,a)=>a,zst=ct([jn,Lst,Mst,Ust,Qst],(e,t,r,n,a)=>vm(e,"radiusAxis")?bw(t,r,!1):bw(n,a,!1)),$st=ct([_L,Vst],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),Kst=ct([Pst,Hst,D4,$st,zst],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var l=s.slice(i,o+1);return tit({radiusAxis:e,angleAxis:t,displayedData:l,dataKey:n,bandSize:a})}}),Gst=["id"];function qst(e,t){if(e==null)return{};var r,n,a=Wst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Wst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Zq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zq(Object(r),!0).forEach(function(n){UL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UL(e,t,r){return(t=Xst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xst(e){var t=Yst(e,"string");return typeof t=="symbol"?t:t+""}function Yst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rx.apply(null,arguments)}function QL(e,t){return e&&e!=="none"?e:t}var Jst=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:QL(n,a),value:o1(r,t),payload:e}]};function Zst(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:o1(s,t),hide:i,type:o,color:QL(r,a),unit:""}}}function eit(e,t){var r;return j.isValidElement(e)?r=j.cloneElement(e,t):typeof e=="function"?r=e(t):r=j.createElement(CL,Rx({},t,{className:Cn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function tit(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,l=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Da(h,r.dataKey,p),v=Da(h,a),b=r.scale(g)+d,y=Array.isArray(v)?dce(v):v,_=ks(y)?void 0:t.scale(y);Array.isArray(v)&&v.length>=2&&(l=!0),u.push(ml(ml({},ea(i,o,_,b)),{},{name:g,value:v,cx:i,cy:o,radius:_,angle:b,payload:h}))});var f=[];return l&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=ks(p)?void 0:t.scale(p);f.push(ml(ml({},h),{},{radius:g},ea(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:l,baseLinePoints:f}}function rit(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=qst(r,Gst),o=nl(i),l=Xn(n,!0),u=t.map((d,f)=>{var h=ml(ml(ml({key:"dot-".concat(f),r:3},o),l),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return eit(n,h)});return j.createElement(cs,{className:"recharts-radar-dots"},u)}function Oce(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,l=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return j.isValidElement(a)?d=j.cloneElement(a,ml(ml({},r),{},{points:t})):typeof a=="function"?d=a(ml(ml({},r),{},{points:t})):d=j.createElement(Ace,Rx({},Xn(r,!0),{onMouseEnter:l,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),j.createElement(cs,{className:"recharts-radar-polygon"},d,j.createElement(rit,{props:r,points:t}),n&&z0.renderCallByParent(r,t))}function nit(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:l,onAnimationStart:u}=t,d=r.current,f=RL(t,"recharts-radar-"),[h,p]=j.useState(!0),g=j.useCallback(()=>{typeof l=="function"&&l(),p(!1)},[l]),v=j.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return j.createElement(LL,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:v},b=>{var y=d&&d.length/n.length,_=b===1?n:n.map((S,k)=>{var B=d&&d[Math.floor(k*y)];if(B){var F=Tv(B.x,S.x),w=Tv(B.y,S.y);return ml(ml({},S),{},{x:F(b),y:w(b)})}var C=Tv(S.cx,S.x),N=Tv(S.cy,S.y);return ml(ml({},S),{},{x:C(b),y:N(b)})});return b>0&&(r.current=_),j.createElement(Oce,{points:_,props:t,showLabels:!h})})}function ait(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=j.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?j.createElement(nit,{props:e,previousPointsRef:a}):j.createElement(Oce,{points:t,props:e,showLabels:!0})}var sit={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!lg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class iit extends j.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=Cn("recharts-radar",r);return j.createElement(j.Fragment,null,j.createElement(cs,{className:a},j.createElement(ait,this.props)),j.createElement(Fst,{points:n,mainColor:QL(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function oit(e){var t=Zl(),r=ir(n=>Kst(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return j.createElement(iit,Rx({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class HL extends j.PureComponent{render(){return j.createElement(PL,{id:this.props.id,type:"radar"},t=>j.createElement(j.Fragment,null,j.createElement(Nce,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),j.createElement(_ce,{legendPayload:Jst(this.props)}),j.createElement(DL,{fn:Zst,args:this.props}),j.createElement(oit,Rx({},this.props,{id:t}))))}}UL(HL,"displayName","Radar");UL(HL,"defaultProps",sit);var lit="Invariant failed";function cit(e,t){throw new Error(lit)}var uit=["x","y"];function Q6(){return Q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q6.apply(null,arguments)}function eW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eW(Object(r),!0).forEach(function(n){dit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dit(e,t,r){return(t=Ait(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ait(e){var t=fit(e,"string");return typeof t=="symbol"?t:t+""}function fit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hit(e,t){if(e==null)return{};var r,n,a=mit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pit(e,t){var{x:r,y:n}=e,a=hit(e,uit),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Tb(Tb(Tb(Tb(Tb({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Dce(e){return j.createElement(Ece,Q6({shapeType:"rectangle",propTransformer:pit,activeClassName:"recharts-active-bar"},e))}var git=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ur(t))return t;var s=ur(n)||ks(n);return s?t(n,a):(s||cit(),r)}},vit={},Rce=Uc({name:"errorBars",initialState:vit,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:jut,removeErrorBar:Fut}=Rce.actions,xit=Rce.reducer,bit=["children"];function yit(e,t){if(e==null)return{};var r,n,a=wit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Eit={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Cit=j.createContext(Eit);function _it(e){var{children:t}=e,r=yit(e,bit);return j.createElement(Cit.Provider,{value:r},t)}function Pce(e,t){var r,n,a=ir(u=>xh(u,e)),s=ir(u=>bm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:bc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:yc.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function Sit(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Tce(),{needClipX:s,needClipY:i,needClip:o}=Pce(t,r);if(!o)return null;var{x:l,y:u,width:d,height:f}=a;return j.createElement("clipPath",{id:"clipPath-".concat(n)},j.createElement("rect",{x:s?l:l-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var Nit=["onMouseEnter","onMouseLeave","onClick"],kit=["value","background","tooltipPosition"],Bit=["id"],Tit=["onMouseEnter","onClick","onMouseLeave"];function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Px.apply(null,arguments)}function tW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tW(Object(r),!0).forEach(function(n){Iit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iit(e,t,r){return(t=jit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jit(e){var t=Fit(e,"string");return typeof t=="symbol"?t:t+""}function Fit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k5(e,t){if(e==null)return{};var r,n,a=Oit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Oit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Dit=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:o1(r,t),payload:e}]};function Rit(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:o1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function Pit(e){var t=ir(cm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:l}=s,u=k5(s,Nit),d=jL(i,n),f=FL(o),h=OL(l,n);if(!a||r==null)return null;var p=Xn(a,!1);return j.createElement(j.Fragment,null,r.map((g,v)=>{var{value:b,background:y,tooltipPosition:_}=g,S=k5(g,kit);if(!y)return null;var k=d(g,v),B=f(g,v),F=h(g,v),w=Ko(Ko(Ko(Ko(Ko({option:a,isActive:String(v)===t},S),{},{fill:"#eee"},y),p),i1(u,g,v)),{},{onMouseEnter:k,onMouseLeave:B,onClick:F,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return j.createElement(Dce,Px({key:"background-bar-".concat(v)},w))}))}function Lce(e){var{data:t,props:r,showLabels:n}=e,a=nl(r),{id:s}=a,i=k5(a,Bit),{shape:o,dataKey:l,activeBar:u}=r,d=ir(cm),f=ir(Wle),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,v=k5(r,Tit),b=jL(h,l),y=FL(g),_=OL(p,l);return t?j.createElement(j.Fragment,null,t.map((S,k)=>{var B=u&&String(k)===d&&(f==null||l===f),F=B?u:o,w=Ko(Ko(Ko({},i),S),{},{isActive:B,option:F,index:k,dataKey:l});return j.createElement(cs,Px({className:"recharts-bar-rectangle"},i1(v,S,k),{onMouseEnter:b(S,k),onMouseLeave:y(S,k),onClick:_(S,k),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(k)}),j.createElement(Dce,w))}),n&&z0.renderCallByParent(r,t)):null}function Lit(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=RL(t,"recharts-bar-"),[p,g]=j.useState(!1),v=j.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=j.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return j.createElement(LL,{begin:i,duration:o,isActive:s,easing:l,onAnimationEnd:v,onAnimationStart:b,key:h},y=>{var _=y===1?n:n==null?void 0:n.map((S,k)=>{var B=f&&f[k];if(B)return Ko(Ko({},S),{},{x:cv(B.x,S.x,y),y:cv(B.y,S.y,y),width:cv(B.width,S.width,y),height:cv(B.height,S.height,y)});if(a==="horizontal"){var F=cv(0,S.height,y);return Ko(Ko({},S),{},{y:S.y+S.height-F,height:F})}var w=cv(0,S.width,y);return Ko(Ko({},S),{},{width:w})});return y>0&&(r.current=_??null),_==null?null:j.createElement(cs,null,j.createElement(Lce,{props:t,data:_,showLabels:!p}))})}function Mit(e){var{data:t,isAnimationActive:r}=e,n=j.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?j.createElement(Lit,{previousRectanglesRef:n,props:e}):j.createElement(Lce,{props:e,data:t,showLabels:!0})}var Mce=0,Uit=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Da(e,t)}};class Qit extends j.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:l,id:u}=this.props;if(t)return null;var d=Cn("recharts-bar",a),f=u;return j.createElement(cs,{className:d,id:u},o&&j.createElement("defs",null,j.createElement(Sit,{clipPathId:f,xAxisId:s,yAxisId:i})),j.createElement(cs,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},j.createElement(Pit,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),j.createElement(Mit,this.props)),this.props.children)}}var Hit={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!lg.isSsr,legendType:"rect",minPointSize:Mce,xAxisId:0,yAxisId:0};function Vit(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Pce(t,r),h=UP(),p=Zl(),g=s2(e.children,m2),v=ir(_=>pot(_,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=v==null?void 0:v[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,j.createElement(_it,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:Uit,errorBarOffset:b},j.createElement(Qit,Px({},e,{layout:h,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d})))}function zit(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,v=d?g.scale.domain():null,b=jYe({numericAxis:g});return f.map((y,_)=>{var S,k,B,F,w,C;d?S=SYe(d[_],v):(S=Da(y,r),Array.isArray(S)||(S=[b,S]));var N=git(n,Mce)(S[1],_);if(t==="horizontal"){var P,[D,T]=[o.scale(S[0]),o.scale(S[1])];k=uG({axis:i,ticks:l,bandSize:s,offset:a.offset,entry:y,index:_}),B=(P=T??D)!==null&&P!==void 0?P:void 0,F=a.size;var U=D-T;if(w=Rc(U)?0:U,C={x:k,y:h.top,width:F,height:h.height},Math.abs(N)>0&&Math.abs(w)<Math.abs(N)){var R=Xi(w||N)*(Math.abs(N)-Math.abs(w));B-=R,w+=R}}else{var[X,q]=[i.scale(S[0]),i.scale(S[1])];if(k=X,B=uG({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:_}),F=q-X,w=a.size,C={x:h.left,y:B,width:h.width,height:w},Math.abs(N)>0&&Math.abs(F)<Math.abs(N)){var Z=Xi(F||N)*(Math.abs(N)-Math.abs(F));F+=Z}}if(k==null||B==null||F==null||w==null)return null;var H=Ko(Ko({},y),{},{x:k,y:B,width:F,height:w,value:d?S:S[1],payload:y,background:C,tooltipPosition:{x:k+F/2,y:B+w/2}},p&&p[_]&&p[_].props);return H}).filter(Boolean)}function H6(e){var t=Pu(e,Hit),r=Zl();return j.createElement(PL,{id:t.id,type:"bar"},n=>j.createElement(j.Fragment,null,j.createElement(Vat,{legendPayload:Dit(t)}),j.createElement(DL,{fn:Rit,args:t}),j.createElement(tst,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:IYe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),j.createElement(Vit,Px({},t,{id:n}))))}H6.displayName="Bar";function rW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rW(Object(r),!0).forEach(function(n){$it(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $it(e,t,r){return(t=Kit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kit(e){var t=Git(e,"string");return typeof t=="symbol"?t:t+""}function Git(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qit=(e,t)=>t,Wit=(e,t,r)=>r,Xit=(e,t,r,n)=>n,Yit=(e,t,r,n,a)=>a,p2=ct([JP,Yit],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Jit=ct([p2],e=>e==null?void 0:e.maxBarSize),Zit=(e,t,r,n,a,s)=>s,nW=(e,t,r)=>{var n=r??e;if(!ks(n))return xl(n,t,0)},eot=ct([jn,JP,qit,Wit,Xit],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),tot=(e,t,r,n)=>{var a=jn(e);return a==="horizontal"?O6(e,"yAxis",r,n):O6(e,"xAxis",t,n)},rot=(e,t,r)=>{var n=jn(e);return n==="horizontal"?$G(e,"xAxis",t):$G(e,"yAxis",r)},not=(e,t,r)=>{var n={},a=e.filter(M4),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=nW(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),l=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=nW(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},aot=ct([eot,SZe,rot],not),sot=(e,t,r,n,a)=>{var s,i,o=p2(e,t,r,n,a);if(o!=null){var l=jn(e),u=Xoe(e),{maxBarSize:d}=o,f=ks(d)?u:d,h,p;return l==="horizontal"?(h=Ox(e,"xAxis",t,n),p=Fx(e,"xAxis",t,n)):(h=Ox(e,"yAxis",r,n),p=Fx(e,"yAxis",r,n)),(s=(i=bw(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},Uce=(e,t,r,n)=>{var a=jn(e),s,i;return a==="horizontal"?(s=Ox(e,"xAxis",t,n),i=Fx(e,"xAxis",t,n)):(s=Ox(e,"yAxis",r,n),i=Fx(e,"yAxis",r,n)),bw(s,i)};function iot(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=xl(e,r,0,!0),o,l=[];if(Mc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,_)=>y+(_.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,_)=>{var S,k={stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(S=_.barSize)!==null&&S!==void 0?S:0}},B=[...y,k];return p=B[B.length-1].position,B},l)}else{var g=xl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var v=(r-2*g-(s-1)*i)/s;v>1&&(v>>=0);var b=Mc(a)?Math.min(v,a):v;o=n.reduce((y,_,S)=>[...y,{stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:g+(v+i)*S+(v-b)/2,size:b}}],l)}return o}}var oot=(e,t,r,n,a,s,i)=>{var o=ks(i)?t:i,l=iot(r,n,a!==s?a:s,e,o);return a!==s&&l!=null&&(l=l.map(u=>zC(zC({},u),{},{position:zC(zC({},u.position),{},{offset:u.position.offset-a/2})}))),l},lot=ct([aot,Xoe,_Ze,Yoe,sot,Uce,Jit],oot),cot=(e,t,r,n)=>Ox(e,"xAxis",t,n),uot=(e,t,r,n)=>Ox(e,"yAxis",r,n),dot=(e,t,r,n)=>Fx(e,"xAxis",t,n),Aot=(e,t,r,n)=>Fx(e,"yAxis",r,n),fot=ct([lot,p2],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),hot=(e,t)=>{var r=WP(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},mot=ct([tot,p2],hot),pot=ct([Bi,cot,uot,dot,Aot,fot,jn,HP,Uce,mot,p2,Zit],(e,t,r,n,a,s,i,o,l,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||l==null)){var{data:v}=d,b;if(v!=null&&v.length>0?b=v:b=h==null?void 0:h.slice(p,g+1),b!=null)return zit({layout:i,barSettings:d,pos:s,bandSize:l,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),Qce=e=>{var{chartData:t}=e,r=us(),n=Zl();return j.useEffect(()=>n?()=>{}:(r(tq(t)),()=>{r(tq(void 0))}),[t,r,n]),null},aW={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Hce=Uc({name:"brush",initialState:aW,reducers:{setBrushSettings(e,t){return t.payload==null?aW:t.payload}}}),{setBrushSettings:Out}=Hce.actions,got=Hce.reducer;function vot(e,t,r){return(t=xot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xot(e){var t=bot(e,"string");return typeof t=="symbol"?t:t+""}function bot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VL{static create(t){return new VL(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}vot(VL,"EPS",1e-4);function yot(e){return(e%180+180)%180}var wot=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=yot(a),i=s*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},Eot={dots:[],areas:[],lines:[]},Vce=Uc({name:"referenceElements",initialState:Eot,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=$f(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=$f(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=$f(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Dut,removeDot:Rut,addArea:Put,removeArea:Lut,addLine:Mut,removeLine:Uut}=Vce.actions,Cot=Vce.reducer,_ot=j.createContext(void 0),Sot=e=>{var{children:t}=e,[r]=j.useState("".concat(gw("recharts"),"-clip")),n=Tce();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return j.createElement(_ot.Provider,{value:r},j.createElement("defs",null,j.createElement("clipPath",{id:r},j.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function RI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function zce(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Not(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return wot(n,r)}function kot(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function B5(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function Bot(e,t){return zce(e,t+1)}function Tot(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,l=0,u=1,d=i,f=function(){var g=n==null?void 0:n[l];if(g===void 0)return{v:zce(n,u)};var v=l,b,y=()=>(b===void 0&&(b=r(g,v)),b),_=g.coordinate,S=l===0||B5(e,_,y,d,o);S||(l=0,d=i,u+=1),S&&(d=_+e*(y()/2+a),l+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function sW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sW(Object(r),!0).forEach(function(n){Iot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iot(e,t,r){return(t=jot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jot(e){var t=Fot(e,"string");return typeof t=="symbol"?t:t+""}function Fot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oot(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:l}=t,u=function(h){var p=s[h],g,v=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*v()/2-l);s[h]=p=Mo(Mo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Mo(Mo({},p),{},{tickCoord:p.coordinate});var y=B5(e,p.tickCoord,v,o,l);y&&(l=p.tickCoord-e*(v()/2+a),s[h]=Mo(Mo({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function Dot(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:l,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Mo(Mo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=B5(e,d.tickCoord,()=>f,l,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Mo(Mo({},d),{},{isShow:!0}))}for(var g=s?o-1:o,v=function(_){var S=i[_],k,B=()=>(k===void 0&&(k=r(S,_)),k);if(_===0){var F=e*(S.coordinate-e*B()/2-l);i[_]=S=Mo(Mo({},S),{},{tickCoord:F<0?S.coordinate-F*e:S.coordinate})}else i[_]=S=Mo(Mo({},S),{},{tickCoord:S.coordinate});var w=B5(e,S.tickCoord,B,l,u);w&&(l=S.tickCoord+e*(B()/2+a),i[_]=Mo(Mo({},S),{},{isShow:!0}))},b=0;b<g;b++)v(b);return i}function zL(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ur(l)||lg.isSsr){var h;return(h=Bot(a,ur(l)?l:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",v=d&&g==="width"?ky(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(S,k)=>{var B=typeof u=="function"?u(S.value,k):S.value;return g==="width"?Not(ky(B,{fontSize:t,letterSpacing:r}),v,f):ky(B,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Xi(a[1].coordinate-a[0].coordinate):1,_=kot(s,y,g);return l==="equidistantPreserveStart"?Tot(y,_,b,a,i):(l==="preserveStart"||l==="preserveStartEnd"?p=Dot(y,_,b,a,i,l==="preserveStartEnd"):p=Oot(y,_,b,a,i),p.filter(S=>S.isShow))}var Rot=["viewBox"],Pot=["viewBox"];function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(null,arguments)}function iW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iW(Object(r),!0).forEach(function(n){$L(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oW(e,t){if(e==null)return{};var r,n,a=Lot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $L(e,t,r){return(t=Mot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mot(e){var t=Uot(e,"string");return typeof t=="symbol"?t:t+""}function Uot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wm extends j.Component{constructor(t){super(t),this.tickRefs=j.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=oW(t,Rot),s=this.props,{viewBox:i}=s,o=oW(s,Pot);return!RI(n,i)||!RI(a,o)||!RI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:l,tickMargin:u}=this.props,d,f,h,p,g,v,b=l?-1:1,y=t.tickSize||o,_=ur(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!l*s,h=p-b*y,v=h-b*u,g=_;break;case"left":h=p=t.coordinate,f=r+ +!l*a,d=f-b*y,g=d-b*u,v=_;break;case"right":h=p=t.coordinate,f=r+ +l*a,d=f+b*y,g=d+b*u,v=_;break;default:d=f=t.coordinate,p=n+ +l*s,h=p+b*y,v=h+b*u,g=_;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,l=Ei(Ei(Ei({},Xn(this.props,!1)),Xn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);l=Ei(Ei({},l),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);l=Ei(Ei({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return j.createElement("line",Fv({},l,{className:Cn("recharts-cartesian-axis-line",lm(o,"className"))}))}static renderTickItem(t,r,n){var a,s=Cn(r.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(t))a=j.cloneElement(t,Ei(Ei({},r),{},{className:s}));else if(typeof t=="function")a=t(Ei(Ei({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Cn(i,t.className)),a=j.createElement(v1,Fv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:l,padding:u}=this.props,d=zL(Ei(Ei({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=nl(this.props),g=Xn(i,!1),v=Ei(Ei({},p),{},{fill:"none"},Xn(a,!1)),b=d.map((y,_)=>{var{line:S,tick:k}=this.getTickLineCoord(y),B=Ei(Ei(Ei(Ei({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),k),{},{index:_,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return j.createElement(cs,Fv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},i1(this.props,y,_)),a&&j.createElement("line",Fv({},v,S,{className:Cn("recharts-cartesian-axis-tick-line",lm(a,"className"))})),i&&wm.renderTickItem(i,B,"".concat(typeof o=="function"?o(y.value,_):y.value).concat(l||"")))});return b.length>0?j.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:j.createElement(cs,{className:Cn("recharts-cartesian-axis",a),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var u=l[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),Vl.renderCallByParent(this.props))}}$L(wm,"displayName","CartesianAxis");$L(wm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Qot=["x1","y1","x2","y2","key"],Hot=["offset"],Vot=["xAxisId","yAxisId"],zot=["xAxisId","yAxisId"];function lW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lW(Object(r),!0).forEach(function(n){$ot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $ot(e,t,r){return(t=Kot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kot(e){var t=Got(e,"string");return typeof t=="symbol"?t:t+""}function Got(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ap.apply(null,arguments)}function T5(e,t){if(e==null)return{};var r,n,a=qot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wot=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return j.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function $ce(e,t){var r;if(j.isValidElement(e))r=j.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,l=T5(t,Qot),u=nl(l),{offset:d}=u,f=T5(u,Hot);r=j.createElement("line",Ap({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function Xot(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=T5(e,Vot),l=a.map((u,d)=>{var f=Go(Go({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return $ce(n,f)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Yot(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=T5(e,zot),l=a.map((u,d)=>{var f=Go(Go({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return $ce(n,f)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Jot(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%t.length;return j.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Zot(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%r.length;return j.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var elt=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return doe(zL(Go(Go(Go({},wm.defaultProps),r),{},{ticks:Aoe(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},tlt=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return doe(zL(Go(Go(Go({},wm.defaultProps),r),{},{ticks:Aoe(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},rlt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function V6(e){var t=voe(),r=xoe(),n=goe(),a=Go(Go({},Pu(e,rlt)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=Zl(),v=ir(N=>KG(N,"xAxis",s,g)),b=ir(N=>KG(N,"yAxis",i,g));if(!ur(u)||u<=0||!ur(d)||d<=0||!ur(o)||o!==+o||!ur(l)||l!==+l)return null;var y=a.verticalCoordinatesGenerator||elt,_=a.horizontalCoordinatesGenerator||tlt,{horizontalPoints:S,verticalPoints:k}=a;if((!S||!S.length)&&typeof _=="function"){var B=h&&h.length,F=_({yAxis:b?Go(Go({},b),{},{ticks:B?h:b.ticks}):void 0,width:t,height:r,offset:n},B?!0:f);Ny(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(S=F)}if((!k||!k.length)&&typeof y=="function"){var w=p&&p.length,C=y({xAxis:v?Go(Go({},v),{},{ticks:w?p:v.ticks}):void 0,width:t,height:r,offset:n},w?!0:f);Ny(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(k=C)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(Wot,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),j.createElement(Jot,Ap({},a,{horizontalPoints:S})),j.createElement(Zot,Ap({},a,{verticalPoints:k})),j.createElement(Xot,Ap({},a,{offset:n,horizontalPoints:S,xAxis:v,yAxis:b})),j.createElement(Yot,Ap({},a,{offset:n,verticalPoints:k,xAxis:v,yAxis:b})))}V6.displayName="CartesianGrid";function cW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cW(Object(r),!0).forEach(function(n){nlt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nlt(e,t,r){return(t=alt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function alt(e){var t=slt(e,"string");return typeof t=="symbol"?t:t+""}function slt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ilt={xAxis:{},yAxis:{},zAxis:{}},Kce=Uc({name:"cartesianAxis",initialState:ilt,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=uW(uW({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:olt,removeXAxis:llt,addYAxis:clt,removeYAxis:ult,addZAxis:Qut,removeZAxis:Hut,updateYAxisWidth:dlt}=Kce.actions,Alt=Kce.reducer,flt=["children"],hlt=["dangerouslySetInnerHTML","ticks"];function Gce(e,t,r){return(t=mlt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mlt(e){var t=plt(e,"string");return typeof t=="symbol"?t:t+""}function plt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z6(){return z6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z6.apply(null,arguments)}function qce(e,t){if(e==null)return{};var r,n,a=glt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function glt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vlt(e){var t=us(),r=j.useMemo(()=>{var{children:s}=e,i=qce(e,flt);return i},[e]),n=ir(s=>xh(s,r.id)),a=r===n;return j.useEffect(()=>(t(olt(r)),()=>{t(llt(r))}),[r,t]),a?e.children:null}var xlt=e=>{var{xAxisId:t,className:r}=e,n=ir(poe),a=Zl(),s="xAxis",i=ir(p=>m1(p,s,t,a)),o=ir(p=>Ble(p,s,t,a)),l=ir(p=>_le(p,t)),u=ir(p=>xet(p,t));if(l==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=qce(e,hlt);return j.createElement(wm,z6({},h,{scale:i,x:u.x,y:u.y,width:l.width,height:l.height,className:Cn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},blt=e=>{var t,r,n,a,s;return j.createElement(vlt,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},j.createElement(xlt,e))};class I5 extends j.Component{render(){return j.createElement(blt,this.props)}}Gce(I5,"displayName","XAxis");Gce(I5,"defaultProps",{allowDataOverflow:bc.allowDataOverflow,allowDecimals:bc.allowDecimals,allowDuplicatedCategory:bc.allowDuplicatedCategory,height:bc.height,hide:!1,mirror:bc.mirror,orientation:bc.orientation,padding:bc.padding,reversed:bc.reversed,scale:bc.scale,tickCount:bc.tickCount,type:bc.type,xAxisId:0});var ylt=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=a+s,u=i+l+o+(r?n:0);return Math.round(u)}return 0},wlt=["dangerouslySetInnerHTML","ticks"];function Wce(e,t,r){return(t=Elt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Elt(e){var t=Clt(e,"string");return typeof t=="symbol"?t:t+""}function Clt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $6(){return $6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$6.apply(null,arguments)}function _lt(e,t){if(e==null)return{};var r,n,a=Slt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Slt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Nlt(e){var t=us();return j.useEffect(()=>(t(clt(e)),()=>{t(ult(e))}),[e,t]),null}var klt=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=j.useRef(null),o=j.useRef(null),l=ir(poe),u=Zl(),d=us(),f="yAxis",h=ir(S=>m1(S,f,r,u)),p=ir(S=>Sle(S,r)),g=ir(S=>bet(S,r)),v=ir(S=>Ble(S,f,r,u));if(j.useLayoutEffect(()=>{var S;if(!(a!=="auto"||!p||EL(s)||j.isValidElement(s))){var k=i.current,B=k==null||(S=k.tickRefs)===null||S===void 0?void 0:S.current,{tickSize:F,tickMargin:w}=k.props,C=ylt({ticks:B,label:o.current,labelGapWithTick:5,tickSize:F,tickMargin:w});Math.round(p.width)!==Math.round(C)&&d(dlt({id:r,width:C}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,_=_lt(e,wlt);return j.createElement(wm,$6({},_,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:Cn("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:v}))},Blt=e=>{var t,r,n,a,s;return j.createElement(j.Fragment,null,j.createElement(Nlt,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),j.createElement(klt,e))},Tlt={allowDataOverflow:yc.allowDataOverflow,allowDecimals:yc.allowDecimals,allowDuplicatedCategory:yc.allowDuplicatedCategory,hide:!1,mirror:yc.mirror,orientation:yc.orientation,padding:yc.padding,reversed:yc.reversed,scale:yc.scale,tickCount:yc.tickCount,type:yc.type,width:yc.width,yAxisId:0};class j5 extends j.Component{render(){return j.createElement(Blt,this.props)}}Wce(j5,"displayName","YAxis");Wce(j5,"defaultProps",Tlt);var PI={exports:{}},LI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dW;function Ilt(){if(dW)return LI;dW=1;var e=Lx();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return LI.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(B){if(!y){if(y=!0,_=B,B=f(B),h!==void 0&&g.hasValue){var F=g.value;if(h(F,B))return S=F}return S=B}if(F=S,r(_,B))return F;var w=f(B);return h!==void 0&&h(F,w)?(_=B,F):(_=B,S=w)}var y=!1,_,S,k=d===void 0?null:d;return[function(){return b(u())},k===null?void 0:function(){return b(k())}]},[u,d,f,h]);var v=n(l,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=v},[v]),o(v),v},LI}var AW;function jlt(){return AW||(AW=1,PI.exports=Ilt()),PI.exports}jlt();function Flt(e){e()}function Olt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Flt(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var fW={notify(){},get:()=>[]};function Dlt(e,t){let r,n=fW,a=0,s=!1;function i(v){d();const b=n.subscribe(v);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(l),n=Olt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=fW)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var Rlt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Plt=Rlt(),Llt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Mlt=Llt(),Ult=()=>Plt||Mlt?j.useLayoutEffect:j.useEffect,Qlt=Ult(),MI=Symbol.for("react-redux-context"),UI=typeof globalThis<"u"?globalThis:{};function Hlt(){if(!j.createContext)return{};const e=UI[MI]??(UI[MI]=new Map);let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var Vlt=Hlt();function zlt(e){const{children:t,context:r,serverState:n,store:a}=e,s=j.useMemo(()=>{const l=Dlt(a);return{store:a,subscription:l,getServerState:n?()=>n:void 0}},[a,n]),i=j.useMemo(()=>a.getState(),[a]);Qlt(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,i]);const o=r||Vlt;return j.createElement(o.Provider,{value:s},t)}var $lt=zlt,Klt=(e,t)=>t,KL=ct([Klt,jn,d1,Ti,$le,bh,Ctt,Bi],Btt),GL=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Xce=Fu("mouseClick"),Yce=i2();Yce.startListening({actionCreator:Xce,effect:(e,t)=>{var r=e.payload,n=KL(t.getState(),GL(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(jet({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var K6=Fu("mouseMove"),Jce=i2();Jce.startListening({actionCreator:K6,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=fL(n,n.tooltip.settings.shared),s=KL(n,GL(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Lle({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Ple()))}});function Glt(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var hW={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Zce=Uc({name:"rootProps",initialState:hW,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:hW.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),qlt=Zce.reducer,{updateOptions:Wlt}=Zce.actions,eue=Uc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Xlt}=eue.actions,Ylt=eue.reducer,tue=Fu("keyDown"),rue=Fu("focus"),qL=i2();qL.startListening({actionCreator:tue,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(hL(a,g1(r))),o=bh(r);if(s==="Enter"){var l=E5(r,"axis","hover",String(a.index));t.dispatch(R6({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:l}));return}var u=wet(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=E5(r,"axis","hover",String(h));t.dispatch(R6({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});qL.startListening({actionCreator:rue,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=E5(r,"axis","hover",String(s));t.dispatch(R6({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var gu=Fu("externalEvent"),nue=i2();nue.startListening({actionCreator:gu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:htt(r),activeDataKey:Wle(r),activeIndex:cm(r),activeLabel:qle(r),activeTooltipIndex:cm(r),isTooltipActive:mtt(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Jlt=ct([p1],e=>e.tooltipItemPayloads),Zlt=ct([Jlt,f2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),aue=Fu("touchMove"),sue=i2();sue.startListening({actionCreator:aue,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=fL(n,n.tooltip.settings.shared);if(a==="axis"){var s=KL(n,GL({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Lle({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(hoe),d=(i=l.getAttribute(moe))!==null&&i!==void 0?i:void 0,f=Zlt(t.getState(),u,d);t.dispatch(Rle({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var ect=Mie({brush:got,cartesianAxis:Alt,chartData:$tt,errorBars:xit,graphicalItems:est,layout:uYe,legend:qYe,options:Utt,polarAxis:qnt,polarOptions:Ylt,referenceElements:Cot,rootProps:qlt,tooltip:Fet}),tct=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return DXe({reducer:ect,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Yce.middleware,Jce.middleware,qL.middleware,nue.middleware,sue.middleware]),devTools:{serialize:{replacer:Glt},name:"recharts-".concat(r)}})};function iue(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Zl(),s=j.useRef(null);if(a)return r;s.current==null&&(s.current=tct(t,n));var i=IP;return j.createElement($lt,{context:i,store:s.current},r)}function oue(e){var{layout:t,width:r,height:n,margin:a}=e,s=us(),i=Zl();return j.useEffect(()=>{i||(s(oYe(t)),s(lYe({width:r,height:n})),s(iYe(a)))},[s,i,t,r,n,a]),null}function lue(e){var t=us();return j.useEffect(()=>{t(Wlt(e))},[t,e]),null}var rct=["children"];function nct(e,t){if(e==null)return{};var r,n,a=act(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function act(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function F5(){return F5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F5.apply(null,arguments)}var sct={width:"100%",height:"100%"},ict=j.forwardRef((e,t)=>{var r=voe(),n=xoe(),a=Eoe();if(!Ix(r)||!Ix(n))return null;var{children:s,otherAttributes:i,title:o,desc:l}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,j.createElement(Sie,F5({},i,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:sct,ref:t}),s)}),oct=e=>{var{children:t}=e,r=ir(O4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return j.createElement(Sie,{width:n,height:a,x:i,y:s},t)},mW=j.forwardRef((e,t)=>{var{children:r}=e,n=nct(e,rct),a=Zl();return a?j.createElement(oct,null,r):j.createElement(ict,F5({ref:t},n),r)});function lct(){var e=us(),[t,r]=j.useState(null),n=ir(MYe);return j.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Mc(s)&&s!==n&&e(cYe(s))}},[t,e,n]),r}function pW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pW(Object(r),!0).forEach(function(n){uct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uct(e,t,r){return(t=dct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dct(e){var t=Act(e,"string");return typeof t=="symbol"?t:t+""}function Act(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fct=j.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:v,style:b,width:y}=e,_=us(),[S,k]=j.useState(null),[B,F]=j.useState(null);qtt();var w=lct(),C=j.useCallback(L=>{w(L),typeof t=="function"&&t(L),k(L),F(L)},[w,t,k,F]),N=j.useCallback(L=>{_(Xce(L)),_(gu({handler:s,reactEvent:L}))},[_,s]),P=j.useCallback(L=>{_(K6(L)),_(gu({handler:u,reactEvent:L}))},[_,u]),D=j.useCallback(L=>{_(Ple()),_(gu({handler:d,reactEvent:L}))},[_,d]),T=j.useCallback(L=>{_(K6(L)),_(gu({handler:f,reactEvent:L}))},[_,f]),U=j.useCallback(()=>{_(rue())},[_]),R=j.useCallback(L=>{_(tue(L.key))},[_]),X=j.useCallback(L=>{_(gu({handler:i,reactEvent:L}))},[_,i]),q=j.useCallback(L=>{_(gu({handler:o,reactEvent:L}))},[_,o]),Z=j.useCallback(L=>{_(gu({handler:l,reactEvent:L}))},[_,l]),H=j.useCallback(L=>{_(gu({handler:h,reactEvent:L}))},[_,h]),V=j.useCallback(L=>{_(gu({handler:v,reactEvent:L}))},[_,v]),K=j.useCallback(L=>{_(aue(L)),_(gu({handler:g,reactEvent:L}))},[_,g]),ne=j.useCallback(L=>{_(gu({handler:p,reactEvent:L}))},[_,p]);return j.createElement(tce.Provider,{value:S},j.createElement(pWe.Provider,{value:B},j.createElement("div",{className:Cn("recharts-wrapper",n),style:cct({position:"relative",cursor:"default",width:y,height:a},b),onClick:N,onContextMenu:X,onDoubleClick:q,onFocus:U,onKeyDown:R,onMouseDown:Z,onMouseEnter:P,onMouseLeave:D,onMouseMove:T,onMouseUp:H,onTouchEnd:ne,onTouchMove:K,onTouchStart:V,ref:C},r)))}),hct=["children","className","width","height","style","compact","title","desc"];function mct(e,t){if(e==null)return{};var r,n,a=pct(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cue=j.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:l,desc:u}=e,d=mct(e,hct),f=nl(d);return o?j.createElement(mW,{otherAttributes:f,title:l,desc:u},r):j.createElement(fct,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},j.createElement(mW,{otherAttributes:f,title:l,desc:u,ref:t},j.createElement(Sot,null,r)))}),gct=["width","height"];function G6(){return G6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G6.apply(null,arguments)}function vct(e,t){if(e==null)return{};var r,n,a=xct(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bct={top:5,right:5,bottom:5,left:5},yct={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:bct,reverseStackOrder:!1,syncMethod:"index"},wct=j.forwardRef(function(t,r){var n,a=Pu(t.categoricalChartProps,yct),{width:s,height:i}=a,o=vct(a,gct);if(!Ix(s)||!Ix(i))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return j.createElement(iue,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:l},j.createElement(Qce,{chartData:h.data}),j.createElement(oue,{width:s,height:i,layout:a.layout,margin:a.margin}),j.createElement(lue,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),j.createElement(cue,G6({},o,{width:s,height:i,ref:r})))}),Ect=["axis","item"],gW=j.forwardRef((e,t)=>j.createElement(wct,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ect,tooltipPayloadSearcher:wL,categoricalChartProps:e,ref:t}));function Cct(e){var t=us();return j.useEffect(()=>{t(Xlt(e))},[t,e]),null}var _ct=["width","height","layout"];function q6(){return q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q6.apply(null,arguments)}function Sct(e,t){if(e==null)return{};var r,n,a=Nct(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nct(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kct={top:5,right:5,bottom:5,left:5},Bct={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:kct,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},uue=j.forwardRef(function(t,r){var n,a=Pu(t.categoricalChartProps,Bct),{width:s,height:i,layout:o}=a,l=Sct(a,_ct);if(!Ix(s)||!Ix(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return j.createElement(iue,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},j.createElement(Qce,{chartData:a.data}),j.createElement(oue,{width:s,height:i,layout:o,margin:a.margin}),j.createElement(lue,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),j.createElement(Cct,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),j.createElement(cue,q6({width:s,height:i},l,{ref:r})))}),Tct=["item"],Ict={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},jct=j.forwardRef((e,t)=>{var r=Pu(e,Ict);return j.createElement(uue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Tct,tooltipPayloadSearcher:wL,categoricalChartProps:r,ref:t})}),Fct=["axis"],Oct={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Dct=j.forwardRef((e,t)=>{var r=Pu(e,Oct);return j.createElement(uue,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Fct,tooltipPayloadSearcher:wL,categoricalChartProps:r,ref:t})});const Rct=e=>{const[t,r]=j.useState(!1),[n,a]=j.useState(null);return j.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},due=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],Pct=["Mecánica Industrial","Mecánica Automotriz"],Lct=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:due.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),vW=({empresas:e,isLoaded:t,route:r})=>{const n=j.useRef(null),a=j.useRef(null),s=j.useRef([]),i=j.useRef(null),o=e.filter(l=>{var u,d;return((u=l.coordenadas)==null?void 0:u.lat)&&((d=l.coordenadas)==null?void 0:d.lng)});return j.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(l=>l.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(l=>{const u=new window.google.maps.Marker({position:{lat:l.coordenadas.lat,lng:l.coordenadas.lng},map:a.current,title:l.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${l.nombre}</div><div>${l.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),c.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[c.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:c.jsx("div",{className:"text-center p-6",children:c.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},Mct=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,l=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return c.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[c.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),c.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,v;return c.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&c.jsx("div",{className:"space-y-3",children:(v=f.steps)==null?void 0:v.map((b,y)=>b.transit&&c.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[c.jsx("span",{className:"text-lg",children:"🚌"}),c.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),c.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[c.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),c.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),c.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(l/60)," min"]}),c.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&c.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},xW=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Uct=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),c.jsx(VC,{width:"100%",height:300,children:c.jsxs(jct,{children:[c.jsx(Bce,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>c.jsx(m2,{fill:t[n%t.length]},`cell-${n}`))}),c.jsx(HC,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),c.jsx(VC,{width:"100%",height:300,children:c.jsxs(gW,{data:e.porSupervisor,layout:"vertical",children:[c.jsx(V6,{strokeDasharray:"3 3"}),c.jsx(I5,{type:"number"}),c.jsx(j5,{type:"category",dataKey:"name",width:150}),c.jsx(HC,{}),c.jsx(H6,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),c.jsx(VC,{width:"100%",height:300,children:c.jsxs(gW,{data:e.porComuna,children:[c.jsx(V6,{strokeDasharray:"3 3"}),c.jsx(I5,{dataKey:"name"}),c.jsx(j5,{}),c.jsx(HC,{}),c.jsx(H6,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),c.jsx(VC,{width:"100%",height:300,children:c.jsxs(Dct,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[c.jsx(gce,{}),c.jsx(W4,{dataKey:"subject"}),c.jsx(G4,{angle:30,domain:[0,5]}),c.jsx(HL,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),c.jsx(HC,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),c.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:c.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>c.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[c.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),c.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},Qct=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,s]=j.useState("list"),[i,o]=j.useState(null),[l,u]=j.useState(!0),[d,f]=j.useState(null),[h,p]=j.useState(null),[g,v]=j.useState(null),[b,y]=j.useState([]),[_,S]=j.useState(null),[k,B]=j.useState(!1),[F,w]=j.useState("DRIVING"),[C,N]=j.useState(""),[P,D]=j.useState([]),T="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:U}=Rct(T);j.useEffect(()=>{u(!0);const oe=GKe(t),ce=XKe(n),ge=JKe(D);return u(!1),()=>{oe(),ce(),ge()}},[]);const R=j.useMemo(()=>{const oe=e.reduce((Se,De)=>{const _e=De.area||"Sin especificar";return Se[_e]=(Se[_e]||0)+1,Se},{}),ce=e.reduce((Se,De)=>{var he;const _e=((he=De.docenteSupervisor)==null?void 0:he.nombreCompleto)||"Sin asignar";return Se[_e]=(Se[_e]||0)+1,Se},{}),ge=e.reduce((Se,De)=>{const _e=De.direccion.split(",").map(Ie=>Ie.trim()),he=_e.length>1?_e[1]:"Desconocida";return Se[he]=(Se[he]||0)+1,Se},{}),je=due.map(Se=>{const De=e.flatMap(he=>{var Ie;return(Ie=he.calificaciones.find(He=>He.elemento===Se.elemento))==null?void 0:Ie.score}).filter(he=>he!=null),_e=De.length>0?De.reduce((he,Ie)=>he+Ie,0)/De.length:0;return{subject:Se.elemento.split(" ")[0],A:_e,fullMark:5}}),re=e.map(Se=>{const De=Se.calificaciones.map(he=>he.score).filter(he=>he!=null),_e=De.length>0?De.reduce((he,Ie)=>he+Ie,0)/De.length:0;return{...Se,promedio:_e}}).filter(Se=>Se.promedio>0).sort((Se,De)=>De.promedio-Se.promedio);return{porEspecialidad:Object.entries(oe).map(([Se,De])=>({name:Se,value:De})),porSupervisor:Object.entries(ce).map(([Se,De])=>({name:Se,value:De})),porComuna:Object.entries(ge).map(([Se,De])=>({name:Se,value:De})),calificacionPorAmbito:je,ranking:re}},[e]),X=async()=>{if(i)try{await qKe(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},q=async oe=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await WKe(oe)},Z=(oe,ce)=>{o(ge=>ge?{...ge,[oe]:ce}:null)},H=async oe=>{var ce;if(f(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&U){const ge=await xW(oe.value.place_id);Z("direccion",oe.label||""),Z("coordenadas",ge)}else Z("direccion",(oe==null?void 0:oe.label)||"")},V=oe=>{o(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},K=async oe=>{var ce;if(p(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&U){const ge=await xW(oe.value.place_id);v(ge)}},ne=oe=>{y(ce=>ce.some(ge=>ge.id===oe.id)?ce.filter(ge=>ge.id!==oe.id):[...ce,oe])},L=()=>{if(!g||b.length===0||!U)return;B(!0);const oe=new window.google.maps.DirectionsService,ce=b.filter(ge=>ge.coordenadas).map(ge=>({location:ge.coordenadas,stopover:!0}));oe.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[F]},(ge,je)=>{B(!1),je===window.google.maps.DirectionsStatus.OK&&ge?S(ge):alert("No se pudo calcular la ruta: "+je)})},W=()=>{S(null),p(null),v(null),y([]),N("")},J=async()=>{if(!C||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:C,startPoint:{label:h.label,coords:g},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:F};try{await YKe(oe),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const oe=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!oe||!ce)return;const ge=new pr("p","mm","a4"),je=ge.internal.pageSize.getWidth();ge.text(`Ruta de Supervisión: ${C||"Sin nombre"}`,10,15),ge.setFontSize(10),ge.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Se=(await IS(oe,{useCORS:!0})).toDataURL("image/png");ge.addImage(Se,"PNG",10,30,je-20,100);const _e=(await IS(ce)).toDataURL("image/png"),he=ge.getImageProperties(_e),Ie=he.height*(je-20)/he.width;ge.addImage(_e,"PNG",10,135,je-20,Ie),ge.save(`ruta-${C||"supervision"}.pdf`)},ie=oe=>{p({label:oe.startPoint.label,value:null}),v(oe.startPoint.coords),y(oe.empresas),w(oe.travelMode),N(oe.nombre),s("route")},Ae=async oe=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await ZKe(oe),alert("Ruta eliminada."))};return l?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),c.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&c.jsx("button",{onClick:()=>{s("list"),f(null),o(null),W()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[c.jsx(h1e,{size:18})," Dashboard"]}),c.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),c.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),c.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),c.jsx("button",{onClick:()=>{o(Lct()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&c.jsx(Uct,{data:R}),a==="saved-routes"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),c.jsx("div",{className:"space-y-3",children:P.length===0?c.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):P.map(oe=>c.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ie(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),c.jsx("button",{onClick:()=>Ae(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),c.jsx("input",{type:"text",value:C,onChange:oe=>N(oe.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),c.jsx(X$,{apiKey:T,selectProps:{value:h,onChange:K,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),c.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[c.jsx("button",{onClick:()=>w("DRIVING"),className:`w-full py-2 rounded-md transition ${F==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),c.jsx("button",{onClick:()=>w("TRANSIT"),className:`w-full py-2 rounded-md transition ${F==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),c.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:b.some(ce=>ce.id===oe.id),onChange:()=>ne(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("button",{onClick:L,disabled:!g||b.length===0||k,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:k?"Calculando...":"Visualizar Ruta"}),c.jsx("button",{onClick:J,disabled:!C||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),c.jsx("button",{onClick:te,disabled:!_,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),c.jsx("button",{onClick:W,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),c.jsx("div",{children:c.jsx(vW,{empresas:b,isLoaded:U,route:_})})]}),_&&c.jsx(Mct,{route:_,travelMode:F})]}),a==="map"&&c.jsx(vW,{empresas:e,isLoaded:U}),a==="list"&&c.jsx("div",{className:"space-y-3",children:e.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var ce;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((ce=oe.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>V(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),c.jsx("button",{onClick:()=>q(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&i&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Hxe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.nombre,onChange:oe=>Z("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(u1e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.rut,onChange:oe=>Z("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(Nj,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),c.jsx("div",{className:"w-full pl-10",children:c.jsx(X$,{apiKey:T,selectProps:{value:d,onChange:H,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(W7,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.contacto,onChange:oe=>Z("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(g1e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"email",value:i.email||"",onChange:oe=>Z("email",oe.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(t_,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"number",value:i.cupos,onChange:oe=>Z("cupos",parseInt(oe.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Uxe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.area||"",onChange:oe=>Z("area",oe.target.value),className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),Pct.map(oe=>c.jsx("option",{value:oe,children:oe},oe))]})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(W7,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:oe=>{const ce=oe.target.value;Z("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>c.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((oe,ce)=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[c.jsx(R1e,{className:"w-5 h-5 text-slate-400"}),c.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),c.jsxs("select",{value:oe.score||"",onChange:ge=>{const je=[...i.calificaciones];je[ce].score=ge.target.value?parseInt(ge.target.value):null,Z("calificaciones",je)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[c.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(ge=>c.jsx("option",{value:ge,children:ge},ge))]})]},ce))]}),c.jsx("div",{className:"pt-6",children:c.jsx("button",{onClick:X,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})};var g2=e=>e.type==="checkbox",fp=e=>e instanceof Date,fl=e=>e==null;const Aue=e=>typeof e=="object";var Xs=e=>!fl(e)&&!Array.isArray(e)&&Aue(e)&&!fp(e),Hct=e=>Xs(e)&&e.target?g2(e.target)?e.target.checked:e.target.value:e,Vct=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,zct=(e,t)=>e.has(Vct(t)),$ct=e=>{const t=e.constructor&&e.constructor.prototype;return Xs(t)&&t.hasOwnProperty("isPrototypeOf")},WL=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wa(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(WL&&(e instanceof Blob||n))&&(r||Xs(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!$ct(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Wa(e[a]));else return e;return t}var X4=e=>/^\w*$/.test(e),Xa=e=>e===void 0,Y4=e=>Array.isArray(e)?e.filter(Boolean):[],XL=e=>Y4(e.replace(/["|']|\]/g,"").split(/\.|\[/)),or=(e,t,r)=>{if(!t||!Xs(e))return r;const n=(X4(t)?[t]:XL(t)).reduce((a,s)=>fl(a)?a:a[s],e);return Xa(n)||n===e?Xa(e[t])?r:e[t]:n},bA=e=>typeof e=="boolean",ja=(e,t,r)=>{let n=-1;const a=X4(t)?[t]:XL(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let l=r;if(n!==i){const u=e[o];l=Xs(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=l,e=e[o]}};const bW={BLUR:"blur",FOCUS_OUT:"focusout"},Cu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Bf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},fue=lt.createContext(null);fue.displayName="HookFormContext";const Kct=()=>lt.useContext(fue);var Gct=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Cu.all&&(t._proxyFormState[i]=!n||Cu.all),e[i]}});return a};const hue=typeof window<"u"?lt.useLayoutEffect:lt.useEffect;var IA=e=>typeof e=="string",qct=(e,t,r,n,a)=>IA(e)?(n&&t.watch.add(e),or(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),or(r,s))):(n&&(t.watchAll=!0),r),W6=e=>fl(e)||!Aue(e);function E0(e,t,r=new WeakSet){if(W6(e)||W6(t))return e===t;if(fp(e)&&fp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(fp(i)&&fp(o)||Xs(i)&&Xs(o)||Array.isArray(i)&&Array.isArray(o)?!E0(i,o,r):i!==o)return!1}}return!0}var Wct=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Gl=e=>Array.isArray(e)?e:[e],yW=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},ul=e=>Xs(e)&&!Object.keys(e).length,YL=e=>e.type==="file",md=e=>typeof e=="function",O5=e=>{if(!WL)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},mue=e=>e.type==="select-multiple",JL=e=>e.type==="radio",Xct=e=>JL(e)||g2(e),QI=e=>O5(e)&&e.isConnected;function Yct(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Xa(e)?n++:e[t[n++]];return e}function Jct(e){for(const t in e)if(e.hasOwnProperty(t)&&!Xa(e[t]))return!1;return!0}function Hs(e,t){const r=Array.isArray(t)?t:X4(t)?[t]:XL(t),n=r.length===1?e:Yct(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Xs(n)&&ul(n)||Array.isArray(n)&&Jct(n))&&Hs(e,r.slice(0,-1)),e}var pue=e=>{for(const t in e)if(md(e[t]))return!0;return!1};function D5(e,t={}){const r=Array.isArray(e);if(Xs(e)||r)for(const n in e)Array.isArray(e[n])||Xs(e[n])&&!pue(e[n])?(t[n]=Array.isArray(e[n])?[]:{},D5(e[n],t[n])):fl(e[n])||(t[n]=!0);return t}function gue(e,t,r){const n=Array.isArray(e);if(Xs(e)||n)for(const a in e)Array.isArray(e[a])||Xs(e[a])&&!pue(e[a])?Xa(t)||W6(r[a])?r[a]=Array.isArray(e[a])?D5(e[a],[]):{...D5(e[a])}:gue(e[a],fl(t)?{}:t[a],r[a]):r[a]=!E0(e[a],t[a]);return r}var Ib=(e,t)=>gue(e,t,D5(t));const wW={value:!1,isValid:!1},EW={value:!0,isValid:!0};var vue=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Xa(e[0].attributes.value)?Xa(e[0].value)||e[0].value===""?EW:{value:e[0].value,isValid:!0}:EW:wW}return wW},xue=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Xa(e)?e:t?e===""?NaN:e&&+e:r&&IA(e)?new Date(e):n?n(e):e;const CW={isValid:!1,value:null};var bue=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,CW):CW;function _W(e){const t=e.ref;return YL(t)?t.files:JL(t)?bue(e.refs).value:mue(t)?[...t.selectedOptions].map(({value:r})=>r):g2(t)?vue(e.refs).value:xue(Xa(t.value)?e.ref.value:t.value,e)}var Zct=(e,t,r,n)=>{const a={};for(const s of e){const i=or(t,s);i&&ja(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},R5=e=>e instanceof RegExp,jb=e=>Xa(e)?e:R5(e)?e.source:Xs(e)?R5(e.value)?e.value.source:e.value:e,Ov=e=>({isOnSubmit:!e||e===Cu.onSubmit,isOnBlur:e===Cu.onBlur,isOnChange:e===Cu.onChange,isOnAll:e===Cu.all,isOnTouch:e===Cu.onTouched});const SW="AsyncFunction";var eut=e=>!!e&&!!e.validate&&!!(md(e.validate)&&e.validate.constructor.name===SW||Xs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===SW)),tut=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),X6=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const nx=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=or(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(nx(o,t))break}else if(Xs(o)&&nx(o,t))break}}};function NW(e,t,r){const n=or(e,r);if(n||X4(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=or(t,s),o=or(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var rut=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return ul(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Cu.all))},nut=(e,t,r)=>!e||!t||e===t||Gl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),aut=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,sut=(e,t)=>!Y4(or(e,t)).length&&Hs(e,t),yue=(e,t,r)=>{const n=Gl(or(e,r));return ja(n,"root",t[r]),ja(e,r,n),e},F_=e=>IA(e);function kW(e,t,r="validate"){if(F_(e)||Array.isArray(e)&&e.every(F_)||bA(e)&&!e)return{type:r,message:F_(e)?e:"",ref:t}}var uv=e=>Xs(e)&&!R5(e)?e:{value:e,message:""},Y6=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:l,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:v,valueAsNumber:b,mount:y}=e._f,_=or(r,v);if(!y||t.has(v))return{};const S=o?o[0]:i,k=T=>{a&&S.reportValidity&&(S.setCustomValidity(bA(T)?"":T||""),S.reportValidity())},B={},F=JL(i),w=g2(i),C=F||w,N=(b||YL(i))&&Xa(i.value)&&Xa(_)||O5(i)&&i.value===""||_===""||Array.isArray(_)&&!_.length,P=Wct.bind(null,v,n,B),D=(T,U,R,X=Bf.maxLength,q=Bf.minLength)=>{const Z=T?U:R;B[v]={type:T?X:q,message:Z,ref:i,...P(T?X:q,Z)}};if(s?!Array.isArray(_)||!_.length:l&&(!C&&(N||fl(_))||bA(_)&&!_||w&&!vue(o).isValid||F&&!bue(o).isValid)){const{value:T,message:U}=F_(l)?{value:!!l,message:l}:uv(l);if(T&&(B[v]={type:Bf.required,message:U,ref:S,...P(Bf.required,U)},!n))return k(U),B}if(!N&&(!fl(f)||!fl(h))){let T,U;const R=uv(h),X=uv(f);if(!fl(_)&&!isNaN(_)){const q=i.valueAsNumber||_&&+_;fl(R.value)||(T=q>R.value),fl(X.value)||(U=q<X.value)}else{const q=i.valueAsDate||new Date(_),Z=K=>new Date(new Date().toDateString()+" "+K),H=i.type=="time",V=i.type=="week";IA(R.value)&&_&&(T=H?Z(_)>Z(R.value):V?_>R.value:q>new Date(R.value)),IA(X.value)&&_&&(U=H?Z(_)<Z(X.value):V?_<X.value:q<new Date(X.value))}if((T||U)&&(D(!!T,R.message,X.message,Bf.max,Bf.min),!n))return k(B[v].message),B}if((u||d)&&!N&&(IA(_)||s&&Array.isArray(_))){const T=uv(u),U=uv(d),R=!fl(T.value)&&_.length>+T.value,X=!fl(U.value)&&_.length<+U.value;if((R||X)&&(D(R,T.message,U.message),!n))return k(B[v].message),B}if(p&&!N&&IA(_)){const{value:T,message:U}=uv(p);if(R5(T)&&!_.match(T)&&(B[v]={type:Bf.pattern,message:U,ref:i,...P(Bf.pattern,U)},!n))return k(U),B}if(g){if(md(g)){const T=await g(_,r),U=kW(T,S);if(U&&(B[v]={...U,...P(Bf.validate,U.message)},!n))return k(U.message),B}else if(Xs(g)){let T={};for(const U in g){if(!ul(T)&&!n)break;const R=kW(await g[U](_,r),S,U);R&&(T={...R,...P(U,R.message)},k(R.message),n&&(B[v]=T))}if(!ul(T)&&(B[v]={ref:S,...T},!n))return B}}return k(!0),B};const iut={mode:Cu.onSubmit,reValidateMode:Cu.onChange,shouldFocusError:!0};function out(e={}){let t={...iut,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:md(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Xs(t.defaultValues)||Xs(t.values)?Wa(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Wa(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:yW(),state:yW()},p=t.criteriaMode===Cu.all,g=ye=>Oe=>{clearTimeout(u),u=setTimeout(ye,Oe)},v=async ye=>{if(!t.disabled&&(d.isValid||f.isValid||ye)){const Oe=t.resolver?ul((await w()).errors):await N(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},b=(ye,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ye||Array.from(o.mount)).forEach(Pe=>{Pe&&(Oe?ja(r.validatingFields,Pe,Oe):Hs(r.validatingFields,Pe))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ul(r.validatingFields)}))},y=(ye,Oe=[],Pe,qe,Ze=!0,ot=!0)=>{if(qe&&Pe&&!t.disabled){if(i.action=!0,ot&&Array.isArray(or(n,ye))){const mt=Pe(or(n,ye),qe.argA,qe.argB);Ze&&ja(n,ye,mt)}if(ot&&Array.isArray(or(r.errors,ye))){const mt=Pe(or(r.errors,ye),qe.argA,qe.argB);Ze&&ja(r.errors,ye,mt),sut(r.errors,ye)}if((d.touchedFields||f.touchedFields)&&ot&&Array.isArray(or(r.touchedFields,ye))){const mt=Pe(or(r.touchedFields,ye),qe.argA,qe.argB);Ze&&ja(r.touchedFields,ye,mt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Ib(a,s)),h.state.next({name:ye,isDirty:D(ye,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ja(s,ye,Oe)},_=(ye,Oe)=>{ja(r.errors,ye,Oe),h.state.next({errors:r.errors})},S=ye=>{r.errors=ye,h.state.next({errors:r.errors,isValid:!1})},k=(ye,Oe,Pe,qe)=>{const Ze=or(n,ye);if(Ze){const ot=or(s,ye,Xa(Pe)?or(a,ye):Pe);Xa(ot)||qe&&qe.defaultChecked||Oe?ja(s,ye,Oe?ot:_W(Ze._f)):R(ye,ot),i.mount&&v()}},B=(ye,Oe,Pe,qe,Ze)=>{let ot=!1,mt=!1;const Bt={name:ye};if(!t.disabled){if(!Pe||qe){(d.isDirty||f.isDirty)&&(mt=r.isDirty,r.isDirty=Bt.isDirty=D(),ot=mt!==Bt.isDirty);const Lt=E0(or(a,ye),Oe);mt=!!or(r.dirtyFields,ye),Lt?Hs(r.dirtyFields,ye):ja(r.dirtyFields,ye,!0),Bt.dirtyFields=r.dirtyFields,ot=ot||(d.dirtyFields||f.dirtyFields)&&mt!==!Lt}if(Pe){const Lt=or(r.touchedFields,ye);Lt||(ja(r.touchedFields,ye,Pe),Bt.touchedFields=r.touchedFields,ot=ot||(d.touchedFields||f.touchedFields)&&Lt!==Pe)}ot&&Ze&&h.state.next(Bt)}return ot?Bt:{}},F=(ye,Oe,Pe,qe)=>{const Ze=or(r.errors,ye),ot=(d.isValid||f.isValid)&&bA(Oe)&&r.isValid!==Oe;if(t.delayError&&Pe?(l=g(()=>_(ye,Pe)),l(t.delayError)):(clearTimeout(u),l=null,Pe?ja(r.errors,ye,Pe):Hs(r.errors,ye)),(Pe?!E0(Ze,Pe):Ze)||!ul(qe)||ot){const mt={...qe,...ot&&bA(Oe)?{isValid:Oe}:{},errors:r.errors,name:ye};r={...r,...mt},h.state.next(mt)}},w=async ye=>{b(ye,!0);const Oe=await t.resolver(s,t.context,Zct(ye||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ye),Oe},C=async ye=>{const{errors:Oe}=await w(ye);if(ye)for(const Pe of ye){const qe=or(Oe,Pe);qe?ja(r.errors,Pe,qe):Hs(r.errors,Pe)}else r.errors=Oe;return Oe},N=async(ye,Oe,Pe={valid:!0})=>{for(const qe in ye){const Ze=ye[qe];if(Ze){const{_f:ot,...mt}=Ze;if(ot){const Bt=o.array.has(ot.name),Lt=Ze._f&&eut(Ze._f);Lt&&d.validatingFields&&b([qe],!0);const Ot=await Y6(Ze,o.disabled,s,p,t.shouldUseNativeValidation&&!Oe,Bt);if(Lt&&d.validatingFields&&b([qe]),Ot[ot.name]&&(Pe.valid=!1,Oe))break;!Oe&&(or(Ot,ot.name)?Bt?yue(r.errors,Ot,ot.name):ja(r.errors,ot.name,Ot[ot.name]):Hs(r.errors,ot.name))}!ul(mt)&&await N(mt,Oe,Pe)}}return Pe.valid},P=()=>{for(const ye of o.unMount){const Oe=or(n,ye);Oe&&(Oe._f.refs?Oe._f.refs.every(Pe=>!QI(Pe)):!QI(Oe._f.ref))&&Ae(ye)}o.unMount=new Set},D=(ye,Oe)=>!t.disabled&&(ye&&Oe&&ja(s,ye,Oe),!E0(K(),a)),T=(ye,Oe,Pe)=>qct(ye,o,{...i.mount?s:Xa(Oe)?a:IA(ye)?{[ye]:Oe}:Oe},Pe,Oe),U=ye=>Y4(or(i.mount?s:a,ye,t.shouldUnregister?or(a,ye,[]):[])),R=(ye,Oe,Pe={})=>{const qe=or(n,ye);let Ze=Oe;if(qe){const ot=qe._f;ot&&(!ot.disabled&&ja(s,ye,xue(Oe,ot)),Ze=O5(ot.ref)&&fl(Oe)?"":Oe,mue(ot.ref)?[...ot.ref.options].forEach(mt=>mt.selected=Ze.includes(mt.value)):ot.refs?g2(ot.ref)?ot.refs.forEach(mt=>{(!mt.defaultChecked||!mt.disabled)&&(Array.isArray(Ze)?mt.checked=!!Ze.find(Bt=>Bt===mt.value):mt.checked=Ze===mt.value||!!Ze)}):ot.refs.forEach(mt=>mt.checked=mt.value===Ze):YL(ot.ref)?ot.ref.value="":(ot.ref.value=Ze,ot.ref.type||h.state.next({name:ye,values:Wa(s)})))}(Pe.shouldDirty||Pe.shouldTouch)&&B(ye,Ze,Pe.shouldTouch,Pe.shouldDirty,!0),Pe.shouldValidate&&V(ye)},X=(ye,Oe,Pe)=>{for(const qe in Oe){if(!Oe.hasOwnProperty(qe))return;const Ze=Oe[qe],ot=ye+"."+qe,mt=or(n,ot);(o.array.has(ye)||Xs(Ze)||mt&&!mt._f)&&!fp(Ze)?X(ot,Ze,Pe):R(ot,Ze,Pe)}},q=(ye,Oe,Pe={})=>{const qe=or(n,ye),Ze=o.array.has(ye),ot=Wa(Oe);ja(s,ye,ot),Ze?(h.array.next({name:ye,values:Wa(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Pe.shouldDirty&&h.state.next({name:ye,dirtyFields:Ib(a,s),isDirty:D(ye,ot)})):qe&&!qe._f&&!fl(ot)?X(ye,ot,Pe):R(ye,ot,Pe),X6(ye,o)&&h.state.next({...r,name:ye}),h.state.next({name:i.mount?ye:void 0,values:Wa(s)})},Z=async ye=>{i.mount=!0;const Oe=ye.target;let Pe=Oe.name,qe=!0;const Ze=or(n,Pe),ot=Lt=>{qe=Number.isNaN(Lt)||fp(Lt)&&isNaN(Lt.getTime())||E0(Lt,or(s,Pe,Lt))},mt=Ov(t.mode),Bt=Ov(t.reValidateMode);if(Ze){let Lt,Ot;const Qt=Oe.type?_W(Ze._f):Hct(ye),bt=ye.type===bW.BLUR||ye.type===bW.FOCUS_OUT,Nr=!tut(Ze._f)&&!t.resolver&&!or(r.errors,Pe)&&!Ze._f.deps||aut(bt,or(r.touchedFields,Pe),r.isSubmitted,Bt,mt),rr=X6(Pe,o,bt);ja(s,Pe,Qt),bt?(!Oe||!Oe.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(ye),l&&l(0)):Ze._f.onChange&&Ze._f.onChange(ye);const nn=B(Pe,Qt,bt),Cr=!ul(nn)||rr;if(!bt&&h.state.next({name:Pe,type:ye.type,values:Wa(s)}),Nr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?bt&&v():bt||v()),Cr&&h.state.next({name:Pe,...rr?{}:nn});if(!bt&&rr&&h.state.next({...r}),t.resolver){const{errors:Vr}=await w([Pe]);if(ot(Qt),qe){const Fn=NW(r.errors,n,Pe),jr=NW(Vr,n,Fn.name||Pe);Lt=jr.error,Pe=jr.name,Ot=ul(Vr)}}else b([Pe],!0),Lt=(await Y6(Ze,o.disabled,s,p,t.shouldUseNativeValidation))[Pe],b([Pe]),ot(Qt),qe&&(Lt?Ot=!1:(d.isValid||f.isValid)&&(Ot=await N(n,!0)));qe&&(Ze._f.deps&&V(Ze._f.deps),F(Pe,Ot,Lt,nn))}},H=(ye,Oe)=>{if(or(r.errors,Oe)&&ye.focus)return ye.focus(),1},V=async(ye,Oe={})=>{let Pe,qe;const Ze=Gl(ye);if(t.resolver){const ot=await C(Xa(ye)?ye:Ze);Pe=ul(ot),qe=ye?!Ze.some(mt=>or(ot,mt)):Pe}else ye?(qe=(await Promise.all(Ze.map(async ot=>{const mt=or(n,ot);return await N(mt&&mt._f?{[ot]:mt}:mt)}))).every(Boolean),!(!qe&&!r.isValid)&&v()):qe=Pe=await N(n);return h.state.next({...!IA(ye)||(d.isValid||f.isValid)&&Pe!==r.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:Pe}:{},errors:r.errors}),Oe.shouldFocus&&!qe&&nx(n,H,ye?Ze:o.mount),qe},K=ye=>{const Oe={...i.mount?s:a};return Xa(ye)?Oe:IA(ye)?or(Oe,ye):ye.map(Pe=>or(Oe,Pe))},ne=(ye,Oe)=>({invalid:!!or((Oe||r).errors,ye),isDirty:!!or((Oe||r).dirtyFields,ye),error:or((Oe||r).errors,ye),isValidating:!!or(r.validatingFields,ye),isTouched:!!or((Oe||r).touchedFields,ye)}),L=ye=>{ye&&Gl(ye).forEach(Oe=>Hs(r.errors,Oe)),h.state.next({errors:ye?r.errors:{}})},W=(ye,Oe,Pe)=>{const qe=(or(n,ye,{_f:{}})._f||{}).ref,Ze=or(r.errors,ye)||{},{ref:ot,message:mt,type:Bt,...Lt}=Ze;ja(r.errors,ye,{...Lt,...Oe,ref:qe}),h.state.next({name:ye,errors:r.errors,isValid:!1}),Pe&&Pe.shouldFocus&&qe&&qe.focus&&qe.focus()},J=(ye,Oe)=>md(ye)?h.state.subscribe({next:Pe=>"values"in Pe&&ye(T(void 0,Oe),Pe)}):T(ye,Oe,!0),te=ye=>h.state.subscribe({next:Oe=>{nut(ye.name,Oe.name,ye.exact)&&rut(Oe,ye.formState||d,Ie,ye.reRenderRoot)&&ye.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,ie=ye=>(i.mount=!0,f={...f,...ye.formState},te({...ye,formState:f})),Ae=(ye,Oe={})=>{for(const Pe of ye?Gl(ye):o.mount)o.mount.delete(Pe),o.array.delete(Pe),Oe.keepValue||(Hs(n,Pe),Hs(s,Pe)),!Oe.keepError&&Hs(r.errors,Pe),!Oe.keepDirty&&Hs(r.dirtyFields,Pe),!Oe.keepTouched&&Hs(r.touchedFields,Pe),!Oe.keepIsValidating&&Hs(r.validatingFields,Pe),!t.shouldUnregister&&!Oe.keepDefaultValue&&Hs(a,Pe);h.state.next({values:Wa(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:D()}:{}}),!Oe.keepIsValid&&v()},oe=({disabled:ye,name:Oe})=>{(bA(ye)&&i.mount||ye||o.disabled.has(Oe))&&(ye?o.disabled.add(Oe):o.disabled.delete(Oe))},ce=(ye,Oe={})=>{let Pe=or(n,ye);const qe=bA(Oe.disabled)||bA(t.disabled);return ja(n,ye,{...Pe||{},_f:{...Pe&&Pe._f?Pe._f:{ref:{name:ye}},name:ye,mount:!0,...Oe}}),o.mount.add(ye),Pe?oe({disabled:bA(Oe.disabled)?Oe.disabled:t.disabled,name:ye}):k(ye,!0,Oe.value),{...qe?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:jb(Oe.min),max:jb(Oe.max),minLength:jb(Oe.minLength),maxLength:jb(Oe.maxLength),pattern:jb(Oe.pattern)}:{},name:ye,onChange:Z,onBlur:Z,ref:Ze=>{if(Ze){ce(ye,Oe),Pe=or(n,ye);const ot=Xa(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,mt=Xct(ot),Bt=Pe._f.refs||[];if(mt?Bt.find(Lt=>Lt===ot):ot===Pe._f.ref)return;ja(n,ye,{_f:{...Pe._f,...mt?{refs:[...Bt.filter(QI),ot,...Array.isArray(or(a,ye))?[{}]:[]],ref:{type:ot.type,name:ye}}:{ref:ot}}}),k(ye,!1,void 0,ot)}else Pe=or(n,ye,{}),Pe._f&&(Pe._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(zct(o.array,ye)&&i.action)&&o.unMount.add(ye)}}},ge=()=>t.shouldFocusError&&nx(n,H,o.mount),je=ye=>{bA(ye)&&(h.state.next({disabled:ye}),nx(n,(Oe,Pe)=>{const qe=or(n,Pe);qe&&(Oe.disabled=qe._f.disabled||ye,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||ye}))},0,!1))},re=(ye,Oe)=>async Pe=>{let qe;Pe&&(Pe.preventDefault&&Pe.preventDefault(),Pe.persist&&Pe.persist());let Ze=Wa(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ot,values:mt}=await w();r.errors=ot,Ze=Wa(mt)}else await N(n);if(o.disabled.size)for(const ot of o.disabled)Hs(Ze,ot);if(Hs(r.errors,"root"),ul(r.errors)){h.state.next({errors:{}});try{await ye(Ze,Pe)}catch(ot){qe=ot}}else Oe&&await Oe({...r.errors},Pe),ge(),setTimeout(ge);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ul(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},Se=(ye,Oe={})=>{or(n,ye)&&(Xa(Oe.defaultValue)?q(ye,Wa(or(a,ye))):(q(ye,Oe.defaultValue),ja(a,ye,Wa(Oe.defaultValue))),Oe.keepTouched||Hs(r.touchedFields,ye),Oe.keepDirty||(Hs(r.dirtyFields,ye),r.isDirty=Oe.defaultValue?D(ye,Wa(or(a,ye))):D()),Oe.keepError||(Hs(r.errors,ye),d.isValid&&v()),h.state.next({...r}))},De=(ye,Oe={})=>{const Pe=ye?Wa(ye):a,qe=Wa(Pe),Ze=ul(ye),ot=Ze?a:qe;if(Oe.keepDefaultValues||(a=Pe),!Oe.keepValues){if(Oe.keepDirtyValues){const mt=new Set([...o.mount,...Object.keys(Ib(a,s))]);for(const Bt of Array.from(mt))or(r.dirtyFields,Bt)?ja(ot,Bt,or(s,Bt)):q(Bt,or(ot,Bt))}else{if(WL&&Xa(ye))for(const mt of o.mount){const Bt=or(n,mt);if(Bt&&Bt._f){const Lt=Array.isArray(Bt._f.refs)?Bt._f.refs[0]:Bt._f.ref;if(O5(Lt)){const Ot=Lt.closest("form");if(Ot){Ot.reset();break}}}}if(Oe.keepFieldsRef)for(const mt of o.mount)q(mt,or(ot,mt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Wa(a):{}:Wa(ot),h.array.next({values:{...ot}}),h.state.next({values:{...ot}})}o={mount:Oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:Ze?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!E0(ye,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ze?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?Ib(a,s):r.dirtyFields:Oe.keepDefaultValues&&ye?Ib(a,ye):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},_e=(ye,Oe)=>De(md(ye)?ye(s):ye,Oe),he=(ye,Oe={})=>{const Pe=or(n,ye),qe=Pe&&Pe._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),Oe.shouldSelect&&md(Ze.select)&&Ze.select())}},Ie=ye=>{r={...r,...ye}},Xe={control:{register:ce,unregister:Ae,getFieldState:ne,handleSubmit:re,setError:W,_subscribe:te,_runSchema:w,_focusError:ge,_getWatch:T,_getDirty:D,_setValid:v,_setFieldArray:y,_setDisabledField:oe,_setErrors:S,_getFieldArray:U,_reset:De,_resetDefaultValues:()=>md(t.defaultValues)&&t.defaultValues().then(ye=>{_e(ye,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:je,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(ye){i=ye},get _defaultValues(){return a},get _names(){return o},set _names(ye){o=ye},get _formState(){return r},get _options(){return t},set _options(ye){t={...t,...ye}}},subscribe:ie,trigger:V,register:ce,handleSubmit:re,watch:J,setValue:q,getValues:K,reset:_e,resetField:Se,clearErrors:L,unregister:Ae,setError:W,setFocus:he,getFieldState:ne};return{...Xe,formControl:Xe}}var c0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},HI=(e,t,r={})=>r.shouldFocus||Xa(r.shouldFocus)?r.focusName||`${e}.${Xa(r.focusIndex)?t:r.focusIndex}.`:"",VI=(e,t)=>[...e,...Gl(t)],zI=e=>Array.isArray(e)?e.map(()=>{}):void 0;function $I(e,t,r){return[...e.slice(0,t),...Gl(r),...e.slice(t)]}var KI=(e,t,r)=>Array.isArray(e)?(Xa(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],GI=(e,t)=>[...Gl(t),...Gl(e)];function lut(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return Y4(n).length?n:[]}var qI=(e,t)=>Xa(t)?[]:lut(e,Gl(t).sort((r,n)=>r-n)),WI=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},BW=(e,t,r)=>(e[t]=r,e);function cut(e){const t=Kct(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,l]=lt.useState(r._getFieldArray(n)),u=lt.useRef(r._getFieldArray(n).map(c0)),d=lt.useRef(o),f=lt.useRef(!1);d.current=o,r._names.array.add(n),lt.useMemo(()=>i&&r.register(n,i),[r,i,n]),hue(()=>r._subjects.array.subscribe({next:({values:B,name:F})=>{if(F===n||!F){const w=or(B,n);Array.isArray(w)&&(l(w),u.current=w.map(c0))}}}).unsubscribe,[r,n]);const h=lt.useCallback(B=>{f.current=!0,r._setFieldArray(n,B)},[r,n]),p=(B,F)=>{const w=Gl(Wa(B)),C=VI(r._getFieldArray(n),w);r._names.focus=HI(n,C.length-1,F),u.current=VI(u.current,w.map(c0)),h(C),l(C),r._setFieldArray(n,C,VI,{argA:zI(B)})},g=(B,F)=>{const w=Gl(Wa(B)),C=GI(r._getFieldArray(n),w);r._names.focus=HI(n,0,F),u.current=GI(u.current,w.map(c0)),h(C),l(C),r._setFieldArray(n,C,GI,{argA:zI(B)})},v=B=>{const F=qI(r._getFieldArray(n),B);u.current=qI(u.current,B),h(F),l(F),!Array.isArray(or(r._fields,n))&&ja(r._fields,n,void 0),r._setFieldArray(n,F,qI,{argA:B})},b=(B,F,w)=>{const C=Gl(Wa(F)),N=$I(r._getFieldArray(n),B,C);r._names.focus=HI(n,B,w),u.current=$I(u.current,B,C.map(c0)),h(N),l(N),r._setFieldArray(n,N,$I,{argA:B,argB:zI(F)})},y=(B,F)=>{const w=r._getFieldArray(n);WI(w,B,F),WI(u.current,B,F),h(w),l(w),r._setFieldArray(n,w,WI,{argA:B,argB:F},!1)},_=(B,F)=>{const w=r._getFieldArray(n);KI(w,B,F),KI(u.current,B,F),h(w),l(w),r._setFieldArray(n,w,KI,{argA:B,argB:F},!1)},S=(B,F)=>{const w=Wa(F),C=BW(r._getFieldArray(n),B,w);u.current=[...C].map((N,P)=>!N||P===B?c0():u.current[P]),h(C),l([...C]),r._setFieldArray(n,C,BW,{argA:B,argB:w},!0,!1)},k=B=>{const F=Gl(Wa(B));u.current=F.map(c0),h([...F]),l([...F]),r._setFieldArray(n,[...F],w=>w,{},!0,!1)};return lt.useEffect(()=>{if(r._state.action=!1,X6(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Ov(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Ov(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(B=>{const F=or(B.errors,n),w=or(r._formState.errors,n);(w?!F&&w.type||F&&(w.type!==F.type||w.message!==F.message):F&&F.type)&&(F?ja(r._formState.errors,n,F):Hs(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const B=or(r._fields,n);B&&B._f&&!(Ov(r._options.reValidateMode).isOnSubmit&&Ov(r._options.mode).isOnSubmit)&&Y6(B,r._names.disabled,r._formValues,r._options.criteriaMode===Cu.all,r._options.shouldUseNativeValidation,!0).then(F=>!ul(F)&&r._subjects.state.next({errors:yue(r._formState.errors,F,n)}))}r._subjects.state.next({name:n,values:Wa(r._formValues)}),r._names.focus&&nx(r._fields,(B,F)=>{if(r._names.focus&&F.startsWith(r._names.focus)&&B.focus)return B.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),lt.useEffect(()=>(!or(r._formValues,n)&&r._setFieldArray(n),()=>{const B=(F,w)=>{const C=or(r._fields,F);C&&C._f&&(C._f.mount=w)};r._options.shouldUnregister||s?r.unregister(n):B(n,!1)}),[n,r,a,s]),{swap:lt.useCallback(y,[h,n,r]),move:lt.useCallback(_,[h,n,r]),prepend:lt.useCallback(g,[h,n,r]),append:lt.useCallback(p,[h,n,r]),remove:lt.useCallback(v,[h,n,r]),insert:lt.useCallback(b,[h,n,r]),update:lt.useCallback(S,[h,n,r]),replace:lt.useCallback(k,[h,n,r]),fields:lt.useMemo(()=>o.map((B,F)=>({...B,[a]:u.current[F]||c0()})),[o,a])}}function uut(e={}){const t=lt.useRef(void 0),r=lt.useRef(void 0),[n,a]=lt.useState({isDirty:!1,isValidating:!1,isLoading:md(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:md(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!md(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=out(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,hue(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),lt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),lt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),lt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),lt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),lt.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),lt.useEffect(()=>{e.values&&!E0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),lt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=Gct(n,s),t.current}const J6=Ut(Rr,"alternancias");async function dut(e){return(await Jn(J6,{...e,createdAt:Z0(),updatedAt:Z0()})).id}async function Aut({especialidad:e,pageSize:t=10,lastDoc:r}){let n=tr(J6,Kr("createdAt","desc"),wd(t));e&&(n=tr(J6,In("especialidad","==",e),Kr("createdAt","desc"),wd(t))),r&&(n=tr(n,ZY(r)));const a=await Ss(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function fut(e,t){const r=hr(Rr,"alternancias",e);await Ah(r,{...t,updatedAt:Z0()})}async function hut(e){const t=hr(Rr,"alternancias",e);await Is(t)}async function mut(e,t,r){const n=Ut(Rr,"alternancias",e,t);await Jn(n,{...r,createdAt:Z0()})}async function put(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=tD(wJ,r);await ZO(n,t);const a=await eD(n);return await mut(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const gut=({currentUser:e})=>{const[t,r]=j.useState([]),[n,a]=j.useState(null),[s,i]=j.useState(!1),{register:o,control:l,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=uut({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=cut({control:l,name:"actividades"}),v=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||v.some(R=>b.includes(R))))return c.jsx("div",{className:"p-4 text-red-600",children:"Acceso no autorizado"});const _=R=>(R||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),S=(R,X)=>{var q;return!R||!X?[]:((q=Nxe[R])==null?void 0:q[X])??[]},k=f("especialidad"),B=f("modulos")||[],F=j.useMemo(()=>k?Cxe[k]??[]:[],[k]),w=j.useMemo(()=>k?Sxe[k]??[]:[],[k]);j.useEffect(()=>{h("curso",[]),h("modulos",[]);const R=[...f("actividades")||[]].map(X=>({...X,modulo:"",oa:""}));h("actividades",R)},[k]),j.useEffect(()=>{const R=[...f("actividades")||[]].map(X=>X.modulo&&!B.includes(X.modulo)?{...X,modulo:"",oa:""}:X);h("actividades",R)},[B]);const C=async()=>{i(!0);const{items:R}=await Aut({});r(R),i(!1)};j.useEffect(()=>{C()},[]);const N=async R=>{n?await fut(n,{...R}):await dut({...R,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await C()},P=R=>{const X=Array.isArray(R.curso)?R.curso:R.curso?[R.curso]:[],q=Array.isArray(R.modulos)?R.modulos.map(H=>_(H)):[],Z=Array.isArray(R.actividades)?R.actividades.map(H=>({...H,modulo:H!=null&&H.modulo?_(H.modulo):"",oa:(H==null?void 0:H.oa)||""})):[];d({...R,curso:X,modulos:q,actividades:Z}),a(R.id)},D=async R=>{confirm("¿Eliminar esta alternancia?")&&(await hut(R),await C())},T=async(R,X)=>{await put(R,X),alert("Evidencia subida correctamente")},U=R=>{const X=Array.from(R.currentTarget.selectedOptions).map(q=>q.value);h("curso",X,{shouldDirty:!0})};return c.jsxs("div",{className:"p-4",children:[c.jsx("h1",{className:"text-xl font-bold mb-4",children:"Formación por Alternancia"}),s?c.jsx("p",{className:"text-sm text-gray-600",children:"Cargando…"}):c.jsx("div",{className:"mb-6",children:t.length===0?c.jsx("p",{className:"text-gray-500",children:"No hay alternancias registradas"}):c.jsx("ul",{className:"space-y-2",children:t.map(R=>c.jsxs("li",{className:"border p-2 rounded flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("span",{className:"text-sm",children:[c.jsx("strong",{children:R.especialidad})," —"," ",Array.isArray(R.curso)?R.curso.join(", "):R.curso," — ",R.institucion," —"," ",Array.isArray(R.tipoAlternancia)?R.tipoAlternancia.join(", "):""]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("label",{className:"cursor-pointer bg-yellow-500 text-white px-2 py-1 rounded flex items-center gap-1",children:[c.jsx(Q1e,{size:16}),c.jsx("input",{type:"file",className:"hidden",onChange:X=>X.target.files&&T(R.id,X.target.files[0])}),"Evidencia"]}),c.jsx("button",{type:"button",onClick:()=>P(R),className:"px-2 py-1 bg-blue-600 text-white rounded",children:"Editar"}),c.jsx("button",{type:"button",onClick:()=>D(R.id),className:"px-2 py-1 bg-red-600 text-white rounded",children:"Eliminar"})]})]},R.id))})}),c.jsxs("form",{onSubmit:u(N),className:"space-y-4 border p-4 rounded bg-white/60",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Especialidad"}),c.jsxs("select",{...o("especialidad"),className:"border rounded p-2 w-full",children:[c.jsx("option",{value:"",children:"Selecciona…"}),wxe.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Curso (puedes elegir varios)"}),c.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:U,className:"border rounded p-2 w-full min-h-[140px]",disabled:!k,children:k?F.map(R=>c.jsx("option",{value:R,children:R},R)):c.jsx("option",{value:"",children:"Elige especialidad primero"})}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ctrl/Cmd + clic para seleccionar múltiples cursos."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Institución"}),c.jsxs("select",{...o("institucion"),className:"border rounded p-2 w-full",children:[c.jsx("option",{value:"",children:"Selecciona…"}),Exe.map(R=>c.jsx("option",{value:R,children:R},R))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-2",children:"Módulos"}),k?c.jsx("div",{className:"flex flex-wrap gap-4",children:w.map(R=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",value:R,...o("modulos")}),c.jsx("span",{className:"text-sm",children:R})]},R))}):c.jsx("p",{className:"text-sm text-gray-500",children:"Elige especialidad para ver los módulos."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Tipo de Alternancia"}),c.jsx("div",{className:"flex gap-4 flex-wrap",children:_xe.map(R=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",value:R,...o("tipoAlternancia")}),R]},R))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Fundamentación técnico-pedagógica"}),c.jsx("textarea",{...o("fundamentacion"),className:"border rounded p-2 w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-2",children:"Plan de actividades"}),g.fields.map((R,X)=>{const q=f(`actividades.${X}.modulo`)||"",Z=S(k,q);return c.jsxs("div",{className:"flex flex-col gap-2 mb-3 border rounded p-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[c.jsx("input",{placeholder:"Fecha",...o(`actividades.${X}.fecha`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Tipo",...o(`actividades.${X}.tipo`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Actividad",...o(`actividades.${X}.actividad`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Lugar",...o(`actividades.${X}.lugar`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Evidencias",...o(`actividades.${X}.evidencias`),className:"border p-1 rounded"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Módulo"}),c.jsxs("select",{...o(`actividades.${X}.modulo`),className:"border p-2 rounded w-full",disabled:!k||B.length===0,children:[c.jsx("option",{value:"",children:!k&&"Elige especialidad arriba"||B.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),B.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Objetivo de Aprendizaje (OA)"}),c.jsxs("select",{...o(`actividades.${X}.oa`),className:"border p-2 rounded w-full",disabled:!q||Z.length===0,children:[c.jsx("option",{value:"",children:q?Z.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),Z.map(H=>c.jsx("option",{value:H,children:H},H))]})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"button",onClick:()=>g.remove(X),className:"text-red-600 inline-flex items-center gap-1",title:"Eliminar fila",children:[c.jsx(Yx,{size:18}),"Eliminar"]})})]},R.id)}),c.jsxs("button",{type:"button",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),className:"px-2 py-1 bg-green-600 text-white rounded flex items-center gap-1",children:[c.jsx(IJ,{size:16})," Agregar actividad"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Análisis Curricular"}),c.jsx("textarea",{...o("analisisCurricular"),className:"border rounded p-2 w-full"})]}),c.jsxs("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-2",children:[c.jsx(sD,{size:18}),"Guardar"]})]})]})},vut=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},xut=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,l=j.useMemo(()=>{const y=vxe[o]||[];return o!==er.ESTUDIANTE?y:y.filter(_=>{if(_.name==="Asistencia a Empresa"){const S=vut(e.curso||"");return S.startsWith("3º")||S.startsWith("4º")}return!0})},[o,e.curso]),[u,d]=j.useState(null),[f,h]=j.useState(!1);j.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const p=j.useCallback(y=>{d(y),window.innerWidth<768&&h(!1)},[]),g=j.useCallback(y=>{const _=l.find(S=>S.name===y);_&&p(_)},[l,p]),v=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(rxe,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(y=>c.jsxs("button",{onClick:()=>p(y),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===y.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[y.icon,c.jsx("span",{className:"ml-4",children:y.name})]},y.name))})]}),b=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return c.jsx(Iye,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(Rye,{currentUser:e});if(u.name==="Mensajería Interna")return c.jsx(A6e,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(zye,{});if(o===er.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(wbe,{currentUser:e});if(u.name==="Administración")return c.jsx(hje,{});if(u.name==="Seguimiento Curricular")return c.jsx(MKe,{currentUser:e});if(u.name==="Acompañamiento docente")return c.jsx(a6e,{currentUser:e});if(u.name==="Análisis Taxonómico")return c.jsx(o$,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(EV,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(gbe,{currentUser:e});if(u.name==="Crear horarios")return c.jsx(sye,{});if(u.name==="Seguimiento de acciones pedagógicas")return c.jsx(uye,{});if(u.name==="Inclusión")return c.jsx(yH,{currentUser:e})}if(o===er.PROFESORADO){if(u.name==="Planificación")return c.jsx(Eye,{currentUser:e});if(u.name==="Mis Acompañamientos")return c.jsx(DVe,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return c.jsx(yVe,{});if(u.name==="Análisis Taxonómico")return c.jsx(o$,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(EV,{});if(u.name==="Inclusión")return c.jsx(yH,{currentUser:e});if(u.name==="Actividades Remotas")return c.jsx(zje,{});if(u.name==="Evaluación de Aprendizajes")return c.jsx($2e,{});if(u.name==="Evaluaciones Formativas")return c.jsx(zFe,{currentUser:e})}if(o===er.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(Cje,{});if(u.name==="Asistencia Dual")return c.jsx(kFe,{});if(u.name==="Pañol")return c.jsx(e8e,{});if(u.name==="Gestión de Empresas")return c.jsx(Qct,{});if(u.name==="Alternancia TP")return c.jsx(gut,{})}if(o===er.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(sFe,{currentUser:e});if(u.name==="Evaluación Formativa")return c.jsx(kVe,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return c.jsx(FVe,{currentUser:e});if(u.name==="Asistencia a Empresa")return c.jsx(bFe,{currentUser:e})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100 dark:bg-slate-900",children:[c.jsx(J1e,{currentUser:e,onLogout:t,onNavigate:g,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(!f),unreadMessagesCount:s,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&c.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${f?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(v,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-100 dark:bg-slate-900",children:c.jsx("div",{className:"p-6 md:p-8",children:b()})})]})]})},but=({onSelectProfile:e,isAdminView:t=!1})=>c.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),c.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),c.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(aD,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:gxe.map(r=>c.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[c.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),c.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),yut=()=>{const[e,t]=j.useState(null),[r,n]=j.useState(null),[a,s]=j.useState(!0),[i,o]=j.useState(null),[l,u]=j.useState(!1),[d,f]=j.useState(null);j.useEffect(()=>{const _=dX(Lw,async S=>{if(t(S),S)try{const k=await CJ(S.email);k?(n(k),k.profile===er.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await _B())}catch{o("Error al conectar con la base de datos."),await _B()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>_()},[]);const h=async(_,S)=>{if(o(null),!_.trim()||!S.trim()){o("Por favor ingrese email y contraseña");return}try{await Zve(_.trim(),S)}catch(k){switch(k.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async _=>{try{await exe(_)}catch(S){console.error("Error al enviar email de recuperación:",S)}},g=_=>{f(_),u(!1)},v=()=>{u(!0),f(null)},b=async()=>{try{await _B()}catch(_){console.error("Error al cerrar sesión:",_)}};if(a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(aD,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return c.jsx(kxe,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(l&&r.profile===er.SUBDIRECCION)return c.jsx(but,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return c.jsx(xut,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===er.SUBDIRECCION?v:void 0,canChangeProfile:r.profile===er.SUBDIRECCION})},wue=document.getElementById("root");if(!wue)throw new Error("Could not find root element to mount to");const wut=Mde.createRoot(wue);wut.render(c.jsx(lt.StrictMode,{children:c.jsx(yut,{})}));export{pa as _,Cut as c,bl as g};
